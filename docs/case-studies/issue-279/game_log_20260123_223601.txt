[22:36:01] [INFO] ============================================================
[22:36:01] [INFO] GAME LOG STARTED
[22:36:01] [INFO] ============================================================
[22:36:01] [INFO] Timestamp: 2026-01-23T22:36:01
[22:36:01] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260123_223601.txt
[22:36:01] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
[22:36:01] [INFO] OS: Windows
[22:36:01] [INFO] Debug build: false
[22:36:01] [INFO] Engine version: 4.3-stable (official)
[22:36:01] [INFO] Project: Godot Top-Down Template
[22:36:01] [INFO] ------------------------------------------------------------
[22:36:01] [INFO] [GameManager] GameManager ready
[22:36:01] [INFO] [ScoreManager] ScoreManager ready
[22:36:01] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[22:36:01] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:36:01] [INFO] [PenultimateHit] Saturation shader loaded successfully
[22:36:01] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[22:36:01] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[22:36:01] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[22:36:01] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[22:36:01] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[22:36:01] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:36:01] [INFO] [LastChance] Last chance shader loaded successfully
[22:36:01] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[22:36:01] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[22:36:01] [INFO] [LastChance]   Sepia intensity: 0.70
[22:36:01] [INFO] [LastChance]   Brightness: 0.60
[22:36:01] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[22:36:01] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[22:36:01] [ENEMY] [Enemy1] Death animation component initialized
[22:36:01] [ENEMY] [Enemy2] Death animation component initialized
[22:36:01] [ENEMY] [Enemy3] Death animation component initialized
[22:36:01] [ENEMY] [Enemy4] Death animation component initialized
[22:36:01] [ENEMY] [Enemy5] Death animation component initialized
[22:36:01] [ENEMY] [Enemy6] Death animation component initialized
[22:36:01] [ENEMY] [Enemy7] Death animation component initialized
[22:36:01] [ENEMY] [Enemy8] Death animation component initialized
[22:36:01] [ENEMY] [Enemy9] Death animation component initialized
[22:36:01] [ENEMY] [Enemy10] Death animation component initialized
[22:36:01] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[22:36:01] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:36:01] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:36:01] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:36:01] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:36:01] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:36:01] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:36:01] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[22:36:01] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:36:01] [INFO] [ScoreManager] Level started with 10 enemies
[22:36:01] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[22:36:01] [ENEMY] [Enemy1] Registered as sound listener
[22:36:01] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[22:36:01] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[22:36:01] [ENEMY] [Enemy2] Registered as sound listener
[22:36:01] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[22:36:01] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[22:36:01] [ENEMY] [Enemy3] Registered as sound listener
[22:36:01] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[22:36:01] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[22:36:01] [ENEMY] [Enemy4] Registered as sound listener
[22:36:01] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[22:36:01] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[22:36:01] [ENEMY] [Enemy5] Registered as sound listener
[22:36:01] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[22:36:01] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[22:36:01] [ENEMY] [Enemy6] Registered as sound listener
[22:36:01] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[22:36:01] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[22:36:01] [ENEMY] [Enemy7] Registered as sound listener
[22:36:01] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 4, behavior: PATROL, player_found: yes
[22:36:01] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[22:36:01] [ENEMY] [Enemy8] Registered as sound listener
[22:36:01] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[22:36:01] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[22:36:01] [ENEMY] [Enemy9] Registered as sound listener
[22:36:01] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[22:36:01] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[22:36:01] [ENEMY] [Enemy10] Registered as sound listener
[22:36:01] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[22:36:01] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:36:01] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:36:01] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:36:01] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:36:01] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:36:01] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:36:01] [INFO] [LastChance] Found player: Player
[22:36:01] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:36:01] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:36:01] [INFO] [LastChance] Connected to player Died signal (C#)
[22:36:05] [INFO] [PauseMenu] Armory button pressed
[22:36:05] [INFO] [PauseMenu] Creating new armory menu instance
[22:36:05] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[22:36:05] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[22:36:05] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[22:36:05] [INFO] [PauseMenu] back_pressed signal exists on instance
[22:36:05] [INFO] [PauseMenu] back_pressed signal connected
[22:36:05] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[22:36:05] [INFO] [PauseMenu] _populate_weapon_grid method exists
[22:36:07] [INFO] [GrenadeManager] Grenade type changed from Flashbang to Frag Grenade
[22:36:07] [INFO] [GrenadeManager] Restarting level due to grenade type change
[22:36:07] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:36:07] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:36:07] [ENEMY] [Enemy1] Death animation component initialized
[22:36:07] [ENEMY] [Enemy2] Death animation component initialized
[22:36:07] [ENEMY] [Enemy3] Death animation component initialized
[22:36:07] [ENEMY] [Enemy4] Death animation component initialized
[22:36:07] [ENEMY] [Enemy5] Death animation component initialized
[22:36:07] [ENEMY] [Enemy6] Death animation component initialized
[22:36:07] [ENEMY] [Enemy7] Death animation component initialized
[22:36:07] [ENEMY] [Enemy8] Death animation component initialized
[22:36:07] [ENEMY] [Enemy9] Death animation component initialized
[22:36:07] [ENEMY] [Enemy10] Death animation component initialized
[22:36:07] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:36:07] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:36:07] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:36:07] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:36:07] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:36:07] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:36:07] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:36:07] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:36:07] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:36:07] [INFO] [ScoreManager] Level started with 10 enemies
[22:36:07] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:36:07] [ENEMY] [Enemy1] Registered as sound listener
[22:36:07] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[22:36:07] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:36:07] [ENEMY] [Enemy2] Registered as sound listener
[22:36:07] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[22:36:07] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:36:07] [ENEMY] [Enemy3] Registered as sound listener
[22:36:07] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[22:36:07] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:36:07] [ENEMY] [Enemy4] Registered as sound listener
[22:36:07] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[22:36:07] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:36:07] [ENEMY] [Enemy5] Registered as sound listener
[22:36:07] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[22:36:07] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:36:07] [ENEMY] [Enemy6] Registered as sound listener
[22:36:07] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[22:36:07] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:36:07] [ENEMY] [Enemy7] Registered as sound listener
[22:36:07] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[22:36:07] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:36:07] [ENEMY] [Enemy8] Registered as sound listener
[22:36:07] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[22:36:07] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:36:07] [ENEMY] [Enemy9] Registered as sound listener
[22:36:07] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[22:36:07] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:36:07] [ENEMY] [Enemy10] Registered as sound listener
[22:36:07] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[22:36:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
[22:36:07] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[22:36:07] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
[22:36:07] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
[22:36:07] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:36:07] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:36:07] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:36:07] [INFO] [LastChance] Found player: Player
[22:36:07] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:36:07] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:36:07] [INFO] [LastChance] Connected to player Died signal (C#)
[22:36:07] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:36:07] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:36:07] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:36:07] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:36:07] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:36:08] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:36:08] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:36:08] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:36:08] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:36:08] [ENEMY] [Enemy1] Death animation component initialized
[22:36:08] [ENEMY] [Enemy2] Death animation component initialized
[22:36:08] [ENEMY] [Enemy3] Death animation component initialized
[22:36:08] [ENEMY] [Enemy4] Death animation component initialized
[22:36:08] [ENEMY] [Enemy5] Death animation component initialized
[22:36:08] [ENEMY] [Enemy6] Death animation component initialized
[22:36:08] [ENEMY] [Enemy7] Death animation component initialized
[22:36:08] [ENEMY] [Enemy8] Death animation component initialized
[22:36:08] [ENEMY] [Enemy9] Death animation component initialized
[22:36:08] [ENEMY] [Enemy10] Death animation component initialized
[22:36:08] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:36:08] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:36:08] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:36:08] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:36:08] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:36:08] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:36:08] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:36:08] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:36:08] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:36:08] [INFO] [ScoreManager] Level started with 10 enemies
[22:36:08] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:36:08] [ENEMY] [Enemy1] Registered as sound listener
[22:36:08] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[22:36:08] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:36:08] [ENEMY] [Enemy2] Registered as sound listener
[22:36:08] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[22:36:08] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:36:08] [ENEMY] [Enemy3] Registered as sound listener
[22:36:08] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[22:36:08] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:36:08] [ENEMY] [Enemy4] Registered as sound listener
[22:36:08] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[22:36:08] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:36:08] [ENEMY] [Enemy5] Registered as sound listener
[22:36:08] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[22:36:08] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:36:08] [ENEMY] [Enemy6] Registered as sound listener
[22:36:08] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[22:36:08] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:36:08] [ENEMY] [Enemy7] Registered as sound listener
[22:36:08] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[22:36:08] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:36:08] [ENEMY] [Enemy8] Registered as sound listener
[22:36:08] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[22:36:08] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:36:08] [ENEMY] [Enemy9] Registered as sound listener
[22:36:08] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[22:36:08] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:36:08] [ENEMY] [Enemy10] Registered as sound listener
[22:36:08] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[22:36:08] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:36:08] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:36:08] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:36:08] [INFO] [LastChance] Found player: Player
[22:36:08] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:36:08] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:36:08] [INFO] [LastChance] Connected to player Died signal (C#)
[22:36:08] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:36:08] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:36:08] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:36:08] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:11] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:36:11] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:36:11] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:36:12] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (495.69662, 943.21826)
[22:36:12] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:36:12] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:36:12] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:36:12] [INFO] [Player.Grenade] Timer started, grenade created at (450, 940.38885)
[22:36:12] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:36:12] [INFO] [Player.Grenade] Step 1 complete! Drag: (267.89255, 2.5752563)
[22:36:12] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:36:12] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:36:12] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:36:12] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:36:12] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:36:12] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:36:13] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:36:13] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:36:13] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (675.9176, -190.1512) (702,2 px/s), Swing distance: 162,8
[22:36:13] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,27423513
[22:36:13] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (675.9176, -190.1512), Swing: 162.8, Transfer: 0.66, Final speed: 1393.0
[22:36:13] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:36:13] [INFO] [Player.Grenade] Thrown! Velocity: 702,2, Swing: 162,8
[22:36:13] [INFO] [Player.Grenade] State reset to IDLE
[22:36:13] [INFO] [Player.Grenade] Player rotation restored to 0
[22:36:13] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:36:13] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[22:36:13] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:36:14] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:36:14] [INFO] [GrenadeBase] Grenade landed at (808.9091, 594.5131)
[22:36:14] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:36:14] [INFO] [GrenadeBase] EXPLODED at (808.9091, 594.5131)!
[22:36:14] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(808.9091, 594.5131), source=NEUTRAL (FragGrenade), range=2937, listeners=20
[22:36:14] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[22:36:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[22:36:14] [ENEMY] [Enemy3] Hit taken, health: 3/4
[22:36:14] [ENEMY] [Enemy3] Hit taken, health: 2/4
[22:36:14] [ENEMY] [Enemy3] Hit taken, health: 1/4
[22:36:14] [ENEMY] [Enemy3] Hit taken, health: 0/4
[22:36:14] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:36:14] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:36:14] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:36:14] [INFO] [DeathAnim] Started - Angle: 128.2 deg, Index: 20
[22:36:14] [ENEMY] [Enemy3] Death animation started with hit direction: (-0.617945, 0.786222)
[22:36:14] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 201.7
[22:36:14] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -5.4 degrees
[22:36:14] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 105.1 degrees
[22:36:14] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 173.6 degrees
[22:36:14] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 287.1 degrees
[22:36:14] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:36:14] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:36:14] [ENEMY] [Enemy1] Death animation component initialized
[22:36:14] [ENEMY] [Enemy2] Death animation component initialized
[22:36:14] [ENEMY] [Enemy3] Death animation component initialized
[22:36:14] [ENEMY] [Enemy4] Death animation component initialized
[22:36:14] [ENEMY] [Enemy5] Death animation component initialized
[22:36:14] [ENEMY] [Enemy6] Death animation component initialized
[22:36:14] [ENEMY] [Enemy7] Death animation component initialized
[22:36:14] [ENEMY] [Enemy8] Death animation component initialized
[22:36:14] [ENEMY] [Enemy9] Death animation component initialized
[22:36:14] [ENEMY] [Enemy10] Death animation component initialized
[22:36:14] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:36:14] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:36:14] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:36:14] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:36:14] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:36:14] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:36:14] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:36:14] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:36:14] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:36:14] [INFO] [ScoreManager] Level started with 10 enemies
[22:36:14] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:36:14] [ENEMY] [Enemy1] Registered as sound listener
[22:36:14] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[22:36:14] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:36:14] [ENEMY] [Enemy2] Registered as sound listener
[22:36:14] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[22:36:14] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:36:14] [ENEMY] [Enemy3] Registered as sound listener
[22:36:14] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[22:36:14] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:36:14] [ENEMY] [Enemy4] Registered as sound listener
[22:36:14] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[22:36:14] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:36:14] [ENEMY] [Enemy5] Registered as sound listener
[22:36:14] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[22:36:14] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:36:14] [ENEMY] [Enemy6] Registered as sound listener
[22:36:14] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[22:36:14] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:36:14] [ENEMY] [Enemy7] Registered as sound listener
[22:36:14] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[22:36:14] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:36:14] [ENEMY] [Enemy8] Registered as sound listener
[22:36:14] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[22:36:14] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:36:14] [ENEMY] [Enemy9] Registered as sound listener
[22:36:14] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[22:36:14] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:36:14] [ENEMY] [Enemy10] Registered as sound listener
[22:36:14] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[22:36:14] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:36:14] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:36:14] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:36:14] [INFO] [LastChance] Found player: Player
[22:36:14] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:36:14] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:36:14] [INFO] [LastChance] Connected to player Died signal (C#)
[22:36:14] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:36:14] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:36:14] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:36:15] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:36:15] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:36:15] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (553.15594, 1318.7941)
[22:36:15] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:36:15] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:36:15] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:36:15] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[22:36:15] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:36:15] [INFO] [Player.Grenade] Step 1 complete! Drag: (337.604, -8.682739)
[22:36:15] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:36:15] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:36:15] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:36:15] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:36:15] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:36:15] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:36:16] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[22:36:16] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:36:17] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:36:17] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:36:17] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (196.48723, -250.91147) (318,7 px/s), Swing distance: 449,8
[22:36:17] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,9064494
[22:36:17] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (196.4872, -250.9115), Swing: 449.8, Transfer: 1.00, Final speed: 961.5
[22:36:17] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:36:17] [INFO] [Player.Grenade] Thrown! Velocity: 318,7, Swing: 449,8
[22:36:17] [INFO] [Player.Grenade] State reset to IDLE
[22:36:17] [INFO] [Player.Grenade] Player rotation restored to 0
[22:36:17] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:36:17] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[22:36:18] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:36:18] [INFO] [GrenadeBase] Grenade landed at (642.1039, 837.4653)
[22:36:18] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:36:18] [INFO] [GrenadeBase] EXPLODED at (642.1039, 837.4653)!
[22:36:18] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(642.1039, 837.4653), source=NEUTRAL (FragGrenade), range=2937, listeners=19
[22:36:18] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:36:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[22:36:18] [ENEMY] [Enemy3] Hit taken, health: 1/2
[22:36:18] [ENEMY] [Enemy3] Hit taken, health: 0/2
[22:36:18] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:36:18] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:36:18] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:36:18] [INFO] [DeathAnim] Started - Angle: -60.9 deg, Index: 7
[22:36:18] [ENEMY] [Enemy3] Death animation started with hit direction: (0.486454, -0.873706)
[22:36:18] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 97.6
[22:36:18] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 10.9 degrees
[22:36:18] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 73.5 degrees
[22:36:18] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 194.7 degrees
[22:36:18] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 289.2 degrees
[22:36:18] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:18] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:18] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[22:36:18] [ENEMY] [Enemy3] Ragdoll activated
[22:36:18] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:36:18] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:19] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:19] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:36:19] [ENEMY] [Enemy3] Death animation completed
[22:36:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:20] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:36:20] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:20] [ENEMY] [Enemy4] State: IDLE -> COMBAT
[22:36:20] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:36:20] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:36:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:20] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:36:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(589.7499, 953.895), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:36:21] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
[22:36:21] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[22:36:21] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
[22:36:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(618.2492, 978.039), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:36:21] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
[22:36:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(589.7499, 953.89496), shooter_id=141113166842, bullet_pos=(932.1421, 848.2053)
[22:36:21] [INFO] [Bullet] Using shooter_position, distance=358,33325
[22:36:21] [INFO] [Bullet] Distance to wall: 358,33325 (24,39957% of viewport)
[22:36:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(589.7499, 953.89496), shooter_id=141113166842, bullet_pos=(754.6689, 807.4914)
[22:36:21] [INFO] [Bullet] Using shooter_position, distance=220,52728
[22:36:21] [INFO] [Bullet] Distance to wall: 220,52728 (15,0161085% of viewport)
[22:36:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:21] [INFO] [Bullet] Starting wall penetration at (754.6689, 807.4914)
[22:36:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.6163, 988.0168), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:36:21] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
[22:36:21] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[22:36:21] [INFO] [Bullet] Exiting penetration at (715.2755, 798.4542) after traveling 35,41667 pixels through wall
[22:36:21] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[22:36:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(618.2492, 978.039), shooter_id=141113166842, bullet_pos=(921.18695, 885.8078)
[22:36:21] [INFO] [Bullet] Using shooter_position, distance=316,6668
[22:36:21] [INFO] [Bullet] Distance to wall: 316,6668 (21,562426% of viewport)
[22:36:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:21] [INFO] [Bullet] Starting wall penetration at (921.18695, 885.8078)
[22:36:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31,182287
[22:36:21] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:21] [INFO] [Bullet] Exiting penetration at (965.8304, 872.2158) after traveling 41,66667 pixels through wall
[22:36:21] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:36:21] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[22:36:21] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[22:36:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.6163, 988.01685), shooter_id=141113166842, bullet_pos=(756.91565, 880.2131)
[22:36:21] [INFO] [Bullet] Using shooter_position, distance=150,00005
[22:36:21] [INFO] [Bullet] Distance to wall: 150,00005 (10,2137785% of viewport)
[22:36:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.6163, 988.01685), shooter_id=141113166842, bullet_pos=(893.49005, 1000.6363)
[22:36:21] [INFO] [Bullet] Using shooter_position, distance=241,20412
[22:36:21] [INFO] [Bullet] Distance to wall: 241,20412 (16,424032% of viewport)
[22:36:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:21] [INFO] [Bullet] Starting wall penetration at (893.49005, 1000.6363)
[22:36:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15,738827
[22:36:21] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:21] [INFO] [Bullet] Exiting penetration at (923.8052, 1027.3663) after traveling 35,416668 pixels through wall
[22:36:21] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[22:36:21] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:36:21] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:36:21] [ENEMY] [Enemy1] Death animation component initialized
[22:36:21] [ENEMY] [Enemy2] Death animation component initialized
[22:36:21] [ENEMY] [Enemy3] Death animation component initialized
[22:36:21] [ENEMY] [Enemy4] Death animation component initialized
[22:36:21] [ENEMY] [Enemy5] Death animation component initialized
[22:36:21] [ENEMY] [Enemy6] Death animation component initialized
[22:36:21] [ENEMY] [Enemy7] Death animation component initialized
[22:36:21] [ENEMY] [Enemy8] Death animation component initialized
[22:36:21] [ENEMY] [Enemy9] Death animation component initialized
[22:36:21] [ENEMY] [Enemy10] Death animation component initialized
[22:36:21] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:36:21] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:36:21] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:36:21] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:36:21] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:36:21] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:36:21] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:36:21] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[22:36:21] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:36:21] [INFO] [ScoreManager] Level started with 10 enemies
[22:36:21] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:36:21] [ENEMY] [Enemy1] Registered as sound listener
[22:36:21] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[22:36:21] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:36:21] [ENEMY] [Enemy2] Registered as sound listener
[22:36:21] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[22:36:21] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:36:21] [ENEMY] [Enemy3] Registered as sound listener
[22:36:21] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[22:36:21] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:36:21] [ENEMY] [Enemy4] Registered as sound listener
[22:36:21] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[22:36:21] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:36:21] [ENEMY] [Enemy5] Registered as sound listener
[22:36:21] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[22:36:21] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:36:21] [ENEMY] [Enemy6] Registered as sound listener
[22:36:21] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[22:36:21] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:36:21] [ENEMY] [Enemy7] Registered as sound listener
[22:36:21] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[22:36:21] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:36:21] [ENEMY] [Enemy8] Registered as sound listener
[22:36:21] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[22:36:21] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:36:21] [ENEMY] [Enemy9] Registered as sound listener
[22:36:21] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[22:36:21] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:36:21] [ENEMY] [Enemy10] Registered as sound listener
[22:36:21] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[22:36:21] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:36:21] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:36:21] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:36:21] [INFO] [LastChance] Found player: Player
[22:36:21] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:36:21] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:36:21] [INFO] [LastChance] Connected to player Died signal (C#)
[22:36:21] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:36:21] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:36:21] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:36:22] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:22] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:36:23] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:36:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 780.3333), source=PLAYER (AssaultRifle), range=1469, listeners=19
[22:36:23] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:36:23] [ENEMY] [Enemy1] Heard gunshot at (450, 780.3333), source_type=0, intensity=0.01, distance=456
[22:36:23] [ENEMY] [Enemy2] Heard gunshot at (450, 780.3333), source_type=0, intensity=0.05, distance=236
[22:36:23] [ENEMY] [Enemy4] Heard gunshot at (450, 780.3333), source_type=0, intensity=0.02, distance=370
[22:36:23] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:36:23] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:23] [ENEMY] [Enemy3] Hit taken, health: 2/3
[22:36:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(453.8743, 758.3824), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:36:23] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:36:23] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:23] [ENEMY] [Enemy3] Hit taken, health: 1/3
[22:36:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(466.0293, 746.853), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:36:23] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:36:23] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[22:36:23] [ENEMY] [Enemy3] Hit taken, health: 0/3
[22:36:23] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:36:23] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:36:23] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:36:23] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:36:23] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:36:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(486.947, 745.777), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:36:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[22:36:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(486.94696, 745.77704), shooter_id=201947351778, bullet_pos=(911.7234, 731.9936)
[22:36:23] [INFO] [Bullet] Using shooter_position, distance=425
[22:36:23] [INFO] [Bullet] Distance to wall: 425 (28,939034% of viewport)
[22:36:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:23] [INFO] [Bullet] Starting wall penetration at (911.7234, 731.9936)
[22:36:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 14,043949
[22:36:23] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:23] [INFO] [Bullet] Exiting penetration at (950.03656, 730.75037) after traveling 33,333336 pixels through wall
[22:36:23] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:36:23] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:36:23] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:36:23] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:36:23] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:36:23] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:36:24] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (656.37775, 727.7938)
[22:36:24] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:36:24] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:36:24] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:36:24] [INFO] [Player.Grenade] Timer started, grenade created at (522.2253, 772.36414)
[22:36:24] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:36:24] [INFO] [Player.Grenade] Step 1 complete! Drag: (360.40668, -18.301758)
[22:36:24] [ENEMY] [Enemy3] Ragdoll activated
[22:36:24] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:36:24] [INFO] [Player.Grenade] G released - dropping grenade at feet
[22:36:24] [INFO] [Player.Grenade] Grenade dropped at feet at (522.2253, 772.36414) (unfrozen)
[22:36:24] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:36:24] [INFO] [Player.Grenade] State reset to IDLE
[22:36:24] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:36:25] [ENEMY] [Enemy3] Death animation completed
[22:36:25] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:36:25] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:36:25] [ENEMY] [Enemy1] Death animation component initialized
[22:36:25] [ENEMY] [Enemy2] Death animation component initialized
[22:36:25] [ENEMY] [Enemy3] Death animation component initialized
[22:36:25] [ENEMY] [Enemy4] Death animation component initialized
[22:36:25] [ENEMY] [Enemy5] Death animation component initialized
[22:36:25] [ENEMY] [Enemy6] Death animation component initialized
[22:36:25] [ENEMY] [Enemy7] Death animation component initialized
[22:36:25] [ENEMY] [Enemy8] Death animation component initialized
[22:36:25] [ENEMY] [Enemy9] Death animation component initialized
[22:36:25] [ENEMY] [Enemy10] Death animation component initialized
[22:36:25] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:36:25] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:36:25] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:36:25] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:36:25] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:36:25] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:36:25] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:36:25] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:36:25] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:36:25] [INFO] [ScoreManager] Level started with 10 enemies
[22:36:25] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:36:25] [ENEMY] [Enemy1] Registered as sound listener
[22:36:25] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[22:36:25] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:36:25] [ENEMY] [Enemy2] Registered as sound listener
[22:36:25] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[22:36:25] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:36:25] [ENEMY] [Enemy3] Registered as sound listener
[22:36:25] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[22:36:25] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:36:25] [ENEMY] [Enemy4] Registered as sound listener
[22:36:25] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[22:36:25] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:36:25] [ENEMY] [Enemy5] Registered as sound listener
[22:36:25] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[22:36:25] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:36:25] [ENEMY] [Enemy6] Registered as sound listener
[22:36:25] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[22:36:25] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:36:25] [ENEMY] [Enemy7] Registered as sound listener
[22:36:25] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[22:36:25] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:36:25] [ENEMY] [Enemy8] Registered as sound listener
[22:36:25] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[22:36:25] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:36:25] [ENEMY] [Enemy9] Registered as sound listener
[22:36:25] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[22:36:25] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:36:25] [ENEMY] [Enemy10] Registered as sound listener
[22:36:25] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[22:36:25] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:36:25] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:36:25] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:36:25] [INFO] [LastChance] Found player: Player
[22:36:25] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:36:25] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:36:25] [INFO] [LastChance] Connected to player Died signal (C#)
[22:36:25] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:36:25] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:36:25] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:36:26] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:26] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:36:27] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:36:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 773.4443), source=PLAYER (AssaultRifle), range=1469, listeners=19
[22:36:27] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:36:27] [ENEMY] [Enemy1] Heard gunshot at (450, 773.4443), source_type=0, intensity=0.01, distance=449
[22:36:27] [ENEMY] [Enemy2] Heard gunshot at (450, 773.4443), source_type=0, intensity=0.05, distance=229
[22:36:27] [ENEMY] [Enemy4] Heard gunshot at (450, 773.4443), source_type=0, intensity=0.02, distance=372
[22:36:27] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:36:27] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:27] [ENEMY] [Enemy3] Hit taken, health: 2/3
[22:36:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 751.08), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:36:27] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:36:27] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:27] [ENEMY] [Enemy3] Hit taken, health: 1/3
[22:36:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 743.3999), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:36:27] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:36:27] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[22:36:27] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:27] [ENEMY] [Enemy3] Hit taken, health: 0/3
[22:36:27] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:36:27] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:36:27] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:36:27] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:36:27] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:36:28] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:28] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:36:28] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:28] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:36:28] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:36:28] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:36:28] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:28] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1061.5444, 729.39905)
[22:36:28] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:28] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:36:28] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:36:28] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:36:28] [INFO] [Player.Grenade] Timer started, grenade created at (450, 805.24)
[22:36:28] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:36:28] [INFO] [Player.Grenade] Step 1 complete! Drag: (218.45508, -0.35632324)
[22:36:28] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:36:28] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:36:28] [ENEMY] [Enemy3] Ragdoll activated
[22:36:28] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:36:28] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:28] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:36:28] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:36:28] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:28] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:36:28] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:36:28] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:29] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:29] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:29] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:36:29] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:36:29] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (-4355.6436, -1846.971) (4731,1 px/s), Swing distance: 489,8
[22:36:29] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -2,7405348
[22:36:29] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (-4355.644, -1846.971), Swing: 489.8, Transfer: 1.00, Final speed: 2756.3
[22:36:29] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:36:29] [INFO] [Player.Grenade] Thrown! Velocity: 4731,1, Swing: 489,8
[22:36:29] [INFO] [Player.Grenade] State reset to IDLE
[22:36:29] [ENEMY] [Enemy3] Death animation completed
[22:36:29] [INFO] [Player.Grenade] Player rotation restored to 0
[22:36:29] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:36:30] [ENEMY] [Enemy4] FLANKING started: target=(873.4753, 738.7972), side=left, pos=(755.855, 914.697)
[22:36:30] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[22:36:30] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:36:30] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:36:30] [INFO] [GrenadeBase] Grenade landed at (197.938, 368.3489)
[22:36:30] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:36:30] [INFO] [GrenadeBase] EXPLODED at (197.938, 368.3489)!
[22:36:30] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(197.938, 368.3489), source=NEUTRAL (FragGrenade), range=2937, listeners=9
[22:36:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
[22:36:30] [ENEMY] [Enemy1] Hit taken, health: 2/3
[22:36:30] [ENEMY] [Enemy1] Hit taken, health: 1/3
[22:36:30] [ENEMY] [Enemy1] Hit taken, health: 0/3
[22:36:30] [ENEMY] [Enemy1] Enemy died (ricochet: false, penetration: false)
[22:36:30] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[22:36:30] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 8)
[22:36:30] [INFO] [DeathAnim] Started - Angle: 6.8 deg, Index: 12
[22:36:30] [ENEMY] [Enemy1] Death animation started with hit direction: (0.993023, 0.117923)
[22:36:30] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 119.2
[22:36:30] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -2.6 degrees
[22:36:30] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 82.3 degrees
[22:36:30] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 199.4 degrees
[22:36:30] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 271.6 degrees
[22:36:30] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:36:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(757.7537, 799.9335), source=PLAYER (AssaultRifle), range=1469, listeners=8
[22:36:30] [ENEMY] [Enemy4] Heard gunshot at (757.7537, 799.9335), source_type=0, intensity=0.38, distance=81
[22:36:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
[22:36:30] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[22:36:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(757.7537, 799.9335), shooter_id=242850204585, bullet_pos=(911.7439, 963.9823)
[22:36:30] [INFO] [Bullet] Using shooter_position, distance=224,99998
[22:36:30] [INFO] [Bullet] Distance to wall: 224,99998 (15,320663% of viewport)
[22:36:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:30] [INFO] [Bullet] Starting wall penetration at (911.7439, 963.9823)
[22:36:30] [INFO] [Bullet] Raycast backward hit penetrating body at distance 2,891934
[22:36:30] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:36:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(781.9817, 799.0548), source=PLAYER (AssaultRifle), range=1469, listeners=8
[22:36:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
[22:36:30] [INFO] [Bullet] Max penetration distance exceeded: 66,666664 >= 48
[22:36:30] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:30] [INFO] [Bullet] Exiting penetration at (960.7926, 1016.23486) after traveling 66,666664 pixels through wall
[22:36:30] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:36:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(781.9817, 799.0548), shooter_id=242850204585, bullet_pos=(900.83386, 990.10236)
[22:36:30] [INFO] [Bullet] Using shooter_position, distance=225,00002
[22:36:30] [INFO] [Bullet] Distance to wall: 225,00002 (15,320664% of viewport)
[22:36:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:30] [ENEMY] [Enemy2] Hit taken, health: 1/2
[22:36:30] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:36:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(781.9817, 799.0548), shooter_id=242850204585, bullet_pos=(887.8753, 1020.81366)
[22:36:30] [INFO] [Bullet] Using shooter_position, distance=245,74467
[22:36:30] [INFO] [Bullet] Distance to wall: 245,74467 (16,733208% of viewport)
[22:36:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:30] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:36:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(810.2571, 781.7805), source=PLAYER (AssaultRifle), range=1469, listeners=8
[22:36:30] [ENEMY] [Enemy4] Heard gunshot at (810.2571, 781.7805), source_type=0, intensity=1.00, distance=47
[22:36:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
[22:36:30] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:36:30] [INFO] [LastChance] Threat detected: @Area2D@1662
[22:36:30] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:36:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:36:30] [ENEMY] [Enemy10] FLANKING started: target=(670.6323, 900.5764), side=right, pos=(955.1431, 1418.083)
[22:36:30] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[22:36:31] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[22:36:31] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[22:36:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(810.25714, 781.78046), shooter_id=242850204585, bullet_pos=(920.3405, 604.9064)
[22:36:31] [INFO] [Bullet] Using shooter_position, distance=208,33336
[22:36:31] [INFO] [Bullet] Distance to wall: 208,33336 (14,185802% of viewport)
[22:36:31] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:31] [ENEMY] [Enemy4] Hit taken, health: 3/4
[22:36:31] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:36:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(836.5354, 763.8746), source=PLAYER (AssaultRifle), range=1469, listeners=8
[22:36:31] [ENEMY] [Enemy4] Heard gunshot at (836.5354, 763.8746), source_type=0, intensity=0.86, distance=54
[22:36:31] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
[22:36:31] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:36:31] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:31] [ENEMY] [Enemy1] Ragdoll activated
[22:36:31] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:36:31] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[22:36:31] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:36:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(861.8883, 757.4993), source=PLAYER (AssaultRifle), range=1469, listeners=8
[22:36:31] [ENEMY] [Enemy4] Heard gunshot at (861.8883, 757.4993), source_type=0, intensity=0.73, distance=58
[22:36:31] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
[22:36:31] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:36:31] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(428.212, 551.7565), source=ENEMY (Enemy2), range=1469, listeners=8
[22:36:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=4
[22:36:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(432.4705, 552.0217), source=ENEMY (Enemy2), range=1469, listeners=8
[22:36:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=4
[22:36:31] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[22:36:31] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:36:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.7401, 587.1678), shooter_id=239746418250, bullet_pos=(520.9855, 601.1794)
[22:36:31] [INFO] [Bullet] Using shooter_position, distance=33.3333549499512
[22:36:31] [INFO] [Bullet] Distance to wall: 33.3333549499512 (2.26972943317711% of viewport)
[22:36:31] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:31] [INFO] [Bullet] Starting wall penetration at (520.9855, 601.1794)
[22:36:31] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[22:36:31] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41.1390419006348
[22:36:31] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:31] [INFO] [Bullet] Exiting penetration at (555.7678, 617.2927) after traveling 33.3333358764648 pixels through wall
[22:36:31] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:36:31] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[22:36:31] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(810.25714, 781.78046), shooter_id=242850204585, bullet_pos=(605.9319, 52.72769)
[22:36:31] [INFO] [Bullet] Using shooter_position, distance=757,1438
[22:36:31] [INFO] [Bullet] Distance to wall: 757,1438 (51,555317% of viewport)
[22:36:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(836.5354, 763.87463), shooter_id=242850204585, bullet_pos=(765.5678, 42.35627)
[22:36:31] [INFO] [Bullet] Using shooter_position, distance=725,00006
[22:36:31] [INFO] [Bullet] Distance to wall: 725,00006 (49,36659% of viewport)
[22:36:31] [INFO] [Bullet] Distance-based penetration chance: 89,07232%
[22:36:31] [INFO] [Bullet] Starting wall penetration at (765.5678, 42.35627)
[22:36:31] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27,927095
[22:36:31] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:31] [INFO] [Bullet] Exiting penetration at (761.8155, 4.2070236) after traveling 33,333336 pixels through wall
[22:36:31] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:36:31] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:36:31] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
[22:36:31] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[22:36:31] [ENEMY] [Enemy4] Hit taken, health: 2/4
[22:36:31] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(446.6742, 555.0399), source=ENEMY (Enemy2), range=1469, listeners=8
[22:36:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=4
[22:36:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(507.6226, 585.3036), shooter_id=239746418250, bullet_pos=(507.6226, 585.3036)
[22:36:31] [INFO] [Bullet] Using shooter_position, distance=0
[22:36:31] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[22:36:31] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:31] [INFO] [Bullet] Starting wall penetration at (507.6226, 585.3036)
[22:36:31] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.924165725708
[22:36:31] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:31] [INFO] [Bullet] Exiting penetration at (543.6841, 598.3042) after traveling 33.3333358764648 pixels through wall
[22:36:31] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:36:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(861.8883, 757.4993), shooter_id=242850204585, bullet_pos=(678.005, 56.20619)
[22:36:31] [INFO] [Bullet] Using shooter_position, distance=725,0001
[22:36:31] [INFO] [Bullet] Distance to wall: 725,0001 (49,366592% of viewport)
[22:36:31] [INFO] [Bullet] Distance-based penetration chance: 89,07231%
[22:36:31] [INFO] [Bullet] Starting wall penetration at (678.005, 56.20619)
[22:36:31] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13,308872
[22:36:31] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:31] [INFO] [Bullet] Exiting penetration at (668.2825, 19.126316) after traveling 33,333336 pixels through wall
[22:36:31] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:36:31] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:36:31] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:31] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:36:31] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[22:36:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(810.25714, 781.78046), shooter_id=242850204585, bullet_pos=(296.02924, 427.96762)
[22:36:31] [INFO] [Bullet] Using shooter_position, distance=624,19055
[22:36:31] [INFO] [Bullet] Distance to wall: 624,19055 (42,502285% of viewport)
[22:36:31] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[22:36:31] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:36:31] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[22:36:31] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[22:36:31] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[22:36:31] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[22:36:31] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:36:32] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[22:36:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(810.25714, 781.78046), shooter_id=242850204585, bullet_pos=(73.0249, 54.60955)
[22:36:32] [INFO] [Bullet] Using shooter_position, distance=1035,5138
[22:36:32] [INFO] [Bullet] Distance to wall: 1035,5138 (70,51004% of viewport)
[22:36:32] [INFO] [Bullet] Distance-based penetration chance: 64,40495%
[22:36:32] [INFO] [Bullet] Starting wall penetration at (73.0249, 54.60955)
[22:36:32] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[22:36:32] [INFO] [Bullet] Exiting penetration at (59.963806, 32.742424) after traveling 20,470835 pixels through wall
[22:36:32] [INFO] [Bullet] Damage multiplier after penetration: 0,1125
[22:36:32] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:36:32] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:32] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[22:36:32] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:36:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(856.8361, 956.9059), source=PLAYER (AssaultRifle), range=1469, listeners=8
[22:36:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=6
[22:36:32] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(856.83606, 956.9059), shooter_id=242850204585, bullet_pos=(750.0434, 840.00934)
[22:36:32] [INFO] [Bullet] Using shooter_position, distance=158,33344
[22:36:32] [INFO] [Bullet] Distance to wall: 158,33344 (10,781215% of viewport)
[22:36:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:32] [INFO] [Bullet] Starting wall penetration at (750.0434, 840.00934)
[22:36:32] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[22:36:32] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[22:36:32] [INFO] [Bullet] Exiting penetration at (724.18835, 811.70807) after traveling 33,333336 pixels through wall
[22:36:32] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:36:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(831.9459, 981.796), source=PLAYER (AssaultRifle), range=1469, listeners=8
[22:36:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=6
[22:36:32] [ENEMY] [Enemy1] Death animation completed
[22:36:32] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:32] [ENEMY] [Enemy4] Hit taken, health: 1/4
[22:36:32] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[22:36:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(807.0557, 989.9338), source=PLAYER (AssaultRifle), range=1469, listeners=8
[22:36:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=6
[22:36:32] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:32] [ENEMY] [Enemy4] Hit taken, health: 0/4
[22:36:32] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[22:36:32] [INFO] [ScoreManager] Kill registered. Combo: 3 (points: 3000)
[22:36:32] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 7)
[22:36:32] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:36:32] [ENEMY] [Enemy4] Death animation started with hit direction: (1, 0)
[22:36:32] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[22:36:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(782.1656, 989.9338), source=PLAYER (AssaultRifle), range=1469, listeners=7
[22:36:32] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=6
[22:36:32] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:32] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[22:36:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(782.1656, 989.9338), shooter_id=242850204585, bullet_pos=(511.72748, 809.68854)
[22:36:32] [INFO] [Bullet] Using shooter_position, distance=325,00018
[22:36:32] [INFO] [Bullet] Distance to wall: 325,00018 (22,12986% of viewport)
[22:36:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:32] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[22:36:32] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:32] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[22:36:32] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:32] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[22:36:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(782.1656, 989.9338), shooter_id=242850204585, bullet_pos=(930.4901, 623.3896)
[22:36:33] [INFO] [Bullet] Using shooter_position, distance=395,41727
[22:36:33] [INFO] [Bullet] Distance to wall: 395,41727 (26,92469% of viewport)
[22:36:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:33] [INFO] [Bullet] Starting wall penetration at (930.4901, 623.3896)
[22:36:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27,302774
[22:36:33] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:33] [INFO] [Bullet] Exiting penetration at (960.94556, 609.8406) after traveling 28,333334 pixels through wall
[22:36:33] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[22:36:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:33] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[22:36:33] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[22:36:33] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[22:36:33] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[22:36:33] [ENEMY] [Enemy4] Ragdoll activated
[22:36:33] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:36:33] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[22:36:33] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[22:36:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:33] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[22:36:33] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[22:36:33] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[22:36:33] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[22:36:33] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[22:36:33] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[22:36:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:33] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[22:36:33] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[22:36:33] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[22:36:33] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[22:36:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(501.8463, 1058.412), source=ENEMY (Enemy10), range=1469, listeners=7
[22:36:33] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=4
[22:36:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(544.9338, 1005.742), shooter_id=242028119652, bullet_pos=(544.9338, 1005.742)
[22:36:33] [INFO] [Bullet] Using shooter_position, distance=0
[22:36:33] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[22:36:33] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:33] [INFO] [Bullet] Starting wall penetration at (544.9338, 1005.742)
[22:36:33] [INFO] [LastChance] Threat detected: Bullet
[22:36:33] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:36:33] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:36:33] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[22:36:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31.5090770721436
[22:36:33] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:33] [INFO] [Bullet] Exiting penetration at (565.6452, 973.4859) after traveling 33.3333320617676 pixels through wall
[22:36:33] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:36:33] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[22:36:33] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[22:36:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(501.8463, 1058.412), source=ENEMY (Enemy10), range=1469, listeners=7
[22:36:33] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=4
[22:36:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(538.3006, 1000.951), shooter_id=242028119652, bullet_pos=(538.3006, 1000.951)
[22:36:33] [INFO] [Bullet] Using shooter_position, distance=0
[22:36:33] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[22:36:33] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:33] [INFO] [Bullet] Starting wall penetration at (538.3006, 1000.951)
[22:36:33] [INFO] [LastChance] Threat detected: Bullet
[22:36:33] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:36:33] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:36:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.2765426635742
[22:36:33] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:33] [INFO] [Bullet] Exiting penetration at (554.9905, 966.4421) after traveling 33.3333320617676 pixels through wall
[22:36:33] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:36:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(501.8463, 1058.412), source=ENEMY (Enemy10), range=1469, listeners=7
[22:36:33] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=4
[22:36:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(534.4668, 998.6915), shooter_id=242028119652, bullet_pos=(534.4668, 998.6915)
[22:36:33] [INFO] [Bullet] Using shooter_position, distance=0
[22:36:33] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[22:36:33] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:33] [INFO] [Bullet] Starting wall penetration at (534.4668, 998.6915)
[22:36:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.745174407959
[22:36:33] [INFO] [LastChance] Threat detected: Bullet
[22:36:33] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:36:33] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:36:33] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:33] [INFO] [Bullet] Exiting penetration at (548.8654, 963.1652) after traveling 33.3333320617676 pixels through wall
[22:36:33] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:36:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(501.8463, 1058.412), source=ENEMY (Enemy10), range=1469, listeners=7
[22:36:33] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=4
[22:36:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(531.4678, 997.1486), shooter_id=242028119652, bullet_pos=(531.4678, 997.1486)
[22:36:33] [INFO] [Bullet] Using shooter_position, distance=0
[22:36:33] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[22:36:33] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:33] [INFO] [Bullet] Starting wall penetration at (531.4678, 997.1486)
[22:36:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41.353099822998
[22:36:33] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:33] [INFO] [Bullet] Exiting penetration at (544.0886, 960.9525) after traveling 33.3333358764648 pixels through wall
[22:36:33] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:36:34] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[22:36:34] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[22:36:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(501.8463, 1058.412), source=ENEMY (Enemy10), range=1469, listeners=7
[22:36:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=4
[22:36:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(529.0815, 996.0511), shooter_id=242028119652, bullet_pos=(529.0815, 996.0511)
[22:36:34] [INFO] [Bullet] Using shooter_position, distance=0
[22:36:34] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[22:36:34] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:34] [INFO] [Bullet] Starting wall penetration at (529.0815, 996.0511)
[22:36:34] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42.4629287719727
[22:36:34] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:34] [INFO] [Bullet] Exiting penetration at (540.296, 959.3948) after traveling 33.3333320617676 pixels through wall
[22:36:34] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:36:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(501.8463, 1058.412), source=ENEMY (Enemy10), range=1469, listeners=7
[22:36:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=4
[22:36:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(527.1464, 995.2413), shooter_id=242028119652, bullet_pos=(527.1464, 995.2413)
[22:36:34] [INFO] [Bullet] Using shooter_position, distance=0
[22:36:34] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[22:36:34] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:34] [INFO] [Bullet] Starting wall penetration at (527.1464, 995.2413)
[22:36:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(527.1464, 995.2413), shooter_id=242028119652, bullet_pos=(528.4611, 990.4172)
[22:36:34] [INFO] [Bullet] Using shooter_position, distance=4.99997472763062
[22:36:34] [INFO] [Bullet] Distance to wall: 4.99997472763062 (0.34045747334717% of viewport)
[22:36:34] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:34] [INFO] [Bullet] Already penetrating, cannot start new penetration
[22:36:34] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[22:36:34] [INFO] [Bullet] Exiting penetration at (537.2257, 958.2568) after traveling 33.3333358764648 pixels through wall
[22:36:34] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:36:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(501.8463, 1058.412), source=ENEMY (Enemy10), range=1469, listeners=7
[22:36:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=4
[22:36:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(525.5503, 994.6252), shooter_id=242028119652, bullet_pos=(525.5503, 994.6252)
[22:36:34] [INFO] [Bullet] Using shooter_position, distance=0
[22:36:34] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[22:36:34] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:34] [INFO] [Bullet] Starting wall penetration at (525.5503, 994.6252)
[22:36:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(525.5503, 994.6252), shooter_id=242028119652, bullet_pos=(526.7433, 989.7697)
[22:36:34] [INFO] [Bullet] Using shooter_position, distance=4.99999952316284
[22:36:34] [INFO] [Bullet] Distance to wall: 4.99999952316284 (0.34045916172056% of viewport)
[22:36:34] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:34] [INFO] [Bullet] Already penetrating, cannot start new penetration
[22:36:34] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[22:36:34] [INFO] [Bullet] Exiting penetration at (534.6966, 957.399) after traveling 33.3333358764648 pixels through wall
[22:36:34] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:36:34] [ENEMY] [Enemy4] Death animation completed
[22:36:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(501.8463, 1058.412), source=ENEMY (Enemy10), range=1469, listeners=7
[22:36:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=4
[22:36:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(522.9632, 993.7226), shooter_id=242028119652, bullet_pos=(522.9632, 993.7226)
[22:36:34] [INFO] [Bullet] Using shooter_position, distance=0
[22:36:34] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[22:36:34] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:34] [INFO] [Bullet] Starting wall penetration at (522.9632, 993.7226)
[22:36:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(522.9632, 993.7226), shooter_id=242028119652, bullet_pos=(523.9598, 988.8229)
[22:36:34] [INFO] [Bullet] Using shooter_position, distance=4.9999828338623
[22:36:34] [INFO] [Bullet] Distance to wall: 4.9999828338623 (0.3404580253154% of viewport)
[22:36:34] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:34] [INFO] [Bullet] Already penetrating, cannot start new penetration
[22:36:34] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33.131534576416
[22:36:34] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:34] [INFO] [Bullet] Exiting penetration at (530.6035, 956.1584) after traveling 33.3333320617676 pixels through wall
[22:36:34] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:36:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(501.8463, 1058.412), source=ENEMY (Enemy10), range=1469, listeners=7
[22:36:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=4
[22:36:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(518.9045, 992.536), shooter_id=242028119652, bullet_pos=(518.9045, 992.536)
[22:36:34] [INFO] [Bullet] Using shooter_position, distance=0
[22:36:34] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[22:36:34] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:34] [INFO] [Bullet] Starting wall penetration at (518.9045, 992.536)
[22:36:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(518.9045, 992.536), shooter_id=242028119652, bullet_pos=(519.5948, 987.5839)
[22:36:34] [INFO] [Bullet] Using shooter_position, distance=5.00002956390381
[22:36:34] [INFO] [Bullet] Distance to wall: 5.00002956390381 (0.34046120724985% of viewport)
[22:36:34] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:34] [INFO] [Bullet] Already penetrating, cannot start new penetration
[22:36:34] [INFO] [Bullet] Raycast backward hit penetrating body at distance 1.42527031898499
[22:36:34] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:34] [INFO] [Bullet] Exiting penetration at (524.1968, 954.5697) after traveling 33.3333358764648 pixels through wall
[22:36:34] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:36:34] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:36:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(405.1845, 624.7621), source=PLAYER (AssaultRifle), range=1469, listeners=7
[22:36:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=2
[22:36:35] [ENEMY] [Enemy2] Hit taken, health: 0/2
[22:36:35] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[22:36:35] [INFO] [ScoreManager] Kill registered. Combo: 4 (points: 5000)
[22:36:35] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 6)
[22:36:35] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:36:35] [ENEMY] [Enemy2] Death animation started with hit direction: (1, 0)
[22:36:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(379.937, 601.1587), source=PLAYER (AssaultRifle), range=1469, listeners=6
[22:36:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=2
[22:36:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(358.0032, 575.0439), source=PLAYER (AssaultRifle), range=1469, listeners=6
[22:36:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=0, below_threshold=3
[22:36:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(348.4024, 546.1887), source=PLAYER (AssaultRifle), range=1469, listeners=6
[22:36:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=0, below_threshold=3
[22:36:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(379.93698, 601.1587), shooter_id=242850204585, bullet_pos=(542.82623, 67.11444)
[22:36:35] [INFO] [Bullet] Using shooter_position, distance=558,3334
[22:36:35] [INFO] [Bullet] Distance to wall: 558,3334 (38,01795% of viewport)
[22:36:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:35] [INFO] [Bullet] Starting wall penetration at (542.82623, 67.11444)
[22:36:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 1,6218318
[22:36:35] [INFO] [Bullet] Max penetration distance exceeded: 66,666664 >= 48
[22:36:35] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:35] [INFO] [Bullet] Exiting penetration at (563.73444, -1.4345169) after traveling 66,666664 pixels through wall
[22:36:35] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:36:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(358.00323, 575.04395), shooter_id=242850204585, bullet_pos=(497.69263, 209.13449)
[22:36:35] [INFO] [Bullet] Using shooter_position, distance=391,66678
[22:36:35] [INFO] [Bullet] Distance to wall: 391,66678 (26,669312% of viewport)
[22:36:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(348.4024, 546.1887), shooter_id=242850204585, bullet_pos=(497.52945, 295.5285)
[22:36:36] [INFO] [Bullet] Using shooter_position, distance=291,66663
[22:36:36] [INFO] [Bullet] Distance to wall: 291,66663 (19,860117% of viewport)
[22:36:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(358.00323, 575.04395), shooter_id=242850204585, bullet_pos=(448.01038, 41.335007)
[22:36:36] [INFO] [Bullet] Using shooter_position, distance=541,2453
[22:36:36] [INFO] [Bullet] Distance to wall: 541,2453 (36,85439% of viewport)
[22:36:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:36] [INFO] [Bullet] Starting wall penetration at (448.01038, 41.335007)
[22:36:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23,597763
[22:36:36] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:36] [INFO] [Bullet] Exiting penetration at (438.5471, 9.373201) after traveling 28,333332 pixels through wall
[22:36:36] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[22:36:36] [ENEMY] [Enemy2] Ragdoll activated
[22:36:36] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:36:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(348.4024, 546.1887), shooter_id=242850204585, bullet_pos=(321.51544, 67.15343)
[22:36:36] [INFO] [Bullet] Using shooter_position, distance=479,7892
[22:36:36] [INFO] [Bullet] Distance to wall: 479,7892 (32,66973% of viewport)
[22:36:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(348.4024, 546.1887), shooter_id=242850204585, bullet_pos=(65.1915, 361.53088)
[22:36:36] [INFO] [Bullet] Using shooter_position, distance=338,09308
[22:36:36] [INFO] [Bullet] Distance to wall: 338,09308 (23,021381% of viewport)
[22:36:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:36] [INFO] [Bullet] Starting wall penetration at (65.1915, 361.53088)
[22:36:36] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[22:36:36] [INFO] [Bullet] Exiting penetration at (46.093063, 383.46463) after traveling 24,083334 pixels through wall
[22:36:36] [INFO] [Bullet] Damage multiplier after penetration: 0,225
[22:36:36] [ENEMY] [Enemy10] FLANKING started: target=(616.363, 489.3083), side=left, pos=(501.8463, 1058.412)
[22:36:36] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[22:36:37] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:36:37] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:36:37] [ENEMY] [Enemy1] Death animation component initialized
[22:36:37] [ENEMY] [Enemy2] Death animation component initialized
[22:36:37] [ENEMY] [Enemy3] Death animation component initialized
[22:36:37] [ENEMY] [Enemy4] Death animation component initialized
[22:36:37] [ENEMY] [Enemy5] Death animation component initialized
[22:36:37] [ENEMY] [Enemy6] Death animation component initialized
[22:36:37] [ENEMY] [Enemy7] Death animation component initialized
[22:36:37] [ENEMY] [Enemy8] Death animation component initialized
[22:36:37] [ENEMY] [Enemy9] Death animation component initialized
[22:36:37] [ENEMY] [Enemy10] Death animation component initialized
[22:36:37] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:36:37] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:36:37] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:36:37] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:36:37] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:36:37] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:36:37] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:36:37] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:36:37] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:36:37] [INFO] [ScoreManager] Level started with 10 enemies
[22:36:37] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 7)
[22:36:37] [ENEMY] [Enemy1] Registered as sound listener
[22:36:37] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[22:36:37] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 8)
[22:36:37] [ENEMY] [Enemy2] Registered as sound listener
[22:36:37] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[22:36:37] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 9)
[22:36:37] [ENEMY] [Enemy3] Registered as sound listener
[22:36:37] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[22:36:37] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 10)
[22:36:37] [ENEMY] [Enemy4] Registered as sound listener
[22:36:37] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[22:36:37] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 11)
[22:36:37] [ENEMY] [Enemy5] Registered as sound listener
[22:36:37] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[22:36:37] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 12)
[22:36:37] [ENEMY] [Enemy6] Registered as sound listener
[22:36:37] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[22:36:37] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 13)
[22:36:37] [ENEMY] [Enemy7] Registered as sound listener
[22:36:37] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[22:36:37] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 14)
[22:36:37] [ENEMY] [Enemy8] Registered as sound listener
[22:36:37] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[22:36:37] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 15)
[22:36:37] [ENEMY] [Enemy9] Registered as sound listener
[22:36:37] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[22:36:37] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 16)
[22:36:37] [ENEMY] [Enemy10] Registered as sound listener
[22:36:37] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[22:36:37] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:36:37] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:36:37] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:36:37] [INFO] [LastChance] Found player: Player
[22:36:37] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:36:37] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:36:37] [INFO] [LastChance] Connected to player Died signal (C#)
[22:36:37] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:36:37] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:36:37] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:36:37] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:38] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:36:38] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:36:38] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:36:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5697, 752.2332), source=ENEMY (Enemy3), range=1469, listeners=16
[22:36:38] [INFO] [SoundPropagation] Cleaned up 6 invalid listeners
[22:36:38] [ENEMY] [Enemy2] Heard gunshot at (689.5697, 752.2332), source_type=1, intensity=0.02, distance=353
[22:36:38] [ENEMY] [Enemy4] Heard gunshot at (689.5697, 752.2332), source_type=1, intensity=0.07, distance=184
[22:36:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:36:39] [INFO] [LastChance] Threat detected: Bullet
[22:36:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:36:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:36:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:36:39] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:36:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[22:36:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[22:36:39] [INFO] [LastChance] Threat detected: @Area2D@1998
[22:36:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:36:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:36:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:36:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(622.0527, 760.7216), shooter_id=431476442564, bullet_pos=(38.74973, 766.6654)
[22:36:39] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
[22:36:39] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
[22:36:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:39] [INFO] [Bullet] Starting wall penetration at (38.74973, 766.6654)
[22:36:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.9165916442871
[22:36:39] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:39] [INFO] [Bullet] Exiting penetration at (-7.91452, 767.1409) after traveling 41.6666679382324 pixels through wall
[22:36:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:36:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[22:36:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[22:36:39] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[22:36:39] [INFO] [LastChance] Threat detected: Bullet
[22:36:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:36:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:36:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(439.3789, 605.4969), shooter_id=431191229785, bullet_pos=(690.0122, 884.4376)
[22:36:39] [INFO] [Bullet] Using shooter_position, distance=374.999969482422
[22:36:39] [INFO] [Bullet] Distance to wall: 374.999969482422 (25.5344374861978% of viewport)
[22:36:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:39] [INFO] [Bullet] Starting wall penetration at (690.0122, 884.4376)
[22:36:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.1887283325195
[22:36:39] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:39] [INFO] [Bullet] Exiting penetration at (721.2021, 919.1502) after traveling 41.6666679382324 pixels through wall
[22:36:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:36:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[22:36:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[22:36:39] [INFO] [LastChance] Threat detected: Bullet
[22:36:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:36:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:36:39] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:36:39] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:36:39] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[22:36:39] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[22:36:39] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[22:36:39] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[22:36:39] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:36:39] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[22:36:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[22:36:39] [INFO] [LastChance] Threat detected: Bullet
[22:36:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:36:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:36:39] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[22:36:39] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[22:36:39] [ENEMY] [Enemy10] FLANKING started: target=(414.3147, 800.474), side=right, pos=(1061.514, 1460.072)
[22:36:39] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[22:36:39] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:39] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[22:36:39] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:36:39] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:36:39] [ENEMY] [Enemy1] Death animation component initialized
[22:36:39] [ENEMY] [Enemy2] Death animation component initialized
[22:36:39] [ENEMY] [Enemy3] Death animation component initialized
[22:36:39] [ENEMY] [Enemy4] Death animation component initialized
[22:36:39] [ENEMY] [Enemy5] Death animation component initialized
[22:36:39] [ENEMY] [Enemy6] Death animation component initialized
[22:36:39] [ENEMY] [Enemy7] Death animation component initialized
[22:36:39] [ENEMY] [Enemy8] Death animation component initialized
[22:36:39] [ENEMY] [Enemy9] Death animation component initialized
[22:36:39] [ENEMY] [Enemy10] Death animation component initialized
[22:36:39] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:36:39] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:36:39] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:36:39] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:36:39] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:36:39] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:36:39] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:36:39] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:36:39] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:36:39] [INFO] [ScoreManager] Level started with 10 enemies
[22:36:39] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:36:39] [ENEMY] [Enemy1] Registered as sound listener
[22:36:39] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[22:36:39] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:36:39] [ENEMY] [Enemy2] Registered as sound listener
[22:36:39] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[22:36:39] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:36:39] [ENEMY] [Enemy3] Registered as sound listener
[22:36:39] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[22:36:39] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:36:39] [ENEMY] [Enemy4] Registered as sound listener
[22:36:39] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[22:36:39] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:36:39] [ENEMY] [Enemy5] Registered as sound listener
[22:36:39] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[22:36:39] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:36:39] [ENEMY] [Enemy6] Registered as sound listener
[22:36:39] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[22:36:39] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:36:39] [ENEMY] [Enemy7] Registered as sound listener
[22:36:39] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[22:36:39] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:36:39] [ENEMY] [Enemy8] Registered as sound listener
[22:36:39] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[22:36:39] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:36:39] [ENEMY] [Enemy9] Registered as sound listener
[22:36:39] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[22:36:39] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:36:39] [ENEMY] [Enemy10] Registered as sound listener
[22:36:39] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[22:36:39] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:36:39] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:36:39] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:36:39] [INFO] [LastChance] Found player: Player
[22:36:39] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:36:39] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:36:39] [INFO] [LastChance] Connected to player Died signal (C#)
[22:36:39] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:36:39] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:36:39] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:36:40] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:41] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:36:41] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:36:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 787.4444), source=PLAYER (AssaultRifle), range=1469, listeners=20
[22:36:42] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[22:36:42] [ENEMY] [Enemy1] Heard gunshot at (450, 787.4444), source_type=0, intensity=0.01, distance=462
[22:36:42] [ENEMY] [Enemy2] Heard gunshot at (450, 787.4444), source_type=0, intensity=0.04, distance=243
[22:36:42] [ENEMY] [Enemy4] Heard gunshot at (450, 787.4444), source_type=0, intensity=0.02, distance=368
[22:36:42] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:36:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:42] [ENEMY] [Enemy3] Hit taken, health: 1/2
[22:36:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 759.2777), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:36:42] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:36:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:42] [ENEMY] [Enemy3] Hit taken, health: 0/2
[22:36:42] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:36:42] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:36:42] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:36:42] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:36:42] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:36:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 744.3444), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:36:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[22:36:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 740.611), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:36:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[22:36:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 744.34436), shooter_id=478653974835, bullet_pos=(939.404, 697.22974)
[22:36:42] [INFO] [Bullet] Using shooter_position, distance=491,6666
[22:36:42] [INFO] [Bullet] Distance to wall: 491,6666 (33,478485% of viewport)
[22:36:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:42] [INFO] [Bullet] Starting wall penetration at (939.404, 697.22974)
[22:36:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41,753056
[22:36:42] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:42] [INFO] [Bullet] Exiting penetration at (977.5609, 693.5564) after traveling 33,333336 pixels through wall
[22:36:42] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:36:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 744.34436), shooter_id=478653974835, bullet_pos=(977.5609, 693.5564)
[22:36:42] [INFO] [Bullet] Using shooter_position, distance=529,99994
[22:36:42] [INFO] [Bullet] Distance to wall: 529,99994 (36,088673% of viewport)
[22:36:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:42] [INFO] [Bullet] Starting wall penetration at (977.5609, 693.5564)
[22:36:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 740.611), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:36:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[22:36:42] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[22:36:42] [INFO] [Bullet] Exiting penetration at (1015.71783, 689.88306) after traveling 33,333336 pixels through wall
[22:36:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 740.611), shooter_id=478653974835, bullet_pos=(908.0586, 756.4784)
[22:36:42] [INFO] [Bullet] Using shooter_position, distance=458,33334
[22:36:42] [INFO] [Bullet] Distance to wall: 458,33334 (31,208763% of viewport)
[22:36:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:42] [INFO] [Bullet] Starting wall penetration at (908.0586, 756.4784)
[22:36:42] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:36:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:42] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:36:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10,375177
[22:36:42] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:42] [INFO] [Bullet] Exiting penetration at (946.36896, 757.8055) after traveling 33,333336 pixels through wall
[22:36:42] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:36:42] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:36:42] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:36:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:42] [ENEMY] [Enemy3] Ragdoll activated
[22:36:42] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:36:42] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (573.4497, 712.0269)
[22:36:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:42] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:36:42] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:36:42] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:36:42] [INFO] [Player.Grenade] Timer started, grenade created at (450, 734.611)
[22:36:42] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:36:42] [INFO] [Player.Grenade] Step 1 complete! Drag: (245.79803, -17.41986)
[22:36:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 740.611), shooter_id=478653974835, bullet_pos=(1373.7386, 788.89575)
[22:36:43] [INFO] [Bullet] Using shooter_position, distance=924,99976
[22:36:43] [INFO] [Bullet] Distance to wall: 924,99976 (62,984936% of viewport)
[22:36:43] [INFO] [Bullet] Distance-based penetration chance: 73,18424%
[22:36:43] [INFO] [Bullet] Penetration failed (distance roll)
[22:36:43] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:36:43] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:36:43] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:43] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:36:43] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:36:43] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:43] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:36:43] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:36:43] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:36:43] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:36:43] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:36:43] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (-2030.21, -1633.065) (2605,5 px/s), Swing distance: 467,2
[22:36:43] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -2,4641852
[22:36:43] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (-2030.21, -1633.065), Swing: 467.2, Transfer: 1.00, Final speed: 2756.3
[22:36:43] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:36:43] [INFO] [Player.Grenade] Thrown! Velocity: 2605,5, Swing: 467,2
[22:36:43] [INFO] [Player.Grenade] State reset to IDLE
[22:36:44] [ENEMY] [Enemy3] Death animation completed
[22:36:44] [INFO] [Player.Grenade] Player rotation restored to 0
[22:36:44] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:36:44] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:36:45] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:36:45] [ENEMY] [Enemy10] FLANKING started: target=(667.8098, 728.8141), side=left, pos=(955.1431, 1418.083)
[22:36:45] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[22:36:45] [INFO] [GrenadeBase] Grenade landed at (360.0376, 533.6193)
[22:36:45] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:36:45] [INFO] [GrenadeBase] EXPLODED at (360.0376, 533.6193)!
[22:36:45] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(360.0376, 533.6193), source=NEUTRAL (FragGrenade), range=2937, listeners=9
[22:36:45] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=6
[22:36:45] [ENEMY] [Enemy1] Hit taken, health: 1/2
[22:36:45] [ENEMY] [Enemy1] Hit taken, health: 0/2
[22:36:45] [ENEMY] [Enemy1] Enemy died (ricochet: false, penetration: false)
[22:36:45] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[22:36:45] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 8)
[22:36:45] [INFO] [DeathAnim] Started - Angle: -61.1 deg, Index: 7
[22:36:45] [ENEMY] [Enemy1] Death animation started with hit direction: (0.483204, -0.875508)
[22:36:45] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 199.2
[22:36:45] [ENEMY] [Enemy2] Hit taken, health: 3/4
[22:36:45] [ENEMY] [Enemy2] Hit taken, health: 2/4
[22:36:45] [ENEMY] [Enemy2] Hit taken, health: 1/4
[22:36:45] [ENEMY] [Enemy2] Hit taken, health: 0/4
[22:36:45] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[22:36:45] [INFO] [ScoreManager] Kill registered. Combo: 3 (points: 3000)
[22:36:45] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
[22:36:45] [INFO] [DeathAnim] Started - Angle: 43.9 deg, Index: 14
[22:36:45] [ENEMY] [Enemy2] Death animation started with hit direction: (0.720493, 0.693462)
[22:36:45] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 85.4
[22:36:45] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 12.6 degrees
[22:36:45] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 85.6 degrees
[22:36:45] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 173.1 degrees
[22:36:45] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 264.9 degrees
[22:36:45] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:45] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(556.3403, 751.2429), source=PLAYER (AssaultRifle), range=1469, listeners=7
[22:36:45] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=4
[22:36:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(556.34033, 751.24286), shooter_id=478653974835, bullet_pos=(699.72986, 878.42596)
[22:36:45] [INFO] [Bullet] Using shooter_position, distance=191,66663
[22:36:45] [INFO] [Bullet] Distance to wall: 191,66663 (13,050933% of viewport)
[22:36:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:45] [INFO] [Bullet] Starting wall penetration at (699.72986, 878.42596)
[22:36:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29,224407
[22:36:45] [ENEMY] [Enemy1] Ragdoll activated
[22:36:45] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:36:45] [ENEMY] [Enemy2] Ragdoll activated
[22:36:45] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:36:45] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:45] [INFO] [Bullet] Exiting penetration at (734.6421, 909.3923) after traveling 41,666668 pixels through wall
[22:36:45] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:36:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(586.8038, 731.8414), source=PLAYER (AssaultRifle), range=1469, listeners=7
[22:36:45] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=4
[22:36:46] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[22:36:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(614.0275, 704.6177), source=PLAYER (AssaultRifle), range=1469, listeners=7
[22:36:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=4
[22:36:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(586.80383, 731.8414), shooter_id=478653974835, bullet_pos=(747.5278, 1004.68854)
[22:36:46] [INFO] [Bullet] Using shooter_position, distance=316,66666
[22:36:46] [INFO] [Bullet] Distance to wall: 316,66666 (21,562416% of viewport)
[22:36:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:46] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[22:36:46] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[22:36:46] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(636.6306, 679.7386), source=PLAYER (AssaultRifle), range=1469, listeners=7
[22:36:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=4
[22:36:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(614.0275, 704.6177), shooter_id=478653974835, bullet_pos=(638.1111, 1020.36743)
[22:36:46] [INFO] [Bullet] Using shooter_position, distance=316,6669
[22:36:46] [INFO] [Bullet] Distance to wall: 316,6669 (21,562431% of viewport)
[22:36:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(586.80383, 731.8414), shooter_id=478653974835, bullet_pos=(921.5971, 690.5219)
[22:36:46] [INFO] [Bullet] Using shooter_position, distance=337,3334
[22:36:46] [INFO] [Bullet] Distance to wall: 337,3334 (22,969652% of viewport)
[22:36:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:46] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:46] [ENEMY] [Enemy4] Hit taken, health: 2/3
[22:36:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(649.8095, 664.9568), source=PLAYER (AssaultRifle), range=1469, listeners=7
[22:36:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=4
[22:36:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(654.5093, 659.6854), source=PLAYER (AssaultRifle), range=1469, listeners=7
[22:36:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=4
[22:36:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(649.8095, 664.9568), shooter_id=478653974835, bullet_pos=(558.36035, 1011.4245)
[22:36:46] [INFO] [Bullet] Using shooter_position, distance=358,3334
[22:36:46] [INFO] [Bullet] Distance to wall: 358,3334 (24,399582% of viewport)
[22:36:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(654.5644, 659.6236), source=PLAYER (AssaultRifle), range=1469, listeners=7
[22:36:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=4
[22:36:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(649.8095, 664.9568), shooter_id=478653974835, bullet_pos=(524.3996, 839.75146)
[22:36:46] [INFO] [Bullet] Using shooter_position, distance=215,12979
[22:36:46] [INFO] [Bullet] Distance to wall: 215,12979 (14,648583% of viewport)
[22:36:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(654.5093, 659.68536), shooter_id=478653974835, bullet_pos=(560.8798, 1005.57043)
[22:36:46] [INFO] [Bullet] Using shooter_position, distance=358,3336
[22:36:46] [INFO] [Bullet] Distance to wall: 358,3336 (24,399593% of viewport)
[22:36:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(586.80383, 731.8414), shooter_id=478653974835, bullet_pos=(642.4364, 51.436245)
[22:36:46] [INFO] [Bullet] Using shooter_position, distance=682,6757
[22:36:46] [INFO] [Bullet] Distance to wall: 682,6757 (46,484646% of viewport)
[22:36:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(654.5644, 659.6236), shooter_id=478653974835, bullet_pos=(597.9845, 1013.4616)
[22:36:46] [INFO] [Bullet] Using shooter_position, distance=358,3331
[22:36:46] [INFO] [Bullet] Distance to wall: 358,3331 (24,39956% of viewport)
[22:36:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(586.80383, 731.8414), shooter_id=478653974835, bullet_pos=(518.261, 245.24802)
[22:36:46] [INFO] [Bullet] Using shooter_position, distance=491,39722
[22:36:46] [INFO] [Bullet] Distance to wall: 491,39722 (33,46014% of viewport)
[22:36:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:47] [ENEMY] [Enemy1] Death animation completed
[22:36:47] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:47] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[22:36:47] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[22:36:47] [ENEMY] [Enemy2] Death animation completed
[22:36:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(649.8095, 664.9568), shooter_id=478653974835, bullet_pos=(545.6617, 64.3764)
[22:36:47] [INFO] [Bullet] Using shooter_position, distance=609,54376
[22:36:47] [INFO] [Bullet] Distance to wall: 609,54376 (41,50496% of viewport)
[22:36:47] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[22:36:47] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[22:36:47] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[22:36:47] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:47] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[22:36:47] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[22:36:47] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[22:36:47] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[22:36:47] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[22:36:47] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(537.3371, 1069.737), source=ENEMY (Enemy10), range=1469, listeners=7
[22:36:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=3
[22:36:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(553.5189, 1003.641), shooter_id=477831891494, bullet_pos=(553.5189, 1003.641)
[22:36:47] [INFO] [Bullet] Using shooter_position, distance=0
[22:36:47] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[22:36:47] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:47] [INFO] [Bullet] Starting wall penetration at (553.5189, 1003.641)
[22:36:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.6639976501465
[22:36:47] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:47] [INFO] [Bullet] Exiting penetration at (558.3066, 965.6074) after traveling 33.3333320617676 pixels through wall
[22:36:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:36:47] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[22:36:47] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[22:36:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(573.8747, 799.1304), source=PLAYER (AssaultRifle), range=1469, listeners=7
[22:36:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=3
[22:36:47] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[22:36:47] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(586.80383, 731.8414), shooter_id=478653974835, bullet_pos=(883.0922, 1002.11865)
[22:36:47] [INFO] [Bullet] Using shooter_position, distance=401,0444
[22:36:47] [INFO] [Bullet] Distance to wall: 401,0444 (27,307854% of viewport)
[22:36:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:47] [ENEMY] [Enemy4] Hit taken, health: 1/3
[22:36:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(573.8747, 834.3306), source=PLAYER (AssaultRifle), range=1469, listeners=7
[22:36:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=4
[22:36:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(586.80383, 731.8414), shooter_id=478653974835, bullet_pos=(909.8808, 912.28674)
[22:36:47] [INFO] [Bullet] Using shooter_position, distance=370,05307
[22:36:47] [INFO] [Bullet] Distance to wall: 370,05307 (25,197596% of viewport)
[22:36:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:47] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(479.3359, 1027.376), source=ENEMY (Enemy10), range=1469, listeners=7
[22:36:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
[22:36:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(518.623, 971.8143), shooter_id=477831891494, bullet_pos=(518.623, 971.8143)
[22:36:47] [INFO] [Bullet] Using shooter_position, distance=0
[22:36:47] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[22:36:47] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:47] [INFO] [Bullet] Starting wall penetration at (518.623, 971.8143)
[22:36:47] [INFO] [LastChance] Threat detected: @Area2D@2335
[22:36:47] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[22:36:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:36:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.1300163269043
[22:36:47] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:47] [INFO] [Bullet] Exiting penetration at (537.0209, 938.1846) after traveling 33.3333358764648 pixels through wall
[22:36:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:36:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(573.8747, 869.5308), source=PLAYER (AssaultRifle), range=1469, listeners=7
[22:36:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=4
[22:36:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(573.8747, 834.33057), shooter_id=478653974835, bullet_pos=(810.5386, 1004.7996)
[22:36:47] [INFO] [Bullet] Using shooter_position, distance=291,66675
[22:36:47] [INFO] [Bullet] Distance to wall: 291,66675 (19,860126% of viewport)
[22:36:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(573.8747, 834.33057), shooter_id=478653974835, bullet_pos=(914.55444, 948.37726)
[22:36:47] [INFO] [Bullet] Using shooter_position, distance=359,2622
[22:36:47] [INFO] [Bullet] Distance to wall: 359,2622 (24,462826% of viewport)
[22:36:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:47] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(479.3359, 1027.376), source=ENEMY (Enemy10), range=1469, listeners=7
[22:36:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
[22:36:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(524.7384, 976.6888), shooter_id=477831891494, bullet_pos=(524.7384, 976.6888)
[22:36:47] [INFO] [Bullet] Using shooter_position, distance=0
[22:36:47] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[22:36:47] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:36:47] [INFO] [Bullet] Starting wall penetration at (524.7384, 976.6888)
[22:36:47] [INFO] [LastChance] Threat detected: @Area2D@2340
[22:36:47] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[22:36:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:36:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.6120834350586
[22:36:47] [ENEMY] [Enemy4] Hit taken, health: 0/3
[22:36:47] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[22:36:47] [INFO] [ScoreManager] Kill registered. Combo: 4 (points: 5000)
[22:36:47] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 6)
[22:36:47] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:36:47] [ENEMY] [Enemy4] Death animation started with hit direction: (1, 0)
[22:36:47] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:47] [INFO] [Bullet] Exiting penetration at (546.8732, 945.3919) after traveling 33.3333320617676 pixels through wall
[22:36:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:36:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(580.9701, 901.7917), source=PLAYER (AssaultRifle), range=1469, listeners=6
[22:36:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=4
[22:36:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(600.6373, 928.8453), source=PLAYER (AssaultRifle), range=1469, listeners=6
[22:36:48] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=4
[22:36:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(580.9701, 901.79175), shooter_id=478653974835, bullet_pos=(939.2914, 898.8766)
[22:36:48] [INFO] [Bullet] Using shooter_position, distance=358,33316
[22:36:48] [INFO] [Bullet] Distance to wall: 358,33316 (24,399565% of viewport)
[22:36:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:48] [INFO] [Bullet] Starting wall penetration at (939.2914, 898.8766)
[22:36:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41,62479
[22:36:48] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:48] [INFO] [Bullet] Exiting penetration at (977.6234, 898.56476) after traveling 33,333332 pixels through wall
[22:36:48] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:36:48] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:36:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(600.6373, 928.84534), shooter_id=478653974835, bullet_pos=(925.1259, 910.61945)
[22:36:48] [INFO] [Bullet] Using shooter_position, distance=325,00003
[22:36:48] [INFO] [Bullet] Distance to wall: 325,00003 (22,12985% of viewport)
[22:36:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:36:48] [INFO] [Bullet] Starting wall penetration at (925.1259, 910.61945)
[22:36:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27,442112
[22:36:48] [INFO] [Bullet] Body exited signal received for penetrating body
[22:36:48] [INFO] [Bullet] Exiting penetration at (963.3989, 908.4697) after traveling 33,333332 pixels through wall
[22:36:48] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:36:48] [ENEMY] [Enemy4] Ragdoll activated
[22:36:48] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:36:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(586.80383, 731.8414), shooter_id=478653974835, bullet_pos=(552.2461, 61.68129)
[22:36:49] [INFO] [Bullet] Using shooter_position, distance=671,05054
[22:36:49] [INFO] [Bullet] Distance to wall: 671,05054 (45,693066% of viewport)
[22:36:49] [INFO] [Bullet] Distance-based penetration chance: 93,358086%
[22:36:49] [INFO] [Bullet] Starting wall penetration at (552.2461, 61.68129)
[22:36:49] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[22:36:49] [INFO] [Bullet] Exiting penetration at (545.4356, 45.483116) after traveling 12,5716505 pixels through wall
[22:36:49] [INFO] [Bullet] Damage multiplier after penetration: 0,0140625
[22:36:49] [ENEMY] [Enemy4] Death animation completed
[22:36:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:51] [INFO] [ScoreManager] Combo ended at 4. Max combo: 4
[22:36:51] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:36:51] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:36:51] [ENEMY] [Enemy1] Death animation component initialized
[22:36:51] [ENEMY] [Enemy2] Death animation component initialized
[22:36:51] [ENEMY] [Enemy3] Death animation component initialized
[22:36:51] [ENEMY] [Enemy4] Death animation component initialized
[22:36:51] [ENEMY] [Enemy5] Death animation component initialized
[22:36:51] [ENEMY] [Enemy6] Death animation component initialized
[22:36:51] [ENEMY] [Enemy7] Death animation component initialized
[22:36:51] [ENEMY] [Enemy8] Death animation component initialized
[22:36:51] [ENEMY] [Enemy9] Death animation component initialized
[22:36:51] [ENEMY] [Enemy10] Death animation component initialized
[22:36:51] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:36:51] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:36:51] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:36:51] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:36:51] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:36:51] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:36:51] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:36:51] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:36:51] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:36:51] [INFO] [ScoreManager] Level started with 10 enemies
[22:36:51] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 7)
[22:36:51] [ENEMY] [Enemy1] Registered as sound listener
[22:36:51] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[22:36:51] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 8)
[22:36:51] [ENEMY] [Enemy2] Registered as sound listener
[22:36:51] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[22:36:51] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 9)
[22:36:51] [ENEMY] [Enemy3] Registered as sound listener
[22:36:51] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[22:36:51] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 10)
[22:36:51] [ENEMY] [Enemy4] Registered as sound listener
[22:36:51] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[22:36:51] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 11)
[22:36:51] [ENEMY] [Enemy5] Registered as sound listener
[22:36:51] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[22:36:51] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 12)
[22:36:51] [ENEMY] [Enemy6] Registered as sound listener
[22:36:51] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[22:36:51] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 13)
[22:36:51] [ENEMY] [Enemy7] Registered as sound listener
[22:36:51] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[22:36:51] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 14)
[22:36:51] [ENEMY] [Enemy8] Registered as sound listener
[22:36:51] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[22:36:51] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 15)
[22:36:51] [ENEMY] [Enemy9] Registered as sound listener
[22:36:51] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[22:36:51] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 16)
[22:36:51] [ENEMY] [Enemy10] Registered as sound listener
[22:36:51] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[22:36:51] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:36:51] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:36:51] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:36:51] [INFO] [LastChance] Found player: Player
[22:36:51] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:36:51] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:36:51] [INFO] [LastChance] Connected to player Died signal (C#)
[22:36:51] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:36:51] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:36:51] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:36:52] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:52] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:36:53] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:36:53] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[22:36:55] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
[22:36:55] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[22:36:56] [ENEMY] [Enemy10] FLANKING started: target=(648.4554, 726.6365), side=left, pos=(953.4262, 1416.483)
[22:36:56] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[22:36:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:56] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:36:56] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:36:56] [ENEMY] [Enemy1] Death animation component initialized
[22:36:56] [ENEMY] [Enemy2] Death animation component initialized
[22:36:56] [ENEMY] [Enemy3] Death animation component initialized
[22:36:56] [ENEMY] [Enemy4] Death animation component initialized
[22:36:56] [ENEMY] [Enemy5] Death animation component initialized
[22:36:56] [ENEMY] [Enemy6] Death animation component initialized
[22:36:56] [ENEMY] [Enemy7] Death animation component initialized
[22:36:56] [ENEMY] [Enemy8] Death animation component initialized
[22:36:56] [ENEMY] [Enemy9] Death animation component initialized
[22:36:56] [ENEMY] [Enemy10] Death animation component initialized
[22:36:56] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:36:56] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:36:56] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:36:56] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:36:56] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:36:56] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:36:56] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:36:56] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:36:56] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:36:56] [INFO] [ScoreManager] Level started with 10 enemies
[22:36:56] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 17)
[22:36:56] [ENEMY] [Enemy1] Registered as sound listener
[22:36:56] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[22:36:56] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 18)
[22:36:56] [ENEMY] [Enemy2] Registered as sound listener
[22:36:56] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[22:36:56] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 19)
[22:36:56] [ENEMY] [Enemy3] Registered as sound listener
[22:36:56] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[22:36:56] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 20)
[22:36:56] [ENEMY] [Enemy4] Registered as sound listener
[22:36:56] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[22:36:56] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 21)
[22:36:56] [ENEMY] [Enemy5] Registered as sound listener
[22:36:56] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[22:36:56] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 22)
[22:36:56] [ENEMY] [Enemy6] Registered as sound listener
[22:36:56] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[22:36:56] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 23)
[22:36:56] [ENEMY] [Enemy7] Registered as sound listener
[22:36:56] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[22:36:56] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 24)
[22:36:56] [ENEMY] [Enemy8] Registered as sound listener
[22:36:56] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[22:36:56] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 25)
[22:36:56] [ENEMY] [Enemy9] Registered as sound listener
[22:36:56] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[22:36:56] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 26)
[22:36:56] [ENEMY] [Enemy10] Registered as sound listener
[22:36:56] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[22:36:56] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:36:56] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:36:56] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:36:56] [INFO] [LastChance] Found player: Player
[22:36:56] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:36:56] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:36:56] [INFO] [LastChance] Connected to player Died signal (C#)
[22:36:56] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:36:56] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:36:56] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:36:57] [INFO] [PauseMenu] Armory button pressed
[22:36:57] [INFO] [PauseMenu] Creating new armory menu instance
[22:36:57] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[22:36:57] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[22:36:57] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[22:36:57] [INFO] [PauseMenu] back_pressed signal exists on instance
[22:36:57] [INFO] [PauseMenu] back_pressed signal connected
[22:36:57] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[22:36:57] [INFO] [PauseMenu] _populate_weapon_grid method exists
[22:36:58] [INFO] [GameManager] Weapon selected: shotgun
[22:36:58] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:36:58] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:36:58] [ENEMY] [Enemy1] Death animation component initialized
[22:36:58] [ENEMY] [Enemy2] Death animation component initialized
[22:36:58] [ENEMY] [Enemy3] Death animation component initialized
[22:36:58] [ENEMY] [Enemy4] Death animation component initialized
[22:36:58] [ENEMY] [Enemy5] Death animation component initialized
[22:36:58] [ENEMY] [Enemy6] Death animation component initialized
[22:36:58] [ENEMY] [Enemy7] Death animation component initialized
[22:36:58] [ENEMY] [Enemy8] Death animation component initialized
[22:36:58] [ENEMY] [Enemy9] Death animation component initialized
[22:36:58] [ENEMY] [Enemy10] Death animation component initialized
[22:36:58] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:36:58] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:36:58] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:36:58] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:36:58] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:36:58] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:36:58] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:36:58] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:36:58] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:36:58] [INFO] [ScoreManager] Level started with 10 enemies
[22:36:58] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 27)
[22:36:58] [ENEMY] [Enemy1] Registered as sound listener
[22:36:58] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[22:36:58] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 28)
[22:36:58] [ENEMY] [Enemy2] Registered as sound listener
[22:36:58] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[22:36:58] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 29)
[22:36:58] [ENEMY] [Enemy3] Registered as sound listener
[22:36:58] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[22:36:58] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 30)
[22:36:58] [ENEMY] [Enemy4] Registered as sound listener
[22:36:58] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[22:36:58] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 31)
[22:36:58] [ENEMY] [Enemy5] Registered as sound listener
[22:36:58] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[22:36:58] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 32)
[22:36:58] [ENEMY] [Enemy6] Registered as sound listener
[22:36:58] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[22:36:58] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 33)
[22:36:58] [ENEMY] [Enemy7] Registered as sound listener
[22:36:58] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[22:36:58] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 34)
[22:36:58] [ENEMY] [Enemy8] Registered as sound listener
[22:36:58] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[22:36:58] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 35)
[22:36:58] [ENEMY] [Enemy9] Registered as sound listener
[22:36:58] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[22:36:58] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 36)
[22:36:58] [ENEMY] [Enemy10] Registered as sound listener
[22:36:58] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[22:36:58] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:36:58] [INFO] [Player] Detected weapon: Shotgun (Shotgun pose)
[22:36:58] [INFO] [Player] Applied Shotgun arm pose: Left=(21, 6), Right=(-1, 6)
[22:36:58] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:36:58] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:36:58] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:36:58] [INFO] [LastChance] Found player: Player
[22:36:58] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:36:58] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:36:58] [INFO] [LastChance] Connected to player Died signal (C#)
[22:36:59] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:36:59] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:00] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:37:00] [ENEMY] [Enemy1] Player ammo empty state changed: false -> true
[22:37:00] [ENEMY] [Enemy2] Player ammo empty state changed: false -> true
[22:37:00] [ENEMY] [Enemy3] Player ammo empty state changed: false -> true
[22:37:00] [ENEMY] [Enemy4] Player ammo empty state changed: false -> true
[22:37:00] [ENEMY] [Enemy5] Player ammo empty state changed: false -> true
[22:37:00] [ENEMY] [Enemy6] Player ammo empty state changed: false -> true
[22:37:00] [ENEMY] [Enemy7] Player ammo empty state changed: false -> true
[22:37:00] [ENEMY] [Enemy8] Player ammo empty state changed: false -> true
[22:37:00] [ENEMY] [Enemy9] Player ammo empty state changed: false -> true
[22:37:00] [ENEMY] [Enemy10] Player ammo empty state changed: false -> true
[22:37:00] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(450, 745.9444), source=PLAYER (Player), range=600, listeners=36
[22:37:00] [INFO] [SoundPropagation] Cleaned up 26 invalid listeners
[22:37:00] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (450, 745.9444), intensity=0.01, distance=423
[22:37:00] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:00] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (450, 745.9444), intensity=0.06, distance=202
[22:37:00] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:00] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (450, 745.9444), intensity=0.04, distance=240
[22:37:00] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (450, 745.9444), intensity=0.02, distance=382
[22:37:00] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[22:37:00] [INFO] [Shotgun.FIX#212] Firing 10 pellets with 15° spread at pos=(450, 745.9444)
[22:37:00] [INFO] [Shotgun.FIX#212] Normal pellet 1/10: extraOffset=11,9, distance=36,9px, pos=(486.5206, 740.49585)
[22:37:00] [INFO] [Shotgun.FIX#212] Normal pellet 2/10: extraOffset=-8,4, distance=16,6px, pos=(466.46252, 744.1553)
[22:37:00] [INFO] [Shotgun.FIX#212] Normal pellet 3/10: extraOffset=-4,7, distance=20,3px, pos=(470.3021, 744.8226)
[22:37:00] [INFO] [Shotgun.FIX#212] Normal pellet 4/10: extraOffset=-14,3, distance=10,7px, pos=(460.6304, 745.2334)
[22:37:00] [INFO] [Shotgun.FIX#212] Normal pellet 5/10: extraOffset=-7,5, distance=17,5px, pos=(467.52853, 745.81366)
[22:37:00] [INFO] [Shotgun.FIX#212] Normal pellet 6/10: extraOffset=9,7, distance=34,7px, pos=(484.72842, 747.07965)
[22:37:00] [INFO] [Shotgun.FIX#212] Normal pellet 7/10: extraOffset=-1,3, distance=23,7px, pos=(473.68076, 747.3554)
[22:37:00] [INFO] [Shotgun.FIX#212] Normal pellet 8/10: extraOffset=-9,0, distance=16,0px, pos=(465.96606, 747.2992)
[22:37:00] [INFO] [Shotgun.FIX#212] Normal pellet 9/10: extraOffset=-11,0, distance=14,0px, pos=(463.95367, 747.24713)
[22:37:00] [INFO] [Shotgun.FIX#212] Normal pellet 10/10: extraOffset=14,9, distance=39,9px, pos=(489.4544, 751.9659)
[22:37:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 745.9444), source=PLAYER (Shotgun), range=1469, listeners=10
[22:37:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:37:00] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=423), can_see=false
[22:37:00] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 745.9444), distance=423
[22:37:00] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=202), can_see=false
[22:37:00] [ENEMY] [Enemy2] Pursuing vulnerability sound at (450, 745.9444), distance=202
[22:37:00] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=240), can_see=false
[22:37:00] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=382), can_see=false
[22:37:00] [ENEMY] [Enemy4] Pursuing vulnerability sound at (450, 745.9444), distance=382
[22:37:00] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1311), can_see=false
[22:37:00] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1529), can_see=false
[22:37:00] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1258), can_see=false
[22:37:00] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1612), can_see=false
[22:37:00] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1835), can_see=false
[22:37:00] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=940), can_see=false
[22:37:00] [ENEMY] [Enemy3] Hit taken, health: 3/4
[22:37:00] [ENEMY] [Enemy3] Hit taken, health: 2/4
[22:37:00] [ENEMY] [Enemy3] Hit taken, health: 1/4
[22:37:00] [ENEMY] [Enemy3] Hit taken, health: 0/4
[22:37:00] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:37:00] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:37:00] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:37:00] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:37:00] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:37:01] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=312), can_see=false
[22:37:01] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=120), can_see=false
[22:37:01] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=337), can_see=false
[22:37:01] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1311), can_see=false
[22:37:01] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1529), can_see=false
[22:37:01] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1258), can_see=false
[22:37:01] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1612), can_see=false
[22:37:01] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1835), can_see=false
[22:37:01] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=940), can_see=false
[22:37:01] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:01] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:01] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:01] [ENEMY] [Enemy3] Ragdoll activated
[22:37:01] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:37:01] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:01] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:01] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:01] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[22:37:01] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:01] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[22:37:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(671.8798, 787.4149), source=ENEMY (Enemy4), range=1469, listeners=9
[22:37:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[22:37:01] [INFO] [LastChance] Threat detected: Bullet
[22:37:01] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:37:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:37:01] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[22:37:01] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 745.9444), distance=190
[22:37:01] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[22:37:01] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:37:01] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1311), can_see=false
[22:37:01] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1529), can_see=false
[22:37:01] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1258), can_see=false
[22:37:01] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1612), can_see=false
[22:37:01] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1835), can_see=false
[22:37:01] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=875), can_see=false
[22:37:01] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=210), can_see=false
[22:37:01] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:37:01] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:37:01] [ENEMY] [Enemy1] Death animation component initialized
[22:37:01] [ENEMY] [Enemy2] Death animation component initialized
[22:37:01] [ENEMY] [Enemy3] Death animation component initialized
[22:37:01] [ENEMY] [Enemy4] Death animation component initialized
[22:37:01] [ENEMY] [Enemy5] Death animation component initialized
[22:37:01] [ENEMY] [Enemy6] Death animation component initialized
[22:37:01] [ENEMY] [Enemy7] Death animation component initialized
[22:37:01] [ENEMY] [Enemy8] Death animation component initialized
[22:37:01] [ENEMY] [Enemy9] Death animation component initialized
[22:37:01] [ENEMY] [Enemy10] Death animation component initialized
[22:37:01] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:37:01] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:37:01] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:37:01] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:37:01] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:37:01] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:37:01] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:37:01] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:37:01] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:37:01] [INFO] [ScoreManager] Level started with 10 enemies
[22:37:01] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:37:01] [ENEMY] [Enemy1] Registered as sound listener
[22:37:01] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[22:37:01] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:37:01] [ENEMY] [Enemy2] Registered as sound listener
[22:37:01] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[22:37:01] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:37:01] [ENEMY] [Enemy3] Registered as sound listener
[22:37:01] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[22:37:01] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:37:01] [ENEMY] [Enemy4] Registered as sound listener
[22:37:01] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[22:37:01] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:37:01] [ENEMY] [Enemy5] Registered as sound listener
[22:37:01] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[22:37:01] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:37:01] [ENEMY] [Enemy6] Registered as sound listener
[22:37:01] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[22:37:01] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:37:01] [ENEMY] [Enemy7] Registered as sound listener
[22:37:01] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[22:37:01] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:37:01] [ENEMY] [Enemy8] Registered as sound listener
[22:37:01] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[22:37:01] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:37:01] [ENEMY] [Enemy9] Registered as sound listener
[22:37:01] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[22:37:01] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:37:01] [ENEMY] [Enemy10] Registered as sound listener
[22:37:01] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[22:37:01] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:37:01] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:37:01] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:37:01] [INFO] [LastChance] Found player: Player
[22:37:01] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:37:01] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:37:01] [INFO] [LastChance] Connected to player Died signal (C#)
[22:37:01] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:37:01] [INFO] [Player] Detected weapon: Shotgun (Shotgun pose)
[22:37:01] [INFO] [Player] Applied Shotgun arm pose: Left=(21, 6), Right=(-1, 6)
[22:37:02] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:03] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:04] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:37:04] [ENEMY] [Enemy1] Player ammo empty state changed: false -> true
[22:37:04] [ENEMY] [Enemy2] Player ammo empty state changed: false -> true
[22:37:04] [ENEMY] [Enemy3] Player ammo empty state changed: false -> true
[22:37:04] [ENEMY] [Enemy4] Player ammo empty state changed: false -> true
[22:37:04] [ENEMY] [Enemy5] Player ammo empty state changed: false -> true
[22:37:04] [ENEMY] [Enemy6] Player ammo empty state changed: false -> true
[22:37:04] [ENEMY] [Enemy7] Player ammo empty state changed: false -> true
[22:37:04] [ENEMY] [Enemy8] Player ammo empty state changed: false -> true
[22:37:04] [ENEMY] [Enemy9] Player ammo empty state changed: false -> true
[22:37:04] [ENEMY] [Enemy10] Player ammo empty state changed: false -> true
[22:37:04] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(450, 761.4444), source=PLAYER (Player), range=600, listeners=19
[22:37:04] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:37:04] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (450, 761.4444), intensity=0.01, distance=438
[22:37:04] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:04] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (450, 761.4444), intensity=0.05, distance=217
[22:37:04] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:04] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (450, 761.4444), intensity=0.04, distance=240
[22:37:04] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (450, 761.4444), intensity=0.02, distance=376
[22:37:04] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:04] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[22:37:04] [INFO] [Shotgun.FIX#212] Firing 6 pellets with 15° spread at pos=(450, 761.4444)
[22:37:04] [INFO] [Shotgun.FIX#212] Normal pellet 1/6: extraOffset=0,4, distance=25,4px, pos=(474.9034, 756.21655)
[22:37:04] [INFO] [Shotgun.FIX#212] Normal pellet 2/6: extraOffset=-0,1, distance=24,9px, pos=(474.38113, 756.63885)
[22:37:04] [INFO] [Shotgun.FIX#212] Normal pellet 3/6: extraOffset=-10,3, distance=14,7px, pos=(464.52878, 759.34076)
[22:37:04] [INFO] [Shotgun.FIX#212] Normal pellet 4/6: extraOffset=-11,0, distance=14,0px, pos=(463.98523, 760.5709)
[22:37:04] [INFO] [Shotgun.FIX#212] Normal pellet 5/6: extraOffset=-14,0, distance=11,0px, pos=(461.0069, 761.49084)
[22:37:04] [INFO] [Shotgun.FIX#212] Normal pellet 6/6: extraOffset=-13,9, distance=11,1px, pos=(461.07852, 761.9514)
[22:37:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 761.4444), source=PLAYER (Shotgun), range=1469, listeners=10
[22:37:04] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:37:04] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=438), can_see=false
[22:37:04] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 761.4444), distance=438
[22:37:04] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=217), can_see=false
[22:37:04] [ENEMY] [Enemy2] Pursuing vulnerability sound at (450, 761.4444), distance=217
[22:37:04] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=240), can_see=false
[22:37:04] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=376), can_see=false
[22:37:04] [ENEMY] [Enemy4] Pursuing vulnerability sound at (450, 761.4444), distance=376
[22:37:04] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1316), can_see=false
[22:37:04] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1532), can_see=false
[22:37:04] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1256), can_see=false
[22:37:04] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1605), can_see=false
[22:37:04] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1829), can_see=false
[22:37:04] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=928), can_see=false
[22:37:04] [ENEMY] [Enemy3] Hit taken, health: 1/2
[22:37:04] [ENEMY] [Enemy3] Hit taken, health: 0/2
[22:37:04] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:37:04] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:37:04] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:37:04] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:37:04] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:37:05] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=325), can_see=false
[22:37:05] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=132), can_see=false
[22:37:05] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=336), can_see=false
[22:37:05] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1315), can_see=false
[22:37:05] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1531), can_see=false
[22:37:05] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1256), can_see=false
[22:37:05] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1606), can_see=false
[22:37:05] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1830), can_see=false
[22:37:05] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=864), can_see=false
[22:37:05] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:05] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:05] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:05] [ENEMY] [Enemy3] Ragdoll activated
[22:37:05] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:37:05] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:05] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:05] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:05] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:05] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:05] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:05] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:05] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:05] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[22:37:05] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:05] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[22:37:05] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.2487, 786.7678), source=ENEMY (Enemy4), range=1469, listeners=9
[22:37:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[22:37:05] [INFO] [Shotgun.FIX#243] Mid-drag pump DOWN - chambered, ready to fire (MMB not held)
[22:37:05] [INFO] [LastChance] Threat detected: Bullet
[22:37:05] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:37:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:37:05] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[22:37:05] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:05] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 761.4444), distance=205
[22:37:05] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:37:05] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:05] [ENEMY] [Enemy2] Hit taken, health: 3/4
[22:37:05] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1315), can_see=false
[22:37:05] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1531), can_see=false
[22:37:05] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1216), can_see=false
[22:37:05] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1606), can_see=false
[22:37:05] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1830), can_see=false
[22:37:05] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=830), can_see=false
[22:37:05] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:05] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:05] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=208), can_see=false
[22:37:05] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:05] [INFO] [Shotgun.FIX#243] RMB released after 9 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:05] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[22:37:05] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:05] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[22:37:05] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=136), can_see=false
[22:37:05] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[22:37:05] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:05] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:06] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:06] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[22:37:06] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[22:37:06] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1350), can_see=false
[22:37:06] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1567), can_see=false
[22:37:06] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1206), can_see=false
[22:37:06] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1639), can_see=false
[22:37:06] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1863), can_see=false
[22:37:06] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=853), can_see=false
[22:37:06] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=219), can_see=false
[22:37:06] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[22:37:06] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[22:37:06] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[22:37:06] [ENEMY] [Enemy1] Player empty ammo - priority attack triggered
[22:37:06] [ENEMY] [Enemy3] Death animation completed
[22:37:06] [ENEMY] [Enemy1] Player empty ammo - priority attack triggered
[22:37:06] [ENEMY] [Enemy1] Player empty ammo - priority attack triggered
[22:37:06] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1433), can_see=false
[22:37:06] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1652), can_see=false
[22:37:06] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1292), can_see=false
[22:37:06] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1718), can_see=false
[22:37:06] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1942), can_see=false
[22:37:06] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=911), can_see=false
[22:37:06] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=295), can_see=false
[22:37:06] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:37:06] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:37:06] [ENEMY] [Enemy1] Death animation component initialized
[22:37:06] [ENEMY] [Enemy2] Death animation component initialized
[22:37:06] [ENEMY] [Enemy3] Death animation component initialized
[22:37:06] [ENEMY] [Enemy4] Death animation component initialized
[22:37:06] [ENEMY] [Enemy5] Death animation component initialized
[22:37:06] [ENEMY] [Enemy6] Death animation component initialized
[22:37:06] [ENEMY] [Enemy7] Death animation component initialized
[22:37:06] [ENEMY] [Enemy8] Death animation component initialized
[22:37:06] [ENEMY] [Enemy9] Death animation component initialized
[22:37:06] [ENEMY] [Enemy10] Death animation component initialized
[22:37:06] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:37:06] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:37:06] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:37:06] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:37:06] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:37:06] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:37:06] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:37:06] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:37:06] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:37:06] [INFO] [ScoreManager] Level started with 10 enemies
[22:37:06] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:37:06] [ENEMY] [Enemy1] Registered as sound listener
[22:37:06] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[22:37:06] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:37:06] [ENEMY] [Enemy2] Registered as sound listener
[22:37:06] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[22:37:06] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:37:06] [ENEMY] [Enemy3] Registered as sound listener
[22:37:06] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[22:37:06] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:37:06] [ENEMY] [Enemy4] Registered as sound listener
[22:37:06] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[22:37:06] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:37:06] [ENEMY] [Enemy5] Registered as sound listener
[22:37:06] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[22:37:06] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:37:06] [ENEMY] [Enemy6] Registered as sound listener
[22:37:06] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[22:37:06] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:37:06] [ENEMY] [Enemy7] Registered as sound listener
[22:37:06] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[22:37:06] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:37:06] [ENEMY] [Enemy8] Registered as sound listener
[22:37:06] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[22:37:06] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:37:06] [ENEMY] [Enemy9] Registered as sound listener
[22:37:06] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[22:37:06] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:37:06] [ENEMY] [Enemy10] Registered as sound listener
[22:37:06] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[22:37:06] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:37:06] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:37:06] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:37:06] [INFO] [LastChance] Found player: Player
[22:37:06] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:37:06] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:37:06] [INFO] [LastChance] Connected to player Died signal (C#)
[22:37:06] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:37:06] [INFO] [Player] Detected weapon: Shotgun (Shotgun pose)
[22:37:06] [INFO] [Player] Applied Shotgun arm pose: Left=(21, 6), Right=(-1, 6)
[22:37:08] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:08] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:09] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:37:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5767, 752.2654), source=ENEMY (Enemy3), range=1469, listeners=19
[22:37:09] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:37:09] [ENEMY] [Enemy2] Heard gunshot at (689.5767, 752.2654), source_type=1, intensity=0.02, distance=353
[22:37:09] [ENEMY] [Enemy4] Heard gunshot at (689.5767, 752.2654), source_type=1, intensity=0.07, distance=184
[22:37:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:37:09] [INFO] [LastChance] Threat detected: Bullet
[22:37:09] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:37:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:37:09] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[22:37:09] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[22:37:09] [ENEMY] [Enemy1] Player ammo empty state changed: false -> true
[22:37:09] [ENEMY] [Enemy2] Player ammo empty state changed: false -> true
[22:37:09] [ENEMY] [Enemy3] Player ammo empty state changed: false -> true
[22:37:09] [ENEMY] [Enemy4] Player ammo empty state changed: false -> true
[22:37:09] [ENEMY] [Enemy5] Player ammo empty state changed: false -> true
[22:37:09] [ENEMY] [Enemy6] Player ammo empty state changed: false -> true
[22:37:09] [ENEMY] [Enemy7] Player ammo empty state changed: false -> true
[22:37:09] [ENEMY] [Enemy8] Player ammo empty state changed: false -> true
[22:37:09] [ENEMY] [Enemy9] Player ammo empty state changed: false -> true
[22:37:09] [ENEMY] [Enemy10] Player ammo empty state changed: false -> true
[22:37:09] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(501.5498, 754.9543), source=PLAYER (Player), range=600, listeners=10
[22:37:09] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (501.5498, 754.9543), intensity=0.01, distance=452
[22:37:09] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:09] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (501.5498, 754.9543), intensity=0.05, distance=229
[22:37:09] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (501.5498, 754.9543), intensity=0.07, distance=188
[22:37:09] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (501.5498, 754.9543), intensity=0.03, distance=316
[22:37:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[22:37:09] [INFO] [Shotgun.FIX#212] Firing 12 pellets with 15° spread at pos=(501.5498, 754.9543)
[22:37:09] [INFO] [Shotgun.FIX#212] Normal pellet 1/12: extraOffset=8,0, distance=33,0px, pos=(534.0838, 749.6168)
[22:37:09] [INFO] [Shotgun.FIX#212] Normal pellet 2/12: extraOffset=-4,9, distance=20,1px, pos=(521.4499, 751.9108)
[22:37:09] [INFO] [Shotgun.FIX#212] Normal pellet 3/12: extraOffset=14,3, distance=39,3px, pos=(540.70575, 751.6443)
[22:37:09] [INFO] [Shotgun.FIX#212] Normal pellet 4/12: extraOffset=-8,6, distance=16,4px, pos=(517.8865, 753.75256)
[22:37:09] [INFO] [Shotgun.FIX#212] Normal pellet 5/12: extraOffset=2,8, distance=27,8px, pos=(529.2714, 753.59265)
[22:37:09] [INFO] [Shotgun.FIX#212] Normal pellet 6/12: extraOffset=-12,8, distance=12,2px, pos=(513.69794, 754.47205)
[22:37:09] [INFO] [Shotgun.FIX#212] Normal pellet 7/12: extraOffset=-2,5, distance=22,5px, pos=(524.032, 754.4435)
[22:37:09] [INFO] [Shotgun.FIX#212] Normal pellet 8/12: extraOffset=4,2, distance=29,2px, pos=(530.72217, 755.32404)
[22:37:09] [INFO] [Shotgun.FIX#212] Normal pellet 9/12: extraOffset=-0,2, distance=24,8px, pos=(526.3666, 755.5599)
[22:37:09] [INFO] [Shotgun.FIX#212] Normal pellet 10/12: extraOffset=-7,0, distance=18,0px, pos=(519.5851, 755.66583)
[22:37:09] [INFO] [Shotgun.FIX#212] Normal pellet 11/12: extraOffset=-7,2, distance=17,8px, pos=(519.27246, 756.8155)
[22:37:09] [INFO] [Shotgun.FIX#212] Normal pellet 12/12: extraOffset=0,4, distance=25,4px, pos=(526.8243, 757.3653)
[22:37:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(501.5498, 754.9543), source=PLAYER (Shotgun), range=1469, listeners=10
[22:37:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:37:09] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=452), can_see=false
[22:37:09] [ENEMY] [Enemy1] Pursuing vulnerability sound at (501.5498, 754.9543), distance=452
[22:37:09] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=229), can_see=false
[22:37:09] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=316), can_see=false
[22:37:09] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1265), can_see=false
[22:37:09] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1480), can_see=false
[22:37:09] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1206), can_see=false
[22:37:09] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1562), can_see=false
[22:37:09] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1785), can_see=false
[22:37:09] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=936), can_see=false
[22:37:09] [ENEMY] [Enemy3] Player empty ammo - priority attack triggered
[22:37:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5767, 752.2654), source=ENEMY (Enemy3), range=1469, listeners=10
[22:37:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:37:09] [INFO] [LastChance] Threat detected: Bullet
[22:37:09] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[22:37:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:37:09] [ENEMY] [Enemy3] Hit taken, health: 2/3
[22:37:09] [ENEMY] [Enemy3] Hit taken, health: 1/3
[22:37:09] [ENEMY] [Enemy3] Hit taken, health: 0/3
[22:37:09] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:37:09] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:37:09] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:37:09] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:37:09] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:37:09] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[22:37:09] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[22:37:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(771.6844, 911.0463), source=ENEMY (Enemy4), range=1469, listeners=9
[22:37:09] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
[22:37:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(709.6117, 883.1614), shooter_id=731738278532, bullet_pos=(709.6117, 883.1614)
[22:37:09] [INFO] [Bullet] Using shooter_position, distance=0
[22:37:09] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[22:37:09] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:37:09] [INFO] [Bullet] Starting wall penetration at (709.6117, 883.1614)
[22:37:09] [INFO] [Bullet] Raycast backward hit penetrating body at distance 3.86909198760986
[22:37:09] [INFO] [Bullet] Max penetration distance exceeded: 66.6666641235352 >= 48
[22:37:09] [INFO] [Bullet] Body exited signal received for penetrating body
[22:37:09] [INFO] [Bullet] Exiting penetration at (648.0356, 846.4941) after traveling 66.6666641235352 pixels through wall
[22:37:09] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:37:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
[22:37:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
[22:37:10] [INFO] [LastChance] Threat detected: Bullet
[22:37:10] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[22:37:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:37:10] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:37:10] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:37:10] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (812.45935, 754.2626)
[22:37:10] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
[22:37:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
[22:37:10] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:10] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:10] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(438.0016, 606.4489), shooter_id=731167852791, bullet_pos=(676.2815, 885.1375)
[22:37:10] [INFO] [Bullet] Using shooter_position, distance=366.666900634766
[22:37:10] [INFO] [Bullet] Distance to wall: 366.666900634766 (24.9670235051984% of viewport)
[22:37:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:37:10] [INFO] [LastChance] Threat detected: @Area2D@3727
[22:37:10] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[22:37:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:37:10] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:37:10] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:37:10] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:37:10] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:37:10] [INFO] [Player.Grenade] Timer started, grenade created at (610.8869, 753.7654)
[22:37:10] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:37:10] [INFO] [Player.Grenade] Step 1 complete! Drag: (345.20532, -14.544312)
[22:37:10] [INFO] [Shotgun.FIX#243] RMB released after 6 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:10] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=381), can_see=false
[22:37:10] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=293), can_see=false
[22:37:10] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:37:10] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=225), can_see=false
[22:37:10] [ENEMY] [Enemy4] Pursuing vulnerability sound at (501.5498, 754.9543), distance=312
[22:37:10] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1162), can_see=false
[22:37:10] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1373), can_see=false
[22:37:10] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1089), can_see=false
[22:37:10] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1465), can_see=false
[22:37:10] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1689), can_see=false
[22:37:10] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=877), can_see=false
[22:37:10] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[22:37:10] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[22:37:10] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[22:37:10] [ENEMY] [Enemy2] Pursuing vulnerability sound at (501.5498, 754.9543), distance=229
[22:37:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(438.0016, 606.4489), shooter_id=731167852791, bullet_pos=(598.5577, 1009.516)
[22:37:10] [INFO] [Bullet] Using shooter_position, distance=433.868347167969
[22:37:10] [INFO] [Bullet] Distance to wall: 433.868347167969 (29.542893572208% of viewport)
[22:37:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:37:10] [INFO] [Bullet] Starting wall penetration at (598.5577, 1009.516)
[22:37:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.2544574737549
[22:37:10] [INFO] [Bullet] Body exited signal received for penetrating body
[22:37:10] [INFO] [Bullet] Exiting penetration at (580.8932, 1037.784) after traveling 28.3333320617676 pixels through wall
[22:37:10] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[22:37:10] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:37:10] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:37:10] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:10] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:10] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:37:10] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:37:10] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:10] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:10] [ENEMY] [Enemy3] Ragdoll activated
[22:37:10] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:37:10] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:37:10] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:37:10] [INFO] [GrenadeBase] Grenade landed at (611.1536, 753.7654)
[22:37:10] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:37:10] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (-4319.784, -969.04803) (4427,1 px/s), Swing distance: 851,0
[22:37:10] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -2,920918
[22:37:10] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (-4319.784, -969.048), Swing: 851.0, Transfer: 1.00, Final speed: 2756.3
[22:37:10] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:37:10] [INFO] [Player.Grenade] Thrown! Velocity: 4427,1, Swing: 851,0
[22:37:10] [INFO] [Player.Grenade] State reset to IDLE
[22:37:10] [INFO] [Shotgun.FIX#243] RMB released after 25 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:10] [ENEMY] [Enemy1] Pursuing vulnerability sound at (501.5498, 754.9543), distance=207
[22:37:10] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=233), can_see=false
[22:37:10] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=144), can_see=false
[22:37:10] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=167), can_see=false
[22:37:10] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1193), can_see=false
[22:37:10] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1405), can_see=false
[22:37:10] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1044), can_see=false
[22:37:10] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1494), can_see=false
[22:37:10] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1718), can_see=false
[22:37:10] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=818), can_see=false
[22:37:10] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:10] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[22:37:10] [INFO] [Player.Grenade] Player rotation restored to 0
[22:37:10] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:10] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:37:11] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:11] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[22:37:11] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:11] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:11] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[22:37:11] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:37:11] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[22:37:11] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=125), can_see=false
[22:37:11] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1321), can_see=false
[22:37:11] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1538), can_see=false
[22:37:11] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1179), can_see=false
[22:37:11] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1616), can_see=false
[22:37:11] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1839), can_see=false
[22:37:11] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=884), can_see=false
[22:37:11] [ENEMY] [Enemy1] Player empty ammo - priority attack triggered
[22:37:11] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=126), can_see=false
[22:37:11] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:11] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:37:11] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[22:37:11] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=180), can_see=false
[22:37:11] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[22:37:11] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:37:11] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:37:11] [ENEMY] [Enemy1] Death animation component initialized
[22:37:11] [ENEMY] [Enemy2] Death animation component initialized
[22:37:11] [ENEMY] [Enemy3] Death animation component initialized
[22:37:11] [ENEMY] [Enemy4] Death animation component initialized
[22:37:11] [ENEMY] [Enemy5] Death animation component initialized
[22:37:11] [ENEMY] [Enemy6] Death animation component initialized
[22:37:11] [ENEMY] [Enemy7] Death animation component initialized
[22:37:11] [ENEMY] [Enemy8] Death animation component initialized
[22:37:11] [ENEMY] [Enemy9] Death animation component initialized
[22:37:11] [ENEMY] [Enemy10] Death animation component initialized
[22:37:11] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:37:11] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:37:11] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:37:11] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:37:11] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:37:11] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:37:11] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:37:11] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:37:11] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:37:11] [INFO] [ScoreManager] Level started with 10 enemies
[22:37:11] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:37:11] [ENEMY] [Enemy1] Registered as sound listener
[22:37:11] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[22:37:11] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:37:11] [ENEMY] [Enemy2] Registered as sound listener
[22:37:11] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[22:37:11] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:37:11] [ENEMY] [Enemy3] Registered as sound listener
[22:37:11] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[22:37:11] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:37:11] [ENEMY] [Enemy4] Registered as sound listener
[22:37:11] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[22:37:11] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:37:11] [ENEMY] [Enemy5] Registered as sound listener
[22:37:11] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[22:37:11] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:37:11] [ENEMY] [Enemy6] Registered as sound listener
[22:37:11] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[22:37:11] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:37:11] [ENEMY] [Enemy7] Registered as sound listener
[22:37:11] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[22:37:11] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:37:11] [ENEMY] [Enemy8] Registered as sound listener
[22:37:11] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[22:37:11] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:37:11] [ENEMY] [Enemy9] Registered as sound listener
[22:37:11] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[22:37:11] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:37:11] [ENEMY] [Enemy10] Registered as sound listener
[22:37:11] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[22:37:11] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:37:11] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:37:11] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:37:11] [INFO] [LastChance] Found player: Player
[22:37:11] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:37:11] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:37:11] [INFO] [LastChance] Connected to player Died signal (C#)
[22:37:11] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:37:11] [INFO] [Player] Detected weapon: Shotgun (Shotgun pose)
[22:37:11] [INFO] [Player] Applied Shotgun arm pose: Left=(21, 6), Right=(-1, 6)
[22:37:12] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[22:37:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:12] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:13] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:37:13] [ENEMY] [Enemy1] Player ammo empty state changed: false -> true
[22:37:13] [ENEMY] [Enemy2] Player ammo empty state changed: false -> true
[22:37:13] [ENEMY] [Enemy3] Player ammo empty state changed: false -> true
[22:37:13] [ENEMY] [Enemy4] Player ammo empty state changed: false -> true
[22:37:13] [ENEMY] [Enemy5] Player ammo empty state changed: false -> true
[22:37:13] [ENEMY] [Enemy6] Player ammo empty state changed: false -> true
[22:37:13] [ENEMY] [Enemy7] Player ammo empty state changed: false -> true
[22:37:13] [ENEMY] [Enemy8] Player ammo empty state changed: false -> true
[22:37:13] [ENEMY] [Enemy9] Player ammo empty state changed: false -> true
[22:37:13] [ENEMY] [Enemy10] Player ammo empty state changed: false -> true
[22:37:13] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(450, 785.3333), source=PLAYER (Player), range=600, listeners=19
[22:37:13] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:37:13] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (450, 785.3333), intensity=0.01, distance=460
[22:37:13] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:13] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (450, 785.3333), intensity=0.04, distance=241
[22:37:13] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:13] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (450, 785.3333), intensity=0.04, distance=242
[22:37:13] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (450, 785.3333), intensity=0.02, distance=368
[22:37:13] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:13] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[22:37:13] [INFO] [Shotgun.FIX#212] Firing 11 pellets with 15° spread at pos=(450, 785.33325)
[22:37:13] [INFO] [Shotgun.FIX#212] Normal pellet 1/11: extraOffset=2,5, distance=27,5px, pos=(477.44647, 783.3042)
[22:37:13] [INFO] [Shotgun.FIX#212] Normal pellet 2/11: extraOffset=14,2, distance=39,2px, pos=(489.1569, 783.37024)
[22:37:13] [INFO] [Shotgun.FIX#212] Normal pellet 3/11: extraOffset=9,9, distance=34,9px, pos=(484.84705, 783.91187)
[22:37:13] [INFO] [Shotgun.FIX#212] Normal pellet 4/11: extraOffset=3,2, distance=28,2px, pos=(478.15167, 784.92474)
[22:37:13] [INFO] [Shotgun.FIX#212] Normal pellet 5/11: extraOffset=-0,8, distance=24,2px, pos=(474.17447, 785.00836)
[22:37:13] [INFO] [Shotgun.FIX#212] Normal pellet 6/11: extraOffset=-13,5, distance=11,5px, pos=(461.467, 785.5059)
[22:37:13] [INFO] [Shotgun.FIX#212] Normal pellet 7/11: extraOffset=-11,8, distance=13,2px, pos=(463.12012, 786.2261)
[22:37:13] [INFO] [Shotgun.FIX#212] Normal pellet 8/11: extraOffset=0,5, distance=25,5px, pos=(475.3651, 787.69147)
[22:37:13] [INFO] [Shotgun.FIX#212] Normal pellet 9/11: extraOffset=13,9, distance=38,9px, pos=(488.62564, 790.2549)
[22:37:13] [INFO] [Shotgun.FIX#212] Normal pellet 10/11: extraOffset=-12,0, distance=13,0px, pos=(462.8845, 786.87683)
[22:37:13] [INFO] [Shotgun.FIX#212] Normal pellet 11/11: extraOffset=-1,7, distance=23,3px, pos=(472.85498, 789.7038)
[22:37:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 785.3333), source=PLAYER (Shotgun), range=1469, listeners=10
[22:37:13] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:37:13] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=460), can_see=false
[22:37:13] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 785.3333), distance=460
[22:37:13] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=241), can_see=false
[22:37:13] [ENEMY] [Enemy2] Pursuing vulnerability sound at (450, 785.3333), distance=241
[22:37:13] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=242), can_see=false
[22:37:13] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=368), can_see=false
[22:37:13] [ENEMY] [Enemy4] Pursuing vulnerability sound at (450, 785.3333), distance=368
[22:37:13] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1324), can_see=false
[22:37:13] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1537), can_see=false
[22:37:13] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1243), can_see=false
[22:37:13] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1595), can_see=false
[22:37:13] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1819), can_see=false
[22:37:13] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=910), can_see=false
[22:37:13] [ENEMY] [Enemy3] Hit taken, health: 1/2
[22:37:13] [ENEMY] [Enemy3] Hit taken, health: 0/2
[22:37:13] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:37:13] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:37:13] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:37:13] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:37:13] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:37:13] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:37:13] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:37:13] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1148.4427, 769.1847)
[22:37:13] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:13] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:13] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:13] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:13] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:37:13] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:37:13] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:37:13] [INFO] [Player.Grenade] Timer started, grenade created at (450, 756.72217)
[22:37:13] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:37:13] [INFO] [Player.Grenade] Step 1 complete! Drag: (121.239136, -8.080322)
[22:37:13] [INFO] [Shotgun.FIX#243] RMB released after 5 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:13] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:37:13] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:37:13] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:13] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:13] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:13] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=323), can_see=false
[22:37:13] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=130), can_see=false
[22:37:13] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=336), can_see=false
[22:37:13] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1315), can_see=false
[22:37:13] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1531), can_see=false
[22:37:13] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1257), can_see=false
[22:37:13] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1607), can_see=false
[22:37:13] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1831), can_see=false
[22:37:13] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=932), can_see=false
[22:37:13] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:37:13] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:37:13] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:13] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:14] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:14] [ENEMY] [Enemy3] Ragdoll activated
[22:37:14] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:37:14] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:37:14] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:37:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:14] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:14] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[22:37:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(686.1805, 785.9336), source=ENEMY (Enemy4), range=1469, listeners=9
[22:37:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[22:37:14] [INFO] [LastChance] Threat detected: Bullet
[22:37:14] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:37:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:37:14] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:14] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[22:37:14] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:37:14] [ENEMY] [Enemy2] Hit taken, health: 1/2
[22:37:14] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 785.3333), distance=229
[22:37:14] [ENEMY] [Enemy2] Pursuing vulnerability sound at (450, 785.3333), distance=93
[22:37:14] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=204), can_see=false
[22:37:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:14] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=160), can_see=false
[22:37:14] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1261), can_see=false
[22:37:14] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1476), can_see=false
[22:37:14] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1200), can_see=false
[22:37:14] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1556), can_see=false
[22:37:14] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1780), can_see=false
[22:37:14] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=896), can_see=false
[22:37:14] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[22:37:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:14] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[22:37:14] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:37:14] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (-2790.6184, -4295.574) (5122,5 px/s), Swing distance: 712,4
[22:37:14] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -2,1469252
[22:37:14] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (-2790.618, -4295.574), Swing: 712.4, Transfer: 1.00, Final speed: 2756.3
[22:37:14] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:37:14] [INFO] [Player.Grenade] Thrown! Velocity: 5122,5, Swing: 712,4
[22:37:14] [INFO] [Player.Grenade] State reset to IDLE
[22:37:14] [INFO] [Shotgun.FIX#243] RMB released after 0 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:14] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:14] [INFO] [Player.Grenade] Player rotation restored to 0
[22:37:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:14] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:37:14] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:14] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:14] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[22:37:14] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1250), can_see=false
[22:37:14] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1465), can_see=false
[22:37:14] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1190), can_see=false
[22:37:14] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1547), can_see=false
[22:37:14] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1770), can_see=false
[22:37:14] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=800), can_see=false
[22:37:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:15] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:15] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=140), can_see=false
[22:37:15] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:15] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:15] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[22:37:15] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[22:37:15] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:37:15] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:37:15] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:37:15] [ENEMY] [Enemy1] Death animation component initialized
[22:37:15] [ENEMY] [Enemy2] Death animation component initialized
[22:37:15] [ENEMY] [Enemy3] Death animation component initialized
[22:37:15] [ENEMY] [Enemy4] Death animation component initialized
[22:37:15] [ENEMY] [Enemy5] Death animation component initialized
[22:37:15] [ENEMY] [Enemy6] Death animation component initialized
[22:37:15] [ENEMY] [Enemy7] Death animation component initialized
[22:37:15] [ENEMY] [Enemy8] Death animation component initialized
[22:37:15] [ENEMY] [Enemy9] Death animation component initialized
[22:37:15] [ENEMY] [Enemy10] Death animation component initialized
[22:37:15] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:37:15] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:37:15] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:37:15] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:37:15] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:37:15] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:37:15] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:37:15] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:37:15] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:37:15] [INFO] [ScoreManager] Level started with 10 enemies
[22:37:15] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:37:15] [ENEMY] [Enemy1] Registered as sound listener
[22:37:15] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[22:37:15] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:37:15] [ENEMY] [Enemy2] Registered as sound listener
[22:37:15] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[22:37:15] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:37:15] [ENEMY] [Enemy3] Registered as sound listener
[22:37:15] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[22:37:15] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:37:15] [ENEMY] [Enemy4] Registered as sound listener
[22:37:15] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[22:37:15] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:37:15] [ENEMY] [Enemy5] Registered as sound listener
[22:37:15] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[22:37:15] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:37:15] [ENEMY] [Enemy6] Registered as sound listener
[22:37:15] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[22:37:15] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:37:15] [ENEMY] [Enemy7] Registered as sound listener
[22:37:15] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[22:37:15] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:37:15] [ENEMY] [Enemy8] Registered as sound listener
[22:37:15] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[22:37:15] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:37:15] [ENEMY] [Enemy9] Registered as sound listener
[22:37:15] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[22:37:15] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:37:15] [ENEMY] [Enemy10] Registered as sound listener
[22:37:15] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[22:37:15] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:37:15] [INFO] [Player] Detected weapon: Shotgun (Shotgun pose)
[22:37:15] [INFO] [Player] Applied Shotgun arm pose: Left=(21, 6), Right=(-1, 6)
[22:37:15] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:37:15] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:37:15] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:37:15] [INFO] [LastChance] Found player: Player
[22:37:15] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:37:15] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:37:15] [INFO] [LastChance] Connected to player Died signal (C#)
[22:37:16] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:16] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:17] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:37:17] [ENEMY] [Enemy1] Player ammo empty state changed: false -> true
[22:37:17] [ENEMY] [Enemy2] Player ammo empty state changed: false -> true
[22:37:17] [ENEMY] [Enemy3] Player ammo empty state changed: false -> true
[22:37:17] [ENEMY] [Enemy4] Player ammo empty state changed: false -> true
[22:37:17] [ENEMY] [Enemy5] Player ammo empty state changed: false -> true
[22:37:17] [ENEMY] [Enemy6] Player ammo empty state changed: false -> true
[22:37:17] [ENEMY] [Enemy7] Player ammo empty state changed: false -> true
[22:37:17] [ENEMY] [Enemy8] Player ammo empty state changed: false -> true
[22:37:17] [ENEMY] [Enemy9] Player ammo empty state changed: false -> true
[22:37:17] [ENEMY] [Enemy10] Player ammo empty state changed: false -> true
[22:37:17] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(450, 766.1666), source=PLAYER (Player), range=600, listeners=19
[22:37:17] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:37:17] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (450, 766.1666), intensity=0.01, distance=442
[22:37:17] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:17] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (450, 766.1666), intensity=0.05, distance=222
[22:37:17] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:17] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (450, 766.1666), intensity=0.04, distance=240
[22:37:17] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (450, 766.1666), intensity=0.02, distance=375
[22:37:17] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:17] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[22:37:17] [INFO] [Shotgun.FIX#212] Firing 11 pellets with 15° spread at pos=(450, 766.1666)
[22:37:17] [INFO] [Shotgun.FIX#212] Normal pellet 1/11: extraOffset=-1,2, distance=23,8px, pos=(473.50623, 762.242)
[22:37:17] [INFO] [Shotgun.FIX#212] Normal pellet 2/11: extraOffset=-14,0, distance=11,0px, pos=(460.87537, 764.4664)
[22:37:17] [INFO] [Shotgun.FIX#212] Normal pellet 3/11: extraOffset=0,6, distance=25,6px, pos=(475.35254, 762.3968)
[22:37:17] [INFO] [Shotgun.FIX#212] Normal pellet 4/11: extraOffset=-10,0, distance=15,0px, pos=(464.98734, 764.8212)
[22:37:17] [INFO] [Shotgun.FIX#212] Normal pellet 5/11: extraOffset=-13,2, distance=11,8px, pos=(461.7819, 765.14526)
[22:37:17] [INFO] [Shotgun.FIX#212] Normal pellet 6/11: extraOffset=-11,2, distance=13,8px, pos=(463.7846, 765.5618)
[22:37:17] [INFO] [Shotgun.FIX#212] Normal pellet 7/11: extraOffset=-4,5, distance=20,5px, pos=(470.54214, 765.9302)
[22:37:17] [INFO] [Shotgun.FIX#212] Normal pellet 8/11: extraOffset=13,8, distance=38,8px, pos=(488.80515, 766.0096)
[22:37:17] [INFO] [Shotgun.FIX#212] Normal pellet 9/11: extraOffset=8,4, distance=33,4px, pos=(483.33295, 767.96045)
[22:37:17] [INFO] [Shotgun.FIX#212] Normal pellet 10/11: extraOffset=-0,2, distance=24,8px, pos=(474.80026, 767.59875)
[22:37:17] [INFO] [Shotgun.FIX#212] Normal pellet 11/11: extraOffset=-0,9, distance=24,1px, pos=(473.97397, 768.1384)
[22:37:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 766.1666), source=PLAYER (Shotgun), range=1469, listeners=10
[22:37:17] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:37:17] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=442), can_see=false
[22:37:17] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 766.1666), distance=442
[22:37:17] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=222), can_see=false
[22:37:17] [ENEMY] [Enemy2] Pursuing vulnerability sound at (450, 766.1666), distance=222
[22:37:17] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=240), can_see=false
[22:37:17] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=375), can_see=false
[22:37:17] [ENEMY] [Enemy4] Pursuing vulnerability sound at (450, 766.1666), distance=375
[22:37:17] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1317), can_see=false
[22:37:17] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1533), can_see=false
[22:37:17] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1256), can_see=false
[22:37:17] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1603), can_see=false
[22:37:17] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1827), can_see=false
[22:37:17] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=925), can_see=false
[22:37:17] [ENEMY] [Enemy3] Hit taken, health: 1/2
[22:37:17] [ENEMY] [Enemy3] Hit taken, health: 0/2
[22:37:17] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:37:17] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:37:17] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:37:17] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:37:17] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:37:17] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:37:17] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:37:17] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1031.7068, 750.036)
[22:37:17] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:17] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:17] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:17] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:17] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:37:17] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:37:17] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:37:17] [INFO] [Player.Grenade] Timer started, grenade created at (450, 751.33325)
[22:37:17] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:37:17] [INFO] [Player.Grenade] Step 1 complete! Drag: (136.09802, -74.55078)
[22:37:17] [INFO] [Shotgun.FIX#243] RMB released after 6 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:17] [INFO] [Player.Grenade] G released - dropping grenade at feet
[22:37:17] [INFO] [Player.Grenade] Grenade dropped at feet at (450, 751.33325) (unfrozen)
[22:37:17] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:37:17] [INFO] [Player.Grenade] State reset to IDLE
[22:37:17] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:17] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=318), can_see=false
[22:37:17] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=125), can_see=false
[22:37:17] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=336), can_see=false
[22:37:17] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1313), can_see=false
[22:37:17] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1530), can_see=false
[22:37:17] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1257), can_see=false
[22:37:17] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1610), can_see=false
[22:37:17] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1833), can_see=false
[22:37:17] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=936), can_see=false
[22:37:17] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:17] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:17] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:17] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:17] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:17] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:17] [ENEMY] [Enemy3] Ragdoll activated
[22:37:17] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:37:18] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:18] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:18] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:37:18] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:18] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[22:37:18] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 766.1666), distance=210
[22:37:18] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:18] [ENEMY] [Enemy4] Pursuing vulnerability sound at (450, 766.1666), distance=212
[22:37:18] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=272), can_see=false
[22:37:18] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1389), can_see=false
[22:37:18] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1603), can_see=false
[22:37:18] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1318), can_see=false
[22:37:18] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1651), can_see=false
[22:37:18] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1874), can_see=false
[22:37:18] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=940), can_see=false
[22:37:18] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:18] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=247), can_see=false
[22:37:18] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:18] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:18] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:18] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:18] [INFO] [Shotgun.FIX#243] RMB released after 0 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:18] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[22:37:18] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:37:18] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[22:37:18] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[22:37:18] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[22:37:18] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:18] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[22:37:18] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[22:37:18] [ENEMY] [Enemy1] Player empty ammo - priority attack triggered
[22:37:18] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=261), can_see=false
[22:37:18] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1470), can_see=false
[22:37:18] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1673), can_see=false
[22:37:18] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1356), can_see=false
[22:37:18] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1646), can_see=false
[22:37:18] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1868), can_see=false
[22:37:18] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=792), can_see=false
[22:37:18] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:37:18] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[22:37:18] [ENEMY] [Enemy1] Player empty ammo - priority attack triggered
[22:37:19] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[22:37:19] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=322), can_see=false
[22:37:19] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[22:37:19] [ENEMY] [Enemy1] Player empty ammo - priority attack triggered
[22:37:19] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[22:37:19] [ENEMY] [Enemy3] Death animation completed
[22:37:19] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[22:37:19] [ENEMY] [Enemy1] Player empty ammo - priority attack triggered
[22:37:19] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[22:37:19] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 766.1666), distance=55
[22:37:19] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[22:37:19] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1522), can_see=false
[22:37:19] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1710), can_see=false
[22:37:19] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1303), can_see=false
[22:37:19] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1603), can_see=false
[22:37:19] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1822), can_see=false
[22:37:19] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=710), can_see=false
[22:37:19] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[22:37:19] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:19] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=380), can_see=false
[22:37:19] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:19] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) - pursuing to attack (dist=698)
[22:37:19] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[22:37:19] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:19] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[22:37:19] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=372), can_see=false
[22:37:19] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:19] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=373), can_see=false
[22:37:19] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1579), can_see=false
[22:37:19] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1756), can_see=false
[22:37:19] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1294), can_see=false
[22:37:19] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1583), can_see=false
[22:37:19] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1799), can_see=false
[22:37:19] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=664), can_see=false
[22:37:19] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=479), can_see=false
[22:37:20] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=449), can_see=false
[22:37:20] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=431), can_see=false
[22:37:20] [INFO] [GrenadeBase] Grenade landed at (358.7917, 779.0971)
[22:37:20] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1585), can_see=false
[22:37:20] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1761), can_see=false
[22:37:20] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1298), can_see=false
[22:37:20] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1584), can_see=false
[22:37:20] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1800), can_see=false
[22:37:20] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=663), can_see=false
[22:37:20] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=484), can_see=false
[22:37:20] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=449), can_see=false
[22:37:20] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
[22:37:20] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
[22:37:20] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=431), can_see=false
[22:37:20] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:37:20] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:37:20] [ENEMY] [Enemy1] Death animation component initialized
[22:37:20] [ENEMY] [Enemy2] Death animation component initialized
[22:37:20] [ENEMY] [Enemy3] Death animation component initialized
[22:37:20] [ENEMY] [Enemy4] Death animation component initialized
[22:37:20] [ENEMY] [Enemy5] Death animation component initialized
[22:37:20] [ENEMY] [Enemy6] Death animation component initialized
[22:37:20] [ENEMY] [Enemy7] Death animation component initialized
[22:37:20] [ENEMY] [Enemy8] Death animation component initialized
[22:37:20] [ENEMY] [Enemy9] Death animation component initialized
[22:37:20] [ENEMY] [Enemy10] Death animation component initialized
[22:37:20] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:37:20] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:37:20] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:37:20] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:37:20] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:37:20] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:37:20] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:37:20] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:37:20] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:37:20] [INFO] [ScoreManager] Level started with 10 enemies
[22:37:20] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:37:20] [ENEMY] [Enemy1] Registered as sound listener
[22:37:20] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[22:37:20] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:37:20] [ENEMY] [Enemy2] Registered as sound listener
[22:37:20] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[22:37:20] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:37:20] [ENEMY] [Enemy3] Registered as sound listener
[22:37:20] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[22:37:20] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:37:20] [ENEMY] [Enemy4] Registered as sound listener
[22:37:20] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[22:37:20] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:37:20] [ENEMY] [Enemy5] Registered as sound listener
[22:37:20] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[22:37:20] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:37:20] [ENEMY] [Enemy6] Registered as sound listener
[22:37:20] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[22:37:20] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:37:20] [ENEMY] [Enemy7] Registered as sound listener
[22:37:20] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[22:37:20] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:37:20] [ENEMY] [Enemy8] Registered as sound listener
[22:37:20] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[22:37:20] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:37:20] [ENEMY] [Enemy9] Registered as sound listener
[22:37:20] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[22:37:20] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:37:20] [ENEMY] [Enemy10] Registered as sound listener
[22:37:20] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[22:37:20] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:37:20] [INFO] [Player] Detected weapon: Shotgun (Shotgun pose)
[22:37:20] [INFO] [Player] Applied Shotgun arm pose: Left=(21, 6), Right=(-1, 6)
[22:37:20] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:37:20] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:37:20] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:37:20] [INFO] [LastChance] Found player: Player
[22:37:20] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:37:20] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:37:20] [INFO] [LastChance] Connected to player Died signal (C#)
[22:37:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:21] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:22] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:37:22] [ENEMY] [Enemy1] Player ammo empty state changed: false -> true
[22:37:22] [ENEMY] [Enemy2] Player ammo empty state changed: false -> true
[22:37:22] [ENEMY] [Enemy3] Player ammo empty state changed: false -> true
[22:37:22] [ENEMY] [Enemy4] Player ammo empty state changed: false -> true
[22:37:22] [ENEMY] [Enemy5] Player ammo empty state changed: false -> true
[22:37:22] [ENEMY] [Enemy6] Player ammo empty state changed: false -> true
[22:37:22] [ENEMY] [Enemy7] Player ammo empty state changed: false -> true
[22:37:22] [ENEMY] [Enemy8] Player ammo empty state changed: false -> true
[22:37:22] [ENEMY] [Enemy9] Player ammo empty state changed: false -> true
[22:37:22] [ENEMY] [Enemy10] Player ammo empty state changed: false -> true
[22:37:22] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(450, 775.6666), source=PLAYER (Player), range=600, listeners=19
[22:37:22] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:37:22] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (450, 775.6666), intensity=0.01, distance=451
[22:37:22] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:22] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (450, 775.6666), intensity=0.05, distance=231
[22:37:22] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:22] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (450, 775.6666), intensity=0.04, distance=241
[22:37:22] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (450, 775.6666), intensity=0.02, distance=371
[22:37:22] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[22:37:22] [INFO] [Shotgun.FIX#212] Firing 12 pellets with 15° spread at pos=(450, 775.6666)
[22:37:22] [INFO] [Shotgun.FIX#212] Normal pellet 1/12: extraOffset=-12,7, distance=12,3px, pos=(462.13766, 773.7743)
[22:37:22] [INFO] [Shotgun.FIX#212] Normal pellet 2/12: extraOffset=4,8, distance=29,8px, pos=(479.5452, 771.6859)
[22:37:22] [INFO] [Shotgun.FIX#212] Normal pellet 3/12: extraOffset=-1,8, distance=23,2px, pos=(473.0913, 772.9717)
[22:37:22] [INFO] [Shotgun.FIX#212] Normal pellet 4/12: extraOffset=2,8, distance=27,8px, pos=(477.61865, 772.94574)
[22:37:22] [INFO] [Shotgun.FIX#212] Normal pellet 5/12: extraOffset=7,0, distance=32,0px, pos=(482.00327, 774.3317)
[22:37:22] [INFO] [Shotgun.FIX#212] Normal pellet 6/12: extraOffset=-6,0, distance=19,0px, pos=(468.95892, 774.5287)
[22:37:22] [INFO] [Shotgun.FIX#212] Normal pellet 7/12: extraOffset=-5,5, distance=19,5px, pos=(469.49854, 775.5327)
[22:37:22] [INFO] [Shotgun.FIX#212] Normal pellet 8/12: extraOffset=-9,3, distance=15,7px, pos=(465.6991, 775.54565)
[22:37:22] [INFO] [Shotgun.FIX#212] Normal pellet 9/12: extraOffset=-5,2, distance=19,8px, pos=(469.74014, 776.456)
[22:37:22] [INFO] [Shotgun.FIX#212] Normal pellet 10/12: extraOffset=-8,8, distance=16,2px, pos=(466.19885, 776.8803)
[22:37:22] [INFO] [Shotgun.FIX#212] Normal pellet 11/12: extraOffset=-6,2, distance=18,8px, pos=(468.6741, 777.4414)
[22:37:22] [INFO] [Shotgun.FIX#212] Normal pellet 12/12: extraOffset=12,7, distance=37,7px, pos=(487.40976, 780.07556)
[22:37:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 775.6666), source=PLAYER (Shotgun), range=1469, listeners=10
[22:37:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:37:22] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=451), can_see=false
[22:37:22] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 775.6666), distance=451
[22:37:22] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=231), can_see=false
[22:37:22] [ENEMY] [Enemy2] Pursuing vulnerability sound at (450, 775.6666), distance=231
[22:37:22] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=241), can_see=false
[22:37:22] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=371), can_see=false
[22:37:22] [ENEMY] [Enemy4] Pursuing vulnerability sound at (450, 775.6666), distance=371
[22:37:22] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1320), can_see=false
[22:37:22] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1535), can_see=false
[22:37:22] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1222), can_see=false
[22:37:22] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1599), can_see=false
[22:37:22] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1823), can_see=false
[22:37:22] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=918), can_see=false
[22:37:22] [ENEMY] [Enemy3] Hit taken, health: 1/2
[22:37:22] [ENEMY] [Enemy3] Hit taken, health: 0/2
[22:37:22] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:37:22] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:37:22] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:37:22] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:37:22] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:37:22] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:37:22] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:37:22] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:22] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (495.73477, 795.4146)
[22:37:22] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:22] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:22] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:22] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:22] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:22] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:37:22] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:37:22] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:37:22] [INFO] [Player.Grenade] Timer started, grenade created at (450, 728.0025)
[22:37:22] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:37:22] [INFO] [Player.Grenade] Step 1 complete! Drag: (664.5383, -130.36823)
[22:37:23] [INFO] [Shotgun.FIX#243] RMB released after 6 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:23] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=295), can_see=false
[22:37:23] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=105), can_see=false
[22:37:23] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=340), can_see=false
[22:37:23] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1306), can_see=false
[22:37:23] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1526), can_see=false
[22:37:23] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1258), can_see=false
[22:37:23] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1620), can_see=false
[22:37:23] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1843), can_see=false
[22:37:23] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=954), can_see=false
[22:37:23] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:23] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:37:23] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:37:23] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:23] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:23] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:37:23] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:37:23] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:23] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:23] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:23] [ENEMY] [Enemy3] Ragdoll activated
[22:37:23] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:37:23] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:23] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:37:23] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:37:23] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:23] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:23] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[22:37:23] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:23] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:23] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(665.6868, 788.9744), source=ENEMY (Enemy4), range=1469, listeners=9
[22:37:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[22:37:23] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 775.6666), distance=220
[22:37:23] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[22:37:23] [INFO] [LastChance] Threat detected: Bullet
[22:37:23] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:37:23] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:37:23] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:37:23] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1337), can_see=false
[22:37:23] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1552), can_see=false
[22:37:23] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1271), can_see=false
[22:37:23] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1618), can_see=false
[22:37:23] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1841), can_see=false
[22:37:23] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=933), can_see=false
[22:37:23] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:23] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=221), can_see=false
[22:37:23] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:23] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[22:37:23] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=135), can_see=false
[22:37:23] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[22:37:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(597.7638, 784.8425), shooter_id=908771462024, bullet_pos=(203.9174, 714.9496)
[22:37:23] [INFO] [Bullet] Using shooter_position, distance=399.999969482422
[22:37:23] [INFO] [Bullet] Distance to wall: 399.999969482422 (27.2367334571442% of viewport)
[22:37:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:37:23] [INFO] [Bullet] Starting wall penetration at (203.9174, 714.9496)
[22:37:23] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[22:37:23] [INFO] [Bullet] Exiting penetration at (166.1738, 708.2516) after traveling 33.3333320617676 pixels through wall
[22:37:23] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:37:23] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:23] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[22:37:23] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:23] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=226), can_see=false
[22:37:23] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:23] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:23] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:24] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:24] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) - pursuing to attack (dist=748)
[22:37:24] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:24] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1386), can_see=false
[22:37:24] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1586), can_see=false
[22:37:24] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1265), can_see=false
[22:37:24] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1565), can_see=false
[22:37:24] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1788), can_see=false
[22:37:24] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=731), can_see=false
[22:37:24] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:24] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:24] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:24] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=319), can_see=false
[22:37:24] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:24] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:24] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=285), can_see=false
[22:37:24] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:24] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[22:37:24] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:24] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[22:37:24] [ENEMY] [Enemy3] Death animation completed
[22:37:24] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[22:37:24] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:37:24] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (904.93494, -7953.2344) (8004,6 px/s), Swing distance: 1314,7
[22:37:24] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,4575015
[22:37:24] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (904.9349, -7953.234), Swing: 1314.7, Transfer: 1.00, Final speed: 2756.3
[22:37:24] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:37:24] [INFO] [Player.Grenade] Thrown! Velocity: 8004,6, Swing: 1314,7
[22:37:24] [INFO] [Player.Grenade] State reset to IDLE
[22:37:24] [INFO] [Shotgun.FIX#243] RMB released after 0 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:24] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:24] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:24] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[22:37:24] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:24] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 775.6666), distance=66
[22:37:24] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[22:37:24] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:24] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1446), can_see=false
[22:37:24] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1631), can_see=false
[22:37:24] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1270), can_see=false
[22:37:24] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1524), can_see=false
[22:37:24] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1743), can_see=false
[22:37:24] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=643), can_see=true
[22:37:24] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) - pursuing to attack (dist=403)
[22:37:24] [ENEMY] [Enemy2] State: SUPPRESSED -> RETREATING
[22:37:24] [INFO] [Player.Grenade] Player rotation restored to 0
[22:37:24] [ENEMY] [Enemy1] FLANKING started: target=(277.4434, 930.2738), side=left, pos=(484.9308, 744.4374)
[22:37:24] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[22:37:24] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:37:24] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:24] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:24] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=434), can_see=false
[22:37:24] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[22:37:24] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[22:37:24] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:24] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:24] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=357), can_see=false
[22:37:24] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=383), can_see=false
[22:37:24] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[22:37:24] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:24] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:25] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:37:25] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1531), can_see=false
[22:37:25] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1703), can_see=false
[22:37:25] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1234), can_see=false
[22:37:25] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1518), can_see=false
[22:37:25] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1734), can_see=false
[22:37:25] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=600), can_see=false
[22:37:25] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=556), can_see=false
[22:37:25] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=356), can_see=false
[22:37:25] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=514), can_see=false
[22:37:25] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1666), can_see=false
[22:37:25] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1833), can_see=false
[22:37:25] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1353), can_see=false
[22:37:25] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1600), can_see=false
[22:37:25] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1812), can_see=false
[22:37:25] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=662), can_see=false
[22:37:25] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=684), can_see=false
[22:37:25] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
[22:37:25] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
[22:37:25] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=348), can_see=false
[22:37:25] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=667), can_see=false
[22:37:25] [INFO] [GrenadeBase] Grenade landed at (246.0054, 1166.803)
[22:37:25] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:37:25] [INFO] [GrenadeBase] EXPLODED at (246.0054, 1166.803)!
[22:37:25] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(246.0054, 1166.803), source=NEUTRAL (FragGrenade), range=2937, listeners=9
[22:37:25] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
[22:37:25] [ENEMY] [Enemy1] Hit taken, health: 2/3
[22:37:25] [ENEMY] [Enemy1] Hit taken, health: 1/3
[22:37:25] [ENEMY] [Enemy1] Hit taken, health: 0/3
[22:37:25] [ENEMY] [Enemy1] Enemy died (ricochet: false, penetration: false)
[22:37:25] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[22:37:25] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 8)
[22:37:25] [INFO] [DeathAnim] Started - Angle: -91.4 deg, Index: 5
[22:37:25] [ENEMY] [Enemy1] Death animation started with hit direction: (-0.023933, -0.999714)
[22:37:25] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 145.4
[22:37:25] [INFO] [FragGrenade] Player found in blast radius at distance 205.2
[22:37:25] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[22:37:25] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[22:37:25] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[22:37:25] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[22:37:25] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[22:37:26] [INFO] [PenultimateHit] Player died - ending penultimate effect
[22:37:26] [INFO] [LastChance] Player died
[22:37:26] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 205.2
[22:37:26] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -1.4 degrees
[22:37:26] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 90.6 degrees
[22:37:26] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 162.9 degrees
[22:37:26] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 260.9 degrees
[22:37:26] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1775), can_see=false
[22:37:26] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1935), can_see=false
[22:37:26] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1442), can_see=false
[22:37:26] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1653), can_see=false
[22:37:26] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1860), can_see=false
[22:37:26] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=708), can_see=false
[22:37:26] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=757), can_see=false
[22:37:26] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=687), can_see=false
[22:37:26] [ENEMY] [Enemy1] Ragdoll activated
[22:37:26] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:37:26] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:37:26] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:37:26] [ENEMY] [Enemy1] Death animation component initialized
[22:37:26] [ENEMY] [Enemy2] Death animation component initialized
[22:37:26] [ENEMY] [Enemy3] Death animation component initialized
[22:37:26] [ENEMY] [Enemy4] Death animation component initialized
[22:37:26] [ENEMY] [Enemy5] Death animation component initialized
[22:37:26] [ENEMY] [Enemy6] Death animation component initialized
[22:37:26] [ENEMY] [Enemy7] Death animation component initialized
[22:37:26] [ENEMY] [Enemy8] Death animation component initialized
[22:37:26] [ENEMY] [Enemy9] Death animation component initialized
[22:37:26] [ENEMY] [Enemy10] Death animation component initialized
[22:37:26] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:37:26] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:37:26] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:37:26] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:37:26] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:37:26] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:37:26] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:37:26] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[22:37:26] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:37:26] [INFO] [ScoreManager] Level started with 10 enemies
[22:37:26] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
[22:37:26] [ENEMY] [Enemy1] Registered as sound listener
[22:37:26] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[22:37:26] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
[22:37:26] [ENEMY] [Enemy2] Registered as sound listener
[22:37:26] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[22:37:26] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
[22:37:26] [ENEMY] [Enemy3] Registered as sound listener
[22:37:26] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[22:37:26] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
[22:37:26] [ENEMY] [Enemy4] Registered as sound listener
[22:37:26] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[22:37:26] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
[22:37:26] [ENEMY] [Enemy5] Registered as sound listener
[22:37:26] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[22:37:26] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
[22:37:26] [ENEMY] [Enemy6] Registered as sound listener
[22:37:26] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[22:37:26] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
[22:37:26] [ENEMY] [Enemy7] Registered as sound listener
[22:37:26] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[22:37:26] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
[22:37:26] [ENEMY] [Enemy8] Registered as sound listener
[22:37:26] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[22:37:26] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
[22:37:26] [ENEMY] [Enemy9] Registered as sound listener
[22:37:26] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[22:37:26] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
[22:37:26] [ENEMY] [Enemy10] Registered as sound listener
[22:37:26] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[22:37:26] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:37:26] [INFO] [Player] Detected weapon: Shotgun (Shotgun pose)
[22:37:26] [INFO] [Player] Applied Shotgun arm pose: Left=(21, 6), Right=(-1, 6)
[22:37:26] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:37:26] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:37:26] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:37:26] [INFO] [LastChance] Found player: Player
[22:37:26] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:37:26] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:37:26] [INFO] [LastChance] Connected to player Died signal (C#)
[22:37:30] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:37:31] [ENEMY] [Enemy1] Player ammo empty state changed: false -> true
[22:37:31] [ENEMY] [Enemy2] Player ammo empty state changed: false -> true
[22:37:31] [ENEMY] [Enemy3] Player ammo empty state changed: false -> true
[22:37:31] [ENEMY] [Enemy4] Player ammo empty state changed: false -> true
[22:37:31] [ENEMY] [Enemy5] Player ammo empty state changed: false -> true
[22:37:31] [ENEMY] [Enemy6] Player ammo empty state changed: false -> true
[22:37:31] [ENEMY] [Enemy7] Player ammo empty state changed: false -> true
[22:37:31] [ENEMY] [Enemy8] Player ammo empty state changed: false -> true
[22:37:31] [ENEMY] [Enemy9] Player ammo empty state changed: false -> true
[22:37:31] [ENEMY] [Enemy10] Player ammo empty state changed: false -> true
[22:37:31] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(450, 751.4444), source=PLAYER (Player), range=600, listeners=18
[22:37:31] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
[22:37:31] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (450, 751.4444), intensity=0.01, distance=429
[22:37:31] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:31] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (450, 751.4444), intensity=0.06, distance=208
[22:37:31] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:31] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (450, 751.4444), intensity=0.04, distance=240
[22:37:31] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (450, 751.4444), intensity=0.02, distance=380
[22:37:31] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:31] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[22:37:31] [INFO] [Shotgun.FIX#212] Firing 10 pellets with 15° spread at pos=(450, 751.4444)
[22:37:31] [INFO] [Shotgun.FIX#212] Normal pellet 1/10: extraOffset=5,7, distance=30,7px, pos=(479.98523, 744.7669)
[22:37:31] [INFO] [Shotgun.FIX#212] Normal pellet 2/10: extraOffset=2,1, distance=27,1px, pos=(476.66388, 746.52905)
[22:37:31] [INFO] [Shotgun.FIX#212] Normal pellet 3/10: extraOffset=-13,8, distance=11,2px, pos=(461.07867, 749.5079)
[22:37:31] [INFO] [Shotgun.FIX#212] Normal pellet 4/10: extraOffset=1,4, distance=26,4px, pos=(476.0304, 747.0601)
[22:37:31] [INFO] [Shotgun.FIX#212] Normal pellet 5/10: extraOffset=2,0, distance=27,0px, pos=(476.79684, 748.3792)
[22:37:31] [INFO] [Shotgun.FIX#212] Normal pellet 6/10: extraOffset=2,4, distance=27,4px, pos=(477.28235, 749.11975)
[22:37:31] [INFO] [Shotgun.FIX#212] Normal pellet 7/10: extraOffset=-9,7, distance=15,3px, pos=(465.32764, 750.80164)
[22:37:31] [INFO] [Shotgun.FIX#212] Normal pellet 8/10: extraOffset=-4,8, distance=20,2px, pos=(470.1735, 750.4126)
[22:37:31] [INFO] [Shotgun.FIX#212] Normal pellet 9/10: extraOffset=6,3, distance=31,3px, pos=(481.32532, 751.9383)
[22:37:31] [INFO] [Shotgun.FIX#212] Normal pellet 10/10: extraOffset=-12,2, distance=12,8px, pos=(462.75513, 752.11224)
[22:37:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 751.4444), source=PLAYER (Shotgun), range=1469, listeners=10
[22:37:31] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:37:31] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=429), can_see=false
[22:37:31] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 751.4444), distance=429
[22:37:31] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=208), can_see=false
[22:37:31] [ENEMY] [Enemy2] Pursuing vulnerability sound at (450, 751.4444), distance=208
[22:37:31] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=240), can_see=false
[22:37:31] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=380), can_see=false
[22:37:31] [ENEMY] [Enemy4] Pursuing vulnerability sound at (450, 751.4444), distance=380
[22:37:31] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1313), can_see=false
[22:37:31] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1530), can_see=false
[22:37:31] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1171), can_see=false
[22:37:31] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1609), can_see=false
[22:37:31] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1833), can_see=false
[22:37:31] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1107), can_see=false
[22:37:31] [ENEMY] [Enemy3] Hit taken, health: 2/3
[22:37:31] [ENEMY] [Enemy3] Hit taken, health: 1/3
[22:37:31] [ENEMY] [Enemy3] Hit taken, health: 0/3
[22:37:31] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:37:31] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:37:31] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:37:31] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:37:31] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:37:31] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:37:31] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:37:31] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=375), can_see=false
[22:37:31] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=179), can_see=false
[22:37:31] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=335), can_see=false
[22:37:31] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1332), can_see=false
[22:37:31] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1542), can_see=false
[22:37:31] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1165), can_see=false
[22:37:31] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1585), can_see=false
[22:37:31] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1809), can_see=false
[22:37:31] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1063), can_see=false
[22:37:31] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:31] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (772.9683, 1073.8531)
[22:37:31] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:31] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:31] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:31] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:31] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:31] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:31] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:37:31] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:37:31] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:37:31] [INFO] [Player.Grenade] Timer started, grenade created at (450, 853.4448)
[22:37:31] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:37:31] [INFO] [Player.Grenade] Step 1 complete! Drag: (507.0313, -143.4754)
[22:37:31] [ENEMY] [Enemy3] Ragdoll activated
[22:37:31] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:37:31] [INFO] [Shotgun.FIX#243] RMB released after 5 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:31] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:31] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:37:31] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:37:31] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:31] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:31] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:32] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:37:32] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:37:32] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:32] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:32] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:32] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:32] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:37:32] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:37:32] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 751.4444), distance=195
[22:37:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:32] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:32] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=223), can_see=false
[22:37:32] [ENEMY] [Enemy2] Pursuing vulnerability sound at (450, 751.4444), distance=79
[22:37:32] [ENEMY] [Enemy4] Pursuing vulnerability sound at (450, 751.4444), distance=209
[22:37:32] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1398), can_see=false
[22:37:32] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1595), can_see=false
[22:37:32] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1180), can_see=false
[22:37:32] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1555), can_see=false
[22:37:32] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1777), can_see=false
[22:37:32] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=984), can_see=false
[22:37:32] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:32] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:32] [ENEMY] [Enemy2] FLANKING started: target=(605.2358, 932.3368), side=right, pos=(494.1008, 738.7513)
[22:37:32] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[22:37:32] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:32] [ENEMY] [Enemy2] State: FLANKING -> COMBAT
[22:37:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:32] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[22:37:32] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:37:32] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (1602.0305, -6978.185) (7159,7 px/s), Swing distance: 926,8
[22:37:32] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,3451297
[22:37:32] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (1602.031, -6978.185), Swing: 926.8, Transfer: 1.00, Final speed: 2756.3
[22:37:32] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:37:32] [INFO] [Player.Grenade] Thrown! Velocity: 7159,7, Swing: 926,8
[22:37:32] [INFO] [Player.Grenade] State reset to IDLE
[22:37:32] [INFO] [Shotgun.FIX#243] RMB released after 0 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:32] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=378), can_see=false
[22:37:32] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[22:37:32] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:37:32] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[22:37:32] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[22:37:32] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:32] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=319), can_see=false
[22:37:32] [INFO] [Player.Grenade] Player rotation restored to 0
[22:37:32] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:32] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:37:32] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=291), can_see=false
[22:37:32] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1507), can_see=false
[22:37:32] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1695), can_see=false
[22:37:32] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1257), can_see=false
[22:37:32] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1589), can_see=false
[22:37:32] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1809), can_see=false
[22:37:32] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=971), can_see=false
[22:37:32] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) - pursuing to attack (dist=425)
[22:37:32] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:33] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=437), can_see=true
[22:37:33] [ENEMY] [Enemy3] Death animation completed
[22:37:33] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:33] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:37:33] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:37:33] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=437), can_see=false
[22:37:33] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 751.4444), distance=57
[22:37:33] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:33] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=318), can_see=false
[22:37:33] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1603), can_see=false
[22:37:33] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1781), can_see=false
[22:37:33] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1320), can_see=false
[22:37:33] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1608), can_see=false
[22:37:33] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1823), can_see=false
[22:37:33] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=949), can_see=false
[22:37:33] [ENEMY] [Enemy1] FLANKING started: target=(193.5073, 1007.189), side=left, pos=(492.4378, 736.0663)
[22:37:33] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[22:37:33] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:37:33] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:37:33] [ENEMY] [Enemy1] Death animation component initialized
[22:37:33] [ENEMY] [Enemy2] Death animation component initialized
[22:37:33] [ENEMY] [Enemy3] Death animation component initialized
[22:37:33] [ENEMY] [Enemy4] Death animation component initialized
[22:37:33] [ENEMY] [Enemy5] Death animation component initialized
[22:37:33] [ENEMY] [Enemy6] Death animation component initialized
[22:37:33] [ENEMY] [Enemy7] Death animation component initialized
[22:37:33] [ENEMY] [Enemy8] Death animation component initialized
[22:37:33] [ENEMY] [Enemy9] Death animation component initialized
[22:37:33] [ENEMY] [Enemy10] Death animation component initialized
[22:37:33] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:37:33] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:37:33] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:37:33] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:37:33] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:37:33] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:37:33] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:37:33] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:37:33] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:37:33] [INFO] [ScoreManager] Level started with 10 enemies
[22:37:33] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:37:33] [ENEMY] [Enemy1] Registered as sound listener
[22:37:33] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[22:37:33] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:37:33] [ENEMY] [Enemy2] Registered as sound listener
[22:37:33] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[22:37:33] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:37:33] [ENEMY] [Enemy3] Registered as sound listener
[22:37:33] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[22:37:33] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:37:33] [ENEMY] [Enemy4] Registered as sound listener
[22:37:33] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[22:37:33] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:37:33] [ENEMY] [Enemy5] Registered as sound listener
[22:37:33] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[22:37:33] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:37:33] [ENEMY] [Enemy6] Registered as sound listener
[22:37:33] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[22:37:33] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:37:33] [ENEMY] [Enemy7] Registered as sound listener
[22:37:33] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[22:37:33] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:37:33] [ENEMY] [Enemy8] Registered as sound listener
[22:37:33] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[22:37:33] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:37:33] [ENEMY] [Enemy9] Registered as sound listener
[22:37:33] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[22:37:33] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:37:33] [ENEMY] [Enemy10] Registered as sound listener
[22:37:33] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[22:37:33] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:37:33] [INFO] [Player] Detected weapon: Shotgun (Shotgun pose)
[22:37:33] [INFO] [Player] Applied Shotgun arm pose: Left=(21, 6), Right=(-1, 6)
[22:37:33] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:37:33] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:37:33] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:37:33] [INFO] [LastChance] Found player: Player
[22:37:33] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:37:33] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:37:33] [INFO] [LastChance] Connected to player Died signal (C#)
[22:37:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:34] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:35] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:37:35] [ENEMY] [Enemy1] Player ammo empty state changed: false -> true
[22:37:35] [ENEMY] [Enemy2] Player ammo empty state changed: false -> true
[22:37:35] [ENEMY] [Enemy3] Player ammo empty state changed: false -> true
[22:37:35] [ENEMY] [Enemy4] Player ammo empty state changed: false -> true
[22:37:35] [ENEMY] [Enemy5] Player ammo empty state changed: false -> true
[22:37:35] [ENEMY] [Enemy6] Player ammo empty state changed: false -> true
[22:37:35] [ENEMY] [Enemy7] Player ammo empty state changed: false -> true
[22:37:35] [ENEMY] [Enemy8] Player ammo empty state changed: false -> true
[22:37:35] [ENEMY] [Enemy9] Player ammo empty state changed: false -> true
[22:37:35] [ENEMY] [Enemy10] Player ammo empty state changed: false -> true
[22:37:35] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(450, 751.6666), source=PLAYER (Player), range=600, listeners=19
[22:37:35] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:37:35] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (450, 751.6666), intensity=0.01, distance=429
[22:37:35] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:35] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (450, 751.6666), intensity=0.06, distance=208
[22:37:35] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:35] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (450, 751.6666), intensity=0.04, distance=240
[22:37:35] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (450, 751.6666), intensity=0.02, distance=380
[22:37:35] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:35] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[22:37:35] [INFO] [Shotgun.FIX#212] Firing 9 pellets with 15° spread at pos=(450, 751.6666)
[22:37:35] [INFO] [Shotgun.FIX#212] Normal pellet 1/9: extraOffset=1,7, distance=26,7px, pos=(476.1055, 746.0998)
[22:37:35] [INFO] [Shotgun.FIX#212] Normal pellet 2/9: extraOffset=5,7, distance=30,7px, pos=(480.31317, 747.1322)
[22:37:35] [INFO] [Shotgun.FIX#212] Normal pellet 3/9: extraOffset=8,6, distance=33,6px, pos=(483.3562, 747.32587)
[22:37:35] [INFO] [Shotgun.FIX#212] Normal pellet 4/9: extraOffset=-3,4, distance=21,6px, pos=(471.51743, 749.7684)
[22:37:35] [INFO] [Shotgun.FIX#212] Normal pellet 5/9: extraOffset=-13,6, distance=11,4px, pos=(461.3863, 750.8331)
[22:37:35] [INFO] [Shotgun.FIX#212] Normal pellet 6/9: extraOffset=-12,1, distance=12,9px, pos=(462.901, 751.54956)
[22:37:35] [INFO] [Shotgun.FIX#212] Normal pellet 7/9: extraOffset=-7,7, distance=17,3px, pos=(467.28778, 751.9775)
[22:37:35] [INFO] [Shotgun.FIX#212] Normal pellet 8/9: extraOffset=-14,8, distance=10,2px, pos=(460.15634, 752.1817)
[22:37:35] [INFO] [Shotgun.FIX#212] Normal pellet 9/9: extraOffset=-5,8, distance=19,2px, pos=(469.11627, 752.816)
[22:37:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 751.6666), source=PLAYER (Shotgun), range=1469, listeners=10
[22:37:35] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:37:35] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=429), can_see=false
[22:37:35] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 751.6666), distance=429
[22:37:35] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=208), can_see=false
[22:37:35] [ENEMY] [Enemy2] Pursuing vulnerability sound at (450, 751.6666), distance=208
[22:37:35] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=240), can_see=false
[22:37:35] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=380), can_see=false
[22:37:35] [ENEMY] [Enemy4] Pursuing vulnerability sound at (450, 751.6666), distance=380
[22:37:35] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1313), can_see=false
[22:37:35] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1530), can_see=false
[22:37:35] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1257), can_see=false
[22:37:35] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1609), can_see=false
[22:37:35] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1833), can_see=false
[22:37:35] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=936), can_see=false
[22:37:35] [ENEMY] [Enemy3] Hit taken, health: 2/3
[22:37:35] [ENEMY] [Enemy3] Hit taken, health: 1/3
[22:37:35] [ENEMY] [Enemy3] Hit taken, health: 0/3
[22:37:35] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:37:35] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:37:35] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:37:35] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:37:35] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:37:35] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=406), can_see=false
[22:37:35] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=209), can_see=false
[22:37:35] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=338), can_see=false
[22:37:35] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1343), can_see=false
[22:37:35] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1550), can_see=false
[22:37:35] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1250), can_see=false
[22:37:35] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1573), can_see=false
[22:37:35] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1796), can_see=false
[22:37:35] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=871), can_see=false
[22:37:35] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:37:35] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:37:35] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (999.93585, 813.4767)
[22:37:35] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:35] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:35] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:35] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:35] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:36] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:37:36] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:37:36] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:37:36] [INFO] [Player.Grenade] Timer started, grenade created at (450, 879.9783)
[22:37:36] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:37:36] [INFO] [Player.Grenade] Step 1 complete! Drag: (280.06366, -64.77112)
[22:37:36] [INFO] [Shotgun.FIX#243] RMB released after 5 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:36] [ENEMY] [Enemy3] Ragdoll activated
[22:37:36] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:37:36] [INFO] [Player.Grenade] G released - dropping grenade at feet
[22:37:36] [INFO] [Player.Grenade] Grenade dropped at feet at (450, 897.57837) (unfrozen)
[22:37:36] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:37:36] [INFO] [Player.Grenade] State reset to IDLE
[22:37:36] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:36] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:36] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:36] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:36] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:36] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[22:37:36] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:36] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:36] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 751.6666), distance=195
[22:37:36] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:36] [ENEMY] [Enemy4] Pursuing vulnerability sound at (450, 751.6666), distance=213
[22:37:36] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=407), can_see=false
[22:37:36] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=251), can_see=false
[22:37:36] [ENEMY] [Enemy2] Pursuing vulnerability sound at (450, 751.6666), distance=79
[22:37:36] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1415), can_see=false
[22:37:36] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1609), can_see=false
[22:37:36] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1274), can_see=false
[22:37:36] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1551), can_see=false
[22:37:36] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1772), can_see=false
[22:37:36] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=752), can_see=false
[22:37:36] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:36] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:37:36] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:36] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) - pursuing to attack (dist=720)
[22:37:36] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:36] [INFO] [Shotgun.FIX#243] RMB released after 31 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:36] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:36] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) - pursuing to attack (dist=404)
[22:37:36] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[22:37:36] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:36] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:37:36] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:36] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=318), can_see=false
[22:37:36] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[22:37:36] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[22:37:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:37:36] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:37:36] [ENEMY] [Enemy1] Death animation component initialized
[22:37:36] [ENEMY] [Enemy2] Death animation component initialized
[22:37:36] [ENEMY] [Enemy3] Death animation component initialized
[22:37:36] [ENEMY] [Enemy4] Death animation component initialized
[22:37:36] [ENEMY] [Enemy5] Death animation component initialized
[22:37:36] [ENEMY] [Enemy6] Death animation component initialized
[22:37:36] [ENEMY] [Enemy7] Death animation component initialized
[22:37:36] [ENEMY] [Enemy8] Death animation component initialized
[22:37:36] [ENEMY] [Enemy9] Death animation component initialized
[22:37:36] [ENEMY] [Enemy10] Death animation component initialized
[22:37:36] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:37:36] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:37:36] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:37:36] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:37:36] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:37:36] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:37:36] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:37:36] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:37:36] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:37:36] [INFO] [ScoreManager] Level started with 10 enemies
[22:37:36] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:37:36] [ENEMY] [Enemy1] Registered as sound listener
[22:37:36] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[22:37:36] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:37:36] [ENEMY] [Enemy2] Registered as sound listener
[22:37:36] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[22:37:36] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:37:36] [ENEMY] [Enemy3] Registered as sound listener
[22:37:36] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[22:37:36] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:37:36] [ENEMY] [Enemy4] Registered as sound listener
[22:37:36] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[22:37:36] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:37:36] [ENEMY] [Enemy5] Registered as sound listener
[22:37:36] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[22:37:36] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:37:36] [ENEMY] [Enemy6] Registered as sound listener
[22:37:36] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[22:37:36] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:37:36] [ENEMY] [Enemy7] Registered as sound listener
[22:37:36] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[22:37:36] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:37:36] [ENEMY] [Enemy8] Registered as sound listener
[22:37:36] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[22:37:36] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:37:36] [ENEMY] [Enemy9] Registered as sound listener
[22:37:36] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[22:37:36] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:37:36] [ENEMY] [Enemy10] Registered as sound listener
[22:37:36] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[22:37:36] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:37:36] [INFO] [Player] Detected weapon: Shotgun (Shotgun pose)
[22:37:36] [INFO] [Player] Applied Shotgun arm pose: Left=(21, 6), Right=(-1, 6)
[22:37:36] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:37:36] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:37:36] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:37:36] [INFO] [LastChance] Found player: Player
[22:37:36] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:37:36] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:37:36] [INFO] [LastChance] Connected to player Died signal (C#)
[22:37:37] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:37] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:38] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:37:38] [ENEMY] [Enemy1] Player ammo empty state changed: false -> true
[22:37:38] [ENEMY] [Enemy2] Player ammo empty state changed: false -> true
[22:37:38] [ENEMY] [Enemy3] Player ammo empty state changed: false -> true
[22:37:38] [ENEMY] [Enemy4] Player ammo empty state changed: false -> true
[22:37:38] [ENEMY] [Enemy5] Player ammo empty state changed: false -> true
[22:37:38] [ENEMY] [Enemy6] Player ammo empty state changed: false -> true
[22:37:38] [ENEMY] [Enemy7] Player ammo empty state changed: false -> true
[22:37:38] [ENEMY] [Enemy8] Player ammo empty state changed: false -> true
[22:37:38] [ENEMY] [Enemy9] Player ammo empty state changed: false -> true
[22:37:38] [ENEMY] [Enemy10] Player ammo empty state changed: false -> true
[22:37:38] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(450, 763.3333), source=PLAYER (Player), range=600, listeners=19
[22:37:38] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:37:38] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (450, 763.3333), intensity=0.01, distance=440
[22:37:38] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:38] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (450, 763.3333), intensity=0.05, distance=219
[22:37:38] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:38] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (450, 763.3333), intensity=0.04, distance=240
[22:37:38] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (450, 763.3333), intensity=0.02, distance=376
[22:37:38] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[22:37:38] [INFO] [Shotgun.FIX#212] Firing 7 pellets with 15° spread at pos=(450, 763.33325)
[22:37:38] [INFO] [Shotgun.FIX#212] Normal pellet 1/7: extraOffset=11,7, distance=36,7px, pos=(486.33685, 757.8542)
[22:37:38] [INFO] [Shotgun.FIX#212] Normal pellet 2/7: extraOffset=-3,7, distance=21,3px, pos=(471.16055, 760.9684)
[22:37:38] [INFO] [Shotgun.FIX#212] Normal pellet 3/7: extraOffset=6,0, distance=31,0px, pos=(481.00894, 761.74164)
[22:37:38] [INFO] [Shotgun.FIX#212] Normal pellet 4/7: extraOffset=-8,0, distance=17,0px, pos=(466.94748, 762.93585)
[22:37:38] [INFO] [Shotgun.FIX#212] Normal pellet 5/7: extraOffset=-12,1, distance=12,9px, pos=(462.87912, 763.2395)
[22:37:38] [INFO] [Shotgun.FIX#212] Normal pellet 6/7: extraOffset=5,0, distance=30,0px, pos=(479.95584, 764.62134)
[22:37:38] [INFO] [Shotgun.FIX#212] Normal pellet 7/7: extraOffset=-3,4, distance=21,6px, pos=(471.4827, 765.9431)
[22:37:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 763.3333), source=PLAYER (Shotgun), range=1469, listeners=10
[22:37:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:37:38] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=440), can_see=false
[22:37:38] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 763.3333), distance=440
[22:37:38] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=219), can_see=false
[22:37:38] [ENEMY] [Enemy2] Pursuing vulnerability sound at (450, 763.3333), distance=219
[22:37:38] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=240), can_see=false
[22:37:38] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=376), can_see=false
[22:37:38] [ENEMY] [Enemy4] Pursuing vulnerability sound at (450, 763.3333), distance=376
[22:37:38] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1317), can_see=false
[22:37:38] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1532), can_see=false
[22:37:38] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1223), can_see=false
[22:37:38] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1604), can_see=false
[22:37:38] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1828), can_see=false
[22:37:38] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=927), can_see=false
[22:37:38] [ENEMY] [Enemy3] Hit taken, health: 3/4
[22:37:38] [ENEMY] [Enemy3] Hit taken, health: 2/4
[22:37:38] [ENEMY] [Enemy3] Hit taken, health: 1/4
[22:37:38] [ENEMY] [Enemy3] Hit taken, health: 0/4
[22:37:38] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:37:38] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:37:38] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:37:38] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:37:38] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:37:38] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:37:38] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:37:38] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (663.42017, 882.51086)
[22:37:38] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:38] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:39] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:39] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:39] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:37:39] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:37:39] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:37:39] [INFO] [Player.Grenade] Timer started, grenade created at (450, 734.72217)
[22:37:39] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:37:39] [INFO] [Player.Grenade] Step 1 complete! Drag: (483.49304, -39.33203)
[22:37:39] [INFO] [Shotgun.FIX#243] RMB released after 6 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:39] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=301), can_see=false
[22:37:39] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=110), can_see=false
[22:37:39] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=339), can_see=false
[22:37:39] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1308), can_see=false
[22:37:39] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1527), can_see=false
[22:37:39] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1257), can_see=false
[22:37:39] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1617), can_see=false
[22:37:39] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1840), can_see=false
[22:37:39] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=949), can_see=false
[22:37:39] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:39] [INFO] [Player.Grenade] G released - dropping grenade at feet
[22:37:39] [INFO] [Player.Grenade] Grenade dropped at feet at (450, 734.72217) (unfrozen)
[22:37:39] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:37:39] [INFO] [Player.Grenade] State reset to IDLE
[22:37:39] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:39] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:39] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:39] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:39] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:39] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:39] [ENEMY] [Enemy3] Ragdoll activated
[22:37:39] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:37:39] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:39] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:39] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:37:39] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:39] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:39] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:39] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[22:37:39] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:37:39] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 763.3333), distance=207
[22:37:39] [ENEMY] [Enemy2] Pursuing vulnerability sound at (450, 763.3333), distance=83
[22:37:39] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=103), can_see=false
[22:37:39] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1329), can_see=false
[22:37:39] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1541), can_see=false
[22:37:39] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1250), can_see=false
[22:37:39] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1588), can_see=false
[22:37:39] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1812), can_see=false
[22:37:39] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=895), can_see=false
[22:37:39] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:39] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[22:37:39] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:39] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:39] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[22:37:39] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:39] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:39] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:39] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=249), can_see=false
[22:37:39] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[22:37:39] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:39] [INFO] [Shotgun.FIX#243] RMB released after 50 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:40] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:40] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:37:40] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:37:40] [ENEMY] [Enemy1] Death animation component initialized
[22:37:40] [ENEMY] [Enemy2] Death animation component initialized
[22:37:40] [ENEMY] [Enemy3] Death animation component initialized
[22:37:40] [ENEMY] [Enemy4] Death animation component initialized
[22:37:40] [ENEMY] [Enemy5] Death animation component initialized
[22:37:40] [ENEMY] [Enemy6] Death animation component initialized
[22:37:40] [ENEMY] [Enemy7] Death animation component initialized
[22:37:40] [ENEMY] [Enemy8] Death animation component initialized
[22:37:40] [ENEMY] [Enemy9] Death animation component initialized
[22:37:40] [ENEMY] [Enemy10] Death animation component initialized
[22:37:40] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:37:40] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:37:40] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:37:40] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:37:40] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:37:40] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:37:40] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:37:40] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:37:40] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:37:40] [INFO] [ScoreManager] Level started with 10 enemies
[22:37:40] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:37:40] [ENEMY] [Enemy1] Registered as sound listener
[22:37:40] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[22:37:40] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:37:40] [ENEMY] [Enemy2] Registered as sound listener
[22:37:40] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[22:37:40] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:37:40] [ENEMY] [Enemy3] Registered as sound listener
[22:37:40] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[22:37:40] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:37:40] [ENEMY] [Enemy4] Registered as sound listener
[22:37:40] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[22:37:40] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:37:40] [ENEMY] [Enemy5] Registered as sound listener
[22:37:40] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[22:37:40] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:37:40] [ENEMY] [Enemy6] Registered as sound listener
[22:37:40] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[22:37:40] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:37:40] [ENEMY] [Enemy7] Registered as sound listener
[22:37:40] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[22:37:40] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:37:40] [ENEMY] [Enemy8] Registered as sound listener
[22:37:40] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[22:37:40] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:37:40] [ENEMY] [Enemy9] Registered as sound listener
[22:37:40] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[22:37:40] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:37:40] [ENEMY] [Enemy10] Registered as sound listener
[22:37:40] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[22:37:40] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:37:40] [INFO] [Player] Detected weapon: Shotgun (Shotgun pose)
[22:37:40] [INFO] [Player] Applied Shotgun arm pose: Left=(21, 6), Right=(-1, 6)
[22:37:40] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:37:40] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:37:40] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:37:40] [INFO] [LastChance] Found player: Player
[22:37:40] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:37:40] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:37:40] [INFO] [LastChance] Connected to player Died signal (C#)
[22:37:40] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:41] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:41] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:37:41] [ENEMY] [Enemy1] Player ammo empty state changed: false -> true
[22:37:41] [ENEMY] [Enemy2] Player ammo empty state changed: false -> true
[22:37:41] [ENEMY] [Enemy3] Player ammo empty state changed: false -> true
[22:37:41] [ENEMY] [Enemy4] Player ammo empty state changed: false -> true
[22:37:41] [ENEMY] [Enemy5] Player ammo empty state changed: false -> true
[22:37:41] [ENEMY] [Enemy6] Player ammo empty state changed: false -> true
[22:37:41] [ENEMY] [Enemy7] Player ammo empty state changed: false -> true
[22:37:41] [ENEMY] [Enemy8] Player ammo empty state changed: false -> true
[22:37:41] [ENEMY] [Enemy9] Player ammo empty state changed: false -> true
[22:37:41] [ENEMY] [Enemy10] Player ammo empty state changed: false -> true
[22:37:41] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(450, 766.4999), source=PLAYER (Player), range=600, listeners=19
[22:37:41] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:37:41] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (450, 766.4999), intensity=0.01, distance=443
[22:37:41] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:41] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (450, 766.4999), intensity=0.05, distance=222
[22:37:41] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:41] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (450, 766.4999), intensity=0.04, distance=240
[22:37:41] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (450, 766.4999), intensity=0.02, distance=375
[22:37:41] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:41] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[22:37:41] [INFO] [Shotgun.FIX#212] Firing 10 pellets with 15° spread at pos=(450, 766.49994)
[22:37:41] [INFO] [Shotgun.FIX#212] Normal pellet 1/10: extraOffset=-2,4, distance=22,6px, pos=(472.30438, 762.832)
[22:37:41] [INFO] [Shotgun.FIX#212] Normal pellet 2/10: extraOffset=13,9, distance=38,9px, pos=(488.6517, 762.0073)
[22:37:41] [INFO] [Shotgun.FIX#212] Normal pellet 3/10: extraOffset=2,6, distance=27,6px, pos=(477.4823, 764.34045)
[22:37:41] [INFO] [Shotgun.FIX#212] Normal pellet 4/10: extraOffset=-5,8, distance=19,2px, pos=(469.06537, 764.6672)
[22:37:41] [INFO] [Shotgun.FIX#212] Normal pellet 5/10: extraOffset=2,6, distance=27,6px, pos=(477.54703, 765.2669)
[22:37:41] [INFO] [Shotgun.FIX#212] Normal pellet 6/10: extraOffset=-4,2, distance=20,8px, pos=(470.7902, 765.9593)
[22:37:41] [INFO] [Shotgun.FIX#212] Normal pellet 7/10: extraOffset=8,7, distance=33,7px, pos=(483.68433, 767.16833)
[22:37:41] [INFO] [Shotgun.FIX#212] Normal pellet 8/10: extraOffset=4,3, distance=29,3px, pos=(479.24878, 768.08795)
[22:37:41] [INFO] [Shotgun.FIX#212] Normal pellet 9/10: extraOffset=-8,7, distance=16,3px, pos=(466.23816, 767.58124)
[22:37:41] [INFO] [Shotgun.FIX#212] Normal pellet 10/10: extraOffset=2,2, distance=27,2px, pos=(476.98087, 769.90704)
[22:37:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 766.4999), source=PLAYER (Shotgun), range=1469, listeners=10
[22:37:41] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:37:41] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=443), can_see=false
[22:37:41] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 766.4999), distance=443
[22:37:41] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=222), can_see=false
[22:37:41] [ENEMY] [Enemy2] Pursuing vulnerability sound at (450, 766.4999), distance=222
[22:37:41] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=240), can_see=false
[22:37:41] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=375), can_see=false
[22:37:41] [ENEMY] [Enemy4] Pursuing vulnerability sound at (450, 766.4999), distance=375
[22:37:41] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1318), can_see=false
[22:37:41] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1533), can_see=false
[22:37:41] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1219), can_see=false
[22:37:41] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1603), can_see=false
[22:37:41] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1827), can_see=false
[22:37:41] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=925), can_see=false
[22:37:41] [ENEMY] [Enemy3] Hit taken, health: 3/4
[22:37:41] [ENEMY] [Enemy3] Hit taken, health: 2/4
[22:37:41] [ENEMY] [Enemy3] Hit taken, health: 1/4
[22:37:41] [ENEMY] [Enemy3] Hit taken, health: 0/4
[22:37:41] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:37:41] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:37:41] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:37:41] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:37:41] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:37:42] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:37:42] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:37:42] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (716.86414, 862.3257)
[22:37:42] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:42] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:42] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:42] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:42] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:37:42] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:37:42] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:37:42] [INFO] [Player.Grenade] Timer started, grenade created at (450, 756.86664)
[22:37:42] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:37:42] [INFO] [Player.Grenade] Step 1 complete! Drag: (556.1472, -22.553955)
[22:37:42] [INFO] [Shotgun.FIX#243] RMB released after 5 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:42] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=323), can_see=false
[22:37:42] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=130), can_see=false
[22:37:42] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=336), can_see=false
[22:37:42] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1315), can_see=false
[22:37:42] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1531), can_see=false
[22:37:42] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1254), can_see=false
[22:37:42] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1607), can_see=false
[22:37:42] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1831), can_see=false
[22:37:42] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=932), can_see=false
[22:37:42] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:37:42] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:37:42] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:42] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:42] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:42] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:37:42] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:37:42] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:42] [ENEMY] [Enemy3] Ragdoll activated
[22:37:42] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:37:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:42] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:37:42] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:37:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:42] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:42] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 766.4999), distance=210
[22:37:42] [ENEMY] [Enemy2] Pursuing vulnerability sound at (450, 766.4999), distance=82
[22:37:42] [ENEMY] [Enemy4] Pursuing vulnerability sound at (450, 766.4999), distance=212
[22:37:42] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=116), can_see=false
[22:37:42] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1337), can_see=false
[22:37:42] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1546), can_see=false
[22:37:42] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1248), can_see=false
[22:37:42] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1579), can_see=false
[22:37:42] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1803), can_see=false
[22:37:42] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=871), can_see=false
[22:37:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:42] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:43] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:43] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:43] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=269), can_see=false
[22:37:43] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:43] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[22:37:43] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:37:43] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[22:37:43] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[22:37:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:43] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:37:43] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (575.2181, -2998.3938) (3053,1 px/s), Swing distance: 490,6
[22:37:43] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,381257
[22:37:43] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (575.2181, -2998.394), Swing: 490.6, Transfer: 1.00, Final speed: 2756.3
[22:37:43] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:37:43] [INFO] [Player.Grenade] Thrown! Velocity: 3053,1, Swing: 490,6
[22:37:43] [INFO] [Player.Grenade] State reset to IDLE
[22:37:43] [INFO] [Shotgun.FIX#243] RMB released after 52 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:43] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=188), can_see=false
[22:37:43] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:43] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=223), can_see=false
[22:37:43] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1391), can_see=false
[22:37:43] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1584), can_see=false
[22:37:43] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1247), can_see=false
[22:37:43] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1531), can_see=false
[22:37:43] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1752), can_see=false
[22:37:43] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=683), can_see=false
[22:37:43] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:37:43] [INFO] [Player.Grenade] Player rotation restored to 0
[22:37:43] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:43] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:37:43] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:43] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=323), can_see=false
[22:37:43] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) - pursuing to attack (dist=638)
[22:37:43] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[22:37:43] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:43] [ENEMY] [Enemy3] Death animation completed
[22:37:43] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:43] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=307), can_see=false
[22:37:43] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 766.4999), distance=62
[22:37:43] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:37:43] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=359), can_see=false
[22:37:43] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1456), can_see=false
[22:37:43] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1633), can_see=false
[22:37:43] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1261), can_see=false
[22:37:43] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1492), can_see=false
[22:37:43] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1711), can_see=false
[22:37:43] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=599), can_see=true
[22:37:44] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:44] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[22:37:44] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[22:37:44] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:44] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:44] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:44] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=437), can_see=false
[22:37:44] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:44] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=493), can_see=false
[22:37:44] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1529), can_see=false
[22:37:44] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1691), can_see=false
[22:37:44] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1208), can_see=false
[22:37:44] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1467), can_see=false
[22:37:44] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1681), can_see=false
[22:37:44] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=539), can_see=true
[22:37:44] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[22:37:44] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:44] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:44] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:44] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) - pursuing to attack (dist=529)
[22:37:44] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:44] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[22:37:44] [INFO] [GrenadeBase] Grenade landed at (262.5224, 558.154)
[22:37:44] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:37:44] [INFO] [GrenadeBase] EXPLODED at (262.5224, 558.154)!
[22:37:44] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(262.5224, 558.154), source=NEUTRAL (FragGrenade), range=2937, listeners=9
[22:37:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=6
[22:37:44] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 12.0 degrees
[22:37:44] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 84.7 degrees
[22:37:44] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 168.2 degrees
[22:37:44] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 274.9 degrees
[22:37:44] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=496), can_see=false
[22:37:44] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:45] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:45] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=526), can_see=false
[22:37:45] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1548), can_see=false
[22:37:45] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1706), can_see=false
[22:37:45] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1217), can_see=false
[22:37:45] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1462), can_see=false
[22:37:45] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1675), can_see=false
[22:37:45] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=528), can_see=true
[22:37:45] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:45] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:45] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) - pursuing to attack (dist=522)
[22:37:45] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
[22:37:45] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
[22:37:45] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[22:37:45] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:45] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:45] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:45] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[22:37:45] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:45] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[22:37:45] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[22:37:45] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=496), can_see=false
[22:37:45] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[22:37:45] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:45] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[22:37:45] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=499), can_see=false
[22:37:45] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1548), can_see=false
[22:37:45] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1706), can_see=false
[22:37:45] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1217), can_see=false
[22:37:45] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1462), can_see=false
[22:37:45] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1675), can_see=false
[22:37:45] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=528), can_see=true
[22:37:45] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:45] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[22:37:45] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:45] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:37:45] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:37:45] [ENEMY] [Enemy1] Death animation component initialized
[22:37:45] [ENEMY] [Enemy2] Death animation component initialized
[22:37:45] [ENEMY] [Enemy3] Death animation component initialized
[22:37:45] [ENEMY] [Enemy4] Death animation component initialized
[22:37:45] [ENEMY] [Enemy5] Death animation component initialized
[22:37:45] [ENEMY] [Enemy6] Death animation component initialized
[22:37:45] [ENEMY] [Enemy7] Death animation component initialized
[22:37:45] [ENEMY] [Enemy8] Death animation component initialized
[22:37:45] [ENEMY] [Enemy9] Death animation component initialized
[22:37:45] [ENEMY] [Enemy10] Death animation component initialized
[22:37:45] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:37:45] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:37:45] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:37:45] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:37:45] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:37:45] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:37:45] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:37:45] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[22:37:45] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:37:45] [INFO] [ScoreManager] Level started with 10 enemies
[22:37:45] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:37:45] [ENEMY] [Enemy1] Registered as sound listener
[22:37:45] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[22:37:45] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:37:45] [ENEMY] [Enemy2] Registered as sound listener
[22:37:45] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[22:37:45] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:37:45] [ENEMY] [Enemy3] Registered as sound listener
[22:37:45] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[22:37:45] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:37:45] [ENEMY] [Enemy4] Registered as sound listener
[22:37:45] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[22:37:45] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:37:45] [ENEMY] [Enemy5] Registered as sound listener
[22:37:45] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[22:37:45] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:37:45] [ENEMY] [Enemy6] Registered as sound listener
[22:37:45] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[22:37:45] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:37:45] [ENEMY] [Enemy7] Registered as sound listener
[22:37:45] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[22:37:45] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:37:45] [ENEMY] [Enemy8] Registered as sound listener
[22:37:45] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[22:37:45] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:37:45] [ENEMY] [Enemy9] Registered as sound listener
[22:37:45] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[22:37:45] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:37:45] [ENEMY] [Enemy10] Registered as sound listener
[22:37:45] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[22:37:45] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:37:45] [INFO] [Player] Detected weapon: Shotgun (Shotgun pose)
[22:37:45] [INFO] [Player] Applied Shotgun arm pose: Left=(21, 6), Right=(-1, 6)
[22:37:45] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:37:45] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:37:45] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:37:45] [INFO] [LastChance] Found player: Player
[22:37:45] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:37:45] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:37:45] [INFO] [LastChance] Connected to player Died signal (C#)
[22:37:47] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:47] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:48] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:37:48] [ENEMY] [Enemy1] Player ammo empty state changed: false -> true
[22:37:48] [ENEMY] [Enemy2] Player ammo empty state changed: false -> true
[22:37:48] [ENEMY] [Enemy3] Player ammo empty state changed: false -> true
[22:37:48] [ENEMY] [Enemy4] Player ammo empty state changed: false -> true
[22:37:48] [ENEMY] [Enemy5] Player ammo empty state changed: false -> true
[22:37:48] [ENEMY] [Enemy6] Player ammo empty state changed: false -> true
[22:37:48] [ENEMY] [Enemy7] Player ammo empty state changed: false -> true
[22:37:48] [ENEMY] [Enemy8] Player ammo empty state changed: false -> true
[22:37:48] [ENEMY] [Enemy9] Player ammo empty state changed: false -> true
[22:37:48] [ENEMY] [Enemy10] Player ammo empty state changed: false -> true
[22:37:48] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(450, 763.6666), source=PLAYER (Player), range=600, listeners=19
[22:37:48] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:37:48] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (450, 763.6666), intensity=0.01, distance=440
[22:37:48] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:48] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (450, 763.6666), intensity=0.05, distance=219
[22:37:48] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:48] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (450, 763.6666), intensity=0.04, distance=240
[22:37:48] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (450, 763.6666), intensity=0.02, distance=376
[22:37:48] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[22:37:48] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[22:37:48] [INFO] [Shotgun.FIX#212] Firing 6 pellets with 15° spread at pos=(450, 763.6666)
[22:37:48] [INFO] [Shotgun.FIX#212] Normal pellet 1/6: extraOffset=-11,5, distance=13,5px, pos=(463.26968, 761.1451)
[22:37:48] [INFO] [Shotgun.FIX#212] Normal pellet 2/6: extraOffset=14,5, distance=39,5px, pos=(489.12292, 758.5117)
[22:37:48] [INFO] [Shotgun.FIX#212] Normal pellet 3/6: extraOffset=-11,2, distance=13,8px, pos=(463.744, 762.4541)
[22:37:48] [INFO] [Shotgun.FIX#212] Normal pellet 4/6: extraOffset=7,6, distance=32,6px, pos=(482.54407, 762.8549)
[22:37:48] [INFO] [Shotgun.FIX#212] Normal pellet 5/6: extraOffset=3,2, distance=28,2px, pos=(478.19733, 763.4845)
[22:37:48] [INFO] [Shotgun.FIX#212] Normal pellet 6/6: extraOffset=-1,8, distance=23,2px, pos=(473.18228, 765.38214)
[22:37:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 763.6666), source=PLAYER (Shotgun), range=1469, listeners=10
[22:37:48] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:37:48] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=440), can_see=false
[22:37:48] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 763.6666), distance=440
[22:37:48] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=219), can_see=false
[22:37:48] [ENEMY] [Enemy2] Pursuing vulnerability sound at (450, 763.6666), distance=219
[22:37:48] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=240), can_see=false
[22:37:48] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=376), can_see=false
[22:37:48] [ENEMY] [Enemy4] Pursuing vulnerability sound at (450, 763.6666), distance=376
[22:37:48] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1317), can_see=false
[22:37:48] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1532), can_see=false
[22:37:48] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1256), can_see=false
[22:37:48] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1604), can_see=false
[22:37:48] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1828), can_see=false
[22:37:48] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=927), can_see=false
[22:37:48] [ENEMY] [Enemy3] Hit taken, health: 2/3
[22:37:48] [ENEMY] [Enemy3] Hit taken, health: 1/3
[22:37:48] [ENEMY] [Enemy3] Hit taken, health: 0/3
[22:37:48] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:37:48] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:37:48] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:37:48] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:37:48] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:37:48] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:37:48] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:37:48] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (903.7508, 761.01166)
[22:37:48] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:48] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:48] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=321), can_see=false
[22:37:48] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=128), can_see=false
[22:37:48] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=336), can_see=false
[22:37:48] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1314), can_see=false
[22:37:48] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1531), can_see=false
[22:37:48] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1257), can_see=false
[22:37:48] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1608), can_see=false
[22:37:48] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1832), can_see=false
[22:37:48] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=933), can_see=false
[22:37:48] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:48] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:48] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:49] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:49] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:37:49] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:37:49] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:37:49] [INFO] [Player.Grenade] Timer started, grenade created at (450, 754.9266)
[22:37:49] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:37:49] [INFO] [Player.Grenade] Step 1 complete! Drag: (179.17169, 19.51715)
[22:37:49] [INFO] [Shotgun.FIX#243] RMB released after 7 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:49] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:49] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:37:49] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:37:49] [ENEMY] [Enemy3] Ragdoll activated
[22:37:49] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:37:49] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=NeedsPumpUp, ReloadState=NotReloading
[22:37:49] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:49] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:49] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:49] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:37:49] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:37:49] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:49] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:49] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[22:37:49] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:49] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:37:49] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:37:49] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:49] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[22:37:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.476, 786.6595), source=ENEMY (Enemy4), range=1469, listeners=9
[22:37:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[22:37:49] [INFO] [LastChance] Threat detected: Bullet
[22:37:49] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:37:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:37:49] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[22:37:49] [ENEMY] [Enemy1] Pursuing vulnerability sound at (450, 763.6666), distance=207
[22:37:49] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:37:49] [ENEMY] [Enemy2] Hit taken, health: 2/3
[22:37:49] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1314), can_see=false
[22:37:49] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1531), can_see=false
[22:37:49] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1234), can_see=false
[22:37:49] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1608), can_see=false
[22:37:49] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1832), can_see=false
[22:37:49] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=926), can_see=false
[22:37:49] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=209), can_see=false
[22:37:49] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:49] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:49] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:37:49] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (1318.4341, -25.388336) (1318,7 px/s), Swing distance: 120,3
[22:37:49] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,019254051
[22:37:49] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (1318.434, -25.38834), Swing: 120.3, Transfer: 0.49, Final speed: 1934.2
[22:37:49] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:37:49] [INFO] [Player.Grenade] Thrown! Velocity: 1318,7, Swing: 120,3
[22:37:49] [INFO] [Player.Grenade] State reset to IDLE
[22:37:49] [INFO] [Shotgun.FIX#243] RMB released after 27 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:49] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:49] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:49] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[22:37:49] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=135), can_see=false
[22:37:49] [INFO] [Player.Grenade] Player rotation restored to 0
[22:37:49] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[22:37:49] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:37:49] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[22:37:49] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[22:37:49] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[22:37:49] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:50] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1343), can_see=false
[22:37:50] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1557), can_see=false
[22:37:50] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1187), can_see=false
[22:37:50] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1613), can_see=false
[22:37:50] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1837), can_see=false
[22:37:50] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=822), can_see=false
[22:37:50] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=202), can_see=false
[22:37:50] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[22:37:50] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[22:37:50] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:50] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=119), can_see=false
[22:37:50] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[22:37:50] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[22:37:50] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:37:50] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[22:37:50] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:37:50] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:37:50] [ENEMY] [Enemy1] Death animation component initialized
[22:37:50] [ENEMY] [Enemy2] Death animation component initialized
[22:37:50] [ENEMY] [Enemy3] Death animation component initialized
[22:37:50] [ENEMY] [Enemy4] Death animation component initialized
[22:37:50] [ENEMY] [Enemy5] Death animation component initialized
[22:37:50] [ENEMY] [Enemy6] Death animation component initialized
[22:37:50] [ENEMY] [Enemy7] Death animation component initialized
[22:37:50] [ENEMY] [Enemy8] Death animation component initialized
[22:37:50] [ENEMY] [Enemy9] Death animation component initialized
[22:37:50] [ENEMY] [Enemy10] Death animation component initialized
[22:37:50] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:37:50] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:37:50] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:37:50] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:37:50] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:37:50] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:37:50] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:37:50] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:37:50] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:37:50] [INFO] [ScoreManager] Level started with 10 enemies
[22:37:50] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:37:50] [ENEMY] [Enemy1] Registered as sound listener
[22:37:50] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[22:37:50] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:37:50] [ENEMY] [Enemy2] Registered as sound listener
[22:37:50] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[22:37:50] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:37:50] [ENEMY] [Enemy3] Registered as sound listener
[22:37:50] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[22:37:50] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:37:50] [ENEMY] [Enemy4] Registered as sound listener
[22:37:50] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[22:37:50] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:37:50] [ENEMY] [Enemy5] Registered as sound listener
[22:37:50] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[22:37:50] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:37:50] [ENEMY] [Enemy6] Registered as sound listener
[22:37:50] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[22:37:50] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:37:50] [ENEMY] [Enemy7] Registered as sound listener
[22:37:50] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[22:37:50] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:37:50] [ENEMY] [Enemy8] Registered as sound listener
[22:37:50] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[22:37:50] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:37:50] [ENEMY] [Enemy9] Registered as sound listener
[22:37:50] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[22:37:50] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:37:50] [ENEMY] [Enemy10] Registered as sound listener
[22:37:50] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[22:37:50] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:37:50] [INFO] [Player] Detected weapon: Shotgun (Shotgun pose)
[22:37:50] [INFO] [Player] Applied Shotgun arm pose: Left=(21, 6), Right=(-1, 6)
[22:37:50] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:37:50] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:37:50] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:37:50] [INFO] [LastChance] Found player: Player
[22:37:50] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:37:50] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:37:50] [INFO] [LastChance] Connected to player Died signal (C#)
[22:37:50] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[22:37:50] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:37:50] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:37:51] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (877.0381, 1152.7749)
[22:37:51] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:37:51] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:51] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:51] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:51] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:37:51] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:37:51] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:37:51] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1061.6666)
[22:37:51] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:37:51] [INFO] [Player.Grenade] Step 1 complete! Drag: (208.31445, -24.083496)
[22:37:51] [INFO] [Shotgun.FIX#243] RMB released after 6 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:51] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:37:51] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:37:51] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:37:51] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:51] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:51] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:51] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:37:51] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:37:51] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:51] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:37:51] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:37:52] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:37:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(636.696, 758.7734), source=ENEMY (Enemy3), range=1469, listeners=19
[22:37:52] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:37:52] [ENEMY] [Enemy2] Heard gunshot at (636.696, 758.7734), source_type=1, intensity=0.03, distance=316
[22:37:52] [ENEMY] [Enemy4] Heard gunshot at (636.696, 758.7734), source_type=1, intensity=0.05, distance=216
[22:37:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:37:52] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:37:52] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (1039.471, -134.30179) (1048,1 px/s), Swing distance: 360,1
[22:37:52] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,12849025
[22:37:52] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (1039.471, -134.3018), Swing: 360.1, Transfer: 1.00, Final speed: 2756.3
[22:37:52] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:37:52] [INFO] [Player.Grenade] Thrown! Velocity: 1048,1, Swing: 360,1
[22:37:52] [INFO] [Player.Grenade] State reset to IDLE
[22:37:52] [INFO] [Shotgun.FIX#243] RMB released after 89 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:52] [INFO] [LastChance] Threat detected: Bullet
[22:37:52] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:37:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:37:52] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(594.04, 759.1891), source=ENEMY (Enemy3), range=1469, listeners=10
[22:37:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[22:37:52] [INFO] [LastChance] Threat detected: Bullet
[22:37:52] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:37:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:37:52] [INFO] [Player.Grenade] Player rotation restored to 0
[22:37:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(594.04, 759.1891), source=ENEMY (Enemy3), range=1469, listeners=10
[22:37:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[22:37:52] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:37:52] [INFO] [LastChance] Threat detected: @Area2D@6271
[22:37:52] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:37:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:37:53] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[22:37:53] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[22:37:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(594.04, 759.1891), source=ENEMY (Enemy3), range=1469, listeners=10
[22:37:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[22:37:53] [INFO] [LastChance] Threat detected: @Area2D@6272
[22:37:53] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[22:37:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:37:53] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:37:53] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:53] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:37:53] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:37:53] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:37:53] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:37:53] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:37:53] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:37:53] [ENEMY] [Enemy1] Death animation component initialized
[22:37:53] [ENEMY] [Enemy2] Death animation component initialized
[22:37:53] [ENEMY] [Enemy3] Death animation component initialized
[22:37:53] [ENEMY] [Enemy4] Death animation component initialized
[22:37:53] [ENEMY] [Enemy5] Death animation component initialized
[22:37:53] [ENEMY] [Enemy6] Death animation component initialized
[22:37:53] [ENEMY] [Enemy7] Death animation component initialized
[22:37:53] [ENEMY] [Enemy8] Death animation component initialized
[22:37:53] [ENEMY] [Enemy9] Death animation component initialized
[22:37:53] [ENEMY] [Enemy10] Death animation component initialized
[22:37:53] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:37:53] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:37:53] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:37:53] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:37:53] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:37:53] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:37:53] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:37:53] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[22:37:53] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:37:53] [INFO] [ScoreManager] Level started with 10 enemies
[22:37:53] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:37:53] [ENEMY] [Enemy1] Registered as sound listener
[22:37:53] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[22:37:53] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:37:53] [ENEMY] [Enemy2] Registered as sound listener
[22:37:53] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[22:37:53] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:37:53] [ENEMY] [Enemy3] Registered as sound listener
[22:37:53] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[22:37:53] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:37:53] [ENEMY] [Enemy4] Registered as sound listener
[22:37:53] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[22:37:53] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:37:53] [ENEMY] [Enemy5] Registered as sound listener
[22:37:53] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[22:37:53] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:37:53] [ENEMY] [Enemy6] Registered as sound listener
[22:37:53] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[22:37:53] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:37:53] [ENEMY] [Enemy7] Registered as sound listener
[22:37:53] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[22:37:53] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:37:53] [ENEMY] [Enemy8] Registered as sound listener
[22:37:53] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[22:37:53] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:37:53] [ENEMY] [Enemy9] Registered as sound listener
[22:37:53] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[22:37:53] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:37:53] [ENEMY] [Enemy10] Registered as sound listener
[22:37:53] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[22:37:53] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:37:53] [INFO] [Player] Detected weapon: Shotgun (Shotgun pose)
[22:37:53] [INFO] [Player] Applied Shotgun arm pose: Left=(21, 6), Right=(-1, 6)
[22:37:53] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:37:53] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:37:53] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:37:53] [INFO] [LastChance] Found player: Player
[22:37:53] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:37:53] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:37:53] [INFO] [LastChance] Connected to player Died signal (C#)
[22:37:54] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:37:54] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:37:54] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (891.18835, 1289.4062)
[22:37:54] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:37:54] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:54] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:54] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:54] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:37:54] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:37:54] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:37:54] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[22:37:54] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:37:54] [INFO] [Player.Grenade] Step 1 complete! Drag: (387.08118, 4.0074463)
[22:37:54] [INFO] [Shotgun.FIX#243] RMB released after 4 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:54] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:37:54] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:37:54] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:37:54] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:54] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:54] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:37:54] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:37:54] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:37:54] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:37:54] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:37:55] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[22:37:55] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:37:56] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:37:56] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:37:56] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (278.52142, -269.1211) (387,3 px/s), Swing distance: 494,1
[22:37:56] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,7682347
[22:37:56] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (278.5214, -269.1211), Swing: 494.1, Transfer: 1.00, Final speed: 1168.5
[22:37:56] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:37:56] [INFO] [Player.Grenade] Thrown! Velocity: 387,3, Swing: 494,1
[22:37:56] [INFO] [Player.Grenade] State reset to IDLE
[22:37:56] [INFO] [Shotgun.FIX#243] RMB released after 107 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:37:56] [INFO] [Player.Grenade] Player rotation restored to 0
[22:37:56] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:37:56] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[22:37:56] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:37:57] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:37:57] [INFO] [GrenadeBase] Grenade landed at (647.7562, 876.4696)
[22:37:57] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:37:57] [INFO] [GrenadeBase] EXPLODED at (647.7562, 876.4696)!
[22:37:57] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(647.7562, 876.4696), source=NEUTRAL (FragGrenade), range=2937, listeners=20
[22:37:57] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[22:37:57] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[22:37:57] [ENEMY] [Enemy3] Hit taken, health: 1/2
[22:37:57] [ENEMY] [Enemy3] Hit taken, health: 0/2
[22:37:57] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:37:57] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:37:57] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:37:57] [INFO] [DeathAnim] Started - Angle: -71.4 deg, Index: 7
[22:37:57] [ENEMY] [Enemy3] Death animation started with hit direction: (0.318928, -0.947779)
[22:37:57] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 131.1
[22:37:57] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -9.4 degrees
[22:37:57] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 106.4 degrees
[22:37:57] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 189.8 degrees
[22:37:57] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 271.5 degrees
[22:37:57] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:57] [ENEMY] [Enemy3] Ragdoll activated
[22:37:57] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:37:58] [ENEMY] [Enemy3] Death animation completed
[22:37:59] [ENEMY] [Enemy10] FLANKING started: target=(640.2964, 901.1813), side=left, pos=(953.2379, 1417.099)
[22:37:59] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[22:37:59] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:59] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[22:37:59] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[22:37:59] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[22:38:00] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:38:00] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:38:00] [ENEMY] [Enemy1] Death animation component initialized
[22:38:00] [ENEMY] [Enemy2] Death animation component initialized
[22:38:00] [ENEMY] [Enemy3] Death animation component initialized
[22:38:00] [ENEMY] [Enemy4] Death animation component initialized
[22:38:00] [ENEMY] [Enemy5] Death animation component initialized
[22:38:00] [ENEMY] [Enemy6] Death animation component initialized
[22:38:00] [ENEMY] [Enemy7] Death animation component initialized
[22:38:00] [ENEMY] [Enemy8] Death animation component initialized
[22:38:00] [ENEMY] [Enemy9] Death animation component initialized
[22:38:00] [ENEMY] [Enemy10] Death animation component initialized
[22:38:00] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:38:00] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:38:00] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:38:00] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:38:00] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:38:00] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:38:00] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:38:00] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:38:00] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:38:00] [INFO] [ScoreManager] Level started with 10 enemies
[22:38:00] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:38:00] [ENEMY] [Enemy1] Registered as sound listener
[22:38:00] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[22:38:00] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:38:00] [ENEMY] [Enemy2] Registered as sound listener
[22:38:00] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[22:38:00] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:38:00] [ENEMY] [Enemy3] Registered as sound listener
[22:38:00] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[22:38:00] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:38:00] [ENEMY] [Enemy4] Registered as sound listener
[22:38:00] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[22:38:00] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:38:00] [ENEMY] [Enemy5] Registered as sound listener
[22:38:00] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[22:38:00] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:38:00] [ENEMY] [Enemy6] Registered as sound listener
[22:38:00] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[22:38:00] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:38:00] [ENEMY] [Enemy7] Registered as sound listener
[22:38:00] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[22:38:00] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:38:00] [ENEMY] [Enemy8] Registered as sound listener
[22:38:00] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[22:38:00] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:38:00] [ENEMY] [Enemy9] Registered as sound listener
[22:38:00] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[22:38:00] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:38:00] [ENEMY] [Enemy10] Registered as sound listener
[22:38:00] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[22:38:00] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:38:00] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:38:00] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:38:00] [INFO] [LastChance] Found player: Player
[22:38:00] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:38:00] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:38:00] [INFO] [LastChance] Connected to player Died signal (C#)
[22:38:00] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:38:00] [INFO] [Player] Detected weapon: Shotgun (Shotgun pose)
[22:38:00] [INFO] [Player] Applied Shotgun arm pose: Left=(21, 6), Right=(-1, 6)
[22:38:02] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:38:02] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:38:02] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:38:02] [INFO] [Player.Grenade] Tutorial level detected - infinite grenades enabled
[22:38:02] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:38:02] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:38:02] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:38:02] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:38:02] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:38:02] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 3/3, Health: 2/4
[22:38:02] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:38:02] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:38:02] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:38:02] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:38:02] [INFO] [LastChance] Found player: Player
[22:38:02] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:38:02] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:38:02] [INFO] [LastChance] Connected to player Died signal (C#)
[22:38:02] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:38:02] [INFO] [Player] Detected weapon: Shotgun (Shotgun pose)
[22:38:02] [INFO] [Player] Applied Shotgun arm pose: Left=(21, 6), Right=(-1, 6)
[22:38:03] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:03] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:03] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (452.3088, 373.35806)
[22:38:03] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:03] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:03] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:03] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:03] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:38:03] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:38:03] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:38:03] [INFO] [Player.Grenade] Timer started, grenade created at (150, 360)
[22:38:03] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:38:03] [INFO] [Player.Grenade] Step 1 complete! Drag: (252.75113, -4.6753235)
[22:38:03] [INFO] [Shotgun.FIX#243] RMB released after 3 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:03] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:38:03] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:38:03] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:03] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:03] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:03] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:04] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:38:04] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:38:04] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:38:04] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:38:04] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:38:04] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (405.9891, -1946.251) (1988,1 px/s), Swing distance: 273,4
[22:38:04] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,3651448
[22:38:04] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (405.9891, -1946.251), Swing: 273.4, Transfer: 1.00, Final speed: 2756.3
[22:38:04] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:38:04] [INFO] [Player.Grenade] Thrown! Velocity: 1988,1, Swing: 273,4
[22:38:04] [INFO] [Player.Grenade] State reset to IDLE
[22:38:04] [INFO] [Shotgun.FIX#243] RMB released after 48 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:04] [INFO] [Player.Grenade] Player rotation restored to 0
[22:38:04] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:05] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:05] [INFO] [GrenadeBase] Grenade landed at (341.3903, 377.9693)
[22:38:05] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:38:05] [INFO] [GrenadeBase] EXPLODED at (341.3903, 377.9693)!
[22:38:05] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(341.3903, 377.9693), source=NEUTRAL (FragGrenade), range=2937, listeners=19
[22:38:05] [INFO] [SoundPropagation] Cleaned up 19 invalid listeners
[22:38:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[22:38:05] [INFO] [FragGrenade] Player found in blast radius at distance 192.2
[22:38:05] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[22:38:05] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[22:38:05] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[22:38:05] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[22:38:05] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[22:38:05] [INFO] [PenultimateHit] Player died - ending penultimate effect
[22:38:05] [INFO] [LastChance] Player died
[22:38:05] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 192.2
[22:38:05] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 13.0 degrees
[22:38:05] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 88.6 degrees
[22:38:05] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 198.1 degrees
[22:38:05] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 260.7 degrees
[22:38:06] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:06] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:06] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (639.33154, 335.28757)
[22:38:06] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:06] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:06] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:06] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:06] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:07] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:07] [INFO] [Shotgun.FIX#243] RMB released after 63 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:08] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:08] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:08] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (651.3566, 264.4898)
[22:38:08] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:08] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:08] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:08] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:08] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:38:08] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:38:08] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:38:08] [INFO] [Player.Grenade] Timer started, grenade created at (150, 108.94443)
[22:38:08] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:38:08] [INFO] [Player.Grenade] Step 1 complete! Drag: (300.62628, -24.712433)
[22:38:08] [INFO] [Shotgun.FIX#243] RMB released after 4 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:08] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:38:08] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:38:08] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:08] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:08] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:08] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:08] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:38:08] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:38:09] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:38:09] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:38:10] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:38:10] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (320.2745, -72.68369) (328,4 px/s), Swing distance: 27,6
[22:38:10] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,22316198
[22:38:10] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (320.2745, -72.68369), Swing: 27.6, Transfer: 0.11, Final speed: 110.4
[22:38:10] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:38:10] [INFO] [Player.Grenade] Thrown! Velocity: 328,4, Swing: 27,6
[22:38:10] [INFO] [Player.Grenade] State reset to IDLE
[22:38:10] [INFO] [Shotgun.FIX#243] RMB released after 109 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:10] [INFO] [Player.Grenade] Player rotation restored to 0
[22:38:10] [INFO] [GrenadeBase] Grenade landed at (220.8616, 92.86297)
[22:38:10] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:38:10] [INFO] [GrenadeBase] EXPLODED at (220.8616, 92.86297)!
[22:38:10] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(220.8616, 92.86297), source=NEUTRAL (FragGrenade), range=2937, listeners=0
[22:38:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[22:38:10] [INFO] [FragGrenade] Player found in blast radius at distance 72.7
[22:38:10] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 72.7
[22:38:10] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -8.4 degrees
[22:38:10] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 89.3 degrees
[22:38:10] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 185.2 degrees
[22:38:10] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 253.1 degrees
[22:38:10] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:10] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:11] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:11] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:11] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (820.3754, 283.1911)
[22:38:11] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:11] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:11] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:11] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:11] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:38:11] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:38:11] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:38:11] [INFO] [Player.Grenade] Timer started, grenade created at (150, 108.94443)
[22:38:11] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:38:11] [INFO] [Player.Grenade] Step 1 complete! Drag: (433.57, 33.395172)
[22:38:11] [INFO] [Shotgun.FIX#243] RMB released after 4 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:11] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:38:11] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:38:11] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:11] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:11] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:11] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:11] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:38:11] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:38:12] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:38:12] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:38:12] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:38:12] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (639.0764, -15.715475) (639,3 px/s), Swing distance: 70,2
[22:38:12] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,024585962
[22:38:12] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (639.0764, -15.71548), Swing: 70.2, Transfer: 0.28, Final speed: 546.7
[22:38:12] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:38:12] [INFO] [Player.Grenade] Thrown! Velocity: 639,3, Swing: 70,2
[22:38:12] [INFO] [Player.Grenade] State reset to IDLE
[22:38:12] [INFO] [Shotgun.FIX#243] RMB released after 44 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:12] [INFO] [Player.Grenade] Player rotation restored to 0
[22:38:12] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:12] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:13] [INFO] [GrenadeBase] Grenade landed at (432.6461, 101.9939)
[22:38:13] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:38:13] [INFO] [GrenadeBase] EXPLODED at (432.6461, 101.9939)!
[22:38:13] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(432.6461, 101.9939), source=NEUTRAL (FragGrenade), range=2937, listeners=0
[22:38:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[22:38:13] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 12.4 degrees
[22:38:13] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 89.0 degrees
[22:38:13] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 171.5 degrees
[22:38:13] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 271.7 degrees
[22:38:13] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:13] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:13] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (785.63635, 297.21707)
[22:38:13] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:13] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:13] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:13] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:14] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:38:14] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:38:14] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:38:14] [INFO] [Player.Grenade] Timer started, grenade created at (150, 108.94443)
[22:38:14] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:38:14] [INFO] [Player.Grenade] Step 1 complete! Drag: (445.5951, -20.705017)
[22:38:14] [INFO] [Shotgun.FIX#243] RMB released after 3 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:14] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:38:14] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:38:14] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:14] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:14] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:14] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:14] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:38:14] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:38:14] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:38:14] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:38:16] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:38:16] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (0, 496.5075) (496,5 px/s), Swing distance: 111,2
[22:38:16] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 1,5707964
[22:38:16] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (0, 496.5075), Swing: 111.2, Transfer: 0.45, Final speed: 673.3
[22:38:16] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:38:16] [INFO] [Player.Grenade] Thrown! Velocity: 496,5, Swing: 111,2
[22:38:16] [INFO] [Player.Grenade] State reset to IDLE
[22:38:16] [INFO] [Shotgun.FIX#243] RMB released after 165 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:16] [INFO] [Player.Grenade] Player rotation restored to 0
[22:38:17] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:17] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:17] [INFO] [GrenadeBase] Grenade landed at (469.4518, 442.62)
[22:38:17] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:38:17] [INFO] [GrenadeBase] EXPLODED at (469.4518, 442.62)!
[22:38:17] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(469.4518, 442.62), source=NEUTRAL (FragGrenade), range=2937, listeners=0
[22:38:17] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[22:38:17] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 2.5 degrees
[22:38:17] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 89.0 degrees
[22:38:17] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 197.1 degrees
[22:38:17] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 268.2 degrees
[22:38:18] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:18] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:18] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1131.6907, 361.33582)
[22:38:18] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:18] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:18] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:18] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:18] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:38:18] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:38:18] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:38:18] [INFO] [Player.Grenade] Timer started, grenade created at (469.45178, 80.0746)
[22:38:18] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:38:18] [INFO] [Player.Grenade] Step 1 complete! Drag: (148.30896, 6.011139)
[22:38:18] [INFO] [Shotgun.FIX#243] RMB released after 4 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:18] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:38:18] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:38:18] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:18] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:18] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:18] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:18] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:38:18] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:38:18] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:38:18] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:38:19] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:38:19] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (370.8706, -3979.4282) (3996,7 px/s), Swing distance: 371,6
[22:38:19] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,4778678
[22:38:19] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (370.8706, -3979.428), Swing: 371.6, Transfer: 1.00, Final speed: 2756.3
[22:38:19] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:38:19] [INFO] [Player.Grenade] Thrown! Velocity: 3996,7, Swing: 371,6
[22:38:19] [INFO] [Player.Grenade] State reset to IDLE
[22:38:19] [INFO] [Shotgun.FIX#243] RMB released after 63 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:19] [INFO] [Player.Grenade] Player rotation restored to 0
[22:38:19] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:20] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:20] [INFO] [GrenadeBase] Grenade landed at (534.6189, 242.9253)
[22:38:20] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:38:20] [INFO] [GrenadeBase] EXPLODED at (534.6189, 242.9253)!
[22:38:20] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(534.6189, 242.9253), source=NEUTRAL (FragGrenade), range=2937, listeners=0
[22:38:20] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[22:38:20] [INFO] [FragGrenade] Player found in blast radius at distance 85.1
[22:38:20] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 85.1
[22:38:20] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -8.0 degrees
[22:38:20] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 70.6 degrees
[22:38:20] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 163.7 degrees
[22:38:20] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 252.2 degrees
[22:38:20] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:20] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:20] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1116.9934, 174.32281)
[22:38:20] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:21] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:21] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:21] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:21] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:38:21] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:38:21] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:38:21] [INFO] [Player.Grenade] Timer started, grenade created at (458.78513, 281.63138)
[22:38:21] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:38:21] [INFO] [Player.Grenade] Step 1 complete! Drag: (163.00623, -30.723557)
[22:38:21] [INFO] [Shotgun.FIX#243] RMB released after 5 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:21] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:38:21] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:38:21] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:21] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:21] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:21] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:21] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:38:21] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:38:21] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:38:21] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:38:22] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:38:22] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (-728.6974, -463.99603) (863,9 px/s), Swing distance: 345,0
[22:38:22] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -2,5745904
[22:38:22] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (-728.6974, -463.996), Swing: 345.0, Transfer: 1.00, Final speed: 2606.3
[22:38:22] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:38:22] [INFO] [Player.Grenade] Thrown! Velocity: 863,9, Swing: 345,0
[22:38:22] [INFO] [Player.Grenade] State reset to IDLE
[22:38:22] [INFO] [Shotgun.FIX#243] RMB released after 104 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:23] [INFO] [Player.Grenade] Player rotation restored to 0
[22:38:23] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:23] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:23] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:23] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:23] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1065.553, 358.26013)
[22:38:23] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:23] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:23] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:23] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:23] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:38:23] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:38:23] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:38:23] [INFO] [Player.Grenade] Timer started, grenade created at (492.09366, 588.7273)
[22:38:23] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:38:23] [INFO] [Player.Grenade] Step 1 complete! Drag: (214.44666, 52.110718)
[22:38:23] [INFO] [Shotgun.FIX#243] RMB released after 4 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:23] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:38:23] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:38:23] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:23] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:23] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:24] [INFO] [GrenadeBase] Grenade landed at (254.2948, 874.4035)
[22:38:24] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:38:24] [INFO] [GrenadeBase] EXPLODED at (254.2948, 874.4035)!
[22:38:24] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(254.2948, 874.4035), source=NEUTRAL (FragGrenade), range=2937, listeners=0
[22:38:24] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[22:38:24] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 6.6 degrees
[22:38:24] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 95.8 degrees
[22:38:24] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 189.6 degrees
[22:38:24] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 288.9 degrees
[22:38:24] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:24] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:38:24] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:38:24] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:38:24] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:38:25] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:38:25] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (-189.61127, -3436.265) (3441,5 px/s), Swing distance: 469,6
[22:38:25] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,6259199
[22:38:25] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (-189.6113, -3436.265), Swing: 469.6, Transfer: 1.00, Final speed: 2756.3
[22:38:25] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:38:25] [INFO] [Player.Grenade] Thrown! Velocity: 3441,5, Swing: 469,6
[22:38:25] [INFO] [Player.Grenade] State reset to IDLE
[22:38:25] [INFO] [Shotgun.FIX#243] RMB released after 89 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:25] [INFO] [Player.Grenade] Player rotation restored to 0
[22:38:25] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:26] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:26] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:26] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:26] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1083.5905, 297.521)
[22:38:26] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:26] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:26] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:26] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:26] [INFO] [GrenadeBase] Grenade landed at (527.9161, 859.0795)
[22:38:26] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:38:26] [INFO] [GrenadeBase] EXPLODED at (527.9161, 859.0795)!
[22:38:26] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(527.9161, 859.0795), source=NEUTRAL (@RigidBody2D@6854), range=2937, listeners=0
[22:38:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[22:38:26] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 29.4
[22:38:26] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 12.2 degrees
[22:38:26] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 90.6 degrees
[22:38:26] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 165.7 degrees
[22:38:26] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 283.6 degrees
[22:38:26] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:38:26] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:38:26] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:38:26] [INFO] [Player.Grenade] Timer started, grenade created at (582.14923, 588.7273)
[22:38:26] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:38:26] [INFO] [Player.Grenade] Step 1 complete! Drag: (152.31738, 101.52133)
[22:38:26] [INFO] [Shotgun.FIX#243] RMB released after 6 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:26] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:38:26] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:38:26] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:26] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:26] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:26] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:26] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:38:26] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:38:26] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:38:26] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:38:27] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:38:27] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (-2056.3542, -4098.276) (4585,2 px/s), Swing distance: 525,9
[22:38:27] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -2,0358515
[22:38:27] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (-2056.354, -4098.276), Swing: 525.9, Transfer: 1.00, Final speed: 2756.3
[22:38:27] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:38:27] [INFO] [Player.Grenade] Thrown! Velocity: 4585,2, Swing: 525,9
[22:38:27] [INFO] [Player.Grenade] State reset to IDLE
[22:38:27] [INFO] [Shotgun.FIX#243] RMB released after 34 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:27] [INFO] [Player.Grenade] Player rotation restored to 0
[22:38:27] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:27] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:27] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:27] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:27] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (845.09357, 397.70654)
[22:38:27] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:27] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:27] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:27] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:28] [INFO] [GrenadeBase] Grenade landed at (695.0236, 346.1125)
[22:38:28] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:38:28] [INFO] [GrenadeBase] EXPLODED at (695.0236, 346.1125)!
[22:38:28] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(695.0236, 346.1125), source=NEUTRAL (FragGrenade), range=2937, listeners=0
[22:38:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[22:38:28] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 3.8 degrees
[22:38:28] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 102.3 degrees
[22:38:28] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 167.1 degrees
[22:38:28] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 277.8 degrees
[22:38:28] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:38:28] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:38:28] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:38:28] [INFO] [Player.Grenade] Timer started, grenade created at (582.14923, 588.7273)
[22:38:28] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:38:28] [INFO] [Player.Grenade] Step 1 complete! Drag: (434.90607, 74.13727)
[22:38:28] [INFO] [Shotgun.FIX#243] RMB released after 39 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:29] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:38:29] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:38:29] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:29] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:29] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:29] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:29] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:38:29] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:38:29] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:38:29] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:38:30] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:38:30] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (-1039.4209, -2659.3362) (2855,3 px/s), Swing distance: 279,7
[22:38:30] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,9433963
[22:38:30] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (-1039.421, -2659.336), Swing: 279.7, Transfer: 1.00, Final speed: 2756.3
[22:38:30] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:38:30] [INFO] [Player.Grenade] Thrown! Velocity: 2855,3, Swing: 279,7
[22:38:30] [INFO] [Player.Grenade] State reset to IDLE
[22:38:30] [INFO] [Shotgun.FIX#243] RMB released after 66 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:30] [INFO] [Player.Grenade] Player rotation restored to 0
[22:38:30] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:30] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:31] [INFO] [GrenadeBase] Grenade landed at (90.2113, 483.5743)
[22:38:31] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:38:31] [INFO] [GrenadeBase] EXPLODED at (90.2113, 483.5743)!
[22:38:31] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(90.2113, 483.5743), source=NEUTRAL (FragGrenade), range=2937, listeners=0
[22:38:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[22:38:31] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -6.5 degrees
[22:38:31] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 103.2 degrees
[22:38:31] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 184.1 degrees
[22:38:31] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 263.2 degrees
[22:38:32] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:32] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:32] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1004.7595, 396.6485)
[22:38:32] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:32] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:32] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:32] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:32] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:38:32] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:38:32] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:38:32] [INFO] [Player.Grenade] Timer started, grenade created at (626.8574, 558.71564)
[22:38:32] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:38:32] [INFO] [Player.Grenade] Step 1 complete! Drag: (275.2401, 1.0178223)
[22:38:32] [INFO] [Shotgun.FIX#243] RMB released after 4 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:32] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:38:32] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:38:32] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:32] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:32] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:32] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:32] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:38:32] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:38:32] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:38:32] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:38:32] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:38:32] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (-2413.3608, -4027.6633) (4695,4 px/s), Swing distance: 471,6
[22:38:32] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -2,1106246
[22:38:32] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (-2413.361, -4027.663), Swing: 471.6, Transfer: 1.00, Final speed: 2756.3
[22:38:32] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:38:32] [INFO] [Player.Grenade] Thrown! Velocity: 4695,4, Swing: 471,6
[22:38:32] [INFO] [Player.Grenade] State reset to IDLE
[22:38:32] [INFO] [Shotgun.FIX#243] RMB released after 35 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:33] [INFO] [Player.Grenade] Player rotation restored to 0
[22:38:33] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:33] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:33] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:33] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:33] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (838.41296, 355.67328)
[22:38:33] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:33] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:33] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:33] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:33] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:38:33] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:38:33] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:38:33] [INFO] [Player.Grenade] Timer started, grenade created at (626.8574, 558.71564)
[22:38:33] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:38:33] [INFO] [Player.Grenade] Step 1 complete! Drag: (441.58667, 59.44342)
[22:38:33] [INFO] [Shotgun.FIX#243] RMB released after 4 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:33] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:38:33] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:38:33] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:33] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:33] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:33] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:34] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:38:34] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:38:34] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:38:34] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:38:34] [INFO] [GrenadeBase] Grenade landed at (91.48067, 926.608)
[22:38:34] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:38:34] [INFO] [GrenadeBase] EXPLODED at (91.48067, 926.608)!
[22:38:34] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(91.48067, 926.608), source=NEUTRAL (FragGrenade), range=2937, listeners=0
[22:38:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[22:38:34] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 12.7 degrees
[22:38:34] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 74.9 degrees
[22:38:34] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 187.0 degrees
[22:38:34] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 258.1 degrees
[22:38:34] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:38:34] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (-2363.7483, -5600.567) (6079,0 px/s), Swing distance: 956,1
[22:38:34] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,97017
[22:38:34] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (-2363.748, -5600.567), Swing: 956.1, Transfer: 1.00, Final speed: 2756.3
[22:38:34] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:38:34] [INFO] [Player.Grenade] Thrown! Velocity: 6079,0, Swing: 956,1
[22:38:34] [INFO] [Player.Grenade] State reset to IDLE
[22:38:34] [INFO] [Shotgun.FIX#243] RMB released after 37 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:34] [INFO] [Player.Grenade] Player rotation restored to 0
[22:38:34] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:35] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:35] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:35] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:35] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (698.78876, 377.71408)
[22:38:35] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:35] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:35] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:35] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:35] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:38:35] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:38:35] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:38:35] [INFO] [Player.Grenade] Timer started, grenade created at (626.8574, 558.71564)
[22:38:35] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:38:35] [INFO] [Player.Grenade] Step 1 complete! Drag: (581.2109, 119.55475)
[22:38:35] [INFO] [Shotgun.FIX#243] RMB released after 7 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:35] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:38:35] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:38:35] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:35] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:35] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:35] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:35] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:38:35] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:38:35] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:38:35] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:38:35] [INFO] [GrenadeBase] Grenade landed at (176.6285, 939.739)
[22:38:35] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:38:35] [INFO] [GrenadeBase] EXPLODED at (176.6285, 939.739)!
[22:38:35] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(176.6285, 939.739), source=NEUTRAL (@RigidBody2D@6901), range=2937, listeners=0
[22:38:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[22:38:35] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -2.3 degrees
[22:38:35] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 103.9 degrees
[22:38:35] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 168.8 degrees
[22:38:35] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 268.4 degrees
[22:38:36] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:38:36] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (-5567.0967, -5412.5166) (7764,5 px/s), Swing distance: 935,3
[22:38:36] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -2,3702724
[22:38:36] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (-5567.097, -5412.517), Swing: 935.3, Transfer: 1.00, Final speed: 2756.3
[22:38:36] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:38:36] [INFO] [Player.Grenade] Thrown! Velocity: 7764,5, Swing: 935,3
[22:38:36] [INFO] [Player.Grenade] State reset to IDLE
[22:38:36] [INFO] [Shotgun.FIX#243] RMB released after 37 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:36] [INFO] [Player.Grenade] Player rotation restored to 0
[22:38:36] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:36] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:37] [INFO] [GrenadeBase] Grenade landed at (205.4191, 716.5898)
[22:38:37] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:38:37] [INFO] [GrenadeBase] EXPLODED at (205.4191, 716.5898)!
[22:38:37] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(205.4191, 716.5898), source=NEUTRAL (FragGrenade), range=2937, listeners=0
[22:38:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[22:38:37] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -15.5 degrees
[22:38:37] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 99.0 degrees
[22:38:37] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 188.8 degrees
[22:38:37] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 281.0 degrees
[22:38:40] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:40] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:40] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (659.37335, 478.56754)
[22:38:40] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:40] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:40] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:40] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:40] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:38:40] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:38:40] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:38:40] [INFO] [Player.Grenade] Timer started, grenade created at (626.8574, 558.71564)
[22:38:40] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:38:40] [INFO] [Player.Grenade] Step 1 complete! Drag: (259.8747, -38.070526)
[22:38:40] [INFO] [Shotgun.FIX#243] RMB released after 6 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:40] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:38:40] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:38:40] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:40] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:40] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:40] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:40] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:38:40] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:38:41] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:38:41] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:38:41] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:38:41] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (-2235.6494, -6580.1045) (6949,5 px/s), Swing distance: 915,7
[22:38:41] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,8983188
[22:38:41] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (-2235.649, -6580.104), Swing: 915.7, Transfer: 1.00, Final speed: 2756.3
[22:38:41] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:38:41] [INFO] [Player.Grenade] Thrown! Velocity: 6949,5, Swing: 915,7
[22:38:41] [INFO] [Player.Grenade] State reset to IDLE
[22:38:41] [INFO] [Shotgun.FIX#243] RMB released after 39 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:41] [INFO] [Player.Grenade] Player rotation restored to 0
[22:38:41] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:41] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:42] [INFO] [GrenadeBase] Grenade landed at (300.2765, 844.8599)
[22:38:42] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:38:42] [INFO] [GrenadeBase] EXPLODED at (300.2765, 844.8599)!
[22:38:42] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(300.2765, 844.8599), source=NEUTRAL (FragGrenade), range=2937, listeners=0
[22:38:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[22:38:42] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 199.8
[22:38:42] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 2.1 degrees
[22:38:42] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 75.6 degrees
[22:38:42] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 160.4 degrees
[22:38:42] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 275.8 degrees
[22:38:44] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:44] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:44] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (783.6322, 229.4395)
[22:38:44] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:44] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:44] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:44] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:44] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:38:44] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:38:44] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:38:44] [INFO] [Player.Grenade] Timer started, grenade created at (626.8574, 558.71564)
[22:38:44] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:38:44] [INFO] [Player.Grenade] Step 1 complete! Drag: (344.71826, -30.723557)
[22:38:44] [INFO] [Shotgun.FIX#243] RMB released after 5 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:45] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:38:45] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:38:45] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:45] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:45] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:45] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:45] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:38:45] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:38:45] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:38:45] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:38:45] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:38:45] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (-3356.0125, -1703.1539) (3763,4 px/s), Swing distance: 438,5
[22:38:45] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -2,6719685
[22:38:45] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (-3356.012, -1703.154), Swing: 438.5, Transfer: 1.00, Final speed: 2756.3
[22:38:45] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:38:45] [INFO] [Player.Grenade] Thrown! Velocity: 3763,4, Swing: 438,5
[22:38:45] [INFO] [Player.Grenade] State reset to IDLE
[22:38:45] [INFO] [Shotgun.FIX#243] RMB released after 39 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:45] [INFO] [Player.Grenade] Player rotation restored to 0
[22:38:45] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:46] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:47] [INFO] [GrenadeBase] Grenade landed at (434.9873, 120.063)
[22:38:47] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:38:47] [INFO] [GrenadeBase] EXPLODED at (434.9873, 120.063)!
[22:38:47] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(434.9873, 120.063), source=NEUTRAL (FragGrenade), range=2937, listeners=0
[22:38:47] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[22:38:47] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 2.4 degrees
[22:38:47] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 94.0 degrees
[22:38:47] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 162.2 degrees
[22:38:47] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 260.6 degrees
[22:38:48] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:48] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:48] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (671.3984, 335.83884)
[22:38:48] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:48] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:48] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:48] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:48] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:38:48] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:38:48] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:38:48] [INFO] [Player.Grenade] Timer started, grenade created at (447.0706, 226.68802)
[22:38:48] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:38:48] [INFO] [Player.Grenade] Step 1 complete! Drag: (190.39667, 2.471161)
[22:38:48] [INFO] [Shotgun.FIX#243] RMB released after 3 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:48] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:38:48] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:38:48] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:48] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:48] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:48] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:48] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:38:48] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:38:48] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:38:48] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:38:49] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:38:49] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (1894.1438, -8503.807) (8712,2 px/s), Swing distance: 753,0
[22:38:49] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,3516333
[22:38:49] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (1894.144, -8503.807), Swing: 753.0, Transfer: 1.00, Final speed: 2756.3
[22:38:49] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:38:49] [INFO] [Player.Grenade] Thrown! Velocity: 8712,2, Swing: 753,0
[22:38:49] [INFO] [Player.Grenade] State reset to IDLE
[22:38:49] [INFO] [Shotgun.FIX#243] RMB released after 34 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:49] [INFO] [Player.Grenade] Player rotation restored to 0
[22:38:49] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:49] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:49] [INFO] [GrenadeBase] Grenade landed at (593.5229, 240.627)
[22:38:49] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:38:49] [INFO] [GrenadeBase] EXPLODED at (593.5229, 240.627)!
[22:38:49] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(593.5229, 240.627), source=NEUTRAL (FragGrenade), range=2937, listeners=0
[22:38:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[22:38:49] [INFO] [FragGrenade] Player found in blast radius at distance 150.6
[22:38:49] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 150.6
[22:38:49] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 1.2 degrees
[22:38:49] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 97.5 degrees
[22:38:49] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 196.3 degrees
[22:38:49] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 269.7 degrees
[22:38:53] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:53] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:53] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (833.06854, 185.67737)
[22:38:53] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:53] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:53] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:53] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:38:53] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:38:53] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:38:53] [INFO] [Player.Grenade] Timer started, grenade created at (440.1398, 322.48233)
[22:38:53] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:38:53] [INFO] [Player.Grenade] Step 1 complete! Drag: (94.19623, -44.081635)
[22:38:53] [INFO] [Shotgun.FIX#243] RMB released after 2 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:53] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:38:53] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:38:53] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:53] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:53] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:54] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:54] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:38:54] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:38:54] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:38:54] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:38:54] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:38:54] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (1441.7296, -6747.79) (6900,1 px/s), Swing distance: 900,5
[22:38:54] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,3603017
[22:38:54] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (1441.73, -6747.79), Swing: 900.5, Transfer: 1.00, Final speed: 2756.3
[22:38:54] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:38:54] [INFO] [Player.Grenade] Thrown! Velocity: 6900,1, Swing: 900,5
[22:38:54] [INFO] [Player.Grenade] State reset to IDLE
[22:38:54] [INFO] [Shotgun.FIX#243] RMB released after 35 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:54] [INFO] [Player.Grenade] Player rotation restored to 0
[22:38:54] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:55] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:55] [INFO] [GrenadeBase] Grenade landed at (604.8932, 256.4364)
[22:38:55] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:38:55] [INFO] [GrenadeBase] EXPLODED at (604.8932, 256.4364)!
[22:38:55] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(604.8932, 256.4364), source=NEUTRAL (FragGrenade), range=2937, listeners=0
[22:38:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[22:38:55] [INFO] [FragGrenade] Player found in blast radius at distance 177.5
[22:38:55] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 177.5
[22:38:55] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 0.2 degrees
[22:38:55] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 86.8 degrees
[22:38:55] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 175.8 degrees
[22:38:55] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 256.6 degrees
[22:38:55] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:55] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:56] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (931.27313, 176.32672)
[22:38:56] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:56] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:56] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:56] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:56] [INFO] [Player.Grenade] Step 1 failed: drag not far enough right (7,348633 < 30)
[22:38:56] [INFO] [Shotgun.FIX#243] RMB released after 4 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:56] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1279.9996, 118.21912)
[22:38:56] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:56] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:56] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:56] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:56] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:56] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:57] [INFO] [Shotgun.FIX#243] RMB released after 66 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:57] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:38:57] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:38:57] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (825.0518, 58.775696)
[22:38:57] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:57] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:57] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:57] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:58] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:38:58] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:38:58] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:38:58] [INFO] [Player.Grenade] Timer started, grenade created at (103.88025, 188.23643)
[22:38:58] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:38:58] [INFO] [Player.Grenade] Step 1 complete! Drag: (454.9478, -24.712433)
[22:38:58] [INFO] [Shotgun.FIX#243] RMB released after 5 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:58] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:38:58] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[22:38:58] [INFO] [Shotgun.FIX#243] RMB drag started - MMB: poll=False, raw=False, event=False, any=False, ActionState=Ready, ReloadState=NotReloading
[22:38:58] [INFO] [Shotgun.DIAG] Frame 1: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:58] [INFO] [Shotgun.DIAG] Frame 2: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:58] [INFO] [Shotgun.DIAG] Frame 3: poll=False, raw=False, event=False, any=False, wasMMB=False
[22:38:58] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[22:38:58] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[22:38:58] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[22:38:58] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[22:38:58] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:38:58] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (2473.1797, -3865) (4588,6 px/s), Swing distance: 723,6
[22:38:58] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,0015603
[22:38:58] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (2473.18, -3865), Swing: 723.6, Transfer: 1.00, Final speed: 2756.3
[22:38:58] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[22:38:58] [INFO] [Player.Grenade] Thrown! Velocity: 4588,6, Swing: 723,6
[22:38:58] [INFO] [Player.Grenade] State reset to IDLE
[22:38:58] [INFO] [Shotgun.FIX#243] RMB released after 37 frames - wasMMBDuringDrag=False, current: poll=False, raw=False, event=False
[22:38:58] [INFO] [Player.Grenade] Player rotation restored to 0
[22:38:58] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:38:59] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:38:59] [INFO] [GrenadeBase] Grenade landed at (510.6346, 75.24268)
[22:38:59] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:38:59] [INFO] [GrenadeBase] EXPLODED at (510.6346, 75.24268)!
[22:38:59] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(510.6346, 75.24268), source=NEUTRAL (FragGrenade), range=2937, listeners=0
[22:38:59] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[22:38:59] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 3.7 degrees
[22:38:59] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 70.5 degrees
[22:38:59] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 170.9 degrees
[22:38:59] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 260.6 degrees
[22:39:01] [INFO] ------------------------------------------------------------
[22:39:01] [INFO] GAME LOG ENDED: 2026-01-23T22:39:01
[22:39:01] [INFO] ============================================================
