[02:18:06] [INFO] ============================================================
[02:18:06] [INFO] GAME LOG STARTED
[02:18:06] [INFO] ============================================================
[02:18:06] [INFO] Timestamp: 2026-01-25T02:18:06
[02:18:06] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260125_021806.txt
[02:18:06] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
[02:18:06] [INFO] OS: Windows
[02:18:06] [INFO] Debug build: false
[02:18:06] [INFO] Engine version: 4.3-stable (official)
[02:18:06] [INFO] Project: Godot Top-Down Template
[02:18:06] [INFO] ------------------------------------------------------------
[02:18:06] [INFO] [GameManager] GameManager ready
[02:18:06] [INFO] [ScoreManager] ScoreManager ready
[02:18:07] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[02:18:07] [INFO] [ImpactEffects] Scenes loaded: DustEffect, BloodEffect, SparksEffect, BloodDecal
[02:18:07] [INFO] [ImpactEffects] ImpactEffectsManager ready - FULL VERSION with blood effects enabled
[02:18:07] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:18:07] [INFO] [PenultimateHit] Saturation shader loaded successfully
[02:18:07] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[02:18:07] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[02:18:07] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[02:18:07] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[02:18:07] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[02:18:07] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:18:07] [INFO] [LastChance] Last chance shader loaded successfully
[02:18:07] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[02:18:07] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[02:18:07] [INFO] [LastChance]   Sepia intensity: 0.70
[02:18:07] [INFO] [LastChance]   Brightness: 0.60
[02:18:07] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[02:18:07] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[02:18:07] [INFO] [ExperimentalSettings] ExperimentalSettings initialized - FOV enabled: true
[02:18:07] [ENEMY] [Enemy1] Death animation component initialized
[02:18:07] [ENEMY] [Enemy2] Death animation component initialized
[02:18:07] [ENEMY] [Enemy3] Death animation component initialized
[02:18:07] [ENEMY] [Enemy4] Death animation component initialized
[02:18:07] [ENEMY] [Enemy5] Death animation component initialized
[02:18:07] [ENEMY] [Enemy6] Death animation component initialized
[02:18:07] [ENEMY] [Enemy7] Death animation component initialized
[02:18:07] [ENEMY] [Enemy8] Death animation component initialized
[02:18:07] [ENEMY] [Enemy9] Death animation component initialized
[02:18:07] [ENEMY] [Enemy10] Death animation component initialized
[02:18:07] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:18:07] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:18:07] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:18:07] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:18:07] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:18:07] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:18:07] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[02:18:07] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[02:18:07] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[02:18:07] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:18:07] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[02:18:07] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[02:18:07] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[02:18:07] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[02:18:07] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[02:18:07] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[02:18:07] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[02:18:07] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[02:18:07] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[02:18:07] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[02:18:07] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[02:18:07] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[02:18:07] [INFO] [ScoreManager] Level started with 10 enemies
[02:18:07] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[02:18:07] [ENEMY] [Enemy1] Registered as sound listener
[02:18:07] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[02:18:07] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[02:18:07] [ENEMY] [Enemy2] Registered as sound listener
[02:18:07] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[02:18:07] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[02:18:07] [ENEMY] [Enemy3] Registered as sound listener
[02:18:07] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[02:18:07] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[02:18:07] [ENEMY] [Enemy4] Registered as sound listener
[02:18:07] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[02:18:07] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[02:18:07] [ENEMY] [Enemy5] Registered as sound listener
[02:18:07] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[02:18:07] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[02:18:07] [ENEMY] [Enemy6] Registered as sound listener
[02:18:07] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[02:18:07] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[02:18:07] [ENEMY] [Enemy7] Registered as sound listener
[02:18:07] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 4, behavior: PATROL, player_found: yes
[02:18:07] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[02:18:07] [ENEMY] [Enemy8] Registered as sound listener
[02:18:07] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[02:18:07] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[02:18:07] [ENEMY] [Enemy9] Registered as sound listener
[02:18:07] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[02:18:07] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[02:18:07] [ENEMY] [Enemy10] Registered as sound listener
[02:18:07] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[02:18:07] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:18:07] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:18:07] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:18:07] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:18:07] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:18:07] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:18:07] [INFO] [LastChance] Found player: Player
[02:18:07] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:18:07] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:18:07] [INFO] [LastChance] Connected to player Died signal (C#)
[02:18:12] [INFO] [Player.Debug] Debug mode toggled: ON
[02:18:12] [INFO] [GameManager] Debug mode toggled: ON
[02:18:17] [INFO] [PauseMenu] Armory button pressed
[02:18:17] [INFO] [PauseMenu] Creating new armory menu instance
[02:18:17] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[02:18:17] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[02:18:17] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[02:18:17] [INFO] [PauseMenu] back_pressed signal exists on instance
[02:18:17] [INFO] [PauseMenu] back_pressed signal connected
[02:18:17] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[02:18:17] [INFO] [PauseMenu] _populate_weapon_grid method exists
[02:18:26] [INFO] [PauseMenu] Armory button pressed
[02:18:26] [INFO] [PauseMenu] Showing existing armory menu
[02:18:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.2417, 815.4517), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:18:34] [ENEMY] [Enemy1] Heard gunshot at (450.2417, 815.4517), source_type=0, intensity=0.01, distance=489
[02:18:34] [ENEMY] [Enemy2] Heard gunshot at (450.2417, 815.4517), source_type=0, intensity=0.03, distance=270
[02:18:34] [ENEMY] [Enemy3] Heard gunshot at (450.2417, 815.4517), source_type=0, intensity=0.04, distance=258
[02:18:34] [ENEMY] [Enemy4] Heard gunshot at (450.2417, 815.4517), source_type=0, intensity=0.02, distance=360
[02:18:34] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[02:18:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450.24173, 815.4517), shooter_id=46456112833, bullet_pos=(516.68414, 809.9879)
[02:18:34] [INFO] [Bullet] Using shooter_position, distance=66,66669
[02:18:34] [INFO] [Bullet] Distance to wall: 66,66669 (4,5394573% of viewport)
[02:18:34] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:18:34] [INFO] [Bullet] Starting wall penetration at (516.68414, 809.9879)
[02:18:34] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39,326084
[02:18:34] [INFO] [Bullet] Body exited signal received for penetrating body
[02:18:34] [INFO] [Bullet] Exiting penetration at (563.1938, 806.16327) after traveling 41,666676 pixels through wall
[02:18:34] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[02:18:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(458.7022, 786.9293), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:18:34] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[02:18:34] [ENEMY] [Enemy3] Hit taken, health: 3/4
[02:18:34] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[02:18:34] [INFO] [ImpactEffects] spawn_blood_effect called at (689.6233, 752.4701), dir=(1, 0), lethal=false
[02:18:34] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[02:18:34] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[02:18:34] [INFO] [ImpactEffects] Blood effect spawned at (689.6233, 752.4701) (scale=1)
[02:18:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.6233, 752.4701), source=ENEMY (Enemy3), range=1469, listeners=10
[02:18:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:18:34] [INFO] [LastChance] Threat detected: @Area2D@377
[02:18:34] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:18:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:18:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(482.0627, 768.3766), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:18:34] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[02:18:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[02:18:35] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[02:18:35] [ENEMY] [Enemy3] Hit taken, health: 2/4
[02:18:35] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[02:18:35] [INFO] [ImpactEffects] spawn_blood_effect called at (689.6233, 752.4701), dir=(1, 0), lethal=false
[02:18:35] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[02:18:35] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[02:18:35] [INFO] [ImpactEffects] Blood effect spawned at (689.6233, 752.4701) (scale=1)
[02:18:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.6233, 752.4701), source=ENEMY (Enemy3), range=1469, listeners=10
[02:18:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:18:35] [INFO] [LastChance] Threat detected: @Area2D@381
[02:18:35] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:18:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:18:35] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[02:18:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(516.4756, 763.4515), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:18:35] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[02:18:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[02:18:35] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[02:18:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(690.2308, 760.9818), source=ENEMY (Enemy3), range=1469, listeners=10
[02:18:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:18:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(551.6758, 763.4515), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:18:35] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[02:18:35] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[02:18:35] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[02:18:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(696.2787, 773.8076), source=ENEMY (Enemy3), range=1469, listeners=10
[02:18:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:18:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(516.4756, 763.45154), shooter_id=46456112833, bullet_pos=(935.4233, 691.9826)
[02:18:35] [INFO] [Bullet] Using shooter_position, distance=424,99997
[02:18:35] [INFO] [Bullet] Distance to wall: 424,99997 (28,93903% of viewport)
[02:18:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:18:35] [INFO] [Bullet] Starting wall penetration at (935.4233, 691.9826)
[02:18:35] [INFO] [LastChance] Threat detected: @Area2D@388
[02:18:35] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:18:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:18:35] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:18:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(403.0986, 565.697), source=ENEMY (Enemy2), range=1469, listeners=10
[02:18:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[02:18:35] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:18:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(697.6465, 775.4448), source=ENEMY (Enemy3), range=1469, listeners=10
[02:18:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:18:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37,748245
[02:18:35] [INFO] [LastChance] Threat detected: @Area2D@392
[02:18:35] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:18:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:18:35] [INFO] [Bullet] Body exited signal received for penetrating body
[02:18:35] [INFO] [Bullet] Exiting penetration at (973.2107, 685.5364) after traveling 33,333336 pixels through wall
[02:18:35] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[02:18:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(516.4756, 763.45154), shooter_id=46456112833, bullet_pos=(973.2107, 685.5364)
[02:18:35] [INFO] [Bullet] Using shooter_position, distance=463,33328
[02:18:35] [INFO] [Bullet] Distance to wall: 463,33328 (31,549215% of viewport)
[02:18:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:18:35] [INFO] [Bullet] Starting wall penetration at (973.2107, 685.5364)
[02:18:35] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:18:35] [INFO] [Bullet] Exiting penetration at (1010.9981, 679.09015) after traveling 33,333336 pixels through wall
[02:18:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:18:35] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:18:35] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:18:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[02:18:35] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[02:18:35] [INFO] [PenultimateHit] Player died - ending penultimate effect
[02:18:35] [INFO] [LastChance] Player died
[02:18:35] [INFO] [LastChance] Threat detected: @Area2D@390
[02:18:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:18:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:18:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(551.6758, 763.45154), shooter_id=46456112833, bullet_pos=(931.3584, 667.3072)
[02:18:35] [INFO] [Bullet] Using shooter_position, distance=391,66647
[02:18:35] [INFO] [Bullet] Distance to wall: 391,66647 (26,66929% of viewport)
[02:18:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:18:35] [INFO] [Bullet] Starting wall penetration at (931.3584, 667.3072)
[02:18:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33,545197
[02:18:35] [INFO] [Bullet] Body exited signal received for penetrating body
[02:18:35] [INFO] [Bullet] Exiting penetration at (968.5188, 657.89734) after traveling 33,333336 pixels through wall
[02:18:35] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[02:18:35] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:18:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(403.0986, 565.697), source=ENEMY (Enemy2), range=1469, listeners=10
[02:18:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[02:18:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:18:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:18:35] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:18:35] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:18:35] [ENEMY] [Enemy1] Death animation component initialized
[02:18:35] [ENEMY] [Enemy2] Death animation component initialized
[02:18:35] [ENEMY] [Enemy3] Death animation component initialized
[02:18:35] [ENEMY] [Enemy4] Death animation component initialized
[02:18:35] [ENEMY] [Enemy5] Death animation component initialized
[02:18:35] [ENEMY] [Enemy6] Death animation component initialized
[02:18:35] [ENEMY] [Enemy7] Death animation component initialized
[02:18:35] [ENEMY] [Enemy8] Death animation component initialized
[02:18:35] [ENEMY] [Enemy9] Death animation component initialized
[02:18:35] [ENEMY] [Enemy10] Death animation component initialized
[02:18:35] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:18:35] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:18:35] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:18:35] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:18:35] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:18:35] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:18:35] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:18:35] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[02:18:35] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[02:18:35] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:18:35] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[02:18:35] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[02:18:35] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[02:18:35] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[02:18:35] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[02:18:35] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[02:18:35] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[02:18:35] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[02:18:35] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[02:18:35] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[02:18:35] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[02:18:35] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[02:18:35] [INFO] [ScoreManager] Level started with 10 enemies
[02:18:35] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[02:18:35] [ENEMY] [Enemy1] Registered as sound listener
[02:18:35] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[02:18:35] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[02:18:35] [ENEMY] [Enemy2] Registered as sound listener
[02:18:35] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[02:18:35] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[02:18:35] [ENEMY] [Enemy3] Registered as sound listener
[02:18:35] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[02:18:35] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[02:18:35] [ENEMY] [Enemy4] Registered as sound listener
[02:18:35] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[02:18:35] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[02:18:35] [ENEMY] [Enemy5] Registered as sound listener
[02:18:35] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[02:18:35] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[02:18:35] [ENEMY] [Enemy6] Registered as sound listener
[02:18:35] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[02:18:35] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[02:18:35] [ENEMY] [Enemy7] Registered as sound listener
[02:18:35] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[02:18:35] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[02:18:35] [ENEMY] [Enemy8] Registered as sound listener
[02:18:35] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[02:18:35] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[02:18:35] [ENEMY] [Enemy9] Registered as sound listener
[02:18:35] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[02:18:35] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[02:18:35] [ENEMY] [Enemy10] Registered as sound listener
[02:18:35] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[02:18:35] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:18:35] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:18:35] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:18:35] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:18:35] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:18:35] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:18:35] [INFO] [LastChance] Found player: Player
[02:18:35] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:18:35] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:18:35] [INFO] [LastChance] Connected to player Died signal (C#)
[02:18:37] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[02:18:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.3697, 789.9763), source=PLAYER (AssaultRifle), range=1469, listeners=20
[02:18:37] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[02:18:37] [ENEMY] [Enemy1] Heard gunshot at (456.3697, 789.9763), source_type=0, intensity=0.01, distance=467
[02:18:37] [ENEMY] [Enemy2] Heard gunshot at (456.3697, 789.9763), source_type=0, intensity=0.04, distance=247
[02:18:37] [ENEMY] [Enemy4] Heard gunshot at (456.3697, 789.9763), source_type=0, intensity=0.02, distance=361
[02:18:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[02:18:37] [ENEMY] [Enemy3] Hit taken, health: 1/2
[02:18:37] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[02:18:37] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4503, 753.7664), dir=(1, 0), lethal=false
[02:18:37] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[02:18:37] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[02:18:37] [INFO] [ImpactEffects] Blood effect spawned at (684.4503, 753.7664) (scale=1)
[02:18:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4503, 753.7664), source=ENEMY (Enemy3), range=1469, listeners=10
[02:18:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:18:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(473.8376, 765.5043), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:18:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[02:18:37] [INFO] [LastChance] Threat detected: Bullet
[02:18:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:18:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:18:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:18:37] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:18:37] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:18:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(495.4277, 754.1968), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:18:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[02:18:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4503, 753.7664), source=ENEMY (Enemy3), range=1469, listeners=10
[02:18:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:18:37] [INFO] [LastChance] Threat detected: @Area2D@656
[02:18:37] [INFO] [LastChance] Triggering last chance effect!
[02:18:37] [INFO] [LastChance] Starting last chance effect:
[02:18:37] [INFO] [LastChance]   - Time will be frozen (except player)
[02:18:37] [INFO] [LastChance]   - Duration: 6.0 real seconds
[02:18:37] [INFO] [LastChance]   - Sepia intensity: 0.70
[02:18:37] [INFO] [LastChance]   - Brightness: 0.60
[02:18:37] [INFO] [LastChance] Pushed bullet Bullet from distance 53.9 to 200.0
[02:18:37] [INFO] [LastChance] Pushed bullet @Area2D@656 from distance 118.2 to 200.0
[02:18:37] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[02:18:37] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[02:18:37] [INFO] [LastChance] Skipping player node: Player
[02:18:37] [INFO] [LastChance] Froze existing bullet casing: Casing
[02:18:37] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@652
[02:18:37] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@654
[02:18:37] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@655
[02:18:37] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@657
[02:18:37] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[02:18:37] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[02:18:37] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[02:18:37] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@658
[02:18:37] [INFO] [LastChance] Registered frozen player bullet: @Area2D@658
[02:18:37] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@659
[02:18:37] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@659
[02:18:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(527.0769, 753.2331), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:18:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[02:18:37] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@661
[02:18:37] [INFO] [LastChance] Registered frozen player bullet: @Area2D@661
[02:18:37] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@662
[02:18:37] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@662
[02:18:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(553.3969, 766.7694), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:18:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[02:18:38] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@665
[02:18:38] [INFO] [LastChance] Registered frozen player bullet: @Area2D@665
[02:18:38] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@666
[02:18:38] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@666
[02:18:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(633.7285, 984.0002), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:18:38] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
[02:18:38] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@667
[02:18:38] [INFO] [LastChance] Registered frozen player bullet: @Area2D@667
[02:18:38] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@668
[02:18:38] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@668
[02:18:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(646.2337, 989.9336), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:18:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=7
[02:18:39] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@669
[02:18:39] [INFO] [LastChance] Registered frozen player bullet: @Area2D@669
[02:18:39] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@670
[02:18:39] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@670
[02:18:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(645.9345, 988.419), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:18:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=7
[02:18:39] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@671
[02:18:39] [INFO] [LastChance] Registered frozen player bullet: @Area2D@671
[02:18:39] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@672
[02:18:39] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@672
[02:18:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(635.6223, 978.1472), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:18:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
[02:18:39] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@673
[02:18:39] [INFO] [LastChance] Registered frozen player bullet: @Area2D@673
[02:18:39] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@674
[02:18:39] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@674
[02:18:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(621.8776, 958.0937), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:18:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
[02:18:42] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[02:18:42] [ENEMY] [Enemy1] Player reloading state changed: false -> true
[02:18:42] [ENEMY] [Enemy2] Player reloading state changed: false -> true
[02:18:42] [ENEMY] [Enemy3] Player reloading state changed: false -> true
[02:18:42] [ENEMY] [Enemy4] Player reloading state changed: false -> true
[02:18:42] [ENEMY] [Enemy5] Player reloading state changed: false -> true
[02:18:42] [ENEMY] [Enemy6] Player reloading state changed: false -> true
[02:18:42] [ENEMY] [Enemy7] Player reloading state changed: false -> true
[02:18:42] [ENEMY] [Enemy8] Player reloading state changed: false -> true
[02:18:42] [ENEMY] [Enemy9] Player reloading state changed: false -> true
[02:18:42] [ENEMY] [Enemy10] Player reloading state changed: false -> true
[02:18:42] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(1036.83, 671.998), source=PLAYER (Player), range=900, listeners=10
[02:18:42] [ENEMY] [Enemy3] Heard player RELOAD at (1036.83, 671.998), intensity=0.02, distance=362
[02:18:42] [ENEMY] [Enemy4] Heard player RELOAD at (1036.83, 671.998), intensity=0.02, distance=353
[02:18:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=4
[02:18:42] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[02:18:42] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
[02:18:42] [ENEMY] [Enemy1] Player reloading state changed: true -> false
[02:18:42] [ENEMY] [Enemy2] Player reloading state changed: true -> false
[02:18:42] [ENEMY] [Enemy3] Player reloading state changed: true -> false
[02:18:42] [ENEMY] [Enemy4] Player reloading state changed: true -> false
[02:18:42] [ENEMY] [Enemy5] Player reloading state changed: true -> false
[02:18:42] [ENEMY] [Enemy6] Player reloading state changed: true -> false
[02:18:42] [ENEMY] [Enemy7] Player reloading state changed: true -> false
[02:18:42] [ENEMY] [Enemy8] Player reloading state changed: true -> false
[02:18:42] [ENEMY] [Enemy9] Player reloading state changed: true -> false
[02:18:42] [ENEMY] [Enemy10] Player reloading state changed: true -> false
[02:18:42] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[02:18:42] [INFO] [Player.Reload.Anim] LeftArm: pos=(22.318537, 5.9600163), target=(24, 6), base=(24, 6)
[02:18:42] [INFO] [Player.Reload.Anim] RightArm: pos=(-1.99999, 6.2469225), target=(-2, 6), base=(-2, 6)
[02:18:42] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[02:18:43] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[02:18:43] [INFO] [LastChance] Ending last chance effect
[02:18:43] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[02:18:43] [ENEMY] [Enemy1] Search mode: COMBAT -> SEARCHING at (456.3697, 789.9763)
[02:18:43] [ENEMY] [Enemy1] SEARCHING started: center=(456.3697, 789.9763), radius=100, waypoints=5
[02:18:43] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[02:18:43] [ENEMY] [Enemy2] Search mode: COMBAT -> SEARCHING at (456.3697, 789.9763)
[02:18:43] [ENEMY] [Enemy2] SEARCHING started: center=(456.3697, 789.9763), radius=100, waypoints=5
[02:18:43] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[02:18:43] [ENEMY] [Enemy3] Search mode: COMBAT -> SEARCHING at (495.4277, 748.1968)
[02:18:43] [ENEMY] [Enemy3] SEARCHING started: center=(495.4277, 748.1968), radius=100, waypoints=5
[02:18:43] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[02:18:43] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (1036.83, 671.998)
[02:18:43] [ENEMY] [Enemy4] SEARCHING started: center=(1036.83, 671.998), radius=100, waypoints=5
[02:18:43] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[02:18:43] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[02:18:43] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[02:18:43] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[02:18:43] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[02:18:43] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[02:18:43] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[02:18:43] [INFO] [LastChance] All process modes restored
[02:18:43] [INFO] [LastChance] Unfroze player bullet: @Area2D@658
[02:18:43] [INFO] [LastChance] Unfroze player bullet: @Area2D@661
[02:18:43] [INFO] [LastChance] Unfroze player bullet: @Area2D@665
[02:18:43] [INFO] [LastChance] Unfroze player bullet: @Area2D@667
[02:18:43] [INFO] [LastChance] Unfroze player bullet: @Area2D@669
[02:18:43] [INFO] [LastChance] Unfroze player bullet: @Area2D@671
[02:18:43] [INFO] [LastChance] Unfroze player bullet: @Area2D@673
[02:18:43] [INFO] [LastChance] Unfroze bullet casing: Casing
[02:18:43] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@652
[02:18:43] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@654
[02:18:43] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@655
[02:18:43] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@657
[02:18:43] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@659
[02:18:43] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@662
[02:18:43] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@666
[02:18:43] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@668
[02:18:43] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@670
[02:18:43] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@672
[02:18:43] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@674
[02:18:43] [INFO] [LastChance] Restored original colors to 5 player sprites
[02:18:43] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[02:18:43] [INFO] [LastChance] Threat detected: @Area2D@653
[02:18:43] [INFO] [LastChance] Effect already used this life
[02:18:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:18:43] [ENEMY] [Enemy3] Hit taken, health: 0/2
[02:18:43] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[02:18:43] [INFO] [ImpactEffects] spawn_blood_effect called at (674.1881, 753.4639), dir=(1, 0), lethal=true
[02:18:43] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[02:18:43] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[02:18:43] [INFO] [ImpactEffects] Blood effect spawned at (674.1881, 753.4639) (scale=1.5)
[02:18:43] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[02:18:43] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[02:18:43] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[02:18:43] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[02:18:43] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[02:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(621.87756, 958.0937), shooter_id=377302813825, bullet_pos=(753.6223, 886.3769)
[02:18:43] [INFO] [Bullet] Using shooter_position, distance=149,99992
[02:18:43] [INFO] [Bullet] Distance to wall: 149,99992 (10,213771% of viewport)
[02:18:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(635.6223, 978.14716), shooter_id=377302813825, bullet_pos=(758.293, 891.82275)
[02:18:43] [INFO] [Bullet] Using shooter_position, distance=150,00003
[02:18:43] [INFO] [Bullet] Distance to wall: 150,00003 (10,2137785% of viewport)
[02:18:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:18:43] [INFO] [Bullet] Starting wall penetration at (758.293, 891.82275)
[02:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(645.9345, 988.419), shooter_id=377302813825, bullet_pos=(758.73224, 889.54205)
[02:18:43] [INFO] [Bullet] Using shooter_position, distance=149,99994
[02:18:43] [INFO] [Bullet] Distance to wall: 149,99994 (10,213772% of viewport)
[02:18:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(646.2337, 989.9336), shooter_id=377302813825, bullet_pos=(753.1865, 884.7619)
[02:18:43] [INFO] [Bullet] Using shooter_position, distance=149,99997
[02:18:43] [INFO] [Bullet] Distance to wall: 149,99997 (10,213774% of viewport)
[02:18:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(633.72845, 984.00024), shooter_id=377302813825, bullet_pos=(740.4459, 878.5897)
[02:18:43] [INFO] [Bullet] Using shooter_position, distance=149,99998
[02:18:43] [INFO] [Bullet] Distance to wall: 149,99998 (10,213776% of viewport)
[02:18:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:18:43] [INFO] [LastChance] Threat detected: Bullet
[02:18:43] [INFO] [LastChance] Effect already used this life
[02:18:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:18:43] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:18:43] [INFO] [Bullet] Exiting penetration at (789.6422, 869.762) after traveling 33,333336 pixels through wall
[02:18:43] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[02:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(473.83762, 765.50433), shooter_id=377302813825, bullet_pos=(916.9539, 687.09644)
[02:18:43] [INFO] [Bullet] Using shooter_position, distance=449,99985
[02:18:43] [INFO] [Bullet] Distance to wall: 449,99985 (30,641317% of viewport)
[02:18:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:18:43] [INFO] [Bullet] Starting wall penetration at (916.9539, 687.09644)
[02:18:43] [ENEMY] [Enemy4] Hit taken, health: 2/3
[02:18:43] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[02:18:43] [INFO] [ImpactEffects] spawn_blood_effect called at (782.8868, 905.2184), dir=(1, 0), lethal=false
[02:18:43] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[02:18:43] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[02:18:43] [INFO] [ImpactEffects] Blood effect spawned at (782.8868, 905.2184) (scale=1)
[02:18:43] [ENEMY] [Enemy4] Hit taken, health: 1/3
[02:18:43] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[02:18:43] [INFO] [ImpactEffects] spawn_blood_effect called at (782.8868, 905.2184), dir=(1, 0), lethal=false
[02:18:43] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[02:18:43] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[02:18:43] [INFO] [ImpactEffects] Blood effect spawned at (782.8868, 905.2184) (scale=1)
[02:18:43] [ENEMY] [Enemy4] Hit taken, health: 0/3
[02:18:43] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[02:18:43] [INFO] [ImpactEffects] spawn_blood_effect called at (782.8868, 905.2184), dir=(1, 0), lethal=true
[02:18:43] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[02:18:43] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[02:18:43] [INFO] [ImpactEffects] Blood effect spawned at (782.8868, 905.2184) (scale=1.5)
[02:18:43] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[02:18:43] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[02:18:43] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
[02:18:43] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[02:18:43] [ENEMY] [Enemy4] Death animation started with hit direction: (1, 0)
[02:18:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18,991367
[02:18:43] [INFO] [Bullet] Body exited signal received for penetrating body
[02:18:43] [INFO] [Bullet] Exiting penetration at (954.70087, 680.41724) after traveling 33,333336 pixels through wall
[02:18:43] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[02:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(495.4277, 754.19684), shooter_id=377302813825, bullet_pos=(920.41394, 697.4869)
[02:18:43] [INFO] [Bullet] Using shooter_position, distance=428,7532
[02:18:43] [INFO] [Bullet] Distance to wall: 428,7532 (29,194597% of viewport)
[02:18:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:18:43] [INFO] [Bullet] Starting wall penetration at (920.41394, 697.4869)
[02:18:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 22,513811
[02:18:43] [INFO] [LastChance] Threat detected: @Area2D@658
[02:18:43] [INFO] [LastChance] Effect already used this life
[02:18:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:18:43] [INFO] [Bullet] Body exited signal received for penetrating body
[02:18:43] [INFO] [Bullet] Exiting penetration at (958.1815, 690.9251) after traveling 33,333332 pixels through wall
[02:18:43] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[02:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(646.2337, 989.9336), shooter_id=377302813825, bullet_pos=(878.12244, 1007.30176)
[02:18:43] [INFO] [Bullet] Using shooter_position, distance=232,53824
[02:18:43] [INFO] [Bullet] Distance to wall: 232,53824 (15,833956% of viewport)
[02:18:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(646.2337, 989.9336), shooter_id=377302813825, bullet_pos=(910.70667, 965.2903)
[02:18:43] [INFO] [Bullet] Using shooter_position, distance=265,6186
[02:18:43] [INFO] [Bullet] Distance to wall: 265,6186 (18,086458% of viewport)
[02:18:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:18:43] [INFO] [Bullet] Starting wall penetration at (910.70667, 965.2903)
[02:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(527.0769, 753.2331), shooter_id=377302813825, bullet_pos=(936.60754, 676.44946)
[02:18:43] [INFO] [Bullet] Using shooter_position, distance=416,6666
[02:18:43] [INFO] [Bullet] Distance to wall: 416,6666 (28,371597% of viewport)
[02:18:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:18:43] [INFO] [Bullet] Starting wall penetration at (936.60754, 676.44946)
[02:18:43] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:18:43] [INFO] [Bullet] Exiting penetration at (974.28436, 669.3854) after traveling 33,333332 pixels through wall
[02:18:43] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[02:18:43] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:18:43] [INFO] [Bullet] Exiting penetration at (928.53094, 942.3091) after traveling 24,083334 pixels through wall
[02:18:43] [INFO] [Bullet] Damage multiplier after penetration: 0,225
[02:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.6005, 759.5704), shooter_id=374484241369, bullet_pos=(39.91227, 748.713)
[02:18:43] [INFO] [Bullet] Using shooter_position, distance=576.790344238281
[02:18:43] [INFO] [Bullet] Distance to wall: 576.790344238281 (39.2747151631042% of viewport)
[02:18:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:18:43] [INFO] [Bullet] Starting wall penetration at (39.91227, 748.713)
[02:18:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30.4176330566406
[02:18:43] [INFO] [Bullet] Body exited signal received for penetrating body
[02:18:43] [INFO] [Bullet] Exiting penetration at (1.595562, 747.5839) after traveling 33.3333320617676 pixels through wall
[02:18:43] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:18:44] [ENEMY] [Enemy3] Ragdoll activated
[02:18:44] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[02:18:44] [ENEMY] [Enemy4] Ragdoll activated
[02:18:44] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[02:18:45] [ENEMY] [Enemy3] Death animation completed
[02:18:45] [ENEMY] [Enemy4] Death animation completed
[02:18:47] [INFO] [ScoreManager] Combo ended at 2. Max combo: 2
[02:18:52] [ENEMY] [Enemy2] SEARCHING: Expand outer ring r=175 wps=4
[02:18:52] [ENEMY] [Enemy1] SEARCHING: Expand outer ring r=175 wps=4
[02:19:01] [ENEMY] [Enemy2] SEARCHING: Expand outer ring r=250 wps=4
[02:19:02] [ENEMY] [Enemy1] SEARCHING: Expand outer ring r=250 wps=4
[02:19:13] [ENEMY] [Enemy2] SEARCHING: Expand outer ring r=325 wps=4
[02:19:13] [ENEMY] [Enemy1] SEARCHING: Expand outer ring r=325 wps=4
[02:19:28] [ENEMY] [Enemy2] SEARCHING: Expand outer ring r=400 wps=4
[02:19:28] [ENEMY] [Enemy1] SEARCHING: Expand outer ring r=400 wps=4
[02:19:35] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:35] [ENEMY] [Enemy2] SEARCHING: Player spotted! Transitioning to COMBAT
[02:19:35] [ENEMY] [Enemy2] State: SEARCHING -> COMBAT
[02:19:36] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:36] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:36] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:36] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:36] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:36] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:36] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:36] [ENEMY] [Enemy1] SEARCHING: Player spotted! Transitioning to COMBAT
[02:19:36] [ENEMY] [Enemy1] State: SEARCHING -> COMBAT
[02:19:36] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:36] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:36] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:36] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:36] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:36] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:37] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:37] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:37] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:37] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:37] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:37] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:37] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:37] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:37] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:37] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:37] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:37] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:37] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:37] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:37] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:37] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy2] State: COMBAT -> SEEKING_COVER
[02:19:38] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[02:19:38] [ENEMY] [Enemy2] State: IN_COVER -> COMBAT
[02:19:38] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:38] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:39] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:39] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:39] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:39] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:39] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:39] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:39] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:39] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:39] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:39] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:39] [ENEMY] [Enemy1] State: COMBAT -> SEEKING_COVER
[02:19:39] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
[02:19:39] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:39] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:39] [ENEMY] [Enemy1] State: IN_COVER -> COMBAT
[02:19:39] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:39] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:39] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:39] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:40] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:41] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:41] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:41] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:41] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:41] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:41] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:41] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:41] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:41] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:41] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:41] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:41] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:41] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:41] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:41] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:41] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:41] [ENEMY] [Enemy2] State: COMBAT -> SEEKING_COVER
[02:19:41] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[02:19:41] [ENEMY] [Enemy2] State: IN_COVER -> COMBAT
[02:19:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:42] [ENEMY] [Enemy1] State: COMBAT -> SEEKING_COVER
[02:19:42] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
[02:19:42] [ENEMY] [Enemy1] State: IN_COVER -> COMBAT
[02:19:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:42] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:43] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:44] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:44] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:44] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:44] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:44] [ENEMY] [Enemy2] State: COMBAT -> SEEKING_COVER
[02:19:44] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[02:19:44] [ENEMY] [Enemy2] State: IN_COVER -> COMBAT
[02:19:44] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:44] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:44] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:44] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy1] State: COMBAT -> SEEKING_COVER
[02:19:45] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
[02:19:45] [ENEMY] [Enemy1] State: IN_COVER -> COMBAT
[02:19:45] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:45] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:46] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:46] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:46] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:46] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:46] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:46] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:46] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:46] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:46] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:46] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:46] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:46] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:46] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:46] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:46] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:46] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy2] State: COMBAT -> SEEKING_COVER
[02:19:47] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[02:19:47] [ENEMY] [Enemy2] State: IN_COVER -> COMBAT
[02:19:47] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:47] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:48] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:19:48] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:19:48] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:19:48] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:19:48] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:19:48] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:19:48] [ENEMY] [Enemy1] Death animation component initialized
[02:19:48] [ENEMY] [Enemy2] Death animation component initialized
[02:19:48] [ENEMY] [Enemy3] Death animation component initialized
[02:19:48] [ENEMY] [Enemy4] Death animation component initialized
[02:19:48] [ENEMY] [Enemy5] Death animation component initialized
[02:19:48] [ENEMY] [Enemy6] Death animation component initialized
[02:19:48] [ENEMY] [Enemy7] Death animation component initialized
[02:19:48] [ENEMY] [Enemy8] Death animation component initialized
[02:19:48] [ENEMY] [Enemy9] Death animation component initialized
[02:19:48] [ENEMY] [Enemy10] Death animation component initialized
[02:19:48] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:19:48] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:19:48] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:19:48] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:19:48] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:19:48] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:19:48] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:19:48] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[02:19:48] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[02:19:48] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:19:48] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[02:19:48] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[02:19:48] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[02:19:48] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[02:19:48] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[02:19:48] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[02:19:48] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[02:19:48] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[02:19:48] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[02:19:48] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[02:19:48] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[02:19:48] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[02:19:48] [INFO] [ScoreManager] Level started with 10 enemies
[02:19:48] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
[02:19:48] [ENEMY] [Enemy1] Registered as sound listener
[02:19:48] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[02:19:48] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
[02:19:48] [ENEMY] [Enemy2] Registered as sound listener
[02:19:48] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[02:19:48] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
[02:19:48] [ENEMY] [Enemy3] Registered as sound listener
[02:19:48] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[02:19:48] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
[02:19:48] [ENEMY] [Enemy4] Registered as sound listener
[02:19:48] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[02:19:48] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
[02:19:48] [ENEMY] [Enemy5] Registered as sound listener
[02:19:48] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[02:19:48] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
[02:19:48] [ENEMY] [Enemy6] Registered as sound listener
[02:19:48] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[02:19:48] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
[02:19:48] [ENEMY] [Enemy7] Registered as sound listener
[02:19:48] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[02:19:48] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
[02:19:48] [ENEMY] [Enemy8] Registered as sound listener
[02:19:48] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[02:19:48] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
[02:19:48] [ENEMY] [Enemy9] Registered as sound listener
[02:19:48] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[02:19:48] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
[02:19:48] [ENEMY] [Enemy10] Registered as sound listener
[02:19:48] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[02:19:48] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:19:48] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:19:48] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:19:48] [INFO] [LastChance] Found player: Player
[02:19:48] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:19:48] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:19:48] [INFO] [LastChance] Connected to player Died signal (C#)
[02:19:48] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:19:48] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:19:48] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:19:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:19:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:19:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:19:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1139.435, 1563.917), source=ENEMY (Enemy10), range=1469, listeners=18
[02:19:50] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
[02:19:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[02:19:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:19:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1110.377, 1540.478), source=ENEMY (Enemy10), range=1469, listeners=10
[02:19:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:19:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:19:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.39, 1516.95), source=ENEMY (Enemy10), range=1469, listeners=10
[02:19:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:19:50] [INFO] [LastChance] Threat detected: Bullet
[02:19:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:19:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:19:50] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[02:19:50] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[02:19:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1052.404, 1493.422), source=ENEMY (Enemy10), range=1469, listeners=10
[02:19:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:19:50] [INFO] [LastChance] Threat detected: @Area2D@976
[02:19:50] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:19:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:19:50] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:19:50] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:19:50] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:19:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1023.418, 1469.894), source=ENEMY (Enemy10), range=1469, listeners=10
[02:19:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:19:50] [INFO] [LastChance] Threat detected: @Area2D@978
[02:19:50] [INFO] [LastChance] Triggering last chance effect!
[02:19:50] [INFO] [LastChance] Starting last chance effect:
[02:19:50] [INFO] [LastChance]   - Time will be frozen (except player)
[02:19:50] [INFO] [LastChance]   - Duration: 6.0 real seconds
[02:19:50] [INFO] [LastChance]   - Sepia intensity: 0.70
[02:19:50] [INFO] [LastChance]   - Brightness: 0.60
[02:19:50] [INFO] [LastChance] Pushed bullet @Area2D@978 from distance 120.9 to 200.0
[02:19:50] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[02:19:50] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[02:19:50] [INFO] [LastChance] Skipping player node: Player
[02:19:50] [INFO] [LastChance] Froze existing bullet casing: Casing
[02:19:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@977
[02:19:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@979
[02:19:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@981
[02:19:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@982
[02:19:50] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[02:19:50] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[02:19:50] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[02:19:56] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[02:19:56] [INFO] [LastChance] Ending last chance effect
[02:19:56] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[02:19:56] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=false
[02:19:56] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=false
[02:19:56] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=false
[02:19:56] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[02:19:56] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[02:19:56] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[02:19:56] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[02:19:56] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[02:19:56] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=true
[02:19:56] [ENEMY] [Enemy10] Search mode: COMBAT -> SEARCHING at (450, 1004.444)
[02:19:56] [ENEMY] [Enemy10] SEARCHING started: center=(450, 1004.444), radius=100, waypoints=5
[02:19:56] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[02:19:56] [INFO] [LastChance] All process modes restored
[02:19:56] [INFO] [LastChance] Unfroze bullet casing: Casing
[02:19:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@977
[02:19:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@979
[02:19:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@981
[02:19:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@982
[02:19:56] [INFO] [LastChance] Restored original colors to 5 player sprites
[02:19:56] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[02:19:56] [INFO] [LastChance] Threat detected: @Area2D@978
[02:19:56] [INFO] [LastChance] Effect already used this life
[02:19:56] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:19:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[02:19:57] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[02:19:57] [INFO] [PenultimateHit] Player died - ending penultimate effect
[02:19:57] [INFO] [LastChance] Player died
[02:19:57] [INFO] [LastChance] Threat detected: @Area2D@980
[02:19:57] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:19:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:19:57] [INFO] [LastChance] Threat detected: Bullet
[02:19:57] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:19:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:19:57] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:19:57] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:19:57] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:19:57] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:19:57] [ENEMY] [Enemy1] Death animation component initialized
[02:19:57] [ENEMY] [Enemy2] Death animation component initialized
[02:19:57] [ENEMY] [Enemy3] Death animation component initialized
[02:19:57] [ENEMY] [Enemy4] Death animation component initialized
[02:19:57] [ENEMY] [Enemy5] Death animation component initialized
[02:19:57] [ENEMY] [Enemy6] Death animation component initialized
[02:19:57] [ENEMY] [Enemy7] Death animation component initialized
[02:19:57] [ENEMY] [Enemy8] Death animation component initialized
[02:19:57] [ENEMY] [Enemy9] Death animation component initialized
[02:19:57] [ENEMY] [Enemy10] Death animation component initialized
[02:19:57] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:19:57] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:19:57] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:19:57] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:19:57] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:19:57] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:19:57] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:19:57] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[02:19:57] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[02:19:57] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:19:57] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[02:19:57] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[02:19:57] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[02:19:57] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[02:19:57] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[02:19:57] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[02:19:57] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[02:19:57] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[02:19:57] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[02:19:57] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[02:19:57] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[02:19:57] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[02:19:57] [INFO] [ScoreManager] Level started with 10 enemies
[02:19:57] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[02:19:57] [ENEMY] [Enemy1] Registered as sound listener
[02:19:57] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[02:19:57] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[02:19:57] [ENEMY] [Enemy2] Registered as sound listener
[02:19:57] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[02:19:57] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[02:19:57] [ENEMY] [Enemy3] Registered as sound listener
[02:19:57] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[02:19:57] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[02:19:57] [ENEMY] [Enemy4] Registered as sound listener
[02:19:57] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[02:19:57] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[02:19:57] [ENEMY] [Enemy5] Registered as sound listener
[02:19:57] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[02:19:57] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[02:19:57] [ENEMY] [Enemy6] Registered as sound listener
[02:19:57] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[02:19:57] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[02:19:57] [ENEMY] [Enemy7] Registered as sound listener
[02:19:57] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[02:19:57] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[02:19:57] [ENEMY] [Enemy8] Registered as sound listener
[02:19:57] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[02:19:57] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[02:19:57] [ENEMY] [Enemy9] Registered as sound listener
[02:19:57] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[02:19:57] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[02:19:57] [ENEMY] [Enemy10] Registered as sound listener
[02:19:57] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[02:19:57] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:19:57] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:19:57] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:19:57] [INFO] [LastChance] Found player: Player
[02:19:57] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:19:57] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:19:57] [INFO] [LastChance] Connected to player Died signal (C#)
[02:19:57] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:19:57] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:19:57] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:20:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
[02:20:27] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[02:20:27] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
[02:20:27] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
[02:20:28] [ENEMY] [Enemy3] Memory: medium confidence (0.62) - transitioning to PURSUING
[02:20:28] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[02:20:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1256), shooter_id=1666799635643, bullet_pos=(498.8981, 943.1316)
[02:20:28] [INFO] [Bullet] Using shooter_position, distance=316,66647
[02:20:28] [INFO] [Bullet] Distance to wall: 316,66647 (21,562403% of viewport)
[02:20:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:20:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1256), shooter_id=1666799635643, bullet_pos=(457.13483, 693.6869)
[02:20:28] [INFO] [Bullet] Using shooter_position, distance=562,3584
[02:20:28] [INFO] [Bullet] Distance to wall: 562,3584 (38,29202% of viewport)
[02:20:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:20:28] [INFO] [Bullet] Starting wall penetration at (457.13483, 693.6869)
[02:20:28] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34,650593
[02:20:28] [INFO] [Bullet] Body exited signal received for penetrating body
[02:20:28] [INFO] [Bullet] Exiting penetration at (450.46097, 653.8251) after traveling 35,416668 pixels through wall
[02:20:28] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[02:20:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(694.8868, 961.8645), source=ENEMY (Enemy4), range=1469, listeners=10
[02:20:28] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
[02:20:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(657.0521, 1018.425), shooter_id=1664266275303, bullet_pos=(657.0521, 1018.425)
[02:20:28] [INFO] [Bullet] Using shooter_position, distance=0
[02:20:28] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:20:28] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:20:28] [INFO] [Bullet] Starting wall penetration at (657.0521, 1018.425)
[02:20:28] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.3506202697754
[02:20:28] [INFO] [Bullet] Body exited signal received for penetrating body
[02:20:28] [INFO] [Bullet] Exiting penetration at (626.8306, 1053.984) after traveling 41.6666679382324 pixels through wall
[02:20:28] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:20:28] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:20:28] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:20:28] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:20:28] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:20:28] [ENEMY] [Enemy1] Death animation component initialized
[02:20:28] [ENEMY] [Enemy2] Death animation component initialized
[02:20:28] [ENEMY] [Enemy3] Death animation component initialized
[02:20:28] [ENEMY] [Enemy4] Death animation component initialized
[02:20:28] [ENEMY] [Enemy5] Death animation component initialized
[02:20:28] [ENEMY] [Enemy6] Death animation component initialized
[02:20:28] [ENEMY] [Enemy7] Death animation component initialized
[02:20:28] [ENEMY] [Enemy8] Death animation component initialized
[02:20:28] [ENEMY] [Enemy9] Death animation component initialized
[02:20:28] [ENEMY] [Enemy10] Death animation component initialized
[02:20:28] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:20:28] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:20:28] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:20:28] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:20:28] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:20:28] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:20:28] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:20:28] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[02:20:28] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[02:20:28] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:20:28] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[02:20:28] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[02:20:28] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[02:20:28] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[02:20:28] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[02:20:28] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[02:20:28] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[02:20:28] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[02:20:28] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[02:20:28] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[02:20:28] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[02:20:28] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[02:20:28] [INFO] [ScoreManager] Level started with 10 enemies
[02:20:28] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[02:20:28] [ENEMY] [Enemy1] Registered as sound listener
[02:20:28] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[02:20:28] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[02:20:28] [ENEMY] [Enemy2] Registered as sound listener
[02:20:28] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[02:20:28] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[02:20:28] [ENEMY] [Enemy3] Registered as sound listener
[02:20:28] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[02:20:28] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[02:20:28] [ENEMY] [Enemy4] Registered as sound listener
[02:20:28] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[02:20:28] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[02:20:28] [ENEMY] [Enemy5] Registered as sound listener
[02:20:28] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[02:20:28] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[02:20:28] [ENEMY] [Enemy6] Registered as sound listener
[02:20:28] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[02:20:28] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[02:20:28] [ENEMY] [Enemy7] Registered as sound listener
[02:20:28] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[02:20:28] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[02:20:28] [ENEMY] [Enemy8] Registered as sound listener
[02:20:28] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[02:20:28] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[02:20:28] [ENEMY] [Enemy9] Registered as sound listener
[02:20:28] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[02:20:28] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[02:20:28] [ENEMY] [Enemy10] Registered as sound listener
[02:20:28] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[02:20:28] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:20:28] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:20:28] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:20:28] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:20:28] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:20:28] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:20:28] [INFO] [LastChance] Found player: Player
[02:20:28] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:20:28] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:20:28] [INFO] [LastChance] Connected to player Died signal (C#)
[02:20:31] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:20:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[02:20:31] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[02:20:31] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[02:20:31] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[02:20:31] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:20:31] [INFO] [LastChance] Threat detected: Bullet
[02:20:31] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:20:31] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:20:31] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:20:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(797.9426, 890.3936), source=ENEMY (Enemy4), range=1469, listeners=10
[02:20:31] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[02:20:31] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:20:31] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:20:31] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:20:31] [INFO] [LastChance] Threat detected: @Area2D@1490
[02:20:31] [INFO] [LastChance] Triggering last chance effect!
[02:20:31] [INFO] [LastChance] Starting last chance effect:
[02:20:31] [INFO] [LastChance]   - Time will be frozen (except player)
[02:20:31] [INFO] [LastChance]   - Duration: 6.0 real seconds
[02:20:31] [INFO] [LastChance]   - Sepia intensity: 0.70
[02:20:31] [INFO] [LastChance]   - Brightness: 0.60
[02:20:31] [INFO] [LastChance] Pushed bullet @Area2D@1490 from distance 141.0 to 200.0
[02:20:31] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[02:20:31] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[02:20:31] [INFO] [LastChance] Skipping player node: Player
[02:20:31] [INFO] [LastChance] Froze existing bullet casing: Casing
[02:20:31] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1491
[02:20:31] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[02:20:31] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[02:20:31] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[02:20:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:20:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:20:31] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:20:31] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:20:31] [INFO] [LastChance] Ending last chance effect
[02:20:31] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[02:20:31] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=false
[02:20:31] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=false
[02:20:31] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=false
[02:20:31] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[02:20:31] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[02:20:31] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[02:20:31] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[02:20:31] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[02:20:31] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[02:20:31] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[02:20:31] [INFO] [LastChance] All process modes restored
[02:20:31] [INFO] [LastChance] Restored original colors to 5 player sprites
[02:20:31] [ENEMY] [Enemy1] Death animation component initialized
[02:20:31] [ENEMY] [Enemy2] Death animation component initialized
[02:20:31] [ENEMY] [Enemy3] Death animation component initialized
[02:20:31] [ENEMY] [Enemy4] Death animation component initialized
[02:20:31] [ENEMY] [Enemy5] Death animation component initialized
[02:20:31] [ENEMY] [Enemy6] Death animation component initialized
[02:20:31] [ENEMY] [Enemy7] Death animation component initialized
[02:20:31] [ENEMY] [Enemy8] Death animation component initialized
[02:20:31] [ENEMY] [Enemy9] Death animation component initialized
[02:20:31] [ENEMY] [Enemy10] Death animation component initialized
[02:20:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:20:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:20:31] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:20:31] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:20:31] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:20:31] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:20:31] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:20:31] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[02:20:31] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[02:20:31] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:20:31] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[02:20:31] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[02:20:31] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[02:20:31] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[02:20:31] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[02:20:31] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[02:20:31] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[02:20:31] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[02:20:31] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[02:20:31] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[02:20:31] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[02:20:31] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[02:20:31] [INFO] [ScoreManager] Level started with 10 enemies
[02:20:31] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[02:20:31] [ENEMY] [Enemy1] Registered as sound listener
[02:20:31] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[02:20:31] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[02:20:31] [ENEMY] [Enemy2] Registered as sound listener
[02:20:31] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[02:20:31] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[02:20:31] [ENEMY] [Enemy3] Registered as sound listener
[02:20:31] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[02:20:31] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[02:20:31] [ENEMY] [Enemy4] Registered as sound listener
[02:20:31] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[02:20:31] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[02:20:31] [ENEMY] [Enemy5] Registered as sound listener
[02:20:31] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[02:20:31] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[02:20:31] [ENEMY] [Enemy6] Registered as sound listener
[02:20:31] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[02:20:31] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[02:20:31] [ENEMY] [Enemy7] Registered as sound listener
[02:20:31] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[02:20:31] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[02:20:31] [ENEMY] [Enemy8] Registered as sound listener
[02:20:31] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[02:20:31] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[02:20:31] [ENEMY] [Enemy9] Registered as sound listener
[02:20:31] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[02:20:31] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[02:20:31] [ENEMY] [Enemy10] Registered as sound listener
[02:20:31] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[02:20:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:20:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:20:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:20:31] [INFO] [LastChance] Found player: Player
[02:20:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:20:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:20:31] [INFO] [LastChance] Connected to player Died signal (C#)
[02:20:31] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:20:31] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:20:31] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:20:34] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:20:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[02:20:34] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[02:20:34] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[02:20:34] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[02:20:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:20:34] [INFO] [LastChance] Threat detected: Bullet
[02:20:34] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:20:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:20:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.1316, 701.6346), shooter_id=2419526206957, bullet_pos=(523.5189, 537.7396)
[02:20:34] [INFO] [Bullet] Using shooter_position, distance=208.33332824707
[02:20:34] [INFO] [Bullet] Distance to wall: 208.33332824707 (14.1857994115535% of viewport)
[02:20:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:20:34] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:20:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[02:20:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:20:34] [INFO] [LastChance] Threat detected: @Area2D@1744
[02:20:34] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:20:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:20:34] [ENEMY] [Enemy1] Memory: medium confidence (0.61) - transitioning to PURSUING
[02:20:34] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[02:20:34] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:20:34] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:20:34] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:20:34] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:20:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[02:20:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:20:35] [INFO] [LastChance] Threat detected: @Area2D@1746
[02:20:35] [INFO] [LastChance] Triggering last chance effect!
[02:20:35] [INFO] [LastChance] Starting last chance effect:
[02:20:35] [INFO] [LastChance]   - Time will be frozen (except player)
[02:20:35] [INFO] [LastChance]   - Duration: 6.0 real seconds
[02:20:35] [INFO] [LastChance]   - Sepia intensity: 0.70
[02:20:35] [INFO] [LastChance]   - Brightness: 0.60
[02:20:35] [INFO] [LastChance] Pushed bullet @Area2D@1746 from distance 120.5 to 200.0
[02:20:35] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[02:20:35] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[02:20:35] [INFO] [LastChance] Skipping player node: Player
[02:20:35] [INFO] [LastChance] Froze existing bullet casing: Casing
[02:20:35] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1745
[02:20:35] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1747
[02:20:35] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[02:20:35] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[02:20:35] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[02:20:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:20:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:20:35] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:20:35] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:20:35] [INFO] [LastChance] Ending last chance effect
[02:20:35] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[02:20:35] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=false
[02:20:35] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=false
[02:20:35] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=false
[02:20:35] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[02:20:35] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[02:20:35] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[02:20:35] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[02:20:35] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[02:20:35] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[02:20:35] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[02:20:35] [INFO] [LastChance] All process modes restored
[02:20:35] [INFO] [LastChance] Restored original colors to 5 player sprites
[02:20:35] [ENEMY] [Enemy1] Death animation component initialized
[02:20:35] [ENEMY] [Enemy2] Death animation component initialized
[02:20:35] [ENEMY] [Enemy3] Death animation component initialized
[02:20:35] [ENEMY] [Enemy4] Death animation component initialized
[02:20:35] [ENEMY] [Enemy5] Death animation component initialized
[02:20:35] [ENEMY] [Enemy6] Death animation component initialized
[02:20:35] [ENEMY] [Enemy7] Death animation component initialized
[02:20:35] [ENEMY] [Enemy8] Death animation component initialized
[02:20:35] [ENEMY] [Enemy9] Death animation component initialized
[02:20:35] [ENEMY] [Enemy10] Death animation component initialized
[02:20:35] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:20:35] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:20:35] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:20:35] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:20:35] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:20:35] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:20:35] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:20:35] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[02:20:35] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[02:20:35] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:20:35] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[02:20:35] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[02:20:35] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[02:20:35] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[02:20:35] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[02:20:35] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[02:20:35] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[02:20:35] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[02:20:35] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[02:20:35] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[02:20:35] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[02:20:35] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[02:20:35] [INFO] [ScoreManager] Level started with 10 enemies
[02:20:35] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[02:20:35] [ENEMY] [Enemy1] Registered as sound listener
[02:20:35] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[02:20:35] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[02:20:35] [ENEMY] [Enemy2] Registered as sound listener
[02:20:35] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[02:20:35] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[02:20:35] [ENEMY] [Enemy3] Registered as sound listener
[02:20:35] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[02:20:35] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[02:20:35] [ENEMY] [Enemy4] Registered as sound listener
[02:20:35] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[02:20:35] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[02:20:35] [ENEMY] [Enemy5] Registered as sound listener
[02:20:35] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[02:20:35] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[02:20:35] [ENEMY] [Enemy6] Registered as sound listener
[02:20:35] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[02:20:35] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[02:20:35] [ENEMY] [Enemy7] Registered as sound listener
[02:20:35] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[02:20:35] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[02:20:35] [ENEMY] [Enemy8] Registered as sound listener
[02:20:35] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[02:20:35] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[02:20:35] [ENEMY] [Enemy9] Registered as sound listener
[02:20:35] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[02:20:35] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[02:20:35] [ENEMY] [Enemy10] Registered as sound listener
[02:20:35] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[02:20:35] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:20:35] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:20:35] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:20:35] [INFO] [LastChance] Found player: Player
[02:20:35] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:20:35] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:20:35] [INFO] [LastChance] Connected to player Died signal (C#)
[02:20:35] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:20:35] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:20:35] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:20:38] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:20:38] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:20:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0667, 877.2631), source=ENEMY (Enemy4), range=1469, listeners=20
[02:20:38] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[02:20:38] [ENEMY] [Enemy3] Heard gunshot at (784.0667, 877.2631), source_type=1, intensity=0.11, distance=153
[02:20:38] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
[02:20:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(755.6085, 815.451), shooter_id=2460882045213, bullet_pos=(755.6085, 815.451)
[02:20:38] [INFO] [Bullet] Using shooter_position, distance=0
[02:20:38] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:20:38] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:20:38] [INFO] [Bullet] Starting wall penetration at (755.6085, 815.451)
[02:20:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.9305953979492
[02:20:38] [INFO] [Bullet] Body exited signal received for penetrating body
[02:20:38] [INFO] [Bullet] Exiting penetration at (741.0798, 771.1036) after traveling 41.6666679382324 pixels through wall
[02:20:38] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:20:38] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:20:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0662, 856.6165), source=ENEMY (Enemy4), range=1469, listeners=10
[02:20:38] [ENEMY] [Enemy2] Heard gunshot at (784.0662, 856.6165), source_type=1, intensity=0.01, distance=491
[02:20:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:20:38] [INFO] [LastChance] Threat detected: Bullet
[02:20:38] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:20:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:20:38] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[02:20:38] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:20:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0665, 837.4104), source=ENEMY (Enemy4), range=1469, listeners=10
[02:20:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:20:38] [INFO] [LastChance] Threat detected: @Area2D@2001
[02:20:38] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:20:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:20:38] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:20:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(802.4875, 808.4597), source=ENEMY (Enemy4), range=1469, listeners=10
[02:20:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:20:38] [ENEMY] [Enemy1] Memory: medium confidence (0.60) - transitioning to PURSUING
[02:20:38] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[02:20:38] [INFO] [LastChance] Threat detected: @Area2D@2003
[02:20:38] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:20:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:20:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(761.0599, 792.575), shooter_id=2460882045213, bullet_pos=(590.0731, 62.32588)
[02:20:38] [INFO] [Bullet] Using shooter_position, distance=750.000183105469
[02:20:38] [INFO] [Bullet] Distance to wall: 750.000183105469 (51.0688915963796% of viewport)
[02:20:38] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:20:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(812.1001, 773.3603), source=ENEMY (Enemy4), range=1469, listeners=10
[02:20:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:20:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(761.0599, 792.575), shooter_id=2460882045213, bullet_pos=(519.3603, 230.1175)
[02:20:38] [INFO] [Bullet] Using shooter_position, distance=612.1904296875
[02:20:38] [INFO] [Bullet] Distance to wall: 612.1904296875 (41.6851720763587% of viewport)
[02:20:38] [INFO] [LastChance] Threat detected: @Area2D@2006
[02:20:38] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:20:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:20:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(766.7191, 771.6102), shooter_id=2460882045213, bullet_pos=(659.9122, 29.25409)
[02:20:39] [INFO] [Bullet] Using shooter_position, distance=750.000183105469
[02:20:39] [INFO] [Bullet] Distance to wall: 750.000183105469 (51.0688915963796% of viewport)
[02:20:39] [INFO] [Bullet] Distance-based penetration chance: 87.0862931375571%
[02:20:39] [INFO] [Bullet] Starting wall penetration at (659.9122, 29.25409)
[02:20:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49.440845489502
[02:20:39] [INFO] [Bullet] Body exited signal received for penetrating body
[02:20:39] [INFO] [Bullet] Exiting penetration at (653.2665, -16.93695) after traveling 41.6666679382324 pixels through wall
[02:20:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:20:39] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:20:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(812.3415, 736.0612), source=ENEMY (Enemy4), range=1469, listeners=10
[02:20:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:20:39] [INFO] [LastChance] Threat detected: @Area2D@2010
[02:20:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:20:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:20:39] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[02:20:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(786.928, 742.2139), shooter_id=2460882045213, bullet_pos=(705.074, 38.62582)
[02:20:39] [INFO] [Bullet] Using shooter_position, distance=708.333435058594
[02:20:39] [INFO] [Bullet] Distance to wall: 708.333435058594 (48.2317261034743% of viewport)
[02:20:39] [INFO] [Bullet] Distance-based penetration chance: 90.3963195459467%
[02:20:39] [INFO] [Bullet] Starting wall penetration at (705.074, 38.62582)
[02:20:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.9961700439453
[02:20:39] [INFO] [Bullet] Body exited signal received for penetrating body
[02:20:39] [INFO] [Bullet] Exiting penetration at (699.6813, -7.728222) after traveling 41.6666717529297 pixels through wall
[02:20:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:20:39] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:20:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(815.6229, 709.611), source=ENEMY (Enemy4), range=1469, listeners=10
[02:20:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:20:39] [INFO] [LastChance] Threat detected: @Area2D@2013
[02:20:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:20:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:20:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(801.0953, 706.2075), shooter_id=2460882045213, bullet_pos=(769.4029, 40.29446)
[02:20:39] [INFO] [Bullet] Using shooter_position, distance=666.666809082031
[02:20:39] [INFO] [Bullet] Distance to wall: 666.666809082031 (45.394568922561% of viewport)
[02:20:39] [INFO] [Bullet] Distance-based penetration chance: 93.7063362570122%
[02:20:39] [INFO] [Bullet] Starting wall penetration at (769.4029, 40.29446)
[02:20:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38.3628234863281
[02:20:39] [INFO] [Bullet] Body exited signal received for penetrating body
[02:20:39] [INFO] [Bullet] Exiting penetration at (767.1844, -6.31945) after traveling 41.6666679382324 pixels through wall
[02:20:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:20:39] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:20:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(815.6229, 709.611), source=ENEMY (Enemy4), range=1469, listeners=10
[02:20:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:20:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(826.1019, 669.4185), shooter_id=2460882045213, bullet_pos=(881.4931, 46.87787)
[02:20:39] [INFO] [Bullet] Using shooter_position, distance=625.000061035156
[02:20:39] [INFO] [Bullet] Distance to wall: 625.000061035156 (42.5574034296557% of viewport)
[02:20:39] [INFO] [Bullet] Distance-based penetration chance: 97.0163626654017%
[02:20:39] [INFO] [Bullet] Starting wall penetration at (881.4931, 46.87787)
[02:20:39] [INFO] [LastChance] Threat detected: @Area2D@2016
[02:20:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:20:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:20:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31.7300186157227
[02:20:39] [INFO] [Bullet] Body exited signal received for penetrating body
[02:20:39] [INFO] [Bullet] Exiting penetration at (885.629, 0.394836) after traveling 41.6666717529297 pixels through wall
[02:20:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:20:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(761.0599, 792.575), shooter_id=2460882045213, bullet_pos=(729.1079, 831.7931)
[02:20:39] [INFO] [Bullet] Using shooter_position, distance=50.5865058898926
[02:20:39] [INFO] [Bullet] Distance to wall: 50.5865058898926 (3.44452820642479% of viewport)
[02:20:39] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:20:39] [INFO] [Bullet] Starting wall penetration at (729.1079, 831.7931)
[02:20:39] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:20:39] [INFO] [Bullet] Exiting penetration at (740.6634, 864.9408) after traveling 30.1041698455811 pixels through wall
[02:20:39] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[02:20:39] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:20:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(815.6229, 709.611), source=ENEMY (Enemy4), range=1469, listeners=10
[02:20:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:20:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(839.4498, 645.8703), shooter_id=2460882045213, bullet_pos=(989.7437, 39.20986)
[02:20:39] [INFO] [Bullet] Using shooter_position, distance=625.000122070313
[02:20:39] [INFO] [Bullet] Distance to wall: 625.000122070313 (42.5574075856517% of viewport)
[02:20:39] [INFO] [Bullet] Distance-based penetration chance: 97.0163578167397%
[02:20:39] [INFO] [Bullet] Starting wall penetration at (989.7437, 39.20986)
[02:20:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.2388534545898
[02:20:39] [INFO] [Bullet] Body exited signal received for penetrating body
[02:20:39] [INFO] [Bullet] Exiting penetration at (1000.966, -6.087444) after traveling 41.6666679382324 pixels through wall
[02:20:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:20:39] [INFO] [LastChance] Threat detected: Bullet
[02:20:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:20:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:20:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(848.5057, 650.0349), shooter_id=2460882045213, bullet_pos=(1006.709, 264.5706)
[02:20:39] [INFO] [Bullet] Using shooter_position, distance=416.666687011719
[02:20:39] [INFO] [Bullet] Distance to wall: 416.666687011719 (28.3716009011051% of viewport)
[02:20:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:20:39] [INFO] [Bullet] Starting wall penetration at (1006.709, 264.5706)
[02:20:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 1.12813818454742
[02:20:39] [INFO] [Bullet] Max penetration distance exceeded: 83.3333435058594 >= 48
[02:20:39] [INFO] [Bullet] Body exited signal received for penetrating body
[02:20:39] [INFO] [Bullet] Exiting penetration at (1040.249, 182.8522) after traveling 83.3333435058594 pixels through wall
[02:20:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:20:39] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:20:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(815.6229, 709.611), source=ENEMY (Enemy4), range=1469, listeners=10
[02:20:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:20:39] [INFO] [LastChance] Threat detected: Bullet
[02:20:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:20:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:20:39] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[02:20:39] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[02:20:39] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:20:39] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[02:20:39] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[02:20:39] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[02:20:40] [ENEMY] [Enemy2] FLANKING started: target=(893.4432, 482.3007), side=right, pos=(475.9344, 572.55)
[02:20:40] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[02:20:41] [ENEMY] [Enemy1] FLANKING started: target=(811.1312, 814.1659), side=left, pos=(461.407, 542.7338)
[02:20:41] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[02:20:41] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
[02:20:41] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
[02:20:42] [ENEMY] [Enemy3] FLANKING started: target=(883.2744, 860.0269), side=left, pos=(444.2176, 760.8043)
[02:20:42] [ENEMY] [Enemy3] State: PURSUING -> FLANKING
[02:20:43] [ENEMY] [Enemy4] FLANKING started: target=(975.2453, 473.5657), side=right, pos=(873.3022, 613.6053)
[02:20:43] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[02:20:43] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:20:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1398.329, 675.1365), source=ENEMY (Enemy2), range=1469, listeners=10
[02:20:43] [ENEMY] [Enemy5] Heard gunshot at (1398.329, 675.1365), source_type=1, intensity=0.01, distance=444
[02:20:43] [ENEMY] [Enemy7] Heard gunshot at (1398.329, 675.1365), source_type=1, intensity=0.03, distance=309
[02:20:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=1, below_threshold=6
[02:20:44] [ENEMY] [Enemy2] State: FLANKING -> COMBAT
[02:20:44] [ENEMY] [Enemy6] Memory: medium confidence (0.62) - transitioning to PURSUING
[02:20:44] [ENEMY] [Enemy6] State: IDLE -> PURSUING
[02:20:44] [INFO] [LastChance] Threat detected: Bullet
[02:20:44] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:20:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:20:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:20:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1399.034, 681.025), source=ENEMY (Enemy2), range=1469, listeners=10
[02:20:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=1, below_threshold=6
[02:20:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1331.293, 687.491), shooter_id=2460311619571, bullet_pos=(1331.293, 687.491)
[02:20:44] [INFO] [Bullet] Using shooter_position, distance=0
[02:20:44] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:20:44] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:20:44] [INFO] [Bullet] Starting wall penetration at (1331.293, 687.491)
[02:20:44] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:20:44] [INFO] [Bullet] Exiting penetration at (1284.635, 686.5712) after traveling 41.6666717529297 pixels through wall
[02:20:44] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:20:44] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:20:44] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:20:44] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:20:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:20:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1398.782, 680.2421), source=ENEMY (Enemy2), range=1469, listeners=10
[02:20:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=1, below_threshold=6
[02:20:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1331.053, 686.826), shooter_id=2460311619571, bullet_pos=(1331.053, 686.826)
[02:20:44] [INFO] [Bullet] Using shooter_position, distance=0
[02:20:44] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:20:44] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:20:44] [INFO] [Bullet] Starting wall penetration at (1331.053, 686.826)
[02:20:44] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:20:44] [INFO] [Bullet] Exiting penetration at (1284.394, 685.9874) after traveling 41.6666717529297 pixels through wall
[02:20:44] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:20:44] [ENEMY] [Enemy4] State: FLANKING -> RETREATING
[02:20:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:20:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1397.83, 677.6763), source=ENEMY (Enemy2), range=1469, listeners=10
[02:20:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=1, below_threshold=6
[02:20:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1330.14, 684.6472), shooter_id=2460311619571, bullet_pos=(1330.14, 684.6472)
[02:20:44] [INFO] [Bullet] Using shooter_position, distance=0
[02:20:44] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:20:44] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:20:44] [INFO] [Bullet] Starting wall penetration at (1330.14, 684.6472)
[02:20:44] [ENEMY] [Enemy1] State: FLANKING -> RETREATING
[02:20:44] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:20:44] [INFO] [Bullet] Exiting penetration at (1283.477, 684.0753) after traveling 41.6666679382324 pixels through wall
[02:20:44] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:20:44] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[02:20:44] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[02:20:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:20:44] [ENEMY] [Enemy5] State: COMBAT -> PURSUING
[02:20:44] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
[02:20:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:20:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1345.527, 662.5524), source=ENEMY (Enemy2), range=1469, listeners=10
[02:20:44] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[02:20:44] [INFO] [LastChance] Threat detected: Bullet
[02:20:44] [INFO] [LastChance] Triggering last chance effect!
[02:20:44] [INFO] [LastChance] Starting last chance effect:
[02:20:44] [INFO] [LastChance]   - Time will be frozen (except player)
[02:20:44] [INFO] [LastChance]   - Duration: 6.0 real seconds
[02:20:44] [INFO] [LastChance]   - Sepia intensity: 0.70
[02:20:44] [INFO] [LastChance]   - Brightness: 0.60
[02:20:44] [INFO] [LastChance] Pushed bullet Bullet from distance 118.0 to 200.0
[02:20:44] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[02:20:44] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[02:20:44] [INFO] [LastChance] Skipping player node: Player
[02:20:44] [INFO] [LastChance] Froze existing bullet casing: Casing
[02:20:44] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2000
[02:20:44] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2002
[02:20:44] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2004
[02:20:44] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2007
[02:20:44] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2011
[02:20:44] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2014
[02:20:44] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2017
[02:20:44] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2020
[02:20:44] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2023
[02:20:44] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2024
[02:20:44] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2026
[02:20:44] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2027
[02:20:44] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2029
[02:20:44] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2031
[02:20:44] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[02:20:44] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[02:20:44] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[02:20:44] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:20:44] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:20:44] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:20:44] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:20:44] [INFO] [LastChance] Ending last chance effect
[02:20:44] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[02:20:44] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=false
[02:20:44] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=false
[02:20:44] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=false
[02:20:44] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[02:20:44] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[02:20:44] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[02:20:44] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[02:20:44] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[02:20:44] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[02:20:44] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[02:20:44] [INFO] [LastChance] All process modes restored
[02:20:44] [INFO] [LastChance] Restored original colors to 5 player sprites
[02:20:44] [ENEMY] [Enemy1] Death animation component initialized
[02:20:44] [ENEMY] [Enemy2] Death animation component initialized
[02:20:44] [ENEMY] [Enemy3] Death animation component initialized
[02:20:44] [ENEMY] [Enemy4] Death animation component initialized
[02:20:44] [ENEMY] [Enemy5] Death animation component initialized
[02:20:44] [ENEMY] [Enemy6] Death animation component initialized
[02:20:44] [ENEMY] [Enemy7] Death animation component initialized
[02:20:44] [ENEMY] [Enemy8] Death animation component initialized
[02:20:44] [ENEMY] [Enemy9] Death animation component initialized
[02:20:44] [ENEMY] [Enemy10] Death animation component initialized
[02:20:44] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:20:44] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:20:44] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:20:44] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:20:44] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:20:44] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:20:44] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:20:44] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[02:20:44] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[02:20:44] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:20:44] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[02:20:44] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[02:20:44] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[02:20:44] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[02:20:44] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[02:20:44] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[02:20:44] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[02:20:44] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[02:20:44] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[02:20:44] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[02:20:44] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[02:20:44] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[02:20:44] [INFO] [ScoreManager] Level started with 10 enemies
[02:20:44] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[02:20:44] [ENEMY] [Enemy1] Registered as sound listener
[02:20:44] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[02:20:44] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[02:20:44] [ENEMY] [Enemy2] Registered as sound listener
[02:20:44] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[02:20:44] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[02:20:44] [ENEMY] [Enemy3] Registered as sound listener
[02:20:44] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[02:20:44] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[02:20:44] [ENEMY] [Enemy4] Registered as sound listener
[02:20:44] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[02:20:44] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[02:20:44] [ENEMY] [Enemy5] Registered as sound listener
[02:20:44] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[02:20:44] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[02:20:44] [ENEMY] [Enemy6] Registered as sound listener
[02:20:44] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[02:20:44] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[02:20:44] [ENEMY] [Enemy7] Registered as sound listener
[02:20:44] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[02:20:44] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[02:20:44] [ENEMY] [Enemy8] Registered as sound listener
[02:20:44] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[02:20:44] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[02:20:44] [ENEMY] [Enemy9] Registered as sound listener
[02:20:44] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[02:20:44] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[02:20:44] [ENEMY] [Enemy10] Registered as sound listener
[02:20:44] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[02:20:44] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:20:44] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:20:44] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:20:44] [INFO] [LastChance] Found player: Player
[02:20:44] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:20:44] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:20:44] [INFO] [LastChance] Connected to player Died signal (C#)
[02:20:44] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:20:44] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:20:44] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:20:48] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:20:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[02:20:48] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[02:20:48] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[02:20:48] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[02:20:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:20:48] [INFO] [LastChance] Threat detected: Bullet
[02:20:48] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:20:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:20:48] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:20:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(757.8943, 714.239), shooter_id=2716633924844, bullet_pos=(1379.301, 223.7393)
[02:20:48] [INFO] [Bullet] Using shooter_position, distance=791.666442871094
[02:20:48] [INFO] [Bullet] Distance to wall: 791.666442871094 (53.9060238413168% of viewport)
[02:20:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(757.8943, 714.239), shooter_id=2716633924844, bullet_pos=(1136.925, 67.56633)
[02:20:48] [INFO] [Bullet] Using shooter_position, distance=749.566223144531
[02:20:48] [INFO] [Bullet] Distance to wall: 749.566223144531 (51.0393424646574% of viewport)
[02:20:48] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[02:20:48] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[02:20:48] [ENEMY] [Enemy1] Memory: medium confidence (0.76) - transitioning to PURSUING
[02:20:48] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[02:20:48] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[02:20:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(757.8943, 714.239), shooter_id=2716633924844, bullet_pos=(974.9625, 210.0701)
[02:20:49] [INFO] [Bullet] Using shooter_position, distance=548.912475585938
[02:20:49] [INFO] [Bullet] Distance to wall: 548.912475585938 (37.3764598236859% of viewport)
[02:20:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:20:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(757.8943, 714.239), shooter_id=2716633924844, bullet_pos=(827.1602, 61.30178)
[02:20:49] [INFO] [Bullet] Using shooter_position, distance=656.600952148438
[02:20:49] [INFO] [Bullet] Distance to wall: 656.600952148438 (44.7091662144738% of viewport)
[02:20:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(757.8943, 714.239), shooter_id=2716633924844, bullet_pos=(519.4941, 375.8588)
[02:20:49] [INFO] [Bullet] Using shooter_position, distance=413.927307128906
[02:20:49] [INFO] [Bullet] Distance to wall: 413.927307128906 (28.185071487609% of viewport)
[02:20:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:20:49] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
[02:20:49] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[02:20:49] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[02:20:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(757.8943, 714.239), shooter_id=2716633924844, bullet_pos=(910.6996, 693.8914)
[02:20:49] [INFO] [Bullet] Using shooter_position, distance=154.154098510742
[02:20:49] [INFO] [Bullet] Distance to wall: 154.154098510742 (10.4966360319883% of viewport)
[02:20:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:20:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(757.8943, 714.239), shooter_id=2716633924844, bullet_pos=(760.9224, 861.8013)
[02:20:50] [INFO] [Bullet] Using shooter_position, distance=147.593383789063
[02:20:50] [INFO] [Bullet] Distance to wall: 147.593383789063 (10.0499049024986% of viewport)
[02:20:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:20:50] [INFO] [Bullet] Starting wall penetration at (760.9224, 861.8013)
[02:20:50] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[02:20:50] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:20:50] [INFO] [Bullet] Exiting penetration at (747.1335, 877.2596) after traveling 15.7145624160767 pixels through wall
[02:20:50] [INFO] [Bullet] Damage multiplier after penetration: 0.0140625
[02:20:50] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[02:20:50] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[02:20:50] [ENEMY] [Enemy2] FLANKING started: target=(870.188, 489.6649), side=right, pos=(495.4348, 625.3549)
[02:20:50] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[02:20:52] [ENEMY] [Enemy1] State: SUPPRESSED -> IN_COVER
[02:20:52] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
[02:20:52] [ENEMY] [Enemy3] FLANKING started: target=(952.9377, 472.1683), side=right, pos=(870.0642, 624.3469)
[02:20:52] [ENEMY] [Enemy3] State: PURSUING -> FLANKING
[02:20:52] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
[02:20:52] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
[02:20:53] [ENEMY] [Enemy1] FLANKING started: target=(786.8982, 785.0431), side=left, pos=(456.5407, 434.3517)
[02:20:53] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[02:20:54] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:20:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1397.615, 665.3334), source=ENEMY (Enemy3), range=1469, listeners=10
[02:20:54] [ENEMY] [Enemy5] Heard gunshot at (1397.615, 665.3334), source_type=1, intensity=0.01, distance=437
[02:20:54] [ENEMY] [Enemy7] Heard gunshot at (1397.615, 665.3334), source_type=1, intensity=0.02, distance=317
[02:20:54] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=1, below_threshold=6
[02:20:54] [ENEMY] [Enemy3] State: FLANKING -> COMBAT
[02:20:54] [INFO] [LastChance] Threat detected: Bullet
[02:20:54] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:20:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:20:54] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:20:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1369.74, 659.4913), source=ENEMY (Enemy3), range=1469, listeners=10
[02:20:54] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=1, below_threshold=6
[02:20:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[02:20:54] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[02:20:54] [INFO] [LastChance] Threat detected: @Area2D@2291
[02:20:54] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:20:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:20:54] [ENEMY] [Enemy2] State: FLANKING -> RETREATING
[02:20:54] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[02:20:54] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:20:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1335.634, 663.9338), source=ENEMY (Enemy3), range=1469, listeners=10
[02:20:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=1, below_threshold=5
[02:20:54] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[02:20:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:20:54] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:20:54] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:20:54] [INFO] [LastChance] Threat detected: Bullet
[02:20:54] [INFO] [LastChance] Triggering last chance effect!
[02:20:54] [INFO] [LastChance] Starting last chance effect:
[02:20:54] [INFO] [LastChance]   - Time will be frozen (except player)
[02:20:54] [INFO] [LastChance]   - Duration: 6.0 real seconds
[02:20:54] [INFO] [LastChance]   - Sepia intensity: 0.70
[02:20:54] [INFO] [LastChance]   - Brightness: 0.60
[02:20:54] [INFO] [LastChance] Pushed bullet Bullet from distance 149.7 to 200.0
[02:20:54] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[02:20:54] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[02:20:54] [INFO] [LastChance] Skipping player node: Player
[02:20:54] [INFO] [LastChance] Froze existing bullet casing: Casing
[02:20:54] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2290
[02:20:54] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2292
[02:20:54] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2293
[02:20:54] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[02:20:54] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[02:20:54] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[02:20:55] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:20:55] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:20:55] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:20:55] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:20:55] [INFO] [LastChance] Ending last chance effect
[02:20:55] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[02:20:55] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=false
[02:20:55] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=false
[02:20:55] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=false
[02:20:55] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[02:20:55] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[02:20:55] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[02:20:55] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[02:20:55] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[02:20:55] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[02:20:55] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[02:20:55] [INFO] [LastChance] All process modes restored
[02:20:55] [INFO] [LastChance] Restored original colors to 5 player sprites
[02:20:55] [ENEMY] [Enemy1] Death animation component initialized
[02:20:55] [ENEMY] [Enemy2] Death animation component initialized
[02:20:55] [ENEMY] [Enemy3] Death animation component initialized
[02:20:55] [ENEMY] [Enemy4] Death animation component initialized
[02:20:55] [ENEMY] [Enemy5] Death animation component initialized
[02:20:55] [ENEMY] [Enemy6] Death animation component initialized
[02:20:55] [ENEMY] [Enemy7] Death animation component initialized
[02:20:55] [ENEMY] [Enemy8] Death animation component initialized
[02:20:55] [ENEMY] [Enemy9] Death animation component initialized
[02:20:55] [ENEMY] [Enemy10] Death animation component initialized
[02:20:55] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:20:55] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:20:55] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:20:55] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:20:55] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:20:55] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:20:55] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:20:55] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[02:20:55] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[02:20:55] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:20:55] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[02:20:55] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[02:20:55] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[02:20:55] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[02:20:55] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[02:20:55] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[02:20:55] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[02:20:55] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[02:20:55] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[02:20:55] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[02:20:55] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[02:20:55] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[02:20:55] [INFO] [ScoreManager] Level started with 10 enemies
[02:20:55] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[02:20:55] [ENEMY] [Enemy1] Registered as sound listener
[02:20:55] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[02:20:55] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[02:20:55] [ENEMY] [Enemy2] Registered as sound listener
[02:20:55] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[02:20:55] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[02:20:55] [ENEMY] [Enemy3] Registered as sound listener
[02:20:55] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[02:20:55] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[02:20:55] [ENEMY] [Enemy4] Registered as sound listener
[02:20:55] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[02:20:55] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[02:20:55] [ENEMY] [Enemy5] Registered as sound listener
[02:20:55] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[02:20:55] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[02:20:55] [ENEMY] [Enemy6] Registered as sound listener
[02:20:55] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[02:20:55] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[02:20:55] [ENEMY] [Enemy7] Registered as sound listener
[02:20:55] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[02:20:55] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[02:20:55] [ENEMY] [Enemy8] Registered as sound listener
[02:20:55] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[02:20:55] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[02:20:55] [ENEMY] [Enemy9] Registered as sound listener
[02:20:55] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[02:20:55] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[02:20:55] [ENEMY] [Enemy10] Registered as sound listener
[02:20:55] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[02:20:55] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:20:55] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:20:55] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:20:55] [INFO] [LastChance] Found player: Player
[02:20:55] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:20:55] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:20:55] [INFO] [LastChance] Connected to player Died signal (C#)
[02:20:55] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:20:55] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:20:55] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:21:03] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[02:21:03] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[02:21:03] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[02:21:03] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[02:21:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:03] [INFO] [LastChance] Threat detected: Bullet
[02:21:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:03] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:21:03] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:21:03] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:21:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:03] [INFO] [LastChance] Threat detected: Bullet
[02:21:03] [INFO] [LastChance] Triggering last chance effect!
[02:21:03] [INFO] [LastChance] Starting last chance effect:
[02:21:03] [INFO] [LastChance]   - Time will be frozen (except player)
[02:21:03] [INFO] [LastChance]   - Duration: 6.0 real seconds
[02:21:03] [INFO] [LastChance]   - Sepia intensity: 0.70
[02:21:03] [INFO] [LastChance]   - Brightness: 0.60
[02:21:03] [INFO] [LastChance] Pushed bullet Bullet from distance 103.2 to 200.0
[02:21:03] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[02:21:03] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[02:21:03] [INFO] [LastChance] Skipping player node: Player
[02:21:03] [INFO] [LastChance] Froze existing bullet casing: Casing
[02:21:03] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2546
[02:21:03] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[02:21:03] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[02:21:03] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[02:21:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:21:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:21:04] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:21:04] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:21:04] [INFO] [LastChance] Ending last chance effect
[02:21:04] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[02:21:04] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=false
[02:21:04] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=false
[02:21:04] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=false
[02:21:04] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[02:21:04] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[02:21:04] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[02:21:04] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[02:21:04] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[02:21:04] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[02:21:04] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[02:21:04] [INFO] [LastChance] All process modes restored
[02:21:04] [INFO] [LastChance] Restored original colors to 5 player sprites
[02:21:04] [ENEMY] [Enemy1] Death animation component initialized
[02:21:04] [ENEMY] [Enemy2] Death animation component initialized
[02:21:04] [ENEMY] [Enemy3] Death animation component initialized
[02:21:04] [ENEMY] [Enemy4] Death animation component initialized
[02:21:04] [ENEMY] [Enemy5] Death animation component initialized
[02:21:04] [ENEMY] [Enemy6] Death animation component initialized
[02:21:04] [ENEMY] [Enemy7] Death animation component initialized
[02:21:04] [ENEMY] [Enemy8] Death animation component initialized
[02:21:04] [ENEMY] [Enemy9] Death animation component initialized
[02:21:04] [ENEMY] [Enemy10] Death animation component initialized
[02:21:04] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:21:04] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:21:04] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:21:04] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:21:04] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:21:04] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:21:04] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:21:04] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[02:21:04] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[02:21:04] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:21:04] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[02:21:04] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[02:21:04] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[02:21:04] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[02:21:04] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[02:21:04] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[02:21:04] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[02:21:04] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[02:21:04] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[02:21:04] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[02:21:04] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[02:21:04] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[02:21:04] [INFO] [ScoreManager] Level started with 10 enemies
[02:21:04] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[02:21:04] [ENEMY] [Enemy1] Registered as sound listener
[02:21:04] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[02:21:04] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[02:21:04] [ENEMY] [Enemy2] Registered as sound listener
[02:21:04] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[02:21:04] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[02:21:04] [ENEMY] [Enemy3] Registered as sound listener
[02:21:04] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[02:21:04] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[02:21:04] [ENEMY] [Enemy4] Registered as sound listener
[02:21:04] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[02:21:04] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[02:21:04] [ENEMY] [Enemy5] Registered as sound listener
[02:21:04] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[02:21:04] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[02:21:04] [ENEMY] [Enemy6] Registered as sound listener
[02:21:04] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[02:21:04] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[02:21:04] [ENEMY] [Enemy7] Registered as sound listener
[02:21:04] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[02:21:04] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[02:21:04] [ENEMY] [Enemy8] Registered as sound listener
[02:21:04] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[02:21:04] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[02:21:04] [ENEMY] [Enemy9] Registered as sound listener
[02:21:04] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[02:21:04] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[02:21:04] [ENEMY] [Enemy10] Registered as sound listener
[02:21:04] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[02:21:04] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:21:04] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:21:04] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:21:04] [INFO] [LastChance] Found player: Player
[02:21:04] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:21:04] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:21:04] [INFO] [LastChance] Connected to player Died signal (C#)
[02:21:04] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:21:04] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:21:04] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:21:06] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[02:21:06] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[02:21:06] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[02:21:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:06] [INFO] [LastChance] Threat detected: Bullet
[02:21:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:06] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[02:21:06] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[02:21:06] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[02:21:06] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[02:21:06] [ENEMY] [Enemy1] Memory: medium confidence (0.62) - transitioning to PURSUING
[02:21:06] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[02:21:06] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:06] [INFO] [LastChance] Threat detected: Bullet
[02:21:06] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:21:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:06] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:21:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(309.5327, 354.7861), source=ENEMY (Enemy1), range=1469, listeners=10
[02:21:06] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=1, below_threshold=3
[02:21:06] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[02:21:06] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[02:21:06] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:06] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(343.8109, 413.5705), shooter_id=3013489985700, bullet_pos=(693.4794, 880.4855)
[02:21:06] [INFO] [Bullet] Using shooter_position, distance=583.333251953125
[02:21:06] [INFO] [Bullet] Distance to wall: 583.333251953125 (39.7202337807543% of viewport)
[02:21:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:06] [INFO] [Bullet] Starting wall penetration at (693.4794, 880.4855)
[02:21:06] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[02:21:06] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.7799301147461
[02:21:06] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:06] [INFO] [Bullet] Exiting penetration at (721.4528, 917.8387) after traveling 41.6666679382324 pixels through wall
[02:21:06] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:06] [ENEMY] [Enemy4] Hit taken, health: 1/2
[02:21:06] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[02:21:06] [INFO] [ImpactEffects] spawn_blood_effect called at (707.5043, 914.0658), dir=(0.599432, 0.800426), lethal=false
[02:21:06] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[02:21:06] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[02:21:06] [INFO] [ImpactEffects] Blood effect spawned at (707.5043, 914.0658) (scale=1)
[02:21:06] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[02:21:06] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[02:21:06] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(635.1906, 729.2552), shooter_id=3014060410433, bullet_pos=(65.70374, 471.7485)
[02:21:06] [INFO] [Bullet] Using shooter_position, distance=625
[02:21:06] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
[02:21:06] [INFO] [Bullet] Distance-based penetration chance: 97.0163675140638%
[02:21:06] [INFO] [Bullet] Starting wall penetration at (65.70374, 471.7485)
[02:21:06] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:21:06] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:21:06] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:21:06] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.67751502990723
[02:21:06] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:06] [INFO] [Bullet] Exiting penetration at (23.18205, 452.5214) after traveling 41.6666679382324 pixels through wall
[02:21:06] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:06] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[02:21:06] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[02:21:06] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(703.0656, 756.8083), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:06] [INFO] [LastChance] Threat detected: Bullet
[02:21:06] [INFO] [LastChance] Triggering last chance effect!
[02:21:06] [INFO] [LastChance] Starting last chance effect:
[02:21:06] [INFO] [LastChance]   - Time will be frozen (except player)
[02:21:06] [INFO] [LastChance]   - Duration: 6.0 real seconds
[02:21:06] [INFO] [LastChance]   - Sepia intensity: 0.70
[02:21:06] [INFO] [LastChance]   - Brightness: 0.60
[02:21:06] [INFO] [LastChance] Pushed bullet Bullet from distance 64.0 to 200.0
[02:21:06] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[02:21:06] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[02:21:06] [INFO] [LastChance] Skipping player node: Player
[02:21:06] [INFO] [LastChance] Froze existing bullet casing: Casing
[02:21:06] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2799
[02:21:06] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2801
[02:21:06] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2802
[02:21:06] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2804
[02:21:06] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2806
[02:21:06] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[02:21:06] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[02:21:06] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[02:21:07] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:21:07] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:21:07] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:21:07] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:21:07] [INFO] [LastChance] Ending last chance effect
[02:21:07] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[02:21:07] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=false
[02:21:07] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=false
[02:21:07] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=false
[02:21:07] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[02:21:07] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[02:21:07] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[02:21:07] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[02:21:07] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[02:21:07] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[02:21:07] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[02:21:07] [INFO] [LastChance] All process modes restored
[02:21:07] [INFO] [LastChance] Restored original colors to 5 player sprites
[02:21:07] [ENEMY] [Enemy1] Death animation component initialized
[02:21:07] [ENEMY] [Enemy2] Death animation component initialized
[02:21:07] [ENEMY] [Enemy3] Death animation component initialized
[02:21:07] [ENEMY] [Enemy4] Death animation component initialized
[02:21:07] [ENEMY] [Enemy5] Death animation component initialized
[02:21:07] [ENEMY] [Enemy6] Death animation component initialized
[02:21:07] [ENEMY] [Enemy7] Death animation component initialized
[02:21:07] [ENEMY] [Enemy8] Death animation component initialized
[02:21:07] [ENEMY] [Enemy9] Death animation component initialized
[02:21:07] [ENEMY] [Enemy10] Death animation component initialized
[02:21:07] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:21:07] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:21:07] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:21:07] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:21:07] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:21:07] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:21:07] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:21:07] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[02:21:07] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[02:21:07] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:21:07] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[02:21:07] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[02:21:07] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[02:21:07] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[02:21:07] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[02:21:07] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[02:21:07] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[02:21:07] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[02:21:07] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[02:21:07] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[02:21:07] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[02:21:07] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[02:21:07] [INFO] [ScoreManager] Level started with 10 enemies
[02:21:07] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[02:21:07] [ENEMY] [Enemy1] Registered as sound listener
[02:21:07] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[02:21:07] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[02:21:07] [ENEMY] [Enemy2] Registered as sound listener
[02:21:07] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[02:21:07] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[02:21:07] [ENEMY] [Enemy3] Registered as sound listener
[02:21:07] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[02:21:07] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[02:21:07] [ENEMY] [Enemy4] Registered as sound listener
[02:21:07] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[02:21:07] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[02:21:07] [ENEMY] [Enemy5] Registered as sound listener
[02:21:07] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[02:21:07] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[02:21:07] [ENEMY] [Enemy6] Registered as sound listener
[02:21:07] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[02:21:07] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[02:21:07] [ENEMY] [Enemy7] Registered as sound listener
[02:21:07] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[02:21:07] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[02:21:07] [ENEMY] [Enemy8] Registered as sound listener
[02:21:07] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[02:21:07] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[02:21:07] [ENEMY] [Enemy9] Registered as sound listener
[02:21:07] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[02:21:07] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[02:21:07] [ENEMY] [Enemy10] Registered as sound listener
[02:21:07] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[02:21:07] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:21:07] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:21:07] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:21:07] [INFO] [LastChance] Found player: Player
[02:21:07] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:21:07] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:21:07] [INFO] [LastChance] Connected to player Died signal (C#)
[02:21:07] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:21:07] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:21:07] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:21:10] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:21:10] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:21:10] [ENEMY] [Enemy2] Memory: high confidence (0.87) - transitioning to PURSUING
[02:21:10] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[02:21:10] [ENEMY] [Enemy3] Memory: medium confidence (0.78) - transitioning to PURSUING
[02:21:10] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[02:21:10] [ENEMY] [Enemy4] Memory: medium confidence (0.70) - transitioning to PURSUING
[02:21:10] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[02:21:10] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[02:21:10] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:21:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(405.176, 559.3267), source=ENEMY (Enemy2), range=1469, listeners=20
[02:21:10] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[02:21:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[02:21:10] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(690.5249, 754.8989), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:10] [INFO] [LastChance] Threat detected: @Area2D@3059
[02:21:10] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:10] [INFO] [LastChance] Threat detected: Bullet
[02:21:10] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:10] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:21:10] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:21:10] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:21:10] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[02:21:10] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[02:21:10] [INFO] [PenultimateHit] Player died - ending penultimate effect
[02:21:10] [INFO] [LastChance] Player died
[02:21:10] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:21:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(423.2919, 591.97), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:10] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[02:21:10] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(657.362, 772.0451), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:10] [INFO] [LastChance] Threat detected: Bullet
[02:21:10] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:11] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:21:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(441.4079, 624.6133), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:11] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[02:21:11] [INFO] [LastChance] Threat detected: Bullet
[02:21:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:11] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[02:21:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(491.1167, 671.0851), shooter_id=3054661274807, bullet_pos=(692.1057, 819.7573)
[02:21:11] [INFO] [Bullet] Using shooter_position, distance=249.999938964844
[02:21:11] [INFO] [Bullet] Distance to wall: 249.999938964844 (17.0229555534678% of viewport)
[02:21:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:11] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:21:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(447.6352, 650.2749), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:11] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[02:21:11] [INFO] [LastChance] Threat detected: @Area2D@3065
[02:21:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:11] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[02:21:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(491.1167, 671.0851), shooter_id=3054661274807, bullet_pos=(525.165, 959.174)
[02:21:11] [INFO] [Bullet] Using shooter_position, distance=290.093902587891
[02:21:11] [INFO] [Bullet] Distance to wall: 290.093902587891 (19.7530272628592% of viewport)
[02:21:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:11] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:21:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(447.6352, 650.2749), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:11] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[02:21:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(491.1167, 671.0851), shooter_id=3054661274807, bullet_pos=(575.6912, 1000.396)
[02:21:11] [INFO] [Bullet] Using shooter_position, distance=339.997467041016
[02:21:11] [INFO] [Bullet] Distance to wall: 339.997467041016 (23.1510527310359% of viewport)
[02:21:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:11] [INFO] [LastChance] Threat detected: @Area2D@3068
[02:21:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(506.477, 684.4545), shooter_id=3054661274807, bullet_pos=(926.5751, 867.7223)
[02:21:11] [INFO] [Bullet] Using shooter_position, distance=458.333404541016
[02:21:11] [INFO] [Bullet] Distance to wall: 458.333404541016 (31.2087643160124% of viewport)
[02:21:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:11] [INFO] [Bullet] Starting wall penetration at (926.5751, 867.7223)
[02:21:11] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[02:21:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.3839988708496
[02:21:11] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:11] [INFO] [Bullet] Exiting penetration at (969.3488, 886.3823) after traveling 41.6666717529297 pixels through wall
[02:21:11] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:11] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:21:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(447.6352, 650.2749), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:11] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[02:21:11] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:21:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(627.0387, 896.8062), source=ENEMY (Enemy4), range=1469, listeners=10
[02:21:11] [ENEMY] [Enemy3] Heard gunshot at (627.0387, 896.8062), source_type=1, intensity=0.45, distance=75
[02:21:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:11] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:21:11] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:21:11] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:21:11] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:21:11] [ENEMY] [Enemy1] Death animation component initialized
[02:21:11] [ENEMY] [Enemy2] Death animation component initialized
[02:21:11] [ENEMY] [Enemy3] Death animation component initialized
[02:21:11] [ENEMY] [Enemy4] Death animation component initialized
[02:21:11] [ENEMY] [Enemy5] Death animation component initialized
[02:21:11] [ENEMY] [Enemy6] Death animation component initialized
[02:21:11] [ENEMY] [Enemy7] Death animation component initialized
[02:21:11] [ENEMY] [Enemy8] Death animation component initialized
[02:21:11] [ENEMY] [Enemy9] Death animation component initialized
[02:21:11] [ENEMY] [Enemy10] Death animation component initialized
[02:21:11] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:21:11] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:21:11] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:21:11] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:21:11] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:21:11] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:21:11] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:21:11] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[02:21:11] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[02:21:11] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:21:11] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[02:21:11] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[02:21:11] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[02:21:11] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[02:21:11] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[02:21:11] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[02:21:11] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[02:21:11] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[02:21:11] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[02:21:11] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[02:21:11] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[02:21:11] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[02:21:11] [INFO] [ScoreManager] Level started with 10 enemies
[02:21:11] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[02:21:11] [ENEMY] [Enemy1] Registered as sound listener
[02:21:11] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[02:21:11] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[02:21:11] [ENEMY] [Enemy2] Registered as sound listener
[02:21:11] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[02:21:11] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[02:21:11] [ENEMY] [Enemy3] Registered as sound listener
[02:21:11] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[02:21:11] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[02:21:11] [ENEMY] [Enemy4] Registered as sound listener
[02:21:11] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[02:21:11] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[02:21:11] [ENEMY] [Enemy5] Registered as sound listener
[02:21:11] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[02:21:11] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[02:21:11] [ENEMY] [Enemy6] Registered as sound listener
[02:21:11] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[02:21:11] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[02:21:11] [ENEMY] [Enemy7] Registered as sound listener
[02:21:11] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[02:21:11] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[02:21:11] [ENEMY] [Enemy8] Registered as sound listener
[02:21:11] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[02:21:11] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[02:21:11] [ENEMY] [Enemy9] Registered as sound listener
[02:21:11] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[02:21:11] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[02:21:11] [ENEMY] [Enemy10] Registered as sound listener
[02:21:11] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[02:21:11] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:21:11] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:21:11] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:21:11] [INFO] [LastChance] Found player: Player
[02:21:11] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:21:11] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:21:11] [INFO] [LastChance] Connected to player Died signal (C#)
[02:21:11] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:21:11] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:21:11] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:21:12] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[02:21:12] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[02:21:12] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[02:21:12] [ENEMY] [Enemy1] Memory: high confidence (0.90) - transitioning to PURSUING
[02:21:12] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[02:21:12] [ENEMY] [Enemy2] Memory: high confidence (0.90) - transitioning to PURSUING
[02:21:12] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[02:21:13] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:13] [INFO] [LastChance] Threat detected: Bullet
[02:21:13] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:13] [INFO] [LastChance] Threat detected: @Area2D@3327
[02:21:13] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:21:13] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[02:21:13] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[02:21:13] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[02:21:13] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:21:13] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[02:21:13] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[02:21:13] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:13] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(697.7055, 914.0658), source=ENEMY (Enemy4), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(632.3522, 758.6345), shooter_id=3109589879700, bullet_pos=(49.06334, 765.837)
[02:21:13] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
[02:21:13] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
[02:21:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:13] [INFO] [Bullet] Starting wall penetration at (49.06334, 765.837)
[02:21:13] [INFO] [LastChance] Threat detected: @Area2D@3329
[02:21:13] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(376.5579, 417.9029), source=ENEMY (Enemy1), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[02:21:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29.6020259857178
[02:21:13] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:13] [INFO] [Bullet] Exiting penetration at (2.40023, 766.4131) after traveling 41.6666679382324 pixels through wall
[02:21:13] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:13] [INFO] [LastChance] Threat detected: @Area2D@3331
[02:21:13] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(451.7598, 643.2666), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[02:21:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(503.6395, 687.3018), shooter_id=3109304665507, bullet_pos=(503.6395, 687.3018)
[02:21:13] [INFO] [Bullet] Using shooter_position, distance=0
[02:21:13] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:21:13] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:21:13] [INFO] [Bullet] Starting wall penetration at (503.6395, 687.3018)
[02:21:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(632.1053, 745.4279), shooter_id=3109589879700, bullet_pos=(468.1949, 715.2426)
[02:21:13] [INFO] [Bullet] Using shooter_position, distance=166.666641235352
[02:21:13] [INFO] [Bullet] Distance to wall: 166.666641235352 (11.3486380746442% of viewport)
[02:21:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:13] [INFO] [Bullet] Starting wall penetration at (468.1949, 715.2426)
[02:21:13] [INFO] [LastChance] Threat detected: @Area2D@3333
[02:21:13] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:21:13] [INFO] [Bullet] Exiting penetration at (422.3, 706.7906) after traveling 41.6666717529297 pixels through wall
[02:21:13] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:13] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:21:13] [INFO] [Bullet] Exiting penetration at (542.4449, 713.2233) after traveling 41.6666717529297 pixels through wall
[02:21:13] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:13] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:13] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(679.1019, 914.0661), source=ENEMY (Enemy4), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:13] [INFO] [LastChance] Threat detected: Bullet
[02:21:13] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [ENEMY] [Enemy2] Hit taken, health: 1/2
[02:21:13] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[02:21:13] [INFO] [ImpactEffects] spawn_blood_effect called at (451.7598, 643.2666), dir=(-0.650927, -0.75914), lethal=false
[02:21:13] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[02:21:13] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[02:21:13] [INFO] [ImpactEffects] Blood effect spawned at (451.7598, 643.2666) (scale=1)
[02:21:13] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(404.781, 441.8418), source=ENEMY (Enemy1), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[02:21:13] [INFO] [LastChance] Threat detected: @Area2D@3339
[02:21:13] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [INFO] [LastChance] Threat detected: @Area2D@3341
[02:21:13] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(451.7598, 643.2666), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[02:21:13] [INFO] [LastChance] Threat detected: Bullet
[02:21:13] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:13] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(679.1019, 914.0661), source=ENEMY (Enemy4), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(639.5264, 858.7093), shooter_id=3109875092321, bullet_pos=(498.2144, 603.5618)
[02:21:13] [INFO] [Bullet] Using shooter_position, distance=291.666534423828
[02:21:13] [INFO] [Bullet] Distance to wall: 291.666534423828 (19.8601106563831% of viewport)
[02:21:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:13] [INFO] [Bullet] Starting wall penetration at (498.2144, 603.5618)
[02:21:13] [INFO] [LastChance] Threat detected: @Area2D@3344
[02:21:13] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:21:13] [INFO] [Bullet] Exiting penetration at (475.6044, 562.7382) after traveling 41.6666717529297 pixels through wall
[02:21:13] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(401.2432, 481.3161), shooter_id=3109019454310, bullet_pos=(673.7681, 997.0757)
[02:21:13] [INFO] [Bullet] Using shooter_position, distance=583.333251953125
[02:21:13] [INFO] [Bullet] Distance to wall: 583.333251953125 (39.7202337807543% of viewport)
[02:21:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:13] [INFO] [Bullet] Starting wall penetration at (673.7681, 997.0757)
[02:21:13] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[02:21:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.2147636413574
[02:21:13] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:13] [INFO] [Bullet] Exiting penetration at (695.5701, 1038.336) after traveling 41.6666679382324 pixels through wall
[02:21:13] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:13] [INFO] [LastChance] Threat detected: @Area2D@3346
[02:21:13] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [ENEMY] [Enemy3] Hit taken, health: 2/3
[02:21:13] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[02:21:13] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.959541, 0.28157), lethal=false
[02:21:13] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[02:21:13] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[02:21:13] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[02:21:13] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(449.477, 644.645), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[02:21:13] [INFO] [LastChance] Threat detected: Bullet
[02:21:13] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(434.195, 503.2048), shooter_id=3109019454310, bullet_pos=(678.3784, 891.0757)
[02:21:13] [INFO] [Bullet] Using shooter_position, distance=458.333190917969
[02:21:13] [INFO] [Bullet] Distance to wall: 458.333190917969 (31.2087497700263% of viewport)
[02:21:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:13] [ENEMY] [Enemy4] Hit taken, health: 2/3
[02:21:13] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[02:21:13] [INFO] [ImpactEffects] spawn_blood_effect called at (679.1019, 914.0661), dir=(0.297093, -0.954849), lethal=false
[02:21:13] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[02:21:13] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[02:21:13] [INFO] [ImpactEffects] Wall found for blood splatter at (686.5899, 890) (dist=25 px)
[02:21:13] [INFO] [ImpactEffects] Blood effect spawned at (679.1019, 914.0661) (scale=1)
[02:21:13] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:13] [INFO] [LastChance] Threat detected: @Area2D@3354
[02:21:13] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(445.8381, 642.1497), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[02:21:13] [INFO] [LastChance] Threat detected: Bullet
[02:21:13] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(647.6656, 853.7142), shooter_id=3109875092321, bullet_pos=(513.6918, 503.4629)
[02:21:13] [INFO] [Bullet] Using shooter_position, distance=374.999969482422
[02:21:13] [INFO] [Bullet] Distance to wall: 374.999969482422 (25.5344374861978% of viewport)
[02:21:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(640.5416, 716.9048), shooter_id=3109589879700, bullet_pos=(302.1005, 473.8646)
[02:21:13] [INFO] [Bullet] Using shooter_position, distance=416.66650390625
[02:21:13] [INFO] [Bullet] Distance to wall: 416.66650390625 (28.371588433117% of viewport)
[02:21:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:13] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(447.2281, 634.2714), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[02:21:13] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[02:21:13] [INFO] [LastChance] Threat detected: @Area2D@3358
[02:21:13] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[02:21:13] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[02:21:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(651.6603, 702.1056), shooter_id=3109589879700, bullet_pos=(521.4492, 539.4774)
[02:21:13] [INFO] [Bullet] Using shooter_position, distance=208.333526611328
[02:21:13] [INFO] [Bullet] Distance to wall: 208.333526611328 (14.1858129185406% of viewport)
[02:21:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:13] [INFO] [Bullet] Starting wall penetration at (521.4492, 539.4774)
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(448.1548, 629.0192), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[02:21:13] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[02:21:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.3486099243164
[02:21:13] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:13] [INFO] [Bullet] Exiting penetration at (492.282, 503.0487) after traveling 41.6666679382324 pixels through wall
[02:21:13] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:13] [INFO] [LastChance] Threat detected: Bullet
[02:21:13] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:13] [INFO] [LastChance] Threat detected: @Area2D@3363
[02:21:13] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.0082, 618.5148), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[02:21:13] [INFO] [LastChance] Threat detected: @Area2D@3365
[02:21:13] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.4715, 615.8887), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(701.7811, 757.7992), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(640.5416, 716.9048), shooter_id=3109589879700, bullet_pos=(50.55677, 614.7968)
[02:21:13] [INFO] [Bullet] Using shooter_position, distance=598.755554199219
[02:21:13] [INFO] [Bullet] Distance to wall: 598.755554199219 (40.770366699804% of viewport)
[02:21:13] [INFO] [LastChance] Threat detected: Bullet
[02:21:13] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
[02:21:13] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[02:21:13] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[02:21:13] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(703.5623, 765.5984), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:13] [INFO] [LastChance] Threat detected: @Area2D@3371
[02:21:13] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(452.3249, 605.3843), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[02:21:13] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[02:21:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(647.6656, 853.7142), shooter_id=3109875092321, bullet_pos=(669.27, 64.81927)
[02:21:13] [INFO] [Bullet] Using shooter_position, distance=789.190673828125
[02:21:13] [INFO] [Bullet] Distance to wall: 789.190673828125 (53.7374441746432% of viewport)
[02:21:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(640.5416, 716.9048), shooter_id=3109589879700, bullet_pos=(153.4946, 686.4426)
[02:21:13] [INFO] [Bullet] Using shooter_position, distance=487.998687744141
[02:21:13] [INFO] [Bullet] Distance to wall: 487.998687744141 (33.228727998959% of viewport)
[02:21:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:13] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[02:21:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(702.4862, 772.2076), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:14] [INFO] [LastChance] Threat detected: @Area2D@3376
[02:21:14] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:14] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[02:21:14] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[02:21:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(675.2704, 695.1272), shooter_id=3109589879700, bullet_pos=(510.0941, 405.5965)
[02:21:14] [INFO] [Bullet] Using shooter_position, distance=333.333465576172
[02:21:14] [INFO] [Bullet] Distance to wall: 333.333465576172 (22.6972886172765% of viewport)
[02:21:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(518.0297, 620.4307), shooter_id=3109304665507, bullet_pos=(934.0759, 643.1645)
[02:21:14] [INFO] [Bullet] Using shooter_position, distance=416.666809082031
[02:21:14] [INFO] [Bullet] Distance to wall: 416.666809082031 (28.3716092130971% of viewport)
[02:21:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:14] [INFO] [Bullet] Starting wall penetration at (934.0759, 643.1645)
[02:21:14] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(693.4325, 777.8412), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 44.7396774291992
[02:21:14] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:14] [INFO] [Bullet] Exiting penetration at (980.673, 645.7107) after traveling 41.6666679382324 pixels through wall
[02:21:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(691.2164, 779.3245), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:14] [INFO] [LastChance] Threat detected: @Area2D@3380
[02:21:14] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:14] [INFO] [LastChance] Threat detected: @Area2D@3382
[02:21:14] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(520.3721, 605.8078), shooter_id=3109304665507, bullet_pos=(934.4565, 652.1255)
[02:21:14] [INFO] [Bullet] Using shooter_position, distance=416.666870117188
[02:21:14] [INFO] [Bullet] Distance to wall: 416.666870117188 (28.3716133690932% of viewport)
[02:21:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:14] [INFO] [Bullet] Starting wall penetration at (934.4565, 652.1255)
[02:21:14] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:21:14] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:21:14] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:21:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(682.9046, 781.6639), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.113582611084
[02:21:14] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[02:21:14] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[02:21:14] [INFO] [PenultimateHit] Player died - ending penultimate effect
[02:21:14] [INFO] [LastChance] Player died
[02:21:14] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:14] [INFO] [Bullet] Exiting penetration at (980.834, 657.3131) after traveling 41.6666641235352 pixels through wall
[02:21:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:14] [ENEMY] [Enemy1] Hit taken, health: 3/4
[02:21:14] [ENEMY] [Enemy1] ImpactEffectsManager found, calling spawn_blood_effect
[02:21:14] [INFO] [ImpactEffects] spawn_blood_effect called at (433.2975, 480.3698), dir=(0.840719, -0.541472), lethal=false
[02:21:14] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[02:21:14] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[02:21:14] [INFO] [ImpactEffects] Wall found for blood splatter at (500, 437.4095) (dist=79 px)
[02:21:14] [INFO] [ImpactEffects] Blood effect spawned at (433.2975, 480.3698) (scale=1)
[02:21:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(682.2396, 700.9768), shooter_id=3109589879700, bullet_pos=(547.2874, 48.11219)
[02:21:14] [INFO] [Bullet] Using shooter_position, distance=666.666564941406
[02:21:14] [INFO] [Bullet] Distance to wall: 666.666564941406 (45.3945522985769% of viewport)
[02:21:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(675.2704, 695.1272), shooter_id=3109589879700, bullet_pos=(767.1997, 60.92727)
[02:21:14] [INFO] [Bullet] Using shooter_position, distance=640.828002929688
[02:21:14] [INFO] [Bullet] Distance to wall: 640.828002929688 (43.635157098273% of viewport)
[02:21:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(518.5013, 617.4857), shooter_id=3109304665507, bullet_pos=(1389.848, 537.6167)
[02:21:14] [INFO] [Bullet] Using shooter_position, distance=874.999755859375
[02:21:14] [INFO] [Bullet] Distance to wall: 874.999755859375 (59.5803423591394% of viewport)
[02:21:14] [INFO] [Bullet] Distance-based penetration chance: 77.1562672476707%
[02:21:14] [INFO] [Bullet] Starting wall penetration at (1389.848, 537.6167)
[02:21:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48.5226364135742
[02:21:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(686.4644, 706.0721), shooter_id=3109589879700, bullet_pos=(567.0229, 50.19226)
[02:21:14] [INFO] [Bullet] Using shooter_position, distance=666.666809082031
[02:21:14] [INFO] [Bullet] Distance to wall: 666.666809082031 (45.394568922561% of viewport)
[02:21:14] [INFO] [Bullet] Distance-based penetration chance: 93.7063362570122%
[02:21:14] [INFO] [Bullet] Starting wall penetration at (567.0229, 50.19226)
[02:21:14] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:14] [INFO] [Bullet] Exiting penetration at (1436.32, 533.357) after traveling 41.6666679382324 pixels through wall
[02:21:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.1752071380615
[02:21:14] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:14] [INFO] [Bullet] Exiting penetration at (558.662, 4.280678) after traveling 41.6666679382324 pixels through wall
[02:21:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(682.2396, 700.9768), shooter_id=3109589879700, bullet_pos=(502.1741, 224.5183)
[02:21:14] [INFO] [Bullet] Using shooter_position, distance=509.348846435547
[02:21:14] [INFO] [Bullet] Distance to wall: 509.348846435547 (34.6824995637368% of viewport)
[02:21:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:14] [INFO] [Bullet] Starting wall penetration at (502.1741, 224.5183)
[02:21:14] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:14] [INFO] [Bullet] Exiting penetration at (492.1605, 263.6749) after traveling 0 pixels through wall
[02:21:14] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[02:21:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(698.9611, 715.5369), shooter_id=3109589879700, bullet_pos=(950.0504, 53.19987)
[02:21:14] [INFO] [Bullet] Using shooter_position, distance=708.333312988281
[02:21:14] [INFO] [Bullet] Distance to wall: 708.333312988281 (48.2317177914822% of viewport)
[02:21:14] [INFO] [Bullet] Distance-based penetration chance: 90.3963292432707%
[02:21:14] [INFO] [Bullet] Starting wall penetration at (950.0504, 53.19987)
[02:21:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.994556427002
[02:21:14] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:14] [INFO] [Bullet] Exiting penetration at (966.5927, 9.563549) after traveling 41.6666717529297 pixels through wall
[02:21:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:14] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:21:14] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:21:14] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:21:14] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:21:14] [ENEMY] [Enemy1] Death animation component initialized
[02:21:14] [ENEMY] [Enemy2] Death animation component initialized
[02:21:14] [ENEMY] [Enemy3] Death animation component initialized
[02:21:14] [ENEMY] [Enemy4] Death animation component initialized
[02:21:14] [ENEMY] [Enemy5] Death animation component initialized
[02:21:14] [ENEMY] [Enemy6] Death animation component initialized
[02:21:14] [ENEMY] [Enemy7] Death animation component initialized
[02:21:14] [ENEMY] [Enemy8] Death animation component initialized
[02:21:14] [ENEMY] [Enemy9] Death animation component initialized
[02:21:14] [ENEMY] [Enemy10] Death animation component initialized
[02:21:14] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:21:14] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:21:14] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:21:14] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:21:14] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:21:14] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:21:14] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:21:14] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[02:21:14] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[02:21:14] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:21:14] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[02:21:14] [INFO] [ScoreManager] Level started with 10 enemies
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[02:21:14] [ENEMY] [Enemy1] Registered as sound listener
[02:21:14] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[02:21:14] [ENEMY] [Enemy2] Registered as sound listener
[02:21:14] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[02:21:14] [ENEMY] [Enemy3] Registered as sound listener
[02:21:14] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[02:21:14] [ENEMY] [Enemy4] Registered as sound listener
[02:21:14] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[02:21:14] [ENEMY] [Enemy5] Registered as sound listener
[02:21:14] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[02:21:14] [ENEMY] [Enemy6] Registered as sound listener
[02:21:14] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[02:21:14] [ENEMY] [Enemy7] Registered as sound listener
[02:21:14] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[02:21:14] [ENEMY] [Enemy8] Registered as sound listener
[02:21:14] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[02:21:14] [ENEMY] [Enemy9] Registered as sound listener
[02:21:14] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[02:21:14] [ENEMY] [Enemy10] Registered as sound listener
[02:21:14] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[02:21:14] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:21:14] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:21:14] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:21:14] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:21:14] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:21:14] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:21:14] [INFO] [LastChance] Found player: Player
[02:21:14] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:21:14] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:21:14] [INFO] [LastChance] Connected to player Died signal (C#)
[02:21:14] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:21:14] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:21:14] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:21:14] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:21:14] [ENEMY] [Enemy1] Death animation component initialized
[02:21:14] [ENEMY] [Enemy2] Death animation component initialized
[02:21:14] [ENEMY] [Enemy3] Death animation component initialized
[02:21:14] [ENEMY] [Enemy4] Death animation component initialized
[02:21:14] [ENEMY] [Enemy5] Death animation component initialized
[02:21:14] [ENEMY] [Enemy6] Death animation component initialized
[02:21:14] [ENEMY] [Enemy7] Death animation component initialized
[02:21:14] [ENEMY] [Enemy8] Death animation component initialized
[02:21:14] [ENEMY] [Enemy9] Death animation component initialized
[02:21:14] [ENEMY] [Enemy10] Death animation component initialized
[02:21:14] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:21:14] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:21:14] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:21:14] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:21:14] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:21:14] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:21:14] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:21:14] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[02:21:14] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[02:21:14] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:21:14] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[02:21:14] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[02:21:14] [INFO] [ScoreManager] Level started with 10 enemies
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[02:21:14] [ENEMY] [Enemy1] Registered as sound listener
[02:21:14] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[02:21:14] [ENEMY] [Enemy2] Registered as sound listener
[02:21:14] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[02:21:14] [ENEMY] [Enemy3] Registered as sound listener
[02:21:14] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[02:21:14] [ENEMY] [Enemy4] Registered as sound listener
[02:21:14] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[02:21:14] [ENEMY] [Enemy5] Registered as sound listener
[02:21:14] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[02:21:14] [ENEMY] [Enemy6] Registered as sound listener
[02:21:14] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[02:21:14] [ENEMY] [Enemy7] Registered as sound listener
[02:21:14] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[02:21:14] [ENEMY] [Enemy8] Registered as sound listener
[02:21:14] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[02:21:14] [ENEMY] [Enemy9] Registered as sound listener
[02:21:14] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[02:21:14] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[02:21:14] [ENEMY] [Enemy10] Registered as sound listener
[02:21:14] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[02:21:14] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:21:14] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:21:14] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:21:14] [INFO] [LastChance] Found player: Player
[02:21:14] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:21:14] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:21:14] [INFO] [LastChance] Connected to player Died signal (C#)
[02:21:14] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:21:14] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:21:14] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:21:16] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:21:16] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:21:16] [ENEMY] [Enemy2] Memory: high confidence (0.88) - transitioning to PURSUING
[02:21:16] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[02:21:16] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:21:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(402.588, 554.6633), source=ENEMY (Enemy2), range=1469, listeners=30
[02:21:16] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[02:21:16] [ENEMY] [Enemy3] Heard gunshot at (402.588, 554.6633), source_type=1, intensity=0.02, distance=356
[02:21:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[02:21:17] [INFO] [LastChance] Threat detected: Bullet
[02:21:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:17] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:17] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[02:21:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:17] [INFO] [LastChance] Threat detected: @Area2D@3900
[02:21:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(646.3304, 708.1649), shooter_id=3221527465074, bullet_pos=(527.4926, 591.3089)
[02:21:17] [INFO] [Bullet] Using shooter_position, distance=166.666610717773
[02:21:17] [INFO] [Bullet] Distance to wall: 166.666610717773 (11.3486359966462% of viewport)
[02:21:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:17] [INFO] [Bullet] Starting wall penetration at (527.4926, 591.3089)
[02:21:17] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:21:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(420.7039, 587.3066), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[02:21:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8.10920524597168
[02:21:17] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:17] [INFO] [Bullet] Exiting penetration at (494.2179, 558.5892) after traveling 41.6666679382324 pixels through wall
[02:21:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:17] [INFO] [LastChance] Threat detected: @Area2D@3902
[02:21:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:17] [ENEMY] [Enemy3] Hit taken, health: 3/4
[02:21:17] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[02:21:17] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.876566, 0.481282), lethal=false
[02:21:17] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[02:21:17] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[02:21:17] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[02:21:17] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:17] [INFO] [LastChance] Threat detected: Bullet
[02:21:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:17] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[02:21:17] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:21:17] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:17] [INFO] [LastChance] Threat detected: Bullet
[02:21:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:17] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[02:21:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(485.0464, 609.4573), shooter_id=3221242251316, bullet_pos=(932.6625, 707.9927)
[02:21:17] [INFO] [Bullet] Using shooter_position, distance=458.333374023438
[02:21:17] [INFO] [Bullet] Distance to wall: 458.333374023438 (31.2087622380144% of viewport)
[02:21:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:17] [INFO] [Bullet] Starting wall penetration at (932.6625, 707.9927)
[02:21:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 43.2492637634277
[02:21:17] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:17] [INFO] [Bullet] Exiting penetration at (978.238, 718.0254) after traveling 41.6666641235352 pixels through wall
[02:21:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:17] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[02:21:17] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:21:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0669, 840.8445), source=ENEMY (Enemy4), range=1469, listeners=10
[02:21:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(697.6709, 757.6534), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:17] [INFO] [LastChance] Threat detected: @Area2D@3909
[02:21:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:17] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(696.8945, 760.2046), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:17] [INFO] [LastChance] Threat detected: @Area2D@3910
[02:21:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:17] [INFO] [LastChance] Threat detected: @Area2D@3907
[02:21:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:17] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:21:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.066, 824.2488), source=ENEMY (Enemy4), range=1469, listeners=10
[02:21:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(672.8091, 687.6201), shooter_id=3221527465074, bullet_pos=(526.8733, 209.3913)
[02:21:17] [INFO] [Bullet] Using shooter_position, distance=500.000030517578
[02:21:17] [INFO] [Bullet] Distance to wall: 500.000030517578 (34.0459214969257% of viewport)
[02:21:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:17] [INFO] [Bullet] Starting wall penetration at (526.8733, 209.3913)
[02:21:17] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:21:17] [INFO] [Bullet] Exiting penetration at (513.2526, 164.7566) after traveling 41.6666717529297 pixels through wall
[02:21:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:17] [INFO] [LastChance] Threat detected: @Area2D@3912
[02:21:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:17] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[02:21:17] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.6013, 780.4036), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:17] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:21:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(792.3242, 800.5405), source=ENEMY (Enemy4), range=1469, listeners=10
[02:21:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(750.5878, 781.6014), shooter_id=3221812677340, bullet_pos=(523.6979, 244.201)
[02:21:17] [INFO] [Bullet] Using shooter_position, distance=583.333740234375
[02:21:17] [INFO] [Bullet] Distance to wall: 583.333740234375 (39.7202670287225% of viewport)
[02:21:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:17] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[02:21:17] [INFO] [LastChance] Threat detected: Bullet
[02:21:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:17] [INFO] [LastChance] Threat detected: @Area2D@3916
[02:21:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(682.1597, 691.3963), shooter_id=3221527465074, bullet_pos=(514.1666, 46.24296)
[02:21:17] [INFO] [Bullet] Using shooter_position, distance=666.666687011719
[02:21:17] [INFO] [Bullet] Distance to wall: 666.666687011719 (45.3945606105689% of viewport)
[02:21:17] [INFO] [Bullet] Distance-based penetration chance: 93.7063459543362%
[02:21:17] [INFO] [Bullet] Starting wall penetration at (514.1666, 46.24296)
[02:21:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31.9487762451172
[02:21:17] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:17] [INFO] [Bullet] Exiting penetration at (502.407, 1.082218) after traveling 41.666675567627 pixels through wall
[02:21:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(683.2397, 693.5402), shooter_id=3221527465074, bullet_pos=(625.2085, 29.40406)
[02:21:17] [INFO] [Bullet] Using shooter_position, distance=666.666625976563
[02:21:17] [INFO] [Bullet] Distance to wall: 666.666625976563 (45.3945564545729% of viewport)
[02:21:17] [INFO] [Bullet] Distance-based penetration chance: 93.7063508029982%
[02:21:17] [INFO] [Bullet] Starting wall penetration at (625.2085, 29.40406)
[02:21:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49.2725028991699
[02:21:17] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:17] [INFO] [Bullet] Exiting penetration at (621.1463, -17.08548) after traveling 41.6666679382324 pixels through wall
[02:21:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:17] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[02:21:17] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[02:21:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(691.0142, 764.4661), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(750.5878, 781.6014), shooter_id=3221812677340, bullet_pos=(631.7798, 55.45626)
[02:21:17] [INFO] [Bullet] Using shooter_position, distance=735.80029296875
[02:21:17] [INFO] [Bullet] Distance to wall: 735.80029296875 (50.1019949656749% of viewport)
[02:21:17] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:21:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(803.7322, 765.2635), source=ENEMY (Enemy4), range=1469, listeners=10
[02:21:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:17] [INFO] [LastChance] Threat detected: Bullet
[02:21:17] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(756.772, 761.9139), shooter_id=3221812677340, bullet_pos=(536.6829, 44.93372)
[02:21:17] [INFO] [Bullet] Using shooter_position, distance=749.999938964844
[02:21:17] [INFO] [Bullet] Distance to wall: 749.999938964844 (51.0688749723955% of viewport)
[02:21:17] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:21:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(802.5719, 744.2321), source=ENEMY (Enemy4), range=1469, listeners=10
[02:21:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:17] [INFO] [LastChance] Threat detected: @Area2D@3925
[02:21:17] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:17] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(680.1835, 779.8856), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(769.2753, 736.5143), shooter_id=3221812677340, bullet_pos=(607.3281, 46.94249)
[02:21:17] [INFO] [Bullet] Using shooter_position, distance=708.333435058594
[02:21:17] [INFO] [Bullet] Distance to wall: 708.333435058594 (48.2317261034743% of viewport)
[02:21:17] [INFO] [Bullet] Distance-based penetration chance: 90.3963195459467%
[02:21:17] [INFO] [Bullet] Starting wall penetration at (607.3281, 46.94249)
[02:21:17] [INFO] [LastChance] Threat detected: @Area2D@3907
[02:21:17] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31.3176307678223
[02:21:17] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:17] [INFO] [Bullet] Exiting penetration at (596.6587, 1.511868) after traveling 41.6666717529297 pixels through wall
[02:21:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:17] [INFO] [LastChance] Threat detected: @Area2D@3927
[02:21:17] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:17] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:21:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(802.5719, 744.2321), source=ENEMY (Enemy4), range=1469, listeners=10
[02:21:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(714.5952, 700.634), shooter_id=3221527465074, bullet_pos=(785.3169, 37.72937)
[02:21:17] [INFO] [Bullet] Using shooter_position, distance=666.666442871094
[02:21:17] [INFO] [Bullet] Distance to wall: 666.666442871094 (45.3945439865849% of viewport)
[02:21:17] [INFO] [Bullet] Distance-based penetration chance: 93.7063653489843%
[02:21:17] [INFO] [Bullet] Starting wall penetration at (785.3169, 37.72937)
[02:21:17] [INFO] [LastChance] Threat detected: @Area2D@3930
[02:21:17] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:17] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:21:17] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:21:17] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:21:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.9047775268555
[02:21:17] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:17] [INFO] [Bullet] Exiting penetration at (790.2674, -8.673965) after traveling 41.6666641235352 pixels through wall
[02:21:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(784.4746, 699.9968), shooter_id=3221812677340, bullet_pos=(670.3447, 43.17193)
[02:21:17] [INFO] [Bullet] Using shooter_position, distance=666.666687011719
[02:21:17] [INFO] [Bullet] Distance to wall: 666.666687011719 (45.3945606105689% of viewport)
[02:21:17] [INFO] [Bullet] Distance-based penetration chance: 93.7063459543362%
[02:21:17] [INFO] [Bullet] Starting wall penetration at (670.3447, 43.17193)
[02:21:17] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(664.7283, 782.2283), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.3273315429688
[02:21:17] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:17] [INFO] [Bullet] Exiting penetration at (662.3557, -2.805801) after traveling 41.6666679382324 pixels through wall
[02:21:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:18] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:21:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(802.5719, 744.2321), source=ENEMY (Enemy4), range=1469, listeners=10
[02:21:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:18] [INFO] [LastChance] Threat detected: @Area2D@3934
[02:21:18] [INFO] [LastChance] Triggering last chance effect!
[02:21:18] [INFO] [LastChance] Starting last chance effect:
[02:21:18] [INFO] [LastChance]   - Time will be frozen (except player)
[02:21:18] [INFO] [LastChance]   - Duration: 6.0 real seconds
[02:21:18] [INFO] [LastChance]   - Sepia intensity: 0.70
[02:21:18] [INFO] [LastChance]   - Brightness: 0.60
[02:21:18] [INFO] [LastChance] Pushed bullet @Area2D@3934 from distance 117.6 to 200.0
[02:21:18] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[02:21:18] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[02:21:18] [INFO] [LastChance] Skipping player node: Player
[02:21:18] [INFO] [LastChance] Froze existing bullet casing: Casing
[02:21:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3901
[02:21:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3903
[02:21:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3904
[02:21:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3905
[02:21:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3908
[02:21:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3911
[02:21:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3913
[02:21:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3915
[02:21:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3917
[02:21:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3923
[02:21:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3926
[02:21:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3928
[02:21:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3931
[02:21:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3935
[02:21:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3936
[02:21:18] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[02:21:18] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[02:21:18] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[02:21:24] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[02:21:24] [INFO] [LastChance] Ending last chance effect
[02:21:24] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[02:21:24] [ENEMY] [Enemy1] Search mode: PURSUING -> SEARCHING at (547.9138, 700.7237)
[02:21:24] [ENEMY] [Enemy1] SEARCHING started: center=(547.9138, 700.7237), radius=100, waypoints=5
[02:21:24] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[02:21:24] [ENEMY] [Enemy2] Search mode: SUPPRESSED -> SEARCHING at (621.8066, 626.8308)
[02:21:24] [ENEMY] [Enemy2] SEARCHING started: center=(621.8066, 626.8308), radius=100, waypoints=5
[02:21:24] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[02:21:24] [ENEMY] [Enemy3] Search mode: RETREATING -> SEARCHING at (856.5421, 503.0661)
[02:21:24] [ENEMY] [Enemy3] SEARCHING started: center=(856.5421, 503.0661), radius=100, waypoints=5
[02:21:24] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[02:21:24] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (873.0421, 503.0661)
[02:21:24] [ENEMY] [Enemy4] SEARCHING started: center=(873.0421, 503.0661), radius=100, waypoints=5
[02:21:24] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[02:21:24] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[02:21:24] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[02:21:24] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[02:21:24] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[02:21:24] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[02:21:24] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[02:21:24] [INFO] [LastChance] All process modes restored
[02:21:24] [INFO] [LastChance] Unfroze bullet casing: Casing
[02:21:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3901
[02:21:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3903
[02:21:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3904
[02:21:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3905
[02:21:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3908
[02:21:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3911
[02:21:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3913
[02:21:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3915
[02:21:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3917
[02:21:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3923
[02:21:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3926
[02:21:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3928
[02:21:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3931
[02:21:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3935
[02:21:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3936
[02:21:24] [INFO] [LastChance] Restored original colors to 5 player sprites
[02:21:24] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[02:21:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(792.9451, 676.8679), shooter_id=3221812677340, bullet_pos=(776.0289, 52.09685)
[02:21:24] [INFO] [Bullet] Using shooter_position, distance=625
[02:21:24] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
[02:21:24] [INFO] [Bullet] Distance-based penetration chance: 97.0163675140638%
[02:21:24] [INFO] [Bullet] Starting wall penetration at (776.0289, 52.09685)
[02:21:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.5624580383301
[02:21:24] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:24] [INFO] [Bullet] Exiting penetration at (774.7659, 5.447273) after traveling 41.6666717529297 pixels through wall
[02:21:24] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(716.3809, 722.2631), shooter_id=3221527465074, bullet_pos=(1039.906, 45.63064)
[02:21:24] [INFO] [Bullet] Using shooter_position, distance=750.000122070313
[02:21:24] [INFO] [Bullet] Distance to wall: 750.000122070313 (51.0688874403836% of viewport)
[02:21:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(708.7426, 730.3308), shooter_id=3221527465074, bullet_pos=(1001.542, 272.589)
[02:21:24] [INFO] [Bullet] Using shooter_position, distance=543.377258300781
[02:21:24] [INFO] [Bullet] Distance to wall: 543.377258300781 (36.9995567003725% of viewport)
[02:21:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(829.019, 681.5332), shooter_id=3221812677340, bullet_pos=(1016.004, 41.626)
[02:21:24] [INFO] [Bullet] Using shooter_position, distance=666.666931152344
[02:21:24] [INFO] [Bullet] Distance to wall: 666.666931152344 (45.394577234553% of viewport)
[02:21:24] [INFO] [Bullet] Distance-based penetration chance: 93.7063265596881%
[02:21:24] [INFO] [Bullet] Starting wall penetration at (1016.004, 41.626)
[02:21:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.6381378173828
[02:21:24] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:24] [INFO] [Bullet] Exiting penetration at (1029.093, -3.1675) after traveling 41.6666679382324 pixels through wall
[02:21:24] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(708.7426, 730.3308), shooter_id=3221527465074, bullet_pos=(1248.353, 708.3854)
[02:21:24] [INFO] [Bullet] Using shooter_position, distance=540.056274414063
[02:21:24] [INFO] [Bullet] Distance to wall: 540.056274414063 (36.773424800775% of viewport)
[02:21:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:24] [INFO] [Bullet] Starting wall penetration at (1248.353, 708.3854)
[02:21:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.2626304626465
[02:21:24] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:24] [INFO] [Bullet] Exiting penetration at (1268.27, 743.5536) after traveling 35.4166717529297 pixels through wall
[02:21:24] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[02:21:28] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:21:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1053.599, 352.1599), source=ENEMY (Enemy4), range=1469, listeners=10
[02:21:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:28] [ENEMY] [Enemy4] SEARCHING: Player spotted! Transitioning to COMBAT
[02:21:28] [ENEMY] [Enemy4] State: SEARCHING -> COMBAT
[02:21:28] [INFO] [LastChance] Threat detected: Bullet
[02:21:28] [INFO] [LastChance] Effect already used this life
[02:21:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:28] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[02:21:28] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[02:21:28] [INFO] [PenultimateHit] Player died - ending penultimate effect
[02:21:28] [INFO] [LastChance] Player died
[02:21:28] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:21:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1043.39, 382.2351), source=ENEMY (Enemy4), range=1469, listeners=10
[02:21:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:28] [INFO] [LastChance] Threat detected: @Area2D@3942
[02:21:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:28] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:21:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1032.163, 417.8403), source=ENEMY (Enemy4), range=1469, listeners=10
[02:21:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:28] [INFO] [LastChance] Threat detected: Bullet
[02:21:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:29] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:21:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1024.144, 443.2726), source=ENEMY (Enemy4), range=1469, listeners=10
[02:21:29] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:29] [INFO] [LastChance] Threat detected: Bullet
[02:21:29] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:29] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1057.087, 397.2601), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:29] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:29] [ENEMY] [Enemy4] Hit taken, health: 1/2
[02:21:29] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[02:21:29] [INFO] [ImpactEffects] spawn_blood_effect called at (1024.144, 443.2726), dir=(-0.357176, 0.934037), lethal=false
[02:21:29] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[02:21:29] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[02:21:29] [INFO] [ImpactEffects] Blood effect spawned at (1024.144, 443.2726) (scale=1)
[02:21:29] [ENEMY] [Enemy3] SEARCHING: Player spotted! Transitioning to COMBAT
[02:21:29] [ENEMY] [Enemy3] State: SEARCHING -> COMBAT
[02:21:29] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[02:21:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1056.683, 396.6457), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:29] [ENEMY] [Enemy4] Hit taken, health: 0/2
[02:21:29] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[02:21:29] [INFO] [ImpactEffects] spawn_blood_effect called at (1024.144, 443.2726), dir=(-0.131163, 0.991361), lethal=true
[02:21:29] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[02:21:29] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[02:21:29] [INFO] [ImpactEffects] Blood effect spawned at (1024.144, 443.2726) (scale=1.5)
[02:21:29] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[02:21:29] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[02:21:29] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 9)
[02:21:29] [INFO] [DeathAnim] Started - Angle: 97.5 deg, Index: 18
[02:21:29] [ENEMY] [Enemy4] Death animation started with hit direction: (-0.131163, 0.991361)
[02:21:29] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1058.024, 394.3405), source=ENEMY (Enemy3), range=1469, listeners=9
[02:21:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[02:21:29] [INFO] [LastChance] Threat detected: @Area2D@3948
[02:21:29] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:29] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:21:29] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[02:21:29] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:21:29] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:21:29] [ENEMY] [Enemy1] Death animation component initialized
[02:21:29] [ENEMY] [Enemy2] Death animation component initialized
[02:21:29] [ENEMY] [Enemy3] Death animation component initialized
[02:21:29] [ENEMY] [Enemy4] Death animation component initialized
[02:21:29] [ENEMY] [Enemy5] Death animation component initialized
[02:21:29] [ENEMY] [Enemy6] Death animation component initialized
[02:21:29] [ENEMY] [Enemy7] Death animation component initialized
[02:21:29] [ENEMY] [Enemy8] Death animation component initialized
[02:21:29] [ENEMY] [Enemy9] Death animation component initialized
[02:21:29] [ENEMY] [Enemy10] Death animation component initialized
[02:21:29] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:21:29] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:21:29] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:21:29] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:21:29] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:21:29] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:21:29] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:21:29] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[02:21:29] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[02:21:29] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:21:29] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[02:21:29] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[02:21:29] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[02:21:29] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[02:21:29] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[02:21:29] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[02:21:29] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[02:21:29] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[02:21:29] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[02:21:29] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[02:21:29] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[02:21:29] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[02:21:29] [INFO] [ScoreManager] Level started with 10 enemies
[02:21:29] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[02:21:29] [ENEMY] [Enemy1] Registered as sound listener
[02:21:29] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[02:21:29] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[02:21:29] [ENEMY] [Enemy2] Registered as sound listener
[02:21:29] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[02:21:29] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[02:21:29] [ENEMY] [Enemy3] Registered as sound listener
[02:21:29] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[02:21:29] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[02:21:29] [ENEMY] [Enemy4] Registered as sound listener
[02:21:29] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[02:21:29] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[02:21:29] [ENEMY] [Enemy5] Registered as sound listener
[02:21:29] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[02:21:29] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[02:21:29] [ENEMY] [Enemy6] Registered as sound listener
[02:21:29] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[02:21:29] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[02:21:29] [ENEMY] [Enemy7] Registered as sound listener
[02:21:29] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[02:21:29] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[02:21:29] [ENEMY] [Enemy8] Registered as sound listener
[02:21:29] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[02:21:29] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[02:21:29] [ENEMY] [Enemy9] Registered as sound listener
[02:21:29] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[02:21:29] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[02:21:29] [ENEMY] [Enemy10] Registered as sound listener
[02:21:29] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[02:21:29] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:21:29] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:21:29] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:21:29] [INFO] [LastChance] Found player: Player
[02:21:29] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:21:29] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:21:29] [INFO] [LastChance] Connected to player Died signal (C#)
[02:21:29] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:21:29] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:21:29] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:21:35] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[02:21:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=19
[02:21:35] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[02:21:35] [ENEMY] [Enemy2] Heard gunshot at (684.4551, 753.7862), source_type=1, intensity=0.02, distance=350
[02:21:35] [ENEMY] [Enemy4] Heard gunshot at (684.4551, 753.7862), source_type=1, intensity=0.07, distance=186
[02:21:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:35] [INFO] [LastChance] Threat detected: Bullet
[02:21:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:36] [INFO] [LastChance] Threat detected: Bullet
[02:21:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:36] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:21:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:36] [INFO] [LastChance] Threat detected: @Area2D@4212
[02:21:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:36] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:21:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.407, 753.5648), shooter_id=3371096344061, bullet_pos=(285.3967, 714.2797)
[02:21:36] [INFO] [Bullet] Using shooter_position, distance=333.333343505859
[02:21:36] [INFO] [Bullet] Distance to wall: 333.333343505859 (22.6972803052845% of viewport)
[02:21:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:36] [INFO] [Bullet] Starting wall penetration at (285.3967, 714.2797)
[02:21:36] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:21:36] [INFO] [Bullet] Exiting penetration at (239.0553, 708.7797) after traveling 41.6666717529297 pixels through wall
[02:21:36] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:36] [INFO] [LastChance] Threat detected: Bullet
[02:21:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:36] [INFO] [LastChance] Threat detected: Bullet
[02:21:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:36] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[02:21:36] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[02:21:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(632.2754, 710.107), shooter_id=3371096344061, bullet_pos=(517.5798, 589.1827)
[02:21:36] [INFO] [Bullet] Using shooter_position, distance=166.666625976563
[02:21:36] [INFO] [Bullet] Distance to wall: 166.666625976563 (11.3486370356452% of viewport)
[02:21:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:21:36] [INFO] [LastChance] Threat detected: @Area2D@4217
[02:21:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:36] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[02:21:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:36] [INFO] [LastChance] Threat detected: @Area2D@4219
[02:21:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(632.2754, 710.107), shooter_id=3371096344061, bullet_pos=(999.8073, 220.3911)
[02:21:36] [INFO] [Bullet] Using shooter_position, distance=612.291931152344
[02:21:36] [INFO] [Bullet] Distance to wall: 612.291931152344 (41.6920834977447% of viewport)
[02:21:36] [INFO] [LastChance] Threat detected: @Area2D@4221
[02:21:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(659.0405, 690.6618), shooter_id=3371096344061, bullet_pos=(526.6962, 208.4946)
[02:21:36] [INFO] [Bullet] Using shooter_position, distance=500.000213623047
[02:21:36] [INFO] [Bullet] Distance to wall: 500.000213623047 (34.0459339649138% of viewport)
[02:21:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:36] [INFO] [Bullet] Starting wall penetration at (526.6962, 208.4946)
[02:21:36] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:21:36] [INFO] [Bullet] Exiting penetration at (514.3441, 163.4923) after traveling 41.6666679382324 pixels through wall
[02:21:36] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:36] [INFO] [LastChance] Threat detected: @Area2D@4225
[02:21:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:21:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(632.2754, 710.107), shooter_id=3371096344061, bullet_pos=(809.5375, 64.7265)
[02:21:36] [INFO] [Bullet] Using shooter_position, distance=669.281555175781
[02:21:36] [INFO] [Bullet] Distance to wall: 669.281555175781 (45.5726117921785% of viewport)
[02:21:36] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[02:21:36] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[02:21:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(670.8552, 687.1106), shooter_id=3371096344061, bullet_pos=(616.9627, 64.43848)
[02:21:36] [INFO] [Bullet] Using shooter_position, distance=625
[02:21:36] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
[02:21:36] [INFO] [Bullet] Distance-based penetration chance: 97.0163675140638%
[02:21:36] [INFO] [Bullet] Starting wall penetration at (616.9627, 64.43848)
[02:21:36] [INFO] [LastChance] Threat detected: @Area2D@4228
[02:21:36] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 14.1069221496582
[02:21:36] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:36] [INFO] [Bullet] Exiting penetration at (612.9387, 17.94562) after traveling 41.6666679382324 pixels through wall
[02:21:36] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(632.2754, 710.107), shooter_id=3371096344061, bullet_pos=(527.6136, 293.7719)
[02:21:37] [INFO] [Bullet] Using shooter_position, distance=429.289001464844
[02:21:37] [INFO] [Bullet] Distance to wall: 429.289001464844 (29.231077502608% of viewport)
[02:21:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:37] [INFO] [LastChance] Threat detected: @Area2D@4231
[02:21:37] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:37] [INFO] [LastChance] Threat detected: @Area2D@4234
[02:21:37] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:37] [INFO] [LastChance] Threat detected: Bullet
[02:21:37] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:37] [INFO] [LastChance] Threat detected: @Area2D@4236
[02:21:37] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:37] [INFO] [LastChance] Threat detected: Bullet
[02:21:37] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(725.8805, 699.7997), shooter_id=3371096344061, bullet_pos=(982.787, 270.8486)
[02:21:37] [INFO] [Bullet] Using shooter_position, distance=500.000030517578
[02:21:37] [INFO] [Bullet] Distance to wall: 500.000030517578 (34.0459214969257% of viewport)
[02:21:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:37] [INFO] [LastChance] Threat detected: @Area2D@4240
[02:21:37] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(725.8805, 699.7997), shooter_id=3371096344061, bullet_pos=(864.0579, 47.53221)
[02:21:37] [INFO] [Bullet] Using shooter_position, distance=666.742736816406
[02:21:37] [INFO] [Bullet] Distance to wall: 666.742736816406 (45.3997389816134% of viewport)
[02:21:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(732.0614, 705.1627), shooter_id=3371096344061, bullet_pos=(1089.69, 244.3166)
[02:21:37] [INFO] [Bullet] Using shooter_position, distance=583.333190917969
[02:21:37] [INFO] [Bullet] Distance to wall: 583.333190917969 (39.7202296247583% of viewport)
[02:21:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:37] [INFO] [LastChance] Threat detected: @Area2D@4243
[02:21:37] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(732.0614, 705.1627), shooter_id=3371096344061, bullet_pos=(974.2456, 59.98331)
[02:21:37] [INFO] [Bullet] Using shooter_position, distance=689.136840820313
[02:21:37] [INFO] [Bullet] Distance to wall: 689.136840820313 (46.9245947023655% of viewport)
[02:21:37] [INFO] [Bullet] Distance-based penetration chance: 91.9213061805736%
[02:21:37] [INFO] [Bullet] Starting wall penetration at (974.2456, 59.98331)
[02:21:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:21:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[02:21:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:37] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7.39834880828857
[02:21:37] [INFO] [Bullet] Body exited signal received for penetrating body
[02:21:37] [INFO] [Bullet] Exiting penetration at (952.7932, 25.72982) after traveling 35.4166717529297 pixels through wall
[02:21:37] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[02:21:37] [INFO] [LastChance] Threat detected: @Area2D@4247
[02:21:37] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:21:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:21:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(743.886, 720.6417), shooter_id=3371096344061, bullet_pos=(913.0059, 598.9812)
[02:21:37] [INFO] [Bullet] Using shooter_position, distance=208.333374023438
[02:21:37] [INFO] [Bullet] Distance to wall: 208.333374023438 (14.1858025285506% of viewport)
[02:21:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:21:37] [INFO] [Bullet] Starting wall penetration at (913.0059, 598.9812)
[02:21:37] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[02:21:37] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:21:37] [INFO] [Bullet] Exiting penetration at (950.8888, 571.7292) after traveling 41.6666679382324 pixels through wall
[02:21:37] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:39] [ENEMY] [Enemy2] FLANKING started: target=(816.1594, 819.0358), side=left, pos=(457.1163, 559.9784)
[02:21:39] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[02:21:39] [ENEMY] [Enemy1] FLANKING started: target=(787.5024, 786.0018), side=left, pos=(456.6891, 437.7442)
[02:21:39] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[02:21:41] [ENEMY] [Enemy3] FLANKING started: target=(976.123, 473.7062), side=right, pos=(868.1183, 609.2027)
[02:21:41] [ENEMY] [Enemy3] State: PURSUING -> FLANKING
[02:21:43] [ENEMY] [Enemy4] FLANKING started: target=(944.8017, 472.3758), side=right, pos=(876.9453, 632.444)
[02:21:43] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[02:21:44] [ENEMY] [Enemy2] FLANKING stuck (2.0s no progress), target=(931.3967, 871.182), pos=(879.5258, 698.9792), fail_count=1
[02:21:44] [ENEMY] [Enemy2] State: FLANKING -> PURSUING
[02:21:44] [ENEMY] [Enemy1] FLANKING timeout (5.0s), target=(918.1519, 869.361), pos=(882.7907, 703.2024)
[02:21:44] [ENEMY] [Enemy1] State: FLANKING -> PURSUING
[02:21:46] [ENEMY] [Enemy3] FLANKING timeout (5.0s), target=(924.4537, 870.34), pos=(1127.689, 814.7208)
[02:21:46] [ENEMY] [Enemy3] State: FLANKING -> PURSUING
[02:21:47] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[02:21:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(876.868, 616.0517), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(926.3298, 662.7864), shooter_id=3370811131447, bullet_pos=(926.3298, 662.7864)
[02:21:47] [INFO] [Bullet] Using shooter_position, distance=0
[02:21:47] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:21:47] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:21:47] [INFO] [Bullet] Starting wall penetration at (926.3298, 662.7864)
[02:21:47] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:21:47] [INFO] [Bullet] Exiting penetration at (963.7001, 690.737) after traveling 41.6666679382324 pixels through wall
[02:21:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(876.868, 616.0517), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(926.3298, 662.7864), shooter_id=3370811131447, bullet_pos=(926.3298, 662.7864)
[02:21:47] [INFO] [Bullet] Using shooter_position, distance=0
[02:21:47] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:21:47] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:21:47] [INFO] [Bullet] Starting wall penetration at (926.3298, 662.7864)
[02:21:47] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:21:47] [INFO] [Bullet] Exiting penetration at (963.7001, 690.737) after traveling 41.6666679382324 pixels through wall
[02:21:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:47] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
[02:21:47] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[02:21:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(876.868, 616.0517), source=ENEMY (Enemy2), range=1469, listeners=10
[02:21:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:21:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(926.3298, 662.7864), shooter_id=3370811131447, bullet_pos=(926.3298, 662.7864)
[02:21:47] [INFO] [Bullet] Using shooter_position, distance=0
[02:21:47] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:21:47] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:21:47] [INFO] [Bullet] Starting wall penetration at (926.3298, 662.7864)
[02:21:47] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[02:21:47] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:21:47] [INFO] [Bullet] Exiting penetration at (963.7001, 690.737) after traveling 41.6666679382324 pixels through wall
[02:21:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:21:48] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[02:21:48] [ENEMY] [Enemy4] FLANKING timeout (5.0s), target=(924.6844, 870.3719), pos=(1127.572, 814.3013)
[02:21:48] [ENEMY] [Enemy4] State: FLANKING -> PURSUING
[02:21:49] [INFO] ------------------------------------------------------------
[02:21:49] [INFO] GAME LOG ENDED: 2026-01-25T02:21:49
[02:21:49] [INFO] ============================================================
