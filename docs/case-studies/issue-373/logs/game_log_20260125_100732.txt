[10:07:32] [INFO] ============================================================
[10:07:32] [INFO] GAME LOG STARTED
[10:07:32] [INFO] ============================================================
[10:07:32] [INFO] Timestamp: 2026-01-25T10:07:32
[10:07:32] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260125_100732.txt
[10:07:32] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
[10:07:32] [INFO] OS: Windows
[10:07:32] [INFO] Debug build: false
[10:07:32] [INFO] Engine version: 4.3-stable (official)
[10:07:32] [INFO] Project: Godot Top-Down Template
[10:07:32] [INFO] ------------------------------------------------------------
[10:07:32] [INFO] [GameManager] GameManager ready
[10:07:32] [INFO] [ScoreManager] ScoreManager ready
[10:07:32] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[10:07:33] [INFO] [ImpactEffects] Scenes loaded: DustEffect, BloodEffect, SparksEffect, BloodDecal
[10:07:33] [INFO] [ImpactEffects] ImpactEffectsManager ready - FULL VERSION with blood effects enabled
[10:07:33] [INFO] [ImpactEffects] Starting particle shader warmup (Issue #343 fix)...
[10:07:33] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:07:33] [INFO] [PenultimateHit] Saturation shader loaded successfully
[10:07:33] [INFO] [PenultimateHit] Starting shader warmup (Issue #343 fix)...
[10:07:33] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[10:07:33] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[10:07:33] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[10:07:33] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[10:07:33] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[10:07:33] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:07:33] [INFO] [LastChance] Last chance shader loaded successfully
[10:07:33] [INFO] [LastChance] Starting shader warmup (Issue #343 fix)...
[10:07:33] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[10:07:33] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[10:07:33] [INFO] [LastChance]   Sepia intensity: 0.70
[10:07:33] [INFO] [LastChance]   Brightness: 0.60
[10:07:33] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[10:07:33] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[10:07:33] [INFO] [ExperimentalSettings] ExperimentalSettings initialized - FOV enabled: true
[10:07:33] [ENEMY] [Enemy1] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:33] [ENEMY] [Enemy1] [Grenade] Grenade system initialized: 1 grenades
[10:07:33] [ENEMY] [Enemy1] Death animation component initialized
[10:07:33] [ENEMY] [Enemy2] Death animation component initialized
[10:07:33] [ENEMY] [Enemy3] Death animation component initialized
[10:07:33] [ENEMY] [Enemy4] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:33] [ENEMY] [Enemy4] [Grenade] Grenade system initialized: 1 grenades
[10:07:33] [ENEMY] [Enemy4] Death animation component initialized
[10:07:33] [ENEMY] [Enemy5] Death animation component initialized
[10:07:33] [ENEMY] [Enemy6] Death animation component initialized
[10:07:33] [ENEMY] [Enemy7] Death animation component initialized
[10:07:33] [ENEMY] [Enemy8] Death animation component initialized
[10:07:33] [ENEMY] [Enemy9] Death animation component initialized
[10:07:33] [ENEMY] [Enemy10] Death animation component initialized
[10:07:33] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:07:33] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:07:33] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:07:33] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:07:33] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:07:33] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:07:33] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[10:07:33] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[10:07:33] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[10:07:33] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:07:33] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:07:33] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:07:33] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:07:33] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:07:33] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:07:33] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:07:33] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:07:33] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:07:33] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:07:33] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:07:33] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:07:33] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:07:33] [INFO] [ScoreManager] Level started with 10 enemies
[10:07:33] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[10:07:33] [ENEMY] [Enemy1] Registered as sound listener
[10:07:33] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[10:07:33] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[10:07:33] [ENEMY] [Enemy2] Registered as sound listener
[10:07:33] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[10:07:33] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[10:07:33] [ENEMY] [Enemy3] Registered as sound listener
[10:07:33] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[10:07:33] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[10:07:33] [ENEMY] [Enemy4] Registered as sound listener
[10:07:33] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[10:07:33] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[10:07:33] [ENEMY] [Enemy5] Registered as sound listener
[10:07:33] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[10:07:33] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[10:07:33] [ENEMY] [Enemy6] Registered as sound listener
[10:07:33] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[10:07:33] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[10:07:33] [ENEMY] [Enemy7] Registered as sound listener
[10:07:33] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 4, behavior: PATROL, player_found: yes
[10:07:33] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[10:07:33] [ENEMY] [Enemy8] Registered as sound listener
[10:07:33] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[10:07:33] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[10:07:33] [ENEMY] [Enemy9] Registered as sound listener
[10:07:33] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[10:07:33] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[10:07:33] [ENEMY] [Enemy10] Registered as sound listener
[10:07:33] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[10:07:33] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:07:33] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:07:33] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:07:33] [INFO] [PenultimateHit] Shader warmup complete in 140 ms
[10:07:33] [INFO] [LastChance] Shader warmup complete in 138 ms
[10:07:33] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:07:33] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:07:33] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:07:33] [INFO] [LastChance] Found player: Player
[10:07:33] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:07:33] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:07:33] [INFO] [LastChance] Connected to player Died signal (C#)
[10:07:33] [INFO] [ImpactEffects] Particle shader warmup complete: 5 effects warmed up in 362 ms
[10:07:34] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:07:34] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:07:34] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:07:34] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:07:35] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[10:07:35] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[10:07:35] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[10:07:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[10:07:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:36] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[10:07:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:37] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[10:07:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:37] [INFO] [Player.Debug] Debug mode toggled: ON
[10:07:37] [INFO] [GameManager] Debug mode toggled: ON
[10:07:37] [INFO] [Player] Invincibility mode: ON
[10:07:37] [INFO] [GameManager] Invincibility mode toggled: ON
[10:07:37] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[10:07:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:37] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[10:07:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:38] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[10:07:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:38] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[10:07:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:38] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[10:07:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[10:07:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[10:07:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[10:07:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[10:07:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[10:07:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[10:07:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[10:07:41] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[10:07:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:41] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[10:07:41] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[10:07:41] [ENEMY] [Enemy4] PURSUING corner check: angle -113.2°
[10:07:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:07:41] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[10:07:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:07:41] [INFO] [LastChance] Threat detected: Bullet
[10:07:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[10:07:41] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:41] [INFO] [Player] Spawning blood effect at (474.94473, 780.2215), dir=(-0.99021214, 0.1395702), lethal=False (C#)
[10:07:41] [INFO] [ImpactEffects] spawn_blood_effect called at (474.9447, 780.2215), dir=(-0.990212, 0.13957), lethal=false
[10:07:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:41] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:41] [INFO] [ImpactEffects] Blood effect spawned at (474.9447, 780.2215) (scale=1)
[10:07:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:07:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:07:41] [INFO] [LastChance] Threat detected: Bullet
[10:07:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:41] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:41] [INFO] [Player] Spawning blood effect at (474.94473, 787.2215), dir=(-0.9909093, 0.1345316), lethal=False (C#)
[10:07:41] [INFO] [ImpactEffects] spawn_blood_effect called at (474.9447, 787.2215), dir=(-0.990909, 0.134532), lethal=false
[10:07:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:41] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:41] [INFO] [ImpactEffects] Blood effect spawned at (474.9447, 787.2215) (scale=1)
[10:07:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:07:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:07:41] [INFO] [LastChance] Threat detected: Bullet
[10:07:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:41] [ENEMY] [Enemy4] PURSUING corner check: angle -89.5°
[10:07:41] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:07:41] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:07:41] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:07:41] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:07:41] [ENEMY] [Enemy1] Death animation component initialized
[10:07:41] [ENEMY] [Enemy2] Death animation component initialized
[10:07:41] [ENEMY] [Enemy3] Death animation component initialized
[10:07:41] [ENEMY] [Enemy4] Death animation component initialized
[10:07:41] [ENEMY] [Enemy5] Death animation component initialized
[10:07:41] [ENEMY] [Enemy6] Death animation component initialized
[10:07:41] [ENEMY] [Enemy7] Death animation component initialized
[10:07:41] [ENEMY] [Enemy8] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:41] [ENEMY] [Enemy8] [Grenade] Grenade system initialized: 1 grenades
[10:07:41] [ENEMY] [Enemy8] Death animation component initialized
[10:07:41] [ENEMY] [Enemy9] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:41] [ENEMY] [Enemy9] [Grenade] Grenade system initialized: 1 grenades
[10:07:41] [ENEMY] [Enemy9] Death animation component initialized
[10:07:41] [ENEMY] [Enemy10] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:41] [ENEMY] [Enemy10] [Grenade] Grenade system initialized: 1 grenades
[10:07:41] [ENEMY] [Enemy10] Death animation component initialized
[10:07:41] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:07:41] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:07:41] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:07:41] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:07:41] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:07:41] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:07:41] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:07:41] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:07:41] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[10:07:41] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:07:41] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:07:41] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:07:41] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:07:41] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:07:41] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:07:41] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:07:41] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:07:41] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:07:41] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:07:41] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:07:41] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:07:41] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:07:41] [INFO] [ScoreManager] Level started with 10 enemies
[10:07:41] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:07:41] [ENEMY] [Enemy1] Registered as sound listener
[10:07:41] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[10:07:41] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:07:41] [ENEMY] [Enemy2] Registered as sound listener
[10:07:41] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[10:07:41] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:07:41] [ENEMY] [Enemy3] Registered as sound listener
[10:07:41] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[10:07:41] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:07:41] [ENEMY] [Enemy4] Registered as sound listener
[10:07:41] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[10:07:41] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:07:41] [ENEMY] [Enemy5] Registered as sound listener
[10:07:41] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[10:07:41] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:07:41] [ENEMY] [Enemy6] Registered as sound listener
[10:07:41] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[10:07:41] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:07:41] [ENEMY] [Enemy7] Registered as sound listener
[10:07:41] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[10:07:41] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:07:41] [ENEMY] [Enemy8] Registered as sound listener
[10:07:41] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[10:07:41] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:07:41] [ENEMY] [Enemy9] Registered as sound listener
[10:07:41] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[10:07:41] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:07:41] [ENEMY] [Enemy10] Registered as sound listener
[10:07:41] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[10:07:41] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:07:41] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:07:41] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:07:41] [INFO] [LastChance] Found player: Player
[10:07:41] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:07:41] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:07:41] [INFO] [LastChance] Connected to player Died signal (C#)
[10:07:41] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:07:41] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:07:41] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:07:43] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:07:43] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:07:43] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:07:43] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:07:43] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[10:07:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:07:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:07:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:07:44] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[10:07:44] [ENEMY] [Enemy1] Memory: high confidence (0.90) - transitioning to PURSUING
[10:07:44] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[10:07:44] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:07:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:07:44] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[10:07:44] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:07:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:07:44] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:07:44] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:07:44] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:07:44] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:07:44] [ENEMY] [Enemy1] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:44] [ENEMY] [Enemy1] [Grenade] Grenade system initialized: 1 grenades
[10:07:44] [ENEMY] [Enemy1] Death animation component initialized
[10:07:44] [ENEMY] [Enemy2] Death animation component initialized
[10:07:44] [ENEMY] [Enemy3] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:44] [ENEMY] [Enemy3] [Grenade] Grenade system initialized: 1 grenades
[10:07:44] [ENEMY] [Enemy3] Death animation component initialized
[10:07:44] [ENEMY] [Enemy4] Death animation component initialized
[10:07:44] [ENEMY] [Enemy5] Death animation component initialized
[10:07:44] [ENEMY] [Enemy6] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:44] [ENEMY] [Enemy6] [Grenade] Grenade system initialized: 1 grenades
[10:07:44] [ENEMY] [Enemy6] Death animation component initialized
[10:07:44] [ENEMY] [Enemy7] Death animation component initialized
[10:07:44] [ENEMY] [Enemy8] Death animation component initialized
[10:07:44] [ENEMY] [Enemy9] Death animation component initialized
[10:07:44] [ENEMY] [Enemy10] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:44] [ENEMY] [Enemy10] [Grenade] Grenade system initialized: 1 grenades
[10:07:44] [ENEMY] [Enemy10] Death animation component initialized
[10:07:44] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:07:44] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:07:44] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:07:44] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:07:44] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:07:44] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:07:44] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:07:44] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:07:44] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[10:07:44] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:07:44] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:07:44] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:07:44] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:07:44] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:07:44] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:07:44] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:07:44] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:07:44] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:07:44] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:07:44] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:07:44] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:07:44] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:07:44] [INFO] [ScoreManager] Level started with 10 enemies
[10:07:44] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[10:07:44] [ENEMY] [Enemy1] Registered as sound listener
[10:07:44] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[10:07:44] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[10:07:44] [ENEMY] [Enemy2] Registered as sound listener
[10:07:44] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[10:07:44] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[10:07:44] [ENEMY] [Enemy3] Registered as sound listener
[10:07:44] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[10:07:44] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[10:07:44] [ENEMY] [Enemy4] Registered as sound listener
[10:07:44] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[10:07:44] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[10:07:44] [ENEMY] [Enemy5] Registered as sound listener
[10:07:44] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[10:07:44] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[10:07:44] [ENEMY] [Enemy6] Registered as sound listener
[10:07:44] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[10:07:44] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[10:07:44] [ENEMY] [Enemy7] Registered as sound listener
[10:07:44] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[10:07:44] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[10:07:44] [ENEMY] [Enemy8] Registered as sound listener
[10:07:44] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[10:07:44] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[10:07:44] [ENEMY] [Enemy9] Registered as sound listener
[10:07:44] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[10:07:44] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[10:07:44] [ENEMY] [Enemy10] Registered as sound listener
[10:07:44] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[10:07:44] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:07:44] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:07:44] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:07:44] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:07:44] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:07:44] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:07:44] [INFO] [LastChance] Found player: Player
[10:07:44] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:07:44] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:07:44] [INFO] [LastChance] Connected to player Died signal (C#)
[10:07:46] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:07:46] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:07:46] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:07:46] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:07:46] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[10:07:46] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:07:47] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:07:47] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[10:07:47] [ENEMY] [Enemy2] Memory: high confidence (0.90) - transitioning to PURSUING
[10:07:47] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[10:07:47] [ENEMY] [Enemy3] Memory: high confidence (0.81) - transitioning to PURSUING
[10:07:47] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[10:07:47] [ENEMY] [Enemy4] Memory: medium confidence (0.72) - transitioning to PURSUING
[10:07:47] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[10:07:47] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:07:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=30
[10:07:47] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[10:07:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:07:47] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:07:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:07:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:07:47] [INFO] [LastChance] Threat detected: Bullet
[10:07:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:47] [INFO] [LastChance] Threat detected: @Area2D@812
[10:07:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:47] [ENEMY] [Enemy2] PURSUING corner check: angle 149.8°
[10:07:47] [ENEMY] [Enemy3] PURSUING corner check: angle 139.4°
[10:07:47] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[10:07:47] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:07:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(413.4328, 573.0362), source=ENEMY (Enemy2), range=1469, listeners=10
[10:07:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[10:07:47] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:07:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(682.6437, 729.7546), source=ENEMY (Enemy3), range=1469, listeners=10
[10:07:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:07:47] [INFO] [LastChance] Threat detected: @Area2D@814
[10:07:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:47] [INFO] [LastChance] Threat detected: @Area2D@816
[10:07:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.2271, 602.5549), shooter_id=2493731833523, bullet_pos=(683.0869, 834.0251)
[10:07:47] [INFO] [Bullet] Using shooter_position, distance=333.333435058594
[10:07:47] [INFO] [Bullet] Distance to wall: 333.333435058594 (22.6972865392785% of viewport)
[10:07:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:07:47] [INFO] [Bullet] Starting wall penetration at (683.0869, 834.0251)
[10:07:47] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[10:07:47] [INFO] [Bullet] Exiting penetration at (716.6673, 866.4309) after traveling 41.6666679382324 pixels through wall
[10:07:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[10:07:47] [ENEMY] [Enemy2] Hit taken, health: 3/4
[10:07:47] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[10:07:47] [INFO] [ImpactEffects] spawn_blood_effect called at (429.5521, 600.6796), dir=(-0.897413, -0.441192), lethal=false
[10:07:47] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:47] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:47] [INFO] [ImpactEffects] Blood effect spawned at (429.5521, 600.6796) (scale=1)
[10:07:47] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:07:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(432.2386, 605.2869), source=ENEMY (Enemy2), range=1469, listeners=10
[10:07:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[10:07:47] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:07:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(658.345, 701.4112), source=ENEMY (Enemy3), range=1469, listeners=10
[10:07:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[10:07:47] [INFO] [LastChance] Threat detected: Bullet
[10:07:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:47] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:47] [INFO] [Player] Spawning blood effect at (572.3692, 660.0461), dir=(-0.9056458, -0.42403498), lethal=False (C#)
[10:07:47] [INFO] [ImpactEffects] spawn_blood_effect called at (572.3692, 660.0461), dir=(-0.905646, -0.424035), lethal=false
[10:07:47] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:47] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:47] [INFO] [ImpactEffects] Blood effect spawned at (572.3692, 660.0461) (scale=1)
[10:07:47] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:47] [INFO] [Player] Spawning blood effect at (572.96625, 660.29376), dir=(0.92910326, 0.36982042), lethal=False (C#)
[10:07:47] [INFO] [ImpactEffects] spawn_blood_effect called at (572.9662, 660.2938), dir=(0.929103, 0.36982), lethal=false
[10:07:47] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:47] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:47] [INFO] [ImpactEffects] Blood effect spawned at (572.9662, 660.2938) (scale=1)
[10:07:47] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[10:07:47] [ENEMY] [Enemy3] [Grenade] TRIGGER ACTIVE: T2:Pursuit (grenades: 1)
[10:07:47] [ENEMY] [Enemy3] [Grenade] Target too close (37 < 150) - skipping throw
[10:07:47] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[10:07:47] [ENEMY] [Enemy3] [Grenade] Target too close (35 < 150) - skipping throw
[10:07:47] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[10:07:47] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:07:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(451.0445, 637.5378), source=ENEMY (Enemy2), range=1469, listeners=10
[10:07:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[10:07:47] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:07:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(644.1749, 687.9189), source=ENEMY (Enemy3), range=1469, listeners=10
[10:07:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[10:07:47] [INFO] [LastChance] Threat detected: Bullet
[10:07:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:47] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:47] [INFO] [Player] Spawning blood effect at (575.38684, 666.5003), dir=(-0.9476236, -0.31938928), lethal=False (C#)
[10:07:47] [INFO] [ImpactEffects] spawn_blood_effect called at (575.3868, 666.5003), dir=(-0.947624, -0.319389), lethal=false
[10:07:47] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:47] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:47] [INFO] [ImpactEffects] Blood effect spawned at (575.3868, 666.5003) (scale=1)
[10:07:47] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[10:07:47] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:47] [INFO] [Player] Spawning blood effect at (575.758, 668.7352), dir=(0.97698486, 0.21330844), lethal=False (C#)
[10:07:47] [INFO] [ImpactEffects] spawn_blood_effect called at (575.758, 668.7352), dir=(0.976985, 0.213308), lethal=false
[10:07:47] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:47] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:47] [INFO] [ImpactEffects] Blood effect spawned at (575.758, 668.7352) (scale=1)
[10:07:47] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[10:07:47] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[10:07:47] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:07:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(687.9082, 914.0658), source=ENEMY (Enemy4), range=1469, listeners=10
[10:07:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:07:47] [INFO] [LastChance] Threat detected: Bullet
[10:07:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(459.335, 643.3629), source=ENEMY (Enemy2), range=1469, listeners=10
[10:07:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[10:07:47] [INFO] [LastChance] Threat detected: @Area2D@837
[10:07:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:47] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:07:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(459.412, 640.6974), source=ENEMY (Enemy2), range=1469, listeners=10
[10:07:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[10:07:47] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:07:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(655.3264, 711.5537), source=ENEMY (Enemy3), range=1469, listeners=10
[10:07:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[10:07:47] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:07:47] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:07:47] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:07:47] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:07:47] [ENEMY] [Enemy1] Death animation component initialized
[10:07:47] [ENEMY] [Enemy2] Death animation component initialized
[10:07:47] [ENEMY] [Enemy3] Death animation component initialized
[10:07:47] [ENEMY] [Enemy4] Death animation component initialized
[10:07:47] [ENEMY] [Enemy5] Death animation component initialized
[10:07:47] [ENEMY] [Enemy6] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:47] [ENEMY] [Enemy6] [Grenade] Grenade system initialized: 1 grenades
[10:07:47] [ENEMY] [Enemy6] Death animation component initialized
[10:07:47] [ENEMY] [Enemy7] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:47] [ENEMY] [Enemy7] [Grenade] Grenade system initialized: 1 grenades
[10:07:47] [ENEMY] [Enemy7] Death animation component initialized
[10:07:47] [ENEMY] [Enemy8] Death animation component initialized
[10:07:47] [ENEMY] [Enemy9] Death animation component initialized
[10:07:47] [ENEMY] [Enemy10] Death animation component initialized
[10:07:47] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:07:47] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:07:47] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:07:47] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:07:47] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:07:47] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:07:47] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:07:47] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:07:47] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[10:07:47] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:07:47] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:07:47] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:07:47] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:07:47] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:07:47] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:07:47] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:07:47] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:07:47] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:07:47] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:07:47] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:07:47] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:07:47] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:07:47] [INFO] [ScoreManager] Level started with 10 enemies
[10:07:47] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:07:47] [ENEMY] [Enemy1] Registered as sound listener
[10:07:47] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[10:07:47] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:07:47] [ENEMY] [Enemy2] Registered as sound listener
[10:07:47] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[10:07:47] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:07:47] [ENEMY] [Enemy3] Registered as sound listener
[10:07:47] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[10:07:47] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:07:47] [ENEMY] [Enemy4] Registered as sound listener
[10:07:47] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[10:07:47] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:07:47] [ENEMY] [Enemy5] Registered as sound listener
[10:07:47] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[10:07:47] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:07:47] [ENEMY] [Enemy6] Registered as sound listener
[10:07:47] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[10:07:47] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:07:47] [ENEMY] [Enemy7] Registered as sound listener
[10:07:47] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[10:07:47] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:07:47] [ENEMY] [Enemy8] Registered as sound listener
[10:07:47] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[10:07:47] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:07:47] [ENEMY] [Enemy9] Registered as sound listener
[10:07:47] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[10:07:47] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:07:47] [ENEMY] [Enemy10] Registered as sound listener
[10:07:47] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[10:07:47] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:07:47] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:07:47] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:07:47] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:07:47] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:07:47] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:07:47] [INFO] [LastChance] Found player: Player
[10:07:47] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:07:47] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:07:47] [INFO] [LastChance] Connected to player Died signal (C#)
[10:07:49] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:07:49] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:07:49] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[10:07:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4577, 753.7969), source=ENEMY (Enemy3), range=1469, listeners=20
[10:07:49] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[10:07:49] [ENEMY] [Enemy2] Heard gunshot at (684.4577, 753.7969), source_type=1, intensity=0.02, distance=350
[10:07:49] [ENEMY] [Enemy4] Heard gunshot at (684.4577, 753.7969), source_type=1, intensity=0.07, distance=186
[10:07:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:07:49] [INFO] [LastChance] Threat detected: Bullet
[10:07:49] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:49] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:49] [INFO] [Player] Spawning blood effect at (450, 770.16656), dir=(-0.9963883, 0.0849137), lethal=False (C#)
[10:07:49] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 770.1666), dir=(-0.996388, 0.084914), lethal=false
[10:07:49] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:49] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:49] [INFO] [ImpactEffects] Blood effect spawned at (450, 770.1666) (scale=1)
[10:07:49] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:07:49] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:07:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4577, 753.7969), source=ENEMY (Enemy3), range=1469, listeners=10
[10:07:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:07:49] [INFO] [LastChance] Threat detected: Bullet
[10:07:49] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:49] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:49] [INFO] [Player] Spawning blood effect at (450, 779.11096), dir=(-0.99730176, 0.07341187), lethal=False (C#)
[10:07:49] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 779.111), dir=(-0.997302, 0.073412), lethal=false
[10:07:49] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:49] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:49] [INFO] [ImpactEffects] Blood effect spawned at (450, 779.111) (scale=1)
[10:07:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4577, 753.7969), source=ENEMY (Enemy3), range=1469, listeners=10
[10:07:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:07:49] [INFO] [LastChance] Threat detected: Bullet
[10:07:49] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:49] [ENEMY] [Enemy1] Memory: medium confidence (0.60) - transitioning to PURSUING
[10:07:49] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[10:07:49] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:49] [INFO] [Player] Spawning blood effect at (450, 787.27765), dir=(-0.99241835, 0.122905634), lethal=False (C#)
[10:07:49] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 787.2776), dir=(-0.992418, 0.122906), lethal=false
[10:07:49] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:49] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:49] [INFO] [ImpactEffects] Blood effect spawned at (450, 787.2776) (scale=1)
[10:07:49] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[10:07:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4577, 753.7969), source=ENEMY (Enemy3), range=1469, listeners=10
[10:07:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:07:49] [INFO] [LastChance] Threat detected: Bullet
[10:07:49] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:49] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:49] [INFO] [Player] Spawning blood effect at (450, 787.3332), dir=(-0.98992443, 0.14159662), lethal=False (C#)
[10:07:49] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 787.3332), dir=(-0.989924, 0.141597), lethal=false
[10:07:49] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:49] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:49] [INFO] [ImpactEffects] Blood effect spawned at (450, 787.3332) (scale=1)
[10:07:49] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[10:07:49] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:07:49] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:07:49] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:07:49] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:07:49] [ENEMY] [Enemy1] Death animation component initialized
[10:07:49] [ENEMY] [Enemy2] Death animation component initialized
[10:07:49] [ENEMY] [Enemy3] Death animation component initialized
[10:07:49] [ENEMY] [Enemy4] Death animation component initialized
[10:07:49] [ENEMY] [Enemy5] Death animation component initialized
[10:07:49] [ENEMY] [Enemy6] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:49] [ENEMY] [Enemy6] [Grenade] Grenade system initialized: 1 grenades
[10:07:49] [ENEMY] [Enemy6] Death animation component initialized
[10:07:49] [ENEMY] [Enemy7] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:49] [ENEMY] [Enemy7] [Grenade] Grenade system initialized: 1 grenades
[10:07:49] [ENEMY] [Enemy7] Death animation component initialized
[10:07:49] [ENEMY] [Enemy8] Death animation component initialized
[10:07:49] [ENEMY] [Enemy9] Death animation component initialized
[10:07:49] [ENEMY] [Enemy10] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:49] [ENEMY] [Enemy10] [Grenade] Grenade system initialized: 1 grenades
[10:07:49] [ENEMY] [Enemy10] Death animation component initialized
[10:07:49] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:07:49] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:07:49] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:07:49] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:07:49] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:07:49] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:07:49] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:07:49] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:07:49] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[10:07:49] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:07:49] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:07:49] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:07:49] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:07:49] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:07:49] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:07:49] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:07:49] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:07:49] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:07:49] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:07:49] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:07:49] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:07:49] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:07:49] [INFO] [ScoreManager] Level started with 10 enemies
[10:07:49] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:07:49] [ENEMY] [Enemy1] Registered as sound listener
[10:07:49] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[10:07:49] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:07:49] [ENEMY] [Enemy2] Registered as sound listener
[10:07:49] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[10:07:49] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:07:49] [ENEMY] [Enemy3] Registered as sound listener
[10:07:49] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[10:07:49] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:07:49] [ENEMY] [Enemy4] Registered as sound listener
[10:07:49] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[10:07:49] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:07:49] [ENEMY] [Enemy5] Registered as sound listener
[10:07:49] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[10:07:49] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:07:49] [ENEMY] [Enemy6] Registered as sound listener
[10:07:49] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[10:07:49] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:07:49] [ENEMY] [Enemy7] Registered as sound listener
[10:07:49] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[10:07:49] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:07:49] [ENEMY] [Enemy8] Registered as sound listener
[10:07:49] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[10:07:49] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:07:49] [ENEMY] [Enemy9] Registered as sound listener
[10:07:49] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[10:07:49] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:07:49] [ENEMY] [Enemy10] Registered as sound listener
[10:07:49] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[10:07:49] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:07:49] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:07:49] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:07:49] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:07:49] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:07:49] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:07:49] [INFO] [LastChance] Found player: Player
[10:07:49] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:07:49] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:07:49] [INFO] [LastChance] Connected to player Died signal (C#)
[10:07:51] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:07:51] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:07:51] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:07:51] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:07:52] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:07:52] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:07:52] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:07:52] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:07:52] [ENEMY] [Enemy1] Death animation component initialized
[10:07:52] [ENEMY] [Enemy2] Death animation component initialized
[10:07:52] [ENEMY] [Enemy3] Death animation component initialized
[10:07:52] [ENEMY] [Enemy4] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:52] [ENEMY] [Enemy4] [Grenade] Grenade system initialized: 1 grenades
[10:07:52] [ENEMY] [Enemy4] Death animation component initialized
[10:07:52] [ENEMY] [Enemy5] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:52] [ENEMY] [Enemy5] [Grenade] Grenade system initialized: 1 grenades
[10:07:52] [ENEMY] [Enemy5] Death animation component initialized
[10:07:52] [ENEMY] [Enemy6] Death animation component initialized
[10:07:52] [ENEMY] [Enemy7] Death animation component initialized
[10:07:52] [ENEMY] [Enemy8] Death animation component initialized
[10:07:52] [ENEMY] [Enemy9] Death animation component initialized
[10:07:52] [ENEMY] [Enemy10] Death animation component initialized
[10:07:52] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:07:52] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:07:52] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:07:52] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:07:52] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:07:52] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:07:52] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:07:52] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:07:52] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[10:07:52] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:07:52] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:07:52] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:07:52] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:07:52] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:07:52] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:07:52] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:07:52] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:07:52] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:07:52] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:07:52] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:07:52] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:07:52] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:07:52] [INFO] [ScoreManager] Level started with 10 enemies
[10:07:52] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[10:07:52] [ENEMY] [Enemy1] Registered as sound listener
[10:07:52] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[10:07:52] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[10:07:52] [ENEMY] [Enemy2] Registered as sound listener
[10:07:52] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[10:07:52] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[10:07:52] [ENEMY] [Enemy3] Registered as sound listener
[10:07:52] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[10:07:52] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[10:07:52] [ENEMY] [Enemy4] Registered as sound listener
[10:07:52] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[10:07:52] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[10:07:52] [ENEMY] [Enemy5] Registered as sound listener
[10:07:52] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[10:07:52] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[10:07:52] [ENEMY] [Enemy6] Registered as sound listener
[10:07:52] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[10:07:52] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[10:07:52] [ENEMY] [Enemy7] Registered as sound listener
[10:07:52] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[10:07:52] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[10:07:52] [ENEMY] [Enemy8] Registered as sound listener
[10:07:52] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[10:07:52] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[10:07:52] [ENEMY] [Enemy9] Registered as sound listener
[10:07:52] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[10:07:52] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[10:07:52] [ENEMY] [Enemy10] Registered as sound listener
[10:07:52] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[10:07:52] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:07:52] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:07:52] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:07:52] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:07:52] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:07:52] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:07:52] [INFO] [LastChance] Found player: Player
[10:07:52] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:07:52] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:07:52] [INFO] [LastChance] Connected to player Died signal (C#)
[10:07:53] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:07:53] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:07:53] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:07:53] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:07:54] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[10:07:54] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:07:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=30
[10:07:54] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[10:07:54] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[10:07:54] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[10:07:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:07:54] [INFO] [LastChance] Threat detected: Bullet
[10:07:54] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:54] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[10:07:54] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:54] [INFO] [Player] Spawning blood effect at (586.9195, 586.0467), dir=(-0.6127505, -0.7902764), lethal=False (C#)
[10:07:54] [INFO] [ImpactEffects] spawn_blood_effect called at (586.9195, 586.0467), dir=(-0.61275, -0.790276), lethal=false
[10:07:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:54] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:54] [INFO] [ImpactEffects] Blood effect spawned at (586.9195, 586.0467) (scale=1)
[10:07:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:07:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:07:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:07:54] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:07:54] [ENEMY] [Enemy1] Death animation component initialized
[10:07:54] [ENEMY] [Enemy2] Death animation component initialized
[10:07:54] [ENEMY] [Enemy3] Death animation component initialized
[10:07:54] [ENEMY] [Enemy4] Death animation component initialized
[10:07:54] [ENEMY] [Enemy5] Death animation component initialized
[10:07:54] [ENEMY] [Enemy6] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:54] [ENEMY] [Enemy6] [Grenade] Grenade system initialized: 1 grenades
[10:07:54] [ENEMY] [Enemy6] Death animation component initialized
[10:07:54] [ENEMY] [Enemy7] Death animation component initialized
[10:07:54] [ENEMY] [Enemy8] Death animation component initialized
[10:07:54] [ENEMY] [Enemy9] Death animation component initialized
[10:07:54] [ENEMY] [Enemy10] Death animation component initialized
[10:07:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:07:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:07:54] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:07:54] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:07:54] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:07:54] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:07:54] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:07:54] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:07:54] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[10:07:54] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:07:54] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:07:54] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:07:54] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:07:54] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:07:54] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:07:54] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:07:54] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:07:54] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:07:54] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:07:54] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:07:54] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:07:54] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:07:54] [INFO] [ScoreManager] Level started with 10 enemies
[10:07:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:07:54] [ENEMY] [Enemy1] Registered as sound listener
[10:07:54] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[10:07:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:07:54] [ENEMY] [Enemy2] Registered as sound listener
[10:07:54] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[10:07:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:07:54] [ENEMY] [Enemy3] Registered as sound listener
[10:07:54] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[10:07:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:07:54] [ENEMY] [Enemy4] Registered as sound listener
[10:07:54] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[10:07:54] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:07:54] [ENEMY] [Enemy5] Registered as sound listener
[10:07:54] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[10:07:54] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:07:54] [ENEMY] [Enemy6] Registered as sound listener
[10:07:54] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[10:07:54] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:07:54] [ENEMY] [Enemy7] Registered as sound listener
[10:07:54] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[10:07:54] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:07:54] [ENEMY] [Enemy8] Registered as sound listener
[10:07:54] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[10:07:54] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:07:54] [ENEMY] [Enemy9] Registered as sound listener
[10:07:54] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[10:07:54] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:07:54] [ENEMY] [Enemy10] Registered as sound listener
[10:07:54] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[10:07:54] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:07:54] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:07:54] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:07:54] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:07:54] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:07:54] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:07:54] [INFO] [LastChance] Found player: Player
[10:07:54] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:07:54] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:07:54] [INFO] [LastChance] Connected to player Died signal (C#)
[10:07:56] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:07:56] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:07:56] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:07:56] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:07:56] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[10:07:57] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[10:07:57] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[10:07:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[10:07:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:58] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[10:07:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:58] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[10:07:58] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:07:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[10:07:58] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[10:07:58] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[10:07:58] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[10:07:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:07:58] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:07:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(800, 900), source=ENEMY (Enemy4), range=1469, listeners=10
[10:07:58] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[10:07:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:58] [INFO] [LastChance] Threat detected: Bullet
[10:07:58] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:58] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:58] [INFO] [LastChance] Threat detected: @Area2D@1941
[10:07:58] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:58] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:58] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:07:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[10:07:58] [ENEMY] [Enemy1] Heard gunshot at (400, 550), source_type=1, intensity=0.05, distance=224
[10:07:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:07:58] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:58] [INFO] [Player] Spawning blood effect at (857.91626, 791.8829), dir=(0.3980753, -0.91735274), lethal=False (C#)
[10:07:58] [INFO] [ImpactEffects] spawn_blood_effect called at (857.9163, 791.8829), dir=(0.398075, -0.917353), lethal=false
[10:07:58] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:58] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:58] [INFO] [ImpactEffects] Blood effect spawned at (857.9163, 791.8829) (scale=1)
[10:07:58] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:07:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:07:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:07:58] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:07:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(800, 900), source=ENEMY (Enemy4), range=1469, listeners=10
[10:07:58] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[10:07:58] [INFO] [LastChance] Threat detected: Bullet
[10:07:58] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:58] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:58] [INFO] [LastChance] Threat detected: @Area2D@1946
[10:07:58] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:58] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:58] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:07:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(428.4753, 564.5974), source=ENEMY (Enemy2), range=1469, listeners=10
[10:07:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:07:58] [ENEMY] [Enemy3] Hit taken, health: 3/4
[10:07:58] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[10:07:58] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.881872, 0.47149), lethal=false
[10:07:58] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:58] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:58] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[10:07:58] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:58] [INFO] [Player] Spawning blood effect at (895.9984, 791.8829), dir=(0.61991537, -0.78466874), lethal=False (C#)
[10:07:58] [INFO] [ImpactEffects] spawn_blood_effect called at (895.9984, 791.8829), dir=(0.619915, -0.784669), lethal=false
[10:07:58] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:58] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:58] [INFO] [ImpactEffects] Wall found for blood splatter at (912, 771.6286) (dist=25 px)
[10:07:58] [INFO] [ImpactEffects] Blood effect spawned at (895.9984, 791.8829) (scale=1)
[10:07:58] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:58] [INFO] [Player] Spawning blood effect at (895.9994, 791.8829), dir=(0.9754244, 0.22033438), lethal=False (C#)
[10:07:58] [INFO] [ImpactEffects] spawn_blood_effect called at (895.9994, 791.8829), dir=(0.975424, 0.220334), lethal=false
[10:07:58] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:58] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:58] [INFO] [ImpactEffects] Wall found for blood splatter at (912, 795.4972) (dist=16 px)
[10:07:59] [INFO] [ImpactEffects] Blood effect spawned at (895.9994, 791.8829) (scale=1)
[10:07:59] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[10:07:59] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:07:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:07:59] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:07:59] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:07:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(800, 900), source=ENEMY (Enemy4), range=1469, listeners=10
[10:07:59] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[10:07:59] [INFO] [LastChance] Threat detected: Bullet
[10:07:59] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:59] [INFO] [LastChance] Threat detected: @Area2D@1956
[10:07:59] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:59] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:07:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.9084, 587.6758), source=ENEMY (Enemy2), range=1469, listeners=10
[10:07:59] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[10:07:59] [INFO] [LastChance] Threat detected: @Area2D@1948
[10:07:59] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:59] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:59] [INFO] [Player] Spawning blood effect at (895.9994, 791.8829), dir=(0.66395915, -0.7477689), lethal=False (C#)
[10:07:59] [INFO] [ImpactEffects] spawn_blood_effect called at (895.9994, 791.8829), dir=(0.663959, -0.747769), lethal=false
[10:07:59] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:59] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:59] [INFO] [ImpactEffects] Wall found for blood splatter at (912, 773.8625) (dist=24 px)
[10:07:59] [INFO] [ImpactEffects] Blood effect spawned at (895.9994, 791.8829) (scale=1)
[10:07:59] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:59] [INFO] [Player] Spawning blood effect at (895.9994, 791.8829), dir=(0.97792184, 0.20897093), lethal=False (C#)
[10:07:59] [INFO] [ImpactEffects] spawn_blood_effect called at (895.9994, 791.8829), dir=(0.977922, 0.208971), lethal=false
[10:07:59] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:59] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:59] [INFO] [ImpactEffects] Wall found for blood splatter at (912, 795.302) (dist=16 px)
[10:07:59] [INFO] [ImpactEffects] Blood effect spawned at (895.9994, 791.8829) (scale=1)
[10:07:59] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[10:07:59] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:59] [INFO] [Player] Spawning blood effect at (895.9994, 791.8829), dir=(0.89746094, 0.4410939), lethal=False (C#)
[10:07:59] [INFO] [ImpactEffects] spawn_blood_effect called at (895.9994, 791.8829), dir=(0.897461, 0.441094), lethal=false
[10:07:59] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:59] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:59] [INFO] [ImpactEffects] Wall found for blood splatter at (912, 799.747) (dist=17 px)
[10:07:59] [INFO] [ImpactEffects] Blood effect spawned at (895.9994, 791.8829) (scale=1)
[10:07:59] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:07:59] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:07:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(697.9265, 751.6768), source=ENEMY (Enemy3), range=1469, listeners=10
[10:07:59] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[10:07:59] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:07:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(800, 900), source=ENEMY (Enemy4), range=1469, listeners=10
[10:07:59] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[10:07:59] [INFO] [LastChance] Threat detected: Bullet
[10:07:59] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:59] [INFO] [LastChance] Threat detected: @Area2D@1979
[10:07:59] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:59] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:07:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(480.5426, 614.4055), source=ENEMY (Enemy2), range=1469, listeners=10
[10:07:59] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[10:07:59] [INFO] [LastChance] Threat detected: @Area2D@1959
[10:07:59] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:07:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:07:59] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:07:59] [INFO] [Player] Spawning blood effect at (895.9994, 791.8829), dir=(0.66395915, -0.7477689), lethal=False (C#)
[10:07:59] [INFO] [ImpactEffects] spawn_blood_effect called at (895.9994, 791.8829), dir=(0.663959, -0.747769), lethal=false
[10:07:59] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:07:59] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:07:59] [INFO] [ImpactEffects] Wall found for blood splatter at (912, 773.8625) (dist=24 px)
[10:07:59] [INFO] [ImpactEffects] Blood effect spawned at (895.9994, 791.8829) (scale=1)
[10:07:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(690.7247, 754.8181), source=ENEMY (Enemy3), range=1469, listeners=10
[10:07:59] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[10:07:59] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:07:59] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:07:59] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:07:59] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:07:59] [ENEMY] [Enemy1] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:59] [ENEMY] [Enemy1] [Grenade] Grenade system initialized: 1 grenades
[10:07:59] [ENEMY] [Enemy1] Death animation component initialized
[10:07:59] [ENEMY] [Enemy2] Death animation component initialized
[10:07:59] [ENEMY] [Enemy3] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:59] [ENEMY] [Enemy3] [Grenade] Grenade system initialized: 1 grenades
[10:07:59] [ENEMY] [Enemy3] Death animation component initialized
[10:07:59] [ENEMY] [Enemy4] Death animation component initialized
[10:07:59] [ENEMY] [Enemy5] Death animation component initialized
[10:07:59] [ENEMY] [Enemy6] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:59] [ENEMY] [Enemy6] [Grenade] Grenade system initialized: 1 grenades
[10:07:59] [ENEMY] [Enemy6] Death animation component initialized
[10:07:59] [ENEMY] [Enemy7] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:59] [ENEMY] [Enemy7] [Grenade] Grenade system initialized: 1 grenades
[10:07:59] [ENEMY] [Enemy7] Death animation component initialized
[10:07:59] [ENEMY] [Enemy8] Death animation component initialized
[10:07:59] [ENEMY] [Enemy9] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:07:59] [ENEMY] [Enemy9] [Grenade] Grenade system initialized: 1 grenades
[10:07:59] [ENEMY] [Enemy9] Death animation component initialized
[10:07:59] [ENEMY] [Enemy10] Death animation component initialized
[10:07:59] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:07:59] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:07:59] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:07:59] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:07:59] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:07:59] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:07:59] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:07:59] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:07:59] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[10:07:59] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:07:59] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:07:59] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:07:59] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:07:59] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:07:59] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:07:59] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:07:59] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:07:59] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:07:59] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:07:59] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:07:59] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:07:59] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:07:59] [INFO] [ScoreManager] Level started with 10 enemies
[10:07:59] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:07:59] [ENEMY] [Enemy1] Registered as sound listener
[10:07:59] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[10:07:59] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:07:59] [ENEMY] [Enemy2] Registered as sound listener
[10:07:59] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[10:07:59] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:07:59] [ENEMY] [Enemy3] Registered as sound listener
[10:07:59] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[10:07:59] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:07:59] [ENEMY] [Enemy4] Registered as sound listener
[10:07:59] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[10:07:59] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:07:59] [ENEMY] [Enemy5] Registered as sound listener
[10:07:59] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[10:07:59] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:07:59] [ENEMY] [Enemy6] Registered as sound listener
[10:07:59] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[10:07:59] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:07:59] [ENEMY] [Enemy7] Registered as sound listener
[10:07:59] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[10:07:59] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:07:59] [ENEMY] [Enemy8] Registered as sound listener
[10:07:59] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[10:07:59] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:07:59] [ENEMY] [Enemy9] Registered as sound listener
[10:07:59] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[10:07:59] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:07:59] [ENEMY] [Enemy10] Registered as sound listener
[10:07:59] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[10:07:59] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:07:59] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:07:59] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:07:59] [INFO] [LastChance] Found player: Player
[10:07:59] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:07:59] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:07:59] [INFO] [LastChance] Connected to player Died signal (C#)
[10:07:59] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:07:59] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:07:59] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:08:00] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:00] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:08:01] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:01] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:08:01] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[10:08:01] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[10:08:02] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[10:08:02] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[10:08:02] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[10:08:02] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[10:08:02] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[10:08:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(800, 900), source=ENEMY (Enemy4), range=1469, listeners=10
[10:08:02] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[10:08:02] [INFO] [LastChance] Threat detected: Bullet
[10:08:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:02] [INFO] [LastChance] Threat detected: @Area2D@2254
[10:08:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:02] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:02] [INFO] [Player] Spawning blood effect at (849.921, 648.8792), dir=(0.7844934, -0.6201372), lethal=False (C#)
[10:08:02] [INFO] [ImpactEffects] spawn_blood_effect called at (849.921, 648.8792), dir=(0.784493, -0.620137), lethal=false
[10:08:02] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:02] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:02] [INFO] [ImpactEffects] Blood effect spawned at (849.921, 648.8792) (scale=1)
[10:08:02] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(807.386, 892.3043), source=ENEMY (Enemy4), range=1469, listeners=10
[10:08:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[10:08:02] [INFO] [LastChance] Threat detected: Bullet
[10:08:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:02] [INFO] [LastChance] Threat detected: @Area2D@2257
[10:08:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:02] [ENEMY] [Enemy1] Memory: medium confidence (0.62) - transitioning to PURSUING
[10:08:02] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[10:08:02] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[10:08:02] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(807.386, 892.3043), source=ENEMY (Enemy4), range=1469, listeners=10
[10:08:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[10:08:02] [INFO] [LastChance] Threat detected: Bullet
[10:08:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[10:08:02] [INFO] [LastChance] Threat detected: @Area2D@2260
[10:08:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(763.6521, 725.9373), shooter_id=7707721468557, bullet_pos=(911.7678, 649.5208)
[10:08:02] [INFO] [Bullet] Using shooter_position, distance=166.666580200195
[10:08:02] [INFO] [Bullet] Distance to wall: 166.666580200195 (11.3486339186482% of viewport)
[10:08:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:08:02] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:02] [INFO] [Player] Spawning blood effect at (895.9994, 648.8792), dir=(-0.19717449, 0.98036844), lethal=False (C#)
[10:08:02] [INFO] [ImpactEffects] spawn_blood_effect called at (895.9994, 648.8792), dir=(-0.197174, 0.980368), lethal=false
[10:08:02] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:02] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:02] [INFO] [ImpactEffects] Blood effect spawned at (895.9994, 648.8792) (scale=1)
[10:08:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(815.2224, 833.676), shooter_id=7708006680082, bullet_pos=(902.7054, 46.85757)
[10:08:02] [INFO] [Bullet] Using shooter_position, distance=791.666809082031
[10:08:02] [INFO] [Bullet] Distance to wall: 791.666809082031 (53.9060487772929% of viewport)
[10:08:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(837.8392, 831.4504), shooter_id=7708006680082, bullet_pos=(909.1033, 635.6848)
[10:08:02] [INFO] [Bullet] Using shooter_position, distance=208.333297729492
[10:08:02] [INFO] [Bullet] Distance to wall: 208.333297729492 (14.1857973335555% of viewport)
[10:08:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:08:02] [INFO] [Bullet] Starting wall penetration at (909.1033, 635.6848)
[10:08:02] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:02] [INFO] [Player] Spawning blood effect at (895.9994, 648.8792), dir=(0.34206757, -0.9396754), lethal=False (C#)
[10:08:02] [INFO] [ImpactEffects] spawn_blood_effect called at (895.9994, 648.8792), dir=(0.342068, -0.939675), lethal=false
[10:08:02] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:02] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:02] [INFO] [ImpactEffects] Wall found for blood splatter at (912, 604.9248) (dist=46 px)
[10:08:02] [INFO] [ImpactEffects] Blood effect spawned at (895.9994, 648.8792) (scale=1)
[10:08:02] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(474.2126, 601.9824), source=ENEMY (Enemy2), range=1469, listeners=10
[10:08:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[10:08:02] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8.69102478027344
[10:08:02] [INFO] [Bullet] Body exited signal received for penetrating body
[10:08:02] [INFO] [Bullet] Exiting penetration at (925.0664, 591.8333) after traveling 41.6666717529297 pixels through wall
[10:08:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[10:08:02] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(807.386, 892.3043), source=ENEMY (Enemy4), range=1469, listeners=10
[10:08:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[10:08:02] [INFO] [LastChance] Threat detected: @Area2D@2270
[10:08:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(830.8986, 828.447), shooter_id=7708006680082, bullet_pos=(978.2024, 221.0539)
[10:08:02] [INFO] [Bullet] Using shooter_position, distance=624.999877929688
[10:08:02] [INFO] [Bullet] Distance to wall: 624.999877929688 (42.5573909616676% of viewport)
[10:08:02] [INFO] [LastChance] Threat detected: @Area2D@2272
[10:08:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:02] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:02] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:02] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:08:02] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:08:02] [ENEMY] [Enemy1] Death animation component initialized
[10:08:02] [ENEMY] [Enemy2] Death animation component initialized
[10:08:02] [ENEMY] [Enemy3] Death animation component initialized
[10:08:02] [ENEMY] [Enemy4] Death animation component initialized
[10:08:02] [ENEMY] [Enemy5] Death animation component initialized
[10:08:02] [ENEMY] [Enemy6] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:02] [ENEMY] [Enemy6] [Grenade] Grenade system initialized: 1 grenades
[10:08:02] [ENEMY] [Enemy6] Death animation component initialized
[10:08:02] [ENEMY] [Enemy7] Death animation component initialized
[10:08:02] [ENEMY] [Enemy8] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:02] [ENEMY] [Enemy8] [Grenade] Grenade system initialized: 1 grenades
[10:08:02] [ENEMY] [Enemy8] Death animation component initialized
[10:08:02] [ENEMY] [Enemy9] Death animation component initialized
[10:08:02] [ENEMY] [Enemy10] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:02] [ENEMY] [Enemy10] [Grenade] Grenade system initialized: 1 grenades
[10:08:02] [ENEMY] [Enemy10] Death animation component initialized
[10:08:02] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:08:02] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:08:02] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:08:02] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:08:02] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:08:02] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:08:02] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:08:02] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:08:02] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[10:08:02] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:08:02] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:08:02] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:08:02] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:08:02] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:08:02] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:08:02] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:08:02] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:08:02] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:08:02] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:08:02] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:08:02] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:08:02] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:08:02] [INFO] [ScoreManager] Level started with 10 enemies
[10:08:02] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:08:02] [ENEMY] [Enemy1] Registered as sound listener
[10:08:02] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[10:08:02] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:08:02] [ENEMY] [Enemy2] Registered as sound listener
[10:08:02] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[10:08:02] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:08:02] [ENEMY] [Enemy3] Registered as sound listener
[10:08:02] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[10:08:02] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:08:02] [ENEMY] [Enemy4] Registered as sound listener
[10:08:02] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[10:08:02] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:08:02] [ENEMY] [Enemy5] Registered as sound listener
[10:08:02] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[10:08:02] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:08:02] [ENEMY] [Enemy6] Registered as sound listener
[10:08:02] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[10:08:02] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:08:02] [ENEMY] [Enemy7] Registered as sound listener
[10:08:02] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[10:08:02] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:08:02] [ENEMY] [Enemy8] Registered as sound listener
[10:08:02] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[10:08:02] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:08:02] [ENEMY] [Enemy9] Registered as sound listener
[10:08:02] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[10:08:02] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:08:02] [ENEMY] [Enemy10] Registered as sound listener
[10:08:02] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[10:08:02] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:08:02] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:08:02] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:08:02] [INFO] [LastChance] Found player: Player
[10:08:02] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:08:02] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:08:02] [INFO] [LastChance] Connected to player Died signal (C#)
[10:08:02] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:08:02] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:08:02] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:08:04] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:04] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:08:04] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:04] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:08:04] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[10:08:05] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[10:08:05] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[10:08:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[10:08:06] [ENEMY] [Enemy2] State: IDLE -> COMBAT
[10:08:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:08:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=20
[10:08:06] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[10:08:06] [ENEMY] [Enemy1] Heard gunshot at (400, 550), source_type=1, intensity=0.05, distance=224
[10:08:06] [ENEMY] [Enemy3] Heard gunshot at (400, 550), source_type=1, intensity=0.02, distance=361
[10:08:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:08:06] [ENEMY] [Enemy4] Memory: high confidence (0.81) - transitioning to PURSUING
[10:08:06] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[10:08:06] [INFO] [LastChance] Threat detected: Bullet
[10:08:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:06] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[10:08:06] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:06] [INFO] [Player] Spawning blood effect at (134.48755, 636.2825), dir=(-0.94103974, 0.33829594), lethal=False (C#)
[10:08:06] [INFO] [ImpactEffects] spawn_blood_effect called at (134.4875, 636.2825), dir=(-0.94104, 0.338296), lethal=false
[10:08:06] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:06] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:06] [INFO] [ImpactEffects] Wall found for blood splatter at (64, 661.6222) (dist=74 px)
[10:08:06] [INFO] [ImpactEffects] Blood effect spawned at (134.4875, 636.2825) (scale=1)
[10:08:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[10:08:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:08:06] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:06] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:06] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:08:06] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:08:06] [ENEMY] [Enemy1] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:06] [ENEMY] [Enemy1] [Grenade] Grenade system initialized: 1 grenades
[10:08:06] [ENEMY] [Enemy1] Death animation component initialized
[10:08:06] [ENEMY] [Enemy2] Death animation component initialized
[10:08:06] [ENEMY] [Enemy3] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:06] [ENEMY] [Enemy3] [Grenade] Grenade system initialized: 1 grenades
[10:08:06] [ENEMY] [Enemy3] Death animation component initialized
[10:08:06] [ENEMY] [Enemy4] Death animation component initialized
[10:08:06] [ENEMY] [Enemy5] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:06] [ENEMY] [Enemy5] [Grenade] Grenade system initialized: 1 grenades
[10:08:06] [ENEMY] [Enemy5] Death animation component initialized
[10:08:06] [ENEMY] [Enemy6] Death animation component initialized
[10:08:06] [ENEMY] [Enemy7] Death animation component initialized
[10:08:06] [ENEMY] [Enemy8] Death animation component initialized
[10:08:06] [ENEMY] [Enemy9] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:06] [ENEMY] [Enemy9] [Grenade] Grenade system initialized: 1 grenades
[10:08:06] [ENEMY] [Enemy9] Death animation component initialized
[10:08:06] [ENEMY] [Enemy10] Death animation component initialized
[10:08:06] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:08:06] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:08:06] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:08:06] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:08:06] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:08:06] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:08:06] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:08:06] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:08:06] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[10:08:06] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:08:06] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:08:06] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:08:06] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:08:06] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:08:06] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:08:06] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:08:06] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:08:06] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:08:06] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:08:06] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:08:06] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:08:06] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:08:06] [INFO] [ScoreManager] Level started with 10 enemies
[10:08:06] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:08:06] [ENEMY] [Enemy1] Registered as sound listener
[10:08:06] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[10:08:06] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:08:06] [ENEMY] [Enemy2] Registered as sound listener
[10:08:06] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[10:08:06] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:08:06] [ENEMY] [Enemy3] Registered as sound listener
[10:08:06] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[10:08:06] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:08:06] [ENEMY] [Enemy4] Registered as sound listener
[10:08:06] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[10:08:06] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:08:06] [ENEMY] [Enemy5] Registered as sound listener
[10:08:06] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[10:08:06] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:08:06] [ENEMY] [Enemy6] Registered as sound listener
[10:08:06] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[10:08:06] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:08:06] [ENEMY] [Enemy7] Registered as sound listener
[10:08:06] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[10:08:06] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:08:06] [ENEMY] [Enemy8] Registered as sound listener
[10:08:06] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[10:08:06] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:08:06] [ENEMY] [Enemy9] Registered as sound listener
[10:08:06] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[10:08:06] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:08:06] [ENEMY] [Enemy10] Registered as sound listener
[10:08:06] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[10:08:06] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:08:06] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:08:06] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:08:06] [INFO] [LastChance] Found player: Player
[10:08:06] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:08:06] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:08:06] [INFO] [LastChance] Connected to player Died signal (C#)
[10:08:06] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:08:06] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:08:06] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:08:07] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:07] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:08:08] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:08] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:08:08] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[10:08:08] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[10:08:09] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[10:08:09] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[10:08:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[10:08:09] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[10:08:09] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[10:08:09] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[10:08:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:09] [INFO] [LastChance] Threat detected: Bullet
[10:08:09] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:09] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[10:08:09] [ENEMY] [Enemy1] Heard gunshot at (400, 550), source_type=1, intensity=0.05, distance=224
[10:08:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:08:09] [INFO] [LastChance] Threat detected: @Area2D@2799
[10:08:09] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:09] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:08:09] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:09] [INFO] [Player] Spawning blood effect at (537.1845, 720.8364), dir=(-0.98494136, -0.17288879), lethal=False (C#)
[10:08:09] [INFO] [ImpactEffects] spawn_blood_effect called at (537.1845, 720.8364), dir=(-0.984941, -0.172889), lethal=false
[10:08:09] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:09] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:09] [INFO] [ImpactEffects] Wall found for blood splatter at (486.8437, 712) (dist=51 px)
[10:08:09] [INFO] [ImpactEffects] Blood effect spawned at (537.1845, 720.8364) (scale=1)
[10:08:09] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:09] [INFO] [Player] Spawning blood effect at (537.1845, 720.8364), dir=(0.623845, 0.78154814), lethal=False (C#)
[10:08:09] [INFO] [ImpactEffects] spawn_blood_effect called at (537.1845, 720.8364), dir=(0.623845, 0.781548), lethal=false
[10:08:09] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:09] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:09] [INFO] [ImpactEffects] Blood effect spawned at (537.1845, 720.8364) (scale=1)
[10:08:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:09] [INFO] [LastChance] Threat detected: Bullet
[10:08:09] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:09] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[10:08:09] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[10:08:09] [INFO] [LastChance] Threat detected: @Area2D@2804
[10:08:09] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:09] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:08:09] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:09] [INFO] [Player] Spawning blood effect at (537.1845, 720.8364), dir=(-0.98433393, -0.17631428), lethal=False (C#)
[10:08:09] [INFO] [ImpactEffects] spawn_blood_effect called at (537.1845, 720.8364), dir=(-0.984334, -0.176314), lethal=false
[10:08:09] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:09] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:09] [INFO] [ImpactEffects] Wall found for blood splatter at (487.8521, 712) (dist=50 px)
[10:08:09] [INFO] [ImpactEffects] Blood effect spawned at (537.1845, 720.8364) (scale=1)
[10:08:09] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:09] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:09] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:08:09] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:08:09] [ENEMY] [Enemy1] Death animation component initialized
[10:08:09] [ENEMY] [Enemy2] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:09] [ENEMY] [Enemy2] [Grenade] Grenade system initialized: 1 grenades
[10:08:09] [ENEMY] [Enemy2] Death animation component initialized
[10:08:09] [ENEMY] [Enemy3] Death animation component initialized
[10:08:09] [ENEMY] [Enemy4] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:09] [ENEMY] [Enemy4] [Grenade] Grenade system initialized: 1 grenades
[10:08:09] [ENEMY] [Enemy4] Death animation component initialized
[10:08:09] [ENEMY] [Enemy5] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:09] [ENEMY] [Enemy5] [Grenade] Grenade system initialized: 1 grenades
[10:08:09] [ENEMY] [Enemy5] Death animation component initialized
[10:08:09] [ENEMY] [Enemy6] Death animation component initialized
[10:08:09] [ENEMY] [Enemy7] Death animation component initialized
[10:08:09] [ENEMY] [Enemy8] Death animation component initialized
[10:08:09] [ENEMY] [Enemy9] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:09] [ENEMY] [Enemy9] [Grenade] Grenade system initialized: 1 grenades
[10:08:09] [ENEMY] [Enemy9] Death animation component initialized
[10:08:09] [ENEMY] [Enemy10] Death animation component initialized
[10:08:09] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:08:09] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:08:09] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:08:09] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:08:09] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:08:09] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:08:09] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:08:09] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:08:09] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[10:08:09] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:08:09] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:08:09] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:08:09] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:08:09] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:08:09] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:08:09] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:08:09] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:08:09] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:08:09] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:08:09] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:08:09] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:08:09] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:08:09] [INFO] [ScoreManager] Level started with 10 enemies
[10:08:09] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:08:09] [ENEMY] [Enemy1] Registered as sound listener
[10:08:09] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[10:08:09] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:08:09] [ENEMY] [Enemy2] Registered as sound listener
[10:08:09] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[10:08:09] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:08:09] [ENEMY] [Enemy3] Registered as sound listener
[10:08:09] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[10:08:09] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:08:09] [ENEMY] [Enemy4] Registered as sound listener
[10:08:09] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[10:08:09] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:08:09] [ENEMY] [Enemy5] Registered as sound listener
[10:08:09] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[10:08:09] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:08:09] [ENEMY] [Enemy6] Registered as sound listener
[10:08:09] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[10:08:09] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:08:09] [ENEMY] [Enemy7] Registered as sound listener
[10:08:09] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[10:08:09] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:08:09] [ENEMY] [Enemy8] Registered as sound listener
[10:08:09] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[10:08:09] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:08:09] [ENEMY] [Enemy9] Registered as sound listener
[10:08:09] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[10:08:09] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:08:09] [ENEMY] [Enemy10] Registered as sound listener
[10:08:09] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[10:08:09] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:08:09] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:08:09] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:08:09] [INFO] [LastChance] Found player: Player
[10:08:09] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:08:09] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:08:09] [INFO] [LastChance] Connected to player Died signal (C#)
[10:08:09] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:08:09] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:08:09] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:08:11] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:11] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:08:11] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:11] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:08:11] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[10:08:12] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[10:08:12] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[10:08:12] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=20
[10:08:12] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[10:08:12] [ENEMY] [Enemy1] Heard gunshot at (400, 550), source_type=1, intensity=0.05, distance=224
[10:08:12] [ENEMY] [Enemy3] Heard gunshot at (400, 550), source_type=1, intensity=0.02, distance=361
[10:08:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:08:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[10:08:12] [INFO] [LastChance] Threat detected: Bullet
[10:08:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(372.5431, 612.2633), shooter_id=11319419865671, bullet_pos=(330.4006, 684.1553)
[10:08:12] [INFO] [Bullet] Using shooter_position, distance=83.3333511352539
[10:08:12] [INFO] [Bullet] Distance to wall: 83.3333511352539 (5.67432111532012% of viewport)
[10:08:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:08:12] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[10:08:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:08:12] [INFO] [LastChance] Threat detected: Bullet
[10:08:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:13] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[10:08:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:08:13] [INFO] [LastChance] Threat detected: Bullet
[10:08:13] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(357.4404, 603.0969), shooter_id=11319419865671, bullet_pos=(268.5971, 691.0278)
[10:08:13] [INFO] [Bullet] Using shooter_position, distance=124.999923706055
[10:08:13] [INFO] [Bullet] Distance to wall: 124.999923706055 (8.5114746597369% of viewport)
[10:08:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:08:13] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:13] [INFO] [Player] Spawning blood effect at (272.02353, 671.93353), dir=(0.82128567, 0.5705173), lethal=False (C#)
[10:08:13] [INFO] [ImpactEffects] spawn_blood_effect called at (272.0235, 671.9335), dir=(0.821286, 0.570517), lethal=false
[10:08:13] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:13] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:13] [INFO] [ImpactEffects] Wall found for blood splatter at (295.1519, 688) (dist=28 px)
[10:08:13] [INFO] [ImpactEffects] Blood effect spawned at (272.0235, 671.9335) (scale=1)
[10:08:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:08:13] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[10:08:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:08:13] [INFO] [LastChance] Threat detected: Bullet
[10:08:13] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:13] [ENEMY] [Enemy4] Memory: high confidence (0.81) - transitioning to PURSUING
[10:08:13] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[10:08:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(356.2918, 602.1555), shooter_id=11319419865671, bullet_pos=(265.5507, 688.1268)
[10:08:13] [INFO] [Bullet] Using shooter_position, distance=125.000068664551
[10:08:13] [INFO] [Bullet] Distance to wall: 125.000068664551 (8.51148453022745% of viewport)
[10:08:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:08:13] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:13] [INFO] [Player] Spawning blood effect at (271.3013, 671.93353), dir=(0.98947346, 0.14471501), lethal=False (C#)
[10:08:13] [INFO] [ImpactEffects] spawn_blood_effect called at (271.3013, 671.9335), dir=(0.989473, 0.144715), lethal=false
[10:08:13] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:13] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:13] [INFO] [ImpactEffects] Blood effect spawned at (271.3013, 671.9335) (scale=1)
[10:08:13] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[10:08:13] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[10:08:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:08:13] [INFO] [LastChance] Threat detected: Bullet
[10:08:13] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:13] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:08:13] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:08:13] [ENEMY] [Enemy1] Death animation component initialized
[10:08:13] [ENEMY] [Enemy2] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:13] [ENEMY] [Enemy2] [Grenade] Grenade system initialized: 1 grenades
[10:08:13] [ENEMY] [Enemy2] Death animation component initialized
[10:08:13] [ENEMY] [Enemy3] Death animation component initialized
[10:08:13] [ENEMY] [Enemy4] Death animation component initialized
[10:08:13] [ENEMY] [Enemy5] Death animation component initialized
[10:08:13] [ENEMY] [Enemy6] Death animation component initialized
[10:08:13] [ENEMY] [Enemy7] Death animation component initialized
[10:08:13] [ENEMY] [Enemy8] Death animation component initialized
[10:08:13] [ENEMY] [Enemy9] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:13] [ENEMY] [Enemy9] [Grenade] Grenade system initialized: 1 grenades
[10:08:13] [ENEMY] [Enemy9] Death animation component initialized
[10:08:13] [ENEMY] [Enemy10] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:13] [ENEMY] [Enemy10] [Grenade] Grenade system initialized: 1 grenades
[10:08:13] [ENEMY] [Enemy10] Death animation component initialized
[10:08:13] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:08:13] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:08:13] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:08:13] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:08:13] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:08:13] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:08:13] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:08:13] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:08:13] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[10:08:13] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:08:13] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:08:13] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:08:13] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:08:13] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:08:13] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:08:13] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:08:13] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:08:13] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:08:13] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:08:13] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:08:13] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:08:13] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:08:13] [INFO] [ScoreManager] Level started with 10 enemies
[10:08:13] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:08:13] [ENEMY] [Enemy1] Registered as sound listener
[10:08:13] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[10:08:13] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:08:13] [ENEMY] [Enemy2] Registered as sound listener
[10:08:13] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[10:08:13] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:08:13] [ENEMY] [Enemy3] Registered as sound listener
[10:08:13] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[10:08:13] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:08:13] [ENEMY] [Enemy4] Registered as sound listener
[10:08:13] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[10:08:13] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:08:13] [ENEMY] [Enemy5] Registered as sound listener
[10:08:13] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[10:08:13] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:08:13] [ENEMY] [Enemy6] Registered as sound listener
[10:08:13] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[10:08:13] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:08:13] [ENEMY] [Enemy7] Registered as sound listener
[10:08:13] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[10:08:13] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:08:13] [ENEMY] [Enemy8] Registered as sound listener
[10:08:13] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[10:08:13] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:08:13] [ENEMY] [Enemy9] Registered as sound listener
[10:08:13] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[10:08:13] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:08:13] [ENEMY] [Enemy10] Registered as sound listener
[10:08:13] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[10:08:13] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:08:13] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:08:13] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:08:13] [INFO] [LastChance] Found player: Player
[10:08:13] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:08:13] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:08:13] [INFO] [LastChance] Connected to player Died signal (C#)
[10:08:13] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:08:13] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:08:13] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:08:14] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:14] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:08:15] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:15] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:08:15] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[10:08:15] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[10:08:15] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[10:08:15] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[10:08:15] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[10:08:15] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[10:08:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:15] [INFO] [LastChance] Threat detected: Bullet
[10:08:15] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(651.8558, 701.9091), shooter_id=12634652937381, bullet_pos=(522.3081, 538.7521)
[10:08:16] [INFO] [Bullet] Using shooter_position, distance=208.333465576172
[10:08:16] [INFO] [Bullet] Distance to wall: 208.333465576172 (14.1858087625446% of viewport)
[10:08:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:08:16] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:16] [INFO] [LastChance] Threat detected: @Area2D@3346
[10:08:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:16] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:16] [INFO] [Player] Spawning blood effect at (571.36316, 570.2679), dir=(-0.58751774, -0.8092113), lethal=False (C#)
[10:08:16] [INFO] [ImpactEffects] spawn_blood_effect called at (571.3632, 570.2679), dir=(-0.587518, -0.809211), lethal=false
[10:08:16] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:16] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:16] [INFO] [ImpactEffects] Wall found for blood splatter at (524, 505.0327) (dist=80 px)
[10:08:16] [INFO] [ImpactEffects] Blood effect spawned at (571.3632, 570.2679) (scale=1)
[10:08:16] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:16] [INFO] [LastChance] Threat detected: @Area2D@3349
[10:08:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:16] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[10:08:16] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:16] [INFO] [Player] Spawning blood effect at (571.36316, 570.2679), dir=(-0.58200717, -0.81318367), lethal=False (C#)
[10:08:16] [INFO] [ImpactEffects] spawn_blood_effect called at (571.3632, 570.2679), dir=(-0.582007, -0.813184), lethal=false
[10:08:16] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:16] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:16] [INFO] [ImpactEffects] Wall found for blood splatter at (524, 504.0919) (dist=81 px)
[10:08:16] [INFO] [ImpactEffects] Blood effect spawned at (571.3632, 570.2679) (scale=1)
[10:08:16] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:16] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:08:16] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:08:16] [ENEMY] [Enemy1] Death animation component initialized
[10:08:16] [ENEMY] [Enemy2] Death animation component initialized
[10:08:16] [ENEMY] [Enemy3] Death animation component initialized
[10:08:16] [ENEMY] [Enemy4] Death animation component initialized
[10:08:16] [ENEMY] [Enemy5] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:16] [ENEMY] [Enemy5] [Grenade] Grenade system initialized: 1 grenades
[10:08:16] [ENEMY] [Enemy5] Death animation component initialized
[10:08:16] [ENEMY] [Enemy6] Death animation component initialized
[10:08:16] [ENEMY] [Enemy7] Death animation component initialized
[10:08:16] [ENEMY] [Enemy8] Death animation component initialized
[10:08:16] [ENEMY] [Enemy9] Death animation component initialized
[10:08:16] [ENEMY] [Enemy10] Death animation component initialized
[10:08:16] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:08:16] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:08:16] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:08:16] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:08:16] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:08:16] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:08:16] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:08:16] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:08:16] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[10:08:16] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:08:16] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:08:16] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:08:16] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:08:16] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:08:16] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:08:16] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:08:16] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:08:16] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:08:16] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:08:16] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:08:16] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:08:16] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:08:16] [INFO] [ScoreManager] Level started with 10 enemies
[10:08:16] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:08:16] [ENEMY] [Enemy1] Registered as sound listener
[10:08:16] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[10:08:16] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:08:16] [ENEMY] [Enemy2] Registered as sound listener
[10:08:16] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[10:08:16] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:08:16] [ENEMY] [Enemy3] Registered as sound listener
[10:08:16] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[10:08:16] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:08:16] [ENEMY] [Enemy4] Registered as sound listener
[10:08:16] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[10:08:16] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:08:16] [ENEMY] [Enemy5] Registered as sound listener
[10:08:16] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[10:08:16] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:08:16] [ENEMY] [Enemy6] Registered as sound listener
[10:08:16] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[10:08:16] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:08:16] [ENEMY] [Enemy7] Registered as sound listener
[10:08:16] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[10:08:16] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:08:16] [ENEMY] [Enemy8] Registered as sound listener
[10:08:16] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[10:08:16] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:08:16] [ENEMY] [Enemy9] Registered as sound listener
[10:08:16] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[10:08:16] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:08:16] [ENEMY] [Enemy10] Registered as sound listener
[10:08:16] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[10:08:16] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:08:16] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:08:16] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:08:16] [INFO] [LastChance] Found player: Player
[10:08:16] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:08:16] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:08:16] [INFO] [LastChance] Connected to player Died signal (C#)
[10:08:16] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:08:16] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:08:16] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:08:17] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:17] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:08:18] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:18] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:08:18] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[10:08:18] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[10:08:19] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[10:08:19] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[10:08:19] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[10:08:19] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[10:08:19] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[10:08:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:19] [INFO] [LastChance] Threat detected: Bullet
[10:08:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.0357, 701.7296), shooter_id=13662777510331, bullet_pos=(523.0983, 538.0901)
[10:08:19] [INFO] [Bullet] Using shooter_position, distance=208.333251953125
[10:08:19] [INFO] [Bullet] Distance to wall: 208.333251953125 (14.1857942165585% of viewport)
[10:08:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:08:19] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:19] [INFO] [LastChance] Threat detected: @Area2D@3608
[10:08:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:19] [ENEMY] [Enemy1] Memory: medium confidence (0.61) - transitioning to PURSUING
[10:08:19] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[10:08:19] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:19] [INFO] [Player] Spawning blood effect at (574.9186, 553.58765), dir=(-0.5589067, -0.8292305), lethal=False (C#)
[10:08:19] [INFO] [ImpactEffects] spawn_blood_effect called at (574.9186, 553.5876), dir=(-0.558907, -0.82923), lethal=false
[10:08:19] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:19] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:19] [INFO] [ImpactEffects] Wall found for blood splatter at (524, 478.0415) (dist=91 px)
[10:08:19] [INFO] [ImpactEffects] Blood effect spawned at (574.9186, 553.5876) (scale=1)
[10:08:19] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[10:08:19] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:19] [INFO] [LastChance] Threat detected: @Area2D@3611
[10:08:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[10:08:19] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:19] [INFO] [Player] Spawning blood effect at (574.9186, 549.6988), dir=(-0.5325397, -0.846405), lethal=False (C#)
[10:08:19] [INFO] [ImpactEffects] spawn_blood_effect called at (574.9186, 549.6988), dir=(-0.53254, -0.846405), lethal=false
[10:08:19] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:19] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:19] [INFO] [ImpactEffects] Wall found for blood splatter at (524, 468.7701) (dist=95 px)
[10:08:19] [INFO] [ImpactEffects] Blood effect spawned at (574.9186, 549.6988) (scale=1)
[10:08:19] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:19] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:08:19] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:08:19] [ENEMY] [Enemy1] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:19] [ENEMY] [Enemy1] [Grenade] Grenade system initialized: 1 grenades
[10:08:19] [ENEMY] [Enemy1] Death animation component initialized
[10:08:19] [ENEMY] [Enemy2] Death animation component initialized
[10:08:19] [ENEMY] [Enemy3] Death animation component initialized
[10:08:19] [ENEMY] [Enemy4] Death animation component initialized
[10:08:19] [ENEMY] [Enemy5] Death animation component initialized
[10:08:19] [ENEMY] [Enemy6] Death animation component initialized
[10:08:19] [ENEMY] [Enemy7] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:19] [ENEMY] [Enemy7] [Grenade] Grenade system initialized: 1 grenades
[10:08:19] [ENEMY] [Enemy7] Death animation component initialized
[10:08:19] [ENEMY] [Enemy8] Death animation component initialized
[10:08:19] [ENEMY] [Enemy9] Death animation component initialized
[10:08:19] [ENEMY] [Enemy10] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:19] [ENEMY] [Enemy10] [Grenade] Grenade system initialized: 1 grenades
[10:08:19] [ENEMY] [Enemy10] Death animation component initialized
[10:08:19] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:08:19] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:08:19] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:08:19] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:08:19] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:08:19] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:08:19] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:08:19] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:08:19] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[10:08:19] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:08:19] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:08:19] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:08:19] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:08:19] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:08:19] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:08:19] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:08:19] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:08:19] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:08:19] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:08:19] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:08:19] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:08:19] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:08:19] [INFO] [ScoreManager] Level started with 10 enemies
[10:08:19] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:08:19] [ENEMY] [Enemy1] Registered as sound listener
[10:08:19] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[10:08:19] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:08:19] [ENEMY] [Enemy2] Registered as sound listener
[10:08:19] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[10:08:19] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:08:19] [ENEMY] [Enemy3] Registered as sound listener
[10:08:19] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[10:08:19] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:08:19] [ENEMY] [Enemy4] Registered as sound listener
[10:08:19] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[10:08:19] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:08:19] [ENEMY] [Enemy5] Registered as sound listener
[10:08:19] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[10:08:19] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:08:19] [ENEMY] [Enemy6] Registered as sound listener
[10:08:19] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[10:08:19] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:08:19] [ENEMY] [Enemy7] Registered as sound listener
[10:08:19] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[10:08:19] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:08:19] [ENEMY] [Enemy8] Registered as sound listener
[10:08:19] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[10:08:19] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:08:19] [ENEMY] [Enemy9] Registered as sound listener
[10:08:19] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[10:08:19] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:08:19] [ENEMY] [Enemy10] Registered as sound listener
[10:08:19] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[10:08:19] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:08:19] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:08:19] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:08:19] [INFO] [LastChance] Found player: Player
[10:08:19] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:08:19] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:08:19] [INFO] [LastChance] Connected to player Died signal (C#)
[10:08:19] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:08:19] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:08:19] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:08:21] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:21] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:08:21] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:21] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:08:21] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:08:21] [ENEMY] [Enemy2] Memory: high confidence (0.90) - transitioning to PURSUING
[10:08:21] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[10:08:21] [ENEMY] [Enemy3] Memory: high confidence (0.81) - transitioning to PURSUING
[10:08:21] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[10:08:21] [ENEMY] [Enemy4] Memory: medium confidence (0.72) - transitioning to PURSUING
[10:08:21] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[10:08:21] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=20
[10:08:21] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[10:08:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:08:21] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:08:21] [ENEMY] [Enemy3] PURSUING corner check: angle -117.3°
[10:08:21] [INFO] [LastChance] Threat detected: Bullet
[10:08:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:21] [ENEMY] [Enemy2] PURSUING corner check: angle -170.7°
[10:08:21] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[10:08:21] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(395.7058, 576.3187), source=ENEMY (Enemy2), range=1469, listeners=10
[10:08:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:08:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(671.5747, 764.6968), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:21] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[10:08:21] [INFO] [LastChance] Threat detected: @Area2D@3876
[10:08:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(603.9687, 756.9489), shooter_id=14806950087774, bullet_pos=(401.0732, 709.6601)
[10:08:21] [INFO] [Bullet] Using shooter_position, distance=208.333435058594
[10:08:21] [INFO] [Bullet] Distance to wall: 208.333435058594 (14.1858066845466% of viewport)
[10:08:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:08:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(435.5297, 608.0366), shooter_id=14806664874704, bullet_pos=(743.7503, 1001.737)
[10:08:21] [INFO] [Bullet] Using shooter_position, distance=499.999847412109
[10:08:21] [INFO] [Bullet] Distance to wall: 499.999847412109 (34.0459090289377% of viewport)
[10:08:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:08:21] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:21] [INFO] [Player] Spawning blood effect at (600.747, 756.18115), dir=(0.7431276, 0.6691498), lethal=False (C#)
[10:08:21] [INFO] [ImpactEffects] spawn_blood_effect called at (600.747, 756.1812), dir=(0.743128, 0.66915), lethal=false
[10:08:21] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:21] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:21] [INFO] [ImpactEffects] Blood effect spawned at (600.747, 756.1812) (scale=1)
[10:08:21] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(639.5428, 783.0822), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:21] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[10:08:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(435.5297, 608.0366), shooter_id=14806664874704, bullet_pos=(930.626, 831.3132)
[10:08:21] [INFO] [Bullet] Using shooter_position, distance=543.114013671875
[10:08:21] [INFO] [Bullet] Distance to wall: 543.114013671875 (36.9816318895261% of viewport)
[10:08:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:08:21] [ENEMY] [Enemy2] Hit taken, health: 2/3
[10:08:21] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[10:08:21] [INFO] [ImpactEffects] spawn_blood_effect called at (384.5409, 644.7472), dir=(-0.835185, -0.549969), lethal=false
[10:08:21] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:21] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:21] [INFO] [ImpactEffects] Blood effect spawned at (384.5409, 644.7472) (scale=1)
[10:08:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(616.1077, 802.0551), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:22] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[10:08:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(603.9687, 756.9489), shooter_id=14806950087774, bullet_pos=(42.82734, 735.3627)
[10:08:22] [INFO] [Bullet] Using shooter_position, distance=561.556396484375
[10:08:22] [INFO] [Bullet] Distance to wall: 561.556396484375 (38.2374076477809% of viewport)
[10:08:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:08:22] [INFO] [Bullet] Starting wall penetration at (42.82734, 735.3627)
[10:08:22] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29.5614967346191
[10:08:22] [INFO] [Bullet] Body exited signal received for penetrating body
[10:08:22] [INFO] [Bullet] Exiting penetration at (2.514294, 738.255) after traveling 35.4166679382324 pixels through wall
[10:08:22] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[10:08:22] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[10:08:22] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[10:08:22] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[10:08:22] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[10:08:22] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[10:08:22] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(707.2878, 914.0661), source=ENEMY (Enemy4), range=1469, listeners=10
[10:08:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:22] [INFO] [LastChance] Threat detected: @Area2D@3889
[10:08:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:22] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:22] [INFO] [Player] Spawning blood effect at (614.5693, 844.9889), dir=(-0.7601842, -0.6497076), lethal=False (C#)
[10:08:22] [INFO] [ImpactEffects] spawn_blood_effect called at (614.5693, 844.9889), dir=(-0.760184, -0.649708), lethal=false
[10:08:22] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:22] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:22] [INFO] [ImpactEffects] Blood effect spawned at (614.5693, 844.9889) (scale=1)
[10:08:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(597.3732, 736.6363), shooter_id=14806950087774, bullet_pos=(522.527, 284.4553)
[10:08:22] [INFO] [Bullet] Using shooter_position, distance=458.333465576172
[10:08:22] [INFO] [Bullet] Distance to wall: 458.333465576172 (31.2087684720084% of viewport)
[10:08:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:08:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(655.5508, 830.3347), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:22] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:22] [INFO] [Player] Spawning blood effect at (614.5693, 858.1556), dir=(-0.81860816, 0.5743523), lethal=False (C#)
[10:08:22] [INFO] [ImpactEffects] spawn_blood_effect called at (614.5693, 858.1556), dir=(-0.818608, 0.574352), lethal=false
[10:08:22] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:22] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:22] [INFO] [ImpactEffects] Blood effect spawned at (614.5693, 858.1556) (scale=1)
[10:08:22] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(730.3279, 914.0655), source=ENEMY (Enemy4), range=1469, listeners=10
[10:08:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:22] [INFO] [LastChance] Threat detected: @Area2D@3902
[10:08:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:22] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:22] [INFO] [Player] Spawning blood effect at (614.5693, 871.8222), dir=(-0.92225945, -0.38657153), lethal=False (C#)
[10:08:22] [INFO] [ImpactEffects] spawn_blood_effect called at (614.5693, 871.8222), dir=(-0.922259, -0.386572), lethal=false
[10:08:22] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:22] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:22] [INFO] [ImpactEffects] Wall found for blood splatter at (524, 833.8594) (dist=98 px)
[10:08:22] [INFO] [ImpactEffects] Blood effect spawned at (614.5693, 871.8222) (scale=1)
[10:08:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(597.3732, 736.6363), shooter_id=14806950087774, bullet_pos=(606.4498, 45.86817)
[10:08:22] [INFO] [Bullet] Using shooter_position, distance=690.827758789063
[10:08:22] [INFO] [Bullet] Distance to wall: 690.827758789063 (47.0397324161817% of viewport)
[10:08:22] [INFO] [Bullet] Distance-based penetration chance: 91.786978847788%
[10:08:22] [INFO] [Bullet] Starting wall penetration at (606.4498, 45.86817)
[10:08:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.7155857086182
[10:08:22] [INFO] [Bullet] Body exited signal received for penetrating body
[10:08:22] [INFO] [Bullet] Exiting penetration at (619.8609, 7.741394) after traveling 35.4166717529297 pixels through wall
[10:08:22] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[10:08:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:22] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:08:22] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:08:22] [ENEMY] [Enemy1] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:22] [ENEMY] [Enemy1] [Grenade] Grenade system initialized: 1 grenades
[10:08:22] [ENEMY] [Enemy1] Death animation component initialized
[10:08:22] [ENEMY] [Enemy2] Death animation component initialized
[10:08:22] [ENEMY] [Enemy3] Death animation component initialized
[10:08:22] [ENEMY] [Enemy4] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:22] [ENEMY] [Enemy4] [Grenade] Grenade system initialized: 1 grenades
[10:08:22] [ENEMY] [Enemy4] Death animation component initialized
[10:08:22] [ENEMY] [Enemy5] Death animation component initialized
[10:08:22] [ENEMY] [Enemy6] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:22] [ENEMY] [Enemy6] [Grenade] Grenade system initialized: 1 grenades
[10:08:22] [ENEMY] [Enemy6] Death animation component initialized
[10:08:22] [ENEMY] [Enemy7] Death animation component initialized
[10:08:22] [ENEMY] [Enemy8] Death animation component initialized
[10:08:22] [ENEMY] [Enemy9] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:22] [ENEMY] [Enemy9] [Grenade] Grenade system initialized: 1 grenades
[10:08:22] [ENEMY] [Enemy9] Death animation component initialized
[10:08:22] [ENEMY] [Enemy10] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:22] [ENEMY] [Enemy10] [Grenade] Grenade system initialized: 1 grenades
[10:08:22] [ENEMY] [Enemy10] Death animation component initialized
[10:08:22] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:08:22] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:08:22] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:08:22] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:08:22] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:08:22] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:08:22] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:08:22] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:08:22] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[10:08:22] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:08:22] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:08:22] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:08:22] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:08:22] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:08:22] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:08:22] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:08:22] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:08:22] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:08:22] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:08:22] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:08:22] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:08:22] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:08:22] [INFO] [ScoreManager] Level started with 10 enemies
[10:08:22] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:08:22] [ENEMY] [Enemy1] Registered as sound listener
[10:08:22] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[10:08:22] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:08:22] [ENEMY] [Enemy2] Registered as sound listener
[10:08:22] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[10:08:22] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:08:22] [ENEMY] [Enemy3] Registered as sound listener
[10:08:22] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[10:08:22] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:08:22] [ENEMY] [Enemy4] Registered as sound listener
[10:08:22] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[10:08:22] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:08:22] [ENEMY] [Enemy5] Registered as sound listener
[10:08:22] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[10:08:22] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:08:22] [ENEMY] [Enemy6] Registered as sound listener
[10:08:22] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[10:08:22] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:08:22] [ENEMY] [Enemy7] Registered as sound listener
[10:08:22] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[10:08:22] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:08:22] [ENEMY] [Enemy8] Registered as sound listener
[10:08:22] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[10:08:22] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:08:22] [ENEMY] [Enemy9] Registered as sound listener
[10:08:22] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[10:08:22] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:08:22] [ENEMY] [Enemy10] Registered as sound listener
[10:08:22] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[10:08:22] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:08:22] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:08:22] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:08:22] [INFO] [LastChance] Found player: Player
[10:08:22] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:08:22] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:08:22] [INFO] [LastChance] Connected to player Died signal (C#)
[10:08:22] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:08:22] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:08:22] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:08:23] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[10:08:23] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[10:08:23] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[10:08:23] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:23] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:08:23] [ENEMY] [Enemy2] Memory: high confidence (0.90) - transitioning to PURSUING
[10:08:23] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[10:08:23] [ENEMY] [Enemy2] PURSUING corner check: angle 180.0°
[10:08:23] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[10:08:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4832, 753.9004), source=ENEMY (Enemy3), range=1469, listeners=20
[10:08:24] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[10:08:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:24] [INFO] [LastChance] Threat detected: Bullet
[10:08:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:24] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:24] [INFO] [Player] Spawning blood effect at (450, 781.5), dir=(-0.99286824, 0.11921687), lethal=False (C#)
[10:08:24] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 781.5), dir=(-0.992868, 0.119217), lethal=false
[10:08:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:24] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:24] [INFO] [ImpactEffects] Blood effect spawned at (450, 781.5) (scale=1)
[10:08:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4832, 753.9004), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:24] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:24] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:08:24] [INFO] [LastChance] Threat detected: Bullet
[10:08:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:24] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:24] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:24] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:08:24] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:08:24] [ENEMY] [Enemy1] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:24] [ENEMY] [Enemy1] [Grenade] Grenade system initialized: 1 grenades
[10:08:24] [ENEMY] [Enemy1] Death animation component initialized
[10:08:24] [ENEMY] [Enemy2] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:24] [ENEMY] [Enemy2] [Grenade] Grenade system initialized: 1 grenades
[10:08:24] [ENEMY] [Enemy2] Death animation component initialized
[10:08:24] [ENEMY] [Enemy3] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:24] [ENEMY] [Enemy3] [Grenade] Grenade system initialized: 1 grenades
[10:08:24] [ENEMY] [Enemy3] Death animation component initialized
[10:08:24] [ENEMY] [Enemy4] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:24] [ENEMY] [Enemy4] [Grenade] Grenade system initialized: 1 grenades
[10:08:24] [ENEMY] [Enemy4] Death animation component initialized
[10:08:24] [ENEMY] [Enemy5] Death animation component initialized
[10:08:24] [ENEMY] [Enemy6] Death animation component initialized
[10:08:24] [ENEMY] [Enemy7] Death animation component initialized
[10:08:24] [ENEMY] [Enemy8] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:24] [ENEMY] [Enemy8] [Grenade] Grenade system initialized: 1 grenades
[10:08:24] [ENEMY] [Enemy8] Death animation component initialized
[10:08:24] [ENEMY] [Enemy9] Death animation component initialized
[10:08:24] [ENEMY] [Enemy10] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:24] [ENEMY] [Enemy10] [Grenade] Grenade system initialized: 1 grenades
[10:08:24] [ENEMY] [Enemy10] Death animation component initialized
[10:08:24] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:08:24] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:08:24] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:08:24] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:08:24] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:08:24] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:08:24] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:08:24] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:08:24] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[10:08:24] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:08:24] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:08:24] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:08:24] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:08:24] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:08:24] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:08:24] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:08:24] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:08:24] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:08:24] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:08:24] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:08:24] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:08:24] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:08:24] [INFO] [ScoreManager] Level started with 10 enemies
[10:08:24] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:08:24] [ENEMY] [Enemy1] Registered as sound listener
[10:08:24] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[10:08:24] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:08:24] [ENEMY] [Enemy2] Registered as sound listener
[10:08:24] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[10:08:24] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:08:24] [ENEMY] [Enemy3] Registered as sound listener
[10:08:24] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[10:08:24] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:08:24] [ENEMY] [Enemy4] Registered as sound listener
[10:08:24] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[10:08:24] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:08:24] [ENEMY] [Enemy5] Registered as sound listener
[10:08:24] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[10:08:24] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:08:24] [ENEMY] [Enemy6] Registered as sound listener
[10:08:24] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[10:08:24] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:08:24] [ENEMY] [Enemy7] Registered as sound listener
[10:08:24] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[10:08:24] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:08:24] [ENEMY] [Enemy8] Registered as sound listener
[10:08:24] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[10:08:24] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:08:24] [ENEMY] [Enemy9] Registered as sound listener
[10:08:24] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[10:08:24] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:08:24] [ENEMY] [Enemy10] Registered as sound listener
[10:08:24] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[10:08:24] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:08:24] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:08:24] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:08:24] [INFO] [LastChance] Found player: Player
[10:08:24] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:08:24] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:08:24] [INFO] [LastChance] Connected to player Died signal (C#)
[10:08:24] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:08:24] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:08:24] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:08:25] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:25] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:08:26] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:26] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:08:26] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:26] [ENEMY] [Enemy1] Memory: high confidence (0.90) - transitioning to PURSUING
[10:08:26] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[10:08:26] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:08:26] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=20
[10:08:26] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[10:08:26] [ENEMY] [Enemy3] Heard gunshot at (400, 550), source_type=1, intensity=0.02, distance=361
[10:08:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:08:26] [INFO] [LastChance] Threat detected: Bullet
[10:08:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:26] [ENEMY] [Enemy1] PURSUING corner check: angle -75.2°
[10:08:26] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:08:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(325.7771, 356.8304), source=ENEMY (Enemy1), range=1469, listeners=10
[10:08:26] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=1, below_threshold=3
[10:08:26] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[10:08:26] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[10:08:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:08:26] [INFO] [LastChance] Threat detected: @Area2D@4449
[10:08:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(438.34, 606.2196), shooter_id=16514484799452, bullet_pos=(683.7427, 889.7729)
[10:08:26] [INFO] [Bullet] Using shooter_position, distance=374.999908447266
[10:08:26] [INFO] [Bullet] Distance to wall: 374.999908447266 (25.5344333302017% of viewport)
[10:08:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:08:26] [INFO] [Bullet] Starting wall penetration at (683.7427, 889.7729)
[10:08:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.366268157959
[10:08:26] [INFO] [LastChance] Threat detected: @Area2D@4447
[10:08:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:26] [INFO] [Bullet] Body exited signal received for penetrating body
[10:08:26] [INFO] [Bullet] Exiting penetration at (714.2817, 925.0595) after traveling 41.6666679382324 pixels through wall
[10:08:26] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[10:08:26] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:26] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[10:08:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:26] [INFO] [LastChance] Threat detected: @Area2D@4451
[10:08:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:26] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:08:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(361.8651, 366.3929), source=ENEMY (Enemy1), range=1469, listeners=10
[10:08:26] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=1, below_threshold=4
[10:08:26] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:26] [INFO] [Player] Spawning blood effect at (558.90027, 697.9669), dir=(0.548613, 0.8360764), lethal=False (C#)
[10:08:26] [INFO] [ImpactEffects] spawn_blood_effect called at (558.9003, 697.9669), dir=(0.548613, 0.836076), lethal=false
[10:08:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:26] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:26] [INFO] [ImpactEffects] Blood effect spawned at (558.9003, 697.9669) (scale=1)
[10:08:26] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:26] [INFO] [Player] Spawning blood effect at (558.90027, 697.9669), dir=(-0.9394743, -0.34261942), lethal=False (C#)
[10:08:26] [INFO] [ImpactEffects] spawn_blood_effect called at (558.9003, 697.9669), dir=(-0.939474, -0.342619), lethal=false
[10:08:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:26] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:26] [INFO] [ImpactEffects] Blood effect spawned at (558.9003, 697.9669) (scale=1)
[10:08:26] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[10:08:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:08:26] [INFO] [LastChance] Threat detected: @Area2D@4455
[10:08:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.0453, 602.704), shooter_id=16514484799452, bullet_pos=(682.1038, 835.0018)
[10:08:26] [INFO] [Bullet] Using shooter_position, distance=333.333587646484
[10:08:26] [INFO] [Bullet] Distance to wall: 333.333587646484 (22.6972969292686% of viewport)
[10:08:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:08:26] [INFO] [LastChance] Threat detected: Bullet
[10:08:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:26] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:26] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[10:08:26] [INFO] [LastChance] Threat detected: @Area2D@4458
[10:08:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:26] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:26] [INFO] [Player] Spawning blood effect at (553.0207, 701.51373), dir=(0.7318359, 0.68148094), lethal=False (C#)
[10:08:26] [INFO] [ImpactEffects] spawn_blood_effect called at (553.0207, 701.5137), dir=(0.731836, 0.681481), lethal=false
[10:08:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:26] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:26] [INFO] [ImpactEffects] Blood effect spawned at (553.0207, 701.5137) (scale=1)
[10:08:26] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:08:26] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[10:08:26] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:26] [INFO] [Player] Spawning blood effect at (549.1543, 704.70746), dir=(-0.9462224, -0.32351688), lethal=False (C#)
[10:08:26] [INFO] [ImpactEffects] spawn_blood_effect called at (549.1543, 704.7075), dir=(-0.946222, -0.323517), lethal=false
[10:08:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:26] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:26] [INFO] [ImpactEffects] Blood effect spawned at (549.1543, 704.7075) (scale=1)
[10:08:26] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:26] [INFO] [Player] Spawning blood effect at (549.1543, 704.70746), dir=(0.5120474, 0.85895723), lethal=False (C#)
[10:08:26] [INFO] [ImpactEffects] spawn_blood_effect called at (549.1543, 704.7075), dir=(0.512047, 0.858957), lethal=false
[10:08:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:26] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:26] [INFO] [ImpactEffects] Blood effect spawned at (549.1543, 704.7075) (scale=1)
[10:08:26] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(401.9941, 546.8438), source=ENEMY (Enemy2), range=1469, listeners=10
[10:08:26] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[10:08:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.0453, 602.704), shooter_id=16514484799452, bullet_pos=(505.8452, 962.435)
[10:08:26] [INFO] [Bullet] Using shooter_position, distance=365.171508789063
[10:08:26] [INFO] [Bullet] Distance to wall: 365.171508789063 (24.8651995246413% of viewport)
[10:08:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:08:26] [INFO] [LastChance] Threat detected: @Area2D@4463
[10:08:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:26] [ENEMY] [Enemy4] [Grenade] TRIGGER ACTIVE: T2:Pursuit (grenades: 1)
[10:08:26] [ENEMY] [Enemy4] [Grenade] Target too close (137 < 150) - skipping throw
[10:08:26] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[10:08:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.0453, 602.704), shooter_id=16514484799452, bullet_pos=(551.2674, 1009.221)
[10:08:26] [INFO] [Bullet] Using shooter_position, distance=420.676086425781
[10:08:26] [INFO] [Bullet] Distance to wall: 420.676086425781 (28.644608279844% of viewport)
[10:08:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:08:26] [ENEMY] [Enemy4] [Grenade] Target too close (136 < 150) - skipping throw
[10:08:26] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:26] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[10:08:26] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[10:08:26] [INFO] [LastChance] Threat detected: Bullet
[10:08:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:26] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:26] [INFO] [Player] Spawning blood effect at (541.6355, 712.7614), dir=(0.6818744, 0.7314693), lethal=False (C#)
[10:08:26] [INFO] [ImpactEffects] spawn_blood_effect called at (541.6355, 712.7614), dir=(0.681874, 0.731469), lethal=false
[10:08:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:26] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:26] [INFO] [ImpactEffects] Blood effect spawned at (541.6355, 712.7614) (scale=1)
[10:08:26] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:08:26] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[10:08:26] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[10:08:26] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:26] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:26] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:08:26] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:08:26] [ENEMY] [Enemy1] Death animation component initialized
[10:08:26] [ENEMY] [Enemy2] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:26] [ENEMY] [Enemy2] [Grenade] Grenade system initialized: 1 grenades
[10:08:26] [ENEMY] [Enemy2] Death animation component initialized
[10:08:26] [ENEMY] [Enemy3] Death animation component initialized
[10:08:26] [ENEMY] [Enemy4] Death animation component initialized
[10:08:26] [ENEMY] [Enemy5] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:26] [ENEMY] [Enemy5] [Grenade] Grenade system initialized: 1 grenades
[10:08:26] [ENEMY] [Enemy5] Death animation component initialized
[10:08:26] [ENEMY] [Enemy6] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:26] [ENEMY] [Enemy6] [Grenade] Grenade system initialized: 1 grenades
[10:08:26] [ENEMY] [Enemy6] Death animation component initialized
[10:08:26] [ENEMY] [Enemy7] Death animation component initialized
[10:08:26] [ENEMY] [Enemy8] Death animation component initialized
[10:08:26] [ENEMY] [Enemy9] Death animation component initialized
[10:08:26] [ENEMY] [Enemy10] Death animation component initialized
[10:08:26] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:08:26] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:08:26] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:08:26] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:08:26] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:08:26] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:08:26] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:08:26] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:08:26] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[10:08:26] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:08:26] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:08:26] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:08:26] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:08:26] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:08:26] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:08:26] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:08:26] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:08:26] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:08:26] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:08:26] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:08:26] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:08:26] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:08:26] [INFO] [ScoreManager] Level started with 10 enemies
[10:08:26] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:08:26] [ENEMY] [Enemy1] Registered as sound listener
[10:08:26] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[10:08:26] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:08:26] [ENEMY] [Enemy2] Registered as sound listener
[10:08:26] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[10:08:26] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:08:26] [ENEMY] [Enemy3] Registered as sound listener
[10:08:26] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[10:08:26] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:08:26] [ENEMY] [Enemy4] Registered as sound listener
[10:08:26] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[10:08:26] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:08:26] [ENEMY] [Enemy5] Registered as sound listener
[10:08:26] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[10:08:26] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:08:26] [ENEMY] [Enemy6] Registered as sound listener
[10:08:26] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[10:08:26] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:08:26] [ENEMY] [Enemy7] Registered as sound listener
[10:08:26] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[10:08:26] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:08:26] [ENEMY] [Enemy8] Registered as sound listener
[10:08:26] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[10:08:26] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:08:26] [ENEMY] [Enemy9] Registered as sound listener
[10:08:26] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[10:08:26] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:08:26] [ENEMY] [Enemy10] Registered as sound listener
[10:08:26] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[10:08:27] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:08:27] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:08:27] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:08:27] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:08:27] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:08:27] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:08:27] [INFO] [LastChance] Found player: Player
[10:08:27] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:08:27] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:08:27] [INFO] [LastChance] Connected to player Died signal (C#)
[10:08:28] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:28] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:08:28] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:28] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:28] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:08:28] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=20
[10:08:28] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[10:08:28] [ENEMY] [Enemy1] Heard gunshot at (400, 550), source_type=1, intensity=0.05, distance=224
[10:08:28] [ENEMY] [Enemy3] Heard gunshot at (400, 550), source_type=1, intensity=0.02, distance=361
[10:08:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:08:28] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:08:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(300, 350), source=ENEMY (Enemy1), range=1469, listeners=10
[10:08:28] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=1, below_threshold=3
[10:08:28] [INFO] [LastChance] Threat detected: Bullet
[10:08:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:28] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:29] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:29] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:08:29] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:08:29] [ENEMY] [Enemy1] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:29] [ENEMY] [Enemy1] [Grenade] Grenade system initialized: 1 grenades
[10:08:29] [ENEMY] [Enemy1] Death animation component initialized
[10:08:29] [ENEMY] [Enemy2] Death animation component initialized
[10:08:29] [ENEMY] [Enemy3] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:29] [ENEMY] [Enemy3] [Grenade] Grenade system initialized: 1 grenades
[10:08:29] [ENEMY] [Enemy3] Death animation component initialized
[10:08:29] [ENEMY] [Enemy4] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:29] [ENEMY] [Enemy4] [Grenade] Grenade system initialized: 1 grenades
[10:08:29] [ENEMY] [Enemy4] Death animation component initialized
[10:08:29] [ENEMY] [Enemy5] Death animation component initialized
[10:08:29] [ENEMY] [Enemy6] Death animation component initialized
[10:08:29] [ENEMY] [Enemy7] Death animation component initialized
[10:08:29] [ENEMY] [Enemy8] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:29] [ENEMY] [Enemy8] [Grenade] Grenade system initialized: 1 grenades
[10:08:29] [ENEMY] [Enemy8] Death animation component initialized
[10:08:29] [ENEMY] [Enemy9] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:29] [ENEMY] [Enemy9] [Grenade] Grenade system initialized: 1 grenades
[10:08:29] [ENEMY] [Enemy9] Death animation component initialized
[10:08:29] [ENEMY] [Enemy10] Death animation component initialized
[10:08:29] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:08:29] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:08:29] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:08:29] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:08:29] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:08:29] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:08:29] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:08:29] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:08:29] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[10:08:29] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:08:29] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:08:29] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:08:29] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:08:29] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:08:29] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:08:29] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:08:29] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:08:29] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:08:29] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:08:29] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:08:29] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:08:29] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:08:29] [INFO] [ScoreManager] Level started with 10 enemies
[10:08:29] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:08:29] [ENEMY] [Enemy1] Registered as sound listener
[10:08:29] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[10:08:29] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:08:29] [ENEMY] [Enemy2] Registered as sound listener
[10:08:29] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[10:08:29] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:08:29] [ENEMY] [Enemy3] Registered as sound listener
[10:08:29] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[10:08:29] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:08:29] [ENEMY] [Enemy4] Registered as sound listener
[10:08:29] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[10:08:29] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:08:29] [ENEMY] [Enemy5] Registered as sound listener
[10:08:29] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[10:08:29] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:08:29] [ENEMY] [Enemy6] Registered as sound listener
[10:08:29] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[10:08:29] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:08:29] [ENEMY] [Enemy7] Registered as sound listener
[10:08:29] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[10:08:29] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:08:29] [ENEMY] [Enemy8] Registered as sound listener
[10:08:29] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[10:08:29] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:08:29] [ENEMY] [Enemy9] Registered as sound listener
[10:08:29] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[10:08:29] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:08:29] [ENEMY] [Enemy10] Registered as sound listener
[10:08:29] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[10:08:29] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:08:29] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:08:29] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:08:29] [INFO] [LastChance] Found player: Player
[10:08:29] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:08:29] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:08:29] [INFO] [LastChance] Connected to player Died signal (C#)
[10:08:29] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:08:29] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:08:29] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:08:30] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:30] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:08:30] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[10:08:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4832, 753.9004), source=ENEMY (Enemy3), range=1469, listeners=20
[10:08:30] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[10:08:30] [ENEMY] [Enemy2] Heard gunshot at (684.4832, 753.9004), source_type=1, intensity=0.02, distance=350
[10:08:30] [ENEMY] [Enemy4] Heard gunshot at (684.4832, 753.9004), source_type=1, intensity=0.07, distance=186
[10:08:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:30] [INFO] [LastChance] Threat detected: Bullet
[10:08:30] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:30] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:30] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:08:30] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:30] [INFO] [Player] Spawning blood effect at (450, 782.6666), dir=(-0.9925588, 0.12176641), lethal=False (C#)
[10:08:30] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 782.6666), dir=(-0.992559, 0.121766), lethal=false
[10:08:30] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:30] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:30] [INFO] [ImpactEffects] Blood effect spawned at (450, 782.6666) (scale=1)
[10:08:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4832, 753.9004), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:30] [INFO] [LastChance] Threat detected: Bullet
[10:08:30] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:31] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:31] [INFO] [Player] Spawning blood effect at (450, 796.6666), dir=(-0.99131894, 0.1314788), lethal=False (C#)
[10:08:31] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 796.6666), dir=(-0.991319, 0.131479), lethal=false
[10:08:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:31] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:31] [INFO] [ImpactEffects] Blood effect spawned at (450, 796.6666) (scale=1)
[10:08:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4832, 753.9004), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:31] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:31] [ENEMY] [Enemy1] Memory: medium confidence (0.61) - transitioning to PURSUING
[10:08:31] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[10:08:31] [INFO] [LastChance] Threat detected: Bullet
[10:08:31] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:31] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:31] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[10:08:31] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:31] [INFO] [Player] Spawning blood effect at (450, 825.1666), dir=(-0.9782109, 0.20761347), lethal=False (C#)
[10:08:31] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 825.1666), dir=(-0.978211, 0.207613), lethal=false
[10:08:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:31] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:31] [INFO] [ImpactEffects] Blood effect spawned at (450, 825.1666) (scale=1)
[10:08:31] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[10:08:31] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[10:08:31] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[10:08:31] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[10:08:31] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[10:08:31] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[10:08:31] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
[10:08:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:31] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:08:31] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:08:31] [ENEMY] [Enemy1] Death animation component initialized
[10:08:31] [ENEMY] [Enemy2] Death animation component initialized
[10:08:31] [ENEMY] [Enemy3] Death animation component initialized
[10:08:31] [ENEMY] [Enemy4] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:31] [ENEMY] [Enemy4] [Grenade] Grenade system initialized: 1 grenades
[10:08:31] [ENEMY] [Enemy4] Death animation component initialized
[10:08:31] [ENEMY] [Enemy5] Death animation component initialized
[10:08:31] [ENEMY] [Enemy6] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:31] [ENEMY] [Enemy6] [Grenade] Grenade system initialized: 1 grenades
[10:08:31] [ENEMY] [Enemy6] Death animation component initialized
[10:08:31] [ENEMY] [Enemy7] Death animation component initialized
[10:08:31] [ENEMY] [Enemy8] Death animation component initialized
[10:08:31] [ENEMY] [Enemy9] Death animation component initialized
[10:08:31] [ENEMY] [Enemy10] Death animation component initialized
[10:08:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:08:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:08:31] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:08:31] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:08:31] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:08:31] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:08:31] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:08:31] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:08:31] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[10:08:31] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:08:31] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:08:31] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:08:31] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:08:31] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:08:31] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:08:31] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:08:31] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:08:31] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:08:31] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:08:31] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:08:31] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:08:31] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:08:31] [INFO] [ScoreManager] Level started with 10 enemies
[10:08:31] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:08:31] [ENEMY] [Enemy1] Registered as sound listener
[10:08:31] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[10:08:31] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:08:31] [ENEMY] [Enemy2] Registered as sound listener
[10:08:31] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[10:08:31] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:08:31] [ENEMY] [Enemy3] Registered as sound listener
[10:08:31] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[10:08:31] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:08:31] [ENEMY] [Enemy4] Registered as sound listener
[10:08:31] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[10:08:31] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:08:31] [ENEMY] [Enemy5] Registered as sound listener
[10:08:31] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[10:08:31] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:08:31] [ENEMY] [Enemy6] Registered as sound listener
[10:08:31] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[10:08:31] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:08:31] [ENEMY] [Enemy7] Registered as sound listener
[10:08:31] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[10:08:31] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:08:31] [ENEMY] [Enemy8] Registered as sound listener
[10:08:31] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[10:08:31] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:08:31] [ENEMY] [Enemy9] Registered as sound listener
[10:08:31] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[10:08:31] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:08:31] [ENEMY] [Enemy10] Registered as sound listener
[10:08:31] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[10:08:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:08:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:08:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:08:31] [INFO] [LastChance] Found player: Player
[10:08:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:08:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:08:31] [INFO] [LastChance] Connected to player Died signal (C#)
[10:08:31] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:08:31] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:08:31] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:08:33] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:33] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:08:33] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:08:33] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:33] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:33] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:08:33] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:08:33] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=20
[10:08:33] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[10:08:33] [ENEMY] [Enemy3] Heard gunshot at (400, 550), source_type=1, intensity=0.02, distance=361
[10:08:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:08:33] [INFO] [LastChance] Threat detected: Bullet
[10:08:33] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:33] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:33] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[10:08:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[10:08:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[10:08:33] [INFO] [LastChance] Threat detected: @Area2D@5306
[10:08:33] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:33] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:33] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[10:08:33] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[10:08:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.995, 606.4534), shooter_id=19151645051048, bullet_pos=(681.6564, 891.5046)
[10:08:33] [INFO] [Bullet] Using shooter_position, distance=375.000122070313
[10:08:33] [INFO] [Bullet] Distance to wall: 375.000122070313 (25.5344478761878% of viewport)
[10:08:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
[10:08:33] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:33] [INFO] [LastChance] Threat detected: @Area2D@5308
[10:08:33] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:33] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:33] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:33] [INFO] [Player] Spawning blood effect at (553.8511, 704.7257), dir=(0.698313, 0.7157926), lethal=False (C#)
[10:08:33] [INFO] [ImpactEffects] spawn_blood_effect called at (553.8511, 704.7257), dir=(0.698313, 0.715793), lethal=false
[10:08:33] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:33] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:33] [INFO] [ImpactEffects] Blood effect spawned at (553.8511, 704.7257) (scale=1)
[10:08:33] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[10:08:33] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:33] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:33] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:08:33] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:08:33] [ENEMY] [Enemy1] Death animation component initialized
[10:08:33] [ENEMY] [Enemy2] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:33] [ENEMY] [Enemy2] [Grenade] Grenade system initialized: 1 grenades
[10:08:33] [ENEMY] [Enemy2] Death animation component initialized
[10:08:33] [ENEMY] [Enemy3] Death animation component initialized
[10:08:33] [ENEMY] [Enemy4] Death animation component initialized
[10:08:33] [ENEMY] [Enemy5] Death animation component initialized
[10:08:33] [ENEMY] [Enemy6] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:33] [ENEMY] [Enemy6] [Grenade] Grenade system initialized: 1 grenades
[10:08:33] [ENEMY] [Enemy6] Death animation component initialized
[10:08:33] [ENEMY] [Enemy7] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:33] [ENEMY] [Enemy7] [Grenade] Grenade system initialized: 1 grenades
[10:08:33] [ENEMY] [Enemy7] Death animation component initialized
[10:08:33] [ENEMY] [Enemy8] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:33] [ENEMY] [Enemy8] [Grenade] Grenade system initialized: 1 grenades
[10:08:33] [ENEMY] [Enemy8] Death animation component initialized
[10:08:33] [ENEMY] [Enemy9] Death animation component initialized
[10:08:33] [ENEMY] [Enemy10] Death animation component initialized
[10:08:33] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:08:33] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:08:33] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:08:33] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:08:33] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:08:33] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:08:33] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:08:33] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:08:33] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[10:08:33] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:08:33] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:08:33] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:08:33] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:08:33] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:08:33] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:08:33] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:08:33] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:08:33] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:08:33] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:08:33] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:08:33] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:08:33] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:08:33] [INFO] [ScoreManager] Level started with 10 enemies
[10:08:33] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:08:33] [ENEMY] [Enemy1] Registered as sound listener
[10:08:33] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[10:08:33] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:08:33] [ENEMY] [Enemy2] Registered as sound listener
[10:08:33] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[10:08:33] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:08:33] [ENEMY] [Enemy3] Registered as sound listener
[10:08:33] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[10:08:33] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:08:33] [ENEMY] [Enemy4] Registered as sound listener
[10:08:33] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[10:08:33] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:08:33] [ENEMY] [Enemy5] Registered as sound listener
[10:08:33] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[10:08:33] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:08:33] [ENEMY] [Enemy6] Registered as sound listener
[10:08:33] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[10:08:33] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:08:33] [ENEMY] [Enemy7] Registered as sound listener
[10:08:33] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[10:08:33] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:08:33] [ENEMY] [Enemy8] Registered as sound listener
[10:08:33] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[10:08:33] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:08:33] [ENEMY] [Enemy9] Registered as sound listener
[10:08:33] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[10:08:33] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:08:33] [ENEMY] [Enemy10] Registered as sound listener
[10:08:33] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[10:08:34] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:08:34] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:08:34] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:08:34] [INFO] [LastChance] Found player: Player
[10:08:34] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:08:34] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:08:34] [INFO] [LastChance] Connected to player Died signal (C#)
[10:08:34] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:08:34] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:08:34] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:08:35] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:35] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:08:35] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[10:08:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.5546, 754.175), source=ENEMY (Enemy3), range=1469, listeners=20
[10:08:35] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[10:08:35] [ENEMY] [Enemy2] Heard gunshot at (684.5546, 754.175), source_type=1, intensity=0.02, distance=350
[10:08:35] [ENEMY] [Enemy4] Heard gunshot at (684.5546, 754.175), source_type=1, intensity=0.07, distance=186
[10:08:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:35] [INFO] [LastChance] Threat detected: Bullet
[10:08:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:35] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:35] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:08:35] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:35] [INFO] [Player] Spawning blood effect at (450, 795.4444), dir=(-0.9847119, 0.17419101), lethal=False (C#)
[10:08:35] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 795.4444), dir=(-0.984712, 0.174191), lethal=false
[10:08:35] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:35] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:35] [INFO] [ImpactEffects] Blood effect spawned at (450, 795.4444) (scale=1)
[10:08:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.5546, 754.175), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:35] [INFO] [LastChance] Threat detected: Bullet
[10:08:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:35] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:35] [INFO] [Player] Spawning blood effect at (450, 795.4444), dir=(-0.98487157, 0.17328615), lethal=False (C#)
[10:08:35] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 795.4444), dir=(-0.984872, 0.173286), lethal=false
[10:08:35] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:35] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:35] [INFO] [ImpactEffects] Blood effect spawned at (450, 795.4444) (scale=1)
[10:08:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.5546, 754.175), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:36] [INFO] [LastChance] Threat detected: Bullet
[10:08:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:36] [ENEMY] [Enemy1] Memory: medium confidence (0.61) - transitioning to PURSUING
[10:08:36] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[10:08:36] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[10:08:36] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:36] [INFO] [Player] Spawning blood effect at (450, 795.4444), dir=(-0.98487157, 0.17328615), lethal=False (C#)
[10:08:36] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 795.4444), dir=(-0.984872, 0.173286), lethal=false
[10:08:36] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:36] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:36] [INFO] [ImpactEffects] Blood effect spawned at (450, 795.4444) (scale=1)
[10:08:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.5546, 754.175), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:36] [INFO] [LastChance] Threat detected: Bullet
[10:08:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:36] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[10:08:36] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:36] [INFO] [Player] Spawning blood effect at (450, 795.4444), dir=(-0.98487157, 0.17328615), lethal=False (C#)
[10:08:36] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 795.4444), dir=(-0.984872, 0.173286), lethal=false
[10:08:36] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:36] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:36] [INFO] [ImpactEffects] Blood effect spawned at (450, 795.4444) (scale=1)
[10:08:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.5546, 754.175), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:36] [INFO] [LastChance] Threat detected: Bullet
[10:08:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:36] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[10:08:36] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[10:08:36] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:36] [INFO] [Player] Spawning blood effect at (450, 795.4444), dir=(-0.98487157, 0.17328615), lethal=False (C#)
[10:08:36] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 795.4444), dir=(-0.984872, 0.173286), lethal=false
[10:08:36] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:36] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:36] [INFO] [ImpactEffects] Blood effect spawned at (450, 795.4444) (scale=1)
[10:08:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.5546, 754.175), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[10:08:36] [INFO] [LastChance] Threat detected: Bullet
[10:08:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:36] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[10:08:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[10:08:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[10:08:36] [INFO] [LastChance] Resetting all effects (scene change detected)
[10:08:36] [ENEMY] [Enemy1] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:36] [ENEMY] [Enemy1] [Grenade] Grenade system initialized: 1 grenades
[10:08:36] [ENEMY] [Enemy1] Death animation component initialized
[10:08:36] [ENEMY] [Enemy2] Death animation component initialized
[10:08:36] [ENEMY] [Enemy3] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:36] [ENEMY] [Enemy3] [Grenade] Grenade system initialized: 1 grenades
[10:08:36] [ENEMY] [Enemy3] Death animation component initialized
[10:08:36] [ENEMY] [Enemy4] Death animation component initialized
[10:08:36] [ENEMY] [Enemy5] Death animation component initialized
[10:08:36] [ENEMY] [Enemy6] Death animation component initialized
[10:08:36] [ENEMY] [Enemy7] [Grenade] DifficultyManager assigned 1 grenades (map: BuildingLevel)
[10:08:36] [ENEMY] [Enemy7] [Grenade] Grenade system initialized: 1 grenades
[10:08:36] [ENEMY] [Enemy7] Death animation component initialized
[10:08:36] [ENEMY] [Enemy8] Death animation component initialized
[10:08:36] [ENEMY] [Enemy9] Death animation component initialized
[10:08:36] [ENEMY] [Enemy10] Death animation component initialized
[10:08:36] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[10:08:36] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[10:08:36] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[10:08:36] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[10:08:36] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[10:08:36] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[10:08:36] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[10:08:36] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[10:08:36] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[10:08:36] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[10:08:36] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[10:08:36] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[10:08:36] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[10:08:36] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[10:08:36] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[10:08:36] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[10:08:36] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[10:08:36] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[10:08:36] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[10:08:36] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[10:08:36] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[10:08:36] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[10:08:36] [INFO] [ScoreManager] Level started with 10 enemies
[10:08:36] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[10:08:36] [ENEMY] [Enemy1] Registered as sound listener
[10:08:36] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[10:08:36] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[10:08:36] [ENEMY] [Enemy2] Registered as sound listener
[10:08:36] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[10:08:36] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[10:08:36] [ENEMY] [Enemy3] Registered as sound listener
[10:08:36] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[10:08:36] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[10:08:36] [ENEMY] [Enemy4] Registered as sound listener
[10:08:36] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[10:08:36] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[10:08:36] [ENEMY] [Enemy5] Registered as sound listener
[10:08:36] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[10:08:36] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[10:08:36] [ENEMY] [Enemy6] Registered as sound listener
[10:08:36] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[10:08:36] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[10:08:36] [ENEMY] [Enemy7] Registered as sound listener
[10:08:36] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[10:08:36] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[10:08:36] [ENEMY] [Enemy8] Registered as sound listener
[10:08:36] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[10:08:36] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[10:08:36] [ENEMY] [Enemy9] Registered as sound listener
[10:08:36] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[10:08:36] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[10:08:36] [ENEMY] [Enemy10] Registered as sound listener
[10:08:36] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[10:08:36] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[10:08:36] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[10:08:36] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[10:08:36] [INFO] [LastChance] Found player: Player
[10:08:36] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[10:08:36] [INFO] [LastChance] Connected to player Damaged signal (C#)
[10:08:36] [INFO] [LastChance] Connected to player Died signal (C#)
[10:08:36] [INFO] [Player] Detecting weapon pose (frame 3)...
[10:08:36] [INFO] [Player] Detected weapon: Rifle (default pose)
[10:08:36] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[10:08:37] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:37] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[10:08:38] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[10:08:38] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[10:08:38] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[10:08:38] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[10:08:39] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[10:08:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[10:08:39] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[10:08:39] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[10:08:39] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[10:08:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:39] [INFO] [LastChance] Threat detected: Bullet
[10:08:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:39] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:39] [INFO] [Player] Spawning blood effect at (599.5776, 622.53), dir=(-0.62537754, -0.7803224), lethal=False (C#)
[10:08:39] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.53), dir=(-0.625378, -0.780322), lethal=false
[10:08:39] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:39] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:39] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.53) (scale=1)
[10:08:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:39] [INFO] [LastChance] Threat detected: Bullet
[10:08:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:39] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:39] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(-0.618341, -0.7859099), lethal=False (C#)
[10:08:39] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(-0.618341, -0.78591), lethal=false
[10:08:39] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:39] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:39] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:39] [ENEMY] [Enemy1] Memory: medium confidence (0.61) - transitioning to PURSUING
[10:08:39] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[10:08:39] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[10:08:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:39] [INFO] [LastChance] Threat detected: Bullet
[10:08:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:39] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:39] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(-0.618341, -0.7859099), lethal=False (C#)
[10:08:39] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(-0.618341, -0.78591), lethal=false
[10:08:39] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:39] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:39] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[10:08:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[10:08:39] [INFO] [LastChance] Threat detected: Bullet
[10:08:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:39] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:39] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(-0.618341, -0.7859099), lethal=False (C#)
[10:08:39] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(-0.618341, -0.78591), lethal=false
[10:08:39] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:39] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:39] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:39] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[10:08:39] [INFO] [LastChance] Threat detected: Bullet
[10:08:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:39] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:39] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(-0.618341, -0.7859099), lethal=False (C#)
[10:08:39] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(-0.618341, -0.78591), lethal=false
[10:08:39] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:39] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:39] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:39] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[10:08:39] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[10:08:39] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[10:08:39] [INFO] [LastChance] Threat detected: Bullet
[10:08:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:08:39] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:39] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(-0.618341, -0.7859099), lethal=False (C#)
[10:08:39] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(-0.618341, -0.78591), lethal=false
[10:08:39] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:39] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:40] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:40] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:40] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[10:08:40] [INFO] [LastChance] Threat detected: Bullet
[10:08:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:40] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:40] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(-0.618341, -0.7859099), lethal=False (C#)
[10:08:40] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(-0.618341, -0.78591), lethal=false
[10:08:40] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:40] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:40] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:40] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=10
[10:08:40] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[10:08:40] [ENEMY] [Enemy3] Hit taken, health: 1/2
[10:08:40] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[10:08:40] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(-0.72083, -0.693112), lethal=false
[10:08:40] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:40] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:40] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[10:08:40] [ENEMY] [Enemy3] [Grenade] TRIGGER ACTIVE: T6:Desperation (grenades: 1)
[10:08:40] [ENEMY] [Enemy3] [Grenade] Preparing throw (400ms delay)...
[10:08:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[10:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[10:08:40] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[10:08:40] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[10:08:40] [INFO] [LastChance] Threat detected: Bullet
[10:08:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:40] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:40] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(-0.618341, -0.7859099), lethal=False (C#)
[10:08:40] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(-0.618341, -0.78591), lethal=false
[10:08:40] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:40] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:40] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:40] [ENEMY] [Enemy1] PURSUING corner check: angle 153.7°
[10:08:40] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=10
[10:08:40] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[10:08:40] [ENEMY] [Enemy3] Hit taken, health: 0/2
[10:08:40] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[10:08:40] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(-0.72083, -0.693112), lethal=true
[10:08:40] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:40] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[10:08:40] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1.5)
[10:08:40] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[10:08:40] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[10:08:40] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[10:08:40] [INFO] [DeathAnim] Started - Angle: -136.1 deg, Index: 2
[10:08:40] [ENEMY] [Enemy3] Death animation started with hit direction: (-0.72083, -0.693112)
[10:08:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:08:40] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=9
[10:08:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[10:08:40] [INFO] [LastChance] Threat detected: Bullet
[10:08:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:40] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:40] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(-0.7208303, -0.69311154), lethal=False (C#)
[10:08:40] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(-0.72083, -0.693112), lethal=false
[10:08:40] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:40] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:40] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:40] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=9
[10:08:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[10:08:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[10:08:40] [INFO] [LastChance] Threat detected: Bullet
[10:08:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:40] [ENEMY] [Enemy3] [Grenade] Throw cancelled - incapacitated during delay
[10:08:40] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:40] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(-0.7208303, -0.69311154), lethal=False (C#)
[10:08:40] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(-0.72083, -0.693112), lethal=false
[10:08:40] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:40] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:40] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:40] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=9
[10:08:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[10:08:40] [INFO] [LastChance] Threat detected: Bullet
[10:08:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:08:40] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:40] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(-0.7208303, -0.69311154), lethal=False (C#)
[10:08:40] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(-0.72083, -0.693112), lethal=false
[10:08:40] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:40] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:40] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:40] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=9
[10:08:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[10:08:40] [ENEMY] [Enemy3] Ragdoll activated
[10:08:40] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[10:08:40] [INFO] [LastChance] Threat detected: Bullet
[10:08:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:40] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:40] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(-0.7208303, -0.69311154), lethal=False (C#)
[10:08:40] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(-0.72083, -0.693112), lethal=false
[10:08:40] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:40] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:40] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:40] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=9
[10:08:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[10:08:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[10:08:40] [INFO] [LastChance] Threat detected: Bullet
[10:08:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:40] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:40] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(-0.7208303, -0.69311154), lethal=False (C#)
[10:08:40] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(-0.72083, -0.693112), lethal=false
[10:08:40] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:40] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:40] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:40] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=9
[10:08:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[10:08:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:08:40] [INFO] [LastChance] Threat detected: Bullet
[10:08:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:41] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:41] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(-0.7208303, -0.69311154), lethal=False (C#)
[10:08:41] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(-0.72083, -0.693112), lethal=false
[10:08:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:41] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:41] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:41] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=9
[10:08:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[10:08:41] [INFO] [LastChance] Threat detected: Bullet
[10:08:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:41] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:41] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(-0.7208303, -0.69311154), lethal=False (C#)
[10:08:41] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(-0.72083, -0.693112), lethal=false
[10:08:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:41] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:41] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[10:08:41] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=9
[10:08:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[10:08:41] [INFO] [LastChance] Threat detected: Bullet
[10:08:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:41] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:41] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(-0.7208303, -0.69311154), lethal=False (C#)
[10:08:41] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(-0.72083, -0.693112), lethal=false
[10:08:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:41] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:41] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:41] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=9
[10:08:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[10:08:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:08:41] [INFO] [LastChance] Threat detected: Bullet
[10:08:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:41] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:41] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(-0.7208303, -0.69311154), lethal=False (C#)
[10:08:41] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(-0.72083, -0.693112), lethal=false
[10:08:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:41] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:41] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:41] [ENEMY] [Enemy2] PURSUING corner check: angle -94.0°
[10:08:41] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=9
[10:08:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[10:08:41] [INFO] [LastChance] Threat detected: Bullet
[10:08:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[10:08:41] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=9
[10:08:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[10:08:41] [INFO] [LastChance] Threat detected: Bullet
[10:08:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:08:41] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=9
[10:08:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[10:08:41] [INFO] [LastChance] Threat detected: Bullet
[10:08:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:41] [ENEMY] [Enemy3] Death animation completed
[10:08:41] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=9
[10:08:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[10:08:41] [INFO] [LastChance] Threat detected: Bullet
[10:08:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[10:08:41] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=9
[10:08:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[10:08:41] [INFO] [LastChance] Threat detected: Bullet
[10:08:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[10:08:42] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=9
[10:08:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[10:08:42] [INFO] [LastChance] Threat detected: Bullet
[10:08:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:08:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(465.6041, 590.5502), source=ENEMY (Enemy1), range=1469, listeners=9
[10:08:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[10:08:42] [INFO] [LastChance] Threat detected: @Area2D@6106
[10:08:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:42] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[10:08:42] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:42] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(0.9729455, 0.23103435), lethal=False (C#)
[10:08:42] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(0.972946, 0.231034), lethal=false
[10:08:42] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:42] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:42] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:42] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=9
[10:08:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[10:08:42] [INFO] [LastChance] Threat detected: Bullet
[10:08:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:08:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(467.0031, 606.489), source=ENEMY (Enemy1), range=1469, listeners=9
[10:08:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[10:08:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[10:08:42] [INFO] [LastChance] Threat detected: @Area2D@6109
[10:08:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:42] [INFO] [Player] Hit blocked by invincibility mode (C#)
[10:08:42] [INFO] [Player] Spawning blood effect at (599.5776, 622.36334), dir=(0.99290746, 0.11889014), lethal=False (C#)
[10:08:42] [INFO] [ImpactEffects] spawn_blood_effect called at (599.5776, 622.3633), dir=(0.992907, 0.11889), lethal=false
[10:08:42] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[10:08:42] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[10:08:42] [INFO] [ImpactEffects] Blood effect spawned at (599.5776, 622.3633) (scale=1)
[10:08:42] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[10:08:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.5947, 793.535), source=ENEMY (Enemy4), range=1469, listeners=9
[10:08:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[10:08:42] [INFO] [LastChance] Threat detected: Bullet
[10:08:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[10:08:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[10:08:42] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[10:08:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[10:08:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(467.0031, 606.489), source=ENEMY (Enemy1), range=1469, listeners=9
[10:08:42] [ENEMY] [Enemy2] Heard gunshot at (467.0031, 606.489), source_type=1, intensity=0.82, distance=55
[10:08:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[10:08:42] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[10:08:42] [INFO] ------------------------------------------------------------
[10:08:42] [INFO] GAME LOG ENDED: 2026-01-25T10:08:42
[10:08:42] [INFO] ============================================================
