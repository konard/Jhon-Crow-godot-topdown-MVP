[03:51:27] [INFO] ============================================================
[03:51:27] [INFO] GAME LOG STARTED
[03:51:27] [INFO] ============================================================
[03:51:27] [INFO] Timestamp: 2026-01-25T03:51:27
[03:51:27] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260125_035127.txt
[03:51:27] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
[03:51:27] [INFO] OS: Windows
[03:51:27] [INFO] Debug build: false
[03:51:27] [INFO] Engine version: 4.3-stable (official)
[03:51:27] [INFO] Project: Godot Top-Down Template
[03:51:27] [INFO] ------------------------------------------------------------
[03:51:27] [INFO] [GameManager] GameManager ready
[03:51:27] [INFO] [ScoreManager] ScoreManager ready
[03:51:27] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[03:51:27] [INFO] [ImpactEffects] Scenes loaded: DustEffect, BloodEffect, SparksEffect, BloodDecal
[03:51:27] [INFO] [ImpactEffects] ImpactEffectsManager ready - FULL VERSION with blood effects enabled
[03:51:27] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:51:27] [INFO] [PenultimateHit] Saturation shader loaded successfully
[03:51:27] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[03:51:27] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[03:51:27] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[03:51:27] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[03:51:27] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[03:51:27] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:51:27] [INFO] [LastChance] Last chance shader loaded successfully
[03:51:27] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[03:51:27] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[03:51:27] [INFO] [LastChance]   Sepia intensity: 0.70
[03:51:27] [INFO] [LastChance]   Brightness: 0.60
[03:51:27] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[03:51:27] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[03:51:27] [INFO] [ExperimentalSettings] ExperimentalSettings initialized - FOV enabled: true
[03:51:27] [ENEMY] [Enemy1] Death animation component initialized
[03:51:27] [ENEMY] [Enemy2] Death animation component initialized
[03:51:27] [ENEMY] [Enemy3] Death animation component initialized
[03:51:27] [ENEMY] [Enemy4] Death animation component initialized
[03:51:27] [ENEMY] [Enemy5] Death animation component initialized
[03:51:27] [ENEMY] [Enemy6] Death animation component initialized
[03:51:27] [ENEMY] [Enemy7] Death animation component initialized
[03:51:27] [ENEMY] [Enemy8] Death animation component initialized
[03:51:27] [ENEMY] [Enemy9] Death animation component initialized
[03:51:27] [ENEMY] [Enemy10] Death animation component initialized
[03:51:27] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:51:27] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:51:27] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:51:27] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:51:27] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:51:27] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:51:27] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:51:27] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:51:28] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[03:51:28] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:51:28] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:51:28] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:51:28] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:51:28] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:51:28] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:51:28] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:51:28] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:51:28] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:51:28] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:51:28] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:51:28] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:51:28] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:51:28] [INFO] [ScoreManager] Level started with 10 enemies
[03:51:28] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[03:51:28] [ENEMY] [Enemy1] Registered as sound listener
[03:51:28] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[03:51:28] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[03:51:28] [ENEMY] [Enemy2] Registered as sound listener
[03:51:28] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[03:51:28] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[03:51:28] [ENEMY] [Enemy3] Registered as sound listener
[03:51:28] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[03:51:28] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[03:51:28] [ENEMY] [Enemy4] Registered as sound listener
[03:51:28] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[03:51:28] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[03:51:28] [ENEMY] [Enemy5] Registered as sound listener
[03:51:28] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[03:51:28] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[03:51:28] [ENEMY] [Enemy6] Registered as sound listener
[03:51:28] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[03:51:28] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[03:51:28] [ENEMY] [Enemy7] Registered as sound listener
[03:51:28] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 3, behavior: PATROL, player_found: yes
[03:51:28] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[03:51:28] [ENEMY] [Enemy8] Registered as sound listener
[03:51:28] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[03:51:28] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[03:51:28] [ENEMY] [Enemy9] Registered as sound listener
[03:51:28] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[03:51:28] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[03:51:28] [ENEMY] [Enemy10] Registered as sound listener
[03:51:28] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[03:51:28] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:51:28] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:51:28] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:51:28] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:51:28] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:51:28] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:51:28] [INFO] [LastChance] Found player: Player
[03:51:28] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:51:28] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:51:28] [INFO] [LastChance] Connected to player Died signal (C#)
[03:51:29] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:51:29] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:51:29] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:51:29] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:51:30] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:51:30] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:51:30] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:51:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:51:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:31] [INFO] [Player] Invincibility mode: ON
[03:51:31] [INFO] [GameManager] Invincibility mode toggled: ON
[03:51:31] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:51:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:51:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:32] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:51:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:32] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:51:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:32] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:51:33] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:33] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:51:33] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:33] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:51:33] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(453.0796, 804.9423), source=PLAYER (AssaultRifle), range=1469, listeners=10
[03:51:33] [ENEMY] [Enemy1] Heard gunshot at (453.0796, 804.9423), source_type=0, intensity=0.01, distance=480
[03:51:33] [ENEMY] [Enemy2] Heard gunshot at (453.0796, 804.9423), source_type=0, intensity=0.04, distance=260
[03:51:33] [ENEMY] [Enemy3] Heard gunshot at (453.0796, 804.9423), source_type=0, intensity=0.04, distance=253
[03:51:33] [ENEMY] [Enemy4] Heard gunshot at (453.0796, 804.9423), source_type=0, intensity=0.02, distance=360
[03:51:33] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:51:33] [ENEMY] [Enemy3] Hit taken, health: 2/3
[03:51:33] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:51:33] [INFO] [ImpactEffects] spawn_blood_effect called at (689.5369, 752.0739), dir=(1, 0), lethal=false
[03:51:33] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:51:33] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:51:33] [INFO] [ImpactEffects] Blood effect spawned at (689.5369, 752.0739) (scale=1)
[03:51:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(467.6846, 776.9553), source=PLAYER (AssaultRifle), range=1469, listeners=10
[03:51:33] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:51:34] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5369, 752.0739), source=ENEMY (Enemy3), range=1469, listeners=10
[03:51:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:51:34] [INFO] [LastChance] Threat detected: @Area2D@287
[03:51:34] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:51:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:51:34] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:51:34] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:51:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(504.6962, 757.5709), source=PLAYER (AssaultRifle), range=1469, listeners=10
[03:51:34] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:51:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(467.6846, 776.9553), shooter_id=46456112833, bullet_pos=(934.3208, 622.07764)
[03:51:34] [INFO] [Bullet] Using shooter_position, distance=491,667
[03:51:34] [INFO] [Bullet] Distance to wall: 491,667 (33,47851% of viewport)
[03:51:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:51:34] [INFO] [Bullet] Starting wall penetration at (934.3208, 622.07764)
[03:51:34] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36,56404
[03:51:34] [INFO] [Bullet] Body exited signal received for penetrating body
[03:51:34] [INFO] [Bullet] Exiting penetration at (970.7026, 610.00244) after traveling 33,333336 pixels through wall
[03:51:34] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[03:51:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3232, 758.8292), source=ENEMY (Enemy3), range=1469, listeners=10
[03:51:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:51:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(677.8062, 767.2734), source=ENEMY (Enemy3), range=1469, listeners=10
[03:51:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:51:34] [INFO] [LastChance] Threat detected: Bullet
[03:51:34] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:51:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:51:34] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:51:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(504.6962, 757.5709), shooter_id=46456112833, bullet_pos=(925.71704, 699.5508)
[03:51:34] [INFO] [Bullet] Using shooter_position, distance=424,99988
[03:51:34] [INFO] [Bullet] Distance to wall: 424,99988 (28,939024% of viewport)
[03:51:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:51:34] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:51:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.6824, 779.0955), source=ENEMY (Enemy3), range=1469, listeners=10
[03:51:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:51:34] [INFO] [LastChance] Threat detected: Bullet
[03:51:34] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:51:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:51:34] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:51:34] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:34] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[03:51:34] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:51:34] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[03:51:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(617.7855, 763.1856), shooter_id=43637540377, bullet_pos=(55.94778, 837.0065)
[03:51:34] [INFO] [Bullet] Using shooter_position, distance=566.666748046875
[03:51:34] [INFO] [Bullet] Distance to wall: 566.666748046875 (38.5853808827794% of viewport)
[03:51:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:51:34] [INFO] [Bullet] Starting wall penetration at (55.94778, 837.0065)
[03:51:34] [INFO] [Bullet] Raycast backward hit penetrating body at distance 14.1797275543213
[03:51:34] [INFO] [Bullet] Body exited signal received for penetrating body
[03:51:34] [INFO] [Bullet] Exiting penetration at (17.94111, 842.0003) after traveling 33.3333358764648 pixels through wall
[03:51:34] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:51:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(640.2158, 714.0836), source=PLAYER (AssaultRifle), range=1469, listeners=10
[03:51:34] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
[03:51:34] [ENEMY] [Enemy3] Hit taken, health: 1/3
[03:51:34] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:51:34] [INFO] [ImpactEffects] spawn_blood_effect called at (598.7233, 869.7813), dir=(1, 0), lethal=false
[03:51:34] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:51:34] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:51:34] [INFO] [ImpactEffects] Wall found for blood splatter at (680, 869.7813) (dist=81 px)
[03:51:34] [INFO] [ImpactEffects] Blood effect spawned at (598.7233, 869.7813) (scale=1)
[03:51:34] [ENEMY] [Enemy7] PATROL corner check: angle 89.3°
[03:51:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(665.1059, 689.1934), source=PLAYER (AssaultRifle), range=1469, listeners=10
[03:51:34] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
[03:51:34] [ENEMY] [Enemy3] Hit taken, health: 0/3
[03:51:34] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:51:34] [INFO] [ImpactEffects] spawn_blood_effect called at (569.7984, 900.3348), dir=(1, 0), lethal=true
[03:51:34] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:51:34] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[03:51:34] [INFO] [ImpactEffects] Blood effect spawned at (569.7984, 900.3348) (scale=1.5)
[03:51:34] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[03:51:34] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[03:51:34] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[03:51:34] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[03:51:34] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[03:51:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.996, 664.3033), source=PLAYER (AssaultRifle), range=1469, listeners=9
[03:51:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[03:51:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(689.99603, 664.3033), shooter_id=46456112833, bullet_pos=(531.9175, 1022.65247)
[03:51:35] [INFO] [Bullet] Using shooter_position, distance=391,6669
[03:51:35] [INFO] [Bullet] Distance to wall: 391,6669 (26,669321% of viewport)
[03:51:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:51:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(689.99603, 664.3033), shooter_id=46456112833, bullet_pos=(513.56976, 994.8232)
[03:51:35] [INFO] [Bullet] Using shooter_position, distance=374,65936
[03:51:35] [INFO] [Bullet] Distance to wall: 374,65936 (25,511248% of viewport)
[03:51:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:51:35] [INFO] [Bullet] Starting wall penetration at (513.56976, 994.8232)
[03:51:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(689.99603, 664.3033), shooter_id=46456112833, bullet_pos=(510.8176, 990.6488)
[03:51:35] [INFO] [Bullet] Using shooter_position, distance=372,29868
[03:51:35] [INFO] [Bullet] Distance to wall: 372,29868 (25,350502% of viewport)
[03:51:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:51:35] [ENEMY] [Enemy7] PATROL corner check: angle 89.3°
[03:51:35] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[03:51:35] [INFO] [Bullet] Exiting penetration at (491.525, 1012.412) after traveling 24,083334 pixels through wall
[03:51:35] [INFO] [Bullet] Damage multiplier after penetration: 0,225
[03:51:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:35] [ENEMY] [Enemy3] Ragdoll activated
[03:51:35] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[03:51:35] [ENEMY] [Enemy7] PATROL corner check: angle 89.3°
[03:51:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:35] [ENEMY] [Enemy7] PATROL corner check: angle 89.2°
[03:51:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:36] [ENEMY] [Enemy1] PURSUING corner check: angle -131.6°
[03:51:36] [ENEMY] [Enemy2] PURSUING corner check: angle 153.7°
[03:51:36] [ENEMY] [Enemy7] PATROL corner check: angle 89.2°
[03:51:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:36] [ENEMY] [Enemy1] PURSUING corner check: angle -75.7°
[03:51:36] [ENEMY] [Enemy3] Death animation completed
[03:51:36] [ENEMY] [Enemy7] PATROL corner check: angle 89.2°
[03:51:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:37] [ENEMY] [Enemy1] PURSUING corner check: angle -74.1°
[03:51:37] [ENEMY] [Enemy7] PATROL corner check: angle 89.2°
[03:51:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:37] [ENEMY] [Enemy7] PATROL corner check: angle 89.2°
[03:51:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:37] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[03:51:37] [ENEMY] [Enemy1] Player reloading state changed: false -> true
[03:51:37] [ENEMY] [Enemy2] Player reloading state changed: false -> true
[03:51:37] [ENEMY] [Enemy4] Player reloading state changed: false -> true
[03:51:37] [ENEMY] [Enemy5] Player reloading state changed: false -> true
[03:51:37] [ENEMY] [Enemy6] Player reloading state changed: false -> true
[03:51:37] [ENEMY] [Enemy7] Player reloading state changed: false -> true
[03:51:37] [ENEMY] [Enemy8] Player reloading state changed: false -> true
[03:51:37] [ENEMY] [Enemy9] Player reloading state changed: false -> true
[03:51:37] [ENEMY] [Enemy10] Player reloading state changed: false -> true
[03:51:37] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(1014.949, 671.9852), source=PLAYER (Player), range=900, listeners=9
[03:51:37] [ENEMY] [Enemy4] Heard player RELOAD at (1014.949, 671.9852), intensity=0.02, distance=405
[03:51:37] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=4
[03:51:37] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=616), can_see=false
[03:51:37] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=577), can_see=false
[03:51:37] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=405), can_see=false
[03:51:37] [ENEMY] [Enemy4] Pursuing vulnerability sound at (1014.949, 671.9852), distance=405
[03:51:37] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=757), can_see=false
[03:51:37] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=961), can_see=false
[03:51:37] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=638), can_see=false
[03:51:37] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1178), can_see=false
[03:51:37] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1396), can_see=false
[03:51:37] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=941), can_see=false
[03:51:37] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[03:51:37] [ENEMY] [Enemy7] PATROL corner check: angle 89.2°
[03:51:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:38] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
[03:51:38] [ENEMY] [Enemy1] Player reloading state changed: true -> false
[03:51:38] [ENEMY] [Enemy2] Player reloading state changed: true -> false
[03:51:38] [ENEMY] [Enemy4] Player reloading state changed: true -> false
[03:51:38] [ENEMY] [Enemy5] Player reloading state changed: true -> false
[03:51:38] [ENEMY] [Enemy6] Player reloading state changed: true -> false
[03:51:38] [ENEMY] [Enemy7] Player reloading state changed: true -> false
[03:51:38] [ENEMY] [Enemy8] Player reloading state changed: true -> false
[03:51:38] [ENEMY] [Enemy9] Player reloading state changed: true -> false
[03:51:38] [ENEMY] [Enemy10] Player reloading state changed: true -> false
[03:51:38] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[03:51:38] [ENEMY] [Enemy7] PATROL corner check: angle 89.3°
[03:51:38] [INFO] [Player.Reload.Anim] LeftArm: pos=(22.788063, 5.994673), target=(24, 6), base=(24, 6)
[03:51:38] [INFO] [Player.Reload.Anim] RightArm: pos=(-2.0000002, 6.1975503), target=(-2, 6), base=(-2, 6)
[03:51:38] [ENEMY] [Enemy2] FLANKING started: target=(907.2859, 840.5337), side=left, pos=(438.8135, 646.1339)
[03:51:38] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[03:51:38] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[03:51:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:38] [ENEMY] [Enemy2] FLANKING corner check: angle -21.9°
[03:51:38] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[03:51:38] [ENEMY] [Enemy7] PATROL corner check: angle 89.3°
[03:51:38] [ENEMY] [Enemy4] Pursuing vulnerability sound at (1014.949, 671.9852), distance=146
[03:51:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:38] [ENEMY] [Enemy2] FLANKING corner check: angle -15.5°
[03:51:38] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:39] [ENEMY] [Enemy1] PURSUING corner check: angle -173.9°
[03:51:39] [ENEMY] [Enemy2] FLANKING corner check: angle -84.7°
[03:51:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:39] [ENEMY] [Enemy1] PURSUING corner check: angle 6.1°
[03:51:39] [ENEMY] [Enemy2] FLANKING corner check: angle -61.4°
[03:51:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:39] [ENEMY] [Enemy4] Pursuing vulnerability sound at (1014.949, 671.9852), distance=132
[03:51:39] [ENEMY] [Enemy2] FLANKING corner check: angle -83.0°
[03:51:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:40] [ENEMY] [Enemy2] FLANKING corner check: angle -62.6°
[03:51:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:40] [ENEMY] [Enemy2] FLANKING corner check: angle 130.3°
[03:51:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:40] [ENEMY] [Enemy4] Pursuing vulnerability sound at (560.9448, 750.4025), distance=72
[03:51:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:41] [ENEMY] [Enemy2] FLANKING corner check: angle -170.1°
[03:51:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:41] [ENEMY] [Enemy4] FLANKING started: target=(889.8256, 863.0216), side=left, pos=(605.9978, 745.7702)
[03:51:41] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[03:51:41] [ENEMY] [Enemy2] FLANKING corner check: angle -133.8°
[03:51:41] [ENEMY] [Enemy4] FLANKING corner check: angle -67.6°
[03:51:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:41] [ENEMY] [Enemy2] FLANKING corner check: angle -120.6°
[03:51:41] [ENEMY] [Enemy4] FLANKING corner check: angle -87.1°
[03:51:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:42] [ENEMY] [Enemy2] FLANKING corner check: angle 127.6°
[03:51:42] [ENEMY] [Enemy4] FLANKING corner check: angle -63.9°
[03:51:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:42] [ENEMY] [Enemy4] FLANKING corner check: angle 130.7°
[03:51:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:42] [ENEMY] [Enemy2] FLANKING corner check: angle -170.0°
[03:51:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:42] [ENEMY] [Enemy2] FLANKING corner check: angle -134.4°
[03:51:43] [ENEMY] [Enemy4] FLANKING corner check: angle -170.2°
[03:51:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:43] [ENEMY] [Enemy2] FLANKING corner check: angle -120.4°
[03:51:43] [ENEMY] [Enemy4] FLANKING corner check: angle -134.0°
[03:51:43] [ENEMY] [Enemy2] FLANKING timeout (5.0s), target=(1064.523, 838.2759), pos=(887.9344, 809.1829)
[03:51:43] [ENEMY] [Enemy2] State: FLANKING -> PURSUING
[03:51:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:43] [INFO] [Player.Debug] Debug mode toggled: ON
[03:51:43] [INFO] [GameManager] Debug mode toggled: ON
[03:51:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:43] [ENEMY] [Enemy2] PURSUING corner check: angle 70.3°
[03:51:43] [ENEMY] [Enemy4] FLANKING corner check: angle -120.7°
[03:51:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:44] [ENEMY] [Enemy4] FLANKING corner check: angle 127.6°
[03:51:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:44] [ENEMY] [Enemy1] FLANKING started: target=(840.4197, 838.9125), side=left, pos=(508.5486, 642.6144)
[03:51:44] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[03:51:44] [ENEMY] [Enemy1] FLANKING corner check: angle -59.4°
[03:51:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:44] [ENEMY] [Enemy4] FLANKING corner check: angle -170.1°
[03:51:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:44] [ENEMY] [Enemy1] FLANKING corner check: angle -58.2°
[03:51:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:44] [ENEMY] [Enemy4] FLANKING corner check: angle -134.2°
[03:51:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:45] [ENEMY] [Enemy1] FLANKING corner check: angle -60.0°
[03:51:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:45] [ENEMY] [Enemy2] FLANKING started: target=(759.3513, 619.2076), side=right, pos=(803.7444, 818.2053)
[03:51:45] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[03:51:45] [ENEMY] [Enemy4] FLANKING corner check: angle -120.5°
[03:51:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:45] [ENEMY] [Enemy1] FLANKING corner check: angle -81.0°
[03:51:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:45] [ENEMY] [Enemy2] FLANKING corner check: angle -179.5°
[03:51:45] [ENEMY] [Enemy4] FLANKING corner check: angle 127.7°
[03:51:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:45] [ENEMY] [Enemy1] FLANKING corner check: angle 133.5°
[03:51:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:45] [ENEMY] [Enemy2] FLANKING corner check: angle -150.5°
[03:51:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:46] [ENEMY] [Enemy4] FLANKING corner check: angle -170.0°
[03:51:46] [ENEMY] [Enemy2] FLANKING corner check: angle -109.7°
[03:51:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:46] [ENEMY] [Enemy1] FLANKING corner check: angle -170.0°
[03:51:46] [ENEMY] [Enemy4] FLANKING timeout (5.0s), target=(1087.024, 820.4738), pos=(887.9336, 871.7588)
[03:51:46] [ENEMY] [Enemy4] State: FLANKING -> PURSUING
[03:51:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:46] [ENEMY] [Enemy4] PURSUING corner check: angle 133.9°
[03:51:46] [ENEMY] [Enemy2] FLANKING corner check: angle -61.2°
[03:51:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:46] [ENEMY] [Enemy1] FLANKING corner check: angle -134.5°
[03:51:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:46] [ENEMY] [Enemy2] FLANKING corner check: angle 11.9°
[03:51:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:47] [ENEMY] [Enemy1] FLANKING corner check: angle -120.4°
[03:51:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:47] [ENEMY] [Enemy2] FLANKING corner check: angle 8.7°
[03:51:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:47] [ENEMY] [Enemy1] FLANKING corner check: angle 127.7°
[03:51:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:47] [ENEMY] [Enemy2] FLANKING corner check: angle 3.9°
[03:51:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:47] [ENEMY] [Enemy2] FLANKING corner check: angle 1.7°
[03:51:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:47] [ENEMY] [Enemy1] FLANKING corner check: angle -170.0°
[03:51:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:48] [ENEMY] [Enemy2] FLANKING corner check: angle 0.7°
[03:51:48] [ENEMY] [Enemy4] FLANKING started: target=(1002.232, 866.5206), side=left, pos=(801.0892, 821.4704)
[03:51:48] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[03:51:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:48] [ENEMY] [Enemy1] FLANKING corner check: angle -134.5°
[03:51:48] [ENEMY] [Enemy4] FLANKING corner check: angle -81.8°
[03:51:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:48] [ENEMY] [Enemy2] FLANKING corner check: angle 0.6°
[03:51:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:48] [ENEMY] [Enemy1] FLANKING corner check: angle -120.4°
[03:51:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:48] [ENEMY] [Enemy2] FLANKING corner check: angle 0.6°
[03:51:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:48] [ENEMY] [Enemy1] FLANKING corner check: angle 127.7°
[03:51:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:49] [ENEMY] [Enemy4] FLANKING corner check: angle -170.1°
[03:51:49] [ENEMY] [Enemy2] FLANKING corner check: angle 0.6°
[03:51:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:49] [ENEMY] [Enemy1] FLANKING timeout (5.0s), target=(1094.455, 813.3121), pos=(887.9335, 921.2684)
[03:51:49] [ENEMY] [Enemy1] State: FLANKING -> PURSUING
[03:51:49] [ENEMY] [Enemy1] PURSUING corner check: angle -82.8°
[03:51:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:49] [ENEMY] [Enemy4] FLANKING corner check: angle -133.8°
[03:51:49] [ENEMY] [Enemy2] FLANKING corner check: angle 0.6°
[03:51:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:49] [ENEMY] [Enemy4] FLANKING corner check: angle -120.6°
[03:51:49] [ENEMY] [Enemy2] FLANKING corner check: angle 0.6°
[03:51:49] [ENEMY] [Enemy2] FLANKING stuck (2.0s no progress), target=(1077.732, 828.4678), pos=(1009.123, 663.934), fail_count=1
[03:51:49] [ENEMY] [Enemy2] State: FLANKING -> PURSUING
[03:51:49] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[03:51:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:50] [ENEMY] [Enemy4] FLANKING corner check: angle 127.6°
[03:51:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:50] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:51:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:50] [ENEMY] [Enemy4] FLANKING corner check: angle -170.0°
[03:51:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:51] [ENEMY] [Enemy4] FLANKING corner check: angle -134.3°
[03:51:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:51] [ENEMY] [Enemy1] FLANKING started: target=(753.515, 648.3658), side=right, pos=(801.196, 872.6539)
[03:51:51] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[03:51:51] [ENEMY] [Enemy1] FLANKING corner check: angle 145.7°
[03:51:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:51] [ENEMY] [Enemy4] FLANKING corner check: angle -120.5°
[03:51:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:51] [ENEMY] [Enemy1] FLANKING corner check: angle -160.4°
[03:51:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:51] [ENEMY] [Enemy4] FLANKING corner check: angle 127.7°
[03:51:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:51] [ENEMY] [Enemy1] FLANKING corner check: angle -168.2°
[03:51:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:52] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[03:51:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:52] [ENEMY] [Enemy4] FLANKING corner check: angle -170.0°
[03:51:52] [ENEMY] [Enemy1] FLANKING corner check: angle -133.1°
[03:51:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:52] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:51:52] [ENEMY] [Enemy4] FLANKING corner check: angle -134.5°
[03:51:52] [ENEMY] [Enemy1] FLANKING corner check: angle -88.1°
[03:51:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:52] [ENEMY] [Enemy4] FLANKING corner check: angle -120.4°
[03:51:52] [ENEMY] [Enemy1] FLANKING corner check: angle -37.0°
[03:51:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:53] [ENEMY] [Enemy4] FLANKING corner check: angle 127.7°
[03:51:53] [ENEMY] [Enemy4] FLANKING timeout (5.0s), target=(1083.231, 823.8573), pos=(887.9333, 862.2779)
[03:51:53] [ENEMY] [Enemy4] State: FLANKING -> PURSUING
[03:51:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:53] [ENEMY] [Enemy1] FLANKING corner check: angle 9.1°
[03:51:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:53] [ENEMY] [Enemy1] FLANKING corner check: angle 4.1°
[03:51:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:54] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[03:51:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:54] [ENEMY] [Enemy1] FLANKING corner check: angle 1.7°
[03:51:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:54] [ENEMY] [Enemy1] FLANKING corner check: angle 0.7°
[03:51:54] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:51:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:54] [ENEMY] [Enemy1] FLANKING corner check: angle 0.6°
[03:51:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:51:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:55] [ENEMY] [Enemy1] FLANKING corner check: angle 0.6°
[03:51:55] [ENEMY] [Enemy4] FLANKING started: target=(1011.674, 863.8218), side=left, pos=(803.9031, 833.7579)
[03:51:55] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[03:51:55] [ENEMY] [Enemy4] FLANKING corner check: angle -83.2°
[03:51:55] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:51:55] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:51:55] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:51:55] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:51:55] [ENEMY] [Enemy1] Death animation component initialized
[03:51:55] [ENEMY] [Enemy2] Death animation component initialized
[03:51:55] [ENEMY] [Enemy3] Death animation component initialized
[03:51:55] [ENEMY] [Enemy4] Death animation component initialized
[03:51:55] [ENEMY] [Enemy5] Death animation component initialized
[03:51:55] [ENEMY] [Enemy6] Death animation component initialized
[03:51:55] [ENEMY] [Enemy7] Death animation component initialized
[03:51:55] [ENEMY] [Enemy8] Death animation component initialized
[03:51:55] [ENEMY] [Enemy9] Death animation component initialized
[03:51:55] [ENEMY] [Enemy10] Death animation component initialized
[03:51:55] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:51:55] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:51:55] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:51:55] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:51:55] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:51:55] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:51:55] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:51:55] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[03:51:55] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[03:51:55] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:51:55] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:51:55] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:51:55] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:51:55] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:51:55] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:51:55] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:51:55] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:51:55] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:51:55] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:51:55] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:51:55] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:51:55] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:51:55] [INFO] [ScoreManager] Level started with 10 enemies
[03:51:55] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[03:51:55] [ENEMY] [Enemy1] Registered as sound listener
[03:51:55] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[03:51:55] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[03:51:55] [ENEMY] [Enemy2] Registered as sound listener
[03:51:55] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[03:51:55] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[03:51:55] [ENEMY] [Enemy3] Registered as sound listener
[03:51:55] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[03:51:55] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[03:51:55] [ENEMY] [Enemy4] Registered as sound listener
[03:51:55] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[03:51:55] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[03:51:55] [ENEMY] [Enemy5] Registered as sound listener
[03:51:55] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[03:51:55] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[03:51:55] [ENEMY] [Enemy6] Registered as sound listener
[03:51:55] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[03:51:55] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[03:51:55] [ENEMY] [Enemy7] Registered as sound listener
[03:51:55] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[03:51:55] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[03:51:55] [ENEMY] [Enemy8] Registered as sound listener
[03:51:55] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[03:51:55] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[03:51:55] [ENEMY] [Enemy9] Registered as sound listener
[03:51:55] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[03:51:55] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[03:51:55] [ENEMY] [Enemy10] Registered as sound listener
[03:51:55] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[03:51:55] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:51:55] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:51:55] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:51:55] [INFO] [LastChance] Found player: Player
[03:51:55] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:51:55] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:51:55] [INFO] [LastChance] Connected to player Died signal (C#)
[03:51:55] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:51:55] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:51:55] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:51:56] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:51:56] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:51:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(461.0865, 802.7589), source=PLAYER (AssaultRifle), range=1469, listeners=19
[03:51:56] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[03:51:56] [ENEMY] [Enemy1] Heard gunshot at (461.0865, 802.7589), source_type=0, intensity=0.01, distance=481
[03:51:56] [ENEMY] [Enemy2] Heard gunshot at (461.0865, 802.7589), source_type=0, intensity=0.04, distance=260
[03:51:56] [ENEMY] [Enemy3] Heard gunshot at (461.0865, 802.7589), source_type=0, intensity=0.04, distance=245
[03:51:56] [ENEMY] [Enemy4] Heard gunshot at (461.0865, 802.7589), source_type=0, intensity=0.02, distance=353
[03:51:56] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:51:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(486.0708, 775.3732), source=PLAYER (AssaultRifle), range=1469, listeners=10
[03:51:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:51:57] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:51:57] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:51:57] [ENEMY] [Enemy3] Hit taken, health: 2/3
[03:51:57] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:51:57] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(1, 0), lethal=false
[03:51:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:51:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:51:57] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[03:51:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:51:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:51:57] [INFO] [LastChance] Threat detected: @Area2D@601
[03:51:57] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:51:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:51:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(516.6014, 761.4447), source=PLAYER (AssaultRifle), range=1469, listeners=10
[03:51:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[03:51:57] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:51:57] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:51:57] [ENEMY] [Enemy3] Hit taken, health: 1/3
[03:51:57] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:51:57] [INFO] [ImpactEffects] spawn_blood_effect called at (700.3032, 754.2559), dir=(1, 0), lethal=false
[03:51:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:51:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:51:57] [INFO] [ImpactEffects] Blood effect spawned at (700.3032, 754.2559) (scale=1)
[03:51:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700.6064, 758.5117), source=ENEMY (Enemy3), range=1469, listeners=10
[03:51:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:51:57] [INFO] [LastChance] Threat detected: @Area2D@606
[03:51:57] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:51:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:51:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(550.9705, 759.4386), source=PLAYER (AssaultRifle), range=1469, listeners=10
[03:51:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[03:51:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(586.1707, 759.4386), source=PLAYER (AssaultRifle), range=1469, listeners=10
[03:51:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[03:51:57] [ENEMY] [Enemy10] PATROL corner check: angle 7.2°
[03:51:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(550.9705, 759.4386), shooter_id=3768850582510, bullet_pos=(938.9077, 705.5187)
[03:51:57] [INFO] [Bullet] Using shooter_position, distance=391,66647
[03:51:57] [INFO] [Bullet] Distance to wall: 391,66647 (26,66929% of viewport)
[03:51:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:51:57] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[03:51:57] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:51:57] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[03:51:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(632.7914, 764.1443), shooter_id=3766032010054, bullet_pos=(36.19537, 827.9661)
[03:51:57] [INFO] [Bullet] Using shooter_position, distance=600.000061035156
[03:51:57] [INFO] [Bullet] Distance to wall: 600.000061035156 (40.8551074587093% of viewport)
[03:51:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(586.1707, 759.4386), shooter_id=3768850582510, bullet_pos=(938.40515, 693.608)
[03:51:57] [INFO] [Bullet] Using shooter_position, distance=358,3333
[03:51:57] [INFO] [Bullet] Distance to wall: 358,3333 (24,399576% of viewport)
[03:51:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:51:57] [ENEMY] [Enemy10] PATROL corner check: angle 3.7°
[03:51:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(461.08655, 802.7589), shooter_id=3768850582510, bullet_pos=(2476.7832, 608.8923)
[03:51:57] [INFO] [Bullet] Using shooter_position, distance=2024,998
[03:51:57] [INFO] [Bullet] Distance to wall: 2024,998 (137,88585% of viewport)
[03:51:58] [ENEMY] [Enemy10] PATROL corner check: angle 2.0°
[03:51:58] [ENEMY] [Enemy10] PATROL corner check: angle 1.1°
[03:51:59] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:59] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[03:51:59] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[03:51:59] [ENEMY] [Enemy7] PATROL corner check: angle 89.9°
[03:51:59] [ENEMY] [Enemy1] PURSUING corner check: angle -132.0°
[03:51:59] [ENEMY] [Enemy2] PURSUING corner check: angle -90.9°
[03:51:59] [ENEMY] [Enemy4] PURSUING corner check: angle -79.2°
[03:51:59] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:51:59] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:51:59] [ENEMY] [Enemy1] PURSUING corner check: angle -78.1°
[03:51:59] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:00] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:52:00] [ENEMY] [Enemy1] PURSUING corner check: angle -77.3°
[03:52:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:00] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:52:00] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
[03:52:00] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
[03:52:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:00] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:52:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:01] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:52:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:01] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:01] [ENEMY] [Enemy2] PURSUING corner check: angle -9.0°
[03:52:01] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:01] [ENEMY] [Enemy4] PURSUING corner check: angle -67.3°
[03:52:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:01] [ENEMY] [Enemy1] FLANKING started: target=(998.0497, 400.6449), side=right, pos=(458.0847, 404.1325)
[03:52:01] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[03:52:01] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:01] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:01] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[03:52:01] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(467.3612, 646.8502), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:01] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[03:52:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:02] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(502.9117, 652.3312), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:02] [INFO] [LastChance] Threat detected: Bullet
[03:52:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:02] [ENEMY] [Enemy1] FLANKING corner check: angle -175.0°
[03:52:02] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[03:52:02] [INFO] [LastChance] Threat detected: @Area2D@632
[03:52:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:02] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(539.3778, 655.822), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(578.019, 894.5108), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:02] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
[03:52:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:02] [INFO] [LastChance] Threat detected: @Area2D@634
[03:52:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(535.4072, 646.2642), shooter_id=3765746797365, bullet_pos=(1362.395, 543.6177)
[03:52:02] [INFO] [Bullet] Using shooter_position, distance=833.333312988281
[03:52:02] [INFO] [Bullet] Distance to wall: 833.333312988281 (56.7431976462142% of viewport)
[03:52:02] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.7599, 647.4523), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:02] [INFO] [LastChance] Threat detected: @Area2D@636
[03:52:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:02] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(605.7618, 870.2264), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:02] [INFO] [LastChance] Threat detected: @Area2D@638
[03:52:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(570.8361, 648.2231), shooter_id=3765746797365, bullet_pos=(1391.4, 502.8997)
[03:52:02] [INFO] [Bullet] Using shooter_position, distance=833.333190917969
[03:52:02] [INFO] [Bullet] Distance to wall: 833.333190917969 (56.7431893342221% of viewport)
[03:52:02] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(611.8947, 638.0764), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(758.9909, 914.0922), source=ENEMY (Enemy3), range=1469, listeners=10
[03:52:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(630.5638, 842.3362), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:02] [INFO] [LastChance] Threat detected: Bullet
[03:52:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:02] [ENEMY] [Enemy1] FLANKING corner check: angle -168.9°
[03:52:02] [INFO] [LastChance] Threat detected: @Area2D@646
[03:52:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:02] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:02] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(622.177, 635.2391), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:02] [INFO] [LastChance] Threat detected: Bullet
[03:52:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.9151, 812.4541), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:02] [INFO] [LastChance] Threat detected: @Area2D@649
[03:52:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:02] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(643.269, 638.9014), shooter_id=3765746797365, bullet_pos=(1371.617, 459.9915)
[03:52:02] [INFO] [Bullet] Using shooter_position, distance=749.999694824219
[03:52:02] [INFO] [Bullet] Distance to wall: 749.999694824219 (51.0688583484114% of viewport)
[03:52:02] [INFO] [Bullet] Distance-based penetration chance: 87.0863319268533%
[03:52:02] [INFO] [Bullet] Starting wall penetration at (1371.617, 459.9915)
[03:52:02] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29.7965984344482
[03:52:02] [INFO] [Bullet] Body exited signal received for penetrating body
[03:52:02] [INFO] [Bullet] Exiting penetration at (1416.936, 448.8593) after traveling 41.6666679382324 pixels through wall
[03:52:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:52:02] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(622.177, 635.2391), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:02] [INFO] [LastChance] Threat detected: Bullet
[03:52:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.7997, 780.8), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(632.8731, 854.2414), shooter_id=3766317222743, bullet_pos=(1487.991, 60.58905)
[03:52:02] [INFO] [Bullet] Using shooter_position, distance=1166.66638183594
[03:52:02] [INFO] [Bullet] Distance to wall: 1166.66638183594 (79.4404592495165% of viewport)
[03:52:02] [INFO] [Bullet] Distance-based penetration chance: 53.9861308755641%
[03:52:02] [INFO] [Bullet] Starting wall penetration at (1487.991, 60.58905)
[03:52:02] [INFO] [Bullet] Raycast backward hit penetrating body at distance 4.64089775085449
[03:52:02] [INFO] [LastChance] Threat detected: @Area2D@653
[03:52:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:02] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:02] [INFO] [Bullet] Max penetration distance exceeded: 83.3333358764648 >= 48
[03:52:02] [INFO] [Bullet] Body exited signal received for penetrating body
[03:52:02] [INFO] [Bullet] Exiting penetration at (1552.735, 0.498219) after traveling 83.3333358764648 pixels through wall
[03:52:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:52:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(679.1556, 794.6976), shooter_id=3766317222743, bullet_pos=(1098.572, 276.4944)
[03:52:02] [INFO] [Bullet] Using shooter_position, distance=666.666564941406
[03:52:02] [INFO] [Bullet] Distance to wall: 666.666564941406 (45.3945522985769% of viewport)
[03:52:02] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[03:52:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(657.8492, 826.4371), shooter_id=3766317222743, bullet_pos=(1401.709, 38.85608)
[03:52:02] [INFO] [Bullet] Using shooter_position, distance=1083.33325195313
[03:52:02] [INFO] [Bullet] Distance to wall: 1083.33325195313 (73.766153199682% of viewport)
[03:52:02] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(622.177, 635.2391), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(784.1183, 850.7635), shooter_id=3766032010054, bullet_pos=(1000.764, 46.08374)
[03:52:02] [INFO] [Bullet] Using shooter_position, distance=833.333618164063
[03:52:02] [INFO] [Bullet] Distance to wall: 833.333618164063 (56.7432184261943% of viewport)
[03:52:02] [INFO] [Bullet] Distance-based penetration chance: 80.46624516944%
[03:52:02] [INFO] [Bullet] Starting wall penetration at (1000.764, 46.08374)
[03:52:02] [INFO] [LastChance] Threat detected: Bullet
[03:52:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.7997, 780.8), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:02] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32.0814170837402
[03:52:02] [INFO] [Bullet] Body exited signal received for penetrating body
[03:52:02] [INFO] [Bullet] Exiting penetration at (1012.896, 1.021679) after traveling 41.6666679382324 pixels through wall
[03:52:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:52:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(696.6874, 760.1951), shooter_id=3766317222743, bullet_pos=(1017.633, 273.0899)
[03:52:02] [INFO] [Bullet] Using shooter_position, distance=583.333068847656
[03:52:02] [INFO] [Bullet] Distance to wall: 583.333068847656 (39.7202213127662% of viewport)
[03:52:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:52:02] [INFO] [LastChance] Threat detected: @Area2D@660
[03:52:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:02] [ENEMY] [Enemy1] FLANKING corner check: angle -47.0°
[03:52:02] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(622.177, 635.2391), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:02] [INFO] [LastChance] Threat detected: @Area2D@663
[03:52:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.7997, 780.8), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:02] [INFO] [LastChance] Threat detected: @Area2D@665
[03:52:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:02] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(706.1772, 723.5606), shooter_id=3766317222743, bullet_pos=(1041.98, 52.93646)
[03:52:02] [INFO] [Bullet] Using shooter_position, distance=750.000061035156
[03:52:02] [INFO] [Bullet] Distance to wall: 750.000061035156 (51.0688832843876% of viewport)
[03:52:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:02] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(622.177, 635.2391), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(696.6874, 760.1951), shooter_id=3766317222743, bullet_pos=(1228.734, 687.8775)
[03:52:03] [INFO] [Bullet] Using shooter_position, distance=536.938903808594
[03:52:03] [INFO] [Bullet] Distance to wall: 536.938903808594 (36.5611573039095% of viewport)
[03:52:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:52:03] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:03] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[03:52:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.7997, 780.8), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:03] [INFO] [LastChance] Threat detected: @Area2D@671
[03:52:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(706.1772, 723.5606), shooter_id=3766317222743, bullet_pos=(1126.813, 214.0502)
[03:52:03] [INFO] [Bullet] Using shooter_position, distance=660.708068847656
[03:52:03] [INFO] [Bullet] Distance to wall: 660.708068847656 (44.9888273428453% of viewport)
[03:52:03] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(697.192, 718.7832), shooter_id=3766317222743, bullet_pos=(916.4779, 45.2478)
[03:52:03] [INFO] [Bullet] Using shooter_position, distance=708.333435058594
[03:52:03] [INFO] [Bullet] Distance to wall: 708.333435058594 (48.2317261034743% of viewport)
[03:52:03] [ENEMY] [Enemy6] Hit taken, health: 3/4
[03:52:03] [ENEMY] [Enemy6] ImpactEffectsManager found, calling spawn_blood_effect
[03:52:03] [INFO] [ImpactEffects] spawn_blood_effect called at (1950, 450), dir=(0.786733, 0.617293), lethal=false
[03:52:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:52:03] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:52:03] [INFO] [ImpactEffects] Blood effect spawned at (1950, 450) (scale=1)
[03:52:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(685.2622, 609.7272), shooter_id=3765746797365, bullet_pos=(1380.329, 230.7574)
[03:52:03] [INFO] [Bullet] Using shooter_position, distance=791.6669921875
[03:52:03] [INFO] [Bullet] Distance to wall: 791.6669921875 (53.906061245281% of viewport)
[03:52:03] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(606.1016, 625.7509), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:03] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:03] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.7997, 780.8), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:03] [INFO] [LastChance] Threat detected: @Area2D@678
[03:52:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(697.192, 718.7832), shooter_id=3766317222743, bullet_pos=(986.8914, 213.1653)
[03:52:03] [INFO] [Bullet] Using shooter_position, distance=582.730834960938
[03:52:03] [INFO] [Bullet] Distance to wall: 582.730834960938 (39.6792141000091% of viewport)
[03:52:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:52:03] [INFO] [Bullet] Starting wall penetration at (986.8914, 213.1653)
[03:52:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(706.1772, 723.5606), shooter_id=3766317222743, bullet_pos=(1224.922, 56.47041)
[03:52:03] [INFO] [Bullet] Using shooter_position, distance=845.047424316406
[03:52:03] [INFO] [Bullet] Distance to wall: 845.047424316406 (57.5408330268976% of viewport)
[03:52:03] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[03:52:03] [INFO] [Bullet] Exiting penetration at (1002.521, 250.4376) after traveling 35.4166679382324 pixels through wall
[03:52:03] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[03:52:03] [ENEMY] [Enemy1] FLANKING corner check: angle -32.7°
[03:52:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:03] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(583.5959, 612.4671), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:03] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:03] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.7997, 780.8), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:03] [INFO] [LastChance] Threat detected: @Area2D@684
[03:52:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:03] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(706.1772, 723.5606), shooter_id=3766317222743, bullet_pos=(1362.855, 214.4328)
[03:52:03] [INFO] [Bullet] Using shooter_position, distance=830.925170898438
[03:52:03] [INFO] [Bullet] Distance to wall: 830.925170898438 (56.5792228231339% of viewport)
[03:52:03] [INFO] [Bullet] Distance-based penetration chance: 80.6575733730105%
[03:52:03] [INFO] [Bullet] Penetration failed (distance roll)
[03:52:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:03] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.9147, 595.7334), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:03] [INFO] [LastChance] Threat detected: Bullet
[03:52:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:03] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.7997, 780.8), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:52:03] [INFO] [LastChance] Threat detected: @Area2D@690
[03:52:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:03] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:03] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:03] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(554.8904, 588.9116), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:03] [INFO] [LastChance] Threat detected: Bullet
[03:52:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:03] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.7997, 780.8), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:52:03] [INFO] [LastChance] Threat detected: @Area2D@695
[03:52:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:03] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:03] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:03] [ENEMY] [Enemy1] FLANKING corner check: angle -30.6°
[03:52:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:03] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(564.5783, 595.1906), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:03] [INFO] [LastChance] Threat detected: Bullet
[03:52:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:03] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.7997, 780.8), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:52:03] [INFO] [LastChance] Threat detected: @Area2D@700
[03:52:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:03] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:03] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:03] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(555.2541, 594.4631), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:03] [INFO] [LastChance] Threat detected: Bullet
[03:52:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:03] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.7997, 780.8), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:52:03] [INFO] [LastChance] Threat detected: @Area2D@706
[03:52:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:03] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:03] [INFO] [Player] Hit blocked by invincibility mode (C#)
[03:52:03] [INFO] [Player] Invincibility mode: OFF
[03:52:03] [INFO] [GameManager] Invincibility mode toggled: OFF
[03:52:03] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.7367, 577.8915), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:03] [INFO] [LastChance] Threat detected: Bullet
[03:52:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:03] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.7997, 780.8), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:52:03] [INFO] [LastChance] Threat detected: @Area2D@710
[03:52:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:03] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:52:03] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:52:03] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:52:03] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[03:52:03] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[03:52:03] [INFO] [PenultimateHit] Player died - ending penultimate effect
[03:52:03] [INFO] [LastChance] Player died
[03:52:03] [ENEMY] [Enemy1] FLANKING corner check: angle -27.1°
[03:52:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:03] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(565.5211, 596.4588), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:03] [INFO] [LastChance] Threat detected: Bullet
[03:52:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:03] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.7997, 780.8), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:52:03] [INFO] [LastChance] Threat detected: @Area2D@713
[03:52:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:04] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(559.2562, 578.7238), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:04] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:04] [INFO] [LastChance] Threat detected: Bullet
[03:52:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:04] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.7997, 780.8), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:04] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:52:04] [INFO] [LastChance] Threat detected: @Area2D@716
[03:52:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:04] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(568.396, 595.0856), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:04] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:04] [INFO] [LastChance] Threat detected: Bullet
[03:52:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:04] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.7997, 780.8), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:04] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:52:04] [INFO] [LastChance] Threat detected: @Area2D@719
[03:52:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:04] [ENEMY] [Enemy1] FLANKING corner check: angle -15.4°
[03:52:04] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:04] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(556.459, 580.6392), source=ENEMY (Enemy2), range=1469, listeners=10
[03:52:04] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:52:04] [INFO] [LastChance] Threat detected: Bullet
[03:52:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:04] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.7997, 780.8), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:04] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:52:04] [INFO] [LastChance] Threat detected: @Area2D@722
[03:52:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:52:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:52:04] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:52:04] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:52:04] [ENEMY] [Enemy1] Death animation component initialized
[03:52:04] [ENEMY] [Enemy2] Death animation component initialized
[03:52:04] [ENEMY] [Enemy3] Death animation component initialized
[03:52:04] [ENEMY] [Enemy4] Death animation component initialized
[03:52:04] [ENEMY] [Enemy5] Death animation component initialized
[03:52:04] [ENEMY] [Enemy6] Death animation component initialized
[03:52:04] [ENEMY] [Enemy7] Death animation component initialized
[03:52:04] [ENEMY] [Enemy8] Death animation component initialized
[03:52:04] [ENEMY] [Enemy9] Death animation component initialized
[03:52:04] [ENEMY] [Enemy10] Death animation component initialized
[03:52:04] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:52:04] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:52:04] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:52:04] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:52:04] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:52:04] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:52:04] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:52:04] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:52:04] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[03:52:04] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:52:04] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:52:04] [INFO] [ScoreManager] Level started with 10 enemies
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:52:04] [ENEMY] [Enemy1] Registered as sound listener
[03:52:04] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:52:04] [ENEMY] [Enemy2] Registered as sound listener
[03:52:04] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:52:04] [ENEMY] [Enemy3] Registered as sound listener
[03:52:04] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:52:04] [ENEMY] [Enemy4] Registered as sound listener
[03:52:04] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:52:04] [ENEMY] [Enemy5] Registered as sound listener
[03:52:04] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:52:04] [ENEMY] [Enemy6] Registered as sound listener
[03:52:04] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:52:04] [ENEMY] [Enemy7] Registered as sound listener
[03:52:04] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:52:04] [ENEMY] [Enemy8] Registered as sound listener
[03:52:04] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:52:04] [ENEMY] [Enemy9] Registered as sound listener
[03:52:04] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:52:04] [ENEMY] [Enemy10] Registered as sound listener
[03:52:04] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[03:52:04] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:52:04] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:52:04] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:52:04] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:52:04] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:52:04] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:52:04] [INFO] [LastChance] Found player: Player
[03:52:04] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:52:04] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:52:04] [INFO] [LastChance] Connected to player Died signal (C#)
[03:52:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:52:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:52:04] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:52:04] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:52:04] [ENEMY] [Enemy1] Death animation component initialized
[03:52:04] [ENEMY] [Enemy2] Death animation component initialized
[03:52:04] [ENEMY] [Enemy3] Death animation component initialized
[03:52:04] [ENEMY] [Enemy4] Death animation component initialized
[03:52:04] [ENEMY] [Enemy5] Death animation component initialized
[03:52:04] [ENEMY] [Enemy6] Death animation component initialized
[03:52:04] [ENEMY] [Enemy7] Death animation component initialized
[03:52:04] [ENEMY] [Enemy8] Death animation component initialized
[03:52:04] [ENEMY] [Enemy9] Death animation component initialized
[03:52:04] [ENEMY] [Enemy10] Death animation component initialized
[03:52:04] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:52:04] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:52:04] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:52:04] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:52:04] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:52:04] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:52:04] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:52:04] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:52:04] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[03:52:04] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:52:04] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:52:04] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:52:04] [INFO] [ScoreManager] Level started with 10 enemies
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[03:52:04] [ENEMY] [Enemy1] Registered as sound listener
[03:52:04] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[03:52:04] [ENEMY] [Enemy2] Registered as sound listener
[03:52:04] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[03:52:04] [ENEMY] [Enemy3] Registered as sound listener
[03:52:04] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[03:52:04] [ENEMY] [Enemy4] Registered as sound listener
[03:52:04] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[03:52:04] [ENEMY] [Enemy5] Registered as sound listener
[03:52:04] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[03:52:04] [ENEMY] [Enemy6] Registered as sound listener
[03:52:04] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[03:52:04] [ENEMY] [Enemy7] Registered as sound listener
[03:52:04] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[03:52:04] [ENEMY] [Enemy8] Registered as sound listener
[03:52:04] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[03:52:04] [ENEMY] [Enemy9] Registered as sound listener
[03:52:04] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[03:52:04] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[03:52:04] [ENEMY] [Enemy10] Registered as sound listener
[03:52:04] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[03:52:04] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:52:04] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:52:04] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:52:04] [INFO] [LastChance] Found player: Player
[03:52:04] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:52:04] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:52:04] [INFO] [LastChance] Connected to player Died signal (C#)
[03:52:04] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:52:04] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:52:04] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:52:06] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:52:06] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:52:06] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:52:06] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:52:06] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:52:06] [ENEMY] [Enemy2] Memory: high confidence (0.90) - transitioning to PURSUING
[03:52:06] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[03:52:06] [ENEMY] [Enemy3] Memory: high confidence (0.81) - transitioning to PURSUING
[03:52:06] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[03:52:06] [ENEMY] [Enemy4] Memory: medium confidence (0.72) - transitioning to PURSUING
[03:52:06] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[03:52:06] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:52:06] [ENEMY] [Enemy2] PURSUING corner check: angle 180.0°
[03:52:06] [ENEMY] [Enemy3] PURSUING corner check: angle -117.3°
[03:52:06] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[03:52:06] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:52:07] [ENEMY] [Enemy3] PURSUING corner check: angle 62.7°
[03:52:07] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[03:52:07] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:52:07] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[03:52:07] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:52:07] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[03:52:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.3157, 882.7521), source=ENEMY (Enemy4), range=1469, listeners=30
[03:52:07] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[03:52:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:52:07] [ENEMY] [Enemy3] Hit taken, health: 3/4
[03:52:07] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:52:07] [INFO] [ImpactEffects] spawn_blood_effect called at (567.3485, 818.5851), dir=(0.166401, -0.986058), lethal=false
[03:52:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:52:07] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:52:07] [INFO] [ImpactEffects] Blood effect spawned at (567.3485, 818.5851) (scale=1)
[03:52:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.3157, 882.7521), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:07] [ENEMY] [Enemy3] Hit taken, health: 2/4
[03:52:07] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:52:07] [INFO] [ImpactEffects] spawn_blood_effect called at (567.3485, 818.5851), dir=(0.166401, -0.986058), lethal=false
[03:52:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:52:07] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:52:07] [INFO] [ImpactEffects] Blood effect spawned at (567.3485, 818.5851) (scale=1)
[03:52:08] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[03:52:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.3157, 882.7521), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:08] [ENEMY] [Enemy3] Heard gunshot at (575.3157, 882.7521), source_type=1, intensity=0.64, distance=63
[03:52:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:08] [ENEMY] [Enemy3] Hit taken, health: 1/4
[03:52:08] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:52:08] [INFO] [ImpactEffects] spawn_blood_effect called at (569.1636, 820.5387), dir=(0.166401, -0.986058), lethal=false
[03:52:08] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:52:08] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:52:08] [INFO] [ImpactEffects] Blood effect spawned at (569.1636, 820.5387) (scale=1)
[03:52:08] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:52:08] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.3157, 882.7521), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:08] [ENEMY] [Enemy3] Heard gunshot at (575.3157, 882.7521), source_type=1, intensity=1.00, distance=49
[03:52:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:08] [ENEMY] [Enemy3] Hit taken, health: 0/4
[03:52:08] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:52:08] [INFO] [ImpactEffects] spawn_blood_effect called at (581.8695, 834.214), dir=(0.166401, -0.986058), lethal=true
[03:52:08] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:52:08] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[03:52:08] [INFO] [ImpactEffects] Blood effect spawned at (581.8695, 834.214) (scale=1.5)
[03:52:08] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[03:52:08] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[03:52:08] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[03:52:08] [INFO] [DeathAnim] Started - Angle: -80.4 deg, Index: 6
[03:52:08] [ENEMY] [Enemy3] Death animation started with hit direction: (0.166401, -0.986058)
[03:52:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.3157, 882.7521), source=ENEMY (Enemy4), range=1469, listeners=9
[03:52:08] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[03:52:08] [INFO] [LastChance] Threat detected: Bullet
[03:52:08] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:08] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:52:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[03:52:08] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[03:52:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.3157, 882.7521), source=ENEMY (Enemy4), range=1469, listeners=9
[03:52:08] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[03:52:08] [INFO] [LastChance] Threat detected: Bullet
[03:52:08] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:52:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:52:08] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:52:08] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:52:08] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.3157, 882.7521), source=ENEMY (Enemy4), range=1469, listeners=9
[03:52:08] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[03:52:08] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:52:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(396.2425, 639.8224), source=ENEMY (Enemy2), range=1469, listeners=9
[03:52:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[03:52:08] [INFO] [LastChance] Threat detected: @Area2D@1258
[03:52:08] [INFO] [LastChance] Triggering last chance effect!
[03:52:08] [INFO] [LastChance] Starting last chance effect:
[03:52:08] [INFO] [LastChance]   - Time will be frozen (except player)
[03:52:08] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:52:08] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:52:08] [INFO] [LastChance]   - Brightness: 0.60
[03:52:08] [INFO] [LastChance] Pushed bullet Bullet from distance 133.1 to 200.0
[03:52:08] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:52:08] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:52:08] [INFO] [LastChance] Skipping player node: Player
[03:52:08] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:52:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1228
[03:52:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1230
[03:52:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1234
[03:52:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1241
[03:52:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1247
[03:52:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1256
[03:52:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1259
[03:52:08] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:52:08] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:52:08] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:52:09] [INFO] [Player] Invincibility mode: ON
[03:52:09] [INFO] [GameManager] Invincibility mode toggled: ON
[03:52:11] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[03:52:14] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[03:52:14] [INFO] [LastChance] Ending last chance effect
[03:52:14] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[03:52:14] [ENEMY] [Enemy1] Search mode: PURSUING -> SEARCHING at (551.8029, 707.8346)
[03:52:14] [ENEMY] [Enemy1] SEARCHING started: center=(551.8029, 707.8346), radius=100, waypoints=5
[03:52:14] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:52:14] [ENEMY] [Enemy2] Search mode: PURSUING -> SEARCHING at (615.5997, 644.0377)
[03:52:14] [ENEMY] [Enemy2] SEARCHING started: center=(615.5997, 644.0377), radius=100, waypoints=5
[03:52:14] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:52:14] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (615.5997, 644.0377)
[03:52:14] [ENEMY] [Enemy4] SEARCHING started: center=(615.5997, 644.0377), radius=100, waypoints=5
[03:52:14] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:52:14] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:52:14] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:52:14] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:52:14] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:52:14] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:52:14] [INFO] [LastChance] Reset memory for 9 enemies (player teleport effect)
[03:52:14] [INFO] [LastChance] All process modes restored
[03:52:14] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:52:14] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1228
[03:52:14] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1230
[03:52:14] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1234
[03:52:14] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1241
[03:52:14] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1247
[03:52:14] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1256
[03:52:14] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1259
[03:52:14] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:52:14] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:52:14] [ENEMY] [Enemy1] SEARCHING corner check: angle -81.9°
[03:52:14] [ENEMY] [Enemy2] SEARCHING corner check: angle -87.5°
[03:52:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:52:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(463.6801, 648.9198), shooter_id=7189271939307, bullet_pos=(921.929, 657.7257)
[03:52:14] [INFO] [Bullet] Using shooter_position, distance=458.333526611328
[03:52:14] [INFO] [Bullet] Distance to wall: 458.333526611328 (31.2087726280045% of viewport)
[03:52:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:52:14] [INFO] [Bullet] Starting wall penetration at (921.929, 657.7257)
[03:52:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32.5931167602539
[03:52:14] [INFO] [Bullet] Body exited signal received for penetrating body
[03:52:14] [INFO] [Bullet] Exiting penetration at (968.5871, 658.6223) after traveling 41.6666679382324 pixels through wall
[03:52:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:52:14] [ENEMY] [Enemy4] SEARCHING corner check: angle -170.4°
[03:52:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(594.2556, 817.3925), shooter_id=7189842363929, bullet_pos=(725.6727, 62.23188)
[03:52:14] [INFO] [Bullet] Using shooter_position, distance=766.510314941406
[03:52:14] [INFO] [Bullet] Distance to wall: 766.510314941406 (52.193096832544% of viewport)
[03:52:14] [ENEMY] [Enemy1] SEARCHING corner check: angle 152.9°
[03:52:14] [ENEMY] [Enemy2] SEARCHING corner check: angle 92.5°
[03:52:15] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:52:15] [ENEMY] [Enemy4] SEARCHING corner check: angle 9.6°
[03:52:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:15] [ENEMY] [Enemy1] SEARCHING corner check: angle 152.9°
[03:52:15] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:52:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:15] [ENEMY] [Enemy1] SEARCHING corner check: angle -49.1°
[03:52:15] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:52:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:16] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:52:16] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:16] [ENEMY] [Enemy2] SEARCHING corner check: angle 120.5°
[03:52:16] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:52:16] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:16] [ENEMY] [Enemy2] SEARCHING corner check: angle 120.5°
[03:52:16] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:16] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:16] [ENEMY] [Enemy1] SEARCHING corner check: angle -21.8°
[03:52:17] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:17] [ENEMY] [Enemy1] SEARCHING corner check: angle 158.2°
[03:52:17] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:17] [ENEMY] [Enemy4] SEARCHING corner check: angle -136.8°
[03:52:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:17] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:17] [ENEMY] [Enemy4] SEARCHING corner check: angle -136.8°
[03:52:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:17] [ENEMY] [Enemy2] SEARCHING corner check: angle -63.4°
[03:52:18] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:18] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:18] [ENEMY] [Enemy1] SEARCHING corner check: angle -32.0°
[03:52:18] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:19] [ENEMY] [Enemy4] SEARCHING corner check: angle 20.8°
[03:52:19] [ENEMY] [Enemy2] SEARCHING corner check: angle 55.4°
[03:52:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:19] [ENEMY] [Enemy4] SEARCHING corner check: angle 20.8°
[03:52:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:19] [ENEMY] [Enemy4] SEARCHING corner check: angle 20.8°
[03:52:19] [ENEMY] [Enemy1] SEARCHING corner check: angle -111.8°
[03:52:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:20] [ENEMY] [Enemy2] SEARCHING corner check: angle -25.6°
[03:52:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:21] [ENEMY] [Enemy4] SEARCHING corner check: angle -37.9°
[03:52:21] [ENEMY] [Enemy1] SEARCHING corner check: angle 91.1°
[03:52:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:21] [ENEMY] [Enemy2] SEARCHING: Expand outer ring r=175 wps=4
[03:52:22] [ENEMY] [Enemy2] SEARCHING corner check: angle -179.4°
[03:52:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:22] [ENEMY] [Enemy2] SEARCHING corner check: angle -0.1°
[03:52:22] [ENEMY] [Enemy4] SEARCHING: Expand outer ring r=175 wps=4
[03:52:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:22] [ENEMY] [Enemy1] SEARCHING: Expand outer ring r=175 wps=4
[03:52:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:22] [ENEMY] [Enemy4] SEARCHING corner check: angle -0.0°
[03:52:22] [ENEMY] [Enemy1] SEARCHING corner check: angle 78.4°
[03:52:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:23] [ENEMY] [Enemy1] SEARCHING corner check: angle -101.6°
[03:52:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:23] [ENEMY] [Enemy1] SEARCHING corner check: angle -49.2°
[03:52:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:23] [ENEMY] [Enemy2] SEARCHING corner check: angle -57.4°
[03:52:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:23] [ENEMY] [Enemy4] SEARCHING corner check: angle -57.5°
[03:52:24] [ENEMY] [Enemy2] SEARCHING corner check: angle -57.4°
[03:52:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:24] [ENEMY] [Enemy4] SEARCHING corner check: angle -57.5°
[03:52:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:24] [ENEMY] [Enemy4] SEARCHING corner check: angle -57.5°
[03:52:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:24] [ENEMY] [Enemy1] SEARCHING corner check: angle 180.0°
[03:52:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:25] [ENEMY] [Enemy1] SEARCHING corner check: angle 179.9°
[03:52:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:25] [ENEMY] [Enemy2] SEARCHING corner check: angle -151.5°
[03:52:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:25] [ENEMY] [Enemy1] SEARCHING corner check: angle -90.2°
[03:52:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:25] [ENEMY] [Enemy2] SEARCHING corner check: angle -151.5°
[03:52:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:25] [ENEMY] [Enemy1] SEARCHING corner check: angle -112.9°
[03:52:25] [ENEMY] [Enemy4] SEARCHING corner check: angle -151.4°
[03:52:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:26] [ENEMY] [Enemy4] SEARCHING corner check: angle -151.4°
[03:52:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:27] [ENEMY] [Enemy2] SEARCHING corner check: angle 93.8°
[03:52:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:27] [ENEMY] [Enemy1] SEARCHING corner check: angle -148.2°
[03:52:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:27] [ENEMY] [Enemy2] SEARCHING corner check: angle 93.8°
[03:52:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:27] [ENEMY] [Enemy1] SEARCHING corner check: angle 31.8°
[03:52:27] [ENEMY] [Enemy4] SEARCHING corner check: angle 93.8°
[03:52:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:27] [ENEMY] [Enemy1] SEARCHING corner check: angle 31.8°
[03:52:27] [ENEMY] [Enemy4] SEARCHING corner check: angle 90.0°
[03:52:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:28] [ENEMY] [Enemy1] SEARCHING corner check: angle -0.4°
[03:52:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:28] [ENEMY] [Enemy1] SEARCHING corner check: angle 128.3°
[03:52:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:28] [ENEMY] [Enemy2] SEARCHING: Expand outer ring r=250 wps=4
[03:52:28] [ENEMY] [Enemy2] SEARCHING corner check: angle -150.1°
[03:52:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:28] [ENEMY] [Enemy1] SEARCHING corner check: angle 89.5°
[03:52:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:29] [ENEMY] [Enemy2] SEARCHING corner check: angle -150.1°
[03:52:29] [ENEMY] [Enemy4] SEARCHING: Expand outer ring r=250 wps=4
[03:52:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:29] [ENEMY] [Enemy4] SEARCHING corner check: angle -150.5°
[03:52:29] [ENEMY] [Enemy1] SEARCHING corner check: angle -138.1°
[03:52:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:29] [ENEMY] [Enemy2] SEARCHING corner check: angle 49.4°
[03:52:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:29] [ENEMY] [Enemy4] SEARCHING corner check: angle -150.5°
[03:52:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:29] [ENEMY] [Enemy2] SEARCHING corner check: angle -48.2°
[03:52:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:29] [ENEMY] [Enemy4] SEARCHING corner check: angle -0.1°
[03:52:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:30] [ENEMY] [Enemy2] SEARCHING corner check: angle 176.8°
[03:52:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:30] [ENEMY] [Enemy4] SEARCHING corner check: angle 176.5°
[03:52:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:30] [ENEMY] [Enemy1] SEARCHING: Expand outer ring r=250 wps=4
[03:52:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:30] [ENEMY] [Enemy4] SEARCHING corner check: angle 176.8°
[03:52:30] [ENEMY] [Enemy1] SEARCHING corner check: angle -138.0°
[03:52:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:31] [ENEMY] [Enemy1] SEARCHING corner check: angle -138.0°
[03:52:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:31] [ENEMY] [Enemy1] SEARCHING corner check: angle 49.8°
[03:52:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:31] [ENEMY] [Enemy2] SEARCHING corner check: angle -170.0°
[03:52:31] [ENEMY] [Enemy1] SEARCHING corner check: angle 179.8°
[03:52:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:32] [ENEMY] [Enemy2] SEARCHING corner check: angle 89.8°
[03:52:32] [ENEMY] [Enemy1] SEARCHING corner check: angle 151.9°
[03:52:32] [ENEMY] [Enemy4] SEARCHING corner check: angle -170.0°
[03:52:32] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:32] [ENEMY] [Enemy2] SEARCHING corner check: angle -50.4°
[03:52:32] [ENEMY] [Enemy1] SEARCHING corner check: angle 151.9°
[03:52:32] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:32] [ENEMY] [Enemy4] SEARCHING corner check: angle 89.8°
[03:52:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:32] [ENEMY] [Enemy2] SEARCHING corner check: angle -50.4°
[03:52:32] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:32] [ENEMY] [Enemy4] SEARCHING corner check: angle -50.4°
[03:52:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:33] [ENEMY] [Enemy2] SEARCHING corner check: angle -50.4°
[03:52:33] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:33] [ENEMY] [Enemy4] SEARCHING corner check: angle -50.4°
[03:52:33] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:33] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:33] [ENEMY] [Enemy4] SEARCHING corner check: angle -50.4°
[03:52:33] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:33] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:33] [ENEMY] [Enemy1] SEARCHING corner check: angle 153.2°
[03:52:33] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:34] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:34] [ENEMY] [Enemy1] SEARCHING corner check: angle 153.2°
[03:52:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:34] [ENEMY] [Enemy2] SEARCHING corner check: angle 41.5°
[03:52:34] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:34] [ENEMY] [Enemy1] SEARCHING corner check: angle -90.1°
[03:52:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:34] [ENEMY] [Enemy2] SEARCHING corner check: angle -170.4°
[03:52:34] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:34] [ENEMY] [Enemy1] SEARCHING corner check: angle 58.3°
[03:52:34] [ENEMY] [Enemy4] SEARCHING corner check: angle 41.5°
[03:52:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:35] [ENEMY] [Enemy2] SEARCHING corner check: angle -170.4°
[03:52:35] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:35] [ENEMY] [Enemy1] SEARCHING corner check: angle -121.7°
[03:52:35] [ENEMY] [Enemy4] SEARCHING corner check: angle -170.4°
[03:52:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:35] [ENEMY] [Enemy2] SEARCHING corner check: angle -170.4°
[03:52:35] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:35] [ENEMY] [Enemy1] SEARCHING corner check: angle -121.7°
[03:52:35] [ENEMY] [Enemy4] SEARCHING corner check: angle -170.4°
[03:52:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:35] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:52:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:52:35] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:52:35] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:52:35] [ENEMY] [Enemy1] Death animation component initialized
[03:52:35] [ENEMY] [Enemy2] Death animation component initialized
[03:52:35] [ENEMY] [Enemy3] Death animation component initialized
[03:52:35] [ENEMY] [Enemy4] Death animation component initialized
[03:52:35] [ENEMY] [Enemy5] Death animation component initialized
[03:52:35] [ENEMY] [Enemy6] Death animation component initialized
[03:52:35] [ENEMY] [Enemy7] Death animation component initialized
[03:52:35] [ENEMY] [Enemy8] Death animation component initialized
[03:52:35] [ENEMY] [Enemy9] Death animation component initialized
[03:52:35] [ENEMY] [Enemy10] Death animation component initialized
[03:52:35] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:52:35] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:52:35] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:52:35] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:52:35] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:52:35] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:52:35] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:52:35] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[03:52:35] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[03:52:35] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:52:35] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:52:35] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:52:35] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:52:35] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:52:35] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:52:35] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:52:35] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:52:35] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:52:35] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:52:35] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:52:35] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:52:35] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:52:35] [INFO] [ScoreManager] Level started with 10 enemies
[03:52:35] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[03:52:35] [ENEMY] [Enemy1] Registered as sound listener
[03:52:35] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[03:52:35] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[03:52:35] [ENEMY] [Enemy2] Registered as sound listener
[03:52:35] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[03:52:35] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[03:52:35] [ENEMY] [Enemy3] Registered as sound listener
[03:52:35] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[03:52:35] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[03:52:35] [ENEMY] [Enemy4] Registered as sound listener
[03:52:35] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[03:52:35] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[03:52:35] [ENEMY] [Enemy5] Registered as sound listener
[03:52:35] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[03:52:35] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[03:52:35] [ENEMY] [Enemy6] Registered as sound listener
[03:52:35] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[03:52:35] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[03:52:35] [ENEMY] [Enemy7] Registered as sound listener
[03:52:35] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[03:52:35] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[03:52:35] [ENEMY] [Enemy8] Registered as sound listener
[03:52:35] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[03:52:35] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[03:52:35] [ENEMY] [Enemy9] Registered as sound listener
[03:52:35] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[03:52:35] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[03:52:35] [ENEMY] [Enemy10] Registered as sound listener
[03:52:35] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[03:52:35] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:52:35] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:52:35] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:52:35] [INFO] [LastChance] Found player: Player
[03:52:35] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:52:35] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:52:35] [INFO] [LastChance] Connected to player Died signal (C#)
[03:52:35] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:52:35] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:52:35] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:52:37] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:52:37] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:52:37] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:52:37] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:52:38] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:52:38] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:52:38] [INFO] [Player] Invincibility mode: OFF
[03:52:38] [INFO] [GameManager] Invincibility mode toggled: OFF
[03:52:38] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:52:38] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:52:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=19
[03:52:38] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[03:52:38] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[03:52:38] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[03:52:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:38] [INFO] [LastChance] Threat detected: Bullet
[03:52:38] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.0892, 701.6766), shooter_id=15166083172273, bullet_pos=(523.3331, 537.8942)
[03:52:39] [INFO] [Bullet] Using shooter_position, distance=208.333374023438
[03:52:39] [INFO] [Bullet] Distance to wall: 208.333374023438 (14.1858025285506% of viewport)
[03:52:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:52:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:52:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:52:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:52:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:39] [INFO] [LastChance] Threat detected: @Area2D@1541
[03:52:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:52:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:52:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:39] [INFO] [LastChance] Threat detected: @Area2D@1543
[03:52:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(663.9348, 692.2947), shooter_id=15166083172273, bullet_pos=(520.8357, 391.2404)
[03:52:39] [INFO] [Bullet] Using shooter_position, distance=333.333251953125
[03:52:39] [INFO] [Bullet] Distance to wall: 333.333251953125 (22.6972740712904% of viewport)
[03:52:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:52:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:52:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:52:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:39] [INFO] [LastChance] Threat detected: @Area2D@1546
[03:52:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.0892, 701.6766), shooter_id=15166083172273, bullet_pos=(897.1926, 59.58544)
[03:52:39] [INFO] [Bullet] Using shooter_position, distance=687.282104492188
[03:52:39] [INFO] [Bullet] Distance to wall: 687.282104492188 (46.7983022952241% of viewport)
[03:52:39] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:52:39] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:52:39] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:52:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(663.9348, 692.2947), shooter_id=15166083172273, bullet_pos=(743.4076, 65.42171)
[03:52:39] [INFO] [Bullet] Using shooter_position, distance=631.890563964844
[03:52:39] [INFO] [Bullet] Distance to wall: 631.890563964844 (43.0265904446557% of viewport)
[03:52:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:52:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:52:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:39] [INFO] [LastChance] Threat detected: @Area2D@1550
[03:52:39] [INFO] [LastChance] Triggering last chance effect!
[03:52:39] [INFO] [LastChance] Starting last chance effect:
[03:52:39] [INFO] [LastChance]   - Time will be frozen (except player)
[03:52:39] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:52:39] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:52:39] [INFO] [LastChance]   - Brightness: 0.60
[03:52:39] [INFO] [LastChance] Pushed bullet @Area2D@1550 from distance 129.6 to 200.0
[03:52:39] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:52:39] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:52:39] [INFO] [LastChance] Skipping player node: Player
[03:52:39] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:52:39] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1542
[03:52:39] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1544
[03:52:39] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1547
[03:52:39] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1551
[03:52:39] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:52:39] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:52:39] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:52:40] [INFO] [Player] Invincibility mode: ON
[03:52:40] [INFO] [GameManager] Invincibility mode toggled: ON
[03:52:45] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[03:52:45] [INFO] [LastChance] Ending last chance effect
[03:52:45] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[03:52:45] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:52:45] [ENEMY] [Enemy2] Search mode: COMBAT -> SEARCHING at (700, 750)
[03:52:45] [ENEMY] [Enemy2] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[03:52:45] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[03:52:45] [ENEMY] [Enemy3] Search mode: COMBAT -> SEARCHING at (675.5989, 554.5797)
[03:52:45] [ENEMY] [Enemy3] SEARCHING started: center=(675.5989, 554.5797), radius=100, waypoints=5
[03:52:45] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:52:45] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (700, 750)
[03:52:45] [ENEMY] [Enemy4] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[03:52:45] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:52:45] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:52:45] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:52:45] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:52:45] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:52:45] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:52:45] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:52:45] [INFO] [LastChance] All process modes restored
[03:52:45] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:52:45] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1542
[03:52:45] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1544
[03:52:45] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1547
[03:52:45] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1551
[03:52:45] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:52:45] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:52:45] [ENEMY] [Enemy2] SEARCHING corner check: angle 134.2°
[03:52:45] [ENEMY] [Enemy3] SEARCHING corner check: angle 172.9°
[03:52:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.0892, 701.6766), shooter_id=15166083172273, bullet_pos=(1077.138, 227.0781)
[03:52:45] [INFO] [Bullet] Using shooter_position, distance=637.110595703125
[03:52:45] [INFO] [Bullet] Distance to wall: 637.110595703125 (43.3820320045072% of viewport)
[03:52:45] [ENEMY] [Enemy4] SEARCHING corner check: angle 179.8°
[03:52:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.0892, 701.6766), shooter_id=15166083172273, bullet_pos=(1014.875, 280.0772)
[03:52:45] [INFO] [Bullet] Using shooter_position, distance=556.200744628906
[03:52:45] [INFO] [Bullet] Distance to wall: 556.200744628906 (37.8727314647667% of viewport)
[03:52:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:52:45] [INFO] [Bullet] Starting wall penetration at (1014.875, 280.0772)
[03:52:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 2.93776059150696
[03:52:45] [INFO] [Bullet] Max penetration distance exceeded: 51.1770858764648 >= 48
[03:52:45] [INFO] [Bullet] Body exited signal received for penetrating body
[03:52:45] [INFO] [Bullet] Exiting penetration at (972.0966, 316.4903) after traveling 51.1770858764648 pixels through wall
[03:52:45] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
[03:52:45] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:52:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(683.8843, 683.8873), shooter_id=15166083172273, bullet_pos=(600.6221, 51.29347)
[03:52:45] [INFO] [Bullet] Using shooter_position, distance=638.049865722656
[03:52:45] [INFO] [Bullet] Distance to wall: 638.049865722656 (43.4459886273024% of viewport)
[03:52:45] [INFO] [Bullet] Distance-based penetration chance: 95.9796799348139%
[03:52:45] [INFO] [Bullet] Starting wall penetration at (600.6221, 51.29347)
[03:52:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.2233753204346
[03:52:45] [INFO] [Bullet] Body exited signal received for penetrating body
[03:52:45] [INFO] [Bullet] Exiting penetration at (594.84, 4.986397) after traveling 41.6666717529297 pixels through wall
[03:52:45] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:52:45] [ENEMY] [Enemy3] SEARCHING corner check: angle 172.9°
[03:52:45] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[03:52:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:52:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:46] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[03:52:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:52:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:46] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[03:52:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:52:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:46] [ENEMY] [Enemy4] SEARCHING corner check: angle -99.1°
[03:52:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:52:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:47] [ENEMY] [Enemy3] SEARCHING corner check: angle -15.3°
[03:52:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:52:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:52:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:47] [ENEMY] [Enemy2] SEARCHING corner check: angle 133.4°
[03:52:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:48] [ENEMY] [Enemy4] SEARCHING corner check: angle 70.3°
[03:52:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:48] [ENEMY] [Enemy3] SEARCHING corner check: angle -163.6°
[03:52:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:52:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:49] [ENEMY] [Enemy2] SEARCHING corner check: angle -61.4°
[03:52:49] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:52:49] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:52:49] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:52:49] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:52:49] [ENEMY] [Enemy1] Death animation component initialized
[03:52:49] [ENEMY] [Enemy2] Death animation component initialized
[03:52:49] [ENEMY] [Enemy3] Death animation component initialized
[03:52:49] [ENEMY] [Enemy4] Death animation component initialized
[03:52:49] [ENEMY] [Enemy5] Death animation component initialized
[03:52:49] [ENEMY] [Enemy6] Death animation component initialized
[03:52:49] [ENEMY] [Enemy7] Death animation component initialized
[03:52:49] [ENEMY] [Enemy8] Death animation component initialized
[03:52:49] [ENEMY] [Enemy9] Death animation component initialized
[03:52:49] [ENEMY] [Enemy10] Death animation component initialized
[03:52:49] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:52:49] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:52:49] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:52:49] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:52:49] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:52:49] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:52:49] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:52:49] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: True
[03:52:49] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[03:52:49] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:52:49] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:52:49] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:52:49] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:52:49] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:52:49] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:52:49] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:52:49] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:52:49] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:52:49] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:52:49] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:52:49] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:52:49] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:52:49] [INFO] [ScoreManager] Level started with 10 enemies
[03:52:49] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:52:49] [ENEMY] [Enemy1] Registered as sound listener
[03:52:49] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[03:52:49] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:52:49] [ENEMY] [Enemy2] Registered as sound listener
[03:52:49] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[03:52:49] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:52:49] [ENEMY] [Enemy3] Registered as sound listener
[03:52:49] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[03:52:49] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:52:49] [ENEMY] [Enemy4] Registered as sound listener
[03:52:49] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[03:52:49] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:52:49] [ENEMY] [Enemy5] Registered as sound listener
[03:52:49] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[03:52:49] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:52:49] [ENEMY] [Enemy6] Registered as sound listener
[03:52:49] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[03:52:49] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:52:49] [ENEMY] [Enemy7] Registered as sound listener
[03:52:49] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[03:52:49] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:52:49] [ENEMY] [Enemy8] Registered as sound listener
[03:52:49] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[03:52:49] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:52:49] [ENEMY] [Enemy9] Registered as sound listener
[03:52:49] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[03:52:49] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:52:49] [ENEMY] [Enemy10] Registered as sound listener
[03:52:49] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[03:52:49] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:52:49] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:52:49] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:52:49] [INFO] [LastChance] Found player: Player
[03:52:49] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:52:49] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:52:49] [INFO] [LastChance] Connected to player Died signal (C#)
[03:52:49] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:52:49] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:52:49] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:52:50] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:52:50] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:52:51] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:52:51] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:52:51] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:52:51] [INFO] [Player] Invincibility mode: OFF
[03:52:51] [INFO] [GameManager] Invincibility mode toggled: OFF
[03:52:51] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:52:51] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:52:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[03:52:51] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:52:51] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[03:52:51] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[03:52:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:51] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:52:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:51] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(800, 900), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[03:52:51] [INFO] [LastChance] Threat detected: @Area2D@1808
[03:52:51] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:52:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:52:51] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:52:51] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:52:51] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:52:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:52:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:52:52] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:52:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(800, 900), source=ENEMY (Enemy4), range=1469, listeners=10
[03:52:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[03:52:52] [INFO] [LastChance] Threat detected: @Area2D@1812
[03:52:52] [INFO] [LastChance] Triggering last chance effect!
[03:52:52] [INFO] [LastChance] Starting last chance effect:
[03:52:52] [INFO] [LastChance]   - Time will be frozen (except player)
[03:52:52] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:52:52] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:52:52] [INFO] [LastChance]   - Brightness: 0.60
[03:52:52] [INFO] [LastChance] Pushed bullet @Area2D@1810 from distance 31.2 to 200.0
[03:52:52] [INFO] [LastChance] Pushed bullet @Area2D@1812 from distance 146.8 to 200.0
[03:52:52] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[03:52:52] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:52:52] [INFO] [LastChance] Skipping player node: Player
[03:52:52] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:52:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1807
[03:52:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1809
[03:52:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1811
[03:52:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1813
[03:52:52] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:52:52] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:52:52] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:52:53] [INFO] [Player] Invincibility mode: ON
[03:52:53] [INFO] [GameManager] Invincibility mode toggled: ON
[03:52:54] [INFO] [Player] Invincibility mode: OFF
[03:52:54] [INFO] [GameManager] Invincibility mode toggled: OFF
[03:52:58] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[03:52:58] [INFO] [LastChance] Ending last chance effect
[03:52:58] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[03:52:58] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:52:58] [ENEMY] [Enemy2] Search mode: COMBAT -> SEARCHING at (700, 750)
[03:52:58] [ENEMY] [Enemy2] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[03:52:58] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[03:52:58] [ENEMY] [Enemy3] Search mode: COMBAT -> SEARCHING at (771.9808, 690.818)
[03:52:58] [ENEMY] [Enemy3] SEARCHING started: center=(771.9808, 690.818), radius=100, waypoints=5
[03:52:58] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:52:58] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (771.9808, 690.818)
[03:52:58] [ENEMY] [Enemy4] SEARCHING started: center=(771.9808, 690.818), radius=100, waypoints=5
[03:52:58] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:52:58] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:52:58] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:52:58] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:52:58] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:52:58] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:52:58] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:52:58] [INFO] [LastChance] All process modes restored
[03:52:58] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:52:58] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1807
[03:52:58] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1809
[03:52:58] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1811
[03:52:58] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1813
[03:52:58] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:52:58] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:52:58] [ENEMY] [Enemy2] SEARCHING corner check: angle 158.8°
[03:52:58] [ENEMY] [Enemy3] SEARCHING corner check: angle -129.4°
[03:52:58] [ENEMY] [Enemy4] SEARCHING corner check: angle 172.4°
[03:52:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(757.1943, 713.0731), shooter_id=17720900848516, bullet_pos=(693.0444, 825.2779)
[03:52:58] [INFO] [Bullet] Using shooter_position, distance=129.248321533203
[03:52:58] [INFO] [Bullet] Distance to wall: 129.248321533203 (8.80075587990219% of viewport)
[03:52:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:52:58] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:52:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(720.3887, 685.0778), shooter_id=17720900848516, bullet_pos=(845.9141, 30.33521)
[03:52:58] [INFO] [Bullet] Using shooter_position, distance=666.666687011719
[03:52:58] [INFO] [Bullet] Distance to wall: 666.666687011719 (45.3945606105689% of viewport)
[03:52:58] [INFO] [Bullet] Distance-based penetration chance: 93.7063459543362%
[03:52:58] [INFO] [Bullet] Starting wall penetration at (845.9141, 30.33521)
[03:52:58] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48.3617744445801
[03:52:58] [INFO] [Bullet] Body exited signal received for penetrating body
[03:52:58] [INFO] [Bullet] Exiting penetration at (854.7009, -15.49678) after traveling 41.6666679382324 pixels through wall
[03:52:58] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:52:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(773.4312, 837.3526), shooter_id=17721186060875, bullet_pos=(538.1492, 37.9238)
[03:52:58] [INFO] [Bullet] Using shooter_position, distance=833.333129882813
[03:52:58] [INFO] [Bullet] Distance to wall: 833.333129882813 (56.7431851782261% of viewport)
[03:52:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(783.2944, 834.0339), shooter_id=17721186060875, bullet_pos=(675.6792, 61.20845)
[03:52:58] [INFO] [Bullet] Using shooter_position, distance=780.2822265625
[03:52:58] [INFO] [Bullet] Distance to wall: 780.2822265625 (53.1308516191367% of viewport)
[03:52:58] [INFO] [Bullet] Distance-based penetration chance: 84.6806731110072%
[03:52:58] [INFO] [Bullet] Starting wall penetration at (675.6792, 61.20845)
[03:52:58] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[03:52:58] [ENEMY] [Enemy4] SEARCHING corner check: angle 172.4°
[03:52:58] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17.1973571777344
[03:52:58] [INFO] [Bullet] Body exited signal received for penetrating body
[03:52:58] [INFO] [Bullet] Exiting penetration at (669.4837, 14.95487) after traveling 41.6666641235352 pixels through wall
[03:52:58] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:52:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:52:58] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[03:52:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:59] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:52:59] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:52:59] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:52:59] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:52:59] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:52:59] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:52:59] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:52:59] [ENEMY] [Enemy1] Death animation component initialized
[03:52:59] [ENEMY] [Enemy2] Death animation component initialized
[03:52:59] [ENEMY] [Enemy3] Death animation component initialized
[03:52:59] [ENEMY] [Enemy4] Death animation component initialized
[03:52:59] [ENEMY] [Enemy5] Death animation component initialized
[03:52:59] [ENEMY] [Enemy6] Death animation component initialized
[03:52:59] [ENEMY] [Enemy7] Death animation component initialized
[03:52:59] [ENEMY] [Enemy8] Death animation component initialized
[03:52:59] [ENEMY] [Enemy9] Death animation component initialized
[03:52:59] [ENEMY] [Enemy10] Death animation component initialized
[03:52:59] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:52:59] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:52:59] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:52:59] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:52:59] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:52:59] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:52:59] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:52:59] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:52:59] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[03:52:59] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:52:59] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:52:59] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:52:59] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:52:59] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:52:59] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:52:59] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:52:59] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:52:59] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:52:59] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:52:59] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:52:59] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:52:59] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:52:59] [INFO] [ScoreManager] Level started with 10 enemies
[03:52:59] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:52:59] [ENEMY] [Enemy1] Registered as sound listener
[03:52:59] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[03:52:59] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:52:59] [ENEMY] [Enemy2] Registered as sound listener
[03:52:59] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[03:52:59] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:52:59] [ENEMY] [Enemy3] Registered as sound listener
[03:52:59] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[03:52:59] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:52:59] [ENEMY] [Enemy4] Registered as sound listener
[03:52:59] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[03:52:59] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:52:59] [ENEMY] [Enemy5] Registered as sound listener
[03:52:59] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[03:52:59] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:52:59] [ENEMY] [Enemy6] Registered as sound listener
[03:52:59] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[03:52:59] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:52:59] [ENEMY] [Enemy7] Registered as sound listener
[03:52:59] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[03:52:59] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:52:59] [ENEMY] [Enemy8] Registered as sound listener
[03:52:59] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[03:52:59] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:52:59] [ENEMY] [Enemy9] Registered as sound listener
[03:52:59] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[03:52:59] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:52:59] [ENEMY] [Enemy10] Registered as sound listener
[03:52:59] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[03:52:59] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:52:59] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:52:59] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:52:59] [INFO] [LastChance] Found player: Player
[03:52:59] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:52:59] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:52:59] [INFO] [LastChance] Connected to player Died signal (C#)
[03:52:59] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:52:59] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:52:59] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:53:01] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:53:01] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:53:01] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:53:01] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:53:01] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[03:53:01] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:53:01] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[03:53:01] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[03:53:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:01] [INFO] [LastChance] Threat detected: Bullet
[03:53:01] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:01] [ENEMY] [Enemy1] Memory: medium confidence (0.62) - transitioning to PURSUING
[03:53:01] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:53:01] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:01] [INFO] [LastChance] Threat detected: Bullet
[03:53:01] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:01] [ENEMY] [Enemy1] PURSUING corner check: angle -63.3°
[03:53:01] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:01] [INFO] [LastChance] Threat detected: @Area2D@2070
[03:53:01] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:01] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:53:01] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:01] [INFO] [LastChance] Threat detected: @Area2D@2072
[03:53:01] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:01] [ENEMY] [Enemy2] Hit taken, health: 1/2
[03:53:01] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[03:53:01] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(-0.822604, -0.568614), lethal=false
[03:53:01] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:53:01] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:53:01] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[03:53:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(633.6722, 734.7938), shooter_id=19156745324829, bullet_pos=(44.50101, 526.222)
[03:53:01] [INFO] [Bullet] Using shooter_position, distance=625
[03:53:01] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
[03:53:01] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[03:53:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(651.7202, 702.0453), shooter_id=19156745324829, bullet_pos=(521.7122, 539.2551)
[03:53:01] [INFO] [Bullet] Using shooter_position, distance=208.333190917969
[03:53:01] [INFO] [Bullet] Distance to wall: 208.333190917969 (14.1857900605625% of viewport)
[03:53:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:53:01] [INFO] [Bullet] Starting wall penetration at (521.7122, 539.2551)
[03:53:01] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[03:53:01] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11.8735513687134
[03:53:01] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:01] [INFO] [Bullet] Exiting penetration at (492.5905, 502.79) after traveling 41.6666679382324 pixels through wall
[03:53:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:01] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[03:53:01] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:01] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(633.6722, 734.7938), shooter_id=19156745324829, bullet_pos=(244.4915, 440.723)
[03:53:01] [INFO] [Bullet] Using shooter_position, distance=487.790191650391
[03:53:01] [INFO] [Bullet] Distance to wall: 487.790191650391 (33.214531116545% of viewport)
[03:53:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:53:01] [INFO] [Bullet] Starting wall penetration at (244.4915, 440.723)
[03:53:01] [INFO] [LastChance] Threat detected: @Area2D@2075
[03:53:01] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 2.96288704872131
[03:53:01] [ENEMY] [Enemy1] PURSUING corner check: angle -58.4°
[03:53:01] [INFO] [Bullet] Max penetration distance exceeded: 70.8333435058594 >= 48
[03:53:01] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:01] [INFO] [Bullet] Exiting penetration at (314.2199, 410.9131) after traveling 70.8333435058594 pixels through wall
[03:53:01] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[03:53:01] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0665, 821.9673), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:02] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:02] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:53:02] [INFO] [LastChance] Threat detected: Bullet
[03:53:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:02] [INFO] [LastChance] Threat detected: @Area2D@2079
[03:53:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0665, 821.9673), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:02] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:02] [INFO] [LastChance] Threat detected: @Area2D@2085
[03:53:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:02] [INFO] [LastChance] Threat detected: @Area2D@2082
[03:53:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(746.2692, 765.3815), shooter_id=19157030537744, bullet_pos=(518.0341, 320.5121)
[03:53:02] [INFO] [Bullet] Using shooter_position, distance=500.000030517578
[03:53:02] [INFO] [Bullet] Distance to wall: 500.000030517578 (34.0459214969257% of viewport)
[03:53:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:53:02] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:53:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0665, 821.9673), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:02] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(699.3325, 753.6732), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:02] [INFO] [LastChance] Threat detected: @Area2D@2092
[03:53:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:02] [INFO] [LastChance] Threat detected: @Area2D@2090
[03:53:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(680.6154, 684.7709), shooter_id=19156745324829, bullet_pos=(565.2082, 28.16932)
[03:53:02] [INFO] [Bullet] Using shooter_position, distance=666.666687011719
[03:53:02] [INFO] [Bullet] Distance to wall: 666.666687011719 (45.3945606105689% of viewport)
[03:53:02] [INFO] [Bullet] Distance-based penetration chance: 93.7063459543362%
[03:53:02] [INFO] [Bullet] Starting wall penetration at (565.2082, 28.16932)
[03:53:02] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[03:53:02] [INFO] [Bullet] Exiting penetration at (557.1297, -17.79279) after traveling 41.6666641235352 pixels through wall
[03:53:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:02] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[03:53:02] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[03:53:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0665, 821.9673), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:02] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:53:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(746.2692, 765.3815), shooter_id=19157030537744, bullet_pos=(681.0655, 40.80733)
[03:53:02] [INFO] [Bullet] Using shooter_position, distance=727.502075195313
[03:53:02] [INFO] [Bullet] Distance to wall: 727.502075195313 (49.5369540584046% of viewport)
[03:53:02] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(699.8564, 779.6229), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:02] [INFO] [LastChance] Threat detected: @Area2D@2099
[03:53:02] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:53:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:02] [INFO] [LastChance] Threat detected: @Area2D@2096
[03:53:02] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:53:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(754.3767, 760.7373), shooter_id=19157030537744, bullet_pos=(506.6592, 52.82767)
[03:53:02] [INFO] [Bullet] Using shooter_position, distance=750.000061035156
[03:53:02] [INFO] [Bullet] Distance to wall: 750.000061035156 (51.0688832843876% of viewport)
[03:53:02] [INFO] [Bullet] Distance-based penetration chance: 87.0863028348812%
[03:53:02] [INFO] [Bullet] Starting wall penetration at (506.6592, 52.82767)
[03:53:02] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24.6006507873535
[03:53:02] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:02] [INFO] [Bullet] Exiting penetration at (491.2457, 8.779945) after traveling 41.6666717529297 pixels through wall
[03:53:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0665, 821.9673), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:02] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(703.49, 769.9354), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(762.0124, 757.5918), shooter_id=19157030537744, bullet_pos=(610.768, 65.5938)
[03:53:02] [INFO] [Bullet] Using shooter_position, distance=708.333312988281
[03:53:02] [INFO] [Bullet] Distance to wall: 708.333312988281 (48.2317177914822% of viewport)
[03:53:02] [INFO] [LastChance] Threat detected: @Area2D@2108
[03:53:02] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:53:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:02] [INFO] [LastChance] Threat detected: @Area2D@2106
[03:53:02] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:53:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0665, 821.9673), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(681.0243, 756.8917), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(768.8894, 755.6329), shooter_id=19157030537744, bullet_pos=(691.0955, 51.58453)
[03:53:02] [INFO] [Bullet] Using shooter_position, distance=708.333251953125
[03:53:02] [INFO] [Bullet] Distance to wall: 708.333251953125 (48.2317136354862% of viewport)
[03:53:02] [INFO] [Bullet] Distance-based penetration chance: 90.3963340919327%
[03:53:02] [INFO] [Bullet] Starting wall penetration at (691.0955, 51.58453)
[03:53:02] [INFO] [LastChance] Threat detected: @Area2D@2111
[03:53:02] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:53:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:02] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.9629516601563
[03:53:02] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:02] [INFO] [Bullet] Exiting penetration at (685.9703, 5.200161) after traveling 41.6666717529297 pixels through wall
[03:53:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:02] [INFO] [LastChance] Threat detected: @Area2D@2113
[03:53:02] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:53:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:53:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0665, 821.9673), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:02] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:53:02] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:53:02] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(656.2772, 750.4491), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(775.6183, 754.4453), shooter_id=19157030537744, bullet_pos=(768.822, 46.14456)
[03:53:02] [INFO] [Bullet] Using shooter_position, distance=708.333374023438
[03:53:02] [INFO] [Bullet] Distance to wall: 708.333374023438 (48.2317219474783% of viewport)
[03:53:02] [INFO] [Bullet] Distance-based penetration chance: 90.3963243946087%
[03:53:02] [INFO] [Bullet] Starting wall penetration at (768.822, 46.14456)
[03:53:02] [INFO] [LastChance] Threat detected: Bullet
[03:53:02] [INFO] [LastChance] Triggering last chance effect!
[03:53:02] [INFO] [LastChance] Starting last chance effect:
[03:53:02] [INFO] [LastChance]   - Time will be frozen (except player)
[03:53:02] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:53:02] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:53:02] [INFO] [LastChance]   - Brightness: 0.60
[03:53:02] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:53:02] [INFO] [LastChance] Skipping player node: Player
[03:53:02] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:53:02] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2069
[03:53:02] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2071
[03:53:02] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2073
[03:53:02] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2076
[03:53:02] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2078
[03:53:02] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2080
[03:53:02] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2083
[03:53:02] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2086
[03:53:02] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2091
[03:53:02] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2093
[03:53:02] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2097
[03:53:02] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2100
[03:53:02] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:02] [INFO] [Bullet] Exiting penetration at (768.774, 41.14479) after traveling 0 pixels through wall
[03:53:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:02] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2107
[03:53:02] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2109
[03:53:02] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2112
[03:53:02] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2115
[03:53:02] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:53:02] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:53:02] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:53:08] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[03:53:08] [INFO] [LastChance] Ending last chance effect
[03:53:08] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[03:53:08] [ENEMY] [Enemy1] Search mode: PURSUING -> SEARCHING at (700, 750)
[03:53:08] [ENEMY] [Enemy1] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[03:53:08] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:53:08] [ENEMY] [Enemy2] Search mode: SUPPRESSED -> SEARCHING at (700, 750)
[03:53:08] [ENEMY] [Enemy2] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[03:53:08] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[03:53:08] [ENEMY] [Enemy3] Search mode: RETREATING -> SEARCHING at (872.7658, 492.3424)
[03:53:08] [ENEMY] [Enemy3] SEARCHING started: center=(872.7658, 492.3424), radius=100, waypoints=5
[03:53:08] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:53:08] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (872.7658, 492.3424)
[03:53:08] [ENEMY] [Enemy4] SEARCHING started: center=(872.7658, 492.3424), radius=100, waypoints=5
[03:53:08] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:53:08] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:53:08] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:53:08] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:53:08] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:53:08] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:53:08] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:53:08] [INFO] [LastChance] All process modes restored
[03:53:08] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:53:08] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2069
[03:53:08] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2071
[03:53:08] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2073
[03:53:08] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2076
[03:53:08] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2078
[03:53:08] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2080
[03:53:08] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2083
[03:53:08] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2086
[03:53:08] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2091
[03:53:08] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2093
[03:53:08] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2097
[03:53:08] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2100
[03:53:08] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2107
[03:53:08] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2109
[03:53:08] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2112
[03:53:08] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2115
[03:53:08] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:53:08] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:53:08] [ENEMY] [Enemy2] SEARCHING corner check: angle 134.2°
[03:53:08] [ENEMY] [Enemy3] SEARCHING corner check: angle -138.6°
[03:53:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(730.3588, 707.4161), shooter_id=19156745324829, bullet_pos=(933.6044, 28.86805)
[03:53:08] [INFO] [Bullet] Using shooter_position, distance=708.333435058594
[03:53:08] [INFO] [Bullet] Distance to wall: 708.333435058594 (48.2317261034743% of viewport)
[03:53:08] [INFO] [Bullet] Distance-based penetration chance: 90.3963195459467%
[03:53:08] [INFO] [Bullet] Penetration failed (distance roll)
[03:53:08] [ENEMY] [Enemy4] SEARCHING corner check: angle -164.9°
[03:53:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(798.7013, 755.5112), shooter_id=19157030537744, bullet_pos=(870.7427, 50.85066)
[03:53:08] [INFO] [Bullet] Using shooter_position, distance=708.333557128906
[03:53:08] [INFO] [Bullet] Distance to wall: 708.333557128906 (48.2317344154663% of viewport)
[03:53:08] [INFO] [Bullet] Distance-based penetration chance: 90.3963098486226%
[03:53:08] [INFO] [Bullet] Starting wall penetration at (870.7427, 50.85066)
[03:53:08] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.7177505493164
[03:53:08] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:08] [INFO] [Bullet] Exiting penetration at (875.489, 4.425976) after traveling 41.6666717529297 pixels through wall
[03:53:08] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:08] [ENEMY] [Enemy1] SEARCHING corner check: angle 174.1°
[03:53:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(704.3739, 702.5565), shooter_id=19156745324829, bullet_pos=(1084.807, 206.6776)
[03:53:08] [INFO] [Bullet] Using shooter_position, distance=624.999938964844
[03:53:08] [INFO] [Bullet] Distance to wall: 624.999938964844 (42.5573951176636% of viewport)
[03:53:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(806.1498, 757.6017), shooter_id=19157030537744, bullet_pos=(957.7065, 65.67172)
[03:53:09] [INFO] [Bullet] Using shooter_position, distance=708.333557128906
[03:53:09] [INFO] [Bullet] Distance to wall: 708.333557128906 (48.2317344154663% of viewport)
[03:53:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(704.3739, 702.5565), shooter_id=19156745324829, bullet_pos=(975.3069, 61.19864)
[03:53:09] [INFO] [Bullet] Using shooter_position, distance=696.235961914063
[03:53:09] [INFO] [Bullet] Distance to wall: 696.235961914063 (47.4079869117716% of viewport)
[03:53:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(806.1498, 757.6017), shooter_id=19157030537744, bullet_pos=(1010.38, 202.5535)
[03:53:09] [INFO] [Bullet] Using shooter_position, distance=591.42919921875
[03:53:09] [INFO] [Bullet] Distance to wall: 591.42919921875 (40.271501717205% of viewport)
[03:53:09] [ENEMY] [Enemy3] SEARCHING corner check: angle -138.6°
[03:53:09] [ENEMY] [Enemy4] SEARCHING corner check: angle -164.9°
[03:53:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(806.1498, 757.6017), shooter_id=19157030537744, bullet_pos=(1055.135, 53.61135)
[03:53:09] [INFO] [Bullet] Using shooter_position, distance=746.723449707031
[03:53:09] [INFO] [Bullet] Distance to wall: 746.723449707031 (50.8457727938986% of viewport)
[03:53:09] [INFO] [Bullet] Distance-based penetration chance: 87.3465984071183%
[03:53:09] [INFO] [Bullet] Starting wall penetration at (1055.135, 53.61135)
[03:53:09] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.5382518768311
[03:53:09] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:09] [INFO] [Bullet] Exiting penetration at (1065.237, 19.99213) after traveling 30.1041717529297 pixels through wall
[03:53:09] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[03:53:09] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[03:53:09] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:53:09] [ENEMY] [Enemy1] SEARCHING corner check: angle 174.1°
[03:53:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:09] [ENEMY] [Enemy3] SEARCHING corner check: angle -138.6°
[03:53:09] [ENEMY] [Enemy4] SEARCHING corner check: angle -164.9°
[03:53:09] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[03:53:09] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:53:09] [ENEMY] [Enemy1] SEARCHING corner check: angle -60.5°
[03:53:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:09] [ENEMY] [Enemy3] SEARCHING corner check: angle -138.6°
[03:53:09] [ENEMY] [Enemy4] SEARCHING corner check: angle -164.9°
[03:53:09] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[03:53:09] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:53:09] [ENEMY] [Enemy1] SEARCHING corner check: angle -60.5°
[03:53:10] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:10] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:53:10] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:53:10] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:53:10] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:53:10] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:53:10] [ENEMY] [Enemy1] Death animation component initialized
[03:53:10] [ENEMY] [Enemy2] Death animation component initialized
[03:53:10] [ENEMY] [Enemy3] Death animation component initialized
[03:53:10] [ENEMY] [Enemy4] Death animation component initialized
[03:53:10] [ENEMY] [Enemy5] Death animation component initialized
[03:53:10] [ENEMY] [Enemy6] Death animation component initialized
[03:53:10] [ENEMY] [Enemy7] Death animation component initialized
[03:53:10] [ENEMY] [Enemy8] Death animation component initialized
[03:53:10] [ENEMY] [Enemy9] Death animation component initialized
[03:53:10] [ENEMY] [Enemy10] Death animation component initialized
[03:53:10] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:53:10] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:53:10] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:53:10] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:53:10] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:53:10] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:53:10] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:53:10] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:53:10] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[03:53:10] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:53:10] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:53:10] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:53:10] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:53:10] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:53:10] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:53:10] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:53:10] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:53:10] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:53:10] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:53:10] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:53:10] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:53:10] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:53:10] [INFO] [ScoreManager] Level started with 10 enemies
[03:53:10] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:53:10] [ENEMY] [Enemy1] Registered as sound listener
[03:53:10] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[03:53:10] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:53:10] [ENEMY] [Enemy2] Registered as sound listener
[03:53:10] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[03:53:10] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:53:10] [ENEMY] [Enemy3] Registered as sound listener
[03:53:10] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[03:53:10] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:53:10] [ENEMY] [Enemy4] Registered as sound listener
[03:53:10] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[03:53:10] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:53:10] [ENEMY] [Enemy5] Registered as sound listener
[03:53:10] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[03:53:10] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:53:10] [ENEMY] [Enemy6] Registered as sound listener
[03:53:10] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[03:53:10] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:53:10] [ENEMY] [Enemy7] Registered as sound listener
[03:53:10] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[03:53:10] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:53:10] [ENEMY] [Enemy8] Registered as sound listener
[03:53:10] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[03:53:10] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:53:10] [ENEMY] [Enemy9] Registered as sound listener
[03:53:10] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[03:53:10] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:53:10] [ENEMY] [Enemy10] Registered as sound listener
[03:53:10] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[03:53:10] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:53:10] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:53:10] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:53:10] [INFO] [LastChance] Found player: Player
[03:53:10] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:53:10] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:53:10] [INFO] [LastChance] Connected to player Died signal (C#)
[03:53:10] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:53:10] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:53:10] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:53:11] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:53:11] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:53:12] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:53:12] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:53:12] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:53:12] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[03:53:12] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:53:12] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[03:53:12] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[03:53:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:12] [INFO] [LastChance] Threat detected: Bullet
[03:53:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.489, 701.2835), shooter_id=20847821587876, bullet_pos=(525.0866, 536.4459)
[03:53:12] [INFO] [Bullet] Using shooter_position, distance=208.333404541016
[03:53:12] [INFO] [Bullet] Distance to wall: 208.333404541016 (14.1858046065486% of viewport)
[03:53:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:53:12] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:12] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:53:12] [INFO] [LastChance] Threat detected: @Area2D@2376
[03:53:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:12] [ENEMY] [Enemy1] Memory: medium confidence (0.61) - transitioning to PURSUING
[03:53:12] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:53:12] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:12] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[03:53:12] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:12] [INFO] [LastChance] Threat detected: @Area2D@2378
[03:53:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:13] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.066, 845.9512), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:13] [INFO] [LastChance] Threat detected: @Area2D@2380
[03:53:13] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:13] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:13] [INFO] [LastChance] Threat detected: @Area2D@2382
[03:53:13] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:13] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0661, 828.824), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.489, 701.2835), shooter_id=20847821587876, bullet_pos=(1004.603, 57.24365)
[03:53:13] [INFO] [Bullet] Using shooter_position, distance=734.0107421875
[03:53:13] [INFO] [Bullet] Distance to wall: 734.0107421875 (49.9801411622859% of viewport)
[03:53:13] [INFO] [Bullet] Distance-based penetration chance: 88.3565019773331%
[03:53:13] [INFO] [Bullet] Starting wall penetration at (1004.603, 57.24365)
[03:53:13] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[03:53:13] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[03:53:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 4.7049994468689
[03:53:13] [INFO] [Bullet] Max penetration distance exceeded: 70.8333358764648 >= 48
[03:53:13] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:13] [INFO] [Bullet] Exiting penetration at (1058.243, 3.638985) after traveling 70.8333358764648 pixels through wall
[03:53:13] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[03:53:13] [INFO] [LastChance] Threat detected: @Area2D@2384
[03:53:13] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:53:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:13] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:53:13] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:13] [INFO] [LastChance] Threat detected: Bullet
[03:53:13] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:53:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(682.092, 684.3501), shooter_id=20847821587876, bullet_pos=(587.8128, 66.50189)
[03:53:13] [INFO] [Bullet] Using shooter_position, distance=625
[03:53:13] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
[03:53:13] [INFO] [Bullet] Distance-based penetration chance: 97.0163675140638%
[03:53:13] [INFO] [Bullet] Starting wall penetration at (587.8128, 66.50189)
[03:53:13] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:53:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11.7654094696045
[03:53:13] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:13] [INFO] [Bullet] Exiting penetration at (580.7733, 20.36922) after traveling 41.6666679382324 pixels through wall
[03:53:13] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:13] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:53:13] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(793.1942, 805.1382), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:13] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[03:53:13] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:53:13] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:53:13] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:53:13] [INFO] [LastChance] Threat detected: @Area2D@2389
[03:53:13] [INFO] [LastChance] Triggering last chance effect!
[03:53:13] [INFO] [LastChance] Starting last chance effect:
[03:53:13] [INFO] [LastChance]   - Time will be frozen (except player)
[03:53:13] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:53:13] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:53:13] [INFO] [LastChance]   - Brightness: 0.60
[03:53:13] [INFO] [LastChance] Pushed bullet @Area2D@2384 from distance 143.5 to 200.0
[03:53:13] [INFO] [LastChance] Pushed bullet @Area2D@2389 from distance 141.6 to 200.0
[03:53:13] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[03:53:13] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:53:13] [INFO] [LastChance] Skipping player node: Player
[03:53:13] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:53:13] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2377
[03:53:13] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2379
[03:53:13] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2381
[03:53:13] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2383
[03:53:13] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2385
[03:53:13] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2387
[03:53:13] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2390
[03:53:13] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:53:13] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:53:13] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:53:19] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[03:53:19] [INFO] [LastChance] Ending last chance effect
[03:53:19] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[03:53:19] [ENEMY] [Enemy1] Search mode: PURSUING -> SEARCHING at (700, 750)
[03:53:19] [ENEMY] [Enemy1] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[03:53:19] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:53:19] [ENEMY] [Enemy2] Search mode: PURSUING -> SEARCHING at (700, 750)
[03:53:19] [ENEMY] [Enemy2] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[03:53:19] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[03:53:19] [ENEMY] [Enemy3] Search mode: RETREATING -> SEARCHING at (750.1469, 520.4905)
[03:53:19] [ENEMY] [Enemy3] SEARCHING started: center=(750.1469, 520.4905), radius=100, waypoints=5
[03:53:19] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:53:19] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (750.1469, 520.4905)
[03:53:19] [ENEMY] [Enemy4] SEARCHING started: center=(750.1469, 520.4905), radius=100, waypoints=5
[03:53:19] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:53:19] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:53:19] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:53:19] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:53:19] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:53:19] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:53:19] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:53:19] [INFO] [LastChance] All process modes restored
[03:53:19] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:53:19] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2377
[03:53:19] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2379
[03:53:19] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2381
[03:53:19] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2383
[03:53:19] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2385
[03:53:19] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2387
[03:53:19] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2390
[03:53:19] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:53:19] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:53:19] [ENEMY] [Enemy2] SEARCHING corner check: angle 134.2°
[03:53:19] [ENEMY] [Enemy3] SEARCHING corner check: angle -167.9°
[03:53:19] [ENEMY] [Enemy4] SEARCHING corner check: angle 169.4°
[03:53:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(753.5475, 785.1299), shooter_id=20848106801793, bullet_pos=(481.9463, 41.51132)
[03:53:19] [INFO] [Bullet] Using shooter_position, distance=791.66650390625
[03:53:19] [INFO] [Bullet] Distance to wall: 791.66650390625 (53.9060279973128% of viewport)
[03:53:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(759.9747, 765.1829), shooter_id=20848106801793, bullet_pos=(553.0094, 33.03128)
[03:53:19] [INFO] [Bullet] Using shooter_position, distance=760.841979980469
[03:53:19] [INFO] [Bullet] Distance to wall: 760.841979980469 (51.8071294819049% of viewport)
[03:53:19] [INFO] [Bullet] Distance-based penetration chance: 86.2250156044443%
[03:53:19] [INFO] [Bullet] Starting wall penetration at (553.0094, 33.03128)
[03:53:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.6031188964844
[03:53:19] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:19] [INFO] [Bullet] Exiting penetration at (541.5995, -12.21903) after traveling 41.6666679382324 pixels through wall
[03:53:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:53:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(773.3169, 740.0575), shooter_id=20848106801793, bullet_pos=(639.6489, 60.802)
[03:53:19] [INFO] [Bullet] Using shooter_position, distance=692.282592773438
[03:53:19] [INFO] [Bullet] Distance to wall: 692.282592773438 (47.1387947373816% of viewport)
[03:53:19] [INFO] [Bullet] Distance-based penetration chance: 91.6714061397215%
[03:53:19] [INFO] [Bullet] Starting wall penetration at (639.6489, 60.802)
[03:53:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17.3834018707275
[03:53:19] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:19] [INFO] [Bullet] Exiting penetration at (631.223, 14.9023) after traveling 41.6666717529297 pixels through wall
[03:53:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:19] [ENEMY] [Enemy1] SEARCHING corner check: angle 159.0°
[03:53:19] [ENEMY] [Enemy3] SEARCHING corner check: angle -167.9°
[03:53:19] [ENEMY] [Enemy4] SEARCHING corner check: angle 169.4°
[03:53:19] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[03:53:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:19] [ENEMY] [Enemy1] SEARCHING corner check: angle 159.0°
[03:53:19] [ENEMY] [Enemy3] SEARCHING corner check: angle -167.9°
[03:53:20] [ENEMY] [Enemy4] SEARCHING corner check: angle 169.4°
[03:53:20] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:53:20] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[03:53:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:20] [ENEMY] [Enemy1] SEARCHING corner check: angle -60.2°
[03:53:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:53:20] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[03:53:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:20] [ENEMY] [Enemy1] SEARCHING corner check: angle -60.2°
[03:53:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:53:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:53:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:21] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:53:21] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:53:21] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:53:21] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:53:21] [ENEMY] [Enemy1] Death animation component initialized
[03:53:21] [ENEMY] [Enemy2] Death animation component initialized
[03:53:21] [ENEMY] [Enemy3] Death animation component initialized
[03:53:21] [ENEMY] [Enemy4] Death animation component initialized
[03:53:21] [ENEMY] [Enemy5] Death animation component initialized
[03:53:21] [ENEMY] [Enemy6] Death animation component initialized
[03:53:21] [ENEMY] [Enemy7] Death animation component initialized
[03:53:21] [ENEMY] [Enemy8] Death animation component initialized
[03:53:21] [ENEMY] [Enemy9] Death animation component initialized
[03:53:21] [ENEMY] [Enemy10] Death animation component initialized
[03:53:21] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:53:21] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:53:21] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:53:21] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:53:21] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:53:21] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:53:21] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:53:21] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:53:21] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[03:53:21] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:53:21] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:53:21] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:53:21] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:53:21] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:53:21] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:53:21] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:53:21] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:53:21] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:53:21] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:53:21] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:53:21] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:53:21] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:53:21] [INFO] [ScoreManager] Level started with 10 enemies
[03:53:21] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:53:21] [ENEMY] [Enemy1] Registered as sound listener
[03:53:21] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[03:53:21] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:53:21] [ENEMY] [Enemy2] Registered as sound listener
[03:53:21] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[03:53:21] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:53:21] [ENEMY] [Enemy3] Registered as sound listener
[03:53:21] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[03:53:21] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:53:21] [ENEMY] [Enemy4] Registered as sound listener
[03:53:21] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[03:53:21] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:53:21] [ENEMY] [Enemy5] Registered as sound listener
[03:53:21] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[03:53:21] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:53:21] [ENEMY] [Enemy6] Registered as sound listener
[03:53:21] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[03:53:21] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:53:21] [ENEMY] [Enemy7] Registered as sound listener
[03:53:21] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[03:53:21] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:53:21] [ENEMY] [Enemy8] Registered as sound listener
[03:53:21] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[03:53:21] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:53:21] [ENEMY] [Enemy9] Registered as sound listener
[03:53:21] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[03:53:21] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:53:21] [ENEMY] [Enemy10] Registered as sound listener
[03:53:21] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[03:53:21] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:53:21] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:53:21] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:53:21] [INFO] [LastChance] Found player: Player
[03:53:21] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:53:21] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:53:21] [INFO] [LastChance] Connected to player Died signal (C#)
[03:53:21] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:53:21] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:53:21] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:53:22] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:53:22] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:53:23] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:53:23] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:53:23] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:53:23] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:23] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:53:23] [ENEMY] [Enemy3] Memory: high confidence (0.90) - transitioning to PURSUING
[03:53:23] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[03:53:24] [ENEMY] [Enemy3] PURSUING corner check: angle 141.3°
[03:53:24] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0668, 877.2967), source=ENEMY (Enemy4), range=1469, listeners=20
[03:53:24] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:53:24] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
[03:53:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(755.6773, 815.453), shooter_id=22581243547085, bullet_pos=(755.6773, 815.453)
[03:53:24] [INFO] [Bullet] Using shooter_position, distance=0
[03:53:24] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[03:53:24] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[03:53:24] [INFO] [Bullet] Starting wall penetration at (755.6773, 815.453)
[03:53:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.930549621582
[03:53:24] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:24] [INFO] [Bullet] Exiting penetration at (741.1979, 771.0895) after traveling 41.6666717529297 pixels through wall
[03:53:24] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:24] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0662, 856.5793), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:24] [ENEMY] [Enemy2] Heard gunshot at (784.0662, 856.5793), source_type=1, intensity=0.01, distance=491
[03:53:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:24] [INFO] [LastChance] Threat detected: Bullet
[03:53:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:24] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[03:53:24] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:53:24] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(787.6174, 835.9351), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:24] [INFO] [LastChance] Threat detected: @Area2D@2646
[03:53:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:24] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(803.4213, 807.4976), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:24] [INFO] [LastChance] Threat detected: @Area2D@2648
[03:53:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(761.6272, 792.3369), shooter_id=22581243547085, bullet_pos=(597.1047, 60.60455)
[03:53:24] [INFO] [Bullet] Using shooter_position, distance=749.999877929688
[03:53:24] [INFO] [Bullet] Distance to wall: 749.999877929688 (51.0688708163995% of viewport)
[03:53:24] [ENEMY] [Enemy1] Memory: medium confidence (0.76) - transitioning to PURSUING
[03:53:24] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:53:24] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(809.3617, 798.6382), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:24] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[03:53:24] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:53:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(473.5151, 606.3819), source=ENEMY (Enemy2), range=1469, listeners=10
[03:53:24] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[03:53:24] [INFO] [LastChance] Threat detected: @Area2D@2651
[03:53:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(771.7914, 769.7526), shooter_id=22581243547085, bullet_pos=(687.1058, 66.49992)
[03:53:24] [INFO] [Bullet] Using shooter_position, distance=708.333190917969
[03:53:24] [INFO] [Bullet] Distance to wall: 708.333190917969 (48.2317094794902% of viewport)
[03:53:24] [INFO] [Bullet] Distance-based penetration chance: 90.3963389405948%
[03:53:24] [INFO] [Bullet] Penetration failed (distance roll)
[03:53:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:53:24] [INFO] [LastChance] Threat detected: @Area2D@2653
[03:53:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:24] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(809.3617, 798.6382), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:24] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:53:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(490.558, 622.4578), source=ENEMY (Enemy2), range=1469, listeners=10
[03:53:24] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[03:53:24] [INFO] [LastChance] Threat detected: Bullet
[03:53:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:24] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:53:24] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:53:24] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:53:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(792.6749, 740.303), shooter_id=22581243547085, bullet_pos=(761.7244, 32.64609)
[03:53:24] [INFO] [Bullet] Using shooter_position, distance=708.333374023438
[03:53:24] [INFO] [Bullet] Distance to wall: 708.333374023438 (48.2317219474783% of viewport)
[03:53:24] [INFO] [Bullet] Distance-based penetration chance: 90.3963243946087%
[03:53:24] [INFO] [Bullet] Starting wall penetration at (761.7244, 32.64609)
[03:53:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.0199584960938
[03:53:24] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:24] [INFO] [Bullet] Exiting penetration at (759.6853, -13.97601) after traveling 41.6666679382324 pixels through wall
[03:53:24] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:24] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[03:53:24] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[03:53:24] [INFO] [PenultimateHit] Player died - ending penultimate effect
[03:53:24] [INFO] [LastChance] Player died
[03:53:24] [INFO] [LastChance] Threat detected: @Area2D@2657
[03:53:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:24] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(809.3617, 798.6382), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:24] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:53:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(522.0555, 629.246), source=ENEMY (Enemy2), range=1469, listeners=10
[03:53:24] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:53:24] [INFO] [LastChance] Threat detected: Bullet
[03:53:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:24] [INFO] [LastChance] Threat detected: @Area2D@2661
[03:53:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:24] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[03:53:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(809.3617, 798.6382), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:24] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:53:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(558.438, 626.8211), source=ENEMY (Enemy2), range=1469, listeners=10
[03:53:24] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:53:24] [INFO] [LastChance] Threat detected: @Area2D@2663
[03:53:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:24] [INFO] [LastChance] Threat detected: Bullet
[03:53:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.3924, 617.0645), shooter_id=22580673121707, bullet_pos=(1376.058, 456.2329)
[03:53:24] [INFO] [Bullet] Using shooter_position, distance=833.333312988281
[03:53:24] [INFO] [Bullet] Distance to wall: 833.333312988281 (56.7431976462142% of viewport)
[03:53:24] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:53:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(593.9141, 615.1933), source=ENEMY (Enemy2), range=1469, listeners=10
[03:53:24] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:53:25] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[03:53:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(841.494, 738.7484), shooter_id=22581243547085, bullet_pos=(1025.759, 273.9402)
[03:53:25] [INFO] [Bullet] Using shooter_position, distance=500.000122070313
[03:53:25] [INFO] [Bullet] Distance to wall: 500.000122070313 (34.0459277309198% of viewport)
[03:53:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:53:25] [INFO] [Bullet] Starting wall penetration at (1025.759, 273.9402)
[03:53:25] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[03:53:25] [INFO] [Bullet] Exiting penetration at (1042.957, 230.5582) after traveling 41.6666717529297 pixels through wall
[03:53:25] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:25] [INFO] [LastChance] Threat detected: @Area2D@2667
[03:53:25] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:25] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:53:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(629.6501, 604.395), source=ENEMY (Enemy2), range=1469, listeners=10
[03:53:25] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:53:25] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:53:25] [ENEMY] [Enemy1] PURSUING corner check: angle 153.7°
[03:53:25] [INFO] [LastChance] Threat detected: Bullet
[03:53:25] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:25] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:53:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(665.72, 594.777), source=ENEMY (Enemy2), range=1469, listeners=10
[03:53:25] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:53:25] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[03:53:25] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:53:25] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:53:25] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:53:25] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:53:25] [ENEMY] [Enemy1] Death animation component initialized
[03:53:25] [ENEMY] [Enemy2] Death animation component initialized
[03:53:25] [ENEMY] [Enemy3] Death animation component initialized
[03:53:25] [ENEMY] [Enemy4] Death animation component initialized
[03:53:25] [ENEMY] [Enemy5] Death animation component initialized
[03:53:25] [ENEMY] [Enemy6] Death animation component initialized
[03:53:25] [ENEMY] [Enemy7] Death animation component initialized
[03:53:25] [ENEMY] [Enemy8] Death animation component initialized
[03:53:25] [ENEMY] [Enemy9] Death animation component initialized
[03:53:25] [ENEMY] [Enemy10] Death animation component initialized
[03:53:25] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:53:25] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:53:25] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:53:25] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:53:25] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:53:25] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:53:25] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:53:25] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:53:25] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[03:53:25] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:53:25] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:53:25] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:53:25] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:53:25] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:53:25] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:53:25] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:53:25] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:53:25] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:53:25] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:53:25] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:53:25] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:53:25] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:53:25] [INFO] [ScoreManager] Level started with 10 enemies
[03:53:25] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:53:25] [ENEMY] [Enemy1] Registered as sound listener
[03:53:25] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[03:53:25] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:53:25] [ENEMY] [Enemy2] Registered as sound listener
[03:53:25] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[03:53:25] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:53:25] [ENEMY] [Enemy3] Registered as sound listener
[03:53:25] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[03:53:25] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:53:25] [ENEMY] [Enemy4] Registered as sound listener
[03:53:25] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[03:53:25] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:53:25] [ENEMY] [Enemy5] Registered as sound listener
[03:53:25] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[03:53:25] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:53:25] [ENEMY] [Enemy6] Registered as sound listener
[03:53:25] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[03:53:25] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:53:25] [ENEMY] [Enemy7] Registered as sound listener
[03:53:25] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[03:53:25] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:53:25] [ENEMY] [Enemy8] Registered as sound listener
[03:53:25] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[03:53:25] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:53:25] [ENEMY] [Enemy9] Registered as sound listener
[03:53:25] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[03:53:25] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:53:25] [ENEMY] [Enemy10] Registered as sound listener
[03:53:25] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[03:53:25] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:53:25] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:53:25] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:53:25] [INFO] [LastChance] Found player: Player
[03:53:25] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:53:25] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:53:25] [INFO] [LastChance] Connected to player Died signal (C#)
[03:53:25] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:53:25] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:53:25] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:53:26] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:53:26] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:53:27] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:27] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:53:27] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:53:27] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[03:53:27] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:53:27] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[03:53:27] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[03:53:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:27] [INFO] [LastChance] Threat detected: Bullet
[03:53:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:27] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:27] [INFO] [LastChance] Threat detected: @Area2D@2925
[03:53:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:27] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:53:27] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(635.1925, 770.7507), shooter_id=23957361134572, bullet_pos=(62.91457, 883.7803)
[03:53:27] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
[03:53:27] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
[03:53:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:53:27] [INFO] [Bullet] Starting wall penetration at (62.91457, 883.7803)
[03:53:27] [INFO] [LastChance] Threat detected: @Area2D@2927
[03:53:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15.1548757553101
[03:53:27] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:27] [INFO] [Bullet] Exiting penetration at (17.13234, 892.8227) after traveling 41.6666641235352 pixels through wall
[03:53:27] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:27] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:53:27] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:53:27] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:53:27] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:53:27] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:53:27] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(633.2076, 763.0143), shooter_id=23957361134572, bullet_pos=(51.62781, 808.2118)
[03:53:27] [INFO] [Bullet] Using shooter_position, distance=583.333374023438
[03:53:27] [INFO] [Bullet] Distance to wall: 583.333374023438 (39.7202420927463% of viewport)
[03:53:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:53:27] [INFO] [Bullet] Starting wall penetration at (51.62781, 808.2118)
[03:53:27] [INFO] [LastChance] Threat detected: Bullet
[03:53:27] [INFO] [LastChance] Triggering last chance effect!
[03:53:27] [INFO] [LastChance] Starting last chance effect:
[03:53:27] [INFO] [LastChance]   - Time will be frozen (except player)
[03:53:27] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:53:27] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:53:27] [INFO] [LastChance]   - Brightness: 0.60
[03:53:27] [INFO] [LastChance] Pushed bullet Bullet from distance 60.8 to 200.0
[03:53:27] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:53:27] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:53:27] [INFO] [LastChance] Skipping player node: Player
[03:53:27] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:53:27] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:27] [INFO] [Bullet] Exiting penetration at (46.64284, 808.5992) after traveling 0 pixels through wall
[03:53:27] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:27] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2926
[03:53:27] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2928
[03:53:27] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2929
[03:53:27] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:53:27] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:53:27] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:53:33] [INFO] [LastChance] Effect duration expired after 6.02 real seconds
[03:53:33] [INFO] [LastChance] Ending last chance effect
[03:53:33] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[03:53:33] [ENEMY] [Enemy1] Search mode: COMBAT -> SEARCHING at (562.935, 731.506)
[03:53:33] [ENEMY] [Enemy1] SEARCHING started: center=(562.935, 731.506), radius=100, waypoints=5
[03:53:33] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:53:33] [ENEMY] [Enemy2] Search mode: COMBAT -> SEARCHING at (700, 750)
[03:53:33] [ENEMY] [Enemy2] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[03:53:33] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[03:53:33] [ENEMY] [Enemy3] Search mode: COMBAT -> SEARCHING at (568.2272, 731.0045)
[03:53:33] [ENEMY] [Enemy3] SEARCHING started: center=(568.2272, 731.0045), radius=100, waypoints=5
[03:53:33] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:53:33] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (517.0281, 753.459)
[03:53:33] [ENEMY] [Enemy4] SEARCHING started: center=(517.0281, 753.459), radius=100, waypoints=5
[03:53:33] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:53:33] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:53:33] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:53:33] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:53:33] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:53:33] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:53:33] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:53:33] [INFO] [LastChance] All process modes restored
[03:53:33] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:53:33] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2926
[03:53:33] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2928
[03:53:33] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2929
[03:53:33] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:53:33] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:53:33] [ENEMY] [Enemy2] SEARCHING corner check: angle 131.5°
[03:53:33] [ENEMY] [Enemy3] SEARCHING corner check: angle -81.8°
[03:53:33] [ENEMY] [Enemy1] SEARCHING corner check: angle -87.9°
[03:53:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(631.9787, 748.0751), shooter_id=23957361134572, bullet_pos=(229.2991, 710.2861)
[03:53:33] [INFO] [Bullet] Using shooter_position, distance=404.448883056641
[03:53:33] [INFO] [Bullet] Distance to wall: 404.448883056641 (27.5396681632434% of viewport)
[03:53:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:53:33] [ENEMY] [Enemy4] SEARCHING corner check: angle -88.7°
[03:53:33] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:53:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(631.9787, 748.0751), shooter_id=23957361134572, bullet_pos=(47.35792, 717.4805)
[03:53:33] [INFO] [Bullet] Using shooter_position, distance=585.420776367188
[03:53:33] [INFO] [Bullet] Distance to wall: 585.420776367188 (39.8623771567267% of viewport)
[03:53:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:53:33] [INFO] [Bullet] Starting wall penetration at (47.35792, 717.4805)
[03:53:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.046745300293
[03:53:33] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:33] [INFO] [Bullet] Exiting penetration at (6.972813, 719.0774) after traveling 35.4166679382324 pixels through wall
[03:53:33] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[03:53:33] [ENEMY] [Enemy3] SEARCHING corner check: angle 98.2°
[03:53:33] [ENEMY] [Enemy1] SEARCHING corner check: angle 153.2°
[03:53:33] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.7°
[03:53:34] [ENEMY] [Enemy4] SEARCHING corner check: angle -38.0°
[03:53:34] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:53:34] [ENEMY] [Enemy1] SEARCHING corner check: angle 153.2°
[03:53:34] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.7°
[03:53:34] [ENEMY] [Enemy4] SEARCHING corner check: angle -53.8°
[03:53:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:53:34] [ENEMY] [Enemy1] SEARCHING corner check: angle -49.4°
[03:53:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:35] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:53:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:35] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:53:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:35] [ENEMY] [Enemy2] SEARCHING corner check: angle -46.5°
[03:53:35] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:53:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:35] [ENEMY] [Enemy4] SEARCHING corner check: angle -179.5°
[03:53:36] [ENEMY] [Enemy1] SEARCHING corner check: angle -20.0°
[03:53:36] [ENEMY] [Enemy2] SEARCHING corner check: angle 133.5°
[03:53:36] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:53:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:36] [ENEMY] [Enemy3] SEARCHING corner check: angle 6.5°
[03:53:36] [ENEMY] [Enemy1] SEARCHING corner check: angle 160.0°
[03:53:36] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:53:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:53:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:53:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:53:36] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:53:36] [ENEMY] [Enemy1] Death animation component initialized
[03:53:36] [ENEMY] [Enemy2] Death animation component initialized
[03:53:36] [ENEMY] [Enemy3] Death animation component initialized
[03:53:36] [ENEMY] [Enemy4] Death animation component initialized
[03:53:36] [ENEMY] [Enemy5] Death animation component initialized
[03:53:36] [ENEMY] [Enemy6] Death animation component initialized
[03:53:36] [ENEMY] [Enemy7] Death animation component initialized
[03:53:36] [ENEMY] [Enemy8] Death animation component initialized
[03:53:36] [ENEMY] [Enemy9] Death animation component initialized
[03:53:36] [ENEMY] [Enemy10] Death animation component initialized
[03:53:36] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:53:36] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:53:36] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:53:36] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:53:36] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:53:36] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:53:36] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:53:36] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:53:36] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[03:53:36] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:53:36] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:53:36] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:53:36] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:53:36] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:53:36] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:53:36] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:53:36] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:53:36] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:53:36] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:53:36] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:53:36] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:53:36] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:53:36] [INFO] [ScoreManager] Level started with 10 enemies
[03:53:36] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:53:36] [ENEMY] [Enemy1] Registered as sound listener
[03:53:36] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[03:53:36] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:53:36] [ENEMY] [Enemy2] Registered as sound listener
[03:53:36] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[03:53:36] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:53:36] [ENEMY] [Enemy3] Registered as sound listener
[03:53:36] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[03:53:36] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:53:36] [ENEMY] [Enemy4] Registered as sound listener
[03:53:36] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[03:53:36] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:53:36] [ENEMY] [Enemy5] Registered as sound listener
[03:53:36] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[03:53:36] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:53:36] [ENEMY] [Enemy6] Registered as sound listener
[03:53:36] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[03:53:36] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:53:36] [ENEMY] [Enemy7] Registered as sound listener
[03:53:36] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[03:53:36] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:53:36] [ENEMY] [Enemy8] Registered as sound listener
[03:53:36] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[03:53:36] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:53:36] [ENEMY] [Enemy9] Registered as sound listener
[03:53:36] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[03:53:36] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:53:36] [ENEMY] [Enemy10] Registered as sound listener
[03:53:36] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[03:53:36] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:53:36] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:53:36] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:53:36] [INFO] [LastChance] Found player: Player
[03:53:36] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:53:36] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:53:36] [INFO] [LastChance] Connected to player Died signal (C#)
[03:53:36] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:53:36] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:53:36] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:53:38] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:53:38] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:53:38] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:38] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.6808, 752.7002), source=ENEMY (Enemy3), range=1469, listeners=20
[03:53:38] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:53:38] [ENEMY] [Enemy2] Heard gunshot at (689.6808, 752.7002), source_type=1, intensity=0.02, distance=354
[03:53:38] [ENEMY] [Enemy4] Heard gunshot at (689.6808, 752.7002), source_type=1, intensity=0.07, distance=184
[03:53:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:38] [INFO] [LastChance] Threat detected: Bullet
[03:53:38] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:38] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.6808, 752.7002), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:38] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:53:38] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:53:38] [INFO] [LastChance] Threat detected: @Area2D@3184
[03:53:38] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:38] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.6808, 752.7002), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(624.0115, 770.5366), shooter_id=25796798319522, bullet_pos=(47.25744, 857.9016)
[03:53:38] [INFO] [Bullet] Using shooter_position, distance=583.333435058594
[03:53:38] [INFO] [Bullet] Distance to wall: 583.333435058594 (39.7202462487424% of viewport)
[03:53:38] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:53:38] [INFO] [Bullet] Starting wall penetration at (47.25744, 857.9016)
[03:53:38] [INFO] [LastChance] Threat detected: @Area2D@3186
[03:53:38] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31.2351818084717
[03:53:38] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:38] [INFO] [Bullet] Exiting penetration at (1.117115, 864.8907) after traveling 41.6666717529297 pixels through wall
[03:53:38] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:38] [ENEMY] [Enemy1] Memory: medium confidence (0.60) - transitioning to PURSUING
[03:53:38] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:53:38] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.6808, 752.7002), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:38] [INFO] [LastChance] Threat detected: Bullet
[03:53:38] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:38] [ENEMY] [Enemy1] PURSUING corner check: angle -63.3°
[03:53:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(621.6332, 752.3446), shooter_id=25796798319522, bullet_pos=(290.701, 712.4066)
[03:53:38] [INFO] [Bullet] Using shooter_position, distance=333.333343505859
[03:53:38] [INFO] [Bullet] Distance to wall: 333.333343505859 (22.6972803052845% of viewport)
[03:53:38] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:53:38] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:53:38] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.6808, 752.7002), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:38] [INFO] [LastChance] Threat detected: Bullet
[03:53:38] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(621.6332, 752.3446), shooter_id=25796798319522, bullet_pos=(48.32187, 784.6505)
[03:53:38] [INFO] [Bullet] Using shooter_position, distance=574.220764160156
[03:53:38] [INFO] [Bullet] Distance to wall: 574.220764160156 (39.0997477305435% of viewport)
[03:53:38] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:53:38] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[03:53:38] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:53:38] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.6808, 752.7002), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:38] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:38] [INFO] [LastChance] Threat detected: @Area2D@3192
[03:53:38] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:38] [ENEMY] [Enemy2] Hit taken, health: 2/3
[03:53:38] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[03:53:38] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(-0.843839, -0.536597), lethal=false
[03:53:38] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:53:38] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:53:38] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[03:53:38] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:53:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[03:53:38] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[03:53:38] [INFO] [LastChance] Threat detected: @Area2D@3194
[03:53:38] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(638.9236, 707.3758), shooter_id=25796798319522, bullet_pos=(500.458, 551.7157)
[03:53:39] [INFO] [Bullet] Using shooter_position, distance=208.333358764648
[03:53:39] [INFO] [Bullet] Distance to wall: 208.333358764648 (14.1858014895516% of viewport)
[03:53:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:53:39] [ENEMY] [Enemy1] PURSUING corner check: angle -58.4°
[03:53:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.6808, 752.7002), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:39] [INFO] [LastChance] Threat detected: Bullet
[03:53:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:39] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[03:53:39] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[03:53:39] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:53:39] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[03:53:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(457.6924, 586.0858), shooter_id=25796513106740, bullet_pos=(909.1975, 800.8956)
[03:53:39] [INFO] [Bullet] Using shooter_position, distance=500.000122070313
[03:53:39] [INFO] [Bullet] Distance to wall: 500.000122070313 (34.0459277309198% of viewport)
[03:53:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:53:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.6808, 752.7002), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:39] [INFO] [LastChance] Threat detected: Bullet
[03:53:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:39] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:53:39] [ENEMY] [Enemy4] Hit taken, health: 3/4
[03:53:39] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[03:53:39] [INFO] [ImpactEffects] spawn_blood_effect called at (733.1907, 914.0671), dir=(-0.821704, 0.569915), lethal=false
[03:53:39] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:53:39] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:53:39] [INFO] [ImpactEffects] Blood effect spawned at (733.1907, 914.0671) (scale=1)
[03:53:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(690.8051, 756.2603), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:39] [INFO] [LastChance] Threat detected: @Area2D@3201
[03:53:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(638.9236, 707.3758), shooter_id=25796798319522, bullet_pos=(1066.01, 61.02546)
[03:53:39] [INFO] [Bullet] Using shooter_position, distance=774.70751953125
[03:53:39] [INFO] [Bullet] Distance to wall: 774.70751953125 (52.7512595663966% of viewport)
[03:53:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(705.2322, 777.5271), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:39] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[03:53:39] [INFO] [LastChance] Threat detected: @Area2D@3204
[03:53:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:39] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[03:53:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(666.673, 688.6592), shooter_id=25796798319522, bullet_pos=(514.6681, 39.55282)
[03:53:39] [INFO] [Bullet] Using shooter_position, distance=666.666870117188
[03:53:39] [INFO] [Bullet] Distance to wall: 666.666870117188 (45.394573078557% of viewport)
[03:53:39] [INFO] [Bullet] Distance-based penetration chance: 93.7063314083502%
[03:53:39] [INFO] [Bullet] Starting wall penetration at (514.6681, 39.55282)
[03:53:39] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[03:53:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38.9095191955566
[03:53:39] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:39] [INFO] [Bullet] Exiting penetration at (504.0278, -5.884624) after traveling 41.6666679382324 pixels through wall
[03:53:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:39] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:53:39] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[03:53:39] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[03:53:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(714.2935, 771.0977), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(679.2245, 689.2043), shooter_id=25796798319522, bullet_pos=(644.157, 65.18883)
[03:53:39] [INFO] [Bullet] Using shooter_position, distance=625.000061035156
[03:53:39] [INFO] [Bullet] Distance to wall: 625.000061035156 (42.5574034296557% of viewport)
[03:53:39] [INFO] [Bullet] Distance-based penetration chance: 97.0163626654017%
[03:53:39] [INFO] [Bullet] Starting wall penetration at (644.157, 65.18883)
[03:53:39] [INFO] [LastChance] Threat detected: Bullet
[03:53:39] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:53:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13.4254817962646
[03:53:39] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:39] [INFO] [Bullet] Exiting penetration at (641.5387, 18.59567) after traveling 41.6666717529297 pixels through wall
[03:53:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(638.9236, 707.3758), shooter_id=25796798319522, bullet_pos=(1360.335, 326.4874)
[03:53:39] [INFO] [Bullet] Using shooter_position, distance=815.787963867188
[03:53:39] [INFO] [Bullet] Distance to wall: 815.787963867188 (55.5485025615067% of viewport)
[03:53:39] [INFO] [Bullet] Distance-based penetration chance: 81.8600803449088%
[03:53:39] [INFO] [Bullet] Starting wall penetration at (1360.335, 326.4874)
[03:53:39] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[03:53:39] [INFO] [Bullet] Exiting penetration at (1386.402, 349.9987) after traveling 30.1041660308838 pixels through wall
[03:53:39] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[03:53:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(711.309, 781.9403), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:39] [INFO] [LastChance] Threat detected: Bullet
[03:53:39] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:53:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(724.5988, 763.5833), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:39] [INFO] [LastChance] Threat detected: @Area2D@3223
[03:53:39] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:53:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:53:39] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[03:53:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(735.6396, 785.9335), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:39] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[03:53:39] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[03:53:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(739.8851, 720.1827), shooter_id=25796798319522, bullet_pos=(961.6945, 47.47397)
[03:53:39] [INFO] [Bullet] Using shooter_position, distance=708.333557128906
[03:53:39] [INFO] [Bullet] Distance to wall: 708.333557128906 (48.2317344154663% of viewport)
[03:53:39] [INFO] [Bullet] Distance-based penetration chance: 90.3963098486226%
[03:53:39] [INFO] [Bullet] Starting wall penetration at (961.6945, 47.47397)
[03:53:39] [INFO] [LastChance] Threat detected: @Area2D@3224
[03:53:39] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:53:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30.3732452392578
[03:53:39] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:39] [INFO] [Bullet] Exiting penetration at (976.3078, 3.154346) after traveling 41.6666679382324 pixels through wall
[03:53:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:39] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[03:53:39] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[03:53:39] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[03:53:39] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[03:53:40] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[03:53:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(761.3823, 707.5121), shooter_id=25796798319522, bullet_pos=(994.7234, 38.71615)
[03:53:40] [INFO] [Bullet] Using shooter_position, distance=708.333435058594
[03:53:40] [INFO] [Bullet] Distance to wall: 708.333435058594 (48.2317261034743% of viewport)
[03:53:40] [INFO] [Bullet] Distance-based penetration chance: 90.3963195459467%
[03:53:40] [INFO] [Bullet] Penetration failed (distance roll)
[03:53:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(738.5677, 782.2843), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:40] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:40] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[03:53:40] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[03:53:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(787.4948, 735.3515), shooter_id=25796798319522, bullet_pos=(1088.165, 235.4762)
[03:53:40] [INFO] [Bullet] Using shooter_position, distance=583.33349609375
[03:53:40] [INFO] [Bullet] Distance to wall: 583.33349609375 (39.7202504047384% of viewport)
[03:53:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:53:40] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:53:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(787.4948, 735.3515), shooter_id=25796798319522, bullet_pos=(949.6418, 67.79306)
[03:53:40] [INFO] [Bullet] Using shooter_position, distance=686.968688964844
[03:53:40] [INFO] [Bullet] Distance to wall: 686.968688964844 (46.776961255647% of viewport)
[03:53:40] [INFO] [Bullet] Distance-based penetration chance: 92.0935452017452%
[03:53:40] [INFO] [Bullet] Starting wall penetration at (949.6418, 67.79306)
[03:53:40] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[03:53:40] [INFO] [Bullet] Exiting penetration at (923.9009, 36.63356) after traveling 35.4166717529297 pixels through wall
[03:53:40] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[03:53:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:53:40] [ENEMY] [Enemy1] FLANKING started: target=(1035.222, 704.5242), side=left, pos=(456.5407, 434.3517)
[03:53:40] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[03:53:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:40] [ENEMY] [Enemy1] FLANKING corner check: angle -175.2°
[03:53:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:53:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:53:41] [ENEMY] [Enemy1] FLANKING corner check: angle 160.9°
[03:53:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:41] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[03:53:41] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[03:53:41] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
[03:53:41] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
[03:53:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:53:41] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
[03:53:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:41] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
[03:53:41] [ENEMY] [Enemy1] FLANKING corner check: angle -47.2°
[03:53:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:53:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:42] [ENEMY] [Enemy1] FLANKING corner check: angle -45.2°
[03:53:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:53:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:42] [ENEMY] [Enemy1] FLANKING corner check: angle -31.9°
[03:53:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:53:42] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:42] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
[03:53:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:53:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(758.4128, 420.3647), source=ENEMY (Enemy1), range=1469, listeners=10
[03:53:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:53:42] [INFO] [LastChance] Threat detected: Bullet
[03:53:42] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:53:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:42] [ENEMY] [Enemy1] State: FLANKING -> COMBAT
[03:53:42] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:53:42] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:53:42] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:53:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(799.0213, 730.5436), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:42] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:53:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(762.2622, 435.8947), source=ENEMY (Enemy1), range=1469, listeners=10
[03:53:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:53:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:53:43] [INFO] [LastChance] Threat detected: @Area2D@3231
[03:53:43] [INFO] [LastChance] Triggering last chance effect!
[03:53:43] [INFO] [LastChance] Starting last chance effect:
[03:53:43] [INFO] [LastChance]   - Time will be frozen (except player)
[03:53:43] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:53:43] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:53:43] [INFO] [LastChance]   - Brightness: 0.60
[03:53:43] [INFO] [LastChance] Pushed bullet @Area2D@3231 from distance 93.2 to 200.0
[03:53:43] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:53:43] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:53:43] [INFO] [LastChance] Skipping player node: Player
[03:53:43] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:53:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3185
[03:53:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3187
[03:53:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3188
[03:53:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3190
[03:53:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3193
[03:53:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3195
[03:53:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3197
[03:53:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3199
[03:53:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3202
[03:53:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3205
[03:53:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3214
[03:53:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3220
[03:53:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3229
[03:53:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3230
[03:53:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3232
[03:53:43] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:53:43] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:53:43] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:53:49] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[03:53:49] [INFO] [LastChance] Ending last chance effect
[03:53:49] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[03:53:49] [ENEMY] [Enemy1] Search mode: COMBAT -> SEARCHING at (918.3993, 487.5716)
[03:53:49] [ENEMY] [Enemy1] SEARCHING started: center=(918.3993, 487.5716), radius=100, waypoints=5
[03:53:49] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:53:49] [ENEMY] [Enemy2] Search mode: PURSUING -> SEARCHING at (606.2502, 642.3872)
[03:53:49] [ENEMY] [Enemy2] SEARCHING started: center=(606.2502, 642.3872), radius=100, waypoints=5
[03:53:49] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[03:53:49] [ENEMY] [Enemy3] Search mode: COMBAT -> SEARCHING at (918.3993, 487.5716)
[03:53:49] [ENEMY] [Enemy3] SEARCHING started: center=(918.3993, 487.5716), radius=100, waypoints=5
[03:53:49] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:53:49] [ENEMY] [Enemy4] Search mode: PURSUING -> SEARCHING at (987.1216, 487.5716)
[03:53:49] [ENEMY] [Enemy4] SEARCHING started: center=(987.1216, 487.5716), radius=100, waypoints=5
[03:53:49] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:53:49] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:53:49] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:53:49] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:53:49] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:53:49] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:53:49] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:53:49] [INFO] [LastChance] All process modes restored
[03:53:49] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:53:49] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3185
[03:53:49] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3187
[03:53:49] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3188
[03:53:49] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3190
[03:53:49] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3193
[03:53:49] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3195
[03:53:49] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3197
[03:53:49] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3199
[03:53:49] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3202
[03:53:49] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3205
[03:53:49] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3214
[03:53:49] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3220
[03:53:49] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3229
[03:53:49] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3230
[03:53:49] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3232
[03:53:49] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:53:49] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:53:49] [ENEMY] [Enemy2] SEARCHING corner check: angle 134.2°
[03:53:49] [ENEMY] [Enemy3] SEARCHING corner check: angle -153.9°
[03:53:49] [ENEMY] [Enemy1] SEARCHING corner check: angle -71.7°
[03:53:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:49] [ENEMY] [Enemy4] SEARCHING corner check: angle -92.6°
[03:53:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(836.7075, 673.743), shooter_id=25796798319522, bullet_pos=(1158.215, 42.57822)
[03:53:49] [INFO] [Bullet] Using shooter_position, distance=708.33349609375
[03:53:49] [INFO] [Bullet] Distance to wall: 708.33349609375 (48.2317302594703% of viewport)
[03:53:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:53:49] [ENEMY] [Enemy3] SEARCHING corner check: angle -153.9°
[03:53:49] [ENEMY] [Enemy1] SEARCHING corner check: angle -71.7°
[03:53:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(823.9877, 464.5402), shooter_id=25796227894762, bullet_pos=(1748.959, 778.5364)
[03:53:49] [INFO] [Bullet] Using shooter_position, distance=976.813598632813
[03:53:49] [INFO] [Bullet] Distance to wall: 976.813598632813 (66.5130341327311% of viewport)
[03:53:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:49] [ENEMY] [Enemy2] SEARCHING corner check: angle 98.8°
[03:53:49] [ENEMY] [Enemy4] SEARCHING corner check: angle -162.7°
[03:53:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:53:49] [ENEMY] [Enemy3] SEARCHING corner check: angle -153.9°
[03:53:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(823.9877, 464.5402), shooter_id=25796227894762, bullet_pos=(2478.24, 404.553)
[03:53:49] [INFO] [Bullet] Using shooter_position, distance=1655.33972167969
[03:53:49] [INFO] [Bullet] Distance to wall: 1655.33972167969 (112.715125550514% of viewport)
[03:53:49] [INFO] [Bullet] Distance-based penetration chance: 27.4569748898973%
[03:53:49] [INFO] [Bullet] Penetration failed (distance roll)
[03:53:49] [ENEMY] [Enemy4] SEARCHING corner check: angle -162.7°
[03:53:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:53:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:53:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:53:50] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:53:50] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:53:50] [ENEMY] [Enemy1] Death animation component initialized
[03:53:50] [ENEMY] [Enemy2] Death animation component initialized
[03:53:50] [ENEMY] [Enemy3] Death animation component initialized
[03:53:50] [ENEMY] [Enemy4] Death animation component initialized
[03:53:50] [ENEMY] [Enemy5] Death animation component initialized
[03:53:50] [ENEMY] [Enemy6] Death animation component initialized
[03:53:50] [ENEMY] [Enemy7] Death animation component initialized
[03:53:50] [ENEMY] [Enemy8] Death animation component initialized
[03:53:50] [ENEMY] [Enemy9] Death animation component initialized
[03:53:50] [ENEMY] [Enemy10] Death animation component initialized
[03:53:50] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:53:50] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:53:50] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:53:50] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:53:50] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:53:50] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:53:50] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:53:50] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:53:50] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[03:53:50] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:53:50] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:53:50] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:53:50] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:53:50] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:53:50] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:53:50] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:53:50] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:53:50] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:53:50] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:53:50] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:53:50] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:53:50] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:53:50] [INFO] [ScoreManager] Level started with 10 enemies
[03:53:50] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:53:50] [ENEMY] [Enemy1] Registered as sound listener
[03:53:50] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[03:53:50] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:53:50] [ENEMY] [Enemy2] Registered as sound listener
[03:53:50] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[03:53:50] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:53:50] [ENEMY] [Enemy3] Registered as sound listener
[03:53:50] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[03:53:50] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:53:50] [ENEMY] [Enemy4] Registered as sound listener
[03:53:50] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[03:53:50] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:53:50] [ENEMY] [Enemy5] Registered as sound listener
[03:53:50] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[03:53:50] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:53:50] [ENEMY] [Enemy6] Registered as sound listener
[03:53:50] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[03:53:50] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:53:50] [ENEMY] [Enemy7] Registered as sound listener
[03:53:50] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[03:53:50] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:53:50] [ENEMY] [Enemy8] Registered as sound listener
[03:53:50] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[03:53:50] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:53:50] [ENEMY] [Enemy9] Registered as sound listener
[03:53:50] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[03:53:50] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:53:50] [ENEMY] [Enemy10] Registered as sound listener
[03:53:50] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[03:53:50] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:53:50] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:53:50] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:53:50] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:53:50] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:53:50] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:53:50] [INFO] [LastChance] Found player: Player
[03:53:50] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:53:50] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:53:50] [INFO] [LastChance] Connected to player Died signal (C#)
[03:53:51] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:53:51] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:53:52] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:53:52] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:53:52] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:53:52] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[03:53:52] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:53:52] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[03:53:52] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[03:53:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:52] [INFO] [LastChance] Threat detected: Bullet
[03:53:52] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.9109, 700.8755), shooter_id=28519740476818, bullet_pos=(526.935, 534.9453)
[03:53:52] [INFO] [Bullet] Using shooter_position, distance=208.333297729492
[03:53:52] [INFO] [Bullet] Distance to wall: 208.333297729492 (14.1857973335555% of viewport)
[03:53:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:53:52] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:52] [INFO] [LastChance] Threat detected: @Area2D@3487
[03:53:52] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:52] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:53:52] [ENEMY] [Enemy1] Memory: medium confidence (0.61) - transitioning to PURSUING
[03:53:52] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:53:52] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[03:53:52] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:52] [INFO] [LastChance] Threat detected: @Area2D@3489
[03:53:52] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:52] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:52] [INFO] [LastChance] Threat detected: @Area2D@3491
[03:53:52] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:53:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:53:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.9109, 700.8755), shooter_id=28519740476818, bullet_pos=(1014.494, 63.92798)
[03:53:53] [INFO] [Bullet] Using shooter_position, distance=732.423706054688
[03:53:53] [INFO] [Bullet] Distance to wall: 732.423706054688 (49.8720769537006% of viewport)
[03:53:53] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:53:53] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:53:53] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:53:53] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:53:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0662, 823.6198), source=ENEMY (Enemy4), range=1469, listeners=10
[03:53:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:53:53] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:53:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:53:53] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:53:53] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:53:53] [INFO] [LastChance] Threat detected: @Area2D@3494
[03:53:53] [INFO] [LastChance] Triggering last chance effect!
[03:53:53] [INFO] [LastChance] Starting last chance effect:
[03:53:53] [INFO] [LastChance]   - Time will be frozen (except player)
[03:53:53] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:53:53] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:53:53] [INFO] [LastChance]   - Brightness: 0.60
[03:53:53] [INFO] [LastChance] Pushed bullet @Area2D@3494 from distance 148.5 to 200.0
[03:53:53] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:53:53] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:53:53] [INFO] [LastChance] Skipping player node: Player
[03:53:53] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:53:53] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3488
[03:53:53] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3490
[03:53:53] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3492
[03:53:53] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3495
[03:53:53] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3497
[03:53:53] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:53:53] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:53:53] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:53:59] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[03:53:59] [INFO] [LastChance] Ending last chance effect
[03:53:59] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[03:53:59] [ENEMY] [Enemy1] Search mode: PURSUING -> SEARCHING at (700, 750)
[03:53:59] [ENEMY] [Enemy1] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[03:53:59] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:53:59] [ENEMY] [Enemy2] Search mode: COMBAT -> SEARCHING at (700, 750)
[03:53:59] [ENEMY] [Enemy2] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[03:53:59] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[03:53:59] [ENEMY] [Enemy3] Search mode: COMBAT -> SEARCHING at (727.6136, 534.045)
[03:53:59] [ENEMY] [Enemy3] SEARCHING started: center=(727.6136, 534.045), radius=100, waypoints=5
[03:53:59] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:53:59] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (727.6136, 534.045)
[03:53:59] [ENEMY] [Enemy4] SEARCHING started: center=(727.6136, 534.045), radius=100, waypoints=5
[03:53:59] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:53:59] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:53:59] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:53:59] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:53:59] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:53:59] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:53:59] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:53:59] [INFO] [LastChance] All process modes restored
[03:53:59] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:53:59] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3488
[03:53:59] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3490
[03:53:59] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3492
[03:53:59] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3495
[03:53:59] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3497
[03:53:59] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:53:59] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:53:59] [ENEMY] [Enemy2] SEARCHING corner check: angle 134.2°
[03:53:59] [ENEMY] [Enemy3] SEARCHING corner check: angle -172.7°
[03:53:59] [ENEMY] [Enemy4] SEARCHING corner check: angle 173.4°
[03:53:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.9109, 700.8755), shooter_id=28519740476818, bullet_pos=(1364.012, 308.2726)
[03:53:59] [INFO] [Bullet] Using shooter_position, distance=812.281677246094
[03:53:59] [INFO] [Bullet] Distance to wall: 812.281677246094 (55.3097530579839% of viewport)
[03:53:59] [ENEMY] [Enemy1] SEARCHING corner check: angle 155.7°
[03:53:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(716.311, 683.9352), shooter_id=28519740476818, bullet_pos=(795.5829, 63.98283)
[03:53:59] [INFO] [Bullet] Using shooter_position, distance=625
[03:53:59] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
[03:53:59] [INFO] [Bullet] Distance-based penetration chance: 97.0163675140638%
[03:53:59] [INFO] [Bullet] Starting wall penetration at (795.5829, 63.98283)
[03:53:59] [INFO] [Bullet] Raycast backward hit penetrating body at distance 14.423433303833
[03:53:59] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:59] [INFO] [Bullet] Exiting penetration at (801.5018, 17.69305) after traveling 41.6666679382324 pixels through wall
[03:53:59] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:53:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(761.4383, 759.4437), shooter_id=28520025688997, bullet_pos=(589.4654, 38.9434)
[03:53:59] [INFO] [Bullet] Using shooter_position, distance=740.739685058594
[03:53:59] [INFO] [Bullet] Distance to wall: 740.739685058594 (50.4383272558135% of viewport)
[03:53:59] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:53:59] [ENEMY] [Enemy3] SEARCHING corner check: angle -172.7°
[03:53:59] [ENEMY] [Enemy4] SEARCHING corner check: angle 167.4°
[03:53:59] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[03:53:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.9109, 700.8755), shooter_id=28519740476818, bullet_pos=(926.541, 628.8552)
[03:53:59] [INFO] [Bullet] Using shooter_position, distance=282.949371337891
[03:53:59] [INFO] [Bullet] Distance to wall: 282.949371337891 (19.2665429924122% of viewport)
[03:53:59] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:53:59] [INFO] [Bullet] Starting wall penetration at (926.541, 628.8552)
[03:53:59] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.5611362457275
[03:53:59] [INFO] [Bullet] Body exited signal received for penetrating body
[03:53:59] [INFO] [Bullet] Exiting penetration at (901.8681, 646.9357) after traveling 25.5885429382324 pixels through wall
[03:53:59] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
[03:53:59] [ENEMY] [Enemy1] SEARCHING corner check: angle 155.7°
[03:53:59] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:53:59] [ENEMY] [Enemy4] SEARCHING corner check: angle 167.4°
[03:53:59] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[03:53:59] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:54:00] [ENEMY] [Enemy1] SEARCHING corner check: angle -60.6°
[03:54:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:00] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[03:54:00] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:54:00] [ENEMY] [Enemy1] SEARCHING corner check: angle -60.6°
[03:54:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:00] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:54:00] [ENEMY] [Enemy1] SEARCHING corner check: angle -60.6°
[03:54:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:00] [ENEMY] [Enemy3] SEARCHING corner check: angle 15.7°
[03:54:00] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:54:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:01] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:54:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:54:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:54:01] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:54:01] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:54:01] [ENEMY] [Enemy1] Death animation component initialized
[03:54:01] [ENEMY] [Enemy2] Death animation component initialized
[03:54:01] [ENEMY] [Enemy3] Death animation component initialized
[03:54:01] [ENEMY] [Enemy4] Death animation component initialized
[03:54:01] [ENEMY] [Enemy5] Death animation component initialized
[03:54:01] [ENEMY] [Enemy6] Death animation component initialized
[03:54:01] [ENEMY] [Enemy7] Death animation component initialized
[03:54:01] [ENEMY] [Enemy8] Death animation component initialized
[03:54:01] [ENEMY] [Enemy9] Death animation component initialized
[03:54:01] [ENEMY] [Enemy10] Death animation component initialized
[03:54:01] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:54:01] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:54:01] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:54:01] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:54:01] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:54:01] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:54:01] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:54:01] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:54:01] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[03:54:01] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:54:01] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:54:01] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:54:01] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:54:01] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:54:01] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:54:01] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:54:01] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:54:01] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:54:01] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:54:01] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:54:01] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:54:01] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:54:01] [INFO] [ScoreManager] Level started with 10 enemies
[03:54:01] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:54:01] [ENEMY] [Enemy1] Registered as sound listener
[03:54:01] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[03:54:01] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:54:01] [ENEMY] [Enemy2] Registered as sound listener
[03:54:01] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[03:54:01] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:54:01] [ENEMY] [Enemy3] Registered as sound listener
[03:54:01] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[03:54:01] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:54:01] [ENEMY] [Enemy4] Registered as sound listener
[03:54:01] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[03:54:01] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:54:01] [ENEMY] [Enemy5] Registered as sound listener
[03:54:01] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[03:54:01] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:54:01] [ENEMY] [Enemy6] Registered as sound listener
[03:54:01] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[03:54:01] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:54:01] [ENEMY] [Enemy7] Registered as sound listener
[03:54:01] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[03:54:01] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:54:01] [ENEMY] [Enemy8] Registered as sound listener
[03:54:01] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[03:54:01] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:54:01] [ENEMY] [Enemy9] Registered as sound listener
[03:54:01] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[03:54:01] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:54:01] [ENEMY] [Enemy10] Registered as sound listener
[03:54:01] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[03:54:01] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:54:01] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:54:01] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:54:01] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:54:01] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:54:01] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:54:01] [INFO] [LastChance] Found player: Player
[03:54:01] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:54:01] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:54:01] [INFO] [LastChance] Connected to player Died signal (C#)
[03:54:02] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:54:02] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:54:03] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:54:03] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:54:03] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:54:03] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:03] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:54:03] [ENEMY] [Enemy3] Memory: high confidence (0.90) - transitioning to PURSUING
[03:54:03] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[03:54:04] [ENEMY] [Enemy3] PURSUING corner check: angle 141.3°
[03:54:04] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0668, 877.3613), source=ENEMY (Enemy4), range=1469, listeners=20
[03:54:04] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:54:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
[03:54:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(755.424, 815.6345), shooter_id=30303192092090, bullet_pos=(755.424, 815.6345)
[03:54:04] [INFO] [Bullet] Using shooter_position, distance=0
[03:54:04] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[03:54:04] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[03:54:04] [INFO] [Bullet] Starting wall penetration at (755.424, 815.6345)
[03:54:04] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.7316551208496
[03:54:04] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:04] [INFO] [Bullet] Exiting penetration at (740.7628, 771.3307) after traveling 41.6666679382324 pixels through wall
[03:54:04] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:04] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0662, 856.7531), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:04] [ENEMY] [Enemy2] Heard gunshot at (784.0662, 856.7531), source_type=1, intensity=0.01, distance=492
[03:54:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:04] [INFO] [LastChance] Threat detected: Bullet
[03:54:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:04] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[03:54:04] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(787.5269, 836.2661), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:04] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:54:04] [INFO] [LastChance] Threat detected: @Area2D@3754
[03:54:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:04] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(802.3249, 807.2229), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:04] [INFO] [LastChance] Threat detected: @Area2D@3756
[03:54:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(761.0772, 792.7054), shooter_id=30303192092090, bullet_pos=(590.287, 62.41023)
[03:54:04] [INFO] [Bullet] Using shooter_position, distance=750.000244140625
[03:54:04] [INFO] [Bullet] Distance to wall: 750.000244140625 (51.0688957523757% of viewport)
[03:54:04] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(814.0173, 772.3852), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:04] [ENEMY] [Enemy1] Memory: medium confidence (0.76) - transitioning to PURSUING
[03:54:04] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:54:04] [INFO] [LastChance] Threat detected: @Area2D@3759
[03:54:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:04] [ENEMY] [Enemy1] PURSUING corner check: angle -63.3°
[03:54:04] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(814.0922, 735.0788), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:54:04] [INFO] [LastChance] Threat detected: Bullet
[03:54:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:04] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:54:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(787.8508, 740.7316), shooter_id=30303192092090, bullet_pos=(717.5131, 35.89902)
[03:54:04] [INFO] [Bullet] Using shooter_position, distance=708.333435058594
[03:54:04] [INFO] [Bullet] Distance to wall: 708.333435058594 (48.2317261034743% of viewport)
[03:54:04] [INFO] [Bullet] Distance-based penetration chance: 90.3963195459467%
[03:54:04] [INFO] [Bullet] Starting wall penetration at (717.5131, 35.89902)
[03:54:04] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42.7482795715332
[03:54:04] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:04] [INFO] [Bullet] Exiting penetration at (712.879, -10.537) after traveling 41.6666679382324 pixels through wall
[03:54:04] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:04] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(816.1794, 713.8545), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:04] [INFO] [LastChance] Threat detected: @Area2D@3763
[03:54:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(803.101, 705.218), shooter_id=30303192092090, bullet_pos=(772.2856, 39.26391)
[03:54:04] [INFO] [Bullet] Using shooter_position, distance=666.666687011719
[03:54:04] [INFO] [Bullet] Distance to wall: 666.666687011719 (45.3945606105689% of viewport)
[03:54:04] [INFO] [Bullet] Distance-based penetration chance: 93.7063459543362%
[03:54:04] [INFO] [Bullet] Starting wall penetration at (772.2856, 39.26391)
[03:54:04] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.3949890136719
[03:54:04] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:04] [INFO] [Bullet] Exiting penetration at (770.1285, -7.352879) after traveling 41.6666679382324 pixels through wall
[03:54:04] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:04] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(816.1794, 713.8545), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(827.0532, 668.276), shooter_id=30303192092090, bullet_pos=(874.982, 45.11646)
[03:54:04] [INFO] [Bullet] Using shooter_position, distance=625
[03:54:04] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
[03:54:04] [INFO] [Bullet] Distance-based penetration chance: 97.0163675140638%
[03:54:04] [INFO] [Bullet] Starting wall penetration at (874.982, 45.11646)
[03:54:04] [INFO] [LastChance] Threat detected: @Area2D@3766
[03:54:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:04] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33.511474609375
[03:54:04] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:04] [INFO] [Bullet] Exiting penetration at (878.5607, -1.412796) after traveling 41.6666717529297 pixels through wall
[03:54:04] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:04] [ENEMY] [Enemy1] PURSUING corner check: angle -58.4°
[03:54:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(816.1794, 713.8545), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:04] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(839.1318, 649.7937), shooter_id=30303192092090, bullet_pos=(981.11, 41.13364)
[03:54:04] [INFO] [Bullet] Using shooter_position, distance=624.999877929688
[03:54:04] [INFO] [Bullet] Distance to wall: 624.999877929688 (42.5573909616676% of viewport)
[03:54:04] [INFO] [LastChance] Threat detected: Bullet
[03:54:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(839.1318, 649.7937), shooter_id=30303192092090, bullet_pos=(1018.823, 219.2685)
[03:54:05] [INFO] [Bullet] Using shooter_position, distance=466.520111083984
[03:54:05] [INFO] [Bullet] Distance to wall: 466.520111083984 (31.7662122185491% of viewport)
[03:54:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:05] [INFO] [Bullet] Starting wall penetration at (1018.823, 219.2685)
[03:54:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(816.1794, 713.8545), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:05] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:05] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15.4236030578613
[03:54:05] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:05] [INFO] [Bullet] Exiting penetration at (1034.53, 293.4574) after traveling 35.4166679382324 pixels through wall
[03:54:05] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[03:54:05] [INFO] [LastChance] Threat detected: @Area2D@3772
[03:54:05] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:05] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:54:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(855.6332, 658.5789), shooter_id=30303192092090, bullet_pos=(1077.304, 257.4162)
[03:54:05] [INFO] [Bullet] Using shooter_position, distance=458.333465576172
[03:54:05] [INFO] [Bullet] Distance to wall: 458.333465576172 (31.2087684720084% of viewport)
[03:54:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:05] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[03:54:05] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[03:54:05] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[03:54:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(855.6332, 658.5789), shooter_id=30303192092090, bullet_pos=(949.4903, 39.17213)
[03:54:05] [INFO] [Bullet] Using shooter_position, distance=626.477416992188
[03:54:05] [INFO] [Bullet] Distance to wall: 626.477416992188 (42.657999313388% of viewport)
[03:54:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:05] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:54:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:05] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:54:05] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[03:54:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:05] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[03:54:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:54:06] [ENEMY] [Enemy2] FLANKING started: target=(786.9396, 335.1231), side=right, pos=(476.8283, 607.8608)
[03:54:06] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[03:54:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(839.9609, 678.4625), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:06] [ENEMY] [Enemy2] FLANKING corner check: angle 2.9°
[03:54:06] [INFO] [LastChance] Threat detected: Bullet
[03:54:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:06] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:54:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(481.3415, 623.8516), source=ENEMY (Enemy2), range=1469, listeners=10
[03:54:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[03:54:06] [ENEMY] [Enemy2] State: FLANKING -> COMBAT
[03:54:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(839.9609, 678.4625), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:06] [INFO] [LastChance] Threat detected: @Area2D@3779
[03:54:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:06] [INFO] [LastChance] Threat detected: @Area2D@3777
[03:54:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:06] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:54:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(518.377, 625.9771), source=ENEMY (Enemy2), range=1469, listeners=10
[03:54:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:54:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(839.9609, 678.4625), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:06] [INFO] [LastChance] Threat detected: @Area2D@3783
[03:54:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(874.7757, 619.7958), shooter_id=30303192092090, bullet_pos=(1130.207, 49.37507)
[03:54:06] [INFO] [Bullet] Using shooter_position, distance=625.000122070313
[03:54:06] [INFO] [Bullet] Distance to wall: 625.000122070313 (42.5574075856517% of viewport)
[03:54:06] [INFO] [LastChance] Threat detected: @Area2D@3781
[03:54:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:54:06] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:54:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(555.6549, 624.2463), source=ENEMY (Enemy2), range=1469, listeners=10
[03:54:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:54:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(839.9609, 678.4625), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(864.6073, 614.8278), shooter_id=30303192092090, bullet_pos=(1011.753, 50.358)
[03:54:06] [INFO] [Bullet] Using shooter_position, distance=583.333435058594
[03:54:06] [INFO] [Bullet] Distance to wall: 583.333435058594 (39.7202462487424% of viewport)
[03:54:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:06] [INFO] [Bullet] Starting wall penetration at (1011.753, 50.358)
[03:54:06] [INFO] [LastChance] Threat detected: @Area2D@3786
[03:54:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:06] [INFO] [LastChance] Threat detected: @Area2D@3788
[03:54:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:06] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.6951732635498
[03:54:06] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:06] [INFO] [Bullet] Exiting penetration at (1023.524, 5.200424) after traveling 41.6666717529297 pixels through wall
[03:54:06] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:06] [ENEMY] [Enemy1] FLANKING started: target=(709.6006, 289.185), side=right, pos=(456.5407, 434.3517)
[03:54:06] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[03:54:06] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:54:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(588.8204, 608.9235), source=ENEMY (Enemy2), range=1469, listeners=10
[03:54:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:54:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(547.6273, 608.4634), shooter_id=30302621665446, bullet_pos=(1371.663, 314.2002)
[03:54:06] [INFO] [Bullet] Using shooter_position, distance=875.000122070313
[03:54:06] [INFO] [Bullet] Distance to wall: 875.000122070313 (59.5803672951155% of viewport)
[03:54:06] [INFO] [LastChance] Threat detected: @Area2D@3791
[03:54:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:06] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(839.9609, 678.4625), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(852.7118, 611.4103), shooter_id=30303192092090, bullet_pos=(895.5082, 29.64899)
[03:54:06] [INFO] [Bullet] Using shooter_position, distance=583.333374023438
[03:54:06] [INFO] [Bullet] Distance to wall: 583.333374023438 (39.7202420927463% of viewport)
[03:54:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:06] [INFO] [LastChance] Threat detected: Bullet
[03:54:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:06] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:54:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(597.7148, 603.0357), source=ENEMY (Enemy2), range=1469, listeners=10
[03:54:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:54:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(583.3804, 605.8486), shooter_id=30302621665446, bullet_pos=(1384.049, 252.9254)
[03:54:06] [INFO] [Bullet] Using shooter_position, distance=875
[03:54:06] [INFO] [Bullet] Distance to wall: 875 (59.5803589831235% of viewport)
[03:54:06] [INFO] [Bullet] Distance-based penetration chance: 77.1562478530226%
[03:54:06] [INFO] [Bullet] Starting wall penetration at (1384.049, 252.9254)
[03:54:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(547.6273, 608.4634), shooter_id=30302621665446, bullet_pos=(1123.114, 267.399)
[03:54:06] [INFO] [Bullet] Using shooter_position, distance=668.961547851563
[03:54:06] [INFO] [Bullet] Distance to wall: 668.961547851563 (45.5508219050309% of viewport)
[03:54:06] [INFO] [LastChance] Threat detected: @Area2D@3796
[03:54:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:06] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42.3487663269043
[03:54:06] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:06] [INFO] [Bullet] Exiting penetration at (1426.751, 234.1028) after traveling 41.6666679382324 pixels through wall
[03:54:06] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:06] [ENEMY] [Enemy1] FLANKING corner check: angle -175.2°
[03:54:06] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(839.9609, 678.4625), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:06] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:06] [INFO] [LastChance] Threat detected: Bullet
[03:54:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:54:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(649.1036, 577.3555), shooter_id=30302621665446, bullet_pos=(1096.993, 272.7275)
[03:54:06] [INFO] [Bullet] Using shooter_position, distance=541.666625976563
[03:54:06] [INFO] [Bullet] Distance to wall: 541.666625976563 (36.883076599841% of viewport)
[03:54:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:06] [INFO] [Bullet] Starting wall penetration at (1096.993, 272.7275)
[03:54:06] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[03:54:06] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[03:54:06] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:54:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(597.7148, 603.0357), source=ENEMY (Enemy2), range=1469, listeners=10
[03:54:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:54:06] [INFO] [Bullet] Raycast backward hit penetrating body at distance 14.0045299530029
[03:54:06] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:06] [INFO] [Bullet] Exiting penetration at (1135.58, 246.4827) after traveling 41.6666679382324 pixels through wall
[03:54:06] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:06] [INFO] [LastChance] Threat detected: @Area2D@3802
[03:54:06] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:54:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:06] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(839.9609, 678.4625), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:06] [INFO] [LastChance] Threat detected: Bullet
[03:54:06] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:54:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(618.5023, 598.154), shooter_id=30302621665446, bullet_pos=(1601.223, 50.53498)
[03:54:06] [INFO] [Bullet] Using shooter_position, distance=1125.00085449219
[03:54:06] [INFO] [Bullet] Distance to wall: 1125.00085449219 (76.6033768765317% of viewport)
[03:54:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(597.7148, 603.0357), source=ENEMY (Enemy2), range=1469, listeners=10
[03:54:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:54:06] [INFO] [LastChance] Threat detected: @Area2D@3806
[03:54:06] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:54:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:07] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(839.9609, 678.4625), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:07] [INFO] [LastChance] Threat detected: Bullet
[03:54:07] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:54:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(597.7148, 603.0357), source=ENEMY (Enemy2), range=1469, listeners=10
[03:54:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:54:07] [INFO] [LastChance] Threat detected: @Area2D@3809
[03:54:07] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:54:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:07] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(839.9609, 678.4625), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(648.1682, 557.3732), shooter_id=30302621665446, bullet_pos=(1087.921, 56.31268)
[03:54:07] [INFO] [Bullet] Using shooter_position, distance=666.666687011719
[03:54:07] [INFO] [Bullet] Distance to wall: 666.666687011719 (45.3945606105689% of viewport)
[03:54:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:54:07] [INFO] [LastChance] Threat detected: Bullet
[03:54:07] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:54:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(597.7148, 603.0357), source=ENEMY (Enemy2), range=1469, listeners=10
[03:54:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:54:07] [INFO] [LastChance] Threat detected: @Area2D@3813
[03:54:07] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:54:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:07] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(839.9609, 678.4625), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:07] [ENEMY] [Enemy1] FLANKING corner check: angle 160.9°
[03:54:07] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
[03:54:07] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
[03:54:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(623.9279, 539.916), shooter_id=30302621665446, bullet_pos=(761.7844, 59.29596)
[03:54:07] [INFO] [Bullet] Using shooter_position, distance=499.999969482422
[03:54:07] [INFO] [Bullet] Distance to wall: 499.999969482422 (34.0459173409297% of viewport)
[03:54:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:07] [INFO] [Bullet] Starting wall penetration at (761.7844, 59.29596)
[03:54:07] [INFO] [LastChance] Threat detected: @Area2D@3815
[03:54:07] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:54:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:07] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18.2700634002686
[03:54:07] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:07] [INFO] [Bullet] Exiting penetration at (774.6509, 14.43808) after traveling 41.6666717529297 pixels through wall
[03:54:07] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(597.7148, 603.0357), source=ENEMY (Enemy2), range=1469, listeners=10
[03:54:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:54:07] [INFO] [LastChance] Threat detected: Bullet
[03:54:07] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:54:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(648.1682, 557.3732), shooter_id=30302621665446, bullet_pos=(1366.635, 429.0475)
[03:54:07] [INFO] [Bullet] Using shooter_position, distance=729.837524414063
[03:54:07] [INFO] [Bullet] Distance to wall: 729.837524414063 (49.6959790902217% of viewport)
[03:54:07] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(839.9609, 678.4625), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:54:07] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:54:07] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:54:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[03:54:07] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[03:54:07] [INFO] [PenultimateHit] Player died - ending penultimate effect
[03:54:07] [INFO] [LastChance] Player died
[03:54:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(618.5023, 598.154), shooter_id=30302621665446, bullet_pos=(2474.03, 359.362)
[03:54:07] [INFO] [Bullet] Using shooter_position, distance=1870.82958984375
[03:54:07] [INFO] [Bullet] Distance to wall: 1870.82958984375 (127.388226924732% of viewport)
[03:54:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(589.3452, 535.834), shooter_id=30302621665446, bullet_pos=(585.0568, 35.85242)
[03:54:07] [INFO] [Bullet] Using shooter_position, distance=499.999938964844
[03:54:07] [INFO] [Bullet] Distance to wall: 499.999938964844 (34.0459152629317% of viewport)
[03:54:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:07] [INFO] [Bullet] Starting wall penetration at (585.0568, 35.85242)
[03:54:07] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42.8141021728516
[03:54:07] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:07] [INFO] [Bullet] Exiting penetration at (584.6566, -10.81253) after traveling 41.6666641235352 pixels through wall
[03:54:07] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:07] [INFO] [LastChance] Threat detected: @Area2D@3820
[03:54:07] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(597.7148, 603.0357), source=ENEMY (Enemy2), range=1469, listeners=10
[03:54:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:54:07] [INFO] [LastChance] Threat detected: Bullet
[03:54:07] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:07] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(839.9609, 678.4625), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:54:07] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[03:54:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(648.1682, 557.3732), shooter_id=30302621665446, bullet_pos=(1224.962, 700.3221)
[03:54:07] [INFO] [Bullet] Using shooter_position, distance=594.243469238281
[03:54:07] [INFO] [Bullet] Distance to wall: 594.243469238281 (40.4631305378211% of viewport)
[03:54:07] [INFO] [LastChance] Threat detected: @Area2D@3825
[03:54:07] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(590.8348, 605.937), source=ENEMY (Enemy2), range=1469, listeners=10
[03:54:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:54:07] [INFO] [LastChance] Threat detected: Bullet
[03:54:07] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:07] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(839.9609, 678.4625), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(559.5305, 545.2656), shooter_id=30302621665446, bullet_pos=(527.1655, 468.474)
[03:54:07] [INFO] [Bullet] Using shooter_position, distance=83.3333435058594
[03:54:07] [INFO] [Bullet] Distance to wall: 83.3333435058594 (5.67432059582062% of viewport)
[03:54:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:07] [INFO] [LastChance] Threat detected: @Area2D@3828
[03:54:07] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(566.7548, 616.0913), source=ENEMY (Enemy2), range=1469, listeners=10
[03:54:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:54:07] [INFO] [LastChance] Threat detected: Bullet
[03:54:07] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:07] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(839.9609, 678.4625), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(779.906, 646.4623), shooter_id=30303192092090, bullet_pos=(505.6355, 457.0239)
[03:54:07] [INFO] [Bullet] Using shooter_position, distance=333.33349609375
[03:54:07] [INFO] [Bullet] Distance to wall: 333.33349609375 (22.6972906952745% of viewport)
[03:54:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:07] [INFO] [Bullet] Starting wall penetration at (505.6355, 457.0239)
[03:54:07] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.8175964355469
[03:54:07] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:07] [INFO] [Bullet] Exiting penetration at (467.2376, 430.5025) after traveling 41.6666679382324 pixels through wall
[03:54:07] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:07] [INFO] [LastChance] Threat detected: @Area2D@3830
[03:54:07] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:07] [ENEMY] [Enemy1] FLANKING corner check: angle -42.8°
[03:54:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(542.2421, 624.8534), source=ENEMY (Enemy2), range=1469, listeners=10
[03:54:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:54:07] [INFO] [LastChance] Threat detected: Bullet
[03:54:07] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:07] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(839.9609, 678.4625), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:54:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(780.7791, 644.8751), shooter_id=30303192092090, bullet_pos=(511.6482, 448.2033)
[03:54:07] [INFO] [Bullet] Using shooter_position, distance=333.33349609375
[03:54:07] [INFO] [Bullet] Distance to wall: 333.33349609375 (22.6972906952745% of viewport)
[03:54:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:07] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:54:07] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:54:07] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:54:07] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:54:07] [ENEMY] [Enemy1] Death animation component initialized
[03:54:07] [ENEMY] [Enemy2] Death animation component initialized
[03:54:07] [ENEMY] [Enemy3] Death animation component initialized
[03:54:07] [ENEMY] [Enemy4] Death animation component initialized
[03:54:07] [ENEMY] [Enemy5] Death animation component initialized
[03:54:07] [ENEMY] [Enemy6] Death animation component initialized
[03:54:07] [ENEMY] [Enemy7] Death animation component initialized
[03:54:07] [ENEMY] [Enemy8] Death animation component initialized
[03:54:07] [ENEMY] [Enemy9] Death animation component initialized
[03:54:07] [ENEMY] [Enemy10] Death animation component initialized
[03:54:07] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:54:07] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:54:07] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:54:07] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:54:07] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:54:07] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:54:07] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:54:07] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:54:07] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[03:54:07] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:54:07] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:54:07] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:54:07] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:54:07] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:54:07] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:54:07] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:54:07] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:54:07] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:54:07] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:54:07] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:54:07] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:54:07] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:54:07] [INFO] [ScoreManager] Level started with 10 enemies
[03:54:07] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:54:07] [ENEMY] [Enemy1] Registered as sound listener
[03:54:07] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[03:54:07] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:54:07] [ENEMY] [Enemy2] Registered as sound listener
[03:54:07] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[03:54:07] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:54:07] [ENEMY] [Enemy3] Registered as sound listener
[03:54:07] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[03:54:07] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:54:07] [ENEMY] [Enemy4] Registered as sound listener
[03:54:07] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[03:54:07] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:54:07] [ENEMY] [Enemy5] Registered as sound listener
[03:54:07] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[03:54:07] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:54:07] [ENEMY] [Enemy6] Registered as sound listener
[03:54:07] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[03:54:07] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:54:07] [ENEMY] [Enemy7] Registered as sound listener
[03:54:07] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[03:54:07] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:54:07] [ENEMY] [Enemy8] Registered as sound listener
[03:54:07] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[03:54:07] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:54:07] [ENEMY] [Enemy9] Registered as sound listener
[03:54:07] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[03:54:07] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:54:07] [ENEMY] [Enemy10] Registered as sound listener
[03:54:07] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[03:54:07] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:54:07] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:54:07] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:54:07] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:54:07] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:54:07] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:54:07] [INFO] [LastChance] Found player: Player
[03:54:07] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:54:07] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:54:07] [INFO] [LastChance] Connected to player Died signal (C#)
[03:54:09] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:54:09] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:54:09] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:54:09] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:54:10] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:54:10] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:54:10] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:54:11] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:54:11] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[03:54:11] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:54:11] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[03:54:11] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[03:54:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:11] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:54:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(654.3127, 699.5691), shooter_id=32617541930555, bullet_pos=(508.808, 496.2755)
[03:54:11] [INFO] [Bullet] Using shooter_position, distance=249.999862670898
[03:54:11] [INFO] [Bullet] Distance to wall: 249.999862670898 (17.0229503584728% of viewport)
[03:54:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:54:11] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:54:11] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:54:11] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:11] [INFO] [LastChance] Threat detected: @Area2D@4090
[03:54:11] [INFO] [LastChance] Triggering last chance effect!
[03:54:11] [INFO] [LastChance] Starting last chance effect:
[03:54:11] [INFO] [LastChance]   - Time will be frozen (except player)
[03:54:11] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:54:11] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:54:11] [INFO] [LastChance]   - Brightness: 0.60
[03:54:11] [INFO] [LastChance] Pushed bullet @Area2D@4090 from distance 65.2 to 200.0
[03:54:11] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:54:11] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:54:11] [INFO] [LastChance] Skipping player node: Player
[03:54:11] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:54:11] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4089
[03:54:11] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4091
[03:54:11] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:54:11] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:54:11] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:54:17] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[03:54:17] [INFO] [LastChance] Ending last chance effect
[03:54:17] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[03:54:17] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:54:17] [ENEMY] [Enemy2] Search mode: COMBAT -> SEARCHING at (700, 750)
[03:54:17] [ENEMY] [Enemy2] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[03:54:17] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[03:54:17] [ENEMY] [Enemy3] Search mode: COMBAT -> SEARCHING at (701.268, 621.2524)
[03:54:17] [ENEMY] [Enemy3] SEARCHING started: center=(701.268, 621.2524), radius=100, waypoints=5
[03:54:17] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:54:17] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (700, 750)
[03:54:17] [ENEMY] [Enemy4] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[03:54:17] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:54:17] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:54:17] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:54:17] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:54:17] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:54:17] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:54:17] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:54:17] [INFO] [LastChance] All process modes restored
[03:54:17] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:54:17] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4089
[03:54:17] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4091
[03:54:17] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:54:17] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:54:17] [ENEMY] [Enemy2] SEARCHING corner check: angle 155.0°
[03:54:17] [ENEMY] [Enemy3] SEARCHING corner check: angle -179.4°
[03:54:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(654.3127, 699.5691), shooter_id=32617541930555, bullet_pos=(860.4086, 45.52097)
[03:54:17] [INFO] [Bullet] Using shooter_position, distance=685.7509765625
[03:54:17] [INFO] [Bullet] Distance to wall: 685.7509765625 (46.6940449789957% of viewport)
[03:54:17] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:54:17] [ENEMY] [Enemy4] SEARCHING corner check: angle 179.8°
[03:54:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(654.3127, 699.5691), shooter_id=32617541930555, bullet_pos=(990.8679, 217.3333)
[03:54:18] [INFO] [Bullet] Using shooter_position, distance=588.065246582031
[03:54:18] [INFO] [Bullet] Distance to wall: 588.065246582031 (40.0424439964074% of viewport)
[03:54:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(708.4654, 682.4801), shooter_id=32617541930555, bullet_pos=(722.6912, 67.14192)
[03:54:18] [INFO] [Bullet] Using shooter_position, distance=615.502624511719
[03:54:18] [INFO] [Bullet] Distance to wall: 615.502624511719 (41.910705512529% of viewport)
[03:54:18] [INFO] [Bullet] Distance-based penetration chance: 97.7708435687162%
[03:54:18] [INFO] [Bullet] Starting wall penetration at (722.6912, 67.14192)
[03:54:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11.523042678833
[03:54:18] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:18] [INFO] [Bullet] Exiting penetration at (723.1508, 20.47752) after traveling 41.6666717529297 pixels through wall
[03:54:18] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:18] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.2°
[03:54:18] [ENEMY] [Enemy3] SEARCHING corner check: angle -179.4°
[03:54:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(654.3127, 699.5691), shooter_id=32617541930555, bullet_pos=(1157.675, 51.38181)
[03:54:18] [INFO] [Bullet] Using shooter_position, distance=820.682739257813
[03:54:18] [INFO] [Bullet] Distance to wall: 820.682739257813 (55.8817968185527% of viewport)
[03:54:18] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:54:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(654.3127, 699.5691), shooter_id=32617541930555, bullet_pos=(1375.193, 239.7641)
[03:54:18] [INFO] [Bullet] Using shooter_position, distance=855.037231445313
[03:54:18] [INFO] [Bullet] Distance to wall: 855.037231445313 (58.2210573639403% of viewport)
[03:54:18] [INFO] [Bullet] Distance-based penetration chance: 78.7420997420697%
[03:54:18] [INFO] [Bullet] Starting wall penetration at (1375.193, 239.7641)
[03:54:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.80753231048584
[03:54:18] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:18] [INFO] [Bullet] Exiting penetration at (1395.414, 257.2766) after traveling 21.7502632141113 pixels through wall
[03:54:18] [INFO] [Bullet] Damage multiplier after penetration: 0.05625
[03:54:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:18] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.2°
[03:54:18] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:54:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:18] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:54:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:54:19] [ENEMY] [Enemy4] SEARCHING corner check: angle -99.9°
[03:54:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:54:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:54:19] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:54:19] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:54:19] [ENEMY] [Enemy1] Death animation component initialized
[03:54:19] [ENEMY] [Enemy2] Death animation component initialized
[03:54:19] [ENEMY] [Enemy3] Death animation component initialized
[03:54:19] [ENEMY] [Enemy4] Death animation component initialized
[03:54:19] [ENEMY] [Enemy5] Death animation component initialized
[03:54:19] [ENEMY] [Enemy6] Death animation component initialized
[03:54:19] [ENEMY] [Enemy7] Death animation component initialized
[03:54:19] [ENEMY] [Enemy8] Death animation component initialized
[03:54:19] [ENEMY] [Enemy9] Death animation component initialized
[03:54:19] [ENEMY] [Enemy10] Death animation component initialized
[03:54:19] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:54:19] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:54:19] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:54:19] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:54:19] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:54:19] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:54:19] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:54:19] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:54:19] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[03:54:19] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:54:19] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:54:19] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:54:19] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:54:19] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:54:19] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:54:19] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:54:19] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:54:19] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:54:19] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:54:19] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:54:19] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:54:19] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:54:19] [INFO] [ScoreManager] Level started with 10 enemies
[03:54:19] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:54:19] [ENEMY] [Enemy1] Registered as sound listener
[03:54:19] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[03:54:19] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:54:19] [ENEMY] [Enemy2] Registered as sound listener
[03:54:19] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[03:54:19] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:54:19] [ENEMY] [Enemy3] Registered as sound listener
[03:54:19] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[03:54:19] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:54:19] [ENEMY] [Enemy4] Registered as sound listener
[03:54:19] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[03:54:19] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:54:19] [ENEMY] [Enemy5] Registered as sound listener
[03:54:19] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[03:54:19] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:54:19] [ENEMY] [Enemy6] Registered as sound listener
[03:54:19] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[03:54:19] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:54:19] [ENEMY] [Enemy7] Registered as sound listener
[03:54:19] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[03:54:19] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:54:19] [ENEMY] [Enemy8] Registered as sound listener
[03:54:19] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[03:54:19] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:54:19] [ENEMY] [Enemy9] Registered as sound listener
[03:54:19] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[03:54:19] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:54:19] [ENEMY] [Enemy10] Registered as sound listener
[03:54:19] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[03:54:19] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:54:19] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:54:19] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:54:19] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:54:19] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:54:19] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:54:19] [INFO] [LastChance] Found player: Player
[03:54:19] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:54:19] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:54:19] [INFO] [LastChance] Connected to player Died signal (C#)
[03:54:20] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:54:20] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:54:21] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:54:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[03:54:21] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:54:21] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[03:54:21] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[03:54:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:21] [INFO] [LastChance] Threat detected: Bullet
[03:54:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:21] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:54:21] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:54:21] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:54:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:21] [INFO] [LastChance] Threat detected: Bullet
[03:54:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:21] [INFO] [LastChance] Threat detected: Bullet
[03:54:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:21] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:54:21] [INFO] [LastChance] Threat detected: @Area2D@4350
[03:54:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:21] [ENEMY] [Enemy2] Hit taken, health: 2/3
[03:54:21] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[03:54:21] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(-0.825343, -0.564632), lethal=false
[03:54:21] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:54:21] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:54:21] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[03:54:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(651.1601, 702.6158), shooter_id=34502210489130, bullet_pos=(519.2485, 541.364)
[03:54:21] [INFO] [Bullet] Using shooter_position, distance=208.333450317383
[03:54:21] [INFO] [Bullet] Distance to wall: 208.333450317383 (14.1858077235456% of viewport)
[03:54:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:21] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[03:54:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:21] [INFO] [LastChance] Threat detected: Bullet
[03:54:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:21] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:54:21] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[03:54:21] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[03:54:21] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[03:54:21] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0662, 814.2879), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:21] [INFO] [LastChance] Threat detected: Bullet
[03:54:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:21] [INFO] [LastChance] Threat detected: @Area2D@4354
[03:54:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:21] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0662, 811.6276), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:21] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:54:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:21] [INFO] [LastChance] Threat detected: @Area2D@4360
[03:54:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:21] [INFO] [LastChance] Threat detected: @Area2D@4358
[03:54:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(744.9963, 758.5731), shooter_id=34502495702268, bullet_pos=(526.5936, 355.6217)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=458.333435058594
[03:54:22] [INFO] [Bullet] Distance to wall: 458.333435058594 (31.2087663940104% of viewport)
[03:54:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(651.1601, 702.6158), shooter_id=34502210489130, bullet_pos=(1042.842, 56.91116)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=755.214477539063
[03:54:22] [INFO] [Bullet] Distance to wall: 755.214477539063 (51.423942492605% of viewport)
[03:54:22] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:54:22] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0662, 811.6276), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(699.4689, 753.6954), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:22] [INFO] [LastChance] Threat detected: @Area2D@4364
[03:54:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:22] [INFO] [LastChance] Threat detected: @Area2D@4366
[03:54:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(679.4833, 685.1181), shooter_id=34502210489130, bullet_pos=(552.6678, 30.62424)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=666.666564941406
[03:54:22] [INFO] [Bullet] Distance to wall: 666.666564941406 (45.3945522985769% of viewport)
[03:54:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[03:54:22] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[03:54:22] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0662, 811.6276), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:22] [ENEMY] [Enemy3] Heard gunshot at (784.0662, 811.6276), source_type=1, intensity=0.31, distance=89
[03:54:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(744.9963, 758.5731), shooter_id=34502495702268, bullet_pos=(733.2571, 61.86845)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=696.803466796875
[03:54:22] [INFO] [Bullet] Distance to wall: 696.803466796875 (47.4466293627917% of viewport)
[03:54:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700.9067, 779.6099), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(679.4833, 685.1181), shooter_id=34502210489130, bullet_pos=(498.7463, 204.5404)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=513.440185546875
[03:54:22] [INFO] [Bullet] Distance to wall: 513.440185546875 (34.9610863671364% of viewport)
[03:54:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:22] [INFO] [Bullet] Starting wall penetration at (498.7463, 204.5404)
[03:54:22] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:54:22] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:22] [INFO] [Bullet] Exiting penetration at (486.7774, 243.1442) after traveling 0 pixels through wall
[03:54:22] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(690.9283, 682.5589), shooter_id=34502210489130, bullet_pos=(679.1573, 57.66969)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=625.000061035156
[03:54:22] [INFO] [Bullet] Distance to wall: 625.000061035156 (42.5574034296557% of viewport)
[03:54:22] [INFO] [Bullet] Distance-based penetration chance: 97.0163626654017%
[03:54:22] [INFO] [Bullet] Starting wall penetration at (679.1573, 57.66969)
[03:54:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.9924240112305
[03:54:22] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:22] [INFO] [Bullet] Exiting penetration at (678.2784, 11.0113) after traveling 41.6666679382324 pixels through wall
[03:54:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:22] [INFO] [LastChance] Threat detected: @Area2D@4374
[03:54:22] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:54:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:22] [INFO] [LastChance] Threat detected: @Area2D@4370
[03:54:22] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:54:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(752.9979, 751.0854), shooter_id=34502495702268, bullet_pos=(489.3183, 48.96482)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=750.000122070313
[03:54:22] [INFO] [Bullet] Distance to wall: 750.000122070313 (51.0688874403836% of viewport)
[03:54:22] [INFO] [Bullet] Distance-based penetration chance: 87.0862979862191%
[03:54:22] [INFO] [Bullet] Starting wall penetration at (489.3183, 48.96482)
[03:54:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.5449810028076
[03:54:22] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:22] [INFO] [Bullet] Exiting penetration at (472.9116, 5.277317) after traveling 41.6666679382324 pixels through wall
[03:54:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:22] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:54:22] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0662, 811.6276), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700.5975, 767.2656), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(651.1601, 702.6158), shooter_id=34502210489130, bullet_pos=(1372.004, 455.2873)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=762.094421386719
[03:54:22] [INFO] [Bullet] Distance to wall: 762.094421386719 (51.8924105202931% of viewport)
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(760.8728, 747.6537), shooter_id=34502495702268, bullet_pos=(597.3682, 58.44923)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=708.333679199219
[03:54:22] [INFO] [Bullet] Distance to wall: 708.333679199219 (48.2317427274584% of viewport)
[03:54:22] [INFO] [LastChance] Threat detected: @Area2D@4385
[03:54:22] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:54:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:22] [INFO] [LastChance] Threat detected: @Area2D@4382
[03:54:22] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:54:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:22] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0662, 811.6276), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(680.5381, 753.431), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(767.9939, 745.5044), shooter_id=34502495702268, bullet_pos=(680.6915, 42.57169)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=708.333312988281
[03:54:22] [INFO] [Bullet] Distance to wall: 708.333312988281 (48.2317177914822% of viewport)
[03:54:22] [INFO] [Bullet] Distance-based penetration chance: 90.3963292432707%
[03:54:22] [INFO] [Bullet] Starting wall penetration at (680.6915, 42.57169)
[03:54:22] [INFO] [LastChance] Threat detected: @Area2D@4390
[03:54:22] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:54:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.0137519836426
[03:54:22] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:22] [INFO] [Bullet] Exiting penetration at (674.9398, -3.739166) after traveling 41.6666679382324 pixels through wall
[03:54:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(651.1601, 702.6158), shooter_id=34502210489130, bullet_pos=(1228.79, 703.3941)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=577.630615234375
[03:54:22] [INFO] [Bullet] Distance to wall: 577.630615234375 (39.3319307603503% of viewport)
[03:54:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:22] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0662, 811.6276), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(654.7466, 751.465), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(774.7617, 744.2183), shooter_id=34502495702268, bullet_pos=(758.9756, 36.06095)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=708.333190917969
[03:54:22] [INFO] [Bullet] Distance to wall: 708.333190917969 (48.2317094794902% of viewport)
[03:54:22] [INFO] [Bullet] Distance-based penetration chance: 90.3963389405948%
[03:54:22] [INFO] [Bullet] Starting wall penetration at (758.9756, 36.06095)
[03:54:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42.6047058105469
[03:54:22] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:22] [INFO] [Bullet] Exiting penetration at (757.9356, -10.59413) after traveling 41.6666679382324 pixels through wall
[03:54:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:22] [INFO] [LastChance] Threat detected: Bullet
[03:54:22] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:54:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:54:22] [INFO] [LastChance] Threat detected: @Area2D@4396
[03:54:22] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:54:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:22] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0662, 811.6276), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(628.6175, 750.9827), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[03:54:22] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(716.8655, 696.1179), shooter_id=34502210489130, bullet_pos=(922.0432, 61.81023)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=666.666442871094
[03:54:22] [INFO] [Bullet] Distance to wall: 666.666442871094 (45.3945439865849% of viewport)
[03:54:22] [INFO] [Bullet] Distance-based penetration chance: 93.7063653489843%
[03:54:22] [INFO] [Bullet] Starting wall penetration at (922.0432, 61.81023)
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(796.9397, 744.8079), shooter_id=34502495702268, bullet_pos=(850.3345, 38.48993)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=708.333312988281
[03:54:22] [INFO] [Bullet] Distance to wall: 708.333312988281 (48.2317177914822% of viewport)
[03:54:22] [INFO] [Bullet] Distance-based penetration chance: 90.3963292432707%
[03:54:22] [INFO] [Bullet] Starting wall penetration at (850.3345, 38.48993)
[03:54:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.1582221984863
[03:54:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15.3357009887695
[03:54:22] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:22] [INFO] [Bullet] Exiting penetration at (853.8522, -8.043964) after traveling 41.6666717529297 pixels through wall
[03:54:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:22] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:22] [INFO] [Bullet] Exiting penetration at (936.4056, 17.40868) after traveling 41.6666679382324 pixels through wall
[03:54:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:22] [INFO] [LastChance] Threat detected: @Area2D@4398
[03:54:22] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:54:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:22] [INFO] [LastChance] Threat detected: @Area2D@4400
[03:54:22] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:54:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:22] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0662, 811.6276), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(602.4884, 750.5004), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(803.954, 746.5502), shooter_id=34502495702268, bullet_pos=(931.9583, 49.87881)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=708.333312988281
[03:54:22] [INFO] [Bullet] Distance to wall: 708.333312988281 (48.2317177914822% of viewport)
[03:54:22] [INFO] [Bullet] Distance-based penetration chance: 90.3963292432707%
[03:54:22] [INFO] [Bullet] Starting wall penetration at (931.9583, 49.87881)
[03:54:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.4885768890381
[03:54:22] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:22] [INFO] [Bullet] Exiting penetration at (940.3915, 3.980461) after traveling 41.666675567627 pixels through wall
[03:54:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:22] [INFO] [LastChance] Threat detected: @Area2D@4403
[03:54:22] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:54:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0662, 811.6276), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:22] [INFO] [LastChance] Threat detected: @Area2D@4405
[03:54:22] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:54:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(576.3593, 750.0181), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(680.5938, 707.2787), shooter_id=34502210489130, bullet_pos=(1079.566, 281.7222)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=583.333129882813
[03:54:22] [INFO] [Bullet] Distance to wall: 583.333129882813 (39.7202254687622% of viewport)
[03:54:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(680.5938, 707.2787), shooter_id=34502210489130, bullet_pos=(1019.411, 235.5478)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=580.799072265625
[03:54:22] [INFO] [Bullet] Distance to wall: 580.799072265625 (39.5476768258869% of viewport)
[03:54:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(810.8328, 749.0645), shooter_id=34502495702268, bullet_pos=(1024.86, 30.25113)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=750.000061035156
[03:54:22] [INFO] [Bullet] Distance to wall: 750.000061035156 (51.0688832843876% of viewport)
[03:54:22] [INFO] [Bullet] Distance-based penetration chance: 87.0863028348812%
[03:54:22] [INFO] [Bullet] Starting wall penetration at (1024.86, 30.25113)
[03:54:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:54:22] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:54:22] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:54:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48.4914283752441
[03:54:22] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:22] [INFO] [Bullet] Exiting penetration at (1038.177, -14.47503) after traveling 41.6666679382324 pixels through wall
[03:54:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(817.0173, 752.0892), shooter_id=34502495702268, bullet_pos=(1007.392, 289.7501)
[03:54:22] [INFO] [Bullet] Using shooter_position, distance=500
[03:54:22] [INFO] [Bullet] Distance to wall: 500 (34.0459194189277% of viewport)
[03:54:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:22] [INFO] [Bullet] Starting wall penetration at (1007.392, 289.7501)
[03:54:22] [INFO] [LastChance] Threat detected: Bullet
[03:54:22] [INFO] [LastChance] Triggering last chance effect!
[03:54:22] [INFO] [LastChance] Starting last chance effect:
[03:54:22] [INFO] [LastChance]   - Time will be frozen (except player)
[03:54:22] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:54:22] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:54:22] [INFO] [LastChance]   - Brightness: 0.60
[03:54:22] [INFO] [LastChance] Pushed bullet Bullet from distance 122.9 to 200.0
[03:54:22] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:54:22] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:54:22] [INFO] [LastChance] Skipping player node: Player
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4348
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4349
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4351
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4352
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4353
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4355
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4359
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4361
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4365
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4367
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4371
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4375
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4383
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4386
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4391
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4395
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4399
[03:54:22] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:22] [INFO] [Bullet] Exiting penetration at (1009.296, 285.1267) after traveling 0 pixels through wall
[03:54:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4404
[03:54:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4407
[03:54:22] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:54:22] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:54:22] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:54:28] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[03:54:28] [INFO] [LastChance] Ending last chance effect
[03:54:28] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[03:54:28] [ENEMY] [Enemy1] Search mode: PURSUING -> SEARCHING at (835.1109, 473.9469)
[03:54:28] [ENEMY] [Enemy1] SEARCHING started: center=(835.1109, 473.9469), radius=100, waypoints=5
[03:54:28] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:54:28] [ENEMY] [Enemy2] Search mode: SUPPRESSED -> SEARCHING at (552.6038, 708.1109)
[03:54:28] [ENEMY] [Enemy2] SEARCHING started: center=(552.6038, 708.1109), radius=100, waypoints=5
[03:54:28] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[03:54:28] [ENEMY] [Enemy3] Search mode: RETREATING -> SEARCHING at (989.1109, 473.9469)
[03:54:28] [ENEMY] [Enemy3] SEARCHING started: center=(989.1109, 473.9469), radius=100, waypoints=5
[03:54:28] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:54:28] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (989.1109, 473.9469)
[03:54:28] [ENEMY] [Enemy4] SEARCHING started: center=(989.1109, 473.9469), radius=100, waypoints=5
[03:54:28] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:54:28] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:54:28] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:54:28] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:54:28] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:54:28] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:54:28] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:54:28] [INFO] [LastChance] All process modes restored
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4348
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4349
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4351
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4352
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4353
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4355
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4359
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4361
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4365
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4367
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4371
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4375
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4383
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4386
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4391
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4395
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4399
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4404
[03:54:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4407
[03:54:28] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:54:28] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:54:29] [ENEMY] [Enemy1] SEARCHING corner check: angle -79.2°
[03:54:29] [ENEMY] [Enemy2] SEARCHING corner check: angle 134.2°
[03:54:29] [ENEMY] [Enemy3] SEARCHING corner check: angle -122.6°
[03:54:29] [ENEMY] [Enemy4] SEARCHING corner check: angle -156.2°
[03:54:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(680.5938, 707.2787), shooter_id=34502210489130, bullet_pos=(1226.397, 53.06909)
[03:54:29] [INFO] [Bullet] Using shooter_position, distance=851.99267578125
[03:54:29] [INFO] [Bullet] Distance to wall: 851.99267578125 (58.0137479703301% of viewport)
[03:54:29] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:54:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(822.3821, 755.5121), shooter_id=34502495702268, bullet_pos=(1085.42, 226.3741)
[03:54:29] [INFO] [Bullet] Using shooter_position, distance=590.911315917969
[03:54:29] [INFO] [Bullet] Distance to wall: 590.911315917969 (40.2362380909514% of viewport)
[03:54:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(680.5938, 707.2787), shooter_id=34502210489130, bullet_pos=(1369.47, 206.3912)
[03:54:29] [INFO] [Bullet] Using shooter_position, distance=851.727355957031
[03:54:29] [INFO] [Bullet] Distance to wall: 851.727355957031 (57.9956818556189% of viewport)
[03:54:29] [INFO] [Bullet] Distance-based penetration chance: 79.0050378351113%
[03:54:29] [INFO] [Bullet] Starting wall penetration at (1369.47, 206.3912)
[03:54:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 3.42907118797302
[03:54:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(822.3821, 755.5121), shooter_id=34502495702268, bullet_pos=(1022.134, 55.64264)
[03:54:29] [INFO] [Bullet] Using shooter_position, distance=727.817443847656
[03:54:29] [INFO] [Bullet] Distance to wall: 727.817443847656 (49.5584280898545% of viewport)
[03:54:29] [INFO] [Bullet] Distance-based penetration chance: 88.8485005618364%
[03:54:29] [INFO] [Bullet] Starting wall penetration at (1022.134, 55.64264)
[03:54:29] [INFO] [Bullet] Max penetration distance exceeded: 51.1770858764648 >= 48
[03:54:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15.2020425796509
[03:54:29] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:29] [INFO] [Bullet] Exiting penetration at (1407.797, 247.4634) after traveling 51.1770858764648 pixels through wall
[03:54:29] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
[03:54:29] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:29] [INFO] [Bullet] Exiting penetration at (1008.087, 17.74574) after traveling 35.4166679382324 pixels through wall
[03:54:29] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[03:54:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:29] [ENEMY] [Enemy1] SEARCHING corner check: angle 152.9°
[03:54:29] [ENEMY] [Enemy3] SEARCHING corner check: angle -122.6°
[03:54:29] [ENEMY] [Enemy4] SEARCHING corner check: angle -156.2°
[03:54:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(635.9976, 717.4326), shooter_id=34502210489130, bullet_pos=(1486.838, 46.85025)
[03:54:29] [INFO] [Bullet] Using shooter_position, distance=1083.33288574219
[03:54:29] [INFO] [Bullet] Distance to wall: 1083.33288574219 (73.7661282637059% of viewport)
[03:54:29] [INFO] [Bullet] Distance-based penetration chance: 60.6061836923432%
[03:54:29] [INFO] [Bullet] Penetration failed (distance roll)
[03:54:29] [ENEMY] [Enemy2] SEARCHING corner check: angle -50.0°
[03:54:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:54:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:29] [ENEMY] [Enemy1] SEARCHING corner check: angle 152.9°
[03:54:29] [ENEMY] [Enemy3] SEARCHING corner check: angle -122.6°
[03:54:29] [ENEMY] [Enemy4] SEARCHING corner check: angle -156.2°
[03:54:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:54:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:30] [ENEMY] [Enemy1] SEARCHING corner check: angle 89.9°
[03:54:30] [ENEMY] [Enemy3] SEARCHING corner check: angle -122.6°
[03:54:30] [ENEMY] [Enemy4] SEARCHING corner check: angle -135.4°
[03:54:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:54:30] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:54:30] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:54:30] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:54:30] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:54:30] [ENEMY] [Enemy1] Death animation component initialized
[03:54:30] [ENEMY] [Enemy2] Death animation component initialized
[03:54:30] [ENEMY] [Enemy3] Death animation component initialized
[03:54:30] [ENEMY] [Enemy4] Death animation component initialized
[03:54:30] [ENEMY] [Enemy5] Death animation component initialized
[03:54:30] [ENEMY] [Enemy6] Death animation component initialized
[03:54:30] [ENEMY] [Enemy7] Death animation component initialized
[03:54:30] [ENEMY] [Enemy8] Death animation component initialized
[03:54:30] [ENEMY] [Enemy9] Death animation component initialized
[03:54:30] [ENEMY] [Enemy10] Death animation component initialized
[03:54:30] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:54:30] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:54:30] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:54:30] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:54:30] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:54:30] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:54:30] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:54:30] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:54:30] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[03:54:30] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:54:30] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:54:30] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:54:30] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:54:30] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:54:30] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:54:30] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:54:30] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:54:30] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:54:30] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:54:30] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:54:30] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:54:30] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:54:30] [INFO] [ScoreManager] Level started with 10 enemies
[03:54:30] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:54:30] [ENEMY] [Enemy1] Registered as sound listener
[03:54:30] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[03:54:30] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:54:30] [ENEMY] [Enemy2] Registered as sound listener
[03:54:30] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[03:54:30] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:54:30] [ENEMY] [Enemy3] Registered as sound listener
[03:54:30] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[03:54:30] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:54:30] [ENEMY] [Enemy4] Registered as sound listener
[03:54:30] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[03:54:30] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:54:30] [ENEMY] [Enemy5] Registered as sound listener
[03:54:30] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[03:54:30] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:54:30] [ENEMY] [Enemy6] Registered as sound listener
[03:54:30] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[03:54:30] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:54:30] [ENEMY] [Enemy7] Registered as sound listener
[03:54:30] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[03:54:30] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:54:30] [ENEMY] [Enemy8] Registered as sound listener
[03:54:30] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[03:54:30] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:54:30] [ENEMY] [Enemy9] Registered as sound listener
[03:54:30] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[03:54:30] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:54:30] [ENEMY] [Enemy10] Registered as sound listener
[03:54:30] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[03:54:30] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:54:30] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:54:30] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:54:30] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:54:30] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:54:30] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:54:30] [INFO] [LastChance] Found player: Player
[03:54:30] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:54:30] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:54:30] [INFO] [LastChance] Connected to player Died signal (C#)
[03:54:31] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:54:31] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:54:31] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:31] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=20
[03:54:31] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:54:31] [ENEMY] [Enemy2] Heard gunshot at (684.4551, 753.7862), source_type=1, intensity=0.02, distance=350
[03:54:31] [ENEMY] [Enemy4] Heard gunshot at (684.4551, 753.7862), source_type=1, intensity=0.07, distance=186
[03:54:31] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:32] [INFO] [LastChance] Threat detected: Bullet
[03:54:32] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:32] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:32] [INFO] [LastChance] Threat detected: @Area2D@4669
[03:54:32] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:32] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:54:32] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:54:32] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(618.5404, 770.6933), shooter_id=36236739741040, bullet_pos=(40.60983, 849.9039)
[03:54:32] [INFO] [Bullet] Using shooter_position, distance=583.333557128906
[03:54:32] [INFO] [Bullet] Distance to wall: 583.333557128906 (39.7202545607344% of viewport)
[03:54:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:32] [INFO] [Bullet] Starting wall penetration at (40.60983, 849.9039)
[03:54:32] [INFO] [LastChance] Threat detected: @Area2D@4671
[03:54:32] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.9763412475586
[03:54:32] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:32] [INFO] [Bullet] Exiting penetration at (-5.624603, 856.2407) after traveling 41.6666717529297 pixels through wall
[03:54:32] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:32] [ENEMY] [Enemy1] Memory: medium confidence (0.60) - transitioning to PURSUING
[03:54:32] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:54:32] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.4326, 751.9061), shooter_id=36236739741040, bullet_pos=(327.7227, 710.4811)
[03:54:32] [INFO] [Bullet] Using shooter_position, distance=291.666564941406
[03:54:32] [INFO] [Bullet] Distance to wall: 291.666564941406 (19.8601127343811% of viewport)
[03:54:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:32] [INFO] [LastChance] Threat detected: Bullet
[03:54:32] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:32] [ENEMY] [Enemy1] PURSUING corner check: angle -63.3°
[03:54:32] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:32] [INFO] [LastChance] Threat detected: Bullet
[03:54:32] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:32] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:54:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.4326, 751.9061), shooter_id=36236739741040, bullet_pos=(45.78792, 770.887)
[03:54:32] [INFO] [Bullet] Using shooter_position, distance=570.960266113281
[03:54:32] [INFO] [Bullet] Distance to wall: 570.960266113281 (38.8777344230046% of viewport)
[03:54:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:32] [INFO] [Bullet] Starting wall penetration at (45.78792, 770.887)
[03:54:32] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[03:54:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.3158264160156
[03:54:32] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:32] [INFO] [Bullet] Exiting penetration at (6.268162, 779.3543) after traveling 35.4166641235352 pixels through wall
[03:54:32] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[03:54:32] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:54:32] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:32] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:32] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[03:54:32] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[03:54:32] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:32] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:32] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:54:32] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:54:32] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:54:32] [ENEMY] [Enemy1] PURSUING corner check: angle -58.4°
[03:54:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(622.2452, 726.2086), shooter_id=36236739741040, bullet_pos=(47.76475, 387.9535)
[03:54:32] [INFO] [Bullet] Using shooter_position, distance=666.666564941406
[03:54:32] [INFO] [Bullet] Distance to wall: 666.666564941406 (45.3945522985769% of viewport)
[03:54:32] [INFO] [Bullet] Distance-based penetration chance: 93.7063556516603%
[03:54:32] [INFO] [Bullet] Starting wall penetration at (47.76475, 387.9535)
[03:54:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.372200012207
[03:54:32] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:32] [INFO] [Bullet] Exiting penetration at (7.551105, 364.2756) after traveling 41.6666679382324 pixels through wall
[03:54:32] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:32] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[03:54:32] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:32] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:32] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:54:32] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[03:54:32] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[03:54:32] [INFO] [PenultimateHit] Player died - ending penultimate effect
[03:54:32] [INFO] [LastChance] Player died
[03:54:32] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[03:54:32] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[03:54:32] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:32] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:32] [INFO] [LastChance] Threat detected: Bullet
[03:54:32] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:33] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:33] [INFO] [LastChance] Threat detected: Bullet
[03:54:33] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:33] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:33] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:54:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:33] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:33] [INFO] [LastChance] Threat detected: Bullet
[03:54:33] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:33] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4551, 753.7862), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:33] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:33] [INFO] [LastChance] Threat detected: Bullet
[03:54:33] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:33] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:33] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:54:33] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:54:33] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:54:33] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:54:33] [ENEMY] [Enemy1] Death animation component initialized
[03:54:33] [ENEMY] [Enemy2] Death animation component initialized
[03:54:33] [ENEMY] [Enemy3] Death animation component initialized
[03:54:33] [ENEMY] [Enemy4] Death animation component initialized
[03:54:33] [ENEMY] [Enemy5] Death animation component initialized
[03:54:33] [ENEMY] [Enemy6] Death animation component initialized
[03:54:33] [ENEMY] [Enemy7] Death animation component initialized
[03:54:33] [ENEMY] [Enemy8] Death animation component initialized
[03:54:33] [ENEMY] [Enemy9] Death animation component initialized
[03:54:33] [ENEMY] [Enemy10] Death animation component initialized
[03:54:33] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:54:33] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:54:33] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:54:33] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:54:33] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:54:33] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:54:33] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:54:33] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:54:33] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[03:54:33] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:54:33] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:54:33] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:54:33] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:54:33] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:54:33] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:54:33] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:54:33] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:54:33] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:54:33] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:54:33] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:54:33] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:54:33] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:54:33] [INFO] [ScoreManager] Level started with 10 enemies
[03:54:33] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:54:33] [ENEMY] [Enemy1] Registered as sound listener
[03:54:33] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[03:54:33] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:54:33] [ENEMY] [Enemy2] Registered as sound listener
[03:54:33] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[03:54:33] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:54:33] [ENEMY] [Enemy3] Registered as sound listener
[03:54:33] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[03:54:33] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:54:33] [ENEMY] [Enemy4] Registered as sound listener
[03:54:33] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[03:54:33] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:54:33] [ENEMY] [Enemy5] Registered as sound listener
[03:54:33] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[03:54:33] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:54:33] [ENEMY] [Enemy6] Registered as sound listener
[03:54:33] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[03:54:33] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:54:33] [ENEMY] [Enemy7] Registered as sound listener
[03:54:33] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[03:54:33] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:54:33] [ENEMY] [Enemy8] Registered as sound listener
[03:54:33] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[03:54:33] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:54:33] [ENEMY] [Enemy9] Registered as sound listener
[03:54:33] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[03:54:33] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:54:33] [ENEMY] [Enemy10] Registered as sound listener
[03:54:33] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[03:54:33] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:54:33] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:54:33] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:54:33] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:54:33] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:54:33] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:54:33] [INFO] [LastChance] Found player: Player
[03:54:33] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:54:33] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:54:33] [INFO] [LastChance] Connected to player Died signal (C#)
[03:54:34] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:54:34] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:54:35] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:54:35] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:54:35] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:54:35] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:54:36] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:54:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:54:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:37] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:54:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:37] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:54:37] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[03:54:37] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[03:54:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.9526, 755.6805), source=ENEMY (Enemy3), range=1469, listeners=20
[03:54:37] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:54:37] [ENEMY] [Enemy2] Heard gunshot at (673.9526, 755.6805), source_type=1, intensity=0.02, distance=343
[03:54:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:37] [INFO] [LastChance] Threat detected: Bullet
[03:54:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:37] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[03:54:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.9526, 755.6805), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:37] [INFO] [LastChance] Threat detected: @Area2D@4939
[03:54:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.9526, 755.6805), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.9734, 772.334), shooter_id=37326705134903, bullet_pos=(29.74271, 849.3212)
[03:54:37] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
[03:54:37] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
[03:54:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:37] [INFO] [Bullet] Starting wall penetration at (29.74271, 849.3212)
[03:54:37] [INFO] [LastChance] Threat detected: @Area2D@4941
[03:54:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:37] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48.9438743591309
[03:54:37] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:37] [INFO] [Bullet] Exiting penetration at (-16.51575, 855.4802) after traveling 41.6666717529297 pixels through wall
[03:54:37] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:37] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:54:37] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(707.5043, 914.0658), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(606.389, 763.7893), shooter_id=37326705134903, bullet_pos=(64.72794, 766.2641)
[03:54:37] [INFO] [Bullet] Using shooter_position, distance=541.666687011719
[03:54:37] [INFO] [Bullet] Distance to wall: 541.666687011719 (36.883080755837% of viewport)
[03:54:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:37] [INFO] [Bullet] Starting wall penetration at (64.72794, 766.2641)
[03:54:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.9526, 755.6805), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:37] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[03:54:37] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13.9383897781372
[03:54:37] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:37] [INFO] [Bullet] Exiting penetration at (18.06176, 766.4773) after traveling 41.6666679382324 pixels through wall
[03:54:37] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:37] [INFO] [LastChance] Threat detected: @Area2D@4945
[03:54:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:37] [INFO] [LastChance] Threat detected: Bullet
[03:54:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[03:54:37] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[03:54:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.9107, 873.444), shooter_id=37326990346994, bullet_pos=(470.7702, 702.199)
[03:54:37] [INFO] [Bullet] Using shooter_position, distance=250.000030517578
[03:54:37] [INFO] [Bullet] Distance to wall: 250.000030517578 (17.0229617874619% of viewport)
[03:54:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:37] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(687.8983, 914.0659), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:54:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.9526, 755.6805), source=ENEMY (Enemy3), range=1469, listeners=10
[03:54:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:37] [INFO] [LastChance] Threat detected: @Area2D@4948
[03:54:37] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:54:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:37] [INFO] [LastChance] Threat detected: @Area2D@4950
[03:54:37] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:54:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:54:37] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:54:37] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:54:37] [ENEMY] [Enemy1] Memory: medium confidence (0.58) - transitioning to PURSUING
[03:54:37] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:54:37] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:54:38] [ENEMY] [Enemy1] PURSUING corner check: angle -63.3°
[03:54:38] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:54:38] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(687.8983, 914.0659), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:38] [INFO] [LastChance] Threat detected: @Area2D@4952
[03:54:38] [INFO] [LastChance] Triggering last chance effect!
[03:54:38] [INFO] [LastChance] Starting last chance effect:
[03:54:38] [INFO] [LastChance]   - Time will be frozen (except player)
[03:54:38] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:54:38] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:54:38] [INFO] [LastChance]   - Brightness: 0.60
[03:54:38] [INFO] [LastChance] Pushed bullet @Area2D@4952 from distance 143.2 to 200.0
[03:54:38] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:54:38] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:54:38] [INFO] [LastChance] Skipping player node: Player
[03:54:38] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:54:38] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4940
[03:54:38] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4942
[03:54:38] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4943
[03:54:38] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4946
[03:54:38] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4949
[03:54:38] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4951
[03:54:38] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4953
[03:54:38] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:54:38] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:54:38] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:54:44] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[03:54:44] [INFO] [LastChance] Ending last chance effect
[03:54:44] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[03:54:44] [ENEMY] [Enemy1] Search mode: PURSUING -> SEARCHING at (673.9526, 755.6805)
[03:54:44] [ENEMY] [Enemy1] SEARCHING started: center=(673.9526, 755.6805), radius=100, waypoints=5
[03:54:44] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:54:44] [ENEMY] [Enemy2] Search mode: PURSUING -> SEARCHING at (673.9526, 755.6805)
[03:54:44] [ENEMY] [Enemy2] SEARCHING started: center=(673.9526, 755.6805), radius=100, waypoints=5
[03:54:44] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[03:54:44] [ENEMY] [Enemy3] Search mode: RETREATING -> SEARCHING at (586.264, 727.7571)
[03:54:44] [ENEMY] [Enemy3] SEARCHING started: center=(586.264, 727.7571), radius=100, waypoints=5
[03:54:44] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:54:44] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (586.264, 727.7571)
[03:54:44] [ENEMY] [Enemy4] SEARCHING started: center=(586.264, 727.7571), radius=100, waypoints=5
[03:54:44] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:54:44] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:54:44] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:54:44] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:54:44] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:54:44] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:54:44] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:54:44] [INFO] [LastChance] All process modes restored
[03:54:44] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:54:44] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4940
[03:54:44] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4942
[03:54:44] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4943
[03:54:44] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4946
[03:54:44] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4949
[03:54:44] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4951
[03:54:44] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4953
[03:54:44] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:54:44] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:54:44] [ENEMY] [Enemy2] SEARCHING corner check: angle 134.2°
[03:54:44] [ENEMY] [Enemy3] SEARCHING corner check: angle 107.7°
[03:54:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:54:44] [ENEMY] [Enemy2] Hit taken, health: 3/4
[03:54:44] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[03:54:44] [INFO] [ImpactEffects] spawn_blood_effect called at (407.3557, 557.1621), dir=(-0.601391, -0.798955), lethal=false
[03:54:44] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:54:44] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:54:44] [INFO] [ImpactEffects] Blood effect spawned at (407.3557, 557.1621) (scale=1)
[03:54:44] [ENEMY] [Enemy4] SEARCHING corner check: angle -89.8°
[03:54:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.9107, 873.444), shooter_id=37326990346994, bullet_pos=(50.06592, 1139.872)
[03:54:44] [INFO] [Bullet] Using shooter_position, distance=659.094787597656
[03:54:44] [INFO] [Bullet] Distance to wall: 659.094787597656 (44.8789760559702% of viewport)
[03:54:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(648.6777, 858.457), shooter_id=37326990346994, bullet_pos=(312.172, 252.1119)
[03:54:44] [INFO] [Bullet] Using shooter_position, distance=693.462646484375
[03:54:44] [INFO] [Bullet] Distance to wall: 693.462646484375 (47.2191467644868% of viewport)
[03:54:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:54:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.9107, 873.444), shooter_id=37326990346994, bullet_pos=(354.3242, 1393.887)
[03:54:44] [INFO] [Bullet] Using shooter_position, distance=600.012268066406
[03:54:44] [INFO] [Bullet] Distance to wall: 600.012268066406 (40.8559386579138% of viewport)
[03:54:44] [ENEMY] [Enemy4] SEARCHING corner check: angle -20.8°
[03:54:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(648.6777, 858.457), shooter_id=37326990346994, bullet_pos=(225.1308, 451.4359)
[03:54:44] [INFO] [Bullet] Using shooter_position, distance=587.41650390625
[03:54:44] [INFO] [Bullet] Distance to wall: 587.41650390625 (39.9982699146808% of viewport)
[03:54:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:44] [ENEMY] [Enemy1] SEARCHING corner check: angle 153.2°
[03:54:44] [ENEMY] [Enemy2] SEARCHING corner check: angle -56.2°
[03:54:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(648.6777, 858.457), shooter_id=37326990346994, bullet_pos=(64.6324, 122.2257)
[03:54:44] [INFO] [Bullet] Using shooter_position, distance=939.758239746094
[03:54:44] [INFO] [Bullet] Distance to wall: 939.758239746094 (63.9898666073377% of viewport)
[03:54:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(648.6777, 858.457), shooter_id=37326990346994, bullet_pos=(101.996, 49.49625)
[03:54:44] [INFO] [Bullet] Using shooter_position, distance=976.359680175781
[03:54:44] [INFO] [Bullet] Distance to wall: 976.359680175781 (66.4821259903093% of viewport)
[03:54:44] [INFO] [Bullet] Distance-based penetration chance: 69.1041863446391%
[03:54:44] [INFO] [Bullet] Penetration failed (distance roll)
[03:54:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:54:44] [ENEMY] [Enemy1] SEARCHING corner check: angle 153.2°
[03:54:44] [ENEMY] [Enemy2] SEARCHING corner check: angle -56.2°
[03:54:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:44] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:54:44] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:54:44] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:54:44] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:54:44] [ENEMY] [Enemy1] Death animation component initialized
[03:54:44] [ENEMY] [Enemy2] Death animation component initialized
[03:54:44] [ENEMY] [Enemy3] Death animation component initialized
[03:54:44] [ENEMY] [Enemy4] Death animation component initialized
[03:54:44] [ENEMY] [Enemy5] Death animation component initialized
[03:54:44] [ENEMY] [Enemy6] Death animation component initialized
[03:54:44] [ENEMY] [Enemy7] Death animation component initialized
[03:54:44] [ENEMY] [Enemy8] Death animation component initialized
[03:54:44] [ENEMY] [Enemy9] Death animation component initialized
[03:54:44] [ENEMY] [Enemy10] Death animation component initialized
[03:54:44] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:54:44] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:54:44] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:54:44] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:54:44] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:54:44] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:54:44] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:54:44] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:54:44] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[03:54:44] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:54:44] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:54:44] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:54:44] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:54:44] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:54:44] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:54:44] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:54:44] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:54:44] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:54:44] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:54:44] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:54:44] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:54:44] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:54:44] [INFO] [ScoreManager] Level started with 10 enemies
[03:54:44] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:54:44] [ENEMY] [Enemy1] Registered as sound listener
[03:54:44] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[03:54:44] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:54:44] [ENEMY] [Enemy2] Registered as sound listener
[03:54:44] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[03:54:44] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:54:44] [ENEMY] [Enemy3] Registered as sound listener
[03:54:44] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[03:54:44] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:54:44] [ENEMY] [Enemy4] Registered as sound listener
[03:54:44] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[03:54:44] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:54:44] [ENEMY] [Enemy5] Registered as sound listener
[03:54:44] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[03:54:44] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:54:44] [ENEMY] [Enemy6] Registered as sound listener
[03:54:44] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[03:54:44] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:54:44] [ENEMY] [Enemy7] Registered as sound listener
[03:54:44] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[03:54:44] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:54:44] [ENEMY] [Enemy8] Registered as sound listener
[03:54:44] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[03:54:44] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:54:44] [ENEMY] [Enemy9] Registered as sound listener
[03:54:44] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[03:54:44] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:54:44] [ENEMY] [Enemy10] Registered as sound listener
[03:54:44] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[03:54:44] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:54:44] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:54:44] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:54:44] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:54:44] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:54:44] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:54:44] [INFO] [LastChance] Found player: Player
[03:54:44] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:54:44] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:54:44] [INFO] [LastChance] Connected to player Died signal (C#)
[03:54:46] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:54:46] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:54:46] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:54:46] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:54:47] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:54:47] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:47] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:54:47] [ENEMY] [Enemy3] Memory: high confidence (0.90) - transitioning to PURSUING
[03:54:47] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[03:54:47] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0668, 877.439), source=ENEMY (Enemy4), range=1469, listeners=20
[03:54:47] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:54:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
[03:54:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(755.3405, 815.7511), shooter_id=39284589463927, bullet_pos=(755.3405, 815.7511)
[03:54:47] [INFO] [Bullet] Using shooter_position, distance=0
[03:54:47] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[03:54:47] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[03:54:47] [INFO] [Bullet] Starting wall penetration at (755.3405, 815.7511)
[03:54:47] [ENEMY] [Enemy3] PURSUING corner check: angle 141.3°
[03:54:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.6060981750488
[03:54:47] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:47] [INFO] [Bullet] Exiting penetration at (740.6193, 771.4672) after traveling 41.6666717529297 pixels through wall
[03:54:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:47] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0662, 856.8334), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:47] [ENEMY] [Enemy2] Heard gunshot at (784.0662, 856.8334), source_type=1, intensity=0.01, distance=492
[03:54:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:47] [INFO] [LastChance] Threat detected: Bullet
[03:54:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:47] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[03:54:47] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(787.5005, 836.3506), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:47] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:54:47] [INFO] [LastChance] Threat detected: @Area2D@5220
[03:54:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:47] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(802.078, 807.187), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:47] [INFO] [LastChance] Threat detected: @Area2D@5222
[03:54:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(761.1318, 792.7662), shooter_id=39284589463927, bullet_pos=(590.9634, 62.32594)
[03:54:47] [INFO] [Bullet] Using shooter_position, distance=750.000183105469
[03:54:47] [INFO] [Bullet] Distance to wall: 750.000183105469 (51.0688915963796% of viewport)
[03:54:47] [INFO] [Bullet] Distance-based penetration chance: 87.0862931375571%
[03:54:47] [INFO] [Bullet] Starting wall penetration at (590.9634, 62.32594)
[03:54:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15.5286550521851
[03:54:47] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:47] [INFO] [Bullet] Exiting penetration at (580.3752, 16.87633) after traveling 41.6666717529297 pixels through wall
[03:54:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:47] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(813.4901, 772.2614), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:48] [ENEMY] [Enemy1] Memory: medium confidence (0.60) - transitioning to PURSUING
[03:54:48] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:54:48] [INFO] [LastChance] Threat detected: Bullet
[03:54:48] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:48] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[03:54:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(769.8132, 770.641), shooter_id=39284589463927, bullet_pos=(659.171, 28.84713)
[03:54:48] [INFO] [Bullet] Using shooter_position, distance=749.999938964844
[03:54:48] [INFO] [Bullet] Distance to wall: 749.999938964844 (51.0688749723955% of viewport)
[03:54:48] [INFO] [Bullet] Distance-based penetration chance: 87.0863125322052%
[03:54:48] [INFO] [Bullet] Starting wall penetration at (659.171, 28.84713)
[03:54:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49.8544082641602
[03:54:48] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:48] [INFO] [Bullet] Exiting penetration at (652.2866, -17.30893) after traveling 41.6666679382324 pixels through wall
[03:54:48] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:48] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(812.8804, 734.9518), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:54:48] [INFO] [LastChance] Threat detected: @Area2D@5227
[03:54:48] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:48] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:54:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(787.0609, 740.8162), shooter_id=39284589463927, bullet_pos=(710.9656, 36.58204)
[03:54:48] [INFO] [Bullet] Using shooter_position, distance=708.333435058594
[03:54:48] [INFO] [Bullet] Distance to wall: 708.333435058594 (48.2317261034743% of viewport)
[03:54:48] [INFO] [Bullet] Distance-based penetration chance: 90.3963195459467%
[03:54:48] [INFO] [Bullet] Starting wall penetration at (710.9656, 36.58204)
[03:54:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42.0579605102539
[03:54:48] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:48] [INFO] [Bullet] Exiting penetration at (705.9522, -9.814562) after traveling 41.6666679382324 pixels through wall
[03:54:48] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:48] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(816.3564, 697.8083), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:48] [INFO] [LastChance] Threat detected: @Area2D@5230
[03:54:48] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(801.8611, 705.2139), shooter_id=39284589463927, bullet_pos=(763.9763, 39.62439)
[03:54:48] [INFO] [Bullet] Using shooter_position, distance=666.666809082031
[03:54:48] [INFO] [Bullet] Distance to wall: 666.666809082031 (45.394568922561% of viewport)
[03:54:48] [INFO] [Bullet] Distance-based penetration chance: 93.7063362570122%
[03:54:48] [INFO] [Bullet] Starting wall penetration at (763.9763, 39.62439)
[03:54:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.0299377441406
[03:54:48] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:48] [INFO] [Bullet] Exiting penetration at (761.3244, -6.966866) after traveling 41.6666679382324 pixels through wall
[03:54:48] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:48] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:54:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(819.1806, 682.0626), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:54:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(823.6744, 667.7648), shooter_id=39284589463927, bullet_pos=(851.4258, 43.38123)
[03:54:48] [INFO] [Bullet] Using shooter_position, distance=625
[03:54:48] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
[03:54:48] [INFO] [Bullet] Distance-based penetration chance: 97.0163675140638%
[03:54:48] [INFO] [Bullet] Starting wall penetration at (851.4258, 43.38123)
[03:54:48] [INFO] [LastChance] Threat detected: Bullet
[03:54:48] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.2742042541504
[03:54:48] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:48] [INFO] [Bullet] Exiting penetration at (853.4979, -3.239414) after traveling 41.6666717529297 pixels through wall
[03:54:48] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:48] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[03:54:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(819.1806, 682.0626), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:48] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(835.4717, 632.4998), shooter_id=39284589463927, bullet_pos=(934.0818, 57.56154)
[03:54:48] [INFO] [Bullet] Using shooter_position, distance=583.33349609375
[03:54:48] [INFO] [Bullet] Distance to wall: 583.33349609375 (39.7202504047384% of viewport)
[03:54:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:48] [INFO] [Bullet] Starting wall penetration at (934.0818, 57.56154)
[03:54:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.7318801879883
[03:54:48] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:48] [INFO] [Bullet] Exiting penetration at (941.9706, 11.56649) after traveling 41.6666679382324 pixels through wall
[03:54:48] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:54:48] [INFO] [LastChance] Threat detected: @Area2D@5235
[03:54:48] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:54:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(847.9346, 620.3876), shooter_id=39284589463927, bullet_pos=(979.5502, 225.0544)
[03:54:48] [INFO] [Bullet] Using shooter_position, distance=416.666595458984
[03:54:48] [INFO] [Bullet] Distance to wall: 416.666595458984 (28.3715946671111% of viewport)
[03:54:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:48] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[03:54:48] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[03:54:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(819.1806, 682.0626), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:48] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(847.9346, 620.3876), shooter_id=39284589463927, bullet_pos=(900.5796, 60.9873)
[03:54:48] [INFO] [Bullet] Using shooter_position, distance=561.8720703125
[03:54:48] [INFO] [Bullet] Distance to wall: 561.8720703125 (38.2589024592109% of viewport)
[03:54:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:48] [INFO] [Bullet] Starting wall penetration at (900.5796, 60.9873)
[03:54:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8.24624824523926
[03:54:48] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:48] [INFO] [Bullet] Exiting penetration at (883.0507, 24.56967) after traveling 35.4166679382324 pixels through wall
[03:54:48] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[03:54:48] [INFO] [LastChance] Threat detected: @Area2D@5239
[03:54:48] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:54:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:48] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:54:48] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[03:54:48] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[03:54:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(819.1806, 682.0626), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:48] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:48] [ENEMY] [Enemy1] PURSUING corner check: angle 153.7°
[03:54:48] [INFO] [LastChance] Threat detected: Bullet
[03:54:48] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:54:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:54:48] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:54:48] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:54:48] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:54:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(819.1806, 682.0626), source=ENEMY (Enemy4), range=1469, listeners=10
[03:54:48] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:54:48] [INFO] [LastChance] Threat detected: Bullet
[03:54:48] [INFO] [LastChance] Triggering last chance effect!
[03:54:48] [INFO] [LastChance] Starting last chance effect:
[03:54:48] [INFO] [LastChance]   - Time will be frozen (except player)
[03:54:48] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:54:48] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:54:48] [INFO] [LastChance]   - Brightness: 0.60
[03:54:48] [INFO] [LastChance] Pushed bullet Bullet from distance 114.5 to 200.0
[03:54:48] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:54:48] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:54:48] [INFO] [LastChance] Skipping player node: Player
[03:54:48] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:54:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5219
[03:54:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5221
[03:54:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5223
[03:54:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5225
[03:54:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5228
[03:54:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5231
[03:54:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5233
[03:54:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5236
[03:54:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5240
[03:54:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5242
[03:54:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5243
[03:54:48] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:54:48] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:54:48] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:54:54] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[03:54:54] [INFO] [LastChance] Ending last chance effect
[03:54:54] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[03:54:54] [ENEMY] [Enemy1] Search mode: PURSUING -> SEARCHING at (800.7052, 475.4323)
[03:54:54] [ENEMY] [Enemy1] SEARCHING started: center=(800.7052, 475.4323), radius=100, waypoints=5
[03:54:54] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:54:54] [ENEMY] [Enemy2] Search mode: PURSUING -> SEARCHING at (800.7052, 475.4323)
[03:54:54] [ENEMY] [Enemy2] SEARCHING started: center=(800.7052, 475.4323), radius=100, waypoints=5
[03:54:54] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[03:54:54] [ENEMY] [Enemy3] Search mode: RETREATING -> SEARCHING at (947.4356, 445.0059)
[03:54:54] [ENEMY] [Enemy3] SEARCHING started: center=(947.4356, 445.0059), radius=100, waypoints=5
[03:54:54] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:54:54] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (940.0466, 445.0059)
[03:54:54] [ENEMY] [Enemy4] SEARCHING started: center=(940.0466, 445.0059), radius=100, waypoints=5
[03:54:54] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:54:54] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:54:54] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:54:54] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:54:54] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:54:54] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:54:54] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:54:54] [INFO] [LastChance] All process modes restored
[03:54:54] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:54:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5219
[03:54:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5221
[03:54:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5223
[03:54:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5225
[03:54:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5228
[03:54:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5231
[03:54:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5233
[03:54:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5236
[03:54:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5240
[03:54:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5242
[03:54:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5243
[03:54:54] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:54:54] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:54:54] [ENEMY] [Enemy2] SEARCHING corner check: angle 3.3°
[03:54:54] [ENEMY] [Enemy4] SEARCHING corner check: angle -153.0°
[03:54:55] [ENEMY] [Enemy3] SEARCHING corner check: angle -155.4°
[03:54:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:54:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(858.0685, 626.137), shooter_id=39284589463927, bullet_pos=(1085.355, 229.3677)
[03:54:55] [INFO] [Bullet] Using shooter_position, distance=457.257934570313
[03:54:55] [INFO] [Bullet] Distance to wall: 457.257934570313 (31.1355335880924% of viewport)
[03:54:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:55] [ENEMY] [Enemy1] SEARCHING corner check: angle 168.9°
[03:54:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(858.0685, 626.137), shooter_id=39284589463927, bullet_pos=(1010.475, 63.3937)
[03:54:55] [INFO] [Bullet] Using shooter_position, distance=583.016052246094
[03:54:55] [INFO] [Bullet] Distance to wall: 583.016052246094 (39.6986350694237% of viewport)
[03:54:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:54:55] [INFO] [Bullet] Starting wall penetration at (1010.475, 63.3937)
[03:54:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 5.97591924667358
[03:54:55] [INFO] [Bullet] Body exited signal received for penetrating body
[03:54:55] [INFO] [Bullet] Exiting penetration at (993.8542, 26.55278) after traveling 35.4166641235352 pixels through wall
[03:54:55] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[03:54:55] [ENEMY] [Enemy2] SEARCHING corner check: angle 59.8°
[03:54:55] [ENEMY] [Enemy4] SEARCHING corner check: angle -153.0°
[03:54:55] [ENEMY] [Enemy3] SEARCHING corner check: angle -155.4°
[03:54:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:54:55] [ENEMY] [Enemy1] SEARCHING corner check: angle 59.8°
[03:54:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:55] [ENEMY] [Enemy2] SEARCHING corner check: angle -120.2°
[03:54:55] [ENEMY] [Enemy4] SEARCHING corner check: angle -153.0°
[03:54:55] [ENEMY] [Enemy3] SEARCHING corner check: angle -155.4°
[03:54:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:54:55] [ENEMY] [Enemy1] SEARCHING corner check: angle -120.2°
[03:54:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:55] [ENEMY] [Enemy2] SEARCHING corner check: angle -120.2°
[03:54:56] [ENEMY] [Enemy3] SEARCHING corner check: angle -155.4°
[03:54:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:54:56] [ENEMY] [Enemy1] SEARCHING corner check: angle -120.2°
[03:54:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:54:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:54:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:57] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:54:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:57] [ENEMY] [Enemy2] SEARCHING corner check: angle 92.6°
[03:54:57] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:54:57] [ENEMY] [Enemy1] SEARCHING corner check: angle 92.7°
[03:54:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:57] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:54:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:57] [ENEMY] [Enemy4] SEARCHING corner check: angle -114.3°
[03:54:58] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:54:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:58] [ENEMY] [Enemy4] SEARCHING corner check: angle -114.3°
[03:54:58] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:54:58] [ENEMY] [Enemy3] SEARCHING corner check: angle -115.7°
[03:54:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:58] [ENEMY] [Enemy2] SEARCHING corner check: angle -88.3°
[03:54:58] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:54:58] [ENEMY] [Enemy3] SEARCHING corner check: angle -115.7°
[03:54:58] [ENEMY] [Enemy1] SEARCHING corner check: angle -88.3°
[03:54:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:58] [ENEMY] [Enemy2] SEARCHING corner check: angle -88.3°
[03:54:59] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:54:59] [ENEMY] [Enemy1] SEARCHING corner check: angle -88.3°
[03:54:59] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:59] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:54:59] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:59] [ENEMY] [Enemy4] SEARCHING corner check: angle 33.1°
[03:54:59] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:54:59] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:54:59] [ENEMY] [Enemy4] SEARCHING corner check: angle 33.1°
[03:55:00] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:00] [ENEMY] [Enemy3] SEARCHING corner check: angle 32.5°
[03:55:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:00] [ENEMY] [Enemy2] SEARCHING corner check: angle 43.2°
[03:55:00] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:00] [ENEMY] [Enemy3] SEARCHING corner check: angle 32.5°
[03:55:00] [ENEMY] [Enemy1] SEARCHING corner check: angle 43.2°
[03:55:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:00] [ENEMY] [Enemy2] SEARCHING corner check: angle 43.2°
[03:55:00] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:00] [ENEMY] [Enemy1] SEARCHING corner check: angle 43.2°
[03:55:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:01] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:01] [ENEMY] [Enemy4] SEARCHING corner check: angle -0.1°
[03:55:01] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:01] [ENEMY] [Enemy4] SEARCHING corner check: angle 120.8°
[03:55:01] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:01] [ENEMY] [Enemy3] SEARCHING corner check: angle 179.8°
[03:55:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:01] [ENEMY] [Enemy2] SEARCHING corner check: angle 152.6°
[03:55:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:02] [ENEMY] [Enemy1] SEARCHING corner check: angle 152.6°
[03:55:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:02] [ENEMY] [Enemy4] SEARCHING: Expand outer ring r=175 wps=4
[03:55:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:02] [ENEMY] [Enemy4] SEARCHING corner check: angle -142.4°
[03:55:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:03] [ENEMY] [Enemy2] SEARCHING: Expand outer ring r=175 wps=4
[03:55:03] [ENEMY] [Enemy3] SEARCHING: Expand outer ring r=175 wps=4
[03:55:03] [ENEMY] [Enemy3] SEARCHING corner check: angle -142.3°
[03:55:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:03] [ENEMY] [Enemy1] SEARCHING: Expand outer ring r=175 wps=4
[03:55:03] [ENEMY] [Enemy2] SEARCHING corner check: angle -148.2°
[03:55:03] [ENEMY] [Enemy4] SEARCHING corner check: angle -142.4°
[03:55:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:03] [ENEMY] [Enemy3] SEARCHING corner check: angle -142.3°
[03:55:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:03] [ENEMY] [Enemy1] SEARCHING corner check: angle -148.2°
[03:55:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:04] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:04] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:04] [ENEMY] [Enemy2] SEARCHING corner check: angle -52.2°
[03:55:04] [ENEMY] [Enemy4] SEARCHING corner check: angle 90.2°
[03:55:04] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:04] [ENEMY] [Enemy1] SEARCHING corner check: angle -52.1°
[03:55:04] [ENEMY] [Enemy3] SEARCHING corner check: angle 90.2°
[03:55:05] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:05] [ENEMY] [Enemy4] SEARCHING corner check: angle 178.1°
[03:55:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:05] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:05] [ENEMY] [Enemy3] SEARCHING corner check: angle 178.1°
[03:55:05] [ENEMY] [Enemy4] SEARCHING corner check: angle 0.6°
[03:55:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:05] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:05] [ENEMY] [Enemy3] SEARCHING corner check: angle 0.1°
[03:55:05] [ENEMY] [Enemy4] SEARCHING corner check: angle 0.6°
[03:55:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:06] [ENEMY] [Enemy2] SEARCHING corner check: angle 25.0°
[03:55:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:06] [ENEMY] [Enemy3] SEARCHING corner check: angle 0.1°
[03:55:06] [ENEMY] [Enemy4] SEARCHING corner check: angle 0.6°
[03:55:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:06] [ENEMY] [Enemy1] SEARCHING corner check: angle 25.0°
[03:55:06] [ENEMY] [Enemy2] SEARCHING corner check: angle 25.0°
[03:55:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:06] [ENEMY] [Enemy3] SEARCHING corner check: angle 0.1°
[03:55:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:06] [ENEMY] [Enemy1] SEARCHING corner check: angle 25.0°
[03:55:06] [ENEMY] [Enemy2] SEARCHING corner check: angle 25.0°
[03:55:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:06] [ENEMY] [Enemy1] SEARCHING corner check: angle 25.0°
[03:55:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:07] [ENEMY] [Enemy4] SEARCHING corner check: angle -55.6°
[03:55:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:07] [ENEMY] [Enemy3] SEARCHING corner check: angle -57.3°
[03:55:07] [ENEMY] [Enemy4] SEARCHING corner check: angle -90.1°
[03:55:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:08] [ENEMY] [Enemy2] SEARCHING corner check: angle 90.8°
[03:55:08] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:08] [ENEMY] [Enemy3] SEARCHING corner check: angle 91.0°
[03:55:08] [ENEMY] [Enemy4] SEARCHING corner check: angle 79.2°
[03:55:08] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:08] [ENEMY] [Enemy1] SEARCHING corner check: angle 179.8°
[03:55:08] [ENEMY] [Enemy2] SEARCHING corner check: angle 78.2°
[03:55:08] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:08] [ENEMY] [Enemy3] SEARCHING corner check: angle 78.7°
[03:55:08] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:08] [ENEMY] [Enemy1] SEARCHING corner check: angle 78.2°
[03:55:08] [ENEMY] [Enemy2] SEARCHING corner check: angle 78.2°
[03:55:08] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:08] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:08] [ENEMY] [Enemy1] SEARCHING corner check: angle 78.2°
[03:55:09] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:09] [ENEMY] [Enemy4] SEARCHING: Expand outer ring r=250 wps=4
[03:55:09] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:09] [ENEMY] [Enemy4] SEARCHING corner check: angle -161.4°
[03:55:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:09] [ENEMY] [Enemy3] SEARCHING: Expand outer ring r=250 wps=4
[03:55:09] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:09] [ENEMY] [Enemy3] SEARCHING corner check: angle -161.5°
[03:55:09] [ENEMY] [Enemy4] SEARCHING corner check: angle -161.4°
[03:55:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:09] [ENEMY] [Enemy2] SEARCHING: Expand outer ring r=250 wps=4
[03:55:10] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:10] [ENEMY] [Enemy2] SEARCHING corner check: angle -131.2°
[03:55:10] [ENEMY] [Enemy3] SEARCHING corner check: angle -161.5°
[03:55:10] [ENEMY] [Enemy4] SEARCHING corner check: angle -161.4°
[03:55:10] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:10] [ENEMY] [Enemy1] SEARCHING: Expand outer ring r=250 wps=4
[03:55:10] [ENEMY] [Enemy1] SEARCHING corner check: angle -131.2°
[03:55:10] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:10] [ENEMY] [Enemy2] SEARCHING corner check: angle 15.3°
[03:55:10] [ENEMY] [Enemy3] SEARCHING corner check: angle -161.5°
[03:55:10] [ENEMY] [Enemy4] SEARCHING corner check: angle -161.4°
[03:55:10] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:10] [ENEMY] [Enemy1] SEARCHING corner check: angle 15.3°
[03:55:10] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:10] [ENEMY] [Enemy2] SEARCHING corner check: angle 15.3°
[03:55:10] [ENEMY] [Enemy3] SEARCHING corner check: angle -161.5°
[03:55:10] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:10] [ENEMY] [Enemy1] SEARCHING corner check: angle 15.3°
[03:55:11] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:11] [ENEMY] [Enemy2] SEARCHING corner check: angle 15.3°
[03:55:11] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:11] [ENEMY] [Enemy1] SEARCHING corner check: angle 15.3°
[03:55:11] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:11] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:11] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:11] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:11] [ENEMY] [Enemy4] SEARCHING corner check: angle 106.0°
[03:55:12] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:12] [ENEMY] [Enemy3] SEARCHING corner check: angle 106.2°
[03:55:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:12] [ENEMY] [Enemy4] SEARCHING corner check: angle 106.0°
[03:55:12] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:12] [ENEMY] [Enemy2] SEARCHING corner check: angle 99.8°
[03:55:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:12] [ENEMY] [Enemy1] SEARCHING corner check: angle 99.8°
[03:55:12] [ENEMY] [Enemy3] SEARCHING corner check: angle 106.2°
[03:55:12] [ENEMY] [Enemy4] SEARCHING corner check: angle -24.7°
[03:55:12] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:12] [ENEMY] [Enemy2] SEARCHING corner check: angle 99.8°
[03:55:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:12] [ENEMY] [Enemy1] SEARCHING corner check: angle 99.8°
[03:55:12] [ENEMY] [Enemy3] SEARCHING corner check: angle -31.0°
[03:55:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:13] [ENEMY] [Enemy2] SEARCHING corner check: angle 99.8°
[03:55:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:13] [ENEMY] [Enemy1] SEARCHING corner check: angle 99.8°
[03:55:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:13] [ENEMY] [Enemy2] SEARCHING corner check: angle -1.0°
[03:55:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:13] [ENEMY] [Enemy1] SEARCHING corner check: angle -1.0°
[03:55:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:13] [ENEMY] [Enemy2] SEARCHING corner check: angle 176.8°
[03:55:14] [ENEMY] [Enemy4] SEARCHING corner check: angle 10.5°
[03:55:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:14] [ENEMY] [Enemy1] SEARCHING corner check: angle 176.8°
[03:55:14] [ENEMY] [Enemy2] SEARCHING corner check: angle -42.3°
[03:55:14] [ENEMY] [Enemy3] SEARCHING corner check: angle -167.7°
[03:55:14] [ENEMY] [Enemy4] SEARCHING corner check: angle 10.5°
[03:55:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:14] [ENEMY] [Enemy1] SEARCHING corner check: angle -42.3°
[03:55:14] [ENEMY] [Enemy2] SEARCHING corner check: angle -42.3°
[03:55:14] [ENEMY] [Enemy3] SEARCHING corner check: angle 12.3°
[03:55:14] [ENEMY] [Enemy4] SEARCHING corner check: angle 10.5°
[03:55:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:14] [ENEMY] [Enemy1] SEARCHING corner check: angle -42.3°
[03:55:14] [ENEMY] [Enemy2] SEARCHING corner check: angle -42.3°
[03:55:14] [ENEMY] [Enemy3] SEARCHING corner check: angle 12.3°
[03:55:15] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:15] [ENEMY] [Enemy1] SEARCHING corner check: angle -42.3°
[03:55:15] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:15] [ENEMY] [Enemy2] SEARCHING corner check: angle 107.9°
[03:55:15] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:15] [ENEMY] [Enemy1] SEARCHING corner check: angle 107.9°
[03:55:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:15] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:55:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1394.874, 733.8099), source=ENEMY (Enemy2), range=1469, listeners=10
[03:55:15] [ENEMY] [Enemy5] Heard gunshot at (1394.874, 733.8099), source_type=1, intensity=0.01, distance=490
[03:55:15] [ENEMY] [Enemy7] Heard gunshot at (1394.874, 733.8099), source_type=1, intensity=0.03, distance=272
[03:55:15] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[03:55:15] [ENEMY] [Enemy2] SEARCHING: Player spotted! Transitioning to COMBAT
[03:55:15] [ENEMY] [Enemy2] State: SEARCHING -> COMBAT
[03:55:15] [INFO] [LastChance] Threat detected: Bullet
[03:55:15] [INFO] [LastChance] Effect already used this life
[03:55:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:55:15] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:55:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1364.219, 740.4238), source=ENEMY (Enemy2), range=1469, listeners=10
[03:55:15] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[03:55:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1348.965, 784.0392), shooter_id=39284019038407, bullet_pos=(1097.362, 1002.687)
[03:55:16] [INFO] [Bullet] Using shooter_position, distance=333.333526611328
[03:55:16] [INFO] [Bullet] Distance to wall: 333.333526611328 (22.6972927732725% of viewport)
[03:55:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:55:16] [ENEMY] [Enemy4] SEARCHING corner check: angle -63.8°
[03:55:16] [INFO] [LastChance] Threat detected: @Area2D@5246
[03:55:16] [INFO] [LastChance] Effect already used this life
[03:55:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:55:16] [ENEMY] [Enemy6] Memory: medium confidence (0.61) - transitioning to PURSUING
[03:55:16] [ENEMY] [Enemy6] State: IDLE -> PURSUING
[03:55:16] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:55:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1394.874, 733.8101), source=ENEMY (Enemy1), range=1469, listeners=10
[03:55:16] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[03:55:16] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:55:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1326.903, 739.5724), source=ENEMY (Enemy2), range=1469, listeners=10
[03:55:16] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[03:55:16] [ENEMY] [Enemy6] PURSUING corner check: angle 38.6°
[03:55:16] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[03:55:16] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[03:55:16] [INFO] [PenultimateHit] Player died - ending penultimate effect
[03:55:16] [INFO] [LastChance] Player died
[03:55:16] [ENEMY] [Enemy1] SEARCHING: Player spotted! Transitioning to COMBAT
[03:55:16] [ENEMY] [Enemy1] State: SEARCHING -> COMBAT
[03:55:16] [INFO] [LastChance] Threat detected: @Area2D@5250
[03:55:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:55:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:55:16] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:16] [INFO] [LastChance] Threat detected: @Area2D@5248
[03:55:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:55:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:55:16] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:55:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1364.219, 740.424), source=ENEMY (Enemy1), range=1469, listeners=10
[03:55:16] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[03:55:16] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:55:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1301.097, 751.5433), source=ENEMY (Enemy2), range=1469, listeners=10
[03:55:16] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[03:55:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1348.965, 784.0394), shooter_id=39283733825082, bullet_pos=(1097.362, 1002.687)
[03:55:16] [INFO] [Bullet] Using shooter_position, distance=333.333526611328
[03:55:16] [INFO] [Bullet] Distance to wall: 333.333526611328 (22.6972927732725% of viewport)
[03:55:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:55:16] [INFO] [Bullet] Starting wall penetration at (1097.362, 1002.687)
[03:55:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 14.1749143600464
[03:55:16] [INFO] [Bullet] Body exited signal received for penetrating body
[03:55:16] [INFO] [Bullet] Exiting penetration at (1062.137, 1033.298) after traveling 41.6666679382324 pixels through wall
[03:55:16] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:55:16] [INFO] [LastChance] Threat detected: @Area2D@5254
[03:55:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:55:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:55:16] [INFO] [LastChance] Threat detected: @Area2D@5252
[03:55:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:55:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:55:16] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[03:55:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1263.757, 808.4317), shooter_id=39284019038407, bullet_pos=(1103.522, 1000.33)
[03:55:16] [INFO] [Bullet] Using shooter_position, distance=249.999969482422
[03:55:16] [INFO] [Bullet] Distance to wall: 249.999969482422 (17.0229576314658% of viewport)
[03:55:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:55:16] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:55:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1326.903, 739.5727), source=ENEMY (Enemy1), range=1469, listeners=10
[03:55:16] [ENEMY] [Enemy2] Heard gunshot at (1326.903, 739.5727), source_type=1, intensity=0.72, distance=59
[03:55:16] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[03:55:16] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:55:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1279.171, 774.2417), source=ENEMY (Enemy2), range=1469, listeners=10
[03:55:16] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[03:55:16] [ENEMY] [Enemy3] SEARCHING corner check: angle -64.1°
[03:55:16] [ENEMY] [Enemy2] Hit taken, health: 2/3
[03:55:16] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[03:55:16] [INFO] [ImpactEffects] spawn_blood_effect called at (1278.206, 779.487), dir=(-0.668843, 0.743404), lethal=false
[03:55:16] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:55:16] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:55:16] [INFO] [ImpactEffects] Blood effect spawned at (1278.206, 779.487) (scale=1)
[03:55:16] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[03:55:16] [ENEMY] [Enemy4] SEARCHING corner check: angle -63.8°
[03:55:16] [ENEMY] [Enemy5] State: COMBAT -> PURSUING
[03:55:16] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
[03:55:16] [INFO] [LastChance] Threat detected: @Area2D@5259
[03:55:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:55:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:55:16] [ENEMY] [Enemy6] PURSUING corner check: angle 38.6°
[03:55:16] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:55:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1301.097, 751.5435), source=ENEMY (Enemy1), range=1469, listeners=10
[03:55:16] [ENEMY] [Enemy2] Heard gunshot at (1301.097, 751.5435), source_type=1, intensity=1.00, distance=33
[03:55:16] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[03:55:16] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[03:55:16] [INFO] [LastChance] Threat detected: Bullet
[03:55:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:55:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:55:16] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1263.757, 808.4319), shooter_id=39283733825082, bullet_pos=(1103.522, 1000.33)
[03:55:16] [INFO] [Bullet] Using shooter_position, distance=249.999969482422
[03:55:16] [INFO] [Bullet] Distance to wall: 249.999969482422 (17.0229576314658% of viewport)
[03:55:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:55:16] [INFO] [Bullet] Starting wall penetration at (1103.522, 1000.33)
[03:55:16] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:55:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1278.79, 774.1573), source=ENEMY (Enemy1), range=1469, listeners=10
[03:55:16] [ENEMY] [Enemy2] Heard gunshot at (1278.79, 774.1573), source_type=1, intensity=1.00, distance=22
[03:55:16] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[03:55:16] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[03:55:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15.829535484314
[03:55:16] [INFO] [Bullet] Body exited signal received for penetrating body
[03:55:16] [INFO] [Bullet] Exiting penetration at (1073.611, 1036.151) after traveling 41.6666679382324 pixels through wall
[03:55:16] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:55:16] [INFO] [LastChance] Threat detected: @Area2D@5263
[03:55:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:55:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:55:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:55:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:55:16] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:55:16] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:55:16] [ENEMY] [Enemy1] Death animation component initialized
[03:55:16] [ENEMY] [Enemy2] Death animation component initialized
[03:55:16] [ENEMY] [Enemy3] Death animation component initialized
[03:55:16] [ENEMY] [Enemy4] Death animation component initialized
[03:55:16] [ENEMY] [Enemy5] Death animation component initialized
[03:55:16] [ENEMY] [Enemy6] Death animation component initialized
[03:55:16] [ENEMY] [Enemy7] Death animation component initialized
[03:55:16] [ENEMY] [Enemy8] Death animation component initialized
[03:55:16] [ENEMY] [Enemy9] Death animation component initialized
[03:55:16] [ENEMY] [Enemy10] Death animation component initialized
[03:55:16] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:55:16] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:55:16] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:55:16] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:55:16] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:55:16] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:55:16] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:55:16] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:55:16] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[03:55:16] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:55:16] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:55:16] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:55:16] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:55:16] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:55:16] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:55:16] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:55:16] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:55:16] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:55:16] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:55:16] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:55:16] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:55:16] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:55:16] [INFO] [ScoreManager] Level started with 10 enemies
[03:55:16] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:55:16] [ENEMY] [Enemy1] Registered as sound listener
[03:55:16] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[03:55:16] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:55:16] [ENEMY] [Enemy2] Registered as sound listener
[03:55:16] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[03:55:16] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:55:16] [ENEMY] [Enemy3] Registered as sound listener
[03:55:16] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[03:55:16] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:55:16] [ENEMY] [Enemy4] Registered as sound listener
[03:55:16] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[03:55:16] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:55:16] [ENEMY] [Enemy5] Registered as sound listener
[03:55:16] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[03:55:16] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:55:16] [ENEMY] [Enemy6] Registered as sound listener
[03:55:16] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[03:55:16] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:55:16] [ENEMY] [Enemy7] Registered as sound listener
[03:55:16] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[03:55:16] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:55:16] [ENEMY] [Enemy8] Registered as sound listener
[03:55:16] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[03:55:16] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:55:16] [ENEMY] [Enemy9] Registered as sound listener
[03:55:16] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[03:55:16] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:55:16] [ENEMY] [Enemy10] Registered as sound listener
[03:55:16] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[03:55:16] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:55:16] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:55:16] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:55:16] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:55:16] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:55:16] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:55:16] [INFO] [LastChance] Found player: Player
[03:55:16] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:55:16] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:55:16] [INFO] [LastChance] Connected to player Died signal (C#)
[03:55:18] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:55:18] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:55:18] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:55:18] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:55:18] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:55:19] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:55:19] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:55:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:55:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:20] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:55:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:55:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:55:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:55:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:55:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:55:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:55:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
[03:55:30] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:55:30] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
[03:55:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
[03:55:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:31] [ENEMY] [Enemy3] Memory: medium confidence (0.61) - transitioning to PURSUING
[03:55:31] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[03:55:31] [ENEMY] [Enemy3] PURSUING corner check: angle -129.3°
[03:55:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(694.8868, 961.8645), source=ENEMY (Enemy4), range=1469, listeners=10
[03:55:31] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
[03:55:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:31] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[03:55:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:55:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:55:31] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:55:31] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:55:31] [ENEMY] [Enemy1] Death animation component initialized
[03:55:31] [ENEMY] [Enemy2] Death animation component initialized
[03:55:31] [ENEMY] [Enemy3] Death animation component initialized
[03:55:31] [ENEMY] [Enemy4] Death animation component initialized
[03:55:31] [ENEMY] [Enemy5] Death animation component initialized
[03:55:31] [ENEMY] [Enemy6] Death animation component initialized
[03:55:31] [ENEMY] [Enemy7] Death animation component initialized
[03:55:31] [ENEMY] [Enemy8] Death animation component initialized
[03:55:31] [ENEMY] [Enemy9] Death animation component initialized
[03:55:31] [ENEMY] [Enemy10] Death animation component initialized
[03:55:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:55:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:55:31] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:55:31] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:55:31] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:55:31] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:55:31] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:55:31] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:55:31] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[03:55:31] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:55:31] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:55:31] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:55:31] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:55:31] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:55:31] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:55:31] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:55:31] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:55:31] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:55:31] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:55:31] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:55:31] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:55:31] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:55:31] [INFO] [ScoreManager] Level started with 10 enemies
[03:55:31] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:55:31] [ENEMY] [Enemy1] Registered as sound listener
[03:55:31] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[03:55:31] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:55:31] [ENEMY] [Enemy2] Registered as sound listener
[03:55:31] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[03:55:31] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:55:31] [ENEMY] [Enemy3] Registered as sound listener
[03:55:31] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[03:55:31] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:55:31] [ENEMY] [Enemy4] Registered as sound listener
[03:55:31] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[03:55:31] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:55:31] [ENEMY] [Enemy5] Registered as sound listener
[03:55:31] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[03:55:31] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:55:31] [ENEMY] [Enemy6] Registered as sound listener
[03:55:31] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[03:55:31] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:55:31] [ENEMY] [Enemy7] Registered as sound listener
[03:55:31] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[03:55:31] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:55:31] [ENEMY] [Enemy8] Registered as sound listener
[03:55:31] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[03:55:31] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:55:31] [ENEMY] [Enemy9] Registered as sound listener
[03:55:31] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[03:55:31] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:55:31] [ENEMY] [Enemy10] Registered as sound listener
[03:55:31] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[03:55:31] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:55:31] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:55:31] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:55:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:55:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:55:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:55:31] [INFO] [LastChance] Found player: Player
[03:55:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:55:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:55:31] [INFO] [LastChance] Connected to player Died signal (C#)
[03:55:33] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:55:33] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:55:33] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:55:33] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:55:33] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:55:34] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:55:34] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:55:34] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:55:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[03:55:34] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:55:34] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[03:55:34] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[03:55:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:55:34] [INFO] [LastChance] Threat detected: Bullet
[03:55:34] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:55:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:55:34] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[03:55:34] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[03:55:34] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:55:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:55:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:55:34] [INFO] [LastChance] Threat detected: Bullet
[03:55:34] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:55:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:55:34] [ENEMY] [Enemy1] Memory: medium confidence (0.61) - transitioning to PURSUING
[03:55:34] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:55:34] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:55:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:55:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:55:34] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[03:55:34] [INFO] [LastChance] Threat detected: Bullet
[03:55:34] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:55:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:55:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:55:34] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:55:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:55:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:55:34] [INFO] [LastChance] Threat detected: @Area2D@5780
[03:55:34] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:55:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:55:34] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:55:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(477.8521, 609.6448), source=ENEMY (Enemy2), range=1469, listeners=10
[03:55:34] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[03:55:34] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:55:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:55:34] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:55:34] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[03:55:34] [INFO] [LastChance] Threat detected: @Area2D@5784
[03:55:34] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:55:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:55:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.7269, 690.8976), shooter_id=53432480172925, bullet_pos=(1011.967, 39.50009)
[03:55:34] [INFO] [Bullet] Using shooter_position, distance=708.333435058594
[03:55:34] [INFO] [Bullet] Distance to wall: 708.333435058594 (48.2317261034743% of viewport)
[03:55:34] [INFO] [Bullet] Distance-based penetration chance: 90.3963195459467%
[03:55:34] [INFO] [Bullet] Starting wall penetration at (1011.967, 39.50009)
[03:55:34] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38.5110282897949
[03:55:34] [INFO] [Bullet] Body exited signal received for penetrating body
[03:55:34] [INFO] [Bullet] Exiting penetration at (1030.298, -3.415504) after traveling 41.6666679382324 pixels through wall
[03:55:34] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:55:34] [INFO] [LastChance] Threat detected: @Area2D@5782
[03:55:34] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:55:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:55:34] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:55:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(497.1266, 624.0603), source=ENEMY (Enemy2), range=1469, listeners=10
[03:55:34] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:55:34] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[03:55:34] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:55:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:55:34] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:55:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[03:55:35] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[03:55:35] [INFO] [LastChance] Threat detected: @Area2D@5787
[03:55:35] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:55:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:55:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:35] [INFO] [LastChance] Threat detected: Bullet
[03:55:35] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:55:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:55:35] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:55:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(528.7901, 629.4841), source=ENEMY (Enemy2), range=1469, listeners=10
[03:55:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:55:35] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:55:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:55:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:55:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:55:35] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:55:35] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:55:35] [INFO] [LastChance] Threat detected: @Area2D@5791
[03:55:35] [INFO] [LastChance] Triggering last chance effect!
[03:55:35] [INFO] [LastChance] Starting last chance effect:
[03:55:35] [INFO] [LastChance]   - Time will be frozen (except player)
[03:55:35] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:55:35] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:55:35] [INFO] [LastChance]   - Brightness: 0.60
[03:55:35] [INFO] [LastChance] Pushed bullet @Area2D@5791 from distance 128.0 to 200.0
[03:55:35] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:55:35] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:55:35] [INFO] [LastChance] Skipping player node: Player
[03:55:35] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:55:35] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5778
[03:55:35] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5779
[03:55:35] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5781
[03:55:35] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5783
[03:55:35] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5785
[03:55:35] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5786
[03:55:35] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5788
[03:55:35] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5790
[03:55:35] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5792
[03:55:35] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:55:35] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:55:35] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:55:41] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[03:55:41] [INFO] [LastChance] Ending last chance effect
[03:55:41] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[03:55:41] [ENEMY] [Enemy1] Search mode: PURSUING -> SEARCHING at (959.58, 515.7087)
[03:55:41] [ENEMY] [Enemy1] SEARCHING started: center=(959.58, 515.7087), radius=100, waypoints=5
[03:55:41] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:55:41] [ENEMY] [Enemy2] Search mode: COMBAT -> SEARCHING at (974.9319, 518.4803)
[03:55:41] [ENEMY] [Enemy2] SEARCHING started: center=(974.9319, 518.4803), radius=100, waypoints=5
[03:55:41] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[03:55:41] [ENEMY] [Enemy3] Search mode: COMBAT -> SEARCHING at (974.9319, 518.4803)
[03:55:41] [ENEMY] [Enemy3] SEARCHING started: center=(974.9319, 518.4803), radius=100, waypoints=5
[03:55:41] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:55:41] [ENEMY] [Enemy4] Search mode: PURSUING -> SEARCHING at (959.58, 515.7087)
[03:55:41] [ENEMY] [Enemy4] SEARCHING started: center=(959.58, 515.7087), radius=100, waypoints=5
[03:55:41] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:55:41] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:55:41] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:55:41] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:55:41] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:55:41] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:55:41] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:55:41] [INFO] [LastChance] All process modes restored
[03:55:41] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:55:41] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5778
[03:55:41] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5779
[03:55:41] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5781
[03:55:41] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5783
[03:55:41] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5785
[03:55:41] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5786
[03:55:41] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5788
[03:55:41] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5790
[03:55:41] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@5792
[03:55:41] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:55:41] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:55:41] [ENEMY] [Enemy2] SEARCHING corner check: angle -104.5°
[03:55:41] [ENEMY] [Enemy3] SEARCHING corner check: angle -132.8°
[03:55:41] [ENEMY] [Enemy4] SEARCHING corner check: angle -162.1°
[03:55:41] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:55:41] [ENEMY] [Enemy1] SEARCHING corner check: angle 161.4°
[03:55:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(751.4966, 705.5174), shooter_id=53432480172925, bullet_pos=(1343.737, 61.40813)
[03:55:41] [INFO] [Bullet] Using shooter_position, distance=874.999938964844
[03:55:41] [INFO] [Bullet] Distance to wall: 874.999938964844 (59.5803548271275% of viewport)
[03:55:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(596.0704, 619.2881), shooter_id=53432194959640, bullet_pos=(1360.044, 411.731)
[03:55:41] [INFO] [Bullet] Using shooter_position, distance=791.666381835938
[03:55:41] [INFO] [Bullet] Distance to wall: 791.666381835938 (53.9060196853208% of viewport)
[03:55:41] [INFO] [Bullet] Distance-based penetration chance: 83.7763103671258%
[03:55:41] [INFO] [Bullet] Starting wall penetration at (1360.044, 411.731)
[03:55:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17.6973037719727
[03:55:41] [INFO] [Bullet] Body exited signal received for penetrating body
[03:55:41] [INFO] [Bullet] Exiting penetration at (1405.078, 399.4961) after traveling 41.6666679382324 pixels through wall
[03:55:41] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:55:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(751.4966, 705.5174), shooter_id=53432480172925, bullet_pos=(1537.718, 274.7333)
[03:55:41] [INFO] [Bullet] Using shooter_position, distance=896.503356933594
[03:55:41] [INFO] [Bullet] Distance to wall: 896.503356933594 (61.0445620979186% of viewport)
[03:55:41] [INFO] [Bullet] Distance-based penetration chance: 75.4480108857616%
[03:55:41] [INFO] [Bullet] Starting wall penetration at (1537.718, 274.7333)
[03:55:41] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[03:55:41] [INFO] [Bullet] Exiting penetration at (1564.908, 304.6358) after traveling 35.4166717529297 pixels through wall
[03:55:41] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[03:55:41] [ENEMY] [Enemy2] SEARCHING corner check: angle -104.5°
[03:55:41] [ENEMY] [Enemy3] SEARCHING corner check: angle -132.8°
[03:55:41] [ENEMY] [Enemy4] SEARCHING corner check: angle -162.1°
[03:55:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(754.9679, 709.886), shooter_id=53432480172925, bullet_pos=(1462.87, 46.67206)
[03:55:41] [INFO] [Bullet] Using shooter_position, distance=970.0400390625
[03:55:41] [INFO] [Bullet] Distance to wall: 970.0400390625 (66.0518100061107% of viewport)
[03:55:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:55:41] [ENEMY] [Enemy1] SEARCHING corner check: angle 161.4°
[03:55:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:41] [ENEMY] [Enemy6] Hit taken, health: 3/4
[03:55:41] [ENEMY] [Enemy6] ImpactEffectsManager found, calling spawn_blood_effect
[03:55:41] [INFO] [ImpactEffects] spawn_blood_effect called at (1950, 450), dir=(0.761594, 0.648055), lethal=false
[03:55:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:55:41] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:55:41] [INFO] [ImpactEffects] Blood effect spawned at (1950, 450) (scale=1)
[03:55:41] [ENEMY] [Enemy2] SEARCHING corner check: angle -104.5°
[03:55:41] [ENEMY] [Enemy3] SEARCHING corner check: angle -132.8°
[03:55:41] [ENEMY] [Enemy4] SEARCHING corner check: angle -130.9°
[03:55:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:55:41] [ENEMY] [Enemy1] SEARCHING corner check: angle 75.4°
[03:55:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:42] [ENEMY] [Enemy2] SEARCHING corner check: angle -104.5°
[03:55:42] [ENEMY] [Enemy3] SEARCHING corner check: angle -123.4°
[03:55:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:55:42] [ENEMY] [Enemy1] SEARCHING corner check: angle -104.6°
[03:55:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:55:42] [ENEMY] [Enemy1] SEARCHING corner check: angle -104.6°
[03:55:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:55:42] [ENEMY] [Enemy1] SEARCHING corner check: angle -104.6°
[03:55:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:43] [ENEMY] [Enemy4] SEARCHING corner check: angle 81.7°
[03:55:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:55:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:43] [ENEMY] [Enemy2] SEARCHING corner check: angle 106.7°
[03:55:43] [ENEMY] [Enemy3] SEARCHING corner check: angle 88.9°
[03:55:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:43] [ENEMY] [Enemy2] SEARCHING corner check: angle 106.7°
[03:55:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:44] [ENEMY] [Enemy1] SEARCHING corner check: angle 106.8°
[03:55:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:44] [ENEMY] [Enemy4] SEARCHING corner check: angle -95.4°
[03:55:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:44] [ENEMY] [Enemy1] SEARCHING corner check: angle 106.8°
[03:55:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:44] [ENEMY] [Enemy3] SEARCHING corner check: angle -90.7°
[03:55:44] [ENEMY] [Enemy4] SEARCHING corner check: angle -95.4°
[03:55:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:45] [ENEMY] [Enemy2] SEARCHING corner check: angle -79.1°
[03:55:45] [ENEMY] [Enemy3] SEARCHING corner check: angle 89.3°
[03:55:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:45] [ENEMY] [Enemy2] SEARCHING corner check: angle -79.1°
[03:55:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:46] [ENEMY] [Enemy1] SEARCHING corner check: angle -79.1°
[03:55:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:46] [ENEMY] [Enemy4] SEARCHING corner check: angle 40.2°
[03:55:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:46] [ENEMY] [Enemy1] SEARCHING corner check: angle -79.1°
[03:55:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:46] [ENEMY] [Enemy3] SEARCHING corner check: angle 42.6°
[03:55:46] [ENEMY] [Enemy4] SEARCHING corner check: angle 40.2°
[03:55:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:46] [ENEMY] [Enemy2] SEARCHING corner check: angle 47.9°
[03:55:46] [ENEMY] [Enemy3] SEARCHING corner check: angle 42.6°
[03:55:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:47] [ENEMY] [Enemy1] SEARCHING corner check: angle 47.7°
[03:55:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:47] [ENEMY] [Enemy4] SEARCHING corner check: angle 179.8°
[03:55:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:48] [ENEMY] [Enemy2] SEARCHING corner check: angle -0.1°
[03:55:48] [ENEMY] [Enemy3] SEARCHING corner check: angle 90.8°
[03:55:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:48] [ENEMY] [Enemy2] SEARCHING corner check: angle -90.1°
[03:55:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:49] [ENEMY] [Enemy1] SEARCHING corner check: angle -0.1°
[03:55:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:49] [ENEMY] [Enemy4] SEARCHING: Expand outer ring r=175 wps=4
[03:55:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:49] [ENEMY] [Enemy4] SEARCHING corner check: angle -144.7°
[03:55:49] [ENEMY] [Enemy1] SEARCHING corner check: angle 89.8°
[03:55:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:49] [ENEMY] [Enemy3] SEARCHING: Expand outer ring r=175 wps=4
[03:55:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:49] [ENEMY] [Enemy3] SEARCHING corner check: angle -144.7°
[03:55:49] [ENEMY] [Enemy4] SEARCHING corner check: angle -144.7°
[03:55:49] [ENEMY] [Enemy2] SEARCHING: Expand outer ring r=175 wps=4
[03:55:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:49] [ENEMY] [Enemy2] SEARCHING corner check: angle -144.7°
[03:55:49] [ENEMY] [Enemy3] SEARCHING corner check: angle -144.7°
[03:55:49] [ENEMY] [Enemy4] SEARCHING corner check: angle -144.7°
[03:55:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:50] [ENEMY] [Enemy2] SEARCHING corner check: angle -144.7°
[03:55:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:50] [ENEMY] [Enemy1] SEARCHING: Expand outer ring r=175 wps=4
[03:55:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:50] [ENEMY] [Enemy1] SEARCHING corner check: angle -144.7°
[03:55:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:51] [ENEMY] [Enemy1] SEARCHING corner check: angle -144.7°
[03:55:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:51] [ENEMY] [Enemy3] SEARCHING corner check: angle 179.9°
[03:55:51] [ENEMY] [Enemy4] SEARCHING corner check: angle 105.9°
[03:55:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:51] [ENEMY] [Enemy2] SEARCHING corner check: angle 107.2°
[03:55:51] [ENEMY] [Enemy3] SEARCHING corner check: angle -73.9°
[03:55:51] [ENEMY] [Enemy4] SEARCHING corner check: angle 105.9°
[03:55:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:51] [ENEMY] [Enemy2] SEARCHING corner check: angle 106.1°
[03:55:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:52] [ENEMY] [Enemy1] SEARCHING corner check: angle -0.2°
[03:55:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:52] [ENEMY] [Enemy1] SEARCHING corner check: angle 105.9°
[03:55:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:52] [ENEMY] [Enemy3] SEARCHING corner check: angle -152.2°
[03:55:52] [ENEMY] [Enemy4] SEARCHING corner check: angle 27.7°
[03:55:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:53] [ENEMY] [Enemy2] SEARCHING corner check: angle -152.2°
[03:55:53] [ENEMY] [Enemy3] SEARCHING corner check: angle 27.8°
[03:55:53] [ENEMY] [Enemy4] SEARCHING corner check: angle 27.7°
[03:55:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:53] [ENEMY] [Enemy2] SEARCHING corner check: angle 27.8°
[03:55:53] [ENEMY] [Enemy3] SEARCHING corner check: angle 27.8°
[03:55:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:53] [ENEMY] [Enemy2] SEARCHING corner check: angle -152.2°
[03:55:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:54] [ENEMY] [Enemy1] SEARCHING corner check: angle 27.7°
[03:55:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:54] [ENEMY] [Enemy1] SEARCHING corner check: angle 27.7°
[03:55:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:54] [ENEMY] [Enemy4] SEARCHING corner check: angle -43.7°
[03:55:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:54] [ENEMY] [Enemy1] SEARCHING corner check: angle -152.3°
[03:55:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:54] [ENEMY] [Enemy3] SEARCHING corner check: angle -48.0°
[03:55:54] [ENEMY] [Enemy4] SEARCHING corner check: angle 92.0°
[03:55:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:55] [ENEMY] [Enemy2] SEARCHING corner check: angle -48.0°
[03:55:55] [ENEMY] [Enemy3] SEARCHING corner check: angle 91.7°
[03:55:55] [ENEMY] [Enemy4] SEARCHING corner check: angle -137.7°
[03:55:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:55] [ENEMY] [Enemy2] SEARCHING corner check: angle -90.1°
[03:55:55] [ENEMY] [Enemy3] SEARCHING corner check: angle -144.4°
[03:55:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:55] [ENEMY] [Enemy2] SEARCHING corner check: angle -144.4°
[03:55:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:56] [ENEMY] [Enemy1] SEARCHING corner check: angle -43.7°
[03:55:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:56] [ENEMY] [Enemy1] SEARCHING corner check: angle 91.8°
[03:55:56] [ENEMY] [Enemy4] SEARCHING: Expand outer ring r=250 wps=4
[03:55:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:56] [ENEMY] [Enemy4] SEARCHING corner check: angle -169.0°
[03:55:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:56] [ENEMY] [Enemy1] SEARCHING corner check: angle -137.6°
[03:55:56] [ENEMY] [Enemy3] SEARCHING: Expand outer ring r=250 wps=4
[03:55:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:57] [ENEMY] [Enemy3] SEARCHING corner check: angle -170.5°
[03:55:57] [ENEMY] [Enemy4] SEARCHING corner check: angle -169.0°
[03:55:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:57] [ENEMY] [Enemy2] SEARCHING: Expand outer ring r=250 wps=4
[03:55:57] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:57] [ENEMY] [Enemy2] SEARCHING corner check: angle -170.5°
[03:55:57] [ENEMY] [Enemy3] SEARCHING corner check: angle -170.5°
[03:55:57] [ENEMY] [Enemy4] SEARCHING corner check: angle -169.0°
[03:55:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:57] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:57] [ENEMY] [Enemy2] SEARCHING corner check: angle -170.5°
[03:55:57] [ENEMY] [Enemy3] SEARCHING corner check: angle -170.5°
[03:55:57] [ENEMY] [Enemy4] SEARCHING corner check: angle -169.0°
[03:55:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:57] [ENEMY] [Enemy1] SEARCHING: Expand outer ring r=250 wps=4
[03:55:57] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:58] [ENEMY] [Enemy2] SEARCHING corner check: angle -170.5°
[03:55:58] [ENEMY] [Enemy3] SEARCHING corner check: angle -170.5°
[03:55:58] [ENEMY] [Enemy4] SEARCHING corner check: angle -169.0°
[03:55:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:58] [ENEMY] [Enemy1] SEARCHING corner check: angle -169.0°
[03:55:58] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:58] [ENEMY] [Enemy2] SEARCHING corner check: angle -170.5°
[03:55:58] [ENEMY] [Enemy3] SEARCHING corner check: angle -170.5°
[03:55:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:58] [ENEMY] [Enemy1] SEARCHING corner check: angle -169.0°
[03:55:58] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:58] [ENEMY] [Enemy1] SEARCHING corner check: angle -169.0°
[03:55:58] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:59] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:59] [ENEMY] [Enemy1] SEARCHING corner check: angle -169.0°
[03:55:59] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:59] [ENEMY] [Enemy4] SEARCHING corner check: angle 94.1°
[03:55:59] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:59] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:55:59] [ENEMY] [Enemy2] SEARCHING corner check: angle 93.9°
[03:55:59] [ENEMY] [Enemy3] SEARCHING corner check: angle 93.9°
[03:55:59] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:55:59] [ENEMY] [Enemy4] SEARCHING corner check: angle 94.1°
[03:55:59] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:00] [ENEMY] [Enemy2] SEARCHING corner check: angle 93.9°
[03:56:00] [ENEMY] [Enemy3] SEARCHING corner check: angle 93.9°
[03:56:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:00] [ENEMY] [Enemy4] SEARCHING corner check: angle 94.1°
[03:56:00] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:00] [ENEMY] [Enemy2] SEARCHING corner check: angle 93.9°
[03:56:00] [ENEMY] [Enemy3] SEARCHING corner check: angle 93.9°
[03:56:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:00] [ENEMY] [Enemy4] SEARCHING corner check: angle -17.9°
[03:56:00] [ENEMY] [Enemy1] SEARCHING corner check: angle 94.1°
[03:56:00] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:00] [ENEMY] [Enemy2] SEARCHING corner check: angle -25.5°
[03:56:00] [ENEMY] [Enemy3] SEARCHING corner check: angle -25.5°
[03:56:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:00] [ENEMY] [Enemy1] SEARCHING corner check: angle 94.1°
[03:56:00] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:01] [ENEMY] [Enemy1] SEARCHING corner check: angle 94.1°
[03:56:01] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:01] [ENEMY] [Enemy1] SEARCHING corner check: angle -17.9°
[03:56:01] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:01] [ENEMY] [Enemy4] SEARCHING corner check: angle 150.9°
[03:56:01] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:02] [ENEMY] [Enemy2] SEARCHING corner check: angle 158.7°
[03:56:02] [ENEMY] [Enemy3] SEARCHING corner check: angle 158.7°
[03:56:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:02] [ENEMY] [Enemy4] SEARCHING corner check: angle 150.9°
[03:56:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:02] [ENEMY] [Enemy2] SEARCHING corner check: angle 158.7°
[03:56:02] [ENEMY] [Enemy3] SEARCHING corner check: angle 158.7°
[03:56:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:02] [ENEMY] [Enemy4] SEARCHING corner check: angle 111.3°
[03:56:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:56:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1400.067, 698.6584), source=ENEMY (Enemy4), range=1469, listeners=10
[03:56:02] [ENEMY] [Enemy5] Heard gunshot at (1400.067, 698.6584), source_type=1, intensity=0.01, distance=460
[03:56:02] [ENEMY] [Enemy7] Heard gunshot at (1400.067, 698.6584), source_type=1, intensity=0.03, distance=291
[03:56:02] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[03:56:02] [ENEMY] [Enemy4] SEARCHING: Player spotted! Transitioning to COMBAT
[03:56:02] [ENEMY] [Enemy4] State: SEARCHING -> COMBAT
[03:56:02] [INFO] [LastChance] Threat detected: Bullet
[03:56:02] [INFO] [LastChance] Effect already used this life
[03:56:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:56:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:56:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1400.066, 711.9451), source=ENEMY (Enemy4), range=1469, listeners=10
[03:56:02] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[03:56:02] [ENEMY] [Enemy3] SEARCHING corner check: angle -1.3°
[03:56:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1354.92, 749.5739), shooter_id=53432765385317, bullet_pos=(1075.606, 999.7908)
[03:56:02] [INFO] [Bullet] Using shooter_position, distance=374.999908447266
[03:56:02] [INFO] [Bullet] Distance to wall: 374.999908447266 (25.5344333302017% of viewport)
[03:56:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:56:02] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[03:56:02] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[03:56:02] [INFO] [PenultimateHit] Player died - ending penultimate effect
[03:56:02] [INFO] [LastChance] Player died
[03:56:02] [INFO] [LastChance] Threat detected: @Area2D@5806
[03:56:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:56:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:56:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:56:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1397.782, 722.3228), source=ENEMY (Enemy4), range=1469, listeners=10
[03:56:02] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[03:56:02] [ENEMY] [Enemy1] SEARCHING corner check: angle 150.9°
[03:56:02] [INFO] [LastChance] Threat detected: Bullet
[03:56:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:56:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:56:02] [ENEMY] [Enemy2] SEARCHING corner check: angle 111.1°
[03:56:02] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:56:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1389.973, 732.0994), source=ENEMY (Enemy4), range=1469, listeners=10
[03:56:02] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[03:56:03] [INFO] [LastChance] Threat detected: @Area2D@5809
[03:56:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:56:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:56:03] [ENEMY] [Enemy2] SEARCHING: Player spotted! Transitioning to COMBAT
[03:56:03] [ENEMY] [Enemy2] State: SEARCHING -> COMBAT
[03:56:03] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:56:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1400.064, 691.2714), source=ENEMY (Enemy2), range=1469, listeners=10
[03:56:03] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[03:56:03] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:56:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1358.897, 738.4334), source=ENEMY (Enemy4), range=1469, listeners=10
[03:56:03] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[03:56:03] [ENEMY] [Enemy3] Hit taken, health: 1/2
[03:56:03] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:56:03] [INFO] [ImpactEffects] spawn_blood_effect called at (1366.69, 736.6338), dir=(-0.736288, 0.676669), lethal=false
[03:56:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:56:03] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:56:03] [INFO] [ImpactEffects] Blood effect spawned at (1366.69, 736.6338) (scale=1)
[03:56:03] [ENEMY] [Enemy4] Hit taken, health: 1/2
[03:56:03] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[03:56:03] [INFO] [ImpactEffects] spawn_blood_effect called at (1353.594, 737.8641), dir=(-0.736288, 0.676669), lethal=false
[03:56:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:56:03] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:56:03] [INFO] [ImpactEffects] Blood effect spawned at (1353.594, 737.8641) (scale=1)
[03:56:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:03] [ENEMY] [Enemy5] State: COMBAT -> PURSUING
[03:56:03] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
[03:56:03] [ENEMY] [Enemy3] SEARCHING corner check: angle 87.6°
[03:56:03] [INFO] [LastChance] Threat detected: @Area2D@5812
[03:56:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:56:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:56:03] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:56:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1400.066, 707.6485), source=ENEMY (Enemy2), range=1469, listeners=10
[03:56:03] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=0, self=1, below_threshold=4
[03:56:03] [ENEMY] [Enemy1] SEARCHING corner check: angle 150.9°
[03:56:03] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[03:56:03] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:56:03] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:56:03] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:56:03] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:56:03] [ENEMY] [Enemy1] Death animation component initialized
[03:56:03] [ENEMY] [Enemy2] Death animation component initialized
[03:56:03] [ENEMY] [Enemy3] Death animation component initialized
[03:56:03] [ENEMY] [Enemy4] Death animation component initialized
[03:56:03] [ENEMY] [Enemy5] Death animation component initialized
[03:56:03] [ENEMY] [Enemy6] Death animation component initialized
[03:56:03] [ENEMY] [Enemy7] Death animation component initialized
[03:56:03] [ENEMY] [Enemy8] Death animation component initialized
[03:56:03] [ENEMY] [Enemy9] Death animation component initialized
[03:56:03] [ENEMY] [Enemy10] Death animation component initialized
[03:56:03] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:56:03] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:56:03] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:56:03] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:56:03] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:56:03] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:56:03] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:56:03] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:56:03] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[03:56:03] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:56:03] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:56:03] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:56:03] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:56:03] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:56:03] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:56:03] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:56:03] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:56:03] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:56:03] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:56:03] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:56:03] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:56:03] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:56:03] [INFO] [ScoreManager] Level started with 10 enemies
[03:56:03] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:56:03] [ENEMY] [Enemy1] Registered as sound listener
[03:56:03] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[03:56:03] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:56:03] [ENEMY] [Enemy2] Registered as sound listener
[03:56:03] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[03:56:03] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:56:03] [ENEMY] [Enemy3] Registered as sound listener
[03:56:03] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[03:56:03] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:56:03] [ENEMY] [Enemy4] Registered as sound listener
[03:56:03] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[03:56:03] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:56:03] [ENEMY] [Enemy5] Registered as sound listener
[03:56:03] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[03:56:03] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:56:03] [ENEMY] [Enemy6] Registered as sound listener
[03:56:03] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[03:56:03] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:56:03] [ENEMY] [Enemy7] Registered as sound listener
[03:56:03] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[03:56:03] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:56:03] [ENEMY] [Enemy8] Registered as sound listener
[03:56:03] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[03:56:03] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:56:03] [ENEMY] [Enemy9] Registered as sound listener
[03:56:03] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[03:56:03] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:56:03] [ENEMY] [Enemy10] Registered as sound listener
[03:56:03] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[03:56:03] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:56:03] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:56:03] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:56:03] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:56:03] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:56:03] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:56:03] [INFO] [LastChance] Found player: Player
[03:56:03] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:56:03] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:56:03] [INFO] [LastChance] Connected to player Died signal (C#)
[03:56:04] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:56:04] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:56:05] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:56:05] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:56:05] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:56:05] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[03:56:05] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:56:05] [ENEMY] [Enemy4] Memory: high confidence (0.87) - transitioning to PURSUING
[03:56:05] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[03:56:05] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[03:56:06] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[03:56:06] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:56:06] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:56:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(678.1139, 914.0658), source=ENEMY (Enemy4), range=1469, listeners=20
[03:56:06] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:56:06] [ENEMY] [Enemy2] Heard gunshot at (678.1139, 914.0658), source_type=1, intensity=0.01, distance=458
[03:56:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:56:06] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[03:56:06] [INFO] [LastChance] Threat detected: Bullet
[03:56:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:56:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:56:06] [ENEMY] [Enemy1] Memory: medium confidence (0.62) - transitioning to PURSUING
[03:56:06] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:56:06] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[03:56:06] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:56:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(656.6526, 897.0945), source=ENEMY (Enemy4), range=1469, listeners=10
[03:56:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:56:06] [INFO] [LastChance] Threat detected: @Area2D@6087
[03:56:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:56:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:56:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:56:06] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[03:56:06] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:56:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(650.1351, 861.1428), source=ENEMY (Enemy4), range=1469, listeners=10
[03:56:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:56:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(656.4362, 849.5625), shooter_id=62308466297943, bullet_pos=(526.5549, 238.2065)
[03:56:06] [INFO] [Bullet] Using shooter_position, distance=625.000183105469
[03:56:06] [INFO] [Bullet] Distance to wall: 625.000183105469 (42.5574117416477% of viewport)
[03:56:06] [INFO] [Bullet] Distance-based penetration chance: 97.0163529680777%
[03:56:06] [INFO] [Bullet] Starting wall penetration at (526.5549, 238.2065)
[03:56:06] [ENEMY] [Enemy3] Hit taken, health: 1/2
[03:56:06] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:56:06] [INFO] [ImpactEffects] spawn_blood_effect called at (689.8291, 760.1654), dir=(0.077798, -0.996969), lethal=false
[03:56:06] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:56:06] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:56:06] [INFO] [ImpactEffects] Blood effect spawned at (689.8291, 760.1654) (scale=1)
[03:56:06] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7.60745811462402
[03:56:06] [INFO] [Bullet] Body exited signal received for penetrating body
[03:56:06] [INFO] [Bullet] Exiting penetration at (516.8571, 192.5586) after traveling 41.6666679382324 pixels through wall
[03:56:06] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:56:06] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:56:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(650.0967, 824.4722), source=ENEMY (Enemy4), range=1469, listeners=10
[03:56:06] [ENEMY] [Enemy3] Heard gunshot at (650.0967, 824.4722), source_type=1, intensity=0.62, distance=64
[03:56:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:56:06] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:56:06] [INFO] [LastChance] Threat detected: Bullet
[03:56:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:56:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:56:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(646.2102, 829.852), shooter_id=62308466297943, bullet_pos=(615.1949, 38.79296)
[03:56:06] [INFO] [Bullet] Using shooter_position, distance=791.666809082031
[03:56:06] [INFO] [Bullet] Distance to wall: 791.666809082031 (53.9060487772929% of viewport)
[03:56:06] [INFO] [Bullet] Distance-based penetration chance: 83.7762764264916%
[03:56:06] [INFO] [Bullet] Starting wall penetration at (615.1949, 38.79296)
[03:56:06] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[03:56:06] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.8684883117676
[03:56:06] [INFO] [Bullet] Body exited signal received for penetrating body
[03:56:06] [INFO] [Bullet] Exiting penetration at (613.3666, -7.837875) after traveling 41.6666679382324 pixels through wall
[03:56:06] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:56:06] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[03:56:06] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[03:56:06] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:56:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(655.796, 788.1341), source=ENEMY (Enemy4), range=1469, listeners=10
[03:56:06] [ENEMY] [Enemy3] Heard gunshot at (655.796, 788.1341), source_type=1, intensity=0.98, distance=50
[03:56:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:56:06] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:56:06] [INFO] [LastChance] Threat detected: @Area2D@6093
[03:56:06] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:56:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:56:06] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:56:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:06] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:56:06] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:56:06] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:56:06] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:56:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(666.4189, 752.3531), source=ENEMY (Enemy4), range=1469, listeners=10
[03:56:06] [ENEMY] [Enemy3] Heard gunshot at (666.4189, 752.3531), source_type=1, intensity=1.00, distance=44
[03:56:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:56:06] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:56:06] [INFO] [LastChance] Threat detected: Bullet
[03:56:06] [INFO] [LastChance] Triggering last chance effect!
[03:56:06] [INFO] [LastChance] Starting last chance effect:
[03:56:06] [INFO] [LastChance]   - Time will be frozen (except player)
[03:56:06] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:56:06] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:56:06] [INFO] [LastChance]   - Brightness: 0.60
[03:56:06] [INFO] [LastChance] Pushed bullet Bullet from distance 136.1 to 200.0
[03:56:06] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:56:06] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:56:06] [INFO] [LastChance] Skipping player node: Player
[03:56:06] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:56:06] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6088
[03:56:06] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6090
[03:56:06] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6091
[03:56:06] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6094
[03:56:06] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6096
[03:56:06] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:56:06] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:56:06] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:56:12] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[03:56:12] [INFO] [LastChance] Ending last chance effect
[03:56:12] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[03:56:12] [ENEMY] [Enemy1] Search mode: PURSUING -> SEARCHING at (678.1139, 914.0658)
[03:56:12] [ENEMY] [Enemy1] SEARCHING started: center=(678.1139, 914.0658), radius=100, waypoints=5
[03:56:12] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:56:12] [ENEMY] [Enemy2] Search mode: PURSUING -> SEARCHING at (678.1139, 914.0658)
[03:56:12] [ENEMY] [Enemy2] SEARCHING started: center=(678.1139, 914.0658), radius=100, waypoints=5
[03:56:12] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[03:56:12] [ENEMY] [Enemy3] Search mode: RETREATING -> SEARCHING at (754.036, 494.6014)
[03:56:12] [ENEMY] [Enemy3] SEARCHING started: center=(754.036, 494.6014), radius=100, waypoints=5
[03:56:12] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:56:12] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (761.8142, 486.8232)
[03:56:12] [ENEMY] [Enemy4] SEARCHING started: center=(761.8142, 486.8232), radius=100, waypoints=5
[03:56:12] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:56:12] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:56:12] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:56:12] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:56:12] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:56:12] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:56:12] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:56:12] [INFO] [LastChance] All process modes restored
[03:56:12] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:56:12] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@6088
[03:56:12] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@6090
[03:56:12] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@6091
[03:56:12] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@6094
[03:56:12] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@6096
[03:56:12] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:56:12] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:56:12] [ENEMY] [Enemy2] SEARCHING corner check: angle 134.2°
[03:56:12] [ENEMY] [Enemy3] SEARCHING corner check: angle -170.0°
[03:56:12] [ENEMY] [Enemy4] SEARCHING corner check: angle -160.2°
[03:56:13] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:56:13] [ENEMY] [Enemy1] SEARCHING corner check: angle 161.1°
[03:56:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(695.5604, 690.8603), shooter_id=62308466297943, bullet_pos=(916.6044, 41.33639)
[03:56:13] [INFO] [Bullet] Using shooter_position, distance=686.106262207031
[03:56:13] [INFO] [Bullet] Distance to wall: 686.106262207031 (46.7182370318445% of viewport)
[03:56:13] [ENEMY] [Enemy3] SEARCHING corner check: angle -170.0°
[03:56:13] [ENEMY] [Enemy4] SEARCHING corner check: angle -160.2°
[03:56:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(695.5604, 690.8603), shooter_id=62308466297943, bullet_pos=(972.7143, 214.5589)
[03:56:13] [INFO] [Bullet] Using shooter_position, distance=551.069274902344
[03:56:13] [INFO] [Bullet] Distance to wall: 551.069274902344 (37.5233202551442% of viewport)
[03:56:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:56:13] [INFO] [Bullet] Starting wall penetration at (972.7143, 214.5589)
[03:56:13] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[03:56:13] [INFO] [Bullet] Exiting penetration at (985.1689, 253.0087) after traveling 35.4166717529297 pixels through wall
[03:56:13] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[03:56:13] [ENEMY] [Enemy2] SEARCHING corner check: angle -50.0°
[03:56:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:56:13] [ENEMY] [Enemy1] SEARCHING corner check: angle 161.1°
[03:56:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:13] [ENEMY] [Enemy3] SEARCHING corner check: angle -170.0°
[03:56:13] [ENEMY] [Enemy4] SEARCHING corner check: angle -160.2°
[03:56:13] [ENEMY] [Enemy2] SEARCHING corner check: angle -27.8°
[03:56:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:56:13] [ENEMY] [Enemy1] SEARCHING corner check: angle -28.0°
[03:56:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:14] [ENEMY] [Enemy2] SEARCHING corner check: angle -27.8°
[03:56:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:56:14] [ENEMY] [Enemy1] SEARCHING corner check: angle -28.0°
[03:56:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:56:14] [ENEMY] [Enemy2] SEARCHING corner check: angle -90.8°
[03:56:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:14] [ENEMY] [Enemy1] SEARCHING corner check: angle -83.4°
[03:56:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:56:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:14] [ENEMY] [Enemy3] SEARCHING corner check: angle 21.5°
[03:56:15] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:56:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:15] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:15] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:15] [ENEMY] [Enemy2] SEARCHING corner check: angle -89.9°
[03:56:15] [ENEMY] [Enemy4] SEARCHING corner check: angle -122.2°
[03:56:16] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:16] [ENEMY] [Enemy1] SEARCHING corner check: angle -84.3°
[03:56:16] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:16] [ENEMY] [Enemy2] SEARCHING corner check: angle 0.2°
[03:56:16] [ENEMY] [Enemy3] SEARCHING corner check: angle -135.6°
[03:56:16] [ENEMY] [Enemy4] SEARCHING corner check: angle -122.2°
[03:56:16] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:16] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:16] [ENEMY] [Enemy1] SEARCHING corner check: angle 0.2°
[03:56:16] [ENEMY] [Enemy2] SEARCHING corner check: angle -89.9°
[03:56:16] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:16] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:16] [ENEMY] [Enemy1] SEARCHING corner check: angle -89.9°
[03:56:17] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:17] [ENEMY] [Enemy2] SEARCHING corner check: angle -179.8°
[03:56:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:17] [ENEMY] [Enemy1] SEARCHING corner check: angle -179.8°
[03:56:17] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:17] [ENEMY] [Enemy3] SEARCHING corner check: angle 21.5°
[03:56:17] [ENEMY] [Enemy4] SEARCHING corner check: angle 27.4°
[03:56:17] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:18] [ENEMY] [Enemy3] SEARCHING corner check: angle 21.5°
[03:56:18] [ENEMY] [Enemy4] SEARCHING corner check: angle 27.4°
[03:56:18] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:18] [ENEMY] [Enemy3] SEARCHING corner check: angle 21.5°
[03:56:18] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:18] [ENEMY] [Enemy2] SEARCHING corner check: angle -90.1°
[03:56:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:18] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:18] [ENEMY] [Enemy1] SEARCHING corner check: angle -90.1°
[03:56:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:19] [ENEMY] [Enemy4] SEARCHING corner check: angle 146.0°
[03:56:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:19] [ENEMY] [Enemy3] SEARCHING corner check: angle 142.4°
[03:56:19] [ENEMY] [Enemy4] SEARCHING corner check: angle 146.0°
[03:56:19] [ENEMY] [Enemy2] SEARCHING: Expand outer ring r=175 wps=4
[03:56:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:19] [ENEMY] [Enemy2] SEARCHING corner check: angle 14.6°
[03:56:19] [ENEMY] [Enemy1] SEARCHING: Expand outer ring r=175 wps=4
[03:56:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:20] [ENEMY] [Enemy1] SEARCHING corner check: angle 14.6°
[03:56:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:20] [ENEMY] [Enemy2] SEARCHING corner check: angle -165.4°
[03:56:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:20] [ENEMY] [Enemy1] SEARCHING corner check: angle -165.4°
[03:56:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:20] [ENEMY] [Enemy4] SEARCHING: Expand outer ring r=175 wps=4
[03:56:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:20] [ENEMY] [Enemy3] SEARCHING: Expand outer ring r=175 wps=4
[03:56:21] [ENEMY] [Enemy3] SEARCHING corner check: angle 35.9°
[03:56:21] [ENEMY] [Enemy4] SEARCHING corner check: angle -144.9°
[03:56:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:21] [ENEMY] [Enemy2] SEARCHING corner check: angle -55.0°
[03:56:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:21] [ENEMY] [Enemy1] SEARCHING corner check: angle -55.0°
[03:56:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:21] [ENEMY] [Enemy2] SEARCHING corner check: angle -55.0°
[03:56:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:22] [ENEMY] [Enemy1] SEARCHING corner check: angle -55.0°
[03:56:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:22] [ENEMY] [Enemy3] SEARCHING corner check: angle -52.6°
[03:56:22] [ENEMY] [Enemy4] SEARCHING corner check: angle -51.6°
[03:56:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:22] [ENEMY] [Enemy3] SEARCHING corner check: angle -52.6°
[03:56:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:23] [ENEMY] [Enemy2] SEARCHING corner check: angle 119.3°
[03:56:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:23] [ENEMY] [Enemy1] SEARCHING corner check: angle 119.3°
[03:56:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:23] [ENEMY] [Enemy2] SEARCHING corner check: angle -87.5°
[03:56:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:23] [ENEMY] [Enemy4] SEARCHING corner check: angle 41.7°
[03:56:23] [ENEMY] [Enemy1] SEARCHING corner check: angle -87.5°
[03:56:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:23] [ENEMY] [Enemy2] SEARCHING corner check: angle 92.5°
[03:56:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:24] [ENEMY] [Enemy3] SEARCHING corner check: angle 40.6°
[03:56:24] [ENEMY] [Enemy4] SEARCHING corner check: angle 41.7°
[03:56:24] [ENEMY] [Enemy1] SEARCHING corner check: angle 92.5°
[03:56:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:24] [ENEMY] [Enemy2] SEARCHING corner check: angle 90.0°
[03:56:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:24] [ENEMY] [Enemy3] SEARCHING corner check: angle 40.6°
[03:56:24] [ENEMY] [Enemy4] SEARCHING corner check: angle 1.5°
[03:56:24] [ENEMY] [Enemy1] SEARCHING corner check: angle 90.0°
[03:56:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:24] [ENEMY] [Enemy2] SEARCHING corner check: angle 180.0°
[03:56:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:24] [ENEMY] [Enemy4] SEARCHING corner check: angle 90.3°
[03:56:24] [ENEMY] [Enemy1] SEARCHING corner check: angle 180.0°
[03:56:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:24] [ENEMY] [Enemy2] SEARCHING corner check: angle 180.0°
[03:56:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:25] [ENEMY] [Enemy4] SEARCHING corner check: angle 90.3°
[03:56:25] [ENEMY] [Enemy1] SEARCHING corner check: angle 180.0°
[03:56:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:25] [ENEMY] [Enemy2] SEARCHING corner check: angle -0.2°
[03:56:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:25] [ENEMY] [Enemy4] SEARCHING corner check: angle 90.3°
[03:56:25] [ENEMY] [Enemy1] SEARCHING corner check: angle -0.2°
[03:56:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:25] [ENEMY] [Enemy2] SEARCHING corner check: angle 92.6°
[03:56:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:25] [ENEMY] [Enemy3] SEARCHING corner check: angle 117.1°
[03:56:25] [ENEMY] [Enemy1] SEARCHING corner check: angle 92.6°
[03:56:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:25] [ENEMY] [Enemy2] SEARCHING corner check: angle 92.6°
[03:56:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:26] [ENEMY] [Enemy3] SEARCHING corner check: angle -62.9°
[03:56:26] [ENEMY] [Enemy1] SEARCHING corner check: angle 92.6°
[03:56:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:26] [ENEMY] [Enemy2] SEARCHING corner check: angle 92.6°
[03:56:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:26] [ENEMY] [Enemy3] SEARCHING corner check: angle 117.1°
[03:56:26] [ENEMY] [Enemy4] SEARCHING: Expand outer ring r=250 wps=4
[03:56:26] [ENEMY] [Enemy1] SEARCHING corner check: angle 92.6°
[03:56:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:26] [ENEMY] [Enemy4] SEARCHING corner check: angle 10.4°
[03:56:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:27] [ENEMY] [Enemy4] SEARCHING corner check: angle 10.4°
[03:56:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:27] [ENEMY] [Enemy4] SEARCHING corner check: angle 10.4°
[03:56:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:27] [ENEMY] [Enemy2] SEARCHING corner check: angle 90.8°
[03:56:27] [ENEMY] [Enemy3] SEARCHING: Expand outer ring r=250 wps=4
[03:56:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:27] [ENEMY] [Enemy3] SEARCHING corner check: angle 10.1°
[03:56:27] [ENEMY] [Enemy4] SEARCHING corner check: angle 10.4°
[03:56:27] [ENEMY] [Enemy1] SEARCHING corner check: angle 90.8°
[03:56:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:27] [ENEMY] [Enemy2] SEARCHING corner check: angle 90.8°
[03:56:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:28] [ENEMY] [Enemy3] SEARCHING corner check: angle 10.1°
[03:56:28] [ENEMY] [Enemy1] SEARCHING corner check: angle 90.8°
[03:56:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:28] [ENEMY] [Enemy2] SEARCHING corner check: angle 90.8°
[03:56:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:28] [ENEMY] [Enemy3] SEARCHING corner check: angle 10.1°
[03:56:28] [ENEMY] [Enemy1] SEARCHING corner check: angle 90.8°
[03:56:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:28] [ENEMY] [Enemy2] SEARCHING corner check: angle 90.8°
[03:56:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:28] [ENEMY] [Enemy1] SEARCHING corner check: angle 90.8°
[03:56:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:29] [ENEMY] [Enemy4] SEARCHING corner check: angle 113.1°
[03:56:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:29] [ENEMY] [Enemy4] SEARCHING corner check: angle -66.9°
[03:56:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:29] [ENEMY] [Enemy3] SEARCHING corner check: angle 113.3°
[03:56:29] [ENEMY] [Enemy4] SEARCHING corner check: angle -66.9°
[03:56:29] [ENEMY] [Enemy2] SEARCHING: Expand outer ring r=250 wps=4
[03:56:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:29] [ENEMY] [Enemy2] SEARCHING corner check: angle -163.4°
[03:56:30] [ENEMY] [Enemy1] SEARCHING: Expand outer ring r=250 wps=4
[03:56:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:30] [ENEMY] [Enemy3] SEARCHING corner check: angle 113.3°
[03:56:30] [ENEMY] [Enemy4] SEARCHING corner check: angle -0.2°
[03:56:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:30] [ENEMY] [Enemy1] SEARCHING corner check: angle -163.4°
[03:56:30] [ENEMY] [Enemy2] SEARCHING corner check: angle -163.4°
[03:56:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:30] [ENEMY] [Enemy3] SEARCHING corner check: angle -66.7°
[03:56:30] [ENEMY] [Enemy4] SEARCHING corner check: angle 129.4°
[03:56:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:30] [ENEMY] [Enemy1] SEARCHING corner check: angle -163.4°
[03:56:30] [ENEMY] [Enemy2] SEARCHING corner check: angle -163.4°
[03:56:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:30] [ENEMY] [Enemy3] SEARCHING corner check: angle -66.7°
[03:56:30] [ENEMY] [Enemy4] SEARCHING corner check: angle -50.6°
[03:56:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:30] [ENEMY] [Enemy1] SEARCHING corner check: angle -163.4°
[03:56:30] [ENEMY] [Enemy2] SEARCHING corner check: angle 49.8°
[03:56:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:31] [ENEMY] [Enemy3] SEARCHING corner check: angle 129.3°
[03:56:31] [ENEMY] [Enemy4] SEARCHING corner check: angle -50.6°
[03:56:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:31] [ENEMY] [Enemy1] SEARCHING corner check: angle 49.8°
[03:56:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:31] [ENEMY] [Enemy3] SEARCHING corner check: angle -50.7°
[03:56:31] [ENEMY] [Enemy4] SEARCHING corner check: angle -50.6°
[03:56:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:31] [ENEMY] [Enemy3] SEARCHING corner check: angle -50.7°
[03:56:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:31] [ENEMY] [Enemy4] SEARCHING corner check: angle 108.1°
[03:56:32] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:32] [ENEMY] [Enemy3] SEARCHING corner check: angle -50.7°
[03:56:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:32] [ENEMY] [Enemy2] SEARCHING corner check: angle -74.5°
[03:56:32] [ENEMY] [Enemy4] SEARCHING: Player spotted! Transitioning to COMBAT
[03:56:32] [ENEMY] [Enemy4] State: SEARCHING -> COMBAT
[03:56:32] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:32] [ENEMY] [Enemy1] SEARCHING corner check: angle -74.5°
[03:56:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1315.576, 736.0648), source=ENEMY (Enemy4), range=1469, listeners=10
[03:56:32] [ENEMY] [Enemy7] Heard gunshot at (1315.576, 736.0648), source_type=1, intensity=0.02, distance=338
[03:56:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[03:56:32] [INFO] [LastChance] Threat detected: Bullet
[03:56:32] [INFO] [LastChance] Effect already used this life
[03:56:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:56:32] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[03:56:32] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[03:56:32] [INFO] [PenultimateHit] Player died - ending penultimate effect
[03:56:32] [INFO] [LastChance] Player died
[03:56:32] [ENEMY] [Enemy2] SEARCHING corner check: angle -74.5°
[03:56:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1295.241, 736.0651), source=ENEMY (Enemy4), range=1469, listeners=10
[03:56:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[03:56:32] [INFO] [LastChance] Threat detected: Bullet
[03:56:32] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:56:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:56:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1295.241, 736.0651), source=ENEMY (Enemy4), range=1469, listeners=10
[03:56:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[03:56:32] [INFO] [LastChance] Threat detected: Bullet
[03:56:32] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:56:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:56:32] [ENEMY] [Enemy3] SEARCHING corner check: angle 109.7°
[03:56:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:32] [ENEMY] [Enemy1] SEARCHING corner check: angle -74.5°
[03:56:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1295.241, 736.0651), source=ENEMY (Enemy4), range=1469, listeners=10
[03:56:32] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=1, below_threshold=6
[03:56:32] [INFO] [LastChance] Threat detected: Bullet
[03:56:32] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:56:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:56:32] [ENEMY] [Enemy2] SEARCHING corner check: angle -74.5°
[03:56:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1295.241, 736.0651), source=ENEMY (Enemy4), range=1469, listeners=10
[03:56:33] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=1, below_threshold=6
[03:56:33] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:56:33] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:56:33] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:56:33] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:56:33] [ENEMY] [Enemy1] Death animation component initialized
[03:56:33] [ENEMY] [Enemy2] Death animation component initialized
[03:56:33] [ENEMY] [Enemy3] Death animation component initialized
[03:56:33] [ENEMY] [Enemy4] Death animation component initialized
[03:56:33] [ENEMY] [Enemy5] Death animation component initialized
[03:56:33] [ENEMY] [Enemy6] Death animation component initialized
[03:56:33] [ENEMY] [Enemy7] Death animation component initialized
[03:56:33] [ENEMY] [Enemy8] Death animation component initialized
[03:56:33] [ENEMY] [Enemy9] Death animation component initialized
[03:56:33] [ENEMY] [Enemy10] Death animation component initialized
[03:56:33] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:56:33] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:56:33] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:56:33] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:56:33] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:56:33] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:56:33] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:56:33] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:56:33] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[03:56:33] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:56:33] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:56:33] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:56:33] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:56:33] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:56:33] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:56:33] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:56:33] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:56:33] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:56:33] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:56:33] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:56:33] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:56:33] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:56:33] [INFO] [ScoreManager] Level started with 10 enemies
[03:56:33] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:56:33] [ENEMY] [Enemy1] Registered as sound listener
[03:56:33] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[03:56:33] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:56:33] [ENEMY] [Enemy2] Registered as sound listener
[03:56:33] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[03:56:33] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:56:33] [ENEMY] [Enemy3] Registered as sound listener
[03:56:33] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[03:56:33] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:56:33] [ENEMY] [Enemy4] Registered as sound listener
[03:56:33] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[03:56:33] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:56:33] [ENEMY] [Enemy5] Registered as sound listener
[03:56:33] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[03:56:33] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:56:33] [ENEMY] [Enemy6] Registered as sound listener
[03:56:33] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[03:56:33] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:56:33] [ENEMY] [Enemy7] Registered as sound listener
[03:56:33] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[03:56:33] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:56:33] [ENEMY] [Enemy8] Registered as sound listener
[03:56:33] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[03:56:33] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:56:33] [ENEMY] [Enemy9] Registered as sound listener
[03:56:33] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[03:56:33] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:56:33] [ENEMY] [Enemy10] Registered as sound listener
[03:56:33] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[03:56:33] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:56:33] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:56:33] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:56:33] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:56:33] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:56:33] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:56:33] [INFO] [LastChance] Found player: Player
[03:56:33] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:56:33] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:56:33] [INFO] [LastChance] Connected to player Died signal (C#)
[03:56:34] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:56:34] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:56:34] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:56:34] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:56:34] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[03:56:35] [ENEMY] [Enemy4] Memory: high confidence (0.89) - transitioning to PURSUING
[03:56:35] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[03:56:35] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[03:56:35] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:56:35] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[03:56:35] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:56:35] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[03:56:35] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:56:36] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:56:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(565.3544, 899.5032), source=ENEMY (Enemy4), range=1469, listeners=20
[03:56:36] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:56:36] [ENEMY] [Enemy2] Heard gunshot at (565.3544, 899.5032), source_type=1, intensity=0.02, distance=387
[03:56:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:56:36] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[03:56:36] [ENEMY] [Enemy1] Memory: medium confidence (0.63) - transitioning to PURSUING
[03:56:36] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:56:36] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[03:56:36] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:56:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(585.5786, 882.1224), source=ENEMY (Enemy4), range=1469, listeners=10
[03:56:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:56:36] [INFO] [LastChance] Threat detected: Bullet
[03:56:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:56:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:56:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:56:36] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:56:36] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:56:36] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:56:36] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[03:56:36] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:56:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(603.8998, 850.0049), source=ENEMY (Enemy4), range=1469, listeners=10
[03:56:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:56:36] [INFO] [LastChance] Threat detected: @Area2D@6364
[03:56:36] [INFO] [LastChance] Triggering last chance effect!
[03:56:36] [INFO] [LastChance] Starting last chance effect:
[03:56:36] [INFO] [LastChance]   - Time will be frozen (except player)
[03:56:36] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:56:36] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:56:36] [INFO] [LastChance]   - Brightness: 0.60
[03:56:36] [INFO] [LastChance] Pushed bullet @Area2D@6364 from distance 119.0 to 200.0
[03:56:36] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:56:36] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:56:36] [INFO] [LastChance] Skipping player node: Player
[03:56:36] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:56:36] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6365
[03:56:36] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6366
[03:56:36] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:56:36] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:56:36] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:56:42] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[03:56:42] [INFO] [LastChance] Ending last chance effect
[03:56:42] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[03:56:42] [ENEMY] [Enemy1] Search mode: PURSUING -> SEARCHING at (565.3544, 899.5032)
[03:56:42] [ENEMY] [Enemy1] SEARCHING started: center=(565.3544, 899.5032), radius=100, waypoints=5
[03:56:42] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:56:42] [ENEMY] [Enemy2] Search mode: COMBAT -> SEARCHING at (565.3544, 899.5032)
[03:56:42] [ENEMY] [Enemy2] SEARCHING started: center=(565.3544, 899.5032), radius=100, waypoints=5
[03:56:42] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[03:56:42] [ENEMY] [Enemy3] Search mode: RETREATING -> SEARCHING at (769.5923, 480.4991)
[03:56:42] [ENEMY] [Enemy3] SEARCHING started: center=(769.5923, 480.4991), radius=100, waypoints=5
[03:56:42] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:56:42] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (824.0397, 426.0518)
[03:56:42] [ENEMY] [Enemy4] SEARCHING started: center=(824.0397, 426.0518), radius=100, waypoints=5
[03:56:42] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:56:42] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:56:42] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:56:42] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:56:42] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:56:42] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:56:42] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:56:42] [INFO] [LastChance] All process modes restored
[03:56:42] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:56:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@6365
[03:56:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@6366
[03:56:42] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:56:42] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:56:42] [ENEMY] [Enemy2] SEARCHING corner check: angle 176.1°
[03:56:42] [ENEMY] [Enemy3] SEARCHING corner check: angle -165.4°
[03:56:42] [ENEMY] [Enemy4] SEARCHING corner check: angle -152.6°
[03:56:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(622.2321, 824.7889), shooter_id=70534368856364, bullet_pos=(1001.962, 33.64304)
[03:56:42] [INFO] [Bullet] Using shooter_position, distance=877.557312011719
[03:56:42] [INFO] [Bullet] Distance to wall: 877.557312011719 (59.7544910604836% of viewport)
[03:56:42] [INFO] [Bullet] Distance-based penetration chance: 76.9530937627692%
[03:56:42] [INFO] [Bullet] Starting wall penetration at (1001.962, 33.64304)
[03:56:42] [ENEMY] [Enemy1] SEARCHING corner check: angle 153.3°
[03:56:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 44.8384857177734
[03:56:42] [INFO] [Bullet] Body exited signal received for penetrating body
[03:56:42] [INFO] [Bullet] Exiting penetration at (1022.426, -8.297474) after traveling 41.6666679382324 pixels through wall
[03:56:42] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:56:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(641.7762, 793.4719), shooter_id=70534368856364, bullet_pos=(1023.203, 52.55511)
[03:56:42] [INFO] [Bullet] Using shooter_position, distance=833.333190917969
[03:56:42] [INFO] [Bullet] Distance to wall: 833.333190917969 (56.7431893342221% of viewport)
[03:56:42] [INFO] [Bullet] Distance-based penetration chance: 80.4662791100742%
[03:56:42] [INFO] [Bullet] Starting wall penetration at (1023.203, 52.55511)
[03:56:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.5476665496826
[03:56:42] [INFO] [Bullet] Body exited signal received for penetrating body
[03:56:42] [INFO] [Bullet] Exiting penetration at (1044.563, 11.06377) after traveling 41.6666717529297 pixels through wall
[03:56:42] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:56:42] [ENEMY] [Enemy2] SEARCHING corner check: angle -3.9°
[03:56:42] [ENEMY] [Enemy3] SEARCHING corner check: angle -165.4°
[03:56:42] [ENEMY] [Enemy4] SEARCHING corner check: angle -152.6°
[03:56:42] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:56:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:43] [ENEMY] [Enemy1] SEARCHING corner check: angle 153.3°
[03:56:43] [ENEMY] [Enemy2] SEARCHING corner check: angle -12.6°
[03:56:43] [ENEMY] [Enemy3] SEARCHING corner check: angle -165.4°
[03:56:43] [ENEMY] [Enemy4] SEARCHING corner check: angle -152.6°
[03:56:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:56:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:43] [ENEMY] [Enemy1] SEARCHING corner check: angle -48.9°
[03:56:43] [ENEMY] [Enemy2] SEARCHING corner check: angle -8.1°
[03:56:43] [ENEMY] [Enemy4] SEARCHING corner check: angle -152.6°
[03:56:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:56:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:43] [ENEMY] [Enemy1] SEARCHING corner check: angle -11.9°
[03:56:43] [ENEMY] [Enemy4] SEARCHING corner check: angle -152.6°
[03:56:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:56:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:56:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:44] [ENEMY] [Enemy3] SEARCHING corner check: angle 29.9°
[03:56:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:56:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:44] [ENEMY] [Enemy2] SEARCHING corner check: angle -7.3°
[03:56:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:56:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:45] [ENEMY] [Enemy1] SEARCHING corner check: angle -7.3°
[03:56:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:45] [ENEMY] [Enemy3] SEARCHING corner check: angle -130.1°
[03:56:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:46] [ENEMY] [Enemy2] SEARCHING corner check: angle -34.1°
[03:56:46] [ENEMY] [Enemy4] SEARCHING corner check: angle -114.8°
[03:56:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:46] [ENEMY] [Enemy2] SEARCHING corner check: angle -34.1°
[03:56:46] [ENEMY] [Enemy4] SEARCHING corner check: angle -114.8°
[03:56:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:46] [ENEMY] [Enemy1] SEARCHING corner check: angle -34.1°
[03:56:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:47] [ENEMY] [Enemy1] SEARCHING corner check: angle -34.1°
[03:56:47] [ENEMY] [Enemy3] SEARCHING corner check: angle 24.1°
[03:56:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:47] [ENEMY] [Enemy3] SEARCHING corner check: angle 24.1°
[03:56:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:47] [ENEMY] [Enemy3] SEARCHING corner check: angle 24.1°
[03:56:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:47] [ENEMY] [Enemy4] SEARCHING corner check: angle 33.4°
[03:56:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:48] [ENEMY] [Enemy4] SEARCHING corner check: angle 33.4°
[03:56:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:48] [ENEMY] [Enemy2] SEARCHING corner check: angle -9.4°
[03:56:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:49] [ENEMY] [Enemy3] SEARCHING corner check: angle 143.8°
[03:56:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:49] [ENEMY] [Enemy2] SEARCHING corner check: angle -9.4°
[03:56:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:49] [ENEMY] [Enemy1] SEARCHING corner check: angle -9.4°
[03:56:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:49] [ENEMY] [Enemy4] SEARCHING corner check: angle 148.3°
[03:56:49] [ENEMY] [Enemy2] SEARCHING corner check: angle 90.3°
[03:56:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:49] [ENEMY] [Enemy1] SEARCHING corner check: angle -9.4°
[03:56:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:49] [ENEMY] [Enemy2] SEARCHING corner check: angle 180.0°
[03:56:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:50] [ENEMY] [Enemy1] SEARCHING corner check: angle 90.3°
[03:56:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:50] [ENEMY] [Enemy2] SEARCHING corner check: angle 179.7°
[03:56:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:50] [ENEMY] [Enemy3] SEARCHING: Expand outer ring r=175 wps=4
[03:56:50] [ENEMY] [Enemy1] SEARCHING corner check: angle 180.0°
[03:56:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:50] [ENEMY] [Enemy3] SEARCHING corner check: angle 35.4°
[03:56:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:50] [ENEMY] [Enemy1] SEARCHING corner check: angle 179.7°
[03:56:50] [ENEMY] [Enemy4] SEARCHING: Expand outer ring r=175 wps=4
[03:56:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:50] [ENEMY] [Enemy4] SEARCHING corner check: angle -146.6°
[03:56:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:51] [ENEMY] [Enemy2] SEARCHING: Expand outer ring r=175 wps=4
[03:56:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:51] [ENEMY] [Enemy2] SEARCHING corner check: angle -180.0°
[03:56:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:51] [ENEMY] [Enemy1] SEARCHING: Expand outer ring r=175 wps=4
[03:56:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:51] [ENEMY] [Enemy3] SEARCHING corner check: angle -51.7°
[03:56:51] [ENEMY] [Enemy2] SEARCHING corner check: angle -180.0°
[03:56:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:52] [ENEMY] [Enemy1] SEARCHING corner check: angle -180.0°
[03:56:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:52] [ENEMY] [Enemy3] SEARCHING corner check: angle -51.7°
[03:56:52] [ENEMY] [Enemy4] SEARCHING corner check: angle -47.4°
[03:56:52] [ENEMY] [Enemy2] SEARCHING corner check: angle -179.9°
[03:56:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:52] [ENEMY] [Enemy1] SEARCHING corner check: angle -180.0°
[03:56:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:52] [ENEMY] [Enemy4] SEARCHING corner check: angle -47.4°
[03:56:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:52] [ENEMY] [Enemy1] SEARCHING corner check: angle -179.9°
[03:56:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:52] [ENEMY] [Enemy4] SEARCHING corner check: angle -5.0°
[03:56:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:53] [ENEMY] [Enemy4] SEARCHING corner check: angle -5.0°
[03:56:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:53] [ENEMY] [Enemy3] SEARCHING corner check: angle 41.0°
[03:56:53] [ENEMY] [Enemy4] SEARCHING corner check: angle -5.0°
[03:56:53] [ENEMY] [Enemy2] SEARCHING corner check: angle -85.3°
[03:56:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:53] [ENEMY] [Enemy3] SEARCHING corner check: angle 41.0°
[03:56:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:54] [ENEMY] [Enemy1] SEARCHING corner check: angle -85.3°
[03:56:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:54] [ENEMY] [Enemy3] SEARCHING corner check: angle 90.6°
[03:56:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:54] [ENEMY] [Enemy3] SEARCHING corner check: angle 90.6°
[03:56:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:54] [ENEMY] [Enemy3] SEARCHING corner check: angle 90.6°
[03:56:54] [ENEMY] [Enemy4] SEARCHING corner check: angle 163.5°
[03:56:54] [ENEMY] [Enemy2] SEARCHING corner check: angle 87.7°
[03:56:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:55] [ENEMY] [Enemy4] SEARCHING corner check: angle 89.9°
[03:56:55] [ENEMY] [Enemy2] SEARCHING corner check: angle -92.3°
[03:56:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:55] [ENEMY] [Enemy1] SEARCHING corner check: angle 87.7°
[03:56:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:55] [ENEMY] [Enemy4] SEARCHING corner check: angle 89.9°
[03:56:55] [ENEMY] [Enemy2] SEARCHING corner check: angle 87.7°
[03:56:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:55] [ENEMY] [Enemy1] SEARCHING corner check: angle -92.3°
[03:56:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:55] [ENEMY] [Enemy2] SEARCHING corner check: angle 87.7°
[03:56:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:56] [ENEMY] [Enemy3] SEARCHING: Expand outer ring r=250 wps=4
[03:56:56] [ENEMY] [Enemy1] SEARCHING corner check: angle 87.7°
[03:56:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:56] [ENEMY] [Enemy3] SEARCHING corner check: angle -94.2°
[03:56:56] [ENEMY] [Enemy2] SEARCHING corner check: angle 180.0°
[03:56:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:56] [ENEMY] [Enemy1] SEARCHING corner check: angle 87.7°
[03:56:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:56] [ENEMY] [Enemy3] SEARCHING corner check: angle 11.2°
[03:56:56] [ENEMY] [Enemy2] SEARCHING corner check: angle 180.0°
[03:56:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:56] [ENEMY] [Enemy1] SEARCHING corner check: angle 180.0°
[03:56:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:56] [ENEMY] [Enemy4] SEARCHING: Expand outer ring r=250 wps=4
[03:56:56] [ENEMY] [Enemy3] SEARCHING corner check: angle 11.2°
[03:56:56] [ENEMY] [Enemy2] SEARCHING corner check: angle -0.2°
[03:56:56] [ENEMY] [Enemy4] SEARCHING corner check: angle 18.6°
[03:56:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:57] [ENEMY] [Enemy1] SEARCHING corner check: angle 180.0°
[03:56:57] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:57] [ENEMY] [Enemy3] SEARCHING corner check: angle 11.2°
[03:56:57] [ENEMY] [Enemy2] SEARCHING corner check: angle 90.2°
[03:56:57] [ENEMY] [Enemy4] SEARCHING corner check: angle 18.6°
[03:56:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:57] [ENEMY] [Enemy1] SEARCHING corner check: angle -0.2°
[03:56:57] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:57] [ENEMY] [Enemy2] SEARCHING corner check: angle 90.2°
[03:56:57] [ENEMY] [Enemy4] SEARCHING corner check: angle 18.6°
[03:56:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:57] [ENEMY] [Enemy1] SEARCHING corner check: angle 90.2°
[03:56:57] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:57] [ENEMY] [Enemy4] SEARCHING corner check: angle 18.6°
[03:56:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:58] [ENEMY] [Enemy1] SEARCHING corner check: angle 90.2°
[03:56:58] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:58] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:58] [ENEMY] [Enemy3] SEARCHING corner check: angle 114.2°
[03:56:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:58] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:56:58] [ENEMY] [Enemy3] SEARCHING corner check: angle 114.2°
[03:56:58] [ENEMY] [Enemy2] SEARCHING corner check: angle 90.1°
[03:56:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:56:59] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:56:59] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:56:59] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:56:59] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:56:59] [ENEMY] [Enemy1] Death animation component initialized
[03:56:59] [ENEMY] [Enemy2] Death animation component initialized
[03:56:59] [ENEMY] [Enemy3] Death animation component initialized
[03:56:59] [ENEMY] [Enemy4] Death animation component initialized
[03:56:59] [ENEMY] [Enemy5] Death animation component initialized
[03:56:59] [ENEMY] [Enemy6] Death animation component initialized
[03:56:59] [ENEMY] [Enemy7] Death animation component initialized
[03:56:59] [ENEMY] [Enemy8] Death animation component initialized
[03:56:59] [ENEMY] [Enemy9] Death animation component initialized
[03:56:59] [ENEMY] [Enemy10] Death animation component initialized
[03:56:59] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:56:59] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:56:59] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:56:59] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:56:59] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:56:59] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:56:59] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:56:59] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:56:59] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[03:56:59] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:56:59] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:56:59] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:56:59] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:56:59] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:56:59] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:56:59] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:56:59] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:56:59] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:56:59] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:56:59] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:56:59] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:56:59] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:56:59] [INFO] [ScoreManager] Level started with 10 enemies
[03:56:59] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:56:59] [ENEMY] [Enemy1] Registered as sound listener
[03:56:59] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[03:56:59] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:56:59] [ENEMY] [Enemy2] Registered as sound listener
[03:56:59] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[03:56:59] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:56:59] [ENEMY] [Enemy3] Registered as sound listener
[03:56:59] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[03:56:59] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:56:59] [ENEMY] [Enemy4] Registered as sound listener
[03:56:59] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[03:56:59] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:56:59] [ENEMY] [Enemy5] Registered as sound listener
[03:56:59] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[03:56:59] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:56:59] [ENEMY] [Enemy6] Registered as sound listener
[03:56:59] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[03:56:59] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:56:59] [ENEMY] [Enemy7] Registered as sound listener
[03:56:59] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[03:56:59] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:56:59] [ENEMY] [Enemy8] Registered as sound listener
[03:56:59] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[03:56:59] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:56:59] [ENEMY] [Enemy9] Registered as sound listener
[03:56:59] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[03:56:59] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:56:59] [ENEMY] [Enemy10] Registered as sound listener
[03:56:59] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[03:56:59] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:56:59] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:56:59] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:56:59] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:56:59] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:56:59] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:56:59] [INFO] [LastChance] Found player: Player
[03:56:59] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:56:59] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:56:59] [INFO] [LastChance] Connected to player Died signal (C#)
[03:57:00] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:57:00] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:57:00] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:57:00] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:57:00] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:57:01] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:57:01] [ENEMY] [Enemy2] Memory: high confidence (0.90) - transitioning to PURSUING
[03:57:01] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[03:57:01] [ENEMY] [Enemy3] Memory: high confidence (0.81) - transitioning to PURSUING
[03:57:01] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[03:57:01] [ENEMY] [Enemy4] Memory: medium confidence (0.72) - transitioning to PURSUING
[03:57:01] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[03:57:01] [ENEMY] [Enemy2] PURSUING corner check: angle 151.0°
[03:57:01] [ENEMY] [Enemy3] PURSUING corner check: angle -117.3°
[03:57:01] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[03:57:01] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:57:01] [ENEMY] [Enemy3] PURSUING corner check: angle 62.7°
[03:57:01] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[03:57:01] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[03:57:01] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(678.1131, 914.0658), source=ENEMY (Enemy4), range=1469, listeners=20
[03:57:01] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:57:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:01] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:57:01] [INFO] [LastChance] Threat detected: Bullet
[03:57:01] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:01] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(661.1318, 905.289), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:01] [INFO] [LastChance] Threat detected: @Area2D@6620
[03:57:01] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:01] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[03:57:01] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(654.5399, 872.6663), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:01] [INFO] [LastChance] Threat detected: @Area2D@6622
[03:57:01] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(665.7752, 847.1451), shooter_id=77409403538661, bullet_pos=(612.4235, 57.27797)
[03:57:01] [INFO] [Bullet] Using shooter_position, distance=791.666931152344
[03:57:01] [INFO] [Bullet] Distance to wall: 791.666931152344 (53.906057089285% of viewport)
[03:57:01] [INFO] [Bullet] Distance-based penetration chance: 83.7762667291675%
[03:57:01] [INFO] [Bullet] Starting wall penetration at (612.4235, 57.27797)
[03:57:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.3311042785645
[03:57:01] [INFO] [Bullet] Body exited signal received for penetrating body
[03:57:01] [INFO] [Bullet] Exiting penetration at (609.2786, 10.71739) after traveling 41.6666679382324 pixels through wall
[03:57:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:57:01] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(653.51, 836.2988), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:01] [ENEMY] [Enemy3] Heard gunshot at (653.51, 836.2988), source_type=1, intensity=0.32, distance=88
[03:57:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:01] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:57:01] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:57:01] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:57:01] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:57:01] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:57:01] [INFO] [LastChance] Threat detected: @Area2D@6624
[03:57:01] [INFO] [LastChance] Triggering last chance effect!
[03:57:01] [INFO] [LastChance] Starting last chance effect:
[03:57:01] [INFO] [LastChance]   - Time will be frozen (except player)
[03:57:01] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:57:01] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:57:01] [INFO] [LastChance]   - Brightness: 0.60
[03:57:01] [INFO] [LastChance] Pushed bullet @Area2D@6624 from distance 146.9 to 200.0
[03:57:01] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:57:01] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:57:01] [INFO] [LastChance] Skipping player node: Player
[03:57:01] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:57:01] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6621
[03:57:01] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6623
[03:57:01] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6625
[03:57:01] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:57:01] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:57:01] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:57:02] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:57:02] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:57:02] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:57:02] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:57:02] [INFO] [LastChance] Ending last chance effect
[03:57:02] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[03:57:02] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=false
[03:57:02] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=false
[03:57:02] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=false
[03:57:02] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:57:02] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:57:02] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:57:02] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:57:02] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:57:02] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:57:02] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:57:02] [INFO] [LastChance] All process modes restored
[03:57:02] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:57:02] [ENEMY] [Enemy1] Death animation component initialized
[03:57:02] [ENEMY] [Enemy2] Death animation component initialized
[03:57:02] [ENEMY] [Enemy3] Death animation component initialized
[03:57:02] [ENEMY] [Enemy4] Death animation component initialized
[03:57:02] [ENEMY] [Enemy5] Death animation component initialized
[03:57:02] [ENEMY] [Enemy6] Death animation component initialized
[03:57:02] [ENEMY] [Enemy7] Death animation component initialized
[03:57:02] [ENEMY] [Enemy8] Death animation component initialized
[03:57:02] [ENEMY] [Enemy9] Death animation component initialized
[03:57:02] [ENEMY] [Enemy10] Death animation component initialized
[03:57:02] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:57:02] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:57:02] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:57:02] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:57:02] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:57:02] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:57:02] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:57:02] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:57:02] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[03:57:02] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:57:02] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:57:02] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:57:02] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:57:02] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:57:02] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:57:02] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:57:02] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:57:02] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:57:02] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:57:02] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:57:02] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:57:02] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:57:02] [INFO] [ScoreManager] Level started with 10 enemies
[03:57:02] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:57:02] [ENEMY] [Enemy1] Registered as sound listener
[03:57:02] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[03:57:02] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:57:02] [ENEMY] [Enemy2] Registered as sound listener
[03:57:02] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[03:57:02] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:57:02] [ENEMY] [Enemy3] Registered as sound listener
[03:57:02] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[03:57:02] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:57:02] [ENEMY] [Enemy4] Registered as sound listener
[03:57:02] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[03:57:02] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:57:02] [ENEMY] [Enemy5] Registered as sound listener
[03:57:02] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[03:57:02] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:57:02] [ENEMY] [Enemy6] Registered as sound listener
[03:57:02] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[03:57:02] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:57:02] [ENEMY] [Enemy7] Registered as sound listener
[03:57:02] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[03:57:02] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:57:02] [ENEMY] [Enemy8] Registered as sound listener
[03:57:02] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[03:57:02] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:57:02] [ENEMY] [Enemy9] Registered as sound listener
[03:57:02] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[03:57:02] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:57:02] [ENEMY] [Enemy10] Registered as sound listener
[03:57:02] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[03:57:02] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:57:02] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:57:02] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:57:02] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:57:02] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:57:02] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:57:02] [INFO] [LastChance] Found player: Player
[03:57:02] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:57:02] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:57:02] [INFO] [LastChance] Connected to player Died signal (C#)
[03:57:03] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:57:03] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:57:04] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:57:04] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:57:04] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:57:04] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:57:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=20
[03:57:04] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:57:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[03:57:04] [INFO] [LastChance] Threat detected: Bullet
[03:57:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:04] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:57:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.5292, 377.9005), source=ENEMY (Enemy1), range=1469, listeners=10
[03:57:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=1, below_threshold=3
[03:57:04] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:57:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[03:57:04] [ENEMY] [Enemy3] Heard gunshot at (400, 550), source_type=1, intensity=0.02, distance=361
[03:57:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[03:57:04] [INFO] [LastChance] Threat detected: @Area2D@6880
[03:57:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:04] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:04] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[03:57:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:04] [INFO] [LastChance] Threat detected: @Area2D@6882
[03:57:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:04] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:57:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.4741, 606.8005), shooter_id=78474723199578, bullet_pos=(785.6271, 1021.761)
[03:57:04] [INFO] [Bullet] Using shooter_position, distance=541.666748046875
[03:57:04] [INFO] [Bullet] Distance to wall: 541.666748046875 (36.883084911833% of viewport)
[03:57:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:04] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:57:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[03:57:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[03:57:04] [INFO] [LastChance] Threat detected: @Area2D@6884
[03:57:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(447.1267, 599.0884), shooter_id=78474723199578, bullet_pos=(704.0163, 811.5005)
[03:57:04] [INFO] [Bullet] Using shooter_position, distance=333.333404541016
[03:57:04] [INFO] [Bullet] Distance to wall: 333.333404541016 (22.6972844612805% of viewport)
[03:57:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:04] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.4741, 606.8005), shooter_id=78474723199578, bullet_pos=(910.3549, 889.1063)
[03:57:04] [INFO] [Bullet] Using shooter_position, distance=550.738464355469
[03:57:04] [INFO] [Bullet] Distance to wall: 550.738464355469 (37.5007947567006% of viewport)
[03:57:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:04] [INFO] [LastChance] Threat detected: @Area2D@6887
[03:57:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:04] [ENEMY] [Enemy2] Hit taken, health: 1/2
[03:57:04] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[03:57:04] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(-0.832875, -0.553461), lethal=false
[03:57:04] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:57:04] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:57:04] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[03:57:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(351.0232, 435.3356), shooter_id=78474437986324, bullet_pos=(692.0052, 856.2083)
[03:57:04] [INFO] [Bullet] Using shooter_position, distance=541.666442871094
[03:57:04] [INFO] [Bullet] Distance to wall: 541.666442871094 (36.8830641318529% of viewport)
[03:57:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:04] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[03:57:04] [ENEMY] [Enemy3] Hit taken, health: 1/2
[03:57:04] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:57:04] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.87025, 0.492611), lethal=false
[03:57:04] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:57:04] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:57:04] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[03:57:04] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[03:57:04] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[03:57:04] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[03:57:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(649.7144, 704.153), shooter_id=78475008411527, bullet_pos=(512.8662, 547.0689)
[03:57:04] [INFO] [Bullet] Using shooter_position, distance=208.333419799805
[03:57:04] [INFO] [Bullet] Distance to wall: 208.333419799805 (14.1858056455476% of viewport)
[03:57:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(447.1267, 599.0884), shooter_id=78474723199578, bullet_pos=(913.3862, 613.2571)
[03:57:04] [INFO] [Bullet] Using shooter_position, distance=466.474731445313
[03:57:04] [INFO] [Bullet] Distance to wall: 466.474731445313 (31.7631222355061% of viewport)
[03:57:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:04] [INFO] [Bullet] Starting wall penetration at (913.3862, 613.2571)
[03:57:04] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.134973526001
[03:57:04] [INFO] [Bullet] Body exited signal received for penetrating body
[03:57:04] [INFO] [Bullet] Exiting penetration at (942.7343, 585.4687) after traveling 35.4166679382324 pixels through wall
[03:57:04] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[03:57:04] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:04] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(351.0232, 435.3356), shooter_id=78474437986324, bullet_pos=(586.1567, 1004.365)
[03:57:04] [INFO] [Bullet] Using shooter_position, distance=615.696655273438
[03:57:04] [INFO] [Bullet] Distance to wall: 615.696655273438 (41.9239174238855% of viewport)
[03:57:04] [INFO] [LastChance] Threat detected: @Area2D@6894
[03:57:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:04] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:57:04] [ENEMY] [Enemy3] Hit taken, health: 0/2
[03:57:04] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:57:04] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(-0.784274, -0.620415), lethal=true
[03:57:04] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:57:04] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[03:57:04] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1.5)
[03:57:04] [ENEMY] [Enemy3] Enemy died (ricochet: true, penetration: false)
[03:57:04] [INFO] [ScoreManager] Ricochet kill registered
[03:57:04] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[03:57:04] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[03:57:04] [INFO] [DeathAnim] Started - Angle: -141.7 deg, Index: 2
[03:57:04] [ENEMY] [Enemy3] Death animation started with hit direction: (-0.784274, -0.620415)
[03:57:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(351.0232, 435.3356), shooter_id=78474437986324, bullet_pos=(510.0554, 904.6759)
[03:57:04] [INFO] [Bullet] Using shooter_position, distance=495.551818847656
[03:57:04] [INFO] [Bullet] Distance to wall: 495.551818847656 (33.7430345847807% of viewport)
[03:57:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:04] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[03:57:04] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:57:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(649.7144, 704.153), shooter_id=78475008411527, bullet_pos=(932.3068, 60.37021)
[03:57:05] [INFO] [Bullet] Using shooter_position, distance=703.075134277344
[03:57:05] [INFO] [Bullet] Distance to wall: 703.075134277344 (47.8736787341164% of viewport)
[03:57:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(649.7144, 704.153), shooter_id=78475008411527, bullet_pos=(1074.476, 222.6264)
[03:57:05] [INFO] [Bullet] Using shooter_position, distance=642.09814453125
[03:57:05] [INFO] [Bullet] Distance to wall: 642.09814453125 (43.7216433755079% of viewport)
[03:57:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(649.7144, 704.153), shooter_id=78475008411527, bullet_pos=(1027.388, 289.4724)
[03:57:05] [INFO] [Bullet] Using shooter_position, distance=560.889892578125
[03:57:05] [INFO] [Bullet] Distance to wall: 560.889892578125 (38.1920241712117% of viewport)
[03:57:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:05] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:57:05] [ENEMY] [Enemy3] Ragdoll activated
[03:57:05] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[03:57:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(351.0232, 435.3356), shooter_id=78474437986324, bullet_pos=(1108.322, 301.6883)
[03:57:05] [INFO] [Bullet] Using shooter_position, distance=769.001647949219
[03:57:05] [INFO] [Bullet] Distance to wall: 769.001647949219 (52.3627362782034% of viewport)
[03:57:05] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[03:57:05] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[03:57:05] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[03:57:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:57:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(649.7144, 704.153), shooter_id=78475008411527, bullet_pos=(1240.736, 698.9856)
[03:57:05] [INFO] [Bullet] Using shooter_position, distance=591.044677734375
[03:57:05] [INFO] [Bullet] Distance to wall: 591.044677734375 (40.2453189422613% of viewport)
[03:57:05] [INFO] [Bullet] Distance-based penetration chance: 99.7137945673619%
[03:57:05] [INFO] [Bullet] Starting wall penetration at (1240.736, 698.9856)
[03:57:05] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.0756196975708
[03:57:05] [INFO] [Bullet] Body exited signal received for penetrating body
[03:57:05] [INFO] [Bullet] Exiting penetration at (1253.096, 722.7094) after traveling 21.7502613067627 pixels through wall
[03:57:05] [INFO] [Bullet] Damage multiplier after penetration: 0.05625
[03:57:05] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[03:57:05] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[03:57:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(351.0232, 435.3356), shooter_id=78474437986324, bullet_pos=(1370.032, 504.7573)
[03:57:05] [INFO] [Bullet] Using shooter_position, distance=1021.37078857422
[03:57:05] [INFO] [Bullet] Distance to wall: 1021.37078857422 (69.547015129289% of viewport)
[03:57:05] [INFO] [Bullet] Distance-based penetration chance: 65.5284823491628%
[03:57:05] [INFO] [Bullet] Penetration failed (distance roll)
[03:57:05] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[03:57:05] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[03:57:05] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[03:57:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:06] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:57:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:06] [ENEMY] [Enemy3] Death animation completed
[03:57:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:57:06] [ENEMY] [Enemy1] PURSUING corner check: angle 156.9°
[03:57:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:57:06] [ENEMY] [Enemy1] PURSUING corner check: angle 156.9°
[03:57:06] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[03:57:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:07] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[03:57:07] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[03:57:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:57:07] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[03:57:07] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[03:57:07] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[03:57:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:07] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[03:57:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:57:07] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
[03:57:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:57:07] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[03:57:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:08] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:57:08] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:08] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:08] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:08] [ENEMY] [Enemy2] PURSUING corner check: angle -91.4°
[03:57:08] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:08] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:09] [ENEMY] [Enemy4] PURSUING corner check: angle -15.6°
[03:57:09] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:09] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:09] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:10] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:10] [ENEMY] [Enemy1] FLANKING started: target=(1339.31, 520.9249), side=right, pos=(457.7537, 648.4852)
[03:57:10] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[03:57:10] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:10] [ENEMY] [Enemy1] FLANKING corner check: angle -99.7°
[03:57:10] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:10] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:10] [ENEMY] [Enemy1] FLANKING corner check: angle -101.6°
[03:57:10] [ENEMY] [Enemy2] PURSUING corner check: angle 173.1°
[03:57:10] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:10] [ENEMY] [Enemy4] PURSUING corner check: angle 132.3°
[03:57:10] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:10] [ENEMY] [Enemy1] FLANKING corner check: angle -101.6°
[03:57:11] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:11] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:11] [ENEMY] [Enemy1] FLANKING corner check: angle -101.6°
[03:57:11] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:11] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:11] [ENEMY] [Enemy1] FLANKING corner check: angle -109.1°
[03:57:11] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:11] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:11] [ENEMY] [Enemy1] FLANKING corner check: angle -77.2°
[03:57:12] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:12] [ENEMY] [Enemy1] FLANKING corner check: angle -77.2°
[03:57:12] [ENEMY] [Enemy2] FLANKING started: target=(1074.994, 683.8805), side=right, pos=(462.0317, 643.8663)
[03:57:12] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[03:57:12] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:12] [ENEMY] [Enemy2] FLANKING corner check: angle 79.0°
[03:57:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:12] [ENEMY] [Enemy1] FLANKING corner check: angle -77.2°
[03:57:12] [ENEMY] [Enemy4] FLANKING started: target=(1027.412, 698.4584), side=right, pos=(562.8722, 825.2161)
[03:57:12] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[03:57:12] [ENEMY] [Enemy4] FLANKING corner check: angle 52.1°
[03:57:12] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:12] [ENEMY] [Enemy2] FLANKING corner check: angle -101.0°
[03:57:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:12] [ENEMY] [Enemy1] FLANKING corner check: angle -94.8°
[03:57:13] [ENEMY] [Enemy4] FLANKING corner check: angle -127.9°
[03:57:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:13] [ENEMY] [Enemy2] FLANKING corner check: angle -101.0°
[03:57:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:13] [ENEMY] [Enemy1] FLANKING corner check: angle 39.6°
[03:57:13] [ENEMY] [Enemy4] FLANKING corner check: angle -127.9°
[03:57:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:13] [ENEMY] [Enemy2] FLANKING corner check: angle -101.0°
[03:57:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:13] [ENEMY] [Enemy1] FLANKING corner check: angle -24.8°
[03:57:13] [ENEMY] [Enemy4] FLANKING corner check: angle -127.9°
[03:57:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:13] [ENEMY] [Enemy2] FLANKING corner check: angle -77.2°
[03:57:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:14] [ENEMY] [Enemy4] FLANKING corner check: angle -101.7°
[03:57:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:14] [ENEMY] [Enemy2] FLANKING corner check: angle -77.2°
[03:57:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:14] [ENEMY] [Enemy4] FLANKING corner check: angle -77.8°
[03:57:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:14] [ENEMY] [Enemy2] FLANKING corner check: angle -77.2°
[03:57:14] [ENEMY] [Enemy1] State: FLANKING -> COMBAT
[03:57:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1320.648, 812.9177), source=ENEMY (Enemy1), range=1469, listeners=9
[03:57:14] [ENEMY] [Enemy7] Heard gunshot at (1320.648, 812.9177), source_type=1, intensity=0.03, distance=303
[03:57:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=1, below_threshold=5
[03:57:14] [ENEMY] [Enemy4] FLANKING corner check: angle -77.8°
[03:57:14] [INFO] [LastChance] Threat detected: Bullet
[03:57:14] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:14] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[03:57:14] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[03:57:14] [ENEMY] [Enemy2] FLANKING corner check: angle -75.6°
[03:57:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1320.648, 812.9177), source=ENEMY (Enemy1), range=1469, listeners=9
[03:57:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=1, below_threshold=5
[03:57:14] [INFO] [LastChance] Threat detected: Bullet
[03:57:14] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:57:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:15] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[03:57:15] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[03:57:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1320.648, 812.9177), source=ENEMY (Enemy1), range=1469, listeners=9
[03:57:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=1, below_threshold=5
[03:57:15] [INFO] [LastChance] Threat detected: Bullet
[03:57:15] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:57:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:15] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:57:15] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:57:15] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:57:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1320.648, 812.9177), source=ENEMY (Enemy1), range=1469, listeners=9
[03:57:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=1, below_threshold=5
[03:57:15] [ENEMY] [Enemy4] FLANKING corner check: angle -77.8°
[03:57:15] [INFO] [LastChance] Threat detected: Bullet
[03:57:15] [INFO] [LastChance] Triggering last chance effect!
[03:57:15] [INFO] [LastChance] Starting last chance effect:
[03:57:15] [INFO] [LastChance]   - Time will be frozen (except player)
[03:57:15] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:57:15] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:57:15] [INFO] [LastChance]   - Brightness: 0.60
[03:57:15] [INFO] [LastChance] Pushed bullet Bullet from distance 113.0 to 200.0
[03:57:15] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:57:15] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:57:15] [INFO] [LastChance] Skipping player node: Player
[03:57:15] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:57:15] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6879
[03:57:15] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6881
[03:57:15] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6883
[03:57:15] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6885
[03:57:15] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6888
[03:57:15] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6895
[03:57:15] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6949
[03:57:15] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6950
[03:57:15] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6951
[03:57:15] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6952
[03:57:15] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:57:15] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:57:15] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:57:15] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:57:15] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:57:15] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:57:15] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:57:15] [INFO] [LastChance] Ending last chance effect
[03:57:15] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[03:57:15] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=false
[03:57:15] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=false
[03:57:15] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=false
[03:57:15] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:57:15] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:57:15] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:57:15] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:57:15] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:57:15] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:57:15] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:57:15] [INFO] [LastChance] All process modes restored
[03:57:15] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:57:15] [ENEMY] [Enemy1] Death animation component initialized
[03:57:15] [ENEMY] [Enemy2] Death animation component initialized
[03:57:15] [ENEMY] [Enemy3] Death animation component initialized
[03:57:15] [ENEMY] [Enemy4] Death animation component initialized
[03:57:15] [ENEMY] [Enemy5] Death animation component initialized
[03:57:15] [ENEMY] [Enemy6] Death animation component initialized
[03:57:15] [ENEMY] [Enemy7] Death animation component initialized
[03:57:15] [ENEMY] [Enemy8] Death animation component initialized
[03:57:15] [ENEMY] [Enemy9] Death animation component initialized
[03:57:15] [ENEMY] [Enemy10] Death animation component initialized
[03:57:15] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:57:15] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:57:15] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:57:15] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:57:15] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:57:15] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:57:15] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:57:15] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:57:15] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[03:57:15] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:57:15] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:57:15] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:57:15] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:57:15] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:57:15] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:57:15] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:57:15] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:57:15] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:57:15] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:57:15] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:57:15] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:57:15] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:57:15] [INFO] [ScoreManager] Level started with 10 enemies
[03:57:15] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[03:57:15] [ENEMY] [Enemy1] Registered as sound listener
[03:57:15] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[03:57:15] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[03:57:15] [ENEMY] [Enemy2] Registered as sound listener
[03:57:15] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[03:57:15] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[03:57:15] [ENEMY] [Enemy3] Registered as sound listener
[03:57:15] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[03:57:15] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[03:57:15] [ENEMY] [Enemy4] Registered as sound listener
[03:57:15] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[03:57:15] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[03:57:15] [ENEMY] [Enemy5] Registered as sound listener
[03:57:15] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[03:57:15] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[03:57:15] [ENEMY] [Enemy6] Registered as sound listener
[03:57:15] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[03:57:15] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[03:57:15] [ENEMY] [Enemy7] Registered as sound listener
[03:57:15] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[03:57:15] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[03:57:15] [ENEMY] [Enemy8] Registered as sound listener
[03:57:15] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[03:57:15] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[03:57:15] [ENEMY] [Enemy9] Registered as sound listener
[03:57:15] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[03:57:15] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[03:57:15] [ENEMY] [Enemy10] Registered as sound listener
[03:57:15] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[03:57:15] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:57:15] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:57:15] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:57:15] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:57:15] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:57:15] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:57:15] [INFO] [LastChance] Found player: Player
[03:57:15] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:57:15] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:57:15] [INFO] [LastChance] Connected to player Died signal (C#)
[03:57:16] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:57:16] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:57:17] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:57:17] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:57:17] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:57:17] [ENEMY] [Enemy2] Memory: high confidence (0.90) - transitioning to PURSUING
[03:57:17] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[03:57:17] [ENEMY] [Enemy3] Memory: high confidence (0.81) - transitioning to PURSUING
[03:57:17] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[03:57:17] [ENEMY] [Enemy4] Memory: medium confidence (0.72) - transitioning to PURSUING
[03:57:17] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[03:57:17] [ENEMY] [Enemy2] PURSUING corner check: angle 151.0°
[03:57:17] [ENEMY] [Enemy3] PURSUING corner check: angle -117.3°
[03:57:17] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(695.2625, 752.4495), source=ENEMY (Enemy3), range=1469, listeners=19
[03:57:17] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[03:57:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:17] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[03:57:17] [INFO] [LastChance] Threat detected: Bullet
[03:57:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:17] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:57:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.2471, 378.0509), source=ENEMY (Enemy1), range=1469, listeners=10
[03:57:17] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=1, below_threshold=3
[03:57:17] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:57:17] [ENEMY] [Enemy3] Hit taken, health: 3/4
[03:57:17] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:57:17] [INFO] [ImpactEffects] spawn_blood_effect called at (634.6323, 785.1934), dir=(0.622067, 0.782964), lethal=false
[03:57:17] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:57:17] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:57:17] [INFO] [ImpactEffects] Wall found for blood splatter at (680, 842.2954) (dist=72 px)
[03:57:17] [INFO] [ImpactEffects] Blood effect spawned at (634.6323, 785.1934) (scale=1)
[03:57:17] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(634.6323, 785.1934), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:17] [INFO] [LastChance] Threat detected: Bullet
[03:57:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:17] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[03:57:17] [ENEMY] [Enemy3] PURSUING corner check: angle 61.9°
[03:57:17] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[03:57:17] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(579.5669, 810.9205), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:17] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[03:57:17] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:57:17] [INFO] [LastChance] Threat detected: Bullet
[03:57:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:17] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[03:57:17] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[03:57:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(571.6655, 812.1725), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:57:17] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[03:57:18] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(551.4286, 792.0853), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:57:18] [INFO] [LastChance] Threat detected: Bullet
[03:57:18] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[03:57:18] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[03:57:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(588.0588, 750.9626), shooter_id=82579956960767, bullet_pos=(741.6804, 59.48848)
[03:57:18] [INFO] [Bullet] Using shooter_position, distance=708.333251953125
[03:57:18] [INFO] [Bullet] Distance to wall: 708.333251953125 (48.2317136354862% of viewport)
[03:57:18] [INFO] [Bullet] Distance-based penetration chance: 90.3963340919327%
[03:57:18] [INFO] [Bullet] Penetration failed (distance roll)
[03:57:18] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:57:18] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(565.3544, 899.5032), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:18] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[03:57:18] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(587.0669, 884.023), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:57:18] [INFO] [LastChance] Threat detected: Bullet
[03:57:18] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:57:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:18] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(609.349, 854.4594), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:18] [INFO] [LastChance] Threat detected: @Area2D@7217
[03:57:18] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:57:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:18] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[03:57:18] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[03:57:18] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[03:57:18] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(632.1585, 824.9158), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:18] [INFO] [LastChance] Threat detected: @Area2D@7219
[03:57:18] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:57:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(605.4485, 844.5209), shooter_id=82580242172369, bullet_pos=(1057.09, 46.83826)
[03:57:18] [INFO] [Bullet] Using shooter_position, distance=916.666748046875
[03:57:18] [INFO] [Bullet] Distance to wall: 916.666748046875 (62.4175244760288% of viewport)
[03:57:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(629.7523, 831.0272), shooter_id=82580242172369, bullet_pos=(985.6693, 267.3182)
[03:57:18] [INFO] [Bullet] Using shooter_position, distance=666.666870117188
[03:57:18] [INFO] [Bullet] Distance to wall: 666.666870117188 (45.394573078557% of viewport)
[03:57:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(605.4485, 844.5209), shooter_id=82580242172369, bullet_pos=(1125.134, 215.73)
[03:57:18] [INFO] [Bullet] Using shooter_position, distance=815.751708984375
[03:57:18] [INFO] [Bullet] Distance to wall: 815.751708984375 (55.5460338998692% of viewport)
[03:57:18] [INFO] [LastChance] Threat detected: @Area2D@7221
[03:57:18] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:57:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:18] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(656.9373, 797.0027), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(655.4297, 804.3878), shooter_id=82580242172369, bullet_pos=(1023.159, 299.0167)
[03:57:18] [INFO] [Bullet] Using shooter_position, distance=625.000122070313
[03:57:18] [INFO] [Bullet] Distance to wall: 625.000122070313 (42.5574075856517% of viewport)
[03:57:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(629.7523, 831.0272), shooter_id=82580242172369, bullet_pos=(856.7249, 49.74013)
[03:57:18] [INFO] [Bullet] Using shooter_position, distance=813.588317871094
[03:57:18] [INFO] [Bullet] Distance to wall: 813.588317871094 (55.3987246208404% of viewport)
[03:57:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(605.4485, 844.5209), shooter_id=82580242172369, bullet_pos=(1208.444, 49.85025)
[03:57:18] [INFO] [Bullet] Using shooter_position, distance=997.54931640625
[03:57:18] [INFO] [Bullet] Distance to wall: 997.54931640625 (67.9249672855472% of viewport)
[03:57:18] [INFO] [Bullet] Distance-based penetration chance: 67.4208715001949%
[03:57:18] [INFO] [Bullet] Starting wall penetration at (1208.444, 49.85025)
[03:57:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15.1291103363037
[03:57:18] [INFO] [Bullet] Body exited signal received for penetrating body
[03:57:18] [INFO] [Bullet] Exiting penetration at (1224.199, 18.48019) after traveling 30.1041698455811 pixels through wall
[03:57:18] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[03:57:18] [INFO] [LastChance] Threat detected: @Area2D@7226
[03:57:18] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:57:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:18] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.5122, 770.793), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:18] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
[03:57:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(681.5935, 778.1528), shooter_id=82580242172369, bullet_pos=(1083.411, 299.4382)
[03:57:19] [INFO] [Bullet] Using shooter_position, distance=625.000061035156
[03:57:19] [INFO] [Bullet] Distance to wall: 625.000061035156 (42.5574034296557% of viewport)
[03:57:19] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[03:57:19] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:57:19] [INFO] [LastChance] Threat detected: @Area2D@7231
[03:57:19] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:57:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:19] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(711.7001, 746.3252), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:19] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:19] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[03:57:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(681.5935, 778.1528), shooter_id=82580242172369, bullet_pos=(1383.61, 607.3034)
[03:57:19] [INFO] [Bullet] Using shooter_position, distance=722.507568359375
[03:57:19] [INFO] [Bullet] Distance to wall: 722.507568359375 (49.1968689038574% of viewport)
[03:57:19] [INFO] [LastChance] Threat detected: Bullet
[03:57:19] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:57:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:19] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:19] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
[03:57:19] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[03:57:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(709.4063, 753.6714), shooter_id=82580242172369, bullet_pos=(1373.514, 62.75608)
[03:57:19] [INFO] [Bullet] Using shooter_position, distance=958.333740234375
[03:57:19] [INFO] [Bullet] Distance to wall: 958.333740234375 (65.2547065929183% of viewport)
[03:57:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(681.5935, 778.1528), shooter_id=82580242172369, bullet_pos=(1291.556, 692.4812)
[03:57:19] [INFO] [Bullet] Using shooter_position, distance=615.94921875
[03:57:19] [INFO] [Bullet] Distance to wall: 615.94921875 (41.9411149354279% of viewport)
[03:57:19] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[03:57:19] [ENEMY] [Enemy1] PURSUING corner check: angle -73.2°
[03:57:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:57:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(738.6774, 730.9508), shooter_id=82580242172369, bullet_pos=(1476.896, 56.38919)
[03:57:19] [INFO] [Bullet] Using shooter_position, distance=1000.00036621094
[03:57:19] [INFO] [Bullet] Distance to wall: 1000.00036621094 (68.0918637738315% of viewport)
[03:57:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(709.4063, 753.6714), shooter_id=82580242172369, bullet_pos=(1608.377, 285.5869)
[03:57:19] [INFO] [Bullet] Using shooter_position, distance=1013.53448486328
[03:57:19] [INFO] [Bullet] Distance to wall: 1013.53448486328 (69.0134267999194% of viewport)
[03:57:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(769.2206, 709.9662), shooter_id=82580242172369, bullet_pos=(1385.51, 213.0534)
[03:57:19] [INFO] [Bullet] Using shooter_position, distance=791.666259765625
[03:57:19] [INFO] [Bullet] Distance to wall: 791.666259765625 (53.9060113733287% of viewport)
[03:57:19] [INFO] [Bullet] Distance-based penetration chance: 83.7763200644498%
[03:57:19] [INFO] [Bullet] Starting wall penetration at (1385.51, 213.0534)
[03:57:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 43.4686317443848
[03:57:19] [INFO] [Bullet] Body exited signal received for penetrating body
[03:57:19] [INFO] [Bullet] Exiting penetration at (1421.839, 183.7617) after traveling 41.6666679382324 pixels through wall
[03:57:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:57:19] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[03:57:19] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
[03:57:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:19] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[03:57:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(709.4063, 753.6714), shooter_id=82580242172369, bullet_pos=(1818.136, 62.7355)
[03:57:19] [INFO] [Bullet] Using shooter_position, distance=1306.39758300781
[03:57:19] [INFO] [Bullet] Distance to wall: 1306.39758300781 (88.9550136803318% of viewport)
[03:57:19] [ENEMY] [Enemy6] Hit taken, health: 2/3
[03:57:19] [ENEMY] [Enemy6] ImpactEffectsManager found, calling spawn_blood_effect
[03:57:19] [INFO] [ImpactEffects] spawn_blood_effect called at (1950, 450), dir=(0.795332, 0.606174), lethal=false
[03:57:19] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:57:19] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:57:19] [INFO] [ImpactEffects] Blood effect spawned at (1950, 450) (scale=1)
[03:57:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:57:19] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[03:57:19] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
[03:57:19] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[03:57:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:19] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[03:57:19] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[03:57:19] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[03:57:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:57:20] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[03:57:20] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[03:57:20] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
[03:57:20] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
[03:57:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:57:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:57:20] [ENEMY] [Enemy4] PURSUING corner check: angle -131.6°
[03:57:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:57:21] [ENEMY] [Enemy1] FLANKING started: target=(1062.43, 474.7494), side=right, pos=(455.2609, 434.0171)
[03:57:21] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[03:57:21] [ENEMY] [Enemy4] PURSUING corner check: angle -131.6°
[03:57:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:21] [ENEMY] [Enemy1] FLANKING corner check: angle 173.8°
[03:57:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:21] [ENEMY] [Enemy1] FLANKING corner check: angle 170.8°
[03:57:21] [ENEMY] [Enemy2] FLANKING started: target=(851.2085, 767.5413), side=left, pos=(457.7003, 582.674)
[03:57:21] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[03:57:21] [ENEMY] [Enemy2] FLANKING corner check: angle 153.1°
[03:57:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:21] [ENEMY] [Enemy1] FLANKING corner check: angle 69.7°
[03:57:21] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(866.8732, 609.7422), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:21] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:21] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[03:57:22] [ENEMY] [Enemy2] FLANKING corner check: angle -78.3°
[03:57:22] [ENEMY] [Enemy3] PURSUING corner check: angle 94.2°
[03:57:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(422.2842, 765.0773), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[03:57:22] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
[03:57:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:22] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(866.8732, 609.7422), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:22] [INFO] [LastChance] Threat detected: @Area2D@7254
[03:57:22] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[03:57:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[03:57:22] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[03:57:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:22] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(866.8732, 609.7422), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:22] [INFO] [LastChance] Threat detected: @Area2D@7256
[03:57:22] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:57:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:57:22] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:57:22] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:57:22] [ENEMY] [Enemy1] FLANKING corner check: angle 11.2°
[03:57:22] [ENEMY] [Enemy2] State: FLANKING -> RETREATING
[03:57:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:22] [ENEMY] [Enemy1] State: FLANKING -> RETREATING
[03:57:22] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(866.8732, 609.7422), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:22] [INFO] [LastChance] Threat detected: @Area2D@7258
[03:57:22] [INFO] [LastChance] Triggering last chance effect!
[03:57:22] [INFO] [LastChance] Starting last chance effect:
[03:57:22] [INFO] [LastChance]   - Time will be frozen (except player)
[03:57:22] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:57:22] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:57:22] [INFO] [LastChance]   - Brightness: 0.60
[03:57:22] [INFO] [LastChance] Pushed bullet @Area2D@7258 from distance 112.9 to 200.0
[03:57:22] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:57:22] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:57:22] [INFO] [LastChance] Skipping player node: Player
[03:57:22] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:57:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7206
[03:57:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7207
[03:57:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7208
[03:57:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7212
[03:57:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7216
[03:57:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7218
[03:57:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7220
[03:57:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7222
[03:57:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7227
[03:57:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7232
[03:57:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7234
[03:57:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7252
[03:57:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7253
[03:57:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7255
[03:57:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7257
[03:57:22] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7259
[03:57:22] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:57:22] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:57:22] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:57:28] [INFO] [LastChance] Effect duration expired after 6.01 real seconds
[03:57:28] [INFO] [LastChance] Ending last chance effect
[03:57:28] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[03:57:28] [ENEMY] [Enemy1] Search mode: RETREATING -> SEARCHING at (862.9247, 504.0162)
[03:57:28] [ENEMY] [Enemy1] SEARCHING started: center=(862.9247, 504.0162), radius=100, waypoints=5
[03:57:28] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:57:28] [ENEMY] [Enemy2] Search mode: RETREATING -> SEARCHING at (862.9247, 504.0162)
[03:57:28] [ENEMY] [Enemy2] SEARCHING started: center=(862.9247, 504.0162), radius=100, waypoints=5
[03:57:28] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[03:57:28] [ENEMY] [Enemy3] Search mode: COMBAT -> SEARCHING at (792.2178, 448.9882)
[03:57:28] [ENEMY] [Enemy3] SEARCHING started: center=(792.2178, 448.9882), radius=100, waypoints=5
[03:57:28] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:57:28] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (792.2178, 448.9882)
[03:57:28] [ENEMY] [Enemy4] SEARCHING started: center=(792.2178, 448.9882), radius=100, waypoints=5
[03:57:28] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:57:28] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:57:28] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:57:28] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:57:28] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:57:28] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:57:28] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:57:28] [INFO] [LastChance] All process modes restored
[03:57:28] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:57:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@7206
[03:57:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@7207
[03:57:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@7208
[03:57:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@7212
[03:57:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@7216
[03:57:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@7218
[03:57:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@7220
[03:57:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@7222
[03:57:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@7227
[03:57:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@7232
[03:57:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@7234
[03:57:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@7252
[03:57:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@7253
[03:57:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@7255
[03:57:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@7257
[03:57:28] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@7259
[03:57:28] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:57:28] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:57:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:28] [ENEMY] [Enemy2] SEARCHING corner check: angle -122.6°
[03:57:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(484.1263, 736.6845), shooter_id=82579956960767, bullet_pos=(1374.73, 196.4105)
[03:57:28] [INFO] [Bullet] Using shooter_position, distance=1041.66723632813
[03:57:28] [INFO] [Bullet] Distance to wall: 1041.66723632813 (70.9290375787289% of viewport)
[03:57:28] [INFO] [Bullet] Distance-based penetration chance: 63.9161228248163%
[03:57:28] [INFO] [Bullet] Penetration failed (distance roll)
[03:57:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(831.3256, 551.7167), shooter_id=82580242172369, bullet_pos=(601.8278, 65.1581)
[03:57:28] [INFO] [Bullet] Using shooter_position, distance=537.966979980469
[03:57:28] [INFO] [Bullet] Distance to wall: 537.966979980469 (36.6311609009179% of viewport)
[03:57:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:28] [INFO] [Bullet] Starting wall penetration at (601.8278, 65.1581)
[03:57:28] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10.1073179244995
[03:57:28] [INFO] [Bullet] Body exited signal received for penetrating body
[03:57:28] [INFO] [Bullet] Exiting penetration at (582.1717, 22.83299) after traveling 41.6666717529297 pixels through wall
[03:57:28] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:57:28] [ENEMY] [Enemy4] SEARCHING corner check: angle 155.1°
[03:57:28] [ENEMY] [Enemy1] SEARCHING corner check: angle -97.2°
[03:57:28] [ENEMY] [Enemy3] SEARCHING corner check: angle -137.0°
[03:57:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:28] [ENEMY] [Enemy2] SEARCHING corner check: angle -122.6°
[03:57:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:28] [ENEMY] [Enemy1] SEARCHING corner check: angle -97.2°
[03:57:29] [ENEMY] [Enemy3] SEARCHING corner check: angle -137.0°
[03:57:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:29] [ENEMY] [Enemy2] SEARCHING corner check: angle -122.6°
[03:57:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:29] [ENEMY] [Enemy3] SEARCHING corner check: angle -137.0°
[03:57:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:29] [ENEMY] [Enemy4] SEARCHING corner check: angle -49.1°
[03:57:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:30] [ENEMY] [Enemy1] SEARCHING corner check: angle 112.2°
[03:57:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:30] [ENEMY] [Enemy2] SEARCHING corner check: angle 89.9°
[03:57:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:30] [ENEMY] [Enemy3] SEARCHING corner check: angle 74.1°
[03:57:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:31] [ENEMY] [Enemy4] SEARCHING corner check: angle 161.2°
[03:57:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:31] [ENEMY] [Enemy1] SEARCHING corner check: angle -75.6°
[03:57:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:31] [ENEMY] [Enemy2] SEARCHING corner check: angle -90.1°
[03:57:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:32] [ENEMY] [Enemy1] SEARCHING corner check: angle -75.6°
[03:57:32] [ENEMY] [Enemy3] SEARCHING corner check: angle -100.4°
[03:57:32] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:32] [ENEMY] [Enemy2] SEARCHING corner check: angle -90.1°
[03:57:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:32] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:57:32] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:57:32] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:57:32] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:57:32] [ENEMY] [Enemy1] Death animation component initialized
[03:57:32] [ENEMY] [Enemy2] Death animation component initialized
[03:57:32] [ENEMY] [Enemy3] Death animation component initialized
[03:57:32] [ENEMY] [Enemy4] Death animation component initialized
[03:57:32] [ENEMY] [Enemy5] Death animation component initialized
[03:57:32] [ENEMY] [Enemy6] Death animation component initialized
[03:57:32] [ENEMY] [Enemy7] Death animation component initialized
[03:57:32] [ENEMY] [Enemy8] Death animation component initialized
[03:57:32] [ENEMY] [Enemy9] Death animation component initialized
[03:57:32] [ENEMY] [Enemy10] Death animation component initialized
[03:57:32] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:57:32] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:57:32] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:57:32] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:57:32] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:57:32] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:57:32] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:57:32] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:57:32] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[03:57:32] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:57:32] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:57:32] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:57:32] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:57:32] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:57:32] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:57:32] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:57:32] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:57:32] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:57:32] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:57:32] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:57:32] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:57:32] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:57:32] [INFO] [ScoreManager] Level started with 10 enemies
[03:57:32] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:57:32] [ENEMY] [Enemy1] Registered as sound listener
[03:57:32] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[03:57:32] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:57:32] [ENEMY] [Enemy2] Registered as sound listener
[03:57:32] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[03:57:32] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:57:32] [ENEMY] [Enemy3] Registered as sound listener
[03:57:32] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[03:57:32] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:57:32] [ENEMY] [Enemy4] Registered as sound listener
[03:57:32] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[03:57:32] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:57:32] [ENEMY] [Enemy5] Registered as sound listener
[03:57:32] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[03:57:32] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:57:32] [ENEMY] [Enemy6] Registered as sound listener
[03:57:32] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[03:57:32] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:57:32] [ENEMY] [Enemy7] Registered as sound listener
[03:57:32] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[03:57:32] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:57:32] [ENEMY] [Enemy8] Registered as sound listener
[03:57:32] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[03:57:32] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:57:32] [ENEMY] [Enemy9] Registered as sound listener
[03:57:32] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[03:57:32] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:57:32] [ENEMY] [Enemy10] Registered as sound listener
[03:57:32] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[03:57:32] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:57:32] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:57:32] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:57:32] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:57:32] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:57:32] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:57:32] [INFO] [LastChance] Found player: Player
[03:57:32] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:57:32] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:57:32] [INFO] [LastChance] Connected to player Died signal (C#)
[03:57:33] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:57:33] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:57:33] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[03:57:34] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:57:34] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:57:34] [ENEMY] [Enemy4] Memory: high confidence (0.86) - transitioning to PURSUING
[03:57:34] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[03:57:34] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[03:57:34] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[03:57:34] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:57:34] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:57:34] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[03:57:35] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:57:35] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(565.3544, 899.5032), source=ENEMY (Enemy4), range=1469, listeners=20
[03:57:35] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:57:35] [ENEMY] [Enemy2] Heard gunshot at (565.3544, 899.5032), source_type=1, intensity=0.02, distance=387
[03:57:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:35] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[03:57:35] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:57:35] [INFO] [LastChance] Threat detected: Bullet
[03:57:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:35] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[03:57:35] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:35] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(630.1896, 823.1806), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:35] [ENEMY] [Enemy3] Heard gunshot at (630.1896, 823.1806), source_type=1, intensity=0.46, distance=73
[03:57:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:35] [ENEMY] [Enemy3] Hit taken, health: 2/3
[03:57:35] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:57:35] [INFO] [ImpactEffects] spawn_blood_effect called at (688.9984, 779.2615), dir=(0.624743, -0.78083), lethal=false
[03:57:35] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:57:35] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:57:35] [INFO] [ImpactEffects] Blood effect spawned at (688.9984, 779.2615) (scale=1)
[03:57:35] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:57:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(604.0037, 843.4958), shooter_id=86398233218271, bullet_pos=(1034.729, 34.32725)
[03:57:35] [INFO] [Bullet] Using shooter_position, distance=916.666870117188
[03:57:35] [INFO] [Bullet] Distance to wall: 916.666870117188 (62.4175327880209% of viewport)
[03:57:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:35] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(654.3307, 794.7149), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:35] [ENEMY] [Enemy3] Heard gunshot at (654.3307, 794.7149), source_type=1, intensity=1.00, distance=43
[03:57:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:35] [ENEMY] [Enemy3] Hit taken, health: 1/3
[03:57:35] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:57:35] [INFO] [ImpactEffects] spawn_blood_effect called at (691.6545, 772.6254), dir=(0.67746, -0.73556), lethal=false
[03:57:35] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:57:35] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:57:35] [INFO] [ImpactEffects] Blood effect spawned at (691.6545, 772.6254) (scale=1)
[03:57:35] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:57:35] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:57:35] [ENEMY] [Enemy1] Memory: high confidence (0.90) - transitioning to PURSUING
[03:57:35] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:57:35] [ENEMY] [Enemy1] PURSUING corner check: angle -63.3°
[03:57:35] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(680.3654, 767.9692), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:35] [ENEMY] [Enemy3] Heard gunshot at (680.3654, 767.9692), source_type=1, intensity=1.00, distance=27
[03:57:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:35] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:57:36] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:57:36] [INFO] [LastChance] Threat detected: @Area2D@7518
[03:57:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:36] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(708.1304, 743.0249), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:36] [ENEMY] [Enemy3] Heard gunshot at (708.1304, 743.0249), source_type=1, intensity=1.00, distance=32
[03:57:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:36] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:57:36] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[03:57:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:36] [INFO] [LastChance] Threat detected: Bullet
[03:57:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:36] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[03:57:36] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:36] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[03:57:36] [ENEMY] [Enemy1] PURSUING corner check: angle -58.4°
[03:57:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(734.7611, 727.0828), shooter_id=86398233218271, bullet_pos=(1429.771, 67.26182)
[03:57:36] [INFO] [Bullet] Using shooter_position, distance=958.332824707031
[03:57:36] [INFO] [Bullet] Distance to wall: 958.332824707031 (65.2546442529779% of viewport)
[03:57:36] [INFO] [Bullet] Distance-based penetration chance: 70.5362483715258%
[03:57:36] [INFO] [Bullet] Starting wall penetration at (1429.771, 67.26182)
[03:57:36] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:57:36] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[03:57:36] [INFO] [Bullet] Exiting penetration at (1463.614, 35.1314) after traveling 41.6666679382324 pixels through wall
[03:57:36] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:57:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(765.2471, 706.0347), shooter_id=86398233218271, bullet_pos=(1376.028, 202.3654)
[03:57:36] [INFO] [Bullet] Using shooter_position, distance=791.666687011719
[03:57:36] [INFO] [Bullet] Distance to wall: 791.666687011719 (53.9060404653009% of viewport)
[03:57:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(765.2471, 706.0347), shooter_id=86398233218271, bullet_pos=(1257.066, 64.51621)
[03:57:36] [INFO] [Bullet] Using shooter_position, distance=808.351318359375
[03:57:36] [INFO] [Bullet] Distance to wall: 808.351318359375 (55.0421276940945% of viewport)
[03:57:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(765.2471, 706.0347), shooter_id=86398233218271, bullet_pos=(1127.852, 273.6517)
[03:57:36] [INFO] [Bullet] Using shooter_position, distance=564.302673339844
[03:57:36] [INFO] [Bullet] Distance to wall: 564.302673339844 (38.4244066888276% of viewport)
[03:57:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:36] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:57:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(765.2471, 706.0347), shooter_id=86398233218271, bullet_pos=(1326.835, 694.5833)
[03:57:36] [INFO] [Bullet] Using shooter_position, distance=561.705078125
[03:57:36] [INFO] [Bullet] Distance to wall: 561.705078125 (38.2475316540925% of viewport)
[03:57:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:36] [INFO] [Bullet] Starting wall penetration at (1326.835, 694.5833)
[03:57:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11.3238849639893
[03:57:36] [INFO] [Bullet] Body exited signal received for penetrating body
[03:57:36] [INFO] [Bullet] Exiting penetration at (1339.908, 722.2376) after traveling 25.5885429382324 pixels through wall
[03:57:36] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
[03:57:37] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:57:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:37] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:57:37] [ENEMY] [Enemy2] FLANKING started: target=(1242.676, 833.4827), side=left, pos=(475.9343, 577.0195)
[03:57:37] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[03:57:37] [ENEMY] [Enemy2] FLANKING corner check: angle -156.9°
[03:57:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:37] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:57:37] [ENEMY] [Enemy2] FLANKING corner check: angle 81.0°
[03:57:37] [ENEMY] [Enemy4] PURSUING corner check: angle -129.6°
[03:57:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:38] [ENEMY] [Enemy1] FLANKING started: target=(1261.568, 859.1486), side=left, pos=(456.5407, 434.3517)
[03:57:38] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[03:57:38] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:57:38] [ENEMY] [Enemy2] FLANKING corner check: angle -99.0°
[03:57:38] [ENEMY] [Enemy4] PURSUING corner check: angle -129.6°
[03:57:38] [ENEMY] [Enemy1] FLANKING corner check: angle -175.2°
[03:57:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:38] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:38] [ENEMY] [Enemy2] FLANKING corner check: angle -99.0°
[03:57:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:38] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
[03:57:38] [ENEMY] [Enemy1] FLANKING corner check: angle 160.9°
[03:57:38] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
[03:57:38] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:38] [ENEMY] [Enemy2] FLANKING corner check: angle -99.0°
[03:57:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:39] [ENEMY] [Enemy1] FLANKING corner check: angle 97.6°
[03:57:39] [ENEMY] [Enemy2] FLANKING corner check: angle -77.2°
[03:57:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:39] [ENEMY] [Enemy1] FLANKING corner check: angle -59.0°
[03:57:39] [ENEMY] [Enemy2] FLANKING corner check: angle -77.2°
[03:57:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:39] [ENEMY] [Enemy1] FLANKING corner check: angle -16.2°
[03:57:39] [ENEMY] [Enemy4] FLANKING started: target=(1153.624, 698.332), side=right, pos=(866.7135, 610.2086)
[03:57:39] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[03:57:39] [ENEMY] [Enemy2] FLANKING corner check: angle -77.2°
[03:57:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:40] [ENEMY] [Enemy4] FLANKING corner check: angle -78.3°
[03:57:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:40] [ENEMY] [Enemy1] FLANKING corner check: angle -12.9°
[03:57:40] [ENEMY] [Enemy2] FLANKING corner check: angle -75.6°
[03:57:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:40] [ENEMY] [Enemy3] PURSUING corner check: angle -128.4°
[03:57:40] [ENEMY] [Enemy4] FLANKING corner check: angle -78.1°
[03:57:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:40] [ENEMY] [Enemy1] FLANKING corner check: angle -10.8°
[03:57:40] [ENEMY] [Enemy2] FLANKING corner check: angle -93.5°
[03:57:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:40] [ENEMY] [Enemy3] PURSUING corner check: angle -128.4°
[03:57:40] [ENEMY] [Enemy4] FLANKING corner check: angle -78.1°
[03:57:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:40] [ENEMY] [Enemy1] FLANKING corner check: angle -11.2°
[03:57:40] [ENEMY] [Enemy2] FLANKING corner check: angle -95.7°
[03:57:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:41] [ENEMY] [Enemy4] FLANKING corner check: angle -77.4°
[03:57:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:41] [ENEMY] [Enemy1] FLANKING corner check: angle 167.2°
[03:57:41] [ENEMY] [Enemy2] FLANKING corner check: angle -72.9°
[03:57:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:41] [ENEMY] [Enemy4] FLANKING corner check: angle -108.4°
[03:57:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:41] [ENEMY] [Enemy1] FLANKING corner check: angle 129.0°
[03:57:41] [ENEMY] [Enemy2] FLANKING corner check: angle -112.8°
[03:57:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:41] [ENEMY] [Enemy4] FLANKING corner check: angle 23.3°
[03:57:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:41] [ENEMY] [Enemy2] FLANKING corner check: angle -167.3°
[03:57:41] [ENEMY] [Enemy1] FLANKING corner check: angle -52.1°
[03:57:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:42] [ENEMY] [Enemy2] FLANKING corner check: angle -172.9°
[03:57:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:42] [ENEMY] [Enemy4] FLANKING corner check: angle -149.1°
[03:57:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:42] [ENEMY] [Enemy2] FLANKING timeout (5.0s), target=(884.9507, 1001.499), pos=(860.7613, 821.1215)
[03:57:42] [ENEMY] [Enemy2] State: FLANKING -> PURSUING
[03:57:42] [ENEMY] [Enemy2] PURSUING corner check: angle -145.0°
[03:57:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:42] [ENEMY] [Enemy4] FLANKING corner check: angle -142.3°
[03:57:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:42] [ENEMY] [Enemy2] PURSUING corner check: angle -175.9°
[03:57:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:43] [ENEMY] [Enemy1] FLANKING timeout (5.0s), target=(892.1181, 1008.275), pos=(798.3432, 815.6227)
[03:57:43] [ENEMY] [Enemy1] State: FLANKING -> PURSUING
[03:57:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:43] [ENEMY] [Enemy1] PURSUING corner check: angle -150.3°
[03:57:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:43] [ENEMY] [Enemy4] State: FLANKING -> COMBAT
[03:57:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:43] [ENEMY] [Enemy1] PURSUING corner check: angle -152.1°
[03:57:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1265.742, 821.5072), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:43] [ENEMY] [Enemy7] Heard gunshot at (1265.742, 821.5072), source_type=1, intensity=0.02, distance=354
[03:57:43] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=1, below_threshold=5
[03:57:43] [INFO] [LastChance] Threat detected: Bullet
[03:57:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:43] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:57:43] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:57:43] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:57:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1265.742, 821.5072), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:43] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=1, below_threshold=5
[03:57:43] [INFO] [LastChance] Threat detected: Bullet
[03:57:43] [INFO] [LastChance] Triggering last chance effect!
[03:57:43] [INFO] [LastChance] Starting last chance effect:
[03:57:43] [INFO] [LastChance]   - Time will be frozen (except player)
[03:57:43] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:57:43] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:57:43] [INFO] [LastChance]   - Brightness: 0.60
[03:57:43] [INFO] [LastChance] Pushed bullet Bullet from distance 133.8 to 200.0
[03:57:43] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:57:43] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:57:43] [INFO] [LastChance] Skipping player node: Player
[03:57:43] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:57:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7514
[03:57:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7516
[03:57:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7519
[03:57:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7522
[03:57:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7545
[03:57:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7546
[03:57:43] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:57:43] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:57:43] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:57:44] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:57:44] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:57:44] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:57:44] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:57:44] [INFO] [LastChance] Ending last chance effect
[03:57:44] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[03:57:44] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=false
[03:57:44] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=false
[03:57:44] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=false
[03:57:44] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:57:44] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:57:44] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:57:44] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:57:44] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:57:44] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:57:44] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:57:44] [INFO] [LastChance] All process modes restored
[03:57:44] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:57:44] [ENEMY] [Enemy1] Death animation component initialized
[03:57:44] [ENEMY] [Enemy2] Death animation component initialized
[03:57:44] [ENEMY] [Enemy3] Death animation component initialized
[03:57:44] [ENEMY] [Enemy4] Death animation component initialized
[03:57:44] [ENEMY] [Enemy5] Death animation component initialized
[03:57:44] [ENEMY] [Enemy6] Death animation component initialized
[03:57:44] [ENEMY] [Enemy7] Death animation component initialized
[03:57:44] [ENEMY] [Enemy8] Death animation component initialized
[03:57:44] [ENEMY] [Enemy9] Death animation component initialized
[03:57:44] [ENEMY] [Enemy10] Death animation component initialized
[03:57:44] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:57:44] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:57:44] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:57:44] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:57:44] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:57:44] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:57:44] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:57:44] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:57:44] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[03:57:44] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:57:44] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:57:44] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:57:44] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:57:44] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:57:44] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:57:44] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:57:44] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:57:44] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:57:44] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:57:44] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:57:44] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:57:44] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:57:44] [INFO] [ScoreManager] Level started with 10 enemies
[03:57:44] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:57:44] [ENEMY] [Enemy1] Registered as sound listener
[03:57:44] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[03:57:44] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:57:44] [ENEMY] [Enemy2] Registered as sound listener
[03:57:44] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[03:57:44] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:57:44] [ENEMY] [Enemy3] Registered as sound listener
[03:57:44] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[03:57:44] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:57:44] [ENEMY] [Enemy4] Registered as sound listener
[03:57:44] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[03:57:44] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:57:44] [ENEMY] [Enemy5] Registered as sound listener
[03:57:44] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[03:57:44] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:57:44] [ENEMY] [Enemy6] Registered as sound listener
[03:57:44] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[03:57:44] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:57:44] [ENEMY] [Enemy7] Registered as sound listener
[03:57:44] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[03:57:44] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:57:44] [ENEMY] [Enemy8] Registered as sound listener
[03:57:44] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[03:57:44] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:57:44] [ENEMY] [Enemy9] Registered as sound listener
[03:57:44] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[03:57:44] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:57:44] [ENEMY] [Enemy10] Registered as sound listener
[03:57:44] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[03:57:44] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:57:44] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:57:44] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:57:44] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:57:44] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:57:44] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:57:44] [INFO] [LastChance] Found player: Player
[03:57:44] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:57:44] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:57:44] [INFO] [LastChance] Connected to player Died signal (C#)
[03:57:46] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:57:46] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:57:46] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:57:46] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:57:46] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:57:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=20
[03:57:46] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:57:46] [ENEMY] [Enemy1] Heard gunshot at (400, 550), source_type=1, intensity=0.05, distance=224
[03:57:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[03:57:46] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[03:57:46] [INFO] [LastChance] Threat detected: Bullet
[03:57:46] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:46] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:57:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(302.9919, 354.4151), source=ENEMY (Enemy1), range=1469, listeners=10
[03:57:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=1, below_threshold=3
[03:57:46] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[03:57:46] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[03:57:46] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:46] [INFO] [LastChance] Threat detected: @Area2D@7801
[03:57:46] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:46] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[03:57:46] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:57:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[03:57:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[03:57:46] [INFO] [LastChance] Threat detected: @Area2D@7803
[03:57:46] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:46] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:57:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.9844, 606.4604), shooter_id=90297358879896, bullet_pos=(681.5925, 891.5573)
[03:57:46] [INFO] [Bullet] Using shooter_position, distance=375.000152587891
[03:57:46] [INFO] [Bullet] Distance to wall: 375.000152587891 (25.5344499541858% of viewport)
[03:57:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:46] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:46] [INFO] [LastChance] Threat detected: @Area2D@7805
[03:57:46] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:46] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:57:46] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:57:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[03:57:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[03:57:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.9844, 606.4604), shooter_id=90297358879896, bullet_pos=(551.8876, 1019.35)
[03:57:46] [INFO] [Bullet] Using shooter_position, distance=428.312561035156
[03:57:46] [INFO] [Bullet] Distance to wall: 428.312561035156 (29.164589878235% of viewport)
[03:57:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.9844, 606.4604), shooter_id=90297358879896, bullet_pos=(524.1824, 997.7924)
[03:57:47] [INFO] [Bullet] Using shooter_position, distance=400.712890625
[03:57:47] [INFO] [Bullet] Distance to wall: 400.712890625 (27.2852775686887% of viewport)
[03:57:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:47] [INFO] [Bullet] Starting wall penetration at (524.1824, 997.7924)
[03:57:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.9844, 606.4604), shooter_id=90297358879896, bullet_pos=(520.2363, 994.7219)
[03:57:47] [INFO] [Bullet] Using shooter_position, distance=396.878265380859
[03:57:47] [INFO] [Bullet] Distance to wall: 396.878265380859 (27.0241708845611% of viewport)
[03:57:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(447.4069, 598.8179), shooter_id=90297358879896, bullet_pos=(705.5074, 809.7565)
[03:57:47] [INFO] [Bullet] Using shooter_position, distance=333.333129882813
[03:57:47] [INFO] [Bullet] Distance to wall: 333.333129882813 (22.6972657592984% of viewport)
[03:57:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:47] [INFO] [Bullet] Starting wall penetration at (705.5074, 809.7565)
[03:57:47] [INFO] [LastChance] Threat detected: @Area2D@7807
[03:57:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:47] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[03:57:47] [INFO] [Bullet] Exiting penetration at (493.6766, 1009.896) after traveling 25.5885429382324 pixels through wall
[03:57:47] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
[03:57:47] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[03:57:47] [INFO] [Bullet] Exiting penetration at (741.6415, 839.2878) after traveling 41.6666679382324 pixels through wall
[03:57:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:57:47] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[03:57:47] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:47] [INFO] [LastChance] Threat detected: Bullet
[03:57:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:47] [ENEMY] [Enemy2] Hit taken, health: 2/3
[03:57:47] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[03:57:47] [INFO] [ImpactEffects] spawn_blood_effect called at (403.7097, 550.4191), dir=(-0.829682, -0.558237), lethal=false
[03:57:47] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:57:47] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:57:47] [INFO] [ImpactEffects] Blood effect spawned at (403.7097, 550.4191) (scale=1)
[03:57:47] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[03:57:47] [ENEMY] [Enemy3] Hit taken, health: 3/4
[03:57:47] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:57:47] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.871381, 0.490607), lethal=false
[03:57:47] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:57:47] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:57:47] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[03:57:47] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[03:57:47] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[03:57:47] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[03:57:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(650.3031, 703.5154), shooter_id=90297644091841, bullet_pos=(515.4694, 544.6989)
[03:57:47] [INFO] [Bullet] Using shooter_position, distance=208.333419799805
[03:57:47] [INFO] [Bullet] Distance to wall: 208.333419799805 (14.1858056455476% of viewport)
[03:57:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:47] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[03:57:47] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:47] [INFO] [LastChance] Threat detected: @Area2D@7816
[03:57:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:47] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:57:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700.9717, 757.9407), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:47] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:57:47] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[03:57:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(663.9391, 692.292), shooter_id=90297644091841, bullet_pos=(520.8625, 391.2269)
[03:57:47] [INFO] [Bullet] Using shooter_position, distance=333.333312988281
[03:57:47] [INFO] [Bullet] Distance to wall: 333.333312988281 (22.6972782272865% of viewport)
[03:57:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:47] [ENEMY] [Enemy10] Hit taken, health: 1/2
[03:57:47] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[03:57:47] [INFO] [ImpactEffects] spawn_blood_effect called at (1163.675, 1601.934), dir=(0.571356, 0.820702), lethal=false
[03:57:47] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:57:47] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:57:47] [INFO] [ImpactEffects] Wall found for blood splatter at (1180.43, 1626) (dist=29 px)
[03:57:47] [INFO] [ImpactEffects] Blood effect spawned at (1163.675, 1601.934) (scale=1)
[03:57:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(678.3133, 696.5593), shooter_id=90297644091841, bullet_pos=(521.6556, 402.3323)
[03:57:47] [INFO] [Bullet] Using shooter_position, distance=333.333374023438
[03:57:47] [INFO] [Bullet] Distance to wall: 333.333374023438 (22.6972823832825% of viewport)
[03:57:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:47] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(705.895, 783.6319), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:47] [INFO] [LastChance] Threat detected: @Area2D@7827
[03:57:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(663.9391, 692.292), shooter_id=90297644091841, bullet_pos=(642.9465, 53.44571)
[03:57:47] [INFO] [Bullet] Using shooter_position, distance=639.191162109375
[03:57:47] [INFO] [Bullet] Distance to wall: 639.191162109375 (43.5237015969331% of viewport)
[03:57:47] [INFO] [Bullet] Distance-based penetration chance: 95.8890148035781%
[03:57:47] [INFO] [Bullet] Starting wall penetration at (642.9465, 53.44571)
[03:57:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17.6131973266602
[03:57:47] [INFO] [Bullet] Body exited signal received for penetrating body
[03:57:47] [INFO] [Bullet] Exiting penetration at (656.6845, 15.43552) after traveling 35.4166679382324 pixels through wall
[03:57:47] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[03:57:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(650.3031, 703.5154), shooter_id=90297644091841, bullet_pos=(1087.521, 61.60042)
[03:57:47] [INFO] [Bullet] Using shooter_position, distance=776.668823242188
[03:57:47] [INFO] [Bullet] Distance to wall: 776.668823242188 (52.8848083425938% of viewport)
[03:57:47] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[03:57:47] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[03:57:47] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(715.3948, 767.5632), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(678.3133, 696.5593), shooter_id=90297644091841, bullet_pos=(688.3285, 44.67869)
[03:57:47] [INFO] [Bullet] Using shooter_position, distance=651.957458496094
[03:57:47] [INFO] [Bullet] Distance to wall: 651.957458496094 (44.3929821930538% of viewport)
[03:57:47] [INFO] [Bullet] Distance-based penetration chance: 94.8748541081039%
[03:57:47] [INFO] [Bullet] Starting wall penetration at (688.3285, 44.67869)
[03:57:47] [INFO] [LastChance] Threat detected: @Area2D@7833
[03:57:47] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:57:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(716.7519, 765.2676), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.428825378418
[03:57:47] [INFO] [Bullet] Body exited signal received for penetrating body
[03:57:47] [INFO] [Bullet] Exiting penetration at (705.4006, 8.044678) after traveling 35.4166717529297 pixels through wall
[03:57:47] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[03:57:47] [INFO] [LastChance] Threat detected: @Area2D@7836
[03:57:47] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:57:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:47] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:57:47] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:57:47] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:57:47] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:57:47] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[03:57:47] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[03:57:47] [INFO] [PenultimateHit] Player died - ending penultimate effect
[03:57:47] [INFO] [LastChance] Player died
[03:57:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(650.3031, 703.5154), shooter_id=90297644091841, bullet_pos=(1368.82, 245.6252)
[03:57:47] [INFO] [Bullet] Using shooter_position, distance=852.015380859375
[03:57:47] [INFO] [Bullet] Distance to wall: 852.015380859375 (58.0152940008506% of viewport)
[03:57:47] [INFO] [Bullet] Distance-based penetration chance: 78.9821569990077%
[03:57:47] [INFO] [Bullet] Starting wall penetration at (1368.82, 245.6252)
[03:57:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.1847848892212
[03:57:47] [INFO] [Bullet] Body exited signal received for penetrating body
[03:57:47] [INFO] [Bullet] Exiting penetration at (1398.197, 264.8432) after traveling 30.1041698455811 pixels through wall
[03:57:47] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[03:57:47] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(708.2023, 781.8525), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:47] [INFO] [LastChance] Threat detected: Bullet
[03:57:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:47] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(716.0358, 764.9092), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:47] [INFO] [LastChance] Threat detected: Bullet
[03:57:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:57:48] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(714.1946, 778.199), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:48] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:48] [INFO] [LastChance] Threat detected: Bullet
[03:57:48] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:48] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:57:48] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:57:48] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:57:48] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:57:48] [ENEMY] [Enemy1] Death animation component initialized
[03:57:48] [ENEMY] [Enemy2] Death animation component initialized
[03:57:48] [ENEMY] [Enemy3] Death animation component initialized
[03:57:48] [ENEMY] [Enemy4] Death animation component initialized
[03:57:48] [ENEMY] [Enemy5] Death animation component initialized
[03:57:48] [ENEMY] [Enemy6] Death animation component initialized
[03:57:48] [ENEMY] [Enemy7] Death animation component initialized
[03:57:48] [ENEMY] [Enemy8] Death animation component initialized
[03:57:48] [ENEMY] [Enemy9] Death animation component initialized
[03:57:48] [ENEMY] [Enemy10] Death animation component initialized
[03:57:48] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:57:48] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:57:48] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:57:48] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:57:48] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:57:48] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:57:48] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:57:48] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:57:48] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[03:57:48] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:57:48] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:57:48] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:57:48] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:57:48] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:57:48] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:57:48] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:57:48] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:57:48] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:57:48] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:57:48] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:57:48] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:57:48] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:57:48] [INFO] [ScoreManager] Level started with 10 enemies
[03:57:48] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:57:48] [ENEMY] [Enemy1] Registered as sound listener
[03:57:48] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[03:57:48] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:57:48] [ENEMY] [Enemy2] Registered as sound listener
[03:57:48] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[03:57:48] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:57:48] [ENEMY] [Enemy3] Registered as sound listener
[03:57:48] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[03:57:48] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:57:48] [ENEMY] [Enemy4] Registered as sound listener
[03:57:48] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[03:57:48] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:57:48] [ENEMY] [Enemy5] Registered as sound listener
[03:57:48] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[03:57:48] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:57:48] [ENEMY] [Enemy6] Registered as sound listener
[03:57:48] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[03:57:48] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:57:48] [ENEMY] [Enemy7] Registered as sound listener
[03:57:48] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[03:57:48] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:57:48] [ENEMY] [Enemy8] Registered as sound listener
[03:57:48] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[03:57:48] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:57:48] [ENEMY] [Enemy9] Registered as sound listener
[03:57:48] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[03:57:48] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:57:48] [ENEMY] [Enemy10] Registered as sound listener
[03:57:48] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[03:57:48] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:57:48] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:57:48] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:57:48] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:57:48] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:57:48] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:57:48] [INFO] [LastChance] Found player: Player
[03:57:48] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:57:48] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:57:48] [INFO] [LastChance] Connected to player Died signal (C#)
[03:57:49] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:57:49] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:57:50] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:57:50] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:57:50] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:57:50] [ENEMY] [Enemy1] Memory: high confidence (0.90) - transitioning to PURSUING
[03:57:50] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:57:50] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[03:57:50] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:57:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=20
[03:57:50] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:57:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[03:57:50] [INFO] [LastChance] Threat detected: Bullet
[03:57:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:50] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:57:50] [ENEMY] [Enemy1] PURSUING corner check: angle -90.0°
[03:57:50] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:57:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[03:57:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[03:57:50] [INFO] [LastChance] Threat detected: @Area2D@8102
[03:57:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(439.9126, 605.1143), shooter_id=91521793656446, bullet_pos=(693.226, 881.6231)
[03:57:50] [INFO] [Bullet] Using shooter_position, distance=374.999755859375
[03:57:50] [INFO] [Bullet] Distance to wall: 374.999755859375 (25.5344229402117% of viewport)
[03:57:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:50] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[03:57:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[03:57:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[03:57:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(439.9126, 605.1143), shooter_id=91521793656446, bullet_pos=(563.7813, 1009.679)
[03:57:50] [INFO] [Bullet] Using shooter_position, distance=423.103210449219
[03:57:50] [INFO] [Bullet] Distance to wall: 423.103210449219 (28.8098756176874% of viewport)
[03:57:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:50] [INFO] [LastChance] Threat detected: @Area2D@8104
[03:57:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(448.8643, 597.359), shooter_id=91521793656446, bullet_pos=(746.285, 825.7576)
[03:57:50] [INFO] [Bullet] Using shooter_position, distance=375
[03:57:50] [INFO] [Bullet] Distance to wall: 375 (25.5344395641958% of viewport)
[03:57:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(439.9126, 605.1143), shooter_id=91521793656446, bullet_pos=(513.309, 968.3915)
[03:57:50] [INFO] [Bullet] Using shooter_position, distance=370.617614746094
[03:57:50] [INFO] [Bullet] Distance to wall: 370.617614746094 (25.2360348937614% of viewport)
[03:57:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:50] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:57:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(448.8643, 597.359), shooter_id=91521793656446, bullet_pos=(927.4078, 705.3383)
[03:57:50] [INFO] [Bullet] Using shooter_position, distance=490.574523925781
[03:57:50] [INFO] [Bullet] Distance to wall: 490.574523925781 (33.4041214211119% of viewport)
[03:57:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:50] [INFO] [Bullet] Starting wall penetration at (927.4078, 705.3383)
[03:57:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30.0987739562988
[03:57:50] [INFO] [Bullet] Body exited signal received for penetrating body
[03:57:50] [INFO] [Bullet] Exiting penetration at (961.0647, 682.9615) after traveling 35.4166641235352 pixels through wall
[03:57:50] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[03:57:50] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:57:50] [ENEMY] [Enemy1] PURSUING corner check: angle -70.7°
[03:57:50] [ENEMY] [Enemy4] Memory: high confidence (0.86) - transitioning to PURSUING
[03:57:50] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[03:57:50] [ENEMY] [Enemy3] Hit taken, health: 1/2
[03:57:50] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:57:50] [INFO] [ImpactEffects] spawn_blood_effect called at (696.3825, 775.6329), dir=(0.68051, -0.732739), lethal=false
[03:57:50] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:57:50] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:57:50] [INFO] [ImpactEffects] Blood effect spawned at (696.3825, 775.6329) (scale=1)
[03:57:50] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:57:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(456.0458, 588.5936), shooter_id=91521793656446, bullet_pos=(934.4441, 842.6371)
[03:57:50] [INFO] [Bullet] Using shooter_position, distance=541.666870117188
[03:57:50] [INFO] [Bullet] Distance to wall: 541.666870117188 (36.8830932238251% of viewport)
[03:57:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:57:50] [INFO] [Bullet] Starting wall penetration at (934.4441, 842.6371)
[03:57:50] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 44.9049873352051
[03:57:50] [INFO] [Bullet] Body exited signal received for penetrating body
[03:57:50] [INFO] [Bullet] Exiting penetration at (975.6599, 864.5239) after traveling 41.6666679382324 pixels through wall
[03:57:50] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:57:50] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[03:57:50] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:51] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(803.7917, 944.639), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[03:57:51] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:57:51] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(799.3518, 961.2224), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[03:57:51] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.9449, 956.9452), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[03:57:51] [INFO] [LastChance] Threat detected: @Area2D@8119
[03:57:51] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:51] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(757.3566, 960.1824), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[03:57:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:57:51] [INFO] [LastChance] Threat detected: @Area2D@8123
[03:57:51] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(783.7501, 894.9866), shooter_id=91522364082307, bullet_pos=(686.9239, 67.29738)
[03:57:51] [INFO] [Bullet] Using shooter_position, distance=833.33349609375
[03:57:51] [INFO] [Bullet] Distance to wall: 833.33349609375 (56.7432101142022% of viewport)
[03:57:51] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[03:57:51] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[03:57:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(787.4249, 889.5602), shooter_id=91522364082307, bullet_pos=(808.1647, 56.48503)
[03:57:51] [INFO] [Bullet] Using shooter_position, distance=833.333312988281
[03:57:51] [INFO] [Bullet] Distance to wall: 833.333312988281 (56.7431976462142% of viewport)
[03:57:51] [INFO] [Bullet] Distance-based penetration chance: 80.4662694127501%
[03:57:51] [INFO] [Bullet] Starting wall penetration at (808.1647, 56.48503)
[03:57:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 22.1740570068359
[03:57:51] [INFO] [Bullet] Body exited signal received for penetrating body
[03:57:51] [INFO] [Bullet] Exiting penetration at (809.3261, 9.832809) after traveling 41.6666717529297 pixels through wall
[03:57:51] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:57:51] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[03:57:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:51] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[03:57:51] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[03:57:51] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[03:57:51] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[03:57:51] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:57:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:57:52] [ENEMY] [Enemy2] PURSUING corner check: angle -69.3°
[03:57:52] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:57:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(426.1425, 788.6226), source=ENEMY (Enemy3), range=1469, listeners=10
[03:57:52] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[03:57:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:52] [INFO] [LastChance] Threat detected: @Area2D@8129
[03:57:52] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:57:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:57:52] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[03:57:52] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[03:57:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:57:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.6206, 766.8702), shooter_id=91522078869003, bullet_pos=(1998.365, 56.5976)
[03:57:53] [INFO] [Bullet] Using shooter_position, distance=1666.66723632813
[03:57:53] [INFO] [Bullet] Distance to wall: 1666.66723632813 (113.486436852389% of viewport)
[03:57:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:53] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
[03:57:53] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
[03:57:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:57:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.6206, 766.8702), shooter_id=91522078869003, bullet_pos=(2471.053, 309.8328)
[03:57:53] [INFO] [Bullet] Using shooter_position, distance=2032.48559570313
[03:57:53] [INFO] [Bullet] Distance to wall: 2032.48559570313 (138.39568162288% of viewport)
[03:57:53] [INFO] [Bullet] Distance-based penetration chance: 22.3208636754241%
[03:57:53] [INFO] [Bullet] Penetration failed (distance roll)
[03:57:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:57:53] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
[03:57:53] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
[03:57:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:57:53] [ENEMY] [Enemy2] FLANKING started: target=(720.0944, 723.625), side=right, pos=(457.2791, 577.0778)
[03:57:53] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[03:57:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:54] [ENEMY] [Enemy1] PURSUING corner check: angle 176.5°
[03:57:54] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700.8991, 955.8762), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:54] [INFO] [LastChance] Threat detected: Bullet
[03:57:54] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[03:57:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:54] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[03:57:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:57:54] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:57:54] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:57:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:57:54] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700.8991, 955.8762), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:54] [ENEMY] [Enemy2] FLANKING corner check: angle 98.1°
[03:57:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[03:57:54] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[03:57:54] [INFO] [PenultimateHit] Player died - ending penultimate effect
[03:57:54] [INFO] [LastChance] Player died
[03:57:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:57:54] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700.8991, 955.8762), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:54] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:57:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:57:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:57:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:57:54] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:57:54] [ENEMY] [Enemy1] Death animation component initialized
[03:57:54] [ENEMY] [Enemy2] Death animation component initialized
[03:57:54] [ENEMY] [Enemy3] Death animation component initialized
[03:57:54] [ENEMY] [Enemy4] Death animation component initialized
[03:57:54] [ENEMY] [Enemy5] Death animation component initialized
[03:57:54] [ENEMY] [Enemy6] Death animation component initialized
[03:57:54] [ENEMY] [Enemy7] Death animation component initialized
[03:57:54] [ENEMY] [Enemy8] Death animation component initialized
[03:57:54] [ENEMY] [Enemy9] Death animation component initialized
[03:57:54] [ENEMY] [Enemy10] Death animation component initialized
[03:57:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:57:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:57:54] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:57:54] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:57:54] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:57:54] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:57:54] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:57:54] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:57:54] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[03:57:54] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:57:54] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:57:54] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:57:54] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:57:54] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:57:54] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:57:54] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:57:54] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:57:54] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:57:54] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:57:54] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:57:54] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:57:54] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:57:54] [INFO] [ScoreManager] Level started with 10 enemies
[03:57:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:57:54] [ENEMY] [Enemy1] Registered as sound listener
[03:57:54] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[03:57:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:57:54] [ENEMY] [Enemy2] Registered as sound listener
[03:57:54] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[03:57:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:57:54] [ENEMY] [Enemy3] Registered as sound listener
[03:57:54] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[03:57:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:57:54] [ENEMY] [Enemy4] Registered as sound listener
[03:57:54] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[03:57:54] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:57:54] [ENEMY] [Enemy5] Registered as sound listener
[03:57:54] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[03:57:54] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:57:54] [ENEMY] [Enemy6] Registered as sound listener
[03:57:54] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[03:57:54] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:57:54] [ENEMY] [Enemy7] Registered as sound listener
[03:57:54] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[03:57:54] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:57:54] [ENEMY] [Enemy8] Registered as sound listener
[03:57:54] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[03:57:54] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:57:54] [ENEMY] [Enemy9] Registered as sound listener
[03:57:54] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[03:57:54] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:57:54] [ENEMY] [Enemy10] Registered as sound listener
[03:57:54] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[03:57:54] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:57:54] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:57:54] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:57:54] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:57:54] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:57:54] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:57:54] [INFO] [LastChance] Found player: Player
[03:57:54] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:57:54] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:57:54] [INFO] [LastChance] Connected to player Died signal (C#)
[03:57:55] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[03:57:56] [ENEMY] [Enemy4] Memory: high confidence (0.89) - transitioning to PURSUING
[03:57:56] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[03:57:56] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:57:56] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:57:56] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[03:57:56] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:57:56] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:57:56] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[03:57:56] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[03:57:56] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:57:56] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(565.3544, 899.5032), source=ENEMY (Enemy4), range=1469, listeners=20
[03:57:56] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:57:56] [ENEMY] [Enemy2] Heard gunshot at (565.3544, 899.5032), source_type=1, intensity=0.02, distance=387
[03:57:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:56] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[03:57:57] [INFO] [LastChance] Threat detected: Bullet
[03:57:57] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:57:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:57:57] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:57:57] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:57:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(583.808, 880.2733), source=ENEMY (Enemy4), range=1469, listeners=10
[03:57:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:57:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:57:57] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:57:57] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:57:57] [ENEMY] [Enemy1] Memory: medium confidence (0.62) - transitioning to PURSUING
[03:57:57] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:57:57] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[03:57:57] [INFO] [LastChance] Threat detected: @Area2D@8388
[03:57:57] [INFO] [LastChance] Triggering last chance effect!
[03:57:57] [INFO] [LastChance] Starting last chance effect:
[03:57:57] [INFO] [LastChance]   - Time will be frozen (except player)
[03:57:57] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:57:57] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:57:57] [INFO] [LastChance]   - Brightness: 0.60
[03:57:57] [INFO] [LastChance] Pushed bullet @Area2D@8388 from distance 117.6 to 200.0
[03:57:57] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:57:57] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:57:57] [INFO] [LastChance] Skipping player node: Player
[03:57:57] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:57:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8389
[03:57:57] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:57:57] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:57:57] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:58:03] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[03:58:03] [INFO] [LastChance] Ending last chance effect
[03:58:03] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[03:58:03] [ENEMY] [Enemy1] Search mode: PURSUING -> SEARCHING at (565.3544, 899.5032)
[03:58:03] [ENEMY] [Enemy1] SEARCHING started: center=(565.3544, 899.5032), radius=100, waypoints=5
[03:58:03] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:58:03] [ENEMY] [Enemy2] Search mode: COMBAT -> SEARCHING at (565.3544, 899.5032)
[03:58:03] [ENEMY] [Enemy2] SEARCHING started: center=(565.3544, 899.5032), radius=100, waypoints=5
[03:58:03] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[03:58:03] [ENEMY] [Enemy3] Search mode: PURSUING -> SEARCHING at (695.3174, 557.6946)
[03:58:03] [ENEMY] [Enemy3] SEARCHING started: center=(695.3174, 557.6946), radius=100, waypoints=5
[03:58:03] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:58:03] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (701.179, 550.2732)
[03:58:03] [ENEMY] [Enemy4] SEARCHING started: center=(701.179, 550.2732), radius=100, waypoints=5
[03:58:03] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:58:03] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:58:03] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:58:03] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:58:03] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:58:03] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:58:03] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:58:03] [INFO] [LastChance] All process modes restored
[03:58:03] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:58:03] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@8389
[03:58:03] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:58:03] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:58:03] [ENEMY] [Enemy2] SEARCHING corner check: angle 163.5°
[03:58:03] [ENEMY] [Enemy3] SEARCHING corner check: angle -178.4°
[03:58:03] [ENEMY] [Enemy4] SEARCHING corner check: angle -160.8°
[03:58:03] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:58:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(613.2656, 818.9313), shooter_id=93780728350700, bullet_pos=(888.5901, 31.32443)
[03:58:03] [INFO] [Bullet] Using shooter_position, distance=834.342956542969
[03:58:03] [INFO] [Bullet] Distance to wall: 834.342956542969 (56.8119461324236% of viewport)
[03:58:03] [INFO] [Bullet] Distance-based penetration chance: 80.3860628455058%
[03:58:03] [INFO] [Bullet] Penetration failed (distance roll)
[03:58:03] [ENEMY] [Enemy2] SEARCHING corner check: angle -49.8°
[03:58:03] [ENEMY] [Enemy3] SEARCHING corner check: angle -178.4°
[03:58:03] [ENEMY] [Enemy1] SEARCHING corner check: angle 153.2°
[03:58:03] [ENEMY] [Enemy4] SEARCHING corner check: angle -160.8°
[03:58:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:58:03] [ENEMY] [Enemy2] SEARCHING corner check: angle -12.5°
[03:58:03] [ENEMY] [Enemy1] SEARCHING corner check: angle 153.2°
[03:58:03] [ENEMY] [Enemy4] SEARCHING corner check: angle -160.8°
[03:58:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:04] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:58:04] [ENEMY] [Enemy1] SEARCHING corner check: angle -49.4°
[03:58:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:04] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:58:04] [ENEMY] [Enemy1] SEARCHING corner check: angle -13.0°
[03:58:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:04] [ENEMY] [Enemy3] SEARCHING corner check: angle 3.5°
[03:58:04] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:58:04] [ENEMY] [Enemy1] SEARCHING corner check: angle -8.1°
[03:58:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:05] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:58:05] [ENEMY] [Enemy4] SEARCHING corner check: angle 38.8°
[03:58:05] [ENEMY] [Enemy2] SEARCHING corner check: angle -7.3°
[03:58:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:05] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:58:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:05] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:58:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:06] [ENEMY] [Enemy3] SEARCHING corner check: angle -148.6°
[03:58:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:58:06] [ENEMY] [Enemy1] SEARCHING corner check: angle -7.5°
[03:58:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:58:06] [ENEMY] [Enemy4] SEARCHING corner check: angle -123.8°
[03:58:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:06] [ENEMY] [Enemy2] SEARCHING corner check: angle -34.1°
[03:58:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:58:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:07] [ENEMY] [Enemy2] SEARCHING corner check: angle -34.1°
[03:58:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:58:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:07] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:58:07] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:58:07] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:58:07] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:58:07] [ENEMY] [Enemy1] Death animation component initialized
[03:58:07] [ENEMY] [Enemy2] Death animation component initialized
[03:58:07] [ENEMY] [Enemy3] Death animation component initialized
[03:58:07] [ENEMY] [Enemy4] Death animation component initialized
[03:58:07] [ENEMY] [Enemy5] Death animation component initialized
[03:58:07] [ENEMY] [Enemy6] Death animation component initialized
[03:58:07] [ENEMY] [Enemy7] Death animation component initialized
[03:58:07] [ENEMY] [Enemy8] Death animation component initialized
[03:58:07] [ENEMY] [Enemy9] Death animation component initialized
[03:58:07] [ENEMY] [Enemy10] Death animation component initialized
[03:58:07] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:58:07] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:58:07] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:58:07] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:58:07] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:58:07] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:58:07] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:58:07] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:58:07] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[03:58:07] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:58:07] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:58:07] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:58:07] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:58:07] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:58:07] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:58:07] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:58:07] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:58:07] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:58:07] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:58:07] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:58:07] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:58:07] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:58:07] [INFO] [ScoreManager] Level started with 10 enemies
[03:58:07] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:58:07] [ENEMY] [Enemy1] Registered as sound listener
[03:58:07] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[03:58:07] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:58:07] [ENEMY] [Enemy2] Registered as sound listener
[03:58:07] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[03:58:07] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:58:07] [ENEMY] [Enemy3] Registered as sound listener
[03:58:07] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[03:58:07] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:58:07] [ENEMY] [Enemy4] Registered as sound listener
[03:58:07] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[03:58:07] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:58:07] [ENEMY] [Enemy5] Registered as sound listener
[03:58:07] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[03:58:07] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:58:07] [ENEMY] [Enemy6] Registered as sound listener
[03:58:07] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[03:58:07] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:58:07] [ENEMY] [Enemy7] Registered as sound listener
[03:58:07] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[03:58:07] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:58:07] [ENEMY] [Enemy8] Registered as sound listener
[03:58:07] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[03:58:07] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:58:07] [ENEMY] [Enemy9] Registered as sound listener
[03:58:07] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[03:58:07] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:58:07] [ENEMY] [Enemy10] Registered as sound listener
[03:58:07] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[03:58:07] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:58:07] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:58:07] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:58:07] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:58:07] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:58:07] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:58:07] [INFO] [LastChance] Found player: Player
[03:58:07] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:58:07] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:58:07] [INFO] [LastChance] Connected to player Died signal (C#)
[03:58:09] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:58:09] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:58:09] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:58:09] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:58:09] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:58:09] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[03:58:09] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:58:09] [ENEMY] [Enemy2] Memory: high confidence (0.90) - transitioning to PURSUING
[03:58:09] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[03:58:09] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[03:58:09] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[03:58:09] [ENEMY] [Enemy2] PURSUING corner check: angle 151.0°
[03:58:09] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[03:58:09] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:58:09] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[03:58:09] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[03:58:10] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:58:10] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[03:58:10] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:58:10] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:58:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(565.3544, 899.5032), source=ENEMY (Enemy4), range=1469, listeners=20
[03:58:10] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:58:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:58:10] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[03:58:10] [INFO] [LastChance] Threat detected: Bullet
[03:58:10] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:58:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:58:10] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:58:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(584.1876, 880.6299), source=ENEMY (Enemy4), range=1469, listeners=10
[03:58:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:58:10] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:58:10] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:58:10] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:58:10] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:58:10] [INFO] [LastChance] Threat detected: @Area2D@8642
[03:58:10] [INFO] [LastChance] Triggering last chance effect!
[03:58:10] [INFO] [LastChance] Starting last chance effect:
[03:58:10] [INFO] [LastChance]   - Time will be frozen (except player)
[03:58:10] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:58:10] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:58:10] [INFO] [LastChance]   - Brightness: 0.60
[03:58:10] [INFO] [LastChance] Pushed bullet @Area2D@8642 from distance 119.0 to 200.0
[03:58:10] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:58:10] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:58:10] [INFO] [LastChance] Skipping player node: Player
[03:58:10] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:58:10] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8643
[03:58:10] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:58:10] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:58:10] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:58:14] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:58:14] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:58:14] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:58:14] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:58:14] [INFO] [LastChance] Ending last chance effect
[03:58:14] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[03:58:14] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=false
[03:58:14] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=false
[03:58:14] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=false
[03:58:14] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:58:14] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:58:14] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:58:14] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:58:14] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:58:14] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:58:14] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:58:14] [INFO] [LastChance] All process modes restored
[03:58:14] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:58:14] [ENEMY] [Enemy1] Death animation component initialized
[03:58:14] [ENEMY] [Enemy2] Death animation component initialized
[03:58:14] [ENEMY] [Enemy3] Death animation component initialized
[03:58:14] [ENEMY] [Enemy4] Death animation component initialized
[03:58:14] [ENEMY] [Enemy5] Death animation component initialized
[03:58:14] [ENEMY] [Enemy6] Death animation component initialized
[03:58:14] [ENEMY] [Enemy7] Death animation component initialized
[03:58:14] [ENEMY] [Enemy8] Death animation component initialized
[03:58:14] [ENEMY] [Enemy9] Death animation component initialized
[03:58:14] [ENEMY] [Enemy10] Death animation component initialized
[03:58:14] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:58:14] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:58:14] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:58:14] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:58:14] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:58:14] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:58:14] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[03:58:14] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:58:14] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[03:58:14] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:58:14] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:58:14] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:58:14] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:58:14] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:58:14] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:58:14] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:58:14] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:58:14] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:58:14] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:58:14] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:58:14] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:58:14] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:58:14] [INFO] [ScoreManager] Level started with 10 enemies
[03:58:14] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:58:14] [ENEMY] [Enemy1] Registered as sound listener
[03:58:14] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[03:58:14] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:58:14] [ENEMY] [Enemy2] Registered as sound listener
[03:58:14] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[03:58:14] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:58:14] [ENEMY] [Enemy3] Registered as sound listener
[03:58:14] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[03:58:14] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:58:14] [ENEMY] [Enemy4] Registered as sound listener
[03:58:14] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[03:58:14] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[03:58:14] [ENEMY] [Enemy5] Registered as sound listener
[03:58:14] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[03:58:14] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:58:14] [ENEMY] [Enemy6] Registered as sound listener
[03:58:14] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[03:58:14] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:58:14] [ENEMY] [Enemy7] Registered as sound listener
[03:58:14] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[03:58:14] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:58:14] [ENEMY] [Enemy8] Registered as sound listener
[03:58:14] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[03:58:14] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:58:14] [ENEMY] [Enemy9] Registered as sound listener
[03:58:14] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[03:58:14] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:58:14] [ENEMY] [Enemy10] Registered as sound listener
[03:58:14] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[03:58:14] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:58:14] [INFO] [Player] Detected weapon: Rifle (default pose)
[03:58:14] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:58:14] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:58:14] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:58:14] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:58:14] [INFO] [LastChance] Found player: Player
[03:58:14] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:58:14] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:58:14] [INFO] [LastChance] Connected to player Died signal (C#)
[03:58:15] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:58:15] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:58:16] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:58:16] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:58:16] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[03:58:16] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[03:58:16] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[03:58:16] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:58:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
[03:58:16] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:58:16] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[03:58:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:58:16] [INFO] [LastChance] Threat detected: Bullet
[03:58:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:58:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:58:16] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[03:58:16] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:58:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:58:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:58:16] [INFO] [LastChance] Threat detected: Bullet
[03:58:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:58:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:58:16] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:58:16] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:58:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:58:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:58:16] [INFO] [LastChance] Threat detected: @Area2D@8897
[03:58:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:58:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:58:16] [ENEMY] [Enemy2] Hit taken, health: 2/3
[03:58:16] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[03:58:16] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(-0.832875, -0.553461), lethal=false
[03:58:16] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:58:16] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:58:16] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[03:58:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(649.7144, 704.153), shooter_id=97337498142809, bullet_pos=(512.8662, 547.0689)
[03:58:16] [INFO] [Bullet] Using shooter_position, distance=208.333419799805
[03:58:16] [INFO] [Bullet] Distance to wall: 208.333419799805 (14.1858056455476% of viewport)
[03:58:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:58:16] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:58:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:58:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:58:16] [INFO] [LastChance] Threat detected: Bullet
[03:58:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:58:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:58:16] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[03:58:16] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[03:58:16] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[03:58:16] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:58:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(678.1131, 914.0658), source=ENEMY (Enemy4), range=1469, listeners=10
[03:58:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:58:16] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[03:58:16] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:58:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:58:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:58:16] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:58:16] [INFO] [LastChance] Threat detected: @Area2D@8901
[03:58:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:58:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:58:16] [INFO] [LastChance] Threat detected: Bullet
[03:58:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:58:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:58:16] [ENEMY] [Enemy1] Memory: medium confidence (0.58) - transitioning to PURSUING
[03:58:16] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:58:16] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[03:58:16] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:58:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(660.7271, 904.7975), source=ENEMY (Enemy4), range=1469, listeners=10
[03:58:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:58:16] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:58:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[03:58:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:58:16] [INFO] [LastChance] Threat detected: @Area2D@8905
[03:58:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:58:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:58:16] [ENEMY] [Enemy3] Hit taken, health: 2/3
[03:58:16] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:58:16] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.057638, -0.998338), lethal=false
[03:58:16] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:58:16] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:58:16] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[03:58:16] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[03:58:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(649.7144, 704.153), shooter_id=97337498142809, bullet_pos=(872.9324, 58.29228)
[03:58:16] [INFO] [Bullet] Using shooter_position, distance=683.346374511719
[03:58:16] [INFO] [Bullet] Distance to wall: 683.346374511719 (46.5303112036847% of viewport)
[03:58:16] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[03:58:16] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:58:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(649.7144, 704.153), shooter_id=97337498142809, bullet_pos=(982.4193, 208.1899)
[03:58:16] [INFO] [Bullet] Using shooter_position, distance=597.220092773438
[03:58:16] [INFO] [Bullet] Distance to wall: 597.220092773438 (40.665814307858% of viewport)
[03:58:16] [INFO] [Bullet] Distance-based penetration chance: 99.2232166408324%
[03:58:16] [INFO] [Bullet] Starting wall penetration at (982.4193, 208.1899)
[03:58:16] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[03:58:16] [INFO] [Bullet] Exiting penetration at (1003.125, 236.5376) after traveling 30.1041698455811 pixels through wall
[03:58:16] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[03:58:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(676.4874, 686.1426), shooter_id=97337498142809, bullet_pos=(519.3644, 38.25628)
[03:58:17] [INFO] [Bullet] Using shooter_position, distance=666.666625976563
[03:58:17] [INFO] [Bullet] Distance to wall: 666.666625976563 (45.3945564545729% of viewport)
[03:58:17] [INFO] [Bullet] Distance-based penetration chance: 93.7063508029982%
[03:58:17] [INFO] [Bullet] Penetration failed (distance roll)
[03:58:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(665.0043, 847.2919), shooter_id=97337783354939, bullet_pos=(602.548, 58.09259)
[03:58:17] [INFO] [Bullet] Using shooter_position, distance=791.666809082031
[03:58:17] [INFO] [Bullet] Distance to wall: 791.666809082031 (53.9060487772929% of viewport)
[03:58:17] [INFO] [Bullet] Distance-based penetration chance: 83.7762764264916%
[03:58:17] [INFO] [Bullet] Starting wall penetration at (602.548, 58.09259)
[03:58:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.4925022125244
[03:58:17] [INFO] [Bullet] Body exited signal received for penetrating body
[03:58:17] [INFO] [Bullet] Exiting penetration at (598.8664, 11.57137) after traveling 41.666675567627 pixels through wall
[03:58:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:58:17] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:58:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(653.5221, 835.4733), source=ENEMY (Enemy4), range=1469, listeners=10
[03:58:17] [ENEMY] [Enemy3] Heard gunshot at (653.5221, 835.4733), source_type=1, intensity=0.36, distance=83
[03:58:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:58:17] [ENEMY] [Enemy3] Hit taken, health: 1/3
[03:58:17] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[03:58:17] [INFO] [ImpactEffects] spawn_blood_effect called at (704.4415, 769.9823), dir=(0.246306, -0.969192), lethal=false
[03:58:17] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:58:17] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:58:17] [INFO] [ImpactEffects] Blood effect spawned at (704.4415, 769.9823) (scale=1)
[03:58:17] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:58:17] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:58:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(687.9108, 683.0339), shooter_id=97337498142809, bullet_pos=(648.1092, 59.30255)
[03:58:17] [INFO] [Bullet] Using shooter_position, distance=625
[03:58:17] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
[03:58:17] [INFO] [Bullet] Distance-based penetration chance: 97.0163675140638%
[03:58:17] [INFO] [Bullet] Starting wall penetration at (648.1092, 59.30255)
[03:58:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19.3085861206055
[03:58:17] [INFO] [Bullet] Body exited signal received for penetrating body
[03:58:17] [INFO] [Bullet] Exiting penetration at (645.1373, 12.73061) after traveling 41.6666679382324 pixels through wall
[03:58:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:58:17] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[03:58:17] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:58:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(657.0811, 799.2307), source=ENEMY (Enemy4), range=1469, listeners=10
[03:58:17] [ENEMY] [Enemy3] Heard gunshot at (657.0811, 799.2307), source_type=1, intensity=1.00, distance=48
[03:58:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:58:17] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:58:17] [INFO] [LastChance] Threat detected: Bullet
[03:58:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:58:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:58:17] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:58:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(669.4459, 764.5863), source=ENEMY (Enemy4), range=1469, listeners=10
[03:58:17] [ENEMY] [Enemy3] Heard gunshot at (669.4459, 764.5863), source_type=1, intensity=1.00, distance=27
[03:58:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:58:17] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:58:17] [INFO] [LastChance] Threat detected: @Area2D@8927
[03:58:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:58:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:58:17] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:58:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(680.1558, 780.336), source=ENEMY (Enemy3), range=1469, listeners=10
[03:58:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:58:17] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:58:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(687.9444, 732.1838), source=ENEMY (Enemy4), range=1469, listeners=10
[03:58:17] [ENEMY] [Enemy3] Heard gunshot at (687.9444, 732.1838), source_type=1, intensity=1.00, distance=49
[03:58:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:58:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:58:17] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:58:17] [INFO] [LastChance] Threat detected: @Area2D@8935
[03:58:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:58:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:58:17] [INFO] [LastChance] Threat detected: @Area2D@8933
[03:58:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:58:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:58:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(687.856, 738.5388), shooter_id=97337783354939, bullet_pos=(948.1342, 35.15017)
[03:58:17] [INFO] [Bullet] Using shooter_position, distance=750.000244140625
[03:58:17] [INFO] [Bullet] Distance to wall: 750.000244140625 (51.0688957523757% of viewport)
[03:58:17] [ENEMY] [Enemy1] PURSUING corner check: angle 153.7°
[03:58:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(666.9583, 779.2097), source=ENEMY (Enemy3), range=1469, listeners=10
[03:58:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:58:17] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[03:58:17] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[03:58:17] [ENEMY] [Enemy4] Hit taken, health: 3/4
[03:58:17] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[03:58:17] [INFO] [ImpactEffects] spawn_blood_effect called at (706.0259, 705.7894), dir=(0.348851, -0.937178), lethal=false
[03:58:17] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:58:17] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:58:17] [INFO] [ImpactEffects] Blood effect spawned at (706.0259, 705.7894) (scale=1)
[03:58:17] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[03:58:17] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:58:17] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:58:17] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:58:17] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:58:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(687.856, 738.5388), shooter_id=97337783354939, bullet_pos=(1004.363, 208.3341)
[03:58:17] [INFO] [Bullet] Using shooter_position, distance=617.489807128906
[03:58:17] [INFO] [Bullet] Distance to wall: 617.489807128906 (42.0460164310399% of viewport)
[03:58:17] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[03:58:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(687.856, 738.5388), shooter_id=97337783354939, bullet_pos=(1085.632, 41.44525)
[03:58:17] [INFO] [Bullet] Using shooter_position, distance=802.599243164063
[03:58:17] [INFO] [Bullet] Distance to wall: 802.599243164063 (54.6504583169121% of viewport)
[03:58:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:17] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:58:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:18] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:58:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(647.048, 956.3103), source=ENEMY (Enemy3), range=1469, listeners=10
[03:58:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:58:18] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:58:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(730.5764, 781.0085), source=ENEMY (Enemy4), range=1469, listeners=10
[03:58:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:58:18] [INFO] [LastChance] Threat detected: @Area2D@8968
[03:58:18] [INFO] [LastChance] Triggering last chance effect!
[03:58:18] [INFO] [LastChance] Starting last chance effect:
[03:58:18] [INFO] [LastChance]   - Time will be frozen (except player)
[03:58:18] [INFO] [LastChance]   - Duration: 6.0 real seconds
[03:58:18] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:58:18] [INFO] [LastChance]   - Brightness: 0.60
[03:58:18] [INFO] [LastChance] Pushed bullet @Area2D@8968 from distance 133.7 to 200.0
[03:58:18] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:58:18] [INFO] [LastChance] Set player Player and all 19 children to PROCESS_MODE_ALWAYS
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:58:18] [INFO] [LastChance] Skipping player node: Player
[03:58:18] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:58:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8896
[03:58:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8898
[03:58:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8899
[03:58:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8900
[03:58:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8902
[03:58:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8904
[03:58:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8906
[03:58:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8915
[03:58:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8923
[03:58:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8928
[03:58:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8934
[03:58:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8936
[03:58:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8967
[03:58:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8969
[03:58:18] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:58:18] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:58:18] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:58:24] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[03:58:24] [INFO] [LastChance] Ending last chance effect
[03:58:24] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[03:58:24] [ENEMY] [Enemy1] Search mode: PURSUING -> SEARCHING at (854.9869, 499.1769)
[03:58:24] [ENEMY] [Enemy1] SEARCHING started: center=(854.9869, 499.1769), radius=100, waypoints=5
[03:58:24] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[03:58:24] [ENEMY] [Enemy2] Search mode: SUPPRESSED -> SEARCHING at (854.9869, 499.1769)
[03:58:24] [ENEMY] [Enemy2] SEARCHING started: center=(854.9869, 499.1769), radius=100, waypoints=5
[03:58:24] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[03:58:24] [ENEMY] [Enemy3] Search mode: RETREATING -> SEARCHING at (707.9315, 499.1769)
[03:58:24] [ENEMY] [Enemy3] SEARCHING started: center=(707.9315, 499.1769), radius=100, waypoints=5
[03:58:24] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[03:58:24] [ENEMY] [Enemy4] Search mode: RETREATING -> SEARCHING at (696.9315, 499.1769)
[03:58:24] [ENEMY] [Enemy4] SEARCHING started: center=(696.9315, 499.1769), radius=100, waypoints=5
[03:58:24] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[03:58:24] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[03:58:24] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[03:58:24] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[03:58:24] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[03:58:24] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[03:58:24] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[03:58:24] [INFO] [LastChance] All process modes restored
[03:58:24] [INFO] [LastChance] Unfroze bullet casing: Casing
[03:58:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@8896
[03:58:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@8898
[03:58:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@8899
[03:58:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@8900
[03:58:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@8902
[03:58:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@8904
[03:58:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@8906
[03:58:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@8915
[03:58:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@8923
[03:58:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@8928
[03:58:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@8934
[03:58:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@8936
[03:58:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@8967
[03:58:24] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@8969
[03:58:24] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:58:24] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[03:58:24] [ENEMY] [Enemy2] SEARCHING corner check: angle 134.2°
[03:58:24] [ENEMY] [Enemy3] SEARCHING corner check: angle -12.8°
[03:58:24] [ENEMY] [Enemy4] SEARCHING corner check: angle 174.1°
[03:58:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[03:58:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:24] [ENEMY] [Enemy1] SEARCHING corner check: angle 169.8°
[03:58:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(717.3873, 714.2504), shooter_id=97337783354939, bullet_pos=(666.8189, 32.28067)
[03:58:24] [INFO] [Bullet] Using shooter_position, distance=683.841918945313
[03:58:24] [INFO] [Bullet] Distance to wall: 683.841918945313 (46.564053735394% of viewport)
[03:58:24] [INFO] [Bullet] Distance-based penetration chance: 92.341937308707%
[03:58:24] [INFO] [Bullet] Starting wall penetration at (666.8189, 32.28067)
[03:58:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.3850936889648
[03:58:24] [INFO] [Bullet] Body exited signal received for penetrating body
[03:58:24] [INFO] [Bullet] Exiting penetration at (663.0814, -14.23608) after traveling 41.6666679382324 pixels through wall
[03:58:24] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:58:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(664.4818, 890.5329), shooter_id=97337498142809, bullet_pos=(784.2401, 65.8494)
[03:58:24] [INFO] [Bullet] Using shooter_position, distance=833.333618164063
[03:58:24] [INFO] [Bullet] Distance to wall: 833.333618164063 (56.7432184261943% of viewport)
[03:58:24] [INFO] [Bullet] Distance-based penetration chance: 80.46624516944%
[03:58:24] [INFO] [Bullet] Starting wall penetration at (784.2401, 65.8494)
[03:58:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.4622316360474
[03:58:24] [INFO] [Bullet] Body exited signal received for penetrating body
[03:58:24] [INFO] [Bullet] Exiting penetration at (790.9466, 19.66713) after traveling 41.6666679382324 pixels through wall
[03:58:24] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[03:58:24] [ENEMY] [Enemy2] SEARCHING corner check: angle -88.2°
[03:58:24] [ENEMY] [Enemy4] SEARCHING corner check: angle 174.1°
[03:58:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[03:58:24] [ENEMY] [Enemy3] SEARCHING corner check: angle 0.2°
[03:58:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:24] [ENEMY] [Enemy1] SEARCHING corner check: angle 68.1°
[03:58:24] [ENEMY] [Enemy2] SEARCHING corner check: angle 68.1°
[03:58:24] [ENEMY] [Enemy4] SEARCHING corner check: angle 174.1°
[03:58:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[03:58:25] [ENEMY] [Enemy3] SEARCHING corner check: angle -169.7°
[03:58:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:25] [ENEMY] [Enemy1] SEARCHING corner check: angle -111.9°
[03:58:25] [ENEMY] [Enemy2] SEARCHING corner check: angle -111.9°
[03:58:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:58:25] [ENEMY] [Enemy3] SEARCHING corner check: angle -169.7°
[03:58:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:25] [ENEMY] [Enemy1] SEARCHING corner check: angle -111.9°
[03:58:25] [ENEMY] [Enemy2] SEARCHING corner check: angle -111.9°
[03:58:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:58:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[03:58:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:58:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:58:26] [ENEMY] [Enemy3] SEARCHING corner check: angle 22.1°
[03:58:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:26] [ENEMY] [Enemy1] SEARCHING corner check: angle 99.7°
[03:58:26] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:58:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(955.2343, 441.3534), source=ENEMY (Enemy1), range=1469, listeners=10
[03:58:26] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:58:26] [ENEMY] [Enemy1] SEARCHING: Player spotted! Transitioning to COMBAT
[03:58:26] [ENEMY] [Enemy1] State: SEARCHING -> COMBAT
[03:58:26] [INFO] [LastChance] Threat detected: Bullet
[03:58:26] [INFO] [LastChance] Effect already used this life
[03:58:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:58:26] [ENEMY] [Enemy2] SEARCHING corner check: angle 99.8°
[03:58:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[03:58:26] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[03:58:26] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[03:58:26] [INFO] [PenultimateHit] Player died - ending penultimate effect
[03:58:26] [INFO] [LastChance] Player died
[03:58:27] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:58:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(947.6449, 440.053), source=ENEMY (Enemy1), range=1469, listeners=10
[03:58:27] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:58:27] [INFO] [LastChance] Threat detected: Bullet
[03:58:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:58:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:58:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:58:27] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[03:58:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(947.6449, 440.053), source=ENEMY (Enemy1), range=1469, listeners=10
[03:58:27] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[03:58:27] [INFO] ------------------------------------------------------------
[03:58:27] [INFO] GAME LOG ENDED: 2026-01-25T03:58:27
[03:58:27] [INFO] ============================================================
