[20:46:20] [INFO] ============================================================
[20:46:20] [INFO] GAME LOG STARTED
[20:46:20] [INFO] ============================================================
[20:46:20] [INFO] Timestamp: 2026-01-24T20:46:20
[20:46:20] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260124_204620.txt
[20:46:20] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
[20:46:20] [INFO] OS: Windows
[20:46:20] [INFO] Debug build: false
[20:46:20] [INFO] Engine version: 4.3-stable (official)
[20:46:20] [INFO] Project: Godot Top-Down Template
[20:46:20] [INFO] ------------------------------------------------------------
[20:46:20] [INFO] [GameManager] GameManager ready
[20:46:20] [INFO] [ScoreManager] ScoreManager ready
[20:46:20] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[20:46:20] [INFO] [ImpactEffects] Scenes loaded: DustEffect, BloodEffect, SparksEffect, BloodDecal
[20:46:20] [INFO] [ImpactEffects] ImpactEffectsManager ready - FULL VERSION with blood effects enabled
[20:46:20] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:46:20] [INFO] [PenultimateHit] Saturation shader loaded successfully
[20:46:20] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[20:46:20] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[20:46:20] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[20:46:20] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[20:46:20] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[20:46:20] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:46:20] [INFO] [LastChance] Last chance shader loaded successfully
[20:46:20] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[20:46:20] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[20:46:20] [INFO] [LastChance]   Sepia intensity: 0.70
[20:46:20] [INFO] [LastChance]   Brightness: 0.60
[20:46:20] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[20:46:20] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[20:46:20] [ENEMY] [Enemy1] Death animation component initialized
[20:46:20] [ENEMY] [Enemy2] Death animation component initialized
[20:46:20] [ENEMY] [Enemy3] Death animation component initialized
[20:46:20] [ENEMY] [Enemy4] Death animation component initialized
[20:46:20] [ENEMY] [Enemy5] Death animation component initialized
[20:46:20] [ENEMY] [Enemy6] Death animation component initialized
[20:46:20] [ENEMY] [Enemy7] Death animation component initialized
[20:46:20] [ENEMY] [Enemy8] Death animation component initialized
[20:46:20] [ENEMY] [Enemy9] Death animation component initialized
[20:46:20] [ENEMY] [Enemy10] Death animation component initialized
[20:46:20] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:46:20] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:46:20] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:46:20] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:46:20] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:46:20] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:46:20] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:46:20] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:46:20] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:46:20] [INFO] [ScoreManager] Level started with 10 enemies
[20:46:20] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[20:46:20] [ENEMY] [Enemy1] Registered as sound listener
[20:46:20] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:46:20] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[20:46:20] [ENEMY] [Enemy2] Registered as sound listener
[20:46:20] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:46:20] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[20:46:20] [ENEMY] [Enemy3] Registered as sound listener
[20:46:20] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:46:20] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[20:46:20] [ENEMY] [Enemy4] Registered as sound listener
[20:46:20] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:46:20] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[20:46:20] [ENEMY] [Enemy5] Registered as sound listener
[20:46:20] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:46:20] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[20:46:20] [ENEMY] [Enemy6] Registered as sound listener
[20:46:20] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:46:20] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[20:46:20] [ENEMY] [Enemy7] Registered as sound listener
[20:46:20] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 4, behavior: PATROL, player_found: yes
[20:46:20] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[20:46:20] [ENEMY] [Enemy8] Registered as sound listener
[20:46:20] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:46:20] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[20:46:20] [ENEMY] [Enemy9] Registered as sound listener
[20:46:20] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:46:20] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[20:46:20] [ENEMY] [Enemy10] Registered as sound listener
[20:46:20] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:46:20] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:46:20] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:46:20] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:46:20] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:46:20] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:46:20] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:46:20] [INFO] [LastChance] Found player: Player
[20:46:20] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:46:20] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:46:20] [INFO] [LastChance] Connected to player Died signal (C#)
[20:46:33] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:46:34] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:46:35] [ENEMY] [Enemy4] Memory: medium confidence (0.72) - transitioning to PURSUING
[20:46:35] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:46:36] [ENEMY] [Enemy3] Memory: medium confidence (0.60) - transitioning to PURSUING
[20:46:36] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[20:46:36] [INFO] [Player.Debug] Debug mode toggled: ON
[20:46:36] [INFO] [GameManager] Debug mode toggled: ON
[20:46:39] [INFO] [PauseMenu] Armory button pressed
[20:46:39] [INFO] [PauseMenu] Creating new armory menu instance
[20:46:39] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[20:46:39] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[20:46:39] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[20:46:39] [INFO] [PauseMenu] back_pressed signal exists on instance
[20:46:39] [INFO] [PauseMenu] back_pressed signal connected
[20:46:39] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[20:46:39] [INFO] [PauseMenu] _populate_weapon_grid method exists
[20:46:42] [ENEMY] [Enemy10] FLANKING started: target=(426.3862, 1124.822), side=right, pos=(952.7103, 1431.131)
[20:46:42] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:46:43] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:46:43] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:46:43] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:46:43] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:46:43] [ENEMY] [Enemy1] Death animation component initialized
[20:46:43] [ENEMY] [Enemy2] Death animation component initialized
[20:46:43] [ENEMY] [Enemy3] Death animation component initialized
[20:46:43] [ENEMY] [Enemy4] Death animation component initialized
[20:46:43] [ENEMY] [Enemy5] Death animation component initialized
[20:46:43] [ENEMY] [Enemy6] Death animation component initialized
[20:46:43] [ENEMY] [Enemy7] Death animation component initialized
[20:46:43] [ENEMY] [Enemy8] Death animation component initialized
[20:46:43] [ENEMY] [Enemy9] Death animation component initialized
[20:46:43] [ENEMY] [Enemy10] Death animation component initialized
[20:46:43] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:46:43] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:46:43] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:46:43] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:46:43] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:46:43] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:46:43] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:46:43] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:46:43] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:46:43] [INFO] [ScoreManager] Level started with 10 enemies
[20:46:43] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:46:43] [ENEMY] [Enemy1] Registered as sound listener
[20:46:43] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:46:43] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:46:43] [ENEMY] [Enemy2] Registered as sound listener
[20:46:43] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:46:43] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:46:43] [ENEMY] [Enemy3] Registered as sound listener
[20:46:43] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:46:43] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:46:43] [ENEMY] [Enemy4] Registered as sound listener
[20:46:43] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:46:43] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:46:43] [ENEMY] [Enemy5] Registered as sound listener
[20:46:43] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:46:43] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:46:43] [ENEMY] [Enemy6] Registered as sound listener
[20:46:43] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:46:43] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:46:43] [ENEMY] [Enemy7] Registered as sound listener
[20:46:43] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:46:43] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:46:43] [ENEMY] [Enemy8] Registered as sound listener
[20:46:43] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:46:43] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:46:43] [ENEMY] [Enemy9] Registered as sound listener
[20:46:43] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:46:43] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:46:43] [ENEMY] [Enemy10] Registered as sound listener
[20:46:43] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:46:43] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:46:43] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:46:43] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:46:43] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:46:43] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:46:43] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:46:43] [INFO] [LastChance] Found player: Player
[20:46:43] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:46:43] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:46:43] [INFO] [LastChance] Connected to player Died signal (C#)
[20:46:43] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:46:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.004, 1519.036), source=ENEMY (Enemy10), range=1469, listeners=20
[20:46:44] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:46:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:46:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.385, 1499.191), source=ENEMY (Enemy10), range=1469, listeners=10
[20:46:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:46:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.598, 1478.078), source=ENEMY (Enemy10), range=1469, listeners=10
[20:46:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:46:44] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:46:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1051.686, 1455.743), source=ENEMY (Enemy10), range=1469, listeners=10
[20:46:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:46:44] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:46:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=986382863568, bullet_pos=(47.54776, 866.3744)
[20:46:44] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[20:46:44] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[20:46:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.642, 1468.417), shooter_id=986382863568, bullet_pos=(43.40149, 802.4432)
[20:46:44] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
[20:46:44] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
[20:46:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=986382863568, bullet_pos=(327.9242, 704.5007)
[20:46:44] [INFO] [Bullet] Using shooter_position, distance=1089.45947265625
[20:46:44] [INFO] [Bullet] Distance to wall: 1089.45947265625 (74.1832988324843% of viewport)
[20:46:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.642, 1468.417), shooter_id=986382863568, bullet_pos=(240.5857, 710.6573)
[20:46:44] [INFO] [Bullet] Using shooter_position, distance=1109.96032714844
[20:46:44] [INFO] [Bullet] Distance to wall: 1109.96032714844 (75.5792397126047% of viewport)
[20:46:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.149, 1444.873), shooter_id=986382863568, bullet_pos=(41.66475, 738.6735)
[20:46:44] [INFO] [Bullet] Using shooter_position, distance=1208.33276367188
[20:46:44] [INFO] [Bullet] Distance to wall: 1208.33276367188 (82.2775998064458% of viewport)
[20:46:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.149, 1444.873), shooter_id=986382863568, bullet_pos=(105.2313, 697.3215)
[20:46:44] [INFO] [Bullet] Using shooter_position, distance=1183.03515625
[20:46:44] [INFO] [Bullet] Distance to wall: 1183.03515625 (80.5550391988921% of viewport)
[20:46:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=986382863568, bullet_pos=(513.9329, 813.7704)
[20:46:44] [INFO] [Bullet] Using shooter_position, distance=883.787963867188
[20:46:44] [INFO] [Bullet] Distance to wall: 883.787963867188 (60.1787476024809% of viewport)
[20:46:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.149, 1444.873), shooter_id=986382863568, bullet_pos=(49.78282, 663.0054)
[20:46:45] [INFO] [Bullet] Using shooter_position, distance=1247.72351074219
[20:46:45] [INFO] [Bullet] Distance to wall: 1247.72351074219 (84.9597882076602% of viewport)
[20:46:45] [INFO] [Bullet] Distance-based penetration chance: 47.5469137577298%
[20:46:45] [INFO] [Bullet] Starting wall penetration at (49.78282, 663.0054)
[20:46:45] [INFO] [LastChance] Threat detected: @Area2D@574
[20:46:45] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:46:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:46:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 14.1912908554077
[20:46:45] [INFO] [Bullet] Body exited signal received for penetrating body
[20:46:45] [INFO] [Bullet] Exiting penetration at (19.93274, 644.5317) after traveling 30.1041717529297 pixels through wall
[20:46:45] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[20:46:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.6502, 1420.212), shooter_id=986382863568, bullet_pos=(42.2292, 675.3175)
[20:46:45] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
[20:46:45] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
[20:46:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.642, 1468.417), shooter_id=986382863568, bullet_pos=(508.6431, 858.3287)
[20:46:45] [INFO] [Bullet] Using shooter_position, distance=816.734558105469
[20:46:45] [INFO] [Bullet] Distance to wall: 816.734558105469 (55.6129579038246% of viewport)
[20:46:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:46:45] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:46:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.6502, 1420.212), shooter_id=986382863568, bullet_pos=(335.9588, 468.6205)
[20:46:45] [INFO] [Bullet] Using shooter_position, distance=1156.75573730469
[20:46:45] [INFO] [Bullet] Distance to wall: 1156.75573730469 (78.7656252393154% of viewport)
[20:46:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.6502, 1420.212), shooter_id=986382863568, bullet_pos=(502.921, 549.7393)
[20:46:45] [INFO] [Bullet] Using shooter_position, distance=999.268432617188
[20:46:45] [INFO] [Bullet] Distance to wall: 999.268432617188 (68.0420250695259% of viewport)
[20:46:46] [ENEMY] [Enemy10] FLANKING started: target=(677.4199, 836.5573), side=left, pos=(1022.653, 1432.276)
[20:46:46] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:46:46] [ENEMY] [Enemy4] Memory: medium confidence (0.75) - transitioning to PURSUING
[20:46:46] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:46:46] [ENEMY] [Enemy3] Memory: medium confidence (0.70) - transitioning to PURSUING
[20:46:46] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[20:46:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(511.6527, 758.7261), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:46:47] [ENEMY] [Enemy1] Heard gunshot at (511.6527, 758.7261), source_type=0, intensity=0.01, distance=460
[20:46:47] [ENEMY] [Enemy2] Heard gunshot at (511.6527, 758.7261), source_type=0, intensity=0.04, distance=237
[20:46:47] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=3, self=0, below_threshold=2
[20:46:47] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:46:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(511.65268, 758.72614), shooter_id=987204947201, bullet_pos=(521.16077, 824.7113)
[20:46:47] [INFO] [Bullet] Using shooter_position, distance=66,66668
[20:46:47] [INFO] [Bullet] Distance to wall: 66,66668 (4,539457% of viewport)
[20:46:47] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:46:47] [INFO] [Bullet] Starting wall penetration at (521.16077, 824.7113)
[20:46:47] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:46:47] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:46:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26,759575
[20:46:47] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:46:47] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
[20:46:47] [INFO] [Bullet] Max penetration distance exceeded: 83,333336 >= 48
[20:46:47] [INFO] [Bullet] Body exited signal received for penetrating body
[20:46:47] [INFO] [Bullet] Exiting penetration at (533.75903, 912.14166) after traveling 83,333336 pixels through wall
[20:46:47] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:46:47] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[20:46:47] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:46:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(547.0209, 757.3342), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:46:47] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=2, self=0, below_threshold=3
[20:46:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[20:46:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[20:46:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(547.02094, 757.3342), shooter_id=987204947201, bullet_pos=(525.75385, 905.81885)
[20:46:47] [INFO] [Bullet] Using shooter_position, distance=149,99991
[20:46:47] [INFO] [Bullet] Distance to wall: 149,99991 (10,21377% of viewport)
[20:46:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:46:47] [INFO] [Bullet] Starting wall penetration at (525.75385, 905.81885)
[20:46:47] [INFO] [LastChance] Threat detected: @Area2D@594
[20:46:47] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:46:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:46:47] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:46:47] [INFO] [Bullet] Exiting penetration at (519.1374, 952.01404) after traveling 41,666668 pixels through wall
[20:46:47] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:46:47] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:46:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[20:46:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[20:46:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(580.0209, 757.3342), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:46:47] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=2, self=0, below_threshold=3
[20:46:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[20:46:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[20:46:47] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:46:47] [INFO] [LastChance] Threat detected: Bullet
[20:46:47] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:46:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:46:47] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:46:47] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:46:47] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[20:46:48] [INFO] [LastChance] Threat detected: @Area2D@599
[20:46:48] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:46:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:46:48] [ENEMY] [Enemy3] Hit taken, health: 2/3
[20:46:48] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:46:48] [INFO] [ImpactEffects] spawn_blood_effect called at (555.9323, 918.8188), dir=(1, 0), lethal=false
[20:46:48] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:46:48] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:46:48] [INFO] [ImpactEffects] Blood effect spawned at (555.9323, 918.8188) (scale=1)
[20:46:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[20:46:48] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[20:46:48] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:46:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[20:46:48] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[20:46:48] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:46:48] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:46:48] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:46:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(619.621, 757.3342), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:46:48] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=1, self=0, below_threshold=4
[20:46:48] [INFO] [LastChance] Threat detected: @Area2D@601
[20:46:48] [INFO] [LastChance] Triggering last chance effect!
[20:46:48] [INFO] [LastChance] Starting last chance effect:
[20:46:48] [INFO] [LastChance]   - Time will be frozen (except player)
[20:46:48] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:46:48] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:46:48] [INFO] [LastChance]   - Brightness: 0.60
[20:46:48] [INFO] [LastChance] Pushed bullet @Area2D@600 from distance 104.9 to 200.0
[20:46:48] [INFO] [LastChance] Pushed bullet @Area2D@601 from distance 134.9 to 200.0
[20:46:48] [INFO] [LastChance] Pushed bullet @Area2D@603 from distance 65.1 to 200.0
[20:46:48] [INFO] [LastChance] Pushed 3 threatening bullets away from player
[20:46:48] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:46:48] [INFO] [LastChance] Skipping player node: Player
[20:46:48] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:46:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@575
[20:46:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@577
[20:46:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@579
[20:46:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@591
[20:46:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@593
[20:46:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@596
[20:46:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@598
[20:46:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@602
[20:46:48] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@604
[20:46:48] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:46:48] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:46:48] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:46:48] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@605
[20:46:48] [INFO] [LastChance] Registered frozen player bullet: @Area2D@605
[20:46:48] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@606
[20:46:48] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@606
[20:46:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(659.2213, 757.3342), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:46:48] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=0, below_threshold=5
[20:46:48] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@607
[20:46:48] [INFO] [LastChance] Registered frozen player bullet: @Area2D@607
[20:46:48] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@608
[20:46:48] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@608
[20:46:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(694.4214, 757.3342), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:46:48] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=0, below_threshold=5
[20:46:48] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@609
[20:46:48] [INFO] [LastChance] Registered frozen player bullet: @Area2D@609
[20:46:48] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@610
[20:46:48] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@610
[20:46:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(729.6216, 757.3342), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:46:48] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=0, below_threshold=5
[20:46:49] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@612
[20:46:49] [INFO] [LastChance] Registered frozen player bullet: @Area2D@612
[20:46:49] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@613
[20:46:49] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@613
[20:46:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(843.6703, 958.1628), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:46:49] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[20:46:50] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@614
[20:46:50] [INFO] [LastChance] Registered frozen player bullet: @Area2D@614
[20:46:50] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@615
[20:46:50] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@615
[20:46:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(810.5355, 961.6342), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:46:50] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[20:46:50] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@616
[20:46:50] [INFO] [LastChance] Registered frozen player bullet: @Area2D@616
[20:46:50] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@617
[20:46:50] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@617
[20:46:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(775.4169, 961.4371), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:46:50] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[20:46:50] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@618
[20:46:50] [INFO] [LastChance] Registered frozen player bullet: @Area2D@618
[20:46:50] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@619
[20:46:50] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@619
[20:46:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(743.8091, 952.7649), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:46:50] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
[20:46:51] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@620
[20:46:51] [INFO] [LastChance] Registered frozen player bullet: @Area2D@620
[20:46:51] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@621
[20:46:51] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@621
[20:46:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(717.2084, 713.9973), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:46:51] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=0, below_threshold=5
[20:46:51] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@622
[20:46:51] [INFO] [LastChance] Registered frozen player bullet: @Area2D@622
[20:46:51] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@623
[20:46:51] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@623
[20:46:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(744.4321, 686.7736), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:46:51] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=0, below_threshold=5
[20:46:51] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@624
[20:46:51] [INFO] [LastChance] Registered frozen player bullet: @Area2D@624
[20:46:51] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@625
[20:46:51] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@625
[20:46:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(771.6558, 659.5499), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:46:51] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=0, below_threshold=5
[20:46:53] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[20:46:53] [ENEMY] [Enemy1] Player reloading state changed: false -> true
[20:46:53] [ENEMY] [Enemy2] Player reloading state changed: false -> true
[20:46:53] [ENEMY] [Enemy3] Player reloading state changed: false -> true
[20:46:53] [ENEMY] [Enemy4] Player reloading state changed: false -> true
[20:46:53] [ENEMY] [Enemy5] Player reloading state changed: false -> true
[20:46:53] [ENEMY] [Enemy6] Player reloading state changed: false -> true
[20:46:53] [ENEMY] [Enemy7] Player reloading state changed: false -> true
[20:46:53] [ENEMY] [Enemy8] Player reloading state changed: false -> true
[20:46:53] [ENEMY] [Enemy9] Player reloading state changed: false -> true
[20:46:53] [ENEMY] [Enemy10] Player reloading state changed: false -> true
[20:46:53] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(1103.457, 671.9332), source=PLAYER (Player), range=900, listeners=10
[20:46:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=8
[20:46:53] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[20:46:53] [INFO] [Player.Reload.Anim] LeftArm: pos=(11.92136, 5.960223), target=(12, 6), base=(24, 6)
[20:46:53] [INFO] [Player.Reload.Anim] RightArm: pos=(-1.9999743, 7.9799547), target=(-2, 8), base=(-2, 6)
[20:46:53] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
[20:46:53] [ENEMY] [Enemy1] Player reloading state changed: true -> false
[20:46:53] [ENEMY] [Enemy2] Player reloading state changed: true -> false
[20:46:53] [ENEMY] [Enemy3] Player reloading state changed: true -> false
[20:46:53] [ENEMY] [Enemy4] Player reloading state changed: true -> false
[20:46:53] [ENEMY] [Enemy5] Player reloading state changed: true -> false
[20:46:53] [ENEMY] [Enemy6] Player reloading state changed: true -> false
[20:46:53] [ENEMY] [Enemy7] Player reloading state changed: true -> false
[20:46:53] [ENEMY] [Enemy8] Player reloading state changed: true -> false
[20:46:53] [ENEMY] [Enemy9] Player reloading state changed: true -> false
[20:46:53] [ENEMY] [Enemy10] Player reloading state changed: true -> false
[20:46:53] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[20:46:54] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[20:46:54] [INFO] [LastChance] Ending last chance effect
[20:46:54] [ENEMY] [Enemy1] Memory reset (last chance teleport effect)
[20:46:54] [ENEMY] [Enemy2] Memory reset (last chance teleport effect)
[20:46:54] [ENEMY] [Enemy3] Memory reset (last chance teleport effect)
[20:46:54] [ENEMY] [Enemy4] Memory reset (last chance teleport effect)
[20:46:54] [ENEMY] [Enemy5] Memory reset (last chance teleport effect)
[20:46:54] [ENEMY] [Enemy6] Memory reset (last chance teleport effect)
[20:46:54] [ENEMY] [Enemy7] Memory reset (last chance teleport effect)
[20:46:54] [ENEMY] [Enemy8] Memory reset (last chance teleport effect)
[20:46:54] [ENEMY] [Enemy9] Memory reset (last chance teleport effect)
[20:46:54] [ENEMY] [Enemy10] Memory reset (last chance teleport effect)
[20:46:54] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[20:46:54] [INFO] [LastChance] All process modes restored
[20:46:54] [INFO] [LastChance] Unfroze player bullet: @Area2D@605
[20:46:54] [INFO] [LastChance] Unfroze player bullet: @Area2D@607
[20:46:54] [INFO] [LastChance] Unfroze player bullet: @Area2D@609
[20:46:54] [INFO] [LastChance] Unfroze player bullet: @Area2D@612
[20:46:54] [INFO] [LastChance] Unfroze player bullet: @Area2D@614
[20:46:54] [INFO] [LastChance] Unfroze player bullet: @Area2D@616
[20:46:54] [INFO] [LastChance] Unfroze player bullet: @Area2D@618
[20:46:54] [INFO] [LastChance] Unfroze player bullet: @Area2D@620
[20:46:54] [INFO] [LastChance] Unfroze player bullet: @Area2D@622
[20:46:54] [INFO] [LastChance] Unfroze player bullet: @Area2D@624
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: Casing
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@575
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@577
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@579
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@591
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@593
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@596
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@598
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@602
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@604
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@606
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@608
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@610
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@613
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@615
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@617
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@619
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@621
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@623
[20:46:54] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@625
[20:46:54] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:46:54] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[20:46:54] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[20:46:54] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:46:54] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:46:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(729.62164, 757.3342), shooter_id=987204947201, bullet_pos=(704.33356, 819.0186)
[20:46:54] [INFO] [Bullet] Using shooter_position, distance=66,66672
[20:46:54] [INFO] [Bullet] Distance to wall: 66,66672 (4,5394597% of viewport)
[20:46:54] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:46:54] [INFO] [Bullet] Starting wall penetration at (704.33356, 819.0186)
[20:46:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(442.7025, 603.5513), shooter_id=984101162056, bullet_pos=(472.954, 692.4561)
[20:46:54] [INFO] [Bullet] Using shooter_position, distance=93.9106597900391
[20:46:54] [INFO] [Bullet] Distance to wall: 93.9106597900391 (6.39454951158001% of viewport)
[20:46:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:46:54] [INFO] [Bullet] Starting wall penetration at (472.954, 692.4561)
[20:46:54] [ENEMY] [Enemy4] Hit taken, health: 2/3
[20:46:54] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:46:54] [INFO] [ImpactEffects] spawn_blood_effect called at (565.1336, 960.3762), dir=(1, 0), lethal=false
[20:46:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:46:54] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:46:54] [INFO] [ImpactEffects] Blood effect spawned at (565.1336, 960.3762) (scale=1)
[20:46:54] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[20:46:54] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:46:54] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:46:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.7205448150635
[20:46:54] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:46:54] [INFO] [Bullet] Exiting penetration at (686.6319, 862.1977) after traveling 41,666668 pixels through wall
[20:46:54] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:46:54] [INFO] [Bullet] Body exited signal received for penetrating body
[20:46:54] [INFO] [Bullet] Exiting penetration at (503.6482, 727.6078) after traveling 41.6666679382324 pixels through wall
[20:46:54] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:46:54] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[20:46:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.4908, 606.7894), shooter_id=984101162056, bullet_pos=(775.0497, 1008.883)
[20:46:54] [INFO] [Bullet] Using shooter_position, distance=525.000061035156
[20:46:54] [INFO] [Bullet] Distance to wall: 525.000061035156 (35.7482195458701% of viewport)
[20:46:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:46:54] [INFO] [Bullet] Starting wall penetration at (775.0497, 1008.883)
[20:46:54] [ENEMY] [Enemy4] Hit taken, health: 1/3
[20:46:54] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:46:54] [INFO] [ImpactEffects] spawn_blood_effect called at (565.1336, 960.3762), dir=(1, 0), lethal=false
[20:46:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:46:54] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:46:54] [INFO] [ImpactEffects] Blood effect spawned at (565.1336, 960.3762) (scale=1)
[20:46:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18.5952434539795
[20:46:54] [INFO] [Bullet] Body exited signal received for penetrating body
[20:46:54] [INFO] [Bullet] Exiting penetration at (799.6969, 1038.242) after traveling 33.3333358764648 pixels through wall
[20:46:54] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:46:54] [ENEMY] [Enemy4] Hit taken, health: 0/3
[20:46:54] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:46:54] [INFO] [ImpactEffects] spawn_blood_effect called at (565.1336, 960.3762), dir=(1, 0), lethal=true
[20:46:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:46:54] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:46:54] [INFO] [ImpactEffects] Blood effect spawned at (565.1336, 960.3762) (scale=1.5)
[20:46:54] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[20:46:54] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:46:54] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 9)
[20:46:54] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[20:46:54] [ENEMY] [Enemy4] Death animation started with hit direction: (1, 0)
[20:46:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(771.65576, 659.54987), shooter_id=987204947201, bullet_pos=(509.09122, 577.78906)
[20:46:54] [INFO] [Bullet] Using shooter_position, distance=274,99994
[20:46:54] [INFO] [Bullet] Distance to wall: 274,99994 (18,725252% of viewport)
[20:46:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:46:54] [INFO] [Bullet] Starting wall penetration at (509.09122, 577.78906)
[20:46:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(694.42145, 757.3342), shooter_id=987204947201, bullet_pos=(603.8838, 1017.0032)
[20:46:54] [INFO] [Bullet] Using shooter_position, distance=275,00006
[20:46:54] [INFO] [Bullet] Distance to wall: 275,00006 (18,725262% of viewport)
[20:46:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:46:54] [INFO] [Bullet] Starting wall penetration at (603.8838, 1017.0032)
[20:46:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(659.22125, 757.3342), shooter_id=987204947201, bullet_pos=(582.43353, 1021.3962)
[20:46:54] [INFO] [Bullet] Using shooter_position, distance=275,00012
[20:46:54] [INFO] [Bullet] Distance to wall: 275,00012 (18,725264% of viewport)
[20:46:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:46:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30,923447
[20:46:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28,81155
[20:46:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(810.53546, 961.63416), shooter_id=987204947201, bullet_pos=(502.86893, 981.90015)
[20:46:54] [INFO] [Bullet] Using shooter_position, distance=308,33328
[20:46:54] [INFO] [Bullet] Distance to wall: 308,33328 (20,99498% of viewport)
[20:46:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:46:54] [INFO] [Bullet] Body exited signal received for penetrating body
[20:46:54] [INFO] [Bullet] Exiting penetration at (472.4913, 566.3921) after traveling 33,333332 pixels through wall
[20:46:54] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:46:54] [INFO] [Bullet] Body exited signal received for penetrating body
[20:46:54] [INFO] [Bullet] Exiting penetration at (591.2634, 1053.1995) after traveling 33,333336 pixels through wall
[20:46:54] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:46:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(843.67035, 958.16284), shooter_id=987204947201, bullet_pos=(502.0059, 956.89044)
[20:46:54] [INFO] [Bullet] Using shooter_position, distance=341,6668
[20:46:54] [INFO] [Bullet] Distance to wall: 341,6668 (23,264723% of viewport)
[20:46:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:46:54] [INFO] [Bullet] Starting wall penetration at (502.0059, 956.89044)
[20:46:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(442.9467, 602.7842), shooter_id=984101162056, bullet_pos=(688.3342, 855.6811)
[20:46:54] [INFO] [Bullet] Using shooter_position, distance=352.380218505859
[20:46:54] [INFO] [Bullet] Distance to wall: 352.380218505859 (23.9942170481493% of viewport)
[20:46:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:46:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36,32743
[20:46:54] [ENEMY] [Enemy3] Hit taken, health: 1/3
[20:46:54] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:46:54] [INFO] [ImpactEffects] spawn_blood_effect called at (555.9323, 918.8188), dir=(1, 0), lethal=false
[20:46:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:46:54] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:46:54] [INFO] [ImpactEffects] Blood effect spawned at (555.9323, 918.8188) (scale=1)
[20:46:54] [INFO] [Bullet] Body exited signal received for penetrating body
[20:46:54] [INFO] [Bullet] Exiting penetration at (463.67282, 956.7477) after traveling 33,333336 pixels through wall
[20:46:54] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:46:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(810.53546, 961.63416), shooter_id=987204947201, bullet_pos=(619.963, 998.98047)
[20:46:54] [INFO] [Bullet] Using shooter_position, distance=194,19734
[20:46:54] [INFO] [Bullet] Distance to wall: 194,19734 (13,223255% of viewport)
[20:46:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:46:54] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:46:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(442.9467, 602.7842), shooter_id=984101162056, bullet_pos=(550.2822, 1004.966)
[20:46:54] [INFO] [Bullet] Using shooter_position, distance=416.258911132813
[20:46:54] [INFO] [Bullet] Distance to wall: 416.258911132813 (28.3438346916766% of viewport)
[20:46:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:46:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(442.9467, 602.7842), shooter_id=984101162056, bullet_pos=(510.0552, 970.2033)
[20:46:54] [INFO] [Bullet] Using shooter_position, distance=373.497406005859
[20:46:54] [INFO] [Bullet] Distance to wall: 373.497406005859 (25.432125176108% of viewport)
[20:46:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:46:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(717.2084, 713.99725), shooter_id=987204947201, bullet_pos=(37.616714, 514.26996)
[20:46:54] [INFO] [Bullet] Using shooter_position, distance=708,3331
[20:46:54] [INFO] [Bullet] Distance to wall: 708,3331 (48,231705% of viewport)
[20:46:54] [INFO] [Bullet] Distance-based penetration chance: 90,39635%
[20:46:54] [INFO] [Bullet] Starting wall penetration at (37.616714, 514.26996)
[20:46:54] [ENEMY] [Enemy3] Hit taken, health: 0/3
[20:46:54] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:46:54] [INFO] [ImpactEffects] spawn_blood_effect called at (555.9323, 918.8188), dir=(0.718786, -0.695231), lethal=true
[20:46:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:46:54] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:46:54] [INFO] [ImpactEffects] Blood effect spawned at (555.9323, 918.8188) (scale=1.5)
[20:46:54] [ENEMY] [Enemy3] Enemy died (ricochet: true, penetration: false)
[20:46:54] [INFO] [ScoreManager] Ricochet kill registered
[20:46:54] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[20:46:54] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 8)
[20:46:54] [INFO] [DeathAnim] Started - Angle: -44.0 deg, Index: 9
[20:46:54] [ENEMY] [Enemy3] Death animation started with hit direction: (0.718786, -0.695231)
[20:46:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32,479084
[20:46:54] [INFO] [Bullet] Body exited signal received for penetrating body
[20:46:54] [INFO] [Bullet] Exiting penetration at (0.83880615, 503.46115) after traveling 33,333336 pixels through wall
[20:46:54] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:46:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(744.43207, 686.77356), shooter_id=987204947201, bullet_pos=(36.595703, 465.33002)
[20:46:54] [INFO] [Bullet] Using shooter_position, distance=741,66675
[20:46:54] [INFO] [Bullet] Distance to wall: 741,66675 (50,501453% of viewport)
[20:46:54] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[20:46:54] [ENEMY] [Enemy10] State: FLANKING -> RETREATING
[20:46:54] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:46:54] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:46:54] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:46:54] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:46:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(810.53546, 961.63416), shooter_id=987204947201, bullet_pos=(913.2713, 978.8287)
[20:46:54] [INFO] [Bullet] Using shooter_position, distance=104,164795
[20:46:54] [INFO] [Bullet] Distance to wall: 104,164795 (7,0927725% of viewport)
[20:46:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:46:54] [INFO] [Bullet] Starting wall penetration at (913.2713, 978.8287)
[20:46:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 6,301012
[20:46:54] [INFO] [Bullet] Body exited signal received for penetrating body
[20:46:54] [INFO] [Bullet] Exiting penetration at (942.2862, 976.8352) after traveling 24,083332 pixels through wall
[20:46:54] [INFO] [Bullet] Damage multiplier after penetration: 0,225
[20:46:54] [ENEMY] [Enemy1] Hit taken, health: 1/2
[20:46:54] [ENEMY] [Enemy1] ImpactEffectsManager found, calling spawn_blood_effect
[20:46:54] [INFO] [ImpactEffects] spawn_blood_effect called at (326.6293, 391.8743), dir=(1, 0), lethal=false
[20:46:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:46:54] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:46:54] [INFO] [ImpactEffects] Blood effect spawned at (326.6293, 391.8743) (scale=1)
[20:46:54] [ENEMY] [Enemy4] Ragdoll activated
[20:46:54] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:46:54] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
[20:46:54] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[20:46:54] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[20:46:55] [ENEMY] [Enemy3] Ragdoll activated
[20:46:55] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:46:55] [ENEMY] [Enemy4] Death animation completed
[20:46:56] [ENEMY] [Enemy3] Death animation completed
[20:46:57] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[20:46:57] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[20:46:57] [ENEMY] [Enemy10] State: SUPPRESSED -> IN_COVER
[20:46:57] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
[20:46:57] [ENEMY] [Enemy1] State: SUPPRESSED -> IN_COVER
[20:46:57] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
[20:46:58] [INFO] [ScoreManager] Combo ended at 2. Max combo: 2
[20:46:59] [ENEMY] [Enemy2] FLANKING started: target=(975.3452, 825.5148), side=left, pos=(400, 550)
[20:46:59] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[20:46:59] [ENEMY] [Enemy10] FLANKING started: target=(1103.161, 871.933), side=left, pos=(474.045, 1034.084)
[20:46:59] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:47:00] [ENEMY] [Enemy2] State: FLANKING -> COMBAT
[20:47:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(884.2103, 572.8514), source=ENEMY (Enemy2), range=1469, listeners=8
[20:47:00] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=4
[20:47:00] [INFO] [LastChance] Threat detected: Bullet
[20:47:00] [INFO] [LastChance] Effect already used this life
[20:47:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:00] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:47:00] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:47:00] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:47:00] [INFO] [LastChance] Player died
[20:47:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(884.2103, 572.8514), source=ENEMY (Enemy2), range=1469, listeners=8
[20:47:00] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=4
[20:47:01] [INFO] [LastChance] Threat detected: Bullet
[20:47:01] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(884.2103, 572.8514), source=ENEMY (Enemy2), range=1469, listeners=8
[20:47:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=4
[20:47:01] [INFO] [LastChance] Threat detected: Bullet
[20:47:01] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(884.2103, 572.8514), source=ENEMY (Enemy2), range=1469, listeners=8
[20:47:01] [ENEMY] [Enemy10] Heard gunshot at (884.2103, 572.8514), source_type=1, intensity=0.61, distance=64
[20:47:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=4
[20:47:01] [INFO] [LastChance] Threat detected: Bullet
[20:47:01] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:01] [ENEMY] [Enemy1] FLANKING started: target=(953.5549, 804.3315), side=left, pos=(455.5595, 454.5448)
[20:47:01] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[20:47:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(884.2103, 572.8514), source=ENEMY (Enemy2), range=1469, listeners=8
[20:47:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=4
[20:47:01] [INFO] [LastChance] Threat detected: Bullet
[20:47:01] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(884.2103, 572.8514), source=ENEMY (Enemy2), range=1469, listeners=8
[20:47:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=4
[20:47:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:47:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:47:01] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:47:01] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:47:01] [ENEMY] [Enemy1] Death animation component initialized
[20:47:01] [ENEMY] [Enemy2] Death animation component initialized
[20:47:01] [ENEMY] [Enemy3] Death animation component initialized
[20:47:01] [ENEMY] [Enemy4] Death animation component initialized
[20:47:01] [ENEMY] [Enemy5] Death animation component initialized
[20:47:01] [ENEMY] [Enemy6] Death animation component initialized
[20:47:01] [ENEMY] [Enemy7] Death animation component initialized
[20:47:01] [ENEMY] [Enemy8] Death animation component initialized
[20:47:01] [ENEMY] [Enemy9] Death animation component initialized
[20:47:01] [ENEMY] [Enemy10] Death animation component initialized
[20:47:01] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:47:01] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:47:01] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:47:01] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:47:01] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:47:01] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:47:01] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:47:01] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:47:01] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:47:01] [INFO] [ScoreManager] Level started with 10 enemies
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
[20:47:01] [ENEMY] [Enemy1] Registered as sound listener
[20:47:01] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
[20:47:01] [ENEMY] [Enemy2] Registered as sound listener
[20:47:01] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
[20:47:01] [ENEMY] [Enemy3] Registered as sound listener
[20:47:01] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
[20:47:01] [ENEMY] [Enemy4] Registered as sound listener
[20:47:01] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
[20:47:01] [ENEMY] [Enemy5] Registered as sound listener
[20:47:01] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
[20:47:01] [ENEMY] [Enemy6] Registered as sound listener
[20:47:01] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
[20:47:01] [ENEMY] [Enemy7] Registered as sound listener
[20:47:01] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
[20:47:01] [ENEMY] [Enemy8] Registered as sound listener
[20:47:01] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
[20:47:01] [ENEMY] [Enemy9] Registered as sound listener
[20:47:01] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
[20:47:01] [ENEMY] [Enemy10] Registered as sound listener
[20:47:01] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:47:01] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:47:01] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:47:01] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:47:01] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:47:01] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:47:01] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:47:01] [INFO] [LastChance] Found player: Player
[20:47:01] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:47:01] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:47:01] [INFO] [LastChance] Connected to player Died signal (C#)
[20:47:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:47:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:47:01] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:47:01] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:47:01] [ENEMY] [Enemy1] Death animation component initialized
[20:47:01] [ENEMY] [Enemy2] Death animation component initialized
[20:47:01] [ENEMY] [Enemy3] Death animation component initialized
[20:47:01] [ENEMY] [Enemy4] Death animation component initialized
[20:47:01] [ENEMY] [Enemy5] Death animation component initialized
[20:47:01] [ENEMY] [Enemy6] Death animation component initialized
[20:47:01] [ENEMY] [Enemy7] Death animation component initialized
[20:47:01] [ENEMY] [Enemy8] Death animation component initialized
[20:47:01] [ENEMY] [Enemy9] Death animation component initialized
[20:47:01] [ENEMY] [Enemy10] Death animation component initialized
[20:47:01] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:47:01] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:47:01] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:47:01] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:47:01] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:47:01] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:47:01] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:47:01] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:47:01] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:47:01] [INFO] [ScoreManager] Level started with 10 enemies
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 19)
[20:47:01] [ENEMY] [Enemy1] Registered as sound listener
[20:47:01] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 20)
[20:47:01] [ENEMY] [Enemy2] Registered as sound listener
[20:47:01] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 21)
[20:47:01] [ENEMY] [Enemy3] Registered as sound listener
[20:47:01] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 22)
[20:47:01] [ENEMY] [Enemy4] Registered as sound listener
[20:47:01] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 23)
[20:47:01] [ENEMY] [Enemy5] Registered as sound listener
[20:47:01] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 24)
[20:47:01] [ENEMY] [Enemy6] Registered as sound listener
[20:47:01] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 25)
[20:47:01] [ENEMY] [Enemy7] Registered as sound listener
[20:47:01] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 26)
[20:47:01] [ENEMY] [Enemy8] Registered as sound listener
[20:47:01] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 27)
[20:47:01] [ENEMY] [Enemy9] Registered as sound listener
[20:47:01] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:47:01] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 28)
[20:47:01] [ENEMY] [Enemy10] Registered as sound listener
[20:47:01] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:47:01] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:47:01] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:47:01] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:47:01] [INFO] [LastChance] Found player: Player
[20:47:01] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:47:01] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:47:01] [INFO] [LastChance] Connected to player Died signal (C#)
[20:47:01] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:47:01] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:47:01] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:47:02] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:47:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1143.851, 1519.317), source=ENEMY (Enemy10), range=1469, listeners=28
[20:47:02] [INFO] [SoundPropagation] Cleaned up 18 invalid listeners
[20:47:02] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.266, 1499.419), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:03] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.344, 1478.501), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:03] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:03] [INFO] [LastChance] Threat detected: @Area2D@1199
[20:47:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1050.75, 1457.106), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:03] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:03] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:47:03] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:47:03] [INFO] [LastChance] Threat detected: @Area2D@1201
[20:47:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1020.392, 1435.377), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:03] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1081.903, 1491.021), shooter_id=1698273691920, bullet_pos=(47.53278, 866.4023)
[20:47:03] [INFO] [Bullet] Using shooter_position, distance=1208.333984375
[20:47:03] [INFO] [Bullet] Distance to wall: 1208.333984375 (82.2776829263662% of viewport)
[20:47:03] [INFO] [LastChance] Threat detected: @Area2D@1203
[20:47:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(987.5308, 1424.066), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:03] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.537, 1468.637), shooter_id=1698273691920, bullet_pos=(43.4292, 802.4623)
[20:47:03] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
[20:47:03] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
[20:47:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1081.903, 1491.021), shooter_id=1698273691920, bullet_pos=(248.9762, 713.4729)
[20:47:03] [INFO] [Bullet] Using shooter_position, distance=1139.451171875
[20:47:03] [INFO] [Bullet] Distance to wall: 1139.451171875 (77.587325558918% of viewport)
[20:47:03] [INFO] [LastChance] Threat detected: @Area2D@1205
[20:47:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.537, 1468.637), shooter_id=1698273691920, bullet_pos=(160.5802, 714.2196)
[20:47:03] [INFO] [Bullet] Using shooter_position, distance=1167.45446777344
[20:47:03] [INFO] [Bullet] Distance to wall: 1167.45446777344 (79.4941214701632% of viewport)
[20:47:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(956.2987, 1408.629), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:03] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1021.308, 1446.436), shooter_id=1698273691920, bullet_pos=(61.98781, 782.4957)
[20:47:03] [INFO] [Bullet] Using shooter_position, distance=1166.6669921875
[20:47:03] [INFO] [Bullet] Distance to wall: 1166.6669921875 (79.4405008094768% of viewport)
[20:47:03] [INFO] [LastChance] Threat detected: @Area2D@1207
[20:47:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1021.308, 1446.436), shooter_id=1698273691920, bullet_pos=(225.8763, 703.1555)
[20:47:03] [INFO] [Bullet] Using shooter_position, distance=1088.65856933594
[20:47:03] [INFO] [Bullet] Distance to wall: 1088.65856933594 (74.1287638526729% of viewport)
[20:47:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1081.903, 1491.021), shooter_id=1698273691920, bullet_pos=(498.9279, 981.1729)
[20:47:03] [INFO] [Bullet] Using shooter_position, distance=774.47119140625
[20:47:03] [INFO] [Bullet] Distance to wall: 774.47119140625 (52.7351675497962% of viewport)
[20:47:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(936.0527, 1398.308), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:03] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[20:47:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(991.0798, 1424.369), shooter_id=1698273691920, bullet_pos=(39.28532, 749.6852)
[20:47:03] [INFO] [Bullet] Using shooter_position, distance=1166.66662597656
[20:47:03] [INFO] [Bullet] Distance to wall: 1166.66662597656 (79.4404758735006% of viewport)
[20:47:03] [INFO] [LastChance] Threat detected: @Area2D@1199
[20:47:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(991.0798, 1424.369), shooter_id=1698273691920, bullet_pos=(102.5865, 707.928)
[20:47:03] [INFO] [Bullet] Using shooter_position, distance=1141.3623046875
[20:47:03] [INFO] [Bullet] Distance to wall: 1141.3623046875 (77.7174581063845% of viewport)
[20:47:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(991.0798, 1424.369), shooter_id=1698273691920, bullet_pos=(51.18195, 667.807)
[20:47:03] [INFO] [Bullet] Using shooter_position, distance=1206.56298828125
[20:47:03] [INFO] [Bullet] Distance to wall: 1206.56298828125 (82.1570925457681% of viewport)
[20:47:03] [INFO] [LastChance] Threat detected: @Area2D@1212
[20:47:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:03] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:47:03] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:47:03] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:47:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(961.0704, 1402.014), shooter_id=1698273691920, bullet_pos=(50.17501, 741.7902)
[20:47:03] [INFO] [Bullet] Using shooter_position, distance=1125.00036621094
[20:47:03] [INFO] [Bullet] Distance to wall: 1125.00036621094 (76.6033436285635% of viewport)
[20:47:03] [ENEMY] [Enemy3] Memory: medium confidence (0.76) - transitioning to PURSUING
[20:47:03] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[20:47:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(933.0324, 1388.221), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:03] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[20:47:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(961.0704, 1402.014), shooter_id=1698273691920, bullet_pos=(113.4522, 699.9968)
[20:47:03] [INFO] [Bullet] Using shooter_position, distance=1100.58374023438
[20:47:03] [INFO] [Bullet] Distance to wall: 1100.58374023438 (74.9407706676032% of viewport)
[20:47:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1021.308, 1446.436), shooter_id=1698273691920, bullet_pos=(514.4176, 805.162)
[20:47:03] [INFO] [Bullet] Using shooter_position, distance=817.416809082031
[20:47:03] [INFO] [Bullet] Distance to wall: 817.416809082031 (55.6594136273677% of viewport)
[20:47:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(961.0704, 1402.014), shooter_id=1698273691920, bullet_pos=(64.45427, 656.9698)
[20:47:03] [INFO] [Bullet] Using shooter_position, distance=1165.76635742188
[20:47:03] [INFO] [Bullet] Distance to wall: 1165.76635742188 (79.379174932164% of viewport)
[20:47:03] [INFO] [Bullet] Distance-based penetration chance: 54.0576292458086%
[20:47:03] [INFO] [Bullet] Starting wall penetration at (64.45427, 656.9698)
[20:47:03] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:47:03] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:47:03] [INFO] [Bullet] Exiting penetration at (38.07676, 633.8068) after traveling 30.1041679382324 pixels through wall
[20:47:03] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[20:47:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(929.1025, 1389.101), shooter_id=1698273691920, bullet_pos=(36.28199, 704.6321)
[20:47:03] [INFO] [Bullet] Using shooter_position, distance=1125.00061035156
[20:47:03] [INFO] [Bullet] Distance to wall: 1125.00061035156 (76.6033602525476% of viewport)
[20:47:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(991.0798, 1424.369), shooter_id=1698273691920, bullet_pos=(254.7018, 466.1961)
[20:47:04] [INFO] [Bullet] Using shooter_position, distance=1208.44860839844
[20:47:04] [INFO] [Bullet] Distance to wall: 1208.44860839844 (82.285487886897% of viewport)
[20:47:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(898.5673, 1372.539), shooter_id=1698273691920, bullet_pos=(51.79154, 696.8311)
[20:47:04] [INFO] [Bullet] Using shooter_position, distance=1083.3330078125
[20:47:04] [INFO] [Bullet] Distance to wall: 1083.3330078125 (73.7661365756979% of viewport)
[20:47:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(879.038, 1361.148), shooter_id=1698273691920, bullet_pos=(45.22905, 669.5023)
[20:47:04] [INFO] [Bullet] Using shooter_position, distance=1083.33361816406
[20:47:04] [INFO] [Bullet] Distance to wall: 1083.33361816406 (73.7661781356581% of viewport)
[20:47:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(929.1025, 1389.101), shooter_id=1698273691920, bullet_pos=(517.4023, 395.8828)
[20:47:04] [INFO] [Bullet] Using shooter_position, distance=1075.1650390625
[20:47:04] [INFO] [Bullet] Distance to wall: 1075.1650390625 (73.2099645639403% of viewport)
[20:47:04] [INFO] [Bullet] Distance-based penetration chance: 61.2550413420697%
[20:47:04] [INFO] [Bullet] Penetration failed (distance roll)
[20:47:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(991.0798, 1424.369), shooter_id=1698273691920, bullet_pos=(498.4296, 690.5302)
[20:47:04] [INFO] [Bullet] Using shooter_position, distance=883.86865234375
[20:47:04] [INFO] [Bullet] Distance to wall: 883.86865234375 (60.1842418292231% of viewport)
[20:47:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(876.8249, 1349.8), shooter_id=1698273691920, bullet_pos=(121.3541, 694.617)
[20:47:04] [INFO] [Bullet] Using shooter_position, distance=1000.00036621094
[20:47:04] [INFO] [Bullet] Distance to wall: 1000.00036621094 (68.0918637738315% of viewport)
[20:47:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(876.8249, 1349.8), shooter_id=1698273691920, bullet_pos=(49.65739, 779.6826)
[20:47:04] [INFO] [Bullet] Using shooter_position, distance=1004.60919189453
[20:47:04] [INFO] [Bullet] Distance to wall: 1004.60919189453 (68.4056871895106% of viewport)
[20:47:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(879.038, 1361.148), shooter_id=1698273691920, bullet_pos=(258.0096, 474.9244)
[20:47:04] [INFO] [Bullet] Using shooter_position, distance=1082.15954589844
[20:47:04] [INFO] [Bullet] Distance to wall: 1082.15954589844 (73.6862333961632% of viewport)
[20:47:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(898.5673, 1372.539), shooter_id=1698273691920, bullet_pos=(519.3871, 434.3076)
[20:47:04] [INFO] [Bullet] Using shooter_position, distance=1011.95648193359
[20:47:04] [INFO] [Bullet] Distance to wall: 1011.95648193359 (68.9059776787454% of viewport)
[20:47:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(879.038, 1361.148), shooter_id=1698273691920, bullet_pos=(462.1237, 702.9572)
[20:47:04] [INFO] [Bullet] Using shooter_position, distance=779.123413085938
[20:47:04] [INFO] [Bullet] Distance to wall: 779.123413085938 (53.0519458786475% of viewport)
[20:47:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(898.5673, 1372.539), shooter_id=1698273691920, bullet_pos=(257.9531, 275.2047)
[20:47:04] [INFO] [Bullet] Using shooter_position, distance=1270.64135742188
[20:47:04] [INFO] [Bullet] Distance to wall: 1270.64135742188 (86.5203065302841% of viewport)
[20:47:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(898.5673, 1372.539), shooter_id=1698273691920, bullet_pos=(58.96982, 400.7844)
[20:47:04] [INFO] [Bullet] Using shooter_position, distance=1284.22387695313
[20:47:04] [INFO] [Bullet] Distance to wall: 1284.22387695313 (87.445165261218% of viewport)
[20:47:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(991.0798, 1424.369), shooter_id=1698273691920, bullet_pos=(1018.1, 296.6545)
[20:47:04] [INFO] [Bullet] Using shooter_position, distance=1128.03820800781
[20:47:04] [INFO] [Bullet] Distance to wall: 1128.03820800781 (76.8101958626112% of viewport)
[20:47:04] [INFO] [Bullet] Distance-based penetration chance: 57.0547714936203%
[20:47:04] [INFO] [Bullet] Penetration failed (distance roll)
[20:47:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(488.9148, 782.0389), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:07] [ENEMY] [Enemy1] Heard gunshot at (488.9148, 782.0389), source_type=0, intensity=0.01, distance=472
[20:47:07] [ENEMY] [Enemy2] Heard gunshot at (488.9148, 782.0389), source_type=0, intensity=0.04, distance=248
[20:47:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:47:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(488.91476, 782.0389), shooter_id=1699095774857, bullet_pos=(497.13528, 805.6487)
[20:47:07] [INFO] [Bullet] Using shooter_position, distance=24,999994
[20:47:07] [INFO] [Bullet] Distance to wall: 24,999994 (1,7022957% of viewport)
[20:47:07] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:47:07] [INFO] [Bullet] Starting wall penetration at (497.13528, 805.6487)
[20:47:07] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:47:07] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:47:07] [INFO] [Bullet] Exiting penetration at (512.4802, 849.72034) after traveling 41,66667 pixels through wall
[20:47:07] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:47:07] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:47:07] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:47:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(506.923, 760.2141), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:47:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(506.923, 760.21405), shooter_id=1699095774857, bullet_pos=(525.4153, 824.26465)
[20:47:07] [INFO] [Bullet] Using shooter_position, distance=66,66666
[20:47:07] [INFO] [Bullet] Distance to wall: 66,66666 (4,5394554% of viewport)
[20:47:07] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:47:07] [INFO] [Bullet] Starting wall penetration at (525.4153, 824.26465)
[20:47:07] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:47:07] [INFO] [Bullet] Exiting penetration at (538.35986, 869.10004) after traveling 41,66667 pixels through wall
[20:47:07] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:47:07] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
[20:47:07] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:47:07] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:47:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(531.257, 750.9843), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[20:47:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[20:47:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[20:47:07] [ENEMY] [Enemy3] Hit taken, health: 1/2
[20:47:07] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:07] [INFO] [ImpactEffects] spawn_blood_effect called at (559.6516, 975.9338), dir=(1, 0), lethal=false
[20:47:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:07] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:07] [INFO] [ImpactEffects] Blood effect spawned at (559.6516, 975.9338) (scale=1)
[20:47:07] [ENEMY] [Enemy4] Hit taken, health: 2/3
[20:47:07] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:07] [INFO] [ImpactEffects] spawn_blood_effect called at (561.7247, 975.9335), dir=(1, 0), lethal=false
[20:47:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:07] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:07] [INFO] [ImpactEffects] Blood effect spawned at (561.7247, 975.9335) (scale=1)
[20:47:07] [INFO] [LastChance] Threat detected: @Area2D@1245
[20:47:07] [INFO] [LastChance] Triggering last chance effect!
[20:47:07] [INFO] [LastChance] Starting last chance effect:
[20:47:07] [INFO] [LastChance]   - Time will be frozen (except player)
[20:47:07] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:47:07] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:47:07] [INFO] [LastChance]   - Brightness: 0.60
[20:47:07] [INFO] [LastChance] Pushed bullet @Area2D@1245 from distance 144.1 to 200.0
[20:47:07] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:47:07] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:47:07] [INFO] [LastChance] Skipping player node: Player
[20:47:07] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:47:07] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1200
[20:47:07] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1202
[20:47:07] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1204
[20:47:07] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1206
[20:47:07] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1208
[20:47:07] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1213
[20:47:07] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1218
[20:47:07] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1223
[20:47:07] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1241
[20:47:07] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1242
[20:47:07] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1244
[20:47:07] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:47:07] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:47:07] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:47:07] [INFO] [LastChance] Freezing newly fired player bullet: Bullet
[20:47:07] [INFO] [LastChance] Registered frozen player bullet: Bullet
[20:47:07] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1247
[20:47:07] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1247
[20:47:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(567.4042, 749.65), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[20:47:07] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1248
[20:47:07] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1248
[20:47:07] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1249
[20:47:07] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1249
[20:47:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(602.6044, 749.65), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[20:47:07] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1250
[20:47:07] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1250
[20:47:07] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1251
[20:47:07] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1251
[20:47:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(637.8046, 749.65), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
[20:47:10] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[20:47:10] [ENEMY] [Enemy1] Player reloading state changed: false -> true
[20:47:10] [ENEMY] [Enemy2] Player reloading state changed: false -> true
[20:47:10] [ENEMY] [Enemy3] Player reloading state changed: false -> true
[20:47:10] [ENEMY] [Enemy4] Player reloading state changed: false -> true
[20:47:10] [ENEMY] [Enemy5] Player reloading state changed: false -> true
[20:47:10] [ENEMY] [Enemy6] Player reloading state changed: false -> true
[20:47:10] [ENEMY] [Enemy7] Player reloading state changed: false -> true
[20:47:10] [ENEMY] [Enemy8] Player reloading state changed: false -> true
[20:47:10] [ENEMY] [Enemy9] Player reloading state changed: false -> true
[20:47:10] [ENEMY] [Enemy10] Player reloading state changed: false -> true
[20:47:10] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(1139.435, 671.9338), source=PLAYER (Player), range=900, listeners=10
[20:47:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=0, below_threshold=7
[20:47:10] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[20:47:11] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
[20:47:11] [ENEMY] [Enemy1] Player reloading state changed: true -> false
[20:47:11] [ENEMY] [Enemy2] Player reloading state changed: true -> false
[20:47:11] [ENEMY] [Enemy3] Player reloading state changed: true -> false
[20:47:11] [ENEMY] [Enemy4] Player reloading state changed: true -> false
[20:47:11] [ENEMY] [Enemy5] Player reloading state changed: true -> false
[20:47:11] [ENEMY] [Enemy6] Player reloading state changed: true -> false
[20:47:11] [ENEMY] [Enemy7] Player reloading state changed: true -> false
[20:47:11] [ENEMY] [Enemy8] Player reloading state changed: true -> false
[20:47:11] [ENEMY] [Enemy9] Player reloading state changed: true -> false
[20:47:11] [ENEMY] [Enemy10] Player reloading state changed: true -> false
[20:47:11] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[20:47:11] [INFO] [Player.Reload.Anim] LeftArm: pos=(21.804823, 5.9700694), target=(24, 6), base=(24, 6)
[20:47:11] [INFO] [Player.Reload.Anim] RightArm: pos=(-2.0000143, 6.3409233), target=(-2, 6), base=(-2, 6)
[20:47:11] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[20:47:13] [INFO] [LastChance] Effect duration expired after 6.02 real seconds
[20:47:13] [INFO] [LastChance] Ending last chance effect
[20:47:13] [ENEMY] [Enemy1] Memory reset (last chance teleport effect)
[20:47:13] [ENEMY] [Enemy2] Memory reset (last chance teleport effect)
[20:47:13] [ENEMY] [Enemy3] Memory reset (last chance teleport effect)
[20:47:13] [ENEMY] [Enemy4] Memory reset (last chance teleport effect)
[20:47:13] [ENEMY] [Enemy5] Memory reset (last chance teleport effect)
[20:47:13] [ENEMY] [Enemy6] Memory reset (last chance teleport effect)
[20:47:13] [ENEMY] [Enemy7] Memory reset (last chance teleport effect)
[20:47:13] [ENEMY] [Enemy8] Memory reset (last chance teleport effect)
[20:47:13] [ENEMY] [Enemy9] Memory reset (last chance teleport effect)
[20:47:13] [ENEMY] [Enemy10] Memory reset (last chance teleport effect)
[20:47:13] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[20:47:13] [INFO] [LastChance] All process modes restored
[20:47:13] [INFO] [LastChance] Unfroze player bullet: Bullet
[20:47:13] [INFO] [LastChance] Unfroze player bullet: @Area2D@1248
[20:47:13] [INFO] [LastChance] Unfroze player bullet: @Area2D@1250
[20:47:13] [INFO] [LastChance] Unfroze bullet casing: Casing
[20:47:13] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1200
[20:47:13] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1202
[20:47:13] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1204
[20:47:13] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1206
[20:47:13] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1208
[20:47:13] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1213
[20:47:13] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1218
[20:47:13] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1223
[20:47:13] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1241
[20:47:13] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1242
[20:47:13] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1244
[20:47:13] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1247
[20:47:13] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1249
[20:47:13] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1251
[20:47:13] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:47:13] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[20:47:13] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[20:47:13] [ENEMY] [Enemy10] FLANKING started: target=(1243.486, 842.7361), side=left, pos=(744.1295, 1395.452)
[20:47:13] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:47:13] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[20:47:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(637.8046, 749.64996), shooter_id=1699095774857, bullet_pos=(525.8836, 954.38904)
[20:47:13] [INFO] [Bullet] Using shooter_position, distance=233,33325
[20:47:13] [INFO] [Bullet] Distance to wall: 233,33325 (15,88809% of viewport)
[20:47:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:13] [ENEMY] [Enemy3] Hit taken, health: 0/2
[20:47:13] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:13] [INFO] [ImpactEffects] spawn_blood_effect called at (559.6516, 975.9338), dir=(1, 0), lethal=true
[20:47:13] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:13] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:47:13] [INFO] [ImpactEffects] Blood effect spawned at (559.6516, 975.9338) (scale=1.5)
[20:47:13] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[20:47:13] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:47:13] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[20:47:13] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[20:47:13] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[20:47:13] [ENEMY] [Enemy4] Hit taken, health: 1/3
[20:47:13] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:13] [INFO] [ImpactEffects] spawn_blood_effect called at (561.7247, 975.9335), dir=(1, 0), lethal=false
[20:47:13] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:13] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:13] [INFO] [ImpactEffects] Blood effect spawned at (561.7247, 975.9335) (scale=1)
[20:47:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(567.40424, 749.64996), shooter_id=1699095774857, bullet_pos=(596.5548, 1023.10046)
[20:47:13] [INFO] [Bullet] Using shooter_position, distance=274,99988
[20:47:13] [INFO] [Bullet] Distance to wall: 274,99988 (18,725248% of viewport)
[20:47:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:13] [INFO] [Bullet] Starting wall penetration at (596.5548, 1023.10046)
[20:47:13] [ENEMY] [Enemy4] Hit taken, health: 0/3
[20:47:13] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:13] [INFO] [ImpactEffects] spawn_blood_effect called at (561.7247, 975.9335), dir=(1, 0), lethal=true
[20:47:13] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:13] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:47:13] [INFO] [ImpactEffects] Blood effect spawned at (561.7247, 975.9335) (scale=1.5)
[20:47:13] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[20:47:13] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[20:47:13] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
[20:47:13] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[20:47:13] [ENEMY] [Enemy4] Death animation started with hit direction: (1, 0)
[20:47:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37,428654
[20:47:13] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:13] [INFO] [Bullet] Exiting penetration at (600.6182, 1061.2178) after traveling 33,333336 pixels through wall
[20:47:13] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:47:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(435.9714, 608.4258), shooter_id=1695991990188, bullet_pos=(690.1537, 828.354)
[20:47:13] [INFO] [Bullet] Using shooter_position, distance=336.120574951172
[20:47:13] [INFO] [Bullet] Distance to wall: 336.120574951172 (22.8870680196625% of viewport)
[20:47:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:13] [INFO] [Bullet] Starting wall penetration at (690.1537, 828.354)
[20:47:13] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:47:13] [INFO] [Bullet] Exiting penetration at (718.6804, 853.9601) after traveling 33.3333358764648 pixels through wall
[20:47:13] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:47:13] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:47:14] [ENEMY] [Enemy3] Ragdoll activated
[20:47:14] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:47:14] [ENEMY] [Enemy4] Ragdoll activated
[20:47:14] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:47:15] [ENEMY] [Enemy2] FLANKING started: target=(1012.587, 826.5605), side=left, pos=(400, 550)
[20:47:15] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[20:47:15] [ENEMY] [Enemy3] Death animation completed
[20:47:15] [ENEMY] [Enemy4] Death animation completed
[20:47:17] [INFO] [ScoreManager] Combo ended at 2. Max combo: 2
[20:47:17] [ENEMY] [Enemy2] State: FLANKING -> COMBAT
[20:47:17] [ENEMY] [Enemy1] FLANKING started: target=(990.7437, 805.6902), side=left, pos=(454.4059, 448.9987)
[20:47:17] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[20:47:17] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:47:18] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[20:47:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(494.5937, 172.9306), source=ENEMY (Enemy1), range=1469, listeners=8
[20:47:18] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=4
[20:47:18] [ENEMY] [Enemy1] State: FLANKING -> COMBAT
[20:47:18] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[20:47:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(530.6732, 170.5927), source=ENEMY (Enemy1), range=1469, listeners=8
[20:47:18] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=5
[20:47:19] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[20:47:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(566.4277, 181.3324), source=ENEMY (Enemy1), range=1469, listeners=8
[20:47:19] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=5
[20:47:19] [INFO] [LastChance] Threat detected: Bullet
[20:47:19] [INFO] [LastChance] Effect already used this life
[20:47:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:19] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:47:19] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:47:19] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:47:19] [INFO] [LastChance] Player died
[20:47:19] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[20:47:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(597.7757, 200.1499), source=ENEMY (Enemy1), range=1469, listeners=8
[20:47:19] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
[20:47:19] [INFO] [LastChance] Threat detected: @Area2D@1291
[20:47:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:19] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[20:47:19] [ENEMY] [Enemy10] FLANKING timeout (5.0s), target=(1271.823, 522.0223), pos=(1529.283, 751.9329)
[20:47:19] [ENEMY] [Enemy10] State: FLANKING -> PURSUING
[20:47:19] [INFO] [LastChance] Threat detected: @Area2D@1293
[20:47:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:19] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[20:47:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(625.9278, 224.6702), source=ENEMY (Enemy1), range=1469, listeners=8
[20:47:19] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
[20:47:19] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:47:19] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:47:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(612.7048, 231.2226), shooter_id=1695706778836, bullet_pos=(1150.766, 691.9032)
[20:47:19] [INFO] [Bullet] Using shooter_position, distance=708.333251953125
[20:47:19] [INFO] [Bullet] Distance to wall: 708.333251953125 (48.2317136354862% of viewport)
[20:47:19] [INFO] [LastChance] Threat detected: Bullet
[20:47:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:19] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[20:47:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(654.0799, 249.1904), source=ENEMY (Enemy1), range=1469, listeners=8
[20:47:19] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
[20:47:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(612.7048, 231.2226), shooter_id=1695706778836, bullet_pos=(936.2166, 727.61)
[20:47:19] [INFO] [Bullet] Using shooter_position, distance=592.503479003906
[20:47:19] [INFO] [Bullet] Distance to wall: 592.503479003906 (40.3446514032026% of viewport)
[20:47:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(643.6279, 250.4308), shooter_id=1695706778836, bullet_pos=(1146.342, 688.2931)
[20:47:19] [INFO] [Bullet] Using shooter_position, distance=666.666687011719
[20:47:19] [INFO] [Bullet] Distance to wall: 666.666687011719 (45.3945606105689% of viewport)
[20:47:19] [INFO] [LastChance] Threat detected: @Area2D@1296
[20:47:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:19] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[20:47:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(682.232, 273.7107), source=ENEMY (Enemy1), range=1469, listeners=8
[20:47:19] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
[20:47:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(671.78, 274.9511), shooter_id=1695706778836, bullet_pos=(1143.074, 685.447)
[20:47:19] [INFO] [Bullet] Using shooter_position, distance=624.999938964844
[20:47:19] [INFO] [Bullet] Distance to wall: 624.999938964844 (42.5573951176636% of viewport)
[20:47:19] [INFO] [Bullet] Distance-based penetration chance: 97.0163723627258%
[20:47:19] [INFO] [Bullet] Starting wall penetration at (1143.074, 685.447)
[20:47:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 6.23847007751465
[20:47:19] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:19] [INFO] [Bullet] Exiting penetration at (1178.264, 716.0974) after traveling 41.6666679382324 pixels through wall
[20:47:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:47:19] [INFO] [LastChance] Threat detected: @Area2D@1298
[20:47:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:19] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[20:47:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(710.3841, 298.231), source=ENEMY (Enemy1), range=1469, listeners=8
[20:47:19] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
[20:47:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:47:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:47:19] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:47:19] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:47:19] [ENEMY] [Enemy1] Death animation component initialized
[20:47:19] [ENEMY] [Enemy2] Death animation component initialized
[20:47:19] [ENEMY] [Enemy3] Death animation component initialized
[20:47:19] [ENEMY] [Enemy4] Death animation component initialized
[20:47:19] [ENEMY] [Enemy5] Death animation component initialized
[20:47:19] [ENEMY] [Enemy6] Death animation component initialized
[20:47:19] [ENEMY] [Enemy7] Death animation component initialized
[20:47:19] [ENEMY] [Enemy8] Death animation component initialized
[20:47:19] [ENEMY] [Enemy9] Death animation component initialized
[20:47:19] [ENEMY] [Enemy10] Death animation component initialized
[20:47:19] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:47:19] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:47:19] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:47:19] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:47:19] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:47:19] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:47:19] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:47:19] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:47:19] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:47:19] [INFO] [ScoreManager] Level started with 10 enemies
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
[20:47:19] [ENEMY] [Enemy1] Registered as sound listener
[20:47:19] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
[20:47:19] [ENEMY] [Enemy2] Registered as sound listener
[20:47:19] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
[20:47:19] [ENEMY] [Enemy3] Registered as sound listener
[20:47:19] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
[20:47:19] [ENEMY] [Enemy4] Registered as sound listener
[20:47:19] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
[20:47:19] [ENEMY] [Enemy5] Registered as sound listener
[20:47:19] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
[20:47:19] [ENEMY] [Enemy6] Registered as sound listener
[20:47:19] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
[20:47:19] [ENEMY] [Enemy7] Registered as sound listener
[20:47:19] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
[20:47:19] [ENEMY] [Enemy8] Registered as sound listener
[20:47:19] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
[20:47:19] [ENEMY] [Enemy9] Registered as sound listener
[20:47:19] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
[20:47:19] [ENEMY] [Enemy10] Registered as sound listener
[20:47:19] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:47:19] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:47:19] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:47:19] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:47:19] [INFO] [LastChance] Found player: Player
[20:47:19] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:47:19] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:47:19] [INFO] [LastChance] Connected to player Died signal (C#)
[20:47:19] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:47:19] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:47:19] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:47:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:47:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:47:19] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:47:19] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:47:19] [ENEMY] [Enemy1] Death animation component initialized
[20:47:19] [ENEMY] [Enemy2] Death animation component initialized
[20:47:19] [ENEMY] [Enemy3] Death animation component initialized
[20:47:19] [ENEMY] [Enemy4] Death animation component initialized
[20:47:19] [ENEMY] [Enemy5] Death animation component initialized
[20:47:19] [ENEMY] [Enemy6] Death animation component initialized
[20:47:19] [ENEMY] [Enemy7] Death animation component initialized
[20:47:19] [ENEMY] [Enemy8] Death animation component initialized
[20:47:19] [ENEMY] [Enemy9] Death animation component initialized
[20:47:19] [ENEMY] [Enemy10] Death animation component initialized
[20:47:19] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:47:19] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:47:19] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:47:19] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:47:19] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:47:19] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:47:19] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:47:19] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:47:19] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:47:19] [INFO] [ScoreManager] Level started with 10 enemies
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 19)
[20:47:19] [ENEMY] [Enemy1] Registered as sound listener
[20:47:19] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 20)
[20:47:19] [ENEMY] [Enemy2] Registered as sound listener
[20:47:19] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 21)
[20:47:19] [ENEMY] [Enemy3] Registered as sound listener
[20:47:19] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 22)
[20:47:19] [ENEMY] [Enemy4] Registered as sound listener
[20:47:19] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 23)
[20:47:19] [ENEMY] [Enemy5] Registered as sound listener
[20:47:19] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 24)
[20:47:19] [ENEMY] [Enemy6] Registered as sound listener
[20:47:19] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 25)
[20:47:19] [ENEMY] [Enemy7] Registered as sound listener
[20:47:19] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 26)
[20:47:19] [ENEMY] [Enemy8] Registered as sound listener
[20:47:19] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 27)
[20:47:19] [ENEMY] [Enemy9] Registered as sound listener
[20:47:19] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:47:19] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 28)
[20:47:19] [ENEMY] [Enemy10] Registered as sound listener
[20:47:19] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:47:19] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:47:19] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:47:19] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:47:19] [INFO] [LastChance] Found player: Player
[20:47:19] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:47:19] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:47:19] [INFO] [LastChance] Connected to player Died signal (C#)
[20:47:19] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:47:19] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:47:19] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:47:20] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:47:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.004, 1519.036), source=ENEMY (Enemy10), range=1469, listeners=28
[20:47:20] [INFO] [SoundPropagation] Cleaned up 18 invalid listeners
[20:47:20] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.369, 1499.216), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:20] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.567, 1478.127), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1051.656, 1455.79), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:21] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:47:21] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:47:21] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:47:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.098, 1490.783), shooter_id=2328157488786, bullet_pos=(47.58658, 866.3981)
[20:47:21] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[20:47:21] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[20:47:21] [INFO] [Bullet] Distance-based penetration chance: 50.6760753752023%
[20:47:21] [INFO] [Bullet] Starting wall penetration at (47.58658, 866.3981)
[20:47:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.4611740112305
[20:47:21] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:21] [INFO] [Bullet] Exiting penetration at (7.633038, 842.2839) after traveling 41.6666717529297 pixels through wall
[20:47:21] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:47:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.666, 1468.465), shooter_id=2328157488786, bullet_pos=(43.44983, 802.4554)
[20:47:21] [INFO] [Bullet] Using shooter_position, distance=1208.33264160156
[20:47:21] [INFO] [Bullet] Distance to wall: 1208.33264160156 (82.2775914944537% of viewport)
[20:47:21] [INFO] [Bullet] Distance-based penetration chance: 50.6761432564707%
[20:47:21] [INFO] [Bullet] Starting wall penetration at (43.44983, 802.4554)
[20:47:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32.9441947937012
[20:47:21] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:21] [INFO] [Bullet] Exiting penetration at (4.511826, 776.7336) after traveling 41.6666717529297 pixels through wall
[20:47:21] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:47:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.121, 1444.918), shooter_id=2328157488786, bullet_pos=(41.68815, 738.6444)
[20:47:21] [INFO] [Bullet] Using shooter_position, distance=1208.33374023438
[20:47:21] [INFO] [Bullet] Distance to wall: 1208.33374023438 (82.2776663023821% of viewport)
[20:47:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.121, 1444.918), shooter_id=2328157488786, bullet_pos=(102.0404, 692.7281)
[20:47:21] [INFO] [Bullet] Using shooter_position, distance=1188.41796875
[20:47:21] [INFO] [Bullet] Distance to wall: 1188.41796875 (80.9215648001365% of viewport)
[20:47:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.121, 1444.918), shooter_id=2328157488786, bullet_pos=(49.19221, 654.5287)
[20:47:21] [INFO] [Bullet] Using shooter_position, distance=1253.51708984375
[20:47:21] [INFO] [Bullet] Distance to wall: 1253.51708984375 (85.3542836621381% of viewport)
[20:47:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.5886, 1420.227), shooter_id=2328157488786, bullet_pos=(42.22082, 675.2644)
[20:47:21] [INFO] [Bullet] Using shooter_position, distance=1208.33337402344
[20:47:21] [INFO] [Bullet] Distance to wall: 1208.33337402344 (82.277641366406% of viewport)
[20:47:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[20:47:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[20:47:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[20:47:21] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[20:47:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:21] [INFO] [LastChance] Threat detected: Bullet
[20:47:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[20:47:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.5886, 1420.227), shooter_id=2328157488786, bullet_pos=(499.0894, 394.4882)
[20:47:21] [INFO] [Bullet] Using shooter_position, distance=1138.71374511719
[20:47:21] [INFO] [Bullet] Distance to wall: 1138.71374511719 (77.5371128149703% of viewport)
[20:47:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(449.7458, 740.3823), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:21] [ENEMY] [Enemy1] Heard gunshot at (449.7458, 740.3823), source_type=0, intensity=0.01, distance=418
[20:47:21] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:47:21] [INFO] [LastChance] Threat detected: @Area2D@1822
[20:47:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.121, 1444.918), shooter_id=2328157488786, bullet_pos=(510.3849, 421.3904)
[20:47:21] [INFO] [Bullet] Using shooter_position, distance=1144.32592773438
[20:47:21] [INFO] [Bullet] Distance to wall: 1144.32592773438 (77.9192566492684% of viewport)
[20:47:22] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:47:22] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:47:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[20:47:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(618.2114, 769.3549), shooter_id=2326161000042, bullet_pos=(38.82385, 837.0888)
[20:47:22] [INFO] [Bullet] Using shooter_position, distance=583.333374023438
[20:47:22] [INFO] [Bullet] Distance to wall: 583.333374023438 (39.7202420927463% of viewport)
[20:47:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:22] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:47:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(439.6624, 734.0676), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:47:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(449.74582, 740.38226), shooter_id=2328979572959, bullet_pos=(758.4545, 810.9276)
[20:47:22] [INFO] [Bullet] Using shooter_position, distance=316,66656
[20:47:22] [INFO] [Bullet] Distance to wall: 316,66656 (21,562408% of viewport)
[20:47:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.5886, 1420.227), shooter_id=2328157488786, bullet_pos=(287.0936, 270.0223)
[20:47:22] [INFO] [Bullet] Using shooter_position, distance=1349.85375976563
[20:47:22] [INFO] [Bullet] Distance to wall: 1349.85375976563 (91.9140246646341% of viewport)
[20:47:22] [INFO] [LastChance] Threat detected: @Area2D@1828
[20:47:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:22] [ENEMY] [Enemy3] Hit taken, health: 3/4
[20:47:22] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:22] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(1, 0), lethal=false
[20:47:22] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:22] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:22] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=1)
[20:47:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[20:47:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.4081, 758.5869), shooter_id=2326161000042, bullet_pos=(33.63236, 733.0872)
[20:47:22] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
[20:47:22] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
[20:47:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:22] [INFO] [Bullet] Starting wall penetration at (33.63236, 733.0872)
[20:47:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(416.9894, 737.0602), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:47:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.6994132995605
[20:47:22] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:22] [INFO] [Bullet] Exiting penetration at (-4.664333, 731.4115) after traveling 33.3333358764648 pixels through wall
[20:47:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:47:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.121, 1444.918), shooter_id=2328157488786, bullet_pos=(269.1337, 272.6781)
[20:47:22] [INFO] [Bullet] Using shooter_position, distance=1393.24633789063
[20:47:22] [INFO] [Bullet] Distance to wall: 1393.24633789063 (94.8687051010807% of viewport)
[20:47:22] [INFO] [LastChance] Threat detected: Bullet
[20:47:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:22] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[20:47:22] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:47:22] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[20:47:22] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[20:47:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.5886, 1420.227), shooter_id=2328157488786, bullet_pos=(64.16795, 405.5413)
[20:47:22] [INFO] [Bullet] Using shooter_position, distance=1376.01208496094
[20:47:22] [INFO] [Bullet] Distance to wall: 1376.01208496094 (93.6951931281016% of viewport)
[20:47:22] [INFO] [Bullet] Distance-based penetration chance: 37.3556080172148%
[20:47:22] [INFO] [Bullet] Penetration failed (distance roll)
[20:47:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:47:22] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:47:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(678.6477, 760.0168), source=ENEMY (Enemy3), range=1469, listeners=10
[20:47:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:22] [ENEMY] [Enemy3] Hit taken, health: 2/4
[20:47:22] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:22] [INFO] [ImpactEffects] spawn_blood_effect called at (677.1975, 761.5815), dir=(1, 0), lethal=false
[20:47:22] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:22] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:22] [INFO] [ImpactEffects] Blood effect spawned at (677.1975, 761.5815) (scale=1)
[20:47:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(397.9044, 751.2291), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:47:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(671.3967, 767.84), source=ENEMY (Enemy3), range=1469, listeners=10
[20:47:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:22] [INFO] [LastChance] Threat detected: @Area2D@1844
[20:47:22] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:47:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:22] [ENEMY] [Enemy3] Hit taken, health: 1/4
[20:47:22] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:22] [INFO] [ImpactEffects] spawn_blood_effect called at (665.5959, 774.0985), dir=(1, 0), lethal=false
[20:47:22] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:22] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:22] [INFO] [ImpactEffects] Blood effect spawned at (665.5959, 774.0985) (scale=1)
[20:47:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(389.7224, 770.6786), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:47:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(664.1458, 775.6631), source=ENEMY (Enemy3), range=1469, listeners=10
[20:47:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.121, 1444.918), shooter_id=2328157488786, bullet_pos=(56.40033, 440.9234)
[20:47:22] [INFO] [Bullet] Using shooter_position, distance=1393.06164550781
[20:47:22] [INFO] [Bullet] Distance to wall: 1393.06164550781 (94.8561290571156% of viewport)
[20:47:22] [INFO] [Bullet] Distance-based penetration chance: 36.0011827666984%
[20:47:22] [INFO] [Bullet] Penetration failed (distance roll)
[20:47:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:47:22] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:47:22] [INFO] [LastChance] Threat detected: @Area2D@1848
[20:47:22] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:47:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:47:22] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:47:22] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:47:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(610.6691, 763.1019), shooter_id=2326161000042, bullet_pos=(52.86182, 862.9125)
[20:47:22] [INFO] [Bullet] Using shooter_position, distance=566.666687011719
[20:47:22] [INFO] [Bullet] Distance to wall: 566.666687011719 (38.5853767267834% of viewport)
[20:47:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:22] [INFO] [Bullet] Starting wall penetration at (52.86182, 862.9125)
[20:47:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17.1401863098145
[20:47:22] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:22] [INFO] [Bullet] Exiting penetration at (15.12779, 869.6644) after traveling 33.3333358764648 pixels through wall
[20:47:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:47:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(389.72244, 770.6786), shooter_id=2328979572959, bullet_pos=(914.502, 755.47363)
[20:47:22] [INFO] [Bullet] Using shooter_position, distance=524,99976
[20:47:22] [INFO] [Bullet] Distance to wall: 524,99976 (35,7482% of viewport)
[20:47:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:22] [INFO] [Bullet] Starting wall penetration at (914.502, 755.47363)
[20:47:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16,826332
[20:47:22] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:22] [INFO] [Bullet] Exiting penetration at (952.8193, 754.3634) after traveling 33,333336 pixels through wall
[20:47:22] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:47:22] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:47:22] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:47:22] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[20:47:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[20:47:22] [ENEMY] [Enemy10] FLANKING started: target=(647.6844, 737.7681), side=left, pos=(1022.64, 1432.302)
[20:47:22] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:47:23] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[20:47:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(629.1569, 852.7607), source=ENEMY (Enemy3), range=1469, listeners=10
[20:47:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:23] [INFO] [LastChance] Threat detected: Bullet
[20:47:23] [INFO] [LastChance] Triggering last chance effect!
[20:47:23] [INFO] [LastChance] Starting last chance effect:
[20:47:23] [INFO] [LastChance]   - Time will be frozen (except player)
[20:47:23] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:47:23] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:47:23] [INFO] [LastChance]   - Brightness: 0.60
[20:47:23] [INFO] [LastChance] Pushed bullet Bullet from distance 117.8 to 200.0
[20:47:23] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:47:23] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:47:23] [INFO] [LastChance] Skipping player node: Player
[20:47:23] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:47:23] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1811
[20:47:23] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1813
[20:47:23] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1815
[20:47:23] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1821
[20:47:23] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1823
[20:47:23] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1826
[20:47:23] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1829
[20:47:23] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1832
[20:47:23] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1835
[20:47:23] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1838
[20:47:23] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1843
[20:47:23] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1847
[20:47:23] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1857
[20:47:23] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:47:23] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:47:23] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:47:23] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1861
[20:47:23] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1861
[20:47:23] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1862
[20:47:23] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1862
[20:47:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(588.1285, 735.6317), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:23] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[20:47:23] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1863
[20:47:23] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1863
[20:47:23] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1864
[20:47:23] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1864
[20:47:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(591.1862, 735.6317), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:23] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[20:47:23] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1865
[20:47:23] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1865
[20:47:23] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1866
[20:47:23] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1866
[20:47:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(580.5906, 735.6317), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:23] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[20:47:24] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1867
[20:47:24] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1867
[20:47:24] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1868
[20:47:24] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1868
[20:47:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(556.3417, 735.6317), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[20:47:24] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1869
[20:47:24] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1869
[20:47:24] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1870
[20:47:24] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1870
[20:47:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(521.746, 735.6317), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[20:47:25] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1871
[20:47:25] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1871
[20:47:25] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1872
[20:47:25] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1872
[20:47:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(396.3897, 963.0846), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:25] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=4
[20:47:25] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1873
[20:47:25] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1873
[20:47:25] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1874
[20:47:25] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1874
[20:47:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(390.4646, 996.9303), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:25] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=4
[20:47:25] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1875
[20:47:25] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1875
[20:47:25] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1876
[20:47:25] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1876
[20:47:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(369.3914, 1026.701), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:25] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[20:47:25] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1877
[20:47:25] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1877
[20:47:25] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1878
[20:47:25] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1878
[20:47:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(342.1677, 1053.925), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=4
[20:47:25] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1879
[20:47:25] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1879
[20:47:25] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1880
[20:47:25] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1880
[20:47:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(312.2653, 1074.681), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=4
[20:47:25] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1881
[20:47:25] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1881
[20:47:25] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1882
[20:47:25] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1882
[20:47:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(276.1598, 1080.462), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=4
[20:47:26] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1883
[20:47:26] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1883
[20:47:26] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1884
[20:47:26] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1884
[20:47:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(238.4251, 1082.31), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[20:47:26] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1885
[20:47:26] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1885
[20:47:26] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1886
[20:47:26] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1886
[20:47:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(206.1756, 1097.4), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[20:47:26] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[20:47:26] [ENEMY] [Enemy1] Player reloading state changed: false -> true
[20:47:26] [ENEMY] [Enemy2] Player reloading state changed: false -> true
[20:47:26] [ENEMY] [Enemy3] Player reloading state changed: false -> true
[20:47:26] [ENEMY] [Enemy4] Player reloading state changed: false -> true
[20:47:26] [ENEMY] [Enemy5] Player reloading state changed: false -> true
[20:47:26] [ENEMY] [Enemy6] Player reloading state changed: false -> true
[20:47:26] [ENEMY] [Enemy7] Player reloading state changed: false -> true
[20:47:26] [ENEMY] [Enemy8] Player reloading state changed: false -> true
[20:47:26] [ENEMY] [Enemy9] Player reloading state changed: false -> true
[20:47:26] [ENEMY] [Enemy10] Player reloading state changed: false -> true
[20:47:26] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(148.2378, 1209.825), source=PLAYER (Player), range=900, listeners=10
[20:47:26] [ENEMY] [Enemy4] Heard player RELOAD at (148.2378, 1209.825), intensity=0.01, distance=486
[20:47:26] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=4
[20:47:26] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[20:47:27] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
[20:47:27] [ENEMY] [Enemy1] Player reloading state changed: true -> false
[20:47:27] [ENEMY] [Enemy2] Player reloading state changed: true -> false
[20:47:27] [ENEMY] [Enemy3] Player reloading state changed: true -> false
[20:47:27] [ENEMY] [Enemy4] Player reloading state changed: true -> false
[20:47:27] [ENEMY] [Enemy5] Player reloading state changed: true -> false
[20:47:27] [ENEMY] [Enemy6] Player reloading state changed: true -> false
[20:47:27] [ENEMY] [Enemy7] Player reloading state changed: true -> false
[20:47:27] [ENEMY] [Enemy8] Player reloading state changed: true -> false
[20:47:27] [ENEMY] [Enemy9] Player reloading state changed: true -> false
[20:47:27] [ENEMY] [Enemy10] Player reloading state changed: true -> false
[20:47:27] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[20:47:27] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[20:47:27] [INFO] [Player.Reload.Anim] LeftArm: pos=(23.710417, 5.997746), target=(24, 6), base=(24, 6)
[20:47:27] [INFO] [Player.Reload.Anim] RightArm: pos=(-2.0000026, 6.046386), target=(-2, 6), base=(-2, 6)
[20:47:29] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[20:47:29] [INFO] [LastChance] Ending last chance effect
[20:47:29] [ENEMY] [Enemy1] Memory reset (last chance teleport effect)
[20:47:29] [ENEMY] [Enemy2] Memory reset (last chance teleport effect)
[20:47:29] [ENEMY] [Enemy3] Memory reset (last chance teleport effect)
[20:47:29] [ENEMY] [Enemy4] Memory reset (last chance teleport effect)
[20:47:29] [ENEMY] [Enemy5] Memory reset (last chance teleport effect)
[20:47:29] [ENEMY] [Enemy6] Memory reset (last chance teleport effect)
[20:47:29] [ENEMY] [Enemy7] Memory reset (last chance teleport effect)
[20:47:29] [ENEMY] [Enemy8] Memory reset (last chance teleport effect)
[20:47:29] [ENEMY] [Enemy9] Memory reset (last chance teleport effect)
[20:47:29] [ENEMY] [Enemy10] Memory reset (last chance teleport effect)
[20:47:29] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[20:47:29] [INFO] [LastChance] All process modes restored
[20:47:29] [INFO] [LastChance] Unfroze player bullet: @Area2D@1861
[20:47:29] [INFO] [LastChance] Unfroze player bullet: @Area2D@1863
[20:47:29] [INFO] [LastChance] Unfroze player bullet: @Area2D@1865
[20:47:29] [INFO] [LastChance] Unfroze player bullet: @Area2D@1867
[20:47:29] [INFO] [LastChance] Unfroze player bullet: @Area2D@1869
[20:47:29] [INFO] [LastChance] Unfroze player bullet: @Area2D@1871
[20:47:29] [INFO] [LastChance] Unfroze player bullet: @Area2D@1873
[20:47:29] [INFO] [LastChance] Unfroze player bullet: @Area2D@1875
[20:47:29] [INFO] [LastChance] Unfroze player bullet: @Area2D@1877
[20:47:29] [INFO] [LastChance] Unfroze player bullet: @Area2D@1879
[20:47:29] [INFO] [LastChance] Unfroze player bullet: @Area2D@1881
[20:47:29] [INFO] [LastChance] Unfroze player bullet: @Area2D@1883
[20:47:29] [INFO] [LastChance] Unfroze player bullet: @Area2D@1885
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: Casing
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1811
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1813
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1815
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1821
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1823
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1826
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1829
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1832
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1835
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1838
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1843
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1847
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1857
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1862
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1864
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1866
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1868
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1870
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1872
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1874
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1876
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1878
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1880
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1882
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1884
[20:47:29] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1886
[20:47:29] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:47:29] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[20:47:29] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
[20:47:29] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:47:29] [ENEMY] [Enemy3] Hit taken, health: 0/4
[20:47:29] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:29] [INFO] [ImpactEffects] spawn_blood_effect called at (620.5744, 848.4595), dir=(1, 0), lethal=true
[20:47:29] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:29] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:47:29] [INFO] [ImpactEffects] Wall found for blood splatter at (680, 848.4595) (dist=59 px)
[20:47:29] [INFO] [ImpactEffects] Blood effect spawned at (620.5744, 848.4595) (scale=1.5)
[20:47:29] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[20:47:29] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:47:29] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[20:47:29] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[20:47:29] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[20:47:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(566.3475, 826.5771), shooter_id=2326161000042, bullet_pos=(524.4994, 812.7938)
[20:47:29] [INFO] [Bullet] Using shooter_position, distance=44.0595893859863
[20:47:29] [INFO] [Bullet] Distance to wall: 44.0595893859863 (3.00009845973267% of viewport)
[20:47:29] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:47:29] [INFO] [Bullet] Starting wall penetration at (524.4994, 812.7938)
[20:47:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.1186780929565
[20:47:29] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:29] [INFO] [Bullet] Exiting penetration at (491.0413, 794.0856) after traveling 33.3333320617676 pixels through wall
[20:47:29] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:47:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(580.59064, 735.63165), shooter_id=2328979572959, bullet_pos=(679.0331, 1001.3136)
[20:47:29] [INFO] [Bullet] Using shooter_position, distance=283,3334
[20:47:29] [INFO] [Bullet] Distance to wall: 283,3334 (19,292692% of viewport)
[20:47:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:29] [INFO] [Bullet] Starting wall penetration at (679.0331, 1001.3136)
[20:47:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(588.1285, 735.63165), shooter_id=2328979572959, bullet_pos=(605.9989, 1018.4009)
[20:47:29] [INFO] [Bullet] Using shooter_position, distance=283,33334
[20:47:29] [INFO] [Bullet] Distance to wall: 283,33334 (19,292688% of viewport)
[20:47:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:29] [INFO] [Bullet] Starting wall penetration at (605.9989, 1018.4009)
[20:47:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32,72311
[20:47:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 14,139671
[20:47:29] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:29] [INFO] [Bullet] Exiting penetration at (692.3518, 1037.2588) after traveling 33,333336 pixels through wall
[20:47:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:47:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(521.74603, 735.63165), shooter_id=2328979572959, bullet_pos=(677.10034, 1011.5716)
[20:47:29] [INFO] [Bullet] Using shooter_position, distance=316,66672
[20:47:29] [INFO] [Bullet] Distance to wall: 316,66672 (21,56242% of viewport)
[20:47:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:29] [INFO] [Bullet] Starting wall penetration at (677.10034, 1011.5716)
[20:47:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(556.34174, 735.63165), shooter_id=2328979572959, bullet_pos=(689.85144, 1022.7778)
[20:47:29] [INFO] [Bullet] Using shooter_position, distance=316,6666
[20:47:29] [INFO] [Bullet] Distance to wall: 316,6666 (21,56241% of viewport)
[20:47:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:29] [INFO] [Bullet] Starting wall penetration at (689.85144, 1022.7778)
[20:47:29] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:29] [INFO] [Bullet] Exiting penetration at (608.4167, 1056.658) after traveling 33,333336 pixels through wall
[20:47:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:47:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36,985485
[20:47:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24,070587
[20:47:29] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:29] [INFO] [Bullet] Exiting penetration at (695.9064, 1044.9749) after traveling 33,333336 pixels through wall
[20:47:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:47:29] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:29] [INFO] [Bullet] Exiting penetration at (706.0131, 1057.5376) after traveling 33,333336 pixels through wall
[20:47:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:47:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(390.4646, 996.9303), shooter_id=2328979572959, bullet_pos=(898.6773, 1402.1715)
[20:47:29] [INFO] [Bullet] Using shooter_position, distance=650,0004
[20:47:29] [INFO] [Bullet] Distance to wall: 650,0004 (44,259727% of viewport)
[20:47:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(396.38974, 963.0846), shooter_id=2328979572959, bullet_pos=(885.4245, 1440.3575)
[20:47:29] [INFO] [Bullet] Using shooter_position, distance=683,3334
[20:47:29] [INFO] [Bullet] Distance to wall: 683,3334 (46,529427% of viewport)
[20:47:29] [INFO] [Bullet] Distance-based penetration chance: 92,38234%
[20:47:29] [INFO] [Bullet] Penetration failed (distance roll)
[20:47:29] [ENEMY] [Enemy10] Hit taken, health: 2/3
[20:47:29] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:29] [INFO] [ImpactEffects] spawn_blood_effect called at (934.2261, 1390.747), dir=(1, 0), lethal=false
[20:47:29] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:29] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:29] [INFO] [ImpactEffects] Wall found for blood splatter at (988, 1390.747) (dist=53 px)
[20:47:29] [INFO] [ImpactEffects] Blood effect spawned at (934.2261, 1390.747) (scale=1)
[20:47:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(369.39136, 1026.7014), shooter_id=2328979572959, bullet_pos=(1028.3458, 1384.8615)
[20:47:29] [INFO] [Bullet] Using shooter_position, distance=749,99976
[20:47:29] [INFO] [Bullet] Distance to wall: 749,99976 (51,068867% of viewport)
[20:47:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(342.16766, 1053.9247), shooter_id=2328979572959, bullet_pos=(1054.8612, 1379.0087)
[20:47:29] [INFO] [Bullet] Using shooter_position, distance=783,3337
[20:47:29] [INFO] [Bullet] Distance to wall: 783,3337 (53,338634% of viewport)
[20:47:29] [ENEMY] [Enemy10] State: FLANKING -> RETREATING
[20:47:29] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:47:29] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:47:29] [ENEMY] [Enemy3] Ragdoll activated
[20:47:29] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:47:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(312.2653, 1074.6812), shooter_id=2328979572959, bullet_pos=(1682.0276, 1436.2059)
[20:47:29] [INFO] [Bullet] Using shooter_position, distance=1416,6683
[20:47:29] [INFO] [Bullet] Distance to wall: 1416,6683 (96,463554% of viewport)
[20:47:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(276.15976, 1080.462), shooter_id=2328979572959, bullet_pos=(1687.1127, 1414.688)
[20:47:29] [INFO] [Bullet] Using shooter_position, distance=1449,9983
[20:47:29] [INFO] [Bullet] Distance to wall: 1449,9983 (98,733055% of viewport)
[20:47:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(238.42514, 1082.3098), shooter_id=2328979572959, bullet_pos=(1680.1554, 1431.1559)
[20:47:29] [INFO] [Bullet] Using shooter_position, distance=1483,3339
[20:47:29] [INFO] [Bullet] Distance to wall: 1483,3339 (101,00293% of viewport)
[20:47:29] [INFO] [Bullet] Distance-based penetration chance: 29,799414%
[20:47:29] [INFO] [Bullet] Penetration failed (distance roll)
[20:47:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(206.17563, 1097.3998), shooter_id=2328979572959, bullet_pos=(1686.5406, 1427.2471)
[20:47:29] [INFO] [Bullet] Using shooter_position, distance=1516,6674
[20:47:29] [INFO] [Bullet] Distance to wall: 1516,6674 (103,272675% of viewport)
[20:47:29] [INFO] [Bullet] Distance-based penetration chance: 29,345465%
[20:47:29] [INFO] [Bullet] Starting wall penetration at (1686.5406, 1427.2471)
[20:47:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24,544024
[20:47:29] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:29] [INFO] [Bullet] Exiting penetration at (1723.9565, 1435.5839) after traveling 33,333336 pixels through wall
[20:47:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:47:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(312.2653, 1074.6812), shooter_id=2328979572959, bullet_pos=(1514.4102, 1486.4983)
[20:47:29] [INFO] [Bullet] Using shooter_position, distance=1270,7264
[20:47:29] [INFO] [Bullet] Distance to wall: 1270,7264 (86,5261% of viewport)
[20:47:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(276.15976, 1080.462), shooter_id=2328979572959, bullet_pos=(1514.2288, 1441.8186)
[20:47:29] [INFO] [Bullet] Using shooter_position, distance=1289,7261
[20:47:29] [INFO] [Bullet] Distance to wall: 1289,7261 (87,819824% of viewport)
[20:47:29] [INFO] [Bullet] Distance-based penetration chance: 44,210213%
[20:47:29] [INFO] [Bullet] Starting wall penetration at (1514.2288, 1441.8186)
[20:47:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 6,7835503
[20:47:29] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:29] [INFO] [Bullet] Exiting penetration at (1481.2985, 1446.9863) after traveling 28,333336 pixels through wall
[20:47:29] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[20:47:29] [ENEMY] [Enemy4] FLANKING started: target=(65.59715, 1643.446), side=left, pos=(565.1336, 960.3762)
[20:47:29] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[20:47:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(312.2653, 1074.6812), shooter_id=2328979572959, bullet_pos=(1682.493, 1529.8486)
[20:47:29] [INFO] [Bullet] Using shooter_position, distance=1443,8495
[20:47:29] [INFO] [Bullet] Distance to wall: 1443,8495 (98,31437% of viewport)
[20:47:29] [INFO] [Bullet] Distance-based penetration chance: 31,966574%
[20:47:29] [INFO] [Bullet] Starting wall penetration at (1682.493, 1529.8486)
[20:47:29] [ENEMY] [Enemy4] State: FLANKING -> RETREATING
[20:47:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11,003463
[20:47:29] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:29] [INFO] [Bullet] Exiting penetration at (1710.6548, 1537.1118) after traveling 24,083334 pixels through wall
[20:47:29] [INFO] [Bullet] Damage multiplier after penetration: 0,225
[20:47:29] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:47:30] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:47:31] [ENEMY] [Enemy3] Death animation completed
[20:47:31] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[20:47:31] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[20:47:31] [ENEMY] [Enemy1] State: SUPPRESSED -> IN_COVER
[20:47:31] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
[20:47:32] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
[20:47:32] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
[20:47:32] [ENEMY] [Enemy10] State: SUPPRESSED -> IN_COVER
[20:47:32] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
[20:47:32] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[20:47:32] [ENEMY] [Enemy2] FLANKING started: target=(28.54906, 1677.867), side=left, pos=(400, 550)
[20:47:32] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[20:47:33] [ENEMY] [Enemy1] FLANKING started: target=(15.75021, 1694.989), side=left, pos=(273.2674, 401.9334)
[20:47:33] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[20:47:33] [ENEMY] [Enemy4] FLANKING started: target=(65.59715, 1643.446), side=left, pos=(565.1336, 960.3762)
[20:47:33] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[20:47:34] [ENEMY] [Enemy10] FLANKING started: target=(179.5372, 1606.017), side=left, pos=(905.4918, 1375.842)
[20:47:34] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:36] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:47:37] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:37] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[20:47:37] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(94.77217, 1729.395), source=ENEMY (Enemy10), range=1469, listeners=9
[20:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=1, below_threshold=1
[20:47:37] [INFO] [LastChance] Threat detected: Bullet
[20:47:37] [INFO] [LastChance] Effect already used this life
[20:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:47:37] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:47:37] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:47:37] [INFO] [LastChance] Player died
[20:47:37] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(88.50105, 1738.023), source=ENEMY (Enemy10), range=1469, listeners=9
[20:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=1, below_threshold=1
[20:47:37] [INFO] [LastChance] Threat detected: Bullet
[20:47:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:37] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(88.50105, 1738.023), source=ENEMY (Enemy10), range=1469, listeners=9
[20:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=1, below_threshold=1
[20:47:37] [INFO] [LastChance] Threat detected: Bullet
[20:47:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:37] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(88.50105, 1738.023), source=ENEMY (Enemy10), range=1469, listeners=9
[20:47:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=5, self=1, below_threshold=0
[20:47:37] [INFO] [LastChance] Threat detected: Bullet
[20:47:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:37] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(88.50105, 1738.023), source=ENEMY (Enemy10), range=1469, listeners=9
[20:47:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=5, self=1, below_threshold=0
[20:47:37] [INFO] [LastChance] Threat detected: Bullet
[20:47:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:37] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:47:37] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:47:37] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:47:37] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:47:37] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:47:37] [ENEMY] [Enemy1] Death animation component initialized
[20:47:37] [ENEMY] [Enemy2] Death animation component initialized
[20:47:37] [ENEMY] [Enemy3] Death animation component initialized
[20:47:37] [ENEMY] [Enemy4] Death animation component initialized
[20:47:37] [ENEMY] [Enemy5] Death animation component initialized
[20:47:37] [ENEMY] [Enemy6] Death animation component initialized
[20:47:37] [ENEMY] [Enemy7] Death animation component initialized
[20:47:37] [ENEMY] [Enemy8] Death animation component initialized
[20:47:37] [ENEMY] [Enemy9] Death animation component initialized
[20:47:37] [ENEMY] [Enemy10] Death animation component initialized
[20:47:37] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:47:37] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:47:37] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:47:37] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:47:37] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:47:37] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:47:37] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:47:37] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:47:37] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:47:37] [INFO] [ScoreManager] Level started with 10 enemies
[20:47:37] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[20:47:37] [ENEMY] [Enemy1] Registered as sound listener
[20:47:37] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:47:37] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[20:47:37] [ENEMY] [Enemy2] Registered as sound listener
[20:47:37] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:47:37] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[20:47:37] [ENEMY] [Enemy3] Registered as sound listener
[20:47:37] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:47:37] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[20:47:37] [ENEMY] [Enemy4] Registered as sound listener
[20:47:37] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:47:37] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[20:47:37] [ENEMY] [Enemy5] Registered as sound listener
[20:47:37] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:47:37] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[20:47:37] [ENEMY] [Enemy6] Registered as sound listener
[20:47:37] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:47:37] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[20:47:37] [ENEMY] [Enemy7] Registered as sound listener
[20:47:37] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:47:37] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[20:47:37] [ENEMY] [Enemy8] Registered as sound listener
[20:47:37] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:47:37] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[20:47:37] [ENEMY] [Enemy9] Registered as sound listener
[20:47:37] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:47:37] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[20:47:37] [ENEMY] [Enemy10] Registered as sound listener
[20:47:37] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:47:37] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:47:37] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:47:37] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:47:37] [INFO] [LastChance] Found player: Player
[20:47:37] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:47:37] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:47:37] [INFO] [LastChance] Connected to player Died signal (C#)
[20:47:37] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:47:37] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:47:37] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:47:40] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:40] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1151.368, 1574.932), source=ENEMY (Enemy10), range=1469, listeners=19
[20:47:40] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[20:47:40] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:47:40] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:41] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:47:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1094.107, 1538.166), shooter_id=3038790027889, bullet_pos=(62.105, 693.9199)
[20:47:41] [INFO] [Bullet] Using shooter_position, distance=1333.33386230469
[20:47:41] [INFO] [Bullet] Distance to wall: 1333.33386230469 (90.7891544691061% of viewport)
[20:47:41] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:47:41] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:47:41] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:47:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.9239, 787.5493), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:41] [ENEMY] [Enemy1] Heard gunshot at (450.9239, 787.5493), source_type=0, intensity=0.01, distance=463
[20:47:41] [ENEMY] [Enemy2] Heard gunshot at (450.9239, 787.5493), source_type=0, intensity=0.04, distance=243
[20:47:41] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:47:41] [ENEMY] [Enemy3] Hit taken, health: 2/3
[20:47:41] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:41] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(1, 0), lethal=false
[20:47:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:41] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:41] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=1)
[20:47:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[20:47:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(462.981, 755.6038), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:41] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:47:41] [INFO] [LastChance] Threat detected: @Area2D@2181
[20:47:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1094.107, 1538.166), shooter_id=3038790027889, bullet_pos=(510.4955, 374.695)
[20:47:41] [INFO] [Bullet] Using shooter_position, distance=1301.64001464844
[20:47:41] [INFO] [Bullet] Distance to wall: 1301.64001464844 (88.6310621023452% of viewport)
[20:47:41] [INFO] [Bullet] Distance-based penetration chance: 43.2637608805973%
[20:47:41] [INFO] [Bullet] Penetration failed (distance roll)
[20:47:41] [ENEMY] [Enemy3] Hit taken, health: 1/3
[20:47:41] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:41] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(1, 0), lethal=false
[20:47:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:41] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:41] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=1)
[20:47:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[20:47:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(483.5449, 735.4413), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:41] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:47:41] [INFO] [LastChance] Threat detected: Bullet
[20:47:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:41] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:47:41] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:47:41] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:47:41] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:47:41] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:47:41] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:47:41] [ENEMY] [Enemy3] Hit taken, health: 0/3
[20:47:41] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:41] [INFO] [ImpactEffects] spawn_blood_effect called at (687.673, 756.5524), dir=(1, 0), lethal=true
[20:47:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:41] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:47:41] [INFO] [ImpactEffects] Blood effect spawned at (687.673, 756.5524) (scale=1.5)
[20:47:41] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[20:47:41] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:47:41] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[20:47:41] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[20:47:41] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[20:47:41] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:47:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(707.5191, 914.0657), source=ENEMY (Enemy4), range=1469, listeners=9
[20:47:41] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[20:47:41] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:47:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(510.9364, 737.2334), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:47:41] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
[20:47:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.669, 761.2969), shooter_id=3036793538480, bullet_pos=(50.00651, 759.1231)
[20:47:41] [INFO] [Bullet] Using shooter_position, distance=566.666625976563
[20:47:41] [INFO] [Bullet] Distance to wall: 566.666625976563 (38.5853725707874% of viewport)
[20:47:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:41] [INFO] [Bullet] Starting wall penetration at (50.00651, 759.1231)
[20:47:41] [INFO] [LastChance] Threat detected: Bullet
[20:47:41] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:47:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.3266868591309
[20:47:41] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:41] [INFO] [Bullet] Exiting penetration at (11.67346, 758.9761) after traveling 33.3333320617676 pixels through wall
[20:47:41] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:47:41] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:47:41] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:47:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.8389, 914.0652), source=ENEMY (Enemy4), range=1469, listeners=9
[20:47:41] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[20:47:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.2305, 874.3949), shooter_id=3037078752260, bullet_pos=(454.8146, 695.1239)
[20:47:41] [INFO] [Bullet] Using shooter_position, distance=266.666717529297
[20:47:41] [INFO] [Bullet] Distance to wall: 266.666717529297 (18.1578271534248% of viewport)
[20:47:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:41] [INFO] [LastChance] Threat detected: @Area2D@2195
[20:47:41] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:47:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:41] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:47:41] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:47:41] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:47:41] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:47:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
[20:47:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:47:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(510.93643, 737.2334), shooter_id=3039612112140, bullet_pos=(930.7191, 803.62384)
[20:47:41] [INFO] [Bullet] Using shooter_position, distance=425,0002
[20:47:41] [INFO] [Bullet] Distance to wall: 425,0002 (28,939047% of viewport)
[20:47:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:41] [INFO] [Bullet] Starting wall penetration at (930.7191, 803.62384)
[20:47:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32,986813
[20:47:41] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:41] [INFO] [Bullet] Exiting penetration at (968.58185, 809.612) after traveling 33,333336 pixels through wall
[20:47:41] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:47:41] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:47:42] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.8389, 914.0652), source=ENEMY (Enemy4), range=1469, listeners=9
[20:47:42] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[20:47:42] [INFO] [LastChance] Threat detected: @Area2D@2200
[20:47:42] [INFO] [LastChance] Triggering last chance effect!
[20:47:42] [INFO] [LastChance] Starting last chance effect:
[20:47:42] [INFO] [LastChance]   - Time will be frozen (except player)
[20:47:42] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:47:42] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:47:42] [INFO] [LastChance]   - Brightness: 0.60
[20:47:42] [INFO] [LastChance] Pushed bullet @Area2D@2198 from distance 107.5 to 200.0
[20:47:42] [INFO] [LastChance] Pushed bullet @Area2D@2200 from distance 124.2 to 200.0
[20:47:42] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[20:47:42] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:47:42] [INFO] [LastChance] Skipping player node: Player
[20:47:42] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:47:42] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2180
[20:47:42] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2182
[20:47:42] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2184
[20:47:42] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2187
[20:47:42] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2189
[20:47:42] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2191
[20:47:42] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2193
[20:47:42] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2196
[20:47:42] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2201
[20:47:42] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:47:42] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:47:42] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:47:42] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2213
[20:47:42] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2213
[20:47:42] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@2214
[20:47:42] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@2214
[20:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(578.813, 875.5914), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:47:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[20:47:42] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2216
[20:47:42] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2216
[20:47:42] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@2217
[20:47:42] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@2217
[20:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(578.813, 900.1248), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:47:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[20:47:42] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2220
[20:47:42] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2220
[20:47:42] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@2221
[20:47:42] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@2221
[20:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(578.813, 913.067), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:47:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[20:47:42] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2222
[20:47:42] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2222
[20:47:42] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@2223
[20:47:42] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@2223
[20:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(578.813, 912.7114), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:47:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[20:47:45] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[20:47:48] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[20:47:48] [INFO] [LastChance] Ending last chance effect
[20:47:48] [ENEMY] [Enemy1] Memory reset (last chance teleport effect)
[20:47:48] [ENEMY] [Enemy2] Memory reset (last chance teleport effect)
[20:47:48] [ENEMY] [Enemy4] Memory reset (last chance teleport effect)
[20:47:48] [ENEMY] [Enemy5] Memory reset (last chance teleport effect)
[20:47:48] [ENEMY] [Enemy6] Memory reset (last chance teleport effect)
[20:47:48] [ENEMY] [Enemy7] Memory reset (last chance teleport effect)
[20:47:48] [ENEMY] [Enemy8] Memory reset (last chance teleport effect)
[20:47:48] [ENEMY] [Enemy9] Memory reset (last chance teleport effect)
[20:47:48] [ENEMY] [Enemy10] Memory reset (last chance teleport effect)
[20:47:48] [INFO] [LastChance] Reset memory for 9 enemies (player teleport effect)
[20:47:48] [INFO] [LastChance] All process modes restored
[20:47:48] [INFO] [LastChance] Unfroze player bullet: @Area2D@2213
[20:47:48] [INFO] [LastChance] Unfroze player bullet: @Area2D@2216
[20:47:48] [INFO] [LastChance] Unfroze player bullet: @Area2D@2220
[20:47:48] [INFO] [LastChance] Unfroze player bullet: @Area2D@2222
[20:47:48] [INFO] [LastChance] Unfroze bullet casing: Casing
[20:47:48] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2180
[20:47:48] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2182
[20:47:48] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2184
[20:47:48] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2187
[20:47:48] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2189
[20:47:48] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2191
[20:47:48] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2193
[20:47:48] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2196
[20:47:48] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2201
[20:47:48] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2214
[20:47:48] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2217
[20:47:48] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2221
[20:47:48] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2223
[20:47:48] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:47:48] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[20:47:48] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1048.179, 1477.076), source=ENEMY (Enemy10), range=1469, listeners=9
[20:47:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=8
[20:47:48] [INFO] [LastChance] Threat detected: @Area2D@2224
[20:47:48] [INFO] [LastChance] Effect already used this life
[20:47:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:48] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[20:47:48] [ENEMY] [Enemy4] Hit taken, health: 1/2
[20:47:48] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:48] [INFO] [ImpactEffects] spawn_blood_effect called at (683.8389, 914.0652), dir=(1, 0), lethal=false
[20:47:48] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:48] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:48] [INFO] [ImpactEffects] Blood effect spawned at (683.8389, 914.0652) (scale=1)
[20:47:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(578.813, 912.71136), shooter_id=3039612112140, bullet_pos=(685.05365, 1018.6024)
[20:47:48] [INFO] [Bullet] Using shooter_position, distance=149,99997
[20:47:48] [INFO] [Bullet] Distance to wall: 149,99997 (10,213774% of viewport)
[20:47:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(578.813, 913.06696), shooter_id=3039612112140, bullet_pos=(688.83075, 1015.0282)
[20:47:48] [INFO] [Bullet] Using shooter_position, distance=150,00002
[20:47:48] [INFO] [Bullet] Distance to wall: 150,00002 (10,213778% of viewport)
[20:47:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(578.813, 900.12476), shooter_id=3039612112140, bullet_pos=(765.14685, 1010.68756)
[20:47:48] [INFO] [Bullet] Using shooter_position, distance=216,66666
[20:47:48] [INFO] [Bullet] Distance to wall: 216,66666 (14,753231% of viewport)
[20:47:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:48] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1048.179, 1477.076), source=ENEMY (Enemy10), range=1469, listeners=9
[20:47:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=8
[20:47:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(633.7528, 868.0002), shooter_id=3037078752260, bullet_pos=(488.8833, 707.631)
[20:47:48] [INFO] [Bullet] Using shooter_position, distance=216.114501953125
[20:47:48] [INFO] [Bullet] Distance to wall: 216.114501953125 (14.7156338375156% of viewport)
[20:47:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:48] [INFO] [LastChance] Threat detected: @Area2D@2228
[20:47:48] [INFO] [LastChance] Effect already used this life
[20:47:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(432.7647, 609.6674), shooter_id=3036508325942, bullet_pos=(744.8256, 818.3151)
[20:47:48] [INFO] [Bullet] Using shooter_position, distance=375.387603759766
[20:47:48] [INFO] [Bullet] Distance to wall: 375.387603759766 (25.5608322169387% of viewport)
[20:47:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.2305, 874.3949), shooter_id=3037078752260, bullet_pos=(63.75452, 1102.342)
[20:47:48] [INFO] [Bullet] Using shooter_position, distance=631.081481933594
[20:47:48] [INFO] [Bullet] Distance to wall: 631.081481933594 (42.9714985613772% of viewport)
[20:47:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(578.813, 900.12476), shooter_id=3039612112140, bullet_pos=(926.96783, 887.568)
[20:47:48] [INFO] [Bullet] Using shooter_position, distance=348,38123
[20:47:48] [INFO] [Bullet] Distance to wall: 348,38123 (23,721918% of viewport)
[20:47:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(578.813, 913.06696), shooter_id=3039612112140, bullet_pos=(912.4305, 832.9865)
[20:47:48] [INFO] [Bullet] Using shooter_position, distance=343,09402
[20:47:48] [INFO] [Bullet] Distance to wall: 343,09402 (23,361904% of viewport)
[20:47:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:48] [INFO] [Bullet] Starting wall penetration at (912.4305, 832.9865)
[20:47:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 2,9402812
[20:47:48] [INFO] [Bullet] Max penetration distance exceeded: 56,666664 >= 48
[20:47:48] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:48] [INFO] [Bullet] Exiting penetration at (960.2524, 794.05273) after traveling 56,666664 pixels through wall
[20:47:48] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[20:47:48] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[20:47:48] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1048.179, 1477.076), source=ENEMY (Enemy10), range=1469, listeners=9
[20:47:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=8
[20:47:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(578.813, 912.71136), shooter_id=3039612112140, bullet_pos=(923.574, 731.3989)
[20:47:48] [INFO] [Bullet] Using shooter_position, distance=389,5309
[20:47:48] [INFO] [Bullet] Distance to wall: 389,5309 (26,523876% of viewport)
[20:47:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:48] [INFO] [LastChance] Threat detected: @Area2D@2235
[20:47:48] [INFO] [LastChance] Effect already used this life
[20:47:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:48] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:47:48] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:47:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(432.7647, 609.6674), shooter_id=3036508325942, bullet_pos=(916.1671, 662.3937)
[20:47:48] [INFO] [Bullet] Using shooter_position, distance=486.269409179688
[20:47:48] [INFO] [Bullet] Distance to wall: 486.269409179688 (33.1109782416424% of viewport)
[20:47:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:48] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1048.179, 1477.076), source=ENEMY (Enemy10), range=1469, listeners=9
[20:47:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=8
[20:47:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1052.478, 1544.988), shooter_id=3038790027889, bullet_pos=(1146.954, 2069.887)
[20:47:48] [INFO] [Bullet] Using shooter_position, distance=533.333068847656
[20:47:48] [INFO] [Bullet] Distance to wall: 533.333068847656 (36.3156293708735% of viewport)
[20:47:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:48] [INFO] [LastChance] Threat detected: @Area2D@2239
[20:47:48] [INFO] [LastChance] Effect already used this life
[20:47:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.2305, 874.3949), shooter_id=3037078752260, bullet_pos=(356.2675, 1395.903)
[20:47:48] [INFO] [Bullet] Using shooter_position, distance=599.637023925781
[20:47:48] [INFO] [Bullet] Distance to wall: 599.637023925781 (40.8303875943655% of viewport)
[20:47:48] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1048.179, 1477.076), source=ENEMY (Enemy10), range=1469, listeners=9
[20:47:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=8
[20:47:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1059.153, 1544.234), shooter_id=3038790027889, bullet_pos=(1214.035, 2089.323)
[20:47:48] [INFO] [Bullet] Using shooter_position, distance=566.666687011719
[20:47:48] [INFO] [Bullet] Distance to wall: 566.666687011719 (38.5853767267834% of viewport)
[20:47:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:48] [INFO] [LastChance] Threat detected: @Area2D@2244
[20:47:48] [INFO] [LastChance] Effect already used this life
[20:47:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:48] [ENEMY] [Enemy2] Hit taken, health: 2/3
[20:47:48] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:48] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(1, 0), lethal=false
[20:47:48] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:48] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:48] [INFO] [ImpactEffects] Wall found for blood splatter at (500, 550) (dist=100 px)
[20:47:48] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[20:47:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(432.7647, 609.6674), shooter_id=3036508325942, bullet_pos=(522.908, 375.7019)
[20:47:48] [INFO] [Bullet] Using shooter_position, distance=250.730224609375
[20:47:48] [INFO] [Bullet] Distance to wall: 250.730224609375 (17.0726820458809% of viewport)
[20:47:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:48] [INFO] [Bullet] Starting wall penetration at (522.908, 375.7019)
[20:47:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 0.7341313958168
[20:47:48] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:48] [INFO] [Bullet] Max penetration distance exceeded: 48.1666679382324 >= 48
[20:47:48] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:48] [INFO] [Bullet] Exiting penetration at (479.9459, 344.3818) after traveling 48.1666679382324 pixels through wall
[20:47:48] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[20:47:48] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:47:48] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:47:48] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:47:48] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:47:48] [ENEMY] [Enemy1] Death animation component initialized
[20:47:48] [ENEMY] [Enemy2] Death animation component initialized
[20:47:48] [ENEMY] [Enemy3] Death animation component initialized
[20:47:48] [ENEMY] [Enemy4] Death animation component initialized
[20:47:48] [ENEMY] [Enemy5] Death animation component initialized
[20:47:48] [ENEMY] [Enemy6] Death animation component initialized
[20:47:48] [ENEMY] [Enemy7] Death animation component initialized
[20:47:48] [ENEMY] [Enemy8] Death animation component initialized
[20:47:48] [ENEMY] [Enemy9] Death animation component initialized
[20:47:48] [ENEMY] [Enemy10] Death animation component initialized
[20:47:48] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:47:48] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:47:48] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:47:48] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:47:48] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:47:48] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:47:48] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:47:48] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:47:48] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:47:48] [INFO] [ScoreManager] Level started with 10 enemies
[20:47:48] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[20:47:48] [ENEMY] [Enemy1] Registered as sound listener
[20:47:48] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:47:48] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[20:47:48] [ENEMY] [Enemy2] Registered as sound listener
[20:47:48] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:47:48] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[20:47:48] [ENEMY] [Enemy3] Registered as sound listener
[20:47:48] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:47:48] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[20:47:48] [ENEMY] [Enemy4] Registered as sound listener
[20:47:48] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:47:48] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[20:47:48] [ENEMY] [Enemy5] Registered as sound listener
[20:47:48] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:47:48] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[20:47:48] [ENEMY] [Enemy6] Registered as sound listener
[20:47:48] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:47:48] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[20:47:48] [ENEMY] [Enemy7] Registered as sound listener
[20:47:48] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:47:48] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[20:47:48] [ENEMY] [Enemy8] Registered as sound listener
[20:47:48] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:47:48] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[20:47:48] [ENEMY] [Enemy9] Registered as sound listener
[20:47:48] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:47:48] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[20:47:48] [ENEMY] [Enemy10] Registered as sound listener
[20:47:48] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:47:48] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:47:48] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:47:48] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:47:48] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:47:48] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:47:48] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:47:48] [INFO] [LastChance] Found player: Player
[20:47:48] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:47:48] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:47:48] [INFO] [LastChance] Connected to player Died signal (C#)
[20:47:49] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:47:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1143.903, 1519.211), source=ENEMY (Enemy10), range=1469, listeners=19
[20:47:49] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[20:47:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1111.771, 1500.203), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1079.99, 1480.615), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1048.881, 1459.98), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:50] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:47:50] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:47:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1018.649, 1438.082), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1081.565, 1491.872), shooter_id=3354218465285, bullet_pos=(37.8714, 882.9599)
[20:47:50] [INFO] [Bullet] Using shooter_position, distance=1208.33337402344
[20:47:50] [INFO] [Bullet] Distance to wall: 1208.33337402344 (82.277641366406% of viewport)
[20:47:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1049.83, 1471.981), shooter_id=3354218465285, bullet_pos=(50.59385, 869.7861)
[20:47:50] [INFO] [Bullet] Using shooter_position, distance=1166.6669921875
[20:47:50] [INFO] [Bullet] Distance to wall: 1166.6669921875 (79.4405008094768% of viewport)
[20:47:50] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1081.565, 1491.872), shooter_id=3354218465285, bullet_pos=(393.1415, 711.2651)
[20:47:50] [INFO] [Bullet] Using shooter_position, distance=1040.80407714844
[20:47:50] [INFO] [Bullet] Distance to wall: 1040.80407714844 (70.8702634829742% of viewport)
[20:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.801, 1450.756), shooter_id=3354218465285, bullet_pos=(35.83104, 822.3594)
[20:47:50] [INFO] [Bullet] Using shooter_position, distance=1166.66711425781
[20:47:50] [INFO] [Bullet] Distance to wall: 1166.66711425781 (79.4405091214688% of viewport)
[20:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1049.83, 1471.981), shooter_id=3354218465285, bullet_pos=(368.4006, 702.4555)
[20:47:50] [INFO] [Bullet] Using shooter_position, distance=1027.86950683594
[20:47:50] [INFO] [Bullet] Distance to wall: 1027.86950683594 (69.9895248058186% of viewport)
[20:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(988.991, 1427.672), shooter_id=3354218465285, bullet_pos=(66.61443, 783.5853)
[20:47:50] [INFO] [Bullet] Using shooter_position, distance=1125.00073242188
[20:47:50] [INFO] [Bullet] Distance to wall: 1125.00073242188 (76.6033685645396% of viewport)
[20:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.801, 1450.756), shooter_id=3354218465285, bullet_pos=(299.8665, 706.5087)
[20:47:50] [INFO] [Bullet] Using shooter_position, distance=1034.78063964844
[20:47:50] [INFO] [Bullet] Distance to wall: 1034.78063964844 (70.4601165474743% of viewport)
[20:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(988.991, 1427.672), shooter_id=3354218465285, bullet_pos=(150.2876, 710.2684)
[20:47:50] [INFO] [Bullet] Using shooter_position, distance=1103.67199707031
[20:47:50] [INFO] [Bullet] Distance to wall: 1103.67199707031 (75.1510557543657% of viewport)
[20:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1081.565, 1491.872), shooter_id=3354218465285, bullet_pos=(680.1809, 886.2007)
[20:47:50] [INFO] [Bullet] Using shooter_position, distance=726.599243164063
[20:47:50] [INFO] [Bullet] Distance to wall: 726.599243164063 (49.4754785652351% of viewport)
[20:47:50] [INFO] [Bullet] Distance-based penetration chance: 88.9452750072258%
[20:47:50] [INFO] [Bullet] Starting wall penetration at (680.1809, 886.2007)
[20:47:50] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:47:50] [INFO] [Bullet] Exiting penetration at (710.1569, 904.4695) after traveling 30.1041698455811 pixels through wall
[20:47:50] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[20:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(960.1748, 1403.277), shooter_id=3354218465285, bullet_pos=(65.79198, 720.8511)
[20:47:50] [INFO] [Bullet] Using shooter_position, distance=1125.00012207031
[20:47:50] [INFO] [Bullet] Distance to wall: 1125.00012207031 (76.6033270045794% of viewport)
[20:47:50] [INFO] [Bullet] Distance-based penetration chance: 57.2961184946574%
[20:47:50] [INFO] [Bullet] Penetration failed (distance roll)
[20:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1049.83, 1471.981), shooter_id=3354218465285, bullet_pos=(702.8691, 851.6869)
[20:47:50] [INFO] [Bullet] Using shooter_position, distance=710.736694335938
[20:47:50] [INFO] [Bullet] Distance to wall: 710.736694335938 (48.3953684468728% of viewport)
[20:47:50] [ENEMY] [Enemy3] Memory: medium confidence (0.76) - transitioning to PURSUING
[20:47:50] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[20:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.801, 1450.756), shooter_id=3354218465285, bullet_pos=(518.7146, 818.4884)
[20:47:50] [INFO] [Bullet] Using shooter_position, distance=806.131958007813
[20:47:50] [INFO] [Bullet] Distance to wall: 806.131958007813 (54.8910073667128% of viewport)
[20:47:50] [INFO] [Bullet] Distance-based penetration chance: 82.6271580721684%
[20:47:50] [INFO] [Bullet] Penetration failed (distance roll)
[20:47:50] [ENEMY] [Enemy4] Hit taken, health: 3/4
[20:47:50] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:50] [INFO] [ImpactEffects] spawn_blood_effect called at (635.8138, 913.7347), dir=(-0.885325, 0.464973), lethal=false
[20:47:50] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:50] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:50] [INFO] [ImpactEffects] Blood effect spawned at (635.8138, 913.7347) (scale=1)
[20:47:50] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[20:47:50] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:47:50] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:47:50] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[20:47:51] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(619.8925, 915.3197), source=ENEMY (Enemy4), range=1469, listeners=10
[20:47:51] [ENEMY] [Enemy2] Heard gunshot at (619.8925, 915.3197), source_type=1, intensity=0.01, distance=426
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(572.426, 865.5034), shooter_id=3352507188698, bullet_pos=(507.2047, 813.6322)
[20:47:51] [INFO] [Bullet] Using shooter_position, distance=83.3333206176758
[20:47:51] [INFO] [Bullet] Distance to wall: 83.3333206176758 (5.67431903732211% of viewport)
[20:47:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:51] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(619.8925, 915.3197), source=ENEMY (Enemy4), range=1469, listeners=10
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:51] [INFO] [LastChance] Threat detected: @Area2D@2528
[20:47:51] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:51] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(619.8925, 915.3197), source=ENEMY (Enemy4), range=1469, listeners=10
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:51] [INFO] [LastChance] Threat detected: @Area2D@2530
[20:47:51] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:51] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:47:51] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[20:47:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(576.4353, 862.9548), shooter_id=3352507188698, bullet_pos=(462.6426, 688.444)
[20:47:51] [INFO] [Bullet] Using shooter_position, distance=208.333404541016
[20:47:51] [INFO] [Bullet] Distance to wall: 208.333404541016 (14.1858046065486% of viewport)
[20:47:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:51] [INFO] [Bullet] Starting wall penetration at (462.6426, 688.444)
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(534.8359, 730.9431), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[20:47:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.1365547180176
[20:47:51] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:51] [INFO] [Bullet] Exiting penetration at (437.153, 649.3536) after traveling 41.6666641235352 pixels through wall
[20:47:51] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:47:51] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(635.892, 915.191), source=ENEMY (Enemy4), range=1469, listeners=10
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(578.7192, 860.6942), shooter_id=3352507188698, bullet_pos=(458.7299, 690.3846)
[20:47:51] [INFO] [Bullet] Using shooter_position, distance=208.333297729492
[20:47:51] [INFO] [Bullet] Distance to wall: 208.333297729492 (14.1857973335555% of viewport)
[20:47:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:51] [INFO] [Bullet] Starting wall penetration at (458.7299, 690.3846)
[20:47:51] [INFO] [LastChance] Threat detected: @Area2D@2535
[20:47:51] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 43.7495498657227
[20:47:51] [ENEMY] [Enemy3] Hit taken, health: 3/4
[20:47:51] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:51] [INFO] [ImpactEffects] spawn_blood_effect called at (601.0634, 817.995), dir=(-0.469108, -0.883141), lethal=false
[20:47:51] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:51] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:51] [INFO] [ImpactEffects] Blood effect spawned at (601.0634, 817.995) (scale=1)
[20:47:51] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:51] [INFO] [Bullet] Exiting penetration at (431.8523, 652.2354) after traveling 41.6666679382324 pixels through wall
[20:47:51] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:47:51] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[20:47:51] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[20:47:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(534.83594, 730.94305), shooter_id=3355040549288, bullet_pos=(700.6642, 827.05286)
[20:47:51] [INFO] [Bullet] Using shooter_position, distance=191,66664
[20:47:51] [INFO] [Bullet] Distance to wall: 191,66664 (13,050935% of viewport)
[20:47:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:51] [INFO] [Bullet] Starting wall penetration at (700.6642, 827.05286)
[20:47:51] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:47:51] [INFO] [Bullet] Exiting penetration at (741.03973, 850.4535) after traveling 41,66667 pixels through wall
[20:47:51] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:47:51] [INFO] [LastChance] Threat detected: @Area2D@2541
[20:47:51] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(561.5266, 735.5997), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(670.6816, 923.2562), source=ENEMY (Enemy4), range=1469, listeners=10
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:51] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:47:51] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:47:51] [INFO] [LastChance] Threat detected: @Area2D@2546
[20:47:51] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:47:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:51] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[20:47:51] [INFO] [LastChance] Threat detected: @Area2D@2548
[20:47:51] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:47:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(572.6017, 741.241), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[20:47:51] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.7214, 932.8605), source=ENEMY (Enemy4), range=1469, listeners=10
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:51] [INFO] [LastChance] Threat detected: @Area2D@2551
[20:47:51] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:47:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:51] [ENEMY] [Enemy3] Hit taken, health: 2/4
[20:47:51] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:51] [INFO] [ImpactEffects] spawn_blood_effect called at (555.2053, 843.0724), dir=(1, 0), lethal=false
[20:47:51] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:51] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:51] [INFO] [ImpactEffects] Blood effect spawned at (555.2053, 843.0724) (scale=1)
[20:47:51] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[20:47:51] [INFO] [LastChance] Threat detected: Bullet
[20:47:51] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:47:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(440.1261, 604.9591), shooter_id=3351936764857, bullet_pos=(677.5512, 862.1154)
[20:47:51] [INFO] [Bullet] Using shooter_position, distance=350.000030517578
[20:47:51] [INFO] [Bullet] Distance to wall: 350.000030517578 (23.8321456712474% of viewport)
[20:47:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:51] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:47:51] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:47:51] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(568.9645, 744.7075), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[20:47:51] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[20:47:51] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:47:51] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:47:51] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:47:51] [INFO] [LastChance] Player died
[20:47:51] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:47:51] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[20:47:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(440.1261, 604.9591), shooter_id=3351936764857, bullet_pos=(579.6011, 1007.135)
[20:47:51] [INFO] [Bullet] Using shooter_position, distance=425.6748046875
[20:47:51] [INFO] [Bullet] Distance to wall: 425.6748046875 (28.9849801981168% of viewport)
[20:47:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(632.9412, 870.7041), shooter_id=3352507188698, bullet_pos=(285.1325, 253.6425)
[20:47:51] [INFO] [Bullet] Using shooter_position, distance=708.333190917969
[20:47:51] [INFO] [Bullet] Distance to wall: 708.333190917969 (48.2317094794902% of viewport)
[20:47:51] [INFO] [LastChance] Threat detected: Bullet
[20:47:51] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(551.9587, 746.7778), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[20:47:51] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:47:51] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:47:51] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[20:47:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(551.9587, 746.77783), shooter_id=3355040549288, bullet_pos=(526.7303, 834.90454)
[20:47:51] [INFO] [Bullet] Using shooter_position, distance=91,666725
[20:47:51] [INFO] [Bullet] Distance to wall: 91,666725 (6,241756% of viewport)
[20:47:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(440.1261, 604.9591), shooter_id=3351936764857, bullet_pos=(522.7713, 895.3332)
[20:47:51] [INFO] [Bullet] Using shooter_position, distance=301.906188964844
[20:47:51] [INFO] [Bullet] Distance to wall: 301.906188964844 (20.5573475631453% of viewport)
[20:47:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:51] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(571.8246, 874.2576), source=ENEMY (Enemy3), range=1469, listeners=10
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:51] [INFO] [LastChance] Threat detected: @Area2D@2567
[20:47:51] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:51] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:47:51] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:47:51] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:47:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(551.9587, 746.77783), shooter_id=3355040549288, bullet_pos=(586.4683, 999.39264)
[20:47:51] [INFO] [Bullet] Using shooter_position, distance=254,96109
[20:47:51] [INFO] [Bullet] Distance to wall: 254,96109 (17,360771% of viewport)
[20:47:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:51] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
[20:47:51] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(512.7503, 747.3231), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[20:47:51] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[20:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(590.962, 887.5618), source=ENEMY (Enemy3), range=1469, listeners=10
[20:47:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:47:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(512.7503, 747.3231), shooter_id=3355040549288, bullet_pos=(516.4087, 805.5416)
[20:47:51] [INFO] [Bullet] Using shooter_position, distance=58,33334
[20:47:51] [INFO] [Bullet] Distance to wall: 58,33334 (3,9720244% of viewport)
[20:47:51] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:47:51] [INFO] [Bullet] Starting wall penetration at (516.4087, 805.5416)
[20:47:51] [INFO] [LastChance] Threat detected: @Area2D@2572
[20:47:51] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:51] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:47:51] [INFO] [Bullet] Exiting penetration at (518.8128, 843.7995) after traveling 33,333336 pixels through wall
[20:47:51] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:47:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(632.9412, 870.7041), shooter_id=3352507188698, bullet_pos=(64.64986, 589.3859)
[20:47:51] [INFO] [Bullet] Using shooter_position, distance=634.109619140625
[20:47:51] [INFO] [Bullet] Distance to wall: 634.109619140625 (43.1776899920573% of viewport)
[20:47:52] [ENEMY] [Enemy3] Hit taken, health: 1/4
[20:47:52] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:52] [INFO] [ImpactEffects] spawn_blood_effect called at (596.4956, 889.8112), dir=(1, 0), lethal=false
[20:47:52] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:52] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:52] [INFO] [ImpactEffects] Wall found for blood splatter at (680, 889.8112) (dist=83 px)
[20:47:52] [INFO] [ImpactEffects] Blood effect spawned at (596.4956, 889.8112) (scale=1)
[20:47:52] [ENEMY] [Enemy10] FLANKING started: target=(680.9387, 721.2327), side=left, pos=(968.7163, 1417.105)
[20:47:52] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:47:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(632.9412, 870.7041), shooter_id=3352507188698, bullet_pos=(164.4308, 700.7145)
[20:47:52] [INFO] [Bullet] Using shooter_position, distance=498.395904541016
[20:47:52] [INFO] [Bullet] Distance to wall: 498.395904541016 (33.936693609454% of viewport)
[20:47:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:52] [INFO] [Bullet] Starting wall penetration at (164.4308, 700.7145)
[20:47:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13.9283714294434
[20:47:52] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:52] [INFO] [Bullet] Exiting penetration at (183.8419, 722.3721) after traveling 24.0833339691162 pixels through wall
[20:47:52] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[20:47:52] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:47:52] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:47:52] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[20:47:52] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:47:52] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:47:52] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:47:52] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:47:52] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:47:52] [ENEMY] [Enemy1] Death animation component initialized
[20:47:52] [ENEMY] [Enemy2] Death animation component initialized
[20:47:52] [ENEMY] [Enemy3] Death animation component initialized
[20:47:52] [ENEMY] [Enemy4] Death animation component initialized
[20:47:52] [ENEMY] [Enemy5] Death animation component initialized
[20:47:52] [ENEMY] [Enemy6] Death animation component initialized
[20:47:52] [ENEMY] [Enemy7] Death animation component initialized
[20:47:52] [ENEMY] [Enemy8] Death animation component initialized
[20:47:52] [ENEMY] [Enemy9] Death animation component initialized
[20:47:52] [ENEMY] [Enemy10] Death animation component initialized
[20:47:52] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:47:52] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:47:52] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:47:52] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:47:52] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:47:52] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:47:52] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:47:52] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:47:52] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:47:52] [INFO] [ScoreManager] Level started with 10 enemies
[20:47:52] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:47:52] [ENEMY] [Enemy1] Registered as sound listener
[20:47:52] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:47:52] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:47:52] [ENEMY] [Enemy2] Registered as sound listener
[20:47:52] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:47:52] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:47:52] [ENEMY] [Enemy3] Registered as sound listener
[20:47:52] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:47:52] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:47:52] [ENEMY] [Enemy4] Registered as sound listener
[20:47:52] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:47:52] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:47:52] [ENEMY] [Enemy5] Registered as sound listener
[20:47:52] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:47:52] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:47:52] [ENEMY] [Enemy6] Registered as sound listener
[20:47:52] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:47:52] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:47:52] [ENEMY] [Enemy7] Registered as sound listener
[20:47:52] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:47:52] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:47:52] [ENEMY] [Enemy8] Registered as sound listener
[20:47:52] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:47:52] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:47:52] [ENEMY] [Enemy9] Registered as sound listener
[20:47:52] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:47:52] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:47:52] [ENEMY] [Enemy10] Registered as sound listener
[20:47:52] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:47:52] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:47:52] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:47:52] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:47:52] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:47:52] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:47:52] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:47:52] [INFO] [LastChance] Found player: Player
[20:47:52] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:47:52] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:47:52] [INFO] [LastChance] Connected to player Died signal (C#)
[20:47:52] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:53] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.731, 1535.008), source=ENEMY (Enemy10), range=1469, listeners=20
[20:47:53] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:47:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:47:53] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1139.423, 1516.307), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:53] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1107.906, 1496.302), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:53] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1077.226, 1475.035), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:53] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:47:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1047.428, 1452.549), source=ENEMY (Enemy10), range=1469, listeners=10
[20:47:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:47:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=3613929769465, bullet_pos=(53.14801, 921.1365)
[20:47:53] [INFO] [Bullet] Using shooter_position, distance=1208.33337402344
[20:47:53] [INFO] [Bullet] Distance to wall: 1208.33337402344 (82.277641366406% of viewport)
[20:47:53] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:47:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=3613929769465, bullet_pos=(46.85162, 857.2495)
[20:47:53] [INFO] [Bullet] Using shooter_position, distance=1208.33435058594
[20:47:53] [INFO] [Bullet] Distance to wall: 1208.33435058594 (82.2777078623423% of viewport)
[20:47:53] [INFO] [Bullet] Distance-based penetration chance: 50.676007493934%
[20:47:53] [INFO] [Bullet] Penetration failed (distance roll)
[20:47:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=3613929769465, bullet_pos=(380.3011, 700.5305)
[20:47:53] [INFO] [Bullet] Using shooter_position, distance=1088.27514648438
[20:47:53] [INFO] [Bullet] Distance to wall: 1088.27514648438 (74.1026558856576% of viewport)
[20:47:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=3613929769465, bullet_pos=(43.06916, 793.3154)
[20:47:53] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[20:47:53] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[20:47:53] [INFO] [Bullet] Distance-based penetration chance: 50.6760753752023%
[20:47:53] [INFO] [Bullet] Starting wall penetration at (43.06916, 793.3154)
[20:47:53] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33.3488731384277
[20:47:53] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:53] [INFO] [Bullet] Exiting penetration at (4.281879, 767.3669) after traveling 41.6666679382324 pixels through wall
[20:47:53] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:47:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.01, 1441.508), shooter_id=3613929769465, bullet_pos=(41.67921, 729.5751)
[20:47:53] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[20:47:53] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[20:47:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=3613929769465, bullet_pos=(686.8627, 838.4219)
[20:47:53] [INFO] [Bullet] Using shooter_position, distance=792.266723632813
[20:47:53] [INFO] [Bullet] Distance to wall: 792.266723632813 (53.9468980622012% of viewport)
[20:47:53] [INFO] [Bullet] Distance-based penetration chance: 83.7286189274319%
[20:47:53] [INFO] [Bullet] Starting wall penetration at (686.8627, 838.4219)
[20:47:53] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:47:53] [INFO] [Bullet] Exiting penetration at (718.8774, 852.8221) after traveling 30.1041717529297 pixels through wall
[20:47:53] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[20:47:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.01, 1441.508), shooter_id=3613929769465, bullet_pos=(103.7583, 686.0218)
[20:47:53] [INFO] [Bullet] Using shooter_position, distance=1186.00805664063
[20:47:53] [INFO] [Bullet] Distance to wall: 1186.00805664063 (80.7574694531715% of viewport)
[20:47:53] [INFO] [Bullet] Distance-based penetration chance: 52.4496189712999%
[20:47:53] [INFO] [Bullet] Penetration failed (distance roll)
[20:47:54] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:47:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=3613929769465, bullet_pos=(42.53408, 666.2555)
[20:47:54] [INFO] [Bullet] Using shooter_position, distance=1208.33422851563
[20:47:54] [INFO] [Bullet] Distance to wall: 1208.33422851563 (82.2776995503503% of viewport)
[20:47:54] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:47:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(452.9938, 777.5632), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:54] [ENEMY] [Enemy1] Heard gunshot at (452.9938, 777.5632), source_type=0, intensity=0.01, distance=454
[20:47:54] [ENEMY] [Enemy2] Heard gunshot at (452.9938, 777.5632), source_type=0, intensity=0.05, distance=234
[20:47:54] [ENEMY] [Enemy4] Heard gunshot at (452.9938, 777.5632), source_type=0, intensity=0.02, distance=368
[20:47:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:47:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=3613929769465, bullet_pos=(339.5338, 464.2855)
[20:47:54] [INFO] [Bullet] Using shooter_position, distance=1153.10083007813
[20:47:54] [INFO] [Bullet] Distance to wall: 1153.10083007813 (78.516755885477% of viewport)
[20:47:54] [ENEMY] [Enemy3] Hit taken, health: 2/3
[20:47:54] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:54] [INFO] [ImpactEffects] spawn_blood_effect called at (664.379, 770.4965), dir=(1, 0), lethal=false
[20:47:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:54] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:54] [INFO] [ImpactEffects] Blood effect spawned at (664.379, 770.4965) (scale=1)
[20:47:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(466.0951, 751.6208), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:47:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=3613929769465, bullet_pos=(509.6416, 552.5547)
[20:47:54] [INFO] [Bullet] Using shooter_position, distance=988.469970703125
[20:47:54] [INFO] [Bullet] Distance to wall: 988.469970703125 (67.3067379411768% of viewport)
[20:47:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(486.1642, 737.4747), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:47:54] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:47:54] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:47:54] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:47:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(466.09506, 751.62085), shooter_id=3614751852868, bullet_pos=(924.4281, 752.3283)
[20:47:54] [INFO] [Bullet] Using shooter_position, distance=458,3336
[20:47:54] [INFO] [Bullet] Distance to wall: 458,3336 (31,208778% of viewport)
[20:47:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:54] [INFO] [Bullet] Starting wall penetration at (924.4281, 752.3283)
[20:47:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=3613929769465, bullet_pos=(321.7098, 685.4611)
[20:47:54] [INFO] [Bullet] Using shooter_position, distance=990.332702636719
[20:47:54] [INFO] [Bullet] Distance to wall: 990.332702636719 (67.4335747837972% of viewport)
[20:47:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26,761446
[20:47:54] [INFO] [Bullet] Body exited signal received for penetrating body
[20:47:54] [INFO] [Bullet] Exiting penetration at (962.7614, 752.38745) after traveling 33,333336 pixels through wall
[20:47:54] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:47:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(508.1335, 736.7354), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:47:54] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:47:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(508.1335, 736.73535), shooter_id=3614751852868, bullet_pos=(686.74994, 806.2498)
[20:47:54] [INFO] [Bullet] Using shooter_position, distance=191,6666
[20:47:54] [INFO] [Bullet] Distance to wall: 191,6666 (13,050932% of viewport)
[20:47:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:54] [INFO] [Bullet] Starting wall penetration at (686.74994, 806.2498)
[20:47:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(486.1642, 737.47473), shooter_id=3614751852868, bullet_pos=(938.3969, 812.007)
[20:47:54] [INFO] [Bullet] Using shooter_position, distance=458,33337
[20:47:54] [INFO] [Bullet] Distance to wall: 458,33337 (31,208763% of viewport)
[20:47:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:54] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:47:54] [INFO] [Bullet] Exiting penetration at (722.4732, 820.1527) after traveling 33,333336 pixels through wall
[20:47:54] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:47:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(529.8924, 748.9441), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[20:47:54] [ENEMY] [Enemy3] Hit taken, health: 1/3
[20:47:54] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:54] [INFO] [ImpactEffects] spawn_blood_effect called at (603.9783, 825.0141), dir=(1, 0), lethal=false
[20:47:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:54] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:54] [INFO] [ImpactEffects] Wall found for blood splatter at (680, 825.0141) (dist=76 px)
[20:47:54] [INFO] [ImpactEffects] Blood effect spawned at (603.9783, 825.0141) (scale=1)
[20:47:54] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:47:54] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:47:54] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:47:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[20:47:54] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[20:47:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=3613929769465, bullet_pos=(60.72488, 474.4705)
[20:47:54] [INFO] [Bullet] Using shooter_position, distance=1323.09045410156
[20:47:54] [INFO] [Bullet] Distance to wall: 1323.09045410156 (90.0916619685885% of viewport)
[20:47:54] [INFO] [LastChance] Threat detected: Bullet
[20:47:54] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(545.9332, 785.838), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:47:54] [ENEMY] [Enemy3] Heard gunshot at (545.9332, 785.838), source_type=0, intensity=0.57, distance=66
[20:47:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[20:47:54] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:47:54] [ENEMY] [Enemy3] Hit taken, health: 0/3
[20:47:54] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:54] [INFO] [ImpactEffects] spawn_blood_effect called at (577.5935, 844.5891), dir=(1, 0), lethal=true
[20:47:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:54] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:47:54] [INFO] [ImpactEffects] Blood effect spawned at (577.5935, 844.5891) (scale=1.5)
[20:47:54] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[20:47:54] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:47:54] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[20:47:54] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[20:47:54] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[20:47:54] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:47:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(431.2948, 610.3935), shooter_id=3611648067776, bullet_pos=(689.2584, 870.9688)
[20:47:54] [INFO] [Bullet] Using shooter_position, distance=366.666961669922
[20:47:54] [INFO] [Bullet] Distance to wall: 366.666961669922 (24.9670276611944% of viewport)
[20:47:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(546.535, 820.4415), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:47:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
[20:47:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(431.2948, 610.3935), shooter_id=3611648067776, bullet_pos=(567.9377, 997.0888)
[20:47:55] [INFO] [Bullet] Using shooter_position, distance=410.127471923828
[20:47:55] [INFO] [Bullet] Distance to wall: 410.127471923828 (27.9263337212144% of viewport)
[20:47:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:55] [INFO] [Bullet] Starting wall penetration at (567.9377, 997.0888)
[20:47:55] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:47:55] [INFO] [Bullet] Exiting penetration at (544.829, 1021.112) after traveling 28.3333358764648 pixels through wall
[20:47:55] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[20:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:47:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(546.53503, 820.44147), shooter_id=3614751852868, bullet_pos=(674.1819, 1005.72864)
[20:47:55] [INFO] [Bullet] Using shooter_position, distance=225,00012
[20:47:55] [INFO] [Bullet] Distance to wall: 225,00012 (15,320672% of viewport)
[20:47:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=3613929769465, bullet_pos=(247.304, 277.6195)
[20:47:55] [INFO] [Bullet] Using shooter_position, distance=1359.58178710938
[20:47:55] [INFO] [Bullet] Distance to wall: 1359.58178710938 (92.576423934735% of viewport)
[20:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(546.535, 855.6417), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:47:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
[20:47:55] [ENEMY] [Enemy4] Hit taken, health: 3/4
[20:47:55] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:55] [INFO] [ImpactEffects] spawn_blood_effect called at (718.8184, 914.0654), dir=(1, 0), lethal=false
[20:47:55] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:55] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:55] [INFO] [ImpactEffects] Blood effect spawned at (718.8184, 914.0654) (scale=1)
[20:47:55] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
[20:47:55] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:47:55] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[20:47:55] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[20:47:55] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[20:47:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(546.53503, 855.64166), shooter_id=3614751852868, bullet_pos=(660.6292, 1009.6503)
[20:47:55] [INFO] [Bullet] Using shooter_position, distance=191,66678
[20:47:55] [INFO] [Bullet] Distance to wall: 191,66678 (13,050943% of viewport)
[20:47:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(720.7784, 914.0654), source=ENEMY (Enemy4), range=1469, listeners=9
[20:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[20:47:55] [INFO] [LastChance] Threat detected: @Area2D@2882
[20:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:47:55] [ENEMY] [Enemy4] Hit taken, health: 2/4
[20:47:55] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:47:55] [INFO] [ImpactEffects] spawn_blood_effect called at (726.6583, 914.0654), dir=(1, 0), lethal=false
[20:47:55] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:47:55] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:47:55] [INFO] [ImpactEffects] Blood effect spawned at (726.6583, 914.0654) (scale=1)
[20:47:55] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:47:55] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:47:55] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(728.6182, 914.0654), source=ENEMY (Enemy4), range=1469, listeners=9
[20:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[20:47:55] [INFO] [LastChance] Threat detected: Bullet
[20:47:55] [INFO] [LastChance] Triggering last chance effect!
[20:47:55] [INFO] [LastChance] Starting last chance effect:
[20:47:55] [INFO] [LastChance]   - Time will be frozen (except player)
[20:47:55] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:47:55] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:47:55] [INFO] [LastChance]   - Brightness: 0.60
[20:47:55] [INFO] [LastChance] Pushed bullet Bullet from distance 116.8 to 200.0
[20:47:55] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:47:55] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:47:55] [INFO] [LastChance] Skipping player node: Player
[20:47:55] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:47:55] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2837
[20:47:55] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2839
[20:47:55] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2841
[20:47:55] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2843
[20:47:55] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2851
[20:47:55] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2853
[20:47:55] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2856
[20:47:55] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2859
[20:47:55] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2862
[20:47:55] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2869
[20:47:55] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2873
[20:47:55] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2877
[20:47:55] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2883
[20:47:55] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:47:55] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:47:55] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:47:55] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2889
[20:47:55] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2889
[20:47:55] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@2890
[20:47:55] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@2890
[20:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(546.535, 905.5616), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:47:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
[20:47:55] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2892
[20:47:55] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2892
[20:47:55] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@2893
[20:47:55] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@2893
[20:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(546.535, 889.5616), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:47:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
[20:47:55] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2897
[20:47:55] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2897
[20:47:55] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@2898
[20:47:55] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@2898
[20:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(546.535, 859.9616), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:47:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
[20:47:58] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[20:48:01] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[20:48:01] [INFO] [LastChance] Ending last chance effect
[20:48:01] [ENEMY] [Enemy1] Memory reset (last chance teleport effect)
[20:48:01] [ENEMY] [Enemy2] Memory reset (last chance teleport effect)
[20:48:01] [ENEMY] [Enemy4] Memory reset (last chance teleport effect)
[20:48:01] [ENEMY] [Enemy5] Memory reset (last chance teleport effect)
[20:48:01] [ENEMY] [Enemy6] Memory reset (last chance teleport effect)
[20:48:01] [ENEMY] [Enemy7] Memory reset (last chance teleport effect)
[20:48:01] [ENEMY] [Enemy8] Memory reset (last chance teleport effect)
[20:48:01] [ENEMY] [Enemy9] Memory reset (last chance teleport effect)
[20:48:01] [ENEMY] [Enemy10] Memory reset (last chance teleport effect)
[20:48:01] [INFO] [LastChance] Reset memory for 9 enemies (player teleport effect)
[20:48:01] [INFO] [LastChance] All process modes restored
[20:48:01] [INFO] [LastChance] Unfroze player bullet: @Area2D@2889
[20:48:01] [INFO] [LastChance] Unfroze player bullet: @Area2D@2892
[20:48:01] [INFO] [LastChance] Unfroze player bullet: @Area2D@2897
[20:48:01] [INFO] [LastChance] Unfroze bullet casing: Casing
[20:48:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2837
[20:48:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2839
[20:48:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2841
[20:48:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2843
[20:48:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2851
[20:48:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2853
[20:48:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2856
[20:48:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2859
[20:48:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2862
[20:48:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2869
[20:48:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2873
[20:48:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2877
[20:48:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2883
[20:48:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2890
[20:48:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2893
[20:48:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2898
[20:48:01] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:48:01] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[20:48:01] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:48:01] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:48:01] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:48:01] [ENEMY] [Enemy4] Hit taken, health: 1/4
[20:48:01] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:48:01] [INFO] [ImpactEffects] spawn_blood_effect called at (732.5062, 914.0654), dir=(1, 0), lethal=false
[20:48:01] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:48:01] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:48:01] [INFO] [ImpactEffects] Blood effect spawned at (732.5062, 914.0654) (scale=1)
[20:48:01] [ENEMY] [Enemy4] Hit taken, health: 0/4
[20:48:01] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:48:01] [INFO] [ImpactEffects] spawn_blood_effect called at (732.5062, 914.0654), dir=(1, 0), lethal=true
[20:48:01] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:48:01] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:48:01] [INFO] [ImpactEffects] Blood effect spawned at (732.5062, 914.0654) (scale=1.5)
[20:48:01] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[20:48:01] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:48:01] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
[20:48:01] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[20:48:01] [ENEMY] [Enemy4] Death animation started with hit direction: (1, 0)
[20:48:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(660.6724, 910.3279), shooter_id=3612218494076, bullet_pos=(500.5975, 938.8899)
[20:48:01] [INFO] [Bullet] Using shooter_position, distance=162.603103637695
[20:48:01] [INFO] [Bullet] Distance to wall: 162.603103637695 (11.0719443274331% of viewport)
[20:48:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:48:01] [INFO] [Bullet] Starting wall penetration at (500.5975, 938.8899)
[20:48:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.7352066040039
[20:48:01] [INFO] [Bullet] Body exited signal received for penetrating body
[20:48:01] [INFO] [Bullet] Exiting penetration at (462.3037, 940.6298) after traveling 33.3333320617676 pixels through wall
[20:48:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:48:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(546.53503, 859.9616), shooter_id=3614751852868, bullet_pos=(931.7792, 967.6048)
[20:48:01] [INFO] [Bullet] Using shooter_position, distance=400,00012
[20:48:01] [INFO] [Bullet] Distance to wall: 400,00012 (27,236744% of viewport)
[20:48:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:48:01] [INFO] [Bullet] Starting wall penetration at (931.7792, 967.6048)
[20:48:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33,950863
[20:48:01] [INFO] [Bullet] Body exited signal received for penetrating body
[20:48:01] [INFO] [Bullet] Exiting penetration at (968.6984, 977.9206) after traveling 33,333336 pixels through wall
[20:48:01] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:48:01] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:48:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=3613929769465, bullet_pos=(501.6519, 495.6473)
[20:48:01] [INFO] [Bullet] Using shooter_position, distance=1042.302734375
[20:48:01] [INFO] [Bullet] Distance to wall: 1042.302734375 (70.9723098093185% of viewport)
[20:48:01] [INFO] [Bullet] Distance-based penetration chance: 63.8656385557951%
[20:48:01] [INFO] [Bullet] Starting wall penetration at (501.6519, 495.6473)
[20:48:01] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:48:01] [INFO] [Bullet] Exiting penetration at (514.9929, 507.0833) after traveling 12.5716514587402 pixels through wall
[20:48:01] [INFO] [Bullet] Damage multiplier after penetration: 0.0140625
[20:48:01] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:48:01] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:48:01] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:48:02] [ENEMY] [Enemy4] Ragdoll activated
[20:48:02] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:48:02] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:48:02] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:48:02] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:48:02] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:48:02] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:48:02] [ENEMY] [Enemy1] Death animation component initialized
[20:48:02] [ENEMY] [Enemy2] Death animation component initialized
[20:48:02] [ENEMY] [Enemy3] Death animation component initialized
[20:48:02] [ENEMY] [Enemy4] Death animation component initialized
[20:48:02] [ENEMY] [Enemy5] Death animation component initialized
[20:48:02] [ENEMY] [Enemy6] Death animation component initialized
[20:48:02] [ENEMY] [Enemy7] Death animation component initialized
[20:48:02] [ENEMY] [Enemy8] Death animation component initialized
[20:48:02] [ENEMY] [Enemy9] Death animation component initialized
[20:48:02] [ENEMY] [Enemy10] Death animation component initialized
[20:48:02] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:48:02] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:48:02] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:48:02] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:48:02] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:48:02] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:48:02] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:48:02] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:48:02] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:48:02] [INFO] [ScoreManager] Level started with 10 enemies
[20:48:02] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
[20:48:02] [ENEMY] [Enemy1] Registered as sound listener
[20:48:02] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:48:02] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
[20:48:02] [ENEMY] [Enemy2] Registered as sound listener
[20:48:02] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:48:02] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
[20:48:02] [ENEMY] [Enemy3] Registered as sound listener
[20:48:02] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:48:02] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
[20:48:02] [ENEMY] [Enemy4] Registered as sound listener
[20:48:02] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:48:02] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
[20:48:02] [ENEMY] [Enemy5] Registered as sound listener
[20:48:02] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:48:02] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
[20:48:02] [ENEMY] [Enemy6] Registered as sound listener
[20:48:02] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:48:02] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
[20:48:02] [ENEMY] [Enemy7] Registered as sound listener
[20:48:02] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:48:02] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
[20:48:02] [ENEMY] [Enemy8] Registered as sound listener
[20:48:02] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:48:02] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
[20:48:02] [ENEMY] [Enemy9] Registered as sound listener
[20:48:02] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:48:02] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
[20:48:02] [ENEMY] [Enemy10] Registered as sound listener
[20:48:02] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:48:02] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:48:02] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:48:02] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:48:02] [INFO] [LastChance] Found player: Player
[20:48:02] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:48:02] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:48:02] [INFO] [LastChance] Connected to player Died signal (C#)
[20:48:02] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:48:02] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:48:02] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:48:03] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:48:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1110.594, 1502.322), source=ENEMY (Enemy10), range=1469, listeners=18
[20:48:04] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
[20:48:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:48:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.21, 1483.749), source=ENEMY (Enemy10), range=1469, listeners=10
[20:48:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:48:04] [INFO] [LastChance] Threat detected: Bullet
[20:48:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:48:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:48:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1046.107, 1464.691), source=ENEMY (Enemy10), range=1469, listeners=10
[20:48:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:48:04] [INFO] [LastChance] Threat detected: @Area2D@3173
[20:48:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:48:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:48:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1014.279, 1445.18), source=ENEMY (Enemy10), range=1469, listeners=10
[20:48:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:48:04] [INFO] [LastChance] Threat detected: @Area2D@3175
[20:48:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:48:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:48:04] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:48:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(982.7146, 1425.244), source=ENEMY (Enemy10), range=1469, listeners=10
[20:48:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:48:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.88, 1475.866), shooter_id=3876593863511, bullet_pos=(31.99727, 902.2003)
[20:48:04] [INFO] [Bullet] Using shooter_position, distance=1166.66650390625
[20:48:04] [INFO] [Bullet] Distance to wall: 1166.66650390625 (79.4404675615086% of viewport)
[20:48:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1015.911, 1456.331), shooter_id=3876593863511, bullet_pos=(44.94003, 888.1407)
[20:48:04] [INFO] [Bullet] Using shooter_position, distance=1125
[20:48:04] [INFO] [Bullet] Distance to wall: 1125 (76.6033186925873% of viewport)
[20:48:04] [INFO] [LastChance] Threat detected: @Area2D@3177
[20:48:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:48:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:48:04] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:48:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(951.412, 1404.899), source=ENEMY (Enemy10), range=1469, listeners=10
[20:48:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:48:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.88, 1475.866), shooter_id=3876593863511, bullet_pos=(284.3444, 699.3827)
[20:48:04] [INFO] [Bullet] Using shooter_position, distance=1088.99645996094
[20:48:04] [INFO] [Bullet] Distance to wall: 1088.99645996094 (74.1517714466552% of viewport)
[20:48:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(984.215, 1436.37), shooter_id=3876593863511, bullet_pos=(57.25998, 875.6881)
[20:48:04] [INFO] [Bullet] Using shooter_position, distance=1083.33276367188
[20:48:04] [INFO] [Bullet] Distance to wall: 1083.33276367188 (73.7661199517138% of viewport)
[20:48:04] [INFO] [LastChance] Threat detected: @Area2D@3179
[20:48:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:48:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:48:04] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:48:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(934.8364, 1392.333), source=ENEMY (Enemy10), range=1469, listeners=10
[20:48:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:48:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1015.911, 1456.331), shooter_id=3876593863511, bullet_pos=(306.3575, 697.1563)
[20:48:04] [INFO] [Bullet] Using shooter_position, distance=1039.14013671875
[20:48:04] [INFO] [Bullet] Distance to wall: 1039.14013671875 (70.7569627194002% of viewport)
[20:48:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.88, 1475.866), shooter_id=3876593863511, bullet_pos=(501.8387, 869.1993)
[20:48:04] [INFO] [Bullet] Using shooter_position, distance=816.214294433594
[20:48:04] [INFO] [Bullet] Distance to wall: 816.214294433594 (55.5775321937261% of viewport)
[20:48:04] [INFO] [LastChance] Threat detected: Bullet
[20:48:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:48:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:48:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(952.7819, 1416.012), shooter_id=3876593863511, bullet_pos=(33.61082, 842.6571)
[20:48:04] [INFO] [Bullet] Using shooter_position, distance=1083.33361816406
[20:48:04] [INFO] [Bullet] Distance to wall: 1083.33361816406 (73.7661781356581% of viewport)
[20:48:04] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:48:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(931.1067, 1385.328), source=ENEMY (Enemy10), range=1469, listeners=10
[20:48:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:48:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(984.215, 1436.37), shooter_id=3876593863511, bullet_pos=(371.3932, 701.5587)
[20:48:04] [INFO] [Bullet] Using shooter_position, distance=956.816833496094
[20:48:04] [INFO] [Bullet] Distance to wall: 956.816833496094 (65.1514176237632% of viewport)
[20:48:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1015.911, 1456.331), shooter_id=3876593863511, bullet_pos=(507.4736, 838.5292)
[20:48:04] [INFO] [Bullet] Using shooter_position, distance=800.117126464844
[20:48:04] [INFO] [Bullet] Distance to wall: 800.117126464844 (54.4814464266521% of viewport)
[20:48:04] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:48:04] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:48:04] [INFO] [LastChance] Threat detected: @Area2D@3173
[20:48:04] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:48:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:48:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(921.6131, 1395.29), shooter_id=3876593863511, bullet_pos=(45.01133, 832.5825)
[20:48:04] [INFO] [Bullet] Using shooter_position, distance=1041.66711425781
[20:48:04] [INFO] [Bullet] Distance to wall: 1041.66711425781 (70.9290292667369% of viewport)
[20:48:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:48:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(910.4518, 1374.227), source=ENEMY (Enemy10), range=1469, listeners=10
[20:48:05] [ENEMY] [Enemy4] Heard gunshot at (910.4518, 1374.227), source_type=1, intensity=0.01, distance=487
[20:48:05] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[20:48:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(952.7819, 1416.012), shooter_id=3876593863511, bullet_pos=(327.1913, 706.185)
[20:48:05] [INFO] [Bullet] Using shooter_position, distance=946.159790039063
[20:48:05] [INFO] [Bullet] Distance to wall: 946.159790039063 (64.425759938199% of viewport)
[20:48:05] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:48:05] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:48:05] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:48:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(890.811, 1373.946), shooter_id=3876593863511, bullet_pos=(58.26264, 819.9922)
[20:48:05] [INFO] [Bullet] Using shooter_position, distance=1000.00061035156
[20:48:05] [INFO] [Bullet] Distance to wall: 1000.00061035156 (68.0918803978156% of viewport)
[20:48:05] [INFO] [Bullet] Distance-based penetration chance: 67.2261395358818%
[20:48:05] [INFO] [Bullet] Penetration failed (distance roll)
[20:48:05] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:48:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(921.6131, 1395.29), shooter_id=3876593863511, bullet_pos=(305.359, 708.6666)
[20:48:05] [INFO] [Bullet] Using shooter_position, distance=922.616271972656
[20:48:05] [INFO] [Bullet] Distance to wall: 922.616271972656 (62.8226385003451% of viewport)
[20:48:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(984.215, 1436.37), shooter_id=3876593863511, bullet_pos=(689.0419, 811.5287)
[20:48:05] [INFO] [Bullet] Using shooter_position, distance=691.052856445313
[20:48:05] [INFO] [Bullet] Distance to wall: 691.052856445313 (47.0550597295139% of viewport)
[20:48:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(875.2911, 1359.394), shooter_id=3876593863511, bullet_pos=(61.50008, 778.2358)
[20:48:05] [INFO] [Bullet] Using shooter_position, distance=1000.00048828125
[20:48:05] [INFO] [Bullet] Distance to wall: 1000.00048828125 (68.0918720858236% of viewport)
[20:48:05] [INFO] [Bullet] Distance-based penetration chance: 67.2261492332058%
[20:48:05] [INFO] [Bullet] Penetration failed (distance roll)
[20:48:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(952.7819, 1416.012), shooter_id=3876593863511, bullet_pos=(703.6204, 830.2736)
[20:48:05] [INFO] [Bullet] Using shooter_position, distance=636.530700683594
[20:48:05] [INFO] [Bullet] Distance to wall: 636.530700683594 (43.3425458862944% of viewport)
[20:48:05] [INFO] [Bullet] Distance-based penetration chance: 96.1003631326565%
[20:48:05] [INFO] [Bullet] Starting wall penetration at (703.6204, 830.2736)
[20:48:05] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:48:05] [INFO] [Bullet] Exiting penetration at (736.9598, 841.2639) after traveling 30.1041698455811 pixels through wall
[20:48:05] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[20:48:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(984.215, 1436.37), shooter_id=3876593863511, bullet_pos=(915.6846, 748.3008)
[20:48:05] [INFO] [Bullet] Using shooter_position, distance=691.473693847656
[20:48:05] [INFO] [Bullet] Distance to wall: 691.473693847656 (47.0837153220912% of viewport)
[20:48:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(872.9572, 1349.983), shooter_id=3876593863511, bullet_pos=(50.70481, 710.4752)
[20:48:05] [INFO] [Bullet] Using shooter_position, distance=1041.66674804688
[20:48:05] [INFO] [Bullet] Distance to wall: 1041.66674804688 (70.9290043307607% of viewport)
[20:48:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(921.6131, 1395.29), shooter_id=3876593863511, bullet_pos=(681.0193, 835.0624)
[20:48:05] [INFO] [Bullet] Using shooter_position, distance=609.705200195313
[20:48:05] [INFO] [Bullet] Distance to wall: 609.705200195313 (41.5159482303016% of viewport)
[20:48:05] [INFO] [LastChance] Threat detected: @Area2D@3179
[20:48:05] [INFO] [LastChance] Triggering last chance effect!
[20:48:05] [INFO] [LastChance] Starting last chance effect:
[20:48:05] [INFO] [LastChance]   - Time will be frozen (except player)
[20:48:05] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:48:05] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:48:05] [INFO] [LastChance]   - Brightness: 0.60
[20:48:05] [INFO] [LastChance] Pushed bullet @Area2D@3179 from distance 149.2 to 200.0
[20:48:05] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:48:05] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:48:05] [INFO] [LastChance] Skipping player node: Player
[20:48:05] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:48:05] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3174
[20:48:05] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3176
[20:48:05] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3178
[20:48:05] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3180
[20:48:05] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3183
[20:48:05] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3187
[20:48:05] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3192
[20:48:05] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3196
[20:48:05] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:48:05] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:48:05] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:48:11] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[20:48:11] [INFO] [LastChance] Ending last chance effect
[20:48:11] [ENEMY] [Enemy1] Memory reset (last chance teleport effect)
[20:48:11] [ENEMY] [Enemy2] Memory reset (last chance teleport effect)
[20:48:11] [ENEMY] [Enemy3] Memory reset (last chance teleport effect)
[20:48:11] [ENEMY] [Enemy4] Memory reset (last chance teleport effect)
[20:48:11] [ENEMY] [Enemy5] Memory reset (last chance teleport effect)
[20:48:11] [ENEMY] [Enemy6] Memory reset (last chance teleport effect)
[20:48:11] [ENEMY] [Enemy7] Memory reset (last chance teleport effect)
[20:48:11] [ENEMY] [Enemy8] Memory reset (last chance teleport effect)
[20:48:11] [ENEMY] [Enemy9] Memory reset (last chance teleport effect)
[20:48:11] [ENEMY] [Enemy10] Memory reset (last chance teleport effect)
[20:48:11] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[20:48:11] [INFO] [LastChance] All process modes restored
[20:48:11] [INFO] [LastChance] Unfroze bullet casing: Casing
[20:48:11] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3174
[20:48:11] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3176
[20:48:11] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3178
[20:48:11] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3180
[20:48:11] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3183
[20:48:11] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3187
[20:48:11] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3192
[20:48:11] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3196
[20:48:11] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:48:11] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[20:48:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(854.2928, 1335.798), shooter_id=3876593863511, bullet_pos=(130.6476, 707.5149)
[20:48:11] [INFO] [Bullet] Using shooter_position, distance=958.332824707031
[20:48:11] [INFO] [Bullet] Distance to wall: 958.332824707031 (65.2546442529779% of viewport)
[20:48:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(854.2928, 1335.798), shooter_id=3876593863511, bullet_pos=(58.67939, 792.3508)
[20:48:11] [INFO] [Bullet] Using shooter_position, distance=963.501647949219
[20:48:11] [INFO] [Bullet] Distance to wall: 963.501647949219 (65.6065989321663% of viewport)
[20:48:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(921.6131, 1395.29), shooter_id=3876593863511, bullet_pos=(503.4987, 885.3477)
[20:48:11] [INFO] [Bullet] Using shooter_position, distance=659.439819335938
[20:48:11] [INFO] [Bullet] Distance to wall: 659.439819335938 (44.9024699014871% of viewport)
[20:48:11] [INFO] [Bullet] Distance-based penetration chance: 94.2804517815983%
[20:48:11] [INFO] [Bullet] Starting wall penetration at (503.4987, 885.3477)
[20:48:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.9524440765381
[20:48:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(872.9572, 1349.983), shooter_id=3876593863511, bullet_pos=(309.6227, 461.5529)
[20:48:11] [INFO] [Bullet] Using shooter_position, distance=1051.97644042969
[20:48:11] [INFO] [Bullet] Distance to wall: 1051.97644042969 (71.6310102429591% of viewport)
[20:48:11] [INFO] [Bullet] Body exited signal received for penetrating body
[20:48:11] [INFO] [Bullet] Exiting penetration at (474.0661, 893.6772) after traveling 25.5885448455811 pixels through wall
[20:48:11] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
[20:48:11] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:48:11] [ENEMY] [Enemy2] Hit taken, health: 1/2
[20:48:11] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[20:48:11] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(0.613884, 0.789396), lethal=false
[20:48:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:48:11] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:48:11] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[20:48:13] [ENEMY] [Enemy4] FLANKING started: target=(1318.617, 1517.727), side=right, pos=(801.7808, 956.1431)
[20:48:13] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[20:48:18] [ENEMY] [Enemy4] FLANKING timeout (5.0s), target=(1392.12, 1593.224), pos=(1225.227, 1508.044)
[20:48:18] [ENEMY] [Enemy4] State: FLANKING -> PURSUING
[20:48:19] [ENEMY] [Enemy4] FLANKING started: target=(1048.419, 1582.655), side=left, pos=(1221.625, 1586.402)
[20:48:19] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[20:48:20] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:48:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1098.307, 1660.151), source=ENEMY (Enemy4), range=1469, listeners=10
[20:48:20] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=6
[20:48:20] [INFO] [LastChance] Threat detected: Bullet
[20:48:20] [INFO] [LastChance] Effect already used this life
[20:48:20] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:48:20] [ENEMY] [Enemy4] State: FLANKING -> COMBAT
[20:48:20] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:48:20] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:48:20] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:48:20] [INFO] [LastChance] Player died
[20:48:20] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:48:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1095.804, 1675.954), source=ENEMY (Enemy4), range=1469, listeners=10
[20:48:20] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=6
[20:48:20] [INFO] [LastChance] Threat detected: Bullet
[20:48:20] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:48:20] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:48:20] [ENEMY] [Enemy10] FLANKING started: target=(1031.047, 1616.762), side=left, pos=(1201.072, 1582.613)
[20:48:20] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:48:20] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:48:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1095.804, 1675.954), source=ENEMY (Enemy4), range=1469, listeners=10
[20:48:20] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=6
[20:48:20] [INFO] [LastChance] Threat detected: Bullet
[20:48:20] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:48:20] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:48:20] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:48:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1095.804, 1675.954), source=ENEMY (Enemy4), range=1469, listeners=10
[20:48:20] [ENEMY] [Enemy10] Heard gunshot at (1095.804, 1675.954), source_type=1, intensity=0.32, distance=88
[20:48:20] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=6
[20:48:20] [INFO] [LastChance] Threat detected: Bullet
[20:48:20] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:48:20] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:48:20] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:48:20] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:48:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1095.804, 1675.954), source=ENEMY (Enemy4), range=1469, listeners=10
[20:48:20] [ENEMY] [Enemy10] Heard gunshot at (1095.804, 1675.954), source_type=1, intensity=0.44, distance=75
[20:48:20] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=6
[20:48:20] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:48:20] [INFO] [LastChance] Threat detected: Bullet
[20:48:20] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:48:20] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:48:20] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:48:20] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:48:20] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:48:20] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:48:20] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:48:20] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:48:20] [ENEMY] [Enemy1] Death animation component initialized
[20:48:20] [ENEMY] [Enemy2] Death animation component initialized
[20:48:20] [ENEMY] [Enemy3] Death animation component initialized
[20:48:20] [ENEMY] [Enemy4] Death animation component initialized
[20:48:20] [ENEMY] [Enemy5] Death animation component initialized
[20:48:20] [ENEMY] [Enemy6] Death animation component initialized
[20:48:20] [ENEMY] [Enemy7] Death animation component initialized
[20:48:20] [ENEMY] [Enemy8] Death animation component initialized
[20:48:20] [ENEMY] [Enemy9] Death animation component initialized
[20:48:20] [ENEMY] [Enemy10] Death animation component initialized
[20:48:21] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:48:21] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:48:21] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:48:21] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:48:21] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:48:21] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:48:21] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:48:21] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:48:21] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:48:21] [INFO] [ScoreManager] Level started with 10 enemies
[20:48:21] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:48:21] [ENEMY] [Enemy1] Registered as sound listener
[20:48:21] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:48:21] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:48:21] [ENEMY] [Enemy2] Registered as sound listener
[20:48:21] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:48:21] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:48:21] [ENEMY] [Enemy3] Registered as sound listener
[20:48:21] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:48:21] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:48:21] [ENEMY] [Enemy4] Registered as sound listener
[20:48:21] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:48:21] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:48:21] [ENEMY] [Enemy5] Registered as sound listener
[20:48:21] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:48:21] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:48:21] [ENEMY] [Enemy6] Registered as sound listener
[20:48:21] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:48:21] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:48:21] [ENEMY] [Enemy7] Registered as sound listener
[20:48:21] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:48:21] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:48:21] [ENEMY] [Enemy8] Registered as sound listener
[20:48:21] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:48:21] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:48:21] [ENEMY] [Enemy9] Registered as sound listener
[20:48:21] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:48:21] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:48:21] [ENEMY] [Enemy10] Registered as sound listener
[20:48:21] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:48:21] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:48:21] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:48:21] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:48:21] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:48:21] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:48:21] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:48:21] [INFO] [LastChance] Found player: Player
[20:48:21] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:48:21] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:48:21] [INFO] [LastChance] Connected to player Died signal (C#)
[20:48:22] [INFO] ------------------------------------------------------------
[20:48:22] [INFO] GAME LOG ENDED: 2026-01-24T20:48:22
[20:48:22] [INFO] ============================================================
