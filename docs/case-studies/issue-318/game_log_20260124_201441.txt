[20:14:41] [INFO] ============================================================
[20:14:41] [INFO] GAME LOG STARTED
[20:14:41] [INFO] ============================================================
[20:14:41] [INFO] Timestamp: 2026-01-24T20:14:41
[20:14:41] [INFO] Log file: I:/Рабочий стол/godot old version game/99/game_log_20260124_201441.txt
[20:14:41] [INFO] Executable: I:/Рабочий стол/godot old version game/99/Godot-Top-Down-Template.exe
[20:14:41] [INFO] OS: Windows
[20:14:41] [INFO] Debug build: false
[20:14:41] [INFO] Engine version: 4.3-stable (official)
[20:14:41] [INFO] Project: Godot Top-Down Template
[20:14:41] [INFO] ------------------------------------------------------------
[20:14:41] [INFO] [GameManager] GameManager ready
[20:14:41] [INFO] [ScoreManager] ScoreManager ready
[20:14:41] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[20:14:41] [INFO] [ImpactEffects] Scenes loaded: DustEffect, BloodEffect, SparksEffect, BloodDecal
[20:14:41] [INFO] [ImpactEffects] ImpactEffectsManager ready - FULL VERSION with blood effects enabled
[20:14:41] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:14:41] [INFO] [PenultimateHit] Saturation shader loaded successfully
[20:14:41] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[20:14:41] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[20:14:41] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[20:14:41] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[20:14:41] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[20:14:41] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:14:41] [INFO] [LastChance] Last chance shader loaded successfully
[20:14:41] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[20:14:41] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[20:14:41] [INFO] [LastChance]   Sepia intensity: 0.70
[20:14:41] [INFO] [LastChance]   Brightness: 0.60
[20:14:41] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[20:14:41] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[20:14:41] [ENEMY] [Enemy1] Death animation component initialized
[20:14:41] [ENEMY] [Enemy2] Death animation component initialized
[20:14:41] [ENEMY] [Enemy3] Death animation component initialized
[20:14:41] [ENEMY] [Enemy4] Death animation component initialized
[20:14:41] [ENEMY] [Enemy5] Death animation component initialized
[20:14:41] [ENEMY] [Enemy6] Death animation component initialized
[20:14:41] [ENEMY] [Enemy7] Death animation component initialized
[20:14:41] [ENEMY] [Enemy8] Death animation component initialized
[20:14:41] [ENEMY] [Enemy9] Death animation component initialized
[20:14:41] [ENEMY] [Enemy10] Death animation component initialized
[20:14:41] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:14:41] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:14:41] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:14:41] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:14:41] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:14:41] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:14:41] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:14:41] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:14:41] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:14:41] [INFO] [ScoreManager] Level started with 10 enemies
[20:14:41] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[20:14:41] [ENEMY] [Enemy1] Registered as sound listener
[20:14:41] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:14:41] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[20:14:41] [ENEMY] [Enemy2] Registered as sound listener
[20:14:41] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:14:41] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[20:14:41] [ENEMY] [Enemy3] Registered as sound listener
[20:14:41] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:14:41] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[20:14:41] [ENEMY] [Enemy4] Registered as sound listener
[20:14:41] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:14:41] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[20:14:41] [ENEMY] [Enemy5] Registered as sound listener
[20:14:41] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:14:41] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[20:14:41] [ENEMY] [Enemy6] Registered as sound listener
[20:14:41] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:14:41] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[20:14:41] [ENEMY] [Enemy7] Registered as sound listener
[20:14:41] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 3, behavior: PATROL, player_found: yes
[20:14:41] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[20:14:41] [ENEMY] [Enemy8] Registered as sound listener
[20:14:41] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:14:41] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[20:14:41] [ENEMY] [Enemy9] Registered as sound listener
[20:14:41] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:14:41] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[20:14:41] [ENEMY] [Enemy10] Registered as sound listener
[20:14:41] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:14:41] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:14:41] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:14:41] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:14:41] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:14:41] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:14:41] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:14:41] [INFO] [LastChance] Found player: Player
[20:14:41] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:14:41] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:14:41] [INFO] [LastChance] Connected to player Died signal (C#)
[20:14:47] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:14:47] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:14:47] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:14:47] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:14:47] [ENEMY] [Enemy1] Death animation component initialized
[20:14:47] [ENEMY] [Enemy2] Death animation component initialized
[20:14:47] [ENEMY] [Enemy3] Death animation component initialized
[20:14:47] [ENEMY] [Enemy4] Death animation component initialized
[20:14:47] [ENEMY] [Enemy5] Death animation component initialized
[20:14:47] [ENEMY] [Enemy6] Death animation component initialized
[20:14:47] [ENEMY] [Enemy7] Death animation component initialized
[20:14:47] [ENEMY] [Enemy8] Death animation component initialized
[20:14:47] [ENEMY] [Enemy9] Death animation component initialized
[20:14:47] [ENEMY] [Enemy10] Death animation component initialized
[20:14:47] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:14:47] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:14:47] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:14:47] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:14:47] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:14:47] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:14:47] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:14:47] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:14:47] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:14:47] [INFO] [ScoreManager] Level started with 10 enemies
[20:14:47] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:14:47] [ENEMY] [Enemy1] Registered as sound listener
[20:14:47] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:14:47] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:14:47] [ENEMY] [Enemy2] Registered as sound listener
[20:14:47] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:14:47] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:14:47] [ENEMY] [Enemy3] Registered as sound listener
[20:14:47] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:14:47] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:14:47] [ENEMY] [Enemy4] Registered as sound listener
[20:14:47] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:14:47] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:14:47] [ENEMY] [Enemy5] Registered as sound listener
[20:14:47] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:14:47] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:14:47] [ENEMY] [Enemy6] Registered as sound listener
[20:14:47] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:14:47] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:14:47] [ENEMY] [Enemy7] Registered as sound listener
[20:14:47] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:14:47] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:14:47] [ENEMY] [Enemy8] Registered as sound listener
[20:14:47] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:14:47] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:14:47] [ENEMY] [Enemy9] Registered as sound listener
[20:14:47] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:14:47] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:14:47] [ENEMY] [Enemy10] Registered as sound listener
[20:14:47] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:14:47] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:14:47] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:14:47] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:14:47] [INFO] [LastChance] Found player: Player
[20:14:47] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:14:47] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:14:47] [INFO] [LastChance] Connected to player Died signal (C#)
[20:14:47] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:14:47] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:14:47] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:14:47] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:14:48] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:14:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.731, 1535.008), source=ENEMY (Enemy10), range=1469, listeners=20
[20:14:48] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:14:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:14:48] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:14:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1139.423, 1516.307), source=ENEMY (Enemy10), range=1469, listeners=10
[20:14:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:14:48] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:14:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1107.906, 1496.302), source=ENEMY (Enemy10), range=1469, listeners=10
[20:14:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:14:48] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:14:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1077.226, 1475.035), source=ENEMY (Enemy10), range=1469, listeners=10
[20:14:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:14:48] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:14:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1047.428, 1452.549), source=ENEMY (Enemy10), range=1469, listeners=10
[20:14:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:14:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=259862301368, bullet_pos=(53.14801, 921.1365)
[20:14:48] [INFO] [Bullet] Using shooter_position, distance=1208.33337402344
[20:14:48] [INFO] [Bullet] Distance to wall: 1208.33337402344 (82.277641366406% of viewport)
[20:14:48] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:14:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=259862301368, bullet_pos=(46.85162, 857.2495)
[20:14:48] [INFO] [Bullet] Using shooter_position, distance=1208.33435058594
[20:14:48] [INFO] [Bullet] Distance to wall: 1208.33435058594 (82.2777078623423% of viewport)
[20:14:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=259862301368, bullet_pos=(43.06916, 793.3154)
[20:14:48] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[20:14:48] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[20:14:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=259862301368, bullet_pos=(294.4008, 709.4134)
[20:14:48] [INFO] [Bullet] Using shooter_position, distance=1104.19592285156
[20:14:48] [INFO] [Bullet] Distance to wall: 1104.19592285156 (75.1867308242256% of viewport)
[20:14:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=259862301368, bullet_pos=(203.519, 707.233)
[20:14:48] [INFO] [Bullet] Using shooter_position, distance=1134.29040527344
[20:14:48] [INFO] [Bullet] Distance to wall: 1134.29040527344 (77.2359194712046% of viewport)
[20:14:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.01, 1441.508), shooter_id=259862301368, bullet_pos=(41.67921, 729.5751)
[20:14:48] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[20:14:48] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[20:14:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.01, 1441.508), shooter_id=259862301368, bullet_pos=(108.3631, 693.4648)
[20:14:48] [INFO] [Bullet] Using shooter_position, distance=1177.72058105469
[20:14:48] [INFO] [Bullet] Distance to wall: 1177.72058105469 (80.1931600012012% of viewport)
[20:14:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=259862301368, bullet_pos=(522.2783, 801.6403)
[20:14:48] [INFO] [Bullet] Using shooter_position, distance=882.689758300781
[20:14:48] [INFO] [Bullet] Distance to wall: 882.689758300781 (60.1039687660423% of viewport)
[20:14:49] [INFO] [LastChance] Threat detected: @Area2D@540
[20:14:49] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:14:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:14:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.01, 1441.508), shooter_id=259862301368, bullet_pos=(53.32376, 658.4963)
[20:14:49] [INFO] [Bullet] Using shooter_position, distance=1242.46789550781
[20:14:49] [INFO] [Bullet] Distance to wall: 1242.46789550781 (84.6019237021274% of viewport)
[20:14:49] [INFO] [Bullet] Distance-based penetration chance: 47.9644223475181%
[20:14:49] [INFO] [Bullet] Starting wall penetration at (53.32376, 658.4963)
[20:14:49] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.84063720703125
[20:14:49] [INFO] [Bullet] Body exited signal received for penetrating body
[20:14:49] [INFO] [Bullet] Exiting penetration at (23.69396, 639.6714) after traveling 30.1041660308838 pixels through wall
[20:14:49] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[20:14:49] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:14:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=259862301368, bullet_pos=(42.53408, 666.2555)
[20:14:49] [INFO] [Bullet] Using shooter_position, distance=1208.33422851563
[20:14:49] [INFO] [Bullet] Distance to wall: 1208.33422851563 (82.2776995503503% of viewport)
[20:14:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:14:49] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:14:49] [ENEMY] [Enemy3] Hit taken, health: 1/2
[20:14:49] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:14:49] [INFO] [ImpactEffects] spawn_blood_effect called at (694.8341, 751.3259), dir=(0.942148, -0.335196), lethal=false
[20:14:49] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:14:49] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:14:49] [INFO] [ImpactEffects] Blood effect spawned at (694.8341, 751.3259) (scale=1)
[20:14:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=259862301368, bullet_pos=(234.1152, 450.7728)
[20:14:49] [INFO] [Bullet] Using shooter_position, distance=1226.26843261719
[20:14:49] [INFO] [Bullet] Distance to wall: 1226.26843261719 (83.4988724857191% of viewport)
[20:14:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(458.4852, 779.1519), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:14:49] [ENEMY] [Enemy1] Heard gunshot at (458.4852, 779.1519), source_type=0, intensity=0.01, distance=457
[20:14:49] [ENEMY] [Enemy2] Heard gunshot at (458.4852, 779.1519), source_type=0, intensity=0.04, distance=236
[20:14:49] [ENEMY] [Enemy4] Heard gunshot at (458.4852, 779.1519), source_type=0, intensity=0.02, distance=362
[20:14:49] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:14:49] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:14:49] [ENEMY] [Enemy3] Hit taken, health: 0/2
[20:14:49] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:14:49] [INFO] [ImpactEffects] spawn_blood_effect called at (676.5729, 752.353), dir=(1, 0), lethal=true
[20:14:49] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:14:49] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:14:49] [INFO] [ImpactEffects] Blood effect spawned at (676.5729, 752.353) (scale=1.5)
[20:14:49] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[20:14:49] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:14:49] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[20:14:49] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[20:14:49] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[20:14:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(474.7487, 762.4153), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:49] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[20:14:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=259862301368, bullet_pos=(59.51431, 277.7164)
[20:14:49] [INFO] [Bullet] Using shooter_position, distance=1470.47546386719
[20:14:49] [INFO] [Bullet] Distance to wall: 1470.47546386719 (100.127378300665% of viewport)
[20:14:49] [INFO] [Bullet] Distance-based penetration chance: 29.974524339867%
[20:14:49] [INFO] [Bullet] Starting wall penetration at (59.51431, 277.7164)
[20:14:49] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:14:49] [INFO] [Bullet] Exiting penetration at (34.58189, 253.0045) after traveling 30.1041698455811 pixels through wall
[20:14:49] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[20:14:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(499.4031, 754.0697), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:49] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[20:14:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(474.74866, 762.4153), shooter_id=260684385001, bullet_pos=(915.3191, 731.3128)
[20:14:49] [INFO] [Bullet] Using shooter_position, distance=441,66693
[20:14:49] [INFO] [Bullet] Distance to wall: 441,66693 (30,073914% of viewport)
[20:14:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:14:49] [INFO] [Bullet] Starting wall penetration at (915.3191, 731.3128)
[20:14:49] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17,60095
[20:14:49] [INFO] [Bullet] Body exited signal received for penetrating body
[20:14:49] [INFO] [Bullet] Exiting penetration at (953.55725, 728.61334) after traveling 33,333336 pixels through wall
[20:14:49] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:14:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(534.2998, 756.7279), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:49] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
[20:14:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(499.40314, 754.0697), shooter_id=260684385001, bullet_pos=(923.10095, 720.8243)
[20:14:49] [INFO] [Bullet] Using shooter_position, distance=425,00012
[20:14:49] [INFO] [Bullet] Distance to wall: 425,00012 (28,939041% of viewport)
[20:14:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:14:49] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:14:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(559.9158, 771.8737), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:49] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
[20:14:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(534.2998, 756.7279), shooter_id=260684385001, bullet_pos=(920.71515, 692.8071)
[20:14:49] [INFO] [Bullet] Using shooter_position, distance=391,66653
[20:14:49] [INFO] [Bullet] Distance to wall: 391,66653 (26,669296% of viewport)
[20:14:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:14:49] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:14:49] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:14:49] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:14:49] [ENEMY] [Enemy3] Ragdoll activated
[20:14:49] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:14:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(559.91583, 771.87366), shooter_id=260684385001, bullet_pos=(938.99536, 673.3785)
[20:14:49] [INFO] [Bullet] Using shooter_position, distance=391,66644
[20:14:49] [INFO] [Bullet] Distance to wall: 391,66644 (26,669289% of viewport)
[20:14:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:14:49] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:14:49] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:14:50] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:14:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(747.5079, 914.0653), source=ENEMY (Enemy4), range=1469, listeners=9
[20:14:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
[20:14:50] [INFO] [LastChance] Threat detected: Bullet
[20:14:50] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:14:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:14:50] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:14:50] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:14:50] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:14:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(579.3335, 928.1066), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[20:14:50] [ENEMY] [Enemy10] FLANKING started: target=(775.6719, 884.0115), side=left, pos=(1022.594, 1432.37)
[20:14:50] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:14:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(579.3335, 928.10657), shooter_id=260684385001, bullet_pos=(732.1496, 886.67365)
[20:14:50] [INFO] [Bullet] Using shooter_position, distance=158,33334
[20:14:50] [INFO] [Bullet] Distance to wall: 158,33334 (10,781209% of viewport)
[20:14:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:14:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(747.5079, 914.0653), source=ENEMY (Enemy4), range=1469, listeners=9
[20:14:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
[20:14:50] [INFO] [LastChance] Threat detected: @Area2D@593
[20:14:50] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:14:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:14:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(579.3335, 954.0621), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[20:14:50] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:14:50] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:14:50] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:14:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(579.3335, 928.10657), shooter_id=260684385001, bullet_pos=(932.9042, 918.9555)
[20:14:50] [INFO] [Bullet] Using shooter_position, distance=353,6891
[20:14:50] [INFO] [Bullet] Distance to wall: 353,6891 (24,083342% of viewport)
[20:14:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:14:50] [INFO] [Bullet] Starting wall penetration at (932.9042, 918.9555)
[20:14:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30,19777
[20:14:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(579.3335, 954.0621), shooter_id=260684385001, bullet_pos=(723.82495, 889.319)
[20:14:50] [INFO] [Bullet] Using shooter_position, distance=158,33336
[20:14:50] [INFO] [Bullet] Distance to wall: 158,33336 (10,78121% of viewport)
[20:14:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:14:50] [INFO] [Bullet] Body exited signal received for penetrating body
[20:14:50] [INFO] [Bullet] Exiting penetration at (965.81476, 924.2476) after traveling 28,333334 pixels through wall
[20:14:50] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[20:14:50] [ENEMY] [Enemy4] Hit taken, health: 3/4
[20:14:50] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:14:50] [INFO] [ImpactEffects] spawn_blood_effect called at (747.5079, 914.0653), dir=(1, 0), lethal=false
[20:14:50] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:14:50] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:14:50] [INFO] [ImpactEffects] Blood effect spawned at (747.5079, 914.0653) (scale=1)
[20:14:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(747.5079, 914.0653), source=ENEMY (Enemy4), range=1469, listeners=9
[20:14:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
[20:14:50] [INFO] [LastChance] Threat detected: Bullet
[20:14:50] [INFO] [LastChance] Triggering last chance effect!
[20:14:50] [INFO] [LastChance] Starting last chance effect:
[20:14:50] [INFO] [LastChance]   - Time will be frozen (except player)
[20:14:50] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:14:50] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:14:50] [INFO] [LastChance]   - Brightness: 0.60
[20:14:50] [INFO] [LastChance] Pushed bullet Bullet from distance 106.8 to 200.0
[20:14:50] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:14:50] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:14:50] [INFO] [LastChance] Skipping player node: Player
[20:14:50] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:14:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@539
[20:14:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@541
[20:14:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@543
[20:14:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@545
[20:14:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@556
[20:14:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@559
[20:14:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@561
[20:14:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@564
[20:14:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@567
[20:14:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@588
[20:14:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@591
[20:14:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@594
[20:14:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@596
[20:14:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@599
[20:14:50] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:14:50] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:14:50] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:14:50] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@600
[20:14:50] [INFO] [LastChance] Registered frozen player bullet: @Area2D@600
[20:14:50] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@601
[20:14:50] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@601
[20:14:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(579.3335, 967.3598), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[20:14:50] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@602
[20:14:50] [INFO] [LastChance] Registered frozen player bullet: @Area2D@602
[20:14:50] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@603
[20:14:50] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@603
[20:14:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(579.3335, 967.0042), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[20:14:50] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@604
[20:14:50] [INFO] [LastChance] Registered frozen player bullet: @Area2D@604
[20:14:50] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@605
[20:14:50] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@605
[20:14:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(579.3335, 952.9953), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[20:14:51] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@606
[20:14:51] [INFO] [LastChance] Registered frozen player bullet: @Area2D@606
[20:14:51] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@607
[20:14:51] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@607
[20:14:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(579.3335, 925.3331), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[20:14:52] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@609
[20:14:52] [INFO] [LastChance] Registered frozen player bullet: @Area2D@609
[20:14:52] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@610
[20:14:52] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@610
[20:14:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.2601, 654.5547), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:52] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[20:14:52] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@611
[20:14:52] [INFO] [LastChance] Registered frozen player bullet: @Area2D@611
[20:14:52] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@612
[20:14:52] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@612
[20:14:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(422.0602, 654.5547), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:52] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[20:14:52] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@613
[20:14:52] [INFO] [LastChance] Registered frozen player bullet: @Area2D@613
[20:14:52] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@614
[20:14:52] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@614
[20:14:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(386.8602, 654.5547), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:52] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[20:14:52] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@615
[20:14:52] [INFO] [LastChance] Registered frozen player bullet: @Area2D@615
[20:14:52] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@616
[20:14:52] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@616
[20:14:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(351.6602, 654.5547), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:52] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[20:14:53] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[20:14:54] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@617
[20:14:54] [INFO] [LastChance] Registered frozen player bullet: @Area2D@617
[20:14:54] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@618
[20:14:54] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@618
[20:14:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(134.0635, 450.778), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
[20:14:54] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@619
[20:14:54] [INFO] [LastChance] Registered frozen player bullet: @Area2D@619
[20:14:54] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@620
[20:14:54] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@620
[20:14:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(113.1111, 436.2147), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
[20:14:54] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@621
[20:14:54] [INFO] [LastChance] Registered frozen player bullet: @Area2D@621
[20:14:54] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@622
[20:14:54] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@622
[20:14:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(91.77119, 437.3582), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
[20:14:54] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@623
[20:14:54] [INFO] [LastChance] Registered frozen player bullet: @Area2D@623
[20:14:54] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@624
[20:14:54] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@624
[20:14:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.06423, 453.1491), source=PLAYER (AssaultRifle), range=1469, listeners=9
[20:14:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
[20:14:56] [INFO] [LastChance] Effect duration expired after 6.02 real seconds
[20:14:56] [INFO] [LastChance] Ending last chance effect
[20:14:56] [INFO] [LastChance] All process modes restored
[20:14:56] [INFO] [LastChance] Unfroze player bullet: @Area2D@600
[20:14:56] [INFO] [LastChance] Unfroze player bullet: @Area2D@602
[20:14:56] [INFO] [LastChance] Unfroze player bullet: @Area2D@604
[20:14:56] [INFO] [LastChance] Unfroze player bullet: @Area2D@606
[20:14:56] [INFO] [LastChance] Unfroze player bullet: @Area2D@609
[20:14:56] [INFO] [LastChance] Unfroze player bullet: @Area2D@611
[20:14:56] [INFO] [LastChance] Unfroze player bullet: @Area2D@613
[20:14:56] [INFO] [LastChance] Unfroze player bullet: @Area2D@615
[20:14:56] [INFO] [LastChance] Unfroze player bullet: @Area2D@617
[20:14:56] [INFO] [LastChance] Unfroze player bullet: @Area2D@619
[20:14:56] [INFO] [LastChance] Unfroze player bullet: @Area2D@621
[20:14:56] [INFO] [LastChance] Unfroze player bullet: @Area2D@623
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: Casing
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@539
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@541
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@543
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@545
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@556
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@559
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@561
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@564
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@567
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@588
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@591
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@594
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@596
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@599
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@601
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@603
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@605
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@607
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@610
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@612
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@614
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@616
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@618
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@620
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@622
[20:14:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@624
[20:14:56] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:14:56] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[20:14:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:14:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(971.4666, 1420.584), source=ENEMY (Enemy10), range=1469, listeners=9
[20:14:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=8
[20:14:56] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[20:14:56] [ENEMY] [Enemy2] Hit taken, health: 1/2
[20:14:56] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[20:14:56] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(1, 0), lethal=false
[20:14:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:14:56] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:14:56] [INFO] [ImpactEffects] Wall found for blood splatter at (500, 550) (dist=100 px)
[20:14:56] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[20:14:56] [ENEMY] [Enemy2] Hit taken, health: 0/2
[20:14:56] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[20:14:56] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(1, 0), lethal=true
[20:14:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:14:56] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:14:56] [INFO] [ImpactEffects] Wall found for blood splatter at (500, 550) (dist=100 px)
[20:14:56] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1.5)
[20:14:56] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[20:14:56] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:14:56] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 8)
[20:14:56] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[20:14:56] [ENEMY] [Enemy2] Death animation started with hit direction: (1, 0)
[20:14:56] [ENEMY] [Enemy1] Hit taken, health: 2/3
[20:14:56] [ENEMY] [Enemy1] ImpactEffectsManager found, calling spawn_blood_effect
[20:14:56] [INFO] [ImpactEffects] spawn_blood_effect called at (240.9602, 401.9333), dir=(1, 0), lethal=false
[20:14:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:14:56] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:14:56] [INFO] [ImpactEffects] Blood effect spawned at (240.9602, 401.9333) (scale=1)
[20:14:56] [ENEMY] [Enemy1] Hit taken, health: 1/3
[20:14:56] [ENEMY] [Enemy1] ImpactEffectsManager found, calling spawn_blood_effect
[20:14:56] [INFO] [ImpactEffects] spawn_blood_effect called at (240.9602, 401.9333), dir=(1, 0), lethal=false
[20:14:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:14:56] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:14:56] [INFO] [ImpactEffects] Blood effect spawned at (240.9602, 401.9333) (scale=1)
[20:14:56] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[20:14:56] [ENEMY] [Enemy4] Hit taken, health: 2/4
[20:14:56] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:14:56] [INFO] [ImpactEffects] spawn_blood_effect called at (747.5079, 914.0653), dir=(1, 0), lethal=false
[20:14:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:14:56] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:14:56] [INFO] [ImpactEffects] Blood effect spawned at (747.5079, 914.0653) (scale=1)
[20:14:56] [ENEMY] [Enemy1] Hit taken, health: 0/3
[20:14:56] [ENEMY] [Enemy1] ImpactEffectsManager found, calling spawn_blood_effect
[20:14:56] [INFO] [ImpactEffects] spawn_blood_effect called at (240.9602, 401.9333), dir=(1, 0), lethal=true
[20:14:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:14:56] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:14:56] [INFO] [ImpactEffects] Blood effect spawned at (240.9602, 401.9333) (scale=1.5)
[20:14:56] [ENEMY] [Enemy1] Enemy died (ricochet: false, penetration: false)
[20:14:56] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[20:14:56] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 7)
[20:14:56] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[20:14:56] [ENEMY] [Enemy1] Death animation started with hit direction: (1, 0)
[20:14:56] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:14:56] [ENEMY] [Enemy4] Hit taken, health: 1/4
[20:14:56] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:14:56] [INFO] [ImpactEffects] spawn_blood_effect called at (747.5079, 914.0653), dir=(1, 0), lethal=false
[20:14:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:14:56] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:14:56] [INFO] [ImpactEffects] Blood effect spawned at (747.5079, 914.0653) (scale=1)
[20:14:56] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:14:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(684.1363, 938.6718), shooter_id=258151025234, bullet_pos=(525.6084, 985.9225)
[20:14:56] [INFO] [Bullet] Using shooter_position, distance=165.419830322266
[20:14:56] [INFO] [Bullet] Distance to wall: 165.419830322266 (11.2637404268891% of viewport)
[20:14:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:14:56] [INFO] [Bullet] Starting wall penetration at (525.6084, 985.9225)
[20:14:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(684.1363, 938.6718), shooter_id=258151025234, bullet_pos=(520.7706, 987.1855)
[20:14:56] [INFO] [Bullet] Using shooter_position, distance=170.416961669922
[20:14:56] [INFO] [Bullet] Distance to wall: 170.416961669922 (11.6040042892653% of viewport)
[20:14:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:14:56] [INFO] [Bullet] Already penetrating, cannot start new penetration
[20:14:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:14:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(940.2137, 1411.116), source=ENEMY (Enemy10), range=1469, listeners=7
[20:14:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=6
[20:14:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11.8665018081665
[20:14:56] [INFO] [Bullet] Body exited signal received for penetrating body
[20:14:56] [INFO] [Bullet] Exiting penetration at (488.5184, 995.6061) after traveling 33.3333358764648 pixels through wall
[20:14:56] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:14:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(579.3335, 925.33307), shooter_id=260684385001, bullet_pos=(927.2107, 963.82306)
[20:14:56] [INFO] [Bullet] Using shooter_position, distance=350,00003
[20:14:56] [INFO] [Bullet] Distance to wall: 350,00003 (23,832148% of viewport)
[20:14:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:14:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(579.3335, 952.9953), shooter_id=260684385001, bullet_pos=(929.04236, 938.7193)
[20:14:56] [INFO] [Bullet] Using shooter_position, distance=350,00012
[20:14:56] [INFO] [Bullet] Distance to wall: 350,00012 (23,832153% of viewport)
[20:14:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:14:56] [INFO] [Bullet] Starting wall penetration at (929.04236, 938.7193)
[20:14:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31,369917
[20:14:56] [INFO] [Bullet] Body exited signal received for penetrating body
[20:14:56] [INFO] [Bullet] Exiting penetration at (967.3438, 937.15576) after traveling 33,333332 pixels through wall
[20:14:56] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:14:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.06423, 453.14914), shooter_id=260684385001, bullet_pos=(524.42053, 262.995)
[20:14:56] [INFO] [Bullet] Using shooter_position, distance=483,33334
[20:14:56] [INFO] [Bullet] Distance to wall: 483,33334 (32,911057% of viewport)
[20:14:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:14:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(579.3335, 925.33307), shooter_id=260684385001, bullet_pos=(813.3817, 996.1614)
[20:14:56] [INFO] [Bullet] Using shooter_position, distance=244,5306
[20:14:56] [INFO] [Bullet] Distance to wall: 244,5306 (16,650537% of viewport)
[20:14:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:14:56] [INFO] [Bullet] Starting wall penetration at (813.3817, 996.1614)
[20:14:56] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:14:56] [INFO] [Bullet] Exiting penetration at (781.3172, 1005.27075) after traveling 28,333334 pixels through wall
[20:14:56] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[20:14:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:14:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(936.0675, 1401.67), source=ENEMY (Enemy10), range=1469, listeners=7
[20:14:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=6
[20:14:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(351.66025, 654.55475), shooter_id=260684385001, bullet_pos=(472.4934, 49.842228)
[20:14:56] [INFO] [Bullet] Using shooter_position, distance=616,66675
[20:14:56] [INFO] [Bullet] Distance to wall: 616,66675 (41,989975% of viewport)
[20:14:56] [INFO] [Bullet] Distance-based penetration chance: 97,67836%
[20:14:56] [INFO] [Bullet] Starting wall penetration at (472.4934, 49.842228)
[20:14:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(386.8602, 654.55475), shooter_id=260684385001, bullet_pos=(409.3444, 38.29811)
[20:14:56] [INFO] [Bullet] Using shooter_position, distance=616,6667
[20:14:56] [INFO] [Bullet] Distance to wall: 616,6667 (41,98997% of viewport)
[20:14:56] [INFO] [Bullet] Distance-based penetration chance: 97,67837%
[20:14:56] [INFO] [Bullet] Starting wall penetration at (409.3444, 38.29811)
[20:14:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32,031036
[20:14:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20,13839
[20:14:56] [INFO] [Bullet] Body exited signal received for penetrating body
[20:14:56] [INFO] [Bullet] Exiting penetration at (410.74207, -0.009735107) after traveling 33,333336 pixels through wall
[20:14:56] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:14:56] [INFO] [Bullet] Body exited signal received for penetrating body
[20:14:56] [INFO] [Bullet] Exiting penetration at (480.00467, 12.251995) after traveling 33,333332 pixels through wall
[20:14:56] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:14:57] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:14:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(912.4087, 1386.779), shooter_id=259862301368, bullet_pos=(66.93066, 764.1505)
[20:14:57] [INFO] [Bullet] Using shooter_position, distance=1049.99987792969
[20:14:57] [INFO] [Bullet] Distance to wall: 1049.99987792969 (71.4964224677561% of viewport)
[20:14:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(912.4087, 1386.779), shooter_id=259862301368, bullet_pos=(141.4207, 713.6407)
[20:14:57] [INFO] [Bullet] Using shooter_position, distance=1023.49304199219
[20:14:57] [INFO] [Bullet] Distance to wall: 1023.49304199219 (69.6915232669984% of viewport)
[20:14:57] [ENEMY] [Enemy2] Ragdoll activated
[20:14:57] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:14:57] [ENEMY] [Enemy1] Ragdoll activated
[20:14:57] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:14:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(882.5473, 1374.988), shooter_id=259862301368, bullet_pos=(49.48923, 708.8115)
[20:14:57] [INFO] [Bullet] Using shooter_position, distance=1066.66638183594
[20:14:57] [INFO] [Bullet] Distance to wall: 1066.66638183594 (72.631275365731% of viewport)
[20:14:57] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:14:57] [INFO] [LastChance] Threat detected: @Area2D@625
[20:14:57] [INFO] [LastChance] Effect already used this life
[20:14:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:14:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(879.249, 1364.223), shooter_id=259862301368, bullet_pos=(61.76617, 679.0236)
[20:14:57] [INFO] [Bullet] Using shooter_position, distance=1066.66589355469
[20:14:57] [INFO] [Bullet] Distance to wall: 1066.66589355469 (72.6312421177628% of viewport)
[20:14:57] [INFO] [Bullet] Distance-based penetration chance: 61.9302175292767%
[20:14:57] [INFO] [Bullet] Starting wall penetration at (61.76617, 679.0236)
[20:14:57] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:14:57] [INFO] [Bullet] Exiting penetration at (32.38787, 654.3992) after traveling 33.3333320617676 pixels through wall
[20:14:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:14:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:14:57] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:14:57] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:14:57] [INFO] [LastChance] Player died
[20:14:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(882.5473, 1374.988), shooter_id=259862301368, bullet_pos=(336.4382, 469.9849)
[20:14:57] [INFO] [Bullet] Using shooter_position, distance=1057.00817871094
[20:14:57] [INFO] [Bullet] Distance to wall: 1057.00817871094 (71.9736305550802% of viewport)
[20:14:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(882.5473, 1374.988), shooter_id=259862301368, bullet_pos=(513.1936, 603.8899)
[20:14:57] [INFO] [Bullet] Using shooter_position, distance=854.994079589844
[20:14:57] [INFO] [Bullet] Distance to wall: 854.994079589844 (58.2181190747522% of viewport)
[20:14:57] [INFO] [Bullet] Distance-based penetration chance: 78.7455277461225%
[20:14:57] [INFO] [Bullet] Starting wall penetration at (513.1936, 603.8899)
[20:14:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.525074005127
[20:14:57] [INFO] [Bullet] Body exited signal received for penetrating body
[20:14:57] [INFO] [Bullet] Exiting penetration at (536.3757, 621.452) after traveling 24.0833358764648 pixels through wall
[20:14:57] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[20:14:58] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:14:58] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:14:58] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:14:58] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:14:58] [ENEMY] [Enemy1] Death animation component initialized
[20:14:58] [ENEMY] [Enemy2] Death animation component initialized
[20:14:58] [ENEMY] [Enemy3] Death animation component initialized
[20:14:58] [ENEMY] [Enemy4] Death animation component initialized
[20:14:58] [ENEMY] [Enemy5] Death animation component initialized
[20:14:58] [ENEMY] [Enemy6] Death animation component initialized
[20:14:58] [ENEMY] [Enemy7] Death animation component initialized
[20:14:58] [ENEMY] [Enemy8] Death animation component initialized
[20:14:58] [ENEMY] [Enemy9] Death animation component initialized
[20:14:58] [ENEMY] [Enemy10] Death animation component initialized
[20:14:58] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:14:58] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:14:58] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:14:58] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:14:58] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:14:58] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:14:58] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:14:58] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:14:58] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:14:58] [INFO] [ScoreManager] Level started with 10 enemies
[20:14:58] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 8)
[20:14:58] [ENEMY] [Enemy1] Registered as sound listener
[20:14:58] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:14:58] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 9)
[20:14:58] [ENEMY] [Enemy2] Registered as sound listener
[20:14:58] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:14:58] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 10)
[20:14:58] [ENEMY] [Enemy3] Registered as sound listener
[20:14:58] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:14:58] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 11)
[20:14:58] [ENEMY] [Enemy4] Registered as sound listener
[20:14:58] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:14:58] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 12)
[20:14:58] [ENEMY] [Enemy5] Registered as sound listener
[20:14:58] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:14:58] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 13)
[20:14:58] [ENEMY] [Enemy6] Registered as sound listener
[20:14:58] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:14:58] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 14)
[20:14:58] [ENEMY] [Enemy7] Registered as sound listener
[20:14:58] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:14:58] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 15)
[20:14:58] [ENEMY] [Enemy8] Registered as sound listener
[20:14:58] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:14:58] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 16)
[20:14:58] [ENEMY] [Enemy9] Registered as sound listener
[20:14:58] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:14:58] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 17)
[20:14:58] [ENEMY] [Enemy10] Registered as sound listener
[20:14:58] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:14:58] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:14:58] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:14:58] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:14:58] [INFO] [LastChance] Found player: Player
[20:14:58] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:14:58] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:14:58] [INFO] [LastChance] Connected to player Died signal (C#)
[20:14:58] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:14:58] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:14:58] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:14:58] [INFO] [Player.Debug] Debug mode toggled: ON
[20:14:58] [INFO] [GameManager] Debug mode toggled: ON
[20:15:00] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:15:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1134.39, 1559.912), source=ENEMY (Enemy10), range=1469, listeners=17
[20:15:00] [INFO] [SoundPropagation] Cleaned up 7 invalid listeners
[20:15:00] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:15:00] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:15:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:01] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:01] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:01] [ENEMY] [Enemy1] Death animation component initialized
[20:15:01] [ENEMY] [Enemy2] Death animation component initialized
[20:15:01] [ENEMY] [Enemy3] Death animation component initialized
[20:15:01] [ENEMY] [Enemy4] Death animation component initialized
[20:15:01] [ENEMY] [Enemy5] Death animation component initialized
[20:15:01] [ENEMY] [Enemy6] Death animation component initialized
[20:15:01] [ENEMY] [Enemy7] Death animation component initialized
[20:15:01] [ENEMY] [Enemy8] Death animation component initialized
[20:15:01] [ENEMY] [Enemy9] Death animation component initialized
[20:15:01] [ENEMY] [Enemy10] Death animation component initialized
[20:15:01] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:01] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:01] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:01] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:01] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:01] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:01] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:15:01] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:15:01] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:01] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:01] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:15:01] [ENEMY] [Enemy1] Registered as sound listener
[20:15:01] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:15:01] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:15:01] [ENEMY] [Enemy2] Registered as sound listener
[20:15:01] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:15:01] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:15:01] [ENEMY] [Enemy3] Registered as sound listener
[20:15:01] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:15:01] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:15:01] [ENEMY] [Enemy4] Registered as sound listener
[20:15:01] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:15:01] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:15:01] [ENEMY] [Enemy5] Registered as sound listener
[20:15:01] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:15:01] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:15:01] [ENEMY] [Enemy6] Registered as sound listener
[20:15:01] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:15:01] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:15:01] [ENEMY] [Enemy7] Registered as sound listener
[20:15:01] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:15:01] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:15:01] [ENEMY] [Enemy8] Registered as sound listener
[20:15:01] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:15:01] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:15:01] [ENEMY] [Enemy9] Registered as sound listener
[20:15:01] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:15:01] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:15:01] [ENEMY] [Enemy10] Registered as sound listener
[20:15:01] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:15:01] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:01] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:01] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:01] [INFO] [LastChance] Found player: Player
[20:15:01] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:01] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:01] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:01] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:01] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:15:01] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:15:02] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:02] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.731, 1535.008), source=ENEMY (Enemy10), range=1469, listeners=20
[20:15:02] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:15:02] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:15:02] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1139.423, 1516.307), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:02] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:02] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1107.906, 1496.302), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:02] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:02] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1077.226, 1475.035), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:02] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:02] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1047.428, 1452.549), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:02] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=723920095358, bullet_pos=(53.14801, 921.1365)
[20:15:02] [INFO] [Bullet] Using shooter_position, distance=1208.33337402344
[20:15:02] [INFO] [Bullet] Distance to wall: 1208.33337402344 (82.277641366406% of viewport)
[20:15:02] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=723920095358, bullet_pos=(46.85162, 857.2495)
[20:15:03] [INFO] [Bullet] Using shooter_position, distance=1208.33435058594
[20:15:03] [INFO] [Bullet] Distance to wall: 1208.33435058594 (82.2777078623423% of viewport)
[20:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=723920095358, bullet_pos=(43.06916, 793.3154)
[20:15:03] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[20:15:03] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[20:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=723920095358, bullet_pos=(291.8492, 705.2221)
[20:15:03] [INFO] [Bullet] Using shooter_position, distance=1108.96081542969
[20:15:03] [INFO] [Bullet] Distance to wall: 1108.96081542969 (75.511181121735% of viewport)
[20:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=723920095358, bullet_pos=(152.3239, 695.466)
[20:15:03] [INFO] [Bullet] Using shooter_position, distance=1180.51477050781
[20:15:03] [INFO] [Bullet] Distance to wall: 1180.51477050781 (80.3834214991258% of viewport)
[20:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.01, 1441.508), shooter_id=723920095358, bullet_pos=(41.67921, 729.5751)
[20:15:03] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[20:15:03] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[20:15:03] [INFO] [Bullet] Distance-based penetration chance: 50.6760753752023%
[20:15:03] [INFO] [Bullet] Starting wall penetration at (41.67921, 729.5751)
[20:15:03] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.6874122619629
[20:15:03] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:03] [INFO] [Bullet] Exiting penetration at (3.972645, 702.0798) after traveling 41.6666679382324 pixels through wall
[20:15:03] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=723920095358, bullet_pos=(496.432, 841.5302)
[20:15:03] [INFO] [Bullet] Using shooter_position, distance=869.124694824219
[20:15:03] [INFO] [Bullet] Distance to wall: 869.124694824219 (59.180298649971% of viewport)
[20:15:03] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=723920095358, bullet_pos=(42.53408, 666.2555)
[20:15:03] [INFO] [Bullet] Using shooter_position, distance=1208.33422851563
[20:15:03] [INFO] [Bullet] Distance to wall: 1208.33422851563 (82.2776995503503% of viewport)
[20:15:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:03] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[20:15:03] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[20:15:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=723920095358, bullet_pos=(61.25216, 1069.299)
[20:15:03] [INFO] [Bullet] Using shooter_position, distance=1099.17492675781
[20:15:03] [INFO] [Bullet] Distance to wall: 1099.17492675781 (74.8448419674045% of viewport)
[20:15:03] [INFO] [LastChance] Threat detected: Bullet
[20:15:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:03] [ENEMY] [Enemy1] Memory: medium confidence (0.63) - transitioning to PURSUING
[20:15:03] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[20:15:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(458.0752, 741.9928), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:03] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=723920095358, bullet_pos=(504.2047, 393.4473)
[20:15:03] [INFO] [Bullet] Using shooter_position, distance=1132.52563476563
[20:15:03] [INFO] [Bullet] Distance to wall: 1132.52563476563 (77.1157530022008% of viewport)
[20:15:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:03] [INFO] [LastChance] Threat detected: @Area2D@1218
[20:15:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:03] [ENEMY] [Enemy3] Hit taken, health: 1/2
[20:15:03] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:15:03] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(1, 0), lethal=false
[20:15:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:03] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:15:03] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=1)
[20:15:03] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:15:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(477.462, 734.2806), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:03] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:03] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:15:03] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:15:03] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:15:03] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=723920095358, bullet_pos=(224.3589, 269.5608)
[20:15:03] [INFO] [Bullet] Using shooter_position, distance=1378.94055175781
[20:15:03] [INFO] [Bullet] Distance to wall: 1378.94055175781 (93.8945978172764% of viewport)
[20:15:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(477.46198, 734.2806), shooter_id=724742178422, bullet_pos=(683.9006, 823.7684)
[20:15:03] [INFO] [Bullet] Using shooter_position, distance=224,99991
[20:15:03] [INFO] [Bullet] Distance to wall: 224,99991 (15,320659% of viewport)
[20:15:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.5468, 760.2912), shooter_id=721923606089, bullet_pos=(49.97857, 749.7225)
[20:15:03] [INFO] [Bullet] Using shooter_position, distance=566.666748046875
[20:15:03] [INFO] [Bullet] Distance to wall: 566.666748046875 (38.5853808827794% of viewport)
[20:15:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:03] [INFO] [Bullet] Starting wall penetration at (49.97857, 749.7225)
[20:15:03] [INFO] [LastChance] Threat detected: @Area2D@1223
[20:15:03] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:15:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:03] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.3516387939453
[20:15:03] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:03] [INFO] [Bullet] Exiting penetration at (11.6519, 749.0075) after traveling 33.3333358764648 pixels through wall
[20:15:03] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:15:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(500.9246, 743.6279), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:03] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:03] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:15:03] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:15:03] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:15:03] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
[20:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(477.46198, 734.2806), shooter_id=724742178422, bullet_pos=(521.1179, 888.00836)
[20:15:03] [INFO] [Bullet] Using shooter_position, distance=159,80637
[20:15:03] [INFO] [Bullet] Distance to wall: 159,80637 (10,88151% of viewport)
[20:15:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:03] [INFO] [Bullet] Starting wall penetration at (521.1179, 888.00836)
[20:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=723920095358, bullet_pos=(67.34753, 331.4448)
[20:15:03] [INFO] [Bullet] Using shooter_position, distance=1424.17907714844
[20:15:03] [INFO] [Bullet] Distance to wall: 1424.17907714844 (96.9749721974371% of viewport)
[20:15:03] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[20:15:03] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10,630475
[20:15:03] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:03] [INFO] [Bullet] Exiting penetration at (490.11166, 900.24457) after traveling 28,333334 pixels through wall
[20:15:03] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[20:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(500.92456, 743.62787), shooter_id=724742178422, bullet_pos=(680.3945, 810.9082)
[20:15:03] [INFO] [Bullet] Using shooter_position, distance=191,66663
[20:15:03] [INFO] [Bullet] Distance to wall: 191,66663 (13,050933% of viewport)
[20:15:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:03] [INFO] [Bullet] Starting wall penetration at (680.3945, 810.9082)
[20:15:03] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[20:15:03] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:15:03] [INFO] [Bullet] Exiting penetration at (716.28845, 824.36426) after traveling 33,333336 pixels through wall
[20:15:03] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:15:03] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[20:15:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(692.5667, 756.3875), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[20:15:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(525.5566, 765.708), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:04] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[20:15:04] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[20:15:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700.7252, 763.2574), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:04] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[20:15:04] [INFO] [LastChance] Threat detected: @Area2D@1234
[20:15:04] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(376.5397, 397.2007), source=ENEMY (Enemy1), range=1469, listeners=10
[20:15:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[20:15:04] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:15:04] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:15:04] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:15:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(708.3362, 770.7091), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:04] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[20:15:04] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:15:04] [INFO] [LastChance] Threat detected: @Area2D@1236
[20:15:04] [INFO] [LastChance] Triggering last chance effect!
[20:15:04] [INFO] [LastChance] Starting last chance effect:
[20:15:04] [INFO] [LastChance]   - Time will be frozen (except player)
[20:15:04] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:15:04] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:15:04] [INFO] [LastChance]   - Brightness: 0.60
[20:15:04] [INFO] [LastChance] Pushed bullet @Area2D@1236 from distance 88.5 to 200.0
[20:15:04] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:15:04] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:15:04] [INFO] [LastChance] Skipping player node: Player
[20:15:04] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:15:04] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1199
[20:15:04] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1201
[20:15:04] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1203
[20:15:04] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1205
[20:15:04] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1213
[20:15:04] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1216
[20:15:04] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1219
[20:15:04] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1221
[20:15:04] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1224
[20:15:04] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1228
[20:15:04] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1233
[20:15:04] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:15:04] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:15:04] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:15:05] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1239
[20:15:05] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1239
[20:15:05] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1240
[20:15:05] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1240
[20:15:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(564.1307, 960.3972), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:05] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=5
[20:15:05] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1241
[20:15:05] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1241
[20:15:05] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1242
[20:15:05] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1242
[20:15:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(564.1307, 960.3972), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:05] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=5
[20:15:05] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1243
[20:15:05] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1243
[20:15:05] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1244
[20:15:05] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1244
[20:15:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(564.1307, 960.3972), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:05] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=5
[20:15:05] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1245
[20:15:05] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1245
[20:15:05] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1246
[20:15:05] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1246
[20:15:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(564.1307, 960.3972), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:05] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=5
[20:15:05] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1247
[20:15:05] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1247
[20:15:05] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1248
[20:15:05] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1248
[20:15:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(564.1307, 960.1838), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:05] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=5
[20:15:07] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1249
[20:15:07] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1249
[20:15:07] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1250
[20:15:07] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1250
[20:15:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(475.8859, 644.6919), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:07] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1251
[20:15:07] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1251
[20:15:07] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1252
[20:15:07] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1252
[20:15:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(439.0623, 640.6445), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:07] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1253
[20:15:07] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1253
[20:15:07] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1254
[20:15:07] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1254
[20:15:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400.5623, 640.6445), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:07] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1255
[20:15:07] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1255
[20:15:07] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1256
[20:15:07] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1256
[20:15:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(362.0623, 640.6445), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:08] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1257
[20:15:08] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1257
[20:15:08] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1258
[20:15:08] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1258
[20:15:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(114.3604, 413.0009), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[20:15:08] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1259
[20:15:08] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1259
[20:15:08] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1260
[20:15:08] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1260
[20:15:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(114.3604, 374.5009), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[20:15:08] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1261
[20:15:08] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1261
[20:15:08] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1262
[20:15:08] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1262
[20:15:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(114.3604, 336.0009), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[20:15:09] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1263
[20:15:09] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1263
[20:15:09] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1264
[20:15:09] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1264
[20:15:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(114.3604, 297.5009), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[20:15:09] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1265
[20:15:09] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1265
[20:15:09] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1266
[20:15:09] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1266
[20:15:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(115.2843, 259.3835), source=PLAYER (AssaultRifle), range=1469, listeners=10
[20:15:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=6, self=0, below_threshold=2
[20:15:10] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[20:15:10] [INFO] [LastChance] Ending last chance effect
[20:15:10] [INFO] [LastChance] All process modes restored
[20:15:10] [INFO] [LastChance] Unfroze player bullet: @Area2D@1239
[20:15:10] [INFO] [LastChance] Unfroze player bullet: @Area2D@1241
[20:15:10] [INFO] [LastChance] Unfroze player bullet: @Area2D@1243
[20:15:10] [INFO] [LastChance] Unfroze player bullet: @Area2D@1245
[20:15:10] [INFO] [LastChance] Unfroze player bullet: @Area2D@1247
[20:15:10] [INFO] [LastChance] Unfroze player bullet: @Area2D@1249
[20:15:10] [INFO] [LastChance] Unfroze player bullet: @Area2D@1251
[20:15:10] [INFO] [LastChance] Unfroze player bullet: @Area2D@1253
[20:15:10] [INFO] [LastChance] Unfroze player bullet: @Area2D@1255
[20:15:10] [INFO] [LastChance] Unfroze player bullet: @Area2D@1257
[20:15:10] [INFO] [LastChance] Unfroze player bullet: @Area2D@1259
[20:15:10] [INFO] [LastChance] Unfroze player bullet: @Area2D@1261
[20:15:10] [INFO] [LastChance] Unfroze player bullet: @Area2D@1263
[20:15:10] [INFO] [LastChance] Unfroze player bullet: @Area2D@1265
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: Casing
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1199
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1201
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1203
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1205
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1213
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1216
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1219
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1221
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1224
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1228
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1233
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1240
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1242
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1244
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1246
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1248
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1250
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1252
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1254
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1256
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1258
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1260
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1262
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1264
[20:15:10] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1266
[20:15:10] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:15:10] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[20:15:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(376.5397, 397.2007), source=ENEMY (Enemy1), range=1469, listeners=10
[20:15:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=5
[20:15:10] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(525.55664, 765.708), shooter_id=724742178422, bullet_pos=(922.15497, 817.7649)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=400,00018
[20:15:10] [INFO] [Bullet] Distance to wall: 400,00018 (27,236748% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [Bullet] Starting wall penetration at (922.15497, 817.7649)
[20:15:10] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
[20:15:10] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:15:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32,702873
[20:15:10] [ENEMY] [Enemy2] Hit taken, health: 2/3
[20:15:10] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[20:15:10] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(1, 0), lethal=false
[20:15:10] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:10] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:15:10] [INFO] [ImpactEffects] Wall found for blood splatter at (500, 550) (dist=100 px)
[20:15:10] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[20:15:10] [ENEMY] [Enemy2] Hit taken, health: 1/3
[20:15:10] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[20:15:10] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(1, 0), lethal=false
[20:15:10] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:10] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:15:10] [INFO] [ImpactEffects] Wall found for blood splatter at (500, 550) (dist=100 px)
[20:15:10] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[20:15:10] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:10] [INFO] [Bullet] Exiting penetration at (968.42474, 823.8382) after traveling 41,666668 pixels through wall
[20:15:10] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:15:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(376.5397, 397.2007), source=ENEMY (Enemy1), range=1469, listeners=10
[20:15:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=5
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(564.1307, 960.39716), shooter_id=724742178422, bullet_pos=(709.27686, 998.2466)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=149,99997
[20:15:10] [INFO] [Bullet] Distance to wall: 149,99997 (10,213774% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [ENEMY] [Enemy4] Hit taken, health: 2/3
[20:15:10] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:15:10] [INFO] [ImpactEffects] spawn_blood_effect called at (720.1544, 914.0651), dir=(1, 0), lethal=false
[20:15:10] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:10] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:15:10] [INFO] [ImpactEffects] Blood effect spawned at (720.1544, 914.0651) (scale=1)
[20:15:10] [ENEMY] [Enemy4] Hit taken, health: 1/3
[20:15:10] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:15:10] [INFO] [ImpactEffects] spawn_blood_effect called at (720.1544, 914.0651), dir=(1, 0), lethal=false
[20:15:10] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:10] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:15:10] [INFO] [ImpactEffects] Blood effect spawned at (720.1544, 914.0651) (scale=1)
[20:15:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[20:15:10] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[20:15:10] [INFO] [LastChance] Threat detected: @Area2D@1271
[20:15:10] [INFO] [LastChance] Effect already used this life
[20:15:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:10] [ENEMY] [Enemy1] Hit taken, health: 2/3
[20:15:10] [ENEMY] [Enemy1] ImpactEffectsManager found, calling spawn_blood_effect
[20:15:10] [INFO] [ImpactEffects] spawn_blood_effect called at (360.1574, 390.3292), dir=(1, 0), lethal=false
[20:15:10] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:10] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:15:10] [INFO] [ImpactEffects] Blood effect spawned at (360.1574, 390.3292) (scale=1)
[20:15:10] [ENEMY] [Enemy1] Hit taken, health: 1/3
[20:15:10] [ENEMY] [Enemy1] ImpactEffectsManager found, calling spawn_blood_effect
[20:15:10] [INFO] [ImpactEffects] spawn_blood_effect called at (360.1574, 390.3292), dir=(1, 0), lethal=false
[20:15:10] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:10] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:15:10] [INFO] [ImpactEffects] Blood effect spawned at (360.1574, 390.3292) (scale=1)
[20:15:10] [ENEMY] [Enemy1] Hit taken, health: 0/3
[20:15:10] [ENEMY] [Enemy1] ImpactEffectsManager found, calling spawn_blood_effect
[20:15:10] [INFO] [ImpactEffects] spawn_blood_effect called at (360.1574, 390.3292), dir=(1, 0), lethal=true
[20:15:10] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:10] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:15:10] [INFO] [ImpactEffects] Blood effect spawned at (360.1574, 390.3292) (scale=1.5)
[20:15:10] [ENEMY] [Enemy1] Enemy died (ricochet: false, penetration: false)
[20:15:10] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:15:10] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 9)
[20:15:10] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[20:15:10] [ENEMY] [Enemy1] Death animation started with hit direction: (1, 0)
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(115.28432, 259.38354), shooter_id=724742178422, bullet_pos=(339.72626, 432.31006)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=283,3333
[20:15:10] [INFO] [Bullet] Distance to wall: 283,3333 (19,292686% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(624.9763, 764.2706), shooter_id=721923606089, bullet_pos=(50.38388, 905.3843)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=591.666687011719
[20:15:10] [INFO] [Bullet] Distance to wall: 591.666687011719 (40.2876726977298% of viewport)
[20:15:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
[20:15:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(368.5111, 332.8629), shooter_id=721353181966, bullet_pos=(330.9561, 52.02945)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=283.333404541016
[20:15:10] [INFO] [Bullet] Distance to wall: 283.333404541016 (19.2926925193877% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [Bullet] Starting wall penetration at (330.9561, 52.02945)
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(564.1307, 960.39716), shooter_id=724742178422, bullet_pos=(912.97687, 932.0023)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=349,9999
[20:15:10] [INFO] [Bullet] Distance to wall: 349,9999 (23,832138% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [Bullet] Starting wall penetration at (912.97687, 932.0023)
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(564.1307, 960.39716), shooter_id=724742178422, bullet_pos=(913.15393, 986.5259)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=349,9999
[20:15:10] [INFO] [Bullet] Distance to wall: 349,9999 (23,832138% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [Bullet] Starting wall penetration at (913.15393, 986.5259)
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(564.1307, 960.39716), shooter_id=724742178422, bullet_pos=(918.13995, 986.8992)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=354,9999
[20:15:10] [INFO] [Bullet] Distance to wall: 354,9999 (24,172596% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [Bullet] Already penetrating, cannot start new penetration
[20:15:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15,423289
[20:15:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15,234054
[20:15:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18.1255836486816
[20:15:10] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:10] [INFO] [Bullet] Exiting penetration at (951.38025, 989.38763) after traveling 33,333332 pixels through wall
[20:15:10] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:15:10] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:10] [INFO] [Bullet] Exiting penetration at (951.18384, 928.8924) after traveling 33,333336 pixels through wall
[20:15:10] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:15:10] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:10] [INFO] [Bullet] Exiting penetration at (325.8751, 14.03434) after traveling 33.3333358764648 pixels through wall
[20:15:10] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(114.360435, 374.50085), shooter_id=724742178422, bullet_pos=(496.8337, 348.8374)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=383,33328
[20:15:10] [INFO] [Bullet] Distance to wall: 383,33328 (26,10187% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [Bullet] Starting wall penetration at (496.8337, 348.8374)
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(564.1307, 960.39716), shooter_id=724742178422, bullet_pos=(911.702, 979.05225)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=348,07162
[20:15:10] [INFO] [Bullet] Distance to wall: 348,07162 (23,700838% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [Bullet] Starting wall penetration at (911.702, 979.05225)
[20:15:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8,926337
[20:15:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11,105971
[20:15:10] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:10] [INFO] [Bullet] Exiting penetration at (944.8865, 975.90564) after traveling 28,333334 pixels through wall
[20:15:10] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[20:15:10] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:10] [INFO] [Bullet] Exiting penetration at (535.08105, 346.27106) after traveling 33,333336 pixels through wall
[20:15:10] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(390.9906, 485.1588), shooter_id=721638393390, bullet_pos=(324.9885, 261.3549)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=233.333358764648
[20:15:10] [INFO] [Bullet] Distance to wall: 233.333358764648 (15.8880974604979% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(370.8186, 327.4554), shooter_id=721353181966, bullet_pos=(377.8067, 60.88028)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=266.666687011719
[20:15:10] [INFO] [Bullet] Distance to wall: 266.666687011719 (18.1578250754268% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [Bullet] Starting wall penetration at (377.8067, 60.88028)
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(114.360435, 336.00085), shooter_id=724742178422, bullet_pos=(527.4235, 390.6811)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=416,66656
[20:15:10] [INFO] [Bullet] Distance to wall: 416,66656 (28,371593% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [Bullet] Starting wall penetration at (527.4235, 390.6811)
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(114.360435, 413.00085), shooter_id=724742178422, bullet_pos=(525.1598, 343.32275)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=416,6667
[20:15:10] [INFO] [Bullet] Distance to wall: 416,6667 (28,371603% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41,78674
[20:15:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.44313907623291
[20:15:10] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:10] [INFO] [Bullet] Exiting penetration at (378.8112, 22.5601) after traveling 33.3333358764648 pixels through wall
[20:15:10] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:15:10] [ENEMY] [Enemy4] Hit taken, health: 0/3
[20:15:10] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:15:10] [INFO] [ImpactEffects] spawn_blood_effect called at (720.1544, 914.0651), dir=(0.555674, 0.831401), lethal=true
[20:15:10] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:10] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:15:10] [INFO] [ImpactEffects] Blood effect spawned at (720.1544, 914.0651) (scale=1.5)
[20:15:10] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[20:15:10] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[20:15:10] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
[20:15:10] [INFO] [DeathAnim] Started - Angle: 56.2 deg, Index: 15
[20:15:10] [ENEMY] [Enemy4] Death animation started with hit direction: (0.555674, 0.831401)
[20:15:10] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:10] [INFO] [Bullet] Exiting penetration at (565.42535, 395.71167) after traveling 33,333336 pixels through wall
[20:15:10] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:15:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=8
[20:15:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(115.28432, 259.38354), shooter_id=724742178422, bullet_pos=(509.5866, 320.54297)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=399,01727
[20:15:10] [INFO] [Bullet] Distance to wall: 399,01727 (27,16982% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [Bullet] Starting wall penetration at (509.5866, 320.54297)
[20:15:10] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[20:15:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16,079607
[20:15:10] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:10] [INFO] [Bullet] Exiting penetration at (537.43256, 302.22046) after traveling 28,33333 pixels through wall
[20:15:10] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(390.9906, 485.1588), shooter_id=721638393390, bullet_pos=(275.2944, 429.1508)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=128.539855957031
[20:15:10] [INFO] [Bullet] Distance to wall: 128.539855957031 (8.75251515606732% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(642.0497, 786.0938), shooter_id=721923606089, bullet_pos=(62.51428, 814.2715)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=580.220031738281
[20:15:10] [INFO] [Bullet] Distance to wall: 580.220031738281 (39.5082488916184% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [Bullet] Starting wall penetration at (62.51428, 814.2715)
[20:15:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7.77839326858521
[20:15:10] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:10] [INFO] [Bullet] Exiting penetration at (24.23196, 816.2484) after traveling 33.3333320617676 pixels through wall
[20:15:10] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:15:10] [INFO] [LastChance] Threat detected: @Area2D@1294
[20:15:10] [INFO] [LastChance] Effect already used this life
[20:15:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(409.0706, 480.0473), shooter_id=721638393390, bullet_pos=(391.6082, 47.0659)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=433.333435058594
[20:15:10] [INFO] [Bullet] Distance to wall: 433.333435058594 (29.506470423064% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [Bullet] Starting wall penetration at (391.6082, 47.0659)
[20:15:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.255184173584
[20:15:10] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:10] [INFO] [Bullet] Exiting penetration at (390.0634, 8.763706) after traveling 33.3333358764648 pixels through wall
[20:15:10] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(390.9906, 485.1588), shooter_id=721638393390, bullet_pos=(224.5508, 263.15)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=277.470855712891
[20:15:10] [INFO] [Bullet] Distance to wall: 277.470855712891 (18.893500789404% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [Bullet] Starting wall penetration at (224.5508, 263.15)
[20:15:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13.5160903930664
[20:15:10] [INFO] [Bullet] Max penetration distance exceeded: 48.1666717529297 >= 48
[20:15:10] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:10] [INFO] [Bullet] Exiting penetration at (209.0086, 212.3058) after traveling 48.1666717529297 pixels through wall
[20:15:10] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[20:15:10] [ENEMY] [Enemy10] FLANKING started: target=(693.1771, 141.9677), side=left, pos=(1022.594, 1432.37)
[20:15:10] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:15:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(711.4703, 774.3447), source=ENEMY (Enemy3), range=1469, listeners=8
[20:15:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=5
[20:15:10] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[20:15:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(711.4703, 774.3447), source=ENEMY (Enemy3), range=1469, listeners=8
[20:15:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=5
[20:15:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(711.4703, 774.3447), source=ENEMY (Enemy3), range=1469, listeners=8
[20:15:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=5
[20:15:10] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[20:15:10] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:15:10] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[20:15:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(711.4703, 774.3447), source=ENEMY (Enemy3), range=1469, listeners=8
[20:15:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=5
[20:15:10] [ENEMY] [Enemy1] Ragdoll activated
[20:15:10] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(684.2192, 709.283), shooter_id=721923606089, bullet_pos=(513.4734, 423.0019)
[20:15:10] [INFO] [Bullet] Using shooter_position, distance=333.333221435547
[20:15:10] [INFO] [Bullet] Distance to wall: 333.333221435547 (22.6972719932924% of viewport)
[20:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(711.4703, 774.3447), source=ENEMY (Enemy3), range=1469, listeners=8
[20:15:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=5
[20:15:10] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[20:15:10] [ENEMY] [Enemy4] Ragdoll activated
[20:15:10] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:15:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[20:15:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(711.4703, 774.3447), source=ENEMY (Enemy3), range=1469, listeners=8
[20:15:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=5
[20:15:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(686.8281, 710.7092), shooter_id=721923606089, bullet_pos=(527.2885, 307.8134)
[20:15:11] [INFO] [Bullet] Using shooter_position, distance=433.333526611328
[20:15:11] [INFO] [Bullet] Distance to wall: 433.333526611328 (29.5064766570581% of viewport)
[20:15:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:11] [INFO] [LastChance] Threat detected: @Area2D@1319
[20:15:11] [INFO] [LastChance] Effect already used this life
[20:15:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(685.3106, 711.5254), shooter_id=721923606089, bullet_pos=(492.0564, 38.73071)
[20:15:11] [INFO] [Bullet] Using shooter_position, distance=699.999938964844
[20:15:11] [INFO] [Bullet] Distance to wall: 699.999938964844 (47.6642830305028% of viewport)
[20:15:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(684.2192, 709.283), shooter_id=721923606089, bullet_pos=(752.8437, 65.78793)
[20:15:11] [INFO] [Bullet] Using shooter_position, distance=647.143920898438
[20:15:11] [INFO] [Bullet] Distance to wall: 647.143920898438 (44.0652195667143% of viewport)
[20:15:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.2683, 779.3935), source=ENEMY (Enemy3), range=1469, listeners=8
[20:15:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=5
[20:15:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:15:11] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:15:11] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:15:11] [INFO] [LastChance] Player died
[20:15:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(688.4742, 710.2996), shooter_id=721923606089, bullet_pos=(536.5883, 61.16544)
[20:15:11] [INFO] [Bullet] Using shooter_position, distance=666.666625976563
[20:15:11] [INFO] [Bullet] Distance to wall: 666.666625976563 (45.3945564545729% of viewport)
[20:15:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(689.2662, 709.9171), shooter_id=721923606089, bullet_pos=(563.2859, 55.26178)
[20:15:11] [INFO] [Bullet] Using shooter_position, distance=666.666748046875
[20:15:11] [INFO] [Bullet] Distance to wall: 666.666748046875 (45.394564766565% of viewport)
[20:15:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(651.2449, 788.0021), source=ENEMY (Enemy3), range=1469, listeners=8
[20:15:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=5
[20:15:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(688.4742, 710.2996), shooter_id=721923606089, bullet_pos=(505.4926, 204.4978)
[20:15:11] [INFO] [Bullet] Using shooter_position, distance=537.882629394531
[20:15:11] [INFO] [Bullet] Distance to wall: 537.882629394531 (36.6254173144143% of viewport)
[20:15:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:11] [INFO] [Bullet] Starting wall penetration at (505.4926, 204.4978)
[20:15:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7.42702293395996
[20:15:11] [INFO] [Bullet] Max penetration distance exceeded: 56.6666679382324 >= 48
[20:15:11] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:11] [INFO] [Bullet] Exiting penetration at (492.4182, 264.7626) after traveling 56.6666679382324 pixels through wall
[20:15:11] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[20:15:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(691.7725, 709.2095), shooter_id=721923606089, bullet_pos=(573.2105, 53.17025)
[20:15:11] [INFO] [Bullet] Using shooter_position, distance=666.666687011719
[20:15:11] [INFO] [Bullet] Distance to wall: 666.666687011719 (45.3945606105689% of viewport)
[20:15:11] [INFO] [Bullet] Distance-based penetration chance: 93.7063459543362%
[20:15:11] [INFO] [Bullet] Starting wall penetration at (573.2105, 53.17025)
[20:15:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.8201389312744
[20:15:11] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:11] [INFO] [Bullet] Exiting penetration at (566.3932, 15.44799) after traveling 33.3333320617676 pixels through wall
[20:15:11] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:15:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(617.8501, 793.0154), source=ENEMY (Enemy3), range=1469, listeners=8
[20:15:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=5
[20:15:11] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:11] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:11] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:11] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:11] [ENEMY] [Enemy1] Death animation component initialized
[20:15:11] [ENEMY] [Enemy2] Death animation component initialized
[20:15:11] [ENEMY] [Enemy3] Death animation component initialized
[20:15:11] [ENEMY] [Enemy4] Death animation component initialized
[20:15:11] [ENEMY] [Enemy5] Death animation component initialized
[20:15:11] [ENEMY] [Enemy6] Death animation component initialized
[20:15:11] [ENEMY] [Enemy7] Death animation component initialized
[20:15:11] [ENEMY] [Enemy8] Death animation component initialized
[20:15:11] [ENEMY] [Enemy9] Death animation component initialized
[20:15:11] [ENEMY] [Enemy10] Death animation component initialized
[20:15:11] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:11] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:11] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:11] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:11] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:11] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:11] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:15:11] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:15:11] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:11] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:11] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
[20:15:11] [ENEMY] [Enemy1] Registered as sound listener
[20:15:11] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:15:11] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
[20:15:11] [ENEMY] [Enemy2] Registered as sound listener
[20:15:11] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:15:11] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
[20:15:11] [ENEMY] [Enemy3] Registered as sound listener
[20:15:11] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:15:11] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
[20:15:11] [ENEMY] [Enemy4] Registered as sound listener
[20:15:11] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:15:11] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
[20:15:11] [ENEMY] [Enemy5] Registered as sound listener
[20:15:11] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:15:11] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
[20:15:11] [ENEMY] [Enemy6] Registered as sound listener
[20:15:11] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:15:11] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
[20:15:11] [ENEMY] [Enemy7] Registered as sound listener
[20:15:11] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:15:11] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
[20:15:11] [ENEMY] [Enemy8] Registered as sound listener
[20:15:11] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:15:11] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
[20:15:11] [ENEMY] [Enemy9] Registered as sound listener
[20:15:11] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:15:11] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
[20:15:11] [ENEMY] [Enemy10] Registered as sound listener
[20:15:11] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:15:11] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:11] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:15:11] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:15:11] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:11] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:11] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:11] [INFO] [LastChance] Found player: Player
[20:15:11] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:11] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:11] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:12] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:15:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.048, 1518.962), source=ENEMY (Enemy10), range=1469, listeners=18
[20:15:12] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
[20:15:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.322, 1499.285), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1080.911, 1479.108), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:12] [INFO] [LastChance] Threat detected: Bullet
[20:15:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1049.732, 1458.574), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:12] [INFO] [LastChance] Threat detected: @Area2D@1621
[20:15:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1018.955, 1437.444), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.144, 1490.617), shooter_id=1034399256155, bullet_pos=(48.36868, 865.0139)
[20:15:13] [INFO] [Bullet] Using shooter_position, distance=1208.33337402344
[20:15:13] [INFO] [Bullet] Distance to wall: 1208.33337402344 (82.277641366406% of viewport)
[20:15:13] [INFO] [Bullet] Distance-based penetration chance: 50.6760850725264%
[20:15:13] [INFO] [Bullet] Penetration failed (distance roll)
[20:15:13] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:15:13] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:15:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(986.096, 1424.068), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.069, 1469.608), shooter_id=1034399256155, bullet_pos=(66.35861, 843.9446)
[20:15:13] [INFO] [Bullet] Using shooter_position, distance=1166.66564941406
[20:15:13] [INFO] [Bullet] Distance to wall: 1166.66564941406 (79.4404093775643% of viewport)
[20:15:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(955.0223, 1407.248), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1020.004, 1448.733), shooter_id=1034399256155, bullet_pos=(42.51959, 811.8381)
[20:15:13] [INFO] [Bullet] Using shooter_position, distance=1166.66638183594
[20:15:13] [INFO] [Bullet] Distance to wall: 1166.66638183594 (79.4404592495165% of viewport)
[20:15:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.069, 1469.608), shooter_id=1034399256155, bullet_pos=(282.6995, 712.9352)
[20:15:13] [INFO] [Bullet] Using shooter_position, distance=1078.39929199219
[20:15:13] [INFO] [Bullet] Distance to wall: 1078.39929199219 (73.4301907931894% of viewport)
[20:15:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1020.004, 1448.733), shooter_id=1034399256155, bullet_pos=(151.2298, 713.3841)
[20:15:13] [INFO] [Bullet] Using shooter_position, distance=1138.203125
[20:15:13] [INFO] [Bullet] Distance to wall: 1138.203125 (77.5023437522434% of viewport)
[20:15:13] [INFO] [Bullet] Distance-based penetration chance: 56.2472656223827%
[20:15:13] [INFO] [Bullet] Penetration failed (distance roll)
[20:15:13] [INFO] [LastChance] Threat detected: Bullet
[20:15:13] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.2235, 1427.395), shooter_id=1034399256155, bullet_pos=(54.81662, 800.89)
[20:15:13] [INFO] [Bullet] Using shooter_position, distance=1124.99975585938
[20:15:13] [INFO] [Bullet] Distance to wall: 1124.99975585938 (76.6033020686032% of viewport)
[20:15:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(935.8875, 1396.727), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.069, 1469.608), shooter_id=1034399256155, bullet_pos=(502.1596, 823.7112)
[20:15:13] [INFO] [Bullet] Using shooter_position, distance=847.63427734375
[20:15:13] [INFO] [Bullet] Distance to wall: 847.63427734375 (57.7169766063327% of viewport)
[20:15:13] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:15:13] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:15:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.2235, 1427.395), shooter_id=1034399256155, bullet_pos=(209.2755, 704.47)
[20:15:13] [INFO] [Bullet] Using shooter_position, distance=1063.45629882813
[20:15:13] [INFO] [Bullet] Distance to wall: 1063.45629882813 (72.4126949109069% of viewport)
[20:15:13] [INFO] [LastChance] Threat detected: @Area2D@1631
[20:15:13] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(959.3662, 1404.499), shooter_id=1034399256155, bullet_pos=(43.65194, 750.9753)
[20:15:13] [INFO] [Bullet] Using shooter_position, distance=1125.00061035156
[20:15:13] [INFO] [Bullet] Distance to wall: 1125.00061035156 (76.6033602525476% of viewport)
[20:15:13] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(932.7256, 1387.712), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:13] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:15:13] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:15:13] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:15:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(959.3662, 1404.499), shooter_id=1034399256155, bullet_pos=(101.0622, 701.4298)
[20:15:13] [INFO] [Bullet] Using shooter_position, distance=1109.5009765625
[20:15:13] [INFO] [Bullet] Distance to wall: 1109.5009765625 (75.547961686537% of viewport)
[20:15:13] [INFO] [Bullet] Distance-based penetration chance: 58.5273780323736%
[20:15:13] [INFO] [Bullet] Penetration failed (distance roll)
[20:15:13] [INFO] [LastChance] Threat detected: @Area2D@1637
[20:15:13] [INFO] [LastChance] Triggering last chance effect!
[20:15:13] [INFO] [LastChance] Starting last chance effect:
[20:15:13] [INFO] [LastChance]   - Time will be frozen (except player)
[20:15:13] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:15:13] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:15:13] [INFO] [LastChance]   - Brightness: 0.60
[20:15:13] [INFO] [LastChance] Pushed bullet @Area2D@1637 from distance 143.1 to 200.0
[20:15:13] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:15:13] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:15:13] [INFO] [LastChance] Skipping player node: Player
[20:15:13] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:15:13] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1622
[20:15:13] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1624
[20:15:13] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1626
[20:15:13] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1628
[20:15:13] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1629
[20:15:13] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1632
[20:15:13] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1638
[20:15:13] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1642
[20:15:13] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:15:13] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:15:13] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:15:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:13] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:13] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:13] [INFO] [LastChance] Ending last chance effect
[20:15:13] [INFO] [LastChance] All process modes restored
[20:15:13] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:15:13] [ENEMY] [Enemy1] Death animation component initialized
[20:15:13] [ENEMY] [Enemy2] Death animation component initialized
[20:15:13] [ENEMY] [Enemy3] Death animation component initialized
[20:15:13] [ENEMY] [Enemy4] Death animation component initialized
[20:15:13] [ENEMY] [Enemy5] Death animation component initialized
[20:15:13] [ENEMY] [Enemy6] Death animation component initialized
[20:15:13] [ENEMY] [Enemy7] Death animation component initialized
[20:15:13] [ENEMY] [Enemy8] Death animation component initialized
[20:15:13] [ENEMY] [Enemy9] Death animation component initialized
[20:15:13] [ENEMY] [Enemy10] Death animation component initialized
[20:15:13] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:13] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:13] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:13] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:13] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:13] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:13] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:15:13] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:15:13] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:13] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:13] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:15:13] [ENEMY] [Enemy1] Registered as sound listener
[20:15:13] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:15:13] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:15:13] [ENEMY] [Enemy2] Registered as sound listener
[20:15:13] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:15:13] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:15:13] [ENEMY] [Enemy3] Registered as sound listener
[20:15:13] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:15:13] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:15:13] [ENEMY] [Enemy4] Registered as sound listener
[20:15:13] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:15:13] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:15:13] [ENEMY] [Enemy5] Registered as sound listener
[20:15:13] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:15:13] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:15:13] [ENEMY] [Enemy6] Registered as sound listener
[20:15:13] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:15:13] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:15:13] [ENEMY] [Enemy7] Registered as sound listener
[20:15:13] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:15:13] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:15:13] [ENEMY] [Enemy8] Registered as sound listener
[20:15:13] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:15:13] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:15:13] [ENEMY] [Enemy9] Registered as sound listener
[20:15:13] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:15:13] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:15:13] [ENEMY] [Enemy10] Registered as sound listener
[20:15:13] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:15:13] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:13] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:15:13] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:15:13] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:13] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:13] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:13] [INFO] [LastChance] Found player: Player
[20:15:13] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:13] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:13] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:15] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:15] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.526, 1535.401), source=ENEMY (Enemy10), range=1469, listeners=20
[20:15:15] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:15:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:15:15] [INFO] [LastChance] Threat detected: Bullet
[20:15:15] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:15] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1139.069, 1516.964), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:15] [INFO] [LastChance] Threat detected: @Area2D@1896
[20:15:15] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:15] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1107.634, 1496.832), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:15] [INFO] [LastChance] Threat detected: @Area2D@1898
[20:15:15] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:15] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:15:15] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:15:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1098.756, 1490.919), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:15] [INFO] [LastChance] Threat detected: @Area2D@1900
[20:15:15] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:15] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:15:15] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:15:15] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:15:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1098.756, 1490.919), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:15] [INFO] [LastChance] Threat detected: @Area2D@1902
[20:15:15] [INFO] [LastChance] Triggering last chance effect!
[20:15:15] [INFO] [LastChance] Starting last chance effect:
[20:15:15] [INFO] [LastChance]   - Time will be frozen (except player)
[20:15:15] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:15:15] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:15:15] [INFO] [LastChance]   - Brightness: 0.60
[20:15:15] [INFO] [LastChance] Pushed bullet @Area2D@1902 from distance 93.7 to 200.0
[20:15:15] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:15:15] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:15:15] [INFO] [LastChance] Skipping player node: Player
[20:15:15] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:15:15] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1897
[20:15:15] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1899
[20:15:15] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1901
[20:15:15] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1903
[20:15:15] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:15:15] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:15:15] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:15:21] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[20:15:21] [INFO] [LastChance] Ending last chance effect
[20:15:21] [INFO] [LastChance] All process modes restored
[20:15:21] [INFO] [LastChance] Unfroze bullet casing: Casing
[20:15:21] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1897
[20:15:21] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1899
[20:15:21] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1901
[20:15:21] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1903
[20:15:21] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:15:21] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[20:15:21] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:15:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.346, 1510.123), shooter_id=1165781633973, bullet_pos=(45.31747, 935.632)
[20:15:21] [INFO] [Bullet] Using shooter_position, distance=1208.333984375
[20:15:21] [INFO] [Bullet] Distance to wall: 1208.333984375 (82.2776829263662% of viewport)
[20:15:21] [INFO] [Bullet] Distance-based penetration chance: 50.6760365859061%
[20:15:21] [INFO] [Bullet] Starting wall penetration at (45.31747, 935.632)
[20:15:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31.5288524627686
[20:15:21] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:21] [INFO] [Bullet] Exiting penetration at (4.262569, 913.4448) after traveling 41.6666679382324 pixels through wall
[20:15:21] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:15:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1036.341, 1464.033), shooter_id=1165781633973, bullet_pos=(908.4125, 1397.775)
[20:15:21] [INFO] [Bullet] Using shooter_position, distance=144.068649291992
[20:15:21] [INFO] [Bullet] Distance to wall: 144.068649291992 (9.80989924917784% of viewport)
[20:15:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:21] [INFO] [Bullet] Starting wall penetration at (908.4125, 1397.775)
[20:15:21] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:15:21] [INFO] [Bullet] Exiting penetration at (867.9551, 1374.516) after traveling 41.6666679382324 pixels through wall
[20:15:21] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:15:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.36, 1488.282), shooter_id=1165781633973, bullet_pos=(47.19865, 856.7463)
[20:15:21] [INFO] [Bullet] Using shooter_position, distance=1208.33386230469
[20:15:21] [INFO] [Bullet] Distance to wall: 1208.33386230469 (82.2776746143741% of viewport)
[20:15:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.36, 1488.282), shooter_id=1165781633973, bullet_pos=(290.0758, 701.3539)
[20:15:21] [INFO] [Bullet] Using shooter_position, distance=1113.13647460938
[20:15:21] [INFO] [Bullet] Distance to wall: 1113.13647460938 (75.7955094336401% of viewport)
[20:15:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.36, 1488.282), shooter_id=1165781633973, bullet_pos=(515.3239, 799.8295)
[20:15:22] [INFO] [Bullet] Using shooter_position, distance=888.736206054688
[20:15:22] [INFO] [Bullet] Distance to wall: 888.736206054688 (60.5156825120428% of viewport)
[20:15:22] [ENEMY] [Enemy3] Hit taken, health: 2/3
[20:15:22] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:15:22] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.960511, -0.278241), lethal=false
[20:15:22] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:22] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:15:22] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[20:15:23] [ENEMY] [Enemy4] Memory: medium confidence (0.70) - transitioning to PURSUING
[20:15:23] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:15:24] [ENEMY] [Enemy3] Memory: medium confidence (0.58) - transitioning to PURSUING
[20:15:24] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[20:15:24] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[20:15:24] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:15:24] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:15:24] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
[20:15:24] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
[20:15:25] [ENEMY] [Enemy4] FLANKING started: target=(1034.371, 1686.311), side=left, pos=(831.4612, 960.9916)
[20:15:25] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[20:15:26] [ENEMY] [Enemy10] FLANKING started: target=(1283.714, 1496.256), side=right, pos=(950.1385, 1412.79)
[20:15:26] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:15:28] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:28] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1344.765, 1607.512), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:15:28] [INFO] [LastChance] Threat detected: Bullet
[20:15:28] [INFO] [LastChance] Effect already used this life
[20:15:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:28] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[20:15:28] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:15:28] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:15:28] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:15:28] [INFO] [LastChance] Player died
[20:15:28] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1351.846, 1621.86), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:15:28] [INFO] [LastChance] Threat detected: Bullet
[20:15:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:28] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1351.846, 1621.86), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:15:28] [INFO] [LastChance] Threat detected: Bullet
[20:15:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:28] [ENEMY] [Enemy8] Memory: high confidence (0.90) - transitioning to PURSUING
[20:15:28] [ENEMY] [Enemy8] State: IDLE -> PURSUING
[20:15:28] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1351.846, 1621.86), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:15:28] [INFO] [LastChance] Threat detected: Bullet
[20:15:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:28] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1351.846, 1621.86), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:15:28] [INFO] [LastChance] Threat detected: Bullet
[20:15:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:28] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:28] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:28] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:28] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:28] [ENEMY] [Enemy1] Death animation component initialized
[20:15:28] [ENEMY] [Enemy2] Death animation component initialized
[20:15:28] [ENEMY] [Enemy3] Death animation component initialized
[20:15:28] [ENEMY] [Enemy4] Death animation component initialized
[20:15:28] [ENEMY] [Enemy5] Death animation component initialized
[20:15:28] [ENEMY] [Enemy6] Death animation component initialized
[20:15:28] [ENEMY] [Enemy7] Death animation component initialized
[20:15:28] [ENEMY] [Enemy8] Death animation component initialized
[20:15:28] [ENEMY] [Enemy9] Death animation component initialized
[20:15:28] [ENEMY] [Enemy10] Death animation component initialized
[20:15:28] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:28] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:28] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:28] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:28] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:28] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:28] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:15:28] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:15:28] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:28] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:28] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:15:28] [ENEMY] [Enemy1] Registered as sound listener
[20:15:28] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:15:28] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:15:28] [ENEMY] [Enemy2] Registered as sound listener
[20:15:28] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:15:28] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:15:28] [ENEMY] [Enemy3] Registered as sound listener
[20:15:28] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:15:28] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:15:28] [ENEMY] [Enemy4] Registered as sound listener
[20:15:28] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:15:28] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:15:28] [ENEMY] [Enemy5] Registered as sound listener
[20:15:28] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:15:28] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:15:28] [ENEMY] [Enemy6] Registered as sound listener
[20:15:28] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:15:28] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:15:28] [ENEMY] [Enemy7] Registered as sound listener
[20:15:28] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:15:28] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:15:28] [ENEMY] [Enemy8] Registered as sound listener
[20:15:28] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:15:28] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:15:28] [ENEMY] [Enemy9] Registered as sound listener
[20:15:28] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:15:28] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:15:28] [ENEMY] [Enemy10] Registered as sound listener
[20:15:28] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:15:28] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:28] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:28] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:28] [INFO] [LastChance] Found player: Player
[20:15:28] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:28] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:28] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:28] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:28] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:15:28] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:15:29] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:29] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:29] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:29] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:29] [ENEMY] [Enemy1] Death animation component initialized
[20:15:29] [ENEMY] [Enemy2] Death animation component initialized
[20:15:29] [ENEMY] [Enemy3] Death animation component initialized
[20:15:29] [ENEMY] [Enemy4] Death animation component initialized
[20:15:29] [ENEMY] [Enemy5] Death animation component initialized
[20:15:29] [ENEMY] [Enemy6] Death animation component initialized
[20:15:29] [ENEMY] [Enemy7] Death animation component initialized
[20:15:29] [ENEMY] [Enemy8] Death animation component initialized
[20:15:29] [ENEMY] [Enemy9] Death animation component initialized
[20:15:29] [ENEMY] [Enemy10] Death animation component initialized
[20:15:29] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:29] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:29] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:29] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:29] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:29] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:29] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:15:29] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:15:29] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:29] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:29] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:15:29] [ENEMY] [Enemy1] Registered as sound listener
[20:15:29] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:15:29] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:15:29] [ENEMY] [Enemy2] Registered as sound listener
[20:15:29] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:15:29] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:15:29] [ENEMY] [Enemy3] Registered as sound listener
[20:15:29] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:15:29] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:15:29] [ENEMY] [Enemy4] Registered as sound listener
[20:15:29] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:15:29] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:15:29] [ENEMY] [Enemy5] Registered as sound listener
[20:15:29] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:15:29] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:15:29] [ENEMY] [Enemy6] Registered as sound listener
[20:15:29] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:15:29] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:15:29] [ENEMY] [Enemy7] Registered as sound listener
[20:15:29] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:15:29] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:15:29] [ENEMY] [Enemy8] Registered as sound listener
[20:15:29] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:15:29] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:15:29] [ENEMY] [Enemy9] Registered as sound listener
[20:15:29] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:15:29] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:15:29] [ENEMY] [Enemy10] Registered as sound listener
[20:15:29] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:15:29] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:29] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:15:29] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:15:29] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:29] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:29] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:29] [INFO] [LastChance] Found player: Player
[20:15:29] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:29] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:29] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:35] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:15:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1125.234, 1552.925), source=ENEMY (Enemy10), range=1469, listeners=30
[20:15:35] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[20:15:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:35] [INFO] [LastChance] Threat detected: Bullet
[20:15:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1098.348, 1527.029), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:35] [INFO] [LastChance] Threat detected: @Area2D@2420
[20:15:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:15:35] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:15:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1090.864, 1519.429), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:35] [INFO] [LastChance] Threat detected: @Area2D@2422
[20:15:35] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:15:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1070.016, 1513.017), shooter_id=1691478920103, bullet_pos=(516.4502, 1006.988)
[20:15:35] [INFO] [Bullet] Using shooter_position, distance=749.999816894531
[20:15:35] [INFO] [Bullet] Distance to wall: 749.999816894531 (51.0688666604035% of viewport)
[20:15:35] [INFO] [Bullet] Distance-based penetration chance: 87.0863222295293%
[20:15:35] [INFO] [Bullet] Starting wall penetration at (516.4502, 1006.988)
[20:15:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1070.016, 1513.017), shooter_id=1691478920103, bullet_pos=(512.7598, 1003.615)
[20:15:35] [INFO] [Bullet] Using shooter_position, distance=754.999816894531
[20:15:35] [INFO] [Bullet] Distance to wall: 754.999816894531 (51.4093258545928% of viewport)
[20:15:35] [INFO] [Bullet] Distance-based penetration chance: 86.6891198363084%
[20:15:35] [INFO] [Bullet] Penetration failed (distance roll)
[20:15:35] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:15:35] [INFO] [Bullet] Exiting penetration at (482.0061, 975.5022) after traveling 41.6666679382324 pixels through wall
[20:15:35] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:15:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1090.864, 1519.429), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:35] [INFO] [LastChance] Threat detected: Bullet
[20:15:35] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:15:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:36] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:15:36] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:15:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1090.864, 1519.429), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:36] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:36] [INFO] [LastChance] Threat detected: Bullet
[20:15:36] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:36] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:15:36] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:15:36] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:15:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1090.864, 1519.429), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:36] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:36] [INFO] [LastChance] Threat detected: Bullet
[20:15:36] [INFO] [LastChance] Triggering last chance effect!
[20:15:36] [INFO] [LastChance] Starting last chance effect:
[20:15:36] [INFO] [LastChance]   - Time will be frozen (except player)
[20:15:36] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:15:36] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:15:36] [INFO] [LastChance]   - Brightness: 0.60
[20:15:36] [INFO] [LastChance] Pushed bullet Bullet from distance 74.6 to 200.0
[20:15:36] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:15:36] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Skipping player node: Player
[20:15:36] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:15:36] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2421
[20:15:36] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2423
[20:15:36] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2425
[20:15:36] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2426
[20:15:36] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2427
[20:15:36] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:15:36] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:15:36] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:15:42] [INFO] [LastChance] Effect duration expired after 6.02 real seconds
[20:15:42] [INFO] [LastChance] Ending last chance effect
[20:15:42] [INFO] [LastChance] All process modes restored
[20:15:42] [INFO] [LastChance] Unfroze bullet casing: Casing
[20:15:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2421
[20:15:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2423
[20:15:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2425
[20:15:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2426
[20:15:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2427
[20:15:42] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:15:42] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[20:15:42] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:15:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.183, 1491.177), shooter_id=1691478920103, bullet_pos=(64.03816, 913.5306)
[20:15:42] [INFO] [Bullet] Using shooter_position, distance=1124.80200195313
[20:15:42] [INFO] [Bullet] Distance to wall: 1124.80200195313 (76.5898366414893% of viewport)
[20:15:45] [ENEMY] [Enemy4] Memory: medium confidence (0.57) - transitioning to PURSUING
[20:15:45] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:15:47] [ENEMY] [Enemy10] FLANKING started: target=(665.9199, 1845.938), side=right, pos=(948.836, 1431.434)
[20:15:47] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:15:47] [ENEMY] [Enemy4] FLANKING started: target=(364.7699, 1602.36), side=left, pos=(831.4612, 960.9916)
[20:15:47] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[20:15:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(501.2563, 1924.073), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=6, self=1, below_threshold=3
[20:15:50] [INFO] [LastChance] Threat detected: Bullet
[20:15:50] [INFO] [LastChance] Effect already used this life
[20:15:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:50] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[20:15:50] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:15:50] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:15:50] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:15:50] [INFO] [LastChance] Player died
[20:15:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(485.2564, 1924.073), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=6, self=1, below_threshold=3
[20:15:50] [INFO] [LastChance] Threat detected: Bullet
[20:15:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(485.2564, 1924.073), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=6, self=1, below_threshold=3
[20:15:50] [INFO] [LastChance] Threat detected: Bullet
[20:15:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(485.2564, 1924.073), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=6, self=1, below_threshold=3
[20:15:50] [INFO] [LastChance] Threat detected: Bullet
[20:15:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(485.2564, 1924.073), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=6, self=1, below_threshold=3
[20:15:50] [INFO] [LastChance] Threat detected: Bullet
[20:15:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:50] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:50] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:50] [ENEMY] [Enemy1] Death animation component initialized
[20:15:50] [ENEMY] [Enemy2] Death animation component initialized
[20:15:50] [ENEMY] [Enemy3] Death animation component initialized
[20:15:50] [ENEMY] [Enemy4] Death animation component initialized
[20:15:50] [ENEMY] [Enemy5] Death animation component initialized
[20:15:50] [ENEMY] [Enemy6] Death animation component initialized
[20:15:50] [ENEMY] [Enemy7] Death animation component initialized
[20:15:50] [ENEMY] [Enemy8] Death animation component initialized
[20:15:50] [ENEMY] [Enemy9] Death animation component initialized
[20:15:50] [ENEMY] [Enemy10] Death animation component initialized
[20:15:50] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:50] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:50] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:50] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:50] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:50] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:50] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:15:50] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:15:50] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:50] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:50] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:15:50] [ENEMY] [Enemy1] Registered as sound listener
[20:15:50] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:15:50] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:15:50] [ENEMY] [Enemy2] Registered as sound listener
[20:15:50] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:15:50] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:15:50] [ENEMY] [Enemy3] Registered as sound listener
[20:15:50] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:15:50] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:15:50] [ENEMY] [Enemy4] Registered as sound listener
[20:15:50] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:15:50] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:15:50] [ENEMY] [Enemy5] Registered as sound listener
[20:15:50] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:15:50] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:15:50] [ENEMY] [Enemy6] Registered as sound listener
[20:15:50] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:15:50] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:15:50] [ENEMY] [Enemy7] Registered as sound listener
[20:15:50] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:15:50] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:15:50] [ENEMY] [Enemy8] Registered as sound listener
[20:15:50] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:15:50] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:15:50] [ENEMY] [Enemy9] Registered as sound listener
[20:15:50] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:15:50] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:15:50] [ENEMY] [Enemy10] Registered as sound listener
[20:15:50] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:15:50] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:50] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:50] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:50] [INFO] [LastChance] Found player: Player
[20:15:50] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:50] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:50] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:50] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:50] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:15:50] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:15:55] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:15:55] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1129.48, 1556.39), source=ENEMY (Enemy10), range=1469, listeners=20
[20:15:55] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:15:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:55] [INFO] [LastChance] Threat detected: Bullet
[20:15:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:55] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1109.51, 1538.719), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:55] [INFO] [LastChance] Threat detected: Bullet
[20:15:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:55] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:15:55] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:15:55] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:15:55] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:15:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1109.51, 1538.719), source=ENEMY (Enemy10), range=1469, listeners=10
[20:15:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:15:55] [INFO] [LastChance] Threat detected: Bullet
[20:15:55] [INFO] [LastChance] Triggering last chance effect!
[20:15:55] [INFO] [LastChance] Starting last chance effect:
[20:15:55] [INFO] [LastChance]   - Time will be frozen (except player)
[20:15:55] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:15:55] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:15:55] [INFO] [LastChance]   - Brightness: 0.60
[20:15:55] [INFO] [LastChance] Pushed bullet Bullet from distance 122.0 to 200.0
[20:15:55] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:15:55] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:15:55] [INFO] [LastChance] Skipping player node: Player
[20:15:55] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:15:55] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2685
[20:15:55] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2686
[20:15:55] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:15:55] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:15:55] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:16:01] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[20:16:01] [INFO] [LastChance] Ending last chance effect
[20:16:01] [INFO] [LastChance] All process modes restored
[20:16:01] [INFO] [LastChance] Unfroze bullet casing: Casing
[20:16:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2685
[20:16:01] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2686
[20:16:01] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:16:01] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[20:16:01] [ENEMY] [Enemy6] Player distracted - priority attack triggered
[20:16:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1950, 450), source=ENEMY (Enemy6), range=1469, listeners=10
[20:16:01] [ENEMY] [Enemy5] Heard gunshot at (1950, 450), source_type=1, intensity=0.03, distance=269
[20:16:01] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=6
[20:16:01] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1611.461, 899.1088), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:01] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.677, 1502.858), shooter_id=2527370153478, bullet_pos=(915.0027, 1398.348)
[20:16:01] [INFO] [Bullet] Using shooter_position, distance=172.053375244141
[20:16:01] [INFO] [Bullet] Distance to wall: 172.053375244141 (11.7154306986331% of viewport)
[20:16:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:01] [INFO] [Bullet] Starting wall penetration at (915.0027, 1398.348)
[20:16:01] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1109.51, 1538.719), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:01] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:01] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:16:01] [INFO] [Bullet] Exiting penetration at (878.4226, 1369.37) after traveling 41.6666717529297 pixels through wall
[20:16:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:16:01] [INFO] [LastChance] Threat detected: @Area2D@2689
[20:16:01] [INFO] [LastChance] Effect already used this life
[20:16:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:01] [ENEMY] [Enemy6] Player distracted - priority attack triggered
[20:16:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1936.333, 478.9338), source=ENEMY (Enemy6), range=1469, listeners=10
[20:16:01] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=6
[20:16:01] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1614.066, 923.9318), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:01] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:01] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:16:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1607.167, 967.0217), shooter_id=2526514513405, bullet_pos=(1511.248, 1500.128)
[20:16:01] [INFO] [Bullet] Using shooter_position, distance=541.666748046875
[20:16:01] [INFO] [Bullet] Distance to wall: 541.666748046875 (36.883084911833% of viewport)
[20:16:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:01] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1614.067, 942.8603), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:01] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1605.148, 991.3934), shooter_id=2526514513405, bullet_pos=(1493.394, 1435.894)
[20:16:01] [INFO] [Bullet] Using shooter_position, distance=458.333953857422
[20:16:01] [INFO] [Bullet] Distance to wall: 458.333953857422 (31.2088017199766% of viewport)
[20:16:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:01] [INFO] [Bullet] Starting wall penetration at (1493.394, 1435.894)
[20:16:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24.5426025390625
[20:16:01] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:01] [INFO] [Bullet] Exiting penetration at (1482.016, 1481.153) after traveling 41.6666717529297 pixels through wall
[20:16:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:16:01] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1614.067, 958.9065), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:01] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[20:16:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1174.297, 1517.908), shooter_id=2527370153478, bullet_pos=(1857.361, 1208.194)
[20:16:01] [INFO] [Bullet] Using shooter_position, distance=749.999145507813
[20:16:01] [INFO] [Bullet] Distance to wall: 749.999145507813 (51.0688209444472% of viewport)
[20:16:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1929.011, 514.7306), shooter_id=2526229300662, bullet_pos=(1513.56, 1424.347)
[20:16:01] [INFO] [Bullet] Using shooter_position, distance=1000.00018310547
[20:16:01] [INFO] [Bullet] Distance to wall: 1000.00018310547 (68.0918513058435% of viewport)
[20:16:02] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1614.066, 975.4935), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[20:16:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1913.488, 543.033), shooter_id=2526229300662, bullet_pos=(1490.405, 1402.919)
[20:16:02] [INFO] [Bullet] Using shooter_position, distance=958.33349609375
[20:16:02] [INFO] [Bullet] Distance to wall: 958.33349609375 (65.2546899689342% of viewport)
[20:16:02] [INFO] [Bullet] Distance-based penetration chance: 70.5361950362435%
[20:16:02] [INFO] [Bullet] Penetration failed (distance roll)
[20:16:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1607.167, 967.0217), shooter_id=2526514513405, bullet_pos=(1697.365, 2077.978)
[20:16:02] [INFO] [Bullet] Using shooter_position, distance=1114.611328125
[20:16:02] [INFO] [Bullet] Distance to wall: 1114.611328125 (75.8959349215355% of viewport)
[20:16:02] [INFO] [Bullet] Distance-based penetration chance: 58.1214092582086%
[20:16:02] [INFO] [Bullet] Penetration failed (distance roll)
[20:16:02] [ENEMY] [Enemy5] State: COMBAT -> PURSUING
[20:16:02] [ENEMY] [Enemy7] State: COMBAT -> RETREATING
[20:16:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1592.155, 1023.331), shooter_id=2526514513405, bullet_pos=(1413.655, 1399.826)
[20:16:02] [INFO] [Bullet] Using shooter_position, distance=416.666412353516
[20:16:02] [INFO] [Bullet] Distance to wall: 416.666412353516 (28.371582199123% of viewport)
[20:16:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:02] [INFO] [Bullet] Starting wall penetration at (1413.655, 1399.826)
[20:16:02] [ENEMY] [Enemy6] State: COMBAT -> PURSUING
[20:16:02] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:16:02] [INFO] [Bullet] Exiting penetration at (1393.663, 1441.993) after traveling 41.6666679382324 pixels through wall
[20:16:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:16:02] [INFO] [LastChance] Threat detected: @Area2D@2704
[20:16:02] [INFO] [LastChance] Effect already used this life
[20:16:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:02] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1616.537, 975.4678), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[20:16:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1585.562, 1037.284), shooter_id=2526514513405, bullet_pos=(1368.81, 1393.135)
[20:16:02] [INFO] [Bullet] Using shooter_position, distance=416.666687011719
[20:16:02] [INFO] [Bullet] Distance to wall: 416.666687011719 (28.3716009011051% of viewport)
[20:16:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1174.297, 1517.908), shooter_id=2527370153478, bullet_pos=(2298.539, 1445.252)
[20:16:02] [INFO] [Bullet] Using shooter_position, distance=1126.58630371094
[20:16:02] [INFO] [Bullet] Distance to wall: 1126.58630371094 (76.7113330292204% of viewport)
[20:16:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1598.907, 1009.199), shooter_id=2526514513405, bullet_pos=(1224.226, 2069.97)
[20:16:02] [INFO] [Bullet] Using shooter_position, distance=1124.99890136719
[20:16:02] [INFO] [Bullet] Distance to wall: 1124.99890136719 (76.6032438846589% of viewport)
[20:16:02] [INFO] [Bullet] Distance-based penetration chance: 57.2962154678979%
[20:16:02] [INFO] [Bullet] Penetration failed (distance roll)
[20:16:02] [INFO] [LastChance] Threat detected: Bullet
[20:16:02] [INFO] [LastChance] Effect already used this life
[20:16:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:02] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1622.303, 949.9783), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[20:16:02] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:02] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:02] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:02] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:02] [ENEMY] [Enemy1] Death animation component initialized
[20:16:02] [ENEMY] [Enemy2] Death animation component initialized
[20:16:02] [ENEMY] [Enemy3] Death animation component initialized
[20:16:02] [ENEMY] [Enemy4] Death animation component initialized
[20:16:02] [ENEMY] [Enemy5] Death animation component initialized
[20:16:02] [ENEMY] [Enemy6] Death animation component initialized
[20:16:02] [ENEMY] [Enemy7] Death animation component initialized
[20:16:02] [ENEMY] [Enemy8] Death animation component initialized
[20:16:02] [ENEMY] [Enemy9] Death animation component initialized
[20:16:02] [ENEMY] [Enemy10] Death animation component initialized
[20:16:02] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:02] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:02] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:02] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:02] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:02] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:02] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:02] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:16:02] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:02] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:02] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:02] [ENEMY] [Enemy1] Registered as sound listener
[20:16:02] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:16:02] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:02] [ENEMY] [Enemy2] Registered as sound listener
[20:16:02] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:16:02] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:02] [ENEMY] [Enemy3] Registered as sound listener
[20:16:02] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:16:02] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:02] [ENEMY] [Enemy4] Registered as sound listener
[20:16:02] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:16:02] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:02] [ENEMY] [Enemy5] Registered as sound listener
[20:16:02] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:16:02] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:02] [ENEMY] [Enemy6] Registered as sound listener
[20:16:02] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:16:02] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:02] [ENEMY] [Enemy7] Registered as sound listener
[20:16:02] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:16:02] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:02] [ENEMY] [Enemy8] Registered as sound listener
[20:16:02] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:16:02] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:02] [ENEMY] [Enemy9] Registered as sound listener
[20:16:02] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:16:02] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:02] [ENEMY] [Enemy10] Registered as sound listener
[20:16:02] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:16:02] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:02] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:02] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:02] [INFO] [LastChance] Found player: Player
[20:16:02] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:02] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:02] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:02] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:02] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:16:02] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:16:04] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:16:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1146.378, 1565.995), source=ENEMY (Enemy10), range=1469, listeners=20
[20:16:04] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:16:04] [INFO] [LastChance] Threat detected: Bullet
[20:16:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1118.584, 1541.077), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:04] [INFO] [LastChance] Threat detected: @Area2D@2967
[20:16:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:04] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:16:04] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:16:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1103.199, 1526.298), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:04] [INFO] [LastChance] Threat detected: @Area2D@2969
[20:16:04] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:16:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:04] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:16:04] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:16:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1103.199, 1526.298), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:04] [INFO] [LastChance] Threat detected: @Area2D@2971
[20:16:04] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1103.199, 1526.298), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:04] [INFO] [LastChance] Threat detected: @Area2D@2973
[20:16:04] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:04] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:16:04] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:16:04] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:16:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.809, 1528.123), shooter_id=2859156376168, bullet_pos=(105.8769, 691.2944)
[20:16:04] [INFO] [Bullet] Using shooter_position, distance=1291.66723632813
[20:16:04] [INFO] [Bullet] Distance to wall: 1291.66723632813 (87.9519972881928% of viewport)
[20:16:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.809, 1528.123), shooter_id=2859156376168, bullet_pos=(40.58524, 729.8651)
[20:16:04] [INFO] [Bullet] Using shooter_position, distance=1318.36486816406
[20:16:04] [INFO] [Bullet] Distance to wall: 1318.36486816406 (89.7698881325178% of viewport)
[20:16:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1103.199, 1526.298), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:05] [INFO] [LastChance] Threat detected: @Area2D@2976
[20:16:05] [INFO] [LastChance] Triggering last chance effect!
[20:16:05] [INFO] [LastChance] Starting last chance effect:
[20:16:05] [INFO] [LastChance]   - Time will be frozen (except player)
[20:16:05] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:16:05] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:16:05] [INFO] [LastChance]   - Brightness: 0.60
[20:16:05] [INFO] [LastChance] Pushed bullet @Area2D@2976 from distance 71.4 to 200.0
[20:16:05] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:16:05] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:16:05] [INFO] [LastChance] Skipping player node: Player
[20:16:05] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:16:05] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2968
[20:16:05] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2970
[20:16:05] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2972
[20:16:05] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2974
[20:16:05] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2977
[20:16:05] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:16:05] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:16:05] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:16:11] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[20:16:11] [INFO] [LastChance] Ending last chance effect
[20:16:11] [INFO] [LastChance] All process modes restored
[20:16:11] [INFO] [LastChance] Unfroze bullet casing: Casing
[20:16:11] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2968
[20:16:11] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2970
[20:16:11] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2972
[20:16:11] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2974
[20:16:11] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2977
[20:16:11] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:16:11] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[20:16:11] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1698.427, 899.8815), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:16:11] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.826, 1485.551), shooter_id=2859156376168, bullet_pos=(564.7523, 1027.164)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=666.667297363281
[20:16:11] [INFO] [Bullet] Distance to wall: 666.667297363281 (45.3946021705292% of viewport)
[20:16:11] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1680.928, 926.6663), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1670.341, 961.8635), shooter_id=2858300737747, bullet_pos=(1413.131, 1390.632)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=499.999694824219
[20:16:11] [INFO] [Bullet] Distance to wall: 499.999694824219 (34.0458986389476% of viewport)
[20:16:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:11] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1658.457, 956.4672), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.826, 1485.551), shooter_id=2859156376168, bullet_pos=(221.2631, 1391.648)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=832.872985839844
[20:16:11] [INFO] [Bullet] Distance to wall: 832.872985839844 (56.7118531242101% of viewport)
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1670.341, 961.8635), shooter_id=2858300737747, bullet_pos=(1497.951, 1510.284)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=574.877380371094
[20:16:11] [INFO] [Bullet] Distance to wall: 574.877380371094 (39.144457935757% of viewport)
[20:16:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:11] [INFO] [Bullet] Starting wall penetration at (1497.951, 1510.284)
[20:16:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.1235313415527
[20:16:11] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:11] [INFO] [Bullet] Exiting penetration at (1521.324, 1543.257) after traveling 35.4166679382324 pixels through wall
[20:16:11] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1648.199, 986.3267), shooter_id=2858300737747, bullet_pos=(1359.049, 1394.239)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=499.999908447266
[20:16:11] [INFO] [Bullet] Distance to wall: 499.999908447266 (34.0459131849337% of viewport)
[20:16:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:11] [INFO] [Bullet] Starting wall penetration at (1359.049, 1394.239)
[20:16:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.6047859191895
[20:16:11] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:11] [INFO] [Bullet] Exiting penetration at (1332.061, 1432.311) after traveling 41.6666679382324 pixels through wall
[20:16:11] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:16:11] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1628.928, 977.8702), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:16:11] [ENEMY] [Enemy6] Memory: high confidence (0.90) - transitioning to PURSUING
[20:16:11] [ENEMY] [Enemy6] State: IDLE -> PURSUING
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.826, 1485.551), shooter_id=2859156376168, bullet_pos=(67.42703, 1199.897)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=1022.1259765625
[20:16:11] [INFO] [Bullet] Distance to wall: 1022.1259765625 (69.5984372680793% of viewport)
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1621.567, 1013.649), shooter_id=2858300737747, bullet_pos=(1304.138, 1399.963)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=499.999786376953
[20:16:11] [INFO] [Bullet] Distance to wall: 499.999786376953 (34.0459048729416% of viewport)
[20:16:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1037.56, 1509.44), shooter_id=2859156376168, bullet_pos=(66.72137, 1141.738)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=1038.13916015625
[20:16:11] [INFO] [Bullet] Distance to wall: 1038.13916015625 (70.6888043846259% of viewport)
[20:16:11] [INFO] [Bullet] Distance-based penetration chance: 64.1963948846031%
[20:16:11] [INFO] [Bullet] Starting wall penetration at (66.72137, 1141.738)
[20:16:11] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1613.99, 992.7168), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.47289562225342
[20:16:11] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:11] [INFO] [Bullet] Exiting penetration at (23.1568, 1125.008) after traveling 41.6666679382324 pixels through wall
[20:16:11] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1589.294, 1033.185), shooter_id=2858300737747, bullet_pos=(1281.401, 1372.702)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=458.333862304688
[20:16:11] [INFO] [Bullet] Distance to wall: 458.333862304688 (31.2087954859826% of viewport)
[20:16:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:11] [INFO] [LastChance] Threat detected: @Area2D@2992
[20:16:11] [INFO] [LastChance] Effect already used this life
[20:16:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:11] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1609.856, 1003.66), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1570.882, 1045.37), shooter_id=2858300737747, bullet_pos=(1211.882, 1393.392)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=499.999938964844
[20:16:11] [INFO] [Bullet] Distance to wall: 499.999938964844 (34.0459152629317% of viewport)
[20:16:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:11] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1593.241, 1014.113), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1621.567, 1013.649), shooter_id=2858300737747, bullet_pos=(878.6241, 1018.202)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=742.956970214844
[20:16:11] [INFO] [Bullet] Distance to wall: 742.956970214844 (50.5893062793305% of viewport)
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1589.294, 1033.185), shooter_id=2858300737747, bullet_pos=(990.5173, 1009.383)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=599.25
[20:16:11] [INFO] [Bullet] Distance to wall: 599.25 (40.8040344235849% of viewport)
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.826, 1485.551), shooter_id=2859156376168, bullet_pos=(410.3055, 715.418)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=1000.40631103516
[20:16:11] [INFO] [Bullet] Distance to wall: 1000.40631103516 (68.1195053033793% of viewport)
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1563.097, 1053.099), shooter_id=2858300737747, bullet_pos=(1180.152, 1374.585)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=500.00048828125
[20:16:11] [INFO] [Bullet] Distance to wall: 500.00048828125 (34.0459526668959% of viewport)
[20:16:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:11] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1556.692, 1014.33), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:11] [INFO] [LastChance] Threat detected: @Area2D@2998
[20:16:11] [INFO] [LastChance] Effect already used this life
[20:16:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:11] [ENEMY] [Enemy5] Memory: medium confidence (0.76) - transitioning to PURSUING
[20:16:11] [ENEMY] [Enemy5] State: IDLE -> PURSUING
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1570.882, 1045.37), shooter_id=2858300737747, bullet_pos=(914.6498, 990.2957)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=658.539123535156
[20:16:11] [INFO] [Bullet] Distance to wall: 658.539123535156 (44.8411398681784% of viewport)
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1570.882, 1045.37), shooter_id=2858300737747, bullet_pos=(918.0269, 986.6085)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=655.494201660156
[20:16:11] [INFO] [Bullet] Distance to wall: 655.494201660156 (44.6338055385921% of viewport)
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.826, 1485.551), shooter_id=2859156376168, bullet_pos=(497.2667, 871.8771)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=825.113708496094
[20:16:11] [INFO] [Bullet] Distance to wall: 825.113708496094 (56.1835096618212% of viewport)
[20:16:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1544.141, 1061.227), shooter_id=2858300737747, bullet_pos=(1112.887, 1388.982)
[20:16:11] [INFO] [Bullet] Using shooter_position, distance=541.666687011719
[20:16:11] [INFO] [Bullet] Distance to wall: 541.666687011719 (36.883080755837% of viewport)
[20:16:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:11] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1520.126, 1014.066), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:11] [INFO] [LastChance] Threat detected: @Area2D@3004
[20:16:11] [INFO] [LastChance] Effect already used this life
[20:16:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1621.567, 1013.649), shooter_id=2858300737747, bullet_pos=(522.4697, 1392.644)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=1162.60595703125
[20:16:12] [INFO] [Bullet] Distance to wall: 1162.60595703125 (79.1639774581025% of viewport)
[20:16:12] [ENEMY] [Enemy4] Hit taken, health: 3/4
[20:16:12] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:16:12] [INFO] [ImpactEffects] spawn_blood_effect called at (800, 900), dir=(-0.749221, -0.66232), lethal=false
[20:16:12] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:12] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:16:12] [INFO] [ImpactEffects] Wall found for blood splatter at (760, 864.6395) (dist=53 px)
[20:16:12] [INFO] [ImpactEffects] Blood effect spawned at (800, 900) (scale=1)
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1507.452, 1061.298), shooter_id=2858300737747, bullet_pos=(1075.229, 1387.774)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=541.667053222656
[20:16:12] [INFO] [Bullet] Distance to wall: 541.667053222656 (36.8831056918132% of viewport)
[20:16:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:12] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1492.116, 1022.72), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1589.294, 1033.185), shooter_id=2858300737747, bullet_pos=(604.8916, 1397.153)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=1049.53393554688
[20:16:12] [INFO] [Bullet] Distance to wall: 1049.53393554688 (71.4646955941179% of viewport)
[20:16:12] [INFO] [LastChance] Threat detected: @Area2D@3010
[20:16:12] [INFO] [LastChance] Effect already used this life
[20:16:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1563.097, 1053.099), shooter_id=2858300737747, bullet_pos=(642.6819, 1022.546)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=920.922241210938
[20:16:12] [INFO] [Bullet] Distance to wall: 920.922241210938 (62.7072888307318% of viewport)
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1470.789, 1060.931), shooter_id=2858300737747, bullet_pos=(1037.888, 1386.507)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=541.666625976563
[20:16:12] [INFO] [Bullet] Distance to wall: 541.666625976563 (36.883076599841% of viewport)
[20:16:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:12] [INFO] [Bullet] Starting wall penetration at (1037.888, 1386.507)
[20:16:12] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1464.858, 1044.742), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24.21901512146
[20:16:12] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:12] [INFO] [Bullet] Exiting penetration at (1000.592, 1414.557) after traveling 41.6666679382324 pixels through wall
[20:16:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:16:12] [INFO] [LastChance] Threat detected: @Area2D@3014
[20:16:12] [INFO] [LastChance] Effect already used this life
[20:16:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1544.141, 1061.227), shooter_id=2858300737747, bullet_pos=(583.6161, 1024.732)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=961.217468261719
[20:16:12] [INFO] [Bullet] Distance to wall: 961.217468261719 (65.4510649370084% of viewport)
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1441.457, 1068.154), shooter_id=2858300737747, bullet_pos=(999.4139, 1381.204)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=541.666381835938
[20:16:12] [INFO] [Bullet] Distance to wall: 541.666381835938 (36.8830599758569% of viewport)
[20:16:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1441.457, 1068.154), shooter_id=2858300737747, bullet_pos=(995.153, 1378.588)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=543.651123046875
[20:16:12] [INFO] [Bullet] Distance to wall: 543.651123046875 (37.0182046545269% of viewport)
[20:16:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:12] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1432.932, 1064.088), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1507.452, 1061.298), shooter_id=2858300737747, bullet_pos=(691.3177, 1013.374)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=817.54052734375
[20:16:12] [INFO] [Bullet] Distance to wall: 817.54052734375 (55.6678378313059% of viewport)
[20:16:12] [INFO] [LastChance] Threat detected: @Area2D@3019
[20:16:12] [INFO] [LastChance] Effect already used this life
[20:16:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1441.457, 1068.154), shooter_id=2858300737747, bullet_pos=(893.4619, 1451.993)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=669.05224609375
[20:16:12] [INFO] [Bullet] Distance to wall: 669.05224609375 (45.5569977151208% of viewport)
[20:16:12] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:16:12] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:16:12] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1400.212, 1082.057), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:12] [INFO] [LastChance] Threat detected: @Area2D@3024
[20:16:12] [INFO] [LastChance] Effect already used this life
[20:16:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:12] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[20:16:12] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:16:12] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1563.097, 1053.099), shooter_id=2858300737747, bullet_pos=(52.86891, 1448.43)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=1561.11352539063
[20:16:12] [INFO] [Bullet] Distance to wall: 1561.11352539063 (106.299090578495% of viewport)
[20:16:12] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1366.801, 1098.71), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:12] [INFO] [LastChance] Threat detected: @Area2D@3029
[20:16:12] [INFO] [LastChance] Effect already used this life
[20:16:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1441.457, 1068.154), shooter_id=2858300737747, bullet_pos=(1143.198, 1639.116)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=644.171020507813
[20:16:12] [INFO] [Bullet] Distance to wall: 644.171020507813 (43.8627893124348% of viewport)
[20:16:12] [INFO] [Bullet] Distance-based penetration chance: 95.4934124688261%
[20:16:12] [INFO] [Bullet] Starting wall penetration at (1143.198, 1639.116)
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.826, 1485.551), shooter_id=2859156376168, bullet_pos=(67.95073, 1434.274)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=982.214233398438
[20:16:12] [INFO] [Bullet] Distance to wall: 982.214233398438 (66.8807732848141% of viewport)
[20:16:12] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:16:12] [INFO] [Bullet] Exiting penetration at (1167.677, 1657.458) after traveling 25.5885429382324 pixels through wall
[20:16:12] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1507.452, 1061.298), shooter_id=2858300737747, bullet_pos=(354.2499, 1405.084)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=1203.35559082031
[20:16:12] [INFO] [Bullet] Distance to wall: 1203.35559082031 (81.938694954769% of viewport)
[20:16:12] [INFO] [Bullet] Distance-based penetration chance: 51.0715225527695%
[20:16:12] [INFO] [Bullet] Penetration failed (distance roll)
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1544.141, 1061.227), shooter_id=2858300737747, bullet_pos=(59.54408, 1387.163)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=1519.95422363281
[20:16:12] [INFO] [Bullet] Distance to wall: 1519.95422363281 (103.496478036523% of viewport)
[20:16:12] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1332.796, 1114.111), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:12] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[20:16:12] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
[20:16:12] [INFO] [LastChance] Threat detected: @Area2D@3032
[20:16:12] [INFO] [LastChance] Effect already used this life
[20:16:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:12] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1563.097, 1053.099), shooter_id=2858300737747, bullet_pos=(266.8486, 1597.674)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=1405.9951171875
[20:16:12] [INFO] [Bullet] Distance to wall: 1405.9951171875 (95.7367929263429% of viewport)
[20:16:12] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:16:12] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1378.109, 1104.399), shooter_id=2858300737747, bullet_pos=(509.8698, 1600.545)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=999.999877929688
[20:16:12] [INFO] [Bullet] Distance to wall: 999.999877929688 (68.0918305258634% of viewport)
[20:16:12] [INFO] [Bullet] Distance-based penetration chance: 67.2261977198261%
[20:16:12] [INFO] [Bullet] Penetration failed (distance roll)
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.826, 1485.551), shooter_id=2859156376168, bullet_pos=(186.2348, 1587.505)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=868.595153808594
[20:16:12] [INFO] [Bullet] Distance to wall: 868.595153808594 (59.144241228477% of viewport)
[20:16:12] [INFO] [Bullet] Distance-based penetration chance: 77.6650519001102%
[20:16:12] [INFO] [Bullet] Starting wall penetration at (186.2348, 1587.505)
[20:16:12] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1298.331, 1128.46), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:12] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[20:16:12] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:16:12] [INFO] [Bullet] Exiting penetration at (198.8925, 1603.903) after traveling 15.7145643234253 pixels through wall
[20:16:12] [INFO] [Bullet] Damage multiplier after penetration: 0.0140625
[20:16:12] [INFO] [LastChance] Threat detected: Bullet
[20:16:12] [INFO] [LastChance] Effect already used this life
[20:16:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1343.784, 1120.091), shooter_id=2858300737747, bullet_pos=(418.9684, 1599.452)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=1041.66748046875
[20:16:12] [INFO] [Bullet] Distance to wall: 1041.66748046875 (70.929054202713% of viewport)
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1411.849, 1087.411), shooter_id=2858300737747, bullet_pos=(37.54128, 1954.532)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=1624.99865722656
[20:16:12] [INFO] [Bullet] Distance to wall: 1624.99865722656 (110.649146679603% of viewport)
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1544.141, 1061.227), shooter_id=2858300737747, bullet_pos=(391.0141, 1590.423)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=1268.75903320313
[20:16:12] [INFO] [Bullet] Distance to wall: 1268.75903320313 (86.3921356129404% of viewport)
[20:16:12] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1263.828, 1142.719), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:12] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[20:16:12] [INFO] [LastChance] Threat detected: @Area2D@3043
[20:16:12] [INFO] [LastChance] Effect already used this life
[20:16:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:12] [ENEMY] [Enemy3] Memory: medium confidence (0.76) - transitioning to PURSUING
[20:16:12] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[20:16:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1411.849, 1087.411), shooter_id=2858300737747, bullet_pos=(220.4891, 2072.16)
[20:16:13] [INFO] [Bullet] Using shooter_position, distance=1545.66137695313
[20:16:13] [INFO] [Bullet] Distance to wall: 1545.66137695313 (105.24692537739% of viewport)
[20:16:13] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:16:13] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:16:13] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:16:13] [INFO] [LastChance] Player died
[20:16:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:13] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:13] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:13] [ENEMY] [Enemy1] Death animation component initialized
[20:16:13] [ENEMY] [Enemy2] Death animation component initialized
[20:16:13] [ENEMY] [Enemy3] Death animation component initialized
[20:16:13] [ENEMY] [Enemy4] Death animation component initialized
[20:16:13] [ENEMY] [Enemy5] Death animation component initialized
[20:16:13] [ENEMY] [Enemy6] Death animation component initialized
[20:16:13] [ENEMY] [Enemy7] Death animation component initialized
[20:16:13] [ENEMY] [Enemy8] Death animation component initialized
[20:16:13] [ENEMY] [Enemy9] Death animation component initialized
[20:16:13] [ENEMY] [Enemy10] Death animation component initialized
[20:16:13] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:13] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:13] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:13] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:13] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:13] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:13] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:13] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:16:13] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:13] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:13] [ENEMY] [Enemy1] Registered as sound listener
[20:16:13] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:13] [ENEMY] [Enemy2] Registered as sound listener
[20:16:13] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:13] [ENEMY] [Enemy3] Registered as sound listener
[20:16:13] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:13] [ENEMY] [Enemy4] Registered as sound listener
[20:16:13] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:13] [ENEMY] [Enemy5] Registered as sound listener
[20:16:13] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:13] [ENEMY] [Enemy6] Registered as sound listener
[20:16:13] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:13] [ENEMY] [Enemy7] Registered as sound listener
[20:16:13] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:13] [ENEMY] [Enemy8] Registered as sound listener
[20:16:13] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:13] [ENEMY] [Enemy9] Registered as sound listener
[20:16:13] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:13] [ENEMY] [Enemy10] Registered as sound listener
[20:16:13] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:16:13] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:13] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:16:13] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:16:13] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:13] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:13] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:13] [INFO] [LastChance] Found player: Player
[20:16:13] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:13] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:13] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:16] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:16] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1131.692, 1603.089), source=ENEMY (Enemy10), range=1469, listeners=20
[20:16:16] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:16:16] [INFO] [LastChance] Threat detected: Bullet
[20:16:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:16] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1106.291, 1626.739), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:16:16] [INFO] [LastChance] Threat detected: @Area2D@3302
[20:16:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:16] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1083.572, 1656.343), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=7
[20:16:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.168, 1656.214), shooter_id=3164887584003, bullet_pos=(674.8418, 2066.839)
[20:16:16] [INFO] [Bullet] Using shooter_position, distance=583.333984375
[20:16:16] [INFO] [Bullet] Distance to wall: 583.333984375 (39.7202836527066% of viewport)
[20:16:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:16] [INFO] [LastChance] Threat detected: @Area2D@3304
[20:16:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:16] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:16:16] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:16:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1069.061, 1683.7), shooter_id=3164887584003, bullet_pos=(749.3417, 2068.121)
[20:16:16] [INFO] [Bullet] Using shooter_position, distance=499.999755859375
[20:16:16] [INFO] [Bullet] Distance to wall: 499.999755859375 (34.0459027949436% of viewport)
[20:16:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:16] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1077.436, 1665.067), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=7
[20:16:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.168, 1656.214), shooter_id=3164887584003, bullet_pos=(497.0904, 1886.919)
[20:16:16] [INFO] [Bullet] Using shooter_position, distance=635.437316894531
[20:16:16] [INFO] [Bullet] Distance to wall: 635.437316894531 (43.2680953735417% of viewport)
[20:16:16] [INFO] [LastChance] Threat detected: @Area2D@3307
[20:16:16] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:16] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:16:16] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:16:16] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:16:16] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1077.436, 1665.067), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=7
[20:16:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1069.061, 1683.7), shooter_id=3164887584003, bullet_pos=(511.0607, 1848.949)
[20:16:16] [INFO] [Bullet] Using shooter_position, distance=581.955139160156
[20:16:16] [INFO] [Bullet] Distance to wall: 581.955139160156 (39.6263955465551% of viewport)
[20:16:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:16] [INFO] [LastChance] Threat detected: @Area2D@3310
[20:16:16] [INFO] [LastChance] Triggering last chance effect!
[20:16:16] [INFO] [LastChance] Starting last chance effect:
[20:16:16] [INFO] [LastChance]   - Time will be frozen (except player)
[20:16:16] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:16:16] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:16:16] [INFO] [LastChance]   - Brightness: 0.60
[20:16:16] [INFO] [LastChance] Pushed bullet @Area2D@3310 from distance 121.6 to 200.0
[20:16:16] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:16:16] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:16:16] [INFO] [LastChance] Skipping player node: Player
[20:16:16] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:16:16] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3303
[20:16:16] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3305
[20:16:16] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3308
[20:16:16] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3311
[20:16:16] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:16:16] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:16:16] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:16:22] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[20:16:22] [INFO] [LastChance] Ending last chance effect
[20:16:22] [INFO] [LastChance] All process modes restored
[20:16:22] [INFO] [LastChance] Unfroze bullet casing: Casing
[20:16:22] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3303
[20:16:22] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3305
[20:16:22] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3308
[20:16:22] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3311
[20:16:22] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:16:22] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[20:16:22] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1665.428, 899.9012), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:16:22] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:16:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.168, 1656.214), shooter_id=3164887584003, bullet_pos=(291.2992, 2070.744)
[20:16:22] [INFO] [Bullet] Using shooter_position, distance=899.127136230469
[20:16:22] [INFO] [Bullet] Distance to wall: 899.127136230469 (61.2232200549475% of viewport)
[20:16:22] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.112, 1727.818), shooter_id=3164887584003, bullet_pos=(869.2549, 2061.621)
[20:16:22] [INFO] [Bullet] Using shooter_position, distance=380.126312255859
[20:16:22] [INFO] [Bullet] Distance to wall: 380.126312255859 (25.8834995921543% of viewport)
[20:16:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:22] [INFO] [Bullet] Starting wall penetration at (869.2549, 2061.621)
[20:16:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7.22847414016724
[20:16:22] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:22] [INFO] [Bullet] Exiting penetration at (846.3888, 2102.301) after traveling 41.6666679382324 pixels through wall
[20:16:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:16:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.168, 1656.214), shooter_id=3164887584003, bullet_pos=(53.45886, 1911.059)
[20:16:22] [INFO] [Bullet] Using shooter_position, distance=1066.60180664063
[20:16:22] [INFO] [Bullet] Distance to wall: 1066.60180664063 (72.6268783219389% of viewport)
[20:16:22] [INFO] [Bullet] Distance-based penetration chance: 61.9353086244047%
[20:16:22] [INFO] [Bullet] Penetration failed (distance roll)
[20:16:22] [INFO] [LastChance] Threat detected: @Area2D@3313
[20:16:22] [INFO] [LastChance] Effect already used this life
[20:16:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1614.067, 971.1498), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:23] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:23] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1642.538, 963.9844), shooter_id=3164031944031, bullet_pos=(1089.907, 2085.19)
[20:16:23] [INFO] [Bullet] Using shooter_position, distance=1250.00146484375
[20:16:23] [INFO] [Bullet] Distance to wall: 1250.00146484375 (85.1148982912238% of viewport)
[20:16:23] [INFO] [Bullet] Distance-based penetration chance: 47.3659519935722%
[20:16:23] [INFO] [Bullet] Starting wall penetration at (1089.907, 2085.19)
[20:16:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.6154518127441
[20:16:23] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:23] [INFO] [Bullet] Exiting penetration at (1069.276, 2127.049) after traveling 41.6666679382324 pixels through wall
[20:16:23] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:16:23] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1610.619, 1002.539), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:23] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:23] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:23] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
[20:16:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1621.908, 1038.745), shooter_id=3164031944031, bullet_pos=(1622.549, 2080.411)
[20:16:23] [INFO] [Bullet] Using shooter_position, distance=1041.66589355469
[20:16:23] [INFO] [Bullet] Distance to wall: 1041.66589355469 (70.9289461468164% of viewport)
[20:16:23] [INFO] [Bullet] Distance-based penetration chance: 63.9162294953808%
[20:16:23] [INFO] [Bullet] Penetration failed (distance roll)
[20:16:23] [INFO] [LastChance] Threat detected: @Area2D@3319
[20:16:23] [INFO] [LastChance] Effect already used this life
[20:16:23] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:23] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:16:23] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:16:23] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:16:23] [INFO] [LastChance] Player died
[20:16:23] [ENEMY] [Enemy8] Memory: high confidence (0.87) - transitioning to PURSUING
[20:16:23] [ENEMY] [Enemy8] State: IDLE -> PURSUING
[20:16:23] [ENEMY] [Enemy9] Memory: medium confidence (0.78) - transitioning to PURSUING
[20:16:23] [ENEMY] [Enemy9] State: IDLE -> PURSUING
[20:16:24] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:24] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:24] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:24] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:24] [ENEMY] [Enemy1] Death animation component initialized
[20:16:24] [ENEMY] [Enemy2] Death animation component initialized
[20:16:24] [ENEMY] [Enemy3] Death animation component initialized
[20:16:24] [ENEMY] [Enemy4] Death animation component initialized
[20:16:24] [ENEMY] [Enemy5] Death animation component initialized
[20:16:24] [ENEMY] [Enemy6] Death animation component initialized
[20:16:24] [ENEMY] [Enemy7] Death animation component initialized
[20:16:24] [ENEMY] [Enemy8] Death animation component initialized
[20:16:24] [ENEMY] [Enemy9] Death animation component initialized
[20:16:24] [ENEMY] [Enemy10] Death animation component initialized
[20:16:24] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:24] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:24] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:24] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:24] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:24] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:24] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:24] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:16:24] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:24] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:24] [ENEMY] [Enemy1] Registered as sound listener
[20:16:24] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:24] [ENEMY] [Enemy2] Registered as sound listener
[20:16:24] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:24] [ENEMY] [Enemy3] Registered as sound listener
[20:16:24] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:24] [ENEMY] [Enemy4] Registered as sound listener
[20:16:24] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:24] [ENEMY] [Enemy5] Registered as sound listener
[20:16:24] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:24] [ENEMY] [Enemy6] Registered as sound listener
[20:16:24] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:24] [ENEMY] [Enemy7] Registered as sound listener
[20:16:24] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:24] [ENEMY] [Enemy8] Registered as sound listener
[20:16:24] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:24] [ENEMY] [Enemy9] Registered as sound listener
[20:16:24] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:24] [ENEMY] [Enemy10] Registered as sound listener
[20:16:24] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:16:24] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:24] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:24] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:24] [INFO] [LastChance] Found player: Player
[20:16:24] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:24] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:24] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:24] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:24] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:16:24] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:16:25] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:16:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1143.53, 1519.896), source=ENEMY (Enemy10), range=1469, listeners=20
[20:16:25] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1111.422, 1500.851), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:25] [INFO] [LastChance] Threat detected: Bullet
[20:16:25] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:25] [INFO] [LastChance] Threat detected: @Area2D@3574
[20:16:25] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1080.162, 1480.448), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:25] [INFO] [LastChance] Threat detected: @Area2D@3576
[20:16:25] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1050.055, 1458.382), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:25] [INFO] [LastChance] Threat detected: @Area2D@3578
[20:16:25] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1021.554, 1434.281), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1080.937, 1493.103), shooter_id=3468001545612, bullet_pos=(31.87469, 893.487)
[20:16:25] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[20:16:25] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[20:16:25] [INFO] [Bullet] Distance-based penetration chance: 50.6760753752023%
[20:16:25] [INFO] [Bullet] Penetration failed (distance roll)
[20:16:25] [INFO] [LastChance] Threat detected: @Area2D@3580
[20:16:25] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:26] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:16:26] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:16:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1009.824, 1424.075), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1049.916, 1471.628), shooter_id=3468001545612, bullet_pos=(60.42772, 853.5465)
[20:16:26] [INFO] [Bullet] Using shooter_position, distance=1166.6669921875
[20:16:26] [INFO] [Bullet] Distance to wall: 1166.6669921875 (79.4405008094768% of viewport)
[20:16:26] [INFO] [Bullet] Distance-based penetration chance: 53.9860823889438%
[20:16:26] [INFO] [Bullet] Starting wall penetration at (60.42772, 853.5465)
[20:16:26] [INFO] [LastChance] Threat detected: Bullet
[20:16:26] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:16:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13.1486682891846
[20:16:26] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:26] [INFO] [Bullet] Exiting penetration at (20.84818, 828.8232) after traveling 41.6666717529297 pixels through wall
[20:16:26] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:16:26] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:16:26] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:16:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1009.824, 1424.075), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1020.14, 1448.26), shooter_id=3468001545612, bullet_pos=(61.89023, 782.7772)
[20:16:26] [INFO] [Bullet] Using shooter_position, distance=1166.66613769531
[20:16:26] [INFO] [Bullet] Distance to wall: 1166.66613769531 (79.4404426255325% of viewport)
[20:16:26] [INFO] [LastChance] Threat detected: Bullet
[20:16:26] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:26] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:16:26] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:16:26] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:16:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1020.14, 1448.26), shooter_id=3468001545612, bullet_pos=(225.4023, 702.6638)
[20:16:26] [INFO] [Bullet] Using shooter_position, distance=1089.73461914063
[20:16:26] [INFO] [Bullet] Distance to wall: 1089.73461914063 (74.2020340625552% of viewport)
[20:16:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1009.824, 1424.075), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:26] [INFO] [LastChance] Threat detected: Bullet
[20:16:26] [INFO] [LastChance] Triggering last chance effect!
[20:16:26] [INFO] [LastChance] Starting last chance effect:
[20:16:26] [INFO] [LastChance]   - Time will be frozen (except player)
[20:16:26] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:16:26] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:16:26] [INFO] [LastChance]   - Brightness: 0.60
[20:16:26] [INFO] [LastChance] Pushed bullet Bullet from distance 68.7 to 200.0
[20:16:26] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:16:26] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:16:26] [INFO] [LastChance] Skipping player node: Player
[20:16:26] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:16:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3575
[20:16:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3577
[20:16:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3579
[20:16:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3581
[20:16:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3582
[20:16:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3584
[20:16:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3587
[20:16:26] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:16:26] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:16:26] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:16:32] [INFO] [LastChance] Effect duration expired after 6.02 real seconds
[20:16:32] [INFO] [LastChance] Ending last chance effect
[20:16:32] [INFO] [LastChance] All process modes restored
[20:16:32] [INFO] [LastChance] Unfroze bullet casing: Casing
[20:16:32] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3575
[20:16:32] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3577
[20:16:32] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3579
[20:16:32] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3581
[20:16:32] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3582
[20:16:32] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3584
[20:16:32] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3587
[20:16:32] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:16:32] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[20:16:32] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:16:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(992.1503, 1422.489), shooter_id=3468001545612, bullet_pos=(44.75931, 672.4762)
[20:16:32] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
[20:16:32] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
[20:16:32] [INFO] [Bullet] Distance-based penetration chance: 50.6760947698504%
[20:16:32] [INFO] [Bullet] Penetration failed (distance roll)
[20:16:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1020.14, 1448.26), shooter_id=3468001545612, bullet_pos=(500.2913, 837.1907)
[20:16:32] [INFO] [Bullet] Using shooter_position, distance=802.27685546875
[20:16:32] [INFO] [Bullet] Distance to wall: 802.27685546875 (54.6285063459195% of viewport)
[20:16:32] [INFO] [Bullet] Distance-based penetration chance: 82.9334092630939%
[20:16:32] [INFO] [Bullet] Starting wall penetration at (500.2913, 837.1907)
[20:16:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8.70861625671387
[20:16:32] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:32] [INFO] [Bullet] Exiting penetration at (531.8221, 852.6215) after traveling 30.1041679382324 pixels through wall
[20:16:32] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[20:16:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(956.3474, 1382.022), shooter_id=3468001545612, bullet_pos=(566.1011, 1014.274)
[20:16:32] [INFO] [Bullet] Using shooter_position, distance=536.219116210938
[20:16:32] [INFO] [Bullet] Distance to wall: 536.219116210938 (36.5121456428124% of viewport)
[20:16:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(956.3474, 1382.022), shooter_id=3468001545612, bullet_pos=(230.1052, 1385.678)
[20:16:32] [INFO] [Bullet] Using shooter_position, distance=726.251403808594
[20:16:32] [INFO] [Bullet] Distance to wall: 726.251403808594 (49.451793543901% of viewport)
[20:16:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(956.3474, 1382.022), shooter_id=3468001545612, bullet_pos=(63.79017, 1248.279)
[20:16:32] [INFO] [Bullet] Using shooter_position, distance=902.521728515625
[20:16:32] [INFO] [Bullet] Distance to wall: 902.521728515625 (61.4543640857486% of viewport)
[20:16:32] [INFO] [Bullet] Distance-based penetration chance: 74.9699085666266%
[20:16:32] [INFO] [Bullet] Starting wall penetration at (63.79017, 1248.279)
[20:16:32] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:16:32] [INFO] [Bullet] Exiting penetration at (36.72684, 1225.921) after traveling 30.1041698455811 pixels through wall
[20:16:32] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[20:16:34] [ENEMY] [Enemy4] Memory: medium confidence (0.72) - transitioning to PURSUING
[20:16:34] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:16:34] [ENEMY] [Enemy3] Memory: medium confidence (0.60) - transitioning to PURSUING
[20:16:34] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[20:16:35] [ENEMY] [Enemy10] FLANKING started: target=(1042.869, 1745.224), side=left, pos=(954.0672, 1418.75)
[20:16:35] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:16:35] [ENEMY] [Enemy2] Memory: medium confidence (0.52) - transitioning to PURSUING
[20:16:35] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[20:16:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:36] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[20:16:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1031.23, 1654.887), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:36] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=7
[20:16:36] [INFO] [LastChance] Threat detected: Bullet
[20:16:36] [INFO] [LastChance] Effect already used this life
[20:16:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:36] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:16:36] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:16:36] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:16:36] [INFO] [LastChance] Player died
[20:16:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1031.23, 1654.887), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:36] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=7
[20:16:36] [INFO] [LastChance] Threat detected: Bullet
[20:16:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1031.23, 1654.887), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:36] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=7
[20:16:36] [INFO] [LastChance] Threat detected: Bullet
[20:16:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1031.23, 1654.887), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:36] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=7
[20:16:36] [INFO] [LastChance] Threat detected: Bullet
[20:16:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1031.23, 1654.887), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:36] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=7
[20:16:36] [INFO] [LastChance] Threat detected: Bullet
[20:16:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:37] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:37] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:37] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:37] [ENEMY] [Enemy1] Death animation component initialized
[20:16:37] [ENEMY] [Enemy2] Death animation component initialized
[20:16:37] [ENEMY] [Enemy3] Death animation component initialized
[20:16:37] [ENEMY] [Enemy4] Death animation component initialized
[20:16:37] [ENEMY] [Enemy5] Death animation component initialized
[20:16:37] [ENEMY] [Enemy6] Death animation component initialized
[20:16:37] [ENEMY] [Enemy7] Death animation component initialized
[20:16:37] [ENEMY] [Enemy8] Death animation component initialized
[20:16:37] [ENEMY] [Enemy9] Death animation component initialized
[20:16:37] [ENEMY] [Enemy10] Death animation component initialized
[20:16:37] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:37] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:37] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:37] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:37] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:37] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:37] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:37] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:16:37] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:37] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:37] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:37] [ENEMY] [Enemy1] Registered as sound listener
[20:16:37] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:16:37] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:37] [ENEMY] [Enemy2] Registered as sound listener
[20:16:37] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:16:37] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:37] [ENEMY] [Enemy3] Registered as sound listener
[20:16:37] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:16:37] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:37] [ENEMY] [Enemy4] Registered as sound listener
[20:16:37] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:16:37] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:37] [ENEMY] [Enemy5] Registered as sound listener
[20:16:37] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:16:37] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:37] [ENEMY] [Enemy6] Registered as sound listener
[20:16:37] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:16:37] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:37] [ENEMY] [Enemy7] Registered as sound listener
[20:16:37] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:16:37] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:37] [ENEMY] [Enemy8] Registered as sound listener
[20:16:37] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:16:37] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:37] [ENEMY] [Enemy9] Registered as sound listener
[20:16:37] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:16:37] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:37] [ENEMY] [Enemy10] Registered as sound listener
[20:16:37] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:16:37] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:37] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:37] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:37] [INFO] [LastChance] Found player: Player
[20:16:37] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:37] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:37] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:37] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:37] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:16:37] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:16:40] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:16:40] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:40] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1142.492, 1564.891), source=ENEMY (Enemy10), range=1469, listeners=20
[20:16:40] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:40] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:16:40] [INFO] [LastChance] Threat detected: Bullet
[20:16:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:40] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1115.863, 1539.289), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:40] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:40] [INFO] [LastChance] Threat detected: @Area2D@3849
[20:16:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:40] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:16:40] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:16:40] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1107.849, 1532.251), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:40] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:40] [INFO] [LastChance] Threat detected: @Area2D@3851
[20:16:40] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:40] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:16:40] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:16:40] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:16:40] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1107.849, 1532.251), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:40] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:40] [INFO] [LastChance] Threat detected: @Area2D@3853
[20:16:40] [INFO] [LastChance] Triggering last chance effect!
[20:16:40] [INFO] [LastChance] Starting last chance effect:
[20:16:40] [INFO] [LastChance]   - Time will be frozen (except player)
[20:16:40] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:16:40] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:16:40] [INFO] [LastChance]   - Brightness: 0.60
[20:16:40] [INFO] [LastChance] Pushed bullet @Area2D@3853 from distance 113.9 to 200.0
[20:16:40] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:16:40] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Skipping player node: Player
[20:16:40] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:16:40] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3850
[20:16:40] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3852
[20:16:40] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3854
[20:16:40] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:16:40] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:16:40] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:16:46] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[20:16:46] [INFO] [LastChance] Ending last chance effect
[20:16:46] [INFO] [LastChance] All process modes restored
[20:16:46] [INFO] [LastChance] Unfroze bullet casing: Casing
[20:16:46] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3850
[20:16:46] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3852
[20:16:46] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3854
[20:16:46] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:16:46] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[20:16:46] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1658.095, 899.9056), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:46] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:46] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:16:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1049.038, 1498.017), shooter_id=3863004318223, bullet_pos=(914.6897, 1403.754)
[20:16:46] [INFO] [Bullet] Using shooter_position, distance=164.119201660156
[20:16:46] [INFO] [Bullet] Distance to wall: 164.119201660156 (11.1751782296409% of viewport)
[20:16:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1630.503, 920.2998), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:46] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1578.386, 964.0541), shooter_id=3862148681313, bullet_pos=(1578.386, 964.0541)
[20:16:46] [INFO] [Bullet] Using shooter_position, distance=0
[20:16:46] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[20:16:46] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:16:46] [INFO] [Bullet] Starting wall penetration at (1578.386, 964.0541)
[20:16:46] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:16:46] [INFO] [Bullet] Exiting penetration at (1539.442, 989.7656) after traveling 41.6666679382324 pixels through wall
[20:16:46] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:16:46] [INFO] [LastChance] Threat detected: @Area2D@3855
[20:16:46] [INFO] [LastChance] Effect already used this life
[20:16:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1085.396, 1527.87), shooter_id=3863004318223, bullet_pos=(57.16861, 679.031)
[20:16:46] [INFO] [Bullet] Using shooter_position, distance=1333.33361816406
[20:16:46] [INFO] [Bullet] Distance to wall: 1333.33361816406 (90.789137845122% of viewport)
[20:16:46] [INFO] [Bullet] Distance-based penetration chance: 40.7460058473577%
[20:16:46] [INFO] [Bullet] Penetration failed (distance roll)
[20:16:46] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:16:46] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:16:46] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:16:46] [INFO] [LastChance] Player died
[20:16:47] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1614.066, 961.5271), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:47] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:47] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1614.066, 981.2086), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:47] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:47] [INFO] [LastChance] Threat detected: Bullet
[20:16:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:47] [INFO] [LastChance] Threat detected: @Area2D@3862
[20:16:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:47] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1612.11, 999.7952), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:47] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1580.854, 1040.602), shooter_id=3862148681313, bullet_pos=(1337.148, 1378.563)
[20:16:47] [INFO] [Bullet] Using shooter_position, distance=416.666015625
[20:16:47] [INFO] [Bullet] Distance to wall: 416.666015625 (28.3715551851488% of viewport)
[20:16:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:47] [INFO] [Bullet] Starting wall penetration at (1337.148, 1378.563)
[20:16:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.2374687194824
[20:16:47] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:47] [INFO] [Bullet] Exiting penetration at (1309.853, 1416.415) after traveling 41.6666679382324 pixels through wall
[20:16:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:16:47] [INFO] [LastChance] Threat detected: Bullet
[20:16:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:47] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[20:16:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1592.307, 1014.446), source=ENEMY (Enemy7), range=1469, listeners=10
[20:16:47] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:47] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:47] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:47] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:47] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:47] [ENEMY] [Enemy1] Death animation component initialized
[20:16:47] [ENEMY] [Enemy2] Death animation component initialized
[20:16:47] [ENEMY] [Enemy3] Death animation component initialized
[20:16:47] [ENEMY] [Enemy4] Death animation component initialized
[20:16:47] [ENEMY] [Enemy5] Death animation component initialized
[20:16:47] [ENEMY] [Enemy6] Death animation component initialized
[20:16:47] [ENEMY] [Enemy7] Death animation component initialized
[20:16:47] [ENEMY] [Enemy8] Death animation component initialized
[20:16:47] [ENEMY] [Enemy9] Death animation component initialized
[20:16:47] [ENEMY] [Enemy10] Death animation component initialized
[20:16:47] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:47] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:47] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:47] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:47] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:47] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:47] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:47] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:16:47] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:47] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:47] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:47] [ENEMY] [Enemy1] Registered as sound listener
[20:16:47] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:16:47] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:47] [ENEMY] [Enemy2] Registered as sound listener
[20:16:47] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:16:47] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:47] [ENEMY] [Enemy3] Registered as sound listener
[20:16:47] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:16:47] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:47] [ENEMY] [Enemy4] Registered as sound listener
[20:16:47] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:16:47] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:47] [ENEMY] [Enemy5] Registered as sound listener
[20:16:47] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:16:47] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:47] [ENEMY] [Enemy6] Registered as sound listener
[20:16:47] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:16:47] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:47] [ENEMY] [Enemy7] Registered as sound listener
[20:16:47] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:16:47] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:47] [ENEMY] [Enemy8] Registered as sound listener
[20:16:47] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:16:47] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:47] [ENEMY] [Enemy9] Registered as sound listener
[20:16:47] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:16:47] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:47] [ENEMY] [Enemy10] Registered as sound listener
[20:16:47] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:16:47] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:47] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:47] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:47] [INFO] [LastChance] Found player: Player
[20:16:47] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:47] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:47] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:47] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:47] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:16:47] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:16:49] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:16:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.744, 1564.088), source=ENEMY (Enemy10), range=1469, listeners=20
[20:16:49] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:16:49] [INFO] [LastChance] Threat detected: Bullet
[20:16:49] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.991, 1539.121), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:49] [INFO] [LastChance] Threat detected: @Area2D@4120
[20:16:49] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:16:49] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:16:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1089.653, 1517.227), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:49] [INFO] [LastChance] Threat detected: @Area2D@4122
[20:16:49] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:16:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:50] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:16:50] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:16:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1089.653, 1517.227), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:50] [INFO] [LastChance] Threat detected: @Area2D@4124
[20:16:50] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:16:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1089.653, 1517.227), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:50] [INFO] [LastChance] Threat detected: @Area2D@4126
[20:16:50] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.515, 1525.734), shooter_id=4121625102959, bullet_pos=(139.3843, 707.6703)
[20:16:50] [INFO] [Bullet] Using shooter_position, distance=1250.00012207031
[20:16:50] [INFO] [Bullet] Distance to wall: 1250.00012207031 (85.1148068593113% of viewport)
[20:16:50] [INFO] [Bullet] Distance-based penetration chance: 47.3660586641368%
[20:16:50] [INFO] [Bullet] Starting wall penetration at (139.3843, 707.6703)
[20:16:50] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:16:50] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:16:50] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:16:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.610559463501
[20:16:50] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:50] [INFO] [Bullet] Exiting penetration at (104.0995, 677.1292) after traveling 41.6666679382324 pixels through wall
[20:16:50] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:16:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1089.653, 1517.227), source=ENEMY (Enemy10), range=1469, listeners=10
[20:16:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:16:50] [INFO] [LastChance] Threat detected: Bullet
[20:16:50] [INFO] [LastChance] Triggering last chance effect!
[20:16:50] [INFO] [LastChance] Starting last chance effect:
[20:16:50] [INFO] [LastChance]   - Time will be frozen (except player)
[20:16:50] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:16:50] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:16:50] [INFO] [LastChance]   - Brightness: 0.60
[20:16:50] [INFO] [LastChance] Pushed bullet Bullet from distance 46.1 to 200.0
[20:16:50] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:16:50] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:16:50] [INFO] [LastChance] Skipping player node: Player
[20:16:50] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:16:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4121
[20:16:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4123
[20:16:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4125
[20:16:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4127
[20:16:50] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4128
[20:16:50] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:16:50] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:16:50] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:16:56] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[20:16:56] [INFO] [LastChance] Ending last chance effect
[20:16:56] [INFO] [LastChance] All process modes restored
[20:16:56] [INFO] [LastChance] Unfroze bullet casing: Casing
[20:16:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4121
[20:16:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4123
[20:16:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4125
[20:16:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4127
[20:16:56] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4128
[20:16:56] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:16:56] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[20:16:56] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:16:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.081, 1486.446), shooter_id=4121625102959, bullet_pos=(902.3378, 1425.971)
[20:16:56] [INFO] [Bullet] Using shooter_position, distance=140.431655883789
[20:16:56] [INFO] [Bullet] Distance to wall: 140.431655883789 (9.56224968017214% of viewport)
[20:16:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:59] [ENEMY] [Enemy10] FLANKING started: target=(935.4037, 1279.894), side=left, pos=(1015.762, 1440.3)
[20:16:59] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:17:00] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[20:17:00] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:17:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(893.0156, 1368.732), source=ENEMY (Enemy10), range=1469, listeners=10
[20:17:00] [ENEMY] [Enemy4] Heard gunshot at (893.0156, 1368.732), source_type=1, intensity=0.01, distance=478
[20:17:00] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[20:17:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(886.8155, 1436.498), shooter_id=4121625102959, bullet_pos=(886.8155, 1436.498)
[20:17:00] [INFO] [Bullet] Using shooter_position, distance=0
[20:17:00] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[20:17:00] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:17:00] [INFO] [Bullet] Starting wall penetration at (886.8155, 1436.498)
[20:17:00] [INFO] [LastChance] Threat detected: Bullet
[20:17:00] [INFO] [LastChance] Effect already used this life
[20:17:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:00] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:17:00] [INFO] [Bullet] Exiting penetration at (877.2647, 1482.177) after traveling 41.6666679382324 pixels through wall
[20:17:00] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:17:00] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:17:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(882.4633, 1370.29), source=ENEMY (Enemy10), range=1469, listeners=10
[20:17:00] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[20:17:00] [INFO] [LastChance] Threat detected: Bullet
[20:17:00] [INFO] [LastChance] Effect already used this life
[20:17:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:00] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:17:00] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:17:00] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:17:00] [INFO] [LastChance] Player died
[20:17:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(809.132, 960.2859), source=ENEMY (Enemy4), range=1469, listeners=10
[20:17:00] [ENEMY] [Enemy3] Heard gunshot at (809.132, 960.2859), source_type=1, intensity=0.04, distance=237
[20:17:00] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[20:17:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(797.7996, 1027.384), shooter_id=4119913826598, bullet_pos=(797.7996, 1027.384)
[20:17:00] [INFO] [Bullet] Using shooter_position, distance=0
[20:17:00] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[20:17:00] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:17:00] [INFO] [Bullet] Starting wall penetration at (797.7996, 1027.384)
[20:17:00] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:17:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(882.4633, 1370.29), source=ENEMY (Enemy10), range=1469, listeners=10
[20:17:00] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[20:17:00] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:17:00] [INFO] [Bullet] Exiting penetration at (784.8047, 1072.205) after traveling 41.6666717529297 pixels through wall
[20:17:00] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:17:00] [INFO] [LastChance] Threat detected: @Area2D@4133
[20:17:00] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:17:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:00] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:17:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(882.4633, 1370.29), source=ENEMY (Enemy10), range=1469, listeners=10
[20:17:00] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[20:17:00] [INFO] [LastChance] Threat detected: Bullet
[20:17:00] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:17:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:00] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:00] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:00] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:17:00] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:17:00] [ENEMY] [Enemy1] Death animation component initialized
[20:17:00] [ENEMY] [Enemy2] Death animation component initialized
[20:17:00] [ENEMY] [Enemy3] Death animation component initialized
[20:17:00] [ENEMY] [Enemy4] Death animation component initialized
[20:17:00] [ENEMY] [Enemy5] Death animation component initialized
[20:17:00] [ENEMY] [Enemy6] Death animation component initialized
[20:17:00] [ENEMY] [Enemy7] Death animation component initialized
[20:17:00] [ENEMY] [Enemy8] Death animation component initialized
[20:17:00] [ENEMY] [Enemy9] Death animation component initialized
[20:17:00] [ENEMY] [Enemy10] Death animation component initialized
[20:17:00] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:17:00] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:17:00] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:17:00] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:17:00] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:17:00] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:17:00] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:17:00] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:17:00] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:17:00] [INFO] [ScoreManager] Level started with 10 enemies
[20:17:00] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:17:00] [ENEMY] [Enemy1] Registered as sound listener
[20:17:00] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:17:00] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:17:00] [ENEMY] [Enemy2] Registered as sound listener
[20:17:00] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:17:00] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:17:00] [ENEMY] [Enemy3] Registered as sound listener
[20:17:00] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:17:00] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:17:00] [ENEMY] [Enemy4] Registered as sound listener
[20:17:00] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:17:00] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:17:00] [ENEMY] [Enemy5] Registered as sound listener
[20:17:00] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:17:00] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:17:00] [ENEMY] [Enemy6] Registered as sound listener
[20:17:00] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:17:00] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:17:00] [ENEMY] [Enemy7] Registered as sound listener
[20:17:00] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:17:00] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:17:00] [ENEMY] [Enemy8] Registered as sound listener
[20:17:00] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:17:00] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:17:00] [ENEMY] [Enemy9] Registered as sound listener
[20:17:00] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:17:00] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:17:00] [ENEMY] [Enemy10] Registered as sound listener
[20:17:00] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:17:00] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:17:00] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:17:00] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:17:00] [INFO] [LastChance] Found player: Player
[20:17:00] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:17:00] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:17:00] [INFO] [LastChance] Connected to player Died signal (C#)
[20:17:00] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:17:00] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:17:00] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:17:02] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:17:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.039, 1569.125), source=ENEMY (Enemy10), range=1469, listeners=20
[20:17:02] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:17:02] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:17:02] [INFO] [LastChance] Threat detected: Bullet
[20:17:02] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:17:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:02] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:17:02] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:17:02] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:17:02] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:17:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1117.794, 1543.155), source=ENEMY (Enemy10), range=1469, listeners=10
[20:17:02] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:17:02] [INFO] [LastChance] Threat detected: Bullet
[20:17:02] [INFO] [LastChance] Triggering last chance effect!
[20:17:02] [INFO] [LastChance] Starting last chance effect:
[20:17:02] [INFO] [LastChance]   - Time will be frozen (except player)
[20:17:02] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:17:02] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:17:02] [INFO] [LastChance]   - Brightness: 0.60
[20:17:02] [INFO] [LastChance] Pushed bullet Bullet from distance 114.0 to 200.0
[20:17:02] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:17:02] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:17:02] [INFO] [LastChance] Skipping player node: Player
[20:17:02] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:17:02] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4388
[20:17:02] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:17:02] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:17:02] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:17:08] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[20:17:08] [INFO] [LastChance] Ending last chance effect
[20:17:08] [INFO] [LastChance] All process modes restored
[20:17:08] [INFO] [LastChance] Unfroze bullet casing: Casing
[20:17:08] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@4388
[20:17:08] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:17:08] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[20:17:09] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:17:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1062.041, 1504.14), shooter_id=4527029749962, bullet_pos=(499.5266, 1011.935)
[20:17:09] [INFO] [Bullet] Using shooter_position, distance=747.454467773438
[20:17:09] [INFO] [Bullet] Distance to wall: 747.454467773438 (50.8955491582639% of viewport)
[20:17:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1062.041, 1504.14), shooter_id=4527029749962, bullet_pos=(45.45628, 1515.314)
[20:17:09] [INFO] [Bullet] Using shooter_position, distance=1016.64611816406
[20:17:09] [INFO] [Bullet] Distance to wall: 1016.64611816406 (69.2253036331586% of viewport)
[20:17:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1062.041, 1504.14), shooter_id=4527029749962, bullet_pos=(96.75019, 1595.647)
[20:17:09] [INFO] [Bullet] Using shooter_position, distance=969.618408203125
[20:17:09] [INFO] [Bullet] Distance to wall: 969.618408203125 (66.0231003855851% of viewport)
[20:17:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1062.041, 1504.14), shooter_id=4527029749962, bullet_pos=(60.58394, 1668.979)
[20:17:09] [INFO] [Bullet] Using shooter_position, distance=1014.93267822266
[20:17:09] [INFO] [Bullet] Distance to wall: 1014.93267822266 (69.1086323568101% of viewport)
[20:17:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1062.041, 1504.14), shooter_id=4527029749962, bullet_pos=(207.2825, 2060.664)
[20:17:10] [INFO] [Bullet] Using shooter_position, distance=1019.96612548828
[20:17:10] [INFO] [Bullet] Distance to wall: 1019.96612548828 (69.4513690368199% of viewport)
[20:17:12] [ENEMY] [Enemy4] Memory: medium confidence (0.54) - transitioning to PURSUING
[20:17:12] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:17:14] [ENEMY] [Enemy4] FLANKING started: target=(165.5442, 1437.646), side=left, pos=(831.4612, 960.9916)
[20:17:14] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[20:17:15] [ENEMY] [Enemy10] FLANKING started: target=(374.7032, 1762.584), side=right, pos=(958.0765, 1394.191)
[20:17:15] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:17:17] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[20:17:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(535.9695, 1614.165), source=ENEMY (Enemy10), range=1469, listeners=10
[20:17:17] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=5
[20:17:17] [INFO] [LastChance] Threat detected: Bullet
[20:17:17] [INFO] [LastChance] Effect already used this life
[20:17:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:17] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:17:17] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:17:17] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:17:17] [INFO] [LastChance] Player died
[20:17:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(535.7667, 1615.789), source=ENEMY (Enemy10), range=1469, listeners=10
[20:17:17] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=5
[20:17:17] [INFO] [LastChance] Threat detected: @Area2D@4394
[20:17:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:17:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(535.4912, 1617.232), source=ENEMY (Enemy10), range=1469, listeners=10
[20:17:17] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=5
[20:17:17] [INFO] [LastChance] Threat detected: Bullet
[20:17:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:17:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(535.1693, 1618.512), source=ENEMY (Enemy10), range=1469, listeners=10
[20:17:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=5
[20:17:18] [INFO] [LastChance] Threat detected: @Area2D@4397
[20:17:18] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:17:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(534.8196, 1619.647), source=ENEMY (Enemy10), range=1469, listeners=10
[20:17:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=5
[20:17:18] [INFO] [LastChance] Threat detected: Bullet
[20:17:18] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:17:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(534.4568, 1620.655), source=ENEMY (Enemy10), range=1469, listeners=10
[20:17:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=5
[20:17:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:18] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:17:18] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:17:18] [ENEMY] [Enemy1] Death animation component initialized
[20:17:18] [ENEMY] [Enemy2] Death animation component initialized
[20:17:18] [ENEMY] [Enemy3] Death animation component initialized
[20:17:18] [ENEMY] [Enemy4] Death animation component initialized
[20:17:18] [ENEMY] [Enemy5] Death animation component initialized
[20:17:18] [ENEMY] [Enemy6] Death animation component initialized
[20:17:18] [ENEMY] [Enemy7] Death animation component initialized
[20:17:18] [ENEMY] [Enemy8] Death animation component initialized
[20:17:18] [ENEMY] [Enemy9] Death animation component initialized
[20:17:18] [ENEMY] [Enemy10] Death animation component initialized
[20:17:18] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:17:18] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:17:18] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:17:18] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:17:18] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:17:18] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:17:18] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:17:18] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:17:18] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:17:18] [INFO] [ScoreManager] Level started with 10 enemies
[20:17:18] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:17:18] [ENEMY] [Enemy1] Registered as sound listener
[20:17:18] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:17:18] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:17:18] [ENEMY] [Enemy2] Registered as sound listener
[20:17:18] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:17:18] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:17:18] [ENEMY] [Enemy3] Registered as sound listener
[20:17:18] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:17:18] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:17:18] [ENEMY] [Enemy4] Registered as sound listener
[20:17:18] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:17:18] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:17:18] [ENEMY] [Enemy5] Registered as sound listener
[20:17:18] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:17:18] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:17:18] [ENEMY] [Enemy6] Registered as sound listener
[20:17:18] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:17:18] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:17:18] [ENEMY] [Enemy7] Registered as sound listener
[20:17:18] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:17:18] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:17:18] [ENEMY] [Enemy8] Registered as sound listener
[20:17:18] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:17:18] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:17:18] [ENEMY] [Enemy9] Registered as sound listener
[20:17:18] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:17:18] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:17:18] [ENEMY] [Enemy10] Registered as sound listener
[20:17:18] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:17:18] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:17:18] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:17:18] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:17:18] [INFO] [LastChance] Found player: Player
[20:17:18] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:17:18] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:17:18] [INFO] [LastChance] Connected to player Died signal (C#)
[20:17:18] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:17:18] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:17:18] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:17:19] [INFO] ------------------------------------------------------------
[20:17:19] [INFO] GAME LOG ENDED: 2026-01-24T20:17:19
[20:17:19] [INFO] ============================================================
