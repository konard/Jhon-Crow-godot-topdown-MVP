[21:24:30] [INFO] ============================================================
[21:24:30] [INFO] GAME LOG STARTED
[21:24:30] [INFO] ============================================================
[21:24:30] [INFO] Timestamp: 2026-01-24T21:24:30
[21:24:30] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260124_212430.txt
[21:24:30] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
[21:24:30] [INFO] OS: Windows
[21:24:30] [INFO] Debug build: false
[21:24:30] [INFO] Engine version: 4.3-stable (official)
[21:24:30] [INFO] Project: Godot Top-Down Template
[21:24:30] [INFO] ------------------------------------------------------------
[21:24:30] [INFO] [GameManager] GameManager ready
[21:24:30] [INFO] [ScoreManager] ScoreManager ready
[21:24:30] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[21:24:30] [INFO] [ImpactEffects] Scenes loaded: DustEffect, BloodEffect, SparksEffect, BloodDecal
[21:24:30] [INFO] [ImpactEffects] ImpactEffectsManager ready - FULL VERSION with blood effects enabled
[21:24:30] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:24:30] [INFO] [PenultimateHit] Saturation shader loaded successfully
[21:24:30] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[21:24:30] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[21:24:30] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[21:24:30] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[21:24:30] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[21:24:30] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:24:30] [INFO] [LastChance] Last chance shader loaded successfully
[21:24:30] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[21:24:30] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[21:24:30] [INFO] [LastChance]   Sepia intensity: 0.70
[21:24:30] [INFO] [LastChance]   Brightness: 0.60
[21:24:30] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[21:24:30] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[21:24:30] [ENEMY] [Enemy1] Death animation component initialized
[21:24:30] [ENEMY] [Enemy2] Death animation component initialized
[21:24:30] [ENEMY] [Enemy3] Death animation component initialized
[21:24:30] [ENEMY] [Enemy4] Death animation component initialized
[21:24:30] [ENEMY] [Enemy5] Death animation component initialized
[21:24:30] [ENEMY] [Enemy6] Death animation component initialized
[21:24:30] [ENEMY] [Enemy7] Death animation component initialized
[21:24:30] [ENEMY] [Enemy8] Death animation component initialized
[21:24:30] [ENEMY] [Enemy9] Death animation component initialized
[21:24:30] [ENEMY] [Enemy10] Death animation component initialized
[21:24:30] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:24:30] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:24:30] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:24:30] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:24:30] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:24:30] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:24:30] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:24:30] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[21:24:30] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:24:30] [INFO] [ScoreManager] Level started with 10 enemies
[21:24:30] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[21:24:30] [ENEMY] [Enemy1] Registered as sound listener
[21:24:30] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[21:24:30] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[21:24:30] [ENEMY] [Enemy2] Registered as sound listener
[21:24:30] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[21:24:30] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[21:24:30] [ENEMY] [Enemy3] Registered as sound listener
[21:24:30] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[21:24:30] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[21:24:30] [ENEMY] [Enemy4] Registered as sound listener
[21:24:30] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[21:24:30] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[21:24:30] [ENEMY] [Enemy5] Registered as sound listener
[21:24:30] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[21:24:30] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[21:24:30] [ENEMY] [Enemy6] Registered as sound listener
[21:24:30] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[21:24:30] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[21:24:30] [ENEMY] [Enemy7] Registered as sound listener
[21:24:30] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 3, behavior: PATROL, player_found: yes
[21:24:30] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[21:24:30] [ENEMY] [Enemy8] Registered as sound listener
[21:24:30] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[21:24:30] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[21:24:30] [ENEMY] [Enemy9] Registered as sound listener
[21:24:30] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[21:24:30] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[21:24:30] [ENEMY] [Enemy10] Registered as sound listener
[21:24:30] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[21:24:30] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:24:30] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:24:30] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:24:30] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:24:30] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:24:30] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:24:30] [INFO] [LastChance] Found player: Player
[21:24:30] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:24:30] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:24:30] [INFO] [LastChance] Connected to player Died signal (C#)
[21:24:33] [INFO] [Player.Debug] Debug mode toggled: ON
[21:24:33] [INFO] [GameManager] Debug mode toggled: ON
[21:24:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:24:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:24:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:24:36] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:24:36] [ENEMY] [Enemy1] Death animation component initialized
[21:24:36] [ENEMY] [Enemy2] Death animation component initialized
[21:24:36] [ENEMY] [Enemy3] Death animation component initialized
[21:24:36] [ENEMY] [Enemy4] Death animation component initialized
[21:24:36] [ENEMY] [Enemy5] Death animation component initialized
[21:24:36] [ENEMY] [Enemy6] Death animation component initialized
[21:24:36] [ENEMY] [Enemy7] Death animation component initialized
[21:24:36] [ENEMY] [Enemy8] Death animation component initialized
[21:24:36] [ENEMY] [Enemy9] Death animation component initialized
[21:24:36] [ENEMY] [Enemy10] Death animation component initialized
[21:24:36] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:24:36] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:24:36] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:24:36] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:24:36] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:24:36] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:24:36] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[21:24:36] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[21:24:36] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:24:36] [INFO] [ScoreManager] Level started with 10 enemies
[21:24:36] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:24:36] [ENEMY] [Enemy1] Registered as sound listener
[21:24:36] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[21:24:36] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:24:36] [ENEMY] [Enemy2] Registered as sound listener
[21:24:36] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[21:24:36] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:24:36] [ENEMY] [Enemy3] Registered as sound listener
[21:24:36] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[21:24:36] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:24:36] [ENEMY] [Enemy4] Registered as sound listener
[21:24:36] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[21:24:36] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:24:36] [ENEMY] [Enemy5] Registered as sound listener
[21:24:36] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[21:24:36] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:24:36] [ENEMY] [Enemy6] Registered as sound listener
[21:24:36] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[21:24:36] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:24:36] [ENEMY] [Enemy7] Registered as sound listener
[21:24:36] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[21:24:36] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:24:36] [ENEMY] [Enemy8] Registered as sound listener
[21:24:36] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[21:24:36] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:24:36] [ENEMY] [Enemy9] Registered as sound listener
[21:24:36] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[21:24:36] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:24:36] [ENEMY] [Enemy10] Registered as sound listener
[21:24:36] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[21:24:36] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:24:36] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:24:36] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:24:36] [INFO] [LastChance] Found player: Player
[21:24:36] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:24:36] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:24:36] [INFO] [LastChance] Connected to player Died signal (C#)
[21:24:36] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:24:36] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:24:36] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:24:37] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:37] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.731, 1535.008), source=ENEMY (Enemy10), range=1469, listeners=20
[21:24:37] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:24:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[21:24:37] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1139.423, 1516.307), source=ENEMY (Enemy10), range=1469, listeners=10
[21:24:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[21:24:37] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1107.906, 1496.302), source=ENEMY (Enemy10), range=1469, listeners=10
[21:24:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[21:24:37] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1077.226, 1475.035), source=ENEMY (Enemy10), range=1469, listeners=10
[21:24:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[21:24:38] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1047.428, 1452.549), source=ENEMY (Enemy10), range=1469, listeners=10
[21:24:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[21:24:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=299993402084, bullet_pos=(53.14801, 921.1365)
[21:24:38] [INFO] [Bullet] Using shooter_position, distance=1208.33337402344
[21:24:38] [INFO] [Bullet] Distance to wall: 1208.33337402344 (82.277641366406% of viewport)
[21:24:38] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[21:24:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=299993402084, bullet_pos=(46.85162, 857.2495)
[21:24:38] [INFO] [Bullet] Using shooter_position, distance=1208.33435058594
[21:24:38] [INFO] [Bullet] Distance to wall: 1208.33435058594 (82.2777078623423% of viewport)
[21:24:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=299993402084, bullet_pos=(335.0599, 698.5914)
[21:24:38] [INFO] [Bullet] Using shooter_position, distance=1120.46936035156
[21:24:38] [INFO] [Bullet] Distance to wall: 1120.46936035156 (76.2948191078135% of viewport)
[21:24:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=299993402084, bullet_pos=(43.06916, 793.3154)
[21:24:38] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[21:24:38] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[21:24:38] [INFO] [Bullet] Distance-based penetration chance: 50.6760753752023%
[21:24:38] [INFO] [Bullet] Penetration failed (distance roll)
[21:24:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=299993402084, bullet_pos=(246.2341, 701.6426)
[21:24:38] [INFO] [Bullet] Using shooter_position, distance=1144.19445800781
[21:24:38] [INFO] [Bullet] Distance to wall: 1144.19445800781 (77.9103046338353% of viewport)
[21:24:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=299993402084, bullet_pos=(505.9929, 830.2005)
[21:24:38] [INFO] [Bullet] Using shooter_position, distance=907.827941894531
[21:24:38] [INFO] [Bullet] Distance to wall: 907.827941894531 (61.8156739119844% of viewport)
[21:24:38] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[21:24:38] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[21:24:38] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[21:24:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.01, 1441.508), shooter_id=299993402084, bullet_pos=(41.67921, 729.5751)
[21:24:38] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[21:24:38] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[21:24:38] [INFO] [Bullet] Distance-based penetration chance: 50.6760753752023%
[21:24:38] [INFO] [Bullet] Penetration failed (distance roll)
[21:24:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=299993402084, bullet_pos=(511.4475, 854.3622)
[21:24:38] [INFO] [Bullet] Using shooter_position, distance=849.546447753906
[21:24:38] [INFO] [Bullet] Distance to wall: 849.546447753906 (57.8471798057315% of viewport)
[21:24:38] [INFO] [Bullet] Distance-based penetration chance: 79.1782902266466%
[21:24:38] [INFO] [Bullet] Starting wall penetration at (511.4475, 854.3622)
[21:24:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.6193523406982
[21:24:38] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:38] [INFO] [Bullet] Exiting penetration at (541.8686, 871.8798) after traveling 30.1041717529297 pixels through wall
[21:24:38] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[21:24:38] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[21:24:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=299993402084, bullet_pos=(42.53408, 666.2555)
[21:24:38] [INFO] [Bullet] Using shooter_position, distance=1208.33422851563
[21:24:38] [INFO] [Bullet] Distance to wall: 1208.33422851563 (82.2776995503503% of viewport)
[21:24:38] [INFO] [Bullet] Distance-based penetration chance: 50.676017191258%
[21:24:38] [INFO] [Bullet] Penetration failed (distance roll)
[21:24:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 765.1666), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:24:38] [ENEMY] [Enemy1] Heard gunshot at (450, 765.1666), source_type=0, intensity=0.01, distance=441
[21:24:38] [ENEMY] [Enemy2] Heard gunshot at (450, 765.1666), source_type=0, intensity=0.05, distance=221
[21:24:38] [ENEMY] [Enemy4] Heard gunshot at (450, 765.1666), source_type=0, intensity=0.02, distance=375
[21:24:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[21:24:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[21:24:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[21:24:38] [INFO] [LastChance] Threat detected: @Area2D@555
[21:24:38] [INFO] [LastChance] Triggering last chance effect!
[21:24:38] [INFO] [LastChance] Starting last chance effect:
[21:24:38] [INFO] [LastChance]   - Time will be frozen (except player)
[21:24:38] [INFO] [LastChance]   - Duration: 6.0 real seconds
[21:24:38] [INFO] [LastChance]   - Sepia intensity: 0.70
[21:24:38] [INFO] [LastChance]   - Brightness: 0.60
[21:24:38] [INFO] [LastChance] Pushed bullet @Area2D@555 from distance 125.7 to 200.0
[21:24:38] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[21:24:38] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[21:24:38] [INFO] [LastChance] Skipping player node: Player
[21:24:38] [INFO] [LastChance] Froze existing bullet casing: Casing
[21:24:38] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@539
[21:24:38] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@541
[21:24:38] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@543
[21:24:38] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@545
[21:24:38] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@554
[21:24:38] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@556
[21:24:38] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[21:24:38] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[21:24:38] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[21:24:38] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@557
[21:24:38] [INFO] [LastChance] Registered frozen player bullet: @Area2D@557
[21:24:38] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@558
[21:24:38] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@558
[21:24:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.1973, 734.0684), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:24:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[21:24:38] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@559
[21:24:38] [INFO] [LastChance] Registered frozen player bullet: @Area2D@559
[21:24:38] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@560
[21:24:38] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@560
[21:24:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(474.1248, 736.0074), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:24:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[21:24:39] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@561
[21:24:39] [INFO] [LastChance] Registered frozen player bullet: @Area2D@561
[21:24:39] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@562
[21:24:39] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@562
[21:24:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(494.747, 748.6111), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:24:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[21:24:44] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[21:24:44] [INFO] [LastChance] Ending last chance effect
[21:24:44] [ENEMY] [Enemy1] Memory reset (last chance teleport effect)
[21:24:44] [ENEMY] [Enemy1] Confusion applied for 0.5 seconds
[21:24:44] [ENEMY] [Enemy1] State reset: COMBAT -> IDLE (memory reset)
[21:24:44] [ENEMY] [Enemy2] Memory reset (last chance teleport effect)
[21:24:44] [ENEMY] [Enemy2] Confusion applied for 0.5 seconds
[21:24:44] [ENEMY] [Enemy2] State reset: COMBAT -> IDLE (memory reset)
[21:24:44] [ENEMY] [Enemy3] Memory reset (last chance teleport effect)
[21:24:44] [ENEMY] [Enemy3] Confusion applied for 0.5 seconds
[21:24:44] [ENEMY] [Enemy3] State reset: COMBAT -> IDLE (memory reset)
[21:24:44] [ENEMY] [Enemy4] Memory reset (last chance teleport effect)
[21:24:44] [ENEMY] [Enemy4] Confusion applied for 0.5 seconds
[21:24:44] [ENEMY] [Enemy4] State reset: COMBAT -> IDLE (memory reset)
[21:24:44] [ENEMY] [Enemy5] Memory reset (last chance teleport effect)
[21:24:44] [ENEMY] [Enemy5] Confusion applied for 0.5 seconds
[21:24:44] [ENEMY] [Enemy6] Memory reset (last chance teleport effect)
[21:24:44] [ENEMY] [Enemy6] Confusion applied for 0.5 seconds
[21:24:44] [ENEMY] [Enemy7] Memory reset (last chance teleport effect)
[21:24:44] [ENEMY] [Enemy7] Confusion applied for 0.5 seconds
[21:24:44] [ENEMY] [Enemy8] Memory reset (last chance teleport effect)
[21:24:44] [ENEMY] [Enemy8] Confusion applied for 0.5 seconds
[21:24:44] [ENEMY] [Enemy9] Memory reset (last chance teleport effect)
[21:24:44] [ENEMY] [Enemy9] Confusion applied for 0.5 seconds
[21:24:44] [ENEMY] [Enemy10] Memory reset (last chance teleport effect)
[21:24:44] [ENEMY] [Enemy10] Confusion applied for 0.5 seconds
[21:24:44] [ENEMY] [Enemy10] State reset: PURSUING -> IDLE (memory reset)
[21:24:44] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[21:24:44] [INFO] [LastChance] All process modes restored
[21:24:44] [INFO] [LastChance] Unfroze player bullet: @Area2D@557
[21:24:44] [INFO] [LastChance] Unfroze player bullet: @Area2D@559
[21:24:44] [INFO] [LastChance] Unfroze player bullet: @Area2D@561
[21:24:44] [INFO] [LastChance] Unfroze bullet casing: Casing
[21:24:44] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@539
[21:24:44] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@541
[21:24:44] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@543
[21:24:44] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@545
[21:24:44] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@554
[21:24:44] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@556
[21:24:44] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@558
[21:24:44] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@560
[21:24:44] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@562
[21:24:44] [INFO] [LastChance] Restored original colors to 5 player sprites
[21:24:44] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[21:24:44] [ENEMY] [Enemy3] Hit taken, health: 1/2
[21:24:44] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:24:44] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(1, 0), lethal=false
[21:24:44] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:24:44] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[21:24:44] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=1)
[21:24:44] [ENEMY] [Enemy3] Hit taken, health: 0/2
[21:24:44] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:24:44] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(1, 0), lethal=true
[21:24:44] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:24:44] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[21:24:44] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=1.5)
[21:24:44] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[21:24:44] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[21:24:44] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[21:24:44] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[21:24:44] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[21:24:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(474.12476, 736.00745), shooter_id=300815485717, bullet_pos=(912.66547, 788.4641)
[21:24:45] [INFO] [Bullet] Using shooter_position, distance=441,6669
[21:24:45] [INFO] [Bullet] Distance to wall: 441,6669 (30,073912% of viewport)
[21:24:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:45] [INFO] [Bullet] Starting wall penetration at (912.66547, 788.4641)
[21:24:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 14,832466
[21:24:45] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:45] [INFO] [Bullet] Exiting penetration at (950.7275, 793.01697) after traveling 33,333336 pixels through wall
[21:24:45] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[21:24:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(457.19727, 734.06836), shooter_id=300815485717, bullet_pos=(929.27295, 786.6936)
[21:24:45] [INFO] [Bullet] Using shooter_position, distance=474,99988
[21:24:45] [INFO] [Bullet] Distance to wall: 474,99988 (32,343616% of viewport)
[21:24:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:45] [INFO] [Bullet] Starting wall penetration at (929.27295, 786.6936)
[21:24:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31,564613
[21:24:45] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:45] [INFO] [Bullet] Exiting penetration at (967.3703, 790.94055) after traveling 33,333336 pixels through wall
[21:24:45] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[21:24:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.5397, 760.1799), shooter_id=297996913261, bullet_pos=(65.09418, 759.0639)
[21:24:45] [INFO] [Bullet] Using shooter_position, distance=551.446655273438
[21:24:45] [INFO] [Bullet] Distance to wall: 551.446655273438 (37.5490167785533% of viewport)
[21:24:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:45] [INFO] [Bullet] Starting wall penetration at (65.09418, 759.0639)
[21:24:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 5.23234272003174
[21:24:45] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:45] [INFO] [Bullet] Exiting penetration at (26.76873, 758.2861) after traveling 33.3333358764648 pixels through wall
[21:24:45] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:24:45] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[21:24:45] [ENEMY] [Enemy3] Ragdoll activated
[21:24:45] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[21:24:45] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[21:24:45] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[21:24:45] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[21:24:46] [ENEMY] [Enemy8] Memory: high confidence (0.89) - transitioning to PURSUING
[21:24:46] [ENEMY] [Enemy8] State: IDLE -> PURSUING
[21:24:46] [ENEMY] [Enemy9] Memory: medium confidence (0.80) - transitioning to PURSUING
[21:24:46] [ENEMY] [Enemy9] State: IDLE -> PURSUING
[21:24:46] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
[21:24:46] [ENEMY] [Enemy3] Death animation completed
[21:24:47] [ENEMY] [Enemy10] Memory: medium confidence (0.70) - transitioning to PURSUING
[21:24:47] [ENEMY] [Enemy10] State: IDLE -> PURSUING
[21:24:47] [ENEMY] [Enemy7] FLANKING started: target=(1129.771, 1521.424), side=left, pos=(1583.76, 1023.961)
[21:24:47] [ENEMY] [Enemy7] State: PURSUING -> FLANKING
[21:24:48] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[21:24:48] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[21:24:48] [ENEMY] [Enemy8] FLANKING started: target=(1279.903, 1494.66), side=left, pos=(1743.666, 1528.492)
[21:24:48] [ENEMY] [Enemy8] State: PURSUING -> FLANKING
[21:24:48] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[21:24:48] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[21:24:48] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[21:24:48] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[21:24:48] [ENEMY] [Enemy10] FLANKING started: target=(1056.052, 1774.649), side=left, pos=(1122.398, 1609.677)
[21:24:48] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[21:24:49] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[21:24:49] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[21:24:49] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[21:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1106.272, 1672.395), source=ENEMY (Enemy10), range=1469, listeners=9
[21:24:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=5
[21:24:49] [INFO] [LastChance] Threat detected: Bullet
[21:24:49] [INFO] [LastChance] Effect already used this life
[21:24:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:49] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[21:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1106.054, 1683.06), source=ENEMY (Enemy10), range=1469, listeners=9
[21:24:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=5
[21:24:49] [INFO] [LastChance] Threat detected: @Area2D@587
[21:24:49] [INFO] [LastChance] Effect already used this life
[21:24:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1172.223, 1689.161), shooter_id=299993402084, bullet_pos=(1502.565, 1733.718)
[21:24:49] [INFO] [Bullet] Using shooter_position, distance=333.333160400391
[21:24:49] [INFO] [Bullet] Distance to wall: 333.333160400391 (22.6972678372964% of viewport)
[21:24:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:49] [INFO] [Bullet] Starting wall penetration at (1502.565, 1733.718)
[21:24:49] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.1459770202637
[21:24:49] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:49] [INFO] [Bullet] Exiting penetration at (1548.813, 1739.956) after traveling 41.6666717529297 pixels through wall
[21:24:49] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:24:49] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[21:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1106.054, 1683.06), source=ENEMY (Enemy10), range=1469, listeners=9
[21:24:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=5
[21:24:49] [INFO] [LastChance] Threat detected: Bullet
[21:24:49] [INFO] [LastChance] Effect already used this life
[21:24:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1173.142, 1694.453), shooter_id=299993402084, bullet_pos=(1506.001, 1712.225)
[21:24:49] [INFO] [Bullet] Using shooter_position, distance=333.33349609375
[21:24:49] [INFO] [Bullet] Distance to wall: 333.33349609375 (22.6972906952745% of viewport)
[21:24:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:49] [INFO] [Bullet] Starting wall penetration at (1506.001, 1712.225)
[21:24:49] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.6596412658691
[21:24:49] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:49] [INFO] [Bullet] Exiting penetration at (1552.602, 1714.714) after traveling 41.6666679382324 pixels through wall
[21:24:49] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:24:49] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[21:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1106.054, 1683.06), source=ENEMY (Enemy10), range=1469, listeners=9
[21:24:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=5
[21:24:49] [INFO] [LastChance] Threat detected: @Area2D@591
[21:24:49] [INFO] [LastChance] Effect already used this life
[21:24:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1173.142, 1694.453), shooter_id=299993402084, bullet_pos=(1506.001, 1712.225)
[21:24:49] [INFO] [Bullet] Using shooter_position, distance=333.33349609375
[21:24:49] [INFO] [Bullet] Distance to wall: 333.33349609375 (22.6972906952745% of viewport)
[21:24:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:49] [INFO] [Bullet] Starting wall penetration at (1506.001, 1712.225)
[21:24:49] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.6596412658691
[21:24:49] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:49] [INFO] [Bullet] Exiting penetration at (1552.602, 1714.714) after traveling 41.6666679382324 pixels through wall
[21:24:49] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1106.054, 1683.06), source=ENEMY (Enemy10), range=1469, listeners=9
[21:24:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=5
[21:24:49] [INFO] [LastChance] Threat detected: Bullet
[21:24:49] [INFO] [LastChance] Effect already used this life
[21:24:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1173.142, 1694.453), shooter_id=299993402084, bullet_pos=(1506.001, 1712.225)
[21:24:49] [INFO] [Bullet] Using shooter_position, distance=333.33349609375
[21:24:49] [INFO] [Bullet] Distance to wall: 333.33349609375 (22.6972906952745% of viewport)
[21:24:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:49] [INFO] [Bullet] Starting wall penetration at (1506.001, 1712.225)
[21:24:49] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.6596412658691
[21:24:49] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:49] [INFO] [Bullet] Exiting penetration at (1552.602, 1714.714) after traveling 41.6666679382324 pixels through wall
[21:24:49] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1106.054, 1683.06), source=ENEMY (Enemy10), range=1469, listeners=9
[21:24:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=5
[21:24:49] [INFO] [LastChance] Threat detected: @Area2D@596
[21:24:49] [INFO] [LastChance] Effect already used this life
[21:24:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1173.142, 1694.453), shooter_id=299993402084, bullet_pos=(1506.001, 1712.225)
[21:24:49] [INFO] [Bullet] Using shooter_position, distance=333.33349609375
[21:24:49] [INFO] [Bullet] Distance to wall: 333.33349609375 (22.6972906952745% of viewport)
[21:24:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1106.054, 1683.06), source=ENEMY (Enemy10), range=1469, listeners=9
[21:24:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=5
[21:24:49] [INFO] [LastChance] Threat detected: Bullet
[21:24:49] [INFO] [LastChance] Effect already used this life
[21:24:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1173.142, 1694.453), shooter_id=299993402084, bullet_pos=(1506.001, 1712.225)
[21:24:49] [INFO] [Bullet] Using shooter_position, distance=333.33349609375
[21:24:49] [INFO] [Bullet] Distance to wall: 333.33349609375 (22.6972906952745% of viewport)
[21:24:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:49] [INFO] [Bullet] Starting wall penetration at (1506.001, 1712.225)
[21:24:49] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.6596412658691
[21:24:49] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:49] [INFO] [Bullet] Exiting penetration at (1552.602, 1714.714) after traveling 41.6666679382324 pixels through wall
[21:24:49] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1106.054, 1683.06), source=ENEMY (Enemy10), range=1469, listeners=9
[21:24:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=5
[21:24:50] [INFO] [LastChance] Threat detected: @Area2D@601
[21:24:50] [INFO] [LastChance] Effect already used this life
[21:24:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1173.142, 1694.453), shooter_id=299993402084, bullet_pos=(1506.001, 1712.225)
[21:24:50] [INFO] [Bullet] Using shooter_position, distance=333.33349609375
[21:24:50] [INFO] [Bullet] Distance to wall: 333.33349609375 (22.6972906952745% of viewport)
[21:24:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:50] [INFO] [Bullet] Starting wall penetration at (1506.001, 1712.225)
[21:24:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.6596412658691
[21:24:50] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:50] [INFO] [Bullet] Exiting penetration at (1552.602, 1714.714) after traveling 41.6666679382324 pixels through wall
[21:24:50] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1106.054, 1683.06), source=ENEMY (Enemy10), range=1469, listeners=9
[21:24:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=5
[21:24:50] [INFO] [LastChance] Threat detected: Bullet
[21:24:50] [INFO] [LastChance] Effect already used this life
[21:24:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1173.142, 1694.453), shooter_id=299993402084, bullet_pos=(1506.001, 1712.225)
[21:24:50] [INFO] [Bullet] Using shooter_position, distance=333.33349609375
[21:24:50] [INFO] [Bullet] Distance to wall: 333.33349609375 (22.6972906952745% of viewport)
[21:24:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:50] [INFO] [Bullet] Starting wall penetration at (1506.001, 1712.225)
[21:24:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.6596412658691
[21:24:50] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:50] [INFO] [Bullet] Exiting penetration at (1552.602, 1714.714) after traveling 41.6666679382324 pixels through wall
[21:24:50] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:24:50] [ENEMY] [Enemy8] Player distracted - priority attack triggered
[21:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1106.054, 1683.06), source=ENEMY (Enemy10), range=1469, listeners=9
[21:24:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=5
[21:24:50] [INFO] [LastChance] Threat detected: @Area2D@606
[21:24:50] [INFO] [LastChance] Effect already used this life
[21:24:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1173.142, 1694.453), shooter_id=299993402084, bullet_pos=(1506.001, 1712.225)
[21:24:50] [INFO] [Bullet] Using shooter_position, distance=333.33349609375
[21:24:50] [INFO] [Bullet] Distance to wall: 333.33349609375 (22.6972906952745% of viewport)
[21:24:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:50] [INFO] [Bullet] Starting wall penetration at (1506.001, 1712.225)
[21:24:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.6596412658691
[21:24:50] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:50] [INFO] [Bullet] Exiting penetration at (1552.602, 1714.714) after traveling 41.6666679382324 pixels through wall
[21:24:50] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:24:50] [ENEMY] [Enemy8] Player distracted - priority attack triggered
[21:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1106.054, 1683.06), source=ENEMY (Enemy10), range=1469, listeners=9
[21:24:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=4
[21:24:50] [INFO] [LastChance] Threat detected: Bullet
[21:24:50] [INFO] [LastChance] Effect already used this life
[21:24:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1173.142, 1694.453), shooter_id=299993402084, bullet_pos=(1506.001, 1712.225)
[21:24:50] [INFO] [Bullet] Using shooter_position, distance=333.33349609375
[21:24:50] [INFO] [Bullet] Distance to wall: 333.33349609375 (22.6972906952745% of viewport)
[21:24:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:50] [INFO] [Bullet] Starting wall penetration at (1506.001, 1712.225)
[21:24:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.6596412658691
[21:24:50] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:50] [INFO] [Bullet] Exiting penetration at (1552.602, 1714.714) after traveling 41.6666679382324 pixels through wall
[21:24:50] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:24:50] [ENEMY] [Enemy8] Player distracted - priority attack triggered
[21:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1106.054, 1683.06), source=ENEMY (Enemy10), range=1469, listeners=9
[21:24:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=4
[21:24:50] [INFO] [LastChance] Threat detected: @Area2D@611
[21:24:50] [INFO] [LastChance] Effect already used this life
[21:24:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1173.142, 1694.453), shooter_id=299993402084, bullet_pos=(1506.001, 1712.225)
[21:24:50] [INFO] [Bullet] Using shooter_position, distance=333.33349609375
[21:24:50] [INFO] [Bullet] Distance to wall: 333.33349609375 (22.6972906952745% of viewport)
[21:24:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:50] [INFO] [Bullet] Starting wall penetration at (1506.001, 1712.225)
[21:24:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.6596412658691
[21:24:50] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:50] [INFO] [Bullet] Exiting penetration at (1552.602, 1714.714) after traveling 41.6666679382324 pixels through wall
[21:24:50] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:24:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:24:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:24:50] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:24:50] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:24:50] [ENEMY] [Enemy1] Death animation component initialized
[21:24:50] [ENEMY] [Enemy2] Death animation component initialized
[21:24:50] [ENEMY] [Enemy3] Death animation component initialized
[21:24:50] [ENEMY] [Enemy4] Death animation component initialized
[21:24:50] [ENEMY] [Enemy5] Death animation component initialized
[21:24:50] [ENEMY] [Enemy6] Death animation component initialized
[21:24:50] [ENEMY] [Enemy7] Death animation component initialized
[21:24:50] [ENEMY] [Enemy8] Death animation component initialized
[21:24:50] [ENEMY] [Enemy9] Death animation component initialized
[21:24:50] [ENEMY] [Enemy10] Death animation component initialized
[21:24:50] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:24:50] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:24:50] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:24:50] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:24:50] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:24:50] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:24:50] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[21:24:50] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[21:24:50] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:24:50] [INFO] [ScoreManager] Level started with 10 enemies
[21:24:50] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[21:24:50] [ENEMY] [Enemy1] Registered as sound listener
[21:24:50] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[21:24:50] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[21:24:50] [ENEMY] [Enemy2] Registered as sound listener
[21:24:50] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[21:24:50] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[21:24:50] [ENEMY] [Enemy3] Registered as sound listener
[21:24:50] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[21:24:50] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[21:24:50] [ENEMY] [Enemy4] Registered as sound listener
[21:24:50] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[21:24:50] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[21:24:50] [ENEMY] [Enemy5] Registered as sound listener
[21:24:50] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[21:24:50] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[21:24:50] [ENEMY] [Enemy6] Registered as sound listener
[21:24:50] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[21:24:50] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[21:24:50] [ENEMY] [Enemy7] Registered as sound listener
[21:24:50] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[21:24:50] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[21:24:50] [ENEMY] [Enemy8] Registered as sound listener
[21:24:50] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[21:24:50] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[21:24:50] [ENEMY] [Enemy9] Registered as sound listener
[21:24:50] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[21:24:50] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[21:24:50] [ENEMY] [Enemy10] Registered as sound listener
[21:24:50] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[21:24:50] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:24:50] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:24:50] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:24:50] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:24:50] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:24:50] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:24:50] [INFO] [LastChance] Found player: Player
[21:24:50] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:24:50] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:24:50] [INFO] [LastChance] Connected to player Died signal (C#)
[21:24:54] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:54] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1149.054, 1574.916), source=ENEMY (Enemy10), range=1469, listeners=19
[21:24:54] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[21:24:54] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[21:24:54] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:24:54] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[21:24:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1091.852, 1538.058), shooter_id=700952087672, bullet_pos=(61.20754, 692.1556)
[21:24:54] [INFO] [Bullet] Using shooter_position, distance=1333.33374023438
[21:24:54] [INFO] [Bullet] Distance to wall: 1333.33374023438 (90.789146157114% of viewport)
[21:24:54] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[21:24:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 781.6666), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:24:55] [ENEMY] [Enemy1] Heard gunshot at (450, 781.6666), source_type=0, intensity=0.01, distance=457
[21:24:55] [ENEMY] [Enemy2] Heard gunshot at (450, 781.6666), source_type=0, intensity=0.04, distance=237
[21:24:55] [ENEMY] [Enemy4] Heard gunshot at (450, 781.6666), source_type=0, intensity=0.02, distance=369
[21:24:55] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[21:24:55] [ENEMY] [Enemy3] Hit taken, health: 2/3
[21:24:55] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:24:55] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(1, 0), lethal=false
[21:24:55] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:24:55] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[21:24:55] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=1)
[21:24:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[21:24:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[21:24:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(452.3841, 746.0073), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:24:55] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[21:24:55] [INFO] [LastChance] Threat detected: @Area2D@868
[21:24:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[21:24:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1091.852, 1538.058), shooter_id=700952087672, bullet_pos=(510.7125, 362.3806)
[21:24:55] [INFO] [Bullet] Using shooter_position, distance=1311.46496582031
[21:24:55] [INFO] [Bullet] Distance to wall: 1311.46496582031 (89.3000610941303% of viewport)
[21:24:55] [ENEMY] [Enemy3] Hit taken, health: 1/3
[21:24:55] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:24:55] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(1, 0), lethal=false
[21:24:55] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:24:55] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[21:24:55] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=1)
[21:24:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[21:24:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[21:24:55] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[21:24:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.3695, 734.0674), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:24:55] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[21:24:55] [INFO] [LastChance] Threat detected: @Area2D@874
[21:24:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[21:24:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:55] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[21:24:55] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[21:24:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1091.852, 1538.058), shooter_id=700952087672, bullet_pos=(324.0237, 242.7128)
[21:24:55] [INFO] [Bullet] Using shooter_position, distance=1505.81518554688
[21:24:55] [INFO] [Bullet] Distance to wall: 1505.81518554688 (102.533724933853% of viewport)
[21:24:55] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[21:24:55] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[21:24:55] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[21:24:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(678.4612, 759.8386), source=ENEMY (Enemy3), range=1469, listeners=10
[21:24:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[21:24:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.0133, 734.0674), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:24:55] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[21:24:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.5231, 760.0762), shooter_id=698955598849, bullet_pos=(49.99128, 747.7153)
[21:24:55] [INFO] [Bullet] Using shooter_position, distance=566.666687011719
[21:24:55] [INFO] [Bullet] Distance to wall: 566.666687011719 (38.5853767267834% of viewport)
[21:24:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:55] [INFO] [Bullet] Starting wall penetration at (49.99128, 747.7153)
[21:24:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.3377780914307
[21:24:55] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:55] [INFO] [Bullet] Exiting penetration at (11.66706, 746.8792) after traveling 33.3333358764648 pixels through wall
[21:24:55] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:24:55] [INFO] [LastChance] Threat detected: @Area2D@879
[21:24:55] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[21:24:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(670.9771, 767.439), source=ENEMY (Enemy3), range=1469, listeners=10
[21:24:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[21:24:55] [ENEMY] [Enemy3] Hit taken, health: 0/3
[21:24:55] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:24:55] [INFO] [ImpactEffects] spawn_blood_effect called at (669.4802, 768.9591), dir=(1, 0), lethal=true
[21:24:55] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:24:55] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[21:24:55] [INFO] [ImpactEffects] Blood effect spawned at (669.4802, 768.9591) (scale=1.5)
[21:24:55] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[21:24:55] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[21:24:55] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[21:24:55] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[21:24:55] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[21:24:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460.36948, 734.0674), shooter_id=701774171305, bullet_pos=(937.754, 851.7109)
[21:24:55] [INFO] [Bullet] Using shooter_position, distance=491,66656
[21:24:55] [INFO] [Bullet] Distance to wall: 491,66656 (33,47848% of viewport)
[21:24:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:55] [INFO] [LastChance] Threat detected: @Area2D@883
[21:24:55] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[21:24:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(441.43, 736.0804), source=PLAYER (AssaultRifle), range=1469, listeners=9
[21:24:55] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[21:24:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1091.852, 1538.058), shooter_id=700952087672, bullet_pos=(600.6882, 58.22666)
[21:24:55] [INFO] [Bullet] Using shooter_position, distance=1559.21228027344
[21:24:55] [INFO] [Bullet] Distance to wall: 1559.21228027344 (106.169631302384% of viewport)
[21:24:55] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[21:24:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(420.4706, 749.7688), source=PLAYER (AssaultRifle), range=1469, listeners=9
[21:24:55] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[21:24:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(441.43002, 736.0804), shooter_id=701774171305, bullet_pos=(724.3155, 807.11115)
[21:24:55] [INFO] [Bullet] Using shooter_position, distance=291,66687
[21:24:55] [INFO] [Bullet] Distance to wall: 291,66687 (19,860134% of viewport)
[21:24:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:55] [INFO] [Bullet] Starting wall penetration at (724.3155, 807.11115)
[21:24:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 1,5411471
[21:24:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(610.4401, 757.9086), shooter_id=698955598849, bullet_pos=(43.82102, 765.2559)
[21:24:55] [INFO] [Bullet] Using shooter_position, distance=566.666625976563
[21:24:55] [INFO] [Bullet] Distance to wall: 566.666625976563 (38.5853725707874% of viewport)
[21:24:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:55] [INFO] [Bullet] Starting wall penetration at (43.82102, 765.2559)
[21:24:55] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[21:24:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.5113220214844
[21:24:55] [INFO] [Bullet] Max penetration distance exceeded: 66,66667 >= 48
[21:24:55] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:55] [INFO] [Bullet] Exiting penetration at (793.8245, 824.5644) after traveling 66,66667 pixels through wall
[21:24:55] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[21:24:55] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:55] [INFO] [Bullet] Exiting penetration at (5.490906, 765.7529) after traveling 33.3333320617676 pixels through wall
[21:24:55] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:24:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(603.0576, 763.249), shooter_id=698955598849, bullet_pos=(37.51674, 727.5463)
[21:24:55] [INFO] [Bullet] Using shooter_position, distance=566.666748046875
[21:24:55] [INFO] [Bullet] Distance to wall: 566.666748046875 (38.5853808827794% of viewport)
[21:24:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:55] [INFO] [Bullet] Starting wall penetration at (37.51674, 727.5463)
[21:24:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32.8056182861328
[21:24:55] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:55] [INFO] [Bullet] Exiting penetration at (-0.74044, 725.1312) after traveling 33.3333358764648 pixels through wall
[21:24:55] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:24:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(395.8889, 773.7797), source=PLAYER (AssaultRifle), range=1469, listeners=9
[21:24:55] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[21:24:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(420.47058, 749.7688), shooter_id=701774171305, bullet_pos=(739.38794, 812.3529)
[21:24:55] [INFO] [Bullet] Using shooter_position, distance=325,0001
[21:24:55] [INFO] [Bullet] Distance to wall: 325,0001 (22,129854% of viewport)
[21:24:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:55] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[21:24:55] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[21:24:55] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[21:24:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(420.47058, 749.7688), shooter_id=701774171305, bullet_pos=(910.6625, 776.436)
[21:24:55] [INFO] [Bullet] Using shooter_position, distance=490,91672
[21:24:55] [INFO] [Bullet] Distance to wall: 490,91672 (33,42742% of viewport)
[21:24:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(373.1827, 797.765), source=PLAYER (AssaultRifle), range=1469, listeners=9
[21:24:55] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[21:24:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(395.88895, 773.77966), shooter_id=701774171305, bullet_pos=(684.6037, 815.1707)
[21:24:56] [INFO] [Bullet] Using shooter_position, distance=291,66666
[21:24:56] [INFO] [Bullet] Distance to wall: 291,66666 (19,86012% of viewport)
[21:24:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(373.1827, 797.76495), shooter_id=701774171305, bullet_pos=(497.5763, 810.063)
[21:24:56] [INFO] [Bullet] Using shooter_position, distance=125,00002
[21:24:56] [INFO] [Bullet] Distance to wall: 125,00002 (8,511481% of viewport)
[21:24:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:56] [INFO] [Bullet] Starting wall penetration at (497.5763, 810.063)
[21:24:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11,780789
[21:24:56] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:56] [INFO] [Bullet] Exiting penetration at (535.72363, 813.8344) after traveling 33,333336 pixels through wall
[21:24:56] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[21:24:56] [ENEMY] [Enemy3] Ragdoll activated
[21:24:56] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[21:24:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.7912, 914.065), source=ENEMY (Enemy4), range=1469, listeners=9
[21:24:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[21:24:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(625.7491, 877.4666), shooter_id=699240811538, bullet_pos=(508.1704, 814.5935)
[21:24:57] [INFO] [Bullet] Using shooter_position, distance=133.333251953125
[21:24:57] [INFO] [Bullet] Distance to wall: 133.333251953125 (9.07890630371936% of viewport)
[21:24:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.7912, 914.065), source=ENEMY (Enemy4), range=1469, listeners=9
[21:24:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[21:24:57] [INFO] [LastChance] Threat detected: @Area2D@924
[21:24:57] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[21:24:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:57] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[21:24:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.7912, 914.065), source=ENEMY (Enemy4), range=1469, listeners=9
[21:24:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[21:24:57] [INFO] [LastChance] Threat detected: @Area2D@925
[21:24:57] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[21:24:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(543.745, 749.6641), source=PLAYER (AssaultRifle), range=1469, listeners=9
[21:24:57] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
[21:24:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(628.9779, 872.6551), shooter_id=699240811538, bullet_pos=(429.3403, 695.8616)
[21:24:57] [INFO] [Bullet] Using shooter_position, distance=266.666625976563
[21:24:57] [INFO] [Bullet] Distance to wall: 266.666625976563 (18.1578209194308% of viewport)
[21:24:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
[21:24:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[21:24:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.7912, 914.065), source=ENEMY (Enemy4), range=1469, listeners=9
[21:24:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[21:24:57] [INFO] [LastChance] Threat detected: @Area2D@930
[21:24:57] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[21:24:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:57] [INFO] [LastChance] Threat detected: @Area2D@929
[21:24:57] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[21:24:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:57] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[21:24:57] [ENEMY] [Enemy3] Death animation completed
[21:24:57] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[21:24:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
[21:24:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[21:24:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(632.486, 868.4279), shooter_id=699240811538, bullet_pos=(476.0725, 695.2825)
[21:24:57] [INFO] [Bullet] Using shooter_position, distance=233.333435058594
[21:24:57] [INFO] [Bullet] Distance to wall: 233.333435058594 (15.888102655493% of viewport)
[21:24:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:57] [INFO] [LastChance] Threat detected: @Area2D@931
[21:24:57] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[21:24:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:24:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[21:24:57] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[21:24:57] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[21:24:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
[21:24:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[21:24:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(567.2316, 752.2666), source=PLAYER (AssaultRifle), range=1469, listeners=9
[21:24:57] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
[21:24:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(436.4314, 607.4748), shooter_id=698670386160, bullet_pos=(499.2973, 685.243)
[21:24:57] [INFO] [Bullet] Using shooter_position, distance=100.000045776367
[21:24:57] [INFO] [Bullet] Distance to wall: 100.000045776367 (6.80918700078256% of viewport)
[21:24:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:57] [INFO] [Bullet] Starting wall penetration at (499.2973, 685.243)
[21:24:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(543.745, 749.6641), shooter_id=701774171305, bullet_pos=(654.7489, 1019.3814)
[21:24:57] [INFO] [Bullet] Using shooter_position, distance=291,66638
[21:24:57] [INFO] [Bullet] Distance to wall: 291,66638 (19,8601% of viewport)
[21:24:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:24:57] [INFO] [Bullet] Starting wall penetration at (654.7489, 1019.3814)
[21:24:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33,338852
[21:24:57] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[21:24:57] [INFO] [Bullet] Exiting penetration at (523.3959, 715.0541) after traveling 33.3333358764648 pixels through wall
[21:24:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:24:57] [INFO] [Bullet] Body exited signal received for penetrating body
[21:24:57] [INFO] [Bullet] Exiting penetration at (669.338, 1054.83) after traveling 33,333332 pixels through wall
[21:24:57] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[21:24:57] [INFO] [LastChance] Threat detected: @Area2D@934
[21:24:57] [INFO] [LastChance] Triggering last chance effect!
[21:24:57] [INFO] [LastChance] Starting last chance effect:
[21:24:57] [INFO] [LastChance]   - Time will be frozen (except player)
[21:24:57] [INFO] [LastChance]   - Duration: 6.0 real seconds
[21:24:57] [INFO] [LastChance]   - Sepia intensity: 0.70
[21:24:57] [INFO] [LastChance]   - Brightness: 0.60
[21:24:57] [INFO] [LastChance] Pushed bullet @Area2D@929 from distance 78.8 to 200.0
[21:24:57] [INFO] [LastChance] Pushed bullet @Area2D@934 from distance 128.5 to 200.0
[21:24:57] [INFO] [LastChance] Pushed bullet @Area2D@935 from distance 93.8 to 200.0
[21:24:57] [INFO] [LastChance] Pushed 3 threatening bullets away from player
[21:24:57] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[21:24:57] [INFO] [LastChance] Skipping player node: Player
[21:24:57] [INFO] [LastChance] Froze existing bullet casing: Casing
[21:24:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@867
[21:24:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@869
[21:24:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@871
[21:24:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@875
[21:24:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@877
[21:24:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@881
[21:24:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@887
[21:24:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@890
[21:24:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@897
[21:24:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@903
[21:24:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@927
[21:24:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@932
[21:24:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@936
[21:24:57] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[21:24:57] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[21:24:57] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[21:24:57] [INFO] [LastChance] Freezing newly fired player bullet: Bullet
[21:24:57] [INFO] [LastChance] Registered frozen player bullet: Bullet
[21:24:57] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@939
[21:24:57] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@939
[21:24:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(582.6525, 765.8162), source=PLAYER (AssaultRifle), range=1469, listeners=9
[21:24:57] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
[21:24:57] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@940
[21:24:57] [INFO] [LastChance] Registered frozen player bullet: @Area2D@940
[21:24:57] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@941
[21:24:57] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@941
[21:24:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(586.4671, 784.8381), source=PLAYER (AssaultRifle), range=1469, listeners=9
[21:24:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
[21:24:59] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[21:25:03] [INFO] [LastChance] Effect duration expired after 6.02 real seconds
[21:25:03] [INFO] [LastChance] Ending last chance effect
[21:25:03] [ENEMY] [Enemy1] Memory reset (last chance teleport effect)
[21:25:03] [ENEMY] [Enemy1] Confusion applied for 0.5 seconds
[21:25:03] [ENEMY] [Enemy1] State reset: PURSUING -> IDLE (memory reset)
[21:25:03] [ENEMY] [Enemy2] Memory reset (last chance teleport effect)
[21:25:03] [ENEMY] [Enemy2] Confusion applied for 0.5 seconds
[21:25:03] [ENEMY] [Enemy4] Memory reset (last chance teleport effect)
[21:25:03] [ENEMY] [Enemy4] Confusion applied for 0.5 seconds
[21:25:03] [ENEMY] [Enemy5] Memory reset (last chance teleport effect)
[21:25:03] [ENEMY] [Enemy5] Confusion applied for 0.5 seconds
[21:25:03] [ENEMY] [Enemy6] Memory reset (last chance teleport effect)
[21:25:03] [ENEMY] [Enemy6] Confusion applied for 0.5 seconds
[21:25:03] [ENEMY] [Enemy7] Memory reset (last chance teleport effect)
[21:25:03] [ENEMY] [Enemy7] Confusion applied for 0.5 seconds
[21:25:03] [ENEMY] [Enemy8] Memory reset (last chance teleport effect)
[21:25:03] [ENEMY] [Enemy8] Confusion applied for 0.5 seconds
[21:25:03] [ENEMY] [Enemy9] Memory reset (last chance teleport effect)
[21:25:03] [ENEMY] [Enemy9] Confusion applied for 0.5 seconds
[21:25:03] [ENEMY] [Enemy10] Memory reset (last chance teleport effect)
[21:25:03] [ENEMY] [Enemy10] Confusion applied for 0.5 seconds
[21:25:03] [ENEMY] [Enemy10] State reset: PURSUING -> IDLE (memory reset)
[21:25:03] [INFO] [LastChance] Reset memory for 9 enemies (player teleport effect)
[21:25:03] [INFO] [LastChance] All process modes restored
[21:25:03] [INFO] [LastChance] Unfroze player bullet: Bullet
[21:25:03] [INFO] [LastChance] Unfroze player bullet: @Area2D@940
[21:25:03] [INFO] [LastChance] Unfroze bullet casing: Casing
[21:25:03] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@867
[21:25:03] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@869
[21:25:03] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@871
[21:25:03] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@875
[21:25:03] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@877
[21:25:03] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@881
[21:25:03] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@887
[21:25:03] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@890
[21:25:03] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@897
[21:25:03] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@903
[21:25:03] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@927
[21:25:03] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@932
[21:25:03] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@936
[21:25:03] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@939
[21:25:03] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@941
[21:25:03] [INFO] [LastChance] Restored original colors to 5 player sprites
[21:25:03] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[21:25:03] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[21:25:03] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[21:25:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(567.23157, 752.2666), shooter_id=701774171305, bullet_pos=(651.4857, 1020.4544)
[21:25:03] [INFO] [Bullet] Using shooter_position, distance=281,1111
[21:25:03] [INFO] [Bullet] Distance to wall: 281,1111 (19,141373% of viewport)
[21:25:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:25:03] [INFO] [Bullet] Starting wall penetration at (651.4857, 1020.4544)
[21:25:03] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42,923084
[21:25:03] [INFO] [Bullet] Body exited signal received for penetrating body
[21:25:03] [INFO] [Bullet] Exiting penetration at (666.4632, 1064.6523) after traveling 41,666668 pixels through wall
[21:25:03] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[21:25:03] [ENEMY] [Enemy4] Hit taken, health: 1/2
[21:25:03] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[21:25:03] [INFO] [ImpactEffects] spawn_blood_effect called at (709.7631, 928.7062), dir=(1, 0), lethal=false
[21:25:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:25:03] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[21:25:03] [INFO] [ImpactEffects] Blood effect spawned at (709.7631, 928.7062) (scale=1)
[21:25:03] [ENEMY] [Enemy4] Hit taken, health: 0/2
[21:25:03] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[21:25:03] [INFO] [ImpactEffects] spawn_blood_effect called at (709.7631, 928.7062), dir=(1, 0), lethal=true
[21:25:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:25:03] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[21:25:03] [INFO] [ImpactEffects] Blood effect spawned at (709.7631, 928.7062) (scale=1.5)
[21:25:03] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[21:25:03] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[21:25:03] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
[21:25:03] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[21:25:03] [ENEMY] [Enemy4] Death animation started with hit direction: (1, 0)
[21:25:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(435.0641, 608.9429), shooter_id=698670386160, bullet_pos=(930.6476, 928.0862)
[21:25:03] [INFO] [Bullet] Using shooter_position, distance=589.453552246094
[21:25:03] [INFO] [Bullet] Distance to wall: 589.453552246094 (40.1369762819424% of viewport)
[21:25:03] [INFO] [Bullet] Distance-based penetration chance: 99.8401943377339%
[21:25:03] [INFO] [Bullet] Starting wall penetration at (930.6476, 928.0862)
[21:25:03] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31.622106552124
[21:25:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(628.9779, 872.6551), shooter_id=699240811538, bullet_pos=(51.688, 967.8751)
[21:25:03] [INFO] [Bullet] Using shooter_position, distance=585.090148925781
[21:25:03] [INFO] [Bullet] Distance to wall: 585.090148925781 (39.8398641262711% of viewport)
[21:25:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:25:03] [INFO] [Bullet] Starting wall penetration at (51.688, 967.8751)
[21:25:03] [INFO] [Bullet] Body exited signal received for penetrating body
[21:25:03] [INFO] [Bullet] Exiting penetration at (961.2193, 951.2125) after traveling 33.3333358764648 pixels through wall
[21:25:03] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:25:03] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.06995964050293
[21:25:03] [INFO] [Bullet] Body exited signal received for penetrating body
[21:25:03] [INFO] [Bullet] Exiting penetration at (24.64038, 987.3568) after traveling 28.3333358764648 pixels through wall
[21:25:03] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[21:25:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.7237, 606.8282), shooter_id=698670386160, bullet_pos=(693.3959, 874.5668)
[21:25:03] [INFO] [Bullet] Using shooter_position, distance=370.205718994141
[21:25:03] [INFO] [Bullet] Distance to wall: 370.205718994141 (25.2079881546014% of viewport)
[21:25:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:25:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.7237, 606.8282), shooter_id=698670386160, bullet_pos=(542.7561, 1011.14)
[21:25:03] [INFO] [Bullet] Using shooter_position, distance=417.731475830078
[21:25:03] [INFO] [Bullet] Distance to wall: 417.731475830078 (28.4441043297212% of viewport)
[21:25:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:25:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.7237, 606.8282), shooter_id=698670386160, bullet_pos=(519.5983, 993.5455)
[21:25:03] [INFO] [Bullet] Using shooter_position, distance=395.289398193359
[21:25:03] [INFO] [Bullet] Distance to wall: 395.289398193359 (26.9159819960951% of viewport)
[21:25:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:25:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.7237, 606.8282), shooter_id=698670386160, bullet_pos=(523.4783, 990.3918)
[21:25:03] [INFO] [Bullet] Using shooter_position, distance=393.032989501953
[21:25:03] [INFO] [Bullet] Distance to wall: 393.032989501953 (26.7623389791275% of viewport)
[21:25:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:25:04] [ENEMY] [Enemy4] Ragdoll activated
[21:25:04] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[21:25:04] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[21:25:04] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[21:25:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.7237, 606.8282), shooter_id=698670386160, bullet_pos=(54.33133, 714.2042)
[21:25:04] [INFO] [Bullet] Using shooter_position, distance=398.144805908203
[21:25:04] [INFO] [Bullet] Distance to wall: 398.144805908203 (27.1104119580306% of viewport)
[21:25:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:25:05] [ENEMY] [Enemy4] Death animation completed
[21:25:06] [ENEMY] [Enemy2] FLANKING started: target=(-4.221115, 1601.679), side=left, pos=(400, 550)
[21:25:06] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[21:25:07] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[21:25:11] [ENEMY] [Enemy2] FLANKING timeout (5.0s), target=(-1.878174, 1599.138), pos=(226.1374, 1361.846)
[21:25:11] [ENEMY] [Enemy2] State: FLANKING -> PURSUING
[21:25:11] [ENEMY] [Enemy2] FLANKING started: target=(-5.569, 1603.181), side=left, pos=(221.2332, 1359.75)
[21:25:11] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[21:25:16] [ENEMY] [Enemy2] FLANKING timeout (5.0s), target=(-2.134338, 1599.411), pos=(225.4023, 1361.847)
[21:25:16] [ENEMY] [Enemy2] State: FLANKING -> PURSUING
[21:25:16] [ENEMY] [Enemy2] FLANKING started: target=(-5.817795, 1603.462), side=left, pos=(220.4981, 1359.751)
[21:25:16] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[21:25:21] [ENEMY] [Enemy2] FLANKING stuck (2.0s no progress), target=(-4.231369, 1601.69), pos=(230.8689, 1358.2), fail_count=1
[21:25:21] [ENEMY] [Enemy2] State: FLANKING -> PURSUING
[21:25:21] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[21:25:21] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[21:25:23] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[21:25:23] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[21:25:25] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[21:25:25] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[21:25:27] [ENEMY] [Enemy2] FLANKING started: target=(-20.92384, 1622.813), side=left, pos=(162.8523, 1493.987)
[21:25:27] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[21:25:29] [ENEMY] [Enemy2] FLANKING stuck (2.0s no progress), target=(-4.630829, 1602.132), pos=(193.0921, 1530.54), fail_count=1
[21:25:29] [ENEMY] [Enemy2] State: FLANKING -> PURSUING
[21:25:29] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[21:25:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(209.0165, 1532.094), source=ENEMY (Enemy2), range=1469, listeners=8
[21:25:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=1, below_threshold=2
[21:25:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(181.0424, 1594.126), shooter_id=698670386160, bullet_pos=(181.0424, 1594.126)
[21:25:30] [INFO] [Bullet] Using shooter_position, distance=0
[21:25:30] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[21:25:30] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[21:25:30] [INFO] [Bullet] Starting wall penetration at (181.0424, 1594.126)
[21:25:30] [INFO] [LastChance] Threat detected: Bullet
[21:25:30] [INFO] [LastChance] Effect already used this life
[21:25:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:25:30] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.9059429168701
[21:25:30] [INFO] [Bullet] Body exited signal received for penetrating body
[21:25:30] [INFO] [Bullet] Exiting penetration at (166.8608, 1638.586) after traveling 41.6666717529297 pixels through wall
[21:25:30] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:25:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(209.0165, 1532.094), source=ENEMY (Enemy2), range=1469, listeners=8
[21:25:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=1, below_threshold=2
[21:25:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(181.0424, 1594.126), shooter_id=698670386160, bullet_pos=(181.0424, 1594.126)
[21:25:30] [INFO] [Bullet] Using shooter_position, distance=0
[21:25:30] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[21:25:30] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[21:25:30] [INFO] [Bullet] Starting wall penetration at (181.0424, 1594.126)
[21:25:30] [INFO] [LastChance] Threat detected: Bullet
[21:25:30] [INFO] [LastChance] Effect already used this life
[21:25:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:25:30] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.9059429168701
[21:25:30] [INFO] [Bullet] Body exited signal received for penetrating body
[21:25:30] [INFO] [Bullet] Exiting penetration at (166.8608, 1638.586) after traveling 41.6666717529297 pixels through wall
[21:25:30] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:25:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(209.0165, 1532.094), source=ENEMY (Enemy2), range=1469, listeners=8
[21:25:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=1, below_threshold=2
[21:25:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(181.0424, 1594.126), shooter_id=698670386160, bullet_pos=(181.0424, 1594.126)
[21:25:30] [INFO] [Bullet] Using shooter_position, distance=0
[21:25:30] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[21:25:30] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[21:25:30] [INFO] [Bullet] Starting wall penetration at (181.0424, 1594.126)
[21:25:30] [INFO] [LastChance] Threat detected: Bullet
[21:25:30] [INFO] [LastChance] Effect already used this life
[21:25:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:25:30] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.9059429168701
[21:25:30] [INFO] [Bullet] Body exited signal received for penetrating body
[21:25:30] [INFO] [Bullet] Exiting penetration at (166.8608, 1638.586) after traveling 41.6666717529297 pixels through wall
[21:25:30] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:25:30] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[21:25:31] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[21:25:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(209.0165, 1532.094), source=ENEMY (Enemy2), range=1469, listeners=8
[21:25:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=1, below_threshold=2
[21:25:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(181.0424, 1594.126), shooter_id=698670386160, bullet_pos=(181.0424, 1594.126)
[21:25:32] [INFO] [Bullet] Using shooter_position, distance=0
[21:25:32] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[21:25:32] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[21:25:32] [INFO] [Bullet] Starting wall penetration at (181.0424, 1594.126)
[21:25:32] [INFO] [LastChance] Threat detected: Bullet
[21:25:32] [INFO] [LastChance] Effect already used this life
[21:25:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:25:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.9059429168701
[21:25:32] [INFO] [Bullet] Body exited signal received for penetrating body
[21:25:32] [INFO] [Bullet] Exiting penetration at (166.8608, 1638.586) after traveling 41.6666717529297 pixels through wall
[21:25:32] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:25:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(209.0165, 1532.094), source=ENEMY (Enemy2), range=1469, listeners=8
[21:25:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=1, below_threshold=2
[21:25:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(181.0424, 1594.126), shooter_id=698670386160, bullet_pos=(181.0424, 1594.126)
[21:25:32] [INFO] [Bullet] Using shooter_position, distance=0
[21:25:32] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[21:25:32] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[21:25:32] [INFO] [Bullet] Starting wall penetration at (181.0424, 1594.126)
[21:25:32] [INFO] [LastChance] Threat detected: Bullet
[21:25:32] [INFO] [LastChance] Effect already used this life
[21:25:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:25:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.9059429168701
[21:25:32] [INFO] [Bullet] Body exited signal received for penetrating body
[21:25:32] [INFO] [Bullet] Exiting penetration at (166.8608, 1638.586) after traveling 41.6666717529297 pixels through wall
[21:25:32] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:25:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(209.0165, 1532.094), source=ENEMY (Enemy2), range=1469, listeners=8
[21:25:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=1, below_threshold=2
[21:25:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(181.0424, 1594.126), shooter_id=698670386160, bullet_pos=(181.0424, 1594.126)
[21:25:32] [INFO] [Bullet] Using shooter_position, distance=0
[21:25:32] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[21:25:32] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[21:25:32] [INFO] [Bullet] Starting wall penetration at (181.0424, 1594.126)
[21:25:32] [INFO] [LastChance] Threat detected: Bullet
[21:25:32] [INFO] [LastChance] Effect already used this life
[21:25:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:25:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.9059429168701
[21:25:32] [INFO] [Bullet] Body exited signal received for penetrating body
[21:25:32] [INFO] [Bullet] Exiting penetration at (166.8608, 1638.586) after traveling 41.6666717529297 pixels through wall
[21:25:32] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:25:32] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[21:25:33] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[21:25:34] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:25:34] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:25:34] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:25:34] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:25:34] [ENEMY] [Enemy1] Death animation component initialized
[21:25:34] [ENEMY] [Enemy2] Death animation component initialized
[21:25:34] [ENEMY] [Enemy3] Death animation component initialized
[21:25:34] [ENEMY] [Enemy4] Death animation component initialized
[21:25:34] [ENEMY] [Enemy5] Death animation component initialized
[21:25:34] [ENEMY] [Enemy6] Death animation component initialized
[21:25:34] [ENEMY] [Enemy7] Death animation component initialized
[21:25:34] [ENEMY] [Enemy8] Death animation component initialized
[21:25:34] [ENEMY] [Enemy9] Death animation component initialized
[21:25:34] [ENEMY] [Enemy10] Death animation component initialized
[21:25:34] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:25:34] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:25:34] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:25:34] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:25:34] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:25:34] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:25:34] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[21:25:34] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[21:25:34] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:25:34] [INFO] [ScoreManager] Level started with 10 enemies
[21:25:34] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
[21:25:34] [ENEMY] [Enemy1] Registered as sound listener
[21:25:34] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[21:25:34] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
[21:25:34] [ENEMY] [Enemy2] Registered as sound listener
[21:25:34] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[21:25:34] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
[21:25:34] [ENEMY] [Enemy3] Registered as sound listener
[21:25:34] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[21:25:34] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
[21:25:34] [ENEMY] [Enemy4] Registered as sound listener
[21:25:34] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[21:25:34] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
[21:25:34] [ENEMY] [Enemy5] Registered as sound listener
[21:25:34] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[21:25:34] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
[21:25:34] [ENEMY] [Enemy6] Registered as sound listener
[21:25:34] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[21:25:34] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
[21:25:34] [ENEMY] [Enemy7] Registered as sound listener
[21:25:34] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[21:25:34] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
[21:25:34] [ENEMY] [Enemy8] Registered as sound listener
[21:25:34] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[21:25:34] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
[21:25:34] [ENEMY] [Enemy9] Registered as sound listener
[21:25:34] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[21:25:34] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
[21:25:34] [ENEMY] [Enemy10] Registered as sound listener
[21:25:34] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[21:25:34] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:25:34] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:25:34] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:25:34] [INFO] [LastChance] Found player: Player
[21:25:34] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:25:34] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:25:34] [INFO] [LastChance] Connected to player Died signal (C#)
[21:25:34] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:25:34] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:25:34] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:25:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:25:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:25:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.731, 1535.008), source=ENEMY (Enemy10), range=1469, listeners=18
[21:25:35] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
[21:25:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[21:25:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:25:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1139.423, 1516.307), source=ENEMY (Enemy10), range=1469, listeners=10
[21:25:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[21:25:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:25:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1107.906, 1496.302), source=ENEMY (Enemy10), range=1469, listeners=10
[21:25:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[21:25:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:25:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1077.226, 1475.035), source=ENEMY (Enemy10), range=1469, listeners=10
[21:25:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[21:25:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:25:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1047.428, 1452.549), source=ENEMY (Enemy10), range=1469, listeners=10
[21:25:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[21:25:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=2384126282488, bullet_pos=(53.14801, 921.1365)
[21:25:35] [INFO] [Bullet] Using shooter_position, distance=1208.33337402344
[21:25:35] [INFO] [Bullet] Distance to wall: 1208.33337402344 (82.277641366406% of viewport)
[21:25:35] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[21:25:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=2384126282488, bullet_pos=(46.85162, 857.2495)
[21:25:35] [INFO] [Bullet] Using shooter_position, distance=1208.33435058594
[21:25:35] [INFO] [Bullet] Distance to wall: 1208.33435058594 (82.2777078623423% of viewport)
[21:25:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=2384126282488, bullet_pos=(339.5448, 704.3936)
[21:25:35] [INFO] [Bullet] Using shooter_position, distance=1113.17602539063
[21:25:35] [INFO] [Bullet] Distance to wall: 1113.17602539063 (75.7982025190629% of viewport)
[21:25:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=2384126282488, bullet_pos=(43.06916, 793.3154)
[21:25:35] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[21:25:35] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[21:25:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=2384126282488, bullet_pos=(332.4389, 704.7569)
[21:25:35] [INFO] [Bullet] Using shooter_position, distance=1080.91442871094
[21:25:35] [INFO] [Bullet] Distance to wall: 1080.91442871094 (73.6014510772977% of viewport)
[21:25:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=2384126282488, bullet_pos=(508.7134, 838.2631)
[21:25:35] [INFO] [Bullet] Using shooter_position, distance=899.999389648438
[21:25:35] [INFO] [Bullet] Distance to wall: 899.999389648438 (61.2826133941096% of viewport)
[21:25:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=2384126282488, bullet_pos=(203.2467, 706.7272)
[21:25:35] [INFO] [Bullet] Using shooter_position, distance=1134.83093261719
[21:25:35] [INFO] [Bullet] Distance to wall: 1134.83093261719 (77.2727249719827% of viewport)
[21:25:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[21:25:35] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[21:25:35] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[21:25:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.01, 1441.508), shooter_id=2384126282488, bullet_pos=(41.67921, 729.5751)
[21:25:35] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[21:25:35] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[21:25:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.01, 1441.508), shooter_id=2384126282488, bullet_pos=(106.1052, 689.5752)
[21:25:35] [INFO] [Bullet] Using shooter_position, distance=1181.93603515625
[21:25:35] [INFO] [Bullet] Distance to wall: 1181.93603515625 (80.4801980225132% of viewport)
[21:25:35] [INFO] [Bullet] Distance-based penetration chance: 52.773102307068%
[21:25:35] [INFO] [Bullet] Starting wall penetration at (106.1052, 689.5752)
[21:25:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=2384126282488, bullet_pos=(502.8811, 837.0011)
[21:25:35] [INFO] [Bullet] Using shooter_position, distance=868.214111328125
[21:25:35] [INFO] [Bullet] Distance to wall: 868.214111328125 (59.1182953453065% of viewport)
[21:25:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.4303321838379
[21:25:36] [INFO] [LastChance] Threat detected: @Area2D@1236
[21:25:36] [INFO] [LastChance] Triggering last chance effect!
[21:25:36] [INFO] [LastChance] Starting last chance effect:
[21:25:36] [INFO] [LastChance]   - Time will be frozen (except player)
[21:25:36] [INFO] [LastChance]   - Duration: 6.0 real seconds
[21:25:36] [INFO] [LastChance]   - Sepia intensity: 0.70
[21:25:36] [INFO] [LastChance]   - Brightness: 0.60
[21:25:36] [INFO] [LastChance] Pushed bullet @Area2D@1234 from distance 30.3 to 200.0
[21:25:36] [INFO] [LastChance] Pushed bullet @Area2D@1236 from distance 123.6 to 200.0
[21:25:36] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[21:25:36] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[21:25:36] [INFO] [LastChance] Skipping player node: Player
[21:25:36] [INFO] [LastChance] Froze existing bullet casing: Casing
[21:25:36] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1235
[21:25:36] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1237
[21:25:36] [INFO] [Bullet] Body exited signal received for penetrating body
[21:25:36] [INFO] [Bullet] Exiting penetration at (140.4421, 668.2566) after traveling 35.4166679382324 pixels through wall
[21:25:36] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[21:25:36] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1239
[21:25:36] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1241
[21:25:36] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[21:25:36] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[21:25:36] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[21:25:37] [INFO] [LastChance] Freezing newly fired player bullet: Bullet
[21:25:37] [INFO] [LastChance] Registered frozen player bullet: Bullet
[21:25:37] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1251
[21:25:37] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1251
[21:25:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(612.5411, 801.7703), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:25:37] [ENEMY] [Enemy2] Heard gunshot at (612.5411, 801.7703), source_type=0, intensity=0.02, distance=329
[21:25:37] [ENEMY] [Enemy3] Heard gunshot at (612.5411, 801.7703), source_type=0, intensity=0.24, distance=102
[21:25:37] [ENEMY] [Enemy4] Heard gunshot at (612.5411, 801.7703), source_type=0, intensity=0.06, distance=212
[21:25:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
[21:25:37] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1252
[21:25:37] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1252
[21:25:37] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1253
[21:25:37] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1253
[21:25:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(629.7782, 794.9692), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:25:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
[21:25:37] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1254
[21:25:37] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1254
[21:25:37] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1255
[21:25:37] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1255
[21:25:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(635.0596, 793.8555), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:25:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
[21:25:37] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1256
[21:25:37] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1256
[21:25:37] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1257
[21:25:37] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1257
[21:25:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(636.8506, 806.7297), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:25:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
[21:25:38] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1258
[21:25:38] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1258
[21:25:38] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1259
[21:25:38] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1259
[21:25:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(729.3003, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:25:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=7
[21:25:38] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1260
[21:25:38] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1260
[21:25:38] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1261
[21:25:38] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1261
[21:25:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(735.9712, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:25:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=7
[21:25:38] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1262
[21:25:38] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1262
[21:25:38] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1263
[21:25:38] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1263
[21:25:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(726.8643, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:25:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=7
[21:25:38] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1264
[21:25:38] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1264
[21:25:38] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1265
[21:25:38] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1265
[21:25:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(705.2705, 985.0682), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:25:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=7
[21:25:39] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1266
[21:25:39] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1266
[21:25:39] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1267
[21:25:39] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1267
[21:25:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(489.8644, 649.3163), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:25:39] [ENEMY] [Enemy1] Heard gunshot at (489.8644, 649.3163), source_type=0, intensity=0.02, distance=354
[21:25:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[21:25:40] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1268
[21:25:40] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1268
[21:25:40] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1269
[21:25:40] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1269
[21:25:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(451.3644, 649.3163), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:25:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[21:25:40] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1270
[21:25:40] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1270
[21:25:40] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1271
[21:25:40] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1271
[21:25:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(412.8644, 649.3163), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:25:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[21:25:40] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1272
[21:25:40] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1272
[21:25:40] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1273
[21:25:40] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1273
[21:25:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(374.3644, 649.3163), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:25:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[21:25:41] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1274
[21:25:41] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1274
[21:25:41] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1275
[21:25:41] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1275
[21:25:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(184.86, 397.5464), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:25:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[21:25:41] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1276
[21:25:41] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1276
[21:25:41] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1277
[21:25:41] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1277
[21:25:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(195.6735, 369.8381), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:25:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[21:25:41] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1278
[21:25:41] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1278
[21:25:41] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1279
[21:25:41] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1279
[21:25:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(201.5386, 354.8096), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:25:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[21:25:41] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1280
[21:25:41] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1280
[21:25:41] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1281
[21:25:41] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1281
[21:25:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(201.0647, 351.0271), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:25:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[21:25:41] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@1282
[21:25:41] [INFO] [LastChance] Registered frozen player bullet: @Area2D@1282
[21:25:41] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@1283
[21:25:41] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@1283
[21:25:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(185.9214, 349.3086), source=PLAYER (AssaultRifle), range=1469, listeners=10
[21:25:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[21:25:42] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[21:25:42] [INFO] [LastChance] Ending last chance effect
[21:25:42] [ENEMY] [Enemy1] Memory reset (last chance teleport effect)
[21:25:42] [ENEMY] [Enemy1] Confusion applied for 0.5 seconds
[21:25:42] [ENEMY] [Enemy1] State reset: COMBAT -> IDLE (memory reset)
[21:25:42] [ENEMY] [Enemy2] Memory reset (last chance teleport effect)
[21:25:42] [ENEMY] [Enemy2] Confusion applied for 0.5 seconds
[21:25:42] [ENEMY] [Enemy2] State reset: COMBAT -> IDLE (memory reset)
[21:25:42] [ENEMY] [Enemy3] Memory reset (last chance teleport effect)
[21:25:42] [ENEMY] [Enemy3] Confusion applied for 0.5 seconds
[21:25:42] [ENEMY] [Enemy3] State reset: COMBAT -> IDLE (memory reset)
[21:25:42] [ENEMY] [Enemy4] Memory reset (last chance teleport effect)
[21:25:42] [ENEMY] [Enemy4] Confusion applied for 0.5 seconds
[21:25:42] [ENEMY] [Enemy4] State reset: COMBAT -> IDLE (memory reset)
[21:25:42] [ENEMY] [Enemy5] Memory reset (last chance teleport effect)
[21:25:42] [ENEMY] [Enemy5] Confusion applied for 0.5 seconds
[21:25:42] [ENEMY] [Enemy6] Memory reset (last chance teleport effect)
[21:25:42] [ENEMY] [Enemy6] Confusion applied for 0.5 seconds
[21:25:42] [ENEMY] [Enemy7] Memory reset (last chance teleport effect)
[21:25:42] [ENEMY] [Enemy7] Confusion applied for 0.5 seconds
[21:25:42] [ENEMY] [Enemy8] Memory reset (last chance teleport effect)
[21:25:42] [ENEMY] [Enemy8] Confusion applied for 0.5 seconds
[21:25:42] [ENEMY] [Enemy9] Memory reset (last chance teleport effect)
[21:25:42] [ENEMY] [Enemy9] Confusion applied for 0.5 seconds
[21:25:42] [ENEMY] [Enemy10] Memory reset (last chance teleport effect)
[21:25:42] [ENEMY] [Enemy10] Confusion applied for 0.5 seconds
[21:25:42] [ENEMY] [Enemy10] State reset: PURSUING -> IDLE (memory reset)
[21:25:42] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[21:25:42] [INFO] [LastChance] All process modes restored
[21:25:42] [INFO] [LastChance] Unfroze player bullet: Bullet
[21:25:42] [INFO] [LastChance] Unfroze player bullet: @Area2D@1252
[21:25:42] [INFO] [LastChance] Unfroze player bullet: @Area2D@1254
[21:25:42] [INFO] [LastChance] Unfroze player bullet: @Area2D@1256
[21:25:42] [INFO] [LastChance] Unfroze player bullet: @Area2D@1258
[21:25:42] [INFO] [LastChance] Unfroze player bullet: @Area2D@1260
[21:25:42] [INFO] [LastChance] Unfroze player bullet: @Area2D@1262
[21:25:42] [INFO] [LastChance] Unfroze player bullet: @Area2D@1264
[21:25:42] [INFO] [LastChance] Unfroze player bullet: @Area2D@1266
[21:25:42] [INFO] [LastChance] Unfroze player bullet: @Area2D@1268
[21:25:42] [INFO] [LastChance] Unfroze player bullet: @Area2D@1270
[21:25:42] [INFO] [LastChance] Unfroze player bullet: @Area2D@1272
[21:25:42] [INFO] [LastChance] Unfroze player bullet: @Area2D@1274
[21:25:42] [INFO] [LastChance] Unfroze player bullet: @Area2D@1276
[21:25:42] [INFO] [LastChance] Unfroze player bullet: @Area2D@1278
[21:25:42] [INFO] [LastChance] Unfroze player bullet: @Area2D@1280
[21:25:42] [INFO] [LastChance] Unfroze player bullet: @Area2D@1282
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: Casing
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1235
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1237
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1239
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1241
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1251
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1253
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1255
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1257
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1259
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1261
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1263
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1265
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1267
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1269
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1271
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1273
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1275
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1277
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1279
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1281
[21:25:42] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@1283
[21:25:42] [INFO] [LastChance] Restored original colors to 5 player sprites
[21:25:42] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[21:25:42] [ENEMY] [Enemy3] Hit taken, health: 1/2
[21:25:42] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:25:42] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(1, 0), lethal=false
[21:25:42] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:25:42] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[21:25:42] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[21:25:42] [ENEMY] [Enemy3] Hit taken, health: 0/2
[21:25:42] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:25:42] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(1, 0), lethal=true
[21:25:42] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:25:42] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[21:25:42] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1.5)
[21:25:42] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[21:25:42] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[21:25:42] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[21:25:42] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[21:25:42] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[21:25:42] [ENEMY] [Enemy4] Hit taken, health: 1/2
[21:25:42] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[21:25:42] [INFO] [ImpactEffects] spawn_blood_effect called at (800, 900), dir=(1, 0), lethal=false
[21:25:42] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:25:42] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[21:25:42] [INFO] [ImpactEffects] Blood effect spawned at (800, 900) (scale=1)
[21:25:42] [ENEMY] [Enemy4] Hit taken, health: 0/2
[21:25:42] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[21:25:42] [INFO] [ImpactEffects] spawn_blood_effect called at (800, 900), dir=(1, 0), lethal=true
[21:25:42] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:25:42] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[21:25:42] [INFO] [ImpactEffects] Blood effect spawned at (800, 900) (scale=1.5)
[21:25:42] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[21:25:42] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[21:25:42] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
[21:25:42] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[21:25:42] [ENEMY] [Enemy4] Death animation started with hit direction: (1, 0)
[21:25:42] [ENEMY] [Enemy2] Hit taken, health: 1/2
[21:25:42] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[21:25:42] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(1, 0), lethal=false
[21:25:42] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:25:42] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[21:25:42] [INFO] [ImpactEffects] Wall found for blood splatter at (500, 550) (dist=100 px)
[21:25:42] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[21:25:42] [ENEMY] [Enemy2] Hit taken, health: 0/2
[21:25:42] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[21:25:42] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(1, 0), lethal=true
[21:25:42] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:25:42] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[21:25:42] [INFO] [ImpactEffects] Wall found for blood splatter at (500, 550) (dist=100 px)
[21:25:42] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1.5)
[21:25:42] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[21:25:42] [INFO] [ScoreManager] Kill registered. Combo: 3 (points: 3000)
[21:25:42] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
[21:25:42] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[21:25:42] [ENEMY] [Enemy2] Death animation started with hit direction: (1, 0)
[21:25:42] [ENEMY] [Enemy1] Hit taken, health: 2/3
[21:25:42] [ENEMY] [Enemy1] ImpactEffectsManager found, calling spawn_blood_effect
[21:25:42] [INFO] [ImpactEffects] spawn_blood_effect called at (300, 350), dir=(1, 0), lethal=false
[21:25:42] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:25:42] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[21:25:42] [INFO] [ImpactEffects] Blood effect spawned at (300, 350) (scale=1)
[21:25:42] [ENEMY] [Enemy1] Hit taken, health: 1/3
[21:25:42] [ENEMY] [Enemy1] ImpactEffectsManager found, calling spawn_blood_effect
[21:25:42] [INFO] [ImpactEffects] spawn_blood_effect called at (300, 350), dir=(1, 0), lethal=false
[21:25:42] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:25:42] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[21:25:42] [INFO] [ImpactEffects] Blood effect spawned at (300, 350) (scale=1)
[21:25:42] [ENEMY] [Enemy1] Hit taken, health: 0/3
[21:25:42] [ENEMY] [Enemy1] ImpactEffectsManager found, calling spawn_blood_effect
[21:25:42] [INFO] [ImpactEffects] spawn_blood_effect called at (300, 350), dir=(1, 0), lethal=true
[21:25:42] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:25:42] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[21:25:42] [INFO] [ImpactEffects] Blood effect spawned at (300, 350) (scale=1.5)
[21:25:42] [ENEMY] [Enemy1] Enemy died (ricochet: false, penetration: false)
[21:25:42] [INFO] [ScoreManager] Kill registered. Combo: 4 (points: 5000)
[21:25:42] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 6)
[21:25:42] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[21:25:42] [ENEMY] [Enemy1] Death animation started with hit direction: (1, 0)
[21:25:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(374.36438, 649.3163), shooter_id=2384948365606, bullet_pos=(339.1625, 477.8933)
[21:25:42] [INFO] [Bullet] Using shooter_position, distance=175,00002
[21:25:42] [INFO] [Bullet] Distance to wall: 175,00002 (11,916074% of viewport)
[21:25:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:25:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=2384126282488, bullet_pos=(55.59706, 676.6062)
[21:25:42] [INFO] [Bullet] Using shooter_position, distance=1191.66748046875
[21:25:42] [INFO] [Bullet] Distance to wall: 1191.66748046875 (81.1428300283913% of viewport)
[21:25:42] [INFO] [Bullet] Distance-based penetration chance: 52.0000316335435%
[21:25:42] [INFO] [Bullet] Penetration failed (distance roll)
[21:25:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=2384126282488, bullet_pos=(523.049, 992.5003)
[21:25:42] [INFO] [Bullet] Using shooter_position, distance=743.528015136719
[21:25:42] [INFO] [Bullet] Distance to wall: 743.528015136719 (50.62818977812% of viewport)
[21:25:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=2384126282488, bullet_pos=(527.2238, 995.2518)
[21:25:42] [INFO] [Bullet] Using shooter_position, distance=738.581604003906
[21:25:42] [INFO] [Bullet] Distance to wall: 738.581604003906 (50.2913795484387% of viewport)
[21:25:42] [INFO] [Bullet] Distance-based penetration chance: 87.9933905268215%
[21:25:42] [INFO] [Bullet] Penetration failed (distance roll)
[21:25:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(705.2705, 985.06824), shooter_id=2384948365606, bullet_pos=(915.63904, 807.95245)
[21:25:42] [INFO] [Bullet] Using shooter_position, distance=274,99985
[21:25:42] [INFO] [Bullet] Distance to wall: 274,99985 (18,725246% of viewport)
[21:25:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:25:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(726.8643, 989.93365), shooter_id=2384948365606, bullet_pos=(915.93353, 790.23926)
[21:25:42] [INFO] [Bullet] Using shooter_position, distance=275,00003
[21:25:42] [INFO] [Bullet] Distance to wall: 275,00003 (18,725258% of viewport)
[21:25:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:25:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(201.06474, 351.0271), shooter_id=2384948365606, bullet_pos=(502.16086, 284.615)
[21:25:42] [INFO] [Bullet] Using shooter_position, distance=308,33334
[21:25:42] [INFO] [Bullet] Distance to wall: 308,33334 (20,994986% of viewport)
[21:25:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:25:42] [INFO] [Bullet] Starting wall penetration at (502.16086, 284.615)
[21:25:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15,9692545
[21:25:42] [INFO] [Bullet] Body exited signal received for penetrating body
[21:25:42] [INFO] [Bullet] Exiting penetration at (539.5944, 276.35834) after traveling 33,333332 pixels through wall
[21:25:42] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[21:25:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(185.92143, 349.3086), shooter_id=2384948365606, bullet_pos=(527.5551, 344.56088)
[21:25:42] [INFO] [Bullet] Using shooter_position, distance=341,66666
[21:25:42] [INFO] [Bullet] Distance to wall: 341,66666 (23,264711% of viewport)
[21:25:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:25:42] [INFO] [Bullet] Starting wall penetration at (527.5551, 344.56088)
[21:25:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41,88881
[21:25:42] [INFO] [Bullet] Body exited signal received for penetrating body
[21:25:42] [INFO] [Bullet] Exiting penetration at (565.88477, 344.0282) after traveling 33,333336 pixels through wall
[21:25:42] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[21:25:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=2384126282488, bullet_pos=(506.0317, 895.1251)
[21:25:42] [INFO] [Bullet] Using shooter_position, distance=786.15673828125
[21:25:42] [INFO] [Bullet] Distance to wall: 786.15673828125 (53.530857924341% of viewport)
[21:25:42] [INFO] [Bullet] Distance-based penetration chance: 84.2139990882689%
[21:25:42] [INFO] [Bullet] Starting wall penetration at (506.0317, 895.1251)
[21:25:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8.22547054290771
[21:25:42] [INFO] [Bullet] Body exited signal received for penetrating body
[21:25:42] [INFO] [Bullet] Exiting penetration at (531.0859, 909.8942) after traveling 24.0833358764648 pixels through wall
[21:25:42] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[21:25:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(489.86438, 649.3163), shooter_id=2384948365606, bullet_pos=(270.7671, 265.8245)
[21:25:42] [INFO] [Bullet] Using shooter_position, distance=441,6668
[21:25:42] [INFO] [Bullet] Distance to wall: 441,6668 (30,073906% of viewport)
[21:25:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:25:42] [INFO] [Bullet] Starting wall penetration at (270.7671, 265.8245)
[21:25:42] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[21:25:42] [INFO] [Bullet] Exiting penetration at (251.75111, 232.54033) after traveling 33,333332 pixels through wall
[21:25:42] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[21:25:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.8506, 806.7297), shooter_id=2384948365606, bullet_pos=(1089.6256, 219.30786)
[21:25:42] [INFO] [Bullet] Using shooter_position, distance=741,6668
[21:25:42] [INFO] [Bullet] Distance to wall: 741,6668 (50,50146% of viewport)
[21:25:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(705.2705, 985.06824), shooter_id=2384948365606, bullet_pos=(526.75433, 388.9397)
[21:25:42] [INFO] [Bullet] Using shooter_position, distance=622,28394
[21:25:42] [INFO] [Bullet] Distance to wall: 622,28394 (42,37246% of viewport)
[21:25:42] [INFO] [Bullet] Distance-based penetration chance: 97,23213%
[21:25:42] [INFO] [Bullet] Starting wall penetration at (526.75433, 388.9397)
[21:25:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(726.8643, 989.93365), shooter_id=2384948365606, bullet_pos=(514.15155, 383.57797)
[21:25:42] [INFO] [Bullet] Using shooter_position, distance=642,5838
[21:25:42] [INFO] [Bullet] Distance to wall: 642,5838 (43,754715% of viewport)
[21:25:42] [INFO] [Bullet] Distance-based penetration chance: 95,6195%
[21:25:42] [INFO] [Bullet] Starting wall penetration at (514.15155, 383.57797)
[21:25:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13,198135
[21:25:42] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[21:25:42] [INFO] [Bullet] Exiting penetration at (504.07886, 364.5075) after traveling 28,333332 pixels through wall
[21:25:42] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[21:25:42] [INFO] [Bullet] Body exited signal received for penetrating body
[21:25:42] [INFO] [Bullet] Exiting penetration at (490.724, 359.86594) after traveling 28,333332 pixels through wall
[21:25:42] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[21:25:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.8506, 806.7297), shooter_id=2384948365606, bullet_pos=(958.6781, 63.75344)
[21:25:42] [INFO] [Bullet] Using shooter_position, distance=809,6831
[21:25:42] [INFO] [Bullet] Distance to wall: 809,6831 (55,132812% of viewport)
[21:25:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(612.54114, 801.7703), shooter_id=2384948365606, bullet_pos=(1557.373, 48.53488)
[21:25:42] [INFO] [Bullet] Using shooter_position, distance=1208,334
[21:25:42] [INFO] [Bullet] Distance to wall: 1208,334 (82,27769% of viewport)
[21:25:42] [INFO] [Bullet] Distance-based penetration chance: 50,676037%
[21:25:42] [INFO] [Bullet] Starting wall penetration at (1557.373, 48.53488)
[21:25:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11,808188
[21:25:42] [INFO] [Bullet] Body exited signal received for penetrating body
[21:25:42] [INFO] [Bullet] Exiting penetration at (1587.347, 24.639145) after traveling 33,333336 pixels through wall
[21:25:42] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[21:25:42] [ENEMY] [Enemy3] Ragdoll activated
[21:25:42] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[21:25:42] [ENEMY] [Enemy1] Ragdoll activated
[21:25:42] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[21:25:42] [ENEMY] [Enemy2] Ragdoll activated
[21:25:42] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[21:25:42] [ENEMY] [Enemy4] Ragdoll activated
[21:25:42] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[21:25:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.8506, 806.7297), shooter_id=2384948365606, bullet_pos=(517.0798, 444.3843)
[21:25:42] [INFO] [Bullet] Using shooter_position, distance=381,62708
[21:25:42] [INFO] [Bullet] Distance to wall: 381,62708 (25,985691% of viewport)
[21:25:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:25:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.8506, 806.7297), shooter_id=2384948365606, bullet_pos=(918.70355, 860.3111)
[21:25:43] [INFO] [Bullet] Using shooter_position, distance=286,9008
[21:25:43] [INFO] [Bullet] Distance to wall: 286,9008 (19,535603% of viewport)
[21:25:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:25:43] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[21:25:43] [ENEMY] [Enemy1] Player reloading state changed: false -> true
[21:25:43] [ENEMY] [Enemy2] Player reloading state changed: false -> true
[21:25:43] [ENEMY] [Enemy3] Player reloading state changed: false -> true
[21:25:43] [ENEMY] [Enemy4] Player reloading state changed: false -> true
[21:25:43] [ENEMY] [Enemy5] Player reloading state changed: false -> true
[21:25:43] [ENEMY] [Enemy6] Player reloading state changed: false -> true
[21:25:43] [ENEMY] [Enemy7] Player reloading state changed: false -> true
[21:25:43] [ENEMY] [Enemy8] Player reloading state changed: false -> true
[21:25:43] [ENEMY] [Enemy9] Player reloading state changed: false -> true
[21:25:43] [ENEMY] [Enemy10] Player reloading state changed: false -> true
[21:25:43] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(267.4382, 209.9333), source=PLAYER (Player), range=900, listeners=6
[21:25:43] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=6, self=0, below_threshold=0
[21:25:43] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1439), can_see=false
[21:25:43] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1700), can_see=false
[21:25:43] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1586), can_see=false
[21:25:43] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=2050), can_see=false
[21:25:43] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=2270), can_see=false
[21:25:43] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=1548), can_see=false
[21:25:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.8506, 806.7297), shooter_id=2384948365606, bullet_pos=(810.486, 1002.8968)
[21:25:43] [INFO] [Bullet] Using shooter_position, distance=261,9748
[21:25:43] [INFO] [Bullet] Distance to wall: 261,9748 (17,838345% of viewport)
[21:25:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:25:43] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[21:25:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.8506, 806.7297), shooter_id=2384948365606, bullet_pos=(727.13196, 892.7745)
[21:25:43] [INFO] [Bullet] Using shooter_position, distance=124,717415
[21:25:43] [INFO] [Bullet] Distance to wall: 124,717415 (8,492238% of viewport)
[21:25:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:25:43] [INFO] [Bullet] Starting wall penetration at (727.13196, 892.7745)
[21:25:43] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[21:25:43] [INFO] [Bullet] Exiting penetration at (715.18805, 876.99493) after traveling 14,790176 pixels through wall
[21:25:43] [INFO] [Bullet] Damage multiplier after penetration: 0,028125
[21:25:43] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
[21:25:43] [ENEMY] [Enemy1] Player reloading state changed: true -> false
[21:25:43] [ENEMY] [Enemy2] Player reloading state changed: true -> false
[21:25:43] [ENEMY] [Enemy3] Player reloading state changed: true -> false
[21:25:43] [ENEMY] [Enemy4] Player reloading state changed: true -> false
[21:25:43] [ENEMY] [Enemy5] Player reloading state changed: true -> false
[21:25:43] [ENEMY] [Enemy6] Player reloading state changed: true -> false
[21:25:43] [ENEMY] [Enemy7] Player reloading state changed: true -> false
[21:25:43] [ENEMY] [Enemy8] Player reloading state changed: true -> false
[21:25:43] [ENEMY] [Enemy9] Player reloading state changed: true -> false
[21:25:43] [ENEMY] [Enemy10] Player reloading state changed: true -> false
[21:25:43] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[21:25:43] [INFO] [Player.Reload.Anim] LeftArm: pos=(15.807245, 5.732272), target=(24, 6), base=(24, 6)
[21:25:43] [INFO] [Player.Reload.Anim] RightArm: pos=(-2.0012493, 7.142561), target=(-2, 6), base=(-2, 6)
[21:25:43] [ENEMY] [Enemy3] Death animation completed
[21:25:43] [ENEMY] [Enemy2] Death animation completed
[21:25:43] [ENEMY] [Enemy1] Death animation completed
[21:25:43] [ENEMY] [Enemy4] Death animation completed
[21:25:44] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[21:25:45] [INFO] [ScoreManager] Combo ended at 4. Max combo: 4
[21:26:05] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[21:26:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1077.358, 1655.049), source=ENEMY (Enemy10), range=1469, listeners=6
[21:26:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=4
[21:26:05] [INFO] [LastChance] Threat detected: Bullet
[21:26:05] [INFO] [LastChance] Effect already used this life
[21:26:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:26:06] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[21:26:06] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[21:26:06] [INFO] [PenultimateHit] Player died - ending penultimate effect
[21:26:06] [INFO] [LastChance] Player died
[21:26:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1067.371, 1667.548), source=ENEMY (Enemy10), range=1469, listeners=6
[21:26:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=4
[21:26:06] [INFO] [LastChance] Threat detected: Bullet
[21:26:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[21:26:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:26:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1067.371, 1667.548), source=ENEMY (Enemy10), range=1469, listeners=6
[21:26:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=4
[21:26:06] [INFO] [LastChance] Threat detected: @Area2D@1397
[21:26:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[21:26:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:26:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1012.11, 1861.897), source=PLAYER (AssaultRifle), range=1469, listeners=6
[21:26:06] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=3
[21:26:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1038.703, 1729.085), shooter_id=2384126282488, bullet_pos=(820.5288, 2084.065)
[21:26:06] [INFO] [Bullet] Using shooter_position, distance=416.666687011719
[21:26:06] [INFO] [Bullet] Distance to wall: 416.666687011719 (28.3716009011051% of viewport)
[21:26:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:26:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1067.371, 1667.548), source=ENEMY (Enemy10), range=1469, listeners=6
[21:26:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=4
[21:26:06] [ENEMY] [Enemy10] Hit taken, health: 3/4
[21:26:06] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[21:26:06] [INFO] [ImpactEffects] spawn_blood_effect called at (1067.371, 1667.548), dir=(1, 0), lethal=false
[21:26:06] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:26:06] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[21:26:06] [INFO] [ImpactEffects] Wall found for blood splatter at (1140, 1667.548) (dist=72 px)
[21:26:06] [INFO] [ImpactEffects] Blood effect spawned at (1067.371, 1667.548) (scale=1)
[21:26:06] [INFO] [LastChance] Threat detected: @Area2D@1401
[21:26:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[21:26:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:26:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1047.374, 1859.396), source=PLAYER (AssaultRifle), range=1469, listeners=6
[21:26:06] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=3
[21:26:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1067.371, 1667.548), source=ENEMY (Enemy10), range=1469, listeners=6
[21:26:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=4
[21:26:06] [ENEMY] [Enemy10] Hit taken, health: 2/4
[21:26:06] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[21:26:06] [INFO] [ImpactEffects] spawn_blood_effect called at (1067.371, 1667.548), dir=(1, 0), lethal=false
[21:26:06] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:26:06] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[21:26:06] [INFO] [ImpactEffects] Wall found for blood splatter at (1140, 1667.548) (dist=72 px)
[21:26:06] [INFO] [ImpactEffects] Blood effect spawned at (1067.371, 1667.548) (scale=1)
[21:26:06] [INFO] [LastChance] Threat detected: @Area2D@1406
[21:26:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[21:26:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:26:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1076.696, 1845.205), source=PLAYER (AssaultRifle), range=1469, listeners=6
[21:26:06] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=3
[21:26:06] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[21:26:06] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:26:06] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:26:06] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:26:06] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:26:06] [ENEMY] [Enemy1] Death animation component initialized
[21:26:06] [ENEMY] [Enemy2] Death animation component initialized
[21:26:06] [ENEMY] [Enemy3] Death animation component initialized
[21:26:06] [ENEMY] [Enemy4] Death animation component initialized
[21:26:06] [ENEMY] [Enemy5] Death animation component initialized
[21:26:06] [ENEMY] [Enemy6] Death animation component initialized
[21:26:06] [ENEMY] [Enemy7] Death animation component initialized
[21:26:06] [ENEMY] [Enemy8] Death animation component initialized
[21:26:06] [ENEMY] [Enemy9] Death animation component initialized
[21:26:06] [ENEMY] [Enemy10] Death animation component initialized
[21:26:06] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:26:06] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:26:06] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:26:06] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:26:06] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:26:06] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:26:06] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[21:26:06] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[21:26:06] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:26:06] [INFO] [ScoreManager] Level started with 10 enemies
[21:26:06] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 7)
[21:26:06] [ENEMY] [Enemy1] Registered as sound listener
[21:26:06] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[21:26:06] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 8)
[21:26:06] [ENEMY] [Enemy2] Registered as sound listener
[21:26:06] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[21:26:06] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 9)
[21:26:06] [ENEMY] [Enemy3] Registered as sound listener
[21:26:06] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[21:26:06] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 10)
[21:26:06] [ENEMY] [Enemy4] Registered as sound listener
[21:26:06] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[21:26:06] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 11)
[21:26:06] [ENEMY] [Enemy5] Registered as sound listener
[21:26:06] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[21:26:06] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 12)
[21:26:06] [ENEMY] [Enemy6] Registered as sound listener
[21:26:06] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[21:26:06] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 13)
[21:26:06] [ENEMY] [Enemy7] Registered as sound listener
[21:26:06] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[21:26:06] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 14)
[21:26:06] [ENEMY] [Enemy8] Registered as sound listener
[21:26:06] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[21:26:06] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 15)
[21:26:06] [ENEMY] [Enemy9] Registered as sound listener
[21:26:06] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[21:26:06] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 16)
[21:26:06] [ENEMY] [Enemy10] Registered as sound listener
[21:26:06] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[21:26:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.2357, 1255.764), source=PLAYER (AssaultRifle), range=1469, listeners=16
[21:26:06] [INFO] [SoundPropagation] Cleaned up 6 invalid listeners
[21:26:06] [ENEMY] [Enemy4] Heard gunshot at (450.2357, 1255.764), source_type=0, intensity=0.01, distance=499
[21:26:06] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
[21:26:06] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:26:06] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:26:06] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:26:06] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:26:06] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:26:06] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:26:06] [INFO] [LastChance] Found player: Player
[21:26:06] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:26:06] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:26:06] [INFO] [LastChance] Connected to player Died signal (C#)
[21:26:07] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:26:07] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:26:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.771, 1534.932), source=ENEMY (Enemy10), range=1469, listeners=10
[21:26:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[21:26:07] [ENEMY] [Enemy3] Memory: medium confidence (0.58) - transitioning to PURSUING
[21:26:07] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[21:26:07] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[21:26:07] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:26:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1139.528, 1516.121), source=ENEMY (Enemy10), range=1469, listeners=10
[21:26:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[21:26:07] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:26:07] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:26:07] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:26:07] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:26:07] [ENEMY] [Enemy1] Death animation component initialized
[21:26:07] [ENEMY] [Enemy2] Death animation component initialized
[21:26:07] [ENEMY] [Enemy3] Death animation component initialized
[21:26:07] [ENEMY] [Enemy4] Death animation component initialized
[21:26:07] [ENEMY] [Enemy5] Death animation component initialized
[21:26:07] [ENEMY] [Enemy6] Death animation component initialized
[21:26:07] [ENEMY] [Enemy7] Death animation component initialized
[21:26:07] [ENEMY] [Enemy8] Death animation component initialized
[21:26:07] [ENEMY] [Enemy9] Death animation component initialized
[21:26:07] [ENEMY] [Enemy10] Death animation component initialized
[21:26:07] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:26:07] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:26:07] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:26:07] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:26:07] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:26:07] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:26:07] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[21:26:07] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[21:26:07] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:26:07] [INFO] [ScoreManager] Level started with 10 enemies
[21:26:07] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:26:07] [ENEMY] [Enemy1] Registered as sound listener
[21:26:07] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[21:26:07] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:26:07] [ENEMY] [Enemy2] Registered as sound listener
[21:26:07] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[21:26:07] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:26:07] [ENEMY] [Enemy3] Registered as sound listener
[21:26:07] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[21:26:07] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:26:07] [ENEMY] [Enemy4] Registered as sound listener
[21:26:07] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[21:26:07] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:26:07] [ENEMY] [Enemy5] Registered as sound listener
[21:26:07] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[21:26:07] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:26:07] [ENEMY] [Enemy6] Registered as sound listener
[21:26:07] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[21:26:07] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:26:07] [ENEMY] [Enemy7] Registered as sound listener
[21:26:07] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[21:26:07] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:26:07] [ENEMY] [Enemy8] Registered as sound listener
[21:26:07] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[21:26:07] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:26:07] [ENEMY] [Enemy9] Registered as sound listener
[21:26:07] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[21:26:07] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:26:07] [ENEMY] [Enemy10] Registered as sound listener
[21:26:07] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[21:26:07] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:26:07] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:26:07] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:26:07] [INFO] [LastChance] Found player: Player
[21:26:07] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:26:07] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:26:07] [INFO] [LastChance] Connected to player Died signal (C#)
[21:26:07] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:26:07] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:26:07] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:26:07] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:26:07] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:26:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.731, 1535.008), source=ENEMY (Enemy10), range=1469, listeners=20
[21:26:07] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:26:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[21:26:07] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:26:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1139.423, 1516.307), source=ENEMY (Enemy10), range=1469, listeners=10
[21:26:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[21:26:08] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:26:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1107.906, 1496.302), source=ENEMY (Enemy10), range=1469, listeners=10
[21:26:08] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[21:26:08] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:26:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1077.226, 1475.035), source=ENEMY (Enemy10), range=1469, listeners=10
[21:26:08] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[21:26:08] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:26:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1047.428, 1452.549), source=ENEMY (Enemy10), range=1469, listeners=10
[21:26:08] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[21:26:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=3365576641636, bullet_pos=(53.14801, 921.1365)
[21:26:08] [INFO] [Bullet] Using shooter_position, distance=1208.33337402344
[21:26:08] [INFO] [Bullet] Distance to wall: 1208.33337402344 (82.277641366406% of viewport)
[21:26:08] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[21:26:08] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[21:26:08] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[21:26:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=3365576641636, bullet_pos=(46.85162, 857.2495)
[21:26:08] [INFO] [Bullet] Using shooter_position, distance=1208.33435058594
[21:26:08] [INFO] [Bullet] Distance to wall: 1208.33435058594 (82.2777078623423% of viewport)
[21:26:08] [INFO] [Bullet] Distance-based penetration chance: 50.676007493934%
[21:26:08] [INFO] [Bullet] Penetration failed (distance roll)
[21:26:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=3365576641636, bullet_pos=(336.3127, 700.1877)
[21:26:08] [INFO] [Bullet] Using shooter_position, distance=1118.44958496094
[21:26:08] [INFO] [Bullet] Distance to wall: 1118.44958496094 (76.1572888874264% of viewport)
[21:26:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=3365576641636, bullet_pos=(43.06916, 793.3154)
[21:26:08] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[21:26:08] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[21:26:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=3365576641636, bullet_pos=(501.9533, 838.3987)
[21:26:08] [INFO] [Bullet] Using shooter_position, distance=904.420837402344
[21:26:08] [INFO] [Bullet] Distance to wall: 904.420837402344 (61.5836779019986% of viewport)
[21:26:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=3365576641636, bullet_pos=(151.7733, 694.8546)
[21:26:08] [INFO] [Bullet] Using shooter_position, distance=1181.3310546875
[21:26:08] [INFO] [Bullet] Distance to wall: 1181.3310546875 (80.439003789935% of viewport)
[21:26:08] [INFO] [Bullet] Distance-based penetration chance: 52.8211622450758%
[21:26:08] [INFO] [Bullet] Penetration failed (distance roll)
[21:26:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.01, 1441.508), shooter_id=3365576641636, bullet_pos=(41.67921, 729.5751)
[21:26:08] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[21:26:08] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[21:26:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.01, 1441.508), shooter_id=3365576641636, bullet_pos=(105.8138, 689.1097)
[21:26:08] [INFO] [Bullet] Using shooter_position, distance=1182.45703125
[21:26:08] [INFO] [Bullet] Distance to wall: 1182.45703125 (80.515673604564% of viewport)
[21:26:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.01, 1441.508), shooter_id=3365576641636, bullet_pos=(47.20647, 660.5211)
[21:26:08] [INFO] [Bullet] Using shooter_position, distance=1245.95324707031
[21:26:08] [INFO] [Bullet] Distance to wall: 1245.95324707031 (84.8392476990144% of viewport)
[21:26:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=3365576641636, bullet_pos=(42.53408, 666.2555)
[21:26:08] [INFO] [Bullet] Using shooter_position, distance=1208.33422851563
[21:26:08] [INFO] [Bullet] Distance to wall: 1208.33422851563 (82.2776995503503% of viewport)
[21:26:08] [ENEMY] [Enemy3] Memory: medium confidence (0.76) - transitioning to PURSUING
[21:26:08] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[21:26:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=3365576641636, bullet_pos=(62.79221, 1274.808)
[21:26:09] [INFO] [Bullet] Using shooter_position, distance=1071.96313476563
[21:26:09] [INFO] [Bullet] Distance to wall: 1071.96313476563 (72.9919410125832% of viewport)
[21:26:09] [INFO] [Bullet] Distance-based penetration chance: 61.5094021519863%
[21:26:09] [INFO] [Bullet] Starting wall penetration at (62.79221, 1274.808)
[21:26:09] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[21:26:09] [INFO] [Bullet] Exiting penetration at (41.09498, 1296.369) after traveling 25.5885429382324 pixels through wall
[21:26:09] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
[21:26:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=3365576641636, bullet_pos=(506.8116, 397.9081)
[21:26:09] [INFO] [Bullet] Using shooter_position, distance=1127.37805175781
[21:26:09] [INFO] [Bullet] Distance to wall: 1127.37805175781 (76.7652446096284% of viewport)
[21:26:09] [INFO] [Bullet] Distance-based penetration chance: 57.1072146221002%
[21:26:09] [INFO] [Bullet] Starting wall penetration at (506.8116, 397.9081)
[21:26:09] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.5637245178223
[21:26:09] [INFO] [Bullet] Body exited signal received for penetrating body
[21:26:09] [INFO] [Bullet] Exiting penetration at (541.8038, 377.683) after traveling 35.4166717529297 pixels through wall
[21:26:09] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[21:26:09] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:26:09] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:26:09] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:26:09] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:26:09] [ENEMY] [Enemy1] Death animation component initialized
[21:26:09] [ENEMY] [Enemy2] Death animation component initialized
[21:26:09] [ENEMY] [Enemy3] Death animation component initialized
[21:26:09] [ENEMY] [Enemy4] Death animation component initialized
[21:26:09] [ENEMY] [Enemy5] Death animation component initialized
[21:26:09] [ENEMY] [Enemy6] Death animation component initialized
[21:26:09] [ENEMY] [Enemy7] Death animation component initialized
[21:26:09] [ENEMY] [Enemy8] Death animation component initialized
[21:26:09] [ENEMY] [Enemy9] Death animation component initialized
[21:26:09] [ENEMY] [Enemy10] Death animation component initialized
[21:26:09] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:26:09] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:26:09] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:26:09] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:26:09] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:26:09] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:26:09] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[21:26:09] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[21:26:09] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:26:09] [INFO] [ScoreManager] Level started with 10 enemies
[21:26:09] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:26:09] [ENEMY] [Enemy1] Registered as sound listener
[21:26:09] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[21:26:09] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:26:09] [ENEMY] [Enemy2] Registered as sound listener
[21:26:09] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[21:26:09] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:26:09] [ENEMY] [Enemy3] Registered as sound listener
[21:26:09] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[21:26:09] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:26:09] [ENEMY] [Enemy4] Registered as sound listener
[21:26:09] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[21:26:09] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:26:09] [ENEMY] [Enemy5] Registered as sound listener
[21:26:09] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[21:26:09] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:26:09] [ENEMY] [Enemy6] Registered as sound listener
[21:26:09] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[21:26:09] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:26:09] [ENEMY] [Enemy7] Registered as sound listener
[21:26:09] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[21:26:09] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:26:09] [ENEMY] [Enemy8] Registered as sound listener
[21:26:09] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[21:26:09] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:26:09] [ENEMY] [Enemy9] Registered as sound listener
[21:26:09] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[21:26:09] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:26:09] [ENEMY] [Enemy10] Registered as sound listener
[21:26:09] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[21:26:09] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:26:09] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:26:09] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:26:09] [INFO] [LastChance] Found player: Player
[21:26:09] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:26:09] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:26:09] [INFO] [LastChance] Connected to player Died signal (C#)
[21:26:09] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:26:09] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:26:09] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:26:10] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:26:10] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:26:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.731, 1535.008), source=ENEMY (Enemy10), range=1469, listeners=20
[21:26:10] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:26:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[21:26:10] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:26:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1139.423, 1516.307), source=ENEMY (Enemy10), range=1469, listeners=10
[21:26:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[21:26:10] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:26:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1107.906, 1496.302), source=ENEMY (Enemy10), range=1469, listeners=10
[21:26:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[21:26:10] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:26:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1077.226, 1475.035), source=ENEMY (Enemy10), range=1469, listeners=10
[21:26:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[21:26:11] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[21:26:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1047.428, 1452.549), source=ENEMY (Enemy10), range=1469, listeners=10
[21:26:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[21:26:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=3488738182895, bullet_pos=(53.14801, 921.1365)
[21:26:11] [INFO] [Bullet] Using shooter_position, distance=1208.33337402344
[21:26:11] [INFO] [Bullet] Distance to wall: 1208.33337402344 (82.277641366406% of viewport)
[21:26:11] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[21:26:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=3488738182895, bullet_pos=(46.85162, 857.2495)
[21:26:11] [INFO] [Bullet] Using shooter_position, distance=1208.33435058594
[21:26:11] [INFO] [Bullet] Distance to wall: 1208.33435058594 (82.2777078623423% of viewport)
[21:26:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=3488738182895, bullet_pos=(43.06916, 793.3154)
[21:26:11] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[21:26:11] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[21:26:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=3488738182895, bullet_pos=(374.3212, 709.7221)
[21:26:11] [INFO] [Bullet] Using shooter_position, distance=1048.78723144531
[21:26:11] [INFO] [Bullet] Distance to wall: 1048.78723144531 (71.4138511387748% of viewport)
[21:26:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=3488738182895, bullet_pos=(150.382, 693.34)
[21:26:11] [INFO] [Bullet] Using shooter_position, distance=1183.37341308594
[21:26:11] [INFO] [Bullet] Distance to wall: 1183.37341308594 (80.5780717288506% of viewport)
[21:26:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.01, 1441.508), shooter_id=3488738182895, bullet_pos=(41.67921, 729.5751)
[21:26:11] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[21:26:11] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[21:26:11] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[21:26:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=3488738182895, bullet_pos=(42.53408, 666.2555)
[21:26:11] [INFO] [Bullet] Using shooter_position, distance=1208.33422851563
[21:26:11] [INFO] [Bullet] Distance to wall: 1208.33422851563 (82.2776995503503% of viewport)
[21:26:11] [INFO] [Bullet] Distance-based penetration chance: 50.676017191258%
[21:26:11] [INFO] [Bullet] Penetration failed (distance roll)
[21:26:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=3488738182895, bullet_pos=(693.7175, 888.9573)
[21:26:11] [INFO] [Bullet] Using shooter_position, distance=711.275146484375
[21:26:11] [INFO] [Bullet] Distance to wall: 711.275146484375 (48.4320326437861% of viewport)
[21:26:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.01, 1441.508), shooter_id=3488738182895, bullet_pos=(335.2418, 465.9146)
[21:26:11] [INFO] [Bullet] Using shooter_position, distance=1190.77905273438
[21:26:11] [INFO] [Bullet] Distance to wall: 1190.77905273438 (81.0823353502832% of viewport)
[21:26:11] [ENEMY] [Enemy2] Hit taken, health: 2/3
[21:26:11] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[21:26:11] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(0.7413, 0.671174), lethal=false
[21:26:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:26:11] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[21:26:11] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[21:26:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=3488738182895, bullet_pos=(550.1441, 1004.226)
[21:26:11] [INFO] [Bullet] Using shooter_position, distance=715.567687988281
[21:26:11] [INFO] [Bullet] Distance to wall: 715.567687988281 (48.7243196880749% of viewport)
[21:26:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=3488738182895, bullet_pos=(511.0585, 975.5093)
[21:26:11] [INFO] [Bullet] Using shooter_position, distance=763.802673339844
[21:26:11] [INFO] [Bullet] Distance to wall: 763.802673339844 (52.0087285369798% of viewport)
[21:26:11] [INFO] [Bullet] Distance-based penetration chance: 85.9898167068569%
[21:26:11] [INFO] [Bullet] Starting wall penetration at (511.0585, 975.5093)
[21:26:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13.0279531478882
[21:26:11] [INFO] [Bullet] Body exited signal received for penetrating body
[21:26:11] [INFO] [Bullet] Exiting penetration at (489.5011, 959.671) after traveling 21.75026512146 pixels through wall
[21:26:11] [INFO] [Bullet] Damage multiplier after penetration: 0.05625
[21:26:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[21:26:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[21:26:11] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[21:26:11] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[21:26:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[21:26:11] [INFO] [LastChance] Threat detected: Bullet
[21:26:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[21:26:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:26:11] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[21:26:11] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[21:26:11] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[21:26:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[21:26:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[21:26:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[21:26:11] [INFO] [LastChance] Threat detected: @Area2D@2217
[21:26:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[21:26:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:26:11] [ENEMY] [Enemy1] Memory: medium confidence (0.62) - transitioning to PURSUING
[21:26:11] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[21:26:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[21:26:11] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[21:26:12] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[21:26:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[21:26:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[21:26:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.7045, 760.1887), shooter_id=3486741694146, bullet_pos=(33.4905, 748.383)
[21:26:12] [INFO] [Bullet] Using shooter_position, distance=583.33349609375
[21:26:12] [INFO] [Bullet] Distance to wall: 583.33349609375 (39.7202504047384% of viewport)
[21:26:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:26:12] [INFO] [LastChance] Threat detected: @Area2D@2220
[21:26:12] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[21:26:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:26:12] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[21:26:12] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[21:26:12] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[21:26:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[21:26:12] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[21:26:12] [INFO] [LastChance] Threat detected: Bullet
[21:26:12] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[21:26:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:26:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[21:26:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[21:26:12] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[21:26:12] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[21:26:12] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[21:26:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(352.3021, 393.4818), source=ENEMY (Enemy1), range=1469, listeners=10
[21:26:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[21:26:12] [INFO] [LastChance] Threat detected: @Area2D@2225
[21:26:12] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[21:26:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:26:12] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[21:26:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[21:26:12] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[21:26:12] [INFO] [LastChance] Threat detected: Bullet
[21:26:12] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[21:26:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:26:12] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[21:26:12] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[21:26:12] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[21:26:12] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[21:26:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[21:26:12] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[21:26:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[21:26:12] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[21:26:12] [INFO] [LastChance] Threat detected: @Area2D@2231
[21:26:12] [INFO] [LastChance] Triggering last chance effect!
[21:26:12] [INFO] [LastChance] Starting last chance effect:
[21:26:12] [INFO] [LastChance]   - Time will be frozen (except player)
[21:26:12] [INFO] [LastChance]   - Duration: 6.0 real seconds
[21:26:12] [INFO] [LastChance]   - Sepia intensity: 0.70
[21:26:12] [INFO] [LastChance]   - Brightness: 0.60
[21:26:12] [INFO] [LastChance] Pushed bullet Bullet from distance 61.1 to 200.0
[21:26:12] [INFO] [LastChance] Pushed bullet @Area2D@2231 from distance 54.5 to 200.0
[21:26:12] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[21:26:12] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[21:26:12] [INFO] [LastChance] Skipping player node: Player
[21:26:12] [INFO] [LastChance] Froze existing bullet casing: Casing
[21:26:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2199
[21:26:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2201
[21:26:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2203
[21:26:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2205
[21:26:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2216
[21:26:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2218
[21:26:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2221
[21:26:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2224
[21:26:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2227
[21:26:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2229
[21:26:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2232
[21:26:12] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[21:26:12] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[21:26:12] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[21:26:18] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[21:26:18] [INFO] [LastChance] Ending last chance effect
[21:26:18] [ENEMY] [Enemy1] Memory reset (last chance teleport effect)
[21:26:18] [ENEMY] [Enemy1] Confusion applied for 0.5 seconds
[21:26:18] [ENEMY] [Enemy1] State reset: COMBAT -> IDLE (memory reset)
[21:26:18] [ENEMY] [Enemy2] Memory reset (last chance teleport effect)
[21:26:18] [ENEMY] [Enemy2] Confusion applied for 0.5 seconds
[21:26:18] [ENEMY] [Enemy3] Memory reset (last chance teleport effect)
[21:26:18] [ENEMY] [Enemy3] Confusion applied for 0.5 seconds
[21:26:18] [ENEMY] [Enemy3] State reset: COMBAT -> IDLE (memory reset)
[21:26:18] [ENEMY] [Enemy4] Memory reset (last chance teleport effect)
[21:26:18] [ENEMY] [Enemy4] Confusion applied for 0.5 seconds
[21:26:18] [ENEMY] [Enemy4] State reset: COMBAT -> IDLE (memory reset)
[21:26:18] [ENEMY] [Enemy5] Memory reset (last chance teleport effect)
[21:26:18] [ENEMY] [Enemy5] Confusion applied for 0.5 seconds
[21:26:18] [ENEMY] [Enemy6] Memory reset (last chance teleport effect)
[21:26:18] [ENEMY] [Enemy6] Confusion applied for 0.5 seconds
[21:26:18] [ENEMY] [Enemy7] Memory reset (last chance teleport effect)
[21:26:18] [ENEMY] [Enemy7] Confusion applied for 0.5 seconds
[21:26:18] [ENEMY] [Enemy8] Memory reset (last chance teleport effect)
[21:26:18] [ENEMY] [Enemy8] Confusion applied for 0.5 seconds
[21:26:18] [ENEMY] [Enemy9] Memory reset (last chance teleport effect)
[21:26:18] [ENEMY] [Enemy9] Confusion applied for 0.5 seconds
[21:26:18] [ENEMY] [Enemy10] Memory reset (last chance teleport effect)
[21:26:18] [ENEMY] [Enemy10] Confusion applied for 0.5 seconds
[21:26:18] [ENEMY] [Enemy10] State reset: PURSUING -> IDLE (memory reset)
[21:26:18] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[21:26:18] [INFO] [LastChance] All process modes restored
[21:26:18] [INFO] [LastChance] Unfroze bullet casing: Casing
[21:26:18] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2199
[21:26:18] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2201
[21:26:18] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2203
[21:26:18] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2205
[21:26:18] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2216
[21:26:18] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2218
[21:26:18] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2221
[21:26:18] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2224
[21:26:18] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2227
[21:26:18] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2229
[21:26:18] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2232
[21:26:18] [INFO] [LastChance] Restored original colors to 5 player sprites
[21:26:18] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[21:26:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(436.4597, 607.4568), shooter_id=3486456482908, bullet_pos=(457.8021, 684.1584)
[21:26:18] [INFO] [Bullet] Using shooter_position, distance=79.6155395507813
[21:26:18] [INFO] [Bullet] Distance to wall: 79.6155395507813 (5.4211684880807% of viewport)
[21:26:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:26:18] [INFO] [Bullet] Starting wall penetration at (457.8021, 684.1584)
[21:26:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10.8516902923584
[21:26:18] [INFO] [Bullet] Body exited signal received for penetrating body
[21:26:18] [INFO] [Bullet] Exiting penetration at (487.1574, 720.4358) after traveling 41.6666679382324 pixels through wall
[21:26:18] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:26:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.7335, 606.8189), shooter_id=3486456482908, bullet_pos=(698.0424, 876.753)
[21:26:18] [INFO] [Bullet] Using shooter_position, distance=375.000213623047
[21:26:18] [INFO] [Bullet] Distance to wall: 375.000213623047 (25.5344541101819% of viewport)
[21:26:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:26:18] [INFO] [Bullet] Starting wall penetration at (698.0424, 876.753)
[21:26:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.2635498046875
[21:26:18] [INFO] [Bullet] Body exited signal received for penetrating body
[21:26:18] [INFO] [Bullet] Exiting penetration at (730.4364, 910.3448) after traveling 41.6666679382324 pixels through wall
[21:26:18] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:26:18] [ENEMY] [Enemy4] Hit taken, health: 2/3
[21:26:18] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[21:26:18] [INFO] [ImpactEffects] spawn_blood_effect called at (735.8326, 914.0671), dir=(0.694157, 0.719824), lethal=false
[21:26:18] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:26:18] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[21:26:18] [INFO] [ImpactEffects] Blood effect spawned at (735.8326, 914.0671) (scale=1)
[21:26:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(378.8656, 456.1315), shooter_id=3486171269351, bullet_pos=(687.1894, 999.7872)
[21:26:18] [INFO] [Bullet] Using shooter_position, distance=625
[21:26:18] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
[21:26:18] [ENEMY] [Enemy4] Hit taken, health: 1/3
[21:26:18] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[21:26:18] [INFO] [ImpactEffects] spawn_blood_effect called at (735.8326, 914.0671), dir=(0.398775, -0.917049), lethal=false
[21:26:18] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:26:18] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[21:26:18] [INFO] [ImpactEffects] Wall found for blood splatter at (746.298, 890) (dist=26 px)
[21:26:18] [INFO] [ImpactEffects] Blood effect spawned at (735.8326, 914.0671) (scale=1)
[21:26:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.508, 753.9114), shooter_id=3486741694146, bullet_pos=(137.521, 715.1099)
[21:26:18] [INFO] [Bullet] Using shooter_position, distance=480.556030273438
[21:26:18] [INFO] [Bullet] Distance to wall: 480.556030273438 (32.7219437659385% of viewport)
[21:26:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:26:20] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[21:26:20] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[21:26:22] [ENEMY] [Enemy2] FLANKING started: target=(923.3416, 823.8837), side=left, pos=(400, 550)
[21:26:22] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[21:26:26] [ENEMY] [Enemy2] FLANKING stuck (2.0s no progress), target=(922.0054, 822.7292), pos=(881.3362, 643.0231), fail_count=1
[21:26:26] [ENEMY] [Enemy2] State: FLANKING -> PURSUING
[21:26:26] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[21:26:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(871.0287, 655.2604), source=ENEMY (Enemy2), range=1469, listeners=10
[21:26:26] [ENEMY] [Enemy3] Heard gunshot at (871.0287, 655.2604), source_type=1, intensity=0.06, distance=211
[21:26:26] [ENEMY] [Enemy4] Heard gunshot at (871.0287, 655.2604), source_type=1, intensity=0.03, distance=292
[21:26:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[21:26:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(939.0584, 653.6595), shooter_id=3486456482908, bullet_pos=(939.0584, 653.6595)
[21:26:26] [INFO] [Bullet] Using shooter_position, distance=0
[21:26:26] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[21:26:26] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[21:26:26] [INFO] [Bullet] Starting wall penetration at (939.0584, 653.6595)
[21:26:26] [INFO] [LastChance] Threat detected: Bullet
[21:26:26] [INFO] [LastChance] Effect already used this life
[21:26:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:26:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49.7378883361816
[21:26:26] [INFO] [Bullet] Body exited signal received for penetrating body
[21:26:26] [INFO] [Bullet] Exiting penetration at (985.5305, 657.9164) after traveling 41.6666717529297 pixels through wall
[21:26:26] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:26:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(871.0287, 655.2604), source=ENEMY (Enemy2), range=1469, listeners=10
[21:26:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[21:26:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(939.0584, 653.6595), shooter_id=3486456482908, bullet_pos=(939.0584, 653.6595)
[21:26:27] [INFO] [Bullet] Using shooter_position, distance=0
[21:26:27] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[21:26:27] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[21:26:27] [INFO] [Bullet] Starting wall penetration at (939.0584, 653.6595)
[21:26:27] [INFO] [LastChance] Threat detected: Bullet
[21:26:27] [INFO] [LastChance] Effect already used this life
[21:26:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:26:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49.7378883361816
[21:26:27] [INFO] [Bullet] Body exited signal received for penetrating body
[21:26:27] [INFO] [Bullet] Exiting penetration at (985.5305, 657.9164) after traveling 41.6666717529297 pixels through wall
[21:26:27] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:26:27] [ENEMY] [Enemy1] Memory: medium confidence (0.61) - transitioning to PURSUING
[21:26:27] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[21:26:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(871.0287, 655.2604), source=ENEMY (Enemy2), range=1469, listeners=10
[21:26:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[21:26:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(939.0584, 653.6595), shooter_id=3486456482908, bullet_pos=(939.0584, 653.6595)
[21:26:27] [INFO] [Bullet] Using shooter_position, distance=0
[21:26:27] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[21:26:27] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[21:26:27] [INFO] [Bullet] Starting wall penetration at (939.0584, 653.6595)
[21:26:27] [INFO] [LastChance] Threat detected: Bullet
[21:26:27] [INFO] [LastChance] Effect already used this life
[21:26:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:26:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49.7378883361816
[21:26:27] [INFO] [Bullet] Body exited signal received for penetrating body
[21:26:27] [INFO] [Bullet] Exiting penetration at (985.5305, 657.9164) after traveling 41.6666717529297 pixels through wall
[21:26:27] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:26:27] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[21:26:27] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[21:26:27] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[21:26:28] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[21:26:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(871.0287, 655.2604), source=ENEMY (Enemy2), range=1469, listeners=10
[21:26:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[21:26:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(939.0584, 653.6595), shooter_id=3486456482908, bullet_pos=(939.0584, 653.6595)
[21:26:28] [INFO] [Bullet] Using shooter_position, distance=0
[21:26:28] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[21:26:28] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[21:26:28] [INFO] [Bullet] Starting wall penetration at (939.0584, 653.6595)
[21:26:28] [INFO] [LastChance] Threat detected: Bullet
[21:26:28] [INFO] [LastChance] Effect already used this life
[21:26:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:26:28] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49.7378883361816
[21:26:29] [INFO] [Bullet] Body exited signal received for penetrating body
[21:26:29] [INFO] [Bullet] Exiting penetration at (985.5305, 657.9164) after traveling 41.6666717529297 pixels through wall
[21:26:29] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:26:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(871.0287, 655.2604), source=ENEMY (Enemy2), range=1469, listeners=10
[21:26:29] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[21:26:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(939.0584, 653.6595), shooter_id=3486456482908, bullet_pos=(939.0584, 653.6595)
[21:26:29] [INFO] [Bullet] Using shooter_position, distance=0
[21:26:29] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[21:26:29] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[21:26:29] [INFO] [Bullet] Starting wall penetration at (939.0584, 653.6595)
[21:26:29] [INFO] [LastChance] Threat detected: Bullet
[21:26:29] [INFO] [LastChance] Effect already used this life
[21:26:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:26:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49.7378883361816
[21:26:29] [INFO] [Bullet] Body exited signal received for penetrating body
[21:26:29] [INFO] [Bullet] Exiting penetration at (985.5305, 657.9164) after traveling 41.6666717529297 pixels through wall
[21:26:29] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:26:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(871.0287, 655.2604), source=ENEMY (Enemy2), range=1469, listeners=10
[21:26:29] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[21:26:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(939.0584, 653.6595), shooter_id=3486456482908, bullet_pos=(939.0584, 653.6595)
[21:26:29] [INFO] [Bullet] Using shooter_position, distance=0
[21:26:29] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[21:26:29] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[21:26:29] [INFO] [Bullet] Starting wall penetration at (939.0584, 653.6595)
[21:26:29] [INFO] [LastChance] Threat detected: Bullet
[21:26:29] [INFO] [LastChance] Effect already used this life
[21:26:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:26:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49.7378883361816
[21:26:29] [INFO] [Bullet] Body exited signal received for penetrating body
[21:26:29] [INFO] [Bullet] Exiting penetration at (985.5305, 657.9164) after traveling 41.6666717529297 pixels through wall
[21:26:29] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:26:29] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[21:26:29] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[21:26:29] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[21:26:29] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[21:26:30] [INFO] ------------------------------------------------------------
[21:26:30] [INFO] GAME LOG ENDED: 2026-01-24T21:26:30
[21:26:30] [INFO] ============================================================
