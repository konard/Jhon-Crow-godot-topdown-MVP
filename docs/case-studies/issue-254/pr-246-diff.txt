diff --git a/Scripts/Characters/Player.cs b/Scripts/Characters/Player.cs
index cb9e60b7..0d98977b 100644
--- a/Scripts/Characters/Player.cs
+++ b/Scripts/Characters/Player.cs
@@ -1430,10 +1430,24 @@ private void SpawnBullet(Vector2 direction)
         bullet.GlobalPosition = GlobalPosition + direction * BulletSpawnOffset;
 
         // Set bullet direction
-        bullet.Set("Direction", direction);
+        if (bullet.HasMethod("SetDirection"))
+        {
+            bullet.Call("SetDirection", direction);
+        }
+        else
+        {
+            bullet.Set("direction", direction);
+        }
 
         // Set shooter ID to prevent self-damage
-        bullet.Set("ShooterId", GetInstanceId());
+        if (bullet.HasMethod("SetShooterId"))
+        {
+            bullet.Call("SetShooterId", GetInstanceId());
+        }
+        else
+        {
+            bullet.Set("shooter_id", GetInstanceId());
+        }
 
         // Add bullet to the scene tree
         GetTree().CurrentScene.AddChild(bullet);
diff --git a/Scripts/Projectiles/Bullet.cs b/Scripts/Projectiles/Bullet.cs
index 116a5e40..0b7fe291 100644
--- a/Scripts/Projectiles/Bullet.cs
+++ b/Scripts/Projectiles/Bullet.cs
@@ -57,13 +57,17 @@ public partial class Bullet : Area2D
 
     /// <summary>
     /// Direction the bullet travels (set by the shooter).
+    /// Exported to allow setting via Node.Set() with snake_case name "direction".
     /// </summary>
+    [Export]
     public Vector2 Direction { get; set; } = Vector2.Right;
 
     /// <summary>
     /// Instance ID of the node that shot this bullet.
     /// Used to prevent self-damage (e.g., player or enemies not damaging themselves).
+    /// Exported to allow setting via Node.Set() with snake_case name "shooter_id".
     /// </summary>
+    [Export]
     public ulong ShooterId { get; set; } = 0;
 
     // =========================================================================
@@ -203,7 +207,9 @@ public partial class Bullet : Area2D
 
     /// <summary>
     /// Shooter's position at firing time (for distance-based penetration).
+    /// Exported to allow setting via Node.Set() with snake_case name "shooter_position".
     /// </summary>
+    [Export]
     public Vector2 ShooterPosition { get; set; } = Vector2.Zero;
 
     /// <summary>
@@ -389,6 +395,26 @@ public void SetDirection(Vector2 direction)
         UpdateRotation();
     }
 
+    /// <summary>
+    /// Sets the shooter ID to prevent self-damage.
+    /// Called by the weapon to identify the shooter node.
+    /// </summary>
+    /// <param name="shooterId">Instance ID of the shooter node.</param>
+    public void SetShooterId(ulong shooterId)
+    {
+        ShooterId = shooterId;
+    }
+
+    /// <summary>
+    /// Sets the shooter's position at firing time.
+    /// Used for distance-based penetration calculations.
+    /// </summary>
+    /// <param name="position">Global position of the shooter when firing.</param>
+    public void SetShooterPosition(Vector2 position)
+    {
+        ShooterPosition = position;
+    }
+
     /// <summary>
     /// Called when the bullet hits a static body (wall or obstacle).
     /// </summary>
diff --git a/assets/sprites/characters/enemy/enemy_body.png b/assets/sprites/characters/enemy/enemy_body.png
new file mode 100644
index 00000000..c806dfff
Binary files /dev/null and b/assets/sprites/characters/enemy/enemy_body.png differ
diff --git a/assets/sprites/characters/enemy/enemy_combined_preview.png b/assets/sprites/characters/enemy/enemy_combined_preview.png
new file mode 100644
index 00000000..8edbec58
Binary files /dev/null and b/assets/sprites/characters/enemy/enemy_combined_preview.png differ
diff --git a/assets/sprites/characters/enemy/enemy_head.png b/assets/sprites/characters/enemy/enemy_head.png
new file mode 100644
index 00000000..950de4a7
Binary files /dev/null and b/assets/sprites/characters/enemy/enemy_head.png differ
diff --git a/assets/sprites/characters/enemy/enemy_left_arm.png b/assets/sprites/characters/enemy/enemy_left_arm.png
new file mode 100644
index 00000000..717094d3
Binary files /dev/null and b/assets/sprites/characters/enemy/enemy_left_arm.png differ
diff --git a/assets/sprites/characters/enemy/enemy_right_arm.png b/assets/sprites/characters/enemy/enemy_right_arm.png
new file mode 100644
index 00000000..4ff8bd77
Binary files /dev/null and b/assets/sprites/characters/enemy/enemy_right_arm.png differ
diff --git a/docs/case-studies/issue-217/README.md b/docs/case-studies/issue-217/README.md
new file mode 100644
index 00000000..8fdccd24
--- /dev/null
+++ b/docs/case-studies/issue-217/README.md
@@ -0,0 +1,1094 @@
+# Case Study: Issue #217 - Add Enemy Character Models
+
+## Overview
+
+**Issue:** [#217 - добавить модельки врагов](https://github.com/Jhon-Crow/godot-topdown-MVP/issues/217)
+**Pull Request:** [#221](https://github.com/Jhon-Crow/godot-topdown-MVP/pull/221)
+**Date Created:** 2026-01-22
+**Status:** In Progress (Follow-up after user feedback)
+
+## Timeline of Events
+
+### Phase 1: Initial Issue Creation (2026-01-22T06:10:35Z)
+
+User @Jhon-Crow created issue #217 with the following requirements:
+
+> "сделай модельки врагов на основе модельки игрока, но основной цвет должен быть чёрный, с белыми черепами(на предплечий или шлеме)."
+
+Translation: Create enemy models based on the player model, but the main color should be black, with white skulls (on the forearms or helmet).
+
+### Phase 2: Initial AI Solution Draft (2026-01-22T06:44:32Z - 2026-01-22T07:23:40Z)
+
+The AI solver (Claude) created an initial solution draft that:
+
+1. Created modular enemy sprites in `assets/sprites/characters/enemy/`:
+   - `enemy_body.png` - Black body sprite (28x24 pixels)
+   - `enemy_head.png` - Black head/helmet with white skull (14x18 pixels)
+   - `enemy_left_arm.png` - Left arm with skull on forearm (20x8 pixels)
+   - `enemy_right_arm.png` - Right arm with skull on forearm (20x8 pixels)
+   - `enemy_combined_preview.png` - Preview image (64x64 pixels)
+
+2. Updated `scenes/objects/Enemy.tscn` to use the new modular structure:
+   - Added EnemyModel node with Body, Head, LeftArm, RightArm sprites
+   - Added WeaponMount with WeaponSprite (M16 rifle)
+   - Matched the structure used by `scenes/characters/Player.tscn`
+
+3. Added sprite generation script `experiments/create_enemy_sprites.py`
+
+**Cost (Initial Draft):**
+- Public pricing estimate: $2.158082 USD
+- Calculated by Anthropic: $1.534885 USD
+- Difference: -$0.623197 (-28.88%)
+
+### Phase 3: User Feedback (2026-01-22T07:35:33Z)
+
+User @Jhon-Crow tested the solution and provided feedback:
+
+1. **"сделай модельки больше (такого же размера как моделька игрока)"**
+   - Translation: Make the models bigger (same size as the player model)
+
+2. **"добавь анимацию ходьбы такую же, как у игрока (переиспользуй)"**
+   - Translation: Add walking animation same as the player (reuse it)
+
+3. **Request for Case Study Documentation:**
+   - Download all logs and data related to the issue
+   - Compile to `./docs/case-studies/issue-{id}` folder
+   - Perform deep case study analysis with timeline and root causes
+
+### Phase 4: Root Cause Analysis and Fix (2026-01-22T07:36:08Z - Current)
+
+## Root Cause Analysis
+
+### Issue 1: Enemy Models Are Smaller Than Player Models
+
+**Root Cause:** The sprite PNG files were created with identical dimensions to the player sprites:
+- Body: 28x24 pixels (same as player)
+- Head: 14x18 pixels (same as player)
+- Arms: 20x8 pixels (same as player)
+
+However, the Player script (`scripts/characters/player.gd`) applies a **scale multiplier** of 1.3x:
+
+```gdscript
+## Scale multiplier for the player model (body, head, arms).
+## Default is 1.3 to make the player slightly larger.
+@export var player_model_scale: float = 1.3
+
+# In _ready():
+if _player_model:
+    _player_model.scale = Vector2(player_model_scale, player_model_scale)
+```
+
+The enemy script (`scripts/objects/enemy.gd`) did not have this scaling applied to the EnemyModel node.
+
+**Fix Applied:**
+1. Added `enemy_model_scale` export variable (default 1.3) to enemy.gd
+2. Added @onready reference to EnemyModel node
+3. Applied scale in _ready() function: `_enemy_model.scale = Vector2(enemy_model_scale, enemy_model_scale)`
+
+### Issue 2: Enemy Has No Walking Animation
+
+**Root Cause:** The Enemy.tscn scene was updated with modular sprites (EnemyModel/Body, etc.) but the enemy.gd script still referenced the old flat structure:
+
+```gdscript
+# Old (broken) references:
+@onready var _sprite: Sprite2D = $Sprite2D
+@onready var _weapon_sprite: Sprite2D = $WeaponSprite
+
+# New structure in scene file:
+# EnemyModel/Body (Sprite2D)
+# EnemyModel/Head (Sprite2D)
+# EnemyModel/LeftArm (Sprite2D)
+# EnemyModel/RightArm (Sprite2D)
+# EnemyModel/WeaponMount/WeaponSprite (Sprite2D)
+```
+
+The Player script has a complete walking animation system that creates bobbing motion for body parts during movement, using sine waves:
+
+```gdscript
+# From player.gd:
+func _update_walk_animation(delta: float, input_direction: Vector2) -> void:
+    var is_moving := input_direction != Vector2.ZERO or velocity.length() > 10.0
+
+    if is_moving:
+        # Body bobs up and down
+        var body_bob := sin(_walk_anim_time * 2.0) * 1.5 * walk_anim_intensity
+        # Head bobs slightly less
+        var head_bob := sin(_walk_anim_time * 2.0) * 0.8 * walk_anim_intensity
+        # Arms swing opposite to each other
+        var arm_swing := sin(_walk_anim_time) * 3.0 * walk_anim_intensity
+        # Apply offsets...
+```
+
+The Enemy script had no walking animation system.
+
+**Fix Applied:**
+1. Updated @onready references to match new scene structure:
+   - `_enemy_model: Node2D = $EnemyModel`
+   - `_body_sprite: Sprite2D = $EnemyModel/Body`
+   - `_head_sprite: Sprite2D = $EnemyModel/Head`
+   - `_left_arm_sprite: Sprite2D = $EnemyModel/LeftArm`
+   - `_right_arm_sprite: Sprite2D = $EnemyModel/RightArm`
+   - `_weapon_sprite: Sprite2D = $EnemyModel/WeaponMount/WeaponSprite`
+   - `_weapon_mount: Node2D = $EnemyModel/WeaponMount`
+
+2. Added walking animation variables:
+   - `walk_anim_speed: float = 12.0` (export)
+   - `walk_anim_intensity: float = 1.0` (export)
+   - `_walk_anim_time: float = 0.0`
+   - `_is_walking: bool = false`
+   - `_base_body_pos`, `_base_head_pos`, `_base_left_arm_pos`, `_base_right_arm_pos`
+
+3. Added `_update_walk_animation(delta)` function (copied from player.gd and adapted)
+
+4. Added `_update_enemy_model_rotation()` function to rotate model based on:
+   - Player direction (if can see player)
+   - Movement direction (otherwise)
+
+5. Updated `_show_hit_flash()` and `_update_health_visual()` to use all sprite parts
+
+6. Added `_set_all_sprites_modulate(color)` helper function
+
+## Technical Insights
+
+### Godot Scene Structure Mismatch
+
+When modifying a scene's node hierarchy, all script references must be updated to match. The Enemy scene was updated to use a modular EnemyModel structure (matching Player), but the script still referenced the old flat structure.
+
+**Best Practice:** When changing scene node hierarchy:
+1. Update all @onready references in the script
+2. Update any get_node() calls
+3. Update any relative paths in code
+4. Test that all visual features (color changes, animations) still work
+
+### Walking Animation System Design
+
+The walking animation uses a simple but effective approach:
+- Sine waves with different frequencies create natural bobbing
+- Body bobs at 2x frequency (double-step effect)
+- Arms swing at 1x frequency, opposite to each other
+- Head bobs slightly less than body for natural feel
+- Smooth interpolation back to base positions when stopped
+
+### Model Scale vs Sprite Scale
+
+Godot offers multiple ways to scale sprites:
+1. **Node2D.scale** - Scales all children uniformly
+2. **TextureRect/Sprite2D scale** - Scales individual sprites
+3. **Actual PNG dimensions** - Physical pixel size
+
+For modular character models, applying scale to the parent container (PlayerModel/EnemyModel) is preferred as it:
+- Maintains relative positions of body parts
+- Allows easy adjustment via export variable
+- Keeps sprite pixel art crisp at the source resolution
+
+## Files Modified in Fix
+
+### scripts/objects/enemy.gd
+1. Added @onready references for EnemyModel and all sprite parts
+2. Added walking animation exports: `walk_anim_speed`, `walk_anim_intensity`, `enemy_model_scale`
+3. Added walking animation variables
+4. Added `_update_walk_animation(delta)` function
+5. Added `_update_enemy_model_rotation()` function
+6. Updated `_show_hit_flash()` to use all sprites
+7. Updated `_update_health_visual()` to use all sprites
+8. Added `_set_all_sprites_modulate(color)` helper
+
+### Phase 5: Second User Feedback (2026-01-22T11:03:24Z)
+
+User @Jhon-Crow tested the solution again and reported two issues:
+
+1. **"оружие врагов на 90 градусов от врага (слева)"**
+   - Translation: Enemy weapon is at 90 degrees from the enemy (to the left)
+   - Similar issue to a past player model bug
+
+2. **"пули не летят из оружия врага"**
+   - Translation: Bullets are not flying from enemy weapon
+   - Bullets spawn from enemy center instead of weapon muzzle
+
+### Phase 6: Root Cause Analysis and Fix (2026-01-22)
+
+## Root Cause Analysis (Phase 5-6)
+
+### Issue 3: Enemy Weapon Rotated 90 Degrees to the Left
+
+**Root Cause:** The enemy script had TWO competing rotation systems:
+
+1. `_update_enemy_model_rotation()` - Rotates the EnemyModel (including weapon) to face the player
+2. `_update_weapon_sprite_rotation()` - Attempted to set weapon sprite rotation independently
+
+The problem was in `_update_weapon_sprite_rotation()`:
+```gdscript
+# The comment was WRONG - weapon sprite is NOT a child of "enemy body"
+# It's actually: Enemy -> EnemyModel -> WeaponMount -> WeaponSprite
+_weapon_sprite.rotation = aim_angle - rotation  # Uses Enemy's rotation, not EnemyModel's!
+```
+
+The code used `rotation` (Enemy CharacterBody2D's rotation) instead of `_enemy_model.rotation`. Since:
+- EnemyModel already rotates to face the target
+- WeaponSprite is a child of EnemyModel/WeaponMount
+- The weapon should just inherit EnemyModel's rotation
+
+The additional rotation calculation was causing a 90-degree offset.
+
+**Fix Applied:**
+1. Removed the `_update_weapon_sprite_rotation()` call from `_physics_process`
+2. The weapon now correctly inherits rotation from EnemyModel
+
+### Issue 4: Bullets Not Spawning from Weapon Muzzle
+
+**Root Cause:** The `_shoot()` function spawned bullets from enemy CENTER:
+```gdscript
+bullet.global_position = global_position + direction * bullet_spawn_offset
+```
+
+This was visually incorrect - bullets should appear to come from the rifle's barrel.
+
+**Fix Applied:**
+1. Added helper function `_get_bullet_spawn_position(direction: Vector2) -> Vector2`:
+   ```gdscript
+   func _get_bullet_spawn_position(direction: Vector2) -> Vector2:
+       var muzzle_offset := 44.0 * enemy_model_scale  # Scale with enemy model
+       if _weapon_mount:
+           return _weapon_mount.global_position + direction * muzzle_offset
+       else:
+           return global_position + direction * bullet_spawn_offset
+   ```
+
+2. Updated all three shooting functions to use this helper:
+   - `_shoot()`
+   - `_shoot_with_inaccuracy()`
+   - `_shoot_burst_shot()`
+
+3. Updated `shooter_position` to use muzzle position for accurate distance calculations
+
+## Lessons Learned
+
+1. **Maintain Consistency Between Scene and Script:** When updating scene structure (adding EnemyModel with children), the script must be updated to reference the new node paths.
+
+2. **Reuse Existing Systems:** The walking animation system from player.gd was well-designed and could be reused almost directly for enemies, demonstrating good code architecture.
+
+3. **Check for Scale Multipliers:** Visual size in Godot depends not just on sprite dimensions but also on node scale. The player had a 1.3x scale multiplier that was easy to overlook.
+
+4. **Modular Character Design:** Using a parent Node2D (PlayerModel/EnemyModel) with child sprites for body parts enables:
+   - Easy scaling of the entire character
+   - Per-part animations (walking, aiming)
+   - Per-part visual effects (hit flash, health color)
+
+5. **Test Visual Features:** After structural changes, all visual features should be tested:
+   - Health color interpolation
+   - Hit flash effect
+   - Walking animation
+   - Model rotation when aiming
+
+6. **Avoid Competing Rotation Systems:** When using hierarchical node structures, be careful not to apply rotations at multiple levels. The EnemyModel already handles rotation - adding an independent weapon rotation caused conflicts.
+
+7. **Understand Node Hierarchy for Relative Calculations:** When calculating relative positions/rotations, use the correct parent node's values. Using `rotation` (CharacterBody2D) instead of `_enemy_model.rotation` caused the 90-degree offset.
+
+8. **Spawn Projectiles from Visual Origin:** Bullets should spawn from where players expect them - the weapon's muzzle, not the character's center. This improves visual consistency and player feedback.
+
+### Phase 7: Third User Feedback (2026-01-22T08:25:34Z)
+
+User @Jhon-Crow tested the solution again and reported three issues:
+
+1. **"враги ходят спиной вперёд и стреляют из спины"**
+   - Translation: Enemies walk backwards and shoot from their back
+   - The enemy model faces the wrong direction when moving/aiming
+
+2. **"m16 у врагов должна быть такого же размера что и у игрока (меньше чем сейчас)"**
+   - Translation: M16 on enemies should be the same size as the player's (smaller than current)
+   - The weapon sprite is too large
+
+Attached game logs:
+- `game_log_20260122_112258.txt`
+- `game_log_20260122_112342.txt`
+- `game_log_20260122_112428.txt`
+
+### Phase 8: Root Cause Analysis and Fix (2026-01-22)
+
+## Root Cause Analysis (Phase 7-8)
+
+### Issue 5: Enemies Walk Backwards and Shoot from Back
+
+**Root Cause:** The enemy sprites were created facing **LEFT** (PI radians), while the player sprites face **RIGHT** (0 radians).
+
+The rotation code set:
+```gdscript
+var target_angle := face_direction.angle()
+_enemy_model.rotation = target_angle
+```
+
+When the face_direction points toward the player (e.g., to the right = 0 radians), and the sprites are drawn facing left (PI radians), the enemy appears to be facing away from where they're aiming.
+
+**Visual Explanation:**
+- Player sprites: Character drawn facing → (right, angle 0)
+- Enemy sprites: Character drawn facing ← (left, angle PI)
+- When rotation = 0 (facing right), player faces right ✓, enemy faces left ✗
+
+**Fix Applied:**
+1. Added PI to the target rotation angle to compensate for sprite orientation:
+   ```gdscript
+   # Enemy sprites face LEFT (PI radians offset from player sprites which face RIGHT)
+   var target_angle := face_direction.angle() + PI
+   _enemy_model.rotation = target_angle
+   ```
+
+2. Updated flipping logic to use the original face_direction angle:
+   ```gdscript
+   var face_angle := face_direction.angle()
+   var aiming_left := absf(face_angle) > PI / 2
+   ```
+
+### Issue 6: M16 Weapon Sprite Too Large
+
+**Root Cause:** The enemy uses `m16_rifle_topdown.png` (64x16 pixels), which when scaled at 1.3x becomes ~83x21 pixels.
+
+The player's weapon is **integrated into the arm sprites** (player_left_arm.png is 20x8 and includes the rifle grip). The player's rifle portion, when scaled 1.3x, appears much smaller than the separate enemy weapon sprite.
+
+**Comparison:**
+- Player: Arms (20x8) × 1.3 scale = 26×10 effective pixels, weapon integrated
+- Enemy: Separate rifle (64x16) × 1.3 scale = 83×21 effective pixels
+
+**Fix Applied:**
+1. Changed Enemy.tscn to use `m16_topdown_small.png` (32x8 pixels) instead of `m16_rifle_topdown.png` (64x16 pixels)
+
+2. Updated weapon sprite offset from `Vector2(20, 0)` to `Vector2(10, 0)` (proportional to new sprite size)
+
+3. Updated `_get_bullet_spawn_position()` muzzle offset calculation:
+   ```gdscript
+   # Old: 44px for 64px sprite with 20px offset
+   # New: 22px for 32px sprite with 10px offset
+   var muzzle_offset := 22.0 * enemy_model_scale
+   ```
+
+## Summary of All Issues and Fixes
+
+| Issue | Root Cause | Fix |
+|-------|-----------|-----|
+| 1. Enemy smaller than player | Missing 1.3x scale multiplier | Added `enemy_model_scale` export and scale in `_ready()` |
+| 2. No walking animation | Old script references + missing animation code | Updated references, added `_update_walk_animation()` |
+| 3. Weapon at 90° angle | Competing rotation systems | Removed `_update_weapon_sprite_rotation()` call |
+| 4. Bullets from center | Spawning from enemy position | Added `_get_bullet_spawn_position()` using weapon mount |
+| 5. Walking backwards | Enemy sprites face opposite direction (PI offset) | Added PI to rotation angle |
+| 6. M16 too large | Using 64px sprite vs player's integrated smaller rifle | Changed to `m16_topdown_small.png` (32px) |
+
+## Lessons Learned
+
+1. **Maintain Consistency Between Scene and Script:** When updating scene structure (adding EnemyModel with children), the script must be updated to reference the new node paths.
+
+2. **Reuse Existing Systems:** The walking animation system from player.gd was well-designed and could be reused almost directly for enemies, demonstrating good code architecture.
+
+3. **Check for Scale Multipliers:** Visual size in Godot depends not just on sprite dimensions but also on node scale. The player had a 1.3x scale multiplier that was easy to overlook.
+
+4. **Modular Character Design:** Using a parent Node2D (PlayerModel/EnemyModel) with child sprites for body parts enables:
+   - Easy scaling of the entire character
+   - Per-part animations (walking, aiming)
+   - Per-part visual effects (hit flash, health color)
+
+5. **Test Visual Features:** After structural changes, all visual features should be tested:
+   - Health color interpolation
+   - Hit flash effect
+   - Walking animation
+   - Model rotation when aiming
+
+6. **Avoid Competing Rotation Systems:** When using hierarchical node structures, be careful not to apply rotations at multiple levels. The EnemyModel already handles rotation - adding an independent weapon rotation caused conflicts.
+
+7. **Understand Node Hierarchy for Relative Calculations:** When calculating relative positions/rotations, use the correct parent node's values. Using `rotation` (CharacterBody2D) instead of `_enemy_model.rotation` caused the 90-degree offset.
+
+8. **Spawn Projectiles from Visual Origin:** Bullets should spawn from where players expect them - the weapon's muzzle, not the character's center. This improves visual consistency and player feedback.
+
+9. **Match Sprite Orientations:** When creating new character sprites based on existing ones, ensure they face the same direction (typically RIGHT = 0 radians in 2D games). If sprites face opposite directions, the rotation code needs to compensate with a PI offset.
+
+10. **Compare Proportions with Reference:** When adding separate weapon sprites, compare the final rendered size (after scaling) with how weapons appear on reference characters (player). The player's integrated weapon was much smaller than the separate 64px rifle sprite.
+
+### Phase 9: Fourth User Feedback (2026-01-22T11:47:16Z)
+
+User @Jhon-Crow tested the solution again and reported two issues:
+
+1. **"теперь оружие врагов вообще не отображается"**
+   - Translation: Now enemy weapons are not displayed at all
+   - The smaller weapon sprite `m16_topdown_small.png` was not visible
+
+2. **"сломался особый последний шанс (пули игрока перестали останавливаться)"**
+   - Translation: The special last chance is broken (player bullets stopped stopping)
+   - The Last Chance effect was not properly freezing bullets
+
+Attached game log:
+- `game_log_20260122_114716.txt`
+
+### Phase 10: Root Cause Analysis and Fix (2026-01-22)
+
+## Root Cause Analysis (Phase 9-10)
+
+### Issue 7: Enemy Weapons Not Displaying
+
+**Root Cause:** The smaller weapon sprite `m16_topdown_small.png` (32x8 pixels) was being obscured by:
+1. Very small size compared to body parts
+2. z-index of 2 being lower than arms (z-index 4)
+3. Dark color (30, 30, 30 RGB) making it hard to see
+
+The original larger sprite `m16_rifle_topdown.png` (64x16 pixels) was clearly visible.
+
+**Fix Applied:**
+1. Reverted `Enemy.tscn` to use the original larger sprite `m16_rifle_topdown.png`
+2. Restored weapon offset from `Vector2(10, 0)` back to `Vector2(20, 0)`
+3. Updated `_get_bullet_spawn_position()` muzzle offset from 22px back to 44px
+
+### Issue 8: Last Chance Effect Not Freezing Bullets
+
+**Root Cause:** The feature branch `issue-217-6e363ec134f9` was created before recent fixes were merged to main. The branch was missing commits:
+- `154652e` - Fix Mini UZI direction and Last Chance mode bullet freezing
+- `830769a` - Fix shotgun pellets not freezing in last chance mode
+
+These commits added proper detection for pellets and other bullet types in `last_chance_effects_manager.gd`:
+```gdscript
+# Before (missing pellet detection):
+if "bullet" in script_path.to_lower():
+
+# After (with pellet detection):
+if "bullet" in script_path.to_lower() or "pellet" in script_path.to_lower():
+```
+
+**Fix Applied:**
+1. Merged main branch into feature branch to incorporate latest fixes
+2. The Last Chance effect now properly detects and freezes all bullet types
+
+## Updated Summary of All Issues and Fixes
+
+| Issue | Root Cause | Fix |
+|-------|-----------|-----|
+| 1. Enemy smaller than player | Missing 1.3x scale multiplier | Added `enemy_model_scale` export and scale in `_ready()` |
+| 2. No walking animation | Old script references + missing animation code | Updated references, added `_update_walk_animation()` |
+| 3. Weapon at 90° angle | Competing rotation systems | Removed `_update_weapon_sprite_rotation()` call |
+| 4. Bullets from center | Spawning from enemy position | Added `_get_bullet_spawn_position()` using weapon mount |
+| 5. Walking backwards | Enemy sprites face opposite direction (PI offset) | Added PI to rotation angle |
+| 6. M16 too large | Using 64px sprite vs player's integrated smaller rifle | Changed to `m16_topdown_small.png` (32px) |
+| 7. Weapon not visible | Smaller sprite obscured by body parts | Reverted to original larger sprite `m16_rifle_topdown.png` |
+| 8. Last Chance not freezing bullets | Branch missing pellet detection fix from main | Merged main branch with latest fixes |
+
+## Additional Lessons Learned
+
+11. **Test Visual Changes with Actual Gameplay:** The smaller weapon sprite looked correct in isolation but was invisible during actual gameplay due to overlapping body parts and z-index ordering.
+
+12. **Keep Feature Branches Updated:** Long-running feature branches may miss important fixes from main. Regularly merging main ensures all bug fixes are incorporated.
+
+13. **Consider Visual Contrast:** Dark sprites on dark backgrounds or small sprites under other elements may become invisible. Test visual changes at runtime, not just in the editor.
+
+14. **Balance Visual Accuracy vs. Visibility:** Sometimes gameplay clarity is more important than visual accuracy. A larger weapon sprite that's visible is better than a "correctly sized" sprite that can't be seen.
+
+### Phase 11: Fifth User Feedback (2026-01-22T12:11:26Z)
+
+User @Jhon-Crow tested the solution again and reported:
+
+1. **"враги всё ещё стреляют не из оружия"**
+   - Translation: Enemies still shoot not from their weapon
+   - Bullets appear to spawn from incorrect position, not from the weapon muzzle
+
+Attached game log:
+- `game_log_20260122_120806.txt`
+
+### Phase 12: Root Cause Analysis and Fix (2026-01-22)
+
+## Root Cause Analysis (Phase 11-12)
+
+### Issue 9: Bullets Not Spawning From Weapon Muzzle
+
+**Root Cause:** The `_get_bullet_spawn_position()` function had two fundamental problems:
+
+1. **Direction Mismatch:** The function used the `direction` parameter (direction from enemy center to player/target) to calculate muzzle offset. However, when the enemy model is rotated, the weapon's actual forward direction in world space is different from this direction parameter, especially when lead prediction is enabled.
+
+2. **Timing Issue:** In `_physics_process()`, the execution order was:
+   ```
+   1. _process_ai_state(delta)  // Shooting happens here
+   2. _update_enemy_model_rotation()  // Model rotation updated AFTER
+   ```
+
+   This meant when `_shoot()` was called, the enemy model rotation (and thus `_weapon_mount.global_position`) was from the **previous frame**, but the `direction` parameter was calculated for the **current frame's** target position. This caused a positional mismatch between where the weapon visually points and where bullets actually spawn.
+
+**The Math:**
+- Enemy sprites face LEFT in local space (PI radians from "right")
+- Enemy model rotation is `face_direction.angle() + PI`
+- Weapon's forward direction in world space: `Vector2(-1, 0).rotated(enemy_model.rotation)`
+- This transforms local-left to world-space direction
+
+When the rotation and direction calculations happen in different frames or use different target positions (due to lead prediction), the bullet spawn position doesn't align with the visual weapon position.
+
+**Fix Applied:**
+1. Changed `_get_bullet_spawn_position()` to calculate the weapon's actual forward direction from `_enemy_model.rotation` instead of using the passed `direction` parameter:
+   ```gdscript
+   # Before (incorrect):
+   return _weapon_mount.global_position + direction * muzzle_offset
+
+   # After (correct):
+   var weapon_forward := Vector2(-1, 0).rotated(_enemy_model.rotation)
+   return _weapon_mount.global_position + weapon_forward * muzzle_offset
+   ```
+
+2. Moved `_update_enemy_model_rotation()` to execute BEFORE `_process_ai_state()`:
+   ```gdscript
+   # Before:
+   _process_ai_state(delta)  # Shooting here uses old rotation
+   _update_enemy_model_rotation()  # Rotation updated too late
+
+   # After:
+   _update_enemy_model_rotation()  # Rotation updated first
+   _process_ai_state(delta)  # Shooting uses current rotation
+   ```
+
+## Updated Summary of All Issues and Fixes
+
+| Issue | Root Cause | Fix |
+|-------|-----------|-----|
+| 1. Enemy smaller than player | Missing 1.3x scale multiplier | Added `enemy_model_scale` export and scale in `_ready()` |
+| 2. No walking animation | Old script references + missing animation code | Updated references, added `_update_walk_animation()` |
+| 3. Weapon at 90° angle | Competing rotation systems | Removed `_update_weapon_sprite_rotation()` call |
+| 4. Bullets from center | Spawning from enemy position | Added `_get_bullet_spawn_position()` using weapon mount |
+| 5. Walking backwards | Enemy sprites face opposite direction (PI offset) | Added PI to rotation angle |
+| 6. M16 too large | Using 64px sprite vs player's integrated smaller rifle | Changed to `m16_topdown_small.png` (32px) |
+| 7. Weapon not visible | Smaller sprite obscured by body parts | Reverted to original larger sprite `m16_rifle_topdown.png` |
+| 8. Last Chance not freezing bullets | Branch missing pellet detection fix from main | Merged main branch with latest fixes |
+| 9. Bullets not from weapon muzzle | Direction mismatch and execution order issue | Use weapon's actual rotation for muzzle direction; moved rotation update before shooting |
+
+## Additional Lessons Learned
+
+11. **Test Visual Changes with Actual Gameplay:** The smaller weapon sprite looked correct in isolation but was invisible during actual gameplay due to overlapping body parts and z-index ordering.
+
+12. **Keep Feature Branches Updated:** Long-running feature branches may miss important fixes from main. Regularly merging main ensures all bug fixes are incorporated.
+
+13. **Consider Visual Contrast:** Dark sprites on dark backgrounds or small sprites under other elements may become invisible. Test visual changes at runtime, not just in the editor.
+
+14. **Balance Visual Accuracy vs. Visibility:** Sometimes gameplay clarity is more important than visual accuracy. A larger weapon sprite that's visible is better than a "correctly sized" sprite that can't be seen.
+
+15. **Execution Order Matters:** When multiple systems depend on each other (rotation system, shooting system), the order of execution in the game loop is critical. The rotation system must update BEFORE the shooting system accesses the rotated positions.
+
+16. **Use Actual State, Not Parameters:** When calculating positions based on rotated objects, use the object's actual rotation state rather than parameters that might be calculated differently (e.g., with lead prediction). This ensures visual consistency between what the player sees and what the code produces.
+
+17. **Consider Lead Prediction Effects:** When implementing features like bullet lead prediction, the shooting direction may differ from the visual aim direction. The bullet spawn position should match where the weapon visually points, not where the bullet is aimed.
+
+## Related Files
+
+- [issue-data.json](./issue-data.json) - Original issue data
+- [pr-data.json](./pr-data.json) - Pull request metadata
+- [pr-conversation-comments.json](./pr-conversation-comments.json) - PR discussion comments
+- [pr-review-comments.json](./pr-review-comments.json) - PR review comments
+- [pr-diff.txt](./pr-diff.txt) - PR diff showing all changes
+- [logs/solution-draft-log-initial.txt](./logs/solution-draft-log-initial.txt) - Initial AI solution draft log
+- [logs/game_log_20260122_112258.txt](./logs/game_log_20260122_112258.txt) - Game log from phase 7 testing
+- [logs/game_log_20260122_112342.txt](./logs/game_log_20260122_112342.txt) - Game log from phase 7 testing
+- [logs/game_log_20260122_112428.txt](./logs/game_log_20260122_112428.txt) - Game log from phase 7 testing
+- [logs/game_log_20260122_114716.txt](./logs/game_log_20260122_114716.txt) - Game log from phase 9 testing
+- [logs/game_log_20260122_120806.txt](./logs/game_log_20260122_120806.txt) - Game log from phase 11 testing
+- [logs/game_log_20260122_122412.txt](./logs/game_log_20260122_122412.txt) - Game log from phase 13 testing
+
+### Phase 13: Sixth User Feedback (2026-01-22T12:25:39Z)
+
+User @Jhon-Crow tested the solution again and reported:
+
+1. **"враги всё ещё чаще всего стреляют не из оружия"**
+   - Translation: Enemies still mostly shoot not from their weapon
+   - Bullets continue to spawn from incorrect position despite previous fix
+
+Attached game log:
+- `game_log_20260122_122412.txt`
+
+### Phase 14: Deep Root Cause Analysis and Fix (2026-01-22)
+
+## Root Cause Analysis (Phase 13-14)
+
+### Issue 10: Bullets STILL Not Spawning From Weapon Muzzle
+
+**Root Cause:** The previous fix (Phase 12) used `Vector2(-1, 0)` for the weapon's local forward direction, but this was fundamentally INCORRECT.
+
+The issue is a **coordinate system mismatch** between the weapon sprite orientation and the assumed forward direction:
+
+1. **Weapon sprite orientation:** The M16 rifle sprite (`m16_rifle_topdown.png`) is drawn with the **muzzle pointing RIGHT** (+X direction in local space).
+
+2. **Previous code assumption:** The code assumed `Vector2(-1, 0)` as the weapon's forward direction in local space, meaning it expected the muzzle to point LEFT (-X direction).
+
+3. **Combined with PI offset:** The enemy model rotation includes a `+ PI` offset to compensate for body sprites facing left. When this rotation is applied to the wrong local forward direction, the result is doubly incorrect.
+
+**Visual Analysis of the Rifle Sprite:**
+```
+[m16_rifle_topdown.png - 64x16 pixels]
+Stock          Grip        Barrel        Muzzle
+  ←              ←            ←             →
+[-X in local space]                    [+X in local space]
+```
+
+The muzzle is at the RIGHT side of the sprite (+X direction), not the left.
+
+**Additionally**, the `_weapon_sprite.offset = Vector2(20, 0)` shifts the sprite further to the RIGHT. The muzzle position calculation must account for:
+- Sprite center: at node position
+- Sprite offset: +20 pixels in +X direction
+- Half sprite width: +32 pixels in +X direction
+- Total: muzzle is at +52 pixels from node position in local +X direction
+
+**The Critical Bug:** The previous fix also didn't account for the **Y-axis flip** that occurs when enemies aim left. When `_enemy_model.scale.y = -1`, the coordinate system is flipped, which affects how rotation transforms local coordinates to world coordinates.
+
+**Fix Applied:**
+
+1. Changed to use `_weapon_sprite.global_transform.x` instead of manual rotation calculation:
+   ```gdscript
+   # Before (incorrect):
+   var weapon_forward := Vector2(-1, 0).rotated(_enemy_model.rotation)
+
+   # After (correct):
+   var weapon_global_forward := _weapon_sprite.global_transform.x.normalized()
+   ```
+
+   The `global_transform.x` property gives the weapon's local +X axis in **world coordinates**, automatically accounting for:
+   - All parent rotations (Enemy → EnemyModel → WeaponMount → WeaponSprite)
+   - All parent scales (including Y flip when aiming left)
+   - The actual hierarchical transform chain
+
+2. Changed to use `_weapon_sprite.global_position` instead of `_weapon_mount.global_position`:
+   ```gdscript
+   # The weapon sprite is the actual visual element, so use its position
+   return _weapon_sprite.global_position + weapon_global_forward * scaled_muzzle_offset
+   ```
+
+3. Updated the muzzle offset calculation:
+   ```gdscript
+   # Muzzle is at: sprite_offset.x + sprite_width/2 = 20 + 32 = 52 pixels in local +X
+   var muzzle_local_offset := 52.0
+   var scaled_muzzle_offset := muzzle_local_offset * enemy_model_scale
+   ```
+
+**Why This Works:**
+- `global_transform.x` is a property of all Node2D objects that gives the local +X axis direction in world space
+- It correctly handles all transforms in the hierarchy: translation, rotation, AND scale (including negative scale for flipping)
+- This approach is more robust than manually calculating the direction, as it automatically adapts to any scene hierarchy changes
+
+## Updated Summary of All Issues and Fixes
+
+| Issue | Root Cause | Fix |
+|-------|-----------|-----|
+| 1. Enemy smaller than player | Missing 1.3x scale multiplier | Added `enemy_model_scale` export and scale in `_ready()` |
+| 2. No walking animation | Old script references + missing animation code | Updated references, added `_update_walk_animation()` |
+| 3. Weapon at 90° angle | Competing rotation systems | Removed `_update_weapon_sprite_rotation()` call |
+| 4. Bullets from center | Spawning from enemy position | Added `_get_bullet_spawn_position()` using weapon mount |
+| 5. Walking backwards | Enemy sprites face opposite direction (PI offset) | Added PI to rotation angle |
+| 6. M16 too large | Using 64px sprite vs player's integrated smaller rifle | Changed to `m16_topdown_small.png` (32px) |
+| 7. Weapon not visible | Smaller sprite obscured by body parts | Reverted to original larger sprite `m16_rifle_topdown.png` |
+| 8. Last Chance not freezing bullets | Branch missing pellet detection fix from main | Merged main branch with latest fixes |
+| 9. Bullets not from weapon muzzle | Direction mismatch and execution order issue | Use weapon's actual rotation for muzzle direction; moved rotation update before shooting |
+| 10. Bullets STILL not from muzzle | Wrong local forward direction (used -X instead of +X) and Y-flip not handled | Use `global_transform.x` for correct world-space forward direction |
+
+## Additional Lessons Learned (Phase 13-14)
+
+18. **Sprite Orientation Matters:** When calculating forward directions for sprites, first verify which direction the sprite actually faces. A rifle sprite with the muzzle pointing right uses `Vector2(1, 0)` as local forward, not `Vector2(-1, 0)`.
+
+19. **Use Transform Properties, Not Manual Calculations:** Godot's `global_transform` properties (`x`, `y`, `origin`) correctly account for the entire transform hierarchy including scale flips. Using `global_transform.x.normalized()` is more robust than manually applying rotations.
+
+20. **Y-Scale Flip Affects Coordinate System:** When a node has negative Y scale (for horizontal flipping), the relationship between local and world coordinates changes. Manual rotation calculations may not account for this, but `global_transform` does.
+
+21. **Verify Assumptions About Sprite Orientation:** Before writing transformation code, view the actual sprite asset to confirm its orientation. Comments saying "sprites face LEFT" should be verified against the actual sprite file.
+
+22. **Test Edge Cases:** The bullet spawn issue was most visible when enemies faced certain directions (particularly when Y-flip was active). Testing with enemies facing all directions would have revealed the issue sooner.
+
+### Phase 15: Seventh User Feedback (2026-01-22T09:37:13Z)
+
+User @Jhon-Crow tested the solution again and reported two issues:
+
+1. **"когда игрок стреляет вверх он наносит себе урон"**
+   - Translation: When the player shoots upward they damage themselves
+   - Player bullets hitting the player's own hitbox
+
+2. **"пули из оружия врагов должны вылетать по направлению ствола"**
+   - Translation: Bullets from enemy weapons should fly in the direction of the barrel
+   - Enemy bullets fly from the muzzle but in any direction, not aligned with the weapon barrel
+
+Attached game logs:
+- `game_log_20260122_123430.txt`
+- `game_log_20260122_123547.txt`
+
+### Phase 16: Root Cause Analysis and Fix (2026-01-22)
+
+## Root Cause Analysis (Phase 15-16)
+
+### Issue 11: Player Self-Damage When Shooting Upward
+
+**Root Cause:** The C# `Bullet.cs` class had properties that couldn't be properly set via Godot's `Node.Set()` method from the C# `BaseWeapon.cs` shooter.
+
+The property binding chain:
+1. `BaseWeapon.cs` calls `bullet.Set("shooter_id", owner.GetInstanceId())`
+2. Godot tries to find a property named `shooter_id` (snake_case)
+3. C# `Bullet.cs` has `public ulong ShooterId { get; set; }` (PascalCase)
+4. Without the `[Export]` attribute, Godot cannot find the property via snake_case name
+5. `ShooterId` remains at default value `0`
+6. Self-damage check fails: `if (ShooterId == body.GetInstanceId())` never matches
+
+**Evidence from logs:** The game logs showed bullets with `shooter_id=0` and `shooter_position=(0, 0)`, which should have been set to the player's instance ID and position.
+
+**Fix Applied:**
+Added `[Export]` attribute to three properties in `Scripts/Projectiles/Bullet.cs`:
+
+```csharp
+// Before:
+public Vector2 Direction { get; set; } = Vector2.Right;
+public ulong ShooterId { get; set; } = 0;
+public Vector2 ShooterPosition { get; set; } = Vector2.Zero;
+
+// After:
+[Export]
+public Vector2 Direction { get; set; } = Vector2.Right;
+
+[Export]
+public ulong ShooterId { get; set; } = 0;
+
+[Export]
+public Vector2 ShooterPosition { get; set; } = Vector2.Zero;
+```
+
+The `[Export]` attribute in Godot's C# API:
+- Exposes the property to the Godot editor
+- Makes the property accessible via `Node.Set()` and `Node.Get()` with snake_case naming
+- Enables cross-language property setting between GDScript and C#
+
+### Issue 12: Enemy Bullets Not Flying in Barrel Direction
+
+**Root Cause:** The bullet spawn position was correctly calculated from the weapon muzzle (using `global_transform.x`), but the bullet's **direction** was still calculated as the direction from enemy center to player.
+
+In `enemy.gd` `_shoot()` function:
+```gdscript
+# Bullet spawns from correct muzzle position
+var bullet_spawn_pos := _get_bullet_spawn_position(direction)
+
+# BUT direction was calculated to point at player, not barrel forward
+var direction := (target_position - global_position).normalized()
+bullet.direction = direction  # Wrong! Uses direction to player, not barrel direction
+```
+
+This caused a visual mismatch:
+- Weapon sprite points at the player (correct visual)
+- Bullet spawns from muzzle (correct position)
+- Bullet flies toward player center (but muzzle may not point exactly at player center due to position offset)
+
+**Fix Applied:**
+1. Added new helper function `_get_weapon_forward_direction()`:
+```gdscript
+## Returns the weapon's forward direction in world coordinates.
+## This is the direction the weapon barrel is actually pointing.
+## Uses the weapon sprite's global transform to account for rotation and scale (including Y flip).
+## @returns: Normalized direction vector the weapon is pointing.
+func _get_weapon_forward_direction() -> Vector2:
+    if _weapon_sprite and _enemy_model:
+        # Use the weapon sprite's global transform to get its actual forward direction.
+        # The weapon sprite points RIGHT (+X) in its local space.
+        # global_transform.x gives us the weapon's local +X axis in world coordinates,
+        # accounting for both rotation AND scale (including Y flip).
+        return _weapon_sprite.global_transform.x.normalized()
+    else:
+        # Fallback: calculate direction to player
+        if _player and is_instance_valid(_player):
+            return (_player.global_position - global_position).normalized()
+        return Vector2.RIGHT  # Default fallback
+```
+
+2. Updated all shooting functions to use weapon forward direction:
+   - `_shoot()` - main shooting function
+   - `_shoot_with_inaccuracy()` - shooting during retreat with spread
+   - `_shoot_burst_shot()` - burst fire with arc spread
+
+3. Updated `_should_shoot_at_target()` to check bullet spawn clearance using weapon direction:
+```gdscript
+# Before:
+var direction := (target_position - global_position).normalized()
+if not _is_bullet_spawn_clear(direction):
+
+# After:
+var weapon_direction := _get_weapon_forward_direction()
+if not _is_bullet_spawn_clear(weapon_direction):
+```
+
+## Updated Summary of All Issues and Fixes
+
+| Issue | Root Cause | Fix |
+|-------|-----------|-----|
+| 1. Enemy smaller than player | Missing 1.3x scale multiplier | Added `enemy_model_scale` export and scale in `_ready()` |
+| 2. No walking animation | Old script references + missing animation code | Updated references, added `_update_walk_animation()` |
+| 3. Weapon at 90° angle | Competing rotation systems | Removed `_update_weapon_sprite_rotation()` call |
+| 4. Bullets from center | Spawning from enemy position | Added `_get_bullet_spawn_position()` using weapon mount |
+| 5. Walking backwards | Enemy sprites face opposite direction (PI offset) | Added PI to rotation angle |
+| 6. M16 too large | Using 64px sprite vs player's integrated smaller rifle | Changed to `m16_topdown_small.png` (32px) |
+| 7. Weapon not visible | Smaller sprite obscured by body parts | Reverted to original larger sprite `m16_rifle_topdown.png` |
+| 8. Last Chance not freezing bullets | Branch missing pellet detection fix from main | Merged main branch with latest fixes |
+| 9. Bullets not from weapon muzzle | Direction mismatch and execution order issue | Use weapon's actual rotation for muzzle direction; moved rotation update before shooting |
+| 10. Bullets STILL not from muzzle | Wrong local forward direction (used -X instead of +X) and Y-flip not handled | Use `global_transform.x` for correct world-space forward direction |
+| 11. Player self-damage when shooting upward | C# Bullet properties missing [Export] attribute, preventing cross-language property binding | Added [Export] to Direction, ShooterId, ShooterPosition in Bullet.cs |
+| 12. Enemy bullets not flying in barrel direction | Bullet direction calculated to player, not weapon forward | Added `_get_weapon_forward_direction()` and updated all shooting functions |
+
+## Additional Lessons Learned (Phase 15-16)
+
+23. **Cross-Language Property Binding in Godot:** When using C# with Godot, properties must have the `[Export]` attribute to be accessible via `Node.Set()` and `Node.Get()` with snake_case names. Without it, cross-language property setting silently fails.
+
+24. **Bullet Direction vs Spawn Position:** The spawn position and travel direction are independent calculations. Even with correct spawn position, the travel direction must also be correct for visual consistency.
+
+25. **Consistency Across All Shooting Functions:** When fixing shooting behavior, ensure ALL shooting functions are updated (main shoot, inaccurate shoot, burst shoot, etc.), not just the primary one.
+
+26. **Use Same Logic for Validation and Execution:** The bullet spawn clearance check (`_should_shoot_at_target`) should use the same direction calculation as the actual shooting, otherwise the validation may pass but the shot may still visually look wrong.
+
+### Phase 17: Eighth User Feedback (2026-01-22T12:52:28Z)
+
+User @Jhon-Crow tested the solution again and reported:
+
+1. **"игрок всё ещё наносит себе урон когда стреляет вверх"**
+   - Translation: Player still damages themselves when shooting upward
+   - Despite adding [Export] attribute in Phase 16, player bullets still cause self-damage
+
+Attached game log:
+- `game_log_20260122_125115.txt`
+
+### Phase 18: Deep Root Cause Analysis and Fix (2026-01-22)
+
+## Root Cause Analysis (Phase 17-18)
+
+### Issue 13: Player STILL Self-Damages When Shooting Upward (Continued)
+
+**Root Cause:** While Phase 16 added the `[Export]` attribute to C# Bullet properties, analysis of the game log revealed that **94 bullets had `shooter_id=0`** - indicating the properties were still not being set correctly.
+
+The issue is that `Node.Set("shooter_id", value)` in Godot does not reliably map snake_case property names to PascalCase C# properties, even with the `[Export]` attribute. The Godot-to-C# property binding via `Set()` method has inconsistent behavior.
+
+**Evidence from log analysis:**
+```
+Total bullets: 206
+Bullets with shooter_id=0: 94
+Bullets with valid shooter_id: 112
+```
+
+The 94 bullets with `shooter_id=0` were C# bullets (identifiable by their log format), spawned by the player through `BaseWeapon.cs`.
+
+**Technical Explanation:**
+1. `BaseWeapon.cs` calls `bullet.Set("shooter_id", owner.GetInstanceId())`
+2. `Node.Set()` attempts to find a property with snake_case name `shooter_id`
+3. The C# property `ShooterId` (PascalCase) should map to `shooter_id` (snake_case) via `[Export]`
+4. However, this mapping is unreliable - sometimes it works, sometimes it doesn't
+5. When it fails, `ShooterId` stays at default value `0`
+6. Self-damage check `if (ShooterId == body.GetInstanceId())` never matches because player's ID is never `0`
+
+**Fix Applied:**
+
+Instead of relying on `Node.Set()` property binding, we added explicit setter methods that can be called via `Node.Call()`:
+
+1. Added setter methods to `Scripts/Projectiles/Bullet.cs`:
+```csharp
+/// <summary>
+/// Sets the shooter ID to prevent self-damage.
+/// Called by the weapon to identify the shooter node.
+/// </summary>
+/// <param name="shooterId">Instance ID of the shooter node.</param>
+public void SetShooterId(ulong shooterId)
+{
+    ShooterId = shooterId;
+}
+
+/// <summary>
+/// Sets the shooter's position at firing time.
+/// Used for distance-based penetration calculations.
+/// </summary>
+/// <param name="position">Global position of the shooter when firing.</param>
+public void SetShooterPosition(Vector2 position)
+{
+    ShooterPosition = position;
+}
+```
+
+2. Updated `Scripts/AbstractClasses/BaseWeapon.cs` to use method calls with fallback:
+```csharp
+// Set shooter ID to prevent self-damage
+var owner = GetParent();
+if (owner != null)
+{
+    // Try method call first (for C# bullets), fall back to property set (for GDScript bullets)
+    if (bullet.HasMethod("SetShooterId"))
+    {
+        bullet.Call("SetShooterId", owner.GetInstanceId());
+    }
+    else
+    {
+        bullet.Set("shooter_id", owner.GetInstanceId());
+    }
+}
+
+// Set shooter position for distance-based penetration calculations
+if (bullet.HasMethod("SetShooterPosition"))
+{
+    bullet.Call("SetShooterPosition", GlobalPosition);
+}
+else
+{
+    bullet.Set("shooter_position", GlobalPosition);
+}
+```
+
+3. Updated `Scripts/Characters/Player.cs` SpawnBullet method similarly:
+```csharp
+// Set bullet direction
+if (bullet.HasMethod("SetDirection"))
+{
+    bullet.Call("SetDirection", direction);
+}
+else
+{
+    bullet.Set("direction", direction);
+}
+
+// Set shooter ID to prevent self-damage
+if (bullet.HasMethod("SetShooterId"))
+{
+    bullet.Call("SetShooterId", GetInstanceId());
+}
+else
+{
+    bullet.Set("shooter_id", GetInstanceId());
+}
+```
+
+**Why This Fix Works:**
+- `Node.Call()` invokes methods directly by name, which is more reliable than property binding
+- Method names don't require case conversion (SetShooterId is called exactly as named)
+- The `HasMethod()` check ensures backward compatibility with GDScript bullets that use property setters
+- This pattern (try method, fallback to property) handles both C# and GDScript bullets correctly
+
+## Updated Summary of All Issues and Fixes
+
+| Issue | Root Cause | Fix |
+|-------|-----------|-----|
+| 1. Enemy smaller than player | Missing 1.3x scale multiplier | Added `enemy_model_scale` export and scale in `_ready()` |
+| 2. No walking animation | Old script references + missing animation code | Updated references, added `_update_walk_animation()` |
+| 3. Weapon at 90° angle | Competing rotation systems | Removed `_update_weapon_sprite_rotation()` call |
+| 4. Bullets from center | Spawning from enemy position | Added `_get_bullet_spawn_position()` using weapon mount |
+| 5. Walking backwards | Enemy sprites face opposite direction (PI offset) | Added PI to rotation angle |
+| 6. M16 too large | Using 64px sprite vs player's integrated smaller rifle | Changed to `m16_topdown_small.png` (32px) |
+| 7. Weapon not visible | Smaller sprite obscured by body parts | Reverted to original larger sprite `m16_rifle_topdown.png` |
+| 8. Last Chance not freezing bullets | Branch missing pellet detection fix from main | Merged main branch with latest fixes |
+| 9. Bullets not from weapon muzzle | Direction mismatch and execution order issue | Use weapon's actual rotation for muzzle direction; moved rotation update before shooting |
+| 10. Bullets STILL not from muzzle | Wrong local forward direction (used -X instead of +X) and Y-flip not handled | Use `global_transform.x` for correct world-space forward direction |
+| 11. Player self-damage when shooting upward | C# Bullet properties missing [Export] attribute | Added [Export] to Direction, ShooterId, ShooterPosition in Bullet.cs |
+| 12. Enemy bullets not flying in barrel direction | Bullet direction calculated to player, not weapon forward | Added `_get_weapon_forward_direction()` and updated all shooting functions |
+| 13. Player STILL self-damaging | `Node.Set()` unreliably maps snake_case to PascalCase C# properties | Added explicit setter methods (`SetShooterId`, `SetShooterPosition`) and use `Call()` instead of `Set()` |
+
+## Additional Lessons Learned (Phase 17-18)
+
+27. **Prefer Method Calls Over Property Binding for Cross-Language Code:** In Godot's C#/GDScript interop, calling methods via `Node.Call()` is more reliable than setting properties via `Node.Set()`. Method names don't require case conversion and work consistently.
+
+28. **Don't Trust Silent Failures:** The `[Export]` attribute should have made properties accessible via snake_case names, but it didn't always work. When a fix doesn't solve the problem, investigate deeper rather than assuming the approach was correct.
+
+29. **Analyze Logs Quantitatively:** Instead of just looking for errors, count occurrences. Finding "94 bullets with shooter_id=0" out of 206 bullets revealed the systematic failure that spot-checking might have missed.
+
+30. **Use HasMethod/Call Pattern for Compatibility:** When code must work with both C# and GDScript objects, use `HasMethod()` to check for method availability, then `Call()` for C# objects and `Set()` as fallback for GDScript objects.
+
+31. **Case Sensitivity Matters in Cross-Language Binding:** Godot's property binding between C# (PascalCase convention) and GDScript (snake_case convention) is not always reliable. Explicit method calls bypass this issue entirely.
+
+### Phase 19: Ninth User Feedback (2026-01-22T10:34:45Z)
+
+User @Jhon-Crow tested the solution again and reported:
+
+1. **"враги стреляют мимо, промахиваются примерно на 45 градусов. их линия прицела должна совпадать с линией огня."**
+   - Translation: Enemies miss, off by about 45 degrees. Their aiming line should match their firing line.
+   - Enemy bullets fly ~45 degrees away from where the weapon is visually pointing
+
+Attached game log:
+- `game_log_20260122_133325.txt`
+
+### Phase 20: Root Cause Analysis and Fix (2026-01-22)
+
+## Root Cause Analysis (Phase 19-20)
+
+### Issue 14: Enemies Miss by ~45 Degrees - Aim Line Doesn't Match Fire Line
+
+**Root Cause:** The `_get_weapon_forward_direction()` and `_get_bullet_spawn_position()` functions used `_weapon_sprite.global_transform.x.normalized()` to get the weapon's forward direction. However, this approach fails when the enemy model has **negative Y scale** (for aiming left).
+
+When the enemy aims left (angle > π/2 or < -π/2), the code applies vertical flip by setting:
+```gdscript
+_enemy_model.scale = Vector2(enemy_model_scale, -enemy_model_scale)  # Y is negative
+```
+
+This negative Y scale creates a **reflected coordinate system**. In a reflected coordinate system:
+- The visual appearance is correct (sprite looks right)
+- But `global_transform.x` is **mirrored**, returning the opposite of the expected direction
+- This causes bullets to fly ~45-90 degrees off from where the weapon visually points
+
+**Technical Explanation:**
+
+A 2D transform with negative Y scale creates a "mirrored" or "reflected" coordinate system. The `global_transform` property includes scale information, so:
+
+1. When Y scale is positive (aiming right):
+   - `global_transform.x` = correct weapon forward direction ✓
+
+2. When Y scale is negative (aiming left):
+   - The transform basis vectors are reflected
+   - `global_transform.x` = mirrored direction ✗
+   - Bullets fly in the wrong direction
+
+**Evidence:** The ~45 degree offset is the angle between the intended direction (toward player) and the mirrored direction. The exact offset depends on the enemy's rotation angle.
+
+**Fix Applied:**
+
+Changed both functions to calculate direction from `_enemy_model.rotation` using `Vector2.from_angle()` instead of using `global_transform.x`:
+
+1. Updated `_get_weapon_forward_direction()`:
+```gdscript
+# Before (broken with Y flip):
+return _weapon_sprite.global_transform.x.normalized()
+
+# After (works correctly with Y flip):
+return Vector2.from_angle(_enemy_model.rotation)
+```
+
+2. Updated `_get_bullet_spawn_position()`:
+```gdscript
+# Before (broken with Y flip):
+var weapon_global_forward := _weapon_sprite.global_transform.x.normalized()
+
+# After (works correctly with Y flip):
+var weapon_forward := Vector2.from_angle(_enemy_model.rotation)
+```
+
+**Why This Fix Works:**
+- `_enemy_model.rotation` is the angle set by `_update_enemy_model_rotation()` to face the player/target
+- `Vector2.from_angle(rotation)` creates a unit vector pointing in that direction
+- This approach is **independent of scale**, so it works correctly regardless of Y flip state
+- The player uses the same approach: calculating direction from angle to target, not from transform
+
+**Comparison with Player Code:**
+The player's `_shoot()` function calculates direction directly:
+```gdscript
+var shoot_direction := (mouse_pos - global_position).normalized()
+```
+It does NOT use `global_transform.x`, which explains why the player doesn't have this issue.
+
+## Updated Summary of All Issues and Fixes
+
+| Issue | Root Cause | Fix |
+|-------|-----------|-----|
+| 1. Enemy smaller than player | Missing 1.3x scale multiplier | Added `enemy_model_scale` export and scale in `_ready()` |
+| 2. No walking animation | Old script references + missing animation code | Updated references, added `_update_walk_animation()` |
+| 3. Weapon at 90° angle | Competing rotation systems | Removed `_update_weapon_sprite_rotation()` call |
+| 4. Bullets from center | Spawning from enemy position | Added `_get_bullet_spawn_position()` using weapon mount |
+| 5. Walking backwards | Enemy sprites face opposite direction (PI offset) | Added PI to rotation angle |
+| 6. M16 too large | Using 64px sprite vs player's integrated smaller rifle | Changed to `m16_topdown_small.png` (32px) |
+| 7. Weapon not visible | Smaller sprite obscured by body parts | Reverted to original larger sprite `m16_rifle_topdown.png` |
+| 8. Last Chance not freezing bullets | Branch missing pellet detection fix from main | Merged main branch with latest fixes |
+| 9. Bullets not from weapon muzzle | Direction mismatch and execution order issue | Use weapon's actual rotation for muzzle direction; moved rotation update before shooting |
+| 10. Bullets STILL not from muzzle | Wrong local forward direction (used -X instead of +X) and Y-flip not handled | Use `global_transform.x` for correct world-space forward direction |
+| 11. Player self-damage when shooting upward | C# Bullet properties missing [Export] attribute | Added [Export] to Direction, ShooterId, ShooterPosition in Bullet.cs |
+| 12. Enemy bullets not flying in barrel direction | Bullet direction calculated to player, not weapon forward | Added `_get_weapon_forward_direction()` and updated all shooting functions |
+| 13. Player STILL self-damaging | `Node.Set()` unreliably maps snake_case to PascalCase C# properties | Added explicit setter methods and use `Call()` instead of `Set()` |
+| 14. Enemies miss by ~45 degrees | `global_transform.x` is mirrored when Y scale is negative (aiming left) | Use `Vector2.from_angle(_enemy_model.rotation)` instead of `global_transform.x` |
+
+## Additional Lessons Learned (Phase 19-20)
+
+32. **Negative Scale Affects Transform Basis Vectors:** When using negative scale for sprite flipping, the `global_transform.x` and `global_transform.y` basis vectors are reflected/mirrored. This breaks direction calculations that rely on these vectors.
+
+33. **Use Angle-Based Direction Calculation for Flipped Sprites:** When sprites can be flipped via negative scale, calculate directions using `Vector2.from_angle(rotation)` rather than `global_transform.x`. The rotation property is not affected by scale.
+
+34. **Test All Aim Directions:** Bugs related to coordinate transformations often only manifest in certain directions. Test with enemies facing all directions: up, down, left (with Y flip), right (without Y flip).
+
+35. **Compare Working Code Patterns:** When fixing a bug, compare with similar code that works correctly (e.g., player shooting). The player calculated direction directly from angle, not from transform - this pattern should have been used for enemies too.
+
+36. **Transform Properties Include Scale:** `global_transform.x.normalized()` does NOT just give rotation - it includes scale effects. For direction calculations, either ensure scale is always positive, or use rotation-based calculations that ignore scale.
+
+## Related Files
+
+- [logs/game_log_20260122_125115.txt](./logs/game_log_20260122_125115.txt) - Game log from phase 17 testing showing shooter_id=0 pattern
+- [game_log_20260122_133325.txt](./game_log_20260122_133325.txt) - Game log from phase 19 testing showing 45-degree aiming offset
diff --git a/docs/case-studies/issue-217/feedback/game_log_20260122_131801.txt b/docs/case-studies/issue-217/feedback/game_log_20260122_131801.txt
new file mode 100644
index 00000000..cfc1406c
--- /dev/null
+++ b/docs/case-studies/issue-217/feedback/game_log_20260122_131801.txt
@@ -0,0 +1,2676 @@
+[13:18:01] [INFO] ============================================================
+[13:18:01] [INFO] GAME LOG STARTED
+[13:18:01] [INFO] ============================================================
+[13:18:01] [INFO] Timestamp: 2026-01-22T13:18:01
+[13:18:01] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_131801.txt
+[13:18:01] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[13:18:01] [INFO] OS: Windows
+[13:18:01] [INFO] Debug build: false
+[13:18:01] [INFO] Engine version: 4.3-stable (official)
+[13:18:01] [INFO] Project: Godot Top-Down Template
+[13:18:01] [INFO] ------------------------------------------------------------
+[13:18:01] [INFO] [GameManager] GameManager ready
+[13:18:01] [INFO] [ScoreManager] ScoreManager ready
+[13:18:01] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[13:18:01] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[13:18:01] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[13:18:01] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[13:18:01] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[13:18:01] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[13:18:01] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[13:18:01] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[13:18:01] [INFO] [LastChance] Resetting all effects (scene change detected)
+[13:18:01] [INFO] [LastChance] Last chance shader loaded successfully
+[13:18:01] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[13:18:01] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[13:18:01] [INFO] [LastChance]   Sepia intensity: 0.70
+[13:18:01] [INFO] [LastChance]   Brightness: 0.60
+[13:18:01] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[13:18:01] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[13:18:01] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[13:18:01] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[13:18:01] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[13:18:01] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[13:18:01] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[13:18:01] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[13:18:01] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[13:18:01] [INFO] [ScoreManager] Level started with 10 enemies
+[13:18:01] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[13:18:01] [ENEMY] [Enemy1] Registered as sound listener
+[13:18:01] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[13:18:01] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[13:18:01] [ENEMY] [Enemy2] Registered as sound listener
+[13:18:01] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[13:18:01] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[13:18:01] [ENEMY] [Enemy3] Registered as sound listener
+[13:18:01] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[13:18:01] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[13:18:01] [ENEMY] [Enemy4] Registered as sound listener
+[13:18:01] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[13:18:01] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[13:18:01] [ENEMY] [Enemy5] Registered as sound listener
+[13:18:01] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[13:18:01] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[13:18:01] [ENEMY] [Enemy6] Registered as sound listener
+[13:18:01] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[13:18:01] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[13:18:01] [ENEMY] [Enemy7] Registered as sound listener
+[13:18:01] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 4, behavior: PATROL, player_found: yes
+[13:18:01] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[13:18:01] [ENEMY] [Enemy8] Registered as sound listener
+[13:18:01] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[13:18:01] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[13:18:01] [ENEMY] [Enemy9] Registered as sound listener
+[13:18:01] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[13:18:01] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[13:18:01] [ENEMY] [Enemy10] Registered as sound listener
+[13:18:01] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[13:18:01] [INFO] [Player] Detecting weapon pose (frame 3)...
+[13:18:01] [INFO] [Player] Detected weapon: Rifle (default pose)
+[13:18:01] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[13:18:01] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[13:18:01] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[13:18:01] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[13:18:01] [INFO] [LastChance] Found player: Player
+[13:18:01] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[13:18:01] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[13:18:01] [INFO] [LastChance] Connected to player Died signal (C#)
+[13:18:04] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[13:18:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(411.7827, 781.3511), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[13:18:05] [ENEMY] [Enemy1] Heard gunshot at (411.7827, 781.3511), source_type=0, intensity=0.01, distance=446
+[13:18:05] [ENEMY] [Enemy2] Heard gunshot at (411.7827, 781.3511), source_type=0, intensity=0.05, distance=232
+[13:18:05] [ENEMY] [Enemy4] Heard gunshot at (411.7827, 781.3511), source_type=0, intensity=0.02, distance=406
+[13:18:05] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[13:18:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(380.1294, 772.9138), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[13:18:05] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[13:18:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(411.7827, 781.35114), shooter_id=43721426610, bullet_pos=(935.75934, 814.11694)
+[13:18:05] [INFO] [Bullet] Using shooter_position, distance=525,00006
+[13:18:05] [INFO] [Bullet] Distance to wall: 525,00006 (35,74822% of viewport)
+[13:18:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:05] [INFO] [Bullet] Starting wall penetration at (935.75934, 814.11694)
+[13:18:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(354.9255, 777.7711), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[13:18:05] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[13:18:05] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46,425526
+[13:18:05] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[13:18:05] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:05] [INFO] [Bullet] Exiting penetration at (982.335, 817.0295) after traveling 41,666668 pixels through wall
+[13:18:05] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[13:18:05] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[13:18:05] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[13:18:05] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[13:18:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(661.3207, 760.1437), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:05] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[13:18:05] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[13:18:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(612.382, 807.4258), shooter_id=40902854154, bullet_pos=(525.339, 908.4272)
+[13:18:05] [INFO] [Bullet] Using shooter_position, distance=133.333312988281
+[13:18:05] [INFO] [Bullet] Distance to wall: 133.333312988281 (9.07891045971538% of viewport)
+[13:18:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:05] [INFO] [Bullet] Starting wall penetration at (525.339, 908.4272)
+[13:18:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.358, 765.9272), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:05] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:05] [INFO] [Bullet] Exiting penetration at (500.3141, 937.4651) after traveling 33.3333358764648 pixels through wall
+[13:18:05] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(608.3446, 817.8254), shooter_id=40902854154, bullet_pos=(519.9564, 917.6519)
+[13:18:05] [INFO] [Bullet] Using shooter_position, distance=133.333358764648
+[13:18:05] [INFO] [Bullet] Distance to wall: 133.333358764648 (9.0789135767124% of viewport)
+[13:18:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(643.3953, 771.7108), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:05] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[13:18:05] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[13:18:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(608.3446, 817.8254), shooter_id=40902854154, bullet_pos=(597.3509, 1007.167)
+[13:18:05] [INFO] [Bullet] Using shooter_position, distance=189.660034179688
+[13:18:05] [INFO] [Bullet] Distance to wall: 189.660034179688 (12.9143004813454% of viewport)
+[13:18:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(604.6567, 827.6566), shooter_id=40902854154, bullet_pos=(514.0701, 925.4922)
+[13:18:05] [INFO] [Bullet] Using shooter_position, distance=133.333297729492
+[13:18:05] [INFO] [Bullet] Distance to wall: 133.333297729492 (9.07890942071638% of viewport)
+[13:18:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(634.4326, 777.4944), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(579.8756, 818.1656), shooter_id=40902854154, bullet_pos=(516.8947, 840.0252)
+[13:18:05] [INFO] [Bullet] Using shooter_position, distance=66.6666641235352
+[13:18:05] [INFO] [Bullet] Distance to wall: 66.6666641235352 (4.53945574935719% of viewport)
+[13:18:05] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:05] [INFO] [Bullet] Starting wall penetration at (516.8947, 840.0252)
+[13:18:05] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.4499893188477
+[13:18:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(604.6567, 827.6566), shooter_id=40902854154, bullet_pos=(594.2408, 1012.529)
+[13:18:05] [INFO] [Bullet] Using shooter_position, distance=185.165863037109
+[13:18:05] [INFO] [Bullet] Distance to wall: 185.165863037109 (12.6082841041953% of viewport)
+[13:18:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:05] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:05] [INFO] [Bullet] Exiting penetration at (480.6806, 852.5945) after traveling 33.3333358764648 pixels through wall
+[13:18:05] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(608.3446, 817.8254), shooter_id=40902854154, bullet_pos=(723.884, 888.3369)
+[13:18:05] [INFO] [Bullet] Using shooter_position, distance=135.355850219727
+[13:18:05] [INFO] [Bullet] Distance to wall: 135.355850219727 (9.21662873892252% of viewport)
+[13:18:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:05] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[13:18:05] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[13:18:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(604.6567, 827.6566), shooter_id=40902854154, bullet_pos=(683.2058, 892.3818)
+[13:18:05] [INFO] [Bullet] Using shooter_position, distance=101.780700683594
+[13:18:05] [INFO] [Bullet] Distance to wall: 101.780700683594 (6.93043506775127% of viewport)
+[13:18:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:05] [INFO] [Bullet] Starting wall penetration at (683.2058, 892.3818)
+[13:18:05] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:05] [INFO] [Bullet] Exiting penetration at (700.5128, 869.0086) after traveling 24.0833339691162 pixels through wall
+[13:18:05] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[13:18:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(608.3446, 817.8254), shooter_id=40902854154, bullet_pos=(822.165, 999.3887)
+[13:18:05] [INFO] [Bullet] Using shooter_position, distance=280.507385253906
+[13:18:05] [INFO] [Bullet] Distance to wall: 280.507385253906 (19.1002636695372% of viewport)
+[13:18:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(608.3446, 817.8254), shooter_id=40902854154, bullet_pos=(916.8094, 915.0023)
+[13:18:06] [INFO] [Bullet] Using shooter_position, distance=323.409820556641
+[13:18:06] [INFO] [Bullet] Distance to wall: 323.409820556641 (22.0215693799225% of viewport)
+[13:18:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:06] [INFO] [Bullet] Starting wall penetration at (916.8094, 915.0023)
+[13:18:06] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:06] [INFO] [Bullet] Exiting penetration at (933.5289, 900.095) after traveling 17.4002094268799 pixels through wall
+[13:18:06] [INFO] [Bullet] Damage multiplier after penetration: 0.05625
+[13:18:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(611.1299, 792.5316), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(544.2534, 805.1066), shooter_id=40902854154, bullet_pos=(512.4362, 815.0453)
+[13:18:06] [INFO] [Bullet] Using shooter_position, distance=33.3333320617676
+[13:18:06] [INFO] [Bullet] Distance to wall: 33.3333320617676 (2.2697278746786% of viewport)
+[13:18:06] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:06] [INFO] [Bullet] Starting wall penetration at (512.4362, 815.0453)
+[13:18:06] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.3045768737793
+[13:18:06] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:06] [INFO] [Bullet] Exiting penetration at (475.8464, 826.4747) after traveling 33.3333358764648 pixels through wall
+[13:18:06] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(611.1299, 792.5316), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:06] [INFO] [LastChance] Threat detected: Bullet
+[13:18:06] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:18:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:18:06] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[13:18:06] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[13:18:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[13:18:07] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[13:18:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.8893, 763.1873), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[13:18:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[13:18:07] [ENEMY] [Enemy3] Hit taken, health: 1/4
+[13:18:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(535.7184, 745.3925), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[13:18:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[13:18:07] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[13:18:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(568.7551, 740.1696), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[13:18:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[13:18:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(535.71844, 745.3925), shooter_id=43721426610, bullet_pos=(788.51074, 999.35925)
+[13:18:07] [INFO] [Bullet] Using shooter_position, distance=358,3337
+[13:18:07] [INFO] [Bullet] Distance to wall: 358,3337 (24,399603% of viewport)
+[13:18:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(602.2407, 736.0306), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[13:18:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[13:18:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(568.75507, 740.16956), shooter_id=43721426610, bullet_pos=(692.2863, 1004.3844)
+[13:18:07] [INFO] [Bullet] Using shooter_position, distance=291,6667
+[13:18:07] [INFO] [Bullet] Distance to wall: 291,6667 (19,86012% of viewport)
+[13:18:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:07] [INFO] [Bullet] Starting wall penetration at (692.2863, 1004.3844)
+[13:18:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(535.71844, 745.3925), shooter_id=43721426610, bullet_pos=(925.0449, 889.8905)
+[13:18:07] [INFO] [Bullet] Using shooter_position, distance=415,27676
+[13:18:07] [INFO] [Bullet] Distance to wall: 415,27676 (28,276958% of viewport)
+[13:18:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:07] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16,679762
+[13:18:07] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:07] [INFO] [Bullet] Exiting penetration at (708.52185, 1039.1099) after traveling 33,333332 pixels through wall
+[13:18:07] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[13:18:07] [ENEMY] [Enemy3] Hit taken, health: 0/4
+[13:18:07] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[13:18:07] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[13:18:07] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[13:18:07] [INFO] [LastChance] Threat detected: Bullet
+[13:18:07] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:18:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:18:07] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:18:07] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[13:18:08] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[13:18:08] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[13:18:08] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:18:08] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[13:18:08] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[13:18:08] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[13:18:09] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[13:18:09] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[13:18:09] [ENEMY] [Enemy10] FLANKING started: target=(751.105, 582.3944), side=left, pos=(1083.909, 1464.23)
+[13:18:09] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[13:18:09] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[13:18:09] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[13:18:09] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[13:18:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
+[13:18:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[13:18:09] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[13:18:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(372.2825, 487.8523), shooter_id=40617641465, bullet_pos=(325.3227, 440.5319)
+[13:18:09] [INFO] [Bullet] Using shooter_position, distance=66.6666641235352
+[13:18:09] [INFO] [Bullet] Distance to wall: 66.6666641235352 (4.53945574935719% of viewport)
+[13:18:09] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:09] [INFO] [Bullet] Starting wall penetration at (325.3227, 440.5319)
+[13:18:09] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17.8602523803711
+[13:18:09] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:09] [INFO] [Bullet] Exiting penetration at (298.3208, 413.3227) after traveling 33.3333320617676 pixels through wall
+[13:18:09] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:09] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[13:18:09] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[13:18:09] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[13:18:09] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[13:18:09] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[13:18:09] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[13:18:10] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[13:18:10] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[13:18:10] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[13:18:10] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[13:18:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.7175, 521.5078), source=ENEMY (Enemy2), range=1469, listeners=9
+[13:18:10] [ENEMY] [Enemy1] Heard gunshot at (456.7175, 521.5078), source_type=1, intensity=0.39, distance=80
+[13:18:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[13:18:10] [ENEMY] [Enemy1] Hit taken, health: 2/3
+[13:18:10] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[13:18:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(426.9689, 437.3704), source=ENEMY (Enemy1), range=1469, listeners=9
+[13:18:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[13:18:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(472.5361, 487.9099), shooter_id=40332428776, bullet_pos=(500.3741, 506.2444)
+[13:18:10] [INFO] [Bullet] Using shooter_position, distance=33.3333511352539
+[13:18:10] [INFO] [Bullet] Distance to wall: 33.3333511352539 (2.26972917342735% of viewport)
+[13:18:10] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:10] [INFO] [Bullet] Starting wall penetration at (500.3741, 506.2444)
+[13:18:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.7175, 521.5078), source=ENEMY (Enemy2), range=1469, listeners=9
+[13:18:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[13:18:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10.0435180664063
+[13:18:10] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:10] [INFO] [Bullet] Exiting penetration at (532.3878, 527.3292) after traveling 33.3333320617676 pixels through wall
+[13:18:10] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(418.1315, 431.3972), source=ENEMY (Enemy1), range=1469, listeners=9
+[13:18:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[13:18:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(350.1987, 427.4302), shooter_id=40332428776, bullet_pos=(317.062, 423.8148)
+[13:18:10] [INFO] [Bullet] Using shooter_position, distance=33.3333396911621
+[13:18:10] [INFO] [Bullet] Distance to wall: 33.3333396911621 (2.2697283941781% of viewport)
+[13:18:10] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:10] [INFO] [Bullet] Starting wall penetration at (317.062, 423.8148)
+[13:18:10] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:10] [INFO] [Bullet] Exiting penetration at (278.9549, 419.657) after traveling 33.3333396911621 pixels through wall
+[13:18:10] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.7175, 521.5078), source=ENEMY (Enemy2), range=1469, listeners=9
+[13:18:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[13:18:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(486.0652, 460.113), shooter_id=40617641465, bullet_pos=(503.7935, 431.885)
+[13:18:10] [INFO] [Bullet] Using shooter_position, distance=33.3333282470703
+[13:18:10] [INFO] [Bullet] Distance to wall: 33.3333282470703 (2.26972761492885% of viewport)
+[13:18:10] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:10] [INFO] [Bullet] Starting wall penetration at (503.7935, 431.885)
+[13:18:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 0.34026244282722
+[13:18:10] [INFO] [Bullet] Max penetration distance exceeded: 66.6666717529297 >= 48
+[13:18:10] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:10] [INFO] [Bullet] Exiting penetration at (541.9092, 371.1949) after traveling 66.6666717529297 pixels through wall
+[13:18:10] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(459.2714, 453.5071), shooter_id=40617641465, bullet_pos=(520.0016, 58.14425)
+[13:18:10] [INFO] [Bullet] Using shooter_position, distance=399.999969482422
+[13:18:10] [INFO] [Bullet] Distance to wall: 399.999969482422 (27.2367334571442% of viewport)
+[13:18:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:10] [INFO] [Bullet] Starting wall penetration at (520.0016, 58.14425)
+[13:18:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11.882453918457
+[13:18:10] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:10] [INFO] [Bullet] Exiting penetration at (525.8216, 20.2553) after traveling 33.3333320617676 pixels through wall
+[13:18:10] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.7175, 521.5078), source=ENEMY (Enemy2), range=1469, listeners=9
+[13:18:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[13:18:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(506.5121, 475.1277), shooter_id=40617641465, bullet_pos=(506.5121, 475.1277)
+[13:18:10] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:10] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:10] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:10] [INFO] [Bullet] Starting wall penetration at (506.5121, 475.1277)
+[13:18:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24.9439601898193
+[13:18:10] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:10] [INFO] [Bullet] Exiting penetration at (544.0812, 447.4449) after traveling 41.6666679382324 pixels through wall
+[13:18:10] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:10] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[13:18:10] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[13:18:10] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
+[13:18:10] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
+[13:18:11] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
+[13:18:11] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[13:18:11] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:18:11] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[13:18:11] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[13:18:11] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:18:11] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[13:18:11] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[13:18:11] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:18:11] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[13:18:11] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[13:18:11] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[13:18:11] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:18:11] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[13:18:12] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[13:18:12] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[13:18:12] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[13:18:12] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[13:18:12] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[13:18:12] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[13:18:12] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:18:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(307.4604, 395.2144), source=ENEMY (Enemy1), range=1469, listeners=9
+[13:18:12] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[13:18:12] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[13:18:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(302.8254, 391.3914), source=ENEMY (Enemy2), range=1469, listeners=9
+[13:18:12] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[13:18:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(372.6718, 375.7706), shooter_id=40332428776, bullet_pos=(502.5841, 271.3647)
+[13:18:12] [INFO] [Bullet] Using shooter_position, distance=166.66667175293
+[13:18:12] [INFO] [Bullet] Distance to wall: 166.66667175293 (11.3486401526422% of viewport)
+[13:18:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(302.8254, 391.3914), source=ENEMY (Enemy2), range=1469, listeners=9
+[13:18:12] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[13:18:12] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[13:18:12] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[13:18:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(369.2116, 376.4426), shooter_id=40617641465, bullet_pos=(526.8137, 322.2267)
+[13:18:12] [INFO] [Bullet] Using shooter_position, distance=166.666641235352
+[13:18:12] [INFO] [Bullet] Distance to wall: 166.666641235352 (11.3486380746442% of viewport)
+[13:18:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:12] [INFO] [Bullet] Starting wall penetration at (526.8137, 322.2267)
+[13:18:12] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[13:18:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49.6422348022461
+[13:18:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:12] [INFO] [Bullet] Exiting penetration at (570.9423, 307.0463) after traveling 41.6666679382324 pixels through wall
+[13:18:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:12] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[13:18:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(265.2375, 395.6849), source=ENEMY (Enemy1), range=1469, listeners=9
+[13:18:12] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[13:18:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(327.6382, 422.8282), shooter_id=40332428776, bullet_pos=(327.6382, 422.8282)
+[13:18:12] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:12] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:12] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:12] [INFO] [Bullet] Starting wall penetration at (327.6382, 422.8282)
+[13:18:12] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[13:18:12] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:12] [INFO] [Bullet] Exiting penetration at (374.2598, 424.8784) after traveling 41.6666717529297 pixels through wall
+[13:18:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(372.6718, 375.7706), shooter_id=40332428776, bullet_pos=(175.4001, 50.8049)
+[13:18:12] [INFO] [Bullet] Using shooter_position, distance=380.156341552734
+[13:18:12] [INFO] [Bullet] Distance to wall: 380.156341552734 (25.8855443421975% of viewport)
+[13:18:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(370.1208, 401.4872), shooter_id=40617641465, bullet_pos=(1112.344, 293.7607)
+[13:18:12] [INFO] [Bullet] Using shooter_position, distance=750
+[13:18:12] [INFO] [Bullet] Distance to wall: 750 (51.0688791283916% of viewport)
+[13:18:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(372.6718, 375.7706), shooter_id=40332428776, bullet_pos=(62.90587, 106.2521)
+[13:18:12] [INFO] [Bullet] Using shooter_position, distance=410.603393554688
+[13:18:12] [INFO] [Bullet] Distance to wall: 410.603393554688 (27.9587401002023% of viewport)
+[13:18:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:12] [INFO] [Bullet] Starting wall penetration at (62.90587, 106.2521)
+[13:18:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 0.64805287122726
+[13:18:12] [INFO] [Bullet] Max penetration distance exceeded: 60.2083435058594 >= 48
+[13:18:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:12] [INFO] [Bullet] Exiting penetration at (4.416351, 135.081) after traveling 60.2083435058594 pixels through wall
+[13:18:12] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[13:18:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(370.1208, 401.4872), shooter_id=40617641465, bullet_pos=(1364.736, 310.035)
+[13:18:12] [INFO] [Bullet] Using shooter_position, distance=998.81103515625
+[13:18:12] [INFO] [Bullet] Distance to wall: 998.81103515625 (68.0108800353309% of viewport)
+[13:18:12] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[13:18:12] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:18:12] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:18:13] [ENEMY] [Enemy7] FLANKING started: target=(644.0502, 299.8344), side=left, pos=(1428.896, 824.4184)
+[13:18:13] [ENEMY] [Enemy7] State: PURSUING -> FLANKING
+[13:18:13] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[13:18:13] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[13:18:14] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[13:18:14] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[13:18:14] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[13:18:14] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[13:18:14] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[13:18:14] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[13:18:14] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:18:14] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[13:18:14] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
+[13:18:15] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[13:18:15] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:18:15] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
+[13:18:15] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
+[13:18:15] [ENEMY] [Enemy7] FLANKING stuck (2.0s no progress), target=(462.1247, 471.3604), pos=(1412.066, 824.0005), fail_count=1
+[13:18:15] [ENEMY] [Enemy7] State: FLANKING -> PURSUING
+[13:18:15] [ENEMY] [Enemy7] State: PURSUING -> COMBAT
+[13:18:15] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[13:18:16] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[13:18:17] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[13:18:17] [ENEMY] [Enemy7] State: PURSUING -> COMBAT
+[13:18:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:17] [ENEMY] [Enemy10] Hit taken, health: 2/3
+[13:18:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:17] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
+[13:18:17] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
+[13:18:17] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[13:18:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(479.244, 811.1758), shooter_id=41188066843, bullet_pos=(287.4932, 1406.034)
+[13:18:17] [INFO] [Bullet] Using shooter_position, distance=624.999877929688
+[13:18:17] [INFO] [Bullet] Distance to wall: 624.999877929688 (42.5573909616676% of viewport)
+[13:18:17] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[13:18:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(476.8153, 810.0131), shooter_id=41188066843, bullet_pos=(261.6806, 1396.82)
+[13:18:17] [INFO] [Bullet] Using shooter_position, distance=625.000183105469
+[13:18:17] [INFO] [Bullet] Distance to wall: 625.000183105469 (42.5574117416477% of viewport)
+[13:18:17] [INFO] [Bullet] Distance-based penetration chance: 97.0163529680777%
+[13:18:17] [INFO] [Bullet] Starting wall penetration at (261.6806, 1396.82)
+[13:18:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30.4986343383789
+[13:18:17] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:17] [INFO] [Bullet] Exiting penetration at (245.6172, 1440.635) after traveling 41.6666679382324 pixels through wall
+[13:18:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(476.8153, 810.0131), shooter_id=41188066843, bullet_pos=(261.6806, 1396.82)
+[13:18:17] [INFO] [Bullet] Using shooter_position, distance=625.000183105469
+[13:18:17] [INFO] [Bullet] Distance to wall: 625.000183105469 (42.5574117416477% of viewport)
+[13:18:17] [INFO] [Bullet] Distance-based penetration chance: 97.0163529680777%
+[13:18:17] [INFO] [Bullet] Starting wall penetration at (261.6806, 1396.82)
+[13:18:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30.4986343383789
+[13:18:17] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:17] [INFO] [Bullet] Exiting penetration at (245.6172, 1440.635) after traveling 41.6666679382324 pixels through wall
+[13:18:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(476.8153, 810.0131), shooter_id=41188066843, bullet_pos=(261.6806, 1396.82)
+[13:18:18] [INFO] [Bullet] Using shooter_position, distance=625.000183105469
+[13:18:18] [INFO] [Bullet] Distance to wall: 625.000183105469 (42.5574117416477% of viewport)
+[13:18:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(476.8153, 810.0131), shooter_id=41188066843, bullet_pos=(261.6806, 1396.82)
+[13:18:18] [INFO] [Bullet] Using shooter_position, distance=625.000183105469
+[13:18:18] [INFO] [Bullet] Distance to wall: 625.000183105469 (42.5574117416477% of viewport)
+[13:18:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(476.8153, 810.0131), shooter_id=41188066843, bullet_pos=(261.6806, 1396.82)
+[13:18:18] [INFO] [Bullet] Using shooter_position, distance=625.000183105469
+[13:18:18] [INFO] [Bullet] Distance to wall: 625.000183105469 (42.5574117416477% of viewport)
+[13:18:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(476.8153, 810.0131), shooter_id=41188066843, bullet_pos=(261.6806, 1396.82)
+[13:18:18] [INFO] [Bullet] Using shooter_position, distance=625.000183105469
+[13:18:18] [INFO] [Bullet] Distance to wall: 625.000183105469 (42.5574117416477% of viewport)
+[13:18:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(476.8153, 810.0131), shooter_id=41188066843, bullet_pos=(261.6806, 1396.82)
+[13:18:18] [INFO] [Bullet] Using shooter_position, distance=625.000183105469
+[13:18:18] [INFO] [Bullet] Distance to wall: 625.000183105469 (42.5574117416477% of viewport)
+[13:18:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(476.8153, 810.0131), shooter_id=41188066843, bullet_pos=(261.6806, 1396.82)
+[13:18:18] [INFO] [Bullet] Using shooter_position, distance=625.000183105469
+[13:18:18] [INFO] [Bullet] Distance to wall: 625.000183105469 (42.5574117416477% of viewport)
+[13:18:18] [INFO] [Bullet] Distance-based penetration chance: 97.0163529680777%
+[13:18:18] [INFO] [Bullet] Starting wall penetration at (261.6806, 1396.82)
+[13:18:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30.4986343383789
+[13:18:18] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:18] [INFO] [Bullet] Exiting penetration at (245.6172, 1440.635) after traveling 41.6666679382324 pixels through wall
+[13:18:18] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(476.8153, 810.0131), shooter_id=41188066843, bullet_pos=(261.6806, 1396.82)
+[13:18:18] [INFO] [Bullet] Using shooter_position, distance=625.000183105469
+[13:18:18] [INFO] [Bullet] Distance to wall: 625.000183105469 (42.5574117416477% of viewport)
+[13:18:18] [INFO] [Bullet] Distance-based penetration chance: 97.0163529680777%
+[13:18:18] [INFO] [Bullet] Starting wall penetration at (261.6806, 1396.82)
+[13:18:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30.4986343383789
+[13:18:18] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:18] [INFO] [Bullet] Exiting penetration at (245.6172, 1440.635) after traveling 41.6666679382324 pixels through wall
+[13:18:18] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(476.8153, 810.0131), shooter_id=41188066843, bullet_pos=(261.6806, 1396.82)
+[13:18:18] [INFO] [Bullet] Using shooter_position, distance=625.000183105469
+[13:18:18] [INFO] [Bullet] Distance to wall: 625.000183105469 (42.5574117416477% of viewport)
+[13:18:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(476.8153, 810.0131), shooter_id=41188066843, bullet_pos=(261.6806, 1396.82)
+[13:18:18] [INFO] [Bullet] Using shooter_position, distance=625.000183105469
+[13:18:18] [INFO] [Bullet] Distance to wall: 625.000183105469 (42.5574117416477% of viewport)
+[13:18:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:19] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(476.8153, 810.0131), shooter_id=41188066843, bullet_pos=(261.6806, 1396.82)
+[13:18:19] [INFO] [Bullet] Using shooter_position, distance=625.000183105469
+[13:18:19] [INFO] [Bullet] Distance to wall: 625.000183105469 (42.5574117416477% of viewport)
+[13:18:19] [INFO] [Bullet] Distance-based penetration chance: 97.0163529680777%
+[13:18:19] [INFO] [Bullet] Starting wall penetration at (261.6806, 1396.82)
+[13:18:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30.4986343383789
+[13:18:19] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:19] [INFO] [Bullet] Exiting penetration at (245.6172, 1440.635) after traveling 41.6666679382324 pixels through wall
+[13:18:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:19] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(476.8153, 810.0131), shooter_id=41188066843, bullet_pos=(261.6806, 1396.82)
+[13:18:19] [INFO] [Bullet] Using shooter_position, distance=625.000183105469
+[13:18:19] [INFO] [Bullet] Distance to wall: 625.000183105469 (42.5574117416477% of viewport)
+[13:18:19] [INFO] [Bullet] Distance-based penetration chance: 97.0163529680777%
+[13:18:19] [INFO] [Bullet] Starting wall penetration at (261.6806, 1396.82)
+[13:18:19] [ENEMY] [Enemy7] State: PURSUING -> COMBAT
+[13:18:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30.4986343383789
+[13:18:19] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:19] [INFO] [Bullet] Exiting penetration at (245.6172, 1440.635) after traveling 41.6666679382324 pixels through wall
+[13:18:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:19] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(475.301, 809.227), shooter_id=41188066843, bullet_pos=(245.5219, 1390.455)
+[13:18:19] [INFO] [Bullet] Using shooter_position, distance=624.999572753906
+[13:18:19] [INFO] [Bullet] Distance to wall: 624.999572753906 (42.5573701816875% of viewport)
+[13:18:19] [INFO] [Bullet] Distance-based penetration chance: 97.016401454698%
+[13:18:19] [INFO] [Bullet] Starting wall penetration at (245.5219, 1390.455)
+[13:18:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.4991397857666
+[13:18:19] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:19] [INFO] [Bullet] Exiting penetration at (228.3651, 1433.853) after traveling 41.6666679382324 pixels through wall
+[13:18:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:19] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(452.0949, 788.8661), shooter_id=41188066843, bullet_pos=(50.87223, 1152.766)
+[13:18:19] [INFO] [Bullet] Using shooter_position, distance=541.666748046875
+[13:18:19] [INFO] [Bullet] Distance to wall: 541.666748046875 (36.883084911833% of viewport)
+[13:18:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(466.776, 803.8153), shooter_id=41188066843, bullet_pos=(49.09781, 1524.919)
+[13:18:19] [INFO] [Bullet] Using shooter_position, distance=833.333862304688
+[13:18:19] [INFO] [Bullet] Distance to wall: 833.333862304688 (56.7432350501784% of viewport)
+[13:18:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:19] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(441.0967, 764.5086), shooter_id=41188066843, bullet_pos=(48.47007, 903.991)
+[13:18:19] [INFO] [Bullet] Using shooter_position, distance=416.666595458984
+[13:18:19] [INFO] [Bullet] Distance to wall: 416.666595458984 (28.3715946671111% of viewport)
+[13:18:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:19] [INFO] [Bullet] Starting wall penetration at (48.47007, 903.991)
+[13:18:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29.1881675720215
+[13:18:19] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:19] [INFO] [Bullet] Exiting penetration at (4.495876, 919.613) after traveling 41.6666679382324 pixels through wall
+[13:18:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(466.776, 803.8153), shooter_id=41188066843, bullet_pos=(160.7726, 1711.561)
+[13:18:19] [INFO] [Bullet] Using shooter_position, distance=957.934997558594
+[13:18:19] [INFO] [Bullet] Distance to wall: 957.934997558594 (65.2275554709012% of viewport)
+[13:18:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:19] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(452.0949, 788.8661), shooter_id=41188066843, bullet_pos=(271.3603, 1389.83)
+[13:18:19] [INFO] [Bullet] Using shooter_position, distance=627.552612304688
+[13:18:19] [INFO] [Bullet] Distance to wall: 627.552612304688 (42.7312113393259% of viewport)
+[13:18:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.3245, 726.3389), shooter_id=41188066843, bullet_pos=(362.1514, 707.4874)
+[13:18:19] [INFO] [Bullet] Using shooter_position, distance=83.3333587646484
+[13:18:19] [INFO] [Bullet] Distance to wall: 83.3333587646484 (5.67432163481963% of viewport)
+[13:18:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(439.9567, 740.23), shooter_id=41188066843, bullet_pos=(65.01585, 733.5723)
+[13:18:19] [INFO] [Bullet] Using shooter_position, distance=374.999969482422
+[13:18:19] [INFO] [Bullet] Distance to wall: 374.999969482422 (25.5344374861978% of viewport)
+[13:18:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:19] [INFO] [Bullet] Starting wall penetration at (65.01585, 733.5723)
+[13:18:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13.6456098556519
+[13:18:19] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:19] [INFO] [Bullet] Exiting penetration at (18.35654, 732.7438) after traveling 41.6666717529297 pixels through wall
+[13:18:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(466.776, 803.8153), shooter_id=41188066843, bullet_pos=(61.49789, 1868.408)
+[13:18:19] [INFO] [Bullet] Using shooter_position, distance=1139.12609863281
+[13:18:19] [INFO] [Bullet] Distance to wall: 1139.12609863281 (77.5651907241004% of viewport)
+[13:18:19] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[13:18:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:19] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(444.8126, 722.5368), shooter_id=41188066843, bullet_pos=(404.8644, 710.694)
+[13:18:19] [INFO] [Bullet] Using shooter_position, distance=41.6666526794434
+[13:18:19] [INFO] [Bullet] Distance to wall: 41.6666526794434 (2.83715899916155% of viewport)
+[13:18:19] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:19] [INFO] [Bullet] Starting wall penetration at (404.8644, 710.694)
+[13:18:19] [ENEMY] [Enemy4] State: COMBAT -> SEEKING_COVER
+[13:18:19] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:19] [INFO] [Bullet] Exiting penetration at (360.1225, 697.4299) after traveling 41.6666679382324 pixels through wall
+[13:18:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.3245, 726.3389), shooter_id=41188066843, bullet_pos=(58.59272, 820.0315)
+[13:18:19] [INFO] [Bullet] Using shooter_position, distance=395.975830078125
+[13:18:19] [INFO] [Bullet] Distance to wall: 395.975830078125 (26.9627224053657% of viewport)
+[13:18:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:19] [INFO] [Bullet] Starting wall penetration at (58.59272, 820.0315)
+[13:18:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.0551223754883
+[13:18:19] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:19] [INFO] [Bullet] Exiting penetration at (20.69672, 834.0814) after traveling 35.4166679382324 pixels through wall
+[13:18:19] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[13:18:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:19] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(466.776, 803.8153), shooter_id=41188066843, bullet_pos=(224.9018, 2071.781)
+[13:18:19] [INFO] [Bullet] Using shooter_position, distance=1290.82922363281
+[13:18:19] [INFO] [Bullet] Distance to wall: 1290.82922363281 (87.8949354627995% of viewport)
+[13:18:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(444.8126, 722.5368), shooter_id=41188066843, bullet_pos=(404.8644, 710.694)
+[13:18:19] [INFO] [Bullet] Using shooter_position, distance=41.6666526794434
+[13:18:19] [INFO] [Bullet] Distance to wall: 41.6666526794434 (2.83715899916155% of viewport)
+[13:18:19] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:19] [INFO] [Bullet] Starting wall penetration at (404.8644, 710.694)
+[13:18:19] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:19] [INFO] [Bullet] Exiting penetration at (360.1225, 697.4299) after traveling 41.6666679382324 pixels through wall
+[13:18:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(452.0949, 788.8661), shooter_id=41188066843, bullet_pos=(717.2693, 1023.674)
+[13:18:19] [INFO] [Bullet] Using shooter_position, distance=354.192077636719
+[13:18:19] [INFO] [Bullet] Distance to wall: 354.192077636719 (24.1175898680846% of viewport)
+[13:18:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:19] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(444.8126, 722.5368), shooter_id=41188066843, bullet_pos=(404.8644, 710.694)
+[13:18:20] [INFO] [Bullet] Using shooter_position, distance=41.6666526794434
+[13:18:20] [INFO] [Bullet] Distance to wall: 41.6666526794434 (2.83715899916155% of viewport)
+[13:18:20] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:20] [INFO] [Bullet] Starting wall penetration at (404.8644, 710.694)
+[13:18:20] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:20] [INFO] [Bullet] Exiting penetration at (360.1225, 697.4299) after traveling 41.6666679382324 pixels through wall
+[13:18:20] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(466.776, 803.8153), shooter_id=41188066843, bullet_pos=(349.8839, 1887.697)
+[13:18:20] [INFO] [Bullet] Using shooter_position, distance=1090.16650390625
+[13:18:20] [INFO] [Bullet] Distance to wall: 1090.16650390625 (74.2314418904126% of viewport)
+[13:18:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:20] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(444.8126, 722.5368), shooter_id=41188066843, bullet_pos=(404.8644, 710.694)
+[13:18:20] [INFO] [Bullet] Using shooter_position, distance=41.6666526794434
+[13:18:20] [INFO] [Bullet] Distance to wall: 41.6666526794434 (2.83715899916155% of viewport)
+[13:18:20] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:20] [INFO] [Bullet] Starting wall penetration at (404.8644, 710.694)
+[13:18:20] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:20] [INFO] [Bullet] Exiting penetration at (360.1225, 697.4299) after traveling 41.6666679382324 pixels through wall
+[13:18:20] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:20] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(466.776, 803.8153), shooter_id=41188066843, bullet_pos=(439.0122, 2076.037)
+[13:18:20] [INFO] [Bullet] Using shooter_position, distance=1272.52453613281
+[13:18:20] [INFO] [Bullet] Distance to wall: 1272.52453613281 (86.6485356315722% of viewport)
+[13:18:20] [INFO] [Bullet] Distance-based penetration chance: 45.5767084298325%
+[13:18:20] [INFO] [Bullet] Penetration failed (distance roll)
+[13:18:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(444.855, 722.4376), shooter_id=41188066843, bullet_pos=(404.9257, 710.5314)
+[13:18:20] [INFO] [Bullet] Using shooter_position, distance=41.6666603088379
+[13:18:20] [INFO] [Bullet] Distance to wall: 41.6666603088379 (2.83715951866106% of viewport)
+[13:18:20] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:20] [INFO] [Bullet] Starting wall penetration at (404.9257, 710.5314)
+[13:18:20] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:20] [INFO] [Bullet] Exiting penetration at (360.2048, 697.1965) after traveling 41.6666679382324 pixels through wall
+[13:18:20] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:20] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(452.0949, 788.8661), shooter_id=41188066843, bullet_pos=(1155.21, 1385.3)
+[13:18:20] [INFO] [Bullet] Using shooter_position, distance=922.011047363281
+[13:18:20] [INFO] [Bullet] Distance to wall: 922.011047363281 (62.7814276437828% of viewport)
+[13:18:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(445.5206, 720.934), shooter_id=41188066843, bullet_pos=(405.8906, 708.0665)
+[13:18:20] [INFO] [Bullet] Using shooter_position, distance=41.6666793823242
+[13:18:20] [INFO] [Bullet] Distance to wall: 41.6666793823242 (2.83716081740981% of viewport)
+[13:18:20] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:20] [INFO] [Bullet] Starting wall penetration at (405.8906, 708.0665)
+[13:18:20] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:20] [INFO] [Bullet] Exiting penetration at (361.5049, 693.6549) after traveling 41.6666679382324 pixels through wall
+[13:18:20] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:20] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(447.6195, 716.7331), shooter_id=41188066843, bullet_pos=(408.9713, 701.163)
+[13:18:20] [INFO] [Bullet] Using shooter_position, distance=41.666675567627
+[13:18:20] [INFO] [Bullet] Distance to wall: 41.666675567627 (2.83716055766006% of viewport)
+[13:18:20] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:20] [INFO] [Bullet] Starting wall penetration at (408.9713, 701.163)
+[13:18:20] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11.4417304992676
+[13:18:20] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:20] [INFO] [Bullet] Exiting penetration at (365.6853, 683.7244) after traveling 41.6666717529297 pixels through wall
+[13:18:20] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.4076, 749.2289), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:20] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(451.3035, 710.7201), shooter_id=41188066843, bullet_pos=(451.3035, 710.7201)
+[13:18:20] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:20] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:20] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:20] [INFO] [Bullet] Starting wall penetration at (451.3035, 710.7201)
+[13:18:20] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:20] [INFO] [Bullet] Exiting penetration at (410.0547, 688.8956) after traveling 41.6666679382324 pixels through wall
+[13:18:20] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(491.8741, 750.6753), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:18:20] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(559.6404, 744.485), shooter_id=41188066843, bullet_pos=(926.714, 667.7911)
+[13:18:20] [INFO] [Bullet] Using shooter_position, distance=374.999908447266
+[13:18:20] [INFO] [Bullet] Distance to wall: 374.999908447266 (25.5344333302017% of viewport)
+[13:18:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:20] [INFO] [Bullet] Starting wall penetration at (926.714, 667.7911)
+[13:18:20] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.1801109313965
+[13:18:20] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:20] [INFO] [Bullet] Exiting penetration at (972.3942, 658.247) after traveling 41.666675567627 pixels through wall
+[13:18:20] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:21] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[13:18:21] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[13:18:21] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
+[13:18:21] [ENEMY] [Enemy7] FLANKING started: target=(729.9634, 628.9216), side=left, pos=(1412.067, 963.0874)
+[13:18:21] [ENEMY] [Enemy7] State: PURSUING -> FLANKING
+[13:18:21] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[13:18:21] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[13:18:21] [ENEMY] [Enemy10] State: SUPPRESSED -> IN_COVER
+[13:18:21] [ENEMY] [Enemy10] State: IN_COVER -> COMBAT
+[13:18:21] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[13:18:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(475.9348, 925.4785), source=ENEMY (Enemy10), range=1469, listeners=9
+[13:18:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(502.767, 862.9434), shooter_id=42899342977, bullet_pos=(502.767, 862.9434)
+[13:18:22] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:22] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:22] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:22] [INFO] [Bullet] Starting wall penetration at (502.767, 862.9434)
+[13:18:22] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[13:18:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 3.9483630657196
+[13:18:22] [INFO] [Bullet] Max penetration distance exceeded: 83.3333358764648 >= 48
+[13:18:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:22] [INFO] [Bullet] Exiting penetration at (546.6729, 786.2945) after traveling 83.3333358764648 pixels through wall
+[13:18:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(475.9348, 925.4785), source=ENEMY (Enemy10), range=1469, listeners=9
+[13:18:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:22] [ENEMY] [Enemy4] Hit taken, health: 2/3
+[13:18:22] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[13:18:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(475.9348, 925.4785), source=ENEMY (Enemy10), range=1469, listeners=9
+[13:18:22] [ENEMY] [Enemy4] Heard gunshot at (475.9348, 925.4785), source_type=1, intensity=0.33, distance=88
+[13:18:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[13:18:22] [ENEMY] [Enemy4] Hit taken, health: 1/3
+[13:18:22] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[13:18:22] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:18:24] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[13:18:24] [ENEMY] [Enemy7] FLANKING stuck (2.0s no progress), target=(340.5385, 719.8231), pos=(1412.069, 824.0046), fail_count=1
+[13:18:24] [ENEMY] [Enemy7] State: FLANKING -> PURSUING
+[13:18:24] [ENEMY] [Enemy7] State: PURSUING -> COMBAT
+[13:18:24] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:18:25] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[13:18:25] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[13:18:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(251.9398, 905.1281), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[13:18:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=1
+[13:18:25] [ENEMY] [Enemy4] Hit taken, health: 0/3
+[13:18:25] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[13:18:25] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[13:18:25] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[13:18:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(251.9398, 905.1281), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[13:18:25] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=1
+[13:18:25] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[13:18:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(251.93979, 905.12805), shooter_id=43721426610, bullet_pos=(499.83997, 832.45337)
+[13:18:25] [INFO] [Bullet] Using shooter_position, distance=258,33334
+[13:18:25] [INFO] [Bullet] Distance to wall: 258,33334 (17,590393% of viewport)
+[13:18:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(251.9398, 905.1281), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[13:18:25] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=1
+[13:18:25] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
+[13:18:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(251.93979, 905.12805), shooter_id=43721426610, bullet_pos=(499.84, 832.45337)
+[13:18:25] [INFO] [Bullet] Using shooter_position, distance=258,33337
+[13:18:25] [INFO] [Bullet] Distance to wall: 258,33337 (17,590395% of viewport)
+[13:18:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:25] [INFO] [Bullet] Starting wall penetration at (499.84, 832.45337)
+[13:18:25] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[13:18:25] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13,156533
+[13:18:25] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:25] [INFO] [Bullet] Exiting penetration at (536.6252, 821.6694) after traveling 33,333336 pixels through wall
+[13:18:25] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[13:18:25] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[13:18:25] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[13:18:25] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[13:18:25] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[13:18:25] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[13:18:25] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:18:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(251.9398, 905.1281), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[13:18:26] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=1
+[13:18:26] [ENEMY] [Enemy10] Hit taken, health: 1/3
+[13:18:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(251.9398, 905.1281), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[13:18:26] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=1
+[13:18:26] [ENEMY] [Enemy10] Hit taken, health: 0/3
+[13:18:26] [ENEMY] [Enemy10] Enemy died (ricochet: false, penetration: false)
+[13:18:26] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[13:18:26] [INFO] [SoundPropagation] Unregistered listener: Enemy10 (remaining: 7)
+[13:18:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(251.9398, 905.1281), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[13:18:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=1
+[13:18:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(251.93979, 905.12805), shooter_id=43721426610, bullet_pos=(510.229, 909.8975)
+[13:18:26] [INFO] [Bullet] Using shooter_position, distance=258,33325
+[13:18:26] [INFO] [Bullet] Distance to wall: 258,33325 (17,590387% of viewport)
+[13:18:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:26] [INFO] [Bullet] Starting wall penetration at (510.229, 909.8975)
+[13:18:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(251.9398, 905.1281), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[13:18:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=1
+[13:18:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24,559973
+[13:18:26] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:26] [INFO] [Bullet] Exiting penetration at (548.5558, 910.6052) after traveling 33,333336 pixels through wall
+[13:18:26] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[13:18:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(251.93979, 905.12805), shooter_id=43721426610, bullet_pos=(510.229, 909.8975)
+[13:18:26] [INFO] [Bullet] Using shooter_position, distance=258,33325
+[13:18:26] [INFO] [Bullet] Distance to wall: 258,33325 (17,590387% of viewport)
+[13:18:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:26] [INFO] [LastChance] Threat detected: @Area2D@389
+[13:18:26] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:18:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:18:27] [ENEMY] [Enemy7] State: PURSUING -> COMBAT
+[13:18:27] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
+[13:18:27] [ENEMY] [Enemy1] Player reloading state changed: false -> true
+[13:18:27] [ENEMY] [Enemy2] Player reloading state changed: false -> true
+[13:18:27] [ENEMY] [Enemy4] Player reloading state changed: false -> true
+[13:18:27] [ENEMY] [Enemy5] Player reloading state changed: false -> true
+[13:18:27] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[13:18:27] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[13:18:27] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[13:18:27] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[13:18:27] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[13:18:27] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(251.9398, 899.1281), source=PLAYER (Player), range=900, listeners=7
+[13:18:27] [ENEMY] [Enemy1] Heard player RELOAD at (251.9398, 899.1281), intensity=0.03, distance=268
+[13:18:27] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
+[13:18:27] [ENEMY] [Enemy2] Heard player RELOAD at (251.9398, 899.1281), intensity=0.04, distance=263
+[13:18:27] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
+[13:18:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=0
+[13:18:27] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=true (dist=268), can_see=false
+[13:18:27] [ENEMY] [Enemy1] Pursuing vulnerability sound at (251.9398, 899.1281), distance=268
+[13:18:27] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=true (dist=263), can_see=false
+[13:18:27] [ENEMY] [Enemy2] Pursuing vulnerability sound at (251.9398, 899.1281), distance=263
+[13:18:27] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1549), can_see=false
+[13:18:27] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1756), can_see=false
+[13:18:27] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1163), can_see=false
+[13:18:27] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1738), can_see=false
+[13:18:27] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1959), can_see=false
+[13:18:27] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
+[13:18:27] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
+[13:18:27] [ENEMY] [Enemy1] Player reloading state changed: true -> false
+[13:18:27] [ENEMY] [Enemy2] Player reloading state changed: true -> false
+[13:18:27] [ENEMY] [Enemy4] Player reloading state changed: true -> false
+[13:18:27] [ENEMY] [Enemy5] Player reloading state changed: true -> false
+[13:18:27] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[13:18:27] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[13:18:27] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[13:18:27] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[13:18:27] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[13:18:27] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
+[13:18:27] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[13:18:27] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[13:18:27] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[13:18:27] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[13:18:27] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[13:18:27] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[13:18:27] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[13:18:27] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:18:27] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[13:18:27] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
+[13:18:28] [ENEMY] [Enemy1] State: SUPPRESSED -> IN_COVER
+[13:18:28] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
+[13:18:28] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
+[13:18:28] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
+[13:18:29] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[13:18:29] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[13:18:29] [ENEMY] [Enemy7] State: PURSUING -> COMBAT
+[13:18:29] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[13:18:29] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[13:18:30] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[13:18:30] [INFO] [ScoreManager] Combo ended at 2. Max combo: 2
+[13:18:31] [ENEMY] [Enemy7] FLANKING started: target=(257.0643, 719.6896), side=right, pos=(1412.003, 824.0714)
+[13:18:31] [ENEMY] [Enemy7] State: PURSUING -> FLANKING
+[13:18:33] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[13:18:33] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[13:18:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(295.1175, 653.4435), source=ENEMY (Enemy1), range=1469, listeners=7
+[13:18:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(339.9602, 704.6269), shooter_id=40332428776, bullet_pos=(339.9602, 704.6269)
+[13:18:33] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:33] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:33] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:33] [INFO] [Bullet] Starting wall penetration at (339.9602, 704.6269)
+[13:18:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(294.8452, 653.4374), source=ENEMY (Enemy2), range=1469, listeners=7
+[13:18:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.6893463134766
+[13:18:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(339.4634, 704.8166), shooter_id=40617641465, bullet_pos=(339.4634, 704.8166)
+[13:18:33] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:33] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:33] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:33] [INFO] [Bullet] Starting wall penetration at (339.4634, 704.8166)
+[13:18:33] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:33] [INFO] [Bullet] Exiting penetration at (374.5333, 735.9714) after traveling 41.6666679382324 pixels through wall
+[13:18:33] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.0230674743652
+[13:18:33] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:33] [INFO] [Bullet] Exiting penetration at (373.899, 736.3121) after traveling 41.6666679382324 pixels through wall
+[13:18:33] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(295.1175, 653.4435), source=ENEMY (Enemy1), range=1469, listeners=7
+[13:18:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(339.9602, 704.6269), shooter_id=40332428776, bullet_pos=(339.9602, 704.6269)
+[13:18:33] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:33] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:33] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:33] [INFO] [Bullet] Starting wall penetration at (339.9602, 704.6269)
+[13:18:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(294.8452, 653.4374), source=ENEMY (Enemy2), range=1469, listeners=7
+[13:18:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.6893463134766
+[13:18:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(339.4634, 704.8166), shooter_id=40617641465, bullet_pos=(339.4634, 704.8166)
+[13:18:33] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:33] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:33] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:33] [INFO] [Bullet] Starting wall penetration at (339.4634, 704.8166)
+[13:18:33] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:33] [INFO] [Bullet] Exiting penetration at (374.5333, 735.9714) after traveling 41.6666679382324 pixels through wall
+[13:18:33] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.0230674743652
+[13:18:34] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:34] [INFO] [Bullet] Exiting penetration at (373.899, 736.3121) after traveling 41.6666679382324 pixels through wall
+[13:18:34] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:34] [ENEMY] [Enemy7] FLANKING stuck (2.0s no progress), target=(390.3815, 737.121), pos=(1412.069, 824.0057), fail_count=1
+[13:18:34] [ENEMY] [Enemy7] State: FLANKING -> PURSUING
+[13:18:34] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[13:18:34] [ENEMY] [Enemy7] State: PURSUING -> COMBAT
+[13:18:34] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[13:18:34] [INFO] [GameManager] Debug mode toggled: ON
+[13:18:34] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[13:18:38] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(295.1175, 653.4435), source=ENEMY (Enemy1), range=1469, listeners=7
+[13:18:38] [ENEMY] [Enemy2] Heard gunshot at (295.1175, 653.4435), source_type=1, intensity=1.00, distance=0
+[13:18:38] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:38] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(294.8452, 653.4374), source=ENEMY (Enemy2), range=1469, listeners=7
+[13:18:38] [ENEMY] [Enemy1] Heard gunshot at (294.8452, 653.4374), source_type=1, intensity=1.00, distance=0
+[13:18:38] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(339.9602, 704.6269), shooter_id=40332428776, bullet_pos=(339.9602, 704.6269)
+[13:18:38] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:38] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:38] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:38] [INFO] [Bullet] Starting wall penetration at (339.9602, 704.6269)
+[13:18:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(339.4634, 704.8166), shooter_id=40617641465, bullet_pos=(339.4634, 704.8166)
+[13:18:38] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:38] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:38] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:38] [INFO] [Bullet] Starting wall penetration at (339.4634, 704.8166)
+[13:18:38] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[13:18:38] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[13:18:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.6893463134766
+[13:18:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.0230674743652
+[13:18:38] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:38] [INFO] [Bullet] Exiting penetration at (374.5333, 735.9714) after traveling 41.6666679382324 pixels through wall
+[13:18:38] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:38] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:38] [INFO] [Bullet] Exiting penetration at (373.899, 736.3121) after traveling 41.6666679382324 pixels through wall
+[13:18:38] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:38] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(295.1175, 653.4435), source=ENEMY (Enemy1), range=1469, listeners=7
+[13:18:38] [ENEMY] [Enemy2] Heard gunshot at (295.1175, 653.4435), source_type=1, intensity=1.00, distance=0
+[13:18:38] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:38] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(294.8452, 653.4374), source=ENEMY (Enemy2), range=1469, listeners=7
+[13:18:38] [ENEMY] [Enemy1] Heard gunshot at (294.8452, 653.4374), source_type=1, intensity=1.00, distance=0
+[13:18:38] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(339.9602, 704.6269), shooter_id=40332428776, bullet_pos=(339.9602, 704.6269)
+[13:18:38] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:38] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:38] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:38] [INFO] [Bullet] Starting wall penetration at (339.9602, 704.6269)
+[13:18:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(339.4634, 704.8166), shooter_id=40617641465, bullet_pos=(339.4634, 704.8166)
+[13:18:38] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:38] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:38] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:38] [INFO] [Bullet] Starting wall penetration at (339.4634, 704.8166)
+[13:18:38] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[13:18:38] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[13:18:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.6893463134766
+[13:18:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.0230674743652
+[13:18:38] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:38] [INFO] [Bullet] Exiting penetration at (374.5333, 735.9714) after traveling 41.6666679382324 pixels through wall
+[13:18:38] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:38] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:38] [INFO] [Bullet] Exiting penetration at (373.899, 736.3121) after traveling 41.6666679382324 pixels through wall
+[13:18:38] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:38] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(295.1175, 653.4435), source=ENEMY (Enemy1), range=1469, listeners=7
+[13:18:38] [ENEMY] [Enemy2] Heard gunshot at (295.1175, 653.4435), source_type=1, intensity=1.00, distance=0
+[13:18:38] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:38] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(294.8452, 653.4374), source=ENEMY (Enemy2), range=1469, listeners=7
+[13:18:38] [ENEMY] [Enemy1] Heard gunshot at (294.8452, 653.4374), source_type=1, intensity=1.00, distance=0
+[13:18:38] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(339.9602, 704.6269), shooter_id=40332428776, bullet_pos=(339.9602, 704.6269)
+[13:18:38] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:38] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:38] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:38] [INFO] [Bullet] Starting wall penetration at (339.9602, 704.6269)
+[13:18:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(339.4634, 704.8166), shooter_id=40617641465, bullet_pos=(339.4634, 704.8166)
+[13:18:38] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:38] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:38] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:38] [INFO] [Bullet] Starting wall penetration at (339.4634, 704.8166)
+[13:18:38] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[13:18:38] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[13:18:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.6893463134766
+[13:18:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.0230674743652
+[13:18:38] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:38] [INFO] [Bullet] Exiting penetration at (374.5333, 735.9714) after traveling 41.6666679382324 pixels through wall
+[13:18:38] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:38] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:38] [INFO] [Bullet] Exiting penetration at (373.899, 736.3121) after traveling 41.6666679382324 pixels through wall
+[13:18:38] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:38] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(295.1175, 653.4435), source=ENEMY (Enemy1), range=1469, listeners=7
+[13:18:38] [ENEMY] [Enemy2] Heard gunshot at (295.1175, 653.4435), source_type=1, intensity=1.00, distance=0
+[13:18:38] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:38] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(294.8452, 653.4374), source=ENEMY (Enemy2), range=1469, listeners=7
+[13:18:38] [ENEMY] [Enemy1] Heard gunshot at (294.8452, 653.4374), source_type=1, intensity=1.00, distance=0
+[13:18:38] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(339.9602, 704.6269), shooter_id=40332428776, bullet_pos=(339.9602, 704.6269)
+[13:18:38] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:38] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:38] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:38] [INFO] [Bullet] Starting wall penetration at (339.9602, 704.6269)
+[13:18:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(339.4634, 704.8166), shooter_id=40617641465, bullet_pos=(339.4634, 704.8166)
+[13:18:38] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:38] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:38] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:38] [INFO] [Bullet] Starting wall penetration at (339.4634, 704.8166)
+[13:18:38] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[13:18:38] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[13:18:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.6893463134766
+[13:18:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.0230674743652
+[13:18:38] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:38] [INFO] [Bullet] Exiting penetration at (374.5333, 735.9714) after traveling 41.6666679382324 pixels through wall
+[13:18:38] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:38] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:38] [INFO] [Bullet] Exiting penetration at (373.899, 736.3121) after traveling 41.6666679382324 pixels through wall
+[13:18:38] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:38] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(295.1175, 653.4435), source=ENEMY (Enemy1), range=1469, listeners=7
+[13:18:38] [ENEMY] [Enemy2] Heard gunshot at (295.1175, 653.4435), source_type=1, intensity=1.00, distance=0
+[13:18:38] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:38] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(294.8452, 653.4374), source=ENEMY (Enemy2), range=1469, listeners=7
+[13:18:38] [ENEMY] [Enemy1] Heard gunshot at (294.8452, 653.4374), source_type=1, intensity=1.00, distance=0
+[13:18:38] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(340.577, 704.0798), shooter_id=40332428776, bullet_pos=(340.577, 704.0798)
+[13:18:38] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:38] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:38] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:38] [INFO] [Bullet] Starting wall penetration at (340.577, 704.0798)
+[13:18:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(340.0857, 704.2695), shooter_id=40617641465, bullet_pos=(340.0857, 704.2695)
+[13:18:38] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:38] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:38] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:38] [INFO] [Bullet] Starting wall penetration at (340.0857, 704.2695)
+[13:18:38] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[13:18:38] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[13:18:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.7143440246582
+[13:18:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.057056427002
+[13:18:38] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:38] [INFO] [Bullet] Exiting penetration at (375.5274, 735.0032) after traveling 41.6666679382324 pixels through wall
+[13:18:38] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:38] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:38] [INFO] [Bullet] Exiting penetration at (374.9022, 735.3434) after traveling 41.6666679382324 pixels through wall
+[13:18:38] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:39] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(295.1175, 653.4435), source=ENEMY (Enemy1), range=1469, listeners=7
+[13:18:39] [ENEMY] [Enemy2] Heard gunshot at (295.1175, 653.4435), source_type=1, intensity=1.00, distance=0
+[13:18:39] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:39] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(294.8452, 653.4374), source=ENEMY (Enemy2), range=1469, listeners=7
+[13:18:39] [ENEMY] [Enemy1] Heard gunshot at (294.8452, 653.4374), source_type=1, intensity=1.00, distance=0
+[13:18:39] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(344.7699, 699.9757), shooter_id=40332428776, bullet_pos=(344.7699, 699.9757)
+[13:18:39] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:39] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:39] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:39] [INFO] [Bullet] Starting wall penetration at (344.7699, 699.9757)
+[13:18:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(344.3168, 700.1618), shooter_id=40617641465, bullet_pos=(344.3168, 700.1618)
+[13:18:39] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:39] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:39] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:39] [INFO] [Bullet] Starting wall penetration at (344.3168, 700.1618)
+[13:18:39] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[13:18:39] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[13:18:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.4803676605225
+[13:18:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.8960151672363
+[13:18:39] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:39] [INFO] [Bullet] Exiting penetration at (381.6929, 728.1047) after traveling 41.6666679382324 pixels through wall
+[13:18:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:39] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:39] [INFO] [Bullet] Exiting penetration at (382.2541, 727.7734) after traveling 41.6666641235352 pixels through wall
+[13:18:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:39] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(295.1175, 653.4435), source=ENEMY (Enemy1), range=1469, listeners=7
+[13:18:39] [ENEMY] [Enemy2] Heard gunshot at (295.1175, 653.4435), source_type=1, intensity=1.00, distance=0
+[13:18:39] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:39] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(294.8452, 653.4374), source=ENEMY (Enemy2), range=1469, listeners=7
+[13:18:39] [ENEMY] [Enemy1] Heard gunshot at (294.8452, 653.4374), source_type=1, intensity=1.00, distance=0
+[13:18:39] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[13:18:39] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[13:18:39] [INFO] [LastChance] Resetting all effects (scene change detected)
+[13:18:39] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[13:18:39] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[13:18:39] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[13:18:39] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[13:18:39] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[13:18:39] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[13:18:39] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[13:18:39] [INFO] [ScoreManager] Level started with 10 enemies
+[13:18:39] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 8)
+[13:18:39] [ENEMY] [Enemy1] Registered as sound listener
+[13:18:39] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[13:18:39] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 9)
+[13:18:39] [ENEMY] [Enemy2] Registered as sound listener
+[13:18:39] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[13:18:39] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 10)
+[13:18:39] [ENEMY] [Enemy3] Registered as sound listener
+[13:18:39] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[13:18:39] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 11)
+[13:18:39] [ENEMY] [Enemy4] Registered as sound listener
+[13:18:39] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[13:18:39] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 12)
+[13:18:39] [ENEMY] [Enemy5] Registered as sound listener
+[13:18:39] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[13:18:39] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 13)
+[13:18:39] [ENEMY] [Enemy6] Registered as sound listener
+[13:18:39] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[13:18:39] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 14)
+[13:18:39] [ENEMY] [Enemy7] Registered as sound listener
+[13:18:39] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[13:18:39] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 15)
+[13:18:39] [ENEMY] [Enemy8] Registered as sound listener
+[13:18:39] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[13:18:39] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 16)
+[13:18:39] [ENEMY] [Enemy9] Registered as sound listener
+[13:18:39] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[13:18:39] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 17)
+[13:18:39] [ENEMY] [Enemy10] Registered as sound listener
+[13:18:39] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[13:18:39] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[13:18:39] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[13:18:39] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[13:18:39] [INFO] [LastChance] Found player: Player
+[13:18:39] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[13:18:39] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[13:18:39] [INFO] [LastChance] Connected to player Died signal (C#)
+[13:18:39] [INFO] [Player] Detecting weapon pose (frame 3)...
+[13:18:39] [INFO] [Player] Detected weapon: Rifle (default pose)
+[13:18:39] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[13:18:39] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[13:18:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=17
+[13:18:39] [INFO] [SoundPropagation] Cleaned up 7 invalid listeners
+[13:18:39] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[13:18:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1107.609, 1460.943), shooter_id=825204148896, bullet_pos=(1070.721, 1386.219)
+[13:18:39] [INFO] [Bullet] Using shooter_position, distance=83.333366394043
+[13:18:39] [INFO] [Bullet] Distance to wall: 83.333366394043 (5.67432215431913% of viewport)
+[13:18:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:39] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[13:18:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1080.976, 1437.848), shooter_id=825204148896, bullet_pos=(1065.567, 1399.135)
+[13:18:40] [INFO] [Bullet] Using shooter_position, distance=41.666675567627
+[13:18:40] [INFO] [Bullet] Distance to wall: 41.666675567627 (2.83716055766006% of viewport)
+[13:18:40] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:40] [INFO] [Bullet] Starting wall penetration at (1065.567, 1399.135)
+[13:18:40] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.7668037414551
+[13:18:40] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:40] [INFO] [Bullet] Exiting penetration at (1048.31, 1355.776) after traveling 41.6666679382324 pixels through wall
+[13:18:40] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:40] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[13:18:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1107.609, 1460.943), shooter_id=825204148896, bullet_pos=(908.6921, 1784.524)
+[13:18:40] [INFO] [Bullet] Using shooter_position, distance=379.832763671875
+[13:18:40] [INFO] [Bullet] Distance to wall: 379.832763671875 (25.8635113292825% of viewport)
+[13:18:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1055.344, 1413.921), shooter_id=825204148896, bullet_pos=(1043.045, 1374.111)
+[13:18:40] [INFO] [Bullet] Using shooter_position, distance=41.6667251586914
+[13:18:40] [INFO] [Bullet] Distance to wall: 41.6667251586914 (2.83716393440683% of viewport)
+[13:18:40] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:40] [INFO] [Bullet] Starting wall penetration at (1043.045, 1374.111)
+[13:18:40] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48.6442070007324
+[13:18:40] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:40] [INFO] [Bullet] Exiting penetration at (1029.271, 1329.523) after traveling 41.6666717529297 pixels through wall
+[13:18:40] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:40] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:18:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1107.609, 1460.943), shooter_id=825204148896, bullet_pos=(1013.741, 2071.972)
+[13:18:40] [INFO] [Bullet] Using shooter_position, distance=618.196899414063
+[13:18:40] [INFO] [Bullet] Distance to wall: 618.196899414063 (42.0941636449643% of viewport)
+[13:18:40] [INFO] [Bullet] Distance-based penetration chance: 97.556809080875%
+[13:18:40] [INFO] [Bullet] Starting wall penetration at (1013.741, 2071.972)
+[13:18:40] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.52161598205566
+[13:18:40] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:40] [INFO] [Bullet] Exiting penetration at (1025.791, 2104.943) after traveling 30.1041698455811 pixels through wall
+[13:18:40] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[13:18:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:40] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
+[13:18:40] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
+[13:18:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:40] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(639.9151, 781.9437), shooter_id=823207660055, bullet_pos=(523.5452, 827.5838)
+[13:18:40] [INFO] [Bullet] Using shooter_position, distance=124.999938964844
+[13:18:40] [INFO] [Bullet] Distance to wall: 124.999938964844 (8.5114756987359% of viewport)
+[13:18:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:40] [INFO] [Bullet] Starting wall penetration at (523.5452, 827.5838)
+[13:18:40] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.3753910064697
+[13:18:40] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:40] [INFO] [Bullet] Exiting penetration at (480.1004, 844.6228) after traveling 41.6666679382324 pixels through wall
+[13:18:40] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:40] [INFO] [LastChance] Threat detected: @Area2D@674
+[13:18:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[13:18:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:18:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(643.4288, 787.8192), shooter_id=823207660055, bullet_pos=(50.38736, 1092.362)
+[13:18:41] [INFO] [Bullet] Using shooter_position, distance=666.666687011719
+[13:18:41] [INFO] [Bullet] Distance to wall: 666.666687011719 (45.3945606105689% of viewport)
+[13:18:41] [INFO] [Bullet] Distance-based penetration chance: 93.7063459543362%
+[13:18:41] [INFO] [Bullet] Penetration failed (distance roll)
+[13:18:41] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:41] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:41] [INFO] [LastChance] Threat detected: Bullet
+[13:18:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[13:18:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:18:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(403.9098, 565.5149), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:18:41] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:18:41] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[13:18:41] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[13:18:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(313.4205, 378.449), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:41] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=1, below_threshold=4
+[13:18:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(448.1887, 513.8431), shooter_id=822922447410, bullet_pos=(518.1099, 410.2283)
+[13:18:41] [INFO] [Bullet] Using shooter_position, distance=124.999992370605
+[13:18:41] [INFO] [Bullet] Distance to wall: 124.999992370605 (8.51147933523242% of viewport)
+[13:18:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:41] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(632.6362, 759.6289), shooter_id=823207660055, bullet_pos=(49.51703, 775.4362)
+[13:18:41] [INFO] [Bullet] Using shooter_position, distance=583.333374023438
+[13:18:41] [INFO] [Bullet] Distance to wall: 583.333374023438 (39.7202420927463% of viewport)
+[13:18:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:41] [INFO] [Bullet] Starting wall penetration at (49.51703, 775.4362)
+[13:18:41] [INFO] [LastChance] Threat detected: @Area2D@678
+[13:18:41] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[13:18:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:18:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29.1432056427002
+[13:18:41] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:41] [INFO] [Bullet] Exiting penetration at (2.867496, 776.7007) after traveling 41.6666679382324 pixels through wall
+[13:18:41] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:41] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[13:18:41] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[13:18:41] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[13:18:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(403.9098, 565.5149), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:18:41] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:18:41] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[13:18:41] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[13:18:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(441.99, 509.119), shooter_id=822922447410, bullet_pos=(499.605, 398.1888)
+[13:18:41] [INFO] [Bullet] Using shooter_position, distance=125.000022888184
+[13:18:41] [INFO] [Bullet] Distance to wall: 125.000022888184 (8.51148141323043% of viewport)
+[13:18:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:41] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:41] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[13:18:41] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[13:18:41] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[13:18:41] [INFO] [LastChance] Player died
+[13:18:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(366.3697, 335.7057), shooter_id=822637234540, bullet_pos=(658.4454, 38.54758)
+[13:18:41] [INFO] [Bullet] Using shooter_position, distance=416.666748046875
+[13:18:41] [INFO] [Bullet] Distance to wall: 416.666748046875 (28.3716050571011% of viewport)
+[13:18:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(448.1887, 513.8431), shooter_id=822922447410, bullet_pos=(231.6103, 43.44412)
+[13:18:41] [INFO] [Bullet] Using shooter_position, distance=517.862365722656
+[13:18:41] [INFO] [Bullet] Distance to wall: 517.862365722656 (35.2622007469776% of viewport)
+[13:18:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:41] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(441.99, 509.119), shooter_id=822922447410, bullet_pos=(238.4693, 56.56306)
+[13:18:41] [INFO] [Bullet] Using shooter_position, distance=496.213195800781
+[13:18:41] [INFO] [Bullet] Distance to wall: 496.213195800781 (33.788068957684% of viewport)
+[13:18:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(645.9989, 708.5937), shooter_id=823207660055, bullet_pos=(526.2338, 592.6882)
+[13:18:41] [INFO] [Bullet] Using shooter_position, distance=166.66667175293
+[13:18:41] [INFO] [Bullet] Distance to wall: 166.66667175293 (11.3486401526422% of viewport)
+[13:18:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(448.1887, 513.8431), shooter_id=822922447410, bullet_pos=(49.55118, 208.6364)
+[13:18:41] [INFO] [Bullet] Using shooter_position, distance=502.058746337891
+[13:18:41] [INFO] [Bullet] Distance to wall: 502.058746337891 (34.1861032427754% of viewport)
+[13:18:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:41] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:41] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[13:18:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(762.7232, 723.6107), shooter_id=823207660055, bullet_pos=(922.743, 677.012)
+[13:18:41] [INFO] [Bullet] Using shooter_position, distance=166.666625976563
+[13:18:41] [INFO] [Bullet] Distance to wall: 166.666625976563 (11.3486370356452% of viewport)
+[13:18:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:41] [INFO] [Bullet] Starting wall penetration at (922.743, 677.012)
+[13:18:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32.8589820861816
+[13:18:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(441.99, 509.119), shooter_id=822922447410, bullet_pos=(61.01591, 267.8728)
+[13:18:41] [INFO] [Bullet] Using shooter_position, distance=450.933410644531
+[13:18:41] [INFO] [Bullet] Distance to wall: 450.933410644531 (30.7048851242119% of viewport)
+[13:18:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:41] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:41] [INFO] [Bullet] Exiting penetration at (967.5485, 663.9644) after traveling 41.6666717529297 pixels through wall
+[13:18:41] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:41] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:41] [ENEMY] [Enemy10] FLANKING started: target=(933.6246, 753.6113), side=left, pos=(1061.496, 1460.101)
+[13:18:41] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[13:18:41] [ENEMY] [Enemy1] Hit taken, health: 1/2
+[13:18:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(659.9006, 804.9785), shooter_id=823207660055, bullet_pos=(536.7043, 1022.516)
+[13:18:41] [INFO] [Bullet] Using shooter_position, distance=249.999969482422
+[13:18:41] [INFO] [Bullet] Distance to wall: 249.999969482422 (17.0229576314658% of viewport)
+[13:18:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(645.9989, 708.5937), shooter_id=823207660055, bullet_pos=(974.9484, 238.4877)
+[13:18:41] [INFO] [Bullet] Using shooter_position, distance=573.766052246094
+[13:18:41] [INFO] [Bullet] Distance to wall: 573.766052246094 (39.0687855601735% of viewport)
+[13:18:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:41] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(659.9006, 804.9785), shooter_id=823207660055, bullet_pos=(512.2292, 990.353)
+[13:18:41] [INFO] [Bullet] Using shooter_position, distance=237.003173828125
+[13:18:41] [INFO] [Bullet] Distance to wall: 237.003173828125 (16.1379819163649% of viewport)
+[13:18:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(659.9006, 804.9785), shooter_id=823207660055, bullet_pos=(509.8954, 994.7748)
+[13:18:41] [INFO] [Bullet] Using shooter_position, distance=241.917755126953
+[13:18:41] [INFO] [Bullet] Distance to wall: 241.917755126953 (16.4726247941203% of viewport)
+[13:18:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(441.99, 509.119), shooter_id=822922447410, bullet_pos=(218.9116, 442.325)
+[13:18:41] [INFO] [Bullet] Using shooter_position, distance=232.863525390625
+[13:18:41] [INFO] [Bullet] Distance to wall: 232.863525390625 (15.8561056421133% of viewport)
+[13:18:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(659.9006, 804.9785), shooter_id=823207660055, bullet_pos=(528.1445, 1019.323)
+[13:18:41] [INFO] [Bullet] Using shooter_position, distance=251.601638793945
+[13:18:41] [INFO] [Bullet] Distance to wall: 251.601638793945 (17.1320182400976% of viewport)
+[13:18:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:41] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[13:18:41] [INFO] [LastChance] Resetting all effects (scene change detected)
+[13:18:41] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[13:18:41] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[13:18:41] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[13:18:41] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[13:18:41] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[13:18:41] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[13:18:41] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[13:18:41] [INFO] [ScoreManager] Level started with 10 enemies
+[13:18:41] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[13:18:41] [ENEMY] [Enemy1] Registered as sound listener
+[13:18:41] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[13:18:41] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[13:18:41] [ENEMY] [Enemy2] Registered as sound listener
+[13:18:41] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[13:18:41] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[13:18:41] [ENEMY] [Enemy3] Registered as sound listener
+[13:18:41] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[13:18:41] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[13:18:41] [ENEMY] [Enemy4] Registered as sound listener
+[13:18:41] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[13:18:41] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[13:18:41] [ENEMY] [Enemy5] Registered as sound listener
+[13:18:41] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[13:18:41] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[13:18:41] [ENEMY] [Enemy6] Registered as sound listener
+[13:18:41] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[13:18:41] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[13:18:41] [ENEMY] [Enemy7] Registered as sound listener
+[13:18:41] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[13:18:41] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[13:18:41] [ENEMY] [Enemy8] Registered as sound listener
+[13:18:41] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[13:18:41] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[13:18:41] [ENEMY] [Enemy9] Registered as sound listener
+[13:18:41] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[13:18:41] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[13:18:41] [ENEMY] [Enemy10] Registered as sound listener
+[13:18:41] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[13:18:41] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[13:18:41] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[13:18:41] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[13:18:41] [INFO] [LastChance] Found player: Player
+[13:18:41] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[13:18:41] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[13:18:41] [INFO] [LastChance] Connected to player Died signal (C#)
+[13:18:41] [INFO] [Player] Detecting weapon pose (frame 3)...
+[13:18:41] [INFO] [Player] Detected weapon: Rifle (default pose)
+[13:18:41] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[13:18:42] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[13:18:42] [INFO] [LastChance] Resetting all effects (scene change detected)
+[13:18:42] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[13:18:42] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[13:18:42] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[13:18:42] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[13:18:42] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[13:18:42] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[13:18:42] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[13:18:42] [INFO] [ScoreManager] Level started with 10 enemies
+[13:18:42] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
+[13:18:42] [ENEMY] [Enemy1] Registered as sound listener
+[13:18:42] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[13:18:42] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
+[13:18:42] [ENEMY] [Enemy2] Registered as sound listener
+[13:18:42] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[13:18:42] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
+[13:18:42] [ENEMY] [Enemy3] Registered as sound listener
+[13:18:42] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[13:18:42] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
+[13:18:42] [ENEMY] [Enemy4] Registered as sound listener
+[13:18:42] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[13:18:42] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
+[13:18:42] [ENEMY] [Enemy5] Registered as sound listener
+[13:18:42] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[13:18:42] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
+[13:18:42] [ENEMY] [Enemy6] Registered as sound listener
+[13:18:42] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[13:18:42] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
+[13:18:42] [ENEMY] [Enemy7] Registered as sound listener
+[13:18:42] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[13:18:42] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
+[13:18:42] [ENEMY] [Enemy8] Registered as sound listener
+[13:18:42] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[13:18:42] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
+[13:18:42] [ENEMY] [Enemy9] Registered as sound listener
+[13:18:42] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[13:18:42] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
+[13:18:42] [ENEMY] [Enemy10] Registered as sound listener
+[13:18:42] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[13:18:42] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[13:18:42] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[13:18:42] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[13:18:42] [INFO] [LastChance] Found player: Player
+[13:18:42] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[13:18:42] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[13:18:42] [INFO] [LastChance] Connected to player Died signal (C#)
+[13:18:42] [INFO] [Player] Detecting weapon pose (frame 3)...
+[13:18:42] [INFO] [Player] Detected weapon: Rifle (default pose)
+[13:18:42] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[13:18:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=30
+[13:18:42] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
+[13:18:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[13:18:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1155.308, 1498.685), shooter_id=883773409990, bullet_pos=(1084.559, 1395.634)
+[13:18:42] [INFO] [Bullet] Using shooter_position, distance=124.999961853027
+[13:18:42] [INFO] [Bullet] Distance to wall: 124.999961853027 (8.51147725723441% of viewport)
+[13:18:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[13:18:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1131.238, 1480.033), shooter_id=883773409990, bullet_pos=(1068.349, 1372.005)
+[13:18:42] [INFO] [Bullet] Using shooter_position, distance=124.999908447266
+[13:18:42] [INFO] [Bullet] Distance to wall: 124.999908447266 (8.51147362073789% of viewport)
+[13:18:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:42] [INFO] [Bullet] Starting wall penetration at (1068.349, 1372.005)
+[13:18:42] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:42] [INFO] [Bullet] Exiting penetration at (1044.87, 1331.675) after traveling 41.6666679382324 pixels through wall
+[13:18:42] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1155.308, 1498.685), shooter_id=883773409990, bullet_pos=(915.3817, 1671.664)
+[13:18:42] [INFO] [Bullet] Using shooter_position, distance=295.781646728516
+[13:18:42] [INFO] [Bullet] Distance to wall: 295.781646728516 (20.1403162202336% of viewport)
+[13:18:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[13:18:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1103.743, 1457.697), shooter_id=883773409990, bullet_pos=(1067.71, 1382.556)
+[13:18:42] [INFO] [Bullet] Using shooter_position, distance=83.3332672119141
+[13:18:42] [INFO] [Bullet] Distance to wall: 83.3332672119141 (5.67431540082559% of viewport)
+[13:18:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[13:18:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.253, 1434.479), shooter_id=883773409990, bullet_pos=(1062.285, 1395.594)
+[13:18:42] [INFO] [Bullet] Using shooter_position, distance=41.6667022705078
+[13:18:42] [INFO] [Bullet] Distance to wall: 41.6667022705078 (2.83716237590832% of viewport)
+[13:18:42] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:42] [INFO] [Bullet] Starting wall penetration at (1062.285, 1395.594)
+[13:18:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.671781539917
+[13:18:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:43] [INFO] [Bullet] Exiting penetration at (1045.521, 1352.042) after traveling 41.6666679382324 pixels through wall
+[13:18:43] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1103.743, 1457.697), shooter_id=883773409990, bullet_pos=(907.1568, 1663.691)
+[13:18:43] [INFO] [Bullet] Using shooter_position, distance=284.7451171875
+[13:18:43] [INFO] [Bullet] Distance to wall: 284.7451171875 (19.3888186293975% of viewport)
+[13:18:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:43] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[13:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1155.308, 1498.685), shooter_id=883773409990, bullet_pos=(1253.375, 2062.576)
+[13:18:43] [INFO] [Bullet] Using shooter_position, distance=572.355590820313
+[13:18:43] [INFO] [Bullet] Distance to wall: 572.355590820313 (38.9727446480822% of viewport)
+[13:18:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:43] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.763, 1410.438), shooter_id=883773409990, bullet_pos=(921.4178, 971.0305)
+[13:18:43] [INFO] [Bullet] Using shooter_position, distance=458.333099365234
+[13:18:43] [INFO] [Bullet] Distance to wall: 458.333099365234 (31.2087435360323% of viewport)
+[13:18:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:43] [INFO] [Bullet] Starting wall penetration at (921.4178, 971.0305)
+[13:18:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13.5507402420044
+[13:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1103.743, 1457.697), shooter_id=883773409990, bullet_pos=(1091.295, 2081.473)
+[13:18:43] [INFO] [Bullet] Using shooter_position, distance=623.900695800781
+[13:18:43] [INFO] [Bullet] Distance to wall: 623.900695800781 (42.4825456292927% of viewport)
+[13:18:43] [INFO] [Bullet] Max penetration distance exceeded: 83.3333358764648 >= 48
+[13:18:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:43] [INFO] [Bullet] Exiting penetration at (896.2968, 886.3445) after traveling 83.3333358764648 pixels through wall
+[13:18:43] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1155.308, 1498.685), shooter_id=883773409990, bullet_pos=(1683.526, 1653.608)
+[13:18:43] [INFO] [Bullet] Using shooter_position, distance=550.467956542969
+[13:18:43] [INFO] [Bullet] Distance to wall: 550.467956542969 (37.4823753823274% of viewport)
+[13:18:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1155.308, 1498.685), shooter_id=883773409990, bullet_pos=(1502.154, 1524.721)
+[13:18:43] [INFO] [Bullet] Using shooter_position, distance=347.821685791016
+[13:18:43] [INFO] [Bullet] Distance to wall: 347.821685791016 (23.683818173193% of viewport)
+[13:18:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:43] [INFO] [Bullet] Starting wall penetration at (1502.154, 1524.721)
+[13:18:43] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[13:18:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.38620185852051
+[13:18:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:43] [INFO] [Bullet] Exiting penetration at (1480.349, 1509.226) after traveling 21.7502632141113 pixels through wall
+[13:18:43] [INFO] [Bullet] Damage multiplier after penetration: 0.05625
+[13:18:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5811, 752.2853), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:43] [ENEMY] [Enemy2] Heard gunshot at (689.5811, 752.2853), source_type=1, intensity=0.02, distance=353
+[13:18:43] [ENEMY] [Enemy4] Heard gunshot at (689.5811, 752.2853), source_type=1, intensity=0.07, distance=184
+[13:18:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(627.0824, 779.2022), shooter_id=881776920052, bullet_pos=(507.3662, 815.1612)
+[13:18:43] [INFO] [Bullet] Using shooter_position, distance=125.000030517578
+[13:18:43] [INFO] [Bullet] Distance to wall: 125.000030517578 (8.51148193272994% of viewport)
+[13:18:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5811, 752.2853), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(627.0824, 779.2022), shooter_id=881776920052, bullet_pos=(682.6278, 864.5345)
+[13:18:44] [INFO] [Bullet] Using shooter_position, distance=101.817977905273
+[13:18:44] [INFO] [Bullet] Distance to wall: 101.817977905273 (6.9329733423222% of viewport)
+[13:18:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(626.8002, 778.5373), shooter_id=881776920052, bullet_pos=(506.7092, 813.2237)
+[13:18:44] [INFO] [Bullet] Using shooter_position, distance=124.999977111816
+[13:18:44] [INFO] [Bullet] Distance to wall: 124.999977111816 (8.51147829623342% of viewport)
+[13:18:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5811, 752.2853), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(627.0824, 779.2022), shooter_id=881776920052, bullet_pos=(499.7854, 896.5546)
+[13:18:44] [INFO] [Bullet] Using shooter_position, distance=173.136123657227
+[13:18:44] [INFO] [Bullet] Distance to wall: 173.136123657227 (11.7891570290789% of viewport)
+[13:18:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(626.8002, 778.5373), shooter_id=881776920052, bullet_pos=(683.3584, 857.3759)
+[13:18:44] [INFO] [Bullet] Using shooter_position, distance=97.0275497436523
+[13:18:44] [INFO] [Bullet] Distance to wall: 97.0275497436523 (6.60678427997677% of viewport)
+[13:18:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:44] [INFO] [Bullet] Starting wall penetration at (683.3584, 857.3759)
+[13:18:44] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:44] [INFO] [Bullet] Exiting penetration at (722.5688, 867.1762) after traveling 35.4166641235352 pixels through wall
+[13:18:44] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[13:18:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(626.8002, 778.5373), shooter_id=881776920052, bullet_pos=(506.7092, 813.2237)
+[13:18:44] [INFO] [Bullet] Using shooter_position, distance=124.999977111816
+[13:18:44] [INFO] [Bullet] Distance to wall: 124.999977111816 (8.51147829623342% of viewport)
+[13:18:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:44] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[13:18:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:44] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[13:18:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:44] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[13:18:44] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[13:18:44] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[13:18:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:45] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:45] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[13:18:45] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5811, 752.2853), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:45] [INFO] [LastChance] Threat detected: Bullet
+[13:18:45] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[13:18:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:18:45] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[13:18:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(621.9874, 744.4302), shooter_id=881776920052, bullet_pos=(500.2953, 715.8639)
+[13:18:45] [INFO] [Bullet] Using shooter_position, distance=124.999977111816
+[13:18:45] [INFO] [Bullet] Distance to wall: 124.999977111816 (8.51147829623342% of viewport)
+[13:18:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:45] [INFO] [Bullet] Starting wall penetration at (500.2953, 715.8639)
+[13:18:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[13:18:45] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[13:18:45] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:45] [INFO] [Bullet] Exiting penetration at (454.8636, 705.1992) after traveling 41.6666717529297 pixels through wall
+[13:18:45] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:45] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5811, 752.2853), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:45] [INFO] [LastChance] Threat detected: Bullet
+[13:18:45] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[13:18:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:18:45] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[13:18:45] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[13:18:45] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[13:18:45] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5811, 752.2853), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:45] [INFO] [LastChance] Threat detected: Bullet
+[13:18:45] [INFO] [LastChance] Triggering last chance effect!
+[13:18:45] [INFO] [LastChance] Starting last chance effect:
+[13:18:45] [INFO] [LastChance]   - Time will be frozen (except player)
+[13:18:45] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[13:18:45] [INFO] [LastChance]   - Sepia intensity: 0.70
+[13:18:45] [INFO] [LastChance]   - Brightness: 0.60
+[13:18:45] [INFO] [LastChance] Pushed bullet Bullet from distance 63.4 to 200.0
+[13:18:45] [INFO] [LastChance] Pushed 1 threatening bullets away from player
+[13:18:45] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[13:18:45] [INFO] [LastChance] Skipping player node: Player
+[13:18:45] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[13:18:45] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[13:18:45] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[13:18:45] [INFO] [LastChance] Resetting all effects (scene change detected)
+[13:18:45] [INFO] [LastChance] Ending last chance effect
+[13:18:45] [INFO] [LastChance] All process modes restored
+[13:18:45] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[13:18:45] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[13:18:45] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[13:18:45] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[13:18:45] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[13:18:45] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[13:18:45] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[13:18:45] [INFO] [ScoreManager] Level started with 10 enemies
+[13:18:45] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[13:18:45] [ENEMY] [Enemy1] Registered as sound listener
+[13:18:45] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[13:18:45] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[13:18:45] [ENEMY] [Enemy2] Registered as sound listener
+[13:18:45] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[13:18:45] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[13:18:45] [ENEMY] [Enemy3] Registered as sound listener
+[13:18:45] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[13:18:45] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[13:18:45] [ENEMY] [Enemy4] Registered as sound listener
+[13:18:45] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[13:18:45] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[13:18:45] [ENEMY] [Enemy5] Registered as sound listener
+[13:18:45] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[13:18:45] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[13:18:45] [ENEMY] [Enemy6] Registered as sound listener
+[13:18:45] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[13:18:45] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[13:18:45] [ENEMY] [Enemy7] Registered as sound listener
+[13:18:45] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[13:18:45] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[13:18:45] [ENEMY] [Enemy8] Registered as sound listener
+[13:18:45] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[13:18:45] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[13:18:45] [ENEMY] [Enemy9] Registered as sound listener
+[13:18:45] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[13:18:45] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[13:18:45] [ENEMY] [Enemy10] Registered as sound listener
+[13:18:45] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[13:18:45] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[13:18:45] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[13:18:45] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[13:18:45] [INFO] [LastChance] Found player: Player
+[13:18:45] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[13:18:45] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[13:18:45] [INFO] [LastChance] Connected to player Died signal (C#)
+[13:18:45] [INFO] [Player] Detecting weapon pose (frame 3)...
+[13:18:45] [INFO] [Player] Detected weapon: Rifle (default pose)
+[13:18:45] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[13:18:46] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=20
+[13:18:46] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[13:18:46] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[13:18:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1155.308, 1498.685), shooter_id=935296240568, bullet_pos=(1084.559, 1395.634)
+[13:18:46] [INFO] [Bullet] Using shooter_position, distance=124.999961853027
+[13:18:46] [INFO] [Bullet] Distance to wall: 124.999961853027 (8.51147725723441% of viewport)
+[13:18:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:46] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[13:18:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1131.238, 1480.033), shooter_id=935296240568, bullet_pos=(1068.349, 1372.005)
+[13:18:46] [INFO] [Bullet] Using shooter_position, distance=124.999908447266
+[13:18:46] [INFO] [Bullet] Distance to wall: 124.999908447266 (8.51147362073789% of viewport)
+[13:18:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1155.308, 1498.685), shooter_id=935296240568, bullet_pos=(894.9467, 1612.851)
+[13:18:46] [INFO] [Bullet] Using shooter_position, distance=284.292205810547
+[13:18:46] [INFO] [Bullet] Distance to wall: 284.292205810547 (19.3579790609102% of viewport)
+[13:18:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:46] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[13:18:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1103.743, 1457.697), shooter_id=935296240568, bullet_pos=(1067.71, 1382.556)
+[13:18:46] [INFO] [Bullet] Using shooter_position, distance=83.3332672119141
+[13:18:46] [INFO] [Bullet] Distance to wall: 83.3332672119141 (5.67431540082559% of viewport)
+[13:18:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:46] [INFO] [Bullet] Starting wall penetration at (1067.71, 1382.556)
+[13:18:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.3954811096191
+[13:18:46] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:46] [INFO] [Bullet] Exiting penetration at (1047.532, 1340.478) after traveling 41.6666679382324 pixels through wall
+[13:18:46] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1131.238, 1480.033), shooter_id=935296240568, bullet_pos=(905.4343, 1609.902)
+[13:18:46] [INFO] [Bullet] Using shooter_position, distance=260.4873046875
+[13:18:46] [INFO] [Bullet] Distance to wall: 260.4873046875 (17.7370595700886% of viewport)
+[13:18:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:46] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[13:18:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.253, 1434.479), shooter_id=935296240568, bullet_pos=(1062.285, 1395.594)
+[13:18:46] [INFO] [Bullet] Using shooter_position, distance=41.6667022705078
+[13:18:46] [INFO] [Bullet] Distance to wall: 41.6667022705078 (2.83716237590832% of viewport)
+[13:18:46] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:46] [INFO] [Bullet] Starting wall penetration at (1062.285, 1395.594)
+[13:18:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.671781539917
+[13:18:46] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:46] [INFO] [Bullet] Exiting penetration at (1045.521, 1352.042) after traveling 41.6666679382324 pixels through wall
+[13:18:46] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:46] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[13:18:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1155.308, 1498.685), shooter_id=935296240568, bullet_pos=(1192.672, 2071.58)
+[13:18:46] [INFO] [Bullet] Using shooter_position, distance=574.112243652344
+[13:18:46] [INFO] [Bullet] Distance to wall: 574.112243652344 (39.092358369615% of viewport)
+[13:18:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:46] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:18:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.763, 1410.438), shooter_id=935296240568, bullet_pos=(921.4178, 971.0305)
+[13:18:47] [INFO] [Bullet] Using shooter_position, distance=458.333099365234
+[13:18:47] [INFO] [Bullet] Distance to wall: 458.333099365234 (31.2087435360323% of viewport)
+[13:18:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1131.238, 1480.033), shooter_id=935296240568, bullet_pos=(1336.51, 2079.137)
+[13:18:47] [INFO] [Bullet] Using shooter_position, distance=633.29541015625
+[13:18:47] [INFO] [Bullet] Distance to wall: 633.29541015625 (43.1222490051129% of viewport)
+[13:18:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.763, 1410.438), shooter_id=935296240568, bullet_pos=(914.5532, 1010.86)
+[13:18:47] [INFO] [Bullet] Using shooter_position, distance=422.480133056641
+[13:18:47] [INFO] [Bullet] Distance to wall: 422.480133056641 (28.7674491322885% of viewport)
+[13:18:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:47] [INFO] [Bullet] Starting wall penetration at (914.5532, 1010.86)
+[13:18:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.763, 1410.438), shooter_id=935296240568, bullet_pos=(913.704, 1015.787)
+[13:18:47] [INFO] [Bullet] Using shooter_position, distance=418.102600097656
+[13:18:47] [INFO] [Bullet] Distance to wall: 418.102600097656 (28.4693748635379% of viewport)
+[13:18:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:47] [INFO] [Bullet] Already penetrating, cannot start new penetration
+[13:18:47] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:47] [INFO] [Bullet] Exiting penetration at (907.6887, 1050.689) after traveling 35.4166679382324 pixels through wall
+[13:18:47] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[13:18:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1155.308, 1498.685), shooter_id=935296240568, bullet_pos=(1485.282, 1709.424)
+[13:18:47] [INFO] [Bullet] Using shooter_position, distance=391.527496337891
+[13:18:47] [INFO] [Bullet] Distance to wall: 391.527496337891 (26.6598271812287% of viewport)
+[13:18:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:47] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[13:18:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1155.308, 1498.685), shooter_id=935296240568, bullet_pos=(1150.458, 1391.445)
+[13:18:47] [INFO] [Bullet] Using shooter_position, distance=107.349136352539
+[13:18:47] [INFO] [Bullet] Distance to wall: 107.349136352539 (7.30960009190006% of viewport)
+[13:18:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:47] [ENEMY] [Enemy10] Hit taken, health: 3/4
+[13:18:47] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:47] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
+[13:18:47] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
+[13:18:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:47] [INFO] [LastChance] Threat detected: Bullet
+[13:18:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[13:18:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:18:47] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:47] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:47] [INFO] [LastChance] Threat detected: @Area2D@1494
+[13:18:47] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[13:18:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:18:47] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[13:18:47] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[13:18:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(313.4765, 378.4366), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=1, below_threshold=4
+[13:18:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:18:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:18:47] [INFO] [LastChance] Threat detected: @Area2D@1496
+[13:18:47] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
+[13:18:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:18:47] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(632.563, 759.1027), shooter_id=933299751016, bullet_pos=(49.3383, 770.3563)
+[13:18:47] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
+[13:18:47] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
+[13:18:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:47] [INFO] [Bullet] Starting wall penetration at (49.3383, 770.3563)
+[13:18:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29.325138092041
+[13:18:47] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:47] [INFO] [Bullet] Exiting penetration at (2.680321, 771.2566) after traveling 41.6666679382324 pixels through wall
+[13:18:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(644.8041, 710.2003), shooter_id=933299751016, bullet_pos=(521.6811, 597.8683)
+[13:18:48] [INFO] [Bullet] Using shooter_position, distance=166.666641235352
+[13:18:48] [INFO] [Bullet] Distance to wall: 166.666641235352 (11.3486380746442% of viewport)
+[13:18:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:18:48] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:18:48] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[13:18:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.8241, 602.0581), shooter_id=933014538294, bullet_pos=(686.3095, 830.7759)
+[13:18:48] [INFO] [Bullet] Using shooter_position, distance=333.333190917969
+[13:18:48] [INFO] [Bullet] Distance to wall: 333.333190917969 (22.6972699152944% of viewport)
+[13:18:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(365.7126, 334.8249), shooter_id=932729325616, bullet_pos=(624.129, 63.07861)
+[13:18:48] [INFO] [Bullet] Using shooter_position, distance=375.000061035156
+[13:18:48] [INFO] [Bullet] Distance to wall: 375.000061035156 (25.5344437201918% of viewport)
+[13:18:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:48] [INFO] [LastChance] Threat detected: Bullet
+[13:18:48] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
+[13:18:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:18:48] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.8241, 602.0581), shooter_id=933014538294, bullet_pos=(552.0927, 1001.925)
+[13:18:48] [INFO] [Bullet] Using shooter_position, distance=414.265319824219
+[13:18:48] [INFO] [Bullet] Distance to wall: 414.265319824219 (28.2080873935833% of viewport)
+[13:18:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:48] [INFO] [Bullet] Starting wall penetration at (552.0927, 1001.925)
+[13:18:48] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[13:18:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.3634748458862
+[13:18:48] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:48] [INFO] [Bullet] Exiting penetration at (527.152, 1033.729) after traveling 35.4166679382324 pixels through wall
+[13:18:48] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[13:18:48] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[13:18:48] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
+[13:18:48] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:48] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[13:18:48] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[13:18:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(696.4777, 757.1829), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:48] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[13:18:48] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[13:18:48] [ENEMY] [Enemy10] FLANKING started: target=(868.2963, 612.1639), side=left, pos=(1061.496, 1460.101)
+[13:18:48] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[13:18:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(650.5698, 807.413), shooter_id=933299751016, bullet_pos=(520.5185, 970.1687)
+[13:18:48] [INFO] [Bullet] Using shooter_position, distance=208.333297729492
+[13:18:48] [INFO] [Bullet] Distance to wall: 208.333297729492 (14.1857973335555% of viewport)
+[13:18:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(650.5698, 807.413), shooter_id=933299751016, bullet_pos=(544.6723, 1002.574)
+[13:18:48] [INFO] [Bullet] Using shooter_position, distance=222.040740966797
+[13:18:48] [INFO] [Bullet] Distance to wall: 222.040740966797 (15.1191623493491% of viewport)
+[13:18:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:48] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(682.3887, 785.9143), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:48] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(682.2164, 783.2532), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:48] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[13:18:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(655.1423, 848.27), shooter_id=933299751016, bullet_pos=(580.55, 997.3127)
+[13:18:48] [INFO] [Bullet] Using shooter_position, distance=166.666564941406
+[13:18:48] [INFO] [Bullet] Distance to wall: 166.666564941406 (11.3486328796492% of viewport)
+[13:18:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:48] [INFO] [Bullet] Starting wall penetration at (580.55, 997.3127)
+[13:18:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.8237934112549
+[13:18:48] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:48] [INFO] [Bullet] Exiting penetration at (559.6641, 1039.045) after traveling 41.6666717529297 pixels through wall
+[13:18:48] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(747.9568, 800.826), shooter_id=933299751016, bullet_pos=(912.8425, 825.126)
+[13:18:48] [INFO] [Bullet] Using shooter_position, distance=166.666732788086
+[13:18:48] [INFO] [Bullet] Distance to wall: 166.666732788086 (11.3486443086383% of viewport)
+[13:18:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:48] [INFO] [Bullet] Starting wall penetration at (912.8425, 825.126)
+[13:18:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.2591037750244
+[13:18:48] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:48] [INFO] [Bullet] Exiting penetration at (959.0106, 831.9301) after traveling 41.6666641235352 pixels through wall
+[13:18:48] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:48] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(707.4419, 770.363), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:48] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(713.7589, 781.3494), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:18:48] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[13:18:48] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(774.8107, 779.9567), shooter_id=933299751016, bullet_pos=(1399.59, 796.5652)
+[13:18:48] [INFO] [Bullet] Using shooter_position, distance=625.000305175781
+[13:18:48] [INFO] [Bullet] Distance to wall: 625.000305175781 (42.5574200536397% of viewport)
+[13:18:48] [INFO] [Bullet] Distance-based penetration chance: 97.0163432707536%
+[13:18:48] [INFO] [Bullet] Starting wall penetration at (1399.59, 796.5652)
+[13:18:48] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[13:18:48] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:48] [INFO] [Bullet] Exiting penetration at (1446.241, 797.8054) after traveling 41.6666679382324 pixels through wall
+[13:18:48] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(781.2212, 772.4362), shooter_id=933299751016, bullet_pos=(2489.321, 744.2762)
+[13:18:49] [INFO] [Bullet] Using shooter_position, distance=1708.33227539063
+[13:18:49] [INFO] [Bullet] Distance to wall: 1708.33227539063 (116.323485977405% of viewport)
+[13:18:49] [INFO] [Bullet] Distance-based penetration chance: 26.7353028045189%
+[13:18:49] [INFO] [Bullet] Penetration failed (distance roll)
+[13:18:49] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(528.0676, 770.9449), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:18:49] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[13:18:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(554.1357, 833.8023), shooter_id=933299751016, bullet_pos=(655.4766, 1015.827)
+[13:18:49] [INFO] [Bullet] Using shooter_position, distance=208.333404541016
+[13:18:49] [INFO] [Bullet] Distance to wall: 208.333404541016 (14.1858046065486% of viewport)
+[13:18:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:49] [INFO] [Bullet] Starting wall penetration at (655.4766, 1015.827)
+[13:18:49] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.3118629455566
+[13:18:49] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:49] [INFO] [Bullet] Exiting penetration at (678.177, 1056.6) after traveling 41.6666679382324 pixels through wall
+[13:18:49] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:49] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:49] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:49] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[13:18:49] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[13:18:50] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:50] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
+[13:18:50] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
+[13:18:51] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:51] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
+[13:18:51] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
+[13:18:51] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:51] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:51] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(468.7633, 840.7011), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:51] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:18:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(501.2717, 900.4824), shooter_id=935296240568, bullet_pos=(501.2717, 900.4824)
+[13:18:51] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:51] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:51] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:51] [INFO] [Bullet] Starting wall penetration at (501.2717, 900.4824)
+[13:18:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7.15809154510498
+[13:18:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:51] [INFO] [Bullet] Exiting penetration at (528.1179, 938.6539) after traveling 41.6666717529297 pixels through wall
+[13:18:51] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:51] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:51] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(470.3202, 798.8953), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:51] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:18:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(505.8238, 856.9478), shooter_id=935296240568, bullet_pos=(505.8238, 856.9478)
+[13:18:51] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:51] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:51] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:51] [INFO] [Bullet] Starting wall penetration at (505.8238, 856.9478)
+[13:18:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17.1640949249268
+[13:18:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:51] [INFO] [Bullet] Exiting penetration at (534.5746, 893.7061) after traveling 41.6666679382324 pixels through wall
+[13:18:51] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:51] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:51] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(453.5113, 535.5634), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:18:51] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:18:51] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[13:18:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(486.7935, 476.2094), shooter_id=933014538294, bullet_pos=(502.8723, 437.7701)
+[13:18:51] [INFO] [Bullet] Using shooter_position, distance=41.6666603088379
+[13:18:51] [INFO] [Bullet] Distance to wall: 41.6666603088379 (2.83715951866106% of viewport)
+[13:18:51] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:51] [INFO] [Bullet] Starting wall penetration at (502.8723, 437.7701)
+[13:18:51] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:51] [INFO] [Bullet] Exiting penetration at (520.8807, 394.718) after traveling 41.6666641235352 pixels through wall
+[13:18:51] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:51] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[13:18:51] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:51] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.3466, 551.2473), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:18:51] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:18:51] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(505.7889, 511.7914), shooter_id=933014538294, bullet_pos=(505.7889, 511.7914)
+[13:18:51] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:51] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:51] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:51] [INFO] [Bullet] Starting wall penetration at (505.7889, 511.7914)
+[13:18:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 22.1535701751709
+[13:18:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:51] [INFO] [Bullet] Exiting penetration at (540.4582, 480.5534) after traveling 41.6666717529297 pixels through wall
+[13:18:51] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:51] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:51] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[13:18:51] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.3466, 551.2473), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:18:51] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:18:51] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(518.3902, 550.4244), shooter_id=933014538294, bullet_pos=(518.3902, 550.4244)
+[13:18:51] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:51] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:51] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:51] [INFO] [Bullet] Starting wall penetration at (518.3902, 550.4244)
+[13:18:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41.0271301269531
+[13:18:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:51] [INFO] [Bullet] Exiting penetration at (564.8106, 555.2125) after traveling 41.6666717529297 pixels through wall
+[13:18:51] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:51] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:51] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.3466, 551.2473), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:18:51] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:18:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(498.1742, 599.6531), shooter_id=933014538294, bullet_pos=(498.1742, 599.6531)
+[13:18:51] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:51] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:51] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:51] [INFO] [Bullet] Starting wall penetration at (498.1742, 599.6531)
+[13:18:51] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:51] [INFO] [Bullet] Exiting penetration at (526.9524, 636.3899) after traveling 41.6666717529297 pixels through wall
+[13:18:51] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:52] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(436.5903, 412.8974), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:52] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:18:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(499.8867, 437.8806), shooter_id=932729325616, bullet_pos=(499.8867, 437.8806)
+[13:18:52] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:52] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:52] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:52] [INFO] [Bullet] Starting wall penetration at (499.8867, 437.8806)
+[13:18:52] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:52] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(561.1573, 684.0962), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:52] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[13:18:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19.3258457183838
+[13:18:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:52] [INFO] [Bullet] Exiting penetration at (541.0445, 459.8763) after traveling 41.6666679382324 pixels through wall
+[13:18:52] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:52] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.3466, 551.2473), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:18:52] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:18:52] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[13:18:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(463.5674, 617.9991), shooter_id=933014538294, bullet_pos=(470.281, 701.0616)
+[13:18:52] [INFO] [Bullet] Using shooter_position, distance=83.3333740234375
+[13:18:52] [INFO] [Bullet] Distance to wall: 83.3333740234375 (5.67432267381863% of viewport)
+[13:18:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:52] [INFO] [Bullet] Starting wall penetration at (470.281, 701.0616)
+[13:18:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.6926193237305
+[13:18:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:52] [INFO] [Bullet] Exiting penetration at (474.0406, 747.5766) after traveling 41.6666679382324 pixels through wall
+[13:18:52] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:52] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(412.9133, 402.5065), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:52] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:18:52] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:52] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(566.6109, 669.0543), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:52] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[13:18:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(473.5315, 433.4263), shooter_id=932729325616, bullet_pos=(508.2338, 456.4885)
+[13:18:52] [INFO] [Bullet] Using shooter_position, distance=41.6666641235352
+[13:18:52] [INFO] [Bullet] Distance to wall: 41.6666641235352 (2.83715977841081% of viewport)
+[13:18:52] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:52] [INFO] [Bullet] Starting wall penetration at (508.2338, 456.4885)
+[13:18:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.3466, 551.2473), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:18:52] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:18:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.7363605499268
+[13:18:52] [INFO] [LastChance] Threat detected: @Area2D@1524
+[13:18:52] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
+[13:18:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:18:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:52] [INFO] [Bullet] Exiting penetration at (547.1003, 482.3181) after traveling 41.6666679382324 pixels through wall
+[13:18:52] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:52] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[13:18:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.7342, 618.1168), shooter_id=933014538294, bullet_pos=(413.004, 697.6961)
+[13:18:52] [INFO] [Bullet] Using shooter_position, distance=83.333381652832
+[13:18:52] [INFO] [Bullet] Distance to wall: 83.333381652832 (5.67432319331814% of viewport)
+[13:18:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:52] [INFO] [Bullet] Starting wall penetration at (413.004, 697.6961)
+[13:18:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31.6880588531494
+[13:18:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:52] [INFO] [Bullet] Exiting penetration at (399.1551, 742.2606) after traveling 41.6666679382324 pixels through wall
+[13:18:52] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(497.2847, 660.6251), shooter_id=935296240568, bullet_pos=(50.82926, 435.5086)
+[13:18:52] [INFO] [Bullet] Using shooter_position, distance=499.999908447266
+[13:18:52] [INFO] [Bullet] Distance to wall: 499.999908447266 (34.0459131849337% of viewport)
+[13:18:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:52] [INFO] [Bullet] Starting wall penetration at (50.82926, 435.5086)
+[13:18:52] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
+[13:18:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.5791702270508
+[13:18:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:52] [INFO] [Bullet] Exiting penetration at (9.16008, 414.4977) after traveling 41.6666679382324 pixels through wall
+[13:18:52] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:52] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[13:18:52] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:52] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(566.6109, 669.0543), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:52] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[13:18:52] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[13:18:52] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
+[13:18:52] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[13:18:52] [INFO] [LastChance] Threat detected: Bullet
+[13:18:52] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
+[13:18:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:18:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(499.2144, 659.6572), shooter_id=935296240568, bullet_pos=(55.51897, 544.7494)
+[13:18:52] [INFO] [Bullet] Using shooter_position, distance=458.333282470703
+[13:18:52] [INFO] [Bullet] Distance to wall: 458.333282470703 (31.2087560040204% of viewport)
+[13:18:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(566.1945, 661.0652), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:52] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[13:18:52] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[13:18:52] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[13:18:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(565.6393, 650.4131), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:52] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[13:18:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(498.9203, 662.0836), shooter_id=935296240568, bullet_pos=(51.38469, 563.1837)
+[13:18:52] [INFO] [Bullet] Using shooter_position, distance=458.333251953125
+[13:18:52] [INFO] [Bullet] Distance to wall: 458.333251953125 (31.2087539260224% of viewport)
+[13:18:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(565.0841, 639.761), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:52] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[13:18:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(498.1999, 658.3586), shooter_id=935296240568, bullet_pos=(165.9135, 684.757)
+[13:18:52] [INFO] [Bullet] Using shooter_position, distance=333.333343505859
+[13:18:52] [INFO] [Bullet] Distance to wall: 333.333343505859 (22.6972803052845% of viewport)
+[13:18:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:52] [INFO] [Bullet] Starting wall penetration at (165.9135, 684.757)
+[13:18:52] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:52] [INFO] [Bullet] Exiting penetration at (119.3934, 688.4528) after traveling 41.6666717529297 pixels through wall
+[13:18:52] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(564.5289, 629.1089), source=ENEMY (Enemy10), range=1469, listeners=10
+[13:18:52] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[13:18:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(503.0164, 611.8649), shooter_id=935296240568, bullet_pos=(298.4407, 468.168)
+[13:18:52] [INFO] [Bullet] Using shooter_position, distance=249.999984741211
+[13:18:52] [INFO] [Bullet] Distance to wall: 249.999984741211 (17.0229586704648% of viewport)
+[13:18:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(499.2334, 635.5519), shooter_id=935296240568, bullet_pos=(65.1342, 488.4899)
+[13:18:52] [INFO] [Bullet] Using shooter_position, distance=458.333190917969
+[13:18:52] [INFO] [Bullet] Distance to wall: 458.333190917969 (31.2087497700263% of viewport)
+[13:18:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:52] [INFO] [Bullet] Starting wall penetration at (65.1342, 488.4899)
+[13:18:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11.6827163696289
+[13:18:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:52] [INFO] [Bullet] Exiting penetration at (20.93501, 473.5163) after traveling 41.6666641235352 pixels through wall
+[13:18:52] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(503.0164, 611.8649), shooter_id=935296240568, bullet_pos=(53.21967, 679.5461)
+[13:18:52] [INFO] [Bullet] Using shooter_position, distance=454.860198974609
+[13:18:52] [INFO] [Bullet] Distance to wall: 454.860198974609 (30.9722673623339% of viewport)
+[13:18:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:52] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
+[13:18:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(604.0571, 573.7183), shooter_id=935296240568, bullet_pos=(997.0835, 264.6384)
+[13:18:52] [INFO] [Bullet] Using shooter_position, distance=500.000061035156
+[13:18:52] [INFO] [Bullet] Distance to wall: 500.000061035156 (34.0459235749237% of viewport)
+[13:18:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:52] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[13:18:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(604.0571, 573.7183), shooter_id=935296240568, bullet_pos=(710.295, 48.41394)
+[13:18:52] [INFO] [Bullet] Using shooter_position, distance=535.939453125
+[13:18:52] [INFO] [Bullet] Distance to wall: 535.939453125 (36.4931028690359% of viewport)
+[13:18:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(604.0571, 573.7183), shooter_id=935296240568, bullet_pos=(514.5344, 242.8858)
+[13:18:53] [INFO] [Bullet] Using shooter_position, distance=342.730865478516
+[13:18:53] [INFO] [Bullet] Distance to wall: 342.730865478516 (23.3371748569218% of viewport)
+[13:18:53] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:53] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[13:18:53] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:18:54] [ENEMY] [Enemy1] State: SUPPRESSED -> IN_COVER
+[13:18:54] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
+[13:18:54] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[13:18:54] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[13:18:54] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:18:54] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[13:18:54] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:54] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:54] [ENEMY] [Enemy10] State: SUPPRESSED -> IN_COVER
+[13:18:54] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
+[13:18:54] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[13:18:54] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:54] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.8208, 385.8353), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:54] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:18:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(425.262, 394.9065), shooter_id=932729325616, bullet_pos=(506.0339, 415.4088)
+[13:18:54] [INFO] [Bullet] Using shooter_position, distance=83.3333511352539
+[13:18:54] [INFO] [Bullet] Distance to wall: 83.3333511352539 (5.67432111532012% of viewport)
+[13:18:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:54] [INFO] [Bullet] Starting wall penetration at (506.0339, 415.4088)
+[13:18:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.1308364868164
+[13:18:54] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:54] [INFO] [Bullet] Exiting penetration at (551.2662, 426.8901) after traveling 41.6666679382324 pixels through wall
+[13:18:54] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:54] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[13:18:54] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.8208, 385.8353), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:54] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:18:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(425.4752, 378.5219), shooter_id=932729325616, bullet_pos=(508.8064, 379.1214)
+[13:18:54] [INFO] [Bullet] Using shooter_position, distance=83.3333358764648
+[13:18:54] [INFO] [Bullet] Distance to wall: 83.3333358764648 (5.67432007632112% of viewport)
+[13:18:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:54] [INFO] [Bullet] Starting wall penetration at (508.8064, 379.1214)
+[13:18:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31.472677230835
+[13:18:54] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:54] [INFO] [Bullet] Exiting penetration at (555.4719, 379.4572) after traveling 41.6666717529297 pixels through wall
+[13:18:54] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:54] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
+[13:18:54] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:54] [ENEMY] [Enemy3] State: IN_COVER -> COMBAT
+[13:18:54] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.8208, 385.8353), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:54] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:18:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(424.9335, 374.5887), shooter_id=932729325616, bullet_pos=(505.0005, 351.486)
+[13:18:55] [INFO] [Bullet] Using shooter_position, distance=83.333366394043
+[13:18:55] [INFO] [Bullet] Distance to wall: 83.333366394043 (5.67432215431913% of viewport)
+[13:18:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:55] [INFO] [Bullet] Starting wall penetration at (505.0005, 351.486)
+[13:18:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.8920364379883
+[13:18:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:55] [INFO] [Bullet] Exiting penetration at (549.838, 338.5485) after traveling 41.6666679382324 pixels through wall
+[13:18:55] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.8208, 385.8353), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:55] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:18:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(422.4633, 364.5761), shooter_id=932729325616, bullet_pos=(498.1196, 329.6395)
+[13:18:55] [INFO] [Bullet] Using shooter_position, distance=83.3333206176758
+[13:18:55] [INFO] [Bullet] Distance to wall: 83.3333206176758 (5.67431903732211% of viewport)
+[13:18:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:55] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.8208, 385.8353), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:55] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:18:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(422.4633, 364.5761), shooter_id=932729325616, bullet_pos=(288.5445, 271.4629)
+[13:18:55] [INFO] [Bullet] Using shooter_position, distance=163.108322143555
+[13:18:55] [INFO] [Bullet] Distance to wall: 163.108322143555 (11.1063455845119% of viewport)
+[13:18:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:55] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[13:18:55] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:55] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(419.3542, 356.7793), shooter_id=932729325616, bullet_pos=(525.5234, 290.8012)
+[13:18:55] [INFO] [Bullet] Using shooter_position, distance=125.000030517578
+[13:18:55] [INFO] [Bullet] Distance to wall: 125.000030517578 (8.51148193272994% of viewport)
+[13:18:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(422.4633, 364.5761), shooter_id=932729325616, bullet_pos=(53.71643, 344.1939)
+[13:18:55] [INFO] [Bullet] Using shooter_position, distance=369.309753417969
+[13:18:55] [INFO] [Bullet] Distance to wall: 369.309753417969 (25.1469802109844% of viewport)
+[13:18:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:55] [INFO] [Bullet] Starting wall penetration at (53.71643, 344.1939)
+[13:18:55] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(280.3254, 358.311), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:18:55] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:18:55] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.3700008392334
+[13:18:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:55] [INFO] [Bullet] Exiting penetration at (20.18378, 354.5796) after traveling 30.1041660308838 pixels through wall
+[13:18:55] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[13:18:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(291.3328, 291.1587), shooter_id=933014538294, bullet_pos=(293.3152, 249.5392)
+[13:18:55] [INFO] [Bullet] Using shooter_position, distance=41.6666793823242
+[13:18:55] [INFO] [Bullet] Distance to wall: 41.6666793823242 (2.83716081740981% of viewport)
+[13:18:55] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:55] [INFO] [Bullet] Starting wall penetration at (293.3152, 249.5392)
+[13:18:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.1007919311523
+[13:18:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:55] [INFO] [Bullet] Exiting penetration at (295.5354, 202.9254) after traveling 41.666675567627 pixels through wall
+[13:18:55] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:55] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:55] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(419.3542, 356.7793), shooter_id=932729325616, bullet_pos=(62.69806, 99.4202)
+[13:18:55] [INFO] [Bullet] Using shooter_position, distance=439.815032958984
+[13:18:55] [INFO] [Bullet] Distance to wall: 439.815032958984 (29.9478143427092% of viewport)
+[13:18:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(419.3542, 356.7793), shooter_id=932729325616, bullet_pos=(181.3778, 58.86842)
+[13:18:55] [INFO] [Bullet] Using shooter_position, distance=381.2919921875
+[13:18:55] [INFO] [Bullet] Distance to wall: 381.2919921875 (25.9628728821961% of viewport)
+[13:18:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:55] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:55] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(419.3542, 356.7793), shooter_id=932729325616, bullet_pos=(506.7358, 220.3775)
+[13:18:55] [INFO] [Bullet] Using shooter_position, distance=161.99072265625
+[13:18:55] [INFO] [Bullet] Distance to wall: 161.99072265625 (11.0302461803371% of viewport)
+[13:18:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:55] [INFO] [Bullet] Starting wall penetration at (506.7358, 220.3775)
+[13:18:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11.3142175674438
+[13:18:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:55] [INFO] [Bullet] Exiting penetration at (534.1343, 233.9782) after traveling 25.5885429382324 pixels through wall
+[13:18:55] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
+[13:18:55] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:55] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:56] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:56] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[13:18:56] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:18:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:56] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[13:18:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:56] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.8208, 385.8353), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:56] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:18:56] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[13:18:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(339.6729, 320.2513), shooter_id=932729325616, bullet_pos=(308.389, 243.013)
+[13:18:56] [INFO] [Bullet] Using shooter_position, distance=83.3333206176758
+[13:18:56] [INFO] [Bullet] Distance to wall: 83.3333206176758 (5.67431903732211% of viewport)
+[13:18:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:56] [INFO] [Bullet] Starting wall penetration at (308.389, 243.013)
+[13:18:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.3111419677734
+[13:18:56] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:56] [INFO] [Bullet] Exiting penetration at (290.87, 199.7595) after traveling 41.6666679382324 pixels through wall
+[13:18:56] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:56] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.8208, 385.8353), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:56] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:18:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(292.5746, 366.5084), shooter_id=932729325616, bullet_pos=(46.31083, 323.4482)
+[13:18:56] [INFO] [Bullet] Using shooter_position, distance=250.000045776367
+[13:18:56] [INFO] [Bullet] Distance to wall: 250.000045776367 (17.0229628264609% of viewport)
+[13:18:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:56] [INFO] [Bullet] Starting wall penetration at (46.31083, 323.4482)
+[13:18:56] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.8208, 385.8353), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:56] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:18:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32.1387138366699
+[13:18:56] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:56] [INFO] [Bullet] Exiting penetration at (0.341595, 315.4103) after traveling 41.6666717529297 pixels through wall
+[13:18:56] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(311.048, 435.261), shooter_id=932729325616, bullet_pos=(311.048, 435.261)
+[13:18:56] [INFO] [Bullet] Using shooter_position, distance=0
+[13:18:56] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:18:56] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:56] [INFO] [Bullet] Starting wall penetration at (311.048, 435.261)
+[13:18:56] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:18:56] [INFO] [Bullet] Exiting penetration at (283.0685, 472.6097) after traveling 41.6666679382324 pixels through wall
+[13:18:56] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:56] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[13:18:56] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.8208, 385.8353), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:56] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:18:56] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:18:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(355.7026, 453.8508), shooter_id=932729325616, bullet_pos=(376.6138, 702.9746)
+[13:18:57] [INFO] [Bullet] Using shooter_position, distance=249.999893188477
+[13:18:57] [INFO] [Bullet] Distance to wall: 249.999893188477 (17.0229524364708% of viewport)
+[13:18:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:57] [INFO] [Bullet] Starting wall penetration at (376.6138, 702.9746)
+[13:18:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.8208, 385.8353), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:18:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.6095199584961
+[13:18:57] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:57] [INFO] [Bullet] Exiting penetration at (380.5172, 749.4777) after traveling 41.6666679382324 pixels through wall
+[13:18:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:57] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[13:18:57] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:18:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(372.068, 452.3756), shooter_id=932729325616, bullet_pos=(452.0858, 689.224)
+[13:18:57] [INFO] [Bullet] Using shooter_position, distance=250.000030517578
+[13:18:57] [INFO] [Bullet] Distance to wall: 250.000030517578 (17.0229617874619% of viewport)
+[13:18:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:57] [INFO] [Bullet] Starting wall penetration at (452.0858, 689.224)
+[13:18:57] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[13:18:57] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:18:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 22.6259422302246
+[13:18:57] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:57] [INFO] [Bullet] Exiting penetration at (467.0225, 733.4357) after traveling 41.6666641235352 pixels through wall
+[13:18:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:57] [ENEMY] [Enemy3] Hit taken, health: 1/4
+[13:18:57] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
+[13:18:57] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[13:18:57] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[13:18:57] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[13:18:57] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[13:18:57] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[13:18:58] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[13:18:58] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:18:58] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.8208, 385.8353), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:58] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:18:58] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[13:18:58] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.8208, 385.8353), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:58] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:18:58] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:18:58] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:18:58] [ENEMY] [Enemy4] Hit taken, health: 1/2
+[13:18:58] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[13:18:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(345.3779, 452.7365), shooter_id=932729325616, bullet_pos=(328.1387, 702.1415)
+[13:18:58] [INFO] [Bullet] Using shooter_position, distance=250.000091552734
+[13:18:58] [INFO] [Bullet] Distance to wall: 250.000091552734 (17.0229659434579% of viewport)
+[13:18:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:58] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.8208, 385.8353), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:58] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:18:58] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:18:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(299.8651, 421.4967), shooter_id=932729325616, bullet_pos=(267.1152, 447.2562)
+[13:18:58] [INFO] [Bullet] Using shooter_position, distance=41.666675567627
+[13:18:58] [INFO] [Bullet] Distance to wall: 41.666675567627 (2.83716055766006% of viewport)
+[13:18:58] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:18:58] [INFO] [Bullet] Starting wall penetration at (267.1152, 447.2562)
+[13:18:58] [INFO] [Bullet] Raycast backward hit penetrating body at distance 3.40782165527344
+[13:18:58] [INFO] [Bullet] Max penetration distance exceeded: 83.3333358764648 >= 48
+[13:18:58] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:58] [INFO] [Bullet] Exiting penetration at (197.6853, 501.8663) after traveling 83.3333358764648 pixels through wall
+[13:18:58] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:58] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.8208, 385.8353), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:58] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:18:58] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:18:58] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:18:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.8208, 385.8353), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:58] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:18:58] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:18:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(301.1927, 348.1013), shooter_id=932729325616, bullet_pos=(41.53677, 215.2547)
+[13:18:58] [INFO] [Bullet] Using shooter_position, distance=291.666656494141
+[13:18:58] [INFO] [Bullet] Distance to wall: 291.666656494141 (19.8601189683752% of viewport)
+[13:18:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:58] [ENEMY] [Enemy2] Hit taken, health: 1/2
+[13:18:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(352.8801, 317.9664), shooter_id=932729325616, bullet_pos=(337.3428, 236.0943)
+[13:18:58] [INFO] [Bullet] Using shooter_position, distance=83.3333358764648
+[13:18:58] [INFO] [Bullet] Distance to wall: 83.3333358764648 (5.67432007632112% of viewport)
+[13:18:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:58] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:18:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.8208, 385.8353), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:18:58] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:18:58] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:18:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(352.8801, 317.9664), shooter_id=932729325616, bullet_pos=(380.7241, 59.25425)
+[13:18:58] [INFO] [Bullet] Using shooter_position, distance=260.206176757813
+[13:18:58] [INFO] [Bullet] Distance to wall: 260.206176757813 (17.7179170524075% of viewport)
+[13:18:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:58] [INFO] [Bullet] Starting wall penetration at (380.7241, 59.25425)
+[13:18:58] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.3543310165405
+[13:18:58] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:58] [INFO] [Bullet] Exiting penetration at (390.3534, 20.00143) after traveling 35.4166717529297 pixels through wall
+[13:18:58] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[13:18:58] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[13:18:58] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:18:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(383.9923, 323.0208), shooter_id=932729325616, bullet_pos=(464.5675, 42.70474)
+[13:18:59] [INFO] [Bullet] Using shooter_position, distance=291.666687011719
+[13:18:59] [INFO] [Bullet] Distance to wall: 291.666687011719 (19.8601210463732% of viewport)
+[13:18:59] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:18:59] [INFO] [Bullet] Starting wall penetration at (464.5675, 42.70474)
+[13:18:59] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[13:18:59] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.5284767150879
+[13:18:59] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:18:59] [INFO] [Bullet] Exiting penetration at (477.4595, -2.145832) after traveling 41.6666679382324 pixels through wall
+[13:18:59] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:18:59] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:18:59] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:18:59] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:18:59] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:18:59] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:18:59] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:18:59] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:18:59] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:18:59] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:18:59] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:18:59] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:19:00] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:19:00] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[13:19:00] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:19:00] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[13:19:00] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:19:00] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:19:00] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[13:19:00] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:19:00] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:19:00] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:19:00] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:19:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(363.4933, 399.864), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:19:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:19:00] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[13:19:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(329.5026, 340.9129), shooter_id=932729325616, bullet_pos=(279.8765, 273.9675)
+[13:19:00] [INFO] [Bullet] Using shooter_position, distance=83.3333511352539
+[13:19:00] [INFO] [Bullet] Distance to wall: 83.3333511352539 (5.67432111532012% of viewport)
+[13:19:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:00] [INFO] [Bullet] Starting wall penetration at (279.8765, 273.9675)
+[13:19:00] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:19:00] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:19:00] [INFO] [Bullet] Exiting penetration at (252.0858, 236.4781) after traveling 41.6666679382324 pixels through wall
+[13:19:00] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:19:00] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:19:00] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:19:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(378.558, 394.474), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:19:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:19:00] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:19:00] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[13:19:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(310.5187, 395.5943), shooter_id=932729325616, bullet_pos=(62.67193, 428.335)
+[13:19:00] [INFO] [Bullet] Using shooter_position, distance=249.999984741211
+[13:19:00] [INFO] [Bullet] Distance to wall: 249.999984741211 (17.0229586704648% of viewport)
+[13:19:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:00] [INFO] [Bullet] Starting wall penetration at (62.67193, 428.335)
+[13:19:00] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:19:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(378.558, 394.474), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:19:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:19:00] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15.7282705307007
+[13:19:00] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:19:00] [INFO] [Bullet] Exiting penetration at (16.40719, 434.4466) after traveling 41.6666679382324 pixels through wall
+[13:19:00] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:19:00] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:19:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(365.4797, 461.2539), shooter_id=932729325616, bullet_pos=(345.8706, 710.4838)
+[13:19:00] [INFO] [Bullet] Using shooter_position, distance=250.000122070313
+[13:19:00] [INFO] [Bullet] Distance to wall: 250.000122070313 (17.0229680214559% of viewport)
+[13:19:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:00] [INFO] [Bullet] Starting wall penetration at (345.8706, 710.4838)
+[13:19:00] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:19:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(378.558, 394.474), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:19:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:19:00] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.1458053588867
+[13:19:00] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:19:00] [INFO] [Bullet] Exiting penetration at (342.2102, 757.0067) after traveling 41.6666717529297 pixels through wall
+[13:19:00] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:19:00] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[13:19:00] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:19:00] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[13:19:00] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
+[13:19:00] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
+[13:19:00] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:19:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(378.558, 394.474), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:19:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:19:00] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
+[13:19:00] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
+[13:19:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(424.0475, 445.0833), shooter_id=932729325616, bullet_pos=(517.7137, 527.8579)
+[13:19:01] [INFO] [Bullet] Using shooter_position, distance=124.999961853027
+[13:19:01] [INFO] [Bullet] Distance to wall: 124.999961853027 (8.51147725723441% of viewport)
+[13:19:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:01] [INFO] [Bullet] Starting wall penetration at (517.7137, 527.8579)
+[13:19:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38.2773742675781
+[13:19:01] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:19:01] [INFO] [Bullet] Exiting penetration at (552.6824, 558.7604) after traveling 41.6666679382324 pixels through wall
+[13:19:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:19:01] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:19:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(378.558, 394.474), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:19:01] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:19:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(431.431, 437.3114), shooter_id=932729325616, bullet_pos=(501.7664, 482.0034)
+[13:19:01] [INFO] [Bullet] Using shooter_position, distance=83.3333435058594
+[13:19:01] [INFO] [Bullet] Distance to wall: 83.3333435058594 (5.67432059582062% of viewport)
+[13:19:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(407.1525, 456.2231), shooter_id=932729325616, bullet_pos=(754.7863, 1025.078)
+[13:19:01] [INFO] [Bullet] Using shooter_position, distance=666.666809082031
+[13:19:01] [INFO] [Bullet] Distance to wall: 666.666809082031 (45.394568922561% of viewport)
+[13:19:01] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
+[13:19:01] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[13:19:01] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[13:19:01] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[13:19:01] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:19:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(378.558, 394.474), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:19:01] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:19:01] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[13:19:01] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[13:19:01] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
+[13:19:01] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
+[13:19:01] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[13:19:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(434.3037, 433.4998), shooter_id=932729325616, bullet_pos=(507.599, 473.1514)
+[13:19:01] [INFO] [Bullet] Using shooter_position, distance=83.3333129882813
+[13:19:01] [INFO] [Bullet] Distance to wall: 83.3333129882813 (5.67431851782261% of viewport)
+[13:19:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(431.431, 437.3114), shooter_id=932729325616, bullet_pos=(169.5212, 694.8629)
+[13:19:01] [INFO] [Bullet] Using shooter_position, distance=367.327453613281
+[13:19:01] [INFO] [Bullet] Distance to wall: 367.327453613281 (25.0120017721554% of viewport)
+[13:19:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:01] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:19:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(378.558, 394.474), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:19:01] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:19:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(407.1525, 456.2231), shooter_id=932729325616, bullet_pos=(915.4998, 626.2402)
+[13:19:01] [INFO] [Bullet] Using shooter_position, distance=536.024963378906
+[13:19:01] [INFO] [Bullet] Distance to wall: 536.024963378906 (36.4989254194638% of viewport)
+[13:19:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(435.2201, 432.157), shooter_id=932729325616, bullet_pos=(509.4416, 470.0465)
+[13:19:01] [INFO] [Bullet] Using shooter_position, distance=83.3333206176758
+[13:19:01] [INFO] [Bullet] Distance to wall: 83.3333206176758 (5.67431903732211% of viewport)
+[13:19:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(431.431, 437.3114), shooter_id=932729325616, bullet_pos=(65.18147, 625.2744)
+[13:19:01] [INFO] [Bullet] Using shooter_position, distance=411.665832519531
+[13:19:01] [INFO] [Bullet] Distance to wall: 411.665832519531 (28.0310835229715% of viewport)
+[13:19:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(434.3037, 433.4998), shooter_id=932729325616, bullet_pos=(180.8689, 694.3831)
+[13:19:01] [INFO] [Bullet] Using shooter_position, distance=363.715972900391
+[13:19:01] [INFO] [Bullet] Distance to wall: 363.715972900391 (24.7660894094872% of viewport)
+[13:19:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:01] [INFO] [Bullet] Starting wall penetration at (180.8689, 694.3831)
+[13:19:01] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:19:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(378.558, 394.474), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:19:01] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:19:01] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[13:19:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8.99549007415771
+[13:19:01] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:19:01] [INFO] [Bullet] Exiting penetration at (147.4023, 717.0435) after traveling 35.4166679382324 pixels through wall
+[13:19:01] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[13:19:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(435.2404, 432.1263), shooter_id=932729325616, bullet_pos=(509.4824, 469.9756)
+[13:19:01] [INFO] [Bullet] Using shooter_position, distance=83.3333358764648
+[13:19:01] [INFO] [Bullet] Distance to wall: 83.3333358764648 (5.67432007632112% of viewport)
+[13:19:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:01] [INFO] [Bullet] Starting wall penetration at (509.4824, 469.9756)
+[13:19:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30.3713817596436
+[13:19:01] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:19:01] [INFO] [Bullet] Exiting penetration at (551.058, 491.1713) after traveling 41.6666679382324 pixels through wall
+[13:19:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:19:01] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:19:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(378.558, 394.474), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:19:01] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:19:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(435.2404, 432.1263), shooter_id=932729325616, bullet_pos=(509.4824, 469.9756)
+[13:19:01] [INFO] [Bullet] Using shooter_position, distance=83.3333358764648
+[13:19:01] [INFO] [Bullet] Distance to wall: 83.3333358764648 (5.67432007632112% of viewport)
+[13:19:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:01] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[13:19:01] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
+[13:19:01] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[13:19:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(378.558, 394.474), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:19:01] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:19:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(431.431, 437.3114), shooter_id=932729325616, bullet_pos=(507.572, 411.8486)
+[13:19:01] [INFO] [Bullet] Using shooter_position, distance=80.2857894897461
+[13:19:01] [INFO] [Bullet] Distance to wall: 80.2857894897461 (5.46680703890578% of viewport)
+[13:19:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:01] [INFO] [Bullet] Starting wall penetration at (507.572, 411.8486)
+[13:19:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(407.1525, 456.2231), shooter_id=932729325616, bullet_pos=(564.6264, 58.64392)
+[13:19:01] [INFO] [Bullet] Using shooter_position, distance=427.629791259766
+[13:19:01] [INFO] [Bullet] Distance to wall: 427.629791259766 (29.1180988287257% of viewport)
+[13:19:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.3486051559448
+[13:19:01] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:19:01] [INFO] [Bullet] Exiting penetration at (535.1219, 398.5574) after traveling 25.5885410308838 pixels through wall
+[13:19:01] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
+[13:19:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(435.2404, 432.1263), shooter_id=932729325616, bullet_pos=(509.4824, 469.9756)
+[13:19:01] [INFO] [Bullet] Using shooter_position, distance=83.3333358764648
+[13:19:01] [INFO] [Bullet] Distance to wall: 83.3333358764648 (5.67432007632112% of viewport)
+[13:19:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:01] [INFO] [LastChance] Threat detected: Bullet
+[13:19:01] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
+[13:19:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:19:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(435.2404, 432.1263), shooter_id=932729325616, bullet_pos=(184.7372, 694.1108)
+[13:19:01] [INFO] [Bullet] Using shooter_position, distance=362.474456787109
+[13:19:01] [INFO] [Bullet] Distance to wall: 362.474456787109 (24.681552294387% of viewport)
+[13:19:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(435.2404, 432.1263), shooter_id=932729325616, bullet_pos=(43.49936, 629.0062)
+[13:19:02] [INFO] [Bullet] Using shooter_position, distance=438.432159423828
+[13:19:02] [INFO] [Bullet] Distance to wall: 438.432159423828 (29.8536519408202% of viewport)
+[13:19:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(407.1525, 456.2231), shooter_id=932729325616, bullet_pos=(284.2103, 430.3218)
+[13:19:02] [INFO] [Bullet] Using shooter_position, distance=125.640998840332
+[13:19:02] [INFO] [Bullet] Distance to wall: 125.640998840332 (8.55512664446307% of viewport)
+[13:19:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(407.1525, 456.2231), shooter_id=932729325616, bullet_pos=(62.18686, 50.43998)
+[13:19:02] [INFO] [Bullet] Using shooter_position, distance=532.598571777344
+[13:19:02] [INFO] [Bullet] Distance to wall: 532.598571777344 (36.2656161147349% of viewport)
+[13:19:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(407.1525, 456.2231), shooter_id=932729325616, bullet_pos=(60.26315, 55.0551)
+[13:19:02] [INFO] [Bullet] Using shooter_position, distance=530.346984863281
+[13:19:02] [INFO] [Bullet] Distance to wall: 530.346984863281 (36.1123014214531% of viewport)
+[13:19:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:19:02] [INFO] [Bullet] Starting wall penetration at (60.26315, 55.0551)
+[13:19:02] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:19:02] [INFO] [Bullet] Exiting penetration at (51.22647, 76.73486) after traveling 18.4877223968506 pixels through wall
+[13:19:02] [INFO] [Bullet] Damage multiplier after penetration: 0.028125
+[13:19:02] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[13:19:02] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[13:19:02] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:19:02] [ENEMY] [Enemy1] State: COMBAT -> SEEKING_COVER
+[13:19:03] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[13:19:03] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
+[13:19:03] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
+[13:19:03] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
+[13:19:03] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
+[13:19:03] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
+[13:19:03] [INFO] ------------------------------------------------------------
+[13:19:03] [INFO] GAME LOG ENDED: 2026-01-22T13:19:03
+[13:19:03] [INFO] ============================================================
diff --git a/docs/case-studies/issue-217/feedback/game_log_20260122_134431.txt b/docs/case-studies/issue-217/feedback/game_log_20260122_134431.txt
new file mode 100644
index 00000000..bdc6c579
--- /dev/null
+++ b/docs/case-studies/issue-217/feedback/game_log_20260122_134431.txt
@@ -0,0 +1,300 @@
+[13:44:31] [INFO] ============================================================
+[13:44:31] [INFO] GAME LOG STARTED
+[13:44:31] [INFO] ============================================================
+[13:44:31] [INFO] Timestamp: 2026-01-22T13:44:31
+[13:44:31] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_134431.txt
+[13:44:31] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[13:44:31] [INFO] OS: Windows
+[13:44:31] [INFO] Debug build: false
+[13:44:31] [INFO] Engine version: 4.3-stable (official)
+[13:44:31] [INFO] Project: Godot Top-Down Template
+[13:44:31] [INFO] ------------------------------------------------------------
+[13:44:31] [INFO] [GameManager] GameManager ready
+[13:44:31] [INFO] [ScoreManager] ScoreManager ready
+[13:44:31] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[13:44:31] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[13:44:31] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[13:44:31] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[13:44:31] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[13:44:31] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[13:44:31] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[13:44:31] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[13:44:31] [INFO] [LastChance] Resetting all effects (scene change detected)
+[13:44:31] [INFO] [LastChance] Last chance shader loaded successfully
+[13:44:31] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[13:44:31] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[13:44:31] [INFO] [LastChance]   Sepia intensity: 0.70
+[13:44:31] [INFO] [LastChance]   Brightness: 0.60
+[13:44:31] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[13:44:31] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[13:44:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[13:44:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[13:44:31] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[13:44:31] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[13:44:31] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[13:44:31] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[13:44:31] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[13:44:31] [INFO] [ScoreManager] Level started with 10 enemies
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[13:44:31] [ENEMY] [Enemy1] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[13:44:31] [ENEMY] [Enemy2] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[13:44:31] [ENEMY] [Enemy3] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[13:44:31] [ENEMY] [Enemy4] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[13:44:31] [ENEMY] [Enemy5] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[13:44:31] [ENEMY] [Enemy6] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[13:44:31] [ENEMY] [Enemy7] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 3, behavior: PATROL, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[13:44:31] [ENEMY] [Enemy8] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[13:44:31] [ENEMY] [Enemy9] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[13:44:31] [ENEMY] [Enemy10] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[13:44:31] [INFO] [Player] Detecting weapon pose (frame 3)...
+[13:44:31] [INFO] [Player] Detected weapon: Rifle (default pose)
+[13:44:31] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[13:44:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[13:44:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[13:44:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[13:44:31] [INFO] [LastChance] Found player: Player
+[13:44:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[13:44:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[13:44:31] [INFO] [LastChance] Connected to player Died signal (C#)
+[13:44:34] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[13:44:34] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[13:44:34] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[13:44:35] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[13:44:35] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[13:44:35] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:44:35] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[13:44:35] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[13:44:35] [ENEMY] [Enemy4] State: IDLE -> COMBAT
+[13:44:35] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[13:44:36] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[13:44:36] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[13:44:36] [ENEMY] [Enemy10] FLANKING started: target=(599.7478, 703.6628), side=right, pos=(1083.474, 1461.707)
+[13:44:36] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[13:44:37] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[13:44:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(724.4212, 553.2769), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[13:44:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[13:44:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(724.4212, 553.2769), shooter_id=43855644338, bullet_pos=(1050.3102, 39.597782)
+[13:44:38] [INFO] [Bullet] Using shooter_position, distance=608,3337
+[13:44:38] [INFO] [Bullet] Distance to wall: 608,3337 (41,42256% of viewport)
+[13:44:38] [INFO] [Bullet] Distance-based penetration chance: 98,34035%
+[13:44:38] [INFO] [Bullet] Starting wall penetration at (1050.3102, 39.597782)
+[13:44:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37,66891
+[13:44:38] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:44:38] [INFO] [Bullet] Exiting penetration at (1075.3099, 0.19226456) after traveling 41,666676 pixels through wall
+[13:44:38] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[13:44:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(680.1254, 718.3966), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:44:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:38] [INFO] [LastChance] Threat detected: Bullet
+[13:44:38] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:38] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[13:44:38] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[13:44:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(680.1254, 718.3966), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:44:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:38] [INFO] [LastChance] Threat detected: Bullet
+[13:44:38] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:38] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[13:44:38] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[13:44:38] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[13:44:38] [INFO] [PenultimateHit]   - Time scale: 0.10
+[13:44:38] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[13:44:38] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[13:44:38] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[13:44:38] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[13:44:38] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[13:44:38] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[13:44:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(680.1254, 718.3966), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:44:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:38] [INFO] [LastChance] Threat detected: Bullet
+[13:44:38] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:39] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[13:44:39] [INFO] [PenultimateHit] Ending penultimate hit effect
+[13:44:39] [INFO] [LastChance] Resetting all effects (scene change detected)
+[13:44:39] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[13:44:39] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[13:44:39] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[13:44:39] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[13:44:39] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[13:44:39] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[13:44:39] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[13:44:39] [INFO] [ScoreManager] Level started with 10 enemies
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[13:44:39] [ENEMY] [Enemy1] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[13:44:39] [ENEMY] [Enemy2] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[13:44:39] [ENEMY] [Enemy3] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[13:44:39] [ENEMY] [Enemy4] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[13:44:39] [ENEMY] [Enemy5] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[13:44:39] [ENEMY] [Enemy6] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[13:44:39] [ENEMY] [Enemy7] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[13:44:39] [ENEMY] [Enemy8] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[13:44:39] [ENEMY] [Enemy9] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[13:44:39] [ENEMY] [Enemy10] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[13:44:39] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[13:44:39] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[13:44:39] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[13:44:39] [INFO] [LastChance] Found player: Player
+[13:44:39] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[13:44:39] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[13:44:39] [INFO] [LastChance] Connected to player Died signal (C#)
+[13:44:39] [INFO] [Player] Detecting weapon pose (frame 3)...
+[13:44:39] [INFO] [Player] Detected weapon: Rifle (default pose)
+[13:44:39] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[13:44:39] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[13:44:40] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:44:40] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[13:44:41] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[13:44:41] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[13:44:41] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[13:44:41] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[13:44:41] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[13:44:41] [ENEMY] [Enemy10] FLANKING started: target=(805.2064, 560.5539), side=left, pos=(1061.496, 1460.101)
+[13:44:41] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[13:44:42] [ENEMY] [Enemy4] State: IDLE -> COMBAT
+[13:44:42] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[13:44:43] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[13:44:43] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[13:44:44] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[13:44:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(739.9191, 683.1772), source=ENEMY (Enemy4), range=1469, listeners=20
+[13:44:44] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[13:44:44] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:44] [INFO] [LastChance] Threat detected: Bullet
+[13:44:44] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:44] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[13:44:44] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[13:44:44] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[13:44:44] [INFO] [PenultimateHit]   - Time scale: 0.10
+[13:44:44] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[13:44:44] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[13:44:44] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[13:44:44] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[13:44:44] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[13:44:44] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[13:44:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(726.4813, 660.1438), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:44:44] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:44] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[13:44:44] [INFO] [LastChance] Threat detected: Bullet
+[13:44:44] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[13:44:45] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[13:44:45] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[13:44:45] [INFO] [PenultimateHit] Ending penultimate hit effect
+[13:44:45] [INFO] [LastChance] Player died
+[13:44:45] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
+[13:44:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(726.4813, 660.1438), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:44:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:45] [INFO] [LastChance] Threat detected: Bullet
+[13:44:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:45] [ENEMY] [Enemy1] FLANKING started: target=(492.7919, 618.0549), side=left, pos=(457.1885, 441.6641)
+[13:44:45] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
+[13:44:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(726.4813, 660.1438), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:44:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:45] [INFO] [LastChance] Threat detected: Bullet
+[13:44:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(726.4813, 660.1438), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:44:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:45] [INFO] [LastChance] Threat detected: Bullet
+[13:44:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(726.4813, 660.1438), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:44:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:45] [INFO] [LastChance] Threat detected: Bullet
+[13:44:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:45] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:44:46] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[13:44:46] [INFO] [LastChance] Resetting all effects (scene change detected)
+[13:44:46] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[13:44:46] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[13:44:46] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[13:44:46] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[13:44:46] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[13:44:46] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[13:44:46] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[13:44:46] [INFO] [ScoreManager] Level started with 10 enemies
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[13:44:46] [ENEMY] [Enemy1] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[13:44:46] [ENEMY] [Enemy2] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[13:44:46] [ENEMY] [Enemy3] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[13:44:46] [ENEMY] [Enemy4] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[13:44:46] [ENEMY] [Enemy5] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[13:44:46] [ENEMY] [Enemy6] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[13:44:46] [ENEMY] [Enemy7] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[13:44:46] [ENEMY] [Enemy8] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[13:44:46] [ENEMY] [Enemy9] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[13:44:46] [ENEMY] [Enemy10] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[13:44:46] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[13:44:46] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[13:44:46] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[13:44:46] [INFO] [LastChance] Found player: Player
+[13:44:46] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[13:44:46] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[13:44:46] [INFO] [LastChance] Connected to player Died signal (C#)
+[13:44:46] [INFO] [Player] Detecting weapon pose (frame 3)...
+[13:44:46] [INFO] [Player] Detected weapon: Rifle (default pose)
+[13:44:46] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[13:44:51] [INFO] ------------------------------------------------------------
+[13:44:51] [INFO] GAME LOG ENDED: 2026-01-22T13:44:51
+[13:44:51] [INFO] ============================================================
diff --git a/docs/case-studies/issue-217/feedback/phase11-aiming-issue-analysis.md b/docs/case-studies/issue-217/feedback/phase11-aiming-issue-analysis.md
new file mode 100644
index 00000000..6e21c3f0
--- /dev/null
+++ b/docs/case-studies/issue-217/feedback/phase11-aiming-issue-analysis.md
@@ -0,0 +1,87 @@
+# Phase 11: Enemy Aiming Issue Analysis
+
+## User Report
+**Date**: 2026-01-22
+**Issue**: "враги стреляют мимо меня (целятся не оружием)" - Enemies shoot past me (not aiming with weapon)
+**Log File**: game_log_20260122_131801.txt
+
+## Root Cause Analysis
+
+### Problem Summary
+Enemies were shooting in the **opposite direction** from where their weapon was visually pointing. The bullets were being fired 180 degrees away from the intended target (player).
+
+### Technical Details
+
+#### The Bug Location
+File: `scripts/objects/enemy.gd`
+Function: `_update_enemy_model_rotation()` (lines 1057-1095)
+
+#### Incorrect Code
+```gdscript
+func _update_enemy_model_rotation() -> void:
+    # ...
+    var target_angle := face_direction.angle() + PI  # <-- BUG: Adding PI
+    _enemy_model.rotation = target_angle
+```
+
+#### Why This Was Wrong
+
+1. **Sprite Orientation**: Enemy sprites face RIGHT (+X direction) in local space, just like player sprites
+2. **PI Offset Misunderstanding**: The comment claimed "Enemy sprites face LEFT (PI radians offset from player sprites which face RIGHT)" - this was incorrect
+3. **Effect on Weapon Direction**:
+   - `_get_weapon_forward_direction()` uses `_weapon_sprite.global_transform.x.normalized()`
+   - When `_enemy_model.rotation = face_direction.angle() + PI`, the weapon's +X axis points AWAY from the player
+   - Bullets used this direction, so they flew in the opposite direction
+
+#### Comparison with Player Code
+Player's `_update_player_model_rotation()` (lines 350-377):
+```gdscript
+var target_angle := aim_direction.angle()  # No PI offset
+_player_model.rotation = target_angle
+```
+
+The player code correctly sets rotation without adding PI, and the weapon points toward the target.
+
+### Evidence from Logs
+
+Looking at bullet spawn positions in the game log, we can see patterns like:
+```
+[INFO] [Bullet] _get_distance_to_shooter: shooter_position=(476.8153, 810.0131), shooter_id=41188066843, bullet_pos=(261.6806, 1396.82)
+```
+
+The bullet traveling from (476, 810) to (261, 1396) shows a direction of approximately (-0.32, 0.95) - going down-left. If the enemy was at (507, 749) aiming at the player, this direction is roughly 180 degrees off from where the player would be.
+
+## Fix Applied
+
+Remove the `+ PI` from the rotation calculation and update the flip logic accordingly:
+
+```gdscript
+func _update_enemy_model_rotation() -> void:
+    # ...
+    # Calculate target rotation angle
+    # Enemy sprites face RIGHT (same as player sprites, 0 radians)
+    var target_angle := face_direction.angle()  # Removed + PI
+
+    # Apply rotation to the enemy model
+    _enemy_model.rotation = target_angle
+
+    # Handle sprite flipping for left/right aim
+    # When aiming left (angle > 90 or < -90), flip vertically
+    var aiming_left := absf(target_angle) > PI / 2
+
+    # Flip the enemy model vertically when aiming left
+    if aiming_left:
+        _enemy_model.scale = Vector2(enemy_model_scale, -enemy_model_scale)
+    else:
+        _enemy_model.scale = Vector2(enemy_model_scale, enemy_model_scale)
+```
+
+## Impact
+
+- Enemies now correctly aim their weapons at the player
+- Bullets spawn from weapon muzzle and travel toward the target
+- Visual alignment matches actual bullet trajectory
+
+## Lesson Learned
+
+When copying/adapting code between similar entities (player/enemy), verify sprite orientation assumptions rather than assuming they need different handling. Both player and enemy use RIGHT-facing sprites, so their rotation logic should be identical.
diff --git a/docs/case-studies/issue-217/feedback/phase13-weapon-aim-offset-fix.md b/docs/case-studies/issue-217/feedback/phase13-weapon-aim-offset-fix.md
new file mode 100644
index 00000000..d51ecbe8
--- /dev/null
+++ b/docs/case-studies/issue-217/feedback/phase13-weapon-aim-offset-fix.md
@@ -0,0 +1,134 @@
+# Phase 13: Weapon Aim Offset Fix
+
+## User Report
+**Date**: 2026-01-22
+**Issue**: "теперь враги снова стреляют не из оружия (поверни модельку так, чтобы оружие совпало с текущей линией огня и прицела)"
+Translation: "now enemies are again shooting not from the weapon (rotate the model so the weapon matches the current line of fire and aim)"
+**Log File**: game_log_20260122_134431.txt
+
+## Root Cause Analysis
+
+### Problem Summary
+The enemy model rotation was calculated based on the direction from **enemy center** to player. However, the weapon is offset from the enemy center (at position (0, 6) in local coordinates). This meant that while the model appeared to face the player, the weapon barrel didn't actually point at the player.
+
+### Technical Details
+
+#### The Geometry Issue
+```
+Enemy at E = (0, 0)
+Player at P = (100, 50)
+Weapon offset from center: ~8 pixels (when scaled)
+
+Old calculation:
+- Direction = (P - E).normalized() = direction from enemy center to player
+- Model rotates to this angle
+- But weapon is NOT at enemy center!
+
+Result:
+- Model faces the player (from enemy center perspective)
+- Weapon barrel points slightly OFF from the player
+- Error angle ≈ atan(weapon_offset / distance_to_player)
+- For close targets (50 pixels), error could be ~9 degrees
+```
+
+#### Scene Structure Analysis
+From `Enemy.tscn`:
+- EnemyModel (origin at Enemy position)
+  - Body at (-4, 0)
+  - WeaponMount at (0, 6) - offset BELOW enemy center
+  - WeaponSprite (child of WeaponMount)
+
+When the model rotates, the weapon orbits around the model origin (0, 0), not around the weapon itself.
+
+### Previous Fixes in This Issue
+1. **Phase 11**: Removed incorrect PI offset from rotation (enemy was facing opposite direction)
+2. **Phase 12**: Changed from `global_transform.x` to `Vector2.from_angle()` for direction calculation (fixed ~45 degree offset when Y-flipped)
+
+This Phase 13 fix addresses a different problem: the weapon position offset from enemy center.
+
+## Solution Implemented
+
+### New Function: `_calculate_aim_direction_from_weapon()`
+Added a new function that calculates the correct aim direction accounting for weapon offset:
+
+```gdscript
+func _calculate_aim_direction_from_weapon(target_pos: Vector2) -> Vector2:
+    var weapon_mount_local := Vector2(0, 6)
+    var rough_direction := (target_pos - global_position)
+    var rough_distance := rough_direction.length()
+
+    # For distant targets, simple calculation is sufficient
+    if rough_distance > 25.0 * enemy_model_scale:
+        return rough_direction.normalized()
+
+    # For close targets, iterate to find correct rotation
+    var current_direction := rough_direction.normalized()
+    for _i in range(2):
+        var estimated_angle := current_direction.angle()
+        var would_flip := absf(estimated_angle) > PI / 2
+
+        # Calculate weapon position with estimated rotation
+        var weapon_offset_world: Vector2
+        if would_flip:
+            var scaled := Vector2(weapon_mount_local.x * enemy_model_scale,
+                                  weapon_mount_local.y * -enemy_model_scale)
+            weapon_offset_world = scaled.rotated(estimated_angle)
+        else:
+            var scaled := weapon_mount_local * enemy_model_scale
+            weapon_offset_world = scaled.rotated(estimated_angle)
+
+        var weapon_global_pos := global_position + weapon_offset_world
+        var new_direction := (target_pos - weapon_global_pos)
+        if new_direction.length_squared() < 0.01:
+            break
+        current_direction = new_direction.normalized()
+
+    return current_direction
+```
+
+### Modified: `_update_enemy_model_rotation()`
+Changed the aim direction calculation:
+
+```gdscript
+# Before:
+face_direction = (_player.global_position - global_position).normalized()
+
+# After:
+face_direction = _calculate_aim_direction_from_weapon(_player.global_position)
+```
+
+### Key Design Decisions
+
+1. **Distance Threshold**: For targets > 25 pixels away (scaled), use simple calculation. The angular error at this distance is negligible.
+
+2. **Iterative Approach**: The weapon position depends on rotation, which we're calculating. We iterate 2 times to converge on the correct value.
+
+3. **Y-Flip Handling**: When the model is flipped (aiming left), the Y scale is negative, affecting how the weapon offset transforms. This is handled explicitly in the calculation.
+
+### Debug Logging Added
+Added detailed debug output to `_shoot()` and `_get_bullet_spawn_position()` to help diagnose any remaining issues:
+- Enemy and player positions
+- Model rotation and scale
+- Weapon node position
+- Bullet spawn position and offset
+- Comparison of calculated vs visual forward direction
+
+## Expected Results
+
+1. **Close Range**: Weapon barrel should now correctly point at the player even at close range
+2. **Long Range**: Behavior unchanged (simple calculation used for efficiency)
+3. **Y-Flip**: Correct handling whether enemy is aiming left or right
+
+## Test Plan
+- [ ] Verify weapon barrel visually points at player at close range (<50 pixels)
+- [ ] Verify weapon barrel visually points at player at medium range (50-200 pixels)
+- [ ] Verify weapon barrel visually points at player at long range (>200 pixels)
+- [ ] Verify bullets spawn from weapon muzzle and fly toward player
+- [ ] Verify Y-flip behavior (aiming left) works correctly
+- [ ] Check debug logs for any discrepancies between calculated and visual directions
+
+## Files Modified
+- `scripts/objects/enemy.gd`:
+  - Modified `_update_enemy_model_rotation()` to use new aim calculation
+  - Added `_calculate_aim_direction_from_weapon()` function
+  - Added debug logging to `_shoot()` and `_get_bullet_spawn_position()`
diff --git a/docs/case-studies/issue-217/game_log_20260122_133325.txt b/docs/case-studies/issue-217/game_log_20260122_133325.txt
new file mode 100644
index 00000000..bcee4ba1
--- /dev/null
+++ b/docs/case-studies/issue-217/game_log_20260122_133325.txt
@@ -0,0 +1,1603 @@
+[13:33:25] [INFO] ============================================================
+[13:33:25] [INFO] GAME LOG STARTED
+[13:33:25] [INFO] ============================================================
+[13:33:25] [INFO] Timestamp: 2026-01-22T13:33:25
+[13:33:25] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_133325.txt
+[13:33:25] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[13:33:25] [INFO] OS: Windows
+[13:33:25] [INFO] Debug build: false
+[13:33:25] [INFO] Engine version: 4.3-stable (official)
+[13:33:25] [INFO] Project: Godot Top-Down Template
+[13:33:25] [INFO] ------------------------------------------------------------
+[13:33:25] [INFO] [GameManager] GameManager ready
+[13:33:25] [INFO] [ScoreManager] ScoreManager ready
+[13:33:25] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[13:33:25] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[13:33:25] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[13:33:25] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[13:33:25] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[13:33:25] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[13:33:25] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[13:33:25] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[13:33:25] [INFO] [LastChance] Resetting all effects (scene change detected)
+[13:33:25] [INFO] [LastChance] Last chance shader loaded successfully
+[13:33:25] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[13:33:25] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[13:33:25] [INFO] [LastChance]   Sepia intensity: 0.70
+[13:33:25] [INFO] [LastChance]   Brightness: 0.60
+[13:33:25] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[13:33:25] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[13:33:25] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[13:33:25] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[13:33:25] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[13:33:25] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[13:33:25] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[13:33:25] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[13:33:25] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[13:33:25] [INFO] [ScoreManager] Level started with 10 enemies
+[13:33:25] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[13:33:25] [ENEMY] [Enemy1] Registered as sound listener
+[13:33:25] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[13:33:25] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[13:33:25] [ENEMY] [Enemy2] Registered as sound listener
+[13:33:25] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[13:33:25] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[13:33:25] [ENEMY] [Enemy3] Registered as sound listener
+[13:33:25] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[13:33:25] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[13:33:25] [ENEMY] [Enemy4] Registered as sound listener
+[13:33:25] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[13:33:25] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[13:33:25] [ENEMY] [Enemy5] Registered as sound listener
+[13:33:25] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[13:33:25] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[13:33:25] [ENEMY] [Enemy6] Registered as sound listener
+[13:33:25] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[13:33:25] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[13:33:25] [ENEMY] [Enemy7] Registered as sound listener
+[13:33:25] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 3, behavior: PATROL, player_found: yes
+[13:33:25] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[13:33:25] [ENEMY] [Enemy8] Registered as sound listener
+[13:33:25] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[13:33:25] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[13:33:25] [ENEMY] [Enemy9] Registered as sound listener
+[13:33:25] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[13:33:25] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[13:33:25] [ENEMY] [Enemy10] Registered as sound listener
+[13:33:25] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[13:33:25] [INFO] [Player] Detecting weapon pose (frame 3)...
+[13:33:25] [INFO] [Player] Detected weapon: Rifle (default pose)
+[13:33:25] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[13:33:25] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[13:33:25] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[13:33:25] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[13:33:25] [INFO] [LastChance] Found player: Player
+[13:33:25] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[13:33:25] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[13:33:25] [INFO] [LastChance] Connected to player Died signal (C#)
+[13:33:28] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[13:33:28] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[13:33:29] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[13:33:29] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[13:33:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5835, 752.2966), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:33:29] [ENEMY] [Enemy4] Heard gunshot at (689.5835, 752.2966), source_type=1, intensity=0.07, distance=184
+[13:33:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:33:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(756.6942, 763.5549), shooter_id=40902854154, bullet_pos=(916.8202, 809.7878)
+[13:33:29] [INFO] [Bullet] Using shooter_position, distance=166.666763305664
+[13:33:29] [INFO] [Bullet] Distance to wall: 166.666763305664 (11.3486463866363% of viewport)
+[13:33:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5835, 752.2966), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:33:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:33:29] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:33:29] [ENEMY] [Enemy4] Hit taken, health: 2/3
+[13:33:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(756.5374, 764.4527), shooter_id=40902854154, bullet_pos=(916.0296, 812.8262)
+[13:33:29] [INFO] [Bullet] Using shooter_position, distance=166.666610717773
+[13:33:29] [INFO] [Bullet] Distance to wall: 166.666610717773 (11.3486359966462% of viewport)
+[13:33:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:29] [INFO] [Bullet] Starting wall penetration at (916.0296, 812.8262)
+[13:33:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.7979640960693
+[13:33:29] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:29] [INFO] [Bullet] Exiting penetration at (960.6874, 826.3708) after traveling 41.6666679382324 pixels through wall
+[13:33:29] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5835, 752.2966), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:33:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:33:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(756.5374, 764.4527), shooter_id=40902854154, bullet_pos=(916.0296, 812.8262)
+[13:33:29] [INFO] [Bullet] Using shooter_position, distance=166.666610717773
+[13:33:29] [INFO] [Bullet] Distance to wall: 166.666610717773 (11.3486359966462% of viewport)
+[13:33:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:29] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[13:33:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5835, 752.2966), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:33:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:33:29] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[13:33:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0654, 816.2062), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:33:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:33:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(756.5374, 764.4527), shooter_id=40902854154, bullet_pos=(745.5207, 876.7097)
+[13:33:29] [INFO] [Bullet] Using shooter_position, distance=112.796249389648
+[13:33:29] [INFO] [Bullet] Distance to wall: 112.796249389648 (7.68050403495449% of viewport)
+[13:33:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:29] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[13:33:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(756.5374, 764.4527), shooter_id=40902854154, bullet_pos=(916.0296, 812.8262)
+[13:33:29] [INFO] [Bullet] Using shooter_position, distance=166.666610717773
+[13:33:29] [INFO] [Bullet] Distance to wall: 166.666610717773 (11.3486359966462% of viewport)
+[13:33:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:29] [INFO] [Bullet] Starting wall penetration at (916.0296, 812.8262)
+[13:33:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.7979640960693
+[13:33:29] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:29] [INFO] [Bullet] Exiting penetration at (960.6874, 826.3708) after traveling 41.6666679382324 pixels through wall
+[13:33:29] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0651, 826.6434), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:33:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:33:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5835, 752.2966), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:33:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:33:29] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[13:33:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(756.5374, 764.4527), shooter_id=40902854154, bullet_pos=(923.0306, 930.9945)
+[13:33:29] [INFO] [Bullet] Using shooter_position, distance=235.491333007813
+[13:33:29] [INFO] [Bullet] Distance to wall: 235.491333007813 (16.0350378948797% of viewport)
+[13:33:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:29] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[13:33:29] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[13:33:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(756.5374, 764.4527), shooter_id=40902854154, bullet_pos=(916.0296, 812.8262)
+[13:33:29] [INFO] [Bullet] Using shooter_position, distance=166.666610717773
+[13:33:29] [INFO] [Bullet] Distance to wall: 166.666610717773 (11.3486359966462% of viewport)
+[13:33:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:29] [INFO] [Bullet] Starting wall penetration at (916.0296, 812.8262)
+[13:33:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.7979640960693
+[13:33:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(751.0077, 756.7268), shooter_id=41188066843, bullet_pos=(511.1865, 415.9968)
+[13:33:29] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[13:33:29] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[13:33:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:29] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:29] [INFO] [Bullet] Exiting penetration at (960.6874, 826.3708) after traveling 41.6666679382324 pixels through wall
+[13:33:29] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5835, 752.2966), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:33:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:33:29] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[13:33:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(756.5374, 764.4527), shooter_id=40902854154, bullet_pos=(726.8137, 1004.998)
+[13:33:29] [INFO] [Bullet] Using shooter_position, distance=242.374481201172
+[13:33:29] [INFO] [Bullet] Distance to wall: 242.374481201172 (16.503724112359% of viewport)
+[13:33:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(756.5374, 764.4527), shooter_id=40902854154, bullet_pos=(916.0296, 812.8262)
+[13:33:29] [INFO] [Bullet] Using shooter_position, distance=166.666610717773
+[13:33:29] [INFO] [Bullet] Distance to wall: 166.666610717773 (11.3486359966462% of viewport)
+[13:33:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:29] [INFO] [Bullet] Starting wall penetration at (916.0296, 812.8262)
+[13:33:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(696.1026, 756.9336), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:33:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:33:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.7979640960693
+[13:33:29] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:29] [INFO] [Bullet] Exiting penetration at (960.6874, 826.3708) after traveling 41.6666679382324 pixels through wall
+[13:33:29] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(701.7222, 765.9998), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:33:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:33:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(762.0433, 740.1282), shooter_id=40902854154, bullet_pos=(915.2321, 674.4703)
+[13:33:30] [INFO] [Bullet] Using shooter_position, distance=166.666580200195
+[13:33:30] [INFO] [Bullet] Distance to wall: 166.666580200195 (11.3486339186482% of viewport)
+[13:33:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:30] [INFO] [Bullet] Starting wall penetration at (915.2321, 674.4703)
+[13:33:30] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24.0714721679688
+[13:33:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(751.0077, 756.7268), shooter_id=41188066843, bullet_pos=(753.0015, 60.43308)
+[13:33:30] [INFO] [Bullet] Using shooter_position, distance=696.296569824219
+[13:33:30] [INFO] [Bullet] Distance to wall: 696.296569824219 (47.4121138158222% of viewport)
+[13:33:30] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:30] [INFO] [Bullet] Exiting penetration at (958.1249, 656.0861) after traveling 41.6666717529297 pixels through wall
+[13:33:30] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(756.5374, 764.4527), shooter_id=40902854154, bullet_pos=(518.9861, 925.5306)
+[13:33:30] [INFO] [Bullet] Using shooter_position, distance=287.013427734375
+[13:33:30] [INFO] [Bullet] Distance to wall: 287.013427734375 (19.5432720655895% of viewport)
+[13:33:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:30] [INFO] [Bullet] Starting wall penetration at (518.9861, 925.5306)
+[13:33:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(707.5202, 774.9528), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:33:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[13:33:30] [INFO] [Bullet] Raycast backward hit penetrating body at distance 6.42345905303955
+[13:33:30] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:30] [INFO] [Bullet] Exiting penetration at (494.0002, 915.9767) after traveling 21.7502632141113 pixels through wall
+[13:33:30] [INFO] [Bullet] Damage multiplier after penetration: 0.05625
+[13:33:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(756.1786, 725.1942), shooter_id=40902854154, bullet_pos=(921.698, 598.6786)
+[13:33:30] [INFO] [Bullet] Using shooter_position, distance=208.33349609375
+[13:33:30] [INFO] [Bullet] Distance to wall: 208.33349609375 (14.1858108405426% of viewport)
+[13:33:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(740.3898, 715.3693), shooter_id=40902854154, bullet_pos=(1092.606, 250.3732)
+[13:33:30] [INFO] [Bullet] Using shooter_position, distance=583.333435058594
+[13:33:30] [INFO] [Bullet] Distance to wall: 583.333435058594 (39.7202462487424% of viewport)
+[13:33:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:30] [INFO] [Bullet] Starting wall penetration at (1092.606, 250.3732)
+[13:33:30] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:33:30] [INFO] [Bullet] Exiting penetration at (1120.784, 213.1735) after traveling 41.6666717529297 pixels through wall
+[13:33:30] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(756.1786, 725.1942), shooter_id=40902854154, bullet_pos=(502.4526, 264.3177)
+[13:33:30] [INFO] [Bullet] Using shooter_position, distance=526.102600097656
+[13:33:30] [INFO] [Bullet] Distance to wall: 526.102600097656 (35.8232934580263% of viewport)
+[13:33:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:30] [INFO] [Bullet] Starting wall penetration at (502.4526, 264.3177)
+[13:33:30] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.279541015625
+[13:33:30] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:30] [INFO] [Bullet] Exiting penetration at (470.8545, 239.1173) after traveling 35.4166717529297 pixels through wall
+[13:33:30] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[13:33:32] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[13:33:32] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[13:33:32] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[13:33:32] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[13:33:32] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[13:33:32] [ENEMY] [Enemy4] State: IN_COVER -> COMBAT
+[13:33:32] [ENEMY] [Enemy10] FLANKING started: target=(418.3481, 793.2965), side=right, pos=(956.2718, 1433.918)
+[13:33:32] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[13:33:32] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[13:33:33] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[13:33:33] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[13:33:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.2153, 418.0655), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:33:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[13:33:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.2153, 418.0655), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:33:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[13:33:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(392.3709, 629.8734), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:33] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:33:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(392.0941, 398.3216), shooter_id=40332428776, bullet_pos=(48.06244, 249.0995)
+[13:33:33] [INFO] [Bullet] Using shooter_position, distance=375
+[13:33:33] [INFO] [Bullet] Distance to wall: 375 (25.5344395641958% of viewport)
+[13:33:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(453.9521, 600.9189), shooter_id=40617641465, bullet_pos=(524.804, 557.0504)
+[13:33:33] [INFO] [Bullet] Using shooter_position, distance=83.3333282470703
+[13:33:33] [INFO] [Bullet] Distance to wall: 83.3333282470703 (5.67431955682162% of viewport)
+[13:33:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:33] [INFO] [Bullet] Starting wall penetration at (524.804, 557.0504)
+[13:33:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47.6122817993164
+[13:33:33] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:33] [INFO] [Bullet] Exiting penetration at (564.4811, 532.484) after traveling 41.6666717529297 pixels through wall
+[13:33:33] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.2153, 418.0655), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:33:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[13:33:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(392.3709, 629.8734), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:33] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:33:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(392.0941, 398.3216), shooter_id=40332428776, bullet_pos=(48.06244, 249.0995)
+[13:33:33] [INFO] [Bullet] Using shooter_position, distance=375
+[13:33:33] [INFO] [Bullet] Distance to wall: 375 (25.5344395641958% of viewport)
+[13:33:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(453.9521, 600.9189), shooter_id=40617641465, bullet_pos=(524.804, 557.0504)
+[13:33:33] [INFO] [Bullet] Using shooter_position, distance=83.3333282470703
+[13:33:33] [INFO] [Bullet] Distance to wall: 83.3333282470703 (5.67431955682162% of viewport)
+[13:33:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.2153, 418.0655), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:33:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[13:33:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(392.3709, 629.8734), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:33] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:33:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(392.0941, 398.3216), shooter_id=40332428776, bullet_pos=(48.06244, 249.0995)
+[13:33:33] [INFO] [Bullet] Using shooter_position, distance=375
+[13:33:33] [INFO] [Bullet] Distance to wall: 375 (25.5344395641958% of viewport)
+[13:33:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(453.9521, 600.9189), shooter_id=40617641465, bullet_pos=(336.0953, 448.9055)
+[13:33:33] [INFO] [Bullet] Using shooter_position, distance=192.349411010742
+[13:33:33] [INFO] [Bullet] Distance to wall: 192.349411010742 (13.0974250950999% of viewport)
+[13:33:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(431.0767, 573.9049), shooter_id=40617641465, bullet_pos=(509.5386, 426.8623)
+[13:33:33] [INFO] [Bullet] Using shooter_position, distance=166.666702270508
+[13:33:33] [INFO] [Bullet] Distance to wall: 166.666702270508 (11.3486422306402% of viewport)
+[13:33:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.2153, 418.0655), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:33:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[13:33:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(392.3709, 629.8734), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:33] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:33:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(392.2249, 397.895), shooter_id=40332428776, bullet_pos=(49.17913, 246.4202)
+[13:33:33] [INFO] [Bullet] Using shooter_position, distance=375.000030517578
+[13:33:33] [INFO] [Bullet] Distance to wall: 375.000030517578 (25.5344416421938% of viewport)
+[13:33:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:33] [INFO] [Bullet] Starting wall penetration at (49.17913, 246.4202)
+[13:33:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.8873119354248
+[13:33:33] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:33] [INFO] [Bullet] Exiting penetration at (6.488991, 227.57) after traveling 41.6666679382324 pixels through wall
+[13:33:33] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(453.9521, 600.9189), shooter_id=40617641465, bullet_pos=(521.4265, 338.4907)
+[13:33:33] [INFO] [Bullet] Using shooter_position, distance=270.963806152344
+[13:33:33] [INFO] [Bullet] Distance to wall: 270.963806152344 (18.4504238194173% of viewport)
+[13:33:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(367.9714, 566.3496), shooter_id=40617641465, bullet_pos=(310.0714, 455.5679)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=125
+[13:33:34] [INFO] [Bullet] Distance to wall: 125 (8.51147985473193% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(392.3709, 629.8734), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:34] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(393.1042, 395.2539), shooter_id=40332428776, bullet_pos=(56.54037, 229.8762)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=375.000061035156
+[13:33:34] [INFO] [Bullet] Distance to wall: 375.000061035156 (25.5344437201918% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(431.0767, 573.9049), shooter_id=40617641465, bullet_pos=(376.6305, 55.33647)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=521.418823242188
+[13:33:34] [INFO] [Bullet] Distance to wall: 521.418823242188 (35.5043664792312% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(367.9714, 566.3496), shooter_id=40617641465, bullet_pos=(168.4487, 706.7234)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=243.955139160156
+[13:33:34] [INFO] [Bullet] Distance to wall: 243.955139160156 (16.6113540193599% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[13:33:34] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
+[13:33:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(392.3709, 629.8734), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:34] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(431.0767, 573.9049), shooter_id=40617641465, bullet_pos=(328.1951, 234.5309)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=354.625579833984
+[13:33:34] [INFO] [Bullet] Distance to wall: 354.625579833984 (24.1471078298367% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(340.3406, 586.0162), shooter_id=40617641465, bullet_pos=(62.52692, 401.8134)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=333.333343505859
+[13:33:34] [INFO] [Bullet] Distance to wall: 333.333343505859 (22.6972803052845% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(367.9714, 566.3496), shooter_id=40617641465, bullet_pos=(52.57684, 524.7545)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=318.125579833984
+[13:33:34] [INFO] [Bullet] Distance to wall: 318.125579833984 (21.661755712255% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(453.9521, 600.9189), shooter_id=40617641465, bullet_pos=(121.0042, 54.02291)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=640.273071289063
+[13:33:34] [INFO] [Bullet] Distance to wall: 640.273071289063 (43.5973707824336% of viewport)
+[13:33:34] [INFO] [Bullet] Distance-based penetration chance: 95.8030674204942%
+[13:33:34] [INFO] [Bullet] Starting wall penetration at (121.0042, 54.02291)
+[13:33:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(392.3709, 629.8734), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:34] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:33:34] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:34] [INFO] [Bullet] Exiting penetration at (96.06775, 36.30759) after traveling 0 pixels through wall
+[13:33:34] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(332.8395, 596.9096), shooter_id=40617641465, bullet_pos=(63.16515, 485.8008)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=291.666595458984
+[13:33:34] [INFO] [Bullet] Distance to wall: 291.666595458984 (19.8601148123791% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [INFO] [Bullet] Starting wall penetration at (63.16515, 485.8008)
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(340.3406, 586.0162), shooter_id=40617641465, bullet_pos=(220.1835, 251.9779)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=354.991943359375
+[13:33:34] [INFO] [Bullet] Distance to wall: 354.991943359375 (24.1720541959637% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [INFO] [Bullet] Starting wall penetration at (220.1835, 251.9779)
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(431.0767, 573.9049), shooter_id=40617641465, bullet_pos=(272.0859, 59.16885)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=538.731201171875
+[13:33:34] [INFO] [Bullet] Distance to wall: 538.731201171875 (36.6831981271196% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [INFO] [Bullet] Starting wall penetration at (272.0859, 59.16885)
+[13:33:34] [INFO] [Bullet] Raycast backward hit penetrating body at distance 2.06286025047302
+[13:33:34] [INFO] [Bullet] Raycast backward hit penetrating body at distance 2.70729374885559
+[13:33:34] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.9599447250366
+[13:33:34] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:34] [INFO] [Bullet] Exiting penetration at (20.01725, 468.0233) after traveling 41.6666679382324 pixels through wall
+[13:33:34] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:34] [INFO] [Bullet] Max penetration distance exceeded: 51.1770858764648 >= 48
+[13:33:34] [INFO] [Bullet] Max penetration distance exceeded: 70.8333435058594 >= 48
+[13:33:34] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:34] [INFO] [Bullet] Exiting penetration at (254.9664, 5.663853) after traveling 51.1770858764648 pixels through wall
+[13:33:34] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
+[13:33:34] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:34] [INFO] [Bullet] Exiting penetration at (275.1519, 199.7365) after traveling 70.8333435058594 pixels through wall
+[13:33:34] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[13:33:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.2153, 418.0655), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:33:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[13:33:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(392.3709, 629.8734), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:34] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(328.2969, 606.9579), shooter_id=40617641465, bullet_pos=(44.21723, 540.8655)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=291.666687011719
+[13:33:34] [INFO] [Bullet] Distance to wall: 291.666687011719 (19.8601210463732% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(367.9714, 566.3496), shooter_id=40617641465, bullet_pos=(225.9311, 235.0017)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=360.509185791016
+[13:33:34] [INFO] [Bullet] Distance to wall: 360.509185791016 (24.5477333784483% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [INFO] [LastChance] Threat detected: @Area2D@335
+[13:33:34] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:33:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:33:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(392.3709, 629.8734), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:34] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(326.504, 612.781), shooter_id=40617641465, bullet_pos=(37.65124, 572.3635)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=291.666717529297
+[13:33:34] [INFO] [Bullet] Distance to wall: 291.666717529297 (19.8601231243712% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [INFO] [Bullet] Starting wall penetration at (37.65124, 572.3635)
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(432.1782, 354.7904), shooter_id=40332428776, bullet_pos=(361.4177, 29.05417)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=333.333374023438
+[13:33:34] [INFO] [Bullet] Distance to wall: 333.333374023438 (22.6972823832825% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.9603729248047
+[13:33:34] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:34] [INFO] [Bullet] Exiting penetration at (-8.565193, 565.8967) after traveling 41.6666679382324 pixels through wall
+[13:33:34] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(367.9714, 566.3496), shooter_id=40617641465, bullet_pos=(145.6626, 50.99503)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=561.258911132813
+[13:33:34] [INFO] [Bullet] Distance to wall: 561.258911132813 (38.2171513231657% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [INFO] [Bullet] Starting wall penetration at (145.6626, 50.99503)
+[13:33:34] [INFO] [Bullet] Raycast backward hit penetrating body at distance 6.0265851020813
+[13:33:34] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:34] [INFO] [Bullet] Exiting penetration at (134.9668, 26.47612) after traveling 21.7502593994141 pixels through wall
+[13:33:34] [INFO] [Bullet] Damage multiplier after penetration: 0.05625
+[13:33:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(392.3709, 629.8734), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:34] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(326.1177, 614.3456), shooter_id=40617641465, bullet_pos=(36.38885, 580.7799)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=291.666656494141
+[13:33:34] [INFO] [Bullet] Distance to wall: 291.666656494141 (19.8601189683752% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [INFO] [Bullet] Starting wall penetration at (36.38885, 580.7799)
+[13:33:34] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42.2484588623047
+[13:33:34] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:34] [INFO] [Bullet] Exiting penetration at (-9.967764, 575.4094) after traveling 41.6666679382324 pixels through wall
+[13:33:34] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(453.1732, 464.8616), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:33:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(508.9802, 425.9235), shooter_id=40332428776, bullet_pos=(508.9802, 425.9235)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=0
+[13:33:34] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:33:34] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:33:34] [INFO] [Bullet] Starting wall penetration at (508.9802, 425.9235)
+[13:33:34] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29.2290439605713
+[13:33:34] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:34] [INFO] [Bullet] Exiting penetration at (549.1762, 402.2157) after traveling 41.6666679382324 pixels through wall
+[13:33:34] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(392.3709, 629.8734), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:34] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(326.1177, 614.3456), shooter_id=40617641465, bullet_pos=(36.38885, 580.7799)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=291.666656494141
+[13:33:34] [INFO] [Bullet] Distance to wall: 291.666656494141 (19.8601189683752% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(392.3709, 629.8734), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:34] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:33:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(326.1177, 614.3456), shooter_id=40617641465, bullet_pos=(36.38885, 580.7799)
+[13:33:34] [INFO] [Bullet] Using shooter_position, distance=291.666656494141
+[13:33:34] [INFO] [Bullet] Distance to wall: 291.666656494141 (19.8601189683752% of viewport)
+[13:33:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:34] [INFO] [Bullet] Starting wall penetration at (36.38885, 580.7799)
+[13:33:34] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42.2484588623047
+[13:33:34] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:34] [INFO] [Bullet] Exiting penetration at (-9.967764, 575.4094) after traveling 41.6666679382324 pixels through wall
+[13:33:34] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(392.3709, 629.8734), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:35] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:33:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(326.1177, 614.3456), shooter_id=40617641465, bullet_pos=(36.38885, 580.7799)
+[13:33:35] [INFO] [Bullet] Using shooter_position, distance=291.666656494141
+[13:33:35] [INFO] [Bullet] Distance to wall: 291.666656494141 (19.8601189683752% of viewport)
+[13:33:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:35] [INFO] [Bullet] Starting wall penetration at (36.38885, 580.7799)
+[13:33:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42.2484588623047
+[13:33:35] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:35] [INFO] [Bullet] Exiting penetration at (-9.967764, 575.4094) after traveling 41.6666679382324 pixels through wall
+[13:33:35] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.4989, 404.8396), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:33:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[13:33:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(392.3709, 629.8734), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:35] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:33:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(326.1177, 614.3456), shooter_id=40617641465, bullet_pos=(36.38885, 580.7799)
+[13:33:35] [INFO] [Bullet] Using shooter_position, distance=291.666656494141
+[13:33:35] [INFO] [Bullet] Distance to wall: 291.666656494141 (19.8601189683752% of viewport)
+[13:33:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:35] [ENEMY] [Enemy2] State: COMBAT -> SEEKING_COVER
+[13:33:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(462.2956, 337.0385), shooter_id=40332428776, bullet_pos=(517.7473, 50.6915)
+[13:33:35] [INFO] [Bullet] Using shooter_position, distance=291.666687011719
+[13:33:35] [INFO] [Bullet] Distance to wall: 291.666687011719 (19.8601210463732% of viewport)
+[13:33:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:35] [INFO] [Bullet] Starting wall penetration at (517.7473, 50.6915)
+[13:33:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.6279182434082
+[13:33:35] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:35] [INFO] [Bullet] Exiting penetration at (526.6195, 4.875992) after traveling 41.6666679382324 pixels through wall
+[13:33:35] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(389.9074, 644.5362), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:35] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:33:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(326.1177, 614.3456), shooter_id=40617641465, bullet_pos=(36.38885, 580.7799)
+[13:33:35] [INFO] [Bullet] Using shooter_position, distance=291.666656494141
+[13:33:35] [INFO] [Bullet] Distance to wall: 291.666656494141 (19.8601189683752% of viewport)
+[13:33:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:35] [INFO] [Bullet] Starting wall penetration at (36.38885, 580.7799)
+[13:33:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42.2484588623047
+[13:33:35] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:35] [INFO] [Bullet] Exiting penetration at (-9.967764, 575.4094) after traveling 41.6666679382324 pixels through wall
+[13:33:35] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(448.4001, 679.3098), shooter_id=40617641465, bullet_pos=(486.4202, 696.3563)
+[13:33:35] [INFO] [Bullet] Using shooter_position, distance=41.6666526794434
+[13:33:35] [INFO] [Bullet] Distance to wall: 41.6666526794434 (2.83715899916155% of viewport)
+[13:33:35] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:33:35] [INFO] [Bullet] Starting wall penetration at (486.4202, 696.3563)
+[13:33:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31.7843704223633
+[13:33:35] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:35] [INFO] [Bullet] Exiting penetration at (529.0027, 715.4484) after traveling 41.6666679382324 pixels through wall
+[13:33:35] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:35] [ENEMY] [Enemy3] FLANKING started: target=(362.0979, 657.0181), side=right, pos=(773.5965, 790.2117)
+[13:33:35] [ENEMY] [Enemy3] State: PURSUING -> FLANKING
+[13:33:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(389.9074, 644.5362), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:33:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(440.361, 690.1984), shooter_id=40617641465, bullet_pos=(440.361, 690.1984)
+[13:33:36] [INFO] [Bullet] Using shooter_position, distance=0
+[13:33:36] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:33:36] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:33:36] [INFO] [Bullet] Starting wall penetration at (440.361, 690.1984)
+[13:33:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.18201065063477
+[13:33:36] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:36] [INFO] [Bullet] Exiting penetration at (478.3227, 717.3404) after traveling 41.6666679382324 pixels through wall
+[13:33:36] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(391.7245, 649.5505), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:33:36] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[13:33:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.9248, 605.8959), shooter_id=40617641465, bullet_pos=(513.5567, 560.1155)
+[13:33:36] [INFO] [Bullet] Using shooter_position, distance=83.3333435058594
+[13:33:36] [INFO] [Bullet] Distance to wall: 83.3333435058594 (5.67432059582062% of viewport)
+[13:33:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(451.5569, 423.0772), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:33:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:33:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(391.7245, 649.5505), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:33:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.9248, 605.8959), shooter_id=40617641465, bullet_pos=(316.5904, 467.863)
+[13:33:36] [INFO] [Bullet] Using shooter_position, distance=187.795501708984
+[13:33:36] [INFO] [Bullet] Distance to wall: 187.795501708984 (12.7873410368424% of viewport)
+[13:33:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.0547, 604.876), shooter_id=40617641465, bullet_pos=(511.7711, 557.7327)
+[13:33:36] [INFO] [Bullet] Using shooter_position, distance=83.3333511352539
+[13:33:36] [INFO] [Bullet] Distance to wall: 83.3333511352539 (5.67432111532012% of viewport)
+[13:33:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(430.4207, 410.99), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:33:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:33:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(459.1766, 355.4566), shooter_id=40332428776, bullet_pos=(483.058, 64.76929)
+[13:33:36] [INFO] [Bullet] Using shooter_position, distance=291.666687011719
+[13:33:36] [INFO] [Bullet] Distance to wall: 291.666687011719 (19.8601210463732% of viewport)
+[13:33:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(391.7245, 649.5505), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:33:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(459.1766, 355.4566), shooter_id=40332428776, bullet_pos=(511.9494, 208.5622)
+[13:33:36] [INFO] [Bullet] Using shooter_position, distance=156.086334228516
+[13:33:36] [INFO] [Bullet] Distance to wall: 156.086334228516 (10.6282055150797% of viewport)
+[13:33:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.0547, 604.876), shooter_id=40617641465, bullet_pos=(320.0762, 454.9741)
+[13:33:36] [INFO] [Bullet] Using shooter_position, distance=193.892440795898
+[13:33:36] [INFO] [Bullet] Distance to wall: 193.892440795898 (13.2024928305527% of viewport)
+[13:33:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(442.5343, 604.285), shooter_id=40617641465, bullet_pos=(510.7007, 556.3497)
+[13:33:36] [INFO] [Bullet] Using shooter_position, distance=83.3333587646484
+[13:33:36] [INFO] [Bullet] Distance to wall: 83.3333587646484 (5.67432163481963% of viewport)
+[13:33:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(407.5519, 398.342), source=ENEMY (Enemy1), range=1469, listeners=10
+[13:33:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[13:33:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(419.8057, 343.7745), shooter_id=40332428776, bullet_pos=(386.4213, 54.02473)
+[13:33:36] [INFO] [Bullet] Using shooter_position, distance=291.666656494141
+[13:33:36] [INFO] [Bullet] Distance to wall: 291.666656494141 (19.8601189683752% of viewport)
+[13:33:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:36] [INFO] [Bullet] Starting wall penetration at (386.4213, 54.02473)
+[13:33:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24.4962272644043
+[13:33:36] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:36] [INFO] [Bullet] Exiting penetration at (381.0798, 7.664764) after traveling 41.6666717529297 pixels through wall
+[13:33:36] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.9248, 605.8959), shooter_id=40617641465, bullet_pos=(46.11182, 611.0513)
+[13:33:36] [INFO] [Bullet] Using shooter_position, distance=397.846405029297
+[13:33:36] [INFO] [Bullet] Distance to wall: 397.846405029297 (27.090093293475% of viewport)
+[13:33:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:36] [ENEMY] [Enemy1] Hit taken, health: 1/2
+[13:33:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(459.1766, 355.4566), shooter_id=40332428776, bullet_pos=(542.2216, 56.01603)
+[13:33:36] [INFO] [Bullet] Using shooter_position, distance=310.742919921875
+[13:33:36] [INFO] [Bullet] Distance to wall: 310.742919921875 (21.1590568233249% of viewport)
+[13:33:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(391.7245, 649.5505), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:33:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(445.6978, 608.108), shooter_id=40617641465, bullet_pos=(517.1761, 565.2677)
+[13:33:36] [INFO] [Bullet] Using shooter_position, distance=83.3333129882813
+[13:33:36] [INFO] [Bullet] Distance to wall: 83.3333129882813 (5.67431851782261% of viewport)
+[13:33:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(379.1963, 336.4828), shooter_id=40332428776, bullet_pos=(270.4303, 65.855)
+[13:33:36] [INFO] [Bullet] Using shooter_position, distance=291.666717529297
+[13:33:36] [INFO] [Bullet] Distance to wall: 291.666717529297 (19.8601231243712% of viewport)
+[13:33:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.9248, 605.8959), shooter_id=40617641465, bullet_pos=(267.81, 689.8834)
+[13:33:36] [INFO] [Bullet] Using shooter_position, distance=195.116180419922
+[13:33:36] [INFO] [Bullet] Distance to wall: 195.116180419922 (13.2858195118112% of viewport)
+[13:33:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:36] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[13:33:36] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[13:33:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(445.6978, 608.108), shooter_id=40617641465, bullet_pos=(318.6194, 476.49)
+[13:33:36] [INFO] [Bullet] Using shooter_position, distance=182.954147338867
+[13:33:36] [INFO] [Bullet] Distance to wall: 182.954147338867 (12.4576843153154% of viewport)
+[13:33:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(379.1963, 336.4828), shooter_id=40332428776, bullet_pos=(227.2097, 242.7344)
+[13:33:36] [INFO] [Bullet] Using shooter_position, distance=178.574005126953
+[13:33:36] [INFO] [Bullet] Distance to wall: 178.574005126953 (12.1594323777349% of viewport)
+[13:33:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:36] [INFO] [Bullet] Starting wall penetration at (227.2097, 242.7344)
+[13:33:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10.0428218841553
+[13:33:36] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:36] [INFO] [Bullet] Exiting penetration at (217.6162, 281.996) after traveling 35.4166717529297 pixels through wall
+[13:33:36] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[13:33:36] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:33:36] [ENEMY] [Enemy2] Hit taken, health: 1/2
+[13:33:37] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
+[13:33:37] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
+[13:33:37] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[13:33:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(445.6978, 608.108), shooter_id=40617641465, bullet_pos=(64.97488, 647.7382)
+[13:33:37] [INFO] [Bullet] Using shooter_position, distance=382.779907226563
+[13:33:37] [INFO] [Bullet] Distance to wall: 382.779907226563 (26.0641877532403% of viewport)
+[13:33:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:37] [INFO] [Bullet] Starting wall penetration at (64.97488, 647.7382)
+[13:33:37] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:33:37] [INFO] [Bullet] Exiting penetration at (35.88088, 667.381) after traveling 30.1041679382324 pixels through wall
+[13:33:37] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[13:33:37] [ENEMY] [Enemy3] State: FLANKING -> COMBAT
+[13:33:38] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[13:33:38] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[13:33:38] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[13:33:38] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[13:33:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(391.7245, 649.5505), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:33:38] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[13:33:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(391.7245, 649.5505), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:33:38] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[13:33:38] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[13:33:38] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[13:33:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(391.7245, 649.5505), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:33:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(439.4943, 698.0133), shooter_id=40617641465, bullet_pos=(439.4943, 698.0133)
+[13:33:39] [INFO] [Bullet] Using shooter_position, distance=0
+[13:33:39] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[13:33:39] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[13:33:39] [INFO] [Bullet] Starting wall penetration at (439.4943, 698.0133)
+[13:33:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.9159469604492
+[13:33:39] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:39] [INFO] [Bullet] Exiting penetration at (468.2286, 734.7844) after traveling 41.6666679382324 pixels through wall
+[13:33:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(459.767, 648.6514), shooter_id=40617641465, bullet_pos=(915.7339, 695.1671)
+[13:33:39] [INFO] [Bullet] Using shooter_position, distance=458.333435058594
+[13:33:39] [INFO] [Bullet] Distance to wall: 458.333435058594 (31.2087663940104% of viewport)
+[13:33:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:39] [INFO] [Bullet] Starting wall penetration at (915.7339, 695.1671)
+[13:33:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.2954406738281
+[13:33:39] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:39] [INFO] [Bullet] Exiting penetration at (962.1597, 699.9033) after traveling 41.6666679382324 pixels through wall
+[13:33:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(459.767, 648.6514), shooter_id=40617641465, bullet_pos=(962.1597, 699.9033)
+[13:33:39] [INFO] [Bullet] Using shooter_position, distance=505.000122070313
+[13:33:39] [INFO] [Bullet] Distance to wall: 505.000122070313 (34.386386925109% of viewport)
+[13:33:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:39] [INFO] [Bullet] Starting wall penetration at (962.1597, 699.9033)
+[13:33:39] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[13:33:39] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:33:39] [INFO] [Bullet] Exiting penetration at (1008.585, 704.6394) after traveling 41.6666679382324 pixels through wall
+[13:33:39] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[13:33:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(453.9213, 621.9435), shooter_id=40617641465, bullet_pos=(1368.637, 336.1154)
+[13:33:39] [INFO] [Bullet] Using shooter_position, distance=958.33349609375
+[13:33:39] [INFO] [Bullet] Distance to wall: 958.33349609375 (65.2546899689342% of viewport)
+[13:33:39] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[13:33:39] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[13:33:39] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[13:33:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(453.9213, 621.9435), shooter_id=40617641465, bullet_pos=(1125.761, 265.5593)
+[13:33:39] [INFO] [Bullet] Using shooter_position, distance=760.512268066406
+[13:33:39] [INFO] [Bullet] Distance to wall: 760.512268066406 (51.7846787913896% of viewport)
+[13:33:39] [INFO] [Bullet] Distance-based penetration chance: 86.2512080767121%
+[13:33:39] [INFO] [Bullet] Starting wall penetration at (1125.761, 265.5593)
+[13:33:39] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:39] [INFO] [Bullet] Exiting penetration at (1086.949, 254.2843) after traveling 0 pixels through wall
+[13:33:39] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[13:33:39] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[13:33:39] [ENEMY] [Enemy10] State: SUPPRESSED -> IN_COVER
+[13:33:39] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
+[13:33:39] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[13:33:39] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
+[13:33:39] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[13:33:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(386.5307, 650.7628), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:33:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(386.5307, 650.7628), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:33:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(397.9633, 627.0807), source=ENEMY (Enemy2), range=1469, listeners=10
+[13:33:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=1, below_threshold=2
+[13:33:40] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
+[13:33:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(326.4605, 618.7915), shooter_id=40617641465, bullet_pos=(54.97958, 512.1727)
+[13:33:40] [INFO] [Bullet] Using shooter_position, distance=291.666717529297
+[13:33:40] [INFO] [Bullet] Distance to wall: 291.666717529297 (19.8601231243712% of viewport)
+[13:33:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:40] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
+[13:33:40] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[13:33:40] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[13:33:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(452.8577, 586.8662), shooter_id=40617641465, bullet_pos=(513.9943, 530.2379)
+[13:33:40] [INFO] [Bullet] Using shooter_position, distance=83.3333511352539
+[13:33:40] [INFO] [Bullet] Distance to wall: 83.3333511352539 (5.67432111532012% of viewport)
+[13:33:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(326.4605, 618.7915), shooter_id=40617641465, bullet_pos=(220.5821, 436.4748)
+[13:33:40] [INFO] [Bullet] Using shooter_position, distance=210.830795288086
+[13:33:40] [INFO] [Bullet] Distance to wall: 210.830795288086 (14.3558565348132% of viewport)
+[13:33:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(452.8577, 586.8662), shooter_id=40617641465, bullet_pos=(311.5569, 277.5857)
+[13:33:40] [INFO] [Bullet] Using shooter_position, distance=340.029907226563
+[13:33:40] [INFO] [Bullet] Distance to wall: 340.029907226563 (23.153261642922% of viewport)
+[13:33:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(326.4605, 618.7915), shooter_id=40617641465, bullet_pos=(46.39476, 372.3232)
+[13:33:40] [INFO] [Bullet] Using shooter_position, distance=373.072967529297
+[13:33:40] [INFO] [Bullet] Distance to wall: 373.072967529297 (25.4032243797653% of viewport)
+[13:33:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:40] [INFO] [Bullet] Starting wall penetration at (46.39476, 372.3232)
+[13:33:40] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19.7641925811768
+[13:33:40] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:40] [INFO] [Bullet] Exiting penetration at (13.45362, 360.1913) after traveling 30.1041717529297 pixels through wall
+[13:33:40] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[13:33:40] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
+[13:33:40] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[13:33:40] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[13:33:40] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[13:33:40] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
+[13:33:40] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[13:33:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(452.8577, 586.8662), shooter_id=40617641465, bullet_pos=(62.82869, 586.1807)
+[13:33:40] [INFO] [Bullet] Using shooter_position, distance=390.029632568359
+[13:33:40] [INFO] [Bullet] Distance to wall: 390.029632568359 (26.5578348828327% of viewport)
+[13:33:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(452.8577, 586.8662), shooter_id=40617641465, bullet_pos=(178.952, 694.1044)
+[13:33:40] [INFO] [Bullet] Using shooter_position, distance=294.150299072266
+[13:33:40] [INFO] [Bullet] Distance to wall: 294.150299072266 (20.0292347585357% of viewport)
+[13:33:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:41] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[13:33:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:33:41] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[13:33:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(452.8577, 586.8662), shooter_id=40617641465, bullet_pos=(499.1469, 331.816)
+[13:33:41] [INFO] [Bullet] Using shooter_position, distance=259.216705322266
+[13:33:41] [INFO] [Bullet] Distance to wall: 259.216705322266 (17.6505421228836% of viewport)
+[13:33:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:41] [INFO] [LastChance] Threat detected: @Area2D@399
+[13:33:41] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:33:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:33:41] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
+[13:33:41] [ENEMY] [Enemy10] State: SEEKING_COVER -> IN_COVER
+[13:33:41] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[13:33:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:33:41] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[13:33:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:33:41] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[13:33:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:33:41] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[13:33:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(452.8577, 586.8662), shooter_id=40617641465, bullet_pos=(235.7139, 65.27518)
+[13:33:41] [INFO] [Bullet] Using shooter_position, distance=564.985534667969
+[13:33:41] [INFO] [Bullet] Distance to wall: 564.985534667969 (38.4709039723309% of viewport)
+[13:33:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:41] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[13:33:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:33:41] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[13:33:41] [ENEMY] [Enemy5] Hit taken, health: 2/3
+[13:33:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:33:41] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[13:33:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(452.8577, 586.8662), shooter_id=40617641465, bullet_pos=(59.76084, 251.8185)
+[13:33:41] [INFO] [Bullet] Using shooter_position, distance=516.509582519531
+[13:33:41] [INFO] [Bullet] Distance to wall: 516.509582519531 (35.1700872511279% of viewport)
+[13:33:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:41] [ENEMY] [Enemy5] Hit taken, health: 1/3
+[13:33:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:33:41] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[13:33:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.6161, 694.2263), shooter_id=41188066843, bullet_pos=(2459.327, 56.85944)
+[13:33:41] [INFO] [Bullet] Using shooter_position, distance=1958.33312988281
+[13:33:41] [INFO] [Bullet] Distance to wall: 1958.33312988281 (133.346503870813% of viewport)
+[13:33:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.6161, 694.2263), shooter_id=41188066843, bullet_pos=(2495.833, 74.20218)
+[13:33:42] [INFO] [Bullet] Using shooter_position, distance=1987.40905761719
+[13:33:42] [INFO] [Bullet] Distance to wall: 1987.40905761719 (135.326337256164% of viewport)
+[13:33:42] [ENEMY] [Enemy5] Hit taken, health: 0/3
+[13:33:42] [ENEMY] [Enemy5] Enemy died (ricochet: false, penetration: false)
+[13:33:42] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[13:33:42] [INFO] [SoundPropagation] Unregistered listener: Enemy5 (remaining: 9)
+[13:33:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:33:42] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=2
+[13:33:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(452.8577, 586.8662), shooter_id=40617641465, bullet_pos=(226.5952, 431.8283)
+[13:33:42] [INFO] [Bullet] Using shooter_position, distance=274.283538818359
+[13:33:42] [INFO] [Bullet] Distance to wall: 274.283538818359 (18.6764705210964% of viewport)
+[13:33:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=9
+[13:33:42] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=2
+[13:33:42] [ENEMY] [Enemy1] Hit taken, health: 0/2
+[13:33:42] [ENEMY] [Enemy1] Enemy died (ricochet: true, penetration: false)
+[13:33:42] [INFO] [ScoreManager] Ricochet kill registered
+[13:33:42] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[13:33:42] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 8)
+[13:33:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.7842, 695.0125), shooter_id=41188066843, bullet_pos=(1873.562, 275.9851)
+[13:33:42] [INFO] [Bullet] Using shooter_position, distance=1333.33276367188
+[13:33:42] [INFO] [Bullet] Distance to wall: 1333.33276367188 (90.7890796611777% of viewport)
+[13:33:42] [INFO] [Bullet] Distance-based penetration chance: 40.7460737286261%
+[13:33:42] [INFO] [Bullet] Starting wall penetration at (1873.562, 275.9851)
+[13:33:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.7141265869141
+[13:33:42] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:42] [INFO] [Bullet] Exiting penetration at (1917.864, 261.3192) after traveling 41.6666679382324 pixels through wall
+[13:33:42] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=8
+[13:33:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=2
+[13:33:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.7842, 695.0125), shooter_id=41188066843, bullet_pos=(1873.562, 275.9851)
+[13:33:42] [INFO] [Bullet] Using shooter_position, distance=1333.33276367188
+[13:33:42] [INFO] [Bullet] Distance to wall: 1333.33276367188 (90.7890796611777% of viewport)
+[13:33:42] [INFO] [Bullet] Distance-based penetration chance: 40.7460737286261%
+[13:33:42] [INFO] [Bullet] Penetration failed (distance roll)
+[13:33:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=8
+[13:33:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=2
+[13:33:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.7842, 695.0125), shooter_id=41188066843, bullet_pos=(1873.562, 275.9851)
+[13:33:42] [INFO] [Bullet] Using shooter_position, distance=1333.33276367188
+[13:33:42] [INFO] [Bullet] Distance to wall: 1333.33276367188 (90.7890796611777% of viewport)
+[13:33:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=8
+[13:33:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=2
+[13:33:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.7842, 695.0125), shooter_id=41188066843, bullet_pos=(1873.562, 275.9851)
+[13:33:42] [INFO] [Bullet] Using shooter_position, distance=1333.33276367188
+[13:33:42] [INFO] [Bullet] Distance to wall: 1333.33276367188 (90.7890796611777% of viewport)
+[13:33:42] [INFO] [Bullet] Distance-based penetration chance: 40.7460737286261%
+[13:33:42] [INFO] [Bullet] Penetration failed (distance roll)
+[13:33:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=8
+[13:33:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=2
+[13:33:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.7842, 695.0125), shooter_id=41188066843, bullet_pos=(1873.562, 275.9851)
+[13:33:42] [INFO] [Bullet] Using shooter_position, distance=1333.33276367188
+[13:33:42] [INFO] [Bullet] Distance to wall: 1333.33276367188 (90.7890796611777% of viewport)
+[13:33:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=8
+[13:33:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=2
+[13:33:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.7842, 695.0125), shooter_id=41188066843, bullet_pos=(1873.562, 275.9851)
+[13:33:42] [INFO] [Bullet] Using shooter_position, distance=1333.33276367188
+[13:33:42] [INFO] [Bullet] Distance to wall: 1333.33276367188 (90.7890796611777% of viewport)
+[13:33:42] [INFO] [Bullet] Distance-based penetration chance: 40.7460737286261%
+[13:33:42] [INFO] [Bullet] Penetration failed (distance roll)
+[13:33:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=8
+[13:33:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=2
+[13:33:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.7842, 695.0125), shooter_id=41188066843, bullet_pos=(1873.562, 275.9851)
+[13:33:42] [INFO] [Bullet] Using shooter_position, distance=1333.33276367188
+[13:33:42] [INFO] [Bullet] Distance to wall: 1333.33276367188 (90.7890796611777% of viewport)
+[13:33:42] [INFO] [Bullet] Distance-based penetration chance: 40.7460737286261%
+[13:33:42] [INFO] [Bullet] Starting wall penetration at (1873.562, 275.9851)
+[13:33:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.7141265869141
+[13:33:42] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:42] [INFO] [Bullet] Exiting penetration at (1917.864, 261.3192) after traveling 41.6666679382324 pixels through wall
+[13:33:42] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=8
+[13:33:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=2
+[13:33:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.7842, 695.0125), shooter_id=41188066843, bullet_pos=(1873.562, 275.9851)
+[13:33:43] [INFO] [Bullet] Using shooter_position, distance=1333.33276367188
+[13:33:43] [INFO] [Bullet] Distance to wall: 1333.33276367188 (90.7890796611777% of viewport)
+[13:33:43] [INFO] [Bullet] Distance-based penetration chance: 40.7460737286261%
+[13:33:43] [INFO] [Bullet] Penetration failed (distance roll)
+[13:33:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=8
+[13:33:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=2
+[13:33:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.7842, 695.0125), shooter_id=41188066843, bullet_pos=(1873.562, 275.9851)
+[13:33:43] [INFO] [Bullet] Using shooter_position, distance=1333.33276367188
+[13:33:43] [INFO] [Bullet] Distance to wall: 1333.33276367188 (90.7890796611777% of viewport)
+[13:33:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=8
+[13:33:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=2
+[13:33:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.7842, 695.0125), shooter_id=41188066843, bullet_pos=(1873.562, 275.9851)
+[13:33:43] [INFO] [Bullet] Using shooter_position, distance=1333.33276367188
+[13:33:43] [INFO] [Bullet] Distance to wall: 1333.33276367188 (90.7890796611777% of viewport)
+[13:33:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=8
+[13:33:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=2
+[13:33:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.7842, 695.0125), shooter_id=41188066843, bullet_pos=(1873.562, 275.9851)
+[13:33:43] [INFO] [Bullet] Using shooter_position, distance=1333.33276367188
+[13:33:43] [INFO] [Bullet] Distance to wall: 1333.33276367188 (90.7890796611777% of viewport)
+[13:33:43] [INFO] [Bullet] Distance-based penetration chance: 40.7460737286261%
+[13:33:43] [INFO] [Bullet] Starting wall penetration at (1873.562, 275.9851)
+[13:33:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.7141265869141
+[13:33:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:43] [INFO] [Bullet] Exiting penetration at (1917.864, 261.3192) after traveling 41.6666679382324 pixels through wall
+[13:33:43] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:43] [ENEMY] [Enemy4] State: COMBAT -> SEEKING_COVER
+[13:33:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.158, 708.8523), source=ENEMY (Enemy4), range=1469, listeners=8
+[13:33:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=2
+[13:33:43] [ENEMY] [Enemy10] State: SUPPRESSED -> IN_COVER
+[13:33:43] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
+[13:33:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.7842, 695.0125), shooter_id=41188066843, bullet_pos=(1873.562, 275.9851)
+[13:33:43] [INFO] [Bullet] Using shooter_position, distance=1333.33276367188
+[13:33:43] [INFO] [Bullet] Distance to wall: 1333.33276367188 (90.7890796611777% of viewport)
+[13:33:43] [INFO] [Bullet] Distance-based penetration chance: 40.7460737286261%
+[13:33:43] [INFO] [Bullet] Penetration failed (distance roll)
+[13:33:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(555.2495, 742.5714), source=ENEMY (Enemy4), range=1469, listeners=8
+[13:33:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=2
+[13:33:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(572.3521, 769.3298), shooter_id=41188066843, bullet_pos=(734.8859, 1011.512)
+[13:33:43] [INFO] [Bullet] Using shooter_position, distance=291.666473388672
+[13:33:43] [INFO] [Bullet] Distance to wall: 291.666473388672 (19.8601065003871% of viewport)
+[13:33:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.7842, 695.0125), shooter_id=41188066843, bullet_pos=(1873.562, 275.9851)
+[13:33:43] [INFO] [Bullet] Using shooter_position, distance=1333.33276367188
+[13:33:43] [INFO] [Bullet] Distance to wall: 1333.33276367188 (90.7890796611777% of viewport)
+[13:33:43] [INFO] [Bullet] Distance-based penetration chance: 40.7460737286261%
+[13:33:43] [INFO] [Bullet] Penetration failed (distance roll)
+[13:33:43] [ENEMY] [Enemy3] FLANKING started: target=(803.3416, 866.369), side=left, pos=(458.3947, 863.2848)
+[13:33:43] [ENEMY] [Enemy3] State: PURSUING -> FLANKING
+[13:33:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(592.4429, 799.5561), shooter_id=41188066843, bullet_pos=(778.8051, 1023.919)
+[13:33:43] [INFO] [Bullet] Using shooter_position, distance=291.666748046875
+[13:33:43] [INFO] [Bullet] Distance to wall: 291.666748046875 (19.8601252023692% of viewport)
+[13:33:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(572.3521, 769.3298), shooter_id=41188066843, bullet_pos=(928.457, 797.8148)
+[13:33:43] [INFO] [Bullet] Using shooter_position, distance=357.242370605469
+[13:33:43] [INFO] [Bullet] Distance to wall: 357.242370605469 (24.325289925321% of viewport)
+[13:33:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:43] [INFO] [LastChance] Threat detected: @Area2D@437
+[13:33:43] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:33:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:33:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.7842, 695.0125), shooter_id=41188066843, bullet_pos=(1873.562, 275.9851)
+[13:33:43] [INFO] [Bullet] Using shooter_position, distance=1333.33276367188
+[13:33:43] [INFO] [Bullet] Distance to wall: 1333.33276367188 (90.7890796611777% of viewport)
+[13:33:43] [INFO] [Bullet] Distance-based penetration chance: 40.7460737286261%
+[13:33:43] [INFO] [Bullet] Penetration failed (distance roll)
+[13:33:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(592.4429, 799.5561), shooter_id=41188066843, bullet_pos=(908.8608, 896.483)
+[13:33:43] [INFO] [Bullet] Using shooter_position, distance=330.9306640625
+[13:33:43] [INFO] [Bullet] Distance to wall: 330.9306640625 (22.5336774438482% of viewport)
+[13:33:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.7842, 695.0125), shooter_id=41188066843, bullet_pos=(1873.562, 275.9851)
+[13:33:43] [INFO] [Bullet] Using shooter_position, distance=1333.33276367188
+[13:33:43] [INFO] [Bullet] Distance to wall: 1333.33276367188 (90.7890796611777% of viewport)
+[13:33:43] [INFO] [Bullet] Distance-based penetration chance: 40.7460737286261%
+[13:33:43] [INFO] [Bullet] Starting wall penetration at (1873.562, 275.9851)
+[13:33:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.7141265869141
+[13:33:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:43] [INFO] [Bullet] Exiting penetration at (1917.864, 261.3192) after traveling 41.6666679382324 pixels through wall
+[13:33:43] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:43] [ENEMY] [Enemy2] FLANKING started: target=(744.8108, 475.5331), side=right, pos=(462.5694, 589.958)
+[13:33:43] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
+[13:33:43] [ENEMY] [Enemy2] State: FLANKING -> COMBAT
+[13:33:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(592.4429, 799.5561), shooter_id=41188066843, bullet_pos=(514.4713, 562.553)
+[13:33:44] [INFO] [Bullet] Using shooter_position, distance=249.49951171875
+[13:33:44] [INFO] [Bullet] Distance to wall: 249.49951171875 (16.9888805420767% of viewport)
+[13:33:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(572.3521, 769.3298), shooter_id=41188066843, bullet_pos=(513.5444, 237.2719)
+[13:33:44] [INFO] [Bullet] Using shooter_position, distance=535.298034667969
+[13:33:44] [INFO] [Bullet] Distance to wall: 535.298034667969 (36.4494275068321% of viewport)
+[13:33:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:44] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[13:33:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(572.3521, 769.3298), shooter_id=41188066843, bullet_pos=(658.9299, 52.26451)
+[13:33:44] [INFO] [Bullet] Using shooter_position, distance=722.273010253906
+[13:33:44] [INFO] [Bullet] Distance to wall: 722.273010253906 (49.1808974111417% of viewport)
+[13:33:44] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[13:33:44] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
+[13:33:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(506.5915, 639.7741), source=ENEMY (Enemy2), range=1469, listeners=8
+[13:33:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=2
+[13:33:44] [INFO] [LastChance] Threat detected: Bullet
+[13:33:44] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:33:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:33:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(497.913, 633.5725), source=ENEMY (Enemy2), range=1469, listeners=8
+[13:33:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=2
+[13:33:44] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[13:33:44] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[13:33:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(492.4777, 624.3945), source=ENEMY (Enemy2), range=1469, listeners=8
+[13:33:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=2
+[13:33:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(485.1532, 619.0534), source=ENEMY (Enemy2), range=1469, listeners=8
+[13:33:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=1
+[13:33:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(429.5579, 658.2932), shooter_id=40617641465, bullet_pos=(351.3295, 687.0121)
+[13:33:44] [INFO] [Bullet] Using shooter_position, distance=83.3333358764648
+[13:33:44] [INFO] [Bullet] Distance to wall: 83.3333358764648 (5.67432007632112% of viewport)
+[13:33:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:44] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[13:33:44] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:33:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(429.5579, 658.2932), shooter_id=40617641465, bullet_pos=(53.5568, 559.9473)
+[13:33:44] [INFO] [Bullet] Using shooter_position, distance=388.649871826172
+[13:33:44] [INFO] [Bullet] Distance to wall: 388.649871826172 (26.4638844367409% of viewport)
+[13:33:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:44] [INFO] [Bullet] Starting wall penetration at (53.5568, 559.9473)
+[13:33:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(552.3608, 592.0742), shooter_id=40617641465, bullet_pos=(1098.669, 288.4752)
+[13:33:44] [INFO] [Bullet] Using shooter_position, distance=624.999755859375
+[13:33:44] [INFO] [Bullet] Distance to wall: 624.999755859375 (42.5573826496755% of viewport)
+[13:33:44] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.9792766571045
+[13:33:44] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:44] [INFO] [Bullet] Exiting penetration at (16.38312, 544.0846) after traveling 35.4166679382324 pixels through wall
+[13:33:44] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[13:33:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(565.6248, 626.8107), shooter_id=40617641465, bullet_pos=(1374.948, 428.2181)
+[13:33:44] [INFO] [Bullet] Using shooter_position, distance=833.3330078125
+[13:33:44] [INFO] [Bullet] Distance to wall: 833.3330078125 (56.7431768662341% of viewport)
+[13:33:44] [INFO] [Bullet] Distance-based penetration chance: 80.4662936560603%
+[13:33:44] [INFO] [Bullet] Penetration failed (distance roll)
+[13:33:44] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
+[13:33:44] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
+[13:33:44] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[13:33:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(552.3608, 592.0742), shooter_id=40617641465, bullet_pos=(1377.754, 452.5648)
+[13:33:44] [INFO] [Bullet] Using shooter_position, distance=837.099853515625
+[13:33:44] [INFO] [Bullet] Distance to wall: 837.099853515625 (56.9996683167783% of viewport)
+[13:33:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(552.3608, 592.0742), shooter_id=40617641465, bullet_pos=(986.714, 688.228)
+[13:33:45] [INFO] [Bullet] Using shooter_position, distance=444.868774414063
+[13:33:45] [INFO] [Bullet] Distance to wall: 444.868774414063 (30.2919328913966% of viewport)
+[13:33:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:45] [INFO] [ScoreManager] Combo ended at 2. Max combo: 2
+[13:33:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(552.3608, 592.0742), shooter_id=40617641465, bullet_pos=(939.5496, 657.7093)
+[13:33:45] [INFO] [Bullet] Using shooter_position, distance=392.712524414063
+[13:33:45] [INFO] [Bullet] Distance to wall: 392.712524414063 (26.7405179220097% of viewport)
+[13:33:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:45] [INFO] [Bullet] Starting wall penetration at (939.5496, 657.7093)
+[13:33:45] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:33:45] [INFO] [Bullet] Exiting penetration at (913.8685, 641.0918) after traveling 25.5885429382324 pixels through wall
+[13:33:45] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
+[13:33:45] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[13:33:45] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[13:33:45] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:33:45] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[13:33:45] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
+[13:33:45] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[13:33:45] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:33:46] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[13:33:46] [ENEMY] [Enemy3] State: FLANKING -> COMBAT
+[13:33:46] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[13:33:46] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[13:33:46] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
+[13:33:46] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
+[13:33:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(533.5886, 1048.065), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(533.5886, 1048.065), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(551.7462, 1113.646), shooter_id=40902854154, bullet_pos=(596.8403, 1401.806)
+[13:33:47] [INFO] [Bullet] Using shooter_position, distance=291.666595458984
+[13:33:47] [INFO] [Bullet] Distance to wall: 291.666595458984 (19.8601148123791% of viewport)
+[13:33:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:47] [INFO] [Bullet] Starting wall penetration at (596.8403, 1401.806)
+[13:33:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.3481903076172
+[13:33:47] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:47] [INFO] [Bullet] Exiting penetration at (604.0554, 1447.911) after traveling 41.6666717529297 pixels through wall
+[13:33:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(533.5886, 1048.065), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(567.7078, 1106.942), shooter_id=40902854154, bullet_pos=(700.6805, 1412.604)
+[13:33:47] [INFO] [Bullet] Using shooter_position, distance=333.333251953125
+[13:33:47] [INFO] [Bullet] Distance to wall: 333.333251953125 (22.6972740712904% of viewport)
+[13:33:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:47] [INFO] [Bullet] Starting wall penetration at (700.6805, 1412.604)
+[13:33:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48.3723754882813
+[13:33:48] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:48] [INFO] [Bullet] Exiting penetration at (719.2966, 1455.396) after traveling 41.6666679382324 pixels through wall
+[13:33:48] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:48] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[13:33:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(533.5886, 1048.065), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:48] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(583.0475, 1094.803), shooter_id=40902854154, bullet_pos=(904.6979, 1477.609)
+[13:33:48] [INFO] [Bullet] Using shooter_position, distance=499.999542236328
+[13:33:48] [INFO] [Bullet] Distance to wall: 499.999542236328 (34.0458882489575% of viewport)
+[13:33:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(533.5886, 1048.065), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:48] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:48] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[13:33:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(595.6456, 1075.985), shooter_id=40902854154, bullet_pos=(1096.678, 1374.722)
+[13:33:48] [INFO] [Bullet] Using shooter_position, distance=583.333129882813
+[13:33:48] [INFO] [Bullet] Distance to wall: 583.333129882813 (39.7202254687622% of viewport)
+[13:33:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(583.0475, 1094.803), shooter_id=40902854154, bullet_pos=(405.0687, 2081.999)
+[13:33:48] [INFO] [Bullet] Using shooter_position, distance=1003.11187744141
+[13:33:48] [INFO] [Bullet] Distance to wall: 1003.11187744141 (68.3037322950788% of viewport)
+[13:33:48] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[13:33:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(583.0475, 1094.803), shooter_id=40902854154, bullet_pos=(49.07916, 1666.856)
+[13:33:48] [INFO] [Bullet] Using shooter_position, distance=782.538757324219
+[13:33:48] [INFO] [Bullet] Distance to wall: 782.538757324219 (53.2845029480963% of viewport)
+[13:33:48] [INFO] [Bullet] Distance-based penetration chance: 84.5014132272209%
+[13:33:48] [INFO] [Bullet] Starting wall penetration at (49.07916, 1666.856)
+[13:33:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8.86697196960449
+[13:33:48] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:48] [INFO] [Bullet] Exiting penetration at (26.22802, 1640.208) after traveling 30.1041698455811 pixels through wall
+[13:33:48] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[13:33:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(601.5345, 1051.799), shooter_id=40902854154, bullet_pos=(2490.646, 1375.635)
+[13:33:48] [INFO] [Bullet] Using shooter_position, distance=1916.66638183594
+[13:33:48] [INFO] [Bullet] Distance to wall: 1916.66638183594 (130.509338377908% of viewport)
+[13:33:49] [ENEMY] [Enemy3] FLANKING started: target=(712.4168, 1140.361), side=right, pos=(533.5886, 1048.065)
+[13:33:49] [ENEMY] [Enemy3] State: PURSUING -> FLANKING
+[13:33:49] [ENEMY] [Enemy3] State: FLANKING -> COMBAT
+[13:33:50] [ENEMY] [Enemy2] FLANKING started: target=(737.0999, 1063.662), side=right, pos=(433.6013, 644.5713)
+[13:33:50] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
+[13:33:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.5755, 1048.721), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.5755, 1048.721), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(52.10342, 1400.556)
+[13:33:50] [INFO] [Bullet] Using shooter_position, distance=541.66650390625
+[13:33:50] [INFO] [Bullet] Distance to wall: 541.66650390625 (36.883068287849% of viewport)
+[13:33:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:50] [INFO] [Bullet] Starting wall penetration at (52.10342, 1400.556)
+[13:33:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.5755, 1048.721), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.8164367675781
+[13:33:50] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:50] [INFO] [Bullet] Exiting penetration at (14.35083, 1427.988) after traveling 41.6666679382324 pixels through wall
+[13:33:50] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(52.10342, 1400.556)
+[13:33:50] [INFO] [Bullet] Using shooter_position, distance=541.66650390625
+[13:33:50] [INFO] [Bullet] Distance to wall: 541.66650390625 (36.883068287849% of viewport)
+[13:33:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:50] [INFO] [Bullet] Starting wall penetration at (52.10342, 1400.556)
+[13:33:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.5755, 1048.721), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.8164367675781
+[13:33:50] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:50] [INFO] [Bullet] Exiting penetration at (14.35083, 1427.988) after traveling 41.6666679382324 pixels through wall
+[13:33:50] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(52.10342, 1400.556)
+[13:33:50] [INFO] [Bullet] Using shooter_position, distance=541.66650390625
+[13:33:50] [INFO] [Bullet] Distance to wall: 541.66650390625 (36.883068287849% of viewport)
+[13:33:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.5755, 1048.721), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(52.10342, 1400.556)
+[13:33:50] [INFO] [Bullet] Using shooter_position, distance=541.66650390625
+[13:33:50] [INFO] [Bullet] Distance to wall: 541.66650390625 (36.883068287849% of viewport)
+[13:33:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.5755, 1048.721), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(316.363, 1587.588)
+[13:33:50] [INFO] [Bullet] Using shooter_position, distance=534.531799316406
+[13:33:50] [INFO] [Bullet] Distance to wall: 534.531799316406 (36.3972531327616% of viewport)
+[13:33:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(52.10342, 1400.556)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=541.66650390625
+[13:33:51] [INFO] [Bullet] Distance to wall: 541.66650390625 (36.883068287849% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [Bullet] Starting wall penetration at (52.10342, 1400.556)
+[13:33:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.5755, 1048.721), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.8164367675781
+[13:33:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:51] [INFO] [Bullet] Exiting penetration at (14.35083, 1427.988) after traveling 41.6666679382324 pixels through wall
+[13:33:51] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(263.3521, 1596.796)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=562.466979980469
+[13:33:51] [INFO] [Bullet] Distance to wall: 562.466979980469 (38.2994109524453% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [Bullet] Starting wall penetration at (263.3521, 1596.796)
+[13:33:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18.0773735046387
+[13:33:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:51] [INFO] [Bullet] Exiting penetration at (292.9636, 1624.303) after traveling 35.4166679382324 pixels through wall
+[13:33:51] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(52.10342, 1400.556)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=541.66650390625
+[13:33:51] [INFO] [Bullet] Distance to wall: 541.66650390625 (36.883068287849% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(638.5604, 1413.438)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=362.950805664063
+[13:33:51] [INFO] [Bullet] Distance to wall: 362.950805664063 (24.7139877653471% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.5755, 1048.721), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(52.10342, 1400.556)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=541.66650390625
+[13:33:51] [INFO] [Bullet] Distance to wall: 541.66650390625 (36.883068287849% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.5755, 1048.721), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(433.6798, 1598.797)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=519.742797851563
+[13:33:51] [INFO] [Bullet] Distance to wall: 519.742797851563 (35.3902428284447% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(896.9005, 1588.491)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=649.387817382813
+[13:33:51] [INFO] [Bullet] Distance to wall: 649.387817382813 (44.2180106044972% of viewport)
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(52.10342, 1400.556)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=541.66650390625
+[13:33:51] [INFO] [Bullet] Distance to wall: 541.66650390625 (36.883068287849% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.5755, 1048.721), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(254.5794, 1605.836)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=574.294616699219
+[13:33:51] [INFO] [Bullet] Distance to wall: 574.294616699219 (39.1047764857311% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(52.10342, 1400.556)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=541.66650390625
+[13:33:51] [INFO] [Bullet] Distance to wall: 541.66650390625 (36.883068287849% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.5755, 1048.721), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(401.0101, 1584.838)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=510.559295654297
+[13:33:51] [INFO] [Bullet] Distance to wall: 510.559295654297 (34.7649212768614% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(52.10342, 1400.556)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=541.66650390625
+[13:33:51] [INFO] [Bullet] Distance to wall: 541.66650390625 (36.883068287849% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [LastChance] Threat detected: @Area2D@478
+[13:33:51] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:33:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:33:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.5755, 1048.721), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(260.4906, 1599.832)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=566.4013671875
+[13:33:51] [INFO] [Bullet] Distance to wall: 566.4013671875 (38.5673106120722% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(519.5078, 1814.719)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=733.152893066406
+[13:33:51] [INFO] [Bullet] Distance to wall: 733.152893066406 (49.9217286381852% of viewport)
+[13:33:51] [INFO] [Bullet] Distance-based penetration chance: 88.4246499221173%
+[13:33:51] [INFO] [Bullet] Starting wall penetration at (519.5078, 1814.719)
+[13:33:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 4.00602674484253
+[13:33:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.756275177002
+[13:33:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:51] [INFO] [Bullet] Exiting penetration at (477.9088, 1839.656) after traveling 43.5005264282227 pixels through wall
+[13:33:51] [INFO] [Bullet] Damage multiplier after penetration: 0.05625
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(52.10342, 1400.556)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=541.66650390625
+[13:33:51] [INFO] [Bullet] Distance to wall: 541.66650390625 (36.883068287849% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [Bullet] Starting wall penetration at (52.10342, 1400.556)
+[13:33:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.5755, 1048.721), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.8164367675781
+[13:33:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:51] [INFO] [Bullet] Exiting penetration at (14.35083, 1427.988) after traveling 41.6666679382324 pixels through wall
+[13:33:51] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(266.4852, 1593.368)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=558.068603515625
+[13:33:51] [INFO] [Bullet] Distance to wall: 558.068603515625 (37.999917411053% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(531.9379, 1401.563)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=322.117095947266
+[13:33:51] [INFO] [Bullet] Distance to wall: 322.117095947266 (21.9335453841592% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(52.10342, 1400.556)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=541.66650390625
+[13:33:51] [INFO] [Bullet] Distance to wall: 541.66650390625 (36.883068287849% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(884.2068, 1401.608)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=507.163665771484
+[13:33:51] [INFO] [Bullet] Distance to wall: 507.163665771484 (34.5337065941279% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [Bullet] Starting wall penetration at (884.2068, 1401.608)
+[13:33:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.5755, 1048.721), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30.5680618286133
+[13:33:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:51] [INFO] [Bullet] Exiting penetration at (917.0303, 1389.162) after traveling 30.1041660308838 pixels through wall
+[13:33:51] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(1249.003, 1022.496)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=761.041687011719
+[13:33:51] [INFO] [Bullet] Distance to wall: 761.041687011719 (51.8207279008915% of viewport)
+[13:33:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(52.10342, 1400.556)
+[13:33:51] [INFO] [Bullet] Using shooter_position, distance=541.66650390625
+[13:33:51] [INFO] [Bullet] Distance to wall: 541.66650390625 (36.883068287849% of viewport)
+[13:33:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.5755, 1048.721), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(398.5779, 1589.373)
+[13:33:52] [INFO] [Bullet] Using shooter_position, distance=515.451477050781
+[13:33:52] [INFO] [Bullet] Distance to wall: 515.451477050781 (35.0980389040763% of viewport)
+[13:33:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(52.10342, 1400.556)
+[13:33:52] [INFO] [Bullet] Using shooter_position, distance=541.66650390625
+[13:33:52] [INFO] [Bullet] Distance to wall: 541.66650390625 (36.883068287849% of viewport)
+[13:33:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.5755, 1048.721), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(265.8353, 1594.089)
+[13:33:52] [INFO] [Bullet] Using shooter_position, distance=558.989440917969
+[13:33:52] [INFO] [Bullet] Distance to wall: 558.989440917969 (38.0626189230492% of viewport)
+[13:33:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(903.2877, 1682.412)
+[13:33:52] [INFO] [Bullet] Using shooter_position, distance=728.610656738281
+[13:33:52] [INFO] [Bullet] Distance to wall: 728.610656738281 (49.612439414167% of viewport)
+[13:33:52] [INFO] [Bullet] Distance-based penetration chance: 88.7854873501385%
+[13:33:52] [INFO] [Bullet] Starting wall penetration at (903.2877, 1682.412)
+[13:33:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19.6651744842529
+[13:33:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:52] [INFO] [Bullet] Exiting penetration at (927.6846, 1700.864) after traveling 25.5885410308838 pixels through wall
+[13:33:52] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
+[13:33:52] [ENEMY] [Enemy2] FLANKING stuck (2.0s no progress), target=(737.5092, 1060.578), pos=(435.8456, 663.9331), fail_count=1
+[13:33:52] [ENEMY] [Enemy2] State: FLANKING -> PURSUING
+[13:33:52] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[13:33:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(52.10342, 1400.556)
+[13:33:52] [INFO] [Bullet] Using shooter_position, distance=541.66650390625
+[13:33:52] [INFO] [Bullet] Distance to wall: 541.66650390625 (36.883068287849% of viewport)
+[13:33:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(314.1796, 1590.635)
+[13:33:52] [INFO] [Bullet] Using shooter_position, distance=538.124816894531
+[13:33:52] [INFO] [Bullet] Distance to wall: 538.124816894531 (36.6419083066329% of viewport)
+[13:33:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:52] [INFO] [LastChance] Threat detected: @Area2D@496
+[13:33:52] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:33:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:33:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(52.10342, 1400.556)
+[13:33:52] [INFO] [Bullet] Using shooter_position, distance=541.66650390625
+[13:33:52] [INFO] [Bullet] Distance to wall: 541.66650390625 (36.883068287849% of viewport)
+[13:33:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:52] [INFO] [Bullet] Starting wall penetration at (52.10342, 1400.556)
+[13:33:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.8164367675781
+[13:33:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:52] [INFO] [Bullet] Exiting penetration at (14.35083, 1427.988) after traveling 41.6666679382324 pixels through wall
+[13:33:52] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(254.5267, 1605.887)
+[13:33:52] [INFO] [Bullet] Using shooter_position, distance=574.36328125
+[13:33:52] [INFO] [Bullet] Distance to wall: 574.36328125 (39.1094519812568% of viewport)
+[13:33:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(635.2473, 1414.412)
+[13:33:52] [INFO] [Bullet] Using shooter_position, distance=362.502807617188
+[13:33:52] [INFO] [Bullet] Distance to wall: 362.502807617188 (24.6834827545396% of viewport)
+[13:33:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(512.1115, 1389.915)
+[13:33:52] [INFO] [Bullet] Using shooter_position, distance=308.538543701172
+[13:33:52] [INFO] [Bullet] Distance to wall: 308.538543701172 (21.0089567929668% of viewport)
+[13:33:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(889.6409, 1595.152)
+[13:33:52] [INFO] [Bullet] Using shooter_position, distance=650.110412597656
+[13:33:52] [INFO] [Bullet] Distance to wall: 650.110412597656 (44.2672134414113% of viewport)
+[13:33:52] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[13:33:52] [ENEMY] [Enemy3] State: COMBAT -> SEEKING_COVER
+[13:33:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(526.3447, 1802.404)
+[13:33:52] [INFO] [Bullet] Using shooter_position, distance=721.156677246094
+[13:33:52] [INFO] [Bullet] Distance to wall: 721.156677246094 (49.1048842438843% of viewport)
+[13:33:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(862.8544, 2070.451)
+[13:33:53] [INFO] [Bullet] Using shooter_position, distance=1056.19006347656
+[13:33:53] [INFO] [Bullet] Distance to wall: 1056.19006347656 (71.9179235843904% of viewport)
+[13:33:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.3032, 1082.148), shooter_id=40902854154, bullet_pos=(1220.983, 1667.238)
+[13:33:53] [INFO] [Bullet] Using shooter_position, distance=936.068176269531
+[13:33:53] [INFO] [Bullet] Distance to wall: 936.068176269531 (63.7386033997902% of viewport)
+[13:33:53] [INFO] [Bullet] Distance-based penetration chance: 72.3049627002448%
+[13:33:53] [INFO] [Bullet] Starting wall penetration at (1220.983, 1667.238)
+[13:33:53] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:33:53] [INFO] [Bullet] Exiting penetration at (1234.739, 1651.75) after traveling 15.714563369751 pixels through wall
+[13:33:53] [INFO] [Bullet] Damage multiplier after penetration: 0.0140625
+[13:33:54] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[13:33:54] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[13:33:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(513.9573, 1109.193), shooter_id=40902854154, bullet_pos=(357.6214, 1403.59)
+[13:33:55] [INFO] [Bullet] Using shooter_position, distance=333.332855224609
+[13:33:55] [INFO] [Bullet] Distance to wall: 333.332855224609 (22.6972470573163% of viewport)
+[13:33:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(515.4188, 1110.171), shooter_id=40902854154, bullet_pos=(366.7437, 1408.511)
+[13:33:55] [INFO] [Bullet] Using shooter_position, distance=333.333068847656
+[13:33:55] [INFO] [Bullet] Distance to wall: 333.333068847656 (22.6972616033024% of viewport)
+[13:33:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(521.0498, 1113.465), shooter_id=40902854154, bullet_pos=(147.8495, 2085.984)
+[13:33:55] [INFO] [Bullet] Using shooter_position, distance=1041.66760253906
+[13:33:55] [INFO] [Bullet] Distance to wall: 1041.66760253906 (70.9290625147051% of viewport)
+[13:33:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(521.0498, 1113.465), shooter_id=40902854154, bullet_pos=(58.54297, 1927.306)
+[13:33:55] [INFO] [Bullet] Using shooter_position, distance=936.082275390625
+[13:33:55] [INFO] [Bullet] Distance to wall: 936.082275390625 (63.7395634348714% of viewport)
+[13:33:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(500.8721, 1097.417), shooter_id=40902854154, bullet_pos=(217.593, 1402.973)
+[13:33:55] [INFO] [Bullet] Using shooter_position, distance=416.666717529297
+[13:33:55] [INFO] [Bullet] Distance to wall: 416.666717529297 (28.3716029791031% of viewport)
+[13:33:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(521.6719, 1113.786), shooter_id=40902854154, bullet_pos=(158.4953, 2090.092)
+[13:33:55] [INFO] [Bullet] Using shooter_position, distance=1041.66735839844
+[13:33:55] [INFO] [Bullet] Distance to wall: 1041.66735839844 (70.929045890721% of viewport)
+[13:33:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(500.8721, 1097.417), shooter_id=40902854154, bullet_pos=(66.41281, 1246.605)
+[13:33:55] [INFO] [Bullet] Using shooter_position, distance=459.360260009766
+[13:33:55] [INFO] [Bullet] Distance to wall: 459.360260009766 (31.2786847931003% of viewport)
+[13:33:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:55] [INFO] [Bullet] Starting wall penetration at (66.41281, 1246.605)
+[13:33:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(521.0498, 1113.465), shooter_id=40902854154, bullet_pos=(162.6962, 1738.385)
+[13:33:55] [INFO] [Bullet] Using shooter_position, distance=720.376831054688
+[13:33:55] [INFO] [Bullet] Distance to wall: 720.376831054688 (49.0517830827008% of viewport)
+[13:33:55] [INFO] [Bullet] Distance-based penetration chance: 89.4395864035158%
+[13:33:55] [INFO] [Bullet] Starting wall penetration at (162.6962, 1738.385)
+[13:33:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 2.69082570075989
+[13:33:55] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[13:33:55] [INFO] [Bullet] Exiting penetration at (38.31995, 1217.548) after traveling 35.4166679382324 pixels through wall
+[13:33:55] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[13:33:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(521.6719, 1113.786), shooter_id=40902854154, bullet_pos=(59.07527, 1896.644)
+[13:33:55] [INFO] [Bullet] Using shooter_position, distance=909.320129394531
+[13:33:55] [INFO] [Bullet] Distance to wall: 909.320129394531 (61.9172797027503% of viewport)
+[13:33:55] [INFO] [Bullet] Max penetration distance exceeded: 60.2083358764648 >= 48
+[13:33:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:55] [INFO] [Bullet] Exiting penetration at (194.1786, 1681.28) after traveling 60.2083358764648 pixels through wall
+[13:33:55] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[13:33:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(487.6778, 1073.691), shooter_id=40902854154, bullet_pos=(31.45156, 1278.282)
+[13:33:55] [INFO] [Bullet] Using shooter_position, distance=500.000183105469
+[13:33:55] [INFO] [Bullet] Distance to wall: 500.000183105469 (34.0459318869158% of viewport)
+[13:33:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(484.5547, 1055.808), shooter_id=40902854154, bullet_pos=(31.64502, 1126.11)
+[13:33:56] [INFO] [Bullet] Using shooter_position, distance=458.333465576172
+[13:33:56] [INFO] [Bullet] Distance to wall: 458.333465576172 (31.2087684720084% of viewport)
+[13:33:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:56] [INFO] [Bullet] Starting wall penetration at (31.64502, 1126.11)
+[13:33:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47.0259132385254
+[13:33:56] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:56] [INFO] [Bullet] Exiting penetration at (-14.46942, 1133.268) after traveling 41.6666679382324 pixels through wall
+[13:33:56] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:56] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[13:33:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:56] [ENEMY] [Enemy4] Heard gunshot at (552.5511, 1053.147), source_type=1, intensity=0.42, distance=77
+[13:33:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:56] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[13:33:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(521.6719, 1113.786), shooter_id=40902854154, bullet_pos=(205.0945, 1593.87)
+[13:33:56] [INFO] [Bullet] Using shooter_position, distance=575.067260742188
+[13:33:56] [INFO] [Bullet] Distance to wall: 575.067260742188 (39.157387239384% of viewport)
+[13:33:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:56] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[13:33:56] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[13:33:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(521.6719, 1113.786), shooter_id=40902854154, bullet_pos=(339.5137, 1817.461)
+[13:33:56] [INFO] [Bullet] Using shooter_position, distance=726.870239257813
+[13:33:56] [INFO] [Bullet] Distance to wall: 726.870239257813 (49.4939311875764% of viewport)
+[13:33:56] [INFO] [Bullet] Distance-based penetration chance: 88.9237469478276%
+[13:33:56] [INFO] [Bullet] Penetration failed (distance roll)
+[13:33:56] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[13:33:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[13:33:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:56] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(485.1426, 1062.457), shooter_id=40902854154, bullet_pos=(41.29947, 1176.793)
+[13:33:56] [INFO] [Bullet] Using shooter_position, distance=458.333251953125
+[13:33:56] [INFO] [Bullet] Distance to wall: 458.333251953125 (31.2087539260224% of viewport)
+[13:33:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:56] [INFO] [Bullet] Starting wall penetration at (41.29947, 1176.793)
+[13:33:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.063591003418
+[13:33:56] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:56] [INFO] [Bullet] Exiting penetration at (-3.891838, 1188.434) after traveling 41.6666679382324 pixels through wall
+[13:33:56] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:56] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(493.0031, 1086.081), shooter_id=40902854154, bullet_pos=(52.17299, 1400.837)
+[13:33:56] [INFO] [Bullet] Using shooter_position, distance=541.666748046875
+[13:33:56] [INFO] [Bullet] Distance to wall: 541.666748046875 (36.883084911833% of viewport)
+[13:33:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:56] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:56] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[13:33:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(504.5754, 1101.406), shooter_id=40902854154, bullet_pos=(272.4175, 1395.902)
+[13:33:56] [INFO] [Bullet] Using shooter_position, distance=375.000396728516
+[13:33:56] [INFO] [Bullet] Distance to wall: 375.000396728516 (25.5344665781699% of viewport)
+[13:33:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:56] [INFO] [Bullet] Starting wall penetration at (272.4175, 1395.902)
+[13:33:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.1681461334229
+[13:33:56] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:56] [INFO] [Bullet] Exiting penetration at (243.5268, 1432.55) after traveling 41.6666717529297 pixels through wall
+[13:33:56] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:56] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(510.6627, 1106.775), shooter_id=40902854154, bullet_pos=(336.9369, 1391.257)
+[13:33:56] [INFO] [Bullet] Using shooter_position, distance=333.333038330078
+[13:33:56] [INFO] [Bullet] Distance to wall: 333.333038330078 (22.6972595253044% of viewport)
+[13:33:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:56] [INFO] [Bullet] Starting wall penetration at (336.9369, 1391.257)
+[13:33:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(493.0031, 1086.081), shooter_id=40902854154, bullet_pos=(309.2226, 1597.66)
+[13:33:56] [INFO] [Bullet] Using shooter_position, distance=543.589172363281
+[13:33:56] [INFO] [Bullet] Distance to wall: 543.589172363281 (37.0139863185638% of viewport)
+[13:33:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:56] [INFO] [Bullet] Starting wall penetration at (309.2226, 1597.66)
+[13:33:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.8298397064209
+[13:33:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 22.3619041442871
+[13:33:56] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:56] [INFO] [Bullet] Exiting penetration at (341.3124, 1622.232) after traveling 35.4166679382324 pixels through wall
+[13:33:56] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[13:33:56] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:56] [INFO] [Bullet] Exiting penetration at (312.6153, 1431.085) after traveling 41.6666679382324 pixels through wall
+[13:33:56] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(511.106, 1107.118), shooter_id=40902854154, bullet_pos=(339.7298, 1393.022)
+[13:33:57] [INFO] [Bullet] Using shooter_position, distance=333.333282470703
+[13:33:57] [INFO] [Bullet] Distance to wall: 333.333282470703 (22.6972761492885% of viewport)
+[13:33:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:57] [INFO] [Bullet] Starting wall penetration at (339.7298, 1393.022)
+[13:33:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24.540922164917
+[13:33:57] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:57] [INFO] [Bullet] Exiting penetration at (315.7371, 1433.049) after traveling 41.6666679382324 pixels through wall
+[13:33:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(511.106, 1107.118), shooter_id=40902854154, bullet_pos=(339.7298, 1393.022)
+[13:33:57] [INFO] [Bullet] Using shooter_position, distance=333.333282470703
+[13:33:57] [INFO] [Bullet] Distance to wall: 333.333282470703 (22.6972761492885% of viewport)
+[13:33:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:57] [INFO] [Bullet] Starting wall penetration at (339.7298, 1393.022)
+[13:33:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24.540922164917
+[13:33:57] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:57] [INFO] [Bullet] Exiting penetration at (315.7371, 1433.049) after traveling 41.6666679382324 pixels through wall
+[13:33:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(511.106, 1107.118), shooter_id=40902854154, bullet_pos=(339.7298, 1393.022)
+[13:33:57] [INFO] [Bullet] Using shooter_position, distance=333.333282470703
+[13:33:57] [INFO] [Bullet] Distance to wall: 333.333282470703 (22.6972761492885% of viewport)
+[13:33:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:57] [INFO] [Bullet] Starting wall penetration at (339.7298, 1393.022)
+[13:33:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24.540922164917
+[13:33:57] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:57] [INFO] [Bullet] Exiting penetration at (315.7371, 1433.049) after traveling 41.6666679382324 pixels through wall
+[13:33:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(516.1053, 1110.612), shooter_id=40902854154, bullet_pos=(371.0186, 1410.714)
+[13:33:57] [INFO] [Bullet] Using shooter_position, distance=333.333282470703
+[13:33:57] [INFO] [Bullet] Distance to wall: 333.333282470703 (22.6972761492885% of viewport)
+[13:33:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:57] [INFO] [Bullet] Starting wall penetration at (371.0186, 1410.714)
+[13:33:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.2381782531738
+[13:33:57] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:57] [INFO] [Bullet] Exiting penetration at (350.7065, 1452.728) after traveling 41.6666679382324 pixels through wall
+[13:33:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(529.6699, 1117.233), shooter_id=40902854154, bullet_pos=(416.6275, 1604.286)
+[13:33:57] [INFO] [Bullet] Using shooter_position, distance=499.999420166016
+[13:33:57] [INFO] [Bullet] Distance to wall: 499.999420166016 (34.0458799369655% of viewport)
+[13:33:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:57] [INFO] [Bullet] Starting wall penetration at (416.6275, 1604.286)
+[13:33:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38.7479057312012
+[13:33:57] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:57] [INFO] [Bullet] Exiting penetration at (406.0768, 1649.745) after traveling 41.6666679382324 pixels through wall
+[13:33:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(541.7635, 1120.335), shooter_id=40902854154, bullet_pos=(528.8393, 1411.715)
+[13:33:57] [INFO] [Bullet] Using shooter_position, distance=291.666595458984
+[13:33:57] [INFO] [Bullet] Distance to wall: 291.666595458984 (19.8601148123791% of viewport)
+[13:33:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:57] [INFO] [Bullet] Starting wall penetration at (528.8393, 1411.715)
+[13:33:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.3813705444336
+[13:33:57] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:57] [INFO] [Bullet] Exiting penetration at (526.7714, 1458.336) after traveling 41.6666679382324 pixels through wall
+[13:33:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(546.7589, 1120.948), shooter_id=40902854154, bullet_pos=(555.4059, 1412.487)
+[13:33:57] [INFO] [Bullet] Using shooter_position, distance=291.666412353516
+[13:33:57] [INFO] [Bullet] Distance to wall: 291.666412353516 (19.8601023443911% of viewport)
+[13:33:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:57] [INFO] [Bullet] Starting wall penetration at (555.4059, 1412.487)
+[13:33:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47.1534194946289
+[13:33:57] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:57] [INFO] [Bullet] Exiting penetration at (556.7894, 1459.133) after traveling 41.6666679382324 pixels through wall
+[13:33:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(547.0677, 1120.974), shooter_id=40902854154, bullet_pos=(557.0426, 1412.47)
+[13:33:57] [INFO] [Bullet] Using shooter_position, distance=291.666961669922
+[13:33:57] [INFO] [Bullet] Distance to wall: 291.666961669922 (19.8601397483553% of viewport)
+[13:33:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:57] [INFO] [Bullet] Starting wall penetration at (557.0426, 1412.47)
+[13:33:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47.1373138427734
+[13:33:57] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:57] [INFO] [Bullet] Exiting penetration at (558.6386, 1459.11) after traveling 41.6666679382324 pixels through wall
+[13:33:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(547.9161, 1121.037), shooter_id=40902854154, bullet_pos=(561.5345, 1412.386)
+[13:33:57] [INFO] [Bullet] Using shooter_position, distance=291.666625976563
+[13:33:57] [INFO] [Bullet] Distance to wall: 291.666625976563 (19.8601168903771% of viewport)
+[13:33:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:57] [INFO] [Bullet] Starting wall penetration at (561.5345, 1412.386)
+[13:33:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47.0527839660645
+[13:33:57] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:57] [INFO] [Bullet] Exiting penetration at (563.7135, 1459.001) after traveling 41.6666679382324 pixels through wall
+[13:33:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:58] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(550.8719, 1121.175), shooter_id=40902854154, bullet_pos=(577.1432, 1411.656)
+[13:33:58] [INFO] [Bullet] Using shooter_position, distance=291.666778564453
+[13:33:58] [INFO] [Bullet] Distance to wall: 291.666778564453 (19.8601272803672% of viewport)
+[13:33:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:58] [INFO] [Bullet] Starting wall penetration at (577.1432, 1411.656)
+[13:33:58] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.321102142334
+[13:33:58] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:58] [INFO] [Bullet] Exiting penetration at (581.3467, 1458.133) after traveling 41.6666641235352 pixels through wall
+[13:33:58] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:58] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(550.8719, 1121.175), shooter_id=40902854154, bullet_pos=(577.1432, 1411.656)
+[13:33:58] [INFO] [Bullet] Using shooter_position, distance=291.666778564453
+[13:33:58] [INFO] [Bullet] Distance to wall: 291.666778564453 (19.8601272803672% of viewport)
+[13:33:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:58] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(550.7373, 1121.171), shooter_id=40902854154, bullet_pos=(576.434, 1411.704)
+[13:33:58] [INFO] [Bullet] Using shooter_position, distance=291.666656494141
+[13:33:58] [INFO] [Bullet] Distance to wall: 291.666656494141 (19.8601189683752% of viewport)
+[13:33:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:58] [INFO] [Bullet] Starting wall penetration at (576.434, 1411.704)
+[13:33:58] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.3691558837891
+[13:33:58] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:58] [INFO] [Bullet] Exiting penetration at (580.5455, 1458.189) after traveling 41.6666679382324 pixels through wall
+[13:33:58] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:58] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(545.8483, 1120.864), shooter_id=40902854154, bullet_pos=(550.577, 1412.492)
+[13:33:58] [INFO] [Bullet] Using shooter_position, distance=291.666381835938
+[13:33:58] [INFO] [Bullet] Distance to wall: 291.666381835938 (19.8601002663931% of viewport)
+[13:33:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:58] [INFO] [Bullet] Starting wall penetration at (550.577, 1412.492)
+[13:33:58] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47.1592750549316
+[13:33:58] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:58] [INFO] [Bullet] Exiting penetration at (551.3336, 1459.153) after traveling 41.6666679382324 pixels through wall
+[13:33:58] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5511, 1053.147), source=ENEMY (Enemy3), range=1469, listeners=8
+[13:33:58] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[13:33:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(540.9727, 1120.203), shooter_id=40902854154, bullet_pos=(524.6164, 1411.411)
+[13:33:58] [INFO] [Bullet] Using shooter_position, distance=291.66650390625
+[13:33:58] [INFO] [Bullet] Distance to wall: 291.66650390625 (19.8601085783851% of viewport)
+[13:33:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:58] [INFO] [Bullet] Starting wall penetration at (524.6164, 1411.411)
+[13:33:58] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.076416015625
+[13:33:58] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:33:58] [INFO] [Bullet] Exiting penetration at (521.9994, 1458.004) after traveling 41.6666641235352 pixels through wall
+[13:33:58] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[13:33:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(540.6902, 1120.154), shooter_id=40902854154, bullet_pos=(523.1073, 1411.29)
+[13:33:58] [INFO] [Bullet] Using shooter_position, distance=291.667053222656
+[13:33:58] [INFO] [Bullet] Distance to wall: 291.667053222656 (19.8601459823493% of viewport)
+[13:33:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[13:33:58] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
+[13:33:58] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
+[13:34:00] [ENEMY] [Enemy2] FLANKING started: target=(497.2435, 1198.086), side=left, pos=(405.8289, 648.3094)
+[13:34:00] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
+[13:34:01] [INFO] ------------------------------------------------------------
+[13:34:01] [INFO] GAME LOG ENDED: 2026-01-22T13:34:01
+[13:34:01] [INFO] ============================================================
diff --git a/docs/case-studies/issue-217/issue-data.json b/docs/case-studies/issue-217/issue-data.json
new file mode 100644
index 00000000..7a57af94
--- /dev/null
+++ b/docs/case-studies/issue-217/issue-data.json
@@ -0,0 +1 @@
+{"author":{"id":"U_kgDOB_qn0g","is_bot":false,"login":"Jhon-Crow","name":"Jhon-Crow"},"body":"сделай модельки врагов на основе модельки игрока, но основной цвет должен быть чёрный, с белыми черепами(на предплечий или шлеме).\n","comments":[],"createdAt":"2026-01-22T06:10:35Z","labels":[],"state":"OPEN","title":"добавить модельки врагов"}
diff --git a/docs/case-studies/issue-217/logs/game_log_20260122_105742.txt b/docs/case-studies/issue-217/logs/game_log_20260122_105742.txt
new file mode 100644
index 00000000..50978bc1
--- /dev/null
+++ b/docs/case-studies/issue-217/logs/game_log_20260122_105742.txt
@@ -0,0 +1,776 @@
+[10:57:42] [INFO] ============================================================
+[10:57:42] [INFO] GAME LOG STARTED
+[10:57:42] [INFO] ============================================================
+[10:57:42] [INFO] Timestamp: 2026-01-22T10:57:42
+[10:57:42] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_105742.txt
+[10:57:42] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[10:57:42] [INFO] OS: Windows
+[10:57:42] [INFO] Debug build: false
+[10:57:42] [INFO] Engine version: 4.3-stable (official)
+[10:57:42] [INFO] Project: Godot Top-Down Template
+[10:57:42] [INFO] ------------------------------------------------------------
+[10:57:42] [INFO] [GameManager] GameManager ready
+[10:57:42] [INFO] [ScoreManager] ScoreManager ready
+[10:57:42] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[10:57:42] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[10:57:42] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[10:57:42] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[10:57:42] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[10:57:42] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[10:57:42] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[10:57:42] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[10:57:42] [INFO] [LastChance] Resetting all effects (scene change detected)
+[10:57:42] [INFO] [LastChance] Last chance shader loaded successfully
+[10:57:42] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[10:57:42] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[10:57:42] [INFO] [LastChance]   Sepia intensity: 0.70
+[10:57:42] [INFO] [LastChance]   Brightness: 0.60
+[10:57:42] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[10:57:42] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[10:57:42] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[10:57:42] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[10:57:42] [INFO] [Player] Ready! Grenades: 1/3
+[10:57:42] [INFO] [ScoreManager] Level started with 10 enemies
+[10:57:42] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[10:57:42] [ENEMY] [Enemy1] Registered as sound listener
+[10:57:42] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[10:57:42] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[10:57:42] [ENEMY] [Enemy2] Registered as sound listener
+[10:57:42] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[10:57:42] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[10:57:42] [ENEMY] [Enemy3] Registered as sound listener
+[10:57:42] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[10:57:42] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[10:57:42] [ENEMY] [Enemy4] Registered as sound listener
+[10:57:42] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[10:57:42] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[10:57:42] [ENEMY] [Enemy5] Registered as sound listener
+[10:57:42] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[10:57:42] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[10:57:42] [ENEMY] [Enemy6] Registered as sound listener
+[10:57:42] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[10:57:42] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[10:57:42] [ENEMY] [Enemy7] Registered as sound listener
+[10:57:42] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 4, behavior: PATROL, player_found: yes
+[10:57:42] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[10:57:42] [ENEMY] [Enemy8] Registered as sound listener
+[10:57:42] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[10:57:42] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[10:57:42] [ENEMY] [Enemy9] Registered as sound listener
+[10:57:42] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[10:57:42] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[10:57:42] [ENEMY] [Enemy10] Registered as sound listener
+[10:57:42] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[10:57:42] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[10:57:42] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[10:57:42] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[10:57:42] [INFO] [LastChance] Found player: Player
+[10:57:42] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[10:57:42] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[10:57:42] [INFO] [LastChance] Connected to player Died signal (C#)
+[10:57:43] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[10:57:43] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[10:57:45] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[10:57:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(402.0952, 781.4086), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[10:57:45] [ENEMY] [Enemy1] Heard gunshot at (402.0952, 781.4086), source_type=0, intensity=0.01, distance=443
+[10:57:45] [ENEMY] [Enemy2] Heard gunshot at (402.0952, 781.4086), source_type=0, intensity=0.05, distance=231
+[10:57:45] [ENEMY] [Enemy4] Heard gunshot at (402.0952, 781.4086), source_type=0, intensity=0.01, distance=415
+[10:57:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[10:57:45] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[10:57:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(384.597, 759.6575), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[10:57:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[10:57:45] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[10:57:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(377.563, 735.715), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[10:57:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[10:57:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(384.59702, 759.6575), shooter_id=43721426610, bullet_pos=(937.84186, 684.45013)
+[10:57:45] [INFO] [Bullet] Using shooter_position, distance=558,33325
+[10:57:45] [INFO] [Bullet] Distance to wall: 558,33325 (38,017937% of viewport)
+[10:57:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[10:57:45] [INFO] [Bullet] Starting wall penetration at (937.84186, 684.45013)
+[10:57:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(647.0872, 764.3594), source=ENEMY (Enemy3), range=1469, listeners=10
+[10:57:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[10:57:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40,1921
+[10:57:45] [INFO] [Bullet] Body exited signal received for penetrating body
+[10:57:45] [INFO] [Bullet] Exiting penetration at (975.8258, 679.2866) after traveling 33,333336 pixels through wall
+[10:57:45] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[10:57:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(640.0831, 772.4045), source=ENEMY (Enemy3), range=1469, listeners=10
+[10:57:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[10:57:46] [INFO] [LastChance] Threat detected: @Area2D@288
+[10:57:46] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:57:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:57:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(633.079, 780.4493), source=ENEMY (Enemy3), range=1469, listeners=10
+[10:57:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[10:57:46] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[10:57:46] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[10:57:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(377.56302, 735.71497), shooter_id=43721426610, bullet_pos=(934.3605, 694.33276)
+[10:57:46] [INFO] [Bullet] Using shooter_position, distance=558,3332
+[10:57:46] [INFO] [Bullet] Distance to wall: 558,3332 (38,017933% of viewport)
+[10:57:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[10:57:46] [INFO] [Bullet] Starting wall penetration at (934.3605, 694.33276)
+[10:57:46] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[10:57:46] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[10:57:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36,68929
+[10:57:46] [INFO] [Bullet] Body exited signal received for penetrating body
+[10:57:46] [INFO] [Bullet] Exiting penetration at (972.5884, 691.4916) after traveling 33,333332 pixels through wall
+[10:57:46] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[10:57:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(377.56302, 735.71497), shooter_id=43721426610, bullet_pos=(972.5884, 691.4916)
+[10:57:46] [INFO] [Bullet] Using shooter_position, distance=596,6665
+[10:57:46] [INFO] [Bullet] Distance to wall: 596,6665 (40,62812% of viewport)
+[10:57:46] [INFO] [Bullet] Distance-based penetration chance: 99,2672%
+[10:57:46] [INFO] [Bullet] Starting wall penetration at (972.5884, 691.4916)
+[10:57:46] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:57:46] [INFO] [Bullet] Exiting penetration at (1010.8163, 688.6504) after traveling 33,333332 pixels through wall
+[10:57:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(633.079, 780.4493), shooter_id=40902854154, bullet_pos=(378.9219, 711.5394)
+[10:57:46] [INFO] [Bullet] Using shooter_position, distance=263.333312988281
+[10:57:46] [INFO] [Bullet] Distance to wall: 263.333312988281 (17.9308495086366% of viewport)
+[10:57:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[10:57:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(647.0872, 764.3594), shooter_id=40902854154, bullet_pos=(51.35724, 797.7799)
+[10:57:46] [INFO] [Bullet] Using shooter_position, distance=596.666687011719
+[10:57:46] [INFO] [Bullet] Distance to wall: 596.666687011719 (40.6281318919191% of viewport)
+[10:57:46] [INFO] [Bullet] Distance-based penetration chance: 99.2671794594278%
+[10:57:46] [INFO] [Bullet] Starting wall penetration at (51.35724, 797.7799)
+[10:57:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18.9456577301025
+[10:57:46] [INFO] [Bullet] Body exited signal received for penetrating body
+[10:57:46] [INFO] [Bullet] Exiting penetration at (13.08408, 799.927) after traveling 33.3333358764648 pixels through wall
+[10:57:46] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:57:46] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[10:57:46] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[10:57:46] [INFO] [LastChance] Resetting all effects (scene change detected)
+[10:57:46] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[10:57:46] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[10:57:46] [INFO] [Player] Ready! Grenades: 1/3
+[10:57:46] [INFO] [ScoreManager] Level started with 10 enemies
+[10:57:46] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[10:57:46] [ENEMY] [Enemy1] Registered as sound listener
+[10:57:46] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[10:57:46] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[10:57:46] [ENEMY] [Enemy2] Registered as sound listener
+[10:57:46] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[10:57:46] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[10:57:46] [ENEMY] [Enemy3] Registered as sound listener
+[10:57:46] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[10:57:46] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[10:57:46] [ENEMY] [Enemy4] Registered as sound listener
+[10:57:46] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[10:57:46] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[10:57:46] [ENEMY] [Enemy5] Registered as sound listener
+[10:57:46] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[10:57:46] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[10:57:46] [ENEMY] [Enemy6] Registered as sound listener
+[10:57:46] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[10:57:46] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[10:57:46] [ENEMY] [Enemy7] Registered as sound listener
+[10:57:46] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[10:57:46] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[10:57:46] [ENEMY] [Enemy8] Registered as sound listener
+[10:57:46] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[10:57:46] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[10:57:46] [ENEMY] [Enemy9] Registered as sound listener
+[10:57:46] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[10:57:46] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[10:57:46] [ENEMY] [Enemy10] Registered as sound listener
+[10:57:46] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[10:57:46] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[10:57:46] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[10:57:46] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[10:57:46] [INFO] [LastChance] Found player: Player
+[10:57:46] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[10:57:46] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[10:57:46] [INFO] [LastChance] Connected to player Died signal (C#)
+[10:57:47] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[10:57:47] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[10:57:49] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[10:57:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(477.6349, 801.2717), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[10:57:49] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[10:57:49] [ENEMY] [Enemy1] Heard gunshot at (477.6349, 801.2717), source_type=0, intensity=0.01, distance=485
+[10:57:49] [ENEMY] [Enemy2] Heard gunshot at (477.6349, 801.2717), source_type=0, intensity=0.04, distance=263
+[10:57:49] [ENEMY] [Enemy4] Heard gunshot at (477.6349, 801.2717), source_type=0, intensity=0.02, distance=337
+[10:57:49] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[10:57:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(477.63492, 801.2717), shooter_id=97962167038, bullet_pos=(502.3446, 797.4729)
+[10:57:49] [INFO] [Bullet] Using shooter_position, distance=24,999994
+[10:57:49] [INFO] [Bullet] Distance to wall: 24,999994 (1,7022957% of viewport)
+[10:57:49] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:57:49] [INFO] [Bullet] Starting wall penetration at (502.3446, 797.4729)
+[10:57:49] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:57:49] [INFO] [Bullet] Exiting penetration at (548.46936, 790.3818) after traveling 41,66667 pixels through wall
+[10:57:49] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[10:57:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(463.5001, 796.1373), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[10:57:49] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[10:57:49] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[10:57:49] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[10:57:49] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[10:57:49] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[10:57:49] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[10:57:49] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[10:57:49] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[10:57:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(461.5417, 926.7309), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[10:57:51] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=4
+[10:57:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(461.54172, 926.7309), shooter_id=97962167038, bullet_pos=(515.1808, 903.8043)
+[10:57:51] [INFO] [Bullet] Using shooter_position, distance=58,33333
+[10:57:51] [INFO] [Bullet] Distance to wall: 58,33333 (3,9720237% of viewport)
+[10:57:51] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:57:51] [INFO] [Bullet] Starting wall penetration at (515.1808, 903.8043)
+[10:57:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28,742306
+[10:57:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[10:57:51] [INFO] [Bullet] Exiting penetration at (550.4293, 888.7383) after traveling 33,333336 pixels through wall
+[10:57:51] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[10:57:51] [ENEMY] [Enemy10] FLANKING started: target=(406.4818, 1098.657), side=right, pos=(955.5916, 1417.202)
+[10:57:51] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[10:57:51] [ENEMY] [Enemy1] FLANKING started: target=(581.719, 743.3424), side=right, pos=(244.6155, 401.9332)
+[10:57:51] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
+[10:57:52] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
+[10:57:52] [ENEMY] [Enemy3] State: IN_COVER -> COMBAT
+[10:57:53] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[10:57:53] [ENEMY] [Enemy1] State: FLANKING -> COMBAT
+[10:57:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(509.0515, 1072.015), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:57:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[10:57:54] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[10:57:54] [INFO] [LastChance] Threat detected: Bullet
+[10:57:54] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:57:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:57:54] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[10:57:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[10:57:54] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[10:57:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(509.0515, 1072.015), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:57:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[10:57:54] [INFO] [LastChance] Threat detected: Bullet
+[10:57:54] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:57:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:57:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[10:57:54] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[10:57:54] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[10:57:54] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[10:57:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(509.0515, 1072.015), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:57:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[10:57:54] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[10:57:54] [INFO] [LastChance] Threat detected: Bullet
+[10:57:54] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:57:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:57:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[10:57:54] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[10:57:54] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[10:57:54] [INFO] [PenultimateHit]   - Time scale: 0.10
+[10:57:54] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[10:57:54] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[10:57:54] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[10:57:54] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[10:57:54] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[10:57:54] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[10:57:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(509.0515, 1072.015), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:57:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[10:57:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(509.0515, 1072.015), shooter_id=97140083405, bullet_pos=(497.976, 1013.894)
+[10:57:54] [INFO] [Bullet] Using shooter_position, distance=59.1667137145996
+[10:57:54] [INFO] [Bullet] Distance to wall: 59.1667137145996 (4.02877033482005% of viewport)
+[10:57:54] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:57:54] [INFO] [Bullet] Starting wall penetration at (497.976, 1013.894)
+[10:57:54] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:57:54] [INFO] [Bullet] Exiting penetration at (496.26, 1004.889) after traveling 4.16666650772095 pixels through wall
+[10:57:54] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:57:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[10:57:54] [INFO] [PenultimateHit] Ending penultimate hit effect
+[10:57:54] [INFO] [LastChance] Resetting all effects (scene change detected)
+[10:57:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[10:57:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[10:57:54] [INFO] [Player] Ready! Grenades: 1/3
+[10:57:54] [INFO] [ScoreManager] Level started with 10 enemies
+[10:57:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[10:57:54] [ENEMY] [Enemy1] Registered as sound listener
+[10:57:54] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[10:57:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[10:57:54] [ENEMY] [Enemy2] Registered as sound listener
+[10:57:54] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[10:57:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[10:57:54] [ENEMY] [Enemy3] Registered as sound listener
+[10:57:54] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[10:57:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[10:57:54] [ENEMY] [Enemy4] Registered as sound listener
+[10:57:54] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[10:57:54] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[10:57:54] [ENEMY] [Enemy5] Registered as sound listener
+[10:57:54] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[10:57:54] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[10:57:54] [ENEMY] [Enemy6] Registered as sound listener
+[10:57:54] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[10:57:54] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[10:57:54] [ENEMY] [Enemy7] Registered as sound listener
+[10:57:54] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[10:57:54] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[10:57:54] [ENEMY] [Enemy8] Registered as sound listener
+[10:57:54] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[10:57:54] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[10:57:54] [ENEMY] [Enemy9] Registered as sound listener
+[10:57:54] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[10:57:54] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[10:57:54] [ENEMY] [Enemy10] Registered as sound listener
+[10:57:54] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[10:57:54] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[10:57:54] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[10:57:54] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[10:57:54] [INFO] [LastChance] Found player: Player
+[10:57:54] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[10:57:54] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[10:57:54] [INFO] [LastChance] Connected to player Died signal (C#)
+[10:57:55] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[10:57:56] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[10:57:59] [ENEMY] [Enemy10] FLANKING started: target=(680.6316, 829.0224), side=left, pos=(953.4711, 1416.381)
+[10:57:59] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[10:58:01] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[10:58:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=20
+[10:58:01] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[10:58:01] [ENEMY] [Enemy3] Heard gunshot at (523.795, 1076.441), source_type=1, intensity=0.02, distance=371
+[10:58:01] [ENEMY] [Enemy4] Heard gunshot at (523.795, 1076.441), source_type=1, intensity=0.02, distance=328
+[10:58:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:01] [INFO] [LastChance] Threat detected: Bullet
+[10:58:01] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:01] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:01] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:01] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:01] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:01] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:01] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:01] [INFO] [LastChance] Threat detected: Bullet
+[10:58:01] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:01] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:01] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:01] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:01] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:01] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:01] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:02] [INFO] [LastChance] Threat detected: Bullet
+[10:58:02] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:02] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:02] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:02] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:02] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:02] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:02] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:02] [INFO] [LastChance] Threat detected: Bullet
+[10:58:02] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:02] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:02] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:02] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:02] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:02] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:02] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:02] [INFO] [LastChance] Threat detected: Bullet
+[10:58:02] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:02] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:02] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:02] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:02] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:02] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:02] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:02] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[10:58:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:02] [INFO] [LastChance] Threat detected: Bullet
+[10:58:02] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:02] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:02] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:02] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:02] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:02] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:02] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:02] [INFO] [LastChance] Threat detected: Bullet
+[10:58:02] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:02] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:02] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:02] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:02] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:02] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:02] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:02] [INFO] [LastChance] Threat detected: Bullet
+[10:58:02] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:02] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:02] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:02] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:02] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:02] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:02] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:02] [INFO] [LastChance] Threat detected: Bullet
+[10:58:02] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:02] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:02] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:02] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:02] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:02] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:02] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:02] [INFO] [LastChance] Threat detected: Bullet
+[10:58:02] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:02] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:02] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:02] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:02] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:02] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:02] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:02] [INFO] [LastChance] Threat detected: Bullet
+[10:58:02] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:02] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:02] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:02] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:02] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:03] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:03] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:03] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:03] [INFO] [LastChance] Threat detected: Bullet
+[10:58:03] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:03] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:03] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:03] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:03] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:03] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:03] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:03] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:03] [INFO] [LastChance] Threat detected: Bullet
+[10:58:03] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:03] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:03] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:03] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:03] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:03] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:03] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:03] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:03] [INFO] [LastChance] Threat detected: Bullet
+[10:58:03] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:03] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:03] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:03] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:03] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:03] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:03] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:03] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:03] [INFO] [LastChance] Threat detected: Bullet
+[10:58:03] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:03] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:03] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:03] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:03] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:03] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:03] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:03] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:03] [INFO] [LastChance] Threat detected: Bullet
+[10:58:03] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:03] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:03] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:03] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:03] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:03] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:03] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:03] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:03] [INFO] [LastChance] Threat detected: Bullet
+[10:58:03] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:03] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:03] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:03] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:03] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:03] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:03] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:03] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:03] [INFO] [LastChance] Threat detected: Bullet
+[10:58:03] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:03] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:03] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:03] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:03] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:03] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:03] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:03] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:03] [INFO] [LastChance] Threat detected: Bullet
+[10:58:03] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:03] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:03] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:03] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:03] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:03] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:03] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:03] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:04] [INFO] [LastChance] Threat detected: Bullet
+[10:58:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:04] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:04] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:04] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:04] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:04] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:04] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:04] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:04] [INFO] [LastChance] Threat detected: Bullet
+[10:58:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:04] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:04] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:04] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:04] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:04] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:04] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:04] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:04] [ENEMY] [Enemy10] State: COMBAT -> SEEKING_COVER
+[10:58:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.795, 1076.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:04] [INFO] [LastChance] Threat detected: Bullet
+[10:58:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.795, 1076.441), shooter_id=237850594174, bullet_pos=(496.7138, 1010.088)
+[10:58:04] [INFO] [Bullet] Using shooter_position, distance=71.6666259765625
+[10:58:04] [INFO] [Bullet] Distance to wall: 71.6666259765625 (4.87991234604896% of viewport)
+[10:58:04] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[10:58:04] [INFO] [Bullet] Starting wall penetration at (496.7138, 1010.088)
+[10:58:04] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[10:58:04] [INFO] [Bullet] Exiting penetration at (479.0796, 966.8815) after traveling 41.6666679382324 pixels through wall
+[10:58:04] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:58:04] [ENEMY] [Enemy10] State: SEEKING_COVER -> IN_COVER
+[10:58:04] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
+[10:58:04] [ENEMY] [Enemy3] State: COMBAT -> SEEKING_COVER
+[10:58:04] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[10:58:04] [ENEMY] [Enemy3] State: IN_COVER -> COMBAT
+[10:58:06] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[10:58:06] [ENEMY] [Enemy3] State: COMBAT -> SEEKING_COVER
+[10:58:06] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[10:58:06] [ENEMY] [Enemy3] State: IN_COVER -> COMBAT
+[10:58:07] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[10:58:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(506.1934, 1052.121), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:08] [INFO] [LastChance] Threat detected: Bullet
+[10:58:08] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[10:58:08] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[10:58:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(506.1934, 1052.121), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:08] [INFO] [LastChance] Threat detected: Bullet
+[10:58:08] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[10:58:08] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[10:58:08] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[10:58:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(506.1934, 1052.121), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:08] [INFO] [LastChance] Threat detected: Bullet
+[10:58:08] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:08] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[10:58:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[10:58:08] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[10:58:08] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[10:58:08] [INFO] [PenultimateHit]   - Time scale: 0.10
+[10:58:08] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[10:58:08] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[10:58:08] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[10:58:08] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[10:58:08] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[10:58:08] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[10:58:08] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[10:58:08] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[10:58:08] [INFO] [PenultimateHit] Ending penultimate hit effect
+[10:58:08] [INFO] [LastChance] Resetting all effects (scene change detected)
+[10:58:08] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[10:58:08] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[10:58:08] [INFO] [Player] Ready! Grenades: 1/3
+[10:58:08] [INFO] [ScoreManager] Level started with 10 enemies
+[10:58:08] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[10:58:08] [ENEMY] [Enemy1] Registered as sound listener
+[10:58:08] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[10:58:08] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[10:58:08] [ENEMY] [Enemy2] Registered as sound listener
+[10:58:08] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[10:58:08] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[10:58:08] [ENEMY] [Enemy3] Registered as sound listener
+[10:58:08] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[10:58:08] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[10:58:08] [ENEMY] [Enemy4] Registered as sound listener
+[10:58:08] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[10:58:08] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[10:58:08] [ENEMY] [Enemy5] Registered as sound listener
+[10:58:08] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[10:58:08] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[10:58:08] [ENEMY] [Enemy6] Registered as sound listener
+[10:58:08] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[10:58:08] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[10:58:08] [ENEMY] [Enemy7] Registered as sound listener
+[10:58:08] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[10:58:08] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[10:58:08] [ENEMY] [Enemy8] Registered as sound listener
+[10:58:08] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[10:58:08] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[10:58:08] [ENEMY] [Enemy9] Registered as sound listener
+[10:58:08] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[10:58:08] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[10:58:08] [ENEMY] [Enemy10] Registered as sound listener
+[10:58:08] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[10:58:08] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[10:58:08] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[10:58:08] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[10:58:08] [INFO] [LastChance] Found player: Player
+[10:58:08] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[10:58:08] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[10:58:08] [INFO] [LastChance] Connected to player Died signal (C#)
+[10:58:09] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[10:58:10] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[10:58:13] [ENEMY] [Enemy10] FLANKING started: target=(415.4345, 1044.291), side=right, pos=(953.4262, 1416.483)
+[10:58:13] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[10:58:15] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[10:58:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(502.0834, 1097.595), source=ENEMY (Enemy10), range=1469, listeners=20
+[10:58:15] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[10:58:15] [ENEMY] [Enemy3] Heard gunshot at (502.0834, 1097.595), source_type=1, intensity=0.02, distance=400
+[10:58:15] [ENEMY] [Enemy4] Heard gunshot at (502.0834, 1097.595), source_type=1, intensity=0.02, distance=357
+[10:58:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:15] [INFO] [LastChance] Threat detected: Bullet
+[10:58:15] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:15] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[10:58:15] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[10:58:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(502.0834, 1097.595), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:15] [INFO] [LastChance] Threat detected: Bullet
+[10:58:15] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:15] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[10:58:15] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[10:58:15] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[10:58:15] [INFO] [PenultimateHit]   - Time scale: 0.10
+[10:58:15] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[10:58:15] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[10:58:15] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[10:58:15] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[10:58:15] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[10:58:15] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[10:58:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(502.0834, 1097.595), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:58:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[10:58:16] [INFO] [LastChance] Threat detected: Bullet
+[10:58:16] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:58:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:58:16] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[10:58:16] [INFO] [PenultimateHit] Ending penultimate hit effect
+[10:58:16] [INFO] [LastChance] Resetting all effects (scene change detected)
+[10:58:16] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[10:58:16] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[10:58:16] [INFO] [Player] Ready! Grenades: 1/3
+[10:58:16] [INFO] [ScoreManager] Level started with 10 enemies
+[10:58:16] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[10:58:16] [ENEMY] [Enemy1] Registered as sound listener
+[10:58:16] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[10:58:16] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[10:58:16] [ENEMY] [Enemy2] Registered as sound listener
+[10:58:16] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[10:58:16] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[10:58:16] [ENEMY] [Enemy3] Registered as sound listener
+[10:58:16] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[10:58:16] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[10:58:16] [ENEMY] [Enemy4] Registered as sound listener
+[10:58:16] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[10:58:16] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[10:58:16] [ENEMY] [Enemy5] Registered as sound listener
+[10:58:16] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[10:58:16] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[10:58:16] [ENEMY] [Enemy6] Registered as sound listener
+[10:58:16] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[10:58:16] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[10:58:16] [ENEMY] [Enemy7] Registered as sound listener
+[10:58:16] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[10:58:16] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[10:58:16] [ENEMY] [Enemy8] Registered as sound listener
+[10:58:16] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[10:58:16] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[10:58:16] [ENEMY] [Enemy9] Registered as sound listener
+[10:58:16] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[10:58:16] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[10:58:16] [ENEMY] [Enemy10] Registered as sound listener
+[10:58:16] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[10:58:16] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[10:58:16] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[10:58:16] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[10:58:16] [INFO] [LastChance] Found player: Player
+[10:58:16] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[10:58:16] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[10:58:16] [INFO] [LastChance] Connected to player Died signal (C#)
+[10:58:28] [INFO] ------------------------------------------------------------
+[10:58:28] [INFO] GAME LOG ENDED: 2026-01-22T10:58:28
+[10:58:28] [INFO] ============================================================
diff --git a/docs/case-studies/issue-217/logs/game_log_20260122_105937.txt b/docs/case-studies/issue-217/logs/game_log_20260122_105937.txt
new file mode 100644
index 00000000..e9830601
--- /dev/null
+++ b/docs/case-studies/issue-217/logs/game_log_20260122_105937.txt
@@ -0,0 +1,300 @@
+[10:59:37] [INFO] ============================================================
+[10:59:37] [INFO] GAME LOG STARTED
+[10:59:37] [INFO] ============================================================
+[10:59:37] [INFO] Timestamp: 2026-01-22T10:59:37
+[10:59:37] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_105937.txt
+[10:59:37] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[10:59:37] [INFO] OS: Windows
+[10:59:37] [INFO] Debug build: false
+[10:59:37] [INFO] Engine version: 4.3-stable (official)
+[10:59:37] [INFO] Project: Godot Top-Down Template
+[10:59:37] [INFO] ------------------------------------------------------------
+[10:59:37] [INFO] [GameManager] GameManager ready
+[10:59:37] [INFO] [ScoreManager] ScoreManager ready
+[10:59:37] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[10:59:37] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[10:59:37] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[10:59:37] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[10:59:37] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[10:59:37] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[10:59:37] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[10:59:37] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[10:59:37] [INFO] [LastChance] Resetting all effects (scene change detected)
+[10:59:37] [INFO] [LastChance] Last chance shader loaded successfully
+[10:59:37] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[10:59:37] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[10:59:37] [INFO] [LastChance]   Sepia intensity: 0.70
+[10:59:37] [INFO] [LastChance]   Brightness: 0.60
+[10:59:37] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[10:59:37] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[10:59:37] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[10:59:37] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[10:59:37] [INFO] [Player] Ready! Grenades: 1/3
+[10:59:37] [INFO] [ScoreManager] Level started with 10 enemies
+[10:59:37] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[10:59:37] [ENEMY] [Enemy1] Registered as sound listener
+[10:59:37] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[10:59:37] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[10:59:37] [ENEMY] [Enemy2] Registered as sound listener
+[10:59:37] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[10:59:37] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[10:59:37] [ENEMY] [Enemy3] Registered as sound listener
+[10:59:37] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[10:59:37] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[10:59:37] [ENEMY] [Enemy4] Registered as sound listener
+[10:59:37] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[10:59:37] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[10:59:37] [ENEMY] [Enemy5] Registered as sound listener
+[10:59:37] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[10:59:37] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[10:59:37] [ENEMY] [Enemy6] Registered as sound listener
+[10:59:37] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[10:59:37] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[10:59:37] [ENEMY] [Enemy7] Registered as sound listener
+[10:59:37] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 2, behavior: PATROL, player_found: yes
+[10:59:37] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[10:59:37] [ENEMY] [Enemy8] Registered as sound listener
+[10:59:37] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[10:59:37] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[10:59:37] [ENEMY] [Enemy9] Registered as sound listener
+[10:59:37] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[10:59:37] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[10:59:37] [ENEMY] [Enemy10] Registered as sound listener
+[10:59:37] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[10:59:37] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[10:59:37] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[10:59:37] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[10:59:37] [INFO] [LastChance] Found player: Player
+[10:59:37] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[10:59:37] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[10:59:37] [INFO] [LastChance] Connected to player Died signal (C#)
+[10:59:38] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[10:59:38] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[10:59:39] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[10:59:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(379.5082, 813.7972), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[10:59:40] [ENEMY] [Enemy1] Heard gunshot at (379.5082, 813.7972), source_type=0, intensity=0.01, distance=471
+[10:59:40] [ENEMY] [Enemy2] Heard gunshot at (379.5082, 813.7972), source_type=0, intensity=0.04, distance=265
+[10:59:40] [ENEMY] [Enemy4] Heard gunshot at (379.5082, 813.7972), source_type=0, intensity=0.01, distance=429
+[10:59:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[10:59:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(379.50818, 813.7972), shooter_id=43721426610, bullet_pos=(909.04156, 612.0409)
+[10:59:40] [INFO] [Bullet] Using shooter_position, distance=566,66675
+[10:59:40] [INFO] [Bullet] Distance to wall: 566,66675 (38,585384% of viewport)
+[10:59:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[10:59:40] [INFO] [Bullet] Starting wall penetration at (909.04156, 612.0409)
+[10:59:40] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17,817804
+[10:59:40] [INFO] [Bullet] Body exited signal received for penetrating body
+[10:59:40] [INFO] [Bullet] Exiting penetration at (952.6502, 595.42566) after traveling 41,666668 pixels through wall
+[10:59:40] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[10:59:40] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[10:59:40] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[10:59:40] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[10:59:40] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[10:59:40] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[10:59:40] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[10:59:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(612.4546, 799.1178), source=ENEMY (Enemy3), range=1469, listeners=10
+[10:59:41] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[10:59:41] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[10:59:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(612.4546, 799.1178), shooter_id=40902854154, bullet_pos=(501.2568, 821.0154)
+[10:59:41] [INFO] [Bullet] Using shooter_position, distance=113.333343505859
+[10:59:41] [INFO] [Bullet] Distance to wall: 113.333343505859 (7.71707576095628% of viewport)
+[10:59:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[10:59:41] [INFO] [Bullet] Starting wall penetration at (501.2568, 821.0154)
+[10:59:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.3857078552246
+[10:59:41] [INFO] [Bullet] Body exited signal received for penetrating body
+[10:59:41] [INFO] [Bullet] Exiting penetration at (455.4695, 830.0321) after traveling 41.6666679382324 pixels through wall
+[10:59:41] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[10:59:41] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[10:59:41] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[10:59:42] [ENEMY] [Enemy10] FLANKING started: target=(338.605, 1088.234), side=right, pos=(953.4263, 1416.483)
+[10:59:42] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[10:59:42] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
+[10:59:42] [ENEMY] [Enemy3] State: IN_COVER -> COMBAT
+[10:59:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(556.8381, 800.1719), source=ENEMY (Enemy3), range=1469, listeners=10
+[10:59:43] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[10:59:43] [INFO] [LastChance] Threat detected: Bullet
+[10:59:43] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:59:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:59:43] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[10:59:43] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[10:59:43] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[10:59:44] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[10:59:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(466.0109, 967.006), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:59:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[10:59:44] [INFO] [LastChance] Threat detected: Bullet
+[10:59:44] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:59:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:59:44] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[10:59:44] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[10:59:44] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[10:59:44] [INFO] [PenultimateHit]   - Time scale: 0.10
+[10:59:44] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[10:59:44] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[10:59:44] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[10:59:44] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[10:59:44] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[10:59:44] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[10:59:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(466.0109, 967.006), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:59:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[10:59:45] [INFO] [LastChance] Threat detected: Bullet
+[10:59:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:59:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:59:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[10:59:45] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[10:59:45] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[10:59:45] [INFO] [PenultimateHit] Ending penultimate hit effect
+[10:59:45] [INFO] [LastChance] Player died
+[10:59:45] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[10:59:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(466.0109, 967.006), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:59:45] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[10:59:45] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[10:59:45] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[10:59:45] [INFO] [LastChance] Threat detected: Bullet
+[10:59:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:59:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:59:45] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[10:59:45] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[10:59:45] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[10:59:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(466.0109, 967.006), source=ENEMY (Enemy10), range=1469, listeners=10
+[10:59:45] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[10:59:45] [INFO] [LastChance] Threat detected: Bullet
+[10:59:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:59:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:59:46] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[10:59:46] [INFO] [LastChance] Resetting all effects (scene change detected)
+[10:59:46] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[10:59:46] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[10:59:46] [INFO] [Player] Ready! Grenades: 1/3
+[10:59:46] [INFO] [ScoreManager] Level started with 10 enemies
+[10:59:46] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[10:59:46] [ENEMY] [Enemy1] Registered as sound listener
+[10:59:46] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[10:59:46] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[10:59:46] [ENEMY] [Enemy2] Registered as sound listener
+[10:59:46] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[10:59:46] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[10:59:46] [ENEMY] [Enemy3] Registered as sound listener
+[10:59:46] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[10:59:46] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[10:59:46] [ENEMY] [Enemy4] Registered as sound listener
+[10:59:46] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[10:59:46] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[10:59:46] [ENEMY] [Enemy5] Registered as sound listener
+[10:59:46] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[10:59:46] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[10:59:46] [ENEMY] [Enemy6] Registered as sound listener
+[10:59:46] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[10:59:46] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[10:59:46] [ENEMY] [Enemy7] Registered as sound listener
+[10:59:46] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[10:59:46] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[10:59:46] [ENEMY] [Enemy8] Registered as sound listener
+[10:59:46] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[10:59:46] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[10:59:46] [ENEMY] [Enemy9] Registered as sound listener
+[10:59:46] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[10:59:46] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[10:59:46] [ENEMY] [Enemy10] Registered as sound listener
+[10:59:46] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[10:59:46] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[10:59:46] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[10:59:46] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[10:59:46] [INFO] [LastChance] Found player: Player
+[10:59:46] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[10:59:46] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[10:59:46] [INFO] [LastChance] Connected to player Died signal (C#)
+[10:59:47] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[10:59:47] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[10:59:48] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[10:59:48] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[10:59:49] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[10:59:49] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[10:59:49] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[10:59:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=20
+[10:59:49] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[10:59:49] [ENEMY] [Enemy4] Heard gunshot at (689.5667, 752.2189), source_type=1, intensity=0.07, distance=184
+[10:59:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[10:59:49] [INFO] [LastChance] Threat detected: Bullet
+[10:59:49] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:59:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:59:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[10:59:49] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[10:59:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[10:59:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[10:59:49] [INFO] [LastChance] Threat detected: Bullet
+[10:59:49] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:59:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:59:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[10:59:49] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[10:59:49] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[10:59:49] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[10:59:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[10:59:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[10:59:49] [INFO] [LastChance] Threat detected: Bullet
+[10:59:49] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:59:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:59:50] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[10:59:50] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[10:59:50] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[10:59:50] [INFO] [PenultimateHit]   - Time scale: 0.10
+[10:59:50] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[10:59:50] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[10:59:50] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[10:59:50] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[10:59:50] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[10:59:50] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[10:59:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[10:59:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[10:59:50] [INFO] [LastChance] Threat detected: Bullet
+[10:59:50] [INFO] [LastChance] Not in hard mode - effect disabled
+[10:59:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[10:59:50] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[10:59:50] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[10:59:50] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[10:59:50] [INFO] [PenultimateHit] Ending penultimate hit effect
+[10:59:50] [INFO] [LastChance] Player died
+[10:59:50] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[10:59:50] [INFO] [LastChance] Resetting all effects (scene change detected)
+[10:59:50] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[10:59:50] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[10:59:50] [INFO] [Player] Ready! Grenades: 1/3
+[10:59:50] [INFO] [ScoreManager] Level started with 10 enemies
+[10:59:50] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[10:59:50] [ENEMY] [Enemy1] Registered as sound listener
+[10:59:50] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[10:59:50] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[10:59:50] [ENEMY] [Enemy2] Registered as sound listener
+[10:59:50] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[10:59:50] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[10:59:50] [ENEMY] [Enemy3] Registered as sound listener
+[10:59:50] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[10:59:50] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[10:59:50] [ENEMY] [Enemy4] Registered as sound listener
+[10:59:50] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[10:59:50] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[10:59:50] [ENEMY] [Enemy5] Registered as sound listener
+[10:59:50] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[10:59:50] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[10:59:50] [ENEMY] [Enemy6] Registered as sound listener
+[10:59:50] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[10:59:50] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[10:59:50] [ENEMY] [Enemy7] Registered as sound listener
+[10:59:50] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[10:59:50] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[10:59:50] [ENEMY] [Enemy8] Registered as sound listener
+[10:59:50] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[10:59:50] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[10:59:50] [ENEMY] [Enemy9] Registered as sound listener
+[10:59:50] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[10:59:50] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[10:59:50] [ENEMY] [Enemy10] Registered as sound listener
+[10:59:50] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[10:59:50] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[10:59:50] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[10:59:50] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[10:59:50] [INFO] [LastChance] Found player: Player
+[10:59:50] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[10:59:50] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[10:59:50] [INFO] [LastChance] Connected to player Died signal (C#)
+[10:59:52] [INFO] ------------------------------------------------------------
+[10:59:52] [INFO] GAME LOG ENDED: 2026-01-22T10:59:52
+[10:59:52] [INFO] ============================================================
diff --git a/docs/case-studies/issue-217/logs/game_log_20260122_112258.txt b/docs/case-studies/issue-217/logs/game_log_20260122_112258.txt
new file mode 100644
index 00000000..b6a9195e
--- /dev/null
+++ b/docs/case-studies/issue-217/logs/game_log_20260122_112258.txt
@@ -0,0 +1,369 @@
+[11:22:58] [INFO] ============================================================
+[11:22:58] [INFO] GAME LOG STARTED
+[11:22:58] [INFO] ============================================================
+[11:22:58] [INFO] Timestamp: 2026-01-22T11:22:58
+[11:22:58] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_112258.txt
+[11:22:58] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[11:22:58] [INFO] OS: Windows
+[11:22:58] [INFO] Debug build: false
+[11:22:58] [INFO] Engine version: 4.3-stable (official)
+[11:22:58] [INFO] Project: Godot Top-Down Template
+[11:22:58] [INFO] ------------------------------------------------------------
+[11:22:58] [INFO] [GameManager] GameManager ready
+[11:22:58] [INFO] [ScoreManager] ScoreManager ready
+[11:22:58] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[11:22:58] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:22:58] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[11:22:58] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[11:22:58] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[11:22:58] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[11:22:58] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[11:22:58] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[11:22:58] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:22:58] [INFO] [LastChance] Last chance shader loaded successfully
+[11:22:58] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[11:22:58] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[11:22:58] [INFO] [LastChance]   Sepia intensity: 0.70
+[11:22:58] [INFO] [LastChance]   Brightness: 0.60
+[11:22:58] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[11:22:58] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[11:22:58] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:22:58] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:22:58] [INFO] [Player] Ready! Grenades: 1/3
+[11:22:58] [INFO] [ScoreManager] Level started with 10 enemies
+[11:22:58] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[11:22:58] [ENEMY] [Enemy1] Registered as sound listener
+[11:22:58] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[11:22:58] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[11:22:58] [ENEMY] [Enemy2] Registered as sound listener
+[11:22:58] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[11:22:58] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[11:22:58] [ENEMY] [Enemy3] Registered as sound listener
+[11:22:58] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[11:22:58] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[11:22:58] [ENEMY] [Enemy4] Registered as sound listener
+[11:22:58] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[11:22:58] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[11:22:58] [ENEMY] [Enemy5] Registered as sound listener
+[11:22:58] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[11:22:58] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[11:22:58] [ENEMY] [Enemy6] Registered as sound listener
+[11:22:58] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[11:22:58] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[11:22:58] [ENEMY] [Enemy7] Registered as sound listener
+[11:22:58] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 4, behavior: PATROL, player_found: yes
+[11:22:58] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[11:22:58] [ENEMY] [Enemy8] Registered as sound listener
+[11:22:58] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[11:22:58] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[11:22:58] [ENEMY] [Enemy9] Registered as sound listener
+[11:22:58] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[11:22:58] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[11:22:58] [ENEMY] [Enemy10] Registered as sound listener
+[11:22:58] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[11:22:58] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:22:58] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:22:58] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:22:58] [INFO] [LastChance] Found player: Player
+[11:22:58] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:22:58] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:22:58] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:23:02] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[11:23:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(431.1455, 790.4634), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:23:02] [ENEMY] [Enemy1] Heard gunshot at (431.1455, 790.4634), source_type=0, intensity=0.01, distance=460
+[11:23:02] [ENEMY] [Enemy2] Heard gunshot at (431.1455, 790.4634), source_type=0, intensity=0.04, distance=242
+[11:23:02] [ENEMY] [Enemy4] Heard gunshot at (431.1455, 790.4634), source_type=0, intensity=0.02, distance=385
+[11:23:02] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:23:02] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[11:23:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(405.1568, 789.1639), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:23:02] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:23:02] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[11:23:02] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[11:23:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(693.196, 755.1504), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:23:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:23:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(635.606, 775.4181), shooter_id=40902854154, bullet_pos=(515.7341, 833.8004)
+[11:23:02] [INFO] [Bullet] Using shooter_position, distance=133.333236694336
+[11:23:02] [INFO] [Bullet] Distance to wall: 133.333236694336 (9.07890526472035% of viewport)
+[11:23:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:23:02] [INFO] [Bullet] Starting wall penetration at (515.7341, 833.8004)
+[11:23:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.6911, 761.5884), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:23:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:23:02] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.8322944641113
+[11:23:02] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:23:02] [INFO] [Bullet] Exiting penetration at (481.2709, 850.5853) after traveling 33.3333320617676 pixels through wall
+[11:23:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:23:03] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[11:23:03] [INFO] [LastChance] Threat detected: @Area2D@288
+[11:23:03] [INFO] [LastChance] Not in hard mode - effect disabled
+[11:23:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:23:03] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[11:23:03] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[11:23:03] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[11:23:03] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[11:23:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(622.1539, 769.4697), shooter_id=40902854154, bullet_pos=(35.54325, 895.5169)
+[11:23:03] [INFO] [Bullet] Using shooter_position, distance=599.999938964844
+[11:23:03] [INFO] [Bullet] Distance to wall: 599.999938964844 (40.8550991467172% of viewport)
+[11:23:04] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[11:23:04] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[11:23:04] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[11:23:04] [ENEMY] [Enemy1] FLANKING started: target=(102.6418, 681.9819), side=left, pos=(244.0035, 401.9337)
+[11:23:04] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
+[11:23:05] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[11:23:05] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[11:23:05] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[11:23:05] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[11:23:05] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[11:23:05] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[11:23:05] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[11:23:05] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[11:23:05] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[11:23:05] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[11:23:05] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[11:23:05] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[11:23:05] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[11:23:05] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[11:23:05] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[11:23:05] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[11:23:05] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[11:23:06] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:23:07] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[11:23:07] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[11:23:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(396.7135, 629.4152), source=ENEMY (Enemy2), range=1469, listeners=10
+[11:23:07] [ENEMY] [Enemy1] Heard gunshot at (396.7135, 629.4152), source_type=1, intensity=0.32, distance=89
+[11:23:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:23:07] [INFO] [LastChance] Threat detected: Bullet
+[11:23:07] [INFO] [LastChance] Not in hard mode - effect disabled
+[11:23:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:23:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[11:23:07] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[11:23:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(396.7135, 629.4152), source=ENEMY (Enemy2), range=1469, listeners=10
+[11:23:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:23:07] [INFO] [LastChance] Threat detected: Bullet
+[11:23:07] [INFO] [LastChance] Not in hard mode - effect disabled
+[11:23:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:23:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:23:07] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[11:23:07] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[11:23:07] [INFO] [PenultimateHit]   - Time scale: 0.10
+[11:23:07] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[11:23:07] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[11:23:07] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[11:23:07] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[11:23:07] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[11:23:07] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:23:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(396.7135, 629.4152), source=ENEMY (Enemy2), range=1469, listeners=10
+[11:23:08] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:23:08] [INFO] [LastChance] Threat detected: Bullet
+[11:23:08] [INFO] [LastChance] Not in hard mode - effect disabled
+[11:23:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:23:08] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:23:08] [INFO] [PenultimateHit] Ending penultimate hit effect
+[11:23:08] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:23:08] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:23:08] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:23:08] [INFO] [Player] Ready! Grenades: 1/3
+[11:23:08] [INFO] [ScoreManager] Level started with 10 enemies
+[11:23:08] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:23:08] [ENEMY] [Enemy1] Registered as sound listener
+[11:23:08] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[11:23:08] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:23:08] [ENEMY] [Enemy2] Registered as sound listener
+[11:23:08] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[11:23:08] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:23:08] [ENEMY] [Enemy3] Registered as sound listener
+[11:23:08] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[11:23:08] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:23:08] [ENEMY] [Enemy4] Registered as sound listener
+[11:23:08] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[11:23:08] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:23:08] [ENEMY] [Enemy5] Registered as sound listener
+[11:23:08] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[11:23:08] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:23:08] [ENEMY] [Enemy6] Registered as sound listener
+[11:23:08] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[11:23:08] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:23:08] [ENEMY] [Enemy7] Registered as sound listener
+[11:23:08] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[11:23:08] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:23:08] [ENEMY] [Enemy8] Registered as sound listener
+[11:23:08] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[11:23:08] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:23:08] [ENEMY] [Enemy9] Registered as sound listener
+[11:23:08] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[11:23:08] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:23:08] [ENEMY] [Enemy10] Registered as sound listener
+[11:23:08] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[11:23:08] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:23:08] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:23:08] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:23:08] [INFO] [LastChance] Found player: Player
+[11:23:08] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:23:08] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:23:08] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:23:09] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[11:23:09] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:23:10] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[11:23:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(932.7731, 1387.834), source=ENEMY (Enemy10), range=1469, listeners=20
+[11:23:11] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[11:23:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:23:11] [INFO] [LastChance] Threat detected: Bullet
+[11:23:11] [INFO] [LastChance] Not in hard mode - effect disabled
+[11:23:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:23:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:23:11] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[11:23:11] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[11:23:11] [INFO] [PenultimateHit]   - Time scale: 0.10
+[11:23:11] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[11:23:11] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[11:23:11] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[11:23:11] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[11:23:11] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[11:23:11] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:23:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(930.218, 1384.261), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:23:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:23:11] [INFO] [LastChance] Threat detected: @Area2D@542
+[11:23:11] [INFO] [LastChance] Not in hard mode - effect disabled
+[11:23:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:23:12] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[11:23:12] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[11:23:12] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[11:23:12] [INFO] [PenultimateHit] Ending penultimate hit effect
+[11:23:12] [INFO] [LastChance] Player died
+[11:23:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(915.7896, 1376.213), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:23:12] [ENEMY] [Enemy4] Heard gunshot at (915.7896, 1376.213), source_type=1, intensity=0.01, distance=490
+[11:23:12] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:23:12] [INFO] [LastChance] Threat detected: Bullet
+[11:23:12] [INFO] [LastChance] Not in hard mode - effect disabled
+[11:23:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:23:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(915.7896, 1376.213), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:23:12] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:23:12] [INFO] [LastChance] Threat detected: Bullet
+[11:23:12] [INFO] [LastChance] Not in hard mode - effect disabled
+[11:23:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:23:12] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:23:12] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:23:12] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:23:12] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:23:12] [INFO] [Player] Ready! Grenades: 1/3
+[11:23:12] [INFO] [ScoreManager] Level started with 10 enemies
+[11:23:12] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:23:12] [ENEMY] [Enemy1] Registered as sound listener
+[11:23:12] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[11:23:12] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:23:12] [ENEMY] [Enemy2] Registered as sound listener
+[11:23:12] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[11:23:12] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:23:12] [ENEMY] [Enemy3] Registered as sound listener
+[11:23:12] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[11:23:12] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:23:12] [ENEMY] [Enemy4] Registered as sound listener
+[11:23:12] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[11:23:12] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:23:12] [ENEMY] [Enemy5] Registered as sound listener
+[11:23:12] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[11:23:12] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:23:12] [ENEMY] [Enemy6] Registered as sound listener
+[11:23:12] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[11:23:12] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:23:12] [ENEMY] [Enemy7] Registered as sound listener
+[11:23:12] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[11:23:12] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:23:12] [ENEMY] [Enemy8] Registered as sound listener
+[11:23:12] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[11:23:12] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:23:12] [ENEMY] [Enemy9] Registered as sound listener
+[11:23:12] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[11:23:12] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:23:12] [ENEMY] [Enemy10] Registered as sound listener
+[11:23:12] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[11:23:12] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:23:12] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:23:12] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:23:12] [INFO] [LastChance] Found player: Player
+[11:23:12] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:23:12] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:23:12] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:23:13] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[11:23:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1063.802, 1466.334), source=ENEMY (Enemy10), range=1469, listeners=20
+[11:23:13] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[11:23:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:23:13] [INFO] [LastChance] Threat detected: Bullet
+[11:23:13] [INFO] [LastChance] Not in hard mode - effect disabled
+[11:23:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:23:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1034.493, 1443.219), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:23:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:23:14] [INFO] [LastChance] Threat detected: @Area2D@795
+[11:23:14] [INFO] [LastChance] Not in hard mode - effect disabled
+[11:23:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:23:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1003.455, 1424.075), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:23:14] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:23:14] [INFO] [LastChance] Threat detected: @Area2D@796
+[11:23:14] [INFO] [LastChance] Not in hard mode - effect disabled
+[11:23:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:23:14] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:23:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(998.5976, 1404.839), shooter_id=260701162381, bullet_pos=(554.1556, 1027.018)
+[11:23:14] [INFO] [Bullet] Using shooter_position, distance=583.332702636719
+[11:23:14] [INFO] [Bullet] Distance to wall: 583.332702636719 (39.7201963767901% of viewport)
+[11:23:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:23:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.473, 1429.805), shooter_id=260701162381, bullet_pos=(58.04728, 705.8171)
+[11:23:14] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
+[11:23:14] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
+[11:23:14] [INFO] [Bullet] Distance-based penetration chance: 50.6760656778783%
+[11:23:14] [INFO] [Bullet] Starting wall penetration at (58.04728, 705.8171)
+[11:23:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 14.1331167221069
+[11:23:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:23:14] [INFO] [Bullet] Exiting penetration at (20.68463, 677.8563) after traveling 41.6666679382324 pixels through wall
+[11:23:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:23:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(998.5976, 1404.839), shooter_id=260701162381, bullet_pos=(221.6614, 1401.561)
+[11:23:14] [INFO] [Bullet] Using shooter_position, distance=776.943115234375
+[11:23:14] [INFO] [Bullet] Distance to wall: 776.943115234375 (52.9034853887204% of viewport)
+[11:23:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(998.5976, 1404.839), shooter_id=260701162381, bullet_pos=(47.57318, 1227.989)
+[11:23:14] [INFO] [Bullet] Using shooter_position, distance=967.328002929688
+[11:23:14] [INFO] [Bullet] Distance to wall: 967.328002929688 (65.8671424788328% of viewport)
+[11:23:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(998.5976, 1404.839), shooter_id=260701162381, bullet_pos=(421.6197, 702.8743)
+[11:23:14] [INFO] [Bullet] Using shooter_position, distance=908.657165527344
+[11:23:14] [INFO] [Bullet] Distance to wall: 908.657165527344 (61.8721372739504% of viewport)
+[11:23:14] [INFO] [Bullet] Distance-based penetration chance: 74.4825065137245%
+[11:23:14] [INFO] [Bullet] Penetration failed (distance roll)
+[11:23:15] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[11:23:15] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:23:17] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[11:23:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(760.1823, 1268.833), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:23:17] [ENEMY] [Enemy4] Heard gunshot at (760.1823, 1268.833), source_type=1, intensity=0.02, distance=371
+[11:23:17] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:23:17] [INFO] [LastChance] Threat detected: Bullet
+[11:23:17] [INFO] [LastChance] Not in hard mode - effect disabled
+[11:23:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:23:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(731.9815, 1244.369), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:23:17] [ENEMY] [Enemy3] Heard gunshot at (731.9815, 1244.369), source_type=1, intensity=0.01, distance=495
+[11:23:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
+[11:23:17] [INFO] [LastChance] Threat detected: @Area2D@801
+[11:23:17] [INFO] [LastChance] Not in hard mode - effect disabled
+[11:23:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:23:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(703.9555, 1219.704), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:23:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
+[11:23:18] [INFO] [LastChance] Threat detected: Bullet
+[11:23:18] [INFO] [LastChance] Not in hard mode - effect disabled
+[11:23:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:23:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(675.7705, 1195.223), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:23:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:23:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[11:23:18] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[11:23:18] [INFO] [LastChance] Threat detected: @Area2D@802
+[11:23:18] [INFO] [LastChance] Not in hard mode - effect disabled
+[11:23:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:23:18] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:23:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:23:18] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[11:23:18] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[11:23:18] [INFO] [PenultimateHit]   - Time scale: 0.10
+[11:23:18] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[11:23:18] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[11:23:18] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[11:23:18] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[11:23:18] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[11:23:18] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:23:18] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[11:23:20] [INFO] ------------------------------------------------------------
+[11:23:20] [INFO] GAME LOG ENDED: 2026-01-22T11:23:20
+[11:23:20] [INFO] ============================================================
diff --git a/docs/case-studies/issue-217/logs/game_log_20260122_112342.txt b/docs/case-studies/issue-217/logs/game_log_20260122_112342.txt
new file mode 100644
index 00000000..73c4c824
--- /dev/null
+++ b/docs/case-studies/issue-217/logs/game_log_20260122_112342.txt
@@ -0,0 +1,1553 @@
+[11:23:42] [INFO] ============================================================
+[11:23:42] [INFO] GAME LOG STARTED
+[11:23:42] [INFO] ============================================================
+[11:23:42] [INFO] Timestamp: 2026-01-22T11:23:42
+[11:23:42] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_112342.txt
+[11:23:42] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[11:23:42] [INFO] OS: Windows
+[11:23:42] [INFO] Debug build: false
+[11:23:42] [INFO] Engine version: 4.3-stable (official)
+[11:23:42] [INFO] Project: Godot Top-Down Template
+[11:23:42] [INFO] ------------------------------------------------------------
+[11:23:42] [INFO] [GameManager] GameManager ready
+[11:23:42] [INFO] [ScoreManager] ScoreManager ready
+[11:23:42] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[11:23:42] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:23:42] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[11:23:42] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[11:23:42] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[11:23:42] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[11:23:42] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[11:23:42] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[11:23:42] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:23:42] [INFO] [LastChance] Last chance shader loaded successfully
+[11:23:42] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[11:23:42] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[11:23:42] [INFO] [LastChance]   Sepia intensity: 0.70
+[11:23:42] [INFO] [LastChance]   Brightness: 0.60
+[11:23:42] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[11:23:42] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[11:23:42] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:23:42] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:23:42] [INFO] [Player] Ready! Grenades: 1/3
+[11:23:42] [INFO] [ScoreManager] Level started with 10 enemies
+[11:23:42] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[11:23:42] [ENEMY] [Enemy1] Registered as sound listener
+[11:23:42] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[11:23:42] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[11:23:42] [ENEMY] [Enemy2] Registered as sound listener
+[11:23:42] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[11:23:42] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[11:23:42] [ENEMY] [Enemy3] Registered as sound listener
+[11:23:42] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[11:23:42] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[11:23:42] [ENEMY] [Enemy4] Registered as sound listener
+[11:23:42] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[11:23:42] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[11:23:42] [ENEMY] [Enemy5] Registered as sound listener
+[11:23:42] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[11:23:42] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[11:23:42] [ENEMY] [Enemy6] Registered as sound listener
+[11:23:42] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[11:23:42] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[11:23:42] [ENEMY] [Enemy7] Registered as sound listener
+[11:23:42] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 2, behavior: PATROL, player_found: yes
+[11:23:42] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[11:23:42] [ENEMY] [Enemy8] Registered as sound listener
+[11:23:42] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[11:23:42] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[11:23:42] [ENEMY] [Enemy9] Registered as sound listener
+[11:23:42] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[11:23:42] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[11:23:42] [ENEMY] [Enemy10] Registered as sound listener
+[11:23:42] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[11:23:42] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:23:42] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:23:42] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:23:42] [INFO] [LastChance] Found player: Player
+[11:23:42] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:23:42] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:23:42] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:23:45] [INFO] [PauseMenu] Armory button pressed
+[11:23:45] [INFO] [PauseMenu] Creating new armory menu instance
+[11:23:45] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
+[11:23:45] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
+[11:23:45] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
+[11:23:45] [INFO] [PauseMenu] back_pressed signal exists on instance
+[11:23:45] [INFO] [PauseMenu] back_pressed signal connected
+[11:23:45] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
+[11:23:45] [INFO] [PauseMenu] _populate_weapon_grid method exists
+[11:23:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:23:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1070.73, 1523.62), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:23:51] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:23:51] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:23:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1033.813, 1486.023), shooter_id=42899342977, bullet_pos=(60.69397, 701.4603)
+[11:23:51] [INFO] [Bullet] Using shooter_position, distance=1250.00024414063
+[11:23:51] [INFO] [Bullet] Distance to wall: 1250.00024414063 (85.1148151713033% of viewport)
+[11:23:51] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[11:23:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1033.813, 1486.023), shooter_id=42899342977, bullet_pos=(496.4542, 454.5854)
+[11:23:51] [INFO] [Bullet] Using shooter_position, distance=1163.02160644531
+[11:23:51] [INFO] [Bullet] Distance to wall: 1163.02160644531 (79.1922797910179% of viewport)
+[11:23:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(465.5563, 791.7229), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:23:51] [ENEMY] [Enemy1] Heard gunshot at (465.5563, 791.7229), source_type=0, intensity=0.01, distance=472
+[11:23:51] [ENEMY] [Enemy2] Heard gunshot at (465.5563, 791.7229), source_type=0, intensity=0.04, distance=250
+[11:23:51] [ENEMY] [Enemy4] Heard gunshot at (465.5563, 791.7229), source_type=0, intensity=0.02, distance=352
+[11:23:51] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:23:52] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[11:23:52] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[11:23:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(486.0623, 779.229), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:23:52] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:23:52] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[11:23:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.6049, 752.3915), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:23:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:23:52] [INFO] [LastChance] Threat detected: @Area2D@321
+[11:23:52] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:23:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:23:52] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[11:23:52] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[11:23:52] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[11:23:52] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[11:23:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(515.9349, 775.4438), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:23:52] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:23:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.6049, 752.3915), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:23:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:23:52] [INFO] [LastChance] Threat detected: @Area2D@324
+[11:23:52] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:23:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:23:52] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[11:23:52] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[11:23:52] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:23:52] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:23:52] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:23:52] [ENEMY] [Enemy3] Hit taken, health: 0/3
+[11:23:52] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[11:23:52] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[11:23:52] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[11:23:52] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[11:23:52] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[11:23:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(544.6387, 784.3718), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[11:23:52] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[11:23:52] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[11:23:52] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:23:52] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:23:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(569.3135, 805.8884), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[11:23:52] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[11:23:52] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[11:23:52] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[11:23:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(544.63873, 784.3718), shooter_id=43721426610, bullet_pos=(933.0141, 733.7021)
+[11:23:52] [INFO] [Bullet] Using shooter_position, distance=391,66675
+[11:23:52] [INFO] [Bullet] Distance to wall: 391,66675 (26,669308% of viewport)
+[11:23:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:23:52] [INFO] [Bullet] Starting wall penetration at (933.0141, 733.7021)
+[11:23:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35,322163
+[11:23:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:23:52] [INFO] [Bullet] Exiting penetration at (971.0253, 728.7429) after traveling 33,33334 pixels through wall
+[11:23:52] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:23:52] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[11:23:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(569.3135, 805.8884), shooter_id=43721426610, bullet_pos=(919.0907, 728.05194)
+[11:23:52] [INFO] [Bullet] Using shooter_position, distance=358,3331
+[11:23:52] [INFO] [Bullet] Distance to wall: 358,3331 (24,39956% of viewport)
+[11:23:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:23:52] [INFO] [Bullet] Starting wall penetration at (919.0907, 728.05194)
+[11:23:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21,010393
+[11:23:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:23:52] [INFO] [Bullet] Exiting penetration at (956.5087, 719.7252) after traveling 33,333336 pixels through wall
+[11:23:52] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:23:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(618.17, 959.0787), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[11:23:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[11:23:53] [ENEMY] [Enemy4] Hit taken, health: 1/2
+[11:23:53] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:23:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(646.7709, 972.1794), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[11:23:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[11:23:53] [ENEMY] [Enemy4] Hit taken, health: 0/2
+[11:23:53] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[11:23:53] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[11:23:53] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[11:23:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(680.9656, 974.1752), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:23:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[11:23:53] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[11:23:53] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[11:23:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(713.8797, 968.6566), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:23:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=7
+[11:23:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(680.9656, 974.17523), shooter_id=43721426610, bullet_pos=(926.5755, 816.8691)
+[11:23:53] [INFO] [Bullet] Using shooter_position, distance=291,6667
+[11:23:53] [INFO] [Bullet] Distance to wall: 291,6667 (19,86012% of viewport)
+[11:23:53] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:23:53] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[11:23:53] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[11:23:53] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[11:23:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(713.8797, 968.6566), shooter_id=43721426610, bullet_pos=(932.3877, 830.85095)
+[11:23:53] [INFO] [Bullet] Using shooter_position, distance=258,3334
+[11:23:53] [INFO] [Bullet] Distance to wall: 258,3334 (17,590397% of viewport)
+[11:23:53] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:23:53] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[11:23:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(680.9656, 974.17523), shooter_id=43721426610, bullet_pos=(519.90283, 549.5456)
+[11:23:53] [INFO] [Bullet] Using shooter_position, distance=454,14923
+[11:23:53] [INFO] [Bullet] Distance to wall: 454,14923 (30,923859% of viewport)
+[11:23:53] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:23:53] [INFO] [Bullet] Starting wall penetration at (519.90283, 549.5456)
+[11:23:53] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:53] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9,5155735
+[11:23:53] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:23:53] [INFO] [Bullet] Exiting penetration at (492.04852, 531.2358) after traveling 28,333332 pixels through wall
+[11:23:53] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[11:23:53] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:53] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:53] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:53] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:53] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:53] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(713.8797, 968.6566), shooter_id=43721426610, bullet_pos=(520.8653, 571.05475)
+[11:23:53] [INFO] [Bullet] Using shooter_position, distance=441,9749
+[11:23:53] [INFO] [Bullet] Distance to wall: 441,9749 (30,094887% of viewport)
+[11:23:53] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:23:53] [INFO] [Bullet] Starting wall penetration at (520.8653, 571.05475)
+[11:23:53] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:53] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8,657995
+[11:23:53] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:23:53] [INFO] [Bullet] Exiting penetration at (492.67886, 553.2605) after traveling 28,333334 pixels through wall
+[11:23:53] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[11:23:53] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:53] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:53] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:53] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(323.2972, 652.613), source=ENEMY (Enemy2), range=1469, listeners=8
+[11:23:54] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(330.4117, 619.96), source=ENEMY (Enemy2), range=1469, listeners=8
+[11:23:54] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(833.7665, 699.9715), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:23:54] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=7
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:23:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(332.0732, 585.8672), source=ENEMY (Enemy2), range=1469, listeners=8
+[11:23:54] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[11:23:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(385.2889, 655.9027), shooter_id=40617641465, bullet_pos=(912.2128, 738.3373)
+[11:23:54] [INFO] [Bullet] Using shooter_position, distance=533.333068847656
+[11:23:54] [INFO] [Bullet] Distance to wall: 533.333068847656 (36.3156293708735% of viewport)
+[11:23:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:23:54] [INFO] [Bullet] Starting wall penetration at (912.2128, 738.3373)
+[11:23:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 14.2567806243896
+[11:23:54] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:23:54] [INFO] [Bullet] Exiting penetration at (950.0854, 744.2623) after traveling 33.3333282470703 pixels through wall
+[11:23:54] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:23:54] [INFO] [LastChance] Threat detected: @Area2D@337
+[11:23:54] [INFO] [LastChance] Triggering last chance effect!
+[11:23:54] [INFO] [LastChance] Starting last chance effect:
+[11:23:54] [INFO] [LastChance]   - Time will be frozen (except player)
+[11:23:54] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[11:23:54] [INFO] [LastChance]   - Sepia intensity: 0.70
+[11:23:54] [INFO] [LastChance]   - Brightness: 0.60
+[11:23:54] [INFO] [LastChance] Pushed bullet @Area2D@337 from distance 122.1 to 200.0
+[11:23:54] [INFO] [LastChance] Pushed 1 threatening bullets away from player
+[11:23:54] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[11:23:54] [INFO] [LastChance] Skipping player node: Player
+[11:23:54] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[11:23:54] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[11:23:54] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@341
+[11:23:54] [INFO] [LastChance] Registered frozen player bullet: @Area2D@341
+[11:23:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(808.4582, 678.5649), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:23:54] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[11:23:55] [INFO] [LastChance] Freezing newly fired player bullet: Bullet
+[11:23:55] [INFO] [LastChance] Registered frozen player bullet: Bullet
+[11:23:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.1616, 669.7305), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:23:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[11:23:56] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@342
+[11:23:56] [INFO] [LastChance] Registered frozen player bullet: @Area2D@342
+[11:23:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(442.1754, 665.0978), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:23:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[11:23:56] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@343
+[11:23:56] [INFO] [LastChance] Registered frozen player bullet: @Area2D@343
+[11:23:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(403.6754, 665.0978), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:23:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[11:23:56] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@344
+[11:23:56] [INFO] [LastChance] Registered frozen player bullet: @Area2D@344
+[11:23:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(365.1754, 665.0978), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:23:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[11:23:56] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@345
+[11:23:56] [INFO] [LastChance] Registered frozen player bullet: @Area2D@345
+[11:23:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(326.6754, 665.0978), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:23:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[11:23:56] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@346
+[11:23:56] [INFO] [LastChance] Registered frozen player bullet: @Area2D@346
+[11:23:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(288.1754, 665.0978), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:23:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[11:23:56] [INFO] [ScoreManager] Combo ended at 2. Max combo: 2
+[11:23:56] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@347
+[11:23:56] [INFO] [LastChance] Registered frozen player bullet: @Area2D@347
+[11:23:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(249.6754, 665.0978), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:23:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=2
+[11:23:57] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@348
+[11:23:57] [INFO] [LastChance] Registered frozen player bullet: @Area2D@348
+[11:23:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(211.1754, 665.0978), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:23:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=2
+[11:23:58] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@349
+[11:23:58] [INFO] [LastChance] Registered frozen player bullet: @Area2D@349
+[11:23:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(95.58789, 421.0689), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:23:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=1
+[11:23:58] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@350
+[11:23:58] [INFO] [LastChance] Registered frozen player bullet: @Area2D@350
+[11:23:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(95.58789, 388.4022), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:23:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=1
+[11:23:58] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@351
+[11:23:58] [INFO] [LastChance] Registered frozen player bullet: @Area2D@351
+[11:23:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(95.58789, 365.0689), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:23:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=1
+[11:23:58] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@352
+[11:23:58] [INFO] [LastChance] Registered frozen player bullet: @Area2D@352
+[11:23:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(95.58789, 352.2356), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:23:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=1
+[11:23:58] [ENEMY] [Enemy1] Player reloading state changed: false -> true
+[11:23:58] [ENEMY] [Enemy2] Player reloading state changed: false -> true
+[11:23:58] [ENEMY] [Enemy5] Player reloading state changed: false -> true
+[11:23:58] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[11:23:58] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[11:23:58] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[11:23:58] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[11:23:58] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[11:23:58] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(95.58789, 343.18), source=PLAYER (Player), range=900, listeners=8
+[11:23:58] [ENEMY] [Enemy1] Heard player RELOAD at (95.58789, 343.18), intensity=0.07, distance=190
+[11:23:58] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
+[11:23:58] [ENEMY] [Enemy2] Heard player RELOAD at (95.58789, 343.18), intensity=0.02, distance=333
+[11:23:58] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from SEEKING_COVER to PURSUING
+[11:23:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=6, self=0, below_threshold=0
+[11:23:59] [ENEMY] [Enemy1] Player reloading state changed: true -> false
+[11:23:59] [ENEMY] [Enemy2] Player reloading state changed: true -> false
+[11:23:59] [ENEMY] [Enemy5] Player reloading state changed: true -> false
+[11:23:59] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[11:23:59] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[11:23:59] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[11:23:59] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[11:23:59] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[11:24:00] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
+[11:24:00] [INFO] [LastChance] Ending last chance effect
+[11:24:00] [INFO] [LastChance] All process modes restored
+[11:24:00] [INFO] [LastChance] Unfroze player bullet: @Area2D@341
+[11:24:00] [INFO] [LastChance] Unfroze player bullet: Bullet
+[11:24:00] [INFO] [LastChance] Unfroze player bullet: @Area2D@342
+[11:24:00] [INFO] [LastChance] Unfroze player bullet: @Area2D@343
+[11:24:00] [INFO] [LastChance] Unfroze player bullet: @Area2D@344
+[11:24:00] [INFO] [LastChance] Unfroze player bullet: @Area2D@345
+[11:24:00] [INFO] [LastChance] Unfroze player bullet: @Area2D@346
+[11:24:00] [INFO] [LastChance] Unfroze player bullet: @Area2D@347
+[11:24:00] [INFO] [LastChance] Unfroze player bullet: @Area2D@348
+[11:24:00] [INFO] [LastChance] Unfroze player bullet: @Area2D@349
+[11:24:00] [INFO] [LastChance] Unfroze player bullet: @Area2D@350
+[11:24:00] [INFO] [LastChance] Unfroze player bullet: @Area2D@351
+[11:24:00] [INFO] [LastChance] Unfroze player bullet: @Area2D@352
+[11:24:00] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[11:24:00] [ENEMY] [Enemy2] Pursuing vulnerability sound at (95.58789, 343.18), distance=333
+[11:24:00] [ENEMY] [Enemy2] Hit taken, health: 1/2
+[11:24:00] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[11:24:00] [ENEMY] [Enemy2] Hit taken, health: 0/2
+[11:24:00] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[11:24:00] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[11:24:00] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
+[11:24:00] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[11:24:00] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[11:24:01] [ENEMY] [Enemy1] Hit taken, health: 1/2
+[11:24:01] [ENEMY] [Enemy1] Hit taken, health: 0/2
+[11:24:01] [ENEMY] [Enemy1] Enemy died (ricochet: false, penetration: false)
+[11:24:01] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[11:24:01] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 6)
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(365.17538, 665.0978), shooter_id=43721426610, bullet_pos=(258.29254, 448.3518)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=241,66663
+[11:24:01] [INFO] [Bullet] Distance to wall: 241,66663 (16,455524% of viewport)
+[11:24:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(249.67538, 665.0978), shooter_id=43721426610, bullet_pos=(497.61322, 430.0171)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=341,66666
+[11:24:01] [INFO] [Bullet] Distance to wall: 341,66666 (23,264711% of viewport)
+[11:24:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(394.0002, 632.3889), shooter_id=40617641465, bullet_pos=(924.681, 737.0962)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=540.911926269531
+[11:24:01] [INFO] [Bullet] Distance to wall: 540.911926269531 (36.8316877090189% of viewport)
+[11:24:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:01] [INFO] [Bullet] Starting wall penetration at (924.681, 737.0962)
+[11:24:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.86106300354
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(211.17538, 665.0978), shooter_id=43721426610, bullet_pos=(514.8766, 445.1192)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=375
+[11:24:01] [INFO] [Bullet] Distance to wall: 375 (25,53444% of viewport)
+[11:24:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:01] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:01] [INFO] [Bullet] Exiting penetration at (962.5023, 743.3403) after traveling 33.3333358764648 pixels through wall
+[11:24:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(95.58789, 352.23557), shooter_id=43721426610, bullet_pos=(501.66708, 395.08215)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=408,33337
+[11:24:01] [INFO] [Bullet] Distance to wall: 408,33337 (27,804173% of viewport)
+[11:24:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:01] [INFO] [Bullet] Starting wall penetration at (501.66708, 395.08215)
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(95.58789, 365.0689), shooter_id=43721426610, bullet_pos=(502.6402, 397.38815)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=408,33334
+[11:24:01] [INFO] [Bullet] Distance to wall: 408,33334 (27,804169% of viewport)
+[11:24:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:01] [INFO] [Bullet] Starting wall penetration at (502.6402, 397.38815)
+[11:24:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16,906311
+[11:24:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15,876463
+[11:24:01] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:01] [INFO] [Bullet] Exiting penetration at (539.7888, 399.1045) after traveling 33,333332 pixels through wall
+[11:24:01] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:24:01] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:01] [INFO] [Bullet] Exiting penetration at (540.8533, 400.4222) after traveling 33,333336 pixels through wall
+[11:24:01] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:24:01] [ENEMY] [Enemy10] FLANKING started: target=(484.6198, 209.2885), side=left, pos=(1001.744, 1442.823)
+[11:24:01] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(442.17538, 665.0978), shooter_id=43721426610, bullet_pos=(63.036613, 378.95297)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=475,00006
+[11:24:01] [INFO] [Bullet] Distance to wall: 475,00006 (32,343628% of viewport)
+[11:24:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(395.3278, 599.9171), shooter_id=40617641465, bullet_pos=(935.4852, 703.5024)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=550
+[11:24:01] [INFO] [Bullet] Distance to wall: 550 (37.4505113608205% of viewport)
+[11:24:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(365.17538, 665.0978), shooter_id=43721426610, bullet_pos=(112.192276, 696.9294)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=254,97784
+[11:24:01] [INFO] [Bullet] Distance to wall: 254,97784 (17,36191% of viewport)
+[11:24:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:01] [INFO] [Bullet] Starting wall penetration at (112.192276, 696.9294)
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(833.7665, 699.9715), shooter_id=43721426610, bullet_pos=(40.69253, 543.649)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=808,3335
+[11:24:01] [INFO] [Bullet] Distance to wall: 808,3335 (55,040913% of viewport)
+[11:24:01] [INFO] [Bullet] Distance-based penetration chance: 82,45227%
+[11:24:01] [INFO] [Bullet] Starting wall penetration at (40.69253, 543.649)
+[11:24:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29,473555
+[11:24:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15,852437
+[11:24:01] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:01] [INFO] [Bullet] Exiting penetration at (3.0828476, 536.2358) after traveling 33,33334 pixels through wall
+[11:24:01] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:24:01] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:01] [INFO] [Bullet] Exiting penetration at (95.30207, 725.6667) after traveling 28,333334 pixels through wall
+[11:24:01] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(249.67538, 665.0978), shooter_id=43721426610, bullet_pos=(295.86978, 266.00616)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=401,7562
+[11:24:01] [INFO] [Bullet] Distance to wall: 401,7562 (27,356318% of viewport)
+[11:24:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(288.17538, 665.0978), shooter_id=43721426610, bullet_pos=(522.70374, 67.82675)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=641,66675
+[11:24:01] [INFO] [Bullet] Distance to wall: 641,66675 (43,69227% of viewport)
+[11:24:01] [INFO] [Bullet] Distance-based penetration chance: 95,69235%
+[11:24:01] [INFO] [Bullet] Starting wall penetration at (522.70374, 67.82675)
+[11:24:01] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:24:01] [INFO] [Bullet] Exiting penetration at (536.71454, 32.145626) after traveling 33,333336 pixels through wall
+[11:24:01] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(779.16156, 669.73047), shooter_id=43721426610, bullet_pos=(52.233967, 522.60657)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=741,6665
+[11:24:01] [INFO] [Bullet] Distance to wall: 741,6665 (50,501434% of viewport)
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(808.4582, 678.5649), shooter_id=43721426610, bullet_pos=(45.07513, 544.8816)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=774,99994
+[11:24:01] [INFO] [Bullet] Distance to wall: 774,99994 (52,771175% of viewport)
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(779.16156, 669.73047), shooter_id=43721426610, bullet_pos=(217.23825, 464.30914)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=598,294
+[11:24:01] [INFO] [Bullet] Distance to wall: 598,294 (40,73894% of viewport)
+[11:24:01] [INFO] [Bullet] Distance-based penetration chance: 99,1379%
+[11:24:01] [INFO] [Bullet] Starting wall penetration at (217.23825, 464.30914)
+[11:24:01] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:01] [INFO] [Bullet] Exiting penetration at (248.66763, 453.20486) after traveling 0 pixels through wall
+[11:24:01] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(211.17538, 665.0978), shooter_id=43721426610, bullet_pos=(56.373898, 210.5979)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=480,1392
+[11:24:01] [INFO] [Bullet] Distance to wall: 480,1392 (32,69356% of viewport)
+[11:24:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(442.17538, 665.0978), shooter_id=43721426610, bullet_pos=(387.06906, 54.804153)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=612,7765
+[11:24:01] [INFO] [Bullet] Distance to wall: 612,7765 (41,72508% of viewport)
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(249.67538, 665.0978), shooter_id=43721426610, bullet_pos=(53.7108, 432.72458)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=303,97272
+[11:24:01] [INFO] [Bullet] Distance to wall: 303,97272 (20,698061% of viewport)
+[11:24:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:01] [INFO] [Bullet] Starting wall penetration at (53.7108, 432.72458)
+[11:24:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 2,7247217
+[11:24:01] [INFO] [Bullet] Max penetration distance exceeded: 48,166668 >= 48
+[11:24:01] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:01] [INFO] [Bullet] Exiting penetration at (9.919006, 462.87378) after traveling 48,166668 pixels through wall
+[11:24:01] [INFO] [Bullet] Damage multiplier after penetration: 0,225
+[11:24:01] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(442.17538, 665.0978), shooter_id=43721426610, bullet_pos=(505.36633, 213.16411)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=456,33005
+[11:24:01] [INFO] [Bullet] Distance to wall: 456,33005 (31,072353% of viewport)
+[11:24:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(211.17538, 665.0978), shooter_id=43721426610, bullet_pos=(282.02582, 62.489162)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=606,7594
+[11:24:01] [INFO] [Bullet] Distance to wall: 606,7594 (41,315365% of viewport)
+[11:24:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(442.17538, 665.0978), shooter_id=43721426610, bullet_pos=(342.1104, 454.76953)
+[11:24:01] [INFO] [Bullet] Using shooter_position, distance=232,91838
+[11:24:01] [INFO] [Bullet] Distance to wall: 232,91838 (15,85984% of viewport)
+[11:24:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(442.17538, 665.0978), shooter_id=43721426610, bullet_pos=(472.59268, 686.5711)
+[11:24:02] [INFO] [Bullet] Using shooter_position, distance=37,23326
+[11:24:02] [INFO] [Bullet] Distance to wall: 37,23326 (2,5352814% of viewport)
+[11:24:02] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[11:24:02] [INFO] [Bullet] Starting wall penetration at (472.59268, 686.5711)
+[11:24:02] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:24:02] [INFO] [Bullet] Exiting penetration at (483.58063, 706.0912) after traveling 17,40021 pixels through wall
+[11:24:02] [INFO] [Bullet] Damage multiplier after penetration: 0,05625
+[11:24:04] [INFO] [ScoreManager] Combo ended at 2. Max combo: 2
+[11:24:05] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[11:24:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(487.4405, 1032.639), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(485.5024, 1031.682), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(483.5643, 1030.726), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:05] [INFO] [LastChance] Threat detected: Bullet
+[11:24:05] [INFO] [LastChance] Effect already used this life
+[11:24:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(481.6262, 1029.769), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:05] [INFO] [LastChance] Threat detected: @Area2D@379
+[11:24:05] [INFO] [LastChance] Effect already used this life
+[11:24:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(479.688, 1028.812), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:05] [INFO] [LastChance] Threat detected: @Area2D@380
+[11:24:05] [INFO] [LastChance] Effect already used this life
+[11:24:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:05] [INFO] [LastChance] Threat detected: @Area2D@381
+[11:24:05] [INFO] [LastChance] Effect already used this life
+[11:24:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(477.7499, 1027.855), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:05] [INFO] [LastChance] Threat detected: @Area2D@382
+[11:24:05] [INFO] [LastChance] Effect already used this life
+[11:24:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:05] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[11:24:05] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[11:24:05] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[11:24:05] [INFO] [LastChance] Player died
+[11:24:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(475.8118, 1026.899), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:05] [INFO] [LastChance] Threat detected: @Area2D@383
+[11:24:05] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(473.8737, 1025.942), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:05] [INFO] [LastChance] Threat detected: @Area2D@384
+[11:24:05] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(471.9356, 1024.985), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:05] [INFO] [LastChance] Threat detected: Bullet
+[11:24:05] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(469.9975, 1024.028), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:05] [INFO] [LastChance] Threat detected: @Area2D@385
+[11:24:05] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(468.0594, 1023.071), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:05] [INFO] [LastChance] Threat detected: @Area2D@386
+[11:24:05] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(466.1213, 1022.115), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:05] [INFO] [LastChance] Threat detected: @Area2D@387
+[11:24:05] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(464.1832, 1021.158), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:05] [INFO] [LastChance] Threat detected: @Area2D@388
+[11:24:05] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(462.2451, 1020.201), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:05] [INFO] [LastChance] Threat detected: @Area2D@389
+[11:24:05] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.3069, 1019.244), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:05] [INFO] [LastChance] Threat detected: Bullet
+[11:24:05] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(458.3688, 1018.287), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:05] [INFO] [LastChance] Threat detected: @Area2D@391
+[11:24:05] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:05] [INFO] [LastChance] Threat detected: @Area2D@390
+[11:24:05] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.4307, 1017.33), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:06] [INFO] [LastChance] Threat detected: @Area2D@392
+[11:24:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(454.4926, 1016.373), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:06] [INFO] [LastChance] Threat detected: @Area2D@393
+[11:24:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(452.5545, 1015.417), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:06] [INFO] [LastChance] Threat detected: @Area2D@394
+[11:24:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.6164, 1014.46), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:06] [INFO] [LastChance] Threat detected: Bullet
+[11:24:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(448.6783, 1013.503), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:06] [INFO] [LastChance] Threat detected: @Area2D@395
+[11:24:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(446.7402, 1012.546), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:06] [INFO] [LastChance] Threat detected: @Area2D@396
+[11:24:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(444.8021, 1011.589), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:06] [INFO] [LastChance] Threat detected: @Area2D@397
+[11:24:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(442.864, 1010.632), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:06] [INFO] [LastChance] Threat detected: @Area2D@398
+[11:24:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(440.9258, 1009.675), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:06] [INFO] [LastChance] Threat detected: Bullet
+[11:24:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(438.9877, 1008.719), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:06] [INFO] [LastChance] Threat detected: @Area2D@399
+[11:24:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(437.0496, 1007.762), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:06] [INFO] [LastChance] Threat detected: @Area2D@400
+[11:24:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(435.1115, 1006.805), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:06] [INFO] [LastChance] Threat detected: @Area2D@401
+[11:24:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(433.1734, 1005.848), source=ENEMY (Enemy10), range=1469, listeners=6
+[11:24:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[11:24:06] [INFO] [LastChance] Threat detected: @Area2D@402
+[11:24:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(422.7459, 962.0101), shooter_id=42899342977, bullet_pos=(322.3166, 688.1791)
+[11:24:06] [INFO] [Bullet] Using shooter_position, distance=291.666687011719
+[11:24:06] [INFO] [Bullet] Distance to wall: 291.666687011719 (19.8601210463732% of viewport)
+[11:24:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:06] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:24:06] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:24:06] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:24:06] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:24:06] [INFO] [Player] Ready! Grenades: 1/3
+[11:24:06] [INFO] [ScoreManager] Level started with 10 enemies
+[11:24:06] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 7)
+[11:24:06] [ENEMY] [Enemy1] Registered as sound listener
+[11:24:06] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[11:24:06] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 8)
+[11:24:06] [ENEMY] [Enemy2] Registered as sound listener
+[11:24:06] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[11:24:06] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 9)
+[11:24:06] [ENEMY] [Enemy3] Registered as sound listener
+[11:24:06] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[11:24:06] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 10)
+[11:24:06] [ENEMY] [Enemy4] Registered as sound listener
+[11:24:06] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[11:24:06] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 11)
+[11:24:06] [ENEMY] [Enemy5] Registered as sound listener
+[11:24:06] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[11:24:06] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 12)
+[11:24:06] [ENEMY] [Enemy6] Registered as sound listener
+[11:24:06] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[11:24:06] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 13)
+[11:24:06] [ENEMY] [Enemy7] Registered as sound listener
+[11:24:06] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[11:24:06] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 14)
+[11:24:06] [ENEMY] [Enemy8] Registered as sound listener
+[11:24:06] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[11:24:06] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 15)
+[11:24:06] [ENEMY] [Enemy9] Registered as sound listener
+[11:24:06] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[11:24:06] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 16)
+[11:24:06] [ENEMY] [Enemy10] Registered as sound listener
+[11:24:06] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[11:24:06] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:24:06] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:24:06] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:24:06] [INFO] [LastChance] Found player: Player
+[11:24:06] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:24:06] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:24:06] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:24:09] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:24:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1614.066, 976.2703), source=ENEMY (Enemy7), range=1469, listeners=16
+[11:24:10] [INFO] [SoundPropagation] Cleaned up 6 invalid listeners
+[11:24:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1614.067, 981.0927), source=ENEMY (Enemy7), range=1469, listeners=10
+[11:24:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:10] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[11:24:10] [INFO] [LastChance] Threat detected: Bullet
+[11:24:10] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:10] [INFO] [LastChance] Threat detected: @Area2D@655
+[11:24:10] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:10] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[11:24:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:10] [INFO] [LastChance] Threat detected: @Area2D@656
+[11:24:10] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1557.172, 1006.524), shooter_id=240904047630, bullet_pos=(53.18104, 1901.239)
+[11:24:10] [INFO] [Bullet] Using shooter_position, distance=1750.00134277344
+[11:24:10] [INFO] [Bullet] Distance to wall: 1750.00134277344 (119.160809398159% of viewport)
+[11:24:10] [INFO] [Bullet] Distance-based penetration chance: 26.1678381203681%
+[11:24:10] [INFO] [Bullet] Starting wall penetration at (53.18104, 1901.239)
+[11:24:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 22.0210094451904
+[11:24:11] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:11] [INFO] [Bullet] Exiting penetration at (13.07462, 1925.098) after traveling 41.6666679382324 pixels through wall
+[11:24:11] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1559.983, 1003.915), shooter_id=240904047630, bullet_pos=(230.9847, 1785.26)
+[11:24:11] [INFO] [Bullet] Using shooter_position, distance=1541.66638183594
+[11:24:11] [INFO] [Bullet] Distance to wall: 1541.66638183594 (104.974898813712% of viewport)
+[11:24:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1114.412, 1548.363), shooter_id=241759685697, bullet_pos=(914.2419, 1398.591)
+[11:24:11] [INFO] [Bullet] Using shooter_position, distance=249.999923706055
+[11:24:11] [INFO] [Bullet] Distance to wall: 249.999923706055 (17.0229545144688% of viewport)
+[11:24:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:11] [INFO] [Bullet] Starting wall penetration at (914.2419, 1398.591)
+[11:24:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:11] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:24:11] [INFO] [Bullet] Exiting penetration at (876.8768, 1370.633) after traveling 41.6666679382324 pixels through wall
+[11:24:11] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1559.983, 1003.915), shooter_id=240904047630, bullet_pos=(322.9159, 1847.912)
+[11:24:11] [INFO] [Bullet] Using shooter_position, distance=1497.55285644531
+[11:24:11] [INFO] [Bullet] Distance to wall: 1497.55285644531 (101.971127752244% of viewport)
+[11:24:11] [INFO] [LastChance] Threat detected: Bullet
+[11:24:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1110.173, 1554.848), shooter_id=241759685697, bullet_pos=(889.0627, 1438.184)
+[11:24:11] [INFO] [Bullet] Using shooter_position, distance=249.999908447266
+[11:24:11] [INFO] [Bullet] Distance to wall: 249.999908447266 (17.0229534754698% of viewport)
+[11:24:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:11] [INFO] [Bullet] Starting wall penetration at (889.0627, 1438.184)
+[11:24:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.4650535583496
+[11:24:11] [INFO] [LastChance] Threat detected: @Area2D@661
+[11:24:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:11] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:11] [INFO] [Bullet] Exiting penetration at (847.7889, 1416.407) after traveling 41.6666717529297 pixels through wall
+[11:24:11] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1559.983, 1003.915), shooter_id=240904047630, bullet_pos=(62.79407, 2009.151)
+[11:24:11] [INFO] [Bullet] Using shooter_position, distance=1803.35034179688
+[11:24:11] [INFO] [Bullet] Distance to wall: 1803.35034179688 (122.793440841824% of viewport)
+[11:24:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[11:24:11] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[11:24:11] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:24:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1559.983, 1003.915), shooter_id=240904047630, bullet_pos=(183.8793, 2064.034)
+[11:24:11] [INFO] [Bullet] Using shooter_position, distance=1737.0986328125
+[11:24:11] [INFO] [Bullet] Distance to wall: 1737.0986328125 (118.282240150928% of viewport)
+[11:24:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1559.983, 1003.915), shooter_id=240904047630, bullet_pos=(519.3574, 1897.014)
+[11:24:11] [INFO] [Bullet] Using shooter_position, distance=1371.32299804688
+[11:24:11] [INFO] [Bullet] Distance to wall: 1371.32299804688 (93.3759045776525% of viewport)
+[11:24:11] [ENEMY] [Enemy7] FLANKING started: target=(1168.961, 1611.853), side=right, pos=(1614.067, 982.4395)
+[11:24:11] [ENEMY] [Enemy7] State: PURSUING -> FLANKING
+[11:24:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1559.983, 1003.915), shooter_id=240904047630, bullet_pos=(916.9875, 2061.262)
+[11:24:11] [INFO] [Bullet] Using shooter_position, distance=1237.5078125
+[11:24:11] [INFO] [Bullet] Distance to wall: 1237.5078125 (84.264182529337% of viewport)
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [LastChance] Threat detected: Bullet
+[11:24:12] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@666
+[11:24:12] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@667
+[11:24:12] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@668
+[11:24:12] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:24:12] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:24:12] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[11:24:12] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[11:24:12] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[11:24:12] [INFO] [LastChance] Player died
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@669
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [LastChance] Threat detected: Bullet
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@670
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@671
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@672
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@673
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [LastChance] Threat detected: Bullet
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1097.946, 1566.215), shooter_id=241759685697, bullet_pos=(890.3141, 1549.13)
+[11:24:12] [INFO] [Bullet] Using shooter_position, distance=208.333374023438
+[11:24:12] [INFO] [Bullet] Distance to wall: 208.333374023438 (14.1858025285506% of viewport)
+[11:24:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:12] [INFO] [Bullet] Starting wall penetration at (890.3141, 1549.13)
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@674
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 44.3447494506836
+[11:24:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1097.589, 1567.253), shooter_id=241759685697, bullet_pos=(889.6708, 1554.115)
+[11:24:12] [INFO] [Bullet] Using shooter_position, distance=208.333358764648
+[11:24:12] [INFO] [Bullet] Distance to wall: 208.333358764648 (14.1858014895516% of viewport)
+[11:24:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:12] [INFO] [Bullet] Starting wall penetration at (889.6708, 1554.115)
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@676
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:12] [INFO] [Bullet] Exiting penetration at (843.8046, 1545.302) after traveling 41.6666717529297 pixels through wall
+[11:24:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 44.9925651550293
+[11:24:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1097.217, 1568.411), shooter_id=241759685697, bullet_pos=(889.0691, 1559.632)
+[11:24:12] [INFO] [Bullet] Using shooter_position, distance=208.333251953125
+[11:24:12] [INFO] [Bullet] Distance to wall: 208.333251953125 (14.1857942165585% of viewport)
+[11:24:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:12] [INFO] [Bullet] Starting wall penetration at (889.0691, 1559.632)
+[11:24:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:12] [INFO] [Bullet] Exiting penetration at (843.097, 1551.172) after traveling 41.6666641235352 pixels through wall
+[11:24:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@678
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.5965957641602
+[11:24:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1096.836, 1569.692), shooter_id=241759685697, bullet_pos=(888.5415, 1565.68)
+[11:24:12] [INFO] [Bullet] Using shooter_position, distance=208.333297729492
+[11:24:12] [INFO] [Bullet] Distance to wall: 208.333297729492 (14.1857973335555% of viewport)
+[11:24:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:12] [INFO] [Bullet] Starting wall penetration at (888.5415, 1565.68)
+[11:24:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:12] [INFO] [Bullet] Exiting penetration at (842.4439, 1557.665) after traveling 41.6666717529297 pixels through wall
+[11:24:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@680
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.1250686645508
+[11:24:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1096.455, 1571.098), shooter_id=241759685697, bullet_pos=(888.1245, 1572.259)
+[11:24:12] [INFO] [Bullet] Using shooter_position, distance=208.333312988281
+[11:24:12] [INFO] [Bullet] Distance to wall: 208.333312988281 (14.1857983725545% of viewport)
+[11:24:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:12] [INFO] [Bullet] Starting wall penetration at (888.1245, 1572.259)
+[11:24:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:12] [INFO] [Bullet] Exiting penetration at (841.8835, 1564.782) after traveling 41.6666679382324 pixels through wall
+[11:24:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@682
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.542163848877
+[11:24:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1096.082, 1572.631), shooter_id=241759685697, bullet_pos=(887.8568, 1579.359)
+[11:24:12] [INFO] [Bullet] Using shooter_position, distance=208.333404541016
+[11:24:12] [INFO] [Bullet] Distance to wall: 208.333404541016 (14.1858046065486% of viewport)
+[11:24:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:12] [INFO] [Bullet] Starting wall penetration at (887.8568, 1579.359)
+[11:24:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:12] [INFO] [Bullet] Exiting penetration at (841.4586, 1572.519) after traveling 41.6666679382324 pixels through wall
+[11:24:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@684
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.8099327087402
+[11:24:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1095.727, 1574.293), shooter_id=241759685697, bullet_pos=(887.7798, 1586.969)
+[11:24:12] [INFO] [Bullet] Using shooter_position, distance=208.333404541016
+[11:24:12] [INFO] [Bullet] Distance to wall: 208.333404541016 (14.1858046065486% of viewport)
+[11:24:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:12] [INFO] [Bullet] Starting wall penetration at (887.7798, 1586.969)
+[11:24:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:12] [INFO] [Bullet] Exiting penetration at (841.2145, 1580.866) after traveling 41.6666679382324 pixels through wall
+[11:24:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@686
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.8872909545898
+[11:24:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1095.403, 1576.082), shooter_id=241759685697, bullet_pos=(887.9365, 1595.068)
+[11:24:12] [INFO] [Bullet] Using shooter_position, distance=208.333435058594
+[11:24:12] [INFO] [Bullet] Distance to wall: 208.333435058594 (14.1858066845466% of viewport)
+[11:24:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:12] [INFO] [Bullet] Starting wall penetration at (887.9365, 1595.068)
+[11:24:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:12] [INFO] [Bullet] Exiting penetration at (841.1996, 1589.808) after traveling 41.6666679382324 pixels through wall
+[11:24:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:12] [INFO] [LastChance] Threat detected: Bullet
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.7304306030273
+[11:24:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1095.121, 1577.941), shooter_id=241759685697, bullet_pos=(888.3467, 1603.381)
+[11:24:12] [INFO] [Bullet] Using shooter_position, distance=208.333404541016
+[11:24:12] [INFO] [Bullet] Distance to wall: 208.333404541016 (14.1858046065486% of viewport)
+[11:24:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:12] [INFO] [Bullet] Starting wall penetration at (888.3467, 1603.381)
+[11:24:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:12] [INFO] [Bullet] Exiting penetration at (841.4641, 1599.321) after traveling 41.6666679382324 pixels through wall
+[11:24:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@689
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.3173866271973
+[11:24:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1094.894, 1579.809), shooter_id=241759685697, bullet_pos=(889.0054, 1611.629)
+[11:24:12] [INFO] [Bullet] Using shooter_position, distance=208.33332824707
+[11:24:12] [INFO] [Bullet] Distance to wall: 208.33332824707 (14.1857994115535% of viewport)
+[11:24:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:12] [INFO] [Bullet] Starting wall penetration at (889.0054, 1611.629)
+[11:24:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:12] [INFO] [Bullet] Exiting penetration at (842.0292, 1609.079) after traveling 41.6666679382324 pixels through wall
+[11:24:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@691
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.6493530273438
+[11:24:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1094.731, 1581.681), shooter_id=241759685697, bullet_pos=(889.9127, 1619.79)
+[11:24:12] [INFO] [Bullet] Using shooter_position, distance=208.333297729492
+[11:24:12] [INFO] [Bullet] Distance to wall: 208.333297729492 (14.1857973335555% of viewport)
+[11:24:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:12] [INFO] [Bullet] Starting wall penetration at (889.9127, 1619.79)
+[11:24:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:12] [INFO] [Bullet] Exiting penetration at (842.8862, 1618.756) after traveling 41.6666679382324 pixels through wall
+[11:24:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@693
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 44.7211265563965
+[11:24:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:12] [INFO] [Bullet] Exiting penetration at (844.0334, 1628.326) after traveling 41.6666679382324 pixels through wall
+[11:24:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@695
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [LastChance] Threat detected: Bullet
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@696
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@697
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1153.547, 1578.578), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:12] [INFO] [LastChance] Threat detected: @Area2D@698
+[11:24:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:12] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[11:24:12] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:24:12] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:24:12] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:24:12] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:24:12] [INFO] [Player] Ready! Grenades: 1/3
+[11:24:12] [INFO] [ScoreManager] Level started with 10 enemies
+[11:24:12] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:24:12] [ENEMY] [Enemy1] Registered as sound listener
+[11:24:12] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[11:24:12] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:24:12] [ENEMY] [Enemy2] Registered as sound listener
+[11:24:12] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[11:24:12] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:24:12] [ENEMY] [Enemy3] Registered as sound listener
+[11:24:12] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[11:24:12] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:24:12] [ENEMY] [Enemy4] Registered as sound listener
+[11:24:12] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[11:24:12] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:24:12] [ENEMY] [Enemy5] Registered as sound listener
+[11:24:12] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[11:24:12] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:24:12] [ENEMY] [Enemy6] Registered as sound listener
+[11:24:12] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[11:24:12] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:24:12] [ENEMY] [Enemy7] Registered as sound listener
+[11:24:12] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[11:24:12] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:24:12] [ENEMY] [Enemy8] Registered as sound listener
+[11:24:12] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[11:24:12] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:24:12] [ENEMY] [Enemy9] Registered as sound listener
+[11:24:12] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[11:24:12] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:24:12] [ENEMY] [Enemy10] Registered as sound listener
+[11:24:12] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[11:24:12] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:24:12] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:24:12] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:24:12] [INFO] [LastChance] Found player: Player
+[11:24:12] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:24:12] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:24:12] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:24:14] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[11:24:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.18, 1518.709), source=ENEMY (Enemy10), range=1469, listeners=20
+[11:24:14] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[11:24:14] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.561, 1498.865), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:14] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:14] [INFO] [LastChance] Threat detected: Bullet
+[11:24:14] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:14] [INFO] [LastChance] Threat detected: @Area2D@951
+[11:24:14] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.912, 1477.555), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:14] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:14] [INFO] [LastChance] Threat detected: @Area2D@952
+[11:24:14] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1052.564, 1454.489), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:14] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:14] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:24:14] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:24:14] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:24:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1016.521, 1416.229), shooter_id=290631714411, bullet_pos=(984.6733, 1389.362)
+[11:24:14] [INFO] [Bullet] Using shooter_position, distance=41.6666831970215
+[11:24:14] [INFO] [Bullet] Distance to wall: 41.6666831970215 (2.83716107715957% of viewport)
+[11:24:14] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[11:24:14] [INFO] [Bullet] Starting wall penetration at (984.6733, 1389.362)
+[11:24:14] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:24:14] [INFO] [Bullet] Exiting penetration at (949.004, 1359.271) after traveling 41.6666679382324 pixels through wall
+[11:24:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1102.085, 1485.485), shooter_id=290631714411, bullet_pos=(67.48941, 861.2412)
+[11:24:14] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
+[11:24:14] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
+[11:24:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1004.547, 1424.078), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1072.057, 1464.167), shooter_id=290631714411, bullet_pos=(65.07199, 796.2964)
+[11:24:15] [INFO] [Bullet] Using shooter_position, distance=1208.33386230469
+[11:24:15] [INFO] [Bullet] Distance to wall: 1208.33386230469 (82.2776746143741% of viewport)
+[11:24:15] [INFO] [Bullet] Distance-based penetration chance: 50.6760462832302%
+[11:24:15] [INFO] [Bullet] Starting wall penetration at (65.07199, 796.2964)
+[11:24:15] [INFO] [LastChance] Threat detected: @Area2D@955
+[11:24:15] [INFO] [LastChance] Triggering last chance effect!
+[11:24:15] [INFO] [LastChance] Starting last chance effect:
+[11:24:15] [INFO] [LastChance]   - Time will be frozen (except player)
+[11:24:15] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[11:24:15] [INFO] [LastChance]   - Sepia intensity: 0.70
+[11:24:15] [INFO] [LastChance]   - Brightness: 0.60
+[11:24:15] [INFO] [LastChance] Pushed bullet @Area2D@955 from distance 147.4 to 200.0
+[11:24:15] [INFO] [LastChance] Pushed 1 threatening bullets away from player
+[11:24:15] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[11:24:15] [INFO] [LastChance] Skipping player node: Player
+[11:24:15] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:15] [INFO] [Bullet] Exiting penetration at (60.90516, 793.5328) after traveling 0 pixels through wall
+[11:24:15] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:15] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[11:24:15] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[11:24:15] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:24:15] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:24:15] [INFO] [LastChance] Ending last chance effect
+[11:24:15] [INFO] [LastChance] All process modes restored
+[11:24:15] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:24:15] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:24:15] [INFO] [Player] Ready! Grenades: 1/3
+[11:24:15] [INFO] [ScoreManager] Level started with 10 enemies
+[11:24:15] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:24:15] [ENEMY] [Enemy1] Registered as sound listener
+[11:24:15] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[11:24:15] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:24:15] [ENEMY] [Enemy2] Registered as sound listener
+[11:24:15] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[11:24:15] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:24:15] [ENEMY] [Enemy3] Registered as sound listener
+[11:24:15] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[11:24:15] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:24:15] [ENEMY] [Enemy4] Registered as sound listener
+[11:24:15] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[11:24:15] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:24:15] [ENEMY] [Enemy5] Registered as sound listener
+[11:24:15] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[11:24:15] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:24:15] [ENEMY] [Enemy6] Registered as sound listener
+[11:24:15] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[11:24:15] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:24:15] [ENEMY] [Enemy7] Registered as sound listener
+[11:24:15] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[11:24:15] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:24:15] [ENEMY] [Enemy8] Registered as sound listener
+[11:24:15] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[11:24:15] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:24:15] [ENEMY] [Enemy9] Registered as sound listener
+[11:24:15] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[11:24:15] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:24:15] [ENEMY] [Enemy10] Registered as sound listener
+[11:24:15] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[11:24:15] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:24:15] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:24:15] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:24:15] [INFO] [LastChance] Found player: Player
+[11:24:15] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:24:15] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:24:15] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:24:16] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[11:24:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=20
+[11:24:16] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[11:24:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:16] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:24:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1103.027, 1484.32), shooter_id=315109672649, bullet_pos=(43.27657, 821.4265)
+[11:24:17] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[11:24:17] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[11:24:17] [INFO] [Bullet] Distance-based penetration chance: 47.366097453433%
+[11:24:17] [INFO] [Bullet] Starting wall penetration at (43.27657, 821.4265)
+[11:24:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33.3657073974609
+[11:24:17] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:17] [INFO] [Bullet] Exiting penetration at (3.712532, 796.6785) after traveling 41.6666717529297 pixels through wall
+[11:24:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1073.222, 1462.644), shooter_id=315109672649, bullet_pos=(40.73291, 758.0391)
+[11:24:17] [INFO] [Bullet] Using shooter_position, distance=1250.00061035156
+[11:24:17] [INFO] [Bullet] Distance to wall: 1250.00061035156 (85.1148401072795% of viewport)
+[11:24:17] [INFO] [Bullet] Distance-based penetration chance: 47.3660198748406%
+[11:24:17] [INFO] [Bullet] Starting wall penetration at (40.73291, 758.0391)
+[11:24:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.0940170288086
+[11:24:17] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:17] [INFO] [Bullet] Exiting penetration at (2.186657, 731.7338) after traveling 41.6666679382324 pixels through wall
+[11:24:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1044.267, 1439.819), shooter_id=315109672649, bullet_pos=(40.45655, 694.9264)
+[11:24:17] [INFO] [Bullet] Using shooter_position, distance=1249.99975585938
+[11:24:17] [INFO] [Bullet] Distance to wall: 1249.99975585938 (85.1147819233352% of viewport)
+[11:24:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1044.267, 1439.819), shooter_id=315109672649, bullet_pos=(316.1011, 464.664)
+[11:24:17] [INFO] [Bullet] Using shooter_position, distance=1217.02575683594
+[11:24:17] [INFO] [Bullet] Distance to wall: 1217.02575683594 (82.8695216959917% of viewport)
+[11:24:17] [ENEMY] [Enemy2] Hit taken, health: 3/4
+[11:24:18] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:18] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:20] [ENEMY] [Enemy10] FLANKING started: target=(422.9123, 1100.993), side=right, pos=(946.2164, 1419.72)
+[11:24:20] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[11:24:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.3541, 1163.429), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:21] [ENEMY] [Enemy3] Heard gunshot at (523.3541, 1163.429), source_type=1, intensity=0.01, distance=450
+[11:24:21] [ENEMY] [Enemy4] Heard gunshot at (523.3541, 1163.429), source_type=1, intensity=0.02, distance=382
+[11:24:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(518.8099, 1160.637), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(514.2657, 1157.845), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:21] [INFO] [LastChance] Threat detected: Bullet
+[11:24:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(509.7215, 1155.053), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(517.0343, 1114.303), shooter_id=315109672649, bullet_pos=(497.7823, 990.7947)
+[11:24:21] [INFO] [Bullet] Using shooter_position, distance=125.000061035156
+[11:24:21] [INFO] [Bullet] Distance to wall: 125.000061035156 (8.51148401072795% of viewport)
+[11:24:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:21] [INFO] [Bullet] Starting wall penetration at (497.7823, 990.7947)
+[11:24:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(517.0343, 1114.303), shooter_id=315109672649, bullet_pos=(497.0122, 985.8544)
+[11:24:21] [INFO] [Bullet] Using shooter_position, distance=130.000076293945
+[11:24:21] [INFO] [Bullet] Distance to wall: 130.000076293945 (8.85194424391623% of viewport)
+[11:24:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:21] [INFO] [LastChance] Threat detected: @Area2D@1214
+[11:24:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(505.1774, 1152.261), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:21] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:24:21] [INFO] [Bullet] Exiting penetration at (495.5581, 1026.245) after traveling 35.4166641235352 pixels through wall
+[11:24:21] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[11:24:21] [INFO] [LastChance] Threat detected: @Area2D@1215
+[11:24:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(500.6332, 1149.469), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:21] [INFO] [LastChance] Threat detected: @Area2D@1216
+[11:24:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:21] [INFO] [LastChance] Threat detected: @Area2D@1218
+[11:24:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(496.0891, 1146.677), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:21] [INFO] [LastChance] Threat detected: Bullet
+[11:24:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:24:21] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:24:21] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:24:21] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(491.5449, 1143.885), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[11:24:22] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[11:24:22] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[11:24:22] [INFO] [LastChance] Player died
+[11:24:22] [INFO] [LastChance] Threat detected: @Area2D@1219
+[11:24:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:22] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(487.0007, 1141.093), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:22] [INFO] [LastChance] Threat detected: @Area2D@1220
+[11:24:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:22] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(482.4566, 1138.301), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:22] [INFO] [LastChance] Threat detected: @Area2D@1221
+[11:24:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:22] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(477.9124, 1135.509), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:22] [INFO] [LastChance] Threat detected: @Area2D@1222
+[11:24:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:22] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(473.3683, 1132.717), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:22] [INFO] [LastChance] Threat detected: @Area2D@1223
+[11:24:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:22] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(468.8241, 1129.925), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:22] [INFO] [LastChance] Threat detected: @Area2D@1224
+[11:24:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:22] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(464.2799, 1127.133), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:22] [INFO] [LastChance] Threat detected: Bullet
+[11:24:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:22] [INFO] [LastChance] Threat detected: @Area2D@1225
+[11:24:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:22] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(459.7358, 1124.341), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:22] [INFO] [LastChance] Threat detected: @Area2D@1226
+[11:24:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:22] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(455.1916, 1121.549), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:22] [INFO] [LastChance] Threat detected: @Area2D@1227
+[11:24:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:22] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.6475, 1118.757), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:22] [INFO] [LastChance] Threat detected: @Area2D@1228
+[11:24:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:22] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(446.1033, 1115.965), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=1, below_threshold=3
+[11:24:22] [INFO] ------------------------------------------------------------
+[11:24:22] [INFO] GAME LOG ENDED: 2026-01-22T11:24:22
+[11:24:22] [INFO] ============================================================
diff --git a/docs/case-studies/issue-217/logs/game_log_20260122_112428.txt b/docs/case-studies/issue-217/logs/game_log_20260122_112428.txt
new file mode 100644
index 00000000..1f47e5e8
--- /dev/null
+++ b/docs/case-studies/issue-217/logs/game_log_20260122_112428.txt
@@ -0,0 +1,1069 @@
+[11:24:28] [INFO] ============================================================
+[11:24:28] [INFO] GAME LOG STARTED
+[11:24:28] [INFO] ============================================================
+[11:24:28] [INFO] Timestamp: 2026-01-22T11:24:28
+[11:24:28] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_112428.txt
+[11:24:28] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[11:24:28] [INFO] OS: Windows
+[11:24:28] [INFO] Debug build: false
+[11:24:28] [INFO] Engine version: 4.3-stable (official)
+[11:24:28] [INFO] Project: Godot Top-Down Template
+[11:24:28] [INFO] ------------------------------------------------------------
+[11:24:28] [INFO] [GameManager] GameManager ready
+[11:24:28] [INFO] [ScoreManager] ScoreManager ready
+[11:24:28] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[11:24:28] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:24:28] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[11:24:28] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[11:24:28] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[11:24:28] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[11:24:28] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[11:24:28] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[11:24:28] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:24:28] [INFO] [LastChance] Last chance shader loaded successfully
+[11:24:28] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[11:24:28] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[11:24:28] [INFO] [LastChance]   Sepia intensity: 0.70
+[11:24:28] [INFO] [LastChance]   Brightness: 0.60
+[11:24:28] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[11:24:28] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[11:24:28] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:24:28] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:24:28] [INFO] [Player] Ready! Grenades: 1/3
+[11:24:28] [INFO] [ScoreManager] Level started with 10 enemies
+[11:24:28] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[11:24:28] [ENEMY] [Enemy1] Registered as sound listener
+[11:24:28] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[11:24:28] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[11:24:28] [ENEMY] [Enemy2] Registered as sound listener
+[11:24:28] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[11:24:28] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[11:24:28] [ENEMY] [Enemy3] Registered as sound listener
+[11:24:28] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[11:24:28] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[11:24:28] [ENEMY] [Enemy4] Registered as sound listener
+[11:24:28] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[11:24:28] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[11:24:28] [ENEMY] [Enemy5] Registered as sound listener
+[11:24:28] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[11:24:28] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[11:24:28] [ENEMY] [Enemy6] Registered as sound listener
+[11:24:28] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[11:24:28] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[11:24:28] [ENEMY] [Enemy7] Registered as sound listener
+[11:24:28] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 2, behavior: PATROL, player_found: yes
+[11:24:28] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[11:24:28] [ENEMY] [Enemy8] Registered as sound listener
+[11:24:28] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[11:24:28] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[11:24:28] [ENEMY] [Enemy9] Registered as sound listener
+[11:24:28] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[11:24:28] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[11:24:28] [ENEMY] [Enemy10] Registered as sound listener
+[11:24:28] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[11:24:28] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:24:28] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:24:28] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:24:28] [INFO] [LastChance] Found player: Player
+[11:24:28] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:24:28] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:24:28] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:24:29] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:29] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:29] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:24:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:29] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.821, 1494.757), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:29] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.552, 1472.91), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:29] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1153.019, 1516.452), shooter_id=42899342977, bullet_pos=(46.92997, 934.1586)
+[11:24:29] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:24:29] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:24:29] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:24:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1129.224, 1501.953), shooter_id=42899342977, bullet_pos=(47.35644, 875.8052)
+[11:24:29] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[11:24:29] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[11:24:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1098.719, 1481.295), shooter_id=42899342977, bullet_pos=(42.76967, 812.363)
+[11:24:30] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:24:30] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:24:30] [INFO] [Bullet] Distance-based penetration chance: 47.3661071507571%
+[11:24:30] [INFO] [Bullet] Starting wall penetration at (42.76967, 812.363)
+[11:24:30] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33.9179000854492
+[11:24:30] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:30] [INFO] [Bullet] Exiting penetration at (3.347553, 787.3896) after traveling 41.6666679382324 pixels through wall
+[11:24:30] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1129.224, 1501.953), shooter_id=42899342977, bullet_pos=(281.0774, 706.9543)
+[11:24:30] [INFO] [Bullet] Using shooter_position, distance=1162.48693847656
+[11:24:30] [INFO] [Bullet] Distance to wall: 1162.48693847656 (79.155873265858% of viewport)
+[11:24:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1069.086, 1459.399), shooter_id=42899342977, bullet_pos=(41.54288, 747.6023)
+[11:24:30] [INFO] [Bullet] Using shooter_position, distance=1250.00024414063
+[11:24:30] [INFO] [Bullet] Distance to wall: 1250.00024414063 (85.1148151713033% of viewport)
+[11:24:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1069.086, 1459.399), shooter_id=42899342977, bullet_pos=(101.8098, 701.574)
+[11:24:30] [INFO] [Bullet] Using shooter_position, distance=1228.78930664063
+[11:24:30] [INFO] [Bullet] Distance to wall: 1228.78930664063 (83.6705234334535% of viewport)
+[11:24:30] [INFO] [Bullet] Distance-based penetration chance: 49.0510559943042%
+[11:24:30] [INFO] [Bullet] Starting wall penetration at (101.8098, 701.574)
+[11:24:30] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18.0529594421387
+[11:24:30] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:30] [INFO] [Bullet] Exiting penetration at (133.93, 677.0425) after traveling 35.4166679382324 pixels through wall
+[11:24:30] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[11:24:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1129.224, 1501.953), shooter_id=42899342977, bullet_pos=(513.3419, 855.9335)
+[11:24:30] [INFO] [Bullet] Using shooter_position, distance=892.5537109375
+[11:24:30] [INFO] [Bullet] Distance to wall: 892.5537109375 (60.775623439286% of viewport)
+[11:24:30] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[11:24:30] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[11:24:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1040.608, 1436.082), shooter_id=42899342977, bullet_pos=(47.26772, 677.2831)
+[11:24:30] [INFO] [Bullet] Using shooter_position, distance=1250.00024414063
+[11:24:30] [INFO] [Bullet] Distance to wall: 1250.00024414063 (85.1148151713033% of viewport)
+[11:24:30] [INFO] [Bullet] Distance-based penetration chance: 47.3660489668128%
+[11:24:30] [INFO] [Bullet] Penetration failed (distance roll)
+[11:24:33] [ENEMY] [Enemy10] FLANKING started: target=(409.7075, 1002.772), side=right, pos=(954.3476, 1414.538)
+[11:24:33] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:33] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(502.6103, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:35] [ENEMY] [Enemy3] Heard gunshot at (502.6103, 1048.067), source_type=1, intensity=0.02, distance=358
+[11:24:35] [ENEMY] [Enemy4] Heard gunshot at (502.6103, 1048.067), source_type=1, intensity=0.02, distance=332
+[11:24:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(499.3601, 998.7333), shooter_id=42899342977, bullet_pos=(499.3601, 998.7333)
+[11:24:35] [INFO] [Bullet] Using shooter_position, distance=0
+[11:24:35] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[11:24:35] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[11:24:35] [INFO] [Bullet] Starting wall penetration at (499.3601, 998.7333)
+[11:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(499.3601, 998.7333), shooter_id=42899342977, bullet_pos=(498.9572, 993.7496)
+[11:24:35] [INFO] [Bullet] Using shooter_position, distance=5.00002336502075
+[11:24:35] [INFO] [Bullet] Distance to wall: 5.00002336502075 (0.3404607851565% of viewport)
+[11:24:35] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[11:24:35] [INFO] [Bullet] Already penetrating, cannot start new penetration
+[11:24:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(499.3991, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:35] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:24:35] [INFO] [Bullet] Exiting penetration at (495.5998, 952.2184) after traveling 41.6666679382324 pixels through wall
+[11:24:35] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(496.725, 998.7097), shooter_id=42899342977, bullet_pos=(496.725, 998.7097)
+[11:24:35] [INFO] [Bullet] Using shooter_position, distance=0
+[11:24:35] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[11:24:35] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[11:24:35] [INFO] [Bullet] Starting wall penetration at (496.725, 998.7097)
+[11:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(496.725, 998.7097), shooter_id=42899342977, bullet_pos=(496.391, 993.7209)
+[11:24:35] [INFO] [Bullet] Using shooter_position, distance=4.99999523162842
+[11:24:35] [INFO] [Bullet] Distance to wall: 4.99999523162842 (0.34045886950209% of viewport)
+[11:24:35] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[11:24:35] [INFO] [Bullet] Already penetrating, cannot start new penetration
+[11:24:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(496.1879, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:35] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:24:35] [INFO] [Bullet] Exiting penetration at (493.608, 952.1473) after traveling 41.6666679382324 pixels through wall
+[11:24:35] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:35] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(492.9767, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:35] [INFO] [LastChance] Threat detected: Bullet
+[11:24:35] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:24:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:35] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(489.7656, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:35] [INFO] [LastChance] Threat detected: @Area2D@301
+[11:24:35] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:24:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:35] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(486.5544, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:35] [INFO] [LastChance] Threat detected: @Area2D@302
+[11:24:35] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:24:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:35] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(483.3432, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:35] [INFO] [LastChance] Threat detected: @Area2D@303
+[11:24:35] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:24:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:24:35] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:24:35] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:24:35] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(480.132, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:36] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[11:24:36] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[11:24:36] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[11:24:36] [INFO] [LastChance] Player died
+[11:24:36] [INFO] [LastChance] Threat detected: @Area2D@304
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(476.9208, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:36] [INFO] [LastChance] Threat detected: @Area2D@305
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(473.7097, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:36] [INFO] [LastChance] Threat detected: Bullet
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(470.4985, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:36] [INFO] [LastChance] Threat detected: @Area2D@306
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(467.2873, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:36] [INFO] [LastChance] Threat detected: @Area2D@307
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(464.0761, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:36] [INFO] [LastChance] Threat detected: @Area2D@308
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.8649, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:36] [INFO] [LastChance] Threat detected: @Area2D@309
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.6537, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:36] [INFO] [LastChance] Threat detected: @Area2D@310
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(454.4426, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:36] [INFO] [LastChance] Threat detected: Bullet
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(451.2314, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:36] [INFO] [LastChance] Threat detected: @Area2D@311
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(448.0202, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:36] [INFO] [LastChance] Threat detected: @Area2D@312
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(444.809, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:36] [INFO] [LastChance] Threat detected: @Area2D@313
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(441.5978, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:36] [ENEMY] [Enemy2] Heard gunshot at (441.5978, 1048.067), source_type=1, intensity=0.01, distance=500
+[11:24:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:36] [INFO] [LastChance] Threat detected: @Area2D@314
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(438.3867, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:36] [INFO] [LastChance] Threat detected: @Area2D@315
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(435.1755, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:36] [INFO] [LastChance] Threat detected: Bullet
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(431.9643, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:36] [INFO] [LastChance] Threat detected: @Area2D@316
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(428.7531, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:36] [INFO] [LastChance] Threat detected: @Area2D@317
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(425.5419, 1048.067), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:36] [INFO] [LastChance] Threat detected: @Area2D@318
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[11:24:36] [INFO] [LastChance] Threat detected: @Area2D@319
+[11:24:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:24:36] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:24:36] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:24:36] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:24:36] [INFO] [Player] Ready! Grenades: 1/3
+[11:24:36] [INFO] [ScoreManager] Level started with 10 enemies
+[11:24:36] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:24:36] [ENEMY] [Enemy1] Registered as sound listener
+[11:24:36] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[11:24:36] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:24:36] [ENEMY] [Enemy2] Registered as sound listener
+[11:24:36] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[11:24:36] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:24:36] [ENEMY] [Enemy3] Registered as sound listener
+[11:24:36] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[11:24:36] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:24:36] [ENEMY] [Enemy4] Registered as sound listener
+[11:24:36] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[11:24:36] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:24:36] [ENEMY] [Enemy5] Registered as sound listener
+[11:24:36] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[11:24:36] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:24:36] [ENEMY] [Enemy6] Registered as sound listener
+[11:24:36] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[11:24:36] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:24:36] [ENEMY] [Enemy7] Registered as sound listener
+[11:24:36] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[11:24:36] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:24:36] [ENEMY] [Enemy8] Registered as sound listener
+[11:24:36] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[11:24:36] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:24:36] [ENEMY] [Enemy9] Registered as sound listener
+[11:24:36] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[11:24:36] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:24:36] [ENEMY] [Enemy10] Registered as sound listener
+[11:24:36] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[11:24:36] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:24:36] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:24:36] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:24:36] [INFO] [LastChance] Found player: Player
+[11:24:36] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:24:36] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:24:36] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:24:37] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[11:24:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=20
+[11:24:37] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[11:24:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:38] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:24:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1103.027, 1484.32), shooter_id=128345704921, bullet_pos=(43.27657, 821.4265)
+[11:24:38] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[11:24:38] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[11:24:38] [INFO] [Bullet] Distance-based penetration chance: 47.366097453433%
+[11:24:38] [INFO] [Bullet] Penetration failed (distance roll)
+[11:24:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1073.222, 1462.644), shooter_id=128345704921, bullet_pos=(40.73291, 758.0391)
+[11:24:38] [INFO] [Bullet] Using shooter_position, distance=1250.00061035156
+[11:24:38] [INFO] [Bullet] Distance to wall: 1250.00061035156 (85.1148401072795% of viewport)
+[11:24:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1073.222, 1462.644), shooter_id=128345704921, bullet_pos=(96.30978, 706.4454)
+[11:24:38] [INFO] [Bullet] Using shooter_position, distance=1235.39196777344
+[11:24:38] [INFO] [Bullet] Distance to wall: 1235.39196777344 (84.12011077121% of viewport)
+[11:24:38] [INFO] [Bullet] Distance-based penetration chance: 48.5265374335884%
+[11:24:38] [INFO] [Bullet] Penetration failed (distance roll)
+[11:24:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1044.267, 1439.819), shooter_id=128345704921, bullet_pos=(40.45655, 694.9264)
+[11:24:38] [INFO] [Bullet] Using shooter_position, distance=1249.99975585938
+[11:24:38] [INFO] [Bullet] Distance to wall: 1249.99975585938 (85.1147819233352% of viewport)
+[11:24:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1044.267, 1439.819), shooter_id=128345704921, bullet_pos=(508.3576, 432.948)
+[11:24:38] [INFO] [Bullet] Using shooter_position, distance=1140.60815429688
+[11:24:38] [INFO] [Bullet] Distance to wall: 1140.60815429688 (77.6661066195265% of viewport)
+[11:24:38] [ENEMY] [Enemy1] Hit taken, health: 2/3
+[11:24:41] [ENEMY] [Enemy10] FLANKING started: target=(680.1955, 839.7403), side=left, pos=(953.4262, 1416.483)
+[11:24:41] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[11:24:41] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:41] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:41] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:41] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:41] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:41] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:41] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:41] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:41] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:41] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:42] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(501.7403, 1052.144), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [ENEMY] [Enemy3] Heard gunshot at (501.7403, 1052.144), source_type=1, intensity=0.02, distance=361
+[11:24:43] [ENEMY] [Enemy4] Heard gunshot at (501.7403, 1052.144), source_type=1, intensity=0.02, distance=335
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(497.7069, 1002.832), shooter_id=128345704921, bullet_pos=(497.7069, 1002.832)
+[11:24:43] [INFO] [Bullet] Using shooter_position, distance=0
+[11:24:43] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[11:24:43] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[11:24:43] [INFO] [Bullet] Starting wall penetration at (497.7069, 1002.832)
+[11:24:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(497.7069, 1002.832), shooter_id=128345704921, bullet_pos=(497.1977, 997.8583)
+[11:24:43] [INFO] [Bullet] Using shooter_position, distance=5
+[11:24:43] [INFO] [Bullet] Distance to wall: 5 (0.34045919418928% of viewport)
+[11:24:43] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[11:24:43] [INFO] [Bullet] Already penetrating, cannot start new penetration
+[11:24:43] [INFO] [LastChance] Threat detected: Bullet
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(496.6343, 1050.603), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:43] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:24:43] [INFO] [Bullet] Exiting penetration at (492.9539, 956.4083) after traveling 41.6666679382324 pixels through wall
+[11:24:43] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:43] [INFO] [LastChance] Threat detected: @Area2D@579
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(491.5283, 1049.063), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[11:24:43] [INFO] [LastChance] Threat detected: Bullet
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(486.4222, 1047.522), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:43] [INFO] [LastChance] Threat detected: @Area2D@580
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(481.3162, 1045.982), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:43] [INFO] [LastChance] Threat detected: @Area2D@581
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:24:43] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:24:43] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(476.2102, 1044.441), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:24:43] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[11:24:43] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[11:24:43] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[11:24:43] [INFO] [LastChance] Player died
+[11:24:43] [INFO] [LastChance] Threat detected: @Area2D@582
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(471.1042, 1042.901), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [ENEMY] [Enemy2] Heard gunshot at (471.1042, 1042.901), source_type=1, intensity=0.01, distance=498
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:43] [INFO] [LastChance] Threat detected: @Area2D@583
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(465.9982, 1041.36), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:43] [INFO] [LastChance] Threat detected: Bullet
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.8922, 1039.819), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:43] [INFO] [LastChance] Threat detected: @Area2D@584
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(455.7861, 1038.279), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:43] [INFO] [LastChance] Threat detected: @Area2D@585
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.6801, 1036.738), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:43] [INFO] [LastChance] Threat detected: @Area2D@586
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(445.5741, 1035.198), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:43] [INFO] [LastChance] Threat detected: Bullet
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(440.4681, 1033.657), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:43] [INFO] [LastChance] Threat detected: @Area2D@587
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(435.3621, 1032.117), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:43] [INFO] [LastChance] Threat detected: @Area2D@588
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(430.256, 1030.576), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:43] [INFO] [LastChance] Threat detected: @Area2D@589
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(425.15, 1029.036), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:43] [INFO] [LastChance] Threat detected: Bullet
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(420.044, 1027.495), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:43] [INFO] [LastChance] Threat detected: @Area2D@590
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(414.938, 1025.955), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:43] [INFO] [LastChance] Threat detected: @Area2D@591
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(409.832, 1024.414), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:43] [INFO] [LastChance] Threat detected: @Area2D@592
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(404.726, 1022.874), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:43] [INFO] [LastChance] Threat detected: Bullet
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(399.6199, 1021.333), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:43] [INFO] [LastChance] Threat detected: @Area2D@593
+[11:24:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:43] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(394.5139, 1019.793), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[11:24:44] [INFO] [LastChance] Threat detected: @Area2D@594
+[11:24:44] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:44] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:44] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(389.4079, 1018.252), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=1, below_threshold=2
+[11:24:44] [INFO] [LastChance] Threat detected: @Area2D@595
+[11:24:44] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:44] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:44] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(384.3019, 1016.712), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=1, below_threshold=2
+[11:24:44] [INFO] [LastChance] Threat detected: Bullet
+[11:24:44] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:44] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:44] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(379.1959, 1015.171), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=1, below_threshold=2
+[11:24:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(431.9986, 967.8662), shooter_id=128345704921, bullet_pos=(498.7559, 862.1852)
+[11:24:44] [INFO] [Bullet] Using shooter_position, distance=124.999977111816
+[11:24:44] [INFO] [Bullet] Distance to wall: 124.999977111816 (8.51147829623342% of viewport)
+[11:24:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:44] [INFO] [Bullet] Starting wall penetration at (498.7559, 862.1852)
+[11:24:44] [INFO] [LastChance] Threat detected: @Area2D@596
+[11:24:44] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:44] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:44] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(374.0898, 1013.631), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=1, below_threshold=2
+[11:24:44] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:24:44] [INFO] [Bullet] Exiting penetration at (523.6785, 822.731) after traveling 41.6666717529297 pixels through wall
+[11:24:44] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(428.5554, 967.7097), shooter_id=128345704921, bullet_pos=(498.4969, 864.1085)
+[11:24:44] [INFO] [Bullet] Using shooter_position, distance=125
+[11:24:44] [INFO] [Bullet] Distance to wall: 125 (8.51147985473193% of viewport)
+[11:24:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:44] [INFO] [Bullet] Starting wall penetration at (498.4969, 864.1085)
+[11:24:44] [INFO] [LastChance] Threat detected: @Area2D@598
+[11:24:44] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:44] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:44] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(368.9838, 1012.09), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=1, below_threshold=2
+[11:24:44] [INFO] [Bullet] Raycast backward hit penetrating body at distance 1.08724296092987
+[11:24:44] [INFO] [LastChance] Threat detected: @Area2D@600
+[11:24:44] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(425.0266, 967.582), shooter_id=128345704921, bullet_pos=(498.0303, 866.1154)
+[11:24:44] [INFO] [Bullet] Using shooter_position, distance=125.000053405762
+[11:24:44] [INFO] [Bullet] Distance to wall: 125.000053405762 (8.51148349122845% of viewport)
+[11:24:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:44] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:44] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[11:24:44] [INFO] [Bullet] Max penetration distance exceeded: 83.3333358764648 >= 48
+[11:24:44] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:44] [INFO] [Bullet] Exiting penetration at (547.9221, 790.8971) after traveling 83.3333358764648 pixels through wall
+[11:24:44] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(421.4115, 967.4761), shooter_id=128345704921, bullet_pos=(497.3528, 868.189)
+[11:24:44] [INFO] [Bullet] Using shooter_position, distance=125.000015258789
+[11:24:44] [INFO] [Bullet] Distance to wall: 125.000015258789 (8.51148089373093% of viewport)
+[11:24:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:44] [INFO] [Bullet] Starting wall penetration at (497.3528, 868.189)
+[11:24:44] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:44] [INFO] [Bullet] Raycast backward hit penetrating body at distance 2.80517888069153
+[11:24:44] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:24:44] [INFO] [Bullet] Exiting penetration at (525.7042, 831.1218) after traveling 41.6666679382324 pixels through wall
+[11:24:44] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:24:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(417.7104, 967.3849), shooter_id=128345704921, bullet_pos=(496.463, 870.3126)
+[11:24:44] [INFO] [Bullet] Using shooter_position, distance=125.000022888184
+[11:24:44] [INFO] [Bullet] Distance to wall: 125.000022888184 (8.51148141323043% of viewport)
+[11:24:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:24:44] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:44] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:44] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:44] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[11:24:44] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:24:44] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:24:44] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:24:44] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:24:44] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:24:44] [INFO] [Player] Ready! Grenades: 1/3
+[11:24:44] [INFO] [ScoreManager] Level started with 10 enemies
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:24:44] [ENEMY] [Enemy1] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:24:44] [ENEMY] [Enemy2] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:24:44] [ENEMY] [Enemy3] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:24:44] [ENEMY] [Enemy4] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:24:44] [ENEMY] [Enemy5] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:24:44] [ENEMY] [Enemy6] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:24:44] [ENEMY] [Enemy7] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:24:44] [ENEMY] [Enemy8] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:24:44] [ENEMY] [Enemy9] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:24:44] [ENEMY] [Enemy10] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[11:24:44] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:24:44] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:24:44] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:24:44] [INFO] [LastChance] Found player: Player
+[11:24:44] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:24:44] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:24:44] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:24:44] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:24:44] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:24:44] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:24:44] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:24:44] [INFO] [Player] Ready! Grenades: 1/3
+[11:24:44] [INFO] [ScoreManager] Level started with 10 enemies
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
+[11:24:44] [ENEMY] [Enemy1] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
+[11:24:44] [ENEMY] [Enemy2] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
+[11:24:44] [ENEMY] [Enemy3] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
+[11:24:44] [ENEMY] [Enemy4] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
+[11:24:44] [ENEMY] [Enemy5] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
+[11:24:44] [ENEMY] [Enemy6] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
+[11:24:44] [ENEMY] [Enemy7] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
+[11:24:44] [ENEMY] [Enemy8] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
+[11:24:44] [ENEMY] [Enemy9] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[11:24:44] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
+[11:24:44] [ENEMY] [Enemy10] Registered as sound listener
+[11:24:44] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[11:24:44] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:24:44] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:24:44] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:24:44] [INFO] [LastChance] Found player: Player
+[11:24:44] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:24:44] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:24:44] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:24:45] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[11:24:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=30
+[11:24:45] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
+[11:24:45] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:45] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:24:45] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:24:45] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:24:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1103.027, 1484.32), shooter_id=209480321582, bullet_pos=(43.27657, 821.4265)
+[11:24:46] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[11:24:46] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[11:24:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1103.027, 1484.32), shooter_id=209480321582, bullet_pos=(227.0059, 705.023)
+[11:24:46] [INFO] [Bullet] Using shooter_position, distance=1172.48327636719
+[11:24:46] [INFO] [Bullet] Distance to wall: 1172.48327636719 (79.8365422944752% of viewport)
+[11:24:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1073.222, 1462.644), shooter_id=209480321582, bullet_pos=(40.73291, 758.0391)
+[11:24:46] [INFO] [Bullet] Using shooter_position, distance=1250.00061035156
+[11:24:46] [INFO] [Bullet] Distance to wall: 1250.00061035156 (85.1148401072795% of viewport)
+[11:24:46] [INFO] [Bullet] Distance-based penetration chance: 47.3660198748406%
+[11:24:46] [INFO] [Bullet] Penetration failed (distance roll)
+[11:24:46] [INFO] [LastChance] Threat detected: Bullet
+[11:24:46] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:24:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:24:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1044.267, 1439.819), shooter_id=209480321582, bullet_pos=(40.45655, 694.9264)
+[11:24:46] [INFO] [Bullet] Using shooter_position, distance=1249.99975585938
+[11:24:46] [INFO] [Bullet] Distance to wall: 1249.99975585938 (85.1147819233352% of viewport)
+[11:24:46] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[11:24:46] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[11:24:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1044.267, 1439.819), shooter_id=209480321582, bullet_pos=(508.3734, 366.511)
+[11:24:46] [INFO] [Bullet] Using shooter_position, distance=1199.65454101563
+[11:24:46] [INFO] [Bullet] Distance to wall: 1199.65454101563 (81.6866836679373% of viewport)
+[11:24:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1044.267, 1439.819), shooter_id=209480321582, bullet_pos=(174.5101, 55.08746)
+[11:24:46] [INFO] [Bullet] Using shooter_position, distance=1635.22387695313
+[11:24:46] [INFO] [Bullet] Distance to wall: 1635.22387695313 (111.345400693305% of viewport)
+[11:24:46] [INFO] [Bullet] Distance-based penetration chance: 27.7309198613389%
+[11:24:46] [INFO] [Bullet] Penetration failed (distance roll)
+[11:24:49] [ENEMY] [Enemy10] FLANKING started: target=(419.0047, 1066.618), side=right, pos=(953.4262, 1416.483)
+[11:24:49] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:50] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:51] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:51] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:24:51] [INFO] ------------------------------------------------------------
+[11:24:51] [INFO] GAME LOG ENDED: 2026-01-22T11:24:51
+[11:24:51] [INFO] ============================================================
diff --git a/docs/case-studies/issue-217/logs/game_log_20260122_114716.txt b/docs/case-studies/issue-217/logs/game_log_20260122_114716.txt
new file mode 100644
index 00000000..afc4af6d
--- /dev/null
+++ b/docs/case-studies/issue-217/logs/game_log_20260122_114716.txt
@@ -0,0 +1,5904 @@
+[11:47:16] [INFO] ============================================================
+[11:47:16] [INFO] GAME LOG STARTED
+[11:47:16] [INFO] ============================================================
+[11:47:16] [INFO] Timestamp: 2026-01-22T11:47:16
+[11:47:16] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_114716.txt
+[11:47:16] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[11:47:16] [INFO] OS: Windows
+[11:47:16] [INFO] Debug build: false
+[11:47:16] [INFO] Engine version: 4.3-stable (official)
+[11:47:16] [INFO] Project: Godot Top-Down Template
+[11:47:16] [INFO] ------------------------------------------------------------
+[11:47:16] [INFO] [GameManager] GameManager ready
+[11:47:16] [INFO] [ScoreManager] ScoreManager ready
+[11:47:16] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[11:47:16] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:47:16] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[11:47:16] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[11:47:16] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[11:47:16] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[11:47:16] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[11:47:16] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[11:47:16] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:47:16] [INFO] [LastChance] Last chance shader loaded successfully
+[11:47:16] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[11:47:16] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[11:47:16] [INFO] [LastChance]   Sepia intensity: 0.70
+[11:47:16] [INFO] [LastChance]   Brightness: 0.60
+[11:47:16] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[11:47:16] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[11:47:16] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:47:16] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:47:16] [INFO] [Player] Ready! Grenades: 1/3
+[11:47:16] [INFO] [ScoreManager] Level started with 10 enemies
+[11:47:16] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[11:47:16] [ENEMY] [Enemy1] Registered as sound listener
+[11:47:16] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[11:47:16] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[11:47:16] [ENEMY] [Enemy2] Registered as sound listener
+[11:47:16] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[11:47:16] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[11:47:16] [ENEMY] [Enemy3] Registered as sound listener
+[11:47:16] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[11:47:16] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[11:47:16] [ENEMY] [Enemy4] Registered as sound listener
+[11:47:16] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[11:47:16] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[11:47:16] [ENEMY] [Enemy5] Registered as sound listener
+[11:47:16] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[11:47:16] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[11:47:16] [ENEMY] [Enemy6] Registered as sound listener
+[11:47:16] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[11:47:16] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[11:47:16] [ENEMY] [Enemy7] Registered as sound listener
+[11:47:16] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 3, behavior: PATROL, player_found: yes
+[11:47:16] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[11:47:16] [ENEMY] [Enemy8] Registered as sound listener
+[11:47:16] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[11:47:16] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[11:47:16] [ENEMY] [Enemy9] Registered as sound listener
+[11:47:16] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[11:47:16] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[11:47:16] [ENEMY] [Enemy10] Registered as sound listener
+[11:47:16] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[11:47:16] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:47:16] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:47:16] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:47:16] [INFO] [LastChance] Found player: Player
+[11:47:16] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:47:16] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:47:16] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:47:18] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:18] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:47:19] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[11:47:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:19] [ENEMY] [Enemy2] Heard gunshot at (689.5667, 752.2189), source_type=1, intensity=0.02, distance=353
+[11:47:19] [ENEMY] [Enemy4] Heard gunshot at (689.5667, 752.2189), source_type=1, intensity=0.07, distance=184
+[11:47:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:19] [INFO] [LastChance] Threat detected: Bullet
+[11:47:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:19] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[11:47:19] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[11:47:19] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:19] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:19] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:19] [INFO] [LastChance] Threat detected: Bullet
+[11:47:19] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:47:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:19] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:19] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:19] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:19] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:47:19] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:47:19] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:47:19] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:20] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:20] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:20] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:20] [INFO] [LastChance] Threat detected: Bullet
+[11:47:20] [INFO] [LastChance] Triggering last chance effect!
+[11:47:20] [INFO] [LastChance] Starting last chance effect:
+[11:47:20] [INFO] [LastChance]   - Time will be frozen (except player)
+[11:47:20] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[11:47:20] [INFO] [LastChance]   - Sepia intensity: 0.70
+[11:47:20] [INFO] [LastChance]   - Brightness: 0.60
+[11:47:20] [INFO] [LastChance] Pushed bullet Bullet from distance 129.8 to 200.0
+[11:47:20] [INFO] [LastChance] Pushed 1 threatening bullets away from player
+[11:47:20] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[11:47:20] [INFO] [LastChance] Skipping player node: Player
+[11:47:20] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[11:47:20] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[11:47:20] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:47:20] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:47:20] [INFO] [LastChance] Ending last chance effect
+[11:47:20] [INFO] [LastChance] All process modes restored
+[11:47:20] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:47:20] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:47:20] [INFO] [Player] Ready! Grenades: 1/3
+[11:47:20] [INFO] [ScoreManager] Level started with 10 enemies
+[11:47:20] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:47:20] [ENEMY] [Enemy1] Registered as sound listener
+[11:47:20] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[11:47:20] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:47:20] [ENEMY] [Enemy2] Registered as sound listener
+[11:47:20] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[11:47:20] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:47:20] [ENEMY] [Enemy3] Registered as sound listener
+[11:47:20] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[11:47:20] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:47:20] [ENEMY] [Enemy4] Registered as sound listener
+[11:47:20] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[11:47:20] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:47:20] [ENEMY] [Enemy5] Registered as sound listener
+[11:47:20] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[11:47:20] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:47:20] [ENEMY] [Enemy6] Registered as sound listener
+[11:47:20] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[11:47:20] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:47:20] [ENEMY] [Enemy7] Registered as sound listener
+[11:47:20] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[11:47:20] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:47:20] [ENEMY] [Enemy8] Registered as sound listener
+[11:47:20] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[11:47:20] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:47:20] [ENEMY] [Enemy9] Registered as sound listener
+[11:47:20] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[11:47:20] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:47:20] [ENEMY] [Enemy10] Registered as sound listener
+[11:47:20] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[11:47:20] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:47:20] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:47:20] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:47:20] [INFO] [LastChance] Found player: Player
+[11:47:20] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:47:20] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:47:20] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:47:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=20
+[11:47:21] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[11:47:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:21] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:47:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=83500206725, bullet_pos=(35.36759, 928.0717)
+[11:47:21] [INFO] [Bullet] Using shooter_position, distance=1291.66613769531
+[11:47:21] [INFO] [Bullet] Distance to wall: 1291.66613769531 (87.9519224802644% of viewport)
+[11:47:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=83500206725, bullet_pos=(58.62791, 897.98)
+[11:47:21] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[11:47:21] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[11:47:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=83500206725, bullet_pos=(52.86331, 834.4136)
+[11:47:21] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:47:21] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:47:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=83500206725, bullet_pos=(314.4589, 699.5751)
+[11:47:21] [INFO] [Bullet] Using shooter_position, distance=1167.1435546875
+[11:47:21] [INFO] [Bullet] Distance to wall: 1167.1435546875 (79.4729508264229% of viewport)
+[11:47:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=83500206725, bullet_pos=(223.3913, 699.4081)
+[11:47:21] [INFO] [Bullet] Using shooter_position, distance=1195.94567871094
+[11:47:21] [INFO] [Bullet] Distance to wall: 1195.94567871094 (81.4341404136148% of viewport)
+[11:47:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=83500206725, bullet_pos=(49.53117, 770.8614)
+[11:47:22] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:47:22] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:47:22] [INFO] [Bullet] Distance-based penetration chance: 47.3661071507571%
+[11:47:22] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=83500206725, bullet_pos=(503.2841, 803.902)
+[11:47:22] [INFO] [Bullet] Using shooter_position, distance=961.646362304688
+[11:47:22] [INFO] [Bullet] Distance to wall: 961.646362304688 (65.4802691210607% of viewport)
+[11:47:22] [INFO] [LastChance] Threat detected: @Area2D@539
+[11:47:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:47:22] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:47:22] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:47:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=83500206725, bullet_pos=(48.50871, 707.5523)
+[11:47:22] [INFO] [Bullet] Using shooter_position, distance=1250.00024414063
+[11:47:22] [INFO] [Bullet] Distance to wall: 1250.00024414063 (85.1148151713033% of viewport)
+[11:47:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[11:47:22] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[11:47:22] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[11:47:22] [INFO] [LastChance] Player died
+[11:47:22] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[11:47:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=83500206725, bullet_pos=(306.8328, 458.014)
+[11:47:22] [INFO] [Bullet] Using shooter_position, distance=1244.83898925781
+[11:47:22] [INFO] [Bullet] Distance to wall: 1244.83898925781 (84.7633758356218% of viewport)
+[11:47:22] [ENEMY] [Enemy2] Hit taken, health: 2/3
+[11:47:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:22] [ENEMY] [Enemy2] Heard gunshot at (689.5667, 752.2189), source_type=1, intensity=0.02, distance=353
+[11:47:22] [ENEMY] [Enemy4] Heard gunshot at (689.5667, 752.2189), source_type=1, intensity=0.07, distance=184
+[11:47:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:22] [INFO] [LastChance] Threat detected: Bullet
+[11:47:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:22] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[11:47:22] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[11:47:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:22] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[11:47:22] [INFO] [LastChance] Threat detected: Bullet
+[11:47:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:22] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:47:22] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:47:22] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:47:22] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:47:22] [INFO] [Player] Ready! Grenades: 1/3
+[11:47:22] [INFO] [ScoreManager] Level started with 10 enemies
+[11:47:22] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:47:22] [ENEMY] [Enemy1] Registered as sound listener
+[11:47:22] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[11:47:22] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:47:22] [ENEMY] [Enemy2] Registered as sound listener
+[11:47:22] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[11:47:22] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:47:22] [ENEMY] [Enemy3] Registered as sound listener
+[11:47:22] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[11:47:22] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:47:22] [ENEMY] [Enemy4] Registered as sound listener
+[11:47:22] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[11:47:22] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:47:22] [ENEMY] [Enemy5] Registered as sound listener
+[11:47:22] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[11:47:22] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:47:22] [ENEMY] [Enemy6] Registered as sound listener
+[11:47:22] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[11:47:22] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:47:22] [ENEMY] [Enemy7] Registered as sound listener
+[11:47:22] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[11:47:22] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:47:22] [ENEMY] [Enemy8] Registered as sound listener
+[11:47:22] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[11:47:22] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:47:22] [ENEMY] [Enemy9] Registered as sound listener
+[11:47:22] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[11:47:22] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:47:22] [ENEMY] [Enemy10] Registered as sound listener
+[11:47:22] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[11:47:22] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:47:22] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:47:22] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:47:22] [INFO] [LastChance] Found player: Player
+[11:47:22] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:47:22] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:47:22] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:47:23] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:47:23] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:47:23] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:47:23] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:47:23] [INFO] [Player] Ready! Grenades: 1/3
+[11:47:23] [INFO] [ScoreManager] Level started with 10 enemies
+[11:47:23] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
+[11:47:23] [ENEMY] [Enemy1] Registered as sound listener
+[11:47:23] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[11:47:23] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
+[11:47:23] [ENEMY] [Enemy2] Registered as sound listener
+[11:47:23] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[11:47:23] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
+[11:47:23] [ENEMY] [Enemy3] Registered as sound listener
+[11:47:23] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[11:47:23] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
+[11:47:23] [ENEMY] [Enemy4] Registered as sound listener
+[11:47:23] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[11:47:23] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
+[11:47:23] [ENEMY] [Enemy5] Registered as sound listener
+[11:47:23] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[11:47:23] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
+[11:47:23] [ENEMY] [Enemy6] Registered as sound listener
+[11:47:23] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[11:47:23] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
+[11:47:23] [ENEMY] [Enemy7] Registered as sound listener
+[11:47:23] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[11:47:23] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
+[11:47:23] [ENEMY] [Enemy8] Registered as sound listener
+[11:47:23] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[11:47:23] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
+[11:47:23] [ENEMY] [Enemy9] Registered as sound listener
+[11:47:23] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[11:47:23] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
+[11:47:23] [ENEMY] [Enemy10] Registered as sound listener
+[11:47:23] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[11:47:23] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:47:23] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:47:23] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:47:23] [INFO] [LastChance] Found player: Player
+[11:47:23] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:47:23] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:47:23] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:47:23] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=30
+[11:47:23] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
+[11:47:23] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:23] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:23] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:24] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:24] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:24] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:47:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=124805712567, bullet_pos=(35.36759, 928.0717)
+[11:47:24] [INFO] [Bullet] Using shooter_position, distance=1291.66613769531
+[11:47:24] [INFO] [Bullet] Distance to wall: 1291.66613769531 (87.9519224802644% of viewport)
+[11:47:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=124805712567, bullet_pos=(58.62791, 897.98)
+[11:47:24] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[11:47:24] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[11:47:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=124805712567, bullet_pos=(52.86331, 834.4136)
+[11:47:24] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:47:24] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:47:24] [INFO] [Bullet] Distance-based penetration chance: 47.3661071507571%
+[11:47:24] [INFO] [Bullet] Starting wall penetration at (52.86331, 834.4136)
+[11:47:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.9693183898926
+[11:47:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:24] [INFO] [Bullet] Exiting penetration at (13.4412, 809.4401) after traveling 41.6666679382324 pixels through wall
+[11:47:24] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=124805712567, bullet_pos=(321.2828, 708.7012)
+[11:47:24] [INFO] [Bullet] Using shooter_position, distance=1155.86779785156
+[11:47:24] [INFO] [Bullet] Distance to wall: 1155.86779785156 (78.7051638091754% of viewport)
+[11:47:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=124805712567, bullet_pos=(49.53117, 770.8614)
+[11:47:24] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:47:24] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:47:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=124805712567, bullet_pos=(502.4942, 825.7546)
+[11:47:24] [INFO] [Bullet] Using shooter_position, distance=945.923278808594
+[11:47:24] [INFO] [Bullet] Distance to wall: 945.923278808594 (64.4096554536105% of viewport)
+[11:47:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=124805712567, bullet_pos=(138.2725, 703.7678)
+[11:47:24] [INFO] [Bullet] Using shooter_position, distance=1219.70166015625
+[11:47:24] [INFO] [Bullet] Distance to wall: 1219.70166015625 (83.0517288736241% of viewport)
+[11:47:24] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:47:24] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:47:24] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:47:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=124805712567, bullet_pos=(48.50871, 707.5523)
+[11:47:24] [INFO] [Bullet] Using shooter_position, distance=1250.00024414063
+[11:47:24] [INFO] [Bullet] Distance to wall: 1250.00024414063 (85.1148151713033% of viewport)
+[11:47:24] [INFO] [Bullet] Distance-based penetration chance: 47.3660489668128%
+[11:47:24] [INFO] [Bullet] Starting wall penetration at (48.50871, 707.5523)
+[11:47:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.022705078125
+[11:47:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:24] [INFO] [Bullet] Exiting penetration at (11.19001, 679.5328) after traveling 41.6666679382324 pixels through wall
+[11:47:24] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:24] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[11:47:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:24] [ENEMY] [Enemy2] Heard gunshot at (689.5667, 752.2189), source_type=1, intensity=0.02, distance=353
+[11:47:24] [ENEMY] [Enemy4] Heard gunshot at (689.5667, 752.2189), source_type=1, intensity=0.07, distance=184
+[11:47:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:25] [INFO] [LastChance] Threat detected: Bullet
+[11:47:25] [INFO] [LastChance] Triggering last chance effect!
+[11:47:25] [INFO] [LastChance] Starting last chance effect:
+[11:47:25] [INFO] [LastChance]   - Time will be frozen (except player)
+[11:47:25] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[11:47:25] [INFO] [LastChance]   - Sepia intensity: 0.70
+[11:47:25] [INFO] [LastChance]   - Brightness: 0.60
+[11:47:25] [INFO] [LastChance] Pushed bullet Bullet from distance 130.0 to 200.0
+[11:47:25] [INFO] [LastChance] Pushed 1 threatening bullets away from player
+[11:47:25] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[11:47:25] [INFO] [LastChance] Skipping player node: Player
+[11:47:25] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[11:47:25] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[11:47:25] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:47:25] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:47:25] [INFO] [LastChance] Ending last chance effect
+[11:47:25] [INFO] [LastChance] All process modes restored
+[11:47:25] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:47:25] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:47:25] [INFO] [Player] Ready! Grenades: 1/3
+[11:47:25] [INFO] [ScoreManager] Level started with 10 enemies
+[11:47:25] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:47:25] [ENEMY] [Enemy1] Registered as sound listener
+[11:47:25] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[11:47:25] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:47:25] [ENEMY] [Enemy2] Registered as sound listener
+[11:47:25] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[11:47:25] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:47:25] [ENEMY] [Enemy3] Registered as sound listener
+[11:47:25] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[11:47:25] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:47:25] [ENEMY] [Enemy4] Registered as sound listener
+[11:47:25] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[11:47:25] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:47:25] [ENEMY] [Enemy5] Registered as sound listener
+[11:47:25] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[11:47:25] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:47:25] [ENEMY] [Enemy6] Registered as sound listener
+[11:47:25] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[11:47:25] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:47:25] [ENEMY] [Enemy7] Registered as sound listener
+[11:47:25] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[11:47:25] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:47:25] [ENEMY] [Enemy8] Registered as sound listener
+[11:47:25] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[11:47:25] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:47:25] [ENEMY] [Enemy9] Registered as sound listener
+[11:47:25] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[11:47:25] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:47:25] [ENEMY] [Enemy10] Registered as sound listener
+[11:47:25] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[11:47:25] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:47:25] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:47:25] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:47:25] [INFO] [LastChance] Found player: Player
+[11:47:25] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:47:25] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:47:25] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:47:26] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=20
+[11:47:26] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[11:47:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:26] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:47:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=149266893258, bullet_pos=(35.36759, 928.0717)
+[11:47:26] [INFO] [Bullet] Using shooter_position, distance=1291.66613769531
+[11:47:26] [INFO] [Bullet] Distance to wall: 1291.66613769531 (87.9519224802644% of viewport)
+[11:47:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=149266893258, bullet_pos=(58.62791, 897.98)
+[11:47:27] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[11:47:27] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[11:47:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=149266893258, bullet_pos=(323.7392, 713.9631)
+[11:47:27] [INFO] [Bullet] Using shooter_position, distance=1181.46862792969
+[11:47:27] [INFO] [Bullet] Distance to wall: 1181.46862792969 (80.4483714049704% of viewport)
+[11:47:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=149266893258, bullet_pos=(52.86331, 834.4136)
+[11:47:27] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:47:27] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:47:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=149266893258, bullet_pos=(441.54, 702.3317)
+[11:47:27] [INFO] [Bullet] Using shooter_position, distance=1078.83618164063
+[11:47:27] [INFO] [Bullet] Distance to wall: 1078.83618164063 (73.4599394127207% of viewport)
+[11:47:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=149266893258, bullet_pos=(505.3121, 879.6898)
+[11:47:27] [INFO] [Bullet] Using shooter_position, distance=935.713012695313
+[11:47:27] [INFO] [Bullet] Distance to wall: 935.713012695313 (63.7144196589334% of viewport)
+[11:47:27] [INFO] [Bullet] Distance-based penetration chance: 72.3331770645777%
+[11:47:27] [INFO] [Bullet] Starting wall penetration at (505.3121, 879.6898)
+[11:47:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.80239009857178
+[11:47:27] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:27] [INFO] [Bullet] Exiting penetration at (531.2401, 903.355) after traveling 30.1041717529297 pixels through wall
+[11:47:27] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[11:47:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=149266893258, bullet_pos=(49.53117, 770.8614)
+[11:47:27] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:47:27] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:47:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=149266893258, bullet_pos=(309.458, 702.9021)
+[11:47:27] [INFO] [Bullet] Using shooter_position, distance=1131.22827148438
+[11:47:27] [INFO] [Bullet] Distance to wall: 1131.22827148438 (77.0274131507398% of viewport)
+[11:47:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=149266893258, bullet_pos=(133.3897, 697.7566)
+[11:47:27] [INFO] [Bullet] Using shooter_position, distance=1227.29675292969
+[11:47:27] [INFO] [Bullet] Distance to wall: 1227.29675292969 (83.5688927067115% of viewport)
+[11:47:27] [INFO] [Bullet] Distance-based penetration chance: 49.1696251755032%
+[11:47:27] [INFO] [Bullet] Starting wall penetration at (133.3897, 697.7566)
+[11:47:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.5691795349121
+[11:47:27] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:27] [INFO] [Bullet] Exiting penetration at (163.8551, 671.1979) after traveling 35.4166679382324 pixels through wall
+[11:47:27] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[11:47:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=149266893258, bullet_pos=(48.50871, 707.5523)
+[11:47:27] [INFO] [Bullet] Using shooter_position, distance=1250.00024414063
+[11:47:27] [INFO] [Bullet] Distance to wall: 1250.00024414063 (85.1148151713033% of viewport)
+[11:47:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=149266893258, bullet_pos=(500.0481, 803.9688)
+[11:47:27] [INFO] [Bullet] Using shooter_position, distance=927.211975097656
+[11:47:27] [INFO] [Bullet] Distance to wall: 927.211975097656 (63.1355683768792% of viewport)
+[11:47:27] [INFO] [Bullet] Distance-based penetration chance: 73.0085035603076%
+[11:47:27] [INFO] [Bullet] Starting wall penetration at (500.0481, 803.9688)
+[11:47:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=149266893258, bullet_pos=(694.705, 874.2885)
+[11:47:27] [INFO] [Bullet] Using shooter_position, distance=788.048461914063
+[11:47:27] [INFO] [Bullet] Distance to wall: 788.048461914063 (53.6596688650722% of viewport)
+[11:47:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7.99301099777222
+[11:47:27] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:27] [INFO] [Bullet] Exiting penetration at (531.0616, 820.4147) after traveling 30.1041698455811 pixels through wall
+[11:47:27] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[11:47:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=149266893258, bullet_pos=(520.8903, 991.6171)
+[11:47:27] [INFO] [Bullet] Using shooter_position, distance=816.993469238281
+[11:47:27] [INFO] [Bullet] Distance to wall: 816.993469238281 (55.6305876389534% of viewport)
+[11:47:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=149266893258, bullet_pos=(524.8834, 994.6263)
+[11:47:27] [INFO] [Bullet] Using shooter_position, distance=812.003845214844
+[11:47:27] [INFO] [Bullet] Distance to wall: 812.003845214844 (55.290834964088% of viewport)
+[11:47:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=149266893258, bullet_pos=(319.6459, 471.999)
+[11:47:27] [INFO] [Bullet] Using shooter_position, distance=1225.97546386719
+[11:47:27] [INFO] [Bullet] Distance to wall: 1225.97546386719 (83.4789237048096% of viewport)
+[11:47:27] [INFO] [Bullet] Distance-based penetration chance: 49.2745890110555%
+[11:47:27] [INFO] [Bullet] Starting wall penetration at (319.6459, 471.999)
+[11:47:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13.4542970657349
+[11:47:27] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:27] [INFO] [Bullet] Exiting penetration at (350.1567, 445.4924) after traveling 35.4166717529297 pixels through wall
+[11:47:27] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[11:47:29] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:47:29] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[11:47:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(956.3542, 1478.072), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:29] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:29] [INFO] [LastChance] Threat detected: Bullet
+[11:47:29] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:29] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[11:47:29] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[11:47:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(956.3542, 1478.072), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:29] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:29] [INFO] [LastChance] Threat detected: Bullet
+[11:47:29] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
+[11:47:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:30] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[11:47:30] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[11:47:30] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[11:47:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(956.3542, 1478.072), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:30] [INFO] [LastChance] Threat detected: Bullet
+[11:47:30] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:47:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:30] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:47:30] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:47:30] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:47:30] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:47:30] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:47:30] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:47:30] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:47:30] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:47:30] [INFO] [Player] Ready! Grenades: 1/3
+[11:47:30] [INFO] [ScoreManager] Level started with 10 enemies
+[11:47:30] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:47:30] [ENEMY] [Enemy1] Registered as sound listener
+[11:47:30] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[11:47:30] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:47:30] [ENEMY] [Enemy2] Registered as sound listener
+[11:47:30] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[11:47:30] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:47:30] [ENEMY] [Enemy3] Registered as sound listener
+[11:47:30] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[11:47:30] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:47:30] [ENEMY] [Enemy4] Registered as sound listener
+[11:47:30] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[11:47:30] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:47:30] [ENEMY] [Enemy5] Registered as sound listener
+[11:47:30] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[11:47:30] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:47:30] [ENEMY] [Enemy6] Registered as sound listener
+[11:47:30] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[11:47:30] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:47:30] [ENEMY] [Enemy7] Registered as sound listener
+[11:47:30] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[11:47:30] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:47:30] [ENEMY] [Enemy8] Registered as sound listener
+[11:47:30] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[11:47:30] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:47:30] [ENEMY] [Enemy9] Registered as sound listener
+[11:47:30] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[11:47:30] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:47:30] [ENEMY] [Enemy10] Registered as sound listener
+[11:47:30] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[11:47:30] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:47:30] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:47:30] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:47:30] [INFO] [LastChance] Found player: Player
+[11:47:30] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:47:30] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:47:30] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:47:31] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=20
+[11:47:31] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[11:47:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:31] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:47:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=186394872732, bullet_pos=(35.36759, 928.0717)
+[11:47:31] [INFO] [Bullet] Using shooter_position, distance=1291.66613769531
+[11:47:31] [INFO] [Bullet] Distance to wall: 1291.66613769531 (87.9519224802644% of viewport)
+[11:47:31] [INFO] [Bullet] Distance-based penetration chance: 44.0560904396916%
+[11:47:31] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=186394872732, bullet_pos=(58.62791, 897.98)
+[11:47:31] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[11:47:31] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[11:47:31] [INFO] [Bullet] Distance-based penetration chance: 47.366097453433%
+[11:47:31] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=186394872732, bullet_pos=(52.86331, 834.4136)
+[11:47:31] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:47:31] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:47:31] [INFO] [Bullet] Distance-based penetration chance: 47.3661071507571%
+[11:47:31] [INFO] [Bullet] Starting wall penetration at (52.86331, 834.4136)
+[11:47:31] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.9693183898926
+[11:47:31] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:31] [INFO] [Bullet] Exiting penetration at (13.4412, 809.4401) after traveling 41.6666679382324 pixels through wall
+[11:47:31] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=186394872732, bullet_pos=(49.53117, 770.8614)
+[11:47:32] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:47:32] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:47:32] [INFO] [Bullet] Distance-based penetration chance: 47.3661071507571%
+[11:47:32] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=186394872732, bullet_pos=(48.50871, 707.5523)
+[11:47:32] [INFO] [Bullet] Using shooter_position, distance=1250.00024414063
+[11:47:32] [INFO] [Bullet] Distance to wall: 1250.00024414063 (85.1148151713033% of viewport)
+[11:47:32] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[11:47:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=186394872732, bullet_pos=(498.0219, 354.3658)
+[11:47:32] [INFO] [Bullet] Using shooter_position, distance=1233.19860839844
+[11:47:32] [INFO] [Bullet] Distance to wall: 1233.19860839844 (83.970760898134% of viewport)
+[11:47:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:32] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
+[11:47:32] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
+[11:47:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:32] [INFO] [LastChance] Threat detected: Bullet
+[11:47:32] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:32] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[11:47:32] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:32] [INFO] [LastChance] Threat detected: @Area2D@1596
+[11:47:32] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:32] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[11:47:32] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:32] [INFO] [LastChance] Threat detected: Bullet
+[11:47:32] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:32] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[11:47:32] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:32] [INFO] [LastChance] Threat detected: @Area2D@1597
+[11:47:32] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:32] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[11:47:32] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[11:47:32] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:32] [INFO] [LastChance] Threat detected: @Area2D@1598
+[11:47:32] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:32] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[11:47:32] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[11:47:32] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:32] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[11:47:32] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[11:47:32] [INFO] [LastChance] Threat detected: @Area2D@1599
+[11:47:32] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:47:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(395.2346, 547.605), source=ENEMY (Enemy2), range=1469, listeners=10
+[11:47:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:47:32] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:32] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:47:32] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:47:32] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:47:32] [INFO] [LastChance] Threat detected: @Area2D@1601
+[11:47:32] [INFO] [LastChance] Triggering last chance effect!
+[11:47:32] [INFO] [LastChance] Starting last chance effect:
+[11:47:32] [INFO] [LastChance]   - Time will be frozen (except player)
+[11:47:32] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[11:47:32] [INFO] [LastChance]   - Sepia intensity: 0.70
+[11:47:32] [INFO] [LastChance]   - Brightness: 0.60
+[11:47:32] [INFO] [LastChance] Pushed bullet @Area2D@1597 from distance 11.9 to 200.0
+[11:47:32] [INFO] [LastChance] Pushed bullet @Area2D@1598 from distance 33.0 to 200.0
+[11:47:32] [INFO] [LastChance] Pushed bullet @Area2D@1599 from distance 74.1 to 200.0
+[11:47:32] [INFO] [LastChance] Pushed bullet @Area2D@1601 from distance 115.6 to 200.0
+[11:47:32] [INFO] [LastChance] Pushed 4 threatening bullets away from player
+[11:47:32] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[11:47:32] [INFO] [LastChance] Skipping player node: Player
+[11:47:32] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[11:47:32] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[11:47:33] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:47:33] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:47:33] [INFO] [LastChance] Ending last chance effect
+[11:47:33] [INFO] [LastChance] All process modes restored
+[11:47:33] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:47:33] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:47:33] [INFO] [Player] Ready! Grenades: 1/3
+[11:47:33] [INFO] [ScoreManager] Level started with 10 enemies
+[11:47:33] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:47:33] [ENEMY] [Enemy1] Registered as sound listener
+[11:47:33] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[11:47:33] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:47:33] [ENEMY] [Enemy2] Registered as sound listener
+[11:47:33] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[11:47:33] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:47:33] [ENEMY] [Enemy3] Registered as sound listener
+[11:47:33] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[11:47:33] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:47:33] [ENEMY] [Enemy4] Registered as sound listener
+[11:47:33] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[11:47:33] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:47:33] [ENEMY] [Enemy5] Registered as sound listener
+[11:47:33] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[11:47:33] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:47:33] [ENEMY] [Enemy6] Registered as sound listener
+[11:47:33] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[11:47:33] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:47:33] [ENEMY] [Enemy7] Registered as sound listener
+[11:47:33] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[11:47:33] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:47:33] [ENEMY] [Enemy8] Registered as sound listener
+[11:47:33] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[11:47:33] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:47:33] [ENEMY] [Enemy9] Registered as sound listener
+[11:47:33] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[11:47:33] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:47:33] [ENEMY] [Enemy10] Registered as sound listener
+[11:47:33] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[11:47:33] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:47:33] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:47:33] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:47:33] [INFO] [LastChance] Found player: Player
+[11:47:33] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:47:33] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:47:33] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:47:34] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[11:47:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1135.48, 1565.077), source=ENEMY (Enemy10), range=1469, listeners=20
+[11:47:34] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[11:47:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1114.657, 1548.423), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1110.559, 1545.01), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1105.281, 1549.744), shooter_id=221996125252, bullet_pos=(907.0021, 1397.476)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=250
+[11:47:35] [INFO] [Bullet] Distance to wall: 250 (17.0229597094639% of viewport)
+[11:47:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:35] [INFO] [Bullet] Starting wall penetration at (907.0021, 1397.476)
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1106.461, 1541.597), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:47:35] [INFO] [Bullet] Exiting penetration at (869.99, 1369.053) after traveling 41.6666679382324 pixels through wall
+[11:47:35] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1102.362, 1538.183), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1098.264, 1534.77), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1094.166, 1531.357), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1090.068, 1527.944), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1085.97, 1524.531), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.872, 1521.118), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1855
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1077.774, 1517.705), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1856
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1073.675, 1514.292), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [LastChance] Threat detected: Bullet
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1069.577, 1510.879), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1857
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1065.479, 1507.466), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1858
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1061.381, 1504.053), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1859
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1057.283, 1500.64), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1860
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1053.185, 1497.226), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1861
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1049.087, 1493.813), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1862
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1044.988, 1490.4), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1863
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.89, 1486.987), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1864
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1036.792, 1483.574), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1865
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1032.694, 1480.161), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.314, 1523.664), shooter_id=221996125252, bullet_pos=(515.7464, 1026.53)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=749.999755859375
+[11:47:35] [INFO] [Bullet] Distance to wall: 749.999755859375 (51.0688625044075% of viewport)
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1866
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1028.596, 1476.748), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1073.391, 1519.875), shooter_id=221996125252, bullet_pos=(516.9246, 1017.038)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=750.000305175781
+[11:47:35] [INFO] [Bullet] Distance to wall: 750.000305175781 (51.0688999083717% of viewport)
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1867
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1024.498, 1473.335), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1065.525, 1512.364), shooter_id=221996125252, bullet_pos=(548.8279, 1027.843)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=708.333129882813
+[11:47:35] [INFO] [Bullet] Distance to wall: 708.333129882813 (48.2317053234942% of viewport)
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1069.461, 1516.107), shooter_id=221996125252, bullet_pos=(517.8278, 1007.972)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=750.000610351563
+[11:47:35] [INFO] [Bullet] Distance to wall: 750.000610351563 (51.0689206883518% of viewport)
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1069.461, 1516.107), shooter_id=221996125252, bullet_pos=(513.7962, 1010.929)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=750.978210449219
+[11:47:35] [INFO] [Bullet] Distance to wall: 750.978210449219 (51.1354872766493% of viewport)
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1868
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1020.399, 1469.922), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1061.579, 1508.647), shooter_id=221996125252, bullet_pos=(548.8826, 1019.895)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=708.333618164063
+[11:47:35] [INFO] [Bullet] Distance to wall: 708.333618164063 (48.2317385714624% of viewport)
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1869
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1016.301, 1466.509), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1057.624, 1504.956), shooter_id=221996125252, bullet_pos=(548.6195, 1012.361)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=708.333312988281
+[11:47:35] [INFO] [Bullet] Distance to wall: 708.333312988281 (48.2317177914822% of viewport)
+[11:47:35] [INFO] [Bullet] Distance-based penetration chance: 90.3963292432707%
+[11:47:35] [INFO] [Bullet] Starting wall penetration at (548.6195, 1012.361)
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1870
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1012.203, 1463.096), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:47:35] [INFO] [Bullet] Exiting penetration at (515.0851, 979.9073) after traveling 41.6666679382324 pixels through wall
+[11:47:35] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1053.659, 1501.292), shooter_id=221996125252, bullet_pos=(548.0248, 1005.237)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=708.333129882813
+[11:47:35] [INFO] [Bullet] Distance to wall: 708.333129882813 (48.2317053234942% of viewport)
+[11:47:35] [INFO] [Bullet] Distance-based penetration chance: 90.3963437892568%
+[11:47:35] [INFO] [Bullet] Starting wall penetration at (548.0248, 1005.237)
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1871
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1008.105, 1459.682), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.1888618469238
+[11:47:35] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:35] [INFO] [Bullet] Exiting penetration at (514.7125, 972.5555) after traveling 41.6666679382324 pixels through wall
+[11:47:35] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1053.659, 1501.292), shooter_id=221996125252, bullet_pos=(514.7125, 972.5555)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=754.999755859375
+[11:47:35] [INFO] [Bullet] Distance to wall: 754.999755859375 (51.4093216985967% of viewport)
+[11:47:35] [INFO] [Bullet] Distance-based penetration chance: 86.6891246849705%
+[11:47:35] [INFO] [Bullet] Starting wall penetration at (514.7125, 972.5555)
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1872
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1004.007, 1456.269), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.056245803833
+[11:47:35] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:35] [INFO] [Bullet] Exiting penetration at (481.4001, 939.8743) after traveling 41.6666679382324 pixels through wall
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1873
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(999.9084, 1452.856), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1875
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1877
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1881
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1081.243, 1527.451), shooter_id=221996125252, bullet_pos=(136.9421, 708.4304)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=1249.99938964844
+[11:47:35] [INFO] [Bullet] Distance to wall: 1249.99938964844 (85.114756987359% of viewport)
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1085.179, 1531.236), shooter_id=221996125252, bullet_pos=(100.9341, 694.7776)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=1291.666015625
+[11:47:35] [INFO] [Bullet] Distance to wall: 1291.666015625 (87.9519141682723% of viewport)
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1883
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1885
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1085.179, 1531.236), shooter_id=221996125252, bullet_pos=(49.18254, 750.2075)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=1297.41845703125
+[11:47:35] [INFO] [Bullet] Distance to wall: 1297.41845703125 (88.3436084814309% of viewport)
+[11:47:35] [INFO] [Bullet] Distance-based penetration chance: 43.5991234383306%
+[11:47:35] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1887
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1081.243, 1527.451), shooter_id=221996125252, bullet_pos=(54.39808, 783.0163)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=1268.30334472656
+[11:47:35] [INFO] [Bullet] Distance to wall: 1268.30334472656 (86.3611069466341% of viewport)
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1889
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [INFO] [LastChance] Threat detected: @Area2D@1890
+[11:47:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.314, 1523.664), shooter_id=221996125252, bullet_pos=(52.81275, 1361.932)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=1037.18811035156
+[11:47:35] [INFO] [Bullet] Distance to wall: 1037.18811035156 (70.6240456545984% of viewport)
+[11:47:35] [INFO] [Bullet] Distance-based penetration chance: 64.2719467363019%
+[11:47:35] [INFO] [Bullet] Starting wall penetration at (52.81275, 1361.932)
+[11:47:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 14.7154922485352
+[11:47:35] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:35] [INFO] [Bullet] Exiting penetration at (20.08348, 1385.645) after traveling 35.4166679382324 pixels through wall
+[11:47:35] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1073.391, 1519.875), shooter_id=221996125252, bullet_pos=(63.37647, 1420.577)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=1014.88385009766
+[11:47:35] [INFO] [Bullet] Distance to wall: 1014.88385009766 (69.1053075599918% of viewport)
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1069.461, 1516.107), shooter_id=221996125252, bullet_pos=(67.27551, 750.7924)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=1260.98498535156
+[11:47:35] [INFO] [Bullet] Distance to wall: 1260.98498535156 (85.8627863995141% of viewport)
+[11:47:35] [INFO] [Bullet] Distance-based penetration chance: 46.4934158672336%
+[11:47:35] [INFO] [Bullet] Starting wall penetration at (67.27551, 750.7924)
+[11:47:35] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:47:35] [INFO] [Bullet] Exiting penetration at (36.94342, 733.1213) after traveling 30.1041679382324 pixels through wall
+[11:47:35] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1065.525, 1512.364), shooter_id=221996125252, bullet_pos=(44.39632, 1480.745)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=1021.61767578125
+[11:47:35] [INFO] [Bullet] Distance to wall: 1021.61767578125 (69.5638261332013% of viewport)
+[11:47:35] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1061.579, 1508.647), shooter_id=221996125252, bullet_pos=(49.00146, 1477.813)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=1013.04718017578
+[11:47:35] [INFO] [Bullet] Distance to wall: 1013.04718017578 (68.9802453276732% of viewport)
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1065.525, 1512.364), shooter_id=221996125252, bullet_pos=(151.4199, 1593.584)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=917.705810546875
+[11:47:35] [INFO] [Bullet] Distance to wall: 917.705810546875 (62.4882761523213% of viewport)
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1061.579, 1508.647), shooter_id=221996125252, bullet_pos=(197.4835, 1589.213)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=867.843566894531
+[11:47:35] [INFO] [Bullet] Distance to wall: 867.843566894531 (59.093064293452% of viewport)
+[11:47:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1073.391, 1519.875), shooter_id=221996125252, bullet_pos=(321.6754, 1584.722)
+[11:47:35] [INFO] [Bullet] Using shooter_position, distance=754.507202148438
+[11:47:35] [INFO] [Bullet] Distance to wall: 754.507202148438 (51.3757828106926% of viewport)
+[11:47:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1065.525, 1512.364), shooter_id=221996125252, bullet_pos=(331.5928, 1404.907)
+[11:47:36] [INFO] [Bullet] Using shooter_position, distance=741.756530761719
+[11:47:36] [INFO] [Bullet] Distance to wall: 741.756530761719 (50.5075661495537% of viewport)
+[11:47:36] [INFO] [Bullet] Distance-based penetration chance: 87.7411728255207%
+[11:47:36] [INFO] [Bullet] Starting wall penetration at (331.5928, 1404.907)
+[11:47:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7.21061563491821
+[11:47:36] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:36] [INFO] [Bullet] Exiting penetration at (352.7179, 1382.785) after traveling 25.5885429382324 pixels through wall
+[11:47:36] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
+[11:47:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1061.579, 1508.647), shooter_id=221996125252, bullet_pos=(502.4905, 1391.946)
+[11:47:36] [INFO] [Bullet] Using shooter_position, distance=571.138671875
+[11:47:36] [INFO] [Bullet] Distance to wall: 571.138671875 (38.8898823993793% of viewport)
+[11:47:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:36] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[11:47:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1073.391, 1519.875), shooter_id=221996125252, bullet_pos=(695.142, 1405.099)
+[11:47:36] [INFO] [Bullet] Using shooter_position, distance=395.279388427734
+[11:47:36] [INFO] [Bullet] Distance to wall: 395.279388427734 (26.9153004127473% of viewport)
+[11:47:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1073.391, 1519.875), shooter_id=221996125252, bullet_pos=(898.7761, 1539.98)
+[11:47:36] [INFO] [Bullet] Using shooter_position, distance=175.768310546875
+[11:47:36] [INFO] [Bullet] Distance to wall: 175.768310546875 (11.9683874745599% of viewport)
+[11:47:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:36] [INFO] [Bullet] Starting wall penetration at (898.7761, 1539.98)
+[11:47:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10.8886127471924
+[11:47:36] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:36] [INFO] [Bullet] Exiting penetration at (921.0779, 1554.752) after traveling 21.7502613067627 pixels through wall
+[11:47:36] [INFO] [Bullet] Damage multiplier after penetration: 0.05625
+[11:47:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1061.579, 1508.647), shooter_id=221996125252, bullet_pos=(52.22359, 1118.094)
+[11:47:36] [INFO] [Bullet] Using shooter_position, distance=1082.28015136719
+[11:47:36] [INFO] [Bullet] Distance to wall: 1082.28015136719 (73.6944456443043% of viewport)
+[11:47:36] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:47:37] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[11:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3804, 753.4667), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:37] [ENEMY] [Enemy2] Heard gunshot at (684.3804, 753.4667), source_type=1, intensity=0.02, distance=350
+[11:47:37] [ENEMY] [Enemy4] Heard gunshot at (684.3804, 753.4667), source_type=1, intensity=0.07, distance=187
+[11:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:37] [INFO] [LastChance] Threat detected: Bullet
+[11:47:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3804, 753.4667), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3804, 753.4667), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:37] [INFO] [LastChance] Threat detected: @Area2D@1908
+[11:47:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:37] [INFO] [LastChance] Threat detected: @Area2D@1909
+[11:47:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3804, 753.4667), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:37] [INFO] [LastChance] Threat detected: @Area2D@1910
+[11:47:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3804, 753.4667), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:37] [INFO] [LastChance] Threat detected: @Area2D@1911
+[11:47:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3804, 753.4667), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:37] [INFO] [LastChance] Threat detected: @Area2D@1912
+[11:47:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3804, 753.4667), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:37] [INFO] [LastChance] Threat detected: @Area2D@1913
+[11:47:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3804, 753.4667), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:37] [INFO] [LastChance] Threat detected: @Area2D@1914
+[11:47:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:37] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[11:47:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3804, 753.4667), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:37] [INFO] [LastChance] Threat detected: @Area2D@1915
+[11:47:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3804, 753.4667), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:37] [INFO] [LastChance] Threat detected: @Area2D@1916
+[11:47:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3804, 753.4667), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:37] [INFO] [LastChance] Threat detected: @Area2D@1917
+[11:47:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[11:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:47:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3804, 753.4667), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[11:47:37] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[11:47:37] [INFO] [LastChance] Threat detected: @Area2D@1919
+[11:47:37] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
+[11:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3804, 753.4667), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[11:47:37] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[11:47:37] [INFO] [LastChance] Threat detected: @Area2D@1918
+[11:47:37] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:37] [INFO] [LastChance] Threat detected: @Area2D@1920
+[11:47:37] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:37] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3804, 753.4667), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(656.6923, 762.5732), shooter_id=219999635963, bullet_pos=(32.39536, 792.2116)
+[11:47:37] [INFO] [Bullet] Using shooter_position, distance=625
+[11:47:37] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
+[11:47:37] [INFO] [Bullet] Distance-based penetration chance: 97.0163675140638%
+[11:47:37] [INFO] [Bullet] Starting wall penetration at (32.39536, 792.2116)
+[11:47:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:47:37] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:47:37] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:47:37] [INFO] [LastChance] Threat detected: @Area2D@1921
+[11:47:37] [INFO] [LastChance] Triggering last chance effect!
+[11:47:37] [INFO] [LastChance] Starting last chance effect:
+[11:47:37] [INFO] [LastChance]   - Time will be frozen (except player)
+[11:47:37] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[11:47:37] [INFO] [LastChance]   - Sepia intensity: 0.70
+[11:47:37] [INFO] [LastChance]   - Brightness: 0.60
+[11:47:37] [INFO] [LastChance] Pushed bullet @Area2D@1914 from distance 141.1 to 200.0
+[11:47:37] [INFO] [LastChance] Pushed bullet @Area2D@1917 from distance 12.2 to 200.0
+[11:47:37] [INFO] [LastChance] Pushed bullet @Area2D@1918 from distance 100.8 to 200.0
+[11:47:37] [INFO] [LastChance] Pushed bullet @Area2D@1919 from distance 34.7 to 200.0
+[11:47:37] [INFO] [LastChance] Pushed bullet @Area2D@1920 from distance 75.6 to 200.0
+[11:47:37] [INFO] [LastChance] Pushed bullet @Area2D@1921 from distance 116.8 to 200.0
+[11:47:37] [INFO] [LastChance] Pushed 6 threatening bullets away from player
+[11:47:37] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[11:47:37] [INFO] [LastChance] Skipping player node: Player
+[11:47:37] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:37] [INFO] [Bullet] Exiting penetration at (27.40098, 792.4487) after traveling 0 pixels through wall
+[11:47:37] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:37] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[11:47:37] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[11:47:38] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:47:38] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:47:38] [INFO] [LastChance] Ending last chance effect
+[11:47:38] [INFO] [LastChance] All process modes restored
+[11:47:38] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:47:38] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:47:38] [INFO] [Player] Ready! Grenades: 1/3
+[11:47:38] [INFO] [ScoreManager] Level started with 10 enemies
+[11:47:38] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:47:38] [ENEMY] [Enemy1] Registered as sound listener
+[11:47:38] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[11:47:38] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:47:38] [ENEMY] [Enemy2] Registered as sound listener
+[11:47:38] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[11:47:38] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:47:38] [ENEMY] [Enemy3] Registered as sound listener
+[11:47:38] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[11:47:38] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:47:38] [ENEMY] [Enemy4] Registered as sound listener
+[11:47:38] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[11:47:38] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:47:38] [ENEMY] [Enemy5] Registered as sound listener
+[11:47:38] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[11:47:38] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:47:38] [ENEMY] [Enemy6] Registered as sound listener
+[11:47:38] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[11:47:38] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:47:38] [ENEMY] [Enemy7] Registered as sound listener
+[11:47:38] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[11:47:38] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:47:38] [ENEMY] [Enemy8] Registered as sound listener
+[11:47:38] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[11:47:38] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:47:38] [ENEMY] [Enemy9] Registered as sound listener
+[11:47:38] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[11:47:38] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:47:38] [ENEMY] [Enemy10] Registered as sound listener
+[11:47:38] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[11:47:38] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:47:38] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:47:38] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:47:38] [INFO] [LastChance] Found player: Player
+[11:47:38] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:47:38] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:47:38] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:47:38] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=20
+[11:47:38] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[11:47:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:39] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:39] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:47:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=283635615291, bullet_pos=(35.36759, 928.0717)
+[11:47:39] [INFO] [Bullet] Using shooter_position, distance=1291.66613769531
+[11:47:39] [INFO] [Bullet] Distance to wall: 1291.66613769531 (87.9519224802644% of viewport)
+[11:47:39] [INFO] [Bullet] Distance-based penetration chance: 44.0560904396916%
+[11:47:39] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=283635615291, bullet_pos=(58.62791, 897.98)
+[11:47:39] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[11:47:39] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[11:47:39] [INFO] [Bullet] Distance-based penetration chance: 47.366097453433%
+[11:47:39] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=283635615291, bullet_pos=(52.86331, 834.4136)
+[11:47:39] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:47:39] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:47:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=283635615291, bullet_pos=(49.53117, 770.8614)
+[11:47:39] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:47:39] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:47:39] [INFO] [Bullet] Distance-based penetration chance: 47.3661071507571%
+[11:47:39] [INFO] [Bullet] Starting wall penetration at (49.53117, 770.8614)
+[11:47:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=283635615291, bullet_pos=(266.9886, 699.8135)
+[11:47:39] [INFO] [Bullet] Using shooter_position, distance=1163.75732421875
+[11:47:39] [INFO] [Bullet] Distance to wall: 1163.75732421875 (79.242376167077% of viewport)
+[11:47:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.3594455718994
+[11:47:39] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:39] [INFO] [Bullet] Exiting penetration at (11.13478, 744.3379) after traveling 41.6666679382324 pixels through wall
+[11:47:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=283635615291, bullet_pos=(48.50871, 707.5523)
+[11:47:39] [INFO] [Bullet] Using shooter_position, distance=1250.00024414063
+[11:47:39] [INFO] [Bullet] Distance to wall: 1250.00024414063 (85.1148151713033% of viewport)
+[11:47:39] [INFO] [Bullet] Distance-based penetration chance: 47.3660489668128%
+[11:47:39] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=283635615291, bullet_pos=(508.3146, 833.6169)
+[11:47:39] [INFO] [Bullet] Using shooter_position, distance=899.518920898438
+[11:47:39] [INFO] [Bullet] Distance to wall: 899.518920898438 (61.249897393418% of viewport)
+[11:47:39] [INFO] [Bullet] Distance-based penetration chance: 75.2084530410123%
+[11:47:39] [INFO] [Bullet] Starting wall penetration at (508.3146, 833.6169)
+[11:47:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17.169132232666
+[11:47:39] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:39] [INFO] [Bullet] Exiting penetration at (539.0156, 850.639) after traveling 30.1041660308838 pixels through wall
+[11:47:39] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[11:47:39] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[11:47:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:39] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
+[11:47:39] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
+[11:47:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:39] [INFO] [LastChance] Threat detected: Bullet
+[11:47:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:39] [INFO] [LastChance] Threat detected: @Area2D@2185
+[11:47:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:39] [INFO] [LastChance] Threat detected: @Area2D@2186
+[11:47:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:40] [INFO] [LastChance] Threat detected: @Area2D@2187
+[11:47:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:40] [INFO] [LastChance] Threat detected: @Area2D@2188
+[11:47:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:40] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[11:47:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:40] [INFO] [LastChance] Threat detected: @Area2D@2189
+[11:47:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:40] [INFO] [LastChance] Threat detected: @Area2D@2190
+[11:47:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:40] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[11:47:40] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[11:47:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:40] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:47:40] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:47:40] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:47:40] [INFO] [LastChance] Threat detected: @Area2D@2191
+[11:47:40] [INFO] [LastChance] Triggering last chance effect!
+[11:47:40] [INFO] [LastChance] Starting last chance effect:
+[11:47:40] [INFO] [LastChance]   - Time will be frozen (except player)
+[11:47:40] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[11:47:40] [INFO] [LastChance]   - Sepia intensity: 0.70
+[11:47:40] [INFO] [LastChance]   - Brightness: 0.60
+[11:47:40] [INFO] [LastChance] Pushed bullet @Area2D@2185 from distance 127.3 to 200.0
+[11:47:40] [INFO] [LastChance] Pushed bullet @Area2D@2186 from distance 86.3 to 200.0
+[11:47:40] [INFO] [LastChance] Pushed bullet @Area2D@2188 from distance 10.1 to 200.0
+[11:47:40] [INFO] [LastChance] Pushed bullet @Area2D@2189 from distance 47.1 to 200.0
+[11:47:40] [INFO] [LastChance] Pushed bullet @Area2D@2190 from distance 88.2 to 200.0
+[11:47:40] [INFO] [LastChance] Pushed bullet @Area2D@2191 from distance 129.5 to 200.0
+[11:47:40] [INFO] [LastChance] Pushed 6 threatening bullets away from player
+[11:47:40] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[11:47:40] [INFO] [LastChance] Skipping player node: Player
+[11:47:40] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[11:47:40] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[11:47:40] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:47:40] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:47:40] [INFO] [LastChance] Ending last chance effect
+[11:47:40] [INFO] [LastChance] All process modes restored
+[11:47:40] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:47:40] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:47:40] [INFO] [Player] Ready! Grenades: 1/3
+[11:47:40] [INFO] [ScoreManager] Level started with 10 enemies
+[11:47:40] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:47:40] [ENEMY] [Enemy1] Registered as sound listener
+[11:47:40] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[11:47:40] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:47:40] [ENEMY] [Enemy2] Registered as sound listener
+[11:47:40] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[11:47:40] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:47:40] [ENEMY] [Enemy3] Registered as sound listener
+[11:47:40] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[11:47:40] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:47:40] [ENEMY] [Enemy4] Registered as sound listener
+[11:47:40] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[11:47:40] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:47:40] [ENEMY] [Enemy5] Registered as sound listener
+[11:47:40] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[11:47:40] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:47:40] [ENEMY] [Enemy6] Registered as sound listener
+[11:47:40] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[11:47:40] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:47:40] [ENEMY] [Enemy7] Registered as sound listener
+[11:47:40] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[11:47:40] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:47:40] [ENEMY] [Enemy8] Registered as sound listener
+[11:47:40] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[11:47:40] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:47:40] [ENEMY] [Enemy9] Registered as sound listener
+[11:47:40] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[11:47:40] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:47:40] [ENEMY] [Enemy10] Registered as sound listener
+[11:47:40] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[11:47:40] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:47:40] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:47:40] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:47:40] [INFO] [LastChance] Found player: Player
+[11:47:40] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:47:40] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:47:40] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:47:41] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=20
+[11:47:41] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[11:47:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1172.004, 1534.506), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.201, 1514.959), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1109.373, 1493.907), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:41] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:47:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.267, 1529.839), shooter_id=313230625354, bullet_pos=(33.54881, 931.488)
+[11:47:41] [INFO] [Bullet] Using shooter_position, distance=1291.66687011719
+[11:47:41] [INFO] [Bullet] Distance to wall: 1291.66687011719 (87.9519723522166% of viewport)
+[11:47:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.55, 1523.911), shooter_id=313230625354, bullet_pos=(62.00026, 892.0624)
+[11:47:41] [INFO] [Bullet] Using shooter_position, distance=1250.00085449219
+[11:47:41] [INFO] [Bullet] Distance to wall: 1250.00085449219 (85.1148567312636% of viewport)
+[11:47:41] [INFO] [Bullet] Distance-based penetration chance: 47.3660004801925%
+[11:47:41] [INFO] [Bullet] Starting wall penetration at (62.00026, 892.0624)
+[11:47:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11.8974456787109
+[11:47:41] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:41] [INFO] [Bullet] Exiting penetration at (21.73442, 868.4734) after traveling 41.6666717529297 pixels through wall
+[11:47:41] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.267, 1529.839), shooter_id=313230625354, bullet_pos=(353.8556, 701.0546)
+[11:47:41] [INFO] [Bullet] Using shooter_position, distance=1168.98986816406
+[11:47:41] [INFO] [Bullet] Distance to wall: 1168.98986816406 (79.5986697061132% of viewport)
+[11:47:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1109.14, 1502.485), shooter_id=313230625354, bullet_pos=(62.91745, 818.4401)
+[11:47:41] [INFO] [Bullet] Using shooter_position, distance=1249.99975585938
+[11:47:41] [INFO] [Bullet] Distance to wall: 1249.99975585938 (85.1147819233352% of viewport)
+[11:47:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1109.14, 1502.485), shooter_id=313230625354, bullet_pos=(200.3188, 698.9611)
+[11:47:41] [INFO] [Bullet] Using shooter_position, distance=1213.09814453125
+[11:47:41] [INFO] [Bullet] Distance to wall: 1213.09814453125 (82.6020833519233% of viewport)
+[11:47:41] [INFO] [Bullet] Distance-based penetration chance: 50.2975694227561%
+[11:47:41] [INFO] [Bullet] Starting wall penetration at (200.3188, 698.9611)
+[11:47:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.267, 1529.839), shooter_id=313230625354, bullet_pos=(510.1528, 849.75)
+[11:47:41] [INFO] [Bullet] Using shooter_position, distance=953.361022949219
+[11:47:41] [INFO] [Bullet] Distance to wall: 953.361022949219 (64.9161051289512% of viewport)
+[11:47:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.7122840881348
+[11:47:42] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:42] [INFO] [Bullet] Exiting penetration at (230.8175, 672.4406) after traveling 35.4166679382324 pixels through wall
+[11:47:42] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[11:47:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.797, 1479.668), shooter_id=313230625354, bullet_pos=(65.34, 747.9537)
+[11:47:42] [INFO] [Bullet] Using shooter_position, distance=1250.00085449219
+[11:47:42] [INFO] [Bullet] Distance to wall: 1250.00085449219 (85.1148567312636% of viewport)
+[11:47:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.797, 1479.668), shooter_id=313230625354, bullet_pos=(128.1641, 705.4823)
+[11:47:42] [INFO] [Bullet] Using shooter_position, distance=1225.99658203125
+[11:47:42] [INFO] [Bullet] Distance to wall: 1225.99658203125 (83.4803616794335% of viewport)
+[11:47:42] [INFO] [LastChance] Threat detected: @Area2D@2446
+[11:47:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:42] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:42] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
+[11:47:42] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
+[11:47:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:42] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:42] [INFO] [LastChance] Threat detected: Bullet
+[11:47:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:42] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:42] [INFO] [LastChance] Threat detected: @Area2D@2454
+[11:47:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:42] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:42] [INFO] [LastChance] Threat detected: @Area2D@2455
+[11:47:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:42] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:42] [INFO] [LastChance] Threat detected: @Area2D@2456
+[11:47:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(675.4969, 763.2423), shooter_id=311234137246, bullet_pos=(512.8295, 799.5333)
+[11:47:42] [INFO] [Bullet] Using shooter_position, distance=166.666564941406
+[11:47:42] [INFO] [Bullet] Distance to wall: 166.666564941406 (11.3486328796492% of viewport)
+[11:47:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:42] [INFO] [LastChance] Threat detected: @Area2D@2457
+[11:47:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:42] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(675.1957, 762.8995), shooter_id=311234137246, bullet_pos=(511.9777, 796.6285)
+[11:47:42] [INFO] [Bullet] Using shooter_position, distance=166.666641235352
+[11:47:42] [INFO] [Bullet] Distance to wall: 166.666641235352 (11.3486380746442% of viewport)
+[11:47:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:42] [INFO] [Bullet] Starting wall penetration at (511.9777, 796.6285)
+[11:47:42] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:42] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:47:42] [INFO] [Bullet] Exiting penetration at (466.2766, 806.0726) after traveling 41.6666679382324 pixels through wall
+[11:47:42] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:42] [INFO] [LastChance] Threat detected: @Area2D@2459
+[11:47:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:42] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:42] [INFO] [LastChance] Threat detected: @Area2D@2461
+[11:47:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:42] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:42] [INFO] [LastChance] Threat detected: @Area2D@2462
+[11:47:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:42] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:42] [INFO] [LastChance] Threat detected: @Area2D@2463
+[11:47:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:42] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:42] [INFO] [LastChance] Threat detected: @Area2D@2464
+[11:47:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:42] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:42] [INFO] [LastChance] Threat detected: @Area2D@2465
+[11:47:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:42] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:43] [INFO] [LastChance] Threat detected: @Area2D@2466
+[11:47:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:43] [INFO] [LastChance] Threat detected: @Area2D@2467
+[11:47:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:43] [INFO] [LastChance] Threat detected: @Area2D@2468
+[11:47:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(675.4969, 763.2423), shooter_id=311234137246, bullet_pos=(164.5908, 711.6101)
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=513.508544921875
+[11:47:43] [INFO] [Bullet] Distance to wall: 513.508544921875 (34.9657410826819% of viewport)
+[11:47:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(670.3718, 749.0162), shooter_id=311234137246, bullet_pos=(62.26878, 893.3619)
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=624.999938964844
+[11:47:43] [INFO] [Bullet] Distance to wall: 624.999938964844 (42.5573951176636% of viewport)
+[11:47:43] [INFO] [LastChance] Threat detected: @Area2D@2469
+[11:47:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:43] [INFO] [LastChance] Threat detected: @Area2D@2472
+[11:47:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:43] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[11:47:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:43] [INFO] [LastChance] Threat detected: @Area2D@2473
+[11:47:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(674.8732, 762.5362), shooter_id=311234137246, bullet_pos=(60.80241, 878.9061)
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=624.999938964844
+[11:47:43] [INFO] [Bullet] Distance to wall: 624.999938964844 (42.5573951176636% of viewport)
+[11:47:43] [INFO] [Bullet] Distance-based penetration chance: 97.0163723627258%
+[11:47:43] [INFO] [Bullet] Starting wall penetration at (60.80241, 878.9061)
+[11:47:43] [INFO] [LastChance] Threat detected: @Area2D@2474
+[11:47:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17.351634979248
+[11:47:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:43] [INFO] [Bullet] Exiting penetration at (14.95178, 887.5951) after traveling 41.6666679382324 pixels through wall
+[11:47:43] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(674.5497, 762.166), shooter_id=311234137246, bullet_pos=(58.64238, 868.3873)
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=624.999877929688
+[11:47:43] [INFO] [Bullet] Distance to wall: 624.999877929688 (42.5573909616676% of viewport)
+[11:47:43] [INFO] [Bullet] Distance-based penetration chance: 97.0163772113878%
+[11:47:43] [INFO] [Bullet] Starting wall penetration at (58.64238, 868.3873)
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(675.4969, 763.2423), shooter_id=311234137246, bullet_pos=(42.82954, 741.6691)
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=633.035095214844
+[11:47:43] [INFO] [Bullet] Distance to wall: 633.035095214844 (43.1045236820756% of viewport)
+[11:47:43] [INFO] [Bullet] Distance-based penetration chance: 96.3780557042451%
+[11:47:43] [INFO] [Bullet] Starting wall penetration at (42.82954, 741.6691)
+[11:47:43] [INFO] [LastChance] Threat detected: @Area2D@2476
+[11:47:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(405.187, 565.1357), source=ENEMY (Enemy2), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:47:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.9495143890381
+[11:47:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19.630973815918
+[11:47:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:43] [INFO] [Bullet] Exiting penetration at (8.748526, 750.0826) after traveling 30.1041698455811 pixels through wall
+[11:47:43] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[11:47:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:43] [INFO] [Bullet] Exiting penetration at (12.65462, 876.3185) after traveling 41.6666717529297 pixels through wall
+[11:47:43] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:43] [INFO] [LastChance] Threat detected: @Area2D@2480
+[11:47:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(674.0366, 761.3524), shooter_id=311234137246, bullet_pos=(54.93541, 847.0192)
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=625.000061035156
+[11:47:43] [INFO] [Bullet] Distance to wall: 625.000061035156 (42.5574034296557% of viewport)
+[11:47:43] [INFO] [LastChance] Threat detected: @Area2D@2481
+[11:47:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:43] [INFO] [LastChance] Threat detected: @Area2D@2479
+[11:47:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(673.5983, 760.9816), shooter_id=311234137246, bullet_pos=(53.13561, 836.1556)
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=625
+[11:47:43] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
+[11:47:43] [INFO] [Bullet] Distance-based penetration chance: 97.0163675140638%
+[11:47:43] [INFO] [Bullet] Starting wall penetration at (53.13561, 836.1556)
+[11:47:43] [INFO] [LastChance] Threat detected: @Area2D@2483
+[11:47:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.376501083374
+[11:47:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:43] [INFO] [Bullet] Exiting penetration at (6.807728, 841.7686) after traveling 41.6666717529297 pixels through wall
+[11:47:43] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(673.2846, 760.5557), shooter_id=311234137246, bullet_pos=(51.61921, 825.0317)
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=625
+[11:47:43] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
+[11:47:43] [INFO] [Bullet] Distance-based penetration chance: 97.0163675140638%
+[11:47:43] [INFO] [Bullet] Starting wall penetration at (51.61921, 825.0317)
+[11:47:43] [INFO] [LastChance] Threat detected: Bullet
+[11:47:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(313.3506, 378.4976), source=ENEMY (Enemy1), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=1, below_threshold=4
+[11:47:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.9422302246094
+[11:47:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:43] [INFO] [Bullet] Exiting penetration at (5.201519, 829.8459) after traveling 41.6666679382324 pixels through wall
+[11:47:43] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(672.9711, 760.11), shooter_id=311234137246, bullet_pos=(50.26662, 813.6281)
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=625.000122070313
+[11:47:43] [INFO] [Bullet] Distance to wall: 625.000122070313 (42.5574075856517% of viewport)
+[11:47:43] [INFO] [LastChance] Threat detected: @Area2D@2487
+[11:47:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(672.657, 759.6415), shooter_id=311234137246, bullet_pos=(49.08624, 801.8848)
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=625
+[11:47:43] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
+[11:47:43] [INFO] [Bullet] Distance-based penetration chance: 97.0163675140638%
+[11:47:43] [INFO] [Bullet] Starting wall penetration at (49.08624, 801.8848)
+[11:47:43] [INFO] [LastChance] Threat detected: @Area2D@2489
+[11:47:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29.5412693023682
+[11:47:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:43] [INFO] [Bullet] Exiting penetration at (2.526287, 805.039) after traveling 41.6666679382324 pixels through wall
+[11:47:43] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(669.2538, 752.0173), shooter_id=311234137246, bullet_pos=(464.5571, 713.2618)
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=208.333236694336
+[11:47:43] [INFO] [Bullet] Distance to wall: 208.333236694336 (14.1857931775595% of viewport)
+[11:47:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(669.5247, 752.9472), shooter_id=311234137246, bullet_pos=(422.6743, 713.3884)
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=249.999984741211
+[11:47:43] [INFO] [Bullet] Distance to wall: 249.999984741211 (17.0229586704648% of viewport)
+[11:47:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(669.8124, 753.8224), shooter_id=311234137246, bullet_pos=(380.6753, 715.4929)
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=291.666595458984
+[11:47:43] [INFO] [Bullet] Distance to wall: 291.666595458984 (19.8601148123791% of viewport)
+[11:47:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:43] [INFO] [Bullet] Starting wall penetration at (380.6753, 715.4929)
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(672.3417, 759.1467), shooter_id=311234137246, bullet_pos=(48.09056, 789.7335)
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=625
+[11:47:43] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
+[11:47:43] [INFO] [Bullet] Distance-based penetration chance: 97.0163675140638%
+[11:47:43] [INFO] [Bullet] Starting wall penetration at (48.09056, 789.7335)
+[11:47:43] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:47:43] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:47:43] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:47:43] [INFO] [LastChance] Threat detected: @Area2D@2491
+[11:47:43] [INFO] [LastChance] Triggering last chance effect!
+[11:47:43] [INFO] [LastChance] Starting last chance effect:
+[11:47:43] [INFO] [LastChance]   - Time will be frozen (except player)
+[11:47:43] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[11:47:43] [INFO] [LastChance]   - Sepia intensity: 0.70
+[11:47:43] [INFO] [LastChance]   - Brightness: 0.60
+[11:47:43] [INFO] [LastChance] Pushed bullet @Area2D@2481 from distance 109.8 to 200.0
+[11:47:43] [INFO] [LastChance] Pushed bullet @Area2D@2483 from distance 64.5 to 200.0
+[11:47:43] [INFO] [LastChance] Pushed bullet Bullet from distance 16.3 to 200.0
+[11:47:43] [INFO] [LastChance] Pushed bullet @Area2D@2487 from distance 29.6 to 200.0
+[11:47:43] [INFO] [LastChance] Pushed bullet @Area2D@2489 from distance 70.3 to 200.0
+[11:47:43] [INFO] [LastChance] Pushed bullet @Area2D@2491 from distance 111.5 to 200.0
+[11:47:43] [INFO] [LastChance] Pushed 6 threatening bullets away from player
+[11:47:43] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[11:47:43] [INFO] [LastChance] Skipping player node: Player
+[11:47:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:43] [INFO] [Bullet] Exiting penetration at (43.09656, 789.9782) after traveling 0 pixels through wall
+[11:47:43] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:43] [INFO] [Bullet] Exiting penetration at (375.7187, 714.8358) after traveling 0 pixels through wall
+[11:47:43] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:43] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[11:47:43] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.9269, 695.5056), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(603.1506, 668.2819), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(719.42896, 1023.84985)
+[11:47:43] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=1251,3379
+[11:47:43] [INFO] [Bullet] Distance to wall: 1251,3379 (85,2059% of viewport)
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(683.2808, 887.4249)
+[11:47:43] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=1119,998
+[11:47:43] [INFO] [Bullet] Distance to wall: 1119,998 (76,26273% of viewport)
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(626.4852, 644.9473), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(637.03986, 1026.6113)
+[11:47:43] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=1208,2014
+[11:47:43] [INFO] [Bullet] Distance to wall: 1208,2014 (82,26866% of viewport)
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(686.7923, 826.8792)
+[11:47:43] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=1074,9014
+[11:47:43] [INFO] [Bullet] Distance to wall: 1074,9014 (73,19201% of viewport)
+[11:47:43] [INFO] [Bullet] Distance-based penetration chance: 61,27599%
+[11:47:43] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(649.8198, 621.6127), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(696.14606, 807.5966)
+[11:47:43] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=1066,223
+[11:47:43] [INFO] [Bullet] Distance to wall: 1066,223 (72,60109% of viewport)
+[11:47:43] [INFO] [Bullet] Distance-based penetration chance: 61,965405%
+[11:47:43] [INFO] [Bullet] Starting wall penetration at (696.14606, 807.5966)
+[11:47:43] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:47:43] [INFO] [Bullet] Exiting penetration at (707.4255, 852.87964) after traveling 41,66667 pixels through wall
+[11:47:43] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(677.0435, 594.389), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(719.5391, 823.8202)
+[11:47:43] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=1093,8081
+[11:47:43] [INFO] [Bullet] Distance to wall: 1093,8081 (74,47941% of viewport)
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(704.2672, 567.1653), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:47:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(745.205, 839.10114)
+[11:47:43] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:43] [INFO] [Bullet] Using shooter_position, distance=1122,2394
+[11:47:43] [INFO] [Bullet] Distance to wall: 1122,2394 (76,415344% of viewport)
+[11:47:43] [INFO] [Bullet] Distance-based penetration chance: 57,51543%
+[11:47:43] [INFO] [Bullet] Starting wall penetration at (745.205, 839.10114)
+[11:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(731.4909, 539.9417), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:43] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:47:43] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:47:43] [INFO] [Bullet] Exiting penetration at (752.15204, 885.2478) after traveling 41,666668 pixels through wall
+[11:47:43] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:47:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(758.7146, 512.718), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:44] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:47:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(794.07666, 1019.2056)
+[11:47:44] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:44] [INFO] [Bullet] Using shooter_position, distance=1292,0286
+[11:47:44] [INFO] [Bullet] Distance to wall: 1292,0286 (87,97661% of viewport)
+[11:47:44] [INFO] [Bullet] Distance-based penetration chance: 44,027298%
+[11:47:44] [INFO] [Bullet] Starting wall penetration at (794.07666, 1019.2056)
+[11:47:44] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41,83167
+[11:47:44] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:44] [INFO] [Bullet] Exiting penetration at (800.11945, 1065.4795) after traveling 41,666668 pixels through wall
+[11:47:44] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:47:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(785.9383, 485.4943), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:44] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:47:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(813.162, 458.2706), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=5
+[11:47:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(785.4061, 1010.4938)
+[11:47:44] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:44] [INFO] [Bullet] Using shooter_position, distance=1279,8284
+[11:47:44] [INFO] [Bullet] Distance to wall: 1279,8284 (87,145874% of viewport)
+[11:47:44] [INFO] [Bullet] Distance-based penetration chance: 44,996487%
+[11:47:44] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(689.0212, 838.51935)
+[11:47:44] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:44] [INFO] [Bullet] Using shooter_position, distance=1085,2948
+[11:47:44] [INFO] [Bullet] Distance to wall: 1085,2948 (73,89972% of viewport)
+[11:47:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(886.7032, 1655.5742)
+[11:47:44] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:44] [INFO] [Bullet] Using shooter_position, distance=1878,0757
+[11:47:44] [INFO] [Bullet] Distance to wall: 1878,0757 (127,88164% of viewport)
+[11:47:44] [INFO] [Bullet] Distance-based penetration chance: 24,423674%
+[11:47:44] [INFO] [Bullet] Starting wall penetration at (886.7032, 1655.5742)
+[11:47:44] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:47:44] [INFO] [Bullet] Exiting penetration at (891.8969, 1701.951) after traveling 41,666668 pixels through wall
+[11:47:44] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:47:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(819.7372, 357.1996), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
+[11:47:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(793.0975, 330.0907), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=5
+[11:47:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(761.4091, 313.6457), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=5
+[11:47:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(510.17606, 880.88025)
+[11:47:44] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:44] [INFO] [Bullet] Using shooter_position, distance=1017,9537
+[11:47:44] [INFO] [Bullet] Distance to wall: 1017,9537 (69,31434% of viewport)
+[11:47:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(566.21466, 1016.4191)
+[11:47:44] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:44] [INFO] [Bullet] Using shooter_position, distance=1163,4891
+[11:47:44] [INFO] [Bullet] Distance to wall: 1163,4891 (79,22411% of viewport)
+[11:47:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(723.9952, 311.0237), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=5
+[11:47:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(512.9733, 870.0904)
+[11:47:44] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:44] [INFO] [Bullet] Using shooter_position, distance=1010,04895
+[11:47:44] [INFO] [Bullet] Distance to wall: 1010,04895 (68,77609% of viewport)
+[11:47:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(579.4695, 1000.8168)
+[11:47:45] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:45] [INFO] [Bullet] Using shooter_position, distance=1156,4684
+[11:47:45] [INFO] [Bullet] Distance to wall: 1156,4684 (78,74606% of viewport)
+[11:47:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(681.1109, 833.8321)
+[11:47:45] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:45] [INFO] [Bullet] Using shooter_position, distance=1076,6559
+[11:47:45] [INFO] [Bullet] Distance to wall: 1076,6559 (73,311485% of viewport)
+[11:47:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(687.1619, 311.0237), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:45] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=5
+[11:47:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(527.58185, 875.24567)
+[11:47:45] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:45] [INFO] [Bullet] Using shooter_position, distance=1021,95776
+[11:47:45] [INFO] [Bullet] Distance to wall: 1021,95776 (69,58698% of viewport)
+[11:47:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(586.48517, 1009.56445)
+[11:47:45] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:45] [INFO] [Bullet] Using shooter_position, distance=1167,5553
+[11:47:45] [INFO] [Bullet] Distance to wall: 1167,5553 (79,50099% of viewport)
+[11:47:45] [INFO] [Bullet] Distance-based penetration chance: 53,915512%
+[11:47:45] [INFO] [Bullet] Starting wall penetration at (586.48517, 1009.56445)
+[11:47:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24,654003
+[11:47:45] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:45] [INFO] [Bullet] Exiting penetration at (602.71704, 1046.5784) after traveling 35,416668 pixels through wall
+[11:47:45] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[11:47:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(526.8901, 1017.37177)
+[11:47:45] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:45] [INFO] [Bullet] Using shooter_position, distance=1145,7131
+[11:47:45] [INFO] [Bullet] Distance to wall: 1145,7131 (78,01372% of viewport)
+[11:47:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(518.95984, 508.79346)
+[11:47:45] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:45] [INFO] [Bullet] Using shooter_position, distance=726,7669
+[11:47:45] [INFO] [Bullet] Distance to wall: 726,7669 (49,486897% of viewport)
+[11:47:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(520.17206, 977.51733)
+[11:47:45] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:45] [INFO] [Bullet] Using shooter_position, distance=1107,3026
+[11:47:45] [INFO] [Bullet] Distance to wall: 1107,3026 (75,39827% of viewport)
+[11:47:45] [INFO] [Bullet] Distance-based penetration chance: 58,702015%
+[11:47:45] [INFO] [Bullet] Starting wall penetration at (520.17206, 977.51733)
+[11:47:45] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:47:45] [INFO] [Bullet] Exiting penetration at (513.45404, 937.6629) after traveling 35,416668 pixels through wall
+[11:47:45] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[11:47:45] [INFO] [LastChance] Threat detected: Bullet
+[11:47:45] [INFO] [LastChance] Effect already used this life
+[11:47:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(424.998, 1601.3273)
+[11:47:45] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:45] [INFO] [Bullet] Using shooter_position, distance=1656,7656
+[11:47:45] [INFO] [Bullet] Distance to wall: 1656,7656 (112,81222% of viewport)
+[11:47:45] [INFO] [Bullet] Distance-based penetration chance: 27,437555%
+[11:47:45] [INFO] [Bullet] Starting wall penetration at (424.998, 1601.3273)
+[11:47:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35,77592
+[11:47:45] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:45] [INFO] [Bullet] Exiting penetration at (415.70612, 1647.0596) after traveling 41,666668 pixels through wall
+[11:47:45] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:47:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(731.6145, 50.46905)
+[11:47:45] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:45] [INFO] [Bullet] Using shooter_position, distance=733,35315
+[11:47:45] [INFO] [Bullet] Distance to wall: 733,35315 (49,935364% of viewport)
+[11:47:45] [INFO] [Bullet] Distance-based penetration chance: 88,408745%
+[11:47:45] [INFO] [Bullet] Starting wall penetration at (731.6145, 50.46905)
+[11:47:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 6,3900104
+[11:47:45] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:45] [INFO] [Bullet] Exiting penetration at (742.8733, 26.20353) after traveling 21,75026 pixels through wall
+[11:47:45] [INFO] [Bullet] Damage multiplier after penetration: 0,05625
+[11:47:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(693.948, 431.8768), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:47:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(721.1717, 459.1005), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:47:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(748.3954, 486.3242), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(522.6754, 806.3745)
+[11:47:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:46] [INFO] [Bullet] Using shooter_position, distance=960,9524
+[11:47:46] [INFO] [Bullet] Distance to wall: 960,9524 (65,43302% of viewport)
+[11:47:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(778.2979, 507.0806), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:46] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=0, below_threshold=5
+[11:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(656.878, 1020.74927)
+[11:47:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:46] [INFO] [Bullet] Using shooter_position, distance=1213,8442
+[11:47:46] [INFO] [Bullet] Distance to wall: 1213,8442 (82,65289% of viewport)
+[11:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(517.9793, 863.12366)
+[11:47:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:46] [INFO] [Bullet] Using shooter_position, distance=1006,6206
+[11:47:46] [INFO] [Bullet] Distance to wall: 1006,6206 (68,54265% of viewport)
+[11:47:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(814.4034, 512.8615), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:46] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(607.1494, 1021.8782)
+[11:47:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:46] [INFO] [Bullet] Using shooter_position, distance=1188,6401
+[11:47:46] [INFO] [Bullet] Distance to wall: 1188,6401 (80,93669% of viewport)
+[11:47:46] [INFO] [Bullet] Distance-based penetration chance: 52,24053%
+[11:47:46] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(506.9525, 907.059)
+[11:47:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:46] [INFO] [Bullet] Using shooter_position, distance=1039,1135
+[11:47:46] [INFO] [Bullet] Distance to wall: 1039,1135 (70,75516% of viewport)
+[11:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(48.46028, 1627.0406)
+[11:47:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:46] [INFO] [Bullet] Using shooter_position, distance=1627,7622
+[11:47:46] [INFO] [Bullet] Distance to wall: 1627,7622 (110,837326% of viewport)
+[11:47:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(852.9034, 512.8615), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:46] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(607.9758, 1013.3857)
+[11:47:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:46] [INFO] [Bullet] Using shooter_position, distance=1181,7721
+[11:47:46] [INFO] [Bullet] Distance to wall: 1181,7721 (80,46904% of viewport)
+[11:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(911.68494, 717.15454)
+[11:47:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:46] [INFO] [Bullet] Using shooter_position, distance=1159,9482
+[11:47:46] [INFO] [Bullet] Distance to wall: 1159,9482 (78,98301% of viewport)
+[11:47:46] [INFO] [Bullet] Distance-based penetration chance: 54,519825%
+[11:47:46] [INFO] [Bullet] Starting wall penetration at (911.68494, 717.15454)
+[11:47:46] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:47:46] [INFO] [Bullet] Exiting penetration at (934.2526, 690.26587) after traveling 30,104164 pixels through wall
+[11:47:46] [INFO] [Bullet] Damage multiplier after penetration: 0,225
+[11:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(515.1449, 944.2192)
+[11:47:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:46] [INFO] [Bullet] Using shooter_position, distance=1075,6041
+[11:47:46] [INFO] [Bullet] Distance to wall: 1075,6041 (73,23986% of viewport)
+[11:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(558.8016, 1006.2256)
+[11:47:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:46] [INFO] [Bullet] Using shooter_position, distance=1150,9774
+[11:47:46] [INFO] [Bullet] Distance to wall: 1150,9774 (78,37217% of viewport)
+[11:47:46] [INFO] [Bullet] Distance-based penetration chance: 55,232475%
+[11:47:46] [INFO] [Bullet] Starting wall penetration at (558.8016, 1006.2256)
+[11:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(735.8947, 878.8739)
+[11:47:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:46] [INFO] [Bullet] Using shooter_position, distance=1146,281
+[11:47:46] [INFO] [Bullet] Distance to wall: 1146,281 (78,05238% of viewport)
+[11:47:46] [INFO] [Bullet] Distance-based penetration chance: 55,605553%
+[11:47:46] [INFO] [Bullet] Starting wall penetration at (735.8947, 878.8739)
+[11:47:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 0,12463805
+[11:47:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18,678698
+[11:47:46] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:46] [INFO] [Bullet] Exiting penetration at (582.06915, 1039.273) after traveling 35,416668 pixels through wall
+[11:47:46] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[11:47:46] [INFO] [Bullet] Max penetration distance exceeded: 60,208332 >= 48
+[11:47:46] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:46] [INFO] [Bullet] Exiting penetration at (780.8314, 831.62115) after traveling 60,208332 pixels through wall
+[11:47:46] [INFO] [Bullet] Damage multiplier after penetration: 0,225
+[11:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(237.87497, 2090.6736)
+[11:47:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:46] [INFO] [Bullet] Using shooter_position, distance=2104,1626
+[11:47:46] [INFO] [Bullet] Distance to wall: 2104,1626 (143,2763% of viewport)
+[11:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(527.106, 976.5066)
+[11:47:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:46] [INFO] [Bullet] Using shooter_position, distance=1109,6873
+[11:47:46] [INFO] [Bullet] Distance to wall: 1109,6873 (75,560646% of viewport)
+[11:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(549.5109, 1010.1448)
+[11:47:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:46] [INFO] [Bullet] Using shooter_position, distance=1149,9369
+[11:47:46] [INFO] [Bullet] Distance to wall: 1149,9369 (78,30132% of viewport)
+[11:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(308.12967, 1886.7041)
+[11:47:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:46] [INFO] [Bullet] Using shooter_position, distance=1911,6998
+[11:47:46] [INFO] [Bullet] Distance to wall: 1911,6998 (130,17116% of viewport)
+[11:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(237.9255, 1716.494)
+[11:47:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:46] [INFO] [Bullet] Using shooter_position, distance=1732,9052
+[11:47:46] [INFO] [Bullet] Distance to wall: 1732,9052 (117,996704% of viewport)
+[11:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(309.5741, 1601.4845)
+[11:47:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:46] [INFO] [Bullet] Using shooter_position, distance=1631,1311
+[11:47:46] [INFO] [Bullet] Distance to wall: 1631,1311 (111,06673% of viewport)
+[11:47:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(992.6256, 512.8615), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=7
+[11:47:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(992.6256, 512.8615), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=7
+[11:47:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(992.6256, 512.8615), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=7
+[11:47:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(546.84814, 2067.1775)
+[11:47:47] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:47] [INFO] [Bullet] Using shooter_position, distance=2138,2856
+[11:47:47] [INFO] [Bullet] Distance to wall: 2138,2856 (145,59981% of viewport)
+[11:47:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(992.6256, 512.8615), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=7
+[11:47:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(44.844753, 1002.23804)
+[11:47:47] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:47] [INFO] [Bullet] Using shooter_position, distance=1003,2408
+[11:47:47] [INFO] [Bullet] Distance to wall: 1003,2408 (68,312515% of viewport)
+[11:47:47] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:47:47] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:47:47] [INFO] [LastChance] Ending last chance effect
+[11:47:47] [INFO] [LastChance] All process modes restored
+[11:47:47] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:47:47] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:47:47] [INFO] [Player] Ready! Grenades: 1/3
+[11:47:47] [INFO] [ScoreManager] Level started with 10 enemies
+[11:47:47] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:47:47] [ENEMY] [Enemy1] Registered as sound listener
+[11:47:47] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[11:47:47] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:47:47] [ENEMY] [Enemy2] Registered as sound listener
+[11:47:47] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[11:47:47] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:47:47] [ENEMY] [Enemy3] Registered as sound listener
+[11:47:47] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[11:47:47] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:47:47] [ENEMY] [Enemy4] Registered as sound listener
+[11:47:47] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[11:47:47] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:47:47] [ENEMY] [Enemy5] Registered as sound listener
+[11:47:47] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[11:47:47] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:47:47] [ENEMY] [Enemy6] Registered as sound listener
+[11:47:47] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[11:47:47] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:47:47] [ENEMY] [Enemy7] Registered as sound listener
+[11:47:47] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[11:47:47] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:47:47] [ENEMY] [Enemy8] Registered as sound listener
+[11:47:47] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[11:47:47] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:47:47] [ENEMY] [Enemy9] Registered as sound listener
+[11:47:47] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[11:47:47] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:47:47] [ENEMY] [Enemy10] Registered as sound listener
+[11:47:47] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[11:47:47] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:47:47] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:47:47] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:47:47] [INFO] [LastChance] Found player: Player
+[11:47:47] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:47:47] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:47:47] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:47:49] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=20
+[11:47:49] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[11:47:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.922, 1534.652), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1139.841, 1515.563), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.554, 1495.199), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.105, 1473.601), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:49] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:47:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.306, 1529.797), shooter_id=377504140483, bullet_pos=(34.75406, 929.2207)
+[11:47:49] [INFO] [Bullet] Using shooter_position, distance=1291.66674804688
+[11:47:49] [INFO] [Bullet] Distance to wall: 1291.66674804688 (87.9519640402246% of viewport)
+[11:47:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.395, 1524.448), shooter_id=377504140483, bullet_pos=(55.31631, 903.8809)
+[11:47:49] [INFO] [Bullet] Using shooter_position, distance=1249.99975585938
+[11:47:49] [INFO] [Bullet] Distance to wall: 1249.99975585938 (85.1147819233352% of viewport)
+[11:47:49] [INFO] [Bullet] Distance-based penetration chance: 47.366087756109%
+[11:47:49] [INFO] [Bullet] Starting wall penetration at (55.31631, 903.8809)
+[11:47:49] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19.8064918518066
+[11:47:49] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:49] [INFO] [Bullet] Exiting penetration at (14.80671, 880.713) after traveling 41.6666679382324 pixels through wall
+[11:47:49] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.306, 1529.797), shooter_id=377504140483, bullet_pos=(355.0051, 698.7097)
+[11:47:49] [INFO] [Bullet] Using shooter_position, distance=1169.84191894531
+[11:47:49] [INFO] [Bullet] Distance to wall: 1169.84191894531 (79.6566874105917% of viewport)
+[11:47:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.607, 1503.818), shooter_id=377504140483, bullet_pos=(49.39236, 840.0676)
+[11:47:49] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:47:49] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:47:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.607, 1503.818), shooter_id=377504140483, bullet_pos=(214.7007, 698.719)
+[11:47:49] [INFO] [Bullet] Using shooter_position, distance=1203.01770019531
+[11:47:49] [INFO] [Bullet] Distance to wall: 1203.01770019531 (81.9156873607867% of viewport)
+[11:47:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.694, 1481.922), shooter_id=377504140483, bullet_pos=(45.93719, 776.2479)
+[11:47:49] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[11:47:49] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[11:47:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.694, 1481.922), shooter_id=377504140483, bullet_pos=(128.2816, 701.4417)
+[11:47:49] [INFO] [Bullet] Using shooter_position, distance=1229.0380859375
+[11:47:49] [INFO] [Bullet] Distance to wall: 1229.0380859375 (83.6874632732425% of viewport)
+[11:47:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.306, 1529.797), shooter_id=377504140483, bullet_pos=(679.4158, 868.7001)
+[11:47:49] [INFO] [Bullet] Using shooter_position, distance=828.215087890625
+[11:47:49] [INFO] [Bullet] Distance to wall: 828.215087890625 (56.3946882877287% of viewport)
+[11:47:49] [INFO] [Bullet] Distance-based penetration chance: 80.8728636643165%
+[11:47:49] [INFO] [Bullet] Starting wall penetration at (679.4158, 868.7001)
+[11:47:49] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:47:49] [INFO] [Bullet] Exiting penetration at (710.5098, 884.9932) after traveling 30.1041660308838 pixels through wall
+[11:47:49] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[11:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.701, 1458.812), shooter_id=377504140483, bullet_pos=(44.83028, 712.6568)
+[11:47:50] [INFO] [Bullet] Using shooter_position, distance=1249.99926757813
+[11:47:50] [INFO] [Bullet] Distance to wall: 1249.99926757813 (85.114748675367% of viewport)
+[11:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.607, 1503.818), shooter_id=377504140483, bullet_pos=(499.0996, 974.7874)
+[11:47:50] [INFO] [Bullet] Using shooter_position, distance=807.075988769531
+[11:47:50] [INFO] [Bullet] Distance to wall: 807.075988769531 (54.9552881571977% of viewport)
+[11:47:50] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[11:47:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.8476, 781.7725), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:50] [ENEMY] [Enemy1] Heard gunshot at (450.8476, 781.7725), source_type=0, intensity=0.01, distance=457
+[11:47:50] [ENEMY] [Enemy2] Heard gunshot at (450.8476, 781.7725), source_type=0, intensity=0.04, distance=237
+[11:47:50] [ENEMY] [Enemy4] Heard gunshot at (450.8476, 781.7725), source_type=0, intensity=0.02, distance=369
+[11:47:50] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:47:50] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[11:47:50] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(461.1108, 752.5547), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:50] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:47:50] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5634, 752.2032), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:50] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:50] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:50] [INFO] [LastChance] Threat detected: @Area2D@2821
+[11:47:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:50] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:50] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[11:47:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(482.512, 735.1748), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:50] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:47:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5634, 752.2032), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:50] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[11:47:50] [INFO] [LastChance] Threat detected: @Area2D@2823
+[11:47:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.607, 1503.818), shooter_id=377504140483, bullet_pos=(55.04855, 1442.2)
+[11:47:50] [INFO] [Bullet] Using shooter_position, distance=1055.35827636719
+[11:47:50] [INFO] [Bullet] Distance to wall: 1055.35827636719 (71.8612856705914% of viewport)
+[11:47:50] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[11:47:50] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[11:47:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(697.0956, 754.8989), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(508.1747, 741.0459), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:50] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(662.3941, 759.1656), shooter_id=375507650760, bullet_pos=(37.58512, 743.717)
+[11:47:50] [INFO] [Bullet] Using shooter_position, distance=624.999938964844
+[11:47:50] [INFO] [Bullet] Distance to wall: 624.999938964844 (42.5573951176636% of viewport)
+[11:47:50] [INFO] [Bullet] Distance-based penetration chance: 97.0163723627258%
+[11:47:50] [INFO] [Bullet] Starting wall penetration at (37.58512, 743.717)
+[11:47:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(705.5332, 761.1702), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41.0798416137695
+[11:47:50] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:50] [INFO] [Bullet] Exiting penetration at (-9.067291, 742.5635) after traveling 41.6666679382324 pixels through wall
+[11:47:50] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(915.373, 822.9289)
+[11:47:50] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:50] [INFO] [Bullet] Using shooter_position, distance=1230,902
+[11:47:50] [INFO] [Bullet] Distance to wall: 1230,902 (83,814384% of viewport)
+[11:47:50] [INFO] [Bullet] Distance-based penetration chance: 48,883224%
+[11:47:50] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:50] [ENEMY] [Enemy3] Hit taken, health: 0/3
+[11:47:50] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[11:47:50] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[11:47:50] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[11:47:50] [INFO] [LastChance] Threat detected: @Area2D@2828
+[11:47:50] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:47:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.607, 1503.818), shooter_id=377504140483, bullet_pos=(160.3598, 1586.945)
+[11:47:50] [INFO] [Bullet] Using shooter_position, distance=951.883483886719
+[11:47:50] [INFO] [Bullet] Distance to wall: 951.883483886719 (64.8154967772308% of viewport)
+[11:47:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(535.0519, 763.7797), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[11:47:50] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[11:47:50] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[11:47:50] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[11:47:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(562.2756, 791.0034), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[11:47:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
+[11:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(666.7031, 764.4796), shooter_id=375507650760, bullet_pos=(43.24295, 808.326)
+[11:47:50] [INFO] [Bullet] Using shooter_position, distance=625
+[11:47:50] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
+[11:47:50] [INFO] [Bullet] Distance-based penetration chance: 97.0163675140638%
+[11:47:50] [INFO] [Bullet] Starting wall penetration at (43.24295, 808.326)
+[11:47:50] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[11:47:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.3959503173828
+[11:47:50] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:50] [INFO] [Bullet] Exiting penetration at (-3.308735, 811.5999) after traveling 41.6666679382324 pixels through wall
+[11:47:50] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(935.03455, 767.51154)
+[11:47:50] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:50] [INFO] [Bullet] Using shooter_position, distance=1209,6957
+[11:47:50] [INFO] [Bullet] Distance to wall: 1209,6957 (82,37041% of viewport)
+[11:47:50] [INFO] [Bullet] Distance-based penetration chance: 50,567863%
+[11:47:50] [INFO] [Bullet] Starting wall penetration at (935.03455, 767.51154)
+[11:47:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45,70115
+[11:47:50] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:50] [INFO] [Bullet] Exiting penetration at (981.69916, 767.9469) after traveling 41,666668 pixels through wall
+[11:47:50] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.607, 1503.818), shooter_id=377504140483, bullet_pos=(333.3794, 1413.002)
+[11:47:50] [INFO] [Bullet] Using shooter_position, distance=780.528381347656
+[11:47:50] [INFO] [Bullet] Distance to wall: 780.528381347656 (53.1476127510968% of viewport)
+[11:47:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(918.85803, 755.6207)
+[11:47:50] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:50] [INFO] [Bullet] Using shooter_position, distance=1189,6482
+[11:47:50] [INFO] [Bullet] Distance to wall: 1189,6482 (81,00533% of viewport)
+[11:47:50] [INFO] [Bullet] Distance-based penetration chance: 52,160442%
+[11:47:50] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.607, 1503.818), shooter_id=377504140483, bullet_pos=(453.004, 1584.734)
+[11:47:51] [INFO] [Bullet] Using shooter_position, distance=660.5771484375
+[11:47:51] [INFO] [Bullet] Distance to wall: 660.5771484375 (44.9799127313763% of viewport)
+[11:47:51] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(709.1179, 914.0654), source=ENEMY (Enemy4), range=1469, listeners=9
+[11:47:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[11:47:51] [INFO] [LastChance] Threat detected: Bullet
+[11:47:51] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:47:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:51] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(709.1179, 914.0654), source=ENEMY (Enemy4), range=1469, listeners=9
+[11:47:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[11:47:51] [INFO] [LastChance] Threat detected: @Area2D@2838
+[11:47:51] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:47:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:51] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(709.1179, 914.0654), source=ENEMY (Enemy4), range=1469, listeners=9
+[11:47:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[11:47:51] [INFO] [LastChance] Threat detected: @Area2D@2839
+[11:47:51] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:47:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:51] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:47:51] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:47:51] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:47:51] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[11:47:51] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[11:47:51] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[11:47:51] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[11:47:51] [INFO] [LastChance] Player died
+[11:47:51] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:51] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.607, 1503.818), shooter_id=377504140483, bullet_pos=(565.425, 1412.878)
+[11:47:51] [INFO] [Bullet] Using shooter_position, distance=550.741455078125
+[11:47:51] [INFO] [Bullet] Distance to wall: 550.741455078125 (37.5009984005057% of viewport)
+[11:47:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:51] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(616.7668, 966.4325), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[11:47:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[11:47:51] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:51] [ENEMY] [Enemy4] Hit taken, health: 3/4
+[11:47:51] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(709.1179, 914.0654), source=ENEMY (Enemy4), range=1469, listeners=9
+[11:47:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[11:47:51] [INFO] [LastChance] Threat detected: Bullet
+[11:47:51] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(635.9092, 989.9329), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[11:47:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[11:47:51] [ENEMY] [Enemy4] Hit taken, health: 2/4
+[11:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(709.1179, 914.0654), source=ENEMY (Enemy4), range=1469, listeners=9
+[11:47:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[11:47:51] [INFO] [LastChance] Threat detected: Bullet
+[11:47:51] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:51] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[11:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(669.8025, 989.9329), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[11:47:51] [ENEMY] [Enemy4] Heard gunshot at (669.8025, 989.9329), source_type=0, intensity=0.35, distance=84
+[11:47:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[11:47:51] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[11:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(708.3025, 989.9329), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[11:47:51] [ENEMY] [Enemy4] Heard gunshot at (708.3025, 989.9329), source_type=0, intensity=0.44, distance=75
+[11:47:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[11:47:51] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[11:47:51] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:47:51] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:47:51] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:47:51] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:47:51] [INFO] [Player] Ready! Grenades: 1/3
+[11:47:51] [INFO] [ScoreManager] Level started with 10 enemies
+[11:47:51] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
+[11:47:51] [ENEMY] [Enemy1] Registered as sound listener
+[11:47:51] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[11:47:51] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
+[11:47:51] [ENEMY] [Enemy2] Registered as sound listener
+[11:47:51] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[11:47:51] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
+[11:47:51] [ENEMY] [Enemy3] Registered as sound listener
+[11:47:51] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[11:47:51] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
+[11:47:51] [ENEMY] [Enemy4] Registered as sound listener
+[11:47:51] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[11:47:51] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
+[11:47:51] [ENEMY] [Enemy5] Registered as sound listener
+[11:47:51] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[11:47:51] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
+[11:47:51] [ENEMY] [Enemy6] Registered as sound listener
+[11:47:51] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[11:47:51] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
+[11:47:51] [ENEMY] [Enemy7] Registered as sound listener
+[11:47:51] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[11:47:51] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
+[11:47:51] [ENEMY] [Enemy8] Registered as sound listener
+[11:47:51] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[11:47:51] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
+[11:47:51] [ENEMY] [Enemy9] Registered as sound listener
+[11:47:51] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[11:47:51] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
+[11:47:51] [ENEMY] [Enemy10] Registered as sound listener
+[11:47:51] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[11:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.2357, 1255.764), source=PLAYER (AssaultRifle), range=1469, listeners=19
+[11:47:51] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
+[11:47:51] [ENEMY] [Enemy4] Heard gunshot at (450.2357, 1255.764), source_type=0, intensity=0.01, distance=499
+[11:47:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[11:47:51] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:47:51] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:47:51] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:47:51] [INFO] [LastChance] Found player: Player
+[11:47:51] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:47:51] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:47:51] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(454.9497, 1251.05), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[11:47:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(713.8514, 893.22424)
+[11:47:52] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:52] [INFO] [Bullet] Using shooter_position, distance=1143,4305
+[11:47:52] [INFO] [Bullet] Distance to wall: 1143,4305 (77,85829% of viewport)
+[11:47:52] [ENEMY] [Enemy4] Hit taken, health: 1/2
+[11:47:52] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:52] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:52] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[11:47:52] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[11:47:52] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[11:47:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1172.033, 1534.452), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:52] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.165, 1515.011), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:52] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1109.166, 1494.21), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:52] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(2475.2358, 1255.7643)
+[11:47:52] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:52] [INFO] [Bullet] Using shooter_position, distance=2775,5605
+[11:47:52] [INFO] [Bullet] Distance to wall: 2775,5605 (188,99303% of viewport)
+[11:47:52] [INFO] [Bullet] Distance-based penetration chance: 12,201396%
+[11:47:52] [INFO] [Bullet] Starting wall penetration at (2475.2358, 1255.7643)
+[11:47:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25,902588
+[11:47:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:52] [INFO] [Bullet] Exiting penetration at (2521.9026, 1255.7643) after traveling 41,666668 pixels through wall
+[11:47:52] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:47:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1079.044, 1472.158), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:52] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:52] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:47:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.34, 1529.76), shooter_id=429228297621, bullet_pos=(35.80219, 927.2578)
+[11:47:52] [INFO] [Bullet] Using shooter_position, distance=1291.66650390625
+[11:47:52] [INFO] [Bullet] Distance to wall: 1291.66650390625 (87.9519474162405% of viewport)
+[11:47:52] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:47:52] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:47:52] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:47:52] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:47:52] [INFO] [Player] Ready! Grenades: 1/3
+[11:47:52] [INFO] [ScoreManager] Level started with 10 enemies
+[11:47:52] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:47:52] [ENEMY] [Enemy1] Registered as sound listener
+[11:47:52] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[11:47:52] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:47:52] [ENEMY] [Enemy2] Registered as sound listener
+[11:47:52] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[11:47:52] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:47:52] [ENEMY] [Enemy3] Registered as sound listener
+[11:47:52] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[11:47:52] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:47:52] [ENEMY] [Enemy4] Registered as sound listener
+[11:47:52] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[11:47:52] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:47:52] [ENEMY] [Enemy5] Registered as sound listener
+[11:47:52] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[11:47:52] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:47:52] [ENEMY] [Enemy6] Registered as sound listener
+[11:47:52] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[11:47:52] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:47:52] [ENEMY] [Enemy7] Registered as sound listener
+[11:47:52] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[11:47:52] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:47:52] [ENEMY] [Enemy8] Registered as sound listener
+[11:47:52] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[11:47:52] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:47:52] [ENEMY] [Enemy9] Registered as sound listener
+[11:47:52] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[11:47:52] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:47:52] [ENEMY] [Enemy10] Registered as sound listener
+[11:47:52] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[11:47:52] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:47:52] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:47:52] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:47:52] [INFO] [LastChance] Found player: Player
+[11:47:52] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:47:52] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:47:52] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:47:53] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=20
+[11:47:53] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[11:47:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:53] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:47:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=456977811481, bullet_pos=(35.36759, 928.0717)
+[11:47:53] [INFO] [Bullet] Using shooter_position, distance=1291.66613769531
+[11:47:53] [INFO] [Bullet] Distance to wall: 1291.66613769531 (87.9519224802644% of viewport)
+[11:47:53] [INFO] [Bullet] Distance-based penetration chance: 44.0560904396916%
+[11:47:53] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=456977811481, bullet_pos=(58.62791, 897.98)
+[11:47:53] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[11:47:53] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[11:47:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=456977811481, bullet_pos=(52.86331, 834.4136)
+[11:47:53] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:47:53] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:47:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=456977811481, bullet_pos=(280.3878, 713.7009)
+[11:47:53] [INFO] [Bullet] Using shooter_position, distance=1181.76879882813
+[11:47:53] [INFO] [Bullet] Distance to wall: 1181.76879882813 (80.4688105934107% of viewport)
+[11:47:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=456977811481, bullet_pos=(227.4032, 704.6366)
+[11:47:54] [INFO] [Bullet] Using shooter_position, distance=1189.46142578125
+[11:47:54] [INFO] [Bullet] Distance to wall: 1189.46142578125 (80.9926157081426% of viewport)
+[11:47:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=456977811481, bullet_pos=(49.53117, 770.8614)
+[11:47:54] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:47:54] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:47:54] [INFO] [Bullet] Distance-based penetration chance: 47.3661071507571%
+[11:47:54] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=456977811481, bullet_pos=(501.0363, 879.3987)
+[11:47:54] [INFO] [Bullet] Using shooter_position, distance=908.065979003906
+[11:47:54] [INFO] [Bullet] Distance to wall: 908.065979003906 (61.8318822964734% of viewport)
+[11:47:54] [INFO] [LastChance] Threat detected: @Area2D@3356
+[11:47:54] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:47:54] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:47:54] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:47:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=456977811481, bullet_pos=(48.50871, 707.5523)
+[11:47:54] [INFO] [Bullet] Using shooter_position, distance=1250.00024414063
+[11:47:54] [INFO] [Bullet] Distance to wall: 1250.00024414063 (85.1148151713033% of viewport)
+[11:47:54] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[11:47:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=456977811481, bullet_pos=(65.86421, 1107.182)
+[11:47:54] [INFO] [Bullet] Using shooter_position, distance=1152.68225097656
+[11:47:54] [INFO] [Bullet] Distance to wall: 1152.68225097656 (78.4882540647525% of viewport)
+[11:47:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(398.6324, 772.4951), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:54] [ENEMY] [Enemy1] Heard gunshot at (398.6324, 772.4951), source_type=0, intensity=0.01, distance=434
+[11:47:54] [ENEMY] [Enemy2] Heard gunshot at (398.6324, 772.4951), source_type=0, intensity=0.05, distance=222
+[11:47:54] [ENEMY] [Enemy4] Heard gunshot at (398.6324, 772.4951), source_type=0, intensity=0.01, distance=421
+[11:47:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:47:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=456977811481, bullet_pos=(521.1617, 385.9908)
+[11:47:54] [INFO] [Bullet] Using shooter_position, distance=1194.59057617188
+[11:47:54] [INFO] [Bullet] Distance to wall: 1194.59057617188 (81.3418689899162% of viewport)
+[11:47:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(643.059, 762.0264), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:54] [INFO] [LastChance] Threat detected: @Area2D@3368
+[11:47:54] [INFO] [LastChance] Triggering last chance effect!
+[11:47:54] [INFO] [LastChance] Starting last chance effect:
+[11:47:54] [INFO] [LastChance]   - Time will be frozen (except player)
+[11:47:54] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[11:47:54] [INFO] [LastChance]   - Sepia intensity: 0.70
+[11:47:54] [INFO] [LastChance]   - Brightness: 0.60
+[11:47:54] [INFO] [LastChance] Pushed bullet @Area2D@3368 from distance 124.9 to 200.0
+[11:47:54] [INFO] [LastChance] Pushed 1 threatening bullets away from player
+[11:47:54] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[11:47:54] [INFO] [LastChance] Skipping player node: Player
+[11:47:54] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[11:47:54] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[11:47:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(413.3221, 744.6594), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:47:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(437.441, 735.0641), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:47:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(937.8186, 767.65295)
+[11:47:54] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:54] [INFO] [Bullet] Using shooter_position, distance=1211,9385
+[11:47:54] [INFO] [Bullet] Distance to wall: 1211,9385 (82,52312% of viewport)
+[11:47:54] [INFO] [Bullet] Distance-based penetration chance: 50,389694%
+[11:47:54] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(463.7824, 749.0332), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:47:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(919.8584, 764.80615)
+[11:47:54] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:54] [INFO] [Bullet] Using shooter_position, distance=1196,2726
+[11:47:54] [INFO] [Bullet] Distance to wall: 1196,2726 (81,456406% of viewport)
+[11:47:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(2488.632, 724.2527)
+[11:47:55] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:55] [INFO] [Bullet] Using shooter_position, distance=2591,878
+[11:47:55] [INFO] [Bullet] Distance to wall: 2591,878 (176,48575% of viewport)
+[11:47:55] [INFO] [Bullet] Distance-based penetration chance: 14,702852%
+[11:47:55] [INFO] [Bullet] Starting wall penetration at (2488.632, 724.2527)
+[11:47:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39,29811
+[11:47:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:55] [INFO] [Bullet] Exiting penetration at (2535.2952, 723.68164) after traveling 41,666668 pixels through wall
+[11:47:55] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(644.3447, 904.407), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:47:55] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[11:47:55] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[11:47:55] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[11:47:55] [INFO] [LastChance] Player died
+[11:47:55] [INFO] [LastChance] Ending last chance effect
+[11:47:55] [INFO] [LastChance] All process modes restored
+[11:47:55] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(777.4109, 909.6953), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [LastChance] Threat detected: @Area2D@3376
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(773.807, 913.6268), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [LastChance] Threat detected: @Area2D@3377
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(770.2031, 917.5583), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [LastChance] Threat detected: @Area2D@3378
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(643.059, 762.0264), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(766.5992, 921.4899), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [LastChance] Threat detected: @Area2D@3380
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [INFO] [LastChance] Threat detected: @Area2D@3379
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(762.9954, 925.4214), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [LastChance] Threat detected: @Area2D@3381
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(759.3915, 929.3529), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(646.7732, 941.9011), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:47:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(923.6064, 767.2533)
+[11:47:55] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:55] [INFO] [Bullet] Using shooter_position, distance=1200,7191
+[11:47:55] [INFO] [Bullet] Distance to wall: 1200,7191 (81,75917% of viewport)
+[11:47:55] [INFO] [Bullet] Distance-based penetration chance: 51,280968%
+[11:47:55] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:55] [INFO] [LastChance] Threat detected: @Area2D@3382
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(755.7876, 933.2844), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(754.3414, 913.9034), shooter_id=455266535629, bullet_pos=(504.6089, 902.3407)
+[11:47:55] [INFO] [Bullet] Using shooter_position, distance=249.999954223633
+[11:47:55] [INFO] [Bullet] Distance to wall: 249.999954223633 (17.0229565924668% of viewport)
+[11:47:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:55] [INFO] [Bullet] Starting wall penetration at (504.6089, 902.3407)
+[11:47:55] [INFO] [LastChance] Threat detected: @Area2D@3385
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(752.1837, 937.2159), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42.0527839660645
+[11:47:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:55] [INFO] [Bullet] Exiting penetration at (457.9922, 900.1823) after traveling 41.6666679382324 pixels through wall
+[11:47:55] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:55] [INFO] [LastChance] Threat detected: Bullet
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(748.5798, 941.1475), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [LastChance] Threat detected: @Area2D@3387
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(744.976, 945.079), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=456977811481, bullet_pos=(160.0139, 59.77499)
+[11:47:55] [INFO] [Bullet] Using shooter_position, distance=1656.4931640625
+[11:47:55] [INFO] [Bullet] Distance to wall: 1656.4931640625 (112.793665563353% of viewport)
+[11:47:55] [INFO] [LastChance] Threat detected: @Area2D@3388
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(643.059, 762.0264), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(741.3721, 949.0105), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [LastChance] Threat detected: @Area2D@3391
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(737.7682, 952.942), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(614.3024, 769.2618), shooter_id=454981322327, bullet_pos=(63.27579, 770.3408)
+[11:47:55] [INFO] [Bullet] Using shooter_position, distance=551.027587890625
+[11:47:55] [INFO] [Bullet] Distance to wall: 551.027587890625 (37.5204817098606% of viewport)
+[11:47:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:55] [INFO] [Bullet] Starting wall penetration at (63.27579, 770.3408)
+[11:47:55] [INFO] [LastChance] Threat detected: Bullet
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [INFO] [LastChance] Threat detected: @Area2D@3390
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(734.1643, 956.8735), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(659.7075, 975.0434), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:47:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15.3848161697388
+[11:47:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:55] [INFO] [Bullet] Exiting penetration at (16.61816, 769.4223) after traveling 41.6666679382324 pixels through wall
+[11:47:55] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:55] [INFO] [LastChance] Threat detected: @Area2D@3393
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(730.5604, 960.8051), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [LastChance] Threat detected: @Area2D@3395
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(726.9565, 964.7366), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(717.2853, 954.5812), shooter_id=455266535629, bullet_pos=(509.3419, 967.3239)
+[11:47:55] [INFO] [Bullet] Using shooter_position, distance=208.333450317383
+[11:47:55] [INFO] [Bullet] Distance to wall: 208.333450317383 (14.1858077235456% of viewport)
+[11:47:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:55] [INFO] [Bullet] Starting wall penetration at (509.3419, 967.3239)
+[11:47:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=456977811481, bullet_pos=(64.68605, 152.4377)
+[11:47:55] [INFO] [Bullet] Using shooter_position, distance=1634.57177734375
+[11:47:55] [INFO] [Bullet] Distance to wall: 1634.57177734375 (111.300998031797% of viewport)
+[11:47:55] [INFO] [LastChance] Threat detected: Bullet
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(723.3527, 968.6681), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.307186126709
+[11:47:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:55] [INFO] [Bullet] Exiting penetration at (462.7627, 970.1782) after traveling 41.6666679382324 pixels through wall
+[11:47:55] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:55] [INFO] [LastChance] Threat detected: @Area2D@3398
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(719.7488, 972.5996), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [LastChance] Threat detected: @Area2D@3399
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.4587, 765.4388), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(716.1449, 975.9336), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(712.541, 975.9336), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(694.0628, 984.9261), shooter_id=455266535629, bullet_pos=(611.9785, 999.2997)
+[11:47:55] [INFO] [Bullet] Using shooter_position, distance=83.3333206176758
+[11:47:55] [INFO] [Bullet] Distance to wall: 83.3333206176758 (5.67431903732211% of viewport)
+[11:47:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:55] [INFO] [LastChance] Threat detected: Bullet
+[11:47:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:55] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(708.9371, 975.9336), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:55] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(705.3333, 975.9336), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:56] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:47:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(701.7294, 975.9336), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(694.0628, 984.9261), shooter_id=455266535629, bullet_pos=(502.416, 979.9966)
+[11:47:56] [INFO] [Bullet] Using shooter_position, distance=191.710235595703
+[11:47:56] [INFO] [Bullet] Distance to wall: 191.710235595703 (13.0539024657499% of viewport)
+[11:47:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:56] [INFO] [Bullet] Starting wall penetration at (502.416, 979.9966)
+[11:47:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(684.8693, 997.1307), shooter_id=455266535629, bullet_pos=(684.8693, 997.1307)
+[11:47:56] [INFO] [Bullet] Using shooter_position, distance=0
+[11:47:56] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[11:47:56] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[11:47:56] [INFO] [Bullet] Starting wall penetration at (684.8693, 997.1307)
+[11:47:56] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[11:47:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.9635314941406
+[11:47:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 0.62149173021317
+[11:47:56] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:56] [INFO] [Bullet] Exiting penetration at (646.972, 1024.363) after traveling 41.6666717529297 pixels through wall
+[11:47:56] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(667.1027, 801.7784), shooter_id=454981322327, bullet_pos=(654.5621, 1009.734)
+[11:47:56] [INFO] [Bullet] Using shooter_position, distance=208.333404541016
+[11:47:56] [INFO] [Bullet] Distance to wall: 208.333404541016 (14.1858046065486% of viewport)
+[11:47:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:56] [INFO] [Bullet] Starting wall penetration at (654.5621, 1009.734)
+[11:47:56] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:56] [INFO] [Bullet] Exiting penetration at (462.6123, 972.9838) after traveling 35.416675567627 pixels through wall
+[11:47:56] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[11:47:56] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[11:47:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32.3747444152832
+[11:47:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=456977811481, bullet_pos=(223.6548, 275.0364)
+[11:47:56] [INFO] [Bullet] Using shooter_position, distance=1441.98413085938
+[11:47:56] [INFO] [Bullet] Distance to wall: 1441.98413085938 (98.1873510452216% of viewport)
+[11:47:56] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:56] [INFO] [Bullet] Exiting penetration at (651.753, 1056.316) after traveling 41.6666717529297 pixels through wall
+[11:47:56] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:56] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[11:47:56] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[11:47:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:56] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[11:47:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:56] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[11:47:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:56] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[11:47:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:56] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:47:56] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:47:56] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:47:56] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:47:56] [INFO] [Player] Ready! Grenades: 1/3
+[11:47:56] [INFO] [ScoreManager] Level started with 10 enemies
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:47:56] [ENEMY] [Enemy1] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:47:56] [ENEMY] [Enemy2] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:47:56] [ENEMY] [Enemy3] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:47:56] [ENEMY] [Enemy4] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:47:56] [ENEMY] [Enemy5] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:47:56] [ENEMY] [Enemy6] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:47:56] [ENEMY] [Enemy7] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:47:56] [ENEMY] [Enemy8] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:47:56] [ENEMY] [Enemy9] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:47:56] [ENEMY] [Enemy10] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[11:47:56] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:47:56] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:47:56] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:47:56] [INFO] [LastChance] Found player: Player
+[11:47:56] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:47:56] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:47:56] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:47:56] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:47:56] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:47:56] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:47:56] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:47:56] [INFO] [Player] Ready! Grenades: 1/3
+[11:47:56] [INFO] [ScoreManager] Level started with 10 enemies
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
+[11:47:56] [ENEMY] [Enemy1] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
+[11:47:56] [ENEMY] [Enemy2] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
+[11:47:56] [ENEMY] [Enemy3] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
+[11:47:56] [ENEMY] [Enemy4] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
+[11:47:56] [ENEMY] [Enemy5] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
+[11:47:56] [ENEMY] [Enemy6] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
+[11:47:56] [ENEMY] [Enemy7] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
+[11:47:56] [ENEMY] [Enemy8] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
+[11:47:56] [ENEMY] [Enemy9] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[11:47:56] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
+[11:47:56] [ENEMY] [Enemy10] Registered as sound listener
+[11:47:56] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[11:47:56] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:47:56] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:47:56] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:47:56] [INFO] [LastChance] Found player: Player
+[11:47:56] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:47:56] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:47:56] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:47:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=30
+[11:47:56] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
+[11:47:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:47:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:57] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:47:57] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:47:57] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:47:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=527240793026, bullet_pos=(35.36759, 928.0717)
+[11:47:57] [INFO] [Bullet] Using shooter_position, distance=1291.66613769531
+[11:47:57] [INFO] [Bullet] Distance to wall: 1291.66613769531 (87.9519224802644% of viewport)
+[11:47:57] [INFO] [Bullet] Distance-based penetration chance: 44.0560904396916%
+[11:47:57] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=527240793026, bullet_pos=(58.62791, 897.98)
+[11:47:57] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[11:47:57] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[11:47:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=527240793026, bullet_pos=(52.86331, 834.4136)
+[11:47:57] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:47:57] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:47:57] [INFO] [Bullet] Distance-based penetration chance: 47.3661071507571%
+[11:47:57] [INFO] [Bullet] Starting wall penetration at (52.86331, 834.4136)
+[11:47:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.9693183898926
+[11:47:57] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:57] [INFO] [Bullet] Exiting penetration at (13.4412, 809.4401) after traveling 41.6666679382324 pixels through wall
+[11:47:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=527240793026, bullet_pos=(324.1379, 712.7272)
+[11:47:57] [INFO] [Bullet] Using shooter_position, distance=1151.00427246094
+[11:47:57] [INFO] [Bullet] Distance to wall: 1151.00427246094 (78.3739974220932% of viewport)
+[11:47:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=527240793026, bullet_pos=(49.53117, 770.8614)
+[11:47:57] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:47:57] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:47:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=527240793026, bullet_pos=(506.7098, 827.6471)
+[11:47:57] [INFO] [Bullet] Using shooter_position, distance=941.684509277344
+[11:47:57] [INFO] [Bullet] Distance to wall: 941.684509277344 (64.1210298418178% of viewport)
+[11:47:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=527240793026, bullet_pos=(134.15, 698.6379)
+[11:47:57] [INFO] [Bullet] Using shooter_position, distance=1226.14880371094
+[11:47:57] [INFO] [Bullet] Distance to wall: 1226.14880371094 (83.4907267335144% of viewport)
+[11:47:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[11:47:57] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[11:47:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=527240793026, bullet_pos=(48.50871, 707.5523)
+[11:47:57] [INFO] [Bullet] Using shooter_position, distance=1250.00024414063
+[11:47:57] [INFO] [Bullet] Distance to wall: 1250.00024414063 (85.1148151713033% of viewport)
+[11:47:57] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[11:47:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=527240793026, bullet_pos=(307.8759, 459.0984)
+[11:47:57] [INFO] [Bullet] Using shooter_position, distance=1243.34655761719
+[11:47:57] [INFO] [Bullet] Distance to wall: 1243.34655761719 (84.6617534208718% of viewport)
+[11:47:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=527240793026, bullet_pos=(518.5961, 944.911)
+[11:47:57] [INFO] [Bullet] Using shooter_position, distance=775.025329589844
+[11:47:57] [INFO] [Bullet] Distance to wall: 775.025329589844 (52.7728998376874% of viewport)
+[11:47:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.7734, 770.168), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:57] [ENEMY] [Enemy1] Heard gunshot at (460.7734, 770.168), source_type=0, intensity=0.01, distance=450
+[11:47:57] [ENEMY] [Enemy2] Heard gunshot at (460.7734, 770.168), source_type=0, intensity=0.05, distance=228
+[11:47:57] [ENEMY] [Enemy4] Heard gunshot at (460.7734, 770.168), source_type=0, intensity=0.02, distance=363
+[11:47:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:47:57] [ENEMY] [Enemy2] Hit taken, health: 1/2
+[11:47:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:58] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[11:47:58] [INFO] [LastChance] Threat detected: @Area2D@3927
+[11:47:58] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
+[11:47:58] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(482.2587, 748.1107), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:58] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:47:58] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[11:47:58] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[11:47:58] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[11:47:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:58] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[11:47:58] [INFO] [LastChance] Threat detected: @Area2D@3930
+[11:47:58] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
+[11:47:58] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(510.4931, 740.0242), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:58] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:47:58] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[11:47:58] [ENEMY] [Enemy3] Hit taken, health: 1/4
+[11:47:58] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[11:47:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(695.4871, 757.5988), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(662.5121, 759.5705), shooter_id=525244303836, bullet_pos=(37.54514, 753.1453)
+[11:47:58] [INFO] [Bullet] Using shooter_position, distance=625
+[11:47:58] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
+[11:47:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(538.3769, 748.1918), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:58] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:47:58] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:58] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:47:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(703.6609, 764.4506), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:47:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:47:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(659.7824, 757.4227), shooter_id=525244303836, bullet_pos=(161.6784, 713.9205)
+[11:47:58] [INFO] [Bullet] Using shooter_position, distance=500.000030517578
+[11:47:58] [INFO] [Bullet] Distance to wall: 500.000030517578 (34.0459214969257% of viewport)
+[11:47:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:47:58] [INFO] [Bullet] Starting wall penetration at (161.6784, 713.9205)
+[11:47:58] [INFO] [LastChance] Threat detected: @Area2D@3934
+[11:47:58] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
+[11:47:58] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:58] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:47:58] [INFO] [Bullet] Exiting penetration at (115.1887, 709.8604) after traveling 41.6666679382324 pixels through wall
+[11:47:58] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:58] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[11:47:58] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[11:47:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(936.0222, 704.8553)
+[11:47:58] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:47:58] [INFO] [Bullet] Using shooter_position, distance=1171,7332
+[11:47:58] [INFO] [Bullet] Distance to wall: 1171,7332 (79,78547% of viewport)
+[11:47:58] [INFO] [Bullet] Distance-based penetration chance: 53,583622%
+[11:47:58] [INFO] [Bullet] Penetration failed (distance roll)
+[11:47:58] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[11:47:58] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[11:47:58] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[11:47:58] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[11:47:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(672.3049, 767.7014), shooter_id=525244303836, bullet_pos=(54.10272, 859.6313)
+[11:47:58] [INFO] [Bullet] Using shooter_position, distance=625
+[11:47:58] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
+[11:47:58] [INFO] [Bullet] Distance-based penetration chance: 97.0163675140638%
+[11:47:58] [INFO] [Bullet] Starting wall penetration at (54.10272, 859.6313)
+[11:47:58] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24.3209056854248
+[11:47:58] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:47:58] [INFO] [Bullet] Exiting penetration at (7.943626, 866.4954) after traveling 41.6666679382324 pixels through wall
+[11:47:58] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:47:58] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[11:47:58] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[11:47:58] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[11:47:58] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:59] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:59] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(616.284, 970.8563), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:59] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=7
+[11:47:59] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:59] [ENEMY] [Enemy4] Hit taken, health: 2/3
+[11:47:59] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:47:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(727.0881, 914.0651), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:47:59] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:47:59] [INFO] [LastChance] Threat detected: Bullet
+[11:47:59] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[11:47:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(646.1865, 989.9334), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:59] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=7
+[11:47:59] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:59] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:47:59] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:47:59] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:47:59] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:59] [ENEMY] [Enemy4] Hit taken, health: 1/3
+[11:47:59] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[11:47:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.9954, 989.9334), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:47:59] [ENEMY] [Enemy4] Heard gunshot at (683.9954, 989.9334), source_type=0, intensity=0.34, distance=86
+[11:47:59] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=7
+[11:47:59] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[11:47:59] [ENEMY] [Enemy4] Hit taken, health: 0/3
+[11:47:59] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[11:47:59] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[11:47:59] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 9)
+[11:47:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(810.8526, 788.5175), source=ENEMY (Enemy3), range=1469, listeners=9
+[11:47:59] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
+[11:47:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(722.3683, 989.6254), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[11:47:59] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[11:47:59] [INFO] [LastChance] Threat detected: Bullet
+[11:47:59] [INFO] [LastChance] Triggering last chance effect!
+[11:47:59] [INFO] [LastChance] Starting last chance effect:
+[11:47:59] [INFO] [LastChance]   - Time will be frozen (except player)
+[11:47:59] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[11:47:59] [INFO] [LastChance]   - Sepia intensity: 0.70
+[11:47:59] [INFO] [LastChance]   - Brightness: 0.60
+[11:47:59] [INFO] [LastChance] Pushed bullet Bullet from distance 110.4 to 200.0
+[11:47:59] [INFO] [LastChance] Pushed bullet @Area2D@3941 from distance 19.5 to 200.0
+[11:47:59] [INFO] [LastChance] Pushed 2 threatening bullets away from player
+[11:47:59] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[11:47:59] [INFO] [LastChance] Skipping player node: Player
+[11:47:59] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[11:47:59] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[11:47:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(756.4036, 978.8469), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[11:47:59] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[11:47:59] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[11:47:59] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[11:47:59] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[11:47:59] [INFO] [LastChance] Player died
+[11:47:59] [INFO] [LastChance] Ending last chance effect
+[11:47:59] [INFO] [LastChance] All process modes restored
+[11:47:59] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:47:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(810.8526, 788.5175), source=ENEMY (Enemy3), range=1469, listeners=9
+[11:47:59] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
+[11:47:59] [ENEMY] [Enemy3] Hit taken, health: 0/4
+[11:47:59] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[11:47:59] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[11:47:59] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 8)
+[11:47:59] [INFO] [LastChance] Threat detected: Bullet
+[11:47:59] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:47:59] [INFO] [LastChance] Threat detected: @Area2D@3943
+[11:47:59] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:47:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:00] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[11:48:00] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:48:00] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:48:00] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:48:00] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:48:00] [INFO] [Player] Ready! Grenades: 1/3
+[11:48:00] [INFO] [ScoreManager] Level started with 10 enemies
+[11:48:00] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
+[11:48:00] [ENEMY] [Enemy1] Registered as sound listener
+[11:48:00] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[11:48:00] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
+[11:48:00] [ENEMY] [Enemy2] Registered as sound listener
+[11:48:00] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[11:48:00] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
+[11:48:00] [ENEMY] [Enemy3] Registered as sound listener
+[11:48:00] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[11:48:00] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
+[11:48:00] [ENEMY] [Enemy4] Registered as sound listener
+[11:48:00] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[11:48:00] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
+[11:48:00] [ENEMY] [Enemy5] Registered as sound listener
+[11:48:00] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[11:48:00] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
+[11:48:00] [ENEMY] [Enemy6] Registered as sound listener
+[11:48:00] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[11:48:00] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
+[11:48:00] [ENEMY] [Enemy7] Registered as sound listener
+[11:48:00] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[11:48:00] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
+[11:48:00] [ENEMY] [Enemy8] Registered as sound listener
+[11:48:00] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[11:48:00] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
+[11:48:00] [ENEMY] [Enemy9] Registered as sound listener
+[11:48:00] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[11:48:00] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
+[11:48:00] [ENEMY] [Enemy10] Registered as sound listener
+[11:48:00] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[11:48:00] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:48:00] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:48:00] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:48:00] [INFO] [LastChance] Found player: Player
+[11:48:00] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:48:00] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:48:00] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:48:00] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=18
+[11:48:00] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
+[11:48:00] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:48:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:00] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:48:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:00] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:48:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:00] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:48:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:01] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:48:01] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:48:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=594064443667, bullet_pos=(35.36759, 928.0717)
+[11:48:01] [INFO] [Bullet] Using shooter_position, distance=1291.66613769531
+[11:48:01] [INFO] [Bullet] Distance to wall: 1291.66613769531 (87.9519224802644% of viewport)
+[11:48:01] [INFO] [Bullet] Distance-based penetration chance: 44.0560904396916%
+[11:48:01] [INFO] [Bullet] Starting wall penetration at (35.36759, 928.0717)
+[11:48:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42.8609504699707
+[11:48:01] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:01] [INFO] [Bullet] Exiting penetration at (-5.926409, 906.3327) after traveling 41.6666717529297 pixels through wall
+[11:48:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=594064443667, bullet_pos=(58.62791, 897.98)
+[11:48:01] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[11:48:01] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[11:48:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=594064443667, bullet_pos=(52.86331, 834.4136)
+[11:48:01] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:48:01] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:48:01] [INFO] [Bullet] Distance-based penetration chance: 47.3661071507571%
+[11:48:01] [INFO] [Bullet] Starting wall penetration at (52.86331, 834.4136)
+[11:48:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.9693183898926
+[11:48:01] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:01] [INFO] [Bullet] Exiting penetration at (13.4412, 809.4401) after traveling 41.6666679382324 pixels through wall
+[11:48:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=594064443667, bullet_pos=(399.1652, 698.6553)
+[11:48:01] [INFO] [Bullet] Using shooter_position, distance=1109.49340820313
+[11:48:01] [INFO] [Bullet] Distance to wall: 1109.49340820313 (75.5474463430301% of viewport)
+[11:48:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=594064443667, bullet_pos=(49.53117, 770.8614)
+[11:48:01] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:48:01] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:48:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=594064443667, bullet_pos=(137.2509, 702.4377)
+[11:48:01] [INFO] [Bullet] Using shooter_position, distance=1221.33679199219
+[11:48:01] [INFO] [Bullet] Distance to wall: 1221.33679199219 (83.1630680070754% of viewport)
+[11:48:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=594064443667, bullet_pos=(48.50871, 707.5523)
+[11:48:01] [INFO] [Bullet] Using shooter_position, distance=1250.00024414063
+[11:48:01] [INFO] [Bullet] Distance to wall: 1250.00024414063 (85.1148151713033% of viewport)
+[11:48:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=594064443667, bullet_pos=(684.7577, 875.943)
+[11:48:01] [INFO] [Bullet] Using shooter_position, distance=792.363891601563
+[11:48:01] [INFO] [Bullet] Distance to wall: 792.363891601563 (53.9535144078695% of viewport)
+[11:48:01] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[11:48:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 792.6666), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:01] [ENEMY] [Enemy1] Heard gunshot at (450, 792.6666), source_type=0, intensity=0.01, distance=467
+[11:48:01] [ENEMY] [Enemy2] Heard gunshot at (450, 792.6666), source_type=0, intensity=0.04, distance=248
+[11:48:01] [ENEMY] [Enemy4] Heard gunshot at (450, 792.6666), source_type=0, intensity=0.02, distance=366
+[11:48:01] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:48:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=594064443667, bullet_pos=(523.0006, 1009.405)
+[11:48:01] [INFO] [Bullet] Using shooter_position, distance=803.89013671875
+[11:48:01] [INFO] [Bullet] Distance to wall: 803.89013671875 (54.7383576327947% of viewport)
+[11:48:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=594064443667, bullet_pos=(519.2319, 1006.12)
+[11:48:01] [INFO] [Bullet] Using shooter_position, distance=808.888916015625
+[11:48:01] [INFO] [Bullet] Distance to wall: 808.888916015625 (55.0787337070635% of viewport)
+[11:48:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=594064443667, bullet_pos=(498.4831, 981.6524)
+[11:48:01] [INFO] [Bullet] Using shooter_position, distance=765.183166503906
+[11:48:01] [INFO] [Bullet] Distance to wall: 765.183166503906 (52.1027288550239% of viewport)
+[11:48:01] [INFO] [Bullet] Distance-based penetration chance: 85.8801496691388%
+[11:48:01] [INFO] [Bullet] Starting wall penetration at (498.4831, 981.6524)
+[11:48:01] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:48:01] [INFO] [Bullet] Exiting penetration at (526.2575, 1003.121) after traveling 30.1041698455811 pixels through wall
+[11:48:01] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[11:48:01] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[11:48:01] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.4109, 759.4841), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:01] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:48:01] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:01] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=594064443667, bullet_pos=(522.4123, 328.1241)
+[11:48:01] [INFO] [Bullet] Using shooter_position, distance=1246.25610351563
+[11:48:01] [INFO] [Bullet] Distance to wall: 1246.25610351563 (84.8598697512796% of viewport)
+[11:48:01] [INFO] [Bullet] Distance-based penetration chance: 47.6634852901738%
+[11:48:01] [INFO] [Bullet] Penetration failed (distance roll)
+[11:48:01] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:01] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:01] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:01] [INFO] [LastChance] Threat detected: @Area2D@4213
+[11:48:01] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:01] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[11:48:01] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[11:48:01] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[11:48:01] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[11:48:01] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(475.5, 738.3956), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[11:48:01] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[11:48:01] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[11:48:01] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[11:48:01] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[11:48:01] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[11:48:01] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[11:48:01] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[11:48:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(497.9271, 737.3387), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[11:48:01] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[11:48:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(916.9599, 724.88806)
+[11:48:02] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:02] [INFO] [Bullet] Using shooter_position, distance=1168,879
+[11:48:02] [INFO] [Bullet] Distance to wall: 1168,879 (79,591125% of viewport)
+[11:48:02] [INFO] [Bullet] Distance-based penetration chance: 53,810356%
+[11:48:02] [INFO] [Bullet] Starting wall penetration at (916.9599, 724.88806)
+[11:48:02] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27,617657
+[11:48:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(662.3962, 759.1295), shooter_id=592067956098, bullet_pos=(37.61642, 742.5401)
+[11:48:02] [INFO] [Bullet] Using shooter_position, distance=625
+[11:48:02] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
+[11:48:02] [INFO] [Bullet] Distance-based penetration chance: 97.0163675140638%
+[11:48:02] [INFO] [Bullet] Starting wall penetration at (37.61642, 742.5401)
+[11:48:02] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:02] [INFO] [Bullet] Exiting penetration at (963.60474, 723.4609) after traveling 41,66667 pixels through wall
+[11:48:02] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:02] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41.048267364502
+[11:48:02] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:02] [INFO] [Bullet] Exiting penetration at (-9.033806, 741.3015) after traveling 41.666675567627 pixels through wall
+[11:48:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.4233, 755.6633), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[11:48:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[11:48:02] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[11:48:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(938.5213, 768.1029)
+[11:48:02] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:02] [INFO] [Bullet] Using shooter_position, distance=1212,7672
+[11:48:02] [INFO] [Bullet] Distance to wall: 1212,7672 (82,57955% of viewport)
+[11:48:02] [INFO] [Bullet] Distance-based penetration chance: 50,323856%
+[11:48:02] [INFO] [Bullet] Starting wall penetration at (938.5213, 768.1029)
+[11:48:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=594064443667, bullet_pos=(54.58591, 1318.036)
+[11:48:02] [INFO] [Bullet] Using shooter_position, distance=1105.29370117188
+[11:48:02] [INFO] [Bullet] Distance to wall: 1105.29370117188 (75.261480568692% of viewport)
+[11:48:02] [INFO] [Bullet] Distance-based penetration chance: 58.8616060031926%
+[11:48:02] [INFO] [Bullet] Penetration failed (distance roll)
+[11:48:02] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49,19413
+[11:48:02] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:02] [INFO] [Bullet] Exiting penetration at (985.07465, 771.35345) after traveling 41,66667 pixels through wall
+[11:48:02] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:02] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[11:48:02] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(923.3766, 761.7916)
+[11:48:02] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:02] [INFO] [Bullet] Using shooter_position, distance=1197,0592
+[11:48:02] [INFO] [Bullet] Distance to wall: 1197,0592 (81,509964% of viewport)
+[11:48:02] [INFO] [Bullet] Distance-based penetration chance: 51,57171%
+[11:48:02] [INFO] [Bullet] Starting wall penetration at (923.3766, 761.7916)
+[11:48:02] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34,041775
+[11:48:02] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:02] [INFO] [Bullet] Exiting penetration at (970.0378, 762.5066) after traveling 41,666668 pixels through wall
+[11:48:02] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:02] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:02] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[11:48:02] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[11:48:02] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[11:48:02] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(592.1599, 947.1918), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[11:48:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[11:48:02] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:02] [ENEMY] [Enemy4] Hit taken, health: 1/2
+[11:48:02] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:02] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:02] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(617.0085, 973.9213), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[11:48:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[11:48:02] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:02] [ENEMY] [Enemy4] Hit taken, health: 0/2
+[11:48:02] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[11:48:02] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[11:48:02] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[11:48:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(649.6367, 986.8372), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:48:03] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=7
+[11:48:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(732.3418, 861.6979)
+[11:48:03] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:03] [INFO] [Bullet] Using shooter_position, distance=1130,8615
+[11:48:03] [INFO] [Bullet] Distance to wall: 1130,8615 (77,00243% of viewport)
+[11:48:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(686.9242, 985.9731), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:48:03] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=7
+[11:48:03] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[11:48:03] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[11:48:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(855.1037, 996.17395)
+[11:48:03] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:03] [INFO] [Bullet] Using shooter_position, distance=1312,8461
+[11:48:03] [INFO] [Bullet] Distance to wall: 1312,8461 (89,394104% of viewport)
+[11:48:03] [INFO] [Bullet] Distance-based penetration chance: 42,37355%
+[11:48:03] [INFO] [Bullet] Starting wall penetration at (855.1037, 996.17395)
+[11:48:03] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[11:48:03] [INFO] [Bullet] Raycast backward hit penetrating body at distance 2,7395957
+[11:48:03] [INFO] [Bullet] Max penetration distance exceeded: 70,833336 >= 48
+[11:48:03] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:03] [INFO] [Bullet] Exiting penetration at (906.2311, 1052.18) after traveling 70,833336 pixels through wall
+[11:48:03] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[11:48:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(719.1736, 970.8831), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:48:03] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=7
+[11:48:03] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:48:03] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:48:03] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:48:03] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[11:48:03] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[11:48:03] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[11:48:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(788.7787, 774.7902), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:48:03] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[11:48:03] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:48:03] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[11:48:03] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:48:04] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[11:48:04] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:48:04] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:48:04] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:48:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(795.2459, 738.969), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:48:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[11:48:04] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:48:04] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:48:04] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:48:04] [ENEMY] [Enemy2] Hit taken, health: 3/4
+[11:48:04] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:48:04] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:48:04] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:48:04] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:48:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(813.1076, 707.8677), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:48:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[11:48:04] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:48:04] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:48:04] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:48:04] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:48:04] [ENEMY] [Enemy7] Player distracted - priority attack triggered
+[11:48:04] [ENEMY] [Enemy1] State: SUPPRESSED -> IN_COVER
+[11:48:04] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
+[11:48:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(819.4846, 673.3064), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:48:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[11:48:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(33.965908, 443.33844)
+[11:48:04] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:04] [INFO] [Bullet] Using shooter_position, distance=444,63766
+[11:48:04] [INFO] [Bullet] Distance to wall: 444,63766 (30,276197% of viewport)
+[11:48:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(810.442, 642.0343), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:48:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[11:48:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(512.4133, 595.94403)
+[11:48:04] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:04] [INFO] [Bullet] Using shooter_position, distance=785,9495
+[11:48:04] [INFO] [Bullet] Distance to wall: 785,9495 (53,51675% of viewport)
+[11:48:04] [ENEMY] [Enemy10] FLANKING started: target=(991.4187, 692.3424), side=left, pos=(950.7806, 1421.252)
+[11:48:04] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[11:48:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(67.86676, 495.16766)
+[11:48:04] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:04] [INFO] [Bullet] Using shooter_position, distance=499,79688
+[11:48:04] [INFO] [Bullet] Distance to wall: 499,79688 (34,03209% of viewport)
+[11:48:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:04] [INFO] [Bullet] Starting wall penetration at (67.86676, 495.16766)
+[11:48:04] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9,367667
+[11:48:04] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:04] [INFO] [Bullet] Exiting penetration at (22.992046, 482.35992) after traveling 41,666668 pixels through wall
+[11:48:04] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(499.66626, 581.238)
+[11:48:04] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:04] [INFO] [Bullet] Using shooter_position, distance=766,4881
+[11:48:04] [INFO] [Bullet] Distance to wall: 766,4881 (52,191586% of viewport)
+[11:48:04] [INFO] [Bullet] Distance-based penetration chance: 85,77648%
+[11:48:04] [INFO] [Bullet] Starting wall penetration at (499.66626, 581.238)
+[11:48:04] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47,006718
+[11:48:04] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:04] [INFO] [Bullet] Exiting penetration at (453.86774, 572.2785) after traveling 41,666668 pixels through wall
+[11:48:04] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:04] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:04] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
+[11:48:04] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[11:48:04] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:04] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[11:48:04] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[11:48:04] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:04] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:05] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:05] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:05] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:05] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[11:48:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(454.5874, 537.996), source=ENEMY (Enemy2), range=1469, listeners=8
+[11:48:05] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[11:48:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:05] [INFO] [LastChance] Threat detected: Bullet
+[11:48:05] [INFO] [LastChance] Triggering last chance effect!
+[11:48:05] [INFO] [LastChance] Starting last chance effect:
+[11:48:05] [INFO] [LastChance]   - Time will be frozen (except player)
+[11:48:05] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[11:48:05] [INFO] [LastChance]   - Sepia intensity: 0.70
+[11:48:05] [INFO] [LastChance]   - Brightness: 0.60
+[11:48:05] [INFO] [LastChance] Pushed bullet Bullet from distance 107.3 to 200.0
+[11:48:05] [INFO] [LastChance] Pushed 1 threatening bullets away from player
+[11:48:05] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[11:48:05] [INFO] [LastChance] Skipping player node: Player
+[11:48:05] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[11:48:05] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[11:48:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(481.8157, 658.9559), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:48:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[11:48:05] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[11:48:05] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[11:48:05] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[11:48:05] [INFO] [LastChance] Player died
+[11:48:05] [INFO] [LastChance] Ending last chance effect
+[11:48:05] [INFO] [LastChance] All process modes restored
+[11:48:05] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(476.9443, 557.4424), shooter_id=591782742944, bullet_pos=(504.1075, 578.8786)
+[11:48:05] [INFO] [Bullet] Using shooter_position, distance=34.602653503418
+[11:48:05] [INFO] [Bullet] Distance to wall: 34.602653503418 (2.35615830571689% of viewport)
+[11:48:05] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[11:48:05] [INFO] [Bullet] Starting wall penetration at (504.1075, 578.8786)
+[11:48:05] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.2728271484375
+[11:48:05] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:05] [INFO] [Bullet] Exiting penetration at (530.0142, 617.6938) after traveling 41.6666679382324 pixels through wall
+[11:48:05] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(443.3157, 658.9559), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:48:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[11:48:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(404.8157, 658.9559), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:48:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[11:48:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(366.3157, 658.9559), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[11:48:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[11:48:05] [INFO] [ScoreManager] Combo ended at 2. Max combo: 2
+[11:48:06] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:48:06] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:48:06] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:48:06] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:48:06] [INFO] [Player] Ready! Grenades: 1/3
+[11:48:06] [INFO] [ScoreManager] Level started with 10 enemies
+[11:48:06] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
+[11:48:06] [ENEMY] [Enemy1] Registered as sound listener
+[11:48:06] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[11:48:06] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
+[11:48:06] [ENEMY] [Enemy2] Registered as sound listener
+[11:48:06] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[11:48:06] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
+[11:48:06] [ENEMY] [Enemy3] Registered as sound listener
+[11:48:06] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[11:48:06] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
+[11:48:06] [ENEMY] [Enemy4] Registered as sound listener
+[11:48:06] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[11:48:06] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
+[11:48:06] [ENEMY] [Enemy5] Registered as sound listener
+[11:48:06] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[11:48:06] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
+[11:48:06] [ENEMY] [Enemy6] Registered as sound listener
+[11:48:06] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[11:48:06] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
+[11:48:06] [ENEMY] [Enemy7] Registered as sound listener
+[11:48:06] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[11:48:06] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
+[11:48:06] [ENEMY] [Enemy8] Registered as sound listener
+[11:48:06] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[11:48:06] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
+[11:48:06] [ENEMY] [Enemy9] Registered as sound listener
+[11:48:06] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[11:48:06] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
+[11:48:06] [ENEMY] [Enemy10] Registered as sound listener
+[11:48:06] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[11:48:06] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:48:06] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:48:06] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:48:06] [INFO] [LastChance] Found player: Player
+[11:48:06] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:48:06] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:48:06] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:48:07] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=18
+[11:48:07] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
+[11:48:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:48:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.914, 1534.667), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:48:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1139.723, 1515.762), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:48:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.185, 1495.787), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:48:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1077.333, 1474.767), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:48:07] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:48:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.292, 1529.812), shooter_id=709927898092, bullet_pos=(34.31894, 930.0382)
+[11:48:07] [INFO] [Bullet] Using shooter_position, distance=1291.66650390625
+[11:48:07] [INFO] [Bullet] Distance to wall: 1291.66650390625 (87.9519474162405% of viewport)
+[11:48:07] [INFO] [Bullet] Distance-based penetration chance: 44.0560613477194%
+[11:48:07] [INFO] [Bullet] Penetration failed (distance roll)
+[11:48:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.366, 1524.568), shooter_id=709927898092, bullet_pos=(53.46296, 907.199)
+[11:48:07] [INFO] [Bullet] Using shooter_position, distance=1250.00085449219
+[11:48:07] [INFO] [Bullet] Distance to wall: 1250.00085449219 (85.1148567312636% of viewport)
+[11:48:07] [INFO] [Bullet] Distance-based penetration chance: 47.3660004801925%
+[11:48:07] [INFO] [Bullet] Starting wall penetration at (53.46296, 907.199)
+[11:48:07] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.9830436706543
+[11:48:07] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:07] [INFO] [Bullet] Exiting penetration at (12.88526, 884.1506) after traveling 41.6666679382324 pixels through wall
+[11:48:07] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:07] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[11:48:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.408, 1504.377), shooter_id=709927898092, bullet_pos=(42.89116, 850.7924)
+[11:48:07] [INFO] [Bullet] Using shooter_position, distance=1249.99938964844
+[11:48:07] [INFO] [Bullet] Distance to wall: 1249.99938964844 (85.114756987359% of viewport)
+[11:48:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(316.266, 810.9478), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:07] [ENEMY] [Enemy1] Heard gunshot at (316.266, 810.9478), source_type=0, intensity=0.01, distance=461
+[11:48:07] [ENEMY] [Enemy2] Heard gunshot at (316.266, 810.9478), source_type=0, intensity=0.03, distance=274
+[11:48:07] [ENEMY] [Enemy4] Heard gunshot at (316.266, 810.9478), source_type=0, intensity=0.01, distance=492
+[11:48:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:48:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.408, 1504.377), shooter_id=709927898092, bullet_pos=(211.7186, 713.6665)
+[11:48:07] [INFO] [Bullet] Using shooter_position, distance=1195.52258300781
+[11:48:07] [INFO] [Bullet] Distance to wall: 1195.52258300781 (81.4053310491846% of viewport)
+[11:48:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.162, 1483.119), shooter_id=709927898092, bullet_pos=(34.16724, 794.1619)
+[11:48:07] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[11:48:07] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[11:48:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(507.81622, 804.2682)
+[11:48:07] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:07] [INFO] [Bullet] Using shooter_position, distance=951,1701
+[11:48:07] [INFO] [Bullet] Distance to wall: 951,1701 (64,76692% of viewport)
+[11:48:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:48:07] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:48:07] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:48:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.162, 1483.119), shooter_id=709927898092, bullet_pos=(141.4702, 694.1759)
+[11:48:07] [INFO] [Bullet] Using shooter_position, distance=1223.90747070313
+[11:48:07] [INFO] [Bullet] Distance to wall: 1223.90747070313 (83.3381102475644% of viewport)
+[11:48:07] [INFO] [Bullet] Distance-based penetration chance: 49.4388713778415%
+[11:48:07] [INFO] [Bullet] Penetration failed (distance roll)
+[11:48:07] [INFO] [LastChance] Threat detected: Bullet
+[11:48:07] [INFO] [LastChance] Triggering last chance effect!
+[11:48:07] [INFO] [LastChance] Starting last chance effect:
+[11:48:07] [INFO] [LastChance]   - Time will be frozen (except player)
+[11:48:07] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[11:48:07] [INFO] [LastChance]   - Sepia intensity: 0.70
+[11:48:07] [INFO] [LastChance]   - Brightness: 0.60
+[11:48:07] [INFO] [LastChance] Pushed bullet Bullet from distance 135.5 to 200.0
+[11:48:07] [INFO] [LastChance] Pushed 1 threatening bullets away from player
+[11:48:07] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[11:48:07] [INFO] [LastChance] Skipping player node: Player
+[11:48:07] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[11:48:07] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[11:48:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(340.8676, 782.6381), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:48:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(370.0046, 760.0339), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:48:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(405.2646, 752.2118), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:48:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(936.25665, 781.70306)
+[11:48:08] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:08] [INFO] [Bullet] Using shooter_position, distance=1219,6869
+[11:48:08] [INFO] [Bullet] Distance to wall: 1219,6869 (83,05073% of viewport)
+[11:48:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(443.7646, 752.2118), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:48:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(930.0641, 766.73364)
+[11:48:08] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:08] [INFO] [Bullet] Using shooter_position, distance=1205,3629
+[11:48:08] [INFO] [Bullet] Distance to wall: 1205,3629 (82,07538% of viewport)
+[11:48:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(927.0875, 749.0073)
+[11:48:08] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:08] [INFO] [Bullet] Using shooter_position, distance=1191,8486
+[11:48:08] [INFO] [Bullet] Distance to wall: 1191,8486 (81,15517% of viewport)
+[11:48:08] [INFO] [Bullet] Distance-based penetration chance: 51,985638%
+[11:48:08] [INFO] [Bullet] Starting wall penetration at (927.0875, 749.0073)
+[11:48:08] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37,754
+[11:48:08] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:08] [INFO] [Bullet] Exiting penetration at (973.7532, 748.69794) after traveling 41,666668 pixels through wall
+[11:48:08] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(2488.7227, 686.6377)
+[11:48:08] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:08] [INFO] [Bullet] Using shooter_position, distance=2581,7073
+[11:48:08] [INFO] [Bullet] Distance to wall: 2581,7073 (175,79321% of viewport)
+[11:48:08] [INFO] [Bullet] Distance-based penetration chance: 14,84136%
+[11:48:08] [INFO] [Bullet] Penetration failed (distance roll)
+[11:48:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(672.5296, 957.2601), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:09] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(755.8391, 888.0096)
+[11:48:09] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:09] [INFO] [Bullet] Using shooter_position, distance=1166,1277
+[11:48:09] [INFO] [Bullet] Distance to wall: 1166,1277 (79,40378% of viewport)
+[11:48:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(703.2266, 974.4243), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=7
+[11:48:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(887.65173, 1013.627)
+[11:48:09] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:09] [INFO] [Bullet] Using shooter_position, distance=1347,355
+[11:48:09] [INFO] [Bullet] Distance to wall: 1347,355 (91,74388% of viewport)
+[11:48:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(916.39575, 993.47546)
+[11:48:09] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:09] [INFO] [Bullet] Using shooter_position, distance=1351,5823
+[11:48:09] [INFO] [Bullet] Distance to wall: 1351,5823 (92,03172% of viewport)
+[11:48:09] [INFO] [Bullet] Distance-based penetration chance: 39,29633%
+[11:48:09] [INFO] [Bullet] Penetration failed (distance roll)
+[11:48:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(916.39575, 993.47546)
+[11:48:09] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:09] [INFO] [Bullet] Using shooter_position, distance=1351,5823
+[11:48:09] [INFO] [Bullet] Distance to wall: 1351,5823 (92,03172% of viewport)
+[11:48:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(740.2915, 977.5811), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=7
+[11:48:09] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[11:48:09] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[11:48:09] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[11:48:09] [INFO] [LastChance] Player died
+[11:48:09] [INFO] [LastChance] Ending last chance effect
+[11:48:09] [INFO] [LastChance] All process modes restored
+[11:48:09] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(931.3087, 698.05273)
+[11:48:09] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:09] [INFO] [Bullet] Using shooter_position, distance=1163,8787
+[11:48:09] [INFO] [Bullet] Distance to wall: 1163,8787 (79,25064% of viewport)
+[11:48:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(496.2966, 805.9229)
+[11:48:09] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:09] [INFO] [Bullet] Using shooter_position, distance=946,47876
+[11:48:09] [INFO] [Bullet] Distance to wall: 946,47876 (64,44748% of viewport)
+[11:48:09] [INFO] [Bullet] Distance-based penetration chance: 71,477936%
+[11:48:09] [INFO] [Bullet] Starting wall penetration at (496.2966, 805.9229)
+[11:48:09] [INFO] [Bullet] Raycast backward hit penetrating body at distance 44,132607
+[11:48:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1046.659, 1460.827), shooter_id=709927898092, bullet_pos=(61.21283, 761.5664)
+[11:48:09] [INFO] [Bullet] Using shooter_position, distance=1208.33312988281
+[11:48:09] [INFO] [Bullet] Distance to wall: 1208.33312988281 (82.2776247424219% of viewport)
+[11:48:09] [INFO] [Bullet] Distance-based penetration chance: 50.6761044671745%
+[11:48:09] [INFO] [Bullet] Penetration failed (distance roll)
+[11:48:09] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:09] [INFO] [Bullet] Exiting penetration at (456.01627, 802.606) after traveling 35,416668 pixels through wall
+[11:48:09] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[11:48:09] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:48:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(778.4088, 976.6572), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
+[11:48:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.9379, 905.6211), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:48:09] [INFO] [LastChance] Threat detected: @Area2D@4514
+[11:48:09] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(811.5511, 963.7228), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.9379, 905.6211), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:48:10] [INFO] [LastChance] Threat detected: @Area2D@4515
+[11:48:10] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:10] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.9379, 905.6211), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:48:10] [INFO] [LastChance] Threat detected: Bullet
+[11:48:10] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:10] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.9379, 905.6211), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:48:10] [INFO] [LastChance] Threat detected: @Area2D@4516
+[11:48:10] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:10] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.9379, 905.6211), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:48:10] [INFO] [LastChance] Threat detected: @Area2D@4517
+[11:48:10] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:10] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[11:48:10] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.9379, 905.6211), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:48:10] [INFO] [LastChance] Threat detected: Bullet
+[11:48:10] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:10] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.9379, 905.6211), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:48:10] [INFO] [LastChance] Threat detected: @Area2D@4518
+[11:48:10] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:10] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.9379, 905.6211), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:48:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(557.7406, 49.15116)
+[11:48:10] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:10] [INFO] [Bullet] Using shooter_position, distance=559,90216
+[11:48:10] [INFO] [Bullet] Distance to wall: 559,90216 (38,12477% of viewport)
+[11:48:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:10] [INFO] [LastChance] Threat detected: @Area2D@4519
+[11:48:10] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:10] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.9379, 905.6211), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:48:10] [INFO] [LastChance] Threat detected: Bullet
+[11:48:10] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:10] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.9379, 905.6211), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:48:10] [INFO] [LastChance] Threat detected: @Area2D@4521
+[11:48:10] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:10] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.9379, 905.6211), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:48:10] [INFO] [LastChance] Threat detected: @Area2D@4522
+[11:48:10] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:10] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[11:48:10] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[11:48:10] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.9379, 905.6211), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:48:10] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.9379, 905.6211), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:48:10] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.9379, 905.6211), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:48:10] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.9379, 905.6211), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:48:10] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.9379, 905.6211), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:48:10] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.9379, 905.6211), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[11:48:10] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:48:10] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:48:10] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:48:10] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:48:10] [INFO] [Player] Ready! Grenades: 1/3
+[11:48:10] [INFO] [ScoreManager] Level started with 10 enemies
+[11:48:10] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:48:10] [ENEMY] [Enemy1] Registered as sound listener
+[11:48:10] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[11:48:10] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:48:10] [ENEMY] [Enemy2] Registered as sound listener
+[11:48:10] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[11:48:10] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:48:10] [ENEMY] [Enemy3] Registered as sound listener
+[11:48:10] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[11:48:10] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:48:10] [ENEMY] [Enemy4] Registered as sound listener
+[11:48:10] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[11:48:10] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:48:10] [ENEMY] [Enemy5] Registered as sound listener
+[11:48:10] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[11:48:10] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:48:10] [ENEMY] [Enemy6] Registered as sound listener
+[11:48:10] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[11:48:10] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:48:10] [ENEMY] [Enemy7] Registered as sound listener
+[11:48:10] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[11:48:10] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:48:10] [ENEMY] [Enemy8] Registered as sound listener
+[11:48:10] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[11:48:10] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:48:10] [ENEMY] [Enemy9] Registered as sound listener
+[11:48:10] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[11:48:10] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:48:10] [ENEMY] [Enemy10] Registered as sound listener
+[11:48:10] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[11:48:10] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:48:10] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:48:10] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:48:10] [INFO] [LastChance] Found player: Player
+[11:48:10] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:48:10] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:48:10] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:48:10] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=20
+[11:48:10] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:48:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:48:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:48:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:48:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:48:11] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:48:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=760444095928, bullet_pos=(35.36759, 928.0717)
+[11:48:11] [INFO] [Bullet] Using shooter_position, distance=1291.66613769531
+[11:48:11] [INFO] [Bullet] Distance to wall: 1291.66613769531 (87.9519224802644% of viewport)
+[11:48:11] [INFO] [Bullet] Distance-based penetration chance: 44.0560904396916%
+[11:48:11] [INFO] [Bullet] Penetration failed (distance roll)
+[11:48:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=760444095928, bullet_pos=(58.62791, 897.98)
+[11:48:11] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[11:48:11] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[11:48:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=760444095928, bullet_pos=(52.86331, 834.4136)
+[11:48:11] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:48:11] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:48:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=760444095928, bullet_pos=(323.3097, 711.5461)
+[11:48:11] [INFO] [Bullet] Using shooter_position, distance=1152.42431640625
+[11:48:11] [INFO] [Bullet] Distance to wall: 1152.42431640625 (78.4706908255601% of viewport)
+[11:48:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=760444095928, bullet_pos=(226.8561, 703.9038)
+[11:48:11] [INFO] [Bullet] Using shooter_position, distance=1190.35888671875
+[11:48:11] [INFO] [Bullet] Distance to wall: 1190.35888671875 (81.0537254736621% of viewport)
+[11:48:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=760444095928, bullet_pos=(49.53117, 770.8614)
+[11:48:11] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:48:11] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:48:11] [INFO] [Bullet] Distance-based penetration chance: 47.3661071507571%
+[11:48:11] [INFO] [Bullet] Starting wall penetration at (49.53117, 770.8614)
+[11:48:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.3594455718994
+[11:48:11] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:11] [INFO] [Bullet] Exiting penetration at (11.13478, 744.3379) after traveling 41.6666679382324 pixels through wall
+[11:48:11] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=760444095928, bullet_pos=(497.6326, 838.6313)
+[11:48:11] [INFO] [Bullet] Using shooter_position, distance=939.775634765625
+[11:48:11] [INFO] [Bullet] Distance to wall: 939.775634765625 (63.9910510662042% of viewport)
+[11:48:11] [INFO] [Bullet] Distance-based penetration chance: 72.0104404227618%
+[11:48:11] [INFO] [Bullet] Penetration failed (distance roll)
+[11:48:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=760444095928, bullet_pos=(48.50871, 707.5523)
+[11:48:11] [INFO] [Bullet] Using shooter_position, distance=1250.00024414063
+[11:48:11] [INFO] [Bullet] Distance to wall: 1250.00024414063 (85.1148151713033% of viewport)
+[11:48:11] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[11:48:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=760444095928, bullet_pos=(500.0745, 991.0417)
+[11:48:11] [INFO] [Bullet] Using shooter_position, distance=795.623718261719
+[11:48:11] [INFO] [Bullet] Distance to wall: 795.623718261719 (54.1754819994522% of viewport)
+[11:48:11] [INFO] [Bullet] Distance-based penetration chance: 83.4619376673057%
+[11:48:11] [INFO] [Bullet] Starting wall penetration at (500.0745, 991.0417)
+[11:48:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=760444095928, bullet_pos=(503.5212, 994.664)
+[11:48:11] [INFO] [Bullet] Using shooter_position, distance=790.654541015625
+[11:48:11] [INFO] [Bullet] Distance to wall: 790.654541015625 (53.8371215832545% of viewport)
+[11:48:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.5477275848389
+[11:48:11] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:11] [INFO] [Bullet] Exiting penetration at (482.1541, 1016.552) after traveling 25.5885429382324 pixels through wall
+[11:48:11] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
+[11:48:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=760444095928, bullet_pos=(501.4808, 420.5326)
+[11:48:12] [INFO] [Bullet] Using shooter_position, distance=1172.73413085938
+[11:48:12] [INFO] [Bullet] Distance to wall: 1172.73413085938 (79.853623438129% of viewport)
+[11:48:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:12] [ENEMY] [Enemy2] Heard gunshot at (689.5667, 752.2189), source_type=1, intensity=0.02, distance=353
+[11:48:12] [ENEMY] [Enemy4] Heard gunshot at (689.5667, 752.2189), source_type=1, intensity=0.07, distance=184
+[11:48:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:12] [INFO] [LastChance] Threat detected: Bullet
+[11:48:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:12] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[11:48:12] [ENEMY] [Enemy1] Hit taken, health: 1/2
+[11:48:12] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[11:48:12] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[11:48:12] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:48:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:12] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:48:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:12] [INFO] [LastChance] Threat detected: @Area2D@4793
+[11:48:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:12] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:48:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:12] [INFO] [LastChance] Threat detected: @Area2D@4794
+[11:48:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:12] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:48:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:12] [INFO] [LastChance] Threat detected: @Area2D@4795
+[11:48:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:12] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:48:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:12] [INFO] [LastChance] Threat detected: @Area2D@4796
+[11:48:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:12] [INFO] [LastChance] Threat detected: @Area2D@4797
+[11:48:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:12] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:48:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:12] [INFO] [LastChance] Threat detected: @Area2D@4798
+[11:48:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:12] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:48:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:12] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:48:12] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:48:12] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:48:12] [INFO] [LastChance] Threat detected: @Area2D@4799
+[11:48:12] [INFO] [LastChance] Triggering last chance effect!
+[11:48:12] [INFO] [LastChance] Starting last chance effect:
+[11:48:12] [INFO] [LastChance]   - Time will be frozen (except player)
+[11:48:12] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[11:48:12] [INFO] [LastChance]   - Sepia intensity: 0.70
+[11:48:12] [INFO] [LastChance]   - Brightness: 0.60
+[11:48:12] [INFO] [LastChance] Pushed bullet @Area2D@4795 from distance 27.2 to 200.0
+[11:48:12] [INFO] [LastChance] Pushed bullet @Area2D@4796 from distance 19.4 to 200.0
+[11:48:12] [INFO] [LastChance] Pushed bullet @Area2D@4797 from distance 59.0 to 200.0
+[11:48:12] [INFO] [LastChance] Pushed bullet @Area2D@4798 from distance 100.3 to 200.0
+[11:48:12] [INFO] [LastChance] Pushed bullet @Area2D@4799 from distance 141.8 to 200.0
+[11:48:12] [INFO] [LastChance] Pushed 5 threatening bullets away from player
+[11:48:12] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[11:48:12] [INFO] [LastChance] Skipping player node: Player
+[11:48:12] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[11:48:12] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[11:48:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.8422, 937.6429), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1074.1989, 238.80328)
+[11:48:13] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:13] [INFO] [Bullet] Using shooter_position, distance=1100,4227
+[11:48:13] [INFO] [Bullet] Distance to wall: 1100,4227 (74,92981% of viewport)
+[11:48:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.8422, 937.6429), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(909.61993, 46.75992)
+[11:48:13] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:13] [INFO] [Bullet] Using shooter_position, distance=910,82104
+[11:48:13] [INFO] [Bullet] Distance to wall: 910,82104 (62,019478% of viewport)
+[11:48:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.8422, 937.6429), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1087.2892, 300.95874)
+[11:48:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=1128,1729
+[11:48:14] [INFO] [Bullet] Distance to wall: 1128,1729 (76,81937% of viewport)
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(511.19073, 504.80368)
+[11:48:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=718,4307
+[11:48:14] [INFO] [Bullet] Distance to wall: 718,4307 (48,91927% of viewport)
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1085.8857, 247.28644)
+[11:48:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=1113,6869
+[11:48:14] [INFO] [Bullet] Distance to wall: 1113,6869 (75,83299% of viewport)
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1339.2173, 692.2963)
+[11:48:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=1507,5732
+[11:48:14] [INFO] [Bullet] Distance to wall: 1507,5732 (102,653435% of viewport)
+[11:48:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.8422, 937.6429), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(910.13043, 65.41582)
+[11:48:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=912,4783
+[11:48:14] [INFO] [Bullet] Distance to wall: 912,4783 (62,132324% of viewport)
+[11:48:14] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[11:48:14] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[11:48:14] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[11:48:14] [INFO] [LastChance] Player died
+[11:48:14] [INFO] [LastChance] Ending last chance effect
+[11:48:14] [INFO] [LastChance] All process modes restored
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1384.8148, 608.59845)
+[11:48:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=1512,6481
+[11:48:14] [INFO] [Bullet] Distance to wall: 1512,6481 (102,99899% of viewport)
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(662.5734, 759.792), shooter_id=758447606458, bullet_pos=(37.5748, 758.4883)
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=624.999877929688
+[11:48:14] [INFO] [Bullet] Distance to wall: 624.999877929688 (42.5573909616676% of viewport)
+[11:48:14] [INFO] [Bullet] Distance-based penetration chance: 97.0163772113878%
+[11:48:14] [INFO] [Bullet] Starting wall penetration at (37.5748, 758.4883)
+[11:48:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41.0918502807617
+[11:48:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:14] [INFO] [Bullet] Exiting penetration at (-9.091763, 758.3909) after traveling 41.6666679382324 pixels through wall
+[11:48:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(769.6364, 912.0997), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:14] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:48:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.8422, 937.6429), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(659.8648, 757.6297), shooter_id=758447606458, bullet_pos=(39.62164, 777.0001)
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=620.545593261719
+[11:48:14] [INFO] [Bullet] Distance to wall: 620.545593261719 (42.2540905279183% of viewport)
+[11:48:14] [INFO] [Bullet] Distance-based penetration chance: 97.3702277174286%
+[11:48:14] [INFO] [Bullet] Starting wall penetration at (39.62164, 777.0001)
+[11:48:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.0203247070313
+[11:48:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:14] [INFO] [Bullet] Exiting penetration at (-6.894253, 773.2518) after traveling 41.6666717529297 pixels through wall
+[11:48:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1459.2449, 777.0035)
+[11:48:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=1653,218
+[11:48:14] [INFO] [Bullet] Distance to wall: 1653,218 (112,570656% of viewport)
+[11:48:14] [INFO] [LastChance] Threat detected: @Area2D@4813
+[11:48:14] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:14] [INFO] [LastChance] Threat detected: Bullet
+[11:48:14] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(921.7383, 933.44855)
+[11:48:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=1311,8413
+[11:48:14] [INFO] [Bullet] Distance to wall: 1311,8413 (89,32569% of viewport)
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(659.5992, 757.0681), shooter_id=758447606458, bullet_pos=(178.0688, 712.8579)
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=483.555603027344
+[11:48:14] [INFO] [Bullet] Distance to wall: 483.555603027344 (32.9261901904799% of viewport)
+[11:48:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:14] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[11:48:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(769.6364, 912.0997), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:14] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(831.5346, 1002.74994)
+[11:48:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=1302,6731
+[11:48:14] [INFO] [Bullet] Distance to wall: 1302,6731 (88,70141% of viewport)
+[11:48:14] [INFO] [Bullet] Distance-based penetration chance: 43,181694%
+[11:48:14] [INFO] [Bullet] Starting wall penetration at (831.5346, 1002.74994)
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(659.6398, 757.1401), shooter_id=758447606458, bullet_pos=(135.6683, 714.8955)
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=525.671630859375
+[11:48:14] [INFO] [Bullet] Distance to wall: 525.671630859375 (35.7939479701092% of viewport)
+[11:48:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:14] [INFO] [Bullet] Starting wall penetration at (135.6683, 714.8955)
+[11:48:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10.8333597183228
+[11:48:14] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:48:14] [INFO] [Bullet] Exiting penetration at (810.3219, 1019.0472) after traveling 21,75026 pixels through wall
+[11:48:14] [INFO] [Bullet] Damage multiplier after penetration: 0,05625
+[11:48:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:14] [INFO] [Bullet] Exiting penetration at (89.21651, 710.4227) after traveling 41.6666679382324 pixels through wall
+[11:48:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1505.0751, 626.5783)
+[11:48:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=1630,2919
+[11:48:14] [INFO] [Bullet] Distance to wall: 1630,2919 (111,009575% of viewport)
+[11:48:14] [INFO] [LastChance] Threat detected: Bullet
+[11:48:14] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:14] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(659.5992, 757.0681), shooter_id=758447606458, bullet_pos=(67.80959, 727.6723)
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=592.519226074219
+[11:48:14] [INFO] [Bullet] Distance to wall: 592.519226074219 (40.3457236501765% of viewport)
+[11:48:14] [INFO] [Bullet] Distance-based penetration chance: 99.5966557414607%
+[11:48:14] [INFO] [Bullet] Starting wall penetration at (67.80959, 727.6723)
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(659.7007, 757.2639), shooter_id=758447606458, bullet_pos=(49.74672, 722.2485)
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=610.958190917969
+[11:48:14] [INFO] [Bullet] Distance to wall: 610.958190917969 (41.601266672654% of viewport)
+[11:48:14] [INFO] [Bullet] Distance-based penetration chance: 98.1318555485703%
+[11:48:14] [INFO] [Bullet] Starting wall penetration at (49.74672, 722.2485)
+[11:48:14] [INFO] [LastChance] Threat detected: @Area2D@4821
+[11:48:14] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.8444004058838
+[11:48:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 4.28530406951904
+[11:48:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:14] [INFO] [Bullet] Exiting penetration at (3.27787, 717.9561) after traveling 41.6666679382324 pixels through wall
+[11:48:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:14] [INFO] [Bullet] Exiting penetration at (27.75286, 733.0543) after traveling 35.4166679382324 pixels through wall
+[11:48:14] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(522.5277, 571.15466)
+[11:48:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=774,11426
+[11:48:14] [INFO] [Bullet] Distance to wall: 774,11426 (52,71087% of viewport)
+[11:48:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(711.3624, 766.6311), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1529.5684, 777.50543)
+[11:48:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=1715,8362
+[11:48:14] [INFO] [Bullet] Distance to wall: 1715,8362 (116,83445% of viewport)
+[11:48:14] [INFO] [Bullet] Distance-based penetration chance: 26,63311%
+[11:48:14] [INFO] [Bullet] Starting wall penetration at (1529.5684, 777.50543)
+[11:48:14] [INFO] [LastChance] Threat detected: Bullet
+[11:48:14] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(701.9802, 787.9769), shooter_id=758447606458, bullet_pos=(677.2047, 821.4774)
+[11:48:14] [INFO] [Bullet] Using shooter_position, distance=41.6666870117188
+[11:48:14] [INFO] [Bullet] Distance to wall: 41.6666870117188 (2.83716133690932% of viewport)
+[11:48:14] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[11:48:14] [INFO] [Bullet] Starting wall penetration at (677.2047, 821.4774)
+[11:48:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 0,6988425
+[11:48:14] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:48:14] [INFO] [Bullet] Exiting penetration at (649.4561, 858.998) after traveling 41.6666679382324 pixels through wall
+[11:48:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19,186571
+[11:48:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:14] [INFO] [Bullet] Exiting penetration at (1536.2924, 818.9388) after traveling 36,975445 pixels through wall
+[11:48:14] [INFO] [Bullet] Damage multiplier after penetration: 0,028125
+[11:48:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.8422, 937.6429), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:14] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[11:48:14] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[11:48:14] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:48:14] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:48:14] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:48:14] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:48:14] [INFO] [Player] Ready! Grenades: 1/3
+[11:48:14] [INFO] [ScoreManager] Level started with 10 enemies
+[11:48:14] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:48:14] [ENEMY] [Enemy1] Registered as sound listener
+[11:48:14] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[11:48:14] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:48:14] [ENEMY] [Enemy2] Registered as sound listener
+[11:48:14] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[11:48:14] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:48:14] [ENEMY] [Enemy3] Registered as sound listener
+[11:48:14] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[11:48:14] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:48:14] [ENEMY] [Enemy4] Registered as sound listener
+[11:48:14] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[11:48:14] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:48:14] [ENEMY] [Enemy5] Registered as sound listener
+[11:48:14] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[11:48:14] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:48:14] [ENEMY] [Enemy6] Registered as sound listener
+[11:48:14] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[11:48:14] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:48:14] [ENEMY] [Enemy7] Registered as sound listener
+[11:48:14] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[11:48:14] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:48:14] [ENEMY] [Enemy8] Registered as sound listener
+[11:48:14] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[11:48:14] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:48:14] [ENEMY] [Enemy9] Registered as sound listener
+[11:48:14] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[11:48:14] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:48:14] [ENEMY] [Enemy10] Registered as sound listener
+[11:48:14] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[11:48:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[11:48:14] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[11:48:14] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[11:48:14] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[11:48:14] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:48:14] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:48:14] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:48:14] [INFO] [LastChance] Found player: Player
+[11:48:14] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:48:14] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:48:14] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:48:15] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:48:15] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:48:15] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:48:15] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:48:15] [INFO] [Player] Ready! Grenades: 1/3
+[11:48:15] [INFO] [ScoreManager] Level started with 10 enemies
+[11:48:15] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:48:15] [ENEMY] [Enemy1] Registered as sound listener
+[11:48:15] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[11:48:15] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:48:15] [ENEMY] [Enemy2] Registered as sound listener
+[11:48:15] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[11:48:15] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:48:15] [ENEMY] [Enemy3] Registered as sound listener
+[11:48:15] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[11:48:15] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:48:15] [ENEMY] [Enemy4] Registered as sound listener
+[11:48:15] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[11:48:15] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:48:15] [ENEMY] [Enemy5] Registered as sound listener
+[11:48:15] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[11:48:15] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:48:15] [ENEMY] [Enemy6] Registered as sound listener
+[11:48:15] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[11:48:15] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:48:15] [ENEMY] [Enemy7] Registered as sound listener
+[11:48:15] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[11:48:15] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:48:15] [ENEMY] [Enemy8] Registered as sound listener
+[11:48:15] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[11:48:15] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:48:15] [ENEMY] [Enemy9] Registered as sound listener
+[11:48:15] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[11:48:15] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:48:15] [ENEMY] [Enemy10] Registered as sound listener
+[11:48:15] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[11:48:15] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:48:15] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:48:15] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:48:15] [INFO] [LastChance] Found player: Player
+[11:48:15] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:48:15] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:48:15] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:48:15] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=20
+[11:48:15] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[11:48:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:48:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:48:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:48:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:48:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:48:15] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:48:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=827603289782, bullet_pos=(35.36759, 928.0717)
+[11:48:15] [INFO] [Bullet] Using shooter_position, distance=1291.66613769531
+[11:48:15] [INFO] [Bullet] Distance to wall: 1291.66613769531 (87.9519224802644% of viewport)
+[11:48:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=827603289782, bullet_pos=(58.62791, 897.98)
+[11:48:16] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[11:48:16] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[11:48:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=827603289782, bullet_pos=(400.2334, 700.535)
+[11:48:16] [INFO] [Bullet] Using shooter_position, distance=1137.13122558594
+[11:48:16] [INFO] [Bullet] Distance to wall: 1137.13122558594 (77.4293561500907% of viewport)
+[11:48:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=827603289782, bullet_pos=(52.86331, 834.4136)
+[11:48:16] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:48:16] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:48:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=827603289782, bullet_pos=(403.2637, 705.8287)
+[11:48:16] [INFO] [Bullet] Using shooter_position, distance=1101.41918945313
+[11:48:16] [INFO] [Bullet] Distance to wall: 1101.41918945313 (74.9976579411635% of viewport)
+[11:48:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=827603289782, bullet_pos=(517.2431, 802.9825)
+[11:48:16] [INFO] [Bullet] Using shooter_position, distance=982.475646972656
+[11:48:16] [INFO] [Bullet] Distance to wall: 982.475646972656 (66.8985734157798% of viewport)
+[11:48:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=827603289782, bullet_pos=(49.53117, 770.8614)
+[11:48:16] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:48:16] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:48:16] [INFO] [Bullet] Distance-based penetration chance: 47.3661071507571%
+[11:48:16] [INFO] [Bullet] Penetration failed (distance roll)
+[11:48:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=827603289782, bullet_pos=(269.3211, 703.5972)
+[11:48:16] [INFO] [Bullet] Using shooter_position, distance=1159.45825195313
+[11:48:16] [INFO] [Bullet] Distance to wall: 1159.45825195313 (78.9496444312137% of viewport)
+[11:48:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=827603289782, bullet_pos=(524.5838, 803.1334)
+[11:48:16] [INFO] [Bullet] Using shooter_position, distance=948.251159667969
+[11:48:16] [INFO] [Bullet] Distance to wall: 948.251159667969 (64.5681651419208% of viewport)
+[11:48:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=827603289782, bullet_pos=(48.50871, 707.5523)
+[11:48:16] [INFO] [Bullet] Using shooter_position, distance=1250.00024414063
+[11:48:16] [INFO] [Bullet] Distance to wall: 1250.00024414063 (85.1148151713033% of viewport)
+[11:48:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=827603289782, bullet_pos=(522.1646, 814.1033)
+[11:48:16] [INFO] [Bullet] Using shooter_position, distance=905.102600097656
+[11:48:16] [INFO] [Bullet] Distance to wall: 905.102600097656 (61.6301003775735% of viewport)
+[11:48:16] [INFO] [Bullet] Distance-based penetration chance: 74.7648828928309%
+[11:48:16] [INFO] [Bullet] Starting wall penetration at (522.1646, 814.1033)
+[11:48:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33.1010589599609
+[11:48:16] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:16] [INFO] [Bullet] Exiting penetration at (554.3307, 828.1616) after traveling 30.1041679382324 pixels through wall
+[11:48:16] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[11:48:16] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[11:48:16] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[11:48:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=827603289782, bullet_pos=(312.7937, 464.3361)
+[11:48:16] [INFO] [Bullet] Using shooter_position, distance=1236.21081542969
+[11:48:16] [INFO] [Bullet] Distance to wall: 1236.21081542969 (84.1758676138521% of viewport)
+[11:48:16] [ENEMY] [Enemy2] Hit taken, health: 3/4
+[11:48:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=827603289782, bullet_pos=(994.5187, 296.5511)
+[11:48:16] [INFO] [Bullet] Using shooter_position, distance=1246.8466796875
+[11:48:16] [INFO] [Bullet] Distance to wall: 1246.8466796875 (84.9000831687964% of viewport)
+[11:48:16] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[11:48:16] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:48:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(637.3588, 814.6652), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:16] [ENEMY] [Enemy2] Heard gunshot at (637.3588, 814.6652), source_type=1, intensity=0.02, distance=356
+[11:48:16] [ENEMY] [Enemy4] Heard gunshot at (637.3588, 814.6652), source_type=1, intensity=0.07, distance=184
+[11:48:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:16] [INFO] [LastChance] Threat detected: @Area2D@5348
+[11:48:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:16] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[11:48:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[11:48:16] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:48:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(635.3761, 817.8285), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:16] [INFO] [LastChance] Threat detected: @Area2D@5350
+[11:48:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:16] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[11:48:16] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:48:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(633.3934, 820.9918), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:16] [INFO] [LastChance] Threat detected: @Area2D@5351
+[11:48:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:16] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:48:16] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:48:16] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:48:16] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:48:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(631.4106, 824.1552), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:16] [INFO] [LastChance] Threat detected: @Area2D@5352
+[11:48:16] [INFO] [LastChance] Triggering last chance effect!
+[11:48:16] [INFO] [LastChance] Starting last chance effect:
+[11:48:16] [INFO] [LastChance]   - Time will be frozen (except player)
+[11:48:16] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[11:48:16] [INFO] [LastChance]   - Sepia intensity: 0.70
+[11:48:16] [INFO] [LastChance]   - Brightness: 0.60
+[11:48:16] [INFO] [LastChance] Pushed bullet @Area2D@5349 from distance 148.6 to 200.0
+[11:48:16] [INFO] [LastChance] Pushed bullet @Area2D@5350 from distance 21.3 to 200.0
+[11:48:16] [INFO] [LastChance] Pushed bullet @Area2D@5351 from distance 25.5 to 200.0
+[11:48:16] [INFO] [LastChance] Pushed bullet @Area2D@5352 from distance 66.3 to 200.0
+[11:48:16] [INFO] [LastChance] Pushed 4 threatening bullets away from player
+[11:48:16] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[11:48:16] [INFO] [LastChance] Skipping player node: Player
+[11:48:16] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[11:48:16] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[11:48:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(596.2126, 976.4559), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[11:48:18] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[11:48:18] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[11:48:18] [INFO] [LastChance] Player died
+[11:48:18] [INFO] [LastChance] Ending last chance effect
+[11:48:18] [INFO] [LastChance] All process modes restored
+[11:48:18] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[11:48:18] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[11:48:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(410.6808, 577.6536), shooter_id=825321588319, bullet_pos=(499.47, 707.5118)
+[11:48:18] [INFO] [Bullet] Using shooter_position, distance=157.310836791992
+[11:48:18] [INFO] [Bullet] Distance to wall: 157.310836791992 (10.7115841462885% of viewport)
+[11:48:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(604.0692, 803.8962), shooter_id=825606800764, bullet_pos=(527.9082, 822.2306)
+[11:48:18] [INFO] [Bullet] Using shooter_position, distance=78.3367156982422
+[11:48:18] [INFO] [Bullet] Distance to wall: 78.3367156982422 (5.3340910204116% of viewport)
+[11:48:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:18] [INFO] [Bullet] Starting wall penetration at (527.9082, 822.2306)
+[11:48:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.5791807174683
+[11:48:18] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:18] [INFO] [Bullet] Exiting penetration at (492.5312, 791.7963) after traveling 41.6666679382324 pixels through wall
+[11:48:18] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(612.4172, 839.7344), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(596.2126, 976.4559), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(602.965, 805.1654), shooter_id=825606800764, bullet_pos=(477.5996, 706.4879)
+[11:48:18] [INFO] [Bullet] Using shooter_position, distance=159.542251586914
+[11:48:18] [INFO] [Bullet] Distance to wall: 159.542251586914 (10.8635252828847% of viewport)
+[11:48:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:18] [INFO] [LastChance] Threat detected: @Area2D@5356
+[11:48:18] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(785.4902, 879.5864), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:48:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=827603289782, bullet_pos=(1366.536, 699.9567)
+[11:48:18] [INFO] [Bullet] Using shooter_position, distance=850.894653320313
+[11:48:18] [INFO] [Bullet] Distance to wall: 850.894653320313 (57.9389816018796% of viewport)
+[11:48:18] [INFO] [Bullet] Distance-based penetration chance: 79.0711881311405%
+[11:48:18] [INFO] [Bullet] Starting wall penetration at (1366.536, 699.9567)
+[11:48:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=827603289782, bullet_pos=(1369.926, 703.6323)
+[11:48:18] [INFO] [Bullet] Using shooter_position, distance=848.06982421875
+[11:48:18] [INFO] [Bullet] Distance to wall: 848.06982421875 (57.7466337939515% of viewport)
+[11:48:18] [INFO] [Bullet] Distance-based penetration chance: 79.2955939070566%
+[11:48:18] [INFO] [Bullet] Already penetrating, cannot start new penetration
+[11:48:18] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:48:18] [INFO] [Bullet] Exiting penetration at (1384.671, 719.6215) after traveling 21.7502632141113 pixels through wall
+[11:48:18] [INFO] [Bullet] Damage multiplier after penetration: 0.05625
+[11:48:18] [INFO] [LastChance] Threat detected: @Area2D@5359
+[11:48:18] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(596.2126, 976.4559), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(785.4902, 879.5864), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:48:18] [INFO] [LastChance] Threat detected: Bullet
+[11:48:18] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(617.4375, 862.5192), shooter_id=825606800764, bullet_pos=(614.051, 1404.176)
+[11:48:18] [INFO] [Bullet] Using shooter_position, distance=541.6669921875
+[11:48:18] [INFO] [Bullet] Distance to wall: 541.6669921875 (36.8831015358171% of viewport)
+[11:48:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(602.965, 805.1654), shooter_id=825606800764, bullet_pos=(42.81153, 1020.372)
+[11:48:18] [INFO] [Bullet] Using shooter_position, distance=600.071594238281
+[11:48:18] [INFO] [Bullet] Distance to wall: 600.071594238281 (40.859978286048% of viewport)
+[11:48:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(785.4902, 879.5864), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:48:18] [INFO] [LastChance] Threat detected: Bullet
+[11:48:18] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:18] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[11:48:18] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[11:48:18] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:48:18] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:48:18] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:48:18] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:48:18] [INFO] [Player] Ready! Grenades: 1/3
+[11:48:18] [INFO] [ScoreManager] Level started with 10 enemies
+[11:48:18] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:48:18] [ENEMY] [Enemy1] Registered as sound listener
+[11:48:18] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[11:48:18] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:48:18] [ENEMY] [Enemy2] Registered as sound listener
+[11:48:18] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[11:48:18] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:48:18] [ENEMY] [Enemy3] Registered as sound listener
+[11:48:18] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[11:48:18] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:48:18] [ENEMY] [Enemy4] Registered as sound listener
+[11:48:18] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[11:48:18] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:48:18] [ENEMY] [Enemy5] Registered as sound listener
+[11:48:18] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[11:48:18] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:48:18] [ENEMY] [Enemy6] Registered as sound listener
+[11:48:18] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[11:48:18] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:48:18] [ENEMY] [Enemy7] Registered as sound listener
+[11:48:18] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[11:48:18] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:48:18] [ENEMY] [Enemy8] Registered as sound listener
+[11:48:18] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[11:48:18] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:48:18] [ENEMY] [Enemy9] Registered as sound listener
+[11:48:18] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[11:48:18] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:48:18] [ENEMY] [Enemy10] Registered as sound listener
+[11:48:18] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[11:48:18] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:48:18] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:48:18] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:48:18] [INFO] [LastChance] Found player: Player
+[11:48:18] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:48:18] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:48:18] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:48:19] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[11:48:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=20
+[11:48:19] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[11:48:19] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:48:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:19] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[11:48:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:19] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:48:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:19] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:48:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[11:48:19] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[11:48:19] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[11:48:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1178.326, 1529.775), shooter_id=877146408495, bullet_pos=(35.36759, 928.0717)
+[11:48:20] [INFO] [Bullet] Using shooter_position, distance=1291.66613769531
+[11:48:20] [INFO] [Bullet] Distance to wall: 1291.66613769531 (87.9519224802644% of viewport)
+[11:48:20] [INFO] [Bullet] Distance-based penetration chance: 44.0560904396916%
+[11:48:20] [INFO] [Bullet] Starting wall penetration at (35.36759, 928.0717)
+[11:48:20] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42.8609504699707
+[11:48:20] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:20] [INFO] [Bullet] Exiting penetration at (-5.926409, 906.3327) after traveling 41.6666717529297 pixels through wall
+[11:48:20] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=877146408495, bullet_pos=(58.62791, 897.98)
+[11:48:20] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[11:48:20] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[11:48:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=877146408495, bullet_pos=(52.86331, 834.4136)
+[11:48:20] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:48:20] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:48:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=877146408495, bullet_pos=(228.5105, 706.1393)
+[11:48:20] [INFO] [Bullet] Using shooter_position, distance=1187.6318359375
+[11:48:20] [INFO] [Bullet] Distance to wall: 1187.6318359375 (80.8680355713626% of viewport)
+[11:48:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.496, 1524.127), shooter_id=877146408495, bullet_pos=(485.1434, 711.7079)
+[11:48:20] [INFO] [Bullet] Using shooter_position, distance=1043.79711914063
+[11:48:20] [INFO] [Bullet] Distance to wall: 1043.79711914063 (71.0740652159412% of viewport)
+[11:48:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=877146408495, bullet_pos=(49.53117, 770.8614)
+[11:48:20] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[11:48:20] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[11:48:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=877146408495, bullet_pos=(177.8438, 699.8192)
+[11:48:20] [INFO] [Bullet] Using shooter_position, distance=1192.06591796875
+[11:48:20] [INFO] [Bullet] Distance to wall: 1192.06591796875 (81.1699603704283% of viewport)
+[11:48:20] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[11:48:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=877146408495, bullet_pos=(48.50871, 707.5523)
+[11:48:20] [INFO] [Bullet] Using shooter_position, distance=1250.00024414063
+[11:48:20] [INFO] [Bullet] Distance to wall: 1250.00024414063 (85.1148151713033% of viewport)
+[11:48:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=877146408495, bullet_pos=(497.4903, 954.7132)
+[11:48:20] [INFO] [Bullet] Using shooter_position, distance=821.408813476563
+[11:48:20] [INFO] [Bullet] Distance to wall: 821.408813476563 (55.9312365472401% of viewport)
+[11:48:20] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[11:48:20] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[11:48:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.006, 1481.311), shooter_id=877146408495, bullet_pos=(511.6544, 913.5174)
+[11:48:20] [INFO] [Bullet] Using shooter_position, distance=801.962341308594
+[11:48:20] [INFO] [Bullet] Distance to wall: 801.962341308594 (54.607090498414% of viewport)
+[11:48:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.2933, 757.1832), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:20] [ENEMY] [Enemy2] Heard gunshot at (683.2933, 757.1832), source_type=1, intensity=0.02, distance=351
+[11:48:20] [ENEMY] [Enemy4] Heard gunshot at (683.2933, 757.1832), source_type=1, intensity=0.07, distance=184
+[11:48:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.9239, 765.5493), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:20] [ENEMY] [Enemy1] Heard gunshot at (450.9239, 765.5493), source_type=0, intensity=0.01, distance=442
+[11:48:20] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:48:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=877146408495, bullet_pos=(504.9458, 426.0754)
+[11:48:20] [INFO] [Bullet] Using shooter_position, distance=1166.21520996094
+[11:48:20] [INFO] [Bullet] Distance to wall: 1166.21520996094 (79.4097381269159% of viewport)
+[11:48:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(674.9288, 763.8025), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(661.1707, 768.6036), shooter_id=875149920723, bullet_pos=(498.4695, 804.7438)
+[11:48:20] [INFO] [Bullet] Using shooter_position, distance=166.66667175293
+[11:48:20] [INFO] [Bullet] Distance to wall: 166.66667175293 (11.3486401526422% of viewport)
+[11:48:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:20] [INFO] [Bullet] Starting wall penetration at (498.4695, 804.7438)
+[11:48:20] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48.234432220459
+[11:48:20] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[11:48:20] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:20] [INFO] [Bullet] Exiting penetration at (452.9132, 814.863) after traveling 41.6666641235352 pixels through wall
+[11:48:20] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:20] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(461.5958, 735.6656), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:20] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:48:20] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(666.5643, 770.4217), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:20] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:20] [INFO] [LastChance] Threat detected: @Area2D@5634
+[11:48:20] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:20] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:20] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:20] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:20] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[11:48:20] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[11:48:20] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[11:48:20] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[11:48:20] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[11:48:20] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[11:48:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(483.8619, 736.0534), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:20] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[11:48:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=877146408495, bullet_pos=(58.17936, 1426.583)
+[11:48:20] [INFO] [Bullet] Using shooter_position, distance=1053.43383789063
+[11:48:20] [INFO] [Bullet] Distance to wall: 1053.43383789063 (71.7302471159919% of viewport)
+[11:48:20] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:48:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(626.8333, 801.8631), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(647.4675, 772.6851), shooter_id=875149920723, bullet_pos=(64.61662, 796.3998)
+[11:48:20] [INFO] [Bullet] Using shooter_position, distance=583.333129882813
+[11:48:20] [INFO] [Bullet] Distance to wall: 583.333129882813 (39.7202254687622% of viewport)
+[11:48:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:20] [INFO] [Bullet] Starting wall penetration at (64.61662, 796.3998)
+[11:48:20] [INFO] [LastChance] Threat detected: @Area2D@5637
+[11:48:20] [INFO] [LastChance] Triggering last chance effect!
+[11:48:20] [INFO] [LastChance] Starting last chance effect:
+[11:48:20] [INFO] [LastChance]   - Time will be frozen (except player)
+[11:48:20] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[11:48:20] [INFO] [LastChance]   - Sepia intensity: 0.70
+[11:48:20] [INFO] [LastChance]   - Brightness: 0.60
+[11:48:20] [INFO] [LastChance] Pushed bullet @Area2D@5637 from distance 112.0 to 200.0
+[11:48:20] [INFO] [LastChance] Pushed 1 threatening bullets away from player
+[11:48:20] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[11:48:20] [INFO] [LastChance] Skipping player node: Player
+[11:48:20] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:20] [INFO] [Bullet] Exiting penetration at (59.62076, 796.603) after traveling 0 pixels through wall
+[11:48:20] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:20] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[11:48:20] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[11:48:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(513.6561, 755.9174), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:21] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:48:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(536.9907, 779.252), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:21] [ENEMY] [Enemy3] Heard gunshot at (536.9907, 779.252), source_type=0, intensity=0.31, distance=89
+[11:48:21] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:48:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(913.40314, 770.1393)
+[11:48:21] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:21] [INFO] [Bullet] Using shooter_position, distance=1194,7467
+[11:48:21] [INFO] [Bullet] Distance to wall: 1194,7467 (81,3525% of viewport)
+[11:48:21] [INFO] [Bullet] Distance-based penetration chance: 51,755417%
+[11:48:21] [INFO] [Bullet] Penetration failed (distance roll)
+[11:48:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(564.2144, 806.4757), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:21] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:48:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(935.4598, 814.2143)
+[11:48:21] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:21] [INFO] [Bullet] Using shooter_position, distance=1240,1733
+[11:48:21] [INFO] [Bullet] Distance to wall: 1240,1733 (84,44569% of viewport)
+[11:48:21] [INFO] [Bullet] Distance-based penetration chance: 48,1467%
+[11:48:21] [INFO] [Bullet] Penetration failed (distance roll)
+[11:48:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(713.2799, 823.1923)
+[11:48:21] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:21] [INFO] [Bullet] Using shooter_position, distance=1089,2263
+[11:48:21] [INFO] [Bullet] Distance to wall: 1089,2263 (74,16743% of viewport)
+[11:48:21] [INFO] [Bullet] Distance-based penetration chance: 60,138012%
+[11:48:21] [INFO] [Bullet] Starting wall penetration at (713.2799, 823.1923)
+[11:48:21] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:48:21] [INFO] [Bullet] Exiting penetration at (759.6559, 828.39307) after traveling 41,666668 pixels through wall
+[11:48:21] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(621.9082, 925.5785), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:21] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(630.3463, 960.5833), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:21] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(938.55646, 922.18207)
+[11:48:21] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:21] [INFO] [Bullet] Using shooter_position, distance=1315,7917
+[11:48:21] [INFO] [Bullet] Distance to wall: 1315,7917 (89,59468% of viewport)
+[11:48:21] [INFO] [Bullet] Distance-based penetration chance: 42,13954%
+[11:48:21] [INFO] [Bullet] Starting wall penetration at (938.55646, 922.18207)
+[11:48:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49,22323
+[11:48:21] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:21] [INFO] [Bullet] Exiting penetration at (985.2204, 921.6815) after traveling 41,666668 pixels through wall
+[11:48:21] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.7656, 989.0732), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=7
+[11:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(914.53876, 904.81244)
+[11:48:22] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:22] [INFO] [Bullet] Using shooter_position, distance=1286,494
+[11:48:22] [INFO] [Bullet] Distance to wall: 1286,494 (87,59975% of viewport)
+[11:48:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(687.1599, 989.9338), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=7
+[11:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(737.24347, 863.3303)
+[11:48:22] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:22] [INFO] [Bullet] Using shooter_position, distance=1135,2828
+[11:48:22] [INFO] [Bullet] Distance to wall: 1135,2828 (77,3035% of viewport)
+[11:48:22] [INFO] [Bullet] Distance-based penetration chance: 56,47925%
+[11:48:22] [INFO] [Bullet] Starting wall penetration at (737.24347, 863.3303)
+[11:48:22] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[11:48:22] [INFO] [Bullet] Exiting penetration at (697.8896, 854.1226) after traveling 35,416664 pixels through wall
+[11:48:22] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[11:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(926.8832, 855.1833)
+[11:48:22] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:22] [INFO] [Bullet] Using shooter_position, distance=1261,1307
+[11:48:22] [INFO] [Bullet] Distance to wall: 1261,1307 (85,87272% of viewport)
+[11:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(2476.234, 745.8669)
+[11:48:22] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:22] [INFO] [Bullet] Using shooter_position, distance=2586,127
+[11:48:22] [INFO] [Bullet] Distance to wall: 2586,127 (176,09415% of viewport)
+[11:48:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(841.6342, 924.3431), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
+[11:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(757.3246, 856.3137)
+[11:48:22] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:22] [INFO] [Bullet] Using shooter_position, distance=1143,1595
+[11:48:22] [INFO] [Bullet] Distance to wall: 1143,1595 (77,839836% of viewport)
+[11:48:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(847.4149, 888.2377), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
+[11:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(755.4372, 830.99945)
+[11:48:22] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:22] [INFO] [Bullet] Using shooter_position, distance=1123,0519
+[11:48:22] [INFO] [Bullet] Distance to wall: 1123,0519 (76,470665% of viewport)
+[11:48:22] [INFO] [Bullet] Distance-based penetration chance: 57,45089%
+[11:48:22] [INFO] [Bullet] Starting wall penetration at (755.4372, 830.99945)
+[11:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(927.6345, 669.3338)
+[11:48:22] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:22] [INFO] [Bullet] Using shooter_position, distance=1143,9027
+[11:48:22] [INFO] [Bullet] Distance to wall: 1143,9027 (77,89044% of viewport)
+[11:48:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 6,921578
+[11:48:22] [INFO] [Bullet] Max penetration distance exceeded: 83,333336 >= 48
+[11:48:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:22] [INFO] [Bullet] Exiting penetration at (680.44, 784.32825) after traveling 83,333336 pixels through wall
+[11:48:22] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(847.4149, 849.7377), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
+[11:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(744.40466, 816.19666)
+[11:48:22] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:22] [INFO] [Bullet] Using shooter_position, distance=1104,6788
+[11:48:22] [INFO] [Bullet] Distance to wall: 1104,6788 (75,21961% of viewport)
+[11:48:22] [INFO] [Bullet] Distance-based penetration chance: 58,910454%
+[11:48:22] [INFO] [Bullet] Starting wall penetration at (744.40466, 816.19666)
+[11:48:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26,652235
+[11:48:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:22] [INFO] [Bullet] Exiting penetration at (700.031, 801.7482) after traveling 41,666668 pixels through wall
+[11:48:22] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(847.4149, 811.2377), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
+[11:48:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(847.4149, 772.7377), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(847.4149, 734.2377), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(205.11484, 711.48395)
+[11:48:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:23] [INFO] [Bullet] Using shooter_position, distance=740,4603
+[11:48:23] [INFO] [Bullet] Distance to wall: 740,4603 (50,419308% of viewport)
+[11:48:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(326.01764, 711.338)
+[11:48:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:23] [INFO] [Bullet] Using shooter_position, distance=782,48914
+[11:48:23] [INFO] [Bullet] Distance to wall: 782,48914 (53,281128% of viewport)
+[11:48:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(62.843975, 747.1225)
+[11:48:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:23] [INFO] [Bullet] Using shooter_position, distance=749,76086
+[11:48:23] [INFO] [Bullet] Distance to wall: 749,76086 (51,0526% of viewport)
+[11:48:23] [INFO] [Bullet] Distance-based penetration chance: 87,1053%
+[11:48:23] [INFO] [Bullet] Starting wall penetration at (62.843975, 747.1225)
+[11:48:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8,61969
+[11:48:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:23] [INFO] [Bullet] Exiting penetration at (23.638649, 756.94336) after traveling 35,416668 pixels through wall
+[11:48:23] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[11:48:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(847.4149, 695.7377), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(489.78058, 711.8668)
+[11:48:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:23] [INFO] [Bullet] Using shooter_position, distance=864,08295
+[11:48:23] [INFO] [Bullet] Distance to wall: 864,08295 (58,836998% of viewport)
+[11:48:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(37.754803, 704.9613)
+[11:48:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:23] [INFO] [Bullet] Using shooter_position, distance=705,97156
+[11:48:23] [INFO] [Bullet] Distance to wall: 705,97156 (48,0709% of viewport)
+[11:48:23] [INFO] [Bullet] Distance-based penetration chance: 90,583954%
+[11:48:23] [INFO] [Bullet] Starting wall penetration at (37.754803, 704.9613)
+[11:48:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(847.4149, 657.2377), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34,660458
+[11:48:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:23] [INFO] [Bullet] Exiting penetration at (-2.6519814, 704.06744) after traveling 35,41667 pixels through wall
+[11:48:23] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[11:48:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(489.4347, 711.63904)
+[11:48:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:23] [INFO] [Bullet] Using shooter_position, distance=863,6993
+[11:48:23] [INFO] [Bullet] Distance to wall: 863,6993 (58,81087% of viewport)
+[11:48:23] [INFO] [Bullet] Distance-based penetration chance: 78,053986%
+[11:48:23] [INFO] [Bullet] Penetration failed (distance roll)
+[11:48:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(59.96965, 724.61566)
+[11:48:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:23] [INFO] [Bullet] Using shooter_position, distance=727,093
+[11:48:23] [INFO] [Bullet] Distance to wall: 727,093 (49,5091% of viewport)
+[11:48:23] [INFO] [Bullet] Distance-based penetration chance: 88,90605%
+[11:48:23] [INFO] [Bullet] Starting wall penetration at (59.96965, 724.61566)
+[11:48:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(847.4149, 618.7377), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12,434719
+[11:48:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:23] [INFO] [Bullet] Exiting penetration at (19.570747, 725.81396) after traveling 35,416668 pixels through wall
+[11:48:23] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[11:48:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(847.4149, 580.2377), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(498.0714, 698.4997)
+[11:48:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:23] [INFO] [Bullet] Using shooter_position, distance=857,891
+[11:48:23] [INFO] [Bullet] Distance to wall: 857,891 (58,41538% of viewport)
+[11:48:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(42.97165, 798.0062)
+[11:48:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:23] [INFO] [Bullet] Using shooter_position, distance=799,16235
+[11:48:23] [INFO] [Bullet] Distance to wall: 799,16235 (54,416435% of viewport)
+[11:48:23] [INFO] [Bullet] Distance-based penetration chance: 83,180824%
+[11:48:23] [INFO] [Bullet] Starting wall penetration at (42.97165, 798.0062)
+[11:48:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35,52831
+[11:48:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:23] [INFO] [Bullet] Exiting penetration at (-2.9965286, 806.0502) after traveling 41,666668 pixels through wall
+[11:48:23] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(844.3353, 543.0133), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(419.75824, 690.597)
+[11:48:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:23] [INFO] [Bullet] Using shooter_position, distance=808,1591
+[11:48:23] [INFO] [Bullet] Distance to wall: 808,1591 (55,02904% of viewport)
+[11:48:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(827.0895, 511.6568), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(800.0594, 484.3529), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[11:48:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(513.80615, 557.8218)
+[11:48:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:24] [INFO] [Bullet] Using shooter_position, distance=758,3943
+[11:48:24] [INFO] [Bullet] Distance to wall: 758,3943 (51,640465% of viewport)
+[11:48:24] [INFO] [Bullet] Distance-based penetration chance: 86,419464%
+[11:48:24] [INFO] [Bullet] Starting wall penetration at (513.80615, 557.8218)
+[11:48:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(57.48561, 534.2173)
+[11:48:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:24] [INFO] [Bullet] Using shooter_position, distance=537,30133
+[11:48:24] [INFO] [Bullet] Distance to wall: 537,30133 (36,58584% of viewport)
+[11:48:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32,71144
+[11:48:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:24] [INFO] [Bullet] Exiting penetration at (467.63803, 564.62506) after traveling 41,666668 pixels through wall
+[11:48:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(42.372314, 697.2856)
+[11:48:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:24] [INFO] [Bullet] Using shooter_position, distance=698,57184
+[11:48:24] [INFO] [Bullet] Distance to wall: 698,57184 (47,567043% of viewport)
+[11:48:24] [INFO] [Bullet] Distance-based penetration chance: 91,17178%
+[11:48:24] [INFO] [Bullet] Starting wall penetration at (42.372314, 697.2856)
+[11:48:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36,104176
+[11:48:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:24] [INFO] [Bullet] Exiting penetration at (-3.454136, 706.10114) after traveling 41,666668 pixels through wall
+[11:48:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(527.316, 519.5113)
+[11:48:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:24] [INFO] [Bullet] Using shooter_position, distance=740,23926
+[11:48:24] [INFO] [Bullet] Distance to wall: 740,23926 (50,404255% of viewport)
+[11:48:24] [INFO] [Bullet] Distance-based penetration chance: 87,8617%
+[11:48:24] [INFO] [Bullet] Starting wall penetration at (527.316, 519.5113)
+[11:48:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(226.3573, 457.15247)
+[11:48:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:24] [INFO] [Bullet] Using shooter_position, distance=510,1235
+[11:48:24] [INFO] [Bullet] Distance to wall: 510,1235 (34,73525% of viewport)
+[11:48:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.8358, 457.1292), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=5
+[11:48:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19,124687
+[11:48:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:24] [INFO] [Bullet] Exiting penetration at (481.03226, 525.47754) after traveling 41,666668 pixels through wall
+[11:48:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(499.70312, 489.12195)
+[11:48:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:24] [INFO] [Bullet] Using shooter_position, distance=699,24493
+[11:48:24] [INFO] [Bullet] Distance to wall: 699,24493 (47,612877% of viewport)
+[11:48:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(57.369446, 384.0553)
+[11:48:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:24] [INFO] [Bullet] Using shooter_position, distance=388,31653
+[11:48:24] [INFO] [Bullet] Distance to wall: 388,31653 (26,441187% of viewport)
+[11:48:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:24] [INFO] [Bullet] Starting wall penetration at (57.369446, 384.0553)
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(744.3364, 432.9852), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:48:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 2,9474108
+[11:48:24] [INFO] [Bullet] Max penetration distance exceeded: 51,177086 >= 48
+[11:48:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:24] [INFO] [Bullet] Exiting penetration at (5.809288, 361.7525) after traveling 51,177086 pixels through wall
+[11:48:24] [INFO] [Bullet] Damage multiplier after penetration: 0,1125
+[11:48:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(511.96136, 454.1098)
+[11:48:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:24] [INFO] [Bullet] Using shooter_position, distance=684,33923
+[11:48:24] [INFO] [Bullet] Distance to wall: 684,33923 (46,59792% of viewport)
+[11:48:24] [INFO] [Bullet] Distance-based penetration chance: 92,30243%
+[11:48:24] [INFO] [Bullet] Starting wall penetration at (511.96136, 454.1098)
+[11:48:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34,65599
+[11:48:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:24] [INFO] [Bullet] Exiting penetration at (465.48633, 458.33472) after traveling 41,666668 pixels through wall
+[11:48:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(711.8913, 422.7912), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:48:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(520.2439, 425.5122)
+[11:48:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:24] [INFO] [Bullet] Using shooter_position, distance=672,097
+[11:48:24] [INFO] [Bullet] Distance to wall: 672,097 (45,76432% of viewport)
+[11:48:24] [INFO] [Bullet] Distance-based penetration chance: 93,27496%
+[11:48:24] [INFO] [Bullet] Starting wall penetration at (520.2439, 425.5122)
+[11:48:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26,420753
+[11:48:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:24] [INFO] [Bullet] Exiting penetration at (473.5819, 426.1747) after traveling 41,666676 pixels through wall
+[11:48:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(686.9703, 426.138), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:48:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(496.74133, 402.70663)
+[11:48:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:24] [INFO] [Bullet] Using shooter_position, distance=639,4721
+[11:48:24] [INFO] [Bullet] Distance to wall: 639,4721 (43,54283% of viewport)
+[11:48:24] [INFO] [LastChance] Threat detected: @Area2D@5692
+[11:48:24] [INFO] [LastChance] Effect already used this life
+[11:48:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(671.4956, 442.8096), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:48:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(527.15485, 401.996)
+[11:48:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:24] [INFO] [Bullet] Using shooter_position, distance=662,9427
+[11:48:24] [INFO] [Bullet] Distance to wall: 662,9427 (45,140987% of viewport)
+[11:48:24] [INFO] [Bullet] Distance-based penetration chance: 94,00218%
+[11:48:24] [INFO] [Bullet] Starting wall penetration at (527.15485, 401.996)
+[11:48:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18,447138
+[11:48:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:24] [INFO] [Bullet] Exiting penetration at (482.24884, 389.29846) after traveling 41,666668 pixels through wall
+[11:48:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(665.467, 472.8058), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:48:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(525.72577, 418.28625)
+[11:48:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:24] [INFO] [Bullet] Using shooter_position, distance=671,8266
+[11:48:24] [INFO] [Bullet] Distance to wall: 671,8266 (45,74591% of viewport)
+[11:48:24] [INFO] [Bullet] Distance-based penetration chance: 93,29644%
+[11:48:24] [INFO] [Bullet] Starting wall penetration at (525.72577, 418.28625)
+[11:48:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19,05228
+[11:48:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:24] [INFO] [Bullet] Exiting penetration at (482.25073, 401.32462) after traveling 41,666668 pixels through wall
+[11:48:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(665.377, 511.1787), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[11:48:24] [ENEMY] [Enemy1] Player ammo empty state changed: false -> true
+[11:48:24] [ENEMY] [Enemy2] Player ammo empty state changed: false -> true
+[11:48:24] [ENEMY] [Enemy3] Player ammo empty state changed: false -> true
+[11:48:24] [ENEMY] [Enemy4] Player ammo empty state changed: false -> true
+[11:48:24] [ENEMY] [Enemy5] Player ammo empty state changed: false -> true
+[11:48:24] [ENEMY] [Enemy6] Player ammo empty state changed: false -> true
+[11:48:24] [ENEMY] [Enemy7] Player ammo empty state changed: false -> true
+[11:48:24] [ENEMY] [Enemy8] Player ammo empty state changed: false -> true
+[11:48:24] [ENEMY] [Enemy9] Player ammo empty state changed: false -> true
+[11:48:24] [ENEMY] [Enemy10] Player ammo empty state changed: false -> true
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 510.6787), source=PLAYER (Player), range=600, listeners=10
+[11:48:24] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 510.6787), intensity=0.01, distance=410
+[11:48:24] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 510.6787), intensity=0.03, distance=268
+[11:48:24] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
+[11:48:24] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 510.6787), intensity=0.03, distance=298
+[11:48:24] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 510.6787), intensity=0.01, distance=415
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 516.1787), source=PLAYER (Player), range=600, listeners=10
+[11:48:24] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 516.1787), intensity=0.01, distance=411
+[11:48:24] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 516.1787), intensity=0.03, distance=268
+[11:48:24] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 516.1787), intensity=0.03, distance=292
+[11:48:24] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 516.1787), intensity=0.01, distance=409
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 521.6787), source=PLAYER (Player), range=600, listeners=10
+[11:48:24] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 521.6787), intensity=0.01, distance=413
+[11:48:24] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 521.6787), intensity=0.04, distance=267
+[11:48:24] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 521.6787), intensity=0.03, distance=287
+[11:48:24] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 521.6787), intensity=0.02, distance=404
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 527.1787), source=PLAYER (Player), range=600, listeners=10
+[11:48:24] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 527.1787), intensity=0.01, distance=414
+[11:48:24] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 527.1787), intensity=0.04, distance=266
+[11:48:24] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 527.1787), intensity=0.03, distance=281
+[11:48:24] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 527.1787), intensity=0.02, distance=399
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 532.6787), source=PLAYER (Player), range=600, listeners=10
+[11:48:24] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 532.6787), intensity=0.01, distance=416
+[11:48:24] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 532.6787), intensity=0.04, distance=266
+[11:48:24] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 532.6787), intensity=0.03, distance=276
+[11:48:24] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 532.6787), intensity=0.02, distance=393
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 538.1787), source=PLAYER (Player), range=600, listeners=10
+[11:48:24] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 538.1787), intensity=0.01, distance=418
+[11:48:24] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 538.1787), intensity=0.04, distance=266
+[11:48:24] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 538.1787), intensity=0.03, distance=270
+[11:48:24] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 538.1787), intensity=0.02, distance=388
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 543.6787), source=PLAYER (Player), range=600, listeners=10
+[11:48:24] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 543.6787), intensity=0.01, distance=420
+[11:48:24] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 543.6787), intensity=0.04, distance=265
+[11:48:24] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 543.6787), intensity=0.04, distance=265
+[11:48:24] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 543.6787), intensity=0.02, distance=383
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 549.1787), source=PLAYER (Player), range=600, listeners=10
+[11:48:24] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 549.1787), intensity=0.01, distance=422
+[11:48:24] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 549.1787), intensity=0.04, distance=265
+[11:48:24] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 549.1787), intensity=0.04, distance=260
+[11:48:24] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 549.1787), intensity=0.02, distance=377
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 554.6787), source=PLAYER (Player), range=600, listeners=10
+[11:48:24] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 554.6787), intensity=0.01, distance=423
+[11:48:24] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 554.6787), intensity=0.04, distance=265
+[11:48:24] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 554.6787), intensity=0.04, distance=254
+[11:48:24] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 554.6787), intensity=0.02, distance=372
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 560.1787), source=PLAYER (Player), range=600, listeners=10
+[11:48:24] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 560.1787), intensity=0.01, distance=425
+[11:48:24] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 560.1787), intensity=0.04, distance=266
+[11:48:24] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 560.1787), intensity=0.04, distance=249
+[11:48:24] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 560.1787), intensity=0.02, distance=367
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:24] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 565.6787), source=PLAYER (Player), range=600, listeners=10
+[11:48:24] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 565.6787), intensity=0.01, distance=428
+[11:48:24] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 565.6787), intensity=0.04, distance=266
+[11:48:24] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 565.6787), intensity=0.04, distance=243
+[11:48:24] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 565.6787), intensity=0.02, distance=362
+[11:48:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 571.1787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 571.1787), intensity=0.01, distance=430
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 571.1787), intensity=0.04, distance=266
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 571.1787), intensity=0.04, distance=238
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 571.1787), intensity=0.02, distance=356
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 576.6787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 576.6787), intensity=0.01, distance=432
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 576.6787), intensity=0.04, distance=267
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 576.6787), intensity=0.05, distance=232
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 576.6787), intensity=0.02, distance=351
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 582.1787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 582.1787), intensity=0.01, distance=434
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 582.1787), intensity=0.03, distance=267
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 582.1787), intensity=0.05, distance=227
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 582.1787), intensity=0.02, distance=346
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 587.6787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 587.6787), intensity=0.01, distance=436
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 587.6787), intensity=0.03, distance=268
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 587.6787), intensity=0.05, distance=222
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 587.6787), intensity=0.02, distance=341
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 593.1787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 593.1787), intensity=0.01, distance=439
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 593.1787), intensity=0.03, distance=269
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 593.1787), intensity=0.05, distance=216
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 593.1787), intensity=0.02, distance=335
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(47.81125, 199.70529)
+[11:48:25] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:25] [INFO] [Bullet] Using shooter_position, distance=205,34877
+[11:48:25] [INFO] [Bullet] Distance to wall: 205,34877 (13,982576% of viewport)
+[11:48:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:25] [INFO] [Bullet] Starting wall penetration at (47.81125, 199.70529)
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 598.6787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 598.6787), intensity=0.01, distance=441
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 598.6787), intensity=0.03, distance=270
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 598.6787), intensity=0.06, distance=211
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 598.6787), intensity=0.02, distance=330
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28,958242
+[11:48:25] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:25] [INFO] [Bullet] Exiting penetration at (6.1441765, 178.69022) after traveling 41,666668 pixels through wall
+[11:48:25] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 604.1787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 604.1787), intensity=0.01, distance=444
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 604.1787), intensity=0.03, distance=271
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 604.1787), intensity=0.06, distance=205
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 604.1787), intensity=0.02, distance=325
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 609.6787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 609.6787), intensity=0.01, distance=446
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 609.6787), intensity=0.03, distance=272
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 609.6787), intensity=0.06, distance=200
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 609.6787), intensity=0.02, distance=320
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 615.1787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 615.1787), intensity=0.01, distance=449
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 615.1787), intensity=0.03, distance=273
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 615.1787), intensity=0.07, distance=195
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 615.1787), intensity=0.03, distance=315
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 620.6787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 620.6787), intensity=0.01, distance=452
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 620.6787), intensity=0.03, distance=275
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 620.6787), intensity=0.07, distance=189
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 620.6787), intensity=0.03, distance=309
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 626.1787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 626.1787), intensity=0.01, distance=454
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 626.1787), intensity=0.03, distance=276
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 626.1787), intensity=0.07, distance=184
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 626.1787), intensity=0.03, distance=304
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 631.6787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 631.6787), intensity=0.01, distance=457
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 631.6787), intensity=0.03, distance=278
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 631.6787), intensity=0.08, distance=179
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 631.6787), intensity=0.03, distance=299
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 637.1787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 637.1787), intensity=0.01, distance=460
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 637.1787), intensity=0.03, distance=279
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 637.1787), intensity=0.08, distance=173
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 637.1787), intensity=0.03, distance=294
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 642.6787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 642.6787), intensity=0.01, distance=463
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 642.6787), intensity=0.03, distance=281
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 642.6787), intensity=0.09, distance=168
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 642.6787), intensity=0.03, distance=289
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 648.1787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 648.1787), intensity=0.01, distance=465
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 648.1787), intensity=0.03, distance=283
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 648.1787), intensity=0.09, distance=163
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 648.1787), intensity=0.03, distance=284
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 653.6787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 653.6787), intensity=0.01, distance=468
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 653.6787), intensity=0.03, distance=285
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 653.6787), intensity=0.10, distance=157
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 653.6787), intensity=0.03, distance=279
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 659.1787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 659.1787), intensity=0.01, distance=471
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 659.1787), intensity=0.03, distance=287
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 659.1787), intensity=0.11, distance=152
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 659.1787), intensity=0.03, distance=274
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 664.6787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 664.6787), intensity=0.01, distance=474
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 664.6787), intensity=0.03, distance=289
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 664.6787), intensity=0.12, distance=147
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 664.6787), intensity=0.03, distance=268
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 670.1787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 670.1787), intensity=0.01, distance=477
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 670.1787), intensity=0.03, distance=291
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 670.1787), intensity=0.12, distance=142
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 670.1787), intensity=0.04, distance=263
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 675.6787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 675.6787), intensity=0.01, distance=481
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 675.6787), intensity=0.03, distance=294
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 675.6787), intensity=0.13, distance=136
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 675.6787), intensity=0.04, distance=258
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:25] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(665.377, 681.1787), source=PLAYER (Player), range=600, listeners=10
+[11:48:25] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (665.377, 681.1787), intensity=0.01, distance=484
+[11:48:25] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (665.377, 681.1787), intensity=0.03, distance=296
+[11:48:25] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (665.377, 681.1787), intensity=0.15, distance=131
+[11:48:25] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (665.377, 681.1787), intensity=0.04, distance=253
+[11:48:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
+[11:48:26] [INFO] [LastChance] Effect duration expired after 6.02 real seconds
+[11:48:26] [INFO] [LastChance] Ending last chance effect
+[11:48:26] [INFO] [LastChance] All process modes restored
+[11:48:27] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=663), can_see=false
+[11:48:27] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=467), can_see=false
+[11:48:27] [ENEMY] [Enemy2] Pursuing vulnerability sound at (665.377, 681.1787), distance=296
+[11:48:27] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(622.6511, 805.1727), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(770.1285, 911.8529), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:48:27] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1190), can_see=false
+[11:48:27] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1375), can_see=false
+[11:48:27] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1035), can_see=false
+[11:48:27] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1339), can_see=false
+[11:48:27] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1562), can_see=false
+[11:48:27] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=658), can_see=false
+[11:48:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1048.117, 1458.075), shooter_id=877146408495, bullet_pos=(43.47498, 193.4883)
+[11:48:27] [INFO] [Bullet] Using shooter_position, distance=1615.08044433594
+[11:48:27] [INFO] [Bullet] Distance to wall: 1615.08044433594 (109.973797325895% of viewport)
+[11:48:27] [INFO] [Bullet] Distance-based penetration chance: 28.0052405348211%
+[11:48:27] [INFO] [Bullet] Penetration failed (distance roll)
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5700
+[11:48:27] [INFO] [LastChance] Effect already used this life
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5701
+[11:48:27] [INFO] [LastChance] Effect already used this life
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=135), can_see=false
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(769.2692, 912.2936), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5703
+[11:48:27] [INFO] [LastChance] Effect already used this life
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(768.4099, 912.7344), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5704
+[11:48:27] [INFO] [LastChance] Effect already used this life
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[11:48:27] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[11:48:27] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[11:48:27] [INFO] [LastChance] Player died
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(767.5506, 913.1751), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5705
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(766.6913, 913.6158), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5706
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(765.832, 914.0566), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(925.2351, 752.1488)
+[11:48:27] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[11:48:27] [INFO] [Bullet] Using shooter_position, distance=1192,3875
+[11:48:27] [INFO] [Bullet] Distance to wall: 1192,3875 (81,19186% of viewport)
+[11:48:27] [INFO] [Bullet] Distance-based penetration chance: 51,942837%
+[11:48:27] [INFO] [Bullet] Starting wall penetration at (925.2351, 752.1488)
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5707
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(764.9727, 914.4973), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35,89463
+[11:48:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(595.1741, 793.759), shooter_id=875149920723, bullet_pos=(410.9631, 706.4149)
+[11:48:27] [INFO] [Bullet] Using shooter_position, distance=203.869232177734
+[11:48:27] [INFO] [Bullet] Distance to wall: 203.869232177734 (13.8818309014436% of viewport)
+[11:48:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:27] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:27] [INFO] [Bullet] Exiting penetration at (971.8708, 753.8494) after traveling 41,666668 pixels through wall
+[11:48:27] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5709
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(614.2867, 811.792), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(764.1133, 914.938), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5711
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5712
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(763.254, 915.3788), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5713
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(762.3947, 915.8195), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=877146408495, bullet_pos=(270.4188, 1586.933)
+[11:48:27] [INFO] [Bullet] Using shooter_position, distance=842.55029296875
+[11:48:27] [INFO] [Bullet] Distance to wall: 842.55029296875 (57.370798761616% of viewport)
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5714
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(761.5354, 916.2603), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5716
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(760.6761, 916.701), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5717
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(759.8168, 917.1417), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5718
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy1] Pursuing vulnerability sound at (665.377, 681.1787), distance=509
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(758.9575, 917.5825), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5719
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(614.2867, 811.792), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(758.0981, 918.0232), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5721
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5720
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(757.2388, 918.4639), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5722
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(756.3795, 918.9047), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5723
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(755.5202, 919.3454), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(595.1741, 793.759), shooter_id=875149920723, bullet_pos=(62.89996, 892.2857)
+[11:48:27] [INFO] [Bullet] Using shooter_position, distance=541.316162109375
+[11:48:27] [INFO] [Bullet] Distance to wall: 541.316162109375 (36.859212870678% of viewport)
+[11:48:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5724
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(754.6609, 919.7861), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5725
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(753.8016, 920.2269), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5726
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(752.9423, 920.6676), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(638.9412, 833.7189), shooter_id=875149920723, bullet_pos=(889.3441, 1628.541)
+[11:48:27] [INFO] [Bullet] Using shooter_position, distance=833.332885742188
+[11:48:27] [INFO] [Bullet] Distance to wall: 833.332885742188 (56.743168554242% of viewport)
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5727
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(614.2867, 811.792), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(752.0829, 921.1083), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5730
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5729
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(751.2236, 921.5491), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5731
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(750.3643, 921.9898), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5732
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(749.505, 922.4305), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(728.2393, 932.4122), shooter_id=875435133864, bullet_pos=(522.9112, 967.671)
+[11:48:27] [INFO] [Bullet] Using shooter_position, distance=208.333374023438
+[11:48:27] [INFO] [Bullet] Distance to wall: 208.333374023438 (14.1858025285506% of viewport)
+[11:48:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:27] [INFO] [Bullet] Starting wall penetration at (522.9112, 967.671)
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5733
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(748.6457, 922.8713), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.4201259613037
+[11:48:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(727.3181, 932.7793), shooter_id=875435133864, bullet_pos=(521.8784, 967.382)
+[11:48:27] [INFO] [Bullet] Using shooter_position, distance=208.333480834961
+[11:48:27] [INFO] [Bullet] Distance to wall: 208.333480834961 (14.1858098015436% of viewport)
+[11:48:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.813, 1503.345), shooter_id=877146408495, bullet_pos=(508.6423, 1403.269)
+[11:48:27] [INFO] [Bullet] Using shooter_position, distance=608.456909179688
+[11:48:27] [INFO] [Bullet] Distance to wall: 608.456909179688 (41.4309497996429% of viewport)
+[11:48:27] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:27] [INFO] [Bullet] Exiting penetration at (476.9177, 975.5689) after traveling 41.6666679382324 pixels through wall
+[11:48:27] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5735
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(747.7864, 923.312), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(726.3959, 933.1445), shooter_id=875435133864, bullet_pos=(520.8444, 967.077)
+[11:48:27] [INFO] [Bullet] Using shooter_position, distance=208.333419799805
+[11:48:27] [INFO] [Bullet] Distance to wall: 208.333419799805 (14.1858056455476% of viewport)
+[11:48:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5738
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(746.9271, 923.7527), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(725.4725, 933.5078), shooter_id=875435133864, bullet_pos=(519.8094, 966.7558)
+[11:48:27] [INFO] [Bullet] Using shooter_position, distance=208.333282470703
+[11:48:27] [INFO] [Bullet] Distance to wall: 208.333282470703 (14.1857962945565% of viewport)
+[11:48:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:27] [INFO] [Bullet] Starting wall penetration at (519.8094, 966.7558)
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5740
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(614.2867, 811.792), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(746.0677, 924.1935), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.6000785827637
+[11:48:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(724.5481, 933.8691), shooter_id=875435133864, bullet_pos=(518.7729, 966.418)
+[11:48:27] [INFO] [Bullet] Using shooter_position, distance=208.333465576172
+[11:48:27] [INFO] [Bullet] Distance to wall: 208.333465576172 (14.1858087625446% of viewport)
+[11:48:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:27] [INFO] [Bullet] Starting wall penetration at (518.7729, 966.418)
+[11:48:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(727.3181, 932.7793), shooter_id=875435133864, bullet_pos=(626.7358, 1004.55)
+[11:48:27] [INFO] [Bullet] Using shooter_position, distance=123.563255310059
+[11:48:27] [INFO] [Bullet] Distance to wall: 123.563255310059 (8.41364926685329% of viewport)
+[11:48:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[11:48:27] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:27] [INFO] [Bullet] Exiting penetration at (473.7408, 974.2034) after traveling 41.6666717529297 pixels through wall
+[11:48:27] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5743
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5742
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(745.2084, 924.6342), source=ENEMY (Enemy4), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.6603240966797
+[11:48:27] [INFO] [Bullet] Body exited signal received for penetrating body
+[11:48:27] [INFO] [Bullet] Exiting penetration at (472.6794, 973.7089) after traveling 41.6666679382324 pixels through wall
+[11:48:27] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[11:48:27] [INFO] [LastChance] Threat detected: @Area2D@5746
+[11:48:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[11:48:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[11:48:27] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:27] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=673), can_see=false
+[11:48:27] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=324), can_see=false
+[11:48:27] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[11:48:27] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1190), can_see=false
+[11:48:27] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1375), can_see=false
+[11:48:27] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1035), can_see=false
+[11:48:27] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1339), can_see=false
+[11:48:27] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1562), can_see=false
+[11:48:27] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=658), can_see=false
+[11:48:27] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[11:48:27] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=133), can_see=false
+[11:48:27] [ENEMY] [Enemy3] Pursuing vulnerability sound at (665.377, 681.1787), distance=140
+[11:48:27] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[11:48:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(616.2296, 806.8251), source=ENEMY (Enemy3), range=1469, listeners=10
+[11:48:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[11:48:27] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[11:48:27] [INFO] [LastChance] Resetting all effects (scene change detected)
+[11:48:27] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[11:48:27] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[11:48:27] [INFO] [Player] Ready! Grenades: 1/3
+[11:48:27] [INFO] [ScoreManager] Level started with 10 enemies
+[11:48:27] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[11:48:27] [ENEMY] [Enemy1] Registered as sound listener
+[11:48:27] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[11:48:27] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[11:48:27] [ENEMY] [Enemy2] Registered as sound listener
+[11:48:27] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[11:48:27] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[11:48:27] [ENEMY] [Enemy3] Registered as sound listener
+[11:48:27] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[11:48:27] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[11:48:27] [ENEMY] [Enemy4] Registered as sound listener
+[11:48:27] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[11:48:27] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[11:48:27] [ENEMY] [Enemy5] Registered as sound listener
+[11:48:27] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[11:48:27] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[11:48:27] [ENEMY] [Enemy6] Registered as sound listener
+[11:48:27] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[11:48:27] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[11:48:27] [ENEMY] [Enemy7] Registered as sound listener
+[11:48:27] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[11:48:27] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[11:48:27] [ENEMY] [Enemy8] Registered as sound listener
+[11:48:27] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[11:48:27] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[11:48:27] [ENEMY] [Enemy9] Registered as sound listener
+[11:48:27] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[11:48:27] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[11:48:27] [ENEMY] [Enemy10] Registered as sound listener
+[11:48:27] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[11:48:27] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[11:48:27] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[11:48:27] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[11:48:27] [INFO] [LastChance] Found player: Player
+[11:48:27] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[11:48:27] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[11:48:27] [INFO] [LastChance] Connected to player Died signal (C#)
+[11:48:28] [INFO] ------------------------------------------------------------
+[11:48:28] [INFO] GAME LOG ENDED: 2026-01-22T11:48:28
+[11:48:28] [INFO] ============================================================
diff --git a/docs/case-studies/issue-217/logs/game_log_20260122_120806.txt b/docs/case-studies/issue-217/logs/game_log_20260122_120806.txt
new file mode 100644
index 00000000..a7cc2b58
--- /dev/null
+++ b/docs/case-studies/issue-217/logs/game_log_20260122_120806.txt
@@ -0,0 +1,8029 @@
+[12:08:06] [INFO] ============================================================
+[12:08:06] [INFO] GAME LOG STARTED
+[12:08:06] [INFO] ============================================================
+[12:08:06] [INFO] Timestamp: 2026-01-22T12:08:06
+[12:08:06] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_120806.txt
+[12:08:06] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[12:08:06] [INFO] OS: Windows
+[12:08:06] [INFO] Debug build: false
+[12:08:06] [INFO] Engine version: 4.3-stable (official)
+[12:08:06] [INFO] Project: Godot Top-Down Template
+[12:08:06] [INFO] ------------------------------------------------------------
+[12:08:06] [INFO] [GameManager] GameManager ready
+[12:08:06] [INFO] [ScoreManager] ScoreManager ready
+[12:08:06] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[12:08:06] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:08:06] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[12:08:06] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[12:08:06] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[12:08:06] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[12:08:06] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[12:08:06] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[12:08:06] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:08:06] [INFO] [LastChance] Last chance shader loaded successfully
+[12:08:06] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[12:08:06] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[12:08:06] [INFO] [LastChance]   Sepia intensity: 0.70
+[12:08:06] [INFO] [LastChance]   Brightness: 0.60
+[12:08:06] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[12:08:06] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[12:08:06] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:08:06] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:08:06] [INFO] [Player] Ready! Grenades: 1/3
+[12:08:06] [INFO] [ScoreManager] Level started with 10 enemies
+[12:08:06] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[12:08:06] [ENEMY] [Enemy1] Registered as sound listener
+[12:08:06] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:08:06] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[12:08:06] [ENEMY] [Enemy2] Registered as sound listener
+[12:08:06] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:08:06] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[12:08:06] [ENEMY] [Enemy3] Registered as sound listener
+[12:08:06] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:08:06] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[12:08:06] [ENEMY] [Enemy4] Registered as sound listener
+[12:08:06] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:08:06] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[12:08:06] [ENEMY] [Enemy5] Registered as sound listener
+[12:08:06] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:08:06] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[12:08:06] [ENEMY] [Enemy6] Registered as sound listener
+[12:08:06] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:08:06] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[12:08:06] [ENEMY] [Enemy7] Registered as sound listener
+[12:08:06] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 3, behavior: PATROL, player_found: yes
+[12:08:06] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[12:08:06] [ENEMY] [Enemy8] Registered as sound listener
+[12:08:06] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:08:06] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[12:08:06] [ENEMY] [Enemy9] Registered as sound listener
+[12:08:06] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:08:06] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[12:08:06] [ENEMY] [Enemy10] Registered as sound listener
+[12:08:06] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:08:06] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:08:06] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:08:06] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:08:06] [INFO] [LastChance] Found player: Player
+[12:08:06] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:08:06] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:08:06] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:08:07] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[12:08:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[12:08:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[12:08:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1153.019, 1516.452), shooter_id=42899342977, bullet_pos=(46.92997, 934.1586)
+[12:08:07] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[12:08:07] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[12:08:07] [INFO] [Bullet] Distance-based penetration chance: 47.3661071507571%
+[12:08:07] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:07] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:08:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=42899342977, bullet_pos=(33.87472, 883.6538)
+[12:08:08] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[12:08:08] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[12:08:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=42899342977, bullet_pos=(63.90164, 841.4061)
+[12:08:08] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:08] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=42899342977, bullet_pos=(423.9635, 702.7374)
+[12:08:08] [INFO] [Bullet] Using shooter_position, distance=1062.97265625
+[12:08:08] [INFO] [Bullet] Distance to wall: 1062.97265625 (72.3797627984221% of viewport)
+[12:08:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1054.474, 1465.056), shooter_id=42899342977, bullet_pos=(60.28213, 778.2879)
+[12:08:08] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:08] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:08] [INFO] [Bullet] Distance-based penetration chance: 50.6761238618226%
+[12:08:08] [INFO] [Bullet] Starting wall penetration at (60.28213, 778.2879)
+[12:08:08] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.2927665710449
+[12:08:08] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:08] [INFO] [Bullet] Exiting penetration at (21.88574, 751.7644) after traveling 41.6666679382324 pixels through wall
+[12:08:08] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=42899342977, bullet_pos=(315.5491, 700.6593)
+[12:08:08] [INFO] [Bullet] Using shooter_position, distance=1100.67663574219
+[12:08:08] [INFO] [Bullet] Distance to wall: 1100.67663574219 (74.9470960935499% of viewport)
+[12:08:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=42899342977, bullet_pos=(58.95797, 715.3979)
+[12:08:08] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
+[12:08:08] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
+[12:08:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=42899342977, bullet_pos=(512.9849, 847.1281)
+[12:08:08] [INFO] [Bullet] Using shooter_position, distance=858.8203125
+[12:08:08] [INFO] [Bullet] Distance to wall: 858.8203125 (58.4786543094266% of viewport)
+[12:08:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=42899342977, bullet_pos=(686.2411, 860.4458)
+[12:08:08] [INFO] [Bullet] Using shooter_position, distance=778.546264648438
+[12:08:08] [INFO] [Bullet] Distance to wall: 778.546264648438 (53.0126467802557% of viewport)
+[12:08:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=42899342977, bullet_pos=(524.8075, 948.9856)
+[12:08:08] [INFO] [Bullet] Using shooter_position, distance=814.689331054688
+[12:08:08] [INFO] [Bullet] Distance to wall: 814.689331054688 (55.473694633096% of viewport)
+[12:08:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=42899342977, bullet_pos=(600.0973, 1001.86)
+[12:08:08] [INFO] [Bullet] Using shooter_position, distance=723.805908203125
+[12:08:08] [INFO] [Bullet] Distance to wall: 723.805908203125 (49.2852752512548% of viewport)
+[12:08:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=42899342977, bullet_pos=(496.6875, 347.7083)
+[12:08:08] [INFO] [Bullet] Using shooter_position, distance=1214.26892089844
+[12:08:08] [INFO] [Bullet] Distance to wall: 1214.26892089844 (82.681803667633% of viewport)
+[12:08:08] [ENEMY] [Enemy4] Hit taken, health: 3/4
+[12:08:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=42899342977, bullet_pos=(219.6853, 64.21855)
+[12:08:08] [INFO] [Bullet] Using shooter_position, distance=1595.05126953125
+[12:08:08] [INFO] [Bullet] Distance to wall: 1595.05126953125 (108.609973983039% of viewport)
+[12:08:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=42899342977, bullet_pos=(56.44829, 233.6834)
+[12:08:09] [INFO] [Bullet] Using shooter_position, distance=1547.88513183594
+[12:08:09] [INFO] [Bullet] Distance to wall: 1547.88513183594 (105.398344936485% of viewport)
+[12:08:09] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:08:09] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:08:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(373.3639, 804.916), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:09] [ENEMY] [Enemy1] Heard gunshot at (373.3639, 804.916), source_type=0, intensity=0.01, distance=461
+[12:08:09] [ENEMY] [Enemy2] Heard gunshot at (373.3639, 804.916), source_type=0, intensity=0.04, distance=256
+[12:08:09] [ENEMY] [Enemy4] Heard gunshot at (373.3639, 804.916), source_type=0, intensity=0.01, distance=437
+[12:08:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:08:09] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:08:09] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[12:08:09] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:08:09] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:08:09] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:08:09] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:08:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=42899342977, bullet_pos=(229.37, 435.8116)
+[12:08:09] [INFO] [Bullet] Using shooter_position, distance=1282.04028320313
+[12:08:09] [INFO] [Bullet] Distance to wall: 1282.04028320313 (87.2964803475057% of viewport)
+[12:08:09] [INFO] [Bullet] Distance-based penetration chance: 44.82077292791%
+[12:08:09] [INFO] [Bullet] Starting wall penetration at (229.37, 435.8116)
+[12:08:09] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:08:09] [INFO] [Bullet] Exiting penetration at (246.7597, 456.1383) after traveling 21.7502613067627 pixels through wall
+[12:08:09] [INFO] [Bullet] Damage multiplier after penetration: 0.05625
+[12:08:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(351.0547, 789.3979), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:08:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(931.0769, 704.5812)
+[12:08:09] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:09] [INFO] [Bullet] Using shooter_position, distance=1167,621
+[12:08:09] [INFO] [Bullet] Distance to wall: 1167,621 (79,50546% of viewport)
+[12:08:09] [INFO] [Bullet] Distance-based penetration chance: 53,910297%
+[12:08:09] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(335.1524, 788.6095), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:08:09] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[12:08:09] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[12:08:09] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:08:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(914.51355, 729.1898)
+[12:08:09] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:09] [INFO] [Bullet] Using shooter_position, distance=1169,638
+[12:08:09] [INFO] [Bullet] Distance to wall: 1169,638 (79,6428% of viewport)
+[12:08:09] [INFO] [Bullet] Distance-based penetration chance: 53,75007%
+[12:08:09] [INFO] [Bullet] Starting wall penetration at (914.51355, 729.1898)
+[12:08:09] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25,057854
+[12:08:09] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[12:08:09] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:09] [INFO] [Bullet] Exiting penetration at (960.916, 724.2315) after traveling 41,666668 pixels through wall
+[12:08:09] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:08:09] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[12:08:09] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:08:10] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[12:08:11] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
+[12:08:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(642.6815, 950.3282), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:11] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
+[12:08:11] [INFO] [LastChance] Threat detected: Bullet
+[12:08:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.3362, 957.0433), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:11] [INFO] [LastChance] Threat detected: @Area2D@309
+[12:08:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:11] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:08:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(663.0029, 957.0555), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(611.6237, 910.9701), shooter_id=40902854154, bullet_pos=(469.1705, 705.5265)
+[12:08:11] [INFO] [Bullet] Using shooter_position, distance=249.999969482422
+[12:08:11] [INFO] [Bullet] Distance to wall: 249.999969482422 (17.0229576314658% of viewport)
+[12:08:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:11] [INFO] [LastChance] Threat detected: @Area2D@310
+[12:08:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.6695, 957.0677), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:11] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:08:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:08:11] [INFO] [LastChance] Threat detected: @Area2D@312
+[12:08:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3361, 957.08), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(615.7087, 912.4101), shooter_id=40902854154, bullet_pos=(484.6766, 699.5002)
+[12:08:11] [INFO] [Bullet] Using shooter_position, distance=250.000045776367
+[12:08:11] [INFO] [Bullet] Distance to wall: 250.000045776367 (17.0229628264609% of viewport)
+[12:08:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:11] [INFO] [LastChance] Threat detected: @Area2D@313
+[12:08:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:11] [INFO] [LastChance] Threat detected: @Area2D@314
+[12:08:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(695.0027, 957.0922), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[12:08:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(427.7194, 600.6391), shooter_id=40617641465, bullet_pos=(502.0039, 701.1717)
+[12:08:11] [INFO] [Bullet] Using shooter_position, distance=124.999961853027
+[12:08:11] [INFO] [Bullet] Distance to wall: 124.999961853027 (8.51147725723441% of viewport)
+[12:08:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:11] [INFO] [Bullet] Starting wall penetration at (502.0039, 701.1717)
+[12:08:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(626.2177, 912.5521), shooter_id=40902854154, bullet_pos=(494.4338, 700.1069)
+[12:08:11] [INFO] [Bullet] Using shooter_position, distance=249.999923706055
+[12:08:11] [INFO] [Bullet] Distance to wall: 249.999923706055 (17.0229545144688% of viewport)
+[12:08:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:11] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[12:08:11] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
+[12:08:11] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:08:11] [INFO] [Bullet] Exiting penetration at (529.7368, 738.7039) after traveling 41.6666679382324 pixels through wall
+[12:08:11] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:11] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:08:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(705.6694, 957.1044), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[12:08:11] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
+[12:08:11] [ENEMY] [Enemy10] FLANKING started: target=(757.2542, 740.9636), side=left, pos=(953.4263, 1416.483)
+[12:08:11] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:08:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.5634, 912.8316), shooter_id=40902854154, bullet_pos=(503.2461, 701.3452)
+[12:08:11] [INFO] [Bullet] Using shooter_position, distance=250.000030517578
+[12:08:11] [INFO] [Bullet] Distance to wall: 250.000030517578 (17.0229617874619% of viewport)
+[12:08:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:11] [INFO] [LastChance] Threat detected: @Area2D@316
+[12:08:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(716.336, 957.1166), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[12:08:11] [INFO] [LastChance] Threat detected: @Area2D@319
+[12:08:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(727.0026, 957.1288), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:11] [INFO] [LastChance] Threat detected: @Area2D@321
+[12:08:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:08:11] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:08:11] [ENEMY] [Enemy2] Hit taken, health: 2/3
+[12:08:11] [INFO] [LastChance] Threat detected: @Area2D@322
+[12:08:11] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
+[12:08:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:08:11] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:08:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:08:11] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[12:08:11] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:08:11] [ENEMY] [Enemy2] Hit taken, health: 1/3
+[12:08:11] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[12:08:11] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:08:11] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[12:08:11] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[12:08:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.5634, 912.8316), shooter_id=40902854154, bullet_pos=(801.9315, 53.55541)
+[12:08:11] [INFO] [Bullet] Using shooter_position, distance=875.044128417969
+[12:08:11] [INFO] [Bullet] Distance to wall: 875.044128417969 (59.583363768248% of viewport)
+[12:08:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(405.2839, 543.9934), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:08:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=5
+[12:08:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(626.2177, 912.5521), shooter_id=40902854154, bullet_pos=(1063.499, 61.99298)
+[12:08:11] [INFO] [Bullet] Using shooter_position, distance=956.381652832031
+[12:08:11] [INFO] [Bullet] Distance to wall: 956.381652832031 (65.1217853721205% of viewport)
+[12:08:11] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(407.0452, 541.9912), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:08:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=5
+[12:08:11] [ENEMY] [Enemy1] State: SUPPRESSED -> IN_COVER
+[12:08:11] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(410.5678, 537.9868), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:08:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=5
+[12:08:11] [INFO] [LastChance] Threat detected: @Area2D@325
+[12:08:11] [INFO] [LastChance] Triggering last chance effect!
+[12:08:11] [INFO] [LastChance] Starting last chance effect:
+[12:08:11] [INFO] [LastChance]   - Time will be frozen (except player)
+[12:08:11] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[12:08:11] [INFO] [LastChance]   - Sepia intensity: 0.70
+[12:08:11] [INFO] [LastChance]   - Brightness: 0.60
+[12:08:11] [INFO] [LastChance] Pushed bullet Bullet from distance 87.0 to 200.0
+[12:08:11] [INFO] [LastChance] Pushed bullet @Area2D@325 from distance 121.8 to 200.0
+[12:08:11] [INFO] [LastChance] Pushed 2 threatening bullets away from player
+[12:08:11] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[12:08:11] [INFO] [LastChance] Skipping player node: Player
+[12:08:11] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[12:08:11] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[12:08:12] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:08:12] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:08:12] [INFO] [LastChance] Ending last chance effect
+[12:08:12] [INFO] [LastChance] All process modes restored
+[12:08:12] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:08:12] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:08:12] [INFO] [Player] Ready! Grenades: 1/3
+[12:08:12] [INFO] [ScoreManager] Level started with 10 enemies
+[12:08:12] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:08:12] [ENEMY] [Enemy1] Registered as sound listener
+[12:08:12] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:08:12] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:08:12] [ENEMY] [Enemy2] Registered as sound listener
+[12:08:12] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:08:12] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:08:12] [ENEMY] [Enemy3] Registered as sound listener
+[12:08:12] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:08:12] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:08:12] [ENEMY] [Enemy4] Registered as sound listener
+[12:08:12] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:08:12] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:08:12] [ENEMY] [Enemy5] Registered as sound listener
+[12:08:12] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:08:12] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:08:12] [ENEMY] [Enemy6] Registered as sound listener
+[12:08:12] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:08:12] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:08:12] [ENEMY] [Enemy7] Registered as sound listener
+[12:08:12] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:08:12] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:08:12] [ENEMY] [Enemy8] Registered as sound listener
+[12:08:12] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:08:12] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:08:12] [ENEMY] [Enemy9] Registered as sound listener
+[12:08:12] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:08:12] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:08:12] [ENEMY] [Enemy10] Registered as sound listener
+[12:08:12] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:08:12] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:08:12] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:08:12] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:08:12] [INFO] [LastChance] Found player: Player
+[12:08:12] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:08:12] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:08:12] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:08:12] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:08:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=20
+[12:08:13] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:08:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:13] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:08:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=156783086417, bullet_pos=(64.61339, 850.4285)
+[12:08:13] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:13] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=156783086417, bullet_pos=(60.65509, 787.2949)
+[12:08:13] [INFO] [Bullet] Using shooter_position, distance=1208.33386230469
+[12:08:13] [INFO] [Bullet] Distance to wall: 1208.33386230469 (82.2776746143741% of viewport)
+[12:08:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=156783086417, bullet_pos=(272.1178, 705.8297)
+[12:08:13] [INFO] [Bullet] Using shooter_position, distance=1133.22839355469
+[12:08:13] [INFO] [Bullet] Distance to wall: 1133.22839355469 (77.1636051404076% of viewport)
+[12:08:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=156783086417, bullet_pos=(179.6429, 701.5452)
+[12:08:13] [INFO] [Bullet] Using shooter_position, distance=1166.56591796875
+[12:08:13] [INFO] [Bullet] Distance to wall: 1166.56591796875 (79.433618480063% of viewport)
+[12:08:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=156783086417, bullet_pos=(59.01187, 724.3607)
+[12:08:13] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
+[12:08:13] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
+[12:08:13] [INFO] [Bullet] Distance-based penetration chance: 50.6761141644985%
+[12:08:13] [INFO] [Bullet] Starting wall penetration at (59.01187, 724.3607)
+[12:08:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13.0300064086914
+[12:08:13] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:13] [INFO] [Bullet] Exiting penetration at (21.53628, 696.5513) after traveling 41.6666679382324 pixels through wall
+[12:08:13] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=156783086417, bullet_pos=(510.129, 845.4442)
+[12:08:13] [INFO] [Bullet] Using shooter_position, distance=867.277404785156
+[12:08:13] [INFO] [Bullet] Distance to wall: 867.277404785156 (59.0545132743443% of viewport)
+[12:08:13] [INFO] [Bullet] Distance-based penetration chance: 77.7697345132649%
+[12:08:13] [INFO] [Bullet] Starting wall penetration at (510.129, 845.4442)
+[12:08:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19.0228652954102
+[12:08:13] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:13] [INFO] [Bullet] Exiting penetration at (540.4083, 863.2056) after traveling 30.1041698455811 pixels through wall
+[12:08:13] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[12:08:13] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:13] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
+[12:08:13] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
+[12:08:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:13] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:13] [INFO] [LastChance] Threat detected: Bullet
+[12:08:13] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:13] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=156783086417, bullet_pos=(518.2228, 1007.835)
+[12:08:14] [INFO] [Bullet] Using shooter_position, distance=710.125183105469
+[12:08:14] [INFO] [Bullet] Distance to wall: 710.125183105469 (48.3537295227201% of viewport)
+[12:08:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=156783086417, bullet_pos=(514.0849, 1010.641)
+[12:08:14] [INFO] [Bullet] Using shooter_position, distance=711.470581054688
+[12:08:14] [INFO] [Bullet] Distance to wall: 711.470581054688 (48.4453401430511% of viewport)
+[12:08:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:14] [INFO] [LastChance] Threat detected: @Area2D@588
+[12:08:14] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(642.5308, 755.4742), shooter_id=154786597594, bullet_pos=(34.05996, 898.2617)
+[12:08:14] [INFO] [Bullet] Using shooter_position, distance=625
+[12:08:14] [INFO] [Bullet] Distance to wall: 625 (42.5573992736596% of viewport)
+[12:08:14] [INFO] [Bullet] Distance-based penetration chance: 97.0163675140638%
+[12:08:14] [INFO] [Bullet] Starting wall penetration at (34.05996, 898.2617)
+[12:08:14] [INFO] [LastChance] Threat detected: @Area2D@589
+[12:08:14] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 44.5507545471191
+[12:08:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:14] [INFO] [Bullet] Exiting penetration at (-11.37253, 908.9232) after traveling 41.6666717529297 pixels through wall
+[12:08:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(634.7554, 764.1686), shooter_id=154786597594, bullet_pos=(53.20642, 809.7601)
+[12:08:14] [INFO] [Bullet] Using shooter_position, distance=583.333374023438
+[12:08:14] [INFO] [Bullet] Distance to wall: 583.333374023438 (39.7202420927463% of viewport)
+[12:08:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:14] [INFO] [LastChance] Threat detected: Bullet
+[12:08:14] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(633.7642, 757.9769), shooter_id=154786597594, bullet_pos=(50.76007, 738.3809)
+[12:08:14] [INFO] [Bullet] Using shooter_position, distance=583.333374023438
+[12:08:14] [INFO] [Bullet] Distance to wall: 583.333374023438 (39.7202420927463% of viewport)
+[12:08:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:14] [INFO] [Bullet] Starting wall penetration at (50.76007, 738.3809)
+[12:08:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.8959999084473
+[12:08:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:14] [INFO] [Bullet] Exiting penetration at (4.119743, 736.8132) after traveling 41.6666717529297 pixels through wall
+[12:08:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:14] [INFO] [LastChance] Threat detected: @Area2D@592
+[12:08:14] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:14] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:08:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=156783086417, bullet_pos=(51.28431, 715.7688)
+[12:08:14] [INFO] [Bullet] Using shooter_position, distance=1257.54333496094
+[12:08:14] [INFO] [Bullet] Distance to wall: 1257.54333496094 (85.6284380957794% of viewport)
+[12:08:14] [INFO] [Bullet] Distance-based penetration chance: 46.7668222215907%
+[12:08:14] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:14] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:08:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(633.5322, 754.9022), shooter_id=154786597594, bullet_pos=(176.9953, 714.3598)
+[12:08:14] [INFO] [Bullet] Using shooter_position, distance=458.333526611328
+[12:08:14] [INFO] [Bullet] Distance to wall: 458.333526611328 (31.2087726280045% of viewport)
+[12:08:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:14] [INFO] [Bullet] Starting wall penetration at (176.9953, 714.3598)
+[12:08:14] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:08:14] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:08:14] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:08:14] [INFO] [Bullet] Exiting penetration at (130.5115, 710.2319) after traveling 41.6666717529297 pixels through wall
+[12:08:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:14] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:08:15] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:08:15] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:08:15] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:08:15] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:08:15] [INFO] [Player] Ready! Grenades: 1/3
+[12:08:15] [INFO] [ScoreManager] Level started with 10 enemies
+[12:08:15] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:08:15] [ENEMY] [Enemy1] Registered as sound listener
+[12:08:15] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:08:15] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:08:15] [ENEMY] [Enemy2] Registered as sound listener
+[12:08:15] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:08:15] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:08:15] [ENEMY] [Enemy3] Registered as sound listener
+[12:08:15] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:08:15] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:08:15] [ENEMY] [Enemy4] Registered as sound listener
+[12:08:15] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:08:15] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:08:15] [ENEMY] [Enemy5] Registered as sound listener
+[12:08:15] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:08:15] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:08:15] [ENEMY] [Enemy6] Registered as sound listener
+[12:08:15] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:08:15] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:08:15] [ENEMY] [Enemy7] Registered as sound listener
+[12:08:15] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:08:15] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:08:15] [ENEMY] [Enemy8] Registered as sound listener
+[12:08:15] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:08:15] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:08:15] [ENEMY] [Enemy9] Registered as sound listener
+[12:08:15] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:08:15] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:08:15] [ENEMY] [Enemy10] Registered as sound listener
+[12:08:15] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:08:15] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:08:15] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:08:15] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:08:15] [INFO] [LastChance] Found player: Player
+[12:08:15] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:08:15] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:08:15] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:08:15] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[12:08:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=20
+[12:08:15] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:08:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[12:08:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[12:08:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1153.019, 1516.452), shooter_id=186646529638, bullet_pos=(46.92997, 934.1586)
+[12:08:16] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[12:08:16] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[12:08:16] [INFO] [Bullet] Distance-based penetration chance: 47.3661071507571%
+[12:08:16] [INFO] [Bullet] Starting wall penetration at (46.92997, 934.1586)
+[12:08:16] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:08:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29.7942066192627
+[12:08:16] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:16] [INFO] [Bullet] Exiting penetration at (5.635967, 912.4196) after traveling 41.6666717529297 pixels through wall
+[12:08:16] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=186646529638, bullet_pos=(33.87472, 883.6538)
+[12:08:16] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[12:08:16] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[12:08:16] [INFO] [Bullet] Distance-based penetration chance: 47.366097453433%
+[12:08:16] [INFO] [Bullet] Starting wall penetration at (33.87472, 883.6538)
+[12:08:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 44.5005912780762
+[12:08:16] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:16] [INFO] [Bullet] Exiting penetration at (-6.515034, 860.2776) after traveling 41.6666717529297 pixels through wall
+[12:08:16] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=186646529638, bullet_pos=(63.90164, 841.4061)
+[12:08:16] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:16] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:16] [INFO] [Bullet] Distance-based penetration chance: 50.6761238618226%
+[12:08:16] [INFO] [Bullet] Starting wall penetration at (63.90164, 841.4061)
+[12:08:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8.90251350402832
+[12:08:16] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:16] [INFO] [Bullet] Exiting penetration at (24.47953, 816.4327) after traveling 41.6666679382324 pixels through wall
+[12:08:16] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1054.474, 1465.056), shooter_id=186646529638, bullet_pos=(60.28213, 778.2879)
+[12:08:16] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:16] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1054.474, 1465.056), shooter_id=186646529638, bullet_pos=(145.9576, 707.3212)
+[12:08:16] [INFO] [Bullet] Using shooter_position, distance=1183.03186035156
+[12:08:16] [INFO] [Bullet] Distance to wall: 1183.03186035156 (80.5548147751069% of viewport)
+[12:08:16] [INFO] [Bullet] Distance-based penetration chance: 52.686049429042%
+[12:08:16] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=186646529638, bullet_pos=(58.95797, 715.3979)
+[12:08:16] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
+[12:08:16] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
+[12:08:16] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:08:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=186646529638, bullet_pos=(508.579, 423.1566)
+[12:08:16] [INFO] [Bullet] Using shooter_position, distance=1141.38195800781
+[12:08:16] [INFO] [Bullet] Distance to wall: 1141.38195800781 (77.7187963371038% of viewport)
+[12:08:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5923, 752.3362), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:16] [ENEMY] [Enemy2] Heard gunshot at (689.5923, 752.3362), source_type=1, intensity=0.02, distance=353
+[12:08:16] [ENEMY] [Enemy4] Heard gunshot at (689.5923, 752.3362), source_type=1, intensity=0.07, distance=184
+[12:08:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:16] [INFO] [LastChance] Threat detected: Bullet
+[12:08:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:16] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:08:16] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:08:17] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:08:17] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[12:08:17] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:08:17] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:08:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=186646529638, bullet_pos=(283.071, 264.1355)
+[12:08:17] [INFO] [Bullet] Using shooter_position, distance=1391.26037597656
+[12:08:17] [INFO] [Bullet] Distance to wall: 1391.26037597656 (94.7334773024902% of viewport)
+[12:08:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5923, 752.3362), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:17] [INFO] [LastChance] Threat detected: Bullet
+[12:08:17] [INFO] [LastChance] Triggering last chance effect!
+[12:08:17] [INFO] [LastChance] Starting last chance effect:
+[12:08:17] [INFO] [LastChance]   - Time will be frozen (except player)
+[12:08:17] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[12:08:17] [INFO] [LastChance]   - Sepia intensity: 0.70
+[12:08:17] [INFO] [LastChance]   - Brightness: 0.60
+[12:08:17] [INFO] [LastChance] Pushed bullet Bullet from distance 101.5 to 200.0
+[12:08:17] [INFO] [LastChance] Pushed 1 threatening bullets away from player
+[12:08:17] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[12:08:17] [INFO] [LastChance] Skipping player node: Player
+[12:08:17] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[12:08:17] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[12:08:17] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:08:17] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:08:17] [INFO] [LastChance] Ending last chance effect
+[12:08:17] [INFO] [LastChance] All process modes restored
+[12:08:17] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:08:17] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:08:17] [INFO] [Player] Ready! Grenades: 1/3
+[12:08:17] [INFO] [ScoreManager] Level started with 10 enemies
+[12:08:17] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:08:17] [ENEMY] [Enemy1] Registered as sound listener
+[12:08:17] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:08:17] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:08:17] [ENEMY] [Enemy2] Registered as sound listener
+[12:08:17] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:08:17] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:08:17] [ENEMY] [Enemy3] Registered as sound listener
+[12:08:17] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:08:17] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:08:17] [ENEMY] [Enemy4] Registered as sound listener
+[12:08:17] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:08:17] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:08:17] [ENEMY] [Enemy5] Registered as sound listener
+[12:08:17] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:08:17] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:08:17] [ENEMY] [Enemy6] Registered as sound listener
+[12:08:17] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:08:17] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:08:17] [ENEMY] [Enemy7] Registered as sound listener
+[12:08:17] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:08:17] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:08:17] [ENEMY] [Enemy8] Registered as sound listener
+[12:08:17] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:08:17] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:08:17] [ENEMY] [Enemy9] Registered as sound listener
+[12:08:17] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:08:17] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:08:17] [ENEMY] [Enemy10] Registered as sound listener
+[12:08:17] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:08:17] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:08:17] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:08:17] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:08:17] [INFO] [LastChance] Found player: Player
+[12:08:17] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:08:17] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:08:17] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:08:18] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[12:08:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=20
+[12:08:18] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:08:18] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[12:08:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:18] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[12:08:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:18] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:18] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:18] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1153.019, 1516.452), shooter_id=216241538747, bullet_pos=(46.92997, 934.1586)
+[12:08:18] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[12:08:18] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[12:08:18] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:08:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=216241538747, bullet_pos=(33.87472, 883.6538)
+[12:08:18] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[12:08:18] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[12:08:18] [INFO] [Bullet] Distance-based penetration chance: 47.366097453433%
+[12:08:18] [INFO] [Bullet] Starting wall penetration at (33.87472, 883.6538)
+[12:08:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 44.5005912780762
+[12:08:18] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:18] [INFO] [Bullet] Exiting penetration at (-6.515034, 860.2776) after traveling 41.6666717529297 pixels through wall
+[12:08:18] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=216241538747, bullet_pos=(63.90164, 841.4061)
+[12:08:19] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:19] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1054.474, 1465.056), shooter_id=216241538747, bullet_pos=(60.28213, 778.2879)
+[12:08:19] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:19] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:19] [INFO] [Bullet] Distance-based penetration chance: 50.6761238618226%
+[12:08:19] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=216241538747, bullet_pos=(315.5861, 700.7253)
+[12:08:19] [INFO] [Bullet] Using shooter_position, distance=1100.603515625
+[12:08:19] [INFO] [Bullet] Distance to wall: 1100.603515625 (74.9421172103146% of viewport)
+[12:08:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=216241538747, bullet_pos=(58.95797, 715.3979)
+[12:08:19] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
+[12:08:19] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
+[12:08:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=216241538747, bullet_pos=(688.4064, 835.2679)
+[12:08:19] [INFO] [Bullet] Using shooter_position, distance=763.624755859375
+[12:08:19] [INFO] [Bullet] Distance to wall: 763.624755859375 (51.9966138085732% of viewport)
+[12:08:19] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:08:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=216241538747, bullet_pos=(509.9501, 880.5835)
+[12:08:19] [INFO] [Bullet] Using shooter_position, distance=836.233642578125
+[12:08:19] [INFO] [Bullet] Distance to wall: 836.233642578125 (56.9406864212225% of viewport)
+[12:08:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=216241538747, bullet_pos=(514.298, 432.1496)
+[12:08:19] [INFO] [Bullet] Using shooter_position, distance=1130.77478027344
+[12:08:19] [INFO] [Bullet] Distance to wall: 1130.77478027344 (76.9965341002903% of viewport)
+[12:08:19] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:08:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=216241538747, bullet_pos=(328.4599, 271.2202)
+[12:08:19] [INFO] [Bullet] Using shooter_position, distance=1361.4951171875
+[12:08:19] [INFO] [Bullet] Distance to wall: 1361.4951171875 (92.7067060980583% of viewport)
+[12:08:19] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[12:08:19] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:08:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:08:19] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:08:19] [INFO] [LastChance] Threat detected: Bullet
+[12:08:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(427.9019, 600.5388), shooter_id=213959837196, bullet_pos=(502.5487, 700.8027)
+[12:08:19] [INFO] [Bullet] Using shooter_position, distance=125.000030517578
+[12:08:19] [INFO] [Bullet] Distance to wall: 125.000030517578 (8.51148193272994% of viewport)
+[12:08:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:19] [INFO] [Bullet] Starting wall penetration at (502.5487, 700.8027)
+[12:08:19] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:08:19] [INFO] [Bullet] Exiting penetration at (530.4169, 738.2346) after traveling 41.6666679382324 pixels through wall
+[12:08:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(313.3008, 378.494), source=ENEMY (Enemy1), range=1469, listeners=10
+[12:08:19] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=1, below_threshold=4
+[12:08:19] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(722.8379, 779.1613), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:19] [ENEMY] [Enemy4] Heard gunshot at (722.8379, 779.1613), source_type=1, intensity=0.12, distance=143
+[12:08:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:19] [INFO] [LastChance] Threat detected: @Area2D@1125
+[12:08:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:19] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[12:08:19] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(726.0397, 781.0811), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:19] [INFO] [LastChance] Threat detected: @Area2D@1126
+[12:08:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:19] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:08:19] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:08:19] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:08:19] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:08:19] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(739.409, 785.9335), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:19] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[12:08:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=216241538747, bullet_pos=(54.45505, 509.6828)
+[12:08:19] [INFO] [Bullet] Using shooter_position, distance=1345.2158203125
+[12:08:19] [INFO] [Bullet] Distance to wall: 1345.2158203125 (91.5982188388522% of viewport)
+[12:08:19] [INFO] [LastChance] Threat detected: @Area2D@1127
+[12:08:19] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[12:08:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:19] [INFO] [LastChance] Threat detected: Bullet
+[12:08:19] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[12:08:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:19] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(742.8384, 785.9335), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:19] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:08:19] [INFO] [LastChance] Threat detected: @Area2D@1129
+[12:08:19] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[12:08:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:19] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(746.2679, 785.9335), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:19] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:08:19] [INFO] [LastChance] Threat detected: @Area2D@1130
+[12:08:19] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[12:08:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:19] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(749.6973, 785.9335), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:19] [INFO] [LastChance] Threat detected: @Area2D@1131
+[12:08:19] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[12:08:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:19] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:08:19] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[12:08:19] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:08:19] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(753.1268, 785.9335), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:19] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:08:19] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:08:19] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:08:19] [INFO] [LastChance] Player died
+[12:08:19] [INFO] [LastChance] Threat detected: @Area2D@1132
+[12:08:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:19] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(756.5562, 785.9335), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:20] [INFO] [LastChance] Threat detected: @Area2D@1133
+[12:08:20] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:20] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:20] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[12:08:20] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:08:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(694.7847, 769.3176), shooter_id=214245051301, bullet_pos=(502.5886, 688.9221)
+[12:08:20] [INFO] [Bullet] Using shooter_position, distance=208.333282470703
+[12:08:20] [INFO] [Bullet] Distance to wall: 208.333282470703 (14.1857962945565% of viewport)
+[12:08:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:20] [INFO] [Bullet] Starting wall penetration at (502.5886, 688.9221)
+[12:08:20] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:08:20] [INFO] [Bullet] Exiting penetration at (459.5367, 670.9135) after traveling 41.6666641235352 pixels through wall
+[12:08:20] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(351.7852, 430.7675), shooter_id=213674625937, bullet_pos=(760.7198, 1009.135)
+[12:08:20] [INFO] [Bullet] Using shooter_position, distance=708.33349609375
+[12:08:20] [INFO] [Bullet] Distance to wall: 708.33349609375 (48.2317302594703% of viewport)
+[12:08:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=216241538747, bullet_pos=(246.1438, 694.1089)
+[12:08:20] [INFO] [Bullet] Using shooter_position, distance=1079.21337890625
+[12:08:20] [INFO] [Bullet] Distance to wall: 1079.21337890625 (73.4856234681418% of viewport)
+[12:08:20] [INFO] [Bullet] Distance-based penetration chance: 60.9334392871679%
+[12:08:20] [INFO] [Bullet] Starting wall penetration at (246.1438, 694.1089)
+[12:08:20] [INFO] [Bullet] Raycast backward hit penetrating body at distance 0.94547408819199
+[12:08:20] [ENEMY] [Enemy2] Hit taken, health: 1/2
+[12:08:20] [INFO] [Bullet] Raycast backward hit penetrating body at distance 22.6956939697266
+[12:08:20] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:20] [INFO] [Bullet] Exiting penetration at (281.0945, 727.7355) after traveling 43.5005226135254 pixels through wall
+[12:08:20] [INFO] [Bullet] Damage multiplier after penetration: 0.05625
+[12:08:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(351.7852, 430.7675), shooter_id=213674625937, bullet_pos=(917.0438, 810.3142)
+[12:08:20] [INFO] [Bullet] Using shooter_position, distance=680.862060546875
+[12:08:20] [INFO] [Bullet] Distance to wall: 680.862060546875 (46.361149697568% of viewport)
+[12:08:20] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:08:20] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:08:20] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:08:20] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:08:20] [INFO] [Player] Ready! Grenades: 1/3
+[12:08:20] [INFO] [ScoreManager] Level started with 10 enemies
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:08:20] [ENEMY] [Enemy1] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:08:20] [ENEMY] [Enemy2] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:08:20] [ENEMY] [Enemy3] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:08:20] [ENEMY] [Enemy4] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:08:20] [ENEMY] [Enemy5] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:08:20] [ENEMY] [Enemy6] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:08:20] [ENEMY] [Enemy7] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:08:20] [ENEMY] [Enemy8] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:08:20] [ENEMY] [Enemy9] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:08:20] [ENEMY] [Enemy10] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:08:20] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:08:20] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:08:20] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:08:20] [INFO] [LastChance] Found player: Player
+[12:08:20] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:08:20] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:08:20] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:08:20] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:08:20] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:08:20] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:08:20] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:08:20] [INFO] [Player] Ready! Grenades: 1/3
+[12:08:20] [INFO] [ScoreManager] Level started with 10 enemies
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
+[12:08:20] [ENEMY] [Enemy1] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
+[12:08:20] [ENEMY] [Enemy2] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
+[12:08:20] [ENEMY] [Enemy3] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
+[12:08:20] [ENEMY] [Enemy4] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
+[12:08:20] [ENEMY] [Enemy5] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
+[12:08:20] [ENEMY] [Enemy6] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
+[12:08:20] [ENEMY] [Enemy7] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
+[12:08:20] [ENEMY] [Enemy8] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
+[12:08:20] [ENEMY] [Enemy9] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:08:20] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
+[12:08:20] [ENEMY] [Enemy10] Registered as sound listener
+[12:08:20] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:08:20] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:08:20] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:08:20] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:08:20] [INFO] [LastChance] Found player: Player
+[12:08:20] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:08:20] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:08:20] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:08:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[12:08:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=30
+[12:08:21] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
+[12:08:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[12:08:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[12:08:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1153.019, 1516.452), shooter_id=273753835671, bullet_pos=(46.92997, 934.1586)
+[12:08:21] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[12:08:21] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[12:08:21] [INFO] [Bullet] Distance-based penetration chance: 47.3661071507571%
+[12:08:21] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:21] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:08:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=273753835671, bullet_pos=(33.87472, 883.6538)
+[12:08:21] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[12:08:21] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[12:08:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=273753835671, bullet_pos=(63.90164, 841.4061)
+[12:08:21] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:21] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=273753835671, bullet_pos=(264.0308, 709.975)
+[12:08:21] [INFO] [Bullet] Using shooter_position, distance=1168.39013671875
+[12:08:21] [INFO] [Bullet] Distance to wall: 1168.39013671875 (79.557832889193% of viewport)
+[12:08:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=273753835671, bullet_pos=(231.1982, 702.4166)
+[12:08:21] [INFO] [Bullet] Using shooter_position, distance=1159.99523925781
+[12:08:21] [INFO] [Bullet] Distance to wall: 1159.99523925781 (78.9862088842225% of viewport)
+[12:08:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1054.474, 1465.056), shooter_id=273753835671, bullet_pos=(60.28213, 778.2879)
+[12:08:21] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:21] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1054.474, 1465.056), shooter_id=273753835671, bullet_pos=(147.0996, 708.7228)
+[12:08:21] [INFO] [Bullet] Using shooter_position, distance=1181.25720214844
+[12:08:21] [INFO] [Bullet] Distance to wall: 1181.25720214844 (80.4339750347474% of viewport)
+[12:08:21] [INFO] [Bullet] Distance-based penetration chance: 52.827029126128%
+[12:08:21] [INFO] [Bullet] Starting wall penetration at (147.0996, 708.7228)
+[12:08:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:08:21] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:08:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7.27625131607056
+[12:08:21] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:21] [INFO] [Bullet] Exiting penetration at (178.6401, 683.4501) after traveling 35.4166679382324 pixels through wall
+[12:08:21] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:08:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=273753835671, bullet_pos=(58.95797, 715.3979)
+[12:08:22] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
+[12:08:22] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
+[12:08:22] [INFO] [Bullet] Distance-based penetration chance: 50.6760656778783%
+[12:08:22] [INFO] [Bullet] Starting wall penetration at (58.95797, 715.3979)
+[12:08:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.9559803009033
+[12:08:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:22] [INFO] [Bullet] Exiting penetration at (21.63927, 687.3784) after traveling 41.6666679382324 pixels through wall
+[12:08:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=273753835671, bullet_pos=(508.4933, 985.6202)
+[12:08:22] [INFO] [Bullet] Using shooter_position, distance=764.451110839844
+[12:08:22] [INFO] [Bullet] Distance to wall: 764.451110839844 (52.0528818387262% of viewport)
+[12:08:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=273753835671, bullet_pos=(504.6093, 988.7689)
+[12:08:22] [INFO] [Bullet] Using shooter_position, distance=765.324829101563
+[12:08:22] [INFO] [Bullet] Distance to wall: 765.324829101563 (52.1123749217928% of viewport)
+[12:08:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=273753835671, bullet_pos=(527.4557, 1002.684)
+[12:08:22] [INFO] [Bullet] Using shooter_position, distance=738.944763183594
+[12:08:22] [INFO] [Bullet] Distance to wall: 738.944763183594 (50.3161077247745% of viewport)
+[12:08:22] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:08:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:22] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
+[12:08:22] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
+[12:08:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:22] [INFO] [LastChance] Threat detected: Bullet
+[12:08:22] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[12:08:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:22] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[12:08:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:22] [INFO] [LastChance] Threat detected: Bullet
+[12:08:22] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[12:08:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=273753835671, bullet_pos=(63.99854, 1201.16)
+[12:08:22] [INFO] [Bullet] Using shooter_position, distance=1060.205078125
+[12:08:22] [INFO] [Bullet] Distance to wall: 1060.205078125 (72.1913133147634% of viewport)
+[12:08:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(313.1258, 378.5782), source=ENEMY (Enemy1), range=1469, listeners=10
+[12:08:22] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=1, below_threshold=4
+[12:08:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:08:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[12:08:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:22] [INFO] [LastChance] Threat detected: @Area2D@1657
+[12:08:22] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[12:08:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:22] [INFO] [LastChance] Threat detected: @Area2D@1658
+[12:08:22] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[12:08:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:22] [ENEMY] [Enemy2] Hit taken, health: 2/3
+[12:08:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:22] [INFO] [LastChance] Threat detected: @Area2D@1659
+[12:08:22] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
+[12:08:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:08:22] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[12:08:22] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:08:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:22] [INFO] [LastChance] Threat detected: Bullet
+[12:08:22] [INFO] [LastChance] Triggering last chance effect!
+[12:08:22] [INFO] [LastChance] Starting last chance effect:
+[12:08:22] [INFO] [LastChance]   - Time will be frozen (except player)
+[12:08:22] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[12:08:22] [INFO] [LastChance]   - Sepia intensity: 0.70
+[12:08:22] [INFO] [LastChance]   - Brightness: 0.60
+[12:08:22] [INFO] [LastChance] Pushed bullet @Area2D@1657 from distance 20.0 to 200.0
+[12:08:22] [INFO] [LastChance] Pushed bullet @Area2D@1659 from distance 55.1 to 200.0
+[12:08:22] [INFO] [LastChance] Pushed bullet Bullet from distance 96.5 to 200.0
+[12:08:22] [INFO] [LastChance] Pushed 3 threatening bullets away from player
+[12:08:22] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[12:08:22] [INFO] [LastChance] Skipping player node: Player
+[12:08:22] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[12:08:22] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[12:08:23] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:08:23] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:08:23] [INFO] [LastChance] Ending last chance effect
+[12:08:23] [INFO] [LastChance] All process modes restored
+[12:08:23] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:08:23] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:08:23] [INFO] [Player] Ready! Grenades: 1/3
+[12:08:23] [INFO] [ScoreManager] Level started with 10 enemies
+[12:08:23] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:08:23] [ENEMY] [Enemy1] Registered as sound listener
+[12:08:23] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:08:23] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:08:23] [ENEMY] [Enemy2] Registered as sound listener
+[12:08:23] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:08:23] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:08:23] [ENEMY] [Enemy3] Registered as sound listener
+[12:08:23] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:08:23] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:08:23] [ENEMY] [Enemy4] Registered as sound listener
+[12:08:23] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:08:23] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:08:23] [ENEMY] [Enemy5] Registered as sound listener
+[12:08:23] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:08:23] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:08:23] [ENEMY] [Enemy6] Registered as sound listener
+[12:08:23] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:08:23] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:08:23] [ENEMY] [Enemy7] Registered as sound listener
+[12:08:23] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:08:23] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:08:23] [ENEMY] [Enemy8] Registered as sound listener
+[12:08:23] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:08:23] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:08:23] [ENEMY] [Enemy9] Registered as sound listener
+[12:08:23] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:08:23] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:08:23] [ENEMY] [Enemy10] Registered as sound listener
+[12:08:23] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:08:23] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:08:23] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:08:23] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:08:23] [INFO] [LastChance] Found player: Player
+[12:08:23] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:08:23] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:08:23] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:08:23] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[12:08:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=20
+[12:08:23] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:08:23] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[12:08:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:23] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[12:08:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:23] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:24] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:24] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1153.019, 1516.452), shooter_id=306217749313, bullet_pos=(46.92997, 934.1586)
+[12:08:24] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[12:08:24] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[12:08:24] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:08:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=306217749313, bullet_pos=(33.87472, 883.6538)
+[12:08:24] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[12:08:24] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[12:08:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=306217749313, bullet_pos=(63.90164, 841.4061)
+[12:08:24] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:24] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:24] [INFO] [Bullet] Distance-based penetration chance: 50.6761238618226%
+[12:08:24] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=306217749313, bullet_pos=(307.8917, 711.2335)
+[12:08:24] [INFO] [Bullet] Using shooter_position, distance=1135.92858886719
+[12:08:24] [INFO] [Bullet] Distance to wall: 1135.92858886719 (77.347466404457% of viewport)
+[12:08:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1054.474, 1465.056), shooter_id=306217749313, bullet_pos=(60.28213, 778.2879)
+[12:08:24] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:24] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1054.474, 1465.056), shooter_id=306217749313, bullet_pos=(225.605, 701.9814)
+[12:08:24] [INFO] [Bullet] Using shooter_position, distance=1126.63537597656
+[12:08:24] [INFO] [Bullet] Distance to wall: 1126.63537597656 (76.7146744500227% of viewport)
+[12:08:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=306217749313, bullet_pos=(58.95797, 715.3979)
+[12:08:24] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
+[12:08:24] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
+[12:08:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=306217749313, bullet_pos=(701.382, 875.648)
+[12:08:24] [INFO] [Bullet] Using shooter_position, distance=757.525695800781
+[12:08:24] [INFO] [Bullet] Distance to wall: 757.525695800781 (51.5813175940011% of viewport)
+[12:08:24] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:08:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=306217749313, bullet_pos=(319.9664, 468.6685)
+[12:08:24] [INFO] [Bullet] Using shooter_position, distance=1201.10754394531
+[12:08:24] [INFO] [Bullet] Distance to wall: 1201.10754394531 (81.7856213092566% of viewport)
+[12:08:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=306217749313, bullet_pos=(510.1617, 961.7427)
+[12:08:24] [INFO] [Bullet] Using shooter_position, distance=816.759887695313
+[12:08:24] [INFO] [Bullet] Distance to wall: 816.759887695313 (55.6146826421741% of viewport)
+[12:08:24] [INFO] [Bullet] Distance-based penetration chance: 81.7828702507969%
+[12:08:24] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:24] [ENEMY] [Enemy2] Hit taken, health: 2/3
+[12:08:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1054.474, 1465.056), shooter_id=306217749313, bullet_pos=(695.8592, 827.3031)
+[12:08:24] [INFO] [Bullet] Using shooter_position, distance=731.664978027344
+[12:08:24] [INFO] [Bullet] Distance to wall: 731.664978027344 (49.8204137671409% of viewport)
+[12:08:24] [INFO] [Bullet] Distance-based penetration chance: 88.5428506050023%
+[12:08:24] [INFO] [Bullet] Starting wall penetration at (695.8592, 827.3031)
+[12:08:24] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:08:24] [INFO] [Bullet] Exiting penetration at (729.7795, 836.3428) after traveling 30.1041698455811 pixels through wall
+[12:08:24] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[12:08:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:25] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
+[12:08:25] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
+[12:08:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:25] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[12:08:25] [INFO] [LastChance] Threat detected: Bullet
+[12:08:25] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:25] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:08:25] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:08:25] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:08:25] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:08:25] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:08:25] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:08:25] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[12:08:25] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:08:25] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:08:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:08:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(699.3511, 764.9192), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:25] [INFO] [LastChance] Threat detected: @Area2D@1927
+[12:08:25] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:25] [INFO] [LastChance] Threat detected: @Area2D@1926
+[12:08:25] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:25] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(395.3062, 547.4678), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:08:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:08:25] [INFO] [LastChance] Threat detected: @Area2D@1928
+[12:08:25] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(427.4224, 600.8005), shooter_id=303936047101, bullet_pos=(501.1172, 701.7664)
+[12:08:25] [INFO] [Bullet] Using shooter_position, distance=125.000038146973
+[12:08:25] [INFO] [Bullet] Distance to wall: 125.000038146973 (8.51148245222944% of viewport)
+[12:08:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:25] [INFO] [Bullet] Starting wall penetration at (501.1172, 701.7664)
+[12:08:25] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(385.9185, 542.4033), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:08:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:08:25] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48.5615310668945
+[12:08:25] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:25] [INFO] [Bullet] Exiting penetration at (528.6298, 739.4603) after traveling 41.6666679382324 pixels through wall
+[12:08:25] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:25] [INFO] [LastChance] Threat detected: @Area2D@1930
+[12:08:25] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(312.9391, 378.6534), source=ENEMY (Enemy1), range=1469, listeners=10
+[12:08:25] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=1, below_threshold=4
+[12:08:25] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(376.5307, 537.3389), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:08:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:08:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(640.0501, 760.3319), shooter_id=304221259339, bullet_pos=(395.2943, 709.3945)
+[12:08:25] [INFO] [Bullet] Using shooter_position, distance=250.000015258789
+[12:08:25] [INFO] [Bullet] Distance to wall: 250.000015258789 (17.0229607484629% of viewport)
+[12:08:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:25] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:08:25] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[12:08:25] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:08:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(644.091, 757.9196), shooter_id=304221259339, bullet_pos=(60.76225, 760.2344)
+[12:08:25] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
+[12:08:25] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
+[12:08:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:25] [INFO] [Bullet] Starting wall penetration at (60.76225, 760.2344)
+[12:08:25] [INFO] [LastChance] Threat detected: @Area2D@1932
+[12:08:25] [INFO] [LastChance] Triggering last chance effect!
+[12:08:25] [INFO] [LastChance] Starting last chance effect:
+[12:08:25] [INFO] [LastChance]   - Time will be frozen (except player)
+[12:08:25] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[12:08:25] [INFO] [LastChance]   - Sepia intensity: 0.70
+[12:08:25] [INFO] [LastChance]   - Brightness: 0.60
+[12:08:25] [INFO] [LastChance] Pushed bullet @Area2D@1930 from distance 34.6 to 200.0
+[12:08:25] [INFO] [LastChance] Pushed bullet @Area2D@1932 from distance 128.2 to 200.0
+[12:08:25] [INFO] [LastChance] Pushed 2 threatening bullets away from player
+[12:08:25] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[12:08:25] [INFO] [LastChance] Skipping player node: Player
+[12:08:25] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:25] [INFO] [Bullet] Exiting penetration at (55.76229, 760.2542) after traveling 0 pixels through wall
+[12:08:25] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:25] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[12:08:25] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[12:08:25] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:08:25] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:08:25] [INFO] [LastChance] Ending last chance effect
+[12:08:25] [INFO] [LastChance] All process modes restored
+[12:08:25] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:08:25] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:08:25] [INFO] [Player] Ready! Grenades: 1/3
+[12:08:25] [INFO] [ScoreManager] Level started with 10 enemies
+[12:08:25] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:08:25] [ENEMY] [Enemy1] Registered as sound listener
+[12:08:25] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:08:25] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:08:25] [ENEMY] [Enemy2] Registered as sound listener
+[12:08:25] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:08:25] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:08:25] [ENEMY] [Enemy3] Registered as sound listener
+[12:08:25] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:08:25] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:08:25] [ENEMY] [Enemy4] Registered as sound listener
+[12:08:25] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:08:25] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:08:25] [ENEMY] [Enemy5] Registered as sound listener
+[12:08:25] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:08:25] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:08:25] [ENEMY] [Enemy6] Registered as sound listener
+[12:08:25] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:08:25] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:08:25] [ENEMY] [Enemy7] Registered as sound listener
+[12:08:25] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:08:25] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:08:25] [ENEMY] [Enemy8] Registered as sound listener
+[12:08:25] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:08:25] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:08:25] [ENEMY] [Enemy9] Registered as sound listener
+[12:08:25] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:08:25] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:08:25] [ENEMY] [Enemy10] Registered as sound listener
+[12:08:25] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:08:25] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:08:25] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:08:25] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:08:25] [INFO] [LastChance] Found player: Player
+[12:08:25] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:08:25] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:08:25] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:08:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(377.1667, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:08:26] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:08:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=6
+[12:08:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(342.8333, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=6
+[12:08:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(321.8333, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=6
+[12:08:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(969.0773, 1012.11865)
+[12:08:26] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:26] [INFO] [Bullet] Using shooter_position, distance=1401,2477
+[12:08:26] [INFO] [Bullet] Distance to wall: 1401,2477 (95,413536% of viewport)
+[12:08:26] [INFO] [Bullet] Distance-based penetration chance: 35,350883%
+[12:08:26] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.4444, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=6
+[12:08:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.4444, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:27] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=6
+[12:08:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.4444, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:27] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=6
+[12:08:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(964.9669, 1021.0022)
+[12:08:27] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:27] [INFO] [Bullet] Using shooter_position, distance=1404,8511
+[12:08:27] [INFO] [Bullet] Distance to wall: 1404,8511 (95,6589% of viewport)
+[12:08:27] [INFO] [Bullet] Distance-based penetration chance: 35,06462%
+[12:08:27] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(964.9975, 1021.08734)
+[12:08:27] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:27] [INFO] [Bullet] Using shooter_position, distance=1404,934
+[12:08:27] [INFO] [Bullet] Distance to wall: 1404,934 (95,664536% of viewport)
+[12:08:27] [INFO] [Bullet] Distance-based penetration chance: 35,05804%
+[12:08:27] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(965.0116, 1021.12775)
+[12:08:27] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:27] [INFO] [Bullet] Using shooter_position, distance=1404,973
+[12:08:27] [INFO] [Bullet] Distance to wall: 1404,973 (95,6672% of viewport)
+[12:08:27] [INFO] [Bullet] Distance-based penetration chance: 35,05494%
+[12:08:27] [INFO] [Bullet] Starting wall penetration at (965.0116, 1021.12775)
+[12:08:27] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:08:27] [INFO] [Bullet] Exiting penetration at (1008.9053, 1005.2809) after traveling 41,666668 pixels through wall
+[12:08:27] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:08:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.4444, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:27] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=6
+[12:08:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.4444, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:27] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=6
+[12:08:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.4444, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:27] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=6
+[12:08:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(905.8851, 1398.3643)
+[12:08:27] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:27] [INFO] [Bullet] Using shooter_position, distance=1666,1484
+[12:08:27] [INFO] [Bullet] Distance to wall: 1666,1484 (113,45111% of viewport)
+[12:08:27] [INFO] [Bullet] Distance-based penetration chance: 27,309778%
+[12:08:27] [INFO] [Bullet] Starting wall penetration at (905.8851, 1398.3643)
+[12:08:27] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:08:27] [INFO] [Bullet] Exiting penetration at (951.25586, 1409.2854) after traveling 41,66667 pixels through wall
+[12:08:27] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:08:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(892.68066, 1444.9784)
+[12:08:28] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:28] [INFO] [Bullet] Using shooter_position, distance=1698,482
+[12:08:28] [INFO] [Bullet] Distance to wall: 1698,482 (115,65278% of viewport)
+[12:08:28] [INFO] [Bullet] Distance-based penetration chance: 26,869446%
+[12:08:28] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(892.69116, 1444.9463)
+[12:08:28] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:28] [INFO] [Bullet] Using shooter_position, distance=1698,4602
+[12:08:28] [INFO] [Bullet] Distance to wall: 1698,4602 (115,65128% of viewport)
+[12:08:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.4444, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=6
+[12:08:28] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:08:28] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:08:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.4444, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=6
+[12:08:28] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:08:28] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:08:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.4444, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=6
+[12:08:28] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:08:28] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[12:08:28] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:08:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.4444, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=6
+[12:08:28] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:08:28] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:08:28] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:08:28] [INFO] [LastChance] Player died
+[12:08:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.4444, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=6
+[12:08:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.4444, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=6
+[12:08:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.4444, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:29] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=6
+[12:08:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(991.0971, 1399.331)
+[12:08:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:29] [INFO] [Bullet] Using shooter_position, distance=1714,7598
+[12:08:29] [INFO] [Bullet] Distance to wall: 1714,7598 (116,76115% of viewport)
+[12:08:29] [INFO] [Bullet] Distance-based penetration chance: 26,64777%
+[12:08:29] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(690.1783, 1023.8494)
+[12:08:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:29] [INFO] [Bullet] Using shooter_position, distance=1234,7526
+[12:08:29] [INFO] [Bullet] Distance to wall: 1234,7526 (84,07658% of viewport)
+[12:08:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(522.59784, 1017.35803)
+[12:08:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:29] [INFO] [Bullet] Using shooter_position, distance=1143,7333
+[12:08:29] [INFO] [Bullet] Distance to wall: 1143,7333 (77,87891% of viewport)
+[12:08:29] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:08:29] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:08:29] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:08:29] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:08:29] [INFO] [Player] Ready! Grenades: 1/3
+[12:08:29] [INFO] [ScoreManager] Level started with 10 enemies
+[12:08:29] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:08:29] [ENEMY] [Enemy1] Registered as sound listener
+[12:08:29] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:08:29] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:08:29] [ENEMY] [Enemy2] Registered as sound listener
+[12:08:29] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:08:29] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:08:29] [ENEMY] [Enemy3] Registered as sound listener
+[12:08:29] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:08:29] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:08:29] [ENEMY] [Enemy4] Registered as sound listener
+[12:08:29] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:08:29] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:08:29] [ENEMY] [Enemy5] Registered as sound listener
+[12:08:29] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:08:29] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:08:29] [ENEMY] [Enemy6] Registered as sound listener
+[12:08:29] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:08:29] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:08:29] [ENEMY] [Enemy7] Registered as sound listener
+[12:08:29] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:08:29] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:08:29] [ENEMY] [Enemy8] Registered as sound listener
+[12:08:29] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:08:29] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:08:29] [ENEMY] [Enemy9] Registered as sound listener
+[12:08:29] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:08:29] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:08:29] [ENEMY] [Enemy10] Registered as sound listener
+[12:08:29] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:08:29] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:08:29] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:08:29] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:08:29] [INFO] [LastChance] Found player: Player
+[12:08:29] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:08:29] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:08:29] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:08:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:08:29] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:08:29] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[12:08:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:08:29] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[12:08:29] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[12:08:29] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[12:08:29] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[12:08:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:08:29] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[12:08:29] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[12:08:29] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[12:08:29] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[12:08:29] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[12:08:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(37.37445, 1004.3032)
+[12:08:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:29] [INFO] [Bullet] Using shooter_position, distance=1004,9984
+[12:08:29] [INFO] [Bullet] Distance to wall: 1004,9984 (68,4322% of viewport)
+[12:08:29] [INFO] [Bullet] Distance-based penetration chance: 66,82911%
+[12:08:29] [INFO] [Bullet] Starting wall penetration at (37.37445, 1004.3032)
+[12:08:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40,37126
+[12:08:29] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:29] [INFO] [Bullet] Exiting penetration at (-2.4652557, 980.00146) after traveling 41,666668 pixels through wall
+[12:08:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:08:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:08:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(591.0493, 1019.9277)
+[12:08:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:29] [INFO] [Bullet] Using shooter_position, distance=1178,8094
+[12:08:29] [INFO] [Bullet] Distance to wall: 1178,8094 (80,2673% of viewport)
+[12:08:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1054.1592, 1016.2262)
+[12:08:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:29] [INFO] [Bullet] Using shooter_position, distance=1464,2292
+[12:08:29] [INFO] [Bullet] Distance to wall: 1464,2292 (99,702065% of viewport)
+[12:08:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1703.5759, 1210.7223)
+[12:08:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:29] [INFO] [Bullet] Using shooter_position, distance=2089,9807
+[12:08:29] [INFO] [Bullet] Distance to wall: 2089,9807 (142,31064% of viewport)
+[12:08:29] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:08:30] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:08:30] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:08:30] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:08:30] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:08:30] [INFO] [Player] Ready! Grenades: 1/3
+[12:08:30] [INFO] [ScoreManager] Level started with 10 enemies
+[12:08:30] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:08:30] [ENEMY] [Enemy1] Registered as sound listener
+[12:08:30] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:08:30] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:08:30] [ENEMY] [Enemy2] Registered as sound listener
+[12:08:30] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:08:30] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:08:30] [ENEMY] [Enemy3] Registered as sound listener
+[12:08:30] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:08:30] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:08:30] [ENEMY] [Enemy4] Registered as sound listener
+[12:08:30] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:08:30] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:08:30] [ENEMY] [Enemy5] Registered as sound listener
+[12:08:30] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:08:30] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:08:30] [ENEMY] [Enemy6] Registered as sound listener
+[12:08:30] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:08:30] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:08:30] [ENEMY] [Enemy7] Registered as sound listener
+[12:08:30] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:08:30] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:08:30] [ENEMY] [Enemy8] Registered as sound listener
+[12:08:30] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:08:30] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:08:30] [ENEMY] [Enemy9] Registered as sound listener
+[12:08:30] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:08:30] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:08:30] [ENEMY] [Enemy10] Registered as sound listener
+[12:08:30] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:08:30] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:08:30] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:08:30] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:08:30] [INFO] [LastChance] Found player: Player
+[12:08:30] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:08:30] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:08:30] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:08:30] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[12:08:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=20
+[12:08:30] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:08:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[12:08:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[12:08:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1153.019, 1516.452), shooter_id=392570079344, bullet_pos=(46.92997, 934.1586)
+[12:08:31] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[12:08:31] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[12:08:31] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:08:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=392570079344, bullet_pos=(33.87472, 883.6538)
+[12:08:31] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[12:08:31] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[12:08:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=392570079344, bullet_pos=(63.90164, 841.4061)
+[12:08:31] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:31] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:31] [INFO] [Bullet] Distance-based penetration chance: 50.6761238618226%
+[12:08:31] [INFO] [Bullet] Starting wall penetration at (63.90164, 841.4061)
+[12:08:31] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8.90251350402832
+[12:08:31] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:31] [INFO] [Bullet] Exiting penetration at (24.47953, 816.4327) after traveling 41.6666679382324 pixels through wall
+[12:08:31] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1054.474, 1465.056), shooter_id=392570079344, bullet_pos=(60.28213, 778.2879)
+[12:08:31] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:31] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:31] [INFO] [Bullet] Distance-based penetration chance: 50.6761238618226%
+[12:08:31] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=392570079344, bullet_pos=(466.0007, 710.7957)
+[12:08:31] [INFO] [Bullet] Using shooter_position, distance=1029.84216308594
+[12:08:31] [INFO] [Bullet] Distance to wall: 1029.84216308594 (70.1238465972761% of viewport)
+[12:08:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=392570079344, bullet_pos=(58.95797, 715.3979)
+[12:08:31] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
+[12:08:31] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
+[12:08:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=392570079344, bullet_pos=(723.8221, 809.1302)
+[12:08:31] [INFO] [Bullet] Using shooter_position, distance=802.833557128906
+[12:08:31] [INFO] [Bullet] Distance to wall: 802.833557128906 (54.6664131856437% of viewport)
+[12:08:31] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:08:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=392570079344, bullet_pos=(927.3135, 758.4457)
+[12:08:31] [INFO] [Bullet] Using shooter_position, distance=774.622985839844
+[12:08:31] [INFO] [Bullet] Distance to wall: 774.622985839844 (52.745503511905% of viewport)
+[12:08:31] [INFO] [Bullet] Distance-based penetration chance: 85.1302459027775%
+[12:08:31] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:31] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:08:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=392570079344, bullet_pos=(497.9018, 407.3518)
+[12:08:31] [INFO] [Bullet] Using shooter_position, distance=1160.31042480469
+[12:08:31] [INFO] [Bullet] Distance to wall: 1160.31042480469 (79.0076704476843% of viewport)
+[12:08:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(364.0251, 790.5541), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:31] [ENEMY] [Enemy1] Heard gunshot at (364.0251, 790.5541), source_type=0, intensity=0.01, distance=445
+[12:08:31] [ENEMY] [Enemy2] Heard gunshot at (364.0251, 790.5541), source_type=0, intensity=0.04, distance=243
+[12:08:31] [ENEMY] [Enemy4] Heard gunshot at (364.0251, 790.5541), source_type=0, intensity=0.01, distance=450
+[12:08:31] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:08:31] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:08:31] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:08:31] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[12:08:31] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:08:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(359.4142, 774.9263), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:31] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:08:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=392570079344, bullet_pos=(256.1277, 274.3604)
+[12:08:31] [INFO] [Bullet] Using shooter_position, distance=1397.2705078125
+[12:08:31] [INFO] [Bullet] Distance to wall: 1397.2705078125 (95.1427182308571% of viewport)
+[12:08:31] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:31] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:31] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:31] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:31] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:31] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(356.743, 774.6064), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:31] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:08:31] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=392570079344, bullet_pos=(57.79745, 400.9689)
+[12:08:32] [INFO] [Bullet] Using shooter_position, distance=1420.35888671875
+[12:08:32] [INFO] [Bullet] Distance to wall: 1420.35888671875 (96.7148484063689% of viewport)
+[12:08:32] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(925.88617, 760.07947)
+[12:08:32] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:32] [INFO] [Bullet] Using shooter_position, distance=1197,909
+[12:08:32] [INFO] [Bullet] Distance to wall: 1197,909 (81,56783% of viewport)
+[12:08:32] [INFO] [Bullet] Distance-based penetration chance: 51,504196%
+[12:08:32] [INFO] [Bullet] Starting wall penetration at (925.88617, 760.07947)
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[12:08:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(355.193, 790.5813), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:32] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:08:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36,549355
+[12:08:32] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:32] [INFO] [Bullet] Exiting penetration at (972.5368, 758.8568) after traveling 41,66667 pixels through wall
+[12:08:32] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(923.405, 772.3793)
+[12:08:32] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:32] [INFO] [Bullet] Using shooter_position, distance=1203,8466
+[12:08:32] [INFO] [Bullet] Distance to wall: 1203,8466 (81,97213% of viewport)
+[12:08:32] [INFO] [Bullet] Distance-based penetration chance: 51,03252%
+[12:08:32] [INFO] [Bullet] Starting wall penetration at (923.405, 772.3793)
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34,071552
+[12:08:32] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:32] [INFO] [Bullet] Exiting penetration at (970.0713, 772.19586) after traveling 41,666668 pixels through wall
+[12:08:32] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(921.67487, 805.05206)
+[12:08:32] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:32] [INFO] [Bullet] Using shooter_position, distance=1223,762
+[12:08:32] [INFO] [Bullet] Distance to wall: 1223,762 (83,32821% of viewport)
+[12:08:32] [INFO] [Bullet] Distance-based penetration chance: 49,450428%
+[12:08:32] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=392570079344, bullet_pos=(385.2003, 694.9282)
+[12:08:32] [INFO] [Bullet] Using shooter_position, distance=982.922607421875
+[12:08:32] [INFO] [Bullet] Distance to wall: 982.922607421875 (66.9290077746549% of viewport)
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:08:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=392570079344, bullet_pos=(498.1084, 565.9861)
+[12:08:32] [INFO] [Bullet] Using shooter_position, distance=1021.44689941406
+[12:08:32] [INFO] [Bullet] Distance to wall: 1021.44689941406 (69.5521976563295% of viewport)
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=392570079344, bullet_pos=(259.9672, 267.1097)
+[12:08:32] [INFO] [Bullet] Using shooter_position, distance=1401.22900390625
+[12:08:32] [INFO] [Bullet] Distance to wall: 1401.22900390625 (95.412259508913% of viewport)
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:32] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:33] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:33] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:33] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:33] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(496.314, 739.7979), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:33] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:08:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(524.3043, 800.30396)
+[12:08:33] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:33] [INFO] [Bullet] Using shooter_position, distance=956,75574
+[12:08:33] [INFO] [Bullet] Distance to wall: 956,75574 (65,147255% of viewport)
+[12:08:33] [INFO] [Bullet] Distance-based penetration chance: 70,66153%
+[12:08:33] [INFO] [Bullet] Starting wall penetration at (524.3043, 800.30396)
+[12:08:33] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:08:33] [INFO] [Bullet] Exiting penetration at (543.8975, 842.6582) after traveling 41,666668 pixels through wall
+[12:08:33] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:08:33] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:08:33] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:08:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(534.814, 739.7979), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:33] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:08:33] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(395.3825, 547.3311), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:08:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:08:33] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[12:08:33] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:08:33] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:08:33] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:08:33] [INFO] [LastChance] Threat detected: @Area2D@2734
+[12:08:33] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:33] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:33] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(386.1474, 541.9933), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:08:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[12:08:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=392570079344, bullet_pos=(60.8048, 524.6647)
+[12:08:33] [INFO] [Bullet] Using shooter_position, distance=1330.27783203125
+[12:08:33] [INFO] [Bullet] Distance to wall: 1330.27783203125 (90.5810637482436% of viewport)
+[12:08:33] [INFO] [LastChance] Threat detected: Bullet
+[12:08:33] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:33] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:33] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[12:08:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(569.1474, 739.7979), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:08:33] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:08:33] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:08:33] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:08:33] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[12:08:33] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:08:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(621.783, 1009.7135)
+[12:08:33] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:33] [INFO] [Bullet] Using shooter_position, distance=1185,8058
+[12:08:33] [INFO] [Bullet] Distance to wall: 1185,8058 (80,7437% of viewport)
+[12:08:33] [INFO] [Bullet] Distance-based penetration chance: 52,46569%
+[12:08:33] [INFO] [Bullet] Starting wall penetration at (621.783, 1009.7135)
+[12:08:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(589.814, 739.7979), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:08:33] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:08:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32,11101
+[12:08:33] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:33] [INFO] [Bullet] Exiting penetration at (630.71515, 1055.5173) after traveling 41,66667 pixels through wall
+[12:08:33] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:08:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(438.2123, 591.4312), shooter_id=390288377186, bullet_pos=(770.6232, 1019.106)
+[12:08:33] [INFO] [Bullet] Using shooter_position, distance=541.666748046875
+[12:08:33] [INFO] [Bullet] Distance to wall: 541.666748046875 (36.883084911833% of viewport)
+[12:08:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:33] [INFO] [Bullet] Starting wall penetration at (770.6232, 1019.106)
+[12:08:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.4683113098145
+[12:08:33] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:33] [INFO] [Bullet] Exiting penetration at (799.2617, 1055.952) after traveling 41.6666679382324 pixels through wall
+[12:08:33] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:33] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(344.6308, 509.5672), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:08:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[12:08:33] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(360.2825, 508.5711), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:08:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[12:08:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(618.5323, 1013.29425)
+[12:08:33] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:33] [INFO] [Bullet] Using shooter_position, distance=1187,1594
+[12:08:33] [INFO] [Bullet] Distance to wall: 1187,1594 (80,83588% of viewport)
+[12:08:33] [INFO] [Bullet] Distance-based penetration chance: 52,35815%
+[12:08:33] [INFO] [Bullet] Starting wall penetration at (618.5323, 1013.29425)
+[12:08:33] [INFO] [LastChance] Threat detected: @Area2D@2739
+[12:08:33] [INFO] [LastChance] Triggering last chance effect!
+[12:08:33] [INFO] [LastChance] Starting last chance effect:
+[12:08:33] [INFO] [LastChance]   - Time will be frozen (except player)
+[12:08:33] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[12:08:33] [INFO] [LastChance]   - Sepia intensity: 0.70
+[12:08:33] [INFO] [LastChance]   - Brightness: 0.60
+[12:08:33] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[12:08:33] [INFO] [LastChance] Skipping player node: Player
+[12:08:33] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:33] [INFO] [Bullet] Exiting penetration at (619.05444, 1018.2669) after traveling 0 pixels through wall
+[12:08:33] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:08:33] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[12:08:33] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[12:08:34] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:08:34] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:08:34] [INFO] [LastChance] Ending last chance effect
+[12:08:34] [INFO] [LastChance] All process modes restored
+[12:08:34] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:08:34] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:08:34] [INFO] [Player] Ready! Grenades: 1/3
+[12:08:34] [INFO] [ScoreManager] Level started with 10 enemies
+[12:08:34] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
+[12:08:34] [ENEMY] [Enemy1] Registered as sound listener
+[12:08:34] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:08:34] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
+[12:08:34] [ENEMY] [Enemy2] Registered as sound listener
+[12:08:34] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:08:34] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
+[12:08:34] [ENEMY] [Enemy3] Registered as sound listener
+[12:08:34] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:08:34] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
+[12:08:34] [ENEMY] [Enemy4] Registered as sound listener
+[12:08:34] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:08:34] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
+[12:08:34] [ENEMY] [Enemy5] Registered as sound listener
+[12:08:34] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:08:34] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
+[12:08:34] [ENEMY] [Enemy6] Registered as sound listener
+[12:08:34] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:08:34] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
+[12:08:34] [ENEMY] [Enemy7] Registered as sound listener
+[12:08:34] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:08:34] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
+[12:08:34] [ENEMY] [Enemy8] Registered as sound listener
+[12:08:34] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:08:34] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
+[12:08:34] [ENEMY] [Enemy9] Registered as sound listener
+[12:08:34] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:08:34] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
+[12:08:34] [ENEMY] [Enemy10] Registered as sound listener
+[12:08:34] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:08:34] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:08:34] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:08:34] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:08:34] [INFO] [LastChance] Found player: Player
+[12:08:34] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:08:34] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:08:34] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:08:34] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[12:08:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=19
+[12:08:34] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
+[12:08:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[12:08:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[12:08:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1153.019, 1516.452), shooter_id=479895489458, bullet_pos=(46.92997, 934.1586)
+[12:08:34] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[12:08:34] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[12:08:34] [INFO] [Bullet] Distance-based penetration chance: 47.3661071507571%
+[12:08:34] [INFO] [Bullet] Starting wall penetration at (46.92997, 934.1586)
+[12:08:34] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:08:34] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29.7942066192627
+[12:08:34] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:34] [INFO] [Bullet] Exiting penetration at (5.635967, 912.4196) after traveling 41.6666717529297 pixels through wall
+[12:08:34] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=479895489458, bullet_pos=(33.87472, 883.6538)
+[12:08:35] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[12:08:35] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[12:08:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=479895489458, bullet_pos=(63.90164, 841.4061)
+[12:08:35] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:35] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=479895489458, bullet_pos=(267.5627, 714.7572)
+[12:08:35] [INFO] [Bullet] Using shooter_position, distance=1162.54235839844
+[12:08:35] [INFO] [Bullet] Distance to wall: 1162.54235839844 (79.1596469102467% of viewport)
+[12:08:35] [INFO] [LastChance] Threat detected: @Area2D@2994
+[12:08:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1054.474, 1465.056), shooter_id=479895489458, bullet_pos=(60.28213, 778.2879)
+[12:08:35] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:35] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=479895489458, bullet_pos=(359.5086, 709.3807)
+[12:08:35] [INFO] [Bullet] Using shooter_position, distance=1064.02282714844
+[12:08:35] [INFO] [Bullet] Distance to wall: 1064.02282714844 (72.4512708659907% of viewport)
+[12:08:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:08:35] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[12:08:35] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:08:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1054.474, 1465.056), shooter_id=479895489458, bullet_pos=(182.566, 697.308)
+[12:08:35] [INFO] [Bullet] Using shooter_position, distance=1161.74914550781
+[12:08:35] [INFO] [Bullet] Distance to wall: 1161.74914550781 (79.1056355859342% of viewport)
+[12:08:35] [INFO] [Bullet] Distance-based penetration chance: 54.3767584830768%
+[12:08:35] [INFO] [Bullet] Starting wall penetration at (182.566, 697.308)
+[12:08:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.5585098266602
+[12:08:35] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:35] [INFO] [Bullet] Exiting penetration at (216.2635, 674.9925) after traveling 35.4166679382324 pixels through wall
+[12:08:35] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:08:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=479895489458, bullet_pos=(58.95797, 715.3979)
+[12:08:35] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
+[12:08:35] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
+[12:08:35] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:08:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=479895489458, bullet_pos=(696.0555, 853.8635)
+[12:08:35] [INFO] [Bullet] Using shooter_position, distance=743.766052246094
+[12:08:35] [INFO] [Bullet] Distance to wall: 743.766052246094 (50.644398162609% of viewport)
+[12:08:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=479895489458, bullet_pos=(515.3466, 960.2681)
+[12:08:35] [INFO] [Bullet] Using shooter_position, distance=776.30712890625
+[12:08:35] [INFO] [Bullet] Distance to wall: 776.30712890625 (52.8601799101626% of viewport)
+[12:08:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=479895489458, bullet_pos=(521.9321, 380.0508)
+[12:08:35] [INFO] [Bullet] Using shooter_position, distance=1174.19445800781
+[12:08:35] [INFO] [Bullet] Distance to wall: 1174.19445800781 (79.953059798971% of viewport)
+[12:08:35] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:08:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=479895489458, bullet_pos=(596.5629, 1003.49)
+[12:08:35] [INFO] [Bullet] Using shooter_position, distance=687.764892578125
+[12:08:35] [INFO] [Bullet] Distance to wall: 687.764892578125 (46.8311762237646% of viewport)
+[12:08:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(493.0761, 761.6827), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:35] [ENEMY] [Enemy1] Heard gunshot at (493.0761, 761.6827), source_type=0, intensity=0.01, distance=455
+[12:08:35] [ENEMY] [Enemy2] Heard gunshot at (493.0761, 761.6827), source_type=0, intensity=0.05, distance=231
+[12:08:35] [ENEMY] [Enemy4] Heard gunshot at (493.0761, 761.6827), source_type=0, intensity=0.02, distance=337
+[12:08:35] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:08:35] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:08:35] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:08:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=479895489458, bullet_pos=(339.4479, 264.9916)
+[12:08:35] [INFO] [Bullet] Using shooter_position, distance=1361.28137207031
+[12:08:35] [INFO] [Bullet] Distance to wall: 1361.28137207031 (92.6921517999864% of viewport)
+[12:08:35] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:08:35] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[12:08:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(525.6693, 759.172), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:35] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:08:35] [ENEMY] [Enemy4] Hit taken, health: 3/4
+[12:08:35] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[12:08:35] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:08:35] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:08:35] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:08:35] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:08:35] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[12:08:35] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.9139, 769.5448), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:08:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:08:36] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[12:08:36] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:08:36] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:36] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[12:08:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=479895489458, bullet_pos=(672.7281, 64.71261)
+[12:08:36] [INFO] [Bullet] Using shooter_position, distance=1420.62292480469
+[12:08:36] [INFO] [Bullet] Distance to wall: 1420.62292480469 (96.7328272451636% of viewport)
+[12:08:36] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:08:36] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:08:36] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:08:36] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:08:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.4947, 792.2892), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:08:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:08:36] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:08:36] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[12:08:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(566.6663, 827.1097), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:08:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
+[12:08:36] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[12:08:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(921.8083, 796.03864)
+[12:08:36] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:36] [INFO] [Bullet] Using shooter_position, distance=1217,9524
+[12:08:36] [INFO] [Bullet] Distance to wall: 1217,9524 (82,932625% of viewport)
+[12:08:36] [INFO] [Bullet] Distance-based penetration chance: 49,911945%
+[12:08:36] [INFO] [Bullet] Starting wall penetration at (921.8083, 796.03864)
+[12:08:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32,47419
+[12:08:36] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:36] [INFO] [Bullet] Exiting penetration at (968.4724, 796.5269) after traveling 41,66667 pixels through wall
+[12:08:36] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:08:36] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[12:08:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(716.5765, 821.9205)
+[12:08:36] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:36] [INFO] [Bullet] Using shooter_position, distance=1090,4288
+[12:08:36] [INFO] [Bullet] Distance to wall: 1090,4288 (74,249306% of viewport)
+[12:08:36] [INFO] [Bullet] Distance-based penetration chance: 60,042477%
+[12:08:36] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:36] [ENEMY] [Enemy4] Player distracted - priority attack triggered
+[12:08:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1364.4742, 828.16895)
+[12:08:36] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:36] [INFO] [Bullet] Using shooter_position, distance=1596,1371
+[12:08:36] [INFO] [Bullet] Distance to wall: 1596,1371 (108,68391% of viewport)
+[12:08:36] [INFO] [Bullet] Distance-based penetration chance: 28,26322%
+[12:08:36] [INFO] [Bullet] Starting wall penetration at (1364.4742, 828.16895)
+[12:08:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23,080051
+[12:08:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=479895489458, bullet_pos=(1021.22, 202.532)
+[12:08:36] [INFO] [Bullet] Using shooter_position, distance=1238.3779296875
+[12:08:36] [INFO] [Bullet] Distance to wall: 1238.3779296875 (84.3234304086383% of viewport)
+[12:08:36] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:36] [INFO] [Bullet] Exiting penetration at (1411.0205, 831.5189) after traveling 41,66667 pixels through wall
+[12:08:36] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:08:36] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(814.5449, 940.4254), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:08:36] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=8
+[12:08:36] [INFO] [LastChance] Threat detected: Bullet
+[12:08:36] [INFO] [LastChance] Triggering last chance effect!
+[12:08:36] [INFO] [LastChance] Starting last chance effect:
+[12:08:36] [INFO] [LastChance]   - Time will be frozen (except player)
+[12:08:36] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[12:08:36] [INFO] [LastChance]   - Sepia intensity: 0.70
+[12:08:36] [INFO] [LastChance]   - Brightness: 0.60
+[12:08:36] [INFO] [LastChance] Pushed bullet Bullet from distance 116.4 to 200.0
+[12:08:36] [INFO] [LastChance] Pushed 1 threatening bullets away from player
+[12:08:36] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[12:08:36] [INFO] [LastChance] Skipping player node: Player
+[12:08:36] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[12:08:36] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[12:08:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.1544, 981.0392), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:08:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
+[12:08:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(926.4311, 910.27496)
+[12:08:37] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:37] [INFO] [Bullet] Using shooter_position, distance=1298,7975
+[12:08:37] [INFO] [Bullet] Distance to wall: 1298,7975 (88,43751% of viewport)
+[12:08:37] [INFO] [Bullet] Distance-based penetration chance: 43,489574%
+[12:08:37] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:37] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:08:37] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:08:37] [INFO] [LastChance] Ending last chance effect
+[12:08:37] [INFO] [LastChance] All process modes restored
+[12:08:37] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:08:37] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:08:37] [INFO] [Player] Ready! Grenades: 1/3
+[12:08:37] [INFO] [ScoreManager] Level started with 10 enemies
+[12:08:37] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
+[12:08:37] [ENEMY] [Enemy1] Registered as sound listener
+[12:08:37] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:08:37] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
+[12:08:37] [ENEMY] [Enemy2] Registered as sound listener
+[12:08:37] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:08:37] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
+[12:08:37] [ENEMY] [Enemy3] Registered as sound listener
+[12:08:37] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:08:37] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
+[12:08:37] [ENEMY] [Enemy4] Registered as sound listener
+[12:08:37] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:08:37] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
+[12:08:37] [ENEMY] [Enemy5] Registered as sound listener
+[12:08:37] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:08:37] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
+[12:08:37] [ENEMY] [Enemy6] Registered as sound listener
+[12:08:37] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:08:37] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
+[12:08:37] [ENEMY] [Enemy7] Registered as sound listener
+[12:08:37] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:08:37] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
+[12:08:37] [ENEMY] [Enemy8] Registered as sound listener
+[12:08:37] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:08:37] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
+[12:08:37] [ENEMY] [Enemy9] Registered as sound listener
+[12:08:37] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:08:37] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
+[12:08:37] [ENEMY] [Enemy10] Registered as sound listener
+[12:08:37] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:08:37] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:08:37] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:08:37] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:08:37] [INFO] [LastChance] Found player: Player
+[12:08:37] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:08:37] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:08:37] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:08:37] [ENEMY] [Enemy10] Player distracted - priority attack triggered
+[12:08:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=19
+[12:08:37] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
+[12:08:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[12:08:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[12:08:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1153.019, 1516.452), shooter_id=529908368696, bullet_pos=(46.92997, 934.1586)
+[12:08:38] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[12:08:38] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[12:08:38] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:08:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=529908368696, bullet_pos=(33.87472, 883.6538)
+[12:08:38] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[12:08:38] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[12:08:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=529908368696, bullet_pos=(63.90164, 841.4061)
+[12:08:38] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:38] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1084.653, 1488.04), shooter_id=529908368696, bullet_pos=(232.1242, 703.5385)
+[12:08:38] [INFO] [Bullet] Using shooter_position, distance=1158.55407714844
+[12:08:38] [INFO] [Bullet] Distance to wall: 1158.55407714844 (78.8880775061317% of viewport)
+[12:08:38] [INFO] [Bullet] Distance-based penetration chance: 54.6305762428464%
+[12:08:38] [INFO] [Bullet] Starting wall penetration at (232.1242, 703.5385)
+[12:08:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=529908368696, bullet_pos=(429.7331, 715.7367)
+[12:08:38] [INFO] [Bullet] Using shooter_position, distance=1049.35595703125
+[12:08:38] [INFO] [Bullet] Distance to wall: 1049.35595703125 (71.4525767097154% of viewport)
+[12:08:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15.9031248092651
+[12:08:38] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:38] [INFO] [Bullet] Exiting penetration at (263.3839, 677.9194) after traveling 35.4166717529297 pixels through wall
+[12:08:38] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:08:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1054.474, 1465.056), shooter_id=529908368696, bullet_pos=(60.28213, 778.2879)
+[12:08:38] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:38] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:38] [INFO] [Bullet] Distance-based penetration chance: 50.6761238618226%
+[12:08:38] [INFO] [Bullet] Starting wall penetration at (60.28213, 778.2879)
+[12:08:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.2927665710449
+[12:08:38] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:38] [INFO] [Bullet] Exiting penetration at (21.88574, 751.7644) after traveling 41.6666679382324 pixels through wall
+[12:08:38] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=529908368696, bullet_pos=(58.95797, 715.3979)
+[12:08:38] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
+[12:08:38] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
+[12:08:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=529908368696, bullet_pos=(686.692, 816.303)
+[12:08:38] [INFO] [Bullet] Using shooter_position, distance=815.490356445313
+[12:08:38] [INFO] [Bullet] Distance to wall: 815.490356445313 (55.5282379248995% of viewport)
+[12:08:38] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:08:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=529908368696, bullet_pos=(525.8477, 905.9091)
+[12:08:38] [INFO] [Bullet] Using shooter_position, distance=844.193115234375
+[12:08:38] [INFO] [Bullet] Distance to wall: 844.193115234375 (57.4826615505662% of viewport)
+[12:08:38] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:08:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.246, 1440.903), shooter_id=529908368696, bullet_pos=(515.7546, 434.505)
+[12:08:38] [INFO] [Bullet] Using shooter_position, distance=1128.01538085938
+[12:08:38] [INFO] [Bullet] Distance to wall: 1128.01538085938 (76.8086415200986% of viewport)
+[12:08:38] [INFO] [Bullet] Distance-based penetration chance: 57.0565848932182%
+[12:08:38] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=529908368696, bullet_pos=(752.0663, 998.0209)
+[12:08:38] [INFO] [Bullet] Using shooter_position, distance=627.837280273438
+[12:08:38] [INFO] [Bullet] Distance to wall: 627.837280273438 (42.7505949047764% of viewport)
+[12:08:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=529908368696, bullet_pos=(921.5106, 912.335)
+[12:08:38] [INFO] [Bullet] Using shooter_position, distance=628.245239257813
+[12:08:38] [INFO] [Bullet] Distance to wall: 628.245239257813 (42.7783735821929% of viewport)
+[12:08:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1115.743, 1509.801), shooter_id=529908368696, bullet_pos=(759.4791, 838.9866)
+[12:08:39] [INFO] [Bullet] Using shooter_position, distance=759.549987792969
+[12:08:39] [INFO] [Bullet] Distance to wall: 759.549987792969 (51.7191553580939% of viewport)
+[12:08:39] [INFO] [Bullet] Distance-based penetration chance: 86.3276520822238%
+[12:08:39] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:39] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[12:08:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:39] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:08:39] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:40] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[12:08:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:40] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[12:08:40] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:08:40] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[12:08:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(554.7083, 913.6462), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:40] [ENEMY] [Enemy2] Heard gunshot at (554.7083, 913.6462), source_type=1, intensity=0.02, distance=395
+[12:08:40] [ENEMY] [Enemy4] Heard gunshot at (554.7083, 913.6462), source_type=1, intensity=0.04, distance=246
+[12:08:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[12:08:40] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[12:08:40] [INFO] [LastChance] Threat detected: Bullet
+[12:08:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:40] [ENEMY] [Enemy1] Player distracted - priority attack triggered
+[12:08:40] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:08:40] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:08:40] [ENEMY] [Enemy2] Player distracted - priority attack triggered
+[12:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:08:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:08:40] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:08:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(558.3018, 925.9973), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
+[12:08:40] [INFO] [LastChance] Threat detected: @Area2D@3289
+[12:08:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:40] [INFO] [LastChance] Threat detected: @Area2D@3290
+[12:08:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(567.4026, 931.5607), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(427.2957, 600.8687), shooter_id=527626669185, bullet_pos=(500.7386, 702.0178)
+[12:08:40] [INFO] [Bullet] Using shooter_position, distance=124.999992370605
+[12:08:40] [INFO] [Bullet] Distance to wall: 124.999992370605 (8.51147933523242% of viewport)
+[12:08:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:40] [INFO] [LastChance] Threat detected: @Area2D@3291
+[12:08:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(576.5744, 937.0057), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:40] [INFO] [LastChance] Threat detected: @Area2D@3293
+[12:08:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(313.0003, 378.6302), source=ENEMY (Enemy1), range=1469, listeners=10
+[12:08:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=1, below_threshold=4
+[12:08:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(586.487, 940.2492), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(544.1492, 865.9868), shooter_id=527911881935, bullet_pos=(508.1448, 576.551)
+[12:08:40] [INFO] [Bullet] Using shooter_position, distance=291.666534423828
+[12:08:40] [INFO] [Bullet] Distance to wall: 291.666534423828 (19.8601106563831% of viewport)
+[12:08:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:40] [INFO] [LastChance] Threat detected: @Area2D@3295
+[12:08:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(597.0948, 941.368), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(553.086, 871.6471), shooter_id=527911881935, bullet_pos=(516.4313, 582.293)
+[12:08:40] [INFO] [Bullet] Using shooter_position, distance=291.666564941406
+[12:08:40] [INFO] [Bullet] Distance to wall: 291.666564941406 (19.8601127343811% of viewport)
+[12:08:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:40] [INFO] [LastChance] Threat detected: @Area2D@3297
+[12:08:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(607.7026, 942.4868), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(544.1492, 865.9868), shooter_id=527911881935, bullet_pos=(502.4125, 687.6533)
+[12:08:40] [INFO] [Bullet] Using shooter_position, distance=183.152374267578
+[12:08:40] [INFO] [Bullet] Distance to wall: 183.152374267578 (12.4711819513985% of viewport)
+[12:08:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:40] [INFO] [Bullet] Starting wall penetration at (502.4125, 687.6533)
+[12:08:40] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:08:40] [INFO] [Bullet] Exiting penetration at (500.33, 728.0162) after traveling 35.4166679382324 pixels through wall
+[12:08:40] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:08:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(561.7424, 877.3251), shooter_id=527911881935, bullet_pos=(522.8438, 588.2641)
+[12:08:40] [INFO] [Bullet] Using shooter_position, distance=291.666564941406
+[12:08:40] [INFO] [Bullet] Distance to wall: 291.666564941406 (19.8601127343811% of viewport)
+[12:08:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:40] [INFO] [LastChance] Threat detected: @Area2D@3299
+[12:08:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:40] [INFO] [LastChance] Threat detected: @Area2D@3294
+[12:08:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
+[12:08:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:40] [ENEMY] [Enemy3] Player distracted - priority attack triggered
+[12:08:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(618.3104, 943.6055), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(553.086, 871.6471), shooter_id=527911881935, bullet_pos=(497.7909, 691.9702)
+[12:08:40] [INFO] [Bullet] Using shooter_position, distance=187.992950439453
+[12:08:40] [INFO] [Bullet] Distance to wall: 187.992950439453 (12.8007856839762% of viewport)
+[12:08:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:40] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:08:40] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
+[12:08:40] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:08:40] [INFO] [LastChance] Threat detected: @Area2D@3302
+[12:08:40] [INFO] [LastChance] Triggering last chance effect!
+[12:08:40] [INFO] [LastChance] Starting last chance effect:
+[12:08:40] [INFO] [LastChance]   - Time will be frozen (except player)
+[12:08:40] [INFO] [LastChance]   - Duration: 6.0 real seconds
+[12:08:40] [INFO] [LastChance]   - Sepia intensity: 0.70
+[12:08:40] [INFO] [LastChance]   - Brightness: 0.60
+[12:08:40] [INFO] [LastChance] Pushed bullet @Area2D@3291 from distance 99.2 to 200.0
+[12:08:40] [INFO] [LastChance] Pushed bullet @Area2D@3294 from distance 34.7 to 200.0
+[12:08:40] [INFO] [LastChance] Pushed bullet @Area2D@3299 from distance 37.2 to 200.0
+[12:08:40] [INFO] [LastChance] Pushed bullet @Area2D@3302 from distance 122.4 to 200.0
+[12:08:40] [INFO] [LastChance] Pushed 4 threatening bullets away from player
+[12:08:40] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
+[12:08:40] [INFO] [LastChance] Skipping player node: Player
+[12:08:40] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
+[12:08:40] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
+[12:08:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(566.1801, 734.0663), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:44] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:08:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(566.1801, 734.0663), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:08:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(923.56976, 708.07733)
+[12:08:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:46] [INFO] [Bullet] Using shooter_position, distance=1163,7675
+[12:08:46] [INFO] [Bullet] Distance to wall: 1163,7675 (79,24307% of viewport)
+[12:08:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1380.6731, 351.18146)
+[12:08:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:46] [INFO] [Bullet] Using shooter_position, distance=1424,6356
+[12:08:46] [INFO] [Bullet] Distance to wall: 1424,6356 (97,006065% of viewport)
+[12:08:46] [INFO] [Bullet] Distance-based penetration chance: 33,492935%
+[12:08:46] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:46] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
+[12:08:46] [INFO] [LastChance] Ending last chance effect
+[12:08:46] [INFO] [LastChance] All process modes restored
+[12:08:46] [INFO] [LastChance] Threat detected: @Area2D@3302
+[12:08:46] [INFO] [LastChance] Effect already used this life
+[12:08:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(588.0931, 887.3348), shooter_id=527911881935, bullet_pos=(519.8096, 804.751)
+[12:08:46] [INFO] [Bullet] Using shooter_position, distance=107.157379150391
+[12:08:46] [INFO] [Bullet] Distance to wall: 107.157379150391 (7.29654299139537% of viewport)
+[12:08:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(350.5612, 431.5825), shooter_id=527341454567, bullet_pos=(477.8665, 709.4069)
+[12:08:46] [INFO] [Bullet] Using shooter_position, distance=305.602783203125
+[12:08:46] [INFO] [Bullet] Distance to wall: 305.602783203125 (20.8090554622673% of viewport)
+[12:08:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:46] [INFO] [Bullet] Starting wall penetration at (477.8665, 709.4069)
+[12:08:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 43.5273323059082
+[12:08:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(541.3216, 864.7274), shooter_id=527911881935, bullet_pos=(386.7591, 45.85318)
+[12:08:46] [INFO] [Bullet] Using shooter_position, distance=833.333374023438
+[12:08:46] [INFO] [Bullet] Distance to wall: 833.333374023438 (56.7432018022102% of viewport)
+[12:08:46] [INFO] [Bullet] Distance-based penetration chance: 80.4662645640881%
+[12:08:46] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:46] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:46] [INFO] [Bullet] Exiting penetration at (504.171, 747.9536) after traveling 41.6666679382324 pixels through wall
+[12:08:46] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:46] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:08:46] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:08:46] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:08:46] [INFO] [LastChance] Player died
+[12:08:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(654.8434, 941.4724), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
+[12:08:46] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:08:46] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:08:46] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:08:46] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:08:46] [INFO] [Player] Ready! Grenades: 1/3
+[12:08:46] [INFO] [ScoreManager] Level started with 10 enemies
+[12:08:46] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:08:46] [ENEMY] [Enemy1] Registered as sound listener
+[12:08:46] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:08:46] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:08:46] [ENEMY] [Enemy2] Registered as sound listener
+[12:08:46] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:08:46] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:08:46] [ENEMY] [Enemy3] Registered as sound listener
+[12:08:46] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:08:46] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:08:46] [ENEMY] [Enemy4] Registered as sound listener
+[12:08:46] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:08:46] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:08:46] [ENEMY] [Enemy5] Registered as sound listener
+[12:08:46] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:08:46] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:08:46] [ENEMY] [Enemy6] Registered as sound listener
+[12:08:46] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:08:46] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:08:46] [ENEMY] [Enemy7] Registered as sound listener
+[12:08:46] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:08:46] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:08:46] [ENEMY] [Enemy8] Registered as sound listener
+[12:08:46] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:08:46] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:08:46] [ENEMY] [Enemy9] Registered as sound listener
+[12:08:46] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:08:46] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:08:46] [ENEMY] [Enemy10] Registered as sound listener
+[12:08:46] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:08:46] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:08:46] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:08:46] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:08:46] [INFO] [LastChance] Found player: Player
+[12:08:46] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:08:46] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:08:46] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:08:47] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:08:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=20
+[12:08:47] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:08:47] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:48] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:08:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=596262259073, bullet_pos=(64.61339, 850.4285)
+[12:08:48] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:48] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=596262259073, bullet_pos=(234.4218, 714.519)
+[12:08:48] [INFO] [Bullet] Using shooter_position, distance=1154.83471679688
+[12:08:48] [INFO] [Bullet] Distance to wall: 1154.83471679688 (78.6348194204932% of viewport)
+[12:08:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=596262259073, bullet_pos=(60.65509, 787.2949)
+[12:08:48] [INFO] [Bullet] Using shooter_position, distance=1208.33386230469
+[12:08:48] [INFO] [Bullet] Distance to wall: 1208.33386230469 (82.2776746143741% of viewport)
+[12:08:48] [INFO] [Bullet] Distance-based penetration chance: 50.6760462832302%
+[12:08:48] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:48] [INFO] [LastChance] Threat detected: Bullet
+[12:08:48] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:08:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=596262259073, bullet_pos=(59.01187, 724.3607)
+[12:08:48] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
+[12:08:48] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
+[12:08:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=596262259073, bullet_pos=(501.768, 918.2838)
+[12:08:48] [INFO] [Bullet] Using shooter_position, distance=820.456665039063
+[12:08:48] [INFO] [Bullet] Distance to wall: 820.456665039063 (55.8664030092842% of viewport)
+[12:08:48] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:08:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(414.0648, 792.5295), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:48] [ENEMY] [Enemy1] Heard gunshot at (414.0648, 792.5295), source_type=0, intensity=0.01, distance=457
+[12:08:48] [ENEMY] [Enemy2] Heard gunshot at (414.0648, 792.5295), source_type=0, intensity=0.04, distance=243
+[12:08:48] [ENEMY] [Enemy4] Heard gunshot at (414.0648, 792.5295), source_type=0, intensity=0.02, distance=401
+[12:08:48] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:08:48] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[12:08:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(636.6541, 758.6073), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(387.1426, 777.0953), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:48] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:08:48] [INFO] [LastChance] Threat detected: @Area2D@3569
+[12:08:48] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:08:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:49] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:08:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=596262259073, bullet_pos=(62.99203, 1191.281)
+[12:08:49] [INFO] [Bullet] Using shooter_position, distance=1068.98962402344
+[12:08:49] [INFO] [Bullet] Distance to wall: 1068.98962402344 (72.7894691983436% of viewport)
+[12:08:49] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:08:49] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:08:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:08:49] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:08:49] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[12:08:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(636.6541, 758.6073), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(371.7201, 768.4717), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:49] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:08:49] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:08:49] [INFO] [LastChance] Threat detected: @Area2D@3573
+[12:08:49] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:08:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:08:49] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:08:49] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:08:49] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:08:49] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:08:49] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:08:49] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:08:49] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:08:49] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:08:49] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:08:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(637.3163, 766.5799), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:49] [ENEMY] [Enemy3] Hit taken, health: 1/4
+[12:08:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(367.9563, 766.3673), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:49] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:08:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(585.4415, 784.8305), shooter_id=594265770396, bullet_pos=(524.2477, 797.5417)
+[12:08:49] [INFO] [Bullet] Using shooter_position, distance=62.5000915527344
+[12:08:49] [INFO] [Bullet] Distance to wall: 62.5000915527344 (4.25574616136% of viewport)
+[12:08:49] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:08:49] [INFO] [Bullet] Starting wall penetration at (524.2477, 797.5417)
+[12:08:49] [INFO] [Bullet] Raycast forward hit penetrating body at distance 2.92053985595703
+[12:08:49] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:08:49] [INFO] [Bullet] Exiting penetration at (511.193, 800.2534) after traveling 8.33333301544189 pixels through wall
+[12:08:49] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(638.3325, 778.8043), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:50] [INFO] [LastChance] Threat detected: @Area2D@3579
+[12:08:50] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:08:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:50] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:08:50] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:08:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=596262259073, bullet_pos=(515.7219, 1384.41)
+[12:08:51] [INFO] [Bullet] Using shooter_position, distance=583.182861328125
+[12:08:51] [INFO] [Bullet] Distance to wall: 583.182861328125 (39.7099934065541% of viewport)
+[12:08:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(909.3083, 747.9274)
+[12:08:51] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:51] [INFO] [Bullet] Using shooter_position, distance=1177,3856
+[12:08:51] [INFO] [Bullet] Distance to wall: 1177,3856 (80,17036% of viewport)
+[12:08:51] [INFO] [Bullet] Distance-based penetration chance: 53,134583%
+[12:08:51] [INFO] [Bullet] Starting wall penetration at (909.3083, 747.9274)
+[12:08:51] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:08:51] [INFO] [Bullet] Exiting penetration at (918.46967, 747.61536) after traveling 4,166667 pixels through wall
+[12:08:51] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:08:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(586.6159, 787.017), shooter_id=594265770396, bullet_pos=(66.32431, 810.7597)
+[12:08:51] [INFO] [Bullet] Using shooter_position, distance=520.833068847656
+[12:08:51] [INFO] [Bullet] Distance to wall: 520.833068847656 (35.4644813854003% of viewport)
+[12:08:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:51] [INFO] [Bullet] Starting wall penetration at (66.32431, 810.7597)
+[12:08:51] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:08:51] [INFO] [Bullet] Exiting penetration at (57.16717, 811.1776) after traveling 4.16666698455811 pixels through wall
+[12:08:51] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:52] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
+[12:08:52] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:08:52] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:08:52] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:08:52] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:08:52] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:08:52] [INFO] [Player] Ready! Grenades: 1/3
+[12:08:52] [INFO] [ScoreManager] Level started with 10 enemies
+[12:08:52] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:08:52] [ENEMY] [Enemy1] Registered as sound listener
+[12:08:52] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:08:52] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:08:52] [ENEMY] [Enemy2] Registered as sound listener
+[12:08:52] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:08:52] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:08:52] [ENEMY] [Enemy3] Registered as sound listener
+[12:08:52] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:08:52] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:08:52] [ENEMY] [Enemy4] Registered as sound listener
+[12:08:52] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:08:52] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:08:52] [ENEMY] [Enemy5] Registered as sound listener
+[12:08:52] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:08:52] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:08:52] [ENEMY] [Enemy6] Registered as sound listener
+[12:08:52] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:08:52] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:08:52] [ENEMY] [Enemy7] Registered as sound listener
+[12:08:52] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:08:52] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:08:52] [ENEMY] [Enemy8] Registered as sound listener
+[12:08:52] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:08:52] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:08:52] [ENEMY] [Enemy9] Registered as sound listener
+[12:08:52] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:08:52] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:08:52] [ENEMY] [Enemy10] Registered as sound listener
+[12:08:52] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:08:52] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:08:52] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:08:52] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:08:52] [INFO] [LastChance] Found player: Player
+[12:08:52] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:08:52] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:08:52] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:08:52] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:08:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.627, 1517.938), source=ENEMY (Enemy10), range=1469, listeners=20
+[12:08:53] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:08:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.467, 1497.38), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.982, 1475.831), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:53] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:08:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.288, 1490.672), shooter_id=707495201407, bullet_pos=(33.67726, 821.2054)
+[12:08:53] [INFO] [Bullet] Using shooter_position, distance=1249.99963378906
+[12:08:53] [INFO] [Bullet] Distance to wall: 1249.99963378906 (85.1147736113431% of viewport)
+[12:08:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1059.125, 1467.658), shooter_id=707495201407, bullet_pos=(65.00549, 780.7833)
+[12:08:53] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
+[12:08:53] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
+[12:08:53] [INFO] [Bullet] Distance-based penetration chance: 50.6760947698504%
+[12:08:53] [INFO] [Bullet] Starting wall penetration at (65.00549, 780.7833)
+[12:08:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.288, 1490.672), shooter_id=707495201407, bullet_pos=(218.5246, 706.5854)
+[12:08:53] [INFO] [Bullet] Using shooter_position, distance=1171.75952148438
+[12:08:53] [INFO] [Bullet] Distance to wall: 1171.75952148438 (79.7872604936366% of viewport)
+[12:08:53] [INFO] [Bullet] Raycast backward hit penetrating body at distance 6.54910516738892
+[12:08:53] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:53] [INFO] [Bullet] Exiting penetration at (26.61193, 754.2557) after traveling 41.6666679382324 pixels through wall
+[12:08:53] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.222, 1444.782), shooter_id=707495201407, bullet_pos=(49.93296, 736.9236)
+[12:08:53] [INFO] [Bullet] Using shooter_position, distance=1208.33410644531
+[12:08:53] [INFO] [Bullet] Distance to wall: 1208.33410644531 (82.2776912383582% of viewport)
+[12:08:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.222, 1444.782), shooter_id=707495201407, bullet_pos=(117.4641, 702.4236)
+[12:08:53] [INFO] [Bullet] Using shooter_position, distance=1175.75476074219
+[12:08:53] [INFO] [Bullet] Distance to wall: 1175.75476074219 (80.0593036812983% of viewport)
+[12:08:53] [INFO] [Bullet] Distance-based penetration chance: 53.264145705152%
+[12:08:53] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.288, 1490.672), shooter_id=707495201407, bullet_pos=(497.5876, 832.2251)
+[12:08:53] [INFO] [Bullet] Using shooter_position, distance=885.246520996094
+[12:08:53] [INFO] [Bullet] Distance to wall: 885.246520996094 (60.2780634394382% of viewport)
+[12:08:53] [INFO] [Bullet] Distance-based penetration chance: 76.3422593206554%
+[12:08:53] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:54] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:08:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(484.5886, 765.0591), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:54] [ENEMY] [Enemy1] Heard gunshot at (484.5886, 765.0591), source_type=0, intensity=0.01, distance=454
+[12:08:54] [ENEMY] [Enemy2] Heard gunshot at (484.5886, 765.0591), source_type=0, intensity=0.05, distance=231
+[12:08:54] [ENEMY] [Enemy4] Heard gunshot at (484.5886, 765.0591), source_type=0, intensity=0.02, distance=343
+[12:08:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:08:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:54] [INFO] [LastChance] Threat detected: @Area2D@3842
+[12:08:54] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:08:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:08:54] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:08:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(512.9769, 751.2548), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:08:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(923.39514, 815.2435)
+[12:08:54] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:54] [INFO] [Bullet] Using shooter_position, distance=1231,7794
+[12:08:54] [INFO] [Bullet] Distance to wall: 1231,7794 (83,87413% of viewport)
+[12:08:54] [INFO] [Bullet] Distance-based penetration chance: 48,813522%
+[12:08:54] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:54] [INFO] [LastChance] Threat detected: @Area2D@3844
+[12:08:54] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:08:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(542.2076, 753.1689), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:08:54] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:08:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:54] [INFO] [LastChance] Threat detected: @Area2D@3846
+[12:08:54] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:08:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:08:54] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:08:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:08:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:08:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(570.1471, 771.3652), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:08:54] [INFO] [LastChance] Threat detected: @Area2D@3847
+[12:08:54] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:08:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(931.3088, 845.9064)
+[12:08:54] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:54] [INFO] [Bullet] Using shooter_position, distance=1258,131
+[12:08:54] [INFO] [Bullet] Distance to wall: 1258,131 (85,66846% of viewport)
+[12:08:54] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[12:08:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(702.7226, 772.9701), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:54] [INFO] [LastChance] Threat detected: @Area2D@3850
+[12:08:54] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:08:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:54] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[12:08:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:08:54] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:08:54] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:08:54] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:08:54] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:08:54] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:08:54] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:08:54] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:08:54] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:08:54] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:08:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:08:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:08:54] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:08:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(645.6315, 786.5506), shooter_id=705498712149, bullet_pos=(521.272, 799.1874)
+[12:08:54] [INFO] [Bullet] Using shooter_position, distance=124.999954223633
+[12:08:54] [INFO] [Bullet] Distance to wall: 124.999954223633 (8.51147673773491% of viewport)
+[12:08:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:54] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:08:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(591.9274, 795.8936), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:54] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[12:08:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1362.7997, 941.3919)
+[12:08:54] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:54] [INFO] [Bullet] Using shooter_position, distance=1656,3339
+[12:08:54] [INFO] [Bullet] Distance to wall: 1656,3339 (112,78282% of viewport)
+[12:08:54] [ENEMY] [Enemy4] Hit taken, health: 2/3
+[12:08:55] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[12:08:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(429.7077, 599.4988), shooter_id=705213499264, bullet_pos=(497.4959, 684.002)
+[12:08:55] [INFO] [Bullet] Using shooter_position, distance=108.332946777344
+[12:08:55] [INFO] [Bullet] Distance to wall: 108.332946777344 (7.37658955279286% of viewport)
+[12:08:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:55] [INFO] [Bullet] Starting wall penetration at (497.4959, 684.002)
+[12:08:55] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:08:55] [INFO] [Bullet] Exiting penetration at (503.2318, 691.1523) after traveling 4.16666650772095 pixels through wall
+[12:08:55] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:55] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:08:55] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:08:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(725.6436, 785.464), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1226.7455, 996.16943)
+[12:08:55] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:55] [INFO] [Bullet] Using shooter_position, distance=1580,2715
+[12:08:55] [INFO] [Bullet] Distance to wall: 1580,2715 (107,6036% of viewport)
+[12:08:55] [INFO] [Bullet] Distance-based penetration chance: 28,47928%
+[12:08:55] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:55] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:08:55] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:08:55] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:08:55] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:08:55] [INFO] [LastChance] Player died
+[12:08:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(744.5029, 785.9335), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(695.804, 813.8665), shooter_id=705498712149, bullet_pos=(695.804, 813.8665)
+[12:08:55] [INFO] [Bullet] Using shooter_position, distance=0
+[12:08:55] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:08:55] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:08:55] [INFO] [Bullet] Starting wall penetration at (695.804, 813.8665)
+[12:08:55] [INFO] [LastChance] Threat detected: Bullet
+[12:08:55] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:08:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:55] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:08:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29.6193447113037
+[12:08:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:55] [INFO] [Bullet] Exiting penetration at (652.541, 831.3621) after traveling 41.6666679382324 pixels through wall
+[12:08:55] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(645.6315, 786.5506), shooter_id=705498712149, bullet_pos=(38.24326, 808.8183)
+[12:08:55] [INFO] [Bullet] Using shooter_position, distance=607.796264648438
+[12:08:55] [INFO] [Bullet] Distance to wall: 607.796264648438 (41.3859652986919% of viewport)
+[12:08:55] [INFO] [Bullet] Distance-based penetration chance: 98.3830404848594%
+[12:08:55] [INFO] [Bullet] Starting wall penetration at (38.24326, 808.8183)
+[12:08:55] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[12:08:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.1721725463867
+[12:08:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:55] [INFO] [Bullet] Exiting penetration at (-2.165382, 809.6239) after traveling 35.4166717529297 pixels through wall
+[12:08:55] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:08:55] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:08:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(807.6938, 942.0654), source=ENEMY (Enemy4), range=1469, listeners=10
+[12:08:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[12:08:55] [INFO] [LastChance] Threat detected: Bullet
+[12:08:55] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:08:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(750.3925, 926.1049), shooter_id=705783925232, bullet_pos=(502.969, 890.3045)
+[12:08:55] [INFO] [Bullet] Using shooter_position, distance=250.000076293945
+[12:08:55] [INFO] [Bullet] Distance to wall: 250.000076293945 (17.0229649044589% of viewport)
+[12:08:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:55] [INFO] [Bullet] Starting wall penetration at (502.969, 890.3045)
+[12:08:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(839.0337, 955.1556), source=ENEMY (Enemy4), range=1469, listeners=10
+[12:08:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
+[12:08:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 43.6667594909668
+[12:08:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:55] [INFO] [Bullet] Exiting penetration at (456.7833, 883.6218) after traveling 41.6666679382324 pixels through wall
+[12:08:55] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:08:55] [INFO] [LastChance] Threat detected: @Area2D@3862
+[12:08:55] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:08:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:56] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:08:56] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:08:56] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:08:56] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:08:56] [INFO] [Player] Ready! Grenades: 1/3
+[12:08:56] [INFO] [ScoreManager] Level started with 10 enemies
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:08:56] [ENEMY] [Enemy1] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:08:56] [ENEMY] [Enemy2] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:08:56] [ENEMY] [Enemy3] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:08:56] [ENEMY] [Enemy4] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:08:56] [ENEMY] [Enemy5] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:08:56] [ENEMY] [Enemy6] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:08:56] [ENEMY] [Enemy7] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:08:56] [ENEMY] [Enemy8] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:08:56] [ENEMY] [Enemy9] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:08:56] [ENEMY] [Enemy10] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:08:56] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:08:56] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:08:56] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:08:56] [INFO] [LastChance] Found player: Player
+[12:08:56] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:08:56] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:08:56] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:08:56] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:08:56] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:08:56] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:08:56] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:08:56] [INFO] [Player] Ready! Grenades: 1/3
+[12:08:56] [INFO] [ScoreManager] Level started with 10 enemies
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
+[12:08:56] [ENEMY] [Enemy1] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
+[12:08:56] [ENEMY] [Enemy2] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
+[12:08:56] [ENEMY] [Enemy3] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
+[12:08:56] [ENEMY] [Enemy4] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
+[12:08:56] [ENEMY] [Enemy5] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
+[12:08:56] [ENEMY] [Enemy6] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
+[12:08:56] [ENEMY] [Enemy7] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
+[12:08:56] [ENEMY] [Enemy8] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
+[12:08:56] [ENEMY] [Enemy9] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:08:56] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
+[12:08:56] [ENEMY] [Enemy10] Registered as sound listener
+[12:08:56] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:08:56] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:08:56] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:08:56] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:08:56] [INFO] [LastChance] Found player: Player
+[12:08:56] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:08:56] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:08:56] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:08:56] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:08:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=30
+[12:08:56] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
+[12:08:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:08:57] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:08:57] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:08:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=788143277754, bullet_pos=(64.61339, 850.4285)
+[12:08:57] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:08:57] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:08:57] [INFO] [Bullet] Distance-based penetration chance: 50.6761238618226%
+[12:08:57] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=788143277754, bullet_pos=(60.65509, 787.2949)
+[12:08:57] [INFO] [Bullet] Using shooter_position, distance=1208.33386230469
+[12:08:57] [INFO] [Bullet] Distance to wall: 1208.33386230469 (82.2776746143741% of viewport)
+[12:08:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=788143277754, bullet_pos=(188.6069, 715.6051)
+[12:08:57] [INFO] [Bullet] Using shooter_position, distance=1150.57800292969
+[12:08:57] [INFO] [Bullet] Distance to wall: 1150.57800292969 (78.3449719458698% of viewport)
+[12:08:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=788143277754, bullet_pos=(59.01187, 724.3607)
+[12:08:57] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
+[12:08:57] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
+[12:08:57] [INFO] [LastChance] Threat detected: @Area2D@4367
+[12:08:57] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:08:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:57] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:08:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=788143277754, bullet_pos=(517.4975, 876.7575)
+[12:08:57] [INFO] [Bullet] Using shooter_position, distance=801.864135742188
+[12:08:57] [INFO] [Bullet] Distance to wall: 801.864135742188 (54.6004035008132% of viewport)
+[12:08:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(451.8477, 776.932), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:57] [ENEMY] [Enemy1] Heard gunshot at (451.8477, 776.932), source_type=0, intensity=0.01, distance=453
+[12:08:57] [ENEMY] [Enemy2] Heard gunshot at (451.8477, 776.932), source_type=0, intensity=0.05, distance=233
+[12:08:57] [ENEMY] [Enemy4] Heard gunshot at (451.8477, 776.932), source_type=0, intensity=0.02, distance=369
+[12:08:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:08:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=788143277754, bullet_pos=(505.6331, 427.5552)
+[12:08:57] [INFO] [Bullet] Using shooter_position, distance=1143.81469726563
+[12:08:57] [INFO] [Bullet] Distance to wall: 1143.81469726563 (77.8844460265813% of viewport)
+[12:08:57] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[12:08:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:08:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:08:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(464.5364, 748.0681), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:08:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:08:57] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:08:57] [INFO] [LastChance] Threat detected: Bullet
+[12:08:57] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:08:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:08:57] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:08:57] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:08:57] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[12:08:57] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:08:57] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:08:57] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:08:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(486.9579, 734.3974), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:08:57] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[12:08:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=788143277754, bullet_pos=(63.04943, 225.1589)
+[12:08:58] [INFO] [Bullet] Using shooter_position, distance=1555.75207519531
+[12:08:58] [INFO] [Bullet] Distance to wall: 1555.75207519531 (105.934019575858% of viewport)
+[12:08:58] [INFO] [Bullet] Distance-based penetration chance: 28.8131960848283%
+[12:08:58] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:58] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[12:08:58] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[12:08:58] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:08:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(512.3081, 745.9813), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:08:58] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:08:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(633.7867, 758.1911), shooter_id=786146790235, bullet_pos=(50.71169, 740.8338)
+[12:08:58] [INFO] [Bullet] Using shooter_position, distance=583.333374023438
+[12:08:58] [INFO] [Bullet] Distance to wall: 583.333374023438 (39.7202420927463% of viewport)
+[12:08:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:08:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(928.5659, 741.6182)
+[12:08:58] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:58] [INFO] [Bullet] Using shooter_position, distance=1188,3738
+[12:08:58] [INFO] [Bullet] Distance to wall: 1188,3738 (80,91856% of viewport)
+[12:08:58] [INFO] [Bullet] Distance-based penetration chance: 52,26169%
+[12:08:58] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(539.3235, 771.4667), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:08:58] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:08:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(911.8331, 726.4918)
+[12:08:58] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:58] [INFO] [Bullet] Using shooter_position, distance=1165,8602
+[12:08:58] [INFO] [Bullet] Distance to wall: 1165,8602 (79,38557% of viewport)
+[12:08:58] [INFO] [Bullet] Distance-based penetration chance: 54,05017%
+[12:08:58] [INFO] [Bullet] Starting wall penetration at (911.8331, 726.4918)
+[12:08:58] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:08:58] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:08:58] [INFO] [Bullet] Raycast backward hit penetrating body at distance 22,471085
+[12:08:58] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:58] [INFO] [Bullet] Exiting penetration at (958.4444, 724.2181) after traveling 41,666668 pixels through wall
+[12:08:58] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:08:58] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:08:58] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:08:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(937.59406, 734.3124)
+[12:08:58] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:58] [INFO] [Bullet] Using shooter_position, distance=1190,9229
+[12:08:58] [INFO] [Bullet] Distance to wall: 1190,9229 (81,09213% of viewport)
+[12:08:58] [INFO] [Bullet] Distance-based penetration chance: 52,059185%
+[12:08:58] [INFO] [Bullet] Penetration failed (distance roll)
+[12:08:58] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[12:08:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(569.7499, 945.8638), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:08:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:08:58] [ENEMY] [Enemy4] Hit taken, health: 1/2
+[12:08:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(578.3727, 980.792), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:08:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
+[12:08:58] [ENEMY] [Enemy4] Hit taken, health: 0/2
+[12:08:58] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[12:08:58] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[12:08:58] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[12:08:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(601.6849, 989.9327), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:08:59] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[12:08:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(638.531, 989.9327), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:08:59] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=7
+[12:08:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(914.81433, 815.7118)
+[12:08:59] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:59] [INFO] [Bullet] Using shooter_position, distance=1225,6716
+[12:08:59] [INFO] [Bullet] Distance to wall: 1225,6716 (83,45824% of viewport)
+[12:08:59] [INFO] [Bullet] Distance-based penetration chance: 49,29872%
+[12:08:59] [INFO] [Bullet] Starting wall penetration at (914.81433, 815.7118)
+[12:08:59] [INFO] [Bullet] Raycast backward hit penetrating body at distance 22,422647
+[12:08:59] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:08:59] [INFO] [Bullet] Exiting penetration at (955.594, 793.0226) after traveling 41,66667 pixels through wall
+[12:08:59] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:08:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(753.46844, 893.55115)
+[12:08:59] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:59] [INFO] [Bullet] Using shooter_position, distance=1168,8235
+[12:08:59] [INFO] [Bullet] Distance to wall: 1168,8235 (79,58734% of viewport)
+[12:08:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(677.031, 989.9327), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:08:59] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=7
+[12:08:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(855.59406, 998.81976)
+[12:08:59] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:59] [INFO] [Bullet] Using shooter_position, distance=1315,1738
+[12:08:59] [INFO] [Bullet] Distance to wall: 1315,1738 (89,552605% of viewport)
+[12:08:59] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:08:59] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:08:59] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:08:59] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:08:59] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:08:59] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:08:59] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:08:59] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:08:59] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:08:59] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:08:59] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:08:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(908.14734, 930.3901)
+[12:08:59] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:08:59] [INFO] [Bullet] Using shooter_position, distance=1300,1375
+[12:08:59] [INFO] [Bullet] Distance to wall: 1300,1375 (88,528755% of viewport)
+[12:08:59] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:08:59] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:08:59] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:08:59] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:08:59] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:08:59] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:09:00] [ENEMY] [Enemy1] Player reloading state changed: false -> true
+[12:09:00] [ENEMY] [Enemy2] Player reloading state changed: false -> true
+[12:09:00] [ENEMY] [Enemy3] Player reloading state changed: false -> true
+[12:09:00] [ENEMY] [Enemy4] Player reloading state changed: false -> true
+[12:09:00] [ENEMY] [Enemy5] Player reloading state changed: false -> true
+[12:09:00] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[12:09:00] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[12:09:00] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[12:09:00] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[12:09:00] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[12:09:00] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(726.5717, 974.9817), source=PLAYER (Player), range=900, listeners=8
+[12:09:00] [ENEMY] [Enemy10] Heard player RELOAD at (726.5717, 974.9817), intensity=0.01, distance=496
+[12:09:00] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=2
+[12:09:00] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=736), can_see=false
+[12:09:00] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=589), can_see=false
+[12:09:00] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1157), can_see=false
+[12:09:00] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1331), can_see=false
+[12:09:00] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=975), can_see=false
+[12:09:00] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1266), can_see=false
+[12:09:00] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1489), can_see=false
+[12:09:00] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=496), can_see=true
+[12:09:00] [ENEMY] [Enemy10] Player vulnerable (reloading) - pursuing to attack (dist=496)
+[12:09:00] [ENEMY] [Enemy10] Pursuing vulnerability sound at (726.5717, 974.9817), distance=496
+[12:09:01] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(735.1746, 969.8356), source=PLAYER (Player), range=900, listeners=8
+[12:09:01] [ENEMY] [Enemy10] Heard player RELOAD at (735.1746, 969.8356), intensity=0.01, distance=486
+[12:09:01] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=2
+[12:09:01] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=738), can_see=false
+[12:09:01] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=606), can_see=false
+[12:09:01] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1142), can_see=false
+[12:09:01] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1317), can_see=false
+[12:09:01] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=962), can_see=false
+[12:09:01] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1258), can_see=false
+[12:09:01] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1481), can_see=false
+[12:09:01] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=482), can_see=false
+[12:09:01] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:09:01] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:09:01] [ENEMY] [Enemy10] Player vulnerable (reloading) - pursuing to attack (dist=473)
+[12:09:01] [ENEMY] [Enemy10] Pursuing vulnerability sound at (735.1746, 969.8356), distance=468
+[12:09:01] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=737), can_see=false
+[12:09:01] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=614), can_see=false
+[12:09:01] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1129), can_see=false
+[12:09:01] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1304), can_see=false
+[12:09:01] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=952), can_see=false
+[12:09:01] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1252), can_see=false
+[12:09:01] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1476), can_see=false
+[12:09:01] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=473), can_see=true
+[12:09:02] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
+[12:09:02] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:09:02] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=733), can_see=false
+[12:09:02] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=610), can_see=false
+[12:09:02] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1116), can_see=false
+[12:09:02] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1293), can_see=false
+[12:09:02] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=944), can_see=false
+[12:09:02] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1251), can_see=false
+[12:09:02] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1474), can_see=false
+[12:09:02] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=468), can_see=true
+[12:09:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(515.4471, 409.43158)
+[12:09:02] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:02] [INFO] [Bullet] Using shooter_position, distance=658,2704
+[12:09:02] [INFO] [Bullet] Distance to wall: 658,2704 (44,82284% of viewport)
+[12:09:02] [ENEMY] [Enemy7] Player vulnerable (reloading) - pursuing to attack (dist=837)
+[12:09:02] [ENEMY] [Enemy7] State: IDLE -> PURSUING
+[12:09:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(741.82306, 57.733887)
+[12:09:02] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:02] [INFO] [Bullet] Using shooter_position, distance=744,0663
+[12:09:02] [INFO] [Bullet] Distance to wall: 744,0663 (50,66484% of viewport)
+[12:09:02] [ENEMY] [Enemy10] Player vulnerable (reloading) - pursuing to attack (dist=421)
+[12:09:02] [ENEMY] [Enemy10] Pursuing vulnerability sound at (735.1746, 969.8356), distance=340
+[12:09:02] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=698), can_see=false
+[12:09:02] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=580), can_see=false
+[12:09:02] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1060), can_see=false
+[12:09:02] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1246), can_see=false
+[12:09:02] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=838), can_see=false
+[12:09:02] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1261), can_see=false
+[12:09:02] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1485), can_see=false
+[12:09:02] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=422), can_see=true
+[12:09:02] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:09:03] [ENEMY] [Enemy1] State: SUPPRESSED -> IN_COVER
+[12:09:03] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
+[12:09:03] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=592), can_see=false
+[12:09:03] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=458), can_see=false
+[12:09:03] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=996), can_see=false
+[12:09:03] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1208), can_see=false
+[12:09:03] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=718), can_see=true
+[12:09:03] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1351), can_see=false
+[12:09:03] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1574), can_see=false
+[12:09:03] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=494), can_see=true
+[12:09:03] [ENEMY] [Enemy10] Pursuing vulnerability sound at (735.1746, 969.8356), distance=224
+[12:09:03] [ENEMY] [Enemy10] Player vulnerable (reloading) - pursuing to attack (dist=445)
+[12:09:03] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=441), can_see=false
+[12:09:03] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=true (dist=216), can_see=false
+[12:09:03] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1118), can_see=false
+[12:09:03] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1341), can_see=false
+[12:09:03] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=842), can_see=false
+[12:09:03] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1502), can_see=false
+[12:09:03] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1725), can_see=false
+[12:09:03] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=441), can_see=true
+[12:09:03] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:09:03] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(461.155, 1026.731), source=ENEMY (Enemy10), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.9747, 1023.419), source=ENEMY (Enemy10), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(452.7943, 1020.107), source=ENEMY (Enemy10), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4392
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4393
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(463.4416, 974.3312), shooter_id=788143277754, bullet_pos=(521.6139, 603.8705)
+[12:09:04] [INFO] [Bullet] Using shooter_position, distance=375.000122070313
+[12:09:04] [INFO] [Bullet] Distance to wall: 375.000122070313 (25.5344478761878% of viewport)
+[12:09:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:04] [INFO] [Bullet] Starting wall penetration at (521.6139, 603.8705)
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31.284839630127
+[12:09:04] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:04] [INFO] [Bullet] Exiting penetration at (528.8531, 557.7688) after traveling 41.6666641235352 pixels through wall
+[12:09:04] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(459.1714, 971.0105), shooter_id=788143277754, bullet_pos=(516.5481, 600.4257)
+[12:09:04] [INFO] [Bullet] Using shooter_position, distance=375.000213623047
+[12:09:04] [INFO] [Bullet] Distance to wall: 375.000213623047 (25.5344541101819% of viewport)
+[12:09:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:04] [INFO] [Bullet] Starting wall penetration at (516.5481, 600.4257)
+[12:09:04] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=true (dist=318), can_see=false
+[12:09:04] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=true (dist=118), can_see=false
+[12:09:04] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1283), can_see=false
+[12:09:04] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1510), can_see=false
+[12:09:04] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1007), can_see=false
+[12:09:04] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1649), can_see=false
+[12:09:04] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1873), can_see=false
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:04] [INFO] [Bullet] Exiting penetration at (523.6883, 554.3085) after traveling 41.6666679382324 pixels through wall
+[12:09:04] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4395
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4396
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4397
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(461.1737, 591.3923), shooter_id=785861576758, bullet_pos=(449.0634, 715.8043)
+[12:09:04] [INFO] [Bullet] Using shooter_position, distance=124.999946594238
+[12:09:04] [INFO] [Bullet] Distance to wall: 124.999946594238 (8.51147621823541% of viewport)
+[12:09:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:04] [INFO] [Bullet] Starting wall penetration at (449.0634, 715.8043)
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4398
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:04] [INFO] [Bullet] Exiting penetration at (444.5422, 762.2514) after traveling 41.6666717529297 pixels through wall
+[12:09:04] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:04] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:09:04] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:09:04] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:09:04] [INFO] [LastChance] Player died
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4400
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4401
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4402
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(404.5737, 662.6094), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=2
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4403
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4405
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4406
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(467.71, 977.6519), shooter_id=788143277754, bullet_pos=(618.368, 31.23496)
+[12:09:04] [INFO] [Bullet] Using shooter_position, distance=958.333312988281
+[12:09:04] [INFO] [Bullet] Distance to wall: 958.333312988281 (65.2546775009461% of viewport)
+[12:09:04] [INFO] [Bullet] Distance-based penetration chance: 70.5362095822296%
+[12:09:04] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4407
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4409
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=true (dist=288), can_see=false
+[12:09:04] [INFO] [LastChance] Threat detected: Bullet
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4410
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4411
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4412
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(434.4244, 582.4622), shooter_id=785861576758, bullet_pos=(362.5416, 684.7258)
+[12:09:04] [INFO] [Bullet] Using shooter_position, distance=124.999984741211
+[12:09:04] [INFO] [Bullet] Distance to wall: 124.999984741211 (8.51147881573292% of viewport)
+[12:09:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:04] [INFO] [LastChance] Threat detected: Bullet
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4414
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [ScoreManager] Combo ended at 2. Max combo: 2
+[12:09:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(433.1777, 581.8948), shooter_id=785861576758, bullet_pos=(333.2204, 715.2603)
+[12:09:04] [INFO] [Bullet] Using shooter_position, distance=166.666763305664
+[12:09:04] [INFO] [Bullet] Distance to wall: 166.666763305664 (11.3486463866363% of viewport)
+[12:09:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4415
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(431.9884, 581.3215), shooter_id=785861576758, bullet_pos=(328.1844, 711.715)
+[12:09:04] [INFO] [Bullet] Using shooter_position, distance=166.666549682617
+[12:09:04] [INFO] [Bullet] Distance to wall: 166.666549682617 (11.3486318406502% of viewport)
+[12:09:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4417
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy1] FLANKING started: target=(144.2688, 609.2214), side=left, pos=(264.1301, 401.9333)
+[12:09:04] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(430.855, 580.7447), shooter_id=785861576758, bullet_pos=(323.4575, 708.1949)
+[12:09:04] [INFO] [Bullet] Using shooter_position, distance=166.666717529297
+[12:09:04] [INFO] [Bullet] Distance to wall: 166.666717529297 (11.3486432696393% of viewport)
+[12:09:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4419
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4421
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4422
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy1] State: FLANKING -> COMBAT
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4423
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.0667, 538.5399), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [LastChance] Threat detected: @Area2D@4424
+[12:09:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:04] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=true (dist=261), can_see=false
+[12:09:04] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=true (dist=212), can_see=false
+[12:09:04] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1449), can_see=false
+[12:09:04] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1679), can_see=false
+[12:09:04] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1173), can_see=false
+[12:09:04] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1801), can_see=false
+[12:09:04] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=2024), can_see=false
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(431.9884, 581.3215), shooter_id=785861576758, bullet_pos=(66.60542, 416.2958)
+[12:09:04] [INFO] [Bullet] Using shooter_position, distance=400.921661376953
+[12:09:04] [INFO] [Bullet] Distance to wall: 400.921661376953 (27.2994931530847% of viewport)
+[12:09:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:04] [INFO] [Bullet] Starting wall penetration at (66.60542, 416.2958)
+[12:09:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(433.1777, 581.8948), shooter_id=785861576758, bullet_pos=(65.04483, 379.1326)
+[12:09:04] [INFO] [Bullet] Using shooter_position, distance=420.278839111328
+[12:09:04] [INFO] [Bullet] Distance to wall: 420.278839111328 (28.6175589797295% of viewport)
+[12:09:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:04] [INFO] [Bullet] Exiting penetration at (39.81221, 386.0364) after traveling 35.4166641235352 pixels through wall
+[12:09:04] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:09:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(430.855, 580.7447), shooter_id=785861576758, bullet_pos=(55.49074, 418.5575)
+[12:09:04] [INFO] [Bullet] Using shooter_position, distance=408.904724121094
+[12:09:04] [INFO] [Bullet] Distance to wall: 408.904724121094 (27.8430745748912% of viewport)
+[12:09:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy7] FLANKING started: target=(400.6069, 507.7172), side=left, pos=(1430.636, 901.5384)
+[12:09:04] [ENEMY] [Enemy7] State: PURSUING -> FLANKING
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:09:04] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:09:04] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:09:04] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:09:04] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:09:04] [INFO] [Player] Ready! Grenades: 1/3
+[12:09:05] [INFO] [ScoreManager] Level started with 10 enemies
+[12:09:05] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
+[12:09:05] [ENEMY] [Enemy1] Registered as sound listener
+[12:09:05] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:09:05] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
+[12:09:05] [ENEMY] [Enemy2] Registered as sound listener
+[12:09:05] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:09:05] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
+[12:09:05] [ENEMY] [Enemy3] Registered as sound listener
+[12:09:05] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:09:05] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
+[12:09:05] [ENEMY] [Enemy4] Registered as sound listener
+[12:09:05] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:09:05] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
+[12:09:05] [ENEMY] [Enemy5] Registered as sound listener
+[12:09:05] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:09:05] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
+[12:09:05] [ENEMY] [Enemy6] Registered as sound listener
+[12:09:05] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:09:05] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
+[12:09:05] [ENEMY] [Enemy7] Registered as sound listener
+[12:09:05] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:09:05] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
+[12:09:05] [ENEMY] [Enemy8] Registered as sound listener
+[12:09:05] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:09:05] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
+[12:09:05] [ENEMY] [Enemy9] Registered as sound listener
+[12:09:05] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:09:05] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
+[12:09:05] [ENEMY] [Enemy10] Registered as sound listener
+[12:09:05] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:09:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(449.6667, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=18
+[12:09:05] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
+[12:09:05] [ENEMY] [Enemy4] Heard gunshot at (449.6667, 1256), source_type=0, intensity=0.01, distance=499
+[12:09:05] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:09:05] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:09:05] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:09:05] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:09:05] [INFO] [LastChance] Found player: Player
+[12:09:05] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:09:05] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:09:05] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:09:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(440.6667, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:05] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=5
+[12:09:05] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:09:05] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:09:05] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:09:05] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:09:05] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:09:05] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:09:05] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:09:05] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:09:05] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:09:05] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:09:06] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:09:06] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:09:06] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:09:06] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:09:06] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:09:06] [INFO] [Player] Ready! Grenades: 1/3
+[12:09:06] [INFO] [ScoreManager] Level started with 10 enemies
+[12:09:06] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:09:06] [ENEMY] [Enemy1] Registered as sound listener
+[12:09:06] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:09:06] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:09:06] [ENEMY] [Enemy2] Registered as sound listener
+[12:09:06] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:09:06] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:09:06] [ENEMY] [Enemy3] Registered as sound listener
+[12:09:06] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:09:06] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:09:06] [ENEMY] [Enemy4] Registered as sound listener
+[12:09:06] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:09:06] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:09:06] [ENEMY] [Enemy5] Registered as sound listener
+[12:09:06] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:09:06] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:09:06] [ENEMY] [Enemy6] Registered as sound listener
+[12:09:06] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:09:06] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:09:06] [ENEMY] [Enemy7] Registered as sound listener
+[12:09:06] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:09:06] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:09:06] [ENEMY] [Enemy8] Registered as sound listener
+[12:09:06] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:09:06] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:09:06] [ENEMY] [Enemy9] Registered as sound listener
+[12:09:06] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:09:06] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:09:06] [ENEMY] [Enemy10] Registered as sound listener
+[12:09:06] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:09:06] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:09:06] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:09:06] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:09:06] [INFO] [LastChance] Found player: Player
+[12:09:06] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:09:06] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:09:06] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:09:06] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:09:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=20
+[12:09:06] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:09:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:09:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.71, 1476.261), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:09:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:07] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:09:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=975930657290, bullet_pos=(64.61339, 850.4285)
+[12:09:07] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:09:07] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:09:07] [INFO] [Bullet] Distance-based penetration chance: 50.6761238618226%
+[12:09:07] [INFO] [Bullet] Starting wall penetration at (64.61339, 850.4285)
+[12:09:07] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8.19846057891846
+[12:09:07] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:07] [INFO] [Bullet] Exiting penetration at (25.04935, 825.6805) after traveling 41.6666717529297 pixels through wall
+[12:09:07] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:07] [INFO] [LastChance] Threat detected: @Area2D@4934
+[12:09:07] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=975930657290, bullet_pos=(60.65509, 787.2949)
+[12:09:07] [INFO] [Bullet] Using shooter_position, distance=1208.33386230469
+[12:09:07] [INFO] [Bullet] Distance to wall: 1208.33386230469 (82.2776746143741% of viewport)
+[12:09:07] [INFO] [Bullet] Distance-based penetration chance: 50.6760462832302%
+[12:09:07] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.099, 1444.918), shooter_id=975930657290, bullet_pos=(53.37347, 732.156)
+[12:09:07] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
+[12:09:07] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
+[12:09:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.099, 1444.918), shooter_id=975930657290, bullet_pos=(113.6495, 686.1396)
+[12:09:07] [INFO] [Bullet] Using shooter_position, distance=1189.02978515625
+[12:09:07] [INFO] [Bullet] Distance to wall: 1189.02978515625 (80.9632245042692% of viewport)
+[12:09:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.099, 1444.918), shooter_id=975930657290, bullet_pos=(67.3555, 640.2159)
+[12:09:07] [INFO] [Bullet] Using shooter_position, distance=1253.99169921875
+[12:09:07] [INFO] [Bullet] Distance to wall: 1253.99169921875 (85.3866006872116% of viewport)
+[12:09:07] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:09:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(364.44, 811.6067), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:07] [ENEMY] [Enemy1] Heard gunshot at (364.44, 811.6067), source_type=0, intensity=0.01, distance=466
+[12:09:07] [ENEMY] [Enemy2] Heard gunshot at (364.44, 811.6067), source_type=0, intensity=0.04, distance=264
+[12:09:07] [ENEMY] [Enemy4] Heard gunshot at (364.44, 811.6067), source_type=0, intensity=0.01, distance=444
+[12:09:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.099, 1444.918), shooter_id=975930657290, bullet_pos=(221.5325, 429.7623)
+[12:09:07] [INFO] [Bullet] Using shooter_position, distance=1297.19091796875
+[12:09:07] [INFO] [Bullet] Distance to wall: 1297.19091796875 (88.3281149282578% of viewport)
+[12:09:07] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[12:09:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(366.2877, 773.8721), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(636.6865, 758.5029), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[12:09:07] [INFO] [LastChance] Threat detected: Bullet
+[12:09:07] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.099, 1444.918), shooter_id=975930657290, bullet_pos=(66.55503, 240.9729)
+[12:09:07] [INFO] [Bullet] Using shooter_position, distance=1541.41943359375
+[12:09:07] [INFO] [Bullet] Distance to wall: 1541.41943359375 (104.958083653804% of viewport)
+[12:09:07] [INFO] [Bullet] Distance-based penetration chance: 29.0083832692392%
+[12:09:07] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(380.3341, 742.9863), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(615.3561, 758.3569), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[12:09:08] [INFO] [LastChance] Threat detected: @Area2D@4943
+[12:09:08] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:08] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:09:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(923.3357, 669.90643)
+[12:09:08] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:08] [INFO] [Bullet] Using shooter_position, distance=1140,7556
+[12:09:08] [INFO] [Bullet] Distance to wall: 1140,7556 (77,67615% of viewport)
+[12:09:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:09:08] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:09:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(405.9671, 734.0663), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(612.7245, 765.9117), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:08] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[12:09:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(579.8909, 767.2234), shooter_id=973934169105, bullet_pos=(38.29586, 776.0355)
+[12:09:08] [INFO] [Bullet] Using shooter_position, distance=541.666809082031
+[12:09:08] [INFO] [Bullet] Distance to wall: 541.666809082031 (36.8830890678291% of viewport)
+[12:09:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:08] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[12:09:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(609.2156, 775.9847), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:08] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[12:09:08] [INFO] [LastChance] Threat detected: @Area2D@4949
+[12:09:08] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(443.6796, 734.0663), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(987.5734, 706.51575)
+[12:09:08] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:08] [INFO] [Bullet] Using shooter_position, distance=1214,2758
+[12:09:08] [INFO] [Bullet] Distance to wall: 1214,2758 (82,68227% of viewport)
+[12:09:08] [INFO] [Bullet] Distance-based penetration chance: 50,20402%
+[12:09:08] [INFO] [Bullet] Starting wall penetration at (987.5734, 706.51575)
+[12:09:08] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:08] [INFO] [Bullet] Exiting penetration at (1034.1561, 703.718) after traveling 41,666668 pixels through wall
+[12:09:08] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:09:08] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:09:08] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:09:08] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:09:08] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:09:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(556.7803, 774.7156), shooter_id=973934169105, bullet_pos=(56.87344, 784.366)
+[12:09:08] [INFO] [Bullet] Using shooter_position, distance=500.000030517578
+[12:09:08] [INFO] [Bullet] Distance to wall: 500.000030517578 (34.0459214969257% of viewport)
+[12:09:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:08] [INFO] [Bullet] Starting wall penetration at (56.87344, 784.366)
+[12:09:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(481.4147, 735.9141), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:08] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.7885971069336
+[12:09:08] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:08] [INFO] [Bullet] Exiting penetration at (10.21546, 785.2667) after traveling 41.6666717529297 pixels through wall
+[12:09:08] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(922.4961, 799.98895)
+[12:09:08] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:08] [INFO] [Bullet] Using shooter_position, distance=1221,0575
+[12:09:08] [INFO] [Bullet] Distance to wall: 1221,0575 (83,14405% of viewport)
+[12:09:08] [INFO] [Bullet] Distance-based penetration chance: 49,66528%
+[12:09:08] [INFO] [Bullet] Starting wall penetration at (922.4961, 799.98895)
+[12:09:08] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33,035336
+[12:09:08] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:08] [INFO] [Bullet] Exiting penetration at (968.7266, 806.3539) after traveling 41,66667 pixels through wall
+[12:09:08] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(513.6642, 751.0042), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:09:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(908.9336, 846.8059)
+[12:09:08] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:08] [INFO] [Bullet] Using shooter_position, distance=1242,2723
+[12:09:08] [INFO] [Bullet] Distance to wall: 1242,2723 (84,58861% of viewport)
+[12:09:08] [INFO] [Bullet] Distance-based penetration chance: 47,979958%
+[12:09:08] [INFO] [Bullet] Starting wall penetration at (908.9336, 846.8059)
+[12:09:08] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18,704554
+[12:09:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(697.2408, 806.1019)
+[12:09:08] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:08] [INFO] [Bullet] Using shooter_position, distance=1065,8073
+[12:09:08] [INFO] [Bullet] Distance to wall: 1065,8073 (72,57278% of viewport)
+[12:09:08] [INFO] [Bullet] Distance-based penetration chance: 61,99843%
+[12:09:08] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:08] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:08] [INFO] [Bullet] Exiting penetration at (954.1054, 858.52277) after traveling 41,66667 pixels through wall
+[12:09:08] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:08] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[12:09:08] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:09:08] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:09:08] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:09:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(576.3358, 927.9689), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:09] [ENEMY] [Enemy3] Heard gunshot at (576.3358, 927.9689), source_type=0, intensity=0.37, distance=82
+[12:09:09] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[12:09:09] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:09:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(722.29443, 893.38464)
+[12:09:09] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:09] [INFO] [Bullet] Using shooter_position, distance=1148,8452
+[12:09:09] [INFO] [Bullet] Distance to wall: 1148,8452 (78,22698% of viewport)
+[12:09:09] [INFO] [Bullet] Distance-based penetration chance: 55,401855%
+[12:09:09] [INFO] [Bullet] Starting wall penetration at (722.29443, 893.38464)
+[12:09:09] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7,917101
+[12:09:09] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:09] [INFO] [Bullet] Exiting penetration at (767.7038, 882.62506) after traveling 41,666668 pixels through wall
+[12:09:09] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(665.41, 948.4804), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:09:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(598.6262, 955.03), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:09] [ENEMY] [Enemy3] Heard gunshot at (598.6262, 955.03), source_type=0, intensity=0.51, distance=70
+[12:09:09] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[12:09:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(609.1617, 961.4913), shooter_id=973934169105, bullet_pos=(526.1792, 969.1302)
+[12:09:09] [INFO] [Bullet] Using shooter_position, distance=83.3333358764648
+[12:09:09] [INFO] [Bullet] Distance to wall: 83.3333358764648 (5.67432007632112% of viewport)
+[12:09:09] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:09] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:09:09] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[12:09:09] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:09:09] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:09:09] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:09:09] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:09:09] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:09:09] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:09:09] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:09:09] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:09:09] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:09:09] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:09:09] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:09:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(728.02893, 879.16876)
+[12:09:09] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:09] [INFO] [Bullet] Using shooter_position, distance=1141,4744
+[12:09:09] [INFO] [Bullet] Distance to wall: 1141,4744 (77,72509% of viewport)
+[12:09:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(620.5941, 966.605), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:09] [ENEMY] [Enemy3] Heard gunshot at (620.5941, 966.605), source_type=0, intensity=0.87, distance=53
+[12:09:09] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[12:09:09] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:09:09] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:09:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(706.5034, 893.9701)
+[12:09:09] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:09] [INFO] [Bullet] Using shooter_position, distance=1139,4426
+[12:09:09] [INFO] [Bullet] Distance to wall: 1139,4426 (77,58675% of viewport)
+[12:09:10] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:09:10] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:09:10] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:09:10] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:09:10] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:09:10] [INFO] [Player] Ready! Grenades: 1/3
+[12:09:10] [INFO] [ScoreManager] Level started with 10 enemies
+[12:09:10] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:09:10] [ENEMY] [Enemy1] Registered as sound listener
+[12:09:10] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:09:10] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:09:10] [ENEMY] [Enemy2] Registered as sound listener
+[12:09:10] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:09:10] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:09:10] [ENEMY] [Enemy3] Registered as sound listener
+[12:09:10] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:09:10] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:09:10] [ENEMY] [Enemy4] Registered as sound listener
+[12:09:10] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:09:10] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:09:10] [ENEMY] [Enemy5] Registered as sound listener
+[12:09:10] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:09:10] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:09:10] [ENEMY] [Enemy6] Registered as sound listener
+[12:09:10] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:09:10] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:09:10] [ENEMY] [Enemy7] Registered as sound listener
+[12:09:10] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:09:10] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:09:10] [ENEMY] [Enemy8] Registered as sound listener
+[12:09:10] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:09:10] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:09:10] [ENEMY] [Enemy9] Registered as sound listener
+[12:09:10] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:09:10] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:09:10] [ENEMY] [Enemy10] Registered as sound listener
+[12:09:10] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:09:10] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:09:10] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:09:10] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:09:10] [INFO] [LastChance] Found player: Player
+[12:09:10] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:09:10] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:09:10] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:09:10] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:09:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=20
+[12:09:10] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:09:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:09:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:09:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:10] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:09:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=1060387163391, bullet_pos=(64.61339, 850.4285)
+[12:09:11] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:09:11] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:09:11] [INFO] [LastChance] Threat detected: @Area2D@5215
+[12:09:11] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1060387163391, bullet_pos=(60.65509, 787.2949)
+[12:09:11] [INFO] [Bullet] Using shooter_position, distance=1208.33386230469
+[12:09:11] [INFO] [Bullet] Distance to wall: 1208.33386230469 (82.2776746143741% of viewport)
+[12:09:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=1060387163391, bullet_pos=(317.7159, 712.3152)
+[12:09:11] [INFO] [Bullet] Using shooter_position, distance=1096.19360351563
+[12:09:11] [INFO] [Bullet] Distance to wall: 1096.19360351563 (74.6418381856739% of viewport)
+[12:09:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1060387163391, bullet_pos=(223.7687, 706.3732)
+[12:09:11] [INFO] [Bullet] Using shooter_position, distance=1130.42517089844
+[12:09:11] [INFO] [Bullet] Distance to wall: 1130.42517089844 (76.9727285550716% of viewport)
+[12:09:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.35, 1444.443), shooter_id=1060387163391, bullet_pos=(58.73874, 724.7313)
+[12:09:11] [INFO] [Bullet] Using shooter_position, distance=1208.33386230469
+[12:09:11] [INFO] [Bullet] Distance to wall: 1208.33386230469 (82.2776746143741% of viewport)
+[12:09:11] [INFO] [Bullet] Distance-based penetration chance: 50.6760462832302%
+[12:09:11] [INFO] [Bullet] Starting wall penetration at (58.73874, 724.7313)
+[12:09:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13.3790721893311
+[12:09:11] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:11] [INFO] [Bullet] Exiting penetration at (21.25306, 696.9356) after traveling 41.6666641235352 pixels through wall
+[12:09:11] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=1060387163391, bullet_pos=(498.7567, 829.6323)
+[12:09:11] [INFO] [Bullet] Using shooter_position, distance=886.644470214844
+[12:09:11] [INFO] [Bullet] Distance to wall: 886.644470214844 (60.3732523723448% of viewport)
+[12:09:11] [INFO] [LastChance] Threat detected: Bullet
+[12:09:11] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1060387163391, bullet_pos=(512.2892, 878.8546)
+[12:09:11] [INFO] [Bullet] Using shooter_position, distance=803.849426269531
+[12:09:11] [INFO] [Bullet] Distance to wall: 803.849426269531 (54.7355855834475% of viewport)
+[12:09:11] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:09:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(337.2163, 795.383), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:11] [ENEMY] [Enemy1] Heard gunshot at (337.2163, 795.383), source_type=0, intensity=0.01, distance=447
+[12:09:11] [ENEMY] [Enemy2] Heard gunshot at (337.2163, 795.383), source_type=0, intensity=0.04, distance=253
+[12:09:11] [ENEMY] [Enemy4] Heard gunshot at (337.2163, 795.383), source_type=0, intensity=0.01, distance=474
+[12:09:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=1060387163391, bullet_pos=(52.73094, 1035.354)
+[12:09:11] [INFO] [Bullet] Using shooter_position, distance=1132.1455078125
+[12:09:11] [INFO] [Bullet] Distance to wall: 1132.1455078125 (77.0898694589707% of viewport)
+[12:09:11] [INFO] [Bullet] Distance-based penetration chance: 56.7284856312008%
+[12:09:11] [INFO] [Bullet] Starting wall penetration at (52.73094, 1035.354)
+[12:09:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7.75878047943115
+[12:09:11] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:11] [INFO] [Bullet] Exiting penetration at (24.95454, 1048.165) after traveling 25.5885429382324 pixels through wall
+[12:09:11] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
+[12:09:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(636.7209, 758.8775), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:09:11] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[12:09:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(340.2101, 758.2795), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:11] [INFO] [LastChance] Threat detected: Bullet
+[12:09:11] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(599.4197, 758.0046), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:11] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[12:09:11] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[12:09:11] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:09:11] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:09:11] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:09:11] [INFO] [LastChance] Threat detected: @Area2D@5225
+[12:09:11] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(354.4541, 734.0682), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:11] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[12:09:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(580.1336, 768.305), shooter_id=1058390673054, bullet_pos=(38.69236, 783.9282)
+[12:09:12] [INFO] [Bullet] Using shooter_position, distance=541.666564941406
+[12:09:12] [INFO] [Bullet] Distance to wall: 541.666564941406 (36.883072443845% of viewport)
+[12:09:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(382.6977, 734.0682), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:12] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[12:09:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(541.1791, 760.5732), shooter_id=1058390673054, bullet_pos=(43.19162, 715.7556)
+[12:09:12] [INFO] [Bullet] Using shooter_position, distance=500.000122070313
+[12:09:12] [INFO] [Bullet] Distance to wall: 500.000122070313 (34.0459277309198% of viewport)
+[12:09:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:12] [INFO] [Bullet] Starting wall penetration at (43.19162, 715.7556)
+[12:09:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.4298133850098
+[12:09:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:12] [INFO] [Bullet] Exiting penetration at (-3.287201, 711.5726) after traveling 41.6666679382324 pixels through wall
+[12:09:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(921.02234, 723.5063)
+[12:09:12] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:12] [INFO] [Bullet] Using shooter_position, distance=1171,2146
+[12:09:12] [INFO] [Bullet] Distance to wall: 1171,2146 (79,75015% of viewport)
+[12:09:12] [INFO] [Bullet] Distance-based penetration chance: 53,62482%
+[12:09:12] [INFO] [Bullet] Starting wall penetration at (921.02234, 723.5063)
+[12:09:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31,68641
+[12:09:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:12] [INFO] [Bullet] Exiting penetration at (967.6809, 722.6365) after traveling 41,666668 pixels through wall
+[12:09:12] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:12] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:09:12] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:09:12] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:09:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1360.8213, 835.1604)
+[12:09:12] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:12] [INFO] [Bullet] Using shooter_position, distance=1596,6614
+[12:09:12] [INFO] [Bullet] Distance to wall: 1596,6614 (108,71961% of viewport)
+[12:09:12] [INFO] [Bullet] Distance-based penetration chance: 28,256079%
+[12:09:12] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(620.3328, 926.6606), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:09:13] [ENEMY] [Enemy4] Hit taken, health: 1/2
+[12:09:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(646.0519, 954.5074), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:09:13] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[12:09:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(919.3432, 923.8982)
+[12:09:13] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:13] [INFO] [Bullet] Using shooter_position, distance=1303,3724
+[12:09:13] [INFO] [Bullet] Distance to wall: 1303,3724 (88,74902% of viewport)
+[12:09:13] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[12:09:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(676.8474, 973.1081), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:13] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:09:13] [ENEMY] [Enemy4] Hit taken, health: 0/2
+[12:09:13] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[12:09:13] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[12:09:13] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[12:09:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(713.6708, 977.1555), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=7
+[12:09:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(927.3301, 804.02313)
+[12:09:13] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:13] [INFO] [Bullet] Using shooter_position, distance=1227,3525
+[12:09:13] [INFO] [Bullet] Distance to wall: 1227,3525 (83,57269% of viewport)
+[12:09:13] [INFO] [Bullet] Distance-based penetration chance: 49,165195%
+[12:09:13] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(752.1708, 977.1555), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:13] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=7
+[12:09:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(925.6361, 821.09686)
+[12:09:13] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:13] [INFO] [Bullet] Using shooter_position, distance=1237,3368
+[12:09:13] [INFO] [Bullet] Distance to wall: 1237,3368 (84,25254% of viewport)
+[12:09:13] [INFO] [Bullet] Distance-based penetration chance: 48,372036%
+[12:09:13] [INFO] [Bullet] Starting wall penetration at (925.6361, 821.09686)
+[12:09:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32,725903
+[12:09:13] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:13] [INFO] [Bullet] Exiting penetration at (960.32916, 789.88513) after traveling 41,666676 pixels through wall
+[12:09:13] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:13] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:09:14] [ENEMY] [Enemy10] FLANKING started: target=(681.2557, 975.0156), side=right, pos=(953.1761, 1417.052)
+[12:09:14] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:09:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(736.8324, 720.2282), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[12:09:14] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[12:09:14] [ENEMY] [Enemy2] Hit taken, health: 3/4
+[12:09:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(701.9688, 714.6442), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[12:09:15] [ENEMY] [Enemy2] Hit taken, health: 2/4
+[12:09:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(670.0954, 724.7405), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[12:09:15] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[12:09:15] [ENEMY] [Enemy2] Hit taken, health: 1/4
+[12:09:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(642.136, 749.2543), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[12:09:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(439.1981, 650.9458), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:15] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[12:09:15] [ENEMY] [Enemy2] Hit taken, health: 0/4
+[12:09:15] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[12:09:15] [INFO] [ScoreManager] Kill registered. Combo: 3 (points: 3000)
+[12:09:15] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
+[12:09:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(614.7847, 776.17), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=4
+[12:09:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(488.90692, 694.59326)
+[12:09:15] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:15] [INFO] [Bullet] Using shooter_position, distance=849,4056
+[12:09:15] [INFO] [Bullet] Distance to wall: 849,4056 (57,83759% of viewport)
+[12:09:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(583.2762, 792.5938), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=3
+[12:09:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(501.249, 667.235), shooter_id=1058105461369, bullet_pos=(937.02, 809.2669)
+[12:09:15] [INFO] [Bullet] Using shooter_position, distance=458.333251953125
+[12:09:15] [INFO] [Bullet] Distance to wall: 458.333251953125 (31.2087539260224% of viewport)
+[12:09:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:15] [INFO] [Bullet] Starting wall penetration at (937.02, 809.2669)
+[12:09:15] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47.7393913269043
+[12:09:15] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:15] [INFO] [Bullet] Exiting penetration at (981.3893, 823.7283) after traveling 41.6666679382324 pixels through wall
+[12:09:15] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(329.13953, 431.3683)
+[12:09:15] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:15] [INFO] [Bullet] Using shooter_position, distance=542,5969
+[12:09:15] [INFO] [Bullet] Distance to wall: 542,5969 (36,946426% of viewport)
+[12:09:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:15] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[12:09:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(510.56268, 207.26608)
+[12:09:15] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:15] [INFO] [Bullet] Using shooter_position, distance=551,0295
+[12:09:15] [INFO] [Bullet] Distance to wall: 551,0295 (37,52061% of viewport)
+[12:09:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:15] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[12:09:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(420.4444, 44.984436)
+[12:09:15] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:15] [INFO] [Bullet] Using shooter_position, distance=422,84402
+[12:09:15] [INFO] [Bullet] Distance to wall: 422,84402 (28,792229% of viewport)
+[12:09:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:15] [INFO] [Bullet] Starting wall penetration at (420.4444, 44.984436)
+[12:09:15] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20,251995
+[12:09:15] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:15] [INFO] [Bullet] Exiting penetration at (403.40182, 14.294806) after traveling 30,104166 pixels through wall
+[12:09:15] [INFO] [Bullet] Damage multiplier after penetration: 0,225
+[12:09:15] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[12:09:15] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:09:16] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[12:09:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(472.8181, 1011.525), source=ENEMY (Enemy10), range=1469, listeners=7
+[12:09:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=3
+[12:09:16] [INFO] [LastChance] Threat detected: Bullet
+[12:09:16] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(452.4766, 950.0721), shooter_id=1060387163391, bullet_pos=(381.8676, 710.2504)
+[12:09:16] [INFO] [Bullet] Using shooter_position, distance=250.000106811523
+[12:09:16] [INFO] [Bullet] Distance to wall: 250.000106811523 (17.0229669824569% of viewport)
+[12:09:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:16] [INFO] [Bullet] Starting wall penetration at (381.8676, 710.2504)
+[12:09:16] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:09:16] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:09:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(461.9134, 975.82), source=ENEMY (Enemy10), range=1469, listeners=7
+[12:09:16] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[12:09:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.4719257354736
+[12:09:16] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:16] [INFO] [Bullet] Exiting penetration at (368.6873, 665.4837) after traveling 41.6666679382324 pixels through wall
+[12:09:16] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:16] [INFO] [LastChance] Threat detected: @Area2D@5252
+[12:09:16] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(441.1934, 914.5595), shooter_id=1060387163391, bullet_pos=(381.7758, 714.879)
+[12:09:16] [INFO] [Bullet] Using shooter_position, distance=208.333251953125
+[12:09:16] [INFO] [Bullet] Distance to wall: 208.333251953125 (14.1857942165585% of viewport)
+[12:09:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:16] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:09:16] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:09:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.2248, 960.5225), source=ENEMY (Enemy10), range=1469, listeners=7
+[12:09:16] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[12:09:16] [INFO] [LastChance] Threat detected: Bullet
+[12:09:16] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:16] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:09:16] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:09:16] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:09:16] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:09:16] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:09:16] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:09:16] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:09:16] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:09:16] [INFO] [PenultimateHit] Applying saturation to 8 enemies
+[12:09:16] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:09:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.2248, 960.5225), source=ENEMY (Enemy10), range=1469, listeners=7
+[12:09:16] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[12:09:17] [INFO] [LastChance] Threat detected: Bullet
+[12:09:17] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:17] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:09:17] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:09:17] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:09:17] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:09:17] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:09:17] [INFO] [Player] Ready! Grenades: 1/3
+[12:09:17] [INFO] [ScoreManager] Level started with 10 enemies
+[12:09:17] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 8)
+[12:09:17] [ENEMY] [Enemy1] Registered as sound listener
+[12:09:17] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:09:17] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 9)
+[12:09:17] [ENEMY] [Enemy2] Registered as sound listener
+[12:09:17] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:09:17] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 10)
+[12:09:17] [ENEMY] [Enemy3] Registered as sound listener
+[12:09:17] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:09:17] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 11)
+[12:09:17] [ENEMY] [Enemy4] Registered as sound listener
+[12:09:17] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:09:17] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 12)
+[12:09:17] [ENEMY] [Enemy5] Registered as sound listener
+[12:09:17] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:09:17] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 13)
+[12:09:17] [ENEMY] [Enemy6] Registered as sound listener
+[12:09:17] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:09:17] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 14)
+[12:09:17] [ENEMY] [Enemy7] Registered as sound listener
+[12:09:17] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:09:17] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 15)
+[12:09:17] [ENEMY] [Enemy8] Registered as sound listener
+[12:09:17] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:09:17] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 16)
+[12:09:17] [ENEMY] [Enemy9] Registered as sound listener
+[12:09:17] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:09:17] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 17)
+[12:09:17] [ENEMY] [Enemy10] Registered as sound listener
+[12:09:17] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:09:17] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:09:17] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:09:17] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:09:17] [INFO] [LastChance] Found player: Player
+[12:09:17] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:09:17] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:09:17] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:09:17] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:09:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=17
+[12:09:17] [INFO] [SoundPropagation] Cleaned up 7 invalid listeners
+[12:09:17] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:09:17] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:09:18] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:18] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:09:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=1163734812352, bullet_pos=(64.61339, 850.4285)
+[12:09:18] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:09:18] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:09:18] [INFO] [Bullet] Distance-based penetration chance: 50.6761238618226%
+[12:09:18] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1163734812352, bullet_pos=(60.65509, 787.2949)
+[12:09:18] [INFO] [Bullet] Using shooter_position, distance=1208.33386230469
+[12:09:18] [INFO] [Bullet] Distance to wall: 1208.33386230469 (82.2776746143741% of viewport)
+[12:09:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1163734812352, bullet_pos=(143.0936, 712.5925)
+[12:09:18] [INFO] [Bullet] Using shooter_position, distance=1187.28698730469
+[12:09:18] [INFO] [Bullet] Distance to wall: 1187.28698730469 (80.8445541938337% of viewport)
+[12:09:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=1163734812352, bullet_pos=(59.01187, 724.3607)
+[12:09:18] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
+[12:09:18] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
+[12:09:18] [INFO] [Bullet] Distance-based penetration chance: 50.6761141644985%
+[12:09:18] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:18] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:09:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1163734812352, bullet_pos=(507.5894, 987.5325)
+[12:09:18] [INFO] [Bullet] Using shooter_position, distance=731.4365234375
+[12:09:18] [INFO] [Bullet] Distance to wall: 731.4365234375 (49.8048578740275% of viewport)
+[12:09:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1163734812352, bullet_pos=(503.6646, 990.6303)
+[12:09:18] [INFO] [Bullet] Using shooter_position, distance=732.373596191406
+[12:09:18] [INFO] [Bullet] Distance to wall: 732.373596191406 (49.8686648809658% of viewport)
+[12:09:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1163734812352, bullet_pos=(525.9149, 1005.48)
+[12:09:18] [INFO] [Bullet] Using shooter_position, distance=705.830383300781
+[12:09:18] [INFO] [Bullet] Distance to wall: 705.830383300781 (48.0612887065785% of viewport)
+[12:09:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(401.8792, 797.6298), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:18] [ENEMY] [Enemy1] Heard gunshot at (401.8792, 797.6298), source_type=0, intensity=0.01, distance=459
+[12:09:18] [ENEMY] [Enemy2] Heard gunshot at (401.8792, 797.6298), source_type=0, intensity=0.04, distance=248
+[12:09:18] [ENEMY] [Enemy4] Heard gunshot at (401.8792, 797.6298), source_type=0, intensity=0.01, distance=411
+[12:09:18] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:18] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[12:09:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(636.7485, 759.3223), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:09:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(369.3661, 785.3881), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:18] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:18] [INFO] [LastChance] Threat detected: Bullet
+[12:09:18] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:18] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[12:09:19] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:09:19] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:09:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(599.5096, 761.9711), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:19] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[12:09:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(343.7408, 786.0681), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:19] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:19] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:09:19] [INFO] [LastChance] Threat detected: @Area2D@5516
+[12:09:19] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:19] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:09:19] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:09:19] [ENEMY] [Enemy3] Hit taken, health: 1/4
+[12:09:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(581.0415, 770.6884), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:19] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[12:09:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(332.4807, 792.6794), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:19] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(577.6982, 780.8176), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:19] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[12:09:19] [INFO] [LastChance] Threat detected: @Area2D@5520
+[12:09:19] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:19] [ENEMY] [Enemy3] Hit taken, health: 0/4
+[12:09:19] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:09:19] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:09:19] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:09:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(337.2978, 797.5365), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:19] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[12:09:19] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:09:19] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:09:19] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:09:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(529.8126, 792.1306), shooter_id=1161738324240, bullet_pos=(46.75843, 921.1995)
+[12:09:19] [INFO] [Bullet] Using shooter_position, distance=500.000122070313
+[12:09:19] [INFO] [Bullet] Distance to wall: 500.000122070313 (34.0459277309198% of viewport)
+[12:09:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:19] [INFO] [Bullet] Starting wall penetration at (46.75843, 921.1995)
+[12:09:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31.3905124664307
+[12:09:19] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:19] [INFO] [Bullet] Exiting penetration at (1.673374, 933.2459) after traveling 41.6666679382324 pixels through wall
+[12:09:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(526.1671, 794.7716), shooter_id=1161738324240, bullet_pos=(31.14551, 865.1544)
+[12:09:19] [INFO] [Bullet] Using shooter_position, distance=500.000122070313
+[12:09:19] [INFO] [Bullet] Distance to wall: 500.000122070313 (34.0459277309198% of viewport)
+[12:09:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:19] [INFO] [Bullet] Starting wall penetration at (31.14551, 865.1544)
+[12:09:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47.5297546386719
+[12:09:19] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:19] [INFO] [Bullet] Exiting penetration at (-15.0565, 871.7234) after traveling 41.6666679382324 pixels through wall
+[12:09:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1233.376, 713.6084)
+[12:09:19] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:19] [INFO] [Bullet] Using shooter_position, distance=1424,9397
+[12:09:19] [INFO] [Bullet] Distance to wall: 1424,9397 (97,026764% of viewport)
+[12:09:19] [INFO] [Bullet] Distance-based penetration chance: 33,468777%
+[12:09:19] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(613.3375, 915.3743), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:09:20] [ENEMY] [Enemy4] Hit taken, health: 1/2
+[12:09:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(628.4275, 947.6237), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:09:20] [ENEMY] [Enemy4] Hit taken, health: 0/2
+[12:09:20] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[12:09:20] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[12:09:20] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[12:09:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(655.0836, 974.8272), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:20] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[12:09:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(918.6244, 896.27014)
+[12:09:20] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:20] [INFO] [Bullet] Using shooter_position, distance=1283,4216
+[12:09:20] [INFO] [Bullet] Distance to wall: 1283,4216 (87,39054% of viewport)
+[12:09:20] [INFO] [Bullet] Distance-based penetration chance: 44,71104%
+[12:09:20] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(686.772, 989.9335), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:20] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=7
+[12:09:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(724.6328, 989.0096), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[12:09:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(928.57904, 785.4655)
+[12:09:21] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:21] [INFO] [Bullet] Using shooter_position, distance=1216,2299
+[12:09:21] [INFO] [Bullet] Distance to wall: 1216,2299 (82,81533% of viewport)
+[12:09:21] [INFO] [Bullet] Distance-based penetration chance: 50,048782%
+[12:09:21] [INFO] [Bullet] Starting wall penetration at (928.57904, 785.4655)
+[12:09:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36,94827
+[12:09:21] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:21] [INFO] [Bullet] Exiting penetration at (964.21375, 755.3334) after traveling 41,666668 pixels through wall
+[12:09:21] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(908.6182, 731.27484)
+[12:09:21] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:21] [INFO] [Bullet] Using shooter_position, distance=1166,3405
+[12:09:21] [INFO] [Bullet] Distance to wall: 1166,3405 (79,41827% of viewport)
+[12:09:21] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:09:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(506.55475, 324.89136)
+[12:09:21] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:21] [INFO] [Bullet] Using shooter_position, distance=601,7908
+[12:09:21] [INFO] [Bullet] Distance to wall: 601,7908 (40,977043% of viewport)
+[12:09:21] [INFO] [Bullet] Distance-based penetration chance: 98,860115%
+[12:09:21] [INFO] [Bullet] Starting wall penetration at (506.55475, 324.89136)
+[12:09:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31,096937
+[12:09:21] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:21] [INFO] [Bullet] Exiting penetration at (478.12897, 296.16016) after traveling 35,41667 pixels through wall
+[12:09:21] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[12:09:21] [ENEMY] [Enemy10] FLANKING started: target=(653.5493, 1000.12), side=right, pos=(953.4262, 1416.483)
+[12:09:21] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:09:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(741.15, 745.8947), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[12:09:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(711.2475, 725.1382), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[12:09:22] [ENEMY] [Enemy2] Hit taken, health: 3/4
+[12:09:22] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[12:09:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(675.142, 719.3574), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[12:09:22] [ENEMY] [Enemy2] Hit taken, health: 2/4
+[12:09:22] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[12:09:22] [ENEMY] [Enemy2] Hit taken, health: 1/4
+[12:09:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(636.642, 719.3574), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[12:09:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(415.8692, 641.8651), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:22] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[12:09:22] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
+[12:09:22] [ENEMY] [Enemy2] Hit taken, health: 0/4
+[12:09:22] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[12:09:22] [INFO] [ScoreManager] Kill registered. Combo: 3 (points: 3000)
+[12:09:22] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
+[12:09:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(598.9074, 717.5096), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:22] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=4
+[12:09:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(474.7414, 643.6176), shooter_id=1161453111900, bullet_pos=(927.1465, 717.0962)
+[12:09:22] [INFO] [Bullet] Using shooter_position, distance=458.333435058594
+[12:09:22] [INFO] [Bullet] Distance to wall: 458.333435058594 (31.2087663940104% of viewport)
+[12:09:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(566.658, 702.4196), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:22] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=4
+[12:09:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(67.43407, 520.9206)
+[12:09:22] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:22] [INFO] [Bullet] Using shooter_position, distance=525,26715
+[12:09:22] [INFO] [Bullet] Distance to wall: 525,26715 (35,766407% of viewport)
+[12:09:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(229.51147, 437.94318)
+[12:09:22] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:22] [INFO] [Bullet] Using shooter_position, distance=494,4388
+[12:09:22] [INFO] [Bullet] Distance to wall: 494,4388 (33,667248% of viewport)
+[12:09:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:22] [INFO] [Bullet] Starting wall penetration at (229.51147, 437.94318)
+[12:09:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 14,208901
+[12:09:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:22] [INFO] [Bullet] Exiting penetration at (265.48746, 419.52484) after traveling 35,416668 pixels through wall
+[12:09:22] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[12:09:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(37.051598, 500.8551)
+[12:09:22] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:22] [INFO] [Bullet] Using shooter_position, distance=502,22372
+[12:09:22] [INFO] [Bullet] Distance to wall: 502,22372 (34,19734% of viewport)
+[12:09:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:22] [INFO] [Bullet] Starting wall penetration at (37.051598, 500.8551)
+[12:09:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41,26157
+[12:09:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:22] [INFO] [Bullet] Exiting penetration at (-6.5630417, 484.25568) after traveling 41,666668 pixels through wall
+[12:09:22] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(436.5032, 606.6149), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:23] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
+[12:09:23] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:09:23] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:09:23] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:09:23] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:09:23] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:09:23] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:09:23] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:09:23] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:09:23] [INFO] [PenultimateHit] Applying saturation to 8 enemies
+[12:09:23] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:09:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(410.5307, 607.9482), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:23] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
+[12:09:23] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:09:23] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:09:23] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:09:23] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:09:23] [INFO] [LastChance] Player died
+[12:09:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(377.075, 597.8019), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:23] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
+[12:09:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(348.9098, 573.3927), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:24] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
+[12:09:24] [ENEMY] [Enemy1] Hit taken, health: 1/2
+[12:09:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(321.6861, 546.169), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:24] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
+[12:09:24] [ENEMY] [Enemy1] Hit taken, health: 0/2
+[12:09:24] [ENEMY] [Enemy1] Enemy died (ricochet: false, penetration: false)
+[12:09:24] [INFO] [ScoreManager] Kill registered. Combo: 4 (points: 5000)
+[12:09:24] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 6)
+[12:09:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(294.4624, 518.9453), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[12:09:24] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=0, below_threshold=3
+[12:09:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(342.58347, 472.80634)
+[12:09:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:24] [INFO] [Bullet] Using shooter_position, distance=583,8743
+[12:09:24] [INFO] [Bullet] Distance to wall: 583,8743 (39,75708% of viewport)
+[12:09:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:24] [INFO] [Bullet] Starting wall penetration at (342.58347, 472.80634)
+[12:09:24] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:24] [INFO] [Bullet] Exiting penetration at (376.26822, 440.50906) after traveling 41,666668 pixels through wall
+[12:09:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:24] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:09:24] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:09:24] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:09:24] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:09:24] [INFO] [Player] Ready! Grenades: 1/3
+[12:09:24] [INFO] [ScoreManager] Level started with 10 enemies
+[12:09:24] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 7)
+[12:09:24] [ENEMY] [Enemy1] Registered as sound listener
+[12:09:24] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:09:24] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 8)
+[12:09:24] [ENEMY] [Enemy2] Registered as sound listener
+[12:09:24] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:09:24] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 9)
+[12:09:24] [ENEMY] [Enemy3] Registered as sound listener
+[12:09:24] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:09:24] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 10)
+[12:09:24] [ENEMY] [Enemy4] Registered as sound listener
+[12:09:24] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:09:24] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 11)
+[12:09:24] [ENEMY] [Enemy5] Registered as sound listener
+[12:09:24] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:09:24] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 12)
+[12:09:24] [ENEMY] [Enemy6] Registered as sound listener
+[12:09:24] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:09:24] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 13)
+[12:09:24] [ENEMY] [Enemy7] Registered as sound listener
+[12:09:24] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:09:24] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 14)
+[12:09:24] [ENEMY] [Enemy8] Registered as sound listener
+[12:09:24] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:09:24] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 15)
+[12:09:24] [ENEMY] [Enemy9] Registered as sound listener
+[12:09:24] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:09:24] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 16)
+[12:09:24] [ENEMY] [Enemy10] Registered as sound listener
+[12:09:24] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:09:24] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:09:24] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:09:24] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:09:24] [INFO] [LastChance] Found player: Player
+[12:09:24] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:09:24] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:09:24] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:09:24] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:09:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1143.47, 1519.994), source=ENEMY (Enemy10), range=1469, listeners=16
+[12:09:25] [INFO] [SoundPropagation] Cleaned up 6 invalid listeners
+[12:09:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1086.576, 1497.266), shooter_id=1287819103361, bullet_pos=(903.0088, 1398.748)
+[12:09:25] [INFO] [Bullet] Using shooter_position, distance=208.333465576172
+[12:09:25] [INFO] [Bullet] Distance to wall: 208.333465576172 (14.1858087625446% of viewport)
+[12:09:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:25] [INFO] [Bullet] Starting wall penetration at (903.0088, 1398.748)
+[12:09:25] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49.3146667480469
+[12:09:25] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:25] [INFO] [Bullet] Exiting penetration at (861.8896, 1376.68) after traveling 41.6666679382324 pixels through wall
+[12:09:25] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1110.707, 1502.097), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:09:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1054.223, 1478.07), shooter_id=1287819103361, bullet_pos=(909.0415, 1396.216)
+[12:09:25] [INFO] [Bullet] Using shooter_position, distance=166.66667175293
+[12:09:25] [INFO] [Bullet] Distance to wall: 166.66667175293 (11.3486401526422% of viewport)
+[12:09:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:25] [INFO] [Bullet] Starting wall penetration at (909.0415, 1396.216)
+[12:09:25] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:25] [INFO] [Bullet] Exiting penetration at (868.3906, 1373.297) after traveling 41.6666717529297 pixels through wall
+[12:09:25] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.474, 1483.265), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:09:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:25] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:09:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.829, 1456.815), shooter_id=1287819103361, bullet_pos=(64.99185, 866.7529)
+[12:09:25] [INFO] [Bullet] Using shooter_position, distance=1125
+[12:09:25] [INFO] [Bullet] Distance to wall: 1125 (76.6033186925873% of viewport)
+[12:09:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.829, 1456.815), shooter_id=1287819103361, bullet_pos=(306.9722, 709.9677)
+[12:09:25] [INFO] [Bullet] Using shooter_position, distance=1034.52001953125
+[12:09:25] [INFO] [Bullet] Distance to wall: 1034.52001953125 (70.4423704444569% of viewport)
+[12:09:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.829, 1456.815), shooter_id=1287819103361, bullet_pos=(520.1047, 832.477)
+[12:09:26] [INFO] [Bullet] Using shooter_position, distance=801.579345703125
+[12:09:26] [INFO] [Bullet] Distance to wall: 801.579345703125 (54.5810116233708% of viewport)
+[12:09:26] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:09:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(444.9292, 777.7401), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:26] [ENEMY] [Enemy1] Heard gunshot at (444.9292, 777.7401), source_type=0, intensity=0.01, distance=452
+[12:09:26] [ENEMY] [Enemy2] Heard gunshot at (444.9292, 777.7401), source_type=0, intensity=0.05, distance=232
+[12:09:26] [ENEMY] [Enemy4] Heard gunshot at (444.9292, 777.7401), source_type=0, intensity=0.02, distance=376
+[12:09:26] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.829, 1456.815), shooter_id=1287819103361, bullet_pos=(66.55141, 1021.023)
+[12:09:26] [INFO] [Bullet] Using shooter_position, distance=1050.89562988281
+[12:09:26] [INFO] [Bullet] Distance to wall: 1050.89562988281 (71.557415865387% of viewport)
+[12:09:26] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[12:09:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.7369, 754.5845), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:09:26] [INFO] [LastChance] Threat detected: @Area2D@5806
+[12:09:26] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(467.4117, 754.1093), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:26] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:26] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[12:09:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.7369, 754.5845), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:09:26] [INFO] [LastChance] Threat detected: @Area2D@5809
+[12:09:26] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(499.0584, 743.9987), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:26] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:26] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:09:26] [ENEMY] [Enemy3] Hit taken, health: 0/3
+[12:09:26] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:09:26] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:09:26] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:09:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.5692, 762.0892), shooter_id=1285822613483, bullet_pos=(33.24359, 759.0779)
+[12:09:26] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
+[12:09:26] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
+[12:09:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:26] [INFO] [Bullet] Starting wall penetration at (33.24359, 759.0779)
+[12:09:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(533.7708, 748.2686), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:26] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:09:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.4230613708496
+[12:09:26] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:26] [INFO] [Bullet] Exiting penetration at (-13.42246, 758.837) after traveling 41.6666679382324 pixels through wall
+[12:09:26] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:09:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
+[12:09:26] [INFO] [LastChance] Threat detected: Bullet
+[12:09:26] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(933.4663, 763.8674)
+[12:09:26] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:26] [INFO] [Bullet] Using shooter_position, distance=1206,1727
+[12:09:26] [INFO] [Bullet] Distance to wall: 1206,1727 (82,13052% of viewport)
+[12:09:26] [INFO] [Bullet] Distance-based penetration chance: 50,84773%
+[12:09:26] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:26] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:09:26] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:09:26] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:09:26] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:09:26] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:09:26] [ENEMY] [Enemy10] FLANKING started: target=(779.2773, 780.6796), side=left, pos=(1055.928, 1469.026)
+[12:09:26] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:09:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(587.496, 928.7672), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:09:27] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[12:09:27] [ENEMY] [Enemy4] Hit taken, health: 1/2
+[12:09:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(607.2391, 956.1125), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:09:27] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[12:09:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(636.2675, 970.086), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:27] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
+[12:09:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(920.5095, 909.8589)
+[12:09:27] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:27] [INFO] [Bullet] Using shooter_position, distance=1294,2878
+[12:09:27] [INFO] [Bullet] Distance to wall: 1294,2878 (88,13045% of viewport)
+[12:09:27] [INFO] [Bullet] Distance-based penetration chance: 43,847816%
+[12:09:27] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:27] [ENEMY] [Enemy4] Hit taken, health: 0/2
+[12:09:27] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[12:09:27] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[12:09:27] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[12:09:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.4697, 972.0006), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:27] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[12:09:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(923.84033, 858.2481)
+[12:09:27] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:27] [INFO] [Bullet] Using shooter_position, distance=1260,9801
+[12:09:27] [INFO] [Bullet] Distance to wall: 1260,9801 (85,86246% of viewport)
+[12:09:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(710.6941, 968.921), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:27] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[12:09:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(929.8319, 802.7778)
+[12:09:27] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:27] [INFO] [Bullet] Using shooter_position, distance=1228,4297
+[12:09:27] [INFO] [Bullet] Distance to wall: 1228,4297 (83,64604% of viewport)
+[12:09:27] [INFO] [Bullet] Distance-based penetration chance: 49,07962%
+[12:09:27] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:28] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:09:28] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[12:09:29] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[12:09:29] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[12:09:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(455.6492, 566.3896), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[12:09:29] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:09:29] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:09:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(458.248, 660.4352), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[12:09:29] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:09:29] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:09:29] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:09:29] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:09:29] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:09:29] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:09:29] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:09:29] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:09:29] [INFO] [PenultimateHit] Applying saturation to 8 enemies
+[12:09:29] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:09:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(455.6492, 566.3896), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[12:09:29] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:09:29] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:09:29] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:09:29] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:09:29] [INFO] [LastChance] Player died
+[12:09:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(424.1481, 660.4352), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[12:09:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(455.6492, 566.3896), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[12:09:29] [INFO] [LastChance] Threat detected: @Area2D@5823
+[12:09:29] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(454.3569, 418.623), source=ENEMY (Enemy1), range=1469, listeners=8
+[12:09:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[12:09:29] [INFO] [LastChance] Threat detected: Bullet
+[12:09:29] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:29] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:09:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(385.6481, 660.4352), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[12:09:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(446.0529, 467.4566), shooter_id=1285252187461, bullet_pos=(397.4776, 712.692)
+[12:09:29] [INFO] [Bullet] Using shooter_position, distance=249.999938964844
+[12:09:29] [INFO] [Bullet] Distance to wall: 249.999938964844 (17.0229555534678% of viewport)
+[12:09:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:29] [INFO] [Bullet] Starting wall penetration at (397.4776, 712.692)
+[12:09:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(454.3569, 418.623), source=ENEMY (Enemy1), range=1469, listeners=8
+[12:09:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[12:09:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47.3721199035645
+[12:09:29] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:29] [INFO] [Bullet] Exiting penetration at (388.4102, 758.4693) after traveling 41.6666679382324 pixels through wall
+[12:09:29] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(473.7159, 579.6318), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:09:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[12:09:29] [INFO] [LastChance] Threat detected: @Area2D@5825
+[12:09:29] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(347.1481, 660.4352), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[12:09:29] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:09:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.763, 618.7776), shooter_id=1285537401253, bullet_pos=(342.7162, 699.9633)
+[12:09:30] [INFO] [Bullet] Using shooter_position, distance=125.000015258789
+[12:09:30] [INFO] [Bullet] Distance to wall: 125.000015258789 (8.51148089373093% of viewport)
+[12:09:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(439.6488, 466.2169), shooter_id=1285252187461, bullet_pos=(354.6897, 701.3381)
+[12:09:30] [INFO] [Bullet] Using shooter_position, distance=250.000076293945
+[12:09:30] [INFO] [Bullet] Distance to wall: 250.000076293945 (17.0229649044589% of viewport)
+[12:09:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:30] [INFO] [Bullet] Starting wall penetration at (354.6897, 701.3381)
+[12:09:30] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.3300971984863
+[12:09:30] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:30] [INFO] [Bullet] Exiting penetration at (338.8307, 745.2274) after traveling 41.6666717529297 pixels through wall
+[12:09:30] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(309.4135, 658.5874), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[12:09:30] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:09:30] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:09:30] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:09:30] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:09:30] [INFO] [Player] Ready! Grenades: 1/3
+[12:09:30] [INFO] [ScoreManager] Level started with 10 enemies
+[12:09:30] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
+[12:09:30] [ENEMY] [Enemy1] Registered as sound listener
+[12:09:30] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:09:30] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
+[12:09:30] [ENEMY] [Enemy2] Registered as sound listener
+[12:09:30] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:09:30] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
+[12:09:30] [ENEMY] [Enemy3] Registered as sound listener
+[12:09:30] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:09:30] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
+[12:09:30] [ENEMY] [Enemy4] Registered as sound listener
+[12:09:30] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:09:30] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
+[12:09:30] [ENEMY] [Enemy5] Registered as sound listener
+[12:09:30] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:09:30] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
+[12:09:30] [ENEMY] [Enemy6] Registered as sound listener
+[12:09:30] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:09:30] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
+[12:09:30] [ENEMY] [Enemy7] Registered as sound listener
+[12:09:30] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:09:30] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
+[12:09:30] [ENEMY] [Enemy8] Registered as sound listener
+[12:09:30] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:09:30] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
+[12:09:30] [ENEMY] [Enemy9] Registered as sound listener
+[12:09:30] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:09:30] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
+[12:09:30] [ENEMY] [Enemy10] Registered as sound listener
+[12:09:30] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:09:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(449.7643, 1255.764), source=PLAYER (AssaultRifle), range=1469, listeners=18
+[12:09:30] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
+[12:09:30] [ENEMY] [Enemy4] Heard gunshot at (449.7643, 1255.764), source_type=0, intensity=0.01, distance=499
+[12:09:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:09:30] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:09:30] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:09:30] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:09:30] [INFO] [LastChance] Found player: Player
+[12:09:30] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:09:30] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:09:30] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:09:30] [ENEMY] [Enemy1] Player reloading state changed: false -> true
+[12:09:30] [ENEMY] [Enemy2] Player reloading state changed: false -> true
+[12:09:30] [ENEMY] [Enemy3] Player reloading state changed: false -> true
+[12:09:30] [ENEMY] [Enemy4] Player reloading state changed: false -> true
+[12:09:30] [ENEMY] [Enemy5] Player reloading state changed: false -> true
+[12:09:30] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[12:09:30] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[12:09:30] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[12:09:30] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[12:09:30] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[12:09:30] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(432.8445, 1215.025), source=PLAYER (Player), range=900, listeners=10
+[12:09:30] [ENEMY] [Enemy4] Heard player RELOAD at (432.8445, 1215.025), intensity=0.02, distance=408
+[12:09:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=4
+[12:09:30] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=875), can_see=false
+[12:09:30] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=666), can_see=false
+[12:09:30] [ENEMY] [Enemy3] Player vulnerable (reloading) but cannot attack: close=false (dist=536), can_see=false
+[12:09:30] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=408), can_see=false
+[12:09:30] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1534), can_see=false
+[12:09:30] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1699), can_see=false
+[12:09:30] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1218), can_see=false
+[12:09:30] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1486), can_see=false
+[12:09:30] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1700), can_see=false
+[12:09:30] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=837), can_see=false
+[12:09:30] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:09:30] [ENEMY] [Enemy10] Player vulnerable (reloading) - pursuing to attack (dist=867)
+[12:09:30] [ENEMY] [Enemy10] State: IDLE -> PURSUING
+[12:09:30] [ENEMY] [Enemy4] Pursuing vulnerability sound at (432.8445, 1215.025), distance=347
+[12:09:30] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:30] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:30] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:30] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:30] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:30] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(2474.7644, 1255.7643)
+[12:09:31] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:31] [INFO] [Bullet] Using shooter_position, distance=2775,1401
+[12:09:31] [INFO] [Bullet] Distance to wall: 2775,1401 (188,9644% of viewport)
+[12:09:31] [INFO] [Bullet] Distance-based penetration chance: 12,207121%
+[12:09:31] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:31] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=713), can_see=false
+[12:09:31] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=501), can_see=false
+[12:09:31] [ENEMY] [Enemy3] Player vulnerable (reloading) but cannot attack: close=false (dist=403), can_see=false
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1449), can_see=false
+[12:09:31] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1633), can_see=false
+[12:09:31] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1186), can_see=false
+[12:09:31] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1522), can_see=false
+[12:09:31] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1742), can_see=false
+[12:09:31] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=842), can_see=false
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=true (dist=199), can_see=false
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[12:09:31] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[12:09:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(515.4823, 775.9944), source=ENEMY (Enemy4), range=1469, listeners=10
+[12:09:31] [ENEMY] [Enemy1] Heard gunshot at (515.4823, 775.9944), source_type=1, intensity=0.01, distance=477
+[12:09:31] [ENEMY] [Enemy2] Heard gunshot at (515.4823, 775.9944), source_type=1, intensity=0.04, distance=254
+[12:09:31] [ENEMY] [Enemy3] Heard gunshot at (515.4823, 775.9944), source_type=1, intensity=0.07, distance=186
+[12:09:31] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[12:09:31] [INFO] [LastChance] Threat detected: Bullet
+[12:09:31] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:31] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:31] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=541), can_see=false
+[12:09:31] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy3] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1375), can_see=false
+[12:09:31] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1578), can_see=false
+[12:09:31] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1176), can_see=false
+[12:09:31] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1575), can_see=false
+[12:09:31] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1798), can_see=false
+[12:09:31] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=850), can_see=false
+[12:09:31] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:09:31] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:09:31] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:09:31] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:09:31] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:09:31] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:09:31] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:09:31] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:09:31] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:09:31] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:09:31] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy3] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy3] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy3] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy3] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy3] Player reloading - priority attack triggered
+[12:09:31] [ENEMY] [Enemy1] Player reloading state changed: true -> false
+[12:09:31] [ENEMY] [Enemy2] Player reloading state changed: true -> false
+[12:09:31] [ENEMY] [Enemy3] Player reloading state changed: true -> false
+[12:09:31] [ENEMY] [Enemy4] Player reloading state changed: true -> false
+[12:09:31] [ENEMY] [Enemy5] Player reloading state changed: true -> false
+[12:09:31] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[12:09:31] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[12:09:31] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[12:09:31] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[12:09:31] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[12:09:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(504.8157, 775.9944), source=ENEMY (Enemy4), range=1469, listeners=10
+[12:09:32] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[12:09:32] [INFO] [LastChance] Threat detected: Bullet
+[12:09:32] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:32] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:09:32] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:09:32] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:09:32] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:09:32] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:09:32] [INFO] [Player] Ready! Grenades: 1/3
+[12:09:32] [INFO] [ScoreManager] Level started with 10 enemies
+[12:09:32] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:09:32] [ENEMY] [Enemy1] Registered as sound listener
+[12:09:32] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:09:32] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:09:32] [ENEMY] [Enemy2] Registered as sound listener
+[12:09:32] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:09:32] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:09:32] [ENEMY] [Enemy3] Registered as sound listener
+[12:09:32] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:09:32] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:09:32] [ENEMY] [Enemy4] Registered as sound listener
+[12:09:32] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:09:32] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:09:32] [ENEMY] [Enemy5] Registered as sound listener
+[12:09:32] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:09:32] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:09:32] [ENEMY] [Enemy6] Registered as sound listener
+[12:09:32] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:09:32] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:09:32] [ENEMY] [Enemy7] Registered as sound listener
+[12:09:32] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:09:32] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:09:32] [ENEMY] [Enemy8] Registered as sound listener
+[12:09:32] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:09:32] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:09:32] [ENEMY] [Enemy9] Registered as sound listener
+[12:09:32] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:09:32] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:09:32] [ENEMY] [Enemy10] Registered as sound listener
+[12:09:32] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:09:32] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:09:32] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:09:32] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:09:32] [INFO] [LastChance] Found player: Player
+[12:09:32] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:09:32] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:09:32] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:09:32] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:09:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=20
+[12:09:32] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:09:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:09:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:09:33] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:33] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:09:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=1419990009570, bullet_pos=(64.61339, 850.4285)
+[12:09:33] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:09:33] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:09:33] [INFO] [Bullet] Distance-based penetration chance: 50.6761238618226%
+[12:09:33] [INFO] [Bullet] Starting wall penetration at (64.61339, 850.4285)
+[12:09:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8.19846057891846
+[12:09:33] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:33] [INFO] [Bullet] Exiting penetration at (25.04935, 825.6805) after traveling 41.6666717529297 pixels through wall
+[12:09:33] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1419990009570, bullet_pos=(60.65509, 787.2949)
+[12:09:33] [INFO] [Bullet] Using shooter_position, distance=1208.33386230469
+[12:09:33] [INFO] [Bullet] Distance to wall: 1208.33386230469 (82.2776746143741% of viewport)
+[12:09:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1419990009570, bullet_pos=(140.3266, 709.6482)
+[12:09:33] [INFO] [Bullet] Using shooter_position, distance=1191.29516601563
+[12:09:33] [INFO] [Bullet] Distance to wall: 1191.29516601563 (81.1174784526522% of viewport)
+[12:09:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=1419990009570, bullet_pos=(59.01187, 724.3607)
+[12:09:33] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
+[12:09:33] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
+[12:09:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=1419990009570, bullet_pos=(125.846, 688.5292)
+[12:09:33] [INFO] [Bullet] Using shooter_position, distance=1178.013671875
+[12:09:33] [INFO] [Bullet] Distance to wall: 1178.013671875 (80.2131170941028% of viewport)
+[12:09:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=1419990009570, bullet_pos=(50.19848, 630.5471)
+[12:09:33] [INFO] [Bullet] Using shooter_position, distance=1273.24572753906
+[12:09:33] [INFO] [Bullet] Distance to wall: 1273.24572753906 (86.6976428805778% of viewport)
+[12:09:33] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:09:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(454.6194, 800.0801), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:33] [ENEMY] [Enemy1] Heard gunshot at (454.6194, 800.0801), source_type=0, intensity=0.01, distance=476
+[12:09:33] [ENEMY] [Enemy2] Heard gunshot at (454.6194, 800.0801), source_type=0, intensity=0.04, distance=256
+[12:09:33] [ENEMY] [Enemy4] Heard gunshot at (454.6194, 800.0801), source_type=0, intensity=0.02, distance=360
+[12:09:33] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:33] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[12:09:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=1419990009570, bullet_pos=(254.7479, 468.6186)
+[12:09:33] [INFO] [Bullet] Using shooter_position, distance=1245.88159179688
+[12:09:33] [INFO] [Bullet] Distance to wall: 1245.88159179688 (84.8343685596836% of viewport)
+[12:09:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(471.2922, 773.2814), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:33] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5767, 752.2654), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:09:33] [INFO] [LastChance] Threat detected: @Area2D@6342
+[12:09:33] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:33] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(498.2798, 759.1469), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:33] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:33] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:09:33] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:09:33] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:09:33] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:09:33] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:09:33] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:09:33] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:09:33] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:09:33] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:09:33] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:09:33] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:09:34] [INFO] [LastChance] Threat detected: @Area2D@6335
+[12:09:34] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(910.2922, 674.3928)
+[12:09:34] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:34] [INFO] [Bullet] Using shooter_position, distance=1132,889
+[12:09:34] [INFO] [Bullet] Distance to wall: 1132,889 (77,140495% of viewport)
+[12:09:34] [INFO] [Bullet] Distance-based penetration chance: 56,669426%
+[12:09:34] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:34] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[12:09:34] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[12:09:34] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:09:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.6887, 761.8652), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:09:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=1419990009570, bullet_pos=(467.4073, 684.4253)
+[12:09:34] [INFO] [Bullet] Using shooter_position, distance=945.192810058594
+[12:09:34] [INFO] [Bullet] Distance to wall: 945.192810058594 (64.3599164932094% of viewport)
+[12:09:35] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:09:35] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:09:35] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:09:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(909.6202, 692.7349)
+[12:09:35] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:35] [INFO] [Bullet] Using shooter_position, distance=1143,368
+[12:09:35] [INFO] [Bullet] Distance to wall: 1143,368 (77,854034% of viewport)
+[12:09:35] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:09:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(695.2249, 772.8603), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:09:35] [INFO] [LastChance] Threat detected: @Area2D@6347
+[12:09:35] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:35] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:09:35] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:09:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:09:35] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:09:35] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:09:35] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:09:35] [INFO] [LastChance] Player died
+[12:09:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(399.193, 572.2686), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:09:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[12:09:35] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:09:35] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:09:35] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:09:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.0542, 773.5945), shooter_id=1417993522090, bullet_pos=(42.23319, 822.5134)
+[12:09:35] [INFO] [Bullet] Using shooter_position, distance=595.832580566406
+[12:09:35] [INFO] [Bullet] Distance to wall: 595.832580566406 (40.5713360502712% of viewport)
+[12:09:35] [INFO] [Bullet] Distance-based penetration chance: 99.3334412746836%
+[12:09:35] [INFO] [Bullet] Starting wall penetration at (42.23319, 822.5134)
+[12:09:35] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:09:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.3988189697266
+[12:09:35] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:35] [INFO] [Bullet] Exiting penetration at (-4.275944, 826.3447) after traveling 41.6666717529297 pixels through wall
+[12:09:35] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450.2736, 612.0322), shooter_id=1417708309675, bullet_pos=(719.9664, 807.9326)
+[12:09:35] [INFO] [Bullet] Using shooter_position, distance=333.333465576172
+[12:09:35] [INFO] [Bullet] Distance to wall: 333.333465576172 (22.6972886172765% of viewport)
+[12:09:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:35] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[12:09:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:09:36] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:09:36] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:09:36] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:09:36] [INFO] [Player] Ready! Grenades: 1/3
+[12:09:36] [INFO] [ScoreManager] Level started with 10 enemies
+[12:09:36] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:09:36] [ENEMY] [Enemy1] Registered as sound listener
+[12:09:36] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:09:36] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:09:36] [ENEMY] [Enemy2] Registered as sound listener
+[12:09:36] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:09:36] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:09:36] [ENEMY] [Enemy3] Registered as sound listener
+[12:09:36] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:09:36] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:09:36] [ENEMY] [Enemy4] Registered as sound listener
+[12:09:36] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:09:36] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:09:36] [ENEMY] [Enemy5] Registered as sound listener
+[12:09:36] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:09:36] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:09:36] [ENEMY] [Enemy6] Registered as sound listener
+[12:09:36] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:09:36] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:09:36] [ENEMY] [Enemy7] Registered as sound listener
+[12:09:36] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:09:36] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:09:36] [ENEMY] [Enemy8] Registered as sound listener
+[12:09:36] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:09:36] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:09:36] [ENEMY] [Enemy9] Registered as sound listener
+[12:09:36] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:09:36] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:09:36] [ENEMY] [Enemy10] Registered as sound listener
+[12:09:36] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:09:36] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:09:36] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:09:36] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:09:36] [INFO] [LastChance] Found player: Player
+[12:09:36] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:09:36] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:09:36] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:09:37] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:09:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1146.603, 1564.145), source=ENEMY (Enemy10), range=1469, listeners=20
+[12:09:38] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:09:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
+[12:09:38] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:09:38] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:09:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1095.51, 1525.029), shooter_id=1500470315816, bullet_pos=(143.4071, 715.0917)
+[12:09:38] [INFO] [Bullet] Using shooter_position, distance=1249.99951171875
+[12:09:38] [INFO] [Bullet] Distance to wall: 1249.99951171875 (85.1147652993511% of viewport)
+[12:09:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1095.51, 1525.029), shooter_id=1500470315816, bullet_pos=(52.71659, 779.5261)
+[12:09:38] [INFO] [Bullet] Using shooter_position, distance=1281.87097167969
+[12:09:38] [INFO] [Bullet] Distance to wall: 1281.87097167969 (87.2849516145384% of viewport)
+[12:09:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.4109, 773.8726), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:38] [ENEMY] [Enemy1] Heard gunshot at (457.4109, 773.8726), source_type=0, intensity=0.01, distance=452
+[12:09:38] [ENEMY] [Enemy2] Heard gunshot at (457.4109, 773.8726), source_type=0, intensity=0.05, distance=231
+[12:09:38] [ENEMY] [Enemy4] Heard gunshot at (457.4109, 773.8726), source_type=0, intensity=0.02, distance=365
+[12:09:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5962, 752.3535), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:09:38] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[12:09:38] [INFO] [LastChance] Threat detected: @Area2D@6606
+[12:09:38] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(476.0335, 752.5269), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5962, 752.3535), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:09:38] [INFO] [LastChance] Threat detected: @Area2D@6608
+[12:09:38] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1095.51, 1525.029), shooter_id=1500470315816, bullet_pos=(516.0239, 1008.433)
+[12:09:38] [INFO] [Bullet] Using shooter_position, distance=776.321960449219
+[12:09:38] [INFO] [Bullet] Distance to wall: 776.321960449219 (52.8611898171962% of viewport)
+[12:09:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1095.51, 1525.029), shooter_id=1500470315816, bullet_pos=(511.4206, 1010.385)
+[12:09:38] [INFO] [Bullet] Using shooter_position, distance=778.472412109375
+[12:09:38] [INFO] [Bullet] Distance to wall: 778.472412109375 (53.0076180250681% of viewport)
+[12:09:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(500.2463, 745.6013), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:39] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:09:39] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:09:39] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:09:39] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:09:39] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:09:39] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:09:39] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:09:39] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:09:39] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:09:39] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:09:39] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:09:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(911.2239, 707.63226)
+[12:09:39] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:39] [INFO] [Bullet] Using shooter_position, distance=1153,7211
+[12:09:39] [INFO] [Bullet] Distance to wall: 1153,7211 (78,55899% of viewport)
+[12:09:39] [INFO] [Bullet] Distance-based penetration chance: 55,014515%
+[12:09:39] [INFO] [Bullet] Starting wall penetration at (911.2239, 707.63226)
+[12:09:39] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:39] [INFO] [Bullet] Exiting penetration at (920.34216, 706.69165) after traveling 4,1666665 pixels through wall
+[12:09:39] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(634.1826, 760.4234), shooter_id=1498473825671, bullet_pos=(67.53561, 765.1465)
+[12:09:39] [INFO] [Bullet] Using shooter_position, distance=566.666625976563
+[12:09:39] [INFO] [Bullet] Distance to wall: 566.666625976563 (38.5853725707874% of viewport)
+[12:09:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:39] [INFO] [Bullet] Starting wall penetration at (67.53561, 765.1465)
+[12:09:39] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:39] [INFO] [Bullet] Exiting penetration at (58.36927, 765.223) after traveling 4.16666698455811 pixels through wall
+[12:09:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(696.76, 758.7432), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:09:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(525.1077, 754.1998), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:09:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(910.16156, 699.47894)
+[12:09:40] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:40] [INFO] [Bullet] Using shooter_position, distance=1147,8959
+[12:09:40] [INFO] [Bullet] Distance to wall: 1147,8959 (78,162346% of viewport)
+[12:09:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(704.3551, 765.0373), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:09:40] [INFO] [LastChance] Threat detected: @Area2D@6617
+[12:09:40] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:40] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[12:09:40] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:09:40] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:09:40] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:09:40] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:09:40] [INFO] [LastChance] Player died
+[12:09:40] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:09:40] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:09:40] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:09:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(645.5358, 771.2993), shooter_id=1498473825671, bullet_pos=(54.26329, 844.8755)
+[12:09:40] [INFO] [Bullet] Using shooter_position, distance=595.832702636719
+[12:09:40] [INFO] [Bullet] Distance to wall: 595.832702636719 (40.5713443622633% of viewport)
+[12:09:40] [INFO] [Bullet] Distance-based penetration chance: 99.3334315773595%
+[12:09:40] [INFO] [Bullet] Starting wall penetration at (54.26329, 844.8755)
+[12:09:40] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24.2316818237305
+[12:09:40] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:40] [INFO] [Bullet] Exiting penetration at (7.95377, 850.6381) after traveling 41.666675567627 pixels through wall
+[12:09:40] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1095.51, 1525.029), shooter_id=1500470315816, bullet_pos=(65.73805, 729.1334)
+[12:09:40] [INFO] [Bullet] Using shooter_position, distance=1301.49169921875
+[12:09:40] [INFO] [Bullet] Distance to wall: 1301.49169921875 (88.6209630320097% of viewport)
+[12:09:40] [INFO] [Bullet] Distance-based penetration chance: 43.275543129322%
+[12:09:40] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:41] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[12:09:41] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:09:41] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:09:41] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:09:41] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:09:41] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:09:41] [INFO] [Player] Ready! Grenades: 1/3
+[12:09:41] [INFO] [ScoreManager] Level started with 10 enemies
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:09:41] [ENEMY] [Enemy1] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:09:41] [ENEMY] [Enemy2] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:09:41] [ENEMY] [Enemy3] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:09:41] [ENEMY] [Enemy4] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:09:41] [ENEMY] [Enemy5] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:09:41] [ENEMY] [Enemy6] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:09:41] [ENEMY] [Enemy7] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:09:41] [ENEMY] [Enemy8] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:09:41] [ENEMY] [Enemy9] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:09:41] [ENEMY] [Enemy10] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:09:41] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:09:41] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:09:41] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:09:41] [INFO] [LastChance] Found player: Player
+[12:09:41] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:09:41] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:09:41] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:09:41] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:09:41] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:09:41] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:09:41] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:09:41] [INFO] [Player] Ready! Grenades: 1/3
+[12:09:41] [INFO] [ScoreManager] Level started with 10 enemies
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
+[12:09:41] [ENEMY] [Enemy1] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
+[12:09:41] [ENEMY] [Enemy2] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
+[12:09:41] [ENEMY] [Enemy3] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
+[12:09:41] [ENEMY] [Enemy4] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
+[12:09:41] [ENEMY] [Enemy5] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
+[12:09:41] [ENEMY] [Enemy6] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
+[12:09:41] [ENEMY] [Enemy7] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
+[12:09:41] [ENEMY] [Enemy8] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
+[12:09:41] [ENEMY] [Enemy9] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:09:41] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
+[12:09:41] [ENEMY] [Enemy10] Registered as sound listener
+[12:09:41] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:09:41] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:09:41] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:09:41] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:09:41] [INFO] [LastChance] Found player: Player
+[12:09:41] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:09:41] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:09:41] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:09:41] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:09:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=30
+[12:09:42] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
+[12:09:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:09:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:09:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:42] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:09:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=1584490613051, bullet_pos=(64.61339, 850.4285)
+[12:09:42] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:09:42] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:09:42] [INFO] [Bullet] Distance-based penetration chance: 50.6761238618226%
+[12:09:42] [INFO] [Bullet] Starting wall penetration at (64.61339, 850.4285)
+[12:09:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8.19846057891846
+[12:09:42] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:42] [INFO] [Bullet] Exiting penetration at (25.04935, 825.6805) after traveling 41.6666717529297 pixels through wall
+[12:09:42] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1584490613051, bullet_pos=(60.65509, 787.2949)
+[12:09:42] [INFO] [Bullet] Using shooter_position, distance=1208.33386230469
+[12:09:42] [INFO] [Bullet] Distance to wall: 1208.33386230469 (82.2776746143741% of viewport)
+[12:09:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1584490613051, bullet_pos=(225.2877, 709.5101)
+[12:09:42] [INFO] [Bullet] Using shooter_position, distance=1127.18920898438
+[12:09:42] [INFO] [Bullet] Distance to wall: 1127.18920898438 (76.7523859579338% of viewport)
+[12:09:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=1584490613051, bullet_pos=(59.01187, 724.3607)
+[12:09:42] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
+[12:09:42] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
+[12:09:43] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:09:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1584490613051, bullet_pos=(517.0211, 801.9934)
+[12:09:43] [INFO] [Bullet] Using shooter_position, distance=858.813659667969
+[12:09:43] [INFO] [Bullet] Distance to wall: 858.813659667969 (58.4782013058601% of viewport)
+[12:09:43] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[12:09:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=1584490613051, bullet_pos=(496.2836, 413.9453)
+[12:09:43] [INFO] [Bullet] Using shooter_position, distance=1160.19689941406
+[12:09:43] [INFO] [Bullet] Distance to wall: 1160.19689941406 (78.9999402950819% of viewport)
+[12:09:43] [INFO] [Bullet] Distance-based penetration chance: 54.5000696557378%
+[12:09:43] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(468.7599, 764.6313), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:43] [ENEMY] [Enemy1] Heard gunshot at (468.7599, 764.6313), source_type=0, intensity=0.01, distance=448
+[12:09:43] [ENEMY] [Enemy2] Heard gunshot at (468.7599, 764.6313), source_type=0, intensity=0.05, distance=225
+[12:09:43] [ENEMY] [Enemy4] Heard gunshot at (468.7599, 764.6313), source_type=0, intensity=0.02, distance=358
+[12:09:43] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5684, 752.2266), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:09:43] [INFO] [LastChance] Threat detected: @Area2D@7132
+[12:09:43] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:43] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:09:43] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[12:09:43] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:09:43] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:09:43] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:09:43] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:09:43] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:09:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(494.5206, 748.1166), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[12:09:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.8715, 746.4526), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:09:43] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:09:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(935.05347, 716.49255)
+[12:09:43] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:43] [INFO] [Bullet] Using shooter_position, distance=1178,0011
+[12:09:43] [INFO] [Bullet] Distance to wall: 1178,0011 (80,212265% of viewport)
+[12:09:43] [INFO] [Bullet] Distance-based penetration chance: 53,085697%
+[12:09:43] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(634.0096, 759.9497), shooter_id=1582494124451, bullet_pos=(50.67717, 760.9469)
+[12:09:43] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
+[12:09:43] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
+[12:09:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:43] [INFO] [Bullet] Starting wall penetration at (50.67717, 760.9469)
+[12:09:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.9894638061523
+[12:09:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:43] [INFO] [Bullet] Exiting penetration at (4.010574, 761.0267) after traveling 41.6666679382324 pixels through wall
+[12:09:43] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.0227, 761.0779), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:09:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(923.8212, 740.0999)
+[12:09:43] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:43] [INFO] [Bullet] Using shooter_position, distance=1183,7202
+[12:09:43] [INFO] [Bullet] Distance to wall: 1183,7202 (80,601685% of viewport)
+[12:09:43] [INFO] [Bullet] Distance-based penetration chance: 52,631367%
+[12:09:43] [INFO] [Bullet] Starting wall penetration at (923.8212, 740.0999)
+[12:09:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34,486404
+[12:09:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:43] [INFO] [Bullet] Exiting penetration at (970.48206, 739.35876) after traveling 41,666668 pixels through wall
+[12:09:43] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(579.2911, 787.6939), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
+[12:09:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(910.0901, 774.8786)
+[12:09:43] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:43] [INFO] [Bullet] Using shooter_position, distance=1195,2827
+[12:09:43] [INFO] [Bullet] Distance to wall: 1195,2827 (81,389% of viewport)
+[12:09:43] [INFO] [Bullet] Distance-based penetration chance: 51,712833%
+[12:09:43] [INFO] [Bullet] Starting wall penetration at (910.0901, 774.8786)
+[12:09:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20,737492
+[12:09:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:43] [INFO] [Bullet] Exiting penetration at (956.7221, 776.6759) after traveling 41,66667 pixels through wall
+[12:09:43] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:43] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:09:43] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:09:43] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:09:43] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:09:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(937.6084, 791.07166)
+[12:09:43] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:43] [INFO] [Bullet] Using shooter_position, distance=1226,7452
+[12:09:43] [INFO] [Bullet] Distance to wall: 1226,7452 (83,53134% of viewport)
+[12:09:43] [INFO] [Bullet] Distance-based penetration chance: 49,21344%
+[12:09:43] [INFO] [Bullet] Starting wall penetration at (937.6084, 791.07166)
+[12:09:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48,275093
+[12:09:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:43] [INFO] [Bullet] Exiting penetration at (984.27295, 791.51154) after traveling 41,666668 pixels through wall
+[12:09:43] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:44] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[12:09:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(610.4478, 934.2885), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:44] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:09:44] [ENEMY] [Enemy4] Hit taken, health: 2/3
+[12:09:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(627.6575, 961.8883), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:44] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:09:44] [ENEMY] [Enemy4] Hit taken, health: 1/3
+[12:09:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(732.9659, 914.0655), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:09:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
+[12:09:44] [INFO] [LastChance] Threat detected: Bullet
+[12:09:44] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:44] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[12:09:44] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:09:44] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:09:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(654.8435, 976.5555), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:44] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:09:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(918.5849, 898.6744)
+[12:09:44] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:44] [INFO] [Bullet] Using shooter_position, distance=1285,0735
+[12:09:44] [INFO] [Bullet] Distance to wall: 1285,0735 (87,50302% of viewport)
+[12:09:44] [INFO] [Bullet] Distance-based penetration chance: 44,57981%
+[12:09:44] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(691.2298, 978.8222), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:44] [ENEMY] [Enemy4] Heard gunshot at (691.2298, 978.8222), source_type=0, intensity=0.42, distance=77
+[12:09:44] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:09:44] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[12:09:44] [ENEMY] [Enemy4] Hit taken, health: 0/3
+[12:09:44] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[12:09:44] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[12:09:44] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[12:09:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(725.2651, 968.0436), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=7
+[12:09:44] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:09:44] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:09:44] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:09:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(753.5747, 943.442), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=7
+[12:09:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(932.97644, 729.0166)
+[12:09:44] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:44] [INFO] [Bullet] Using shooter_position, distance=1184,023
+[12:09:44] [INFO] [Bullet] Distance to wall: 1184,023 (80,62231% of viewport)
+[12:09:44] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:09:44] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:09:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(526.58264, 231.37105)
+[12:09:45] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:45] [INFO] [Bullet] Using shooter_position, distance=575,17114
+[12:09:45] [INFO] [Bullet] Distance to wall: 575,17114 (39,164463% of viewport)
+[12:09:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:45] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:09:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(646.60895, 52.115036)
+[12:09:45] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:45] [INFO] [Bullet] Using shooter_position, distance=648,7057
+[12:09:45] [INFO] [Bullet] Distance to wall: 648,7057 (44,171566% of viewport)
+[12:09:45] [INFO] [Bullet] Distance-based penetration chance: 95,13317%
+[12:09:45] [INFO] [Bullet] Starting wall penetration at (646.60895, 52.115036)
+[12:09:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10,896326
+[12:09:45] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:45] [INFO] [Bullet] Exiting penetration at (666.14, 22.945898) after traveling 30,104168 pixels through wall
+[12:09:45] [INFO] [Bullet] Damage multiplier after penetration: 0,225
+[12:09:45] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:09:45] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[12:09:45] [ENEMY] [Enemy10] FLANKING started: target=(861.7711, 696.882), side=left, pos=(953.4262, 1416.483)
+[12:09:45] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:09:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(536.6292, 634.5817), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
+[12:09:46] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[12:09:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(501.7009, 643.2045), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
+[12:09:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(33.934208, 483.17865)
+[12:09:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:46] [INFO] [Bullet] Using shooter_position, distance=484,3688
+[12:09:46] [INFO] [Bullet] Distance to wall: 484,3688 (32,981564% of viewport)
+[12:09:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(472.8007, 666.3807), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[12:09:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(30.593815, 535.18024)
+[12:09:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:46] [INFO] [Bullet] Using shooter_position, distance=536,05396
+[12:09:46] [INFO] [Bullet] Distance to wall: 536,05396 (36,5009% of viewport)
+[12:09:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:46] [INFO] [Bullet] Starting wall penetration at (30.593815, 535.18024)
+[12:09:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(245.68375, 433.496)
+[12:09:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:46] [INFO] [Bullet] Using shooter_position, distance=498,2763
+[12:09:46] [INFO] [Bullet] Distance to wall: 498,2763 (33,92855% of viewport)
+[12:09:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:46] [INFO] [Bullet] Starting wall penetration at (245.68375, 433.496)
+[12:09:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7,600734
+[12:09:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48,109352
+[12:09:46] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:46] [INFO] [Bullet] Exiting penetration at (-14.892389, 524.7503) after traveling 41,666668 pixels through wall
+[12:09:46] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(458.0684, 421.8279), source=ENEMY (Enemy1), range=1469, listeners=8
+[12:09:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[12:09:46] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:46] [INFO] [Bullet] Exiting penetration at (319.51212, 416.1737) after traveling 35,416664 pixels through wall
+[12:09:46] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[12:09:46] [ENEMY] [Enemy2] Hit taken, health: 1/2
+[12:09:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(445.2437, 677.9338), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:09:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[12:09:46] [INFO] [LastChance] Threat detected: @Area2D@7154
+[12:09:46] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:46] [ENEMY] [Enemy2] Hit taken, health: 0/2
+[12:09:46] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[12:09:46] [INFO] [ScoreManager] Kill registered. Combo: 3 (points: 3000)
+[12:09:46] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
+[12:09:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(458.0684, 421.8279), source=ENEMY (Enemy1), range=1469, listeners=7
+[12:09:46] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=3
+[12:09:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(408.5765, 677.9338), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
+[12:09:46] [INFO] [LastChance] Threat detected: @Area2D@7157
+[12:09:46] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(458.0684, 421.8279), source=ENEMY (Enemy1), range=1469, listeners=7
+[12:09:46] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=3
+[12:09:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(370.0765, 677.9338), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
+[12:09:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(53.524033, 629.55457)
+[12:09:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:46] [INFO] [Bullet] Using shooter_position, distance=631,82574
+[12:09:46] [INFO] [Bullet] Distance to wall: 631,82574 (43,022175% of viewport)
+[12:09:46] [INFO] [LastChance] Threat detected: @Area2D@7158
+[12:09:46] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:46] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:09:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(445.4948, 469.9593), shooter_id=1581923699422, bullet_pos=(371.9417, 708.8943)
+[12:09:46] [INFO] [Bullet] Using shooter_position, distance=250.000015258789
+[12:09:46] [INFO] [Bullet] Distance to wall: 250.000015258789 (17.0229607484629% of viewport)
+[12:09:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:46] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:09:46] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:09:46] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:09:46] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:09:46] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:09:46] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:09:46] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:09:46] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:09:46] [INFO] [PenultimateHit] Applying saturation to 8 enemies
+[12:09:46] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:09:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(331.5765, 677.9338), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
+[12:09:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(67.100105, 572.3906)
+[12:09:47] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:47] [INFO] [Bullet] Using shooter_position, distance=576,31024
+[12:09:47] [INFO] [Bullet] Distance to wall: 576,31024 (39,242027% of viewport)
+[12:09:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:47] [INFO] [Bullet] Starting wall penetration at (67.100105, 572.3906)
+[12:09:47] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:47] [INFO] [Bullet] Exiting penetration at (58.443638, 569.3751) after traveling 4,166667 pixels through wall
+[12:09:47] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(457.1633, 471.2196), shooter_id=1581923699422, bullet_pos=(436.1243, 1587.687)
+[12:09:47] [INFO] [Bullet] Using shooter_position, distance=1116.66577148438
+[12:09:47] [INFO] [Bullet] Distance to wall: 1116.66577148438 (76.0358257476635% of viewport)
+[12:09:47] [INFO] [Bullet] Distance-based penetration chance: 57.9582032943925%
+[12:09:47] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(66.18154, 567.3798)
+[12:09:48] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:48] [INFO] [Bullet] Using shooter_position, distance=571,2266
+[12:09:48] [INFO] [Bullet] Distance to wall: 571,2266 (38,895874% of viewport)
+[12:09:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:48] [INFO] [Bullet] Starting wall penetration at (66.18154, 567.3798)
+[12:09:48] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:48] [INFO] [Bullet] Exiting penetration at (57.719673, 563.8549) after traveling 4,1666665 pixels through wall
+[12:09:48] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(451.5521, 470.8744), shooter_id=1581923699422, bullet_pos=(310.8495, 1385.109)
+[12:09:48] [INFO] [Bullet] Using shooter_position, distance=924.998901367188
+[12:09:48] [INFO] [Bullet] Distance to wall: 924.998901367188 (62.9848761170878% of viewport)
+[12:09:48] [INFO] [Bullet] Distance-based penetration chance: 73.1843111967309%
+[12:09:48] [INFO] [Bullet] Starting wall penetration at (310.8495, 1385.109)
+[12:09:48] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:48] [INFO] [Bullet] Exiting penetration at (309.4552, 1394.169) after traveling 4.16666650772095 pixels through wall
+[12:09:48] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(268.4648, 662.9947), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
+[12:09:49] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[12:09:49] [ENEMY] [Enemy7] FLANKING started: target=(382.6452, 490.6785), side=left, pos=(1500.817, 885.9338)
+[12:09:49] [ENEMY] [Enemy7] State: PURSUING -> FLANKING
+[12:09:50] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
+[12:09:50] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:09:50] [ENEMY] [Enemy1] Hit taken, health: 3/4
+[12:09:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(239.1931, 635.4039), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=2
+[12:09:50] [ENEMY] [Enemy1] Hit taken, health: 2/4
+[12:09:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(211.9695, 608.1802), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=2
+[12:09:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(421.2304, 477.6806), source=ENEMY (Enemy1), range=1469, listeners=7
+[12:09:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=3
+[12:09:50] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[12:09:50] [INFO] [LastChance] Threat detected: @Area2D@7169
+[12:09:50] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:50] [ENEMY] [Enemy1] Hit taken, health: 1/4
+[12:09:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(416.5628, 471.1834), source=ENEMY (Enemy1), range=1469, listeners=7
+[12:09:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=3
+[12:09:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(184.7459, 580.9565), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=2
+[12:09:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(410.3394, 462.5204), source=ENEMY (Enemy1), range=1469, listeners=7
+[12:09:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=3
+[12:09:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(379.0854, 510.3419), shooter_id=1581923699422, bullet_pos=(56.80966, 702.0797)
+[12:09:50] [INFO] [Bullet] Using shooter_position, distance=375
+[12:09:50] [INFO] [Bullet] Distance to wall: 375 (25.5344395641958% of viewport)
+[12:09:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:50] [INFO] [Bullet] Starting wall penetration at (56.80966, 702.0797)
+[12:09:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17.7981204986572
+[12:09:50] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:50] [INFO] [Bullet] Exiting penetration at (16.70424, 725.9404) after traveling 41.6666641235352 pixels through wall
+[12:09:50] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(342.08505, 471.50104)
+[12:09:50] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:50] [INFO] [Bullet] Using shooter_position, distance=582,525
+[12:09:50] [INFO] [Bullet] Distance to wall: 582,525 (39,665203% of viewport)
+[12:09:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(404.1161, 453.8575), source=ENEMY (Enemy1), range=1469, listeners=7
+[12:09:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=3
+[12:09:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(157.5223, 553.7328), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=2
+[12:09:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(342.3965, 473.4277), shooter_id=1581923699422, bullet_pos=(342.3965, 473.4277)
+[12:09:50] [INFO] [Bullet] Using shooter_position, distance=0
+[12:09:50] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:09:50] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:09:50] [INFO] [Bullet] Starting wall penetration at (342.3965, 473.4277)
+[12:09:50] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:50] [INFO] [Bullet] Exiting penetration at (297.48, 486.088) after traveling 41.6666603088379 pixels through wall
+[12:09:50] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(366.0128, 510.749), shooter_id=1581923699422, bullet_pos=(58.01825, 724.6753)
+[12:09:50] [INFO] [Bullet] Using shooter_position, distance=375.000152587891
+[12:09:50] [INFO] [Bullet] Distance to wall: 375.000152587891 (25.5344499541858% of viewport)
+[12:09:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(497.09668, 567.0297)
+[12:09:50] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:50] [INFO] [Bullet] Using shooter_position, distance=754,07416
+[12:09:50] [INFO] [Bullet] Distance to wall: 754,07416 (51,346294% of viewport)
+[12:09:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(284.39438, 473.71106)
+[12:09:50] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:50] [INFO] [Bullet] Using shooter_position, distance=552,5236
+[12:09:50] [INFO] [Bullet] Distance to wall: 552,5236 (37,62235% of viewport)
+[12:09:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(397.8926, 445.1945), source=ENEMY (Enemy1), range=1469, listeners=7
+[12:09:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=3
+[12:09:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(333.8931, 456.1569), shooter_id=1581923699422, bullet_pos=(333.8931, 456.1569)
+[12:09:50] [INFO] [Bullet] Using shooter_position, distance=0
+[12:09:50] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:09:50] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:09:50] [INFO] [Bullet] Starting wall penetration at (333.8931, 456.1569)
+[12:09:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(354.6509, 495.3698), shooter_id=1581923699422, bullet_pos=(61.36426, 653.7809)
+[12:09:50] [INFO] [Bullet] Using shooter_position, distance=333.333343505859
+[12:09:50] [INFO] [Bullet] Distance to wall: 333.333343505859 (22.6972803052845% of viewport)
+[12:09:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:50] [INFO] [Bullet] Starting wall penetration at (61.36426, 653.7809)
+[12:09:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13.2928628921509
+[12:09:50] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:50] [INFO] [Bullet] Exiting penetration at (287.7696, 463.2563) after traveling 41.6666679382324 pixels through wall
+[12:09:50] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:50] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:50] [INFO] [Bullet] Exiting penetration at (20.30414, 675.9585) after traveling 41.6666641235352 pixels through wall
+[12:09:50] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:50] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[12:09:50] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:09:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(130.2987, 526.5092), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=2
+[12:09:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(322.19318, 693.3146)
+[12:09:50] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:50] [INFO] [Bullet] Using shooter_position, distance=764,5218
+[12:09:50] [INFO] [Bullet] Distance to wall: 764,5218 (52,057693% of viewport)
+[12:09:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(314.53595, 473.66248)
+[12:09:50] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:50] [INFO] [Bullet] Using shooter_position, distance=568,5851
+[12:09:50] [INFO] [Bullet] Distance to wall: 568,5851 (38,716007% of viewport)
+[12:09:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(103.0751, 499.2855), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:09:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=2
+[12:09:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(366.0128, 510.749), shooter_id=1581923699422, bullet_pos=(514.8597, 1005.496)
+[12:09:50] [INFO] [Bullet] Using shooter_position, distance=516.652587890625
+[12:09:50] [INFO] [Bullet] Distance to wall: 516.652587890625 (35.1798247498094% of viewport)
+[12:09:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(366.0128, 510.749), shooter_id=1581923699422, bullet_pos=(519.7353, 1006.604)
+[12:09:50] [INFO] [Bullet] Using shooter_position, distance=519.136962890625
+[12:09:50] [INFO] [Bullet] Distance to wall: 519.136962890625 (35.3489904119222% of viewport)
+[12:09:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:50] [INFO] [Bullet] Starting wall penetration at (519.7353, 1006.604)
+[12:09:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30.7306041717529
+[12:09:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(249.06659, 464.84012)
+[12:09:50] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:50] [INFO] [Bullet] Using shooter_position, distance=527,3618
+[12:09:50] [INFO] [Bullet] Distance to wall: 527,3618 (35,909035% of viewport)
+[12:09:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:50] [INFO] [Bullet] Starting wall penetration at (249.06659, 464.84012)
+[12:09:50] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:50] [INFO] [Bullet] Exiting penetration at (553.9659, 1014.387) after traveling 30.1041717529297 pixels through wall
+[12:09:50] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[12:09:50] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:50] [INFO] [Bullet] Exiting penetration at (294.48618, 454.12378) after traveling 41,666668 pixels through wall
+[12:09:50] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(59.872005, 524.2865)
+[12:09:50] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:50] [INFO] [Bullet] Using shooter_position, distance=527,69403
+[12:09:50] [INFO] [Bullet] Distance to wall: 527,69403 (35,93166% of viewport)
+[12:09:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(909.5923, 885.7228)
+[12:09:50] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:50] [INFO] [Bullet] Using shooter_position, distance=1269,5917
+[12:09:50] [INFO] [Bullet] Distance to wall: 1269,5917 (86,44884% of viewport)
+[12:09:50] [ENEMY] [Enemy10] State: FLANKING -> RETREATING
+[12:09:50] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
+[12:09:50] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[12:09:50] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:09:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(773.988, 1012.4829)
+[12:09:50] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:50] [INFO] [Bullet] Using shooter_position, distance=1274,4329
+[12:09:50] [INFO] [Bullet] Distance to wall: 1274,4329 (86,77848% of viewport)
+[12:09:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(233.09369, 422.81833)
+[12:09:50] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:50] [INFO] [Bullet] Using shooter_position, distance=482,81262
+[12:09:50] [INFO] [Bullet] Distance to wall: 482,81262 (32,8756% of viewport)
+[12:09:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(59.159767, 346.65814)
+[12:09:51] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:51] [INFO] [Bullet] Using shooter_position, distance=351,66992
+[12:09:51] [INFO] [Bullet] Distance to wall: 351,66992 (23,945852% of viewport)
+[12:09:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:51] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[12:09:51] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:09:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(495.50897, 705.5779)
+[12:09:51] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:51] [INFO] [Bullet] Using shooter_position, distance=862,18866
+[12:09:51] [INFO] [Bullet] Distance to wall: 862,18866 (58,70801% of viewport)
+[12:09:51] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:09:51] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:09:51] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:09:51] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:09:51] [INFO] [Player] Ready! Grenades: 1/3
+[12:09:51] [INFO] [ScoreManager] Level started with 10 enemies
+[12:09:51] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 8)
+[12:09:51] [ENEMY] [Enemy1] Registered as sound listener
+[12:09:51] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:09:51] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 9)
+[12:09:51] [ENEMY] [Enemy2] Registered as sound listener
+[12:09:51] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:09:51] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 10)
+[12:09:51] [ENEMY] [Enemy3] Registered as sound listener
+[12:09:51] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:09:51] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 11)
+[12:09:51] [ENEMY] [Enemy4] Registered as sound listener
+[12:09:51] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:09:51] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 12)
+[12:09:51] [ENEMY] [Enemy5] Registered as sound listener
+[12:09:51] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:09:51] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 13)
+[12:09:51] [ENEMY] [Enemy6] Registered as sound listener
+[12:09:51] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:09:51] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 14)
+[12:09:51] [ENEMY] [Enemy7] Registered as sound listener
+[12:09:51] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:09:51] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 15)
+[12:09:51] [ENEMY] [Enemy8] Registered as sound listener
+[12:09:51] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:09:51] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 16)
+[12:09:51] [ENEMY] [Enemy9] Registered as sound listener
+[12:09:51] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:09:51] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 17)
+[12:09:51] [ENEMY] [Enemy10] Registered as sound listener
+[12:09:51] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:09:51] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:09:51] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:09:51] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:09:51] [INFO] [LastChance] Found player: Player
+[12:09:51] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:09:51] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:09:51] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:09:51] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:09:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=17
+[12:09:51] [INFO] [SoundPropagation] Cleaned up 7 invalid listeners
+[12:09:51] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:09:51] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:09:52] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:52] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:09:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=1738270573802, bullet_pos=(64.61339, 850.4285)
+[12:09:52] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:09:52] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:09:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1738270573802, bullet_pos=(60.65509, 787.2949)
+[12:09:52] [INFO] [Bullet] Using shooter_position, distance=1208.33386230469
+[12:09:52] [INFO] [Bullet] Distance to wall: 1208.33386230469 (82.2776746143741% of viewport)
+[12:09:52] [INFO] [Bullet] Distance-based penetration chance: 50.6760462832302%
+[12:09:52] [INFO] [Bullet] Penetration failed (distance roll)
+[12:09:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=1738270573802, bullet_pos=(273.0406, 707.1634)
+[12:09:52] [INFO] [Bullet] Using shooter_position, distance=1131.63879394531
+[12:09:52] [INFO] [Bullet] Distance to wall: 1131.63879394531 (77.0553663799893% of viewport)
+[12:09:52] [INFO] [LastChance] Threat detected: Bullet
+[12:09:52] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=1738270573802, bullet_pos=(59.01187, 724.3607)
+[12:09:52] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
+[12:09:52] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
+[12:09:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=1738270573802, bullet_pos=(125.035, 687.0559)
+[12:09:52] [INFO] [Bullet] Using shooter_position, distance=1179.58117675781
+[12:09:52] [INFO] [Bullet] Distance to wall: 1179.58117675781 (80.3198513839608% of viewport)
+[12:09:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=1738270573802, bullet_pos=(497.3396, 915.3734)
+[12:09:52] [INFO] [Bullet] Using shooter_position, distance=825.659484863281
+[12:09:52] [INFO] [Bullet] Distance to wall: 825.659484863281 (56.2206725782573% of viewport)
+[12:09:52] [INFO] [Bullet] Distance-based penetration chance: 81.0758819920332%
+[12:09:52] [INFO] [Bullet] Starting wall penetration at (497.3396, 915.3734)
+[12:09:52] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:52] [INFO] [Bullet] Exiting penetration at (523.0676, 939.2559) after traveling 30.1041717529297 pixels through wall
+[12:09:52] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[12:09:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=1738270573802, bullet_pos=(65.30599, 660.8916)
+[12:09:52] [INFO] [Bullet] Using shooter_position, distance=1242.30627441406
+[12:09:52] [INFO] [Bullet] Distance to wall: 1242.30627441406 (84.5909186246589% of viewport)
+[12:09:52] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:09:52] [ENEMY] [Enemy2] Hit taken, health: 1/2
+[12:09:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(489.7048, 765.3682), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:52] [ENEMY] [Enemy1] Heard gunshot at (489.7048, 765.3682), source_type=0, intensity=0.01, distance=457
+[12:09:52] [ENEMY] [Enemy2] Heard gunshot at (489.7048, 765.3682), source_type=0, intensity=0.05, distance=233
+[12:09:52] [ENEMY] [Enemy4] Heard gunshot at (489.7048, 765.3682), source_type=0, intensity=0.02, distance=338
+[12:09:52] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:09:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5923, 752.3362), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:09:52] [INFO] [LastChance] Threat detected: @Area2D@7457
+[12:09:52] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:52] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[12:09:52] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:09:52] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:09:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(521.3931, 748.9232), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:53] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:09:53] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:09:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5923, 752.3362), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:09:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:09:53] [INFO] [LastChance] Threat detected: @Area2D@7459
+[12:09:53] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:53] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[12:09:53] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:09:53] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:09:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(392.5274, 547.1436), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:09:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:09:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(557.0414, 747.6636), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:09:53] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:09:53] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:09:53] [ENEMY] [Enemy3] Hit taken, health: 0/3
+[12:09:53] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:09:53] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:09:53] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:09:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(382.5639, 543.335), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:09:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[12:09:53] [INFO] [LastChance] Threat detected: @Area2D@7463
+[12:09:53] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(372.6004, 539.5264), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:09:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[12:09:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(588.4048, 761.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:53] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:09:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.4938, 582.0857), shooter_id=1735988873571, bullet_pos=(728.5967, 825.6866)
+[12:09:53] [INFO] [Bullet] Using shooter_position, distance=375.000091552734
+[12:09:53] [INFO] [Bullet] Distance to wall: 375.000091552734 (25.5344457981898% of viewport)
+[12:09:53] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:53] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:09:53] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:09:53] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:09:53] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:09:53] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:09:53] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:09:53] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:09:53] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:09:53] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:09:53] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:09:53] [INFO] [LastChance] Threat detected: @Area2D@7464
+[12:09:53] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:09:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:09:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(416.2639, 587.1805), shooter_id=1735988873571, bullet_pos=(499.7548, 685.7366)
+[12:09:53] [INFO] [Bullet] Using shooter_position, distance=129.166717529297
+[12:09:53] [INFO] [Bullet] Distance to wall: 129.166717529297 (8.79519931321968% of viewport)
+[12:09:53] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:53] [INFO] [Bullet] Starting wall penetration at (499.7548, 685.7366)
+[12:09:53] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:53] [INFO] [Bullet] Exiting penetration at (505.68, 692.7308) after traveling 4.16666698455811 pixels through wall
+[12:09:53] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(361.1424, 535.1465), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:09:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[12:09:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(394.7876, 590.7578), shooter_id=1735988873571, bullet_pos=(452.685, 687.2156)
+[12:09:53] [INFO] [Bullet] Using shooter_position, distance=112.499816894531
+[12:09:53] [INFO] [Bullet] Distance to wall: 112.499816894531 (7.66031940127067% of viewport)
+[12:09:53] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(908.71375, 780.26227)
+[12:09:53] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:09:53] [INFO] [Bullet] Using shooter_position, distance=1197,7354
+[12:09:53] [INFO] [Bullet] Distance to wall: 1197,7354 (81,55601% of viewport)
+[12:09:53] [INFO] [Bullet] Distance-based penetration chance: 51,517998%
+[12:09:53] [INFO] [Bullet] Starting wall penetration at (908.71375, 780.26227)
+[12:09:53] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:53] [INFO] [Bullet] Exiting penetration at (917.8654, 780.78595) after traveling 4,1666665 pixels through wall
+[12:09:53] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:09:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.4938, 582.0857), shooter_id=1735988873571, bullet_pos=(909.6541, 649.0928)
+[12:09:54] [INFO] [Bullet] Using shooter_position, distance=470.951538085938
+[12:09:54] [INFO] [Bullet] Distance to wall: 470.951538085938 (32.0679562317878% of viewport)
+[12:09:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:54] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:09:54] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:09:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(394.7876, 590.7578), shooter_id=1735988873571, bullet_pos=(496.1454, 596.4606)
+[12:09:54] [INFO] [Bullet] Using shooter_position, distance=101.518119812012
+[12:09:54] [INFO] [Bullet] Distance to wall: 101.518119812012 (6.9125554533616% of viewport)
+[12:09:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:54] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[12:09:54] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:09:54] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:09:55] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:09:55] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:09:55] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:09:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(394.7876, 590.7578), shooter_id=1735988873571, bullet_pos=(336.4594, 276.9221)
+[12:09:56] [INFO] [Bullet] Using shooter_position, distance=319.210052490234
+[12:09:56] [INFO] [Bullet] Distance to wall: 319.210052490234 (21.7355994495884% of viewport)
+[12:09:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:56] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
+[12:09:56] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:09:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.4938, 582.0857), shooter_id=1735988873571, bullet_pos=(517.7585, 312.2434)
+[12:09:56] [INFO] [Bullet] Using shooter_position, distance=279.875152587891
+[12:09:56] [INFO] [Bullet] Distance to wall: 279.875152587891 (19.0572137847348% of viewport)
+[12:09:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:09:56] [ENEMY] [Enemy1] Hit taken, health: 3/4
+[12:09:56] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
+[12:09:56] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[12:09:56] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:09:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.4938, 582.0857), shooter_id=1735988873571, bullet_pos=(878.7066, 60.60641)
+[12:09:56] [INFO] [Bullet] Using shooter_position, distance=679.228088378906
+[12:09:56] [INFO] [Bullet] Distance to wall: 679.228088378906 (46.2498895280411% of viewport)
+[12:09:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.4938, 582.0857), shooter_id=1735988873571, bullet_pos=(1075.128, 239.9837)
+[12:09:56] [INFO] [Bullet] Using shooter_position, distance=718.328430175781
+[12:09:56] [INFO] [Bullet] Distance to wall: 718.328430175781 (48.912303700179% of viewport)
+[12:09:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.4938, 582.0857), shooter_id=1735988873571, bullet_pos=(1027.339, 277.0237)
+[12:09:56] [INFO] [Bullet] Using shooter_position, distance=658.739379882813
+[12:09:56] [INFO] [Bullet] Distance to wall: 658.739379882813 (44.8547756911293% of viewport)
+[12:09:57] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[12:09:57] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:09:57] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:09:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.4938, 582.0857), shooter_id=1735988873571, bullet_pos=(1368.686, 481.4188)
+[12:09:57] [INFO] [Bullet] Using shooter_position, distance=930.652587890625
+[12:09:57] [INFO] [Bullet] Distance to wall: 930.652587890625 (63.3698460286815% of viewport)
+[12:09:57] [INFO] [Bullet] Distance-based penetration chance: 72.7351796332049%
+[12:09:57] [INFO] [Bullet] Starting wall penetration at (1368.686, 481.4188)
+[12:09:57] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:09:57] [INFO] [Bullet] Exiting penetration at (1386.458, 492.0605) after traveling 15.7145643234253 pixels through wall
+[12:09:57] [INFO] [Bullet] Damage multiplier after penetration: 0.0140625
+[12:09:57] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[12:09:57] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:09:57] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:09:57] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:09:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(807.1632, 962.0237), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[12:09:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:09:57] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:09:57] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:09:57] [INFO] [LastChance] Player died
+[12:09:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(832.5391, 934.0347), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[12:09:58] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
+[12:09:58] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
+[12:09:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(844.6727, 900.5605), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:58] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
+[12:09:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(845.3677, 862.3484), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:58] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
+[12:09:58] [ENEMY] [Enemy10] FLANKING started: target=(694.2407, 987.347), side=right, pos=(953.4262, 1416.483)
+[12:09:58] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:09:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(845.3677, 823.8484), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:09:58] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
+[12:09:58] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:09:58] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:09:58] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:09:58] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:09:58] [INFO] [Player] Ready! Grenades: 1/3
+[12:09:58] [INFO] [ScoreManager] Level started with 10 enemies
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
+[12:09:58] [ENEMY] [Enemy1] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
+[12:09:58] [ENEMY] [Enemy2] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
+[12:09:58] [ENEMY] [Enemy3] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
+[12:09:58] [ENEMY] [Enemy4] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
+[12:09:58] [ENEMY] [Enemy5] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
+[12:09:58] [ENEMY] [Enemy6] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
+[12:09:58] [ENEMY] [Enemy7] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
+[12:09:58] [ENEMY] [Enemy8] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
+[12:09:58] [ENEMY] [Enemy9] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
+[12:09:58] [ENEMY] [Enemy10] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1255.667), source=PLAYER (AssaultRifle), range=1469, listeners=19
+[12:09:58] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
+[12:09:58] [ENEMY] [Enemy4] Heard gunshot at (450, 1255.667), source_type=0, intensity=0.01, distance=499
+[12:09:58] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:09:58] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:09:58] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:09:58] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:09:58] [INFO] [LastChance] Found player: Player
+[12:09:58] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:09:58] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:09:58] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:09:58] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:09:58] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:09:58] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:09:58] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:09:58] [INFO] [Player] Ready! Grenades: 1/3
+[12:09:58] [INFO] [ScoreManager] Level started with 10 enemies
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:09:58] [ENEMY] [Enemy1] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:09:58] [ENEMY] [Enemy2] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:09:58] [ENEMY] [Enemy3] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:09:58] [ENEMY] [Enemy4] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:09:58] [ENEMY] [Enemy5] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:09:58] [ENEMY] [Enemy6] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:09:58] [ENEMY] [Enemy7] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:09:58] [ENEMY] [Enemy8] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:09:58] [ENEMY] [Enemy9] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:09:58] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:09:58] [ENEMY] [Enemy10] Registered as sound listener
+[12:09:58] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:09:58] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:09:58] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:09:58] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:09:58] [INFO] [LastChance] Found player: Player
+[12:09:58] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:09:58] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:09:58] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:09:59] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:09:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=20
+[12:09:59] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:09:59] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:09:59] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:09:59] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:09:59] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:09:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=1880776247512, bullet_pos=(64.61339, 850.4285)
+[12:09:59] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:09:59] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:09:59] [INFO] [Bullet] Distance-based penetration chance: 50.6761238618226%
+[12:09:59] [INFO] [Bullet] Starting wall penetration at (64.61339, 850.4285)
+[12:09:59] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8.19846057891846
+[12:09:59] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:09:59] [INFO] [Bullet] Exiting penetration at (25.04935, 825.6805) after traveling 41.6666717529297 pixels through wall
+[12:09:59] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:09:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1880776247512, bullet_pos=(60.65509, 787.2949)
+[12:09:59] [INFO] [Bullet] Using shooter_position, distance=1208.33386230469
+[12:09:59] [INFO] [Bullet] Distance to wall: 1208.33386230469 (82.2776746143741% of viewport)
+[12:09:59] [INFO] [Bullet] Distance-based penetration chance: 50.6760462832302%
+[12:09:59] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=1880776247512, bullet_pos=(59.01187, 724.3607)
+[12:10:00] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
+[12:10:00] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
+[12:10:00] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:10:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=1880776247512, bullet_pos=(308.4187, 465.9098)
+[12:10:00] [INFO] [Bullet] Using shooter_position, distance=1215.42053222656
+[12:10:00] [INFO] [Bullet] Distance to wall: 1215.42053222656 (82.7602190005915% of viewport)
+[12:10:00] [INFO] [Bullet] Distance-based penetration chance: 50.1130778326432%
+[12:10:00] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:00] [ENEMY] [Enemy2] Heard gunshot at (689.5667, 752.2189), source_type=1, intensity=0.02, distance=353
+[12:10:00] [ENEMY] [Enemy4] Heard gunshot at (689.5667, 752.2189), source_type=1, intensity=0.07, distance=184
+[12:10:00] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:00] [INFO] [LastChance] Threat detected: Bullet
+[12:10:00] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(459.3898, 734.0669), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:00] [ENEMY] [Enemy1] Heard gunshot at (459.3898, 734.0669), source_type=0, intensity=0.01, distance=416
+[12:10:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:00] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:00] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[12:10:00] [INFO] [LastChance] Threat detected: @Area2D@7990
+[12:10:00] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(480.8696, 736.0453), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:00] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[12:10:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:00] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(633.664, 756.9049), shooter_id=1878779759589, bullet_pos=(51.14336, 726.1235)
+[12:10:00] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
+[12:10:00] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
+[12:10:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:00] [INFO] [LastChance] Threat detected: @Area2D@7993
+[12:10:00] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(506.4516, 752.2018), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(633.664, 756.9049), shooter_id=1878779759589, bullet_pos=(125.9358, 713.6023)
+[12:10:00] [INFO] [Bullet] Using shooter_position, distance=509.571380615234
+[12:10:00] [INFO] [Bullet] Distance to wall: 509.571380615234 (34.697652325236% of viewport)
+[12:10:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:00] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:10:00] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:10:00] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:10:00] [ENEMY] [Enemy3] Hit taken, health: 0/3
+[12:10:00] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:10:00] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:10:00] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:10:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(533.6364, 779.1635), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:00] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:10:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(633.664, 756.9049), shooter_id=1878779759589, bullet_pos=(501.7106, 839.6581)
+[12:10:00] [INFO] [Bullet] Using shooter_position, distance=155.755569458008
+[12:10:00] [INFO] [Bullet] Distance to wall: 155.755569458008 (10.6056831336331% of viewport)
+[12:10:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:00] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:10:00] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:10:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(933.45026, 791.3679)
+[12:10:00] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:00] [INFO] [Bullet] Using shooter_position, distance=1223,7616
+[12:10:00] [INFO] [Bullet] Distance to wall: 1223,7616 (83,32818% of viewport)
+[12:10:00] [INFO] [Bullet] Distance-based penetration chance: 49,45046%
+[12:10:00] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:00] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:10:01] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[12:10:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(603.684, 959.149), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:10:01] [ENEMY] [Enemy4] Hit taken, health: 2/3
+[12:10:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(718.5417, 914.0654), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:10:01] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[12:10:01] [INFO] [LastChance] Threat detected: Bullet
+[12:10:01] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(620.3569, 985.9477), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:10:01] [ENEMY] [Enemy4] Hit taken, health: 1/3
+[12:10:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(718.5417, 914.0654), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:10:01] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[12:10:01] [INFO] [LastChance] Threat detected: Bullet
+[12:10:01] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:01] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[12:10:01] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:10:01] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:10:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(649.187, 989.9336), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:01] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:10:01] [ENEMY] [Enemy4] Hit taken, health: 0/3
+[12:10:01] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[12:10:01] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[12:10:01] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[12:10:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(687.6213, 989.9336), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:10:01] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=7
+[12:10:01] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:10:01] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:10:01] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:10:01] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:10:01] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:10:01] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:10:01] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:10:01] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:10:01] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:10:01] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:10:04] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
+[12:10:04] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:10:05] [ENEMY] [Enemy10] FLANKING started: target=(629.5632, 1062.025), side=right, pos=(953.4262, 1416.483)
+[12:10:05] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:10:07] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:10:07] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:10:07] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:10:07] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:10:07] [INFO] [Player] Ready! Grenades: 1/3
+[12:10:07] [INFO] [ScoreManager] Level started with 10 enemies
+[12:10:07] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
+[12:10:07] [ENEMY] [Enemy1] Registered as sound listener
+[12:10:07] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:10:07] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
+[12:10:07] [ENEMY] [Enemy2] Registered as sound listener
+[12:10:07] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:10:07] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
+[12:10:07] [ENEMY] [Enemy3] Registered as sound listener
+[12:10:07] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:10:07] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
+[12:10:07] [ENEMY] [Enemy4] Registered as sound listener
+[12:10:07] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:10:07] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
+[12:10:07] [ENEMY] [Enemy5] Registered as sound listener
+[12:10:07] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:10:07] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
+[12:10:07] [ENEMY] [Enemy6] Registered as sound listener
+[12:10:07] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:10:07] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
+[12:10:07] [ENEMY] [Enemy7] Registered as sound listener
+[12:10:07] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:10:07] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
+[12:10:07] [ENEMY] [Enemy8] Registered as sound listener
+[12:10:07] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:10:07] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
+[12:10:07] [ENEMY] [Enemy9] Registered as sound listener
+[12:10:07] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:10:07] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
+[12:10:07] [ENEMY] [Enemy10] Registered as sound listener
+[12:10:07] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:10:07] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:10:07] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:10:07] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:10:07] [INFO] [LastChance] Found player: Player
+[12:10:07] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:10:07] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:10:07] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:10:07] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:10:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=18
+[12:10:07] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
+[12:10:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:10:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:10:08] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:08] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:10:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=1958270209247, bullet_pos=(64.61339, 850.4285)
+[12:10:08] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:10:08] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:10:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1958270209247, bullet_pos=(60.65509, 787.2949)
+[12:10:08] [INFO] [Bullet] Using shooter_position, distance=1208.33386230469
+[12:10:08] [INFO] [Bullet] Distance to wall: 1208.33386230469 (82.2776746143741% of viewport)
+[12:10:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=1958270209247, bullet_pos=(397.3531, 715.2068)
+[12:10:08] [INFO] [Bullet] Using shooter_position, distance=1039.53552246094
+[12:10:08] [INFO] [Bullet] Distance to wall: 1039.53552246094 (70.783885261636% of viewport)
+[12:10:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1958270209247, bullet_pos=(226.4903, 712.1083)
+[12:10:08] [INFO] [Bullet] Using shooter_position, distance=1124.55126953125
+[12:10:08] [INFO] [Bullet] Distance to wall: 1124.55126953125 (76.5727638098276% of viewport)
+[12:10:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=1958270209247, bullet_pos=(59.01187, 724.3607)
+[12:10:08] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
+[12:10:08] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
+[12:10:08] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:10:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=1958270209247, bullet_pos=(695.9335, 840.4336)
+[12:10:08] [INFO] [Bullet] Using shooter_position, distance=725.243041992188
+[12:10:08] [INFO] [Bullet] Distance to wall: 725.243041992188 (49.383132333608% of viewport)
+[12:10:08] [INFO] [Bullet] Distance-based penetration chance: 89.0530122774573%
+[12:10:08] [INFO] [Bullet] Starting wall penetration at (695.9335, 840.4336)
+[12:10:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=1958270209247, bullet_pos=(929.5416, 841.0955)
+[12:10:08] [INFO] [Bullet] Using shooter_position, distance=669.40869140625
+[12:10:08] [INFO] [Bullet] Distance to wall: 669.40869140625 (45.5812687318941% of viewport)
+[12:10:08] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:10:08] [INFO] [Bullet] Exiting penetration at (729.7953, 849.6899) after traveling 30.1041660308838 pixels through wall
+[12:10:08] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[12:10:08] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:10:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=1958270209247, bullet_pos=(746.4279, 860.3167)
+[12:10:08] [INFO] [Bullet] Using shooter_position, distance=717.93310546875
+[12:10:08] [INFO] [Bullet] Distance to wall: 717.93310546875 (48.8853853139392% of viewport)
+[12:10:08] [INFO] [Bullet] Distance-based penetration chance: 89.6337171337376%
+[12:10:08] [INFO] [Bullet] Starting wall penetration at (746.4279, 860.3167)
+[12:10:08] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:10:08] [INFO] [Bullet] Exiting penetration at (716.0065, 863.51) after traveling 25.5885429382324 pixels through wall
+[12:10:08] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
+[12:10:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(484.5606, 742.9026), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:08] [ENEMY] [Enemy1] Heard gunshot at (484.5606, 742.9026), source_type=0, intensity=0.01, distance=434
+[12:10:08] [ENEMY] [Enemy2] Heard gunshot at (484.5606, 742.9026), source_type=0, intensity=0.06, distance=211
+[12:10:08] [ENEMY] [Enemy4] Heard gunshot at (484.5606, 742.9026), source_type=0, intensity=0.02, distance=352
+[12:10:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:08] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[12:10:08] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:10:08] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:10:08] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[12:10:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(510.3912, 739.1338), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:10:09] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[12:10:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(536.9552, 751.6818), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:10:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:10:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:10:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(564.1207, 777.6108), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:10:09] [INFO] [LastChance] Threat detected: @Area2D@8268
+[12:10:09] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(427.4637, 600.7781), shooter_id=1955988506942, bullet_pos=(501.2404, 701.6841)
+[12:10:09] [INFO] [Bullet] Using shooter_position, distance=125.00008392334
+[12:10:09] [INFO] [Bullet] Distance to wall: 125.00008392334 (8.51148556922646% of viewport)
+[12:10:09] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:09] [INFO] [Bullet] Starting wall penetration at (501.2404, 701.6841)
+[12:10:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(936.9554, 751.46844)
+[12:10:09] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:09] [INFO] [Bullet] Using shooter_position, distance=1201,0787
+[12:10:09] [INFO] [Bullet] Distance to wall: 1201,0787 (81,78366% of viewport)
+[12:10:09] [INFO] [Bullet] Distance-based penetration chance: 51,252396%
+[12:10:09] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:09] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48.7683525085449
+[12:10:09] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:09] [INFO] [Bullet] Exiting penetration at (528.7838, 739.3557) after traveling 41.6666679382324 pixels through wall
+[12:10:09] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:10:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:10:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:10:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(582.7214, 808.4063), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:09] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[12:10:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(922.4132, 772.187)
+[12:10:09] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:09] [INFO] [Bullet] Using shooter_position, distance=1202,9625
+[12:10:09] [INFO] [Bullet] Distance to wall: 1202,9625 (81,911934% of viewport)
+[12:10:09] [INFO] [Bullet] Distance-based penetration chance: 51,102745%
+[12:10:09] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(427.6403, 600.6823), shooter_id=1955988506942, bullet_pos=(501.7677, 701.3308)
+[12:10:09] [INFO] [Bullet] Using shooter_position, distance=124.999969482422
+[12:10:09] [INFO] [Bullet] Distance to wall: 124.999969482422 (8.51147777673392% of viewport)
+[12:10:09] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:09] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:10:09] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:10:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(930.0965, 720.46783)
+[12:10:09] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:09] [INFO] [Bullet] Using shooter_position, distance=1176,5005
+[12:10:09] [INFO] [Bullet] Distance to wall: 1176,5005 (80,110085% of viewport)
+[12:10:09] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:10:09] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[12:10:09] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:10:10] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:10:10] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[12:10:10] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:10:10] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[12:10:10] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[12:10:10] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:10:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(791.1459, 978.8472), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:10] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
+[12:10:10] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:10:10] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:10:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(819.4555, 954.2456), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:10] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
+[12:10:10] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:10:10] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:10:10] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:10:10] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:10:10] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:10:10] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:10:10] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:10:10] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:10:10] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:10:10] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:10:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(837.0272, 932.9241), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:11] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
+[12:10:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:10:11] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:10:11] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:10:11] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:10:11] [INFO] [LastChance] Player died
+[12:10:11] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:10:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(846.8335, 897.9359), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
+[12:10:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(846.9655, 859.4906), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
+[12:10:11] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[12:10:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(846.9655, 820.9906), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
+[12:10:11] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:10:11] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:10:11] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:10:11] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:10:11] [INFO] [Player] Ready! Grenades: 1/3
+[12:10:11] [INFO] [ScoreManager] Level started with 10 enemies
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:10:11] [ENEMY] [Enemy1] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:10:11] [ENEMY] [Enemy2] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:10:11] [ENEMY] [Enemy3] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:10:11] [ENEMY] [Enemy4] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:10:11] [ENEMY] [Enemy5] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:10:11] [ENEMY] [Enemy6] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:10:11] [ENEMY] [Enemy7] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:10:11] [ENEMY] [Enemy8] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:10:11] [ENEMY] [Enemy9] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:10:11] [ENEMY] [Enemy10] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:10:11] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:10:11] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:10:11] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:10:11] [INFO] [LastChance] Found player: Player
+[12:10:11] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:10:11] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:10:11] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:10:11] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:10:11] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:10:11] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:10:11] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:10:11] [INFO] [Player] Ready! Grenades: 1/3
+[12:10:11] [INFO] [ScoreManager] Level started with 10 enemies
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
+[12:10:11] [ENEMY] [Enemy1] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
+[12:10:11] [ENEMY] [Enemy2] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
+[12:10:11] [ENEMY] [Enemy3] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
+[12:10:11] [ENEMY] [Enemy4] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
+[12:10:11] [ENEMY] [Enemy5] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
+[12:10:11] [ENEMY] [Enemy6] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
+[12:10:11] [ENEMY] [Enemy7] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
+[12:10:11] [ENEMY] [Enemy8] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
+[12:10:11] [ENEMY] [Enemy9] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:10:11] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
+[12:10:11] [ENEMY] [Enemy10] Registered as sound listener
+[12:10:11] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:10:11] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:10:11] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:10:11] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:10:11] [INFO] [LastChance] Found player: Player
+[12:10:11] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:10:11] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:10:11] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:10:12] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:10:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=30
+[12:10:12] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
+[12:10:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:10:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:10:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:12] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:10:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=2072741153287, bullet_pos=(64.61339, 850.4285)
+[12:10:13] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:10:13] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:10:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=2072741153287, bullet_pos=(233.7709, 713.7097)
+[12:10:13] [INFO] [Bullet] Using shooter_position, distance=1155.86071777344
+[12:10:13] [INFO] [Bullet] Distance to wall: 1155.86071777344 (78.7046817136368% of viewport)
+[12:10:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=2072741153287, bullet_pos=(60.65509, 787.2949)
+[12:10:13] [INFO] [Bullet] Using shooter_position, distance=1208.33386230469
+[12:10:13] [INFO] [Bullet] Distance to wall: 1208.33386230469 (82.2776746143741% of viewport)
+[12:10:13] [INFO] [LastChance] Threat detected: Bullet
+[12:10:13] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=2072741153287, bullet_pos=(182.5537, 705.736)
+[12:10:13] [INFO] [Bullet] Using shooter_position, distance=1161.61828613281
+[12:10:13] [INFO] [Bullet] Distance to wall: 1161.61828613281 (79.0967251304613% of viewport)
+[12:10:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=2072741153287, bullet_pos=(59.01187, 724.3607)
+[12:10:13] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
+[12:10:13] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
+[12:10:13] [INFO] [Bullet] Distance-based penetration chance: 50.6761141644985%
+[12:10:13] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:13] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:10:13] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:10:13] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:10:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=2072741153287, bullet_pos=(516.0039, 919.9967)
+[12:10:13] [INFO] [Bullet] Using shooter_position, distance=771.562927246094
+[12:10:13] [INFO] [Bullet] Distance to wall: 771.562927246094 (52.537138495305% of viewport)
+[12:10:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(463.232, 771.7252), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:13] [ENEMY] [Enemy1] Heard gunshot at (463.232, 771.7252), source_type=0, intensity=0.01, distance=452
+[12:10:13] [ENEMY] [Enemy2] Heard gunshot at (463.232, 771.7252), source_type=0, intensity=0.05, distance=231
+[12:10:13] [ENEMY] [Enemy4] Heard gunshot at (463.232, 771.7252), source_type=0, intensity=0.02, distance=360
+[12:10:13] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5684, 752.2266), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:13] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[12:10:13] [INFO] [LastChance] Threat detected: @Area2D@8787
+[12:10:13] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(486.1424, 751.5154), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:13] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:13] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[12:10:13] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:10:13] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:10:13] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:10:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(514.5111, 745.6916), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:10:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(634.0096, 759.9497), shooter_id=2070744664300, bullet_pos=(50.67717, 760.9469)
+[12:10:13] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
+[12:10:13] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
+[12:10:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:13] [INFO] [Bullet] Starting wall penetration at (50.67717, 760.9469)
+[12:10:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.9894638061523
+[12:10:13] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:13] [INFO] [Bullet] Exiting penetration at (4.010574, 761.0267) after traveling 41.6666679382324 pixels through wall
+[12:10:13] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:10:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(542.3141, 756.1912), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:10:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(913.8674, 723.0029)
+[12:10:13] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:13] [INFO] [Bullet] Using shooter_position, distance=1165,2839
+[12:10:13] [INFO] [Bullet] Distance to wall: 1165,2839 (79,34633% of viewport)
+[12:10:13] [INFO] [Bullet] Distance-based penetration chance: 54,095955%
+[12:10:13] [INFO] [Bullet] Starting wall penetration at (913.8674, 723.0029)
+[12:10:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24,498365
+[12:10:13] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:13] [INFO] [Bullet] Exiting penetration at (960.4589, 720.3559) after traveling 41,666668 pixels through wall
+[12:10:13] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:10:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:10:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
+[12:10:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(569.615, 781.1874), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:10:14] [INFO] [LastChance] Threat detected: Bullet
+[12:10:14] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(427.8982, 600.5408), shooter_id=2070459452490, bullet_pos=(502.5375, 700.8102)
+[12:10:14] [INFO] [Bullet] Using shooter_position, distance=125.000015258789
+[12:10:14] [INFO] [Bullet] Distance to wall: 125.000015258789 (8.51148089373093% of viewport)
+[12:10:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:14] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:10:14] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:10:14] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:10:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(596.8387, 808.4111), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:10:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(927.9133, 776.1635)
+[12:10:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:14] [INFO] [Bullet] Using shooter_position, distance=1209,7327
+[12:10:14] [INFO] [Bullet] Distance to wall: 1209,7327 (82,372925% of viewport)
+[12:10:14] [INFO] [Bullet] Distance-based penetration chance: 50,564926%
+[12:10:14] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(705.1567, 806.5896)
+[12:10:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:14] [INFO] [Bullet] Using shooter_position, distance=1071,3695
+[12:10:14] [INFO] [Bullet] Distance to wall: 1071,3695 (72,95152% of viewport)
+[12:10:14] [INFO] [Bullet] Distance-based penetration chance: 61,556564%
+[12:10:14] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(623.1385, 836.0175), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:10:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(689.43427, 828.9952)
+[12:10:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:14] [INFO] [Bullet] Using shooter_position, distance=1078,2173
+[12:10:14] [INFO] [Bullet] Distance to wall: 1078,2173 (73,4178% of viewport)
+[12:10:14] [INFO] [Bullet] Distance-based penetration chance: 61,012566%
+[12:10:14] [INFO] [Bullet] Starting wall penetration at (689.43427, 828.9952)
+[12:10:14] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:10:14] [INFO] [Bullet] Exiting penetration at (735.8413, 824.0796) after traveling 41,666668 pixels through wall
+[12:10:14] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:10:14] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[12:10:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(642.0119, 954.6998), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:10:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(2481.6523, 661.12256)
+[12:10:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:14] [INFO] [Bullet] Using shooter_position, distance=2568,2058
+[12:10:14] [INFO] [Bullet] Distance to wall: 2568,2058 (174,87387% of viewport)
+[12:10:14] [INFO] [Bullet] Distance-based penetration chance: 15,0252285%
+[12:10:14] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:14] [ENEMY] [Enemy4] Hit taken, health: 2/3
+[12:10:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(658.1362, 984.6345), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:14] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:10:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(918.6602, 896.58746)
+[12:10:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:14] [INFO] [Bullet] Using shooter_position, distance=1283,6688
+[12:10:14] [INFO] [Bullet] Distance to wall: 1283,6688 (87,40737% of viewport)
+[12:10:14] [INFO] [Bullet] Distance-based penetration chance: 44,691402%
+[12:10:14] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(686.2546, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:14] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:10:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(930.90137, 864.34357)
+[12:10:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:14] [INFO] [Bullet] Using shooter_position, distance=1270,302
+[12:10:14] [INFO] [Bullet] Distance to wall: 1270,302 (86,4972% of viewport)
+[12:10:14] [INFO] [Bullet] Distance-based penetration chance: 45,75327%
+[12:10:14] [INFO] [Bullet] Starting wall penetration at (930.90137, 864.34357)
+[12:10:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(723.8204, 988.0859), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:10:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40,935432
+[12:10:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:14] [INFO] [Bullet] Exiting penetration at (972.4172, 843.0313) after traveling 41,666668 pixels through wall
+[12:10:14] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:10:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(927.87006, 874.9129)
+[12:10:15] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:15] [INFO] [Bullet] Using shooter_position, distance=1275,3099
+[12:10:15] [INFO] [Bullet] Distance to wall: 1275,3099 (86,8382% of viewport)
+[12:10:15] [INFO] [Bullet] Distance-based penetration chance: 45,355434%
+[12:10:15] [INFO] [Bullet] Starting wall penetration at (927.87006, 874.9129)
+[12:10:15] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37,36998
+[12:10:15] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:15] [INFO] [Bullet] Exiting penetration at (968.68, 852.2783) after traveling 41,66667 pixels through wall
+[12:10:15] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:10:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(756.0698, 972.9959), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[12:10:15] [ENEMY] [Enemy4] Hit taken, health: 1/3
+[12:10:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(782.6574, 946.0847), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:15] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
+[12:10:15] [ENEMY] [Enemy4] Hit taken, health: 0/3
+[12:10:15] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[12:10:15] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[12:10:15] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[12:10:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(796.9467, 913.5034), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:10:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=8
+[12:10:15] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:10:15] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:10:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(798.4512, 875.6266), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:10:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=8
+[12:10:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(917.9612, 675.2226)
+[12:10:15] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:15] [INFO] [Bullet] Using shooter_position, distance=1139,5518
+[12:10:15] [INFO] [Bullet] Distance to wall: 1139,5518 (77,59418% of viewport)
+[12:10:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(798.4512, 837.1266), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:10:15] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[12:10:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(924.51105, 640.7763)
+[12:10:15] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:15] [INFO] [Bullet] Using shooter_position, distance=1124,8622
+[12:10:15] [INFO] [Bullet] Distance to wall: 1124,8622 (76,59393% of viewport)
+[12:10:15] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:10:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(506.97406, 49.350098)
+[12:10:15] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:15] [INFO] [Bullet] Using shooter_position, distance=509,37033
+[12:10:15] [INFO] [Bullet] Distance to wall: 509,37033 (34,683964% of viewport)
+[12:10:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(668.1252, 51.647686)
+[12:10:15] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:15] [INFO] [Bullet] Using shooter_position, distance=670,1184
+[12:10:15] [INFO] [Bullet] Distance to wall: 670,1184 (45,629597% of viewport)
+[12:10:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(818.3839, 703.0104), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:10:15] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[12:10:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(845.028, 684.4589), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:10:16] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[12:10:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(522.36615, 320.74948)
+[12:10:16] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:16] [INFO] [Bullet] Using shooter_position, distance=612,98175
+[12:10:16] [INFO] [Bullet] Distance to wall: 612,98175 (41,739056% of viewport)
+[12:10:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(243.78908, 422.42224)
+[12:10:16] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:16] [INFO] [Bullet] Using shooter_position, distance=487,72293
+[12:10:16] [INFO] [Bullet] Distance to wall: 487,72293 (33,209953% of viewport)
+[12:10:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:16] [INFO] [Bullet] Starting wall penetration at (243.78908, 422.42224)
+[12:10:16] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:10:16] [INFO] [Bullet] Exiting penetration at (223.5533, 451.107) after traveling 30,104166 pixels through wall
+[12:10:16] [INFO] [Bullet] Damage multiplier after penetration: 0,225
+[12:10:16] [ENEMY] [Enemy2] Hit taken, health: 2/3
+[12:10:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(871.2364, 680.5773), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:10:16] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[12:10:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(499.74884, 588.6201)
+[12:10:16] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:16] [INFO] [Bullet] Using shooter_position, distance=772,1545
+[12:10:16] [INFO] [Bullet] Distance to wall: 772,1545 (52,57742% of viewport)
+[12:10:16] [INFO] [Bullet] Distance-based penetration chance: 85,32635%
+[12:10:16] [INFO] [Bullet] Starting wall penetration at (499.74884, 588.6201)
+[12:10:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46,92731
+[12:10:16] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:16] [INFO] [Bullet] Exiting penetration at (454.78226, 576.1388) after traveling 41,666668 pixels through wall
+[12:10:16] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:10:16] [ENEMY] [Enemy2] Hit taken, health: 1/3
+[12:10:16] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
+[12:10:16] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[12:10:16] [ENEMY] [Enemy10] FLANKING started: target=(714.6473, 792.7479), side=right, pos=(953.4262, 1416.483)
+[12:10:16] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:10:16] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[12:10:16] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:10:16] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[12:10:16] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:10:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(884.813, 685.6617), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:10:16] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[12:10:16] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:10:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(522.9532, 596.3058)
+[12:10:16] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:16] [INFO] [Bullet] Using shooter_position, distance=793,1334
+[12:10:16] [INFO] [Bullet] Distance to wall: 793,1334 (54,005917% of viewport)
+[12:10:16] [INFO] [Bullet] Distance-based penetration chance: 83,65977%
+[12:10:16] [INFO] [Bullet] Starting wall penetration at (522.9532, 596.3058)
+[12:10:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23,051125
+[12:10:16] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:16] [INFO] [Bullet] Exiting penetration at (477.5954, 585.3309) after traveling 41,666668 pixels through wall
+[12:10:16] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:10:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(882.5574, 690.5586), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:10:16] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[12:10:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(712.33435, 828.7511)
+[12:10:16] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:16] [INFO] [Bullet] Using shooter_position, distance=1092,8168
+[12:10:16] [INFO] [Bullet] Distance to wall: 1092,8168 (74,4119% of viewport)
+[12:10:16] [INFO] [Bullet] Distance-based penetration chance: 59,85278%
+[12:10:16] [INFO] [Bullet] Starting wall penetration at (712.33435, 828.7511)
+[12:10:16] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:10:16] [INFO] [Bullet] Exiting penetration at (723.0484, 857.40186) after traveling 25,588543 pixels through wall
+[12:10:16] [INFO] [Bullet] Damage multiplier after penetration: 0,1125
+[12:10:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(497.7217, 584.86285)
+[12:10:16] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:16] [INFO] [Bullet] Using shooter_position, distance=767,9788
+[12:10:16] [INFO] [Bullet] Distance to wall: 767,9788 (52,29309% of viewport)
+[12:10:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(864.1154, 693.2686), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:10:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[12:10:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(497.30115, 582.95935)
+[12:10:16] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:16] [INFO] [Bullet] Using shooter_position, distance=766,25714
+[12:10:16] [INFO] [Bullet] Distance to wall: 766,25714 (52,17586% of viewport)
+[12:10:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(830.0326, 693.8654), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:10:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[12:10:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(521.04553, 589.7988)
+[12:10:16] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:16] [INFO] [Bullet] Using shooter_position, distance=786,98865
+[12:10:16] [INFO] [Bullet] Distance to wall: 786,98865 (53,58751% of viewport)
+[12:10:16] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:10:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(791.5326, 693.8654), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:10:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[12:10:16] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:10:16] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:10:16] [ENEMY] [Enemy2] Hit taken, health: 0/3
+[12:10:16] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[12:10:16] [INFO] [ScoreManager] Kill registered. Combo: 3 (points: 3000)
+[12:10:16] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
+[12:10:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(753.0326, 693.8654), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:10:16] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=5
+[12:10:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(498.9781, 588.5977)
+[12:10:17] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:17] [INFO] [Bullet] Using shooter_position, distance=771,63873
+[12:10:17] [INFO] [Bullet] Distance to wall: 771,63873 (52,542297% of viewport)
+[12:10:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(715.8082, 696.945), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:10:17] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=5
+[12:10:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(65.99335, 421.4354)
+[12:10:17] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:17] [INFO] [Bullet] Using shooter_position, distance=426,57114
+[12:10:17] [INFO] [Bullet] Distance to wall: 426,57114 (29,046015% of viewport)
+[12:10:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(506.5444, 593.73126)
+[12:10:17] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:17] [INFO] [Bullet] Using shooter_position, distance=780,4512
+[12:10:17] [INFO] [Bullet] Distance to wall: 780,4512 (53,142357% of viewport)
+[12:10:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(275.0485, 695.5963)
+[12:10:17] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:17] [INFO] [Bullet] Using shooter_position, distance=748,0013
+[12:10:17] [INFO] [Bullet] Distance to wall: 748,0013 (50,93278% of viewport)
+[12:10:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(65.03958, 567.8063)
+[12:10:17] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:17] [INFO] [Bullet] Using shooter_position, distance=571,51917
+[12:10:17] [INFO] [Bullet] Distance to wall: 571,51917 (38,91579% of viewport)
+[12:10:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:17] [INFO] [Bullet] Starting wall penetration at (65.03958, 567.8063)
+[12:10:17] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:10:17] [INFO] [Bullet] Exiting penetration at (35.051025, 549.5583) after traveling 30,10417 pixels through wall
+[12:10:17] [INFO] [Bullet] Damage multiplier after penetration: 0,225
+[12:10:17] [ENEMY] [Enemy1] Player reloading state changed: false -> true
+[12:10:17] [ENEMY] [Enemy2] Player reloading state changed: false -> true
+[12:10:17] [ENEMY] [Enemy5] Player reloading state changed: false -> true
+[12:10:17] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[12:10:17] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[12:10:17] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[12:10:17] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[12:10:17] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[12:10:17] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(633.2327, 774.8151), source=PLAYER (Player), range=900, listeners=7
+[12:10:17] [ENEMY] [Enemy1] Heard player RELOAD at (633.2327, 774.8151), intensity=0.02, distance=394
+[12:10:17] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
+[12:10:17] [ENEMY] [Enemy10] Heard player RELOAD at (633.2327, 774.8151), intensity=0.01, distance=431
+[12:10:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=1
+[12:10:17] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=true (dist=394), can_see=false
+[12:10:17] [ENEMY] [Enemy1] Pursuing vulnerability sound at (633.2327, 774.8151), distance=394
+[12:10:17] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1148), can_see=false
+[12:10:17] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1356), can_see=false
+[12:10:17] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=871), can_see=false
+[12:10:17] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1435), can_see=false
+[12:10:17] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1659), can_see=false
+[12:10:17] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=431), can_see=false
+[12:10:17] [ENEMY] [Enemy1] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy1] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy1] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy1] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy1] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[12:10:17] [ENEMY] [Enemy1] Player reloading state changed: true -> false
+[12:10:17] [ENEMY] [Enemy2] Player reloading state changed: true -> false
+[12:10:17] [ENEMY] [Enemy5] Player reloading state changed: true -> false
+[12:10:17] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[12:10:17] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[12:10:17] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[12:10:17] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[12:10:17] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[12:10:17] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[12:10:17] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[12:10:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(630.6107, 989.975), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:10:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=4
+[12:10:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:10:18] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:10:18] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:10:18] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:10:18] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:10:18] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:10:18] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:10:18] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:10:18] [INFO] [PenultimateHit] Applying saturation to 8 enemies
+[12:10:18] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:10:18] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[12:10:18] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:10:18] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:10:18] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[12:10:18] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:10:18] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:10:19] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[12:10:19] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:10:19] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:10:19] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[12:10:19] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:10:19] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:10:19] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[12:10:19] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:10:19] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:10:19] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[12:10:19] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:10:19] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:10:19] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[12:10:19] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:10:19] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:10:19] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[12:10:19] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:10:19] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:10:19] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[12:10:19] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:10:20] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:10:20] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[12:10:20] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:10:20] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:10:20] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[12:10:20] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:10:20] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:10:20] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[12:10:20] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:10:20] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:10:20] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[12:10:20] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:10:20] [ENEMY] [Enemy1] Player reloading state changed: false -> true
+[12:10:20] [ENEMY] [Enemy2] Player reloading state changed: false -> true
+[12:10:20] [ENEMY] [Enemy5] Player reloading state changed: false -> true
+[12:10:20] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[12:10:20] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[12:10:20] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[12:10:20] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[12:10:20] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[12:10:20] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(655.5767, 971.5056), source=PLAYER (Player), range=900, listeners=7
+[12:10:20] [ENEMY] [Enemy1] Heard player RELOAD at (655.5767, 971.5056), intensity=0.02, distance=395
+[12:10:20] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
+[12:10:20] [ENEMY] [Enemy10] Heard player RELOAD at (655.5767, 971.5056), intensity=0.07, distance=185
+[12:10:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=1
+[12:10:20] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=true (dist=395), can_see=false
+[12:10:20] [ENEMY] [Enemy1] Pursuing vulnerability sound at (655.5767, 971.5056), distance=395
+[12:10:20] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1215), can_see=false
+[12:10:20] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1396), can_see=false
+[12:10:20] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=772), can_see=true
+[12:10:20] [ENEMY] [Enemy7] Player vulnerable (reloading) - pursuing to attack (dist=772)
+[12:10:20] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1333), can_see=false
+[12:10:20] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1556), can_see=false
+[12:10:20] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[12:10:20] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=true (dist=188), can_see=false
+[12:10:20] [ENEMY] [Enemy1] Player reloading state changed: true -> false
+[12:10:20] [ENEMY] [Enemy2] Player reloading state changed: true -> false
+[12:10:20] [ENEMY] [Enemy5] Player reloading state changed: true -> false
+[12:10:20] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[12:10:20] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[12:10:20] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[12:10:20] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[12:10:20] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[12:10:21] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
+[12:10:21] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:10:21] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:10:21] [ENEMY] [Enemy1] Pursuing vulnerability sound at (655.5767, 971.5056), distance=257
+[12:10:22] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
+[12:10:22] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[12:10:22] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:10:22] [ENEMY] [Enemy1] State: SUPPRESSED -> IN_COVER
+[12:10:22] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
+[12:10:22] [INFO] [ScoreManager] Combo ended at 3. Max combo: 3
+[12:10:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(891.8325, 851.6751), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:10:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=5
+[12:10:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(746.8468, 890.1352)
+[12:10:22] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:22] [INFO] [Bullet] Using shooter_position, distance=1161,947
+[12:10:22] [INFO] [Bullet] Distance to wall: 1161,947 (79,11911% of viewport)
+[12:10:22] [INFO] [Bullet] Distance-based penetration chance: 54,361046%
+[12:10:22] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(891.8325, 890.1751), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:10:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=5
+[12:10:22] [ENEMY] [Enemy1] Hit taken, health: 1/2
+[12:10:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(891.8325, 928.6751), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:10:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=5
+[12:10:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(891.5245, 967.0475), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:10:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=5
+[12:10:23] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
+[12:10:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(637.2546, 917.9767), source=ENEMY (Enemy1), range=1469, listeners=7
+[12:10:23] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=4
+[12:10:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(879.977, 987.4237), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:10:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=5
+[12:10:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(638.3586, 907.3674), source=ENEMY (Enemy1), range=1469, listeners=7
+[12:10:23] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=4
+[12:10:23] [INFO] [LastChance] Threat detected: @Area2D@8839
+[12:10:23] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:23] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(36.97644, 1005.85974)
+[12:10:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:23] [INFO] [Bullet] Using shooter_position, distance=1006,5391
+[12:10:23] [INFO] [Bullet] Distance to wall: 1006,5391 (68,5371% of viewport)
+[12:10:23] [INFO] [Bullet] Distance-based penetration chance: 66,70672%
+[12:10:23] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:23] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
+[12:10:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(856.4622, 989.9794), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:10:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=5
+[12:10:23] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
+[12:10:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(525.3582, 935.96173)
+[12:10:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:23] [INFO] [Bullet] Using shooter_position, distance=1073,3246
+[12:10:23] [INFO] [Bullet] Distance to wall: 1073,3246 (73,08465% of viewport)
+[12:10:23] [INFO] [Bullet] Distance-based penetration chance: 61,40125%
+[12:10:23] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:23] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:10:23] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:10:23] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:10:23] [INFO] [LastChance] Player died
+[12:10:23] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[12:10:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(33.64551, 939.12616)
+[12:10:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:23] [INFO] [Bullet] Using shooter_position, distance=939,72864
+[12:10:23] [INFO] [Bullet] Distance to wall: 939,72864 (63,98785% of viewport)
+[12:10:23] [INFO] [Bullet] Distance-based penetration chance: 72,014175%
+[12:10:23] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(819.4097, 989.9794), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:10:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=5
+[12:10:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(508.11288, 905.9813)
+[12:10:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:23] [INFO] [Bullet] Using shooter_position, distance=1038,74
+[12:10:23] [INFO] [Bullet] Distance to wall: 1038,74 (70,72972% of viewport)
+[12:10:23] [INFO] [Bullet] Distance-based penetration chance: 64,14867%
+[12:10:23] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(693.0341, 917.2806), shooter_id=2070174238648, bullet_pos=(1354.63, 999.348)
+[12:10:23] [INFO] [Bullet] Using shooter_position, distance=666.666381835938
+[12:10:23] [INFO] [Bullet] Distance to wall: 666.666381835938 (45.3945398305888% of viewport)
+[12:10:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(693.0341, 917.2806), shooter_id=2070174238648, bullet_pos=(1359.626, 999.1479)
+[12:10:23] [INFO] [Bullet] Using shooter_position, distance=671.600158691406
+[12:10:23] [INFO] [Bullet] Distance to wall: 671.600158691406 (45.7304897690934% of viewport)
+[12:10:23] [INFO] [Bullet] Distance-based penetration chance: 93.3144286027244%
+[12:10:23] [INFO] [Bullet] Starting wall penetration at (1359.626, 999.1479)
+[12:10:23] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:10:23] [INFO] [Bullet] Exiting penetration at (1400.01, 997.5302) after traveling 35.4166679382324 pixels through wall
+[12:10:23] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:10:23] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[12:10:23] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:10:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(780.9097, 989.9794), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:10:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=5
+[12:10:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(526.9795, 868.47955)
+[12:10:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:23] [INFO] [Bullet] Using shooter_position, distance=1015,8563
+[12:10:23] [INFO] [Bullet] Distance to wall: 1015,8563 (69,17153% of viewport)
+[12:10:23] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:10:23] [ENEMY] [Enemy1] Hit taken, health: 0/2
+[12:10:23] [ENEMY] [Enemy1] Enemy died (ricochet: false, penetration: false)
+[12:10:23] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:10:23] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 6)
+[12:10:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(742.4097, 989.9794), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[12:10:23] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=5
+[12:10:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(510.40143, 825.3492)
+[12:10:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:23] [INFO] [Bullet] Using shooter_position, distance=970,4179
+[12:10:23] [INFO] [Bullet] Distance to wall: 970,4179 (66,077545% of viewport)
+[12:10:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(465.95038, 700.8942)
+[12:10:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:23] [INFO] [Bullet] Using shooter_position, distance=841,64276
+[12:10:23] [INFO] [Bullet] Distance to wall: 841,64276 (57,309006% of viewport)
+[12:10:23] [INFO] [Bullet] Distance-based penetration chance: 79,80616%
+[12:10:23] [INFO] [Bullet] Starting wall penetration at (465.95038, 700.8942)
+[12:10:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28,825277
+[12:10:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:23] [INFO] [Bullet] Exiting penetration at (433.69678, 667.1676) after traveling 41,666668 pixels through wall
+[12:10:23] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:10:23] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:10:23] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:10:23] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:10:23] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:10:23] [INFO] [Player] Ready! Grenades: 1/3
+[12:10:23] [INFO] [ScoreManager] Level started with 10 enemies
+[12:10:23] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 7)
+[12:10:23] [ENEMY] [Enemy1] Registered as sound listener
+[12:10:23] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:10:23] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 8)
+[12:10:23] [ENEMY] [Enemy2] Registered as sound listener
+[12:10:23] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:10:23] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 9)
+[12:10:23] [ENEMY] [Enemy3] Registered as sound listener
+[12:10:23] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:10:23] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 10)
+[12:10:23] [ENEMY] [Enemy4] Registered as sound listener
+[12:10:23] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:10:23] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 11)
+[12:10:23] [ENEMY] [Enemy5] Registered as sound listener
+[12:10:23] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:10:23] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 12)
+[12:10:23] [ENEMY] [Enemy6] Registered as sound listener
+[12:10:23] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:10:23] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 13)
+[12:10:23] [ENEMY] [Enemy7] Registered as sound listener
+[12:10:23] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:10:23] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 14)
+[12:10:23] [ENEMY] [Enemy8] Registered as sound listener
+[12:10:23] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:10:23] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 15)
+[12:10:23] [ENEMY] [Enemy9] Registered as sound listener
+[12:10:23] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:10:23] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 16)
+[12:10:23] [ENEMY] [Enemy10] Registered as sound listener
+[12:10:23] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:10:23] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:10:23] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:10:23] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:10:23] [INFO] [LastChance] Found player: Player
+[12:10:23] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:10:23] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:10:23] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:10:24] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:10:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.402, 1518.323), source=ENEMY (Enemy10), range=1469, listeners=16
+[12:10:24] [INFO] [SoundPropagation] Cleaned up 6 invalid listeners
+[12:10:24] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.96, 1498.198), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:10:24] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.299, 1476.902), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:10:24] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:24] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:10:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1088.777, 1491.805), shooter_id=2272289360924, bullet_pos=(60.62088, 857.0089)
+[12:10:25] [INFO] [Bullet] Using shooter_position, distance=1208.33410644531
+[12:10:25] [INFO] [Bullet] Distance to wall: 1208.33410644531 (82.2776912383582% of viewport)
+[12:10:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1088.777, 1491.805), shooter_id=2272289360924, bullet_pos=(224.9763, 714.5534)
+[12:10:25] [INFO] [Bullet] Using shooter_position, distance=1162.01196289063
+[12:10:25] [INFO] [Bullet] Distance to wall: 1162.01196289063 (79.1235313048085% of viewport)
+[12:10:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.259, 1469.326), shooter_id=2272289360924, bullet_pos=(54.83759, 796.1134)
+[12:10:25] [INFO] [Bullet] Using shooter_position, distance=1208.33312988281
+[12:10:25] [INFO] [Bullet] Distance to wall: 1208.33312988281 (82.2776247424219% of viewport)
+[12:10:25] [INFO] [Bullet] Distance-based penetration chance: 50.6761044671745%
+[12:10:25] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:25] [INFO] [LastChance] Threat detected: Bullet
+[12:10:25] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1028.623, 1445.719), shooter_id=2272289360924, bullet_pos=(51.1955, 735.2937)
+[12:10:25] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
+[12:10:25] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
+[12:10:25] [INFO] [Bullet] Distance-based penetration chance: 50.6760753752023%
+[12:10:25] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:25] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:10:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1088.777, 1491.805), shooter_id=2272289360924, bullet_pos=(505.3882, 950.1556)
+[12:10:25] [INFO] [Bullet] Using shooter_position, distance=796.069519042969
+[12:10:25] [INFO] [Bullet] Distance to wall: 796.069519042969 (54.2058373944029% of viewport)
+[12:10:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(417.7967, 765.4554), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:25] [ENEMY] [Enemy1] Heard gunshot at (417.7967, 765.4554), source_type=0, intensity=0.01, distance=432
+[12:10:25] [ENEMY] [Enemy2] Heard gunshot at (417.7967, 765.4554), source_type=0, intensity=0.05, distance=216
+[12:10:25] [ENEMY] [Enemy4] Heard gunshot at (417.7967, 765.4554), source_type=0, intensity=0.02, distance=405
+[12:10:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.5612, 756.9775), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:25] [INFO] [LastChance] Threat detected: @Area2D@9111
+[12:10:25] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:25] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[12:10:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(440.9164, 740.9227), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.5612, 756.9775), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:25] [INFO] [LastChance] Threat detected: @Area2D@9113
+[12:10:25] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:25] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[12:10:25] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:10:25] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:10:25] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:10:25] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:10:25] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:10:25] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:10:25] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:10:25] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:10:25] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:10:25] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:10:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1088.777, 1491.805), shooter_id=2272289360924, bullet_pos=(55.11087, 1252.487)
+[12:10:25] [INFO] [Bullet] Using shooter_position, distance=1061.00830078125
+[12:10:25] [INFO] [Bullet] Distance to wall: 1061.00830078125 (72.2460062224237% of viewport)
+[12:10:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(468.6273, 734.0694), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(595.3824, 764.3154), shooter_id=2270292871389, bullet_pos=(66.23291, 760.0417)
+[12:10:26] [INFO] [Bullet] Using shooter_position, distance=529.166687011719
+[12:10:26] [INFO] [Bullet] Distance to wall: 529.166687011719 (36.0319327703638% of viewport)
+[12:10:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:26] [INFO] [Bullet] Starting wall penetration at (66.23291, 760.0417)
+[12:10:26] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:10:26] [INFO] [Bullet] Exiting penetration at (57.06654, 759.9677) after traveling 4.16666698455811 pixels through wall
+[12:10:26] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:10:26] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:10:26] [ENEMY] [Enemy3] Hit taken, health: 0/3
+[12:10:26] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:10:26] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:10:26] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:10:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1088.777, 1491.805), shooter_id=2272289360924, bullet_pos=(273.4188, 1384.52)
+[12:10:27] [INFO] [Bullet] Using shooter_position, distance=822.38623046875
+[12:10:27] [INFO] [Bullet] Distance to wall: 822.38623046875 (55.9977906675495% of viewport)
+[12:10:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(534.1197, 768.2497), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:10:28] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:10:28] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:10:28] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:10:28] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
+[12:10:28] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:10:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(561.7325, 795.8625), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
+[12:10:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(795.1399, 1019.7961)
+[12:10:28] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:28] [INFO] [Bullet] Using shooter_position, distance=1293,148
+[12:10:28] [INFO] [Bullet] Distance to wall: 1293,148 (88,052826% of viewport)
+[12:10:28] [INFO] [Bullet] Distance-based penetration chance: 43,93837%
+[12:10:28] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(588.9562, 823.0862), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:10:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(790.52155, 1014.799)
+[12:10:28] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:28] [INFO] [Bullet] Using shooter_position, distance=1286,3676
+[12:10:28] [INFO] [Bullet] Distance to wall: 1286,3676 (87,59113% of viewport)
+[12:10:28] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(921.74866, 888.5697)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=1280,3033
+[12:10:29] [INFO] [Bullet] Distance to wall: 1280,3033 (87,178215% of viewport)
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(785.1144, 1015.82196)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=1283,8608
+[12:10:29] [INFO] [Bullet] Distance to wall: 1283,8608 (87,42045% of viewport)
+[12:10:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(616.1799, 850.3099), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:10:29] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:10:29] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(738.4589, 997.90375)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=1241,424
+[12:10:29] [INFO] [Bullet] Distance to wall: 1241,424 (84,530846% of viewport)
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(934.81506, 912.16846)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=1306,1128
+[12:10:29] [INFO] [Bullet] Distance to wall: 1306,1128 (88,93562% of viewport)
+[12:10:29] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:10:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(643.4036, 877.5336), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1088.777, 1491.805), shooter_id=2272289360924, bullet_pos=(801.6622, 1018.211)
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=553.828735351563
+[12:10:29] [INFO] [Bullet] Distance to wall: 553.828735351563 (37.7112169913319% of viewport)
+[12:10:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(765.66547, 1025.1417)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=1279,5151
+[12:10:29] [INFO] [Bullet] Distance to wall: 1279,5151 (87,12454% of viewport)
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(925.0444, 827.1619)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=1240,9287
+[12:10:29] [INFO] [Bullet] Distance to wall: 1240,9287 (84,497116% of viewport)
+[12:10:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(665.4333, 904.7122), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(515.8911, 522.0291)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=733,9333
+[12:10:29] [INFO] [Bullet] Distance to wall: 733,9333 (49,97487% of viewport)
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(763.011, 1018.6358)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=1272,7155
+[12:10:29] [INFO] [Bullet] Distance to wall: 1272,7155 (86,66154% of viewport)
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(929.573, 832.5252)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=1247,8799
+[12:10:29] [INFO] [Bullet] Distance to wall: 1247,8799 (84,970436% of viewport)
+[12:10:29] [ENEMY] [Enemy4] Hit taken, health: 2/3
+[12:10:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(672.981, 935.4454), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(853.5871, 999.6132)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=1314,4723
+[12:10:29] [INFO] [Bullet] Distance to wall: 1314,4723 (89,50484% of viewport)
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(924.9857, 974.0606)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=1343,2769
+[12:10:29] [INFO] [Bullet] Distance to wall: 1343,2769 (91,466194% of viewport)
+[12:10:29] [INFO] [Bullet] Distance-based penetration chance: 39,956116%
+[12:10:29] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.191, 973.7384), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(524.36145, 454.97208)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=694,22943
+[12:10:29] [INFO] [Bullet] Distance to wall: 694,22943 (47,27136% of viewport)
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(918.53345, 849.51227)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=1251,1494
+[12:10:29] [INFO] [Bullet] Distance to wall: 1251,1494 (85,19307% of viewport)
+[12:10:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.4268, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(511.1272, 312.73553)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=599,2116
+[12:10:29] [INFO] [Bullet] Distance to wall: 599,2116 (40,801422% of viewport)
+[12:10:29] [INFO] [Bullet] Distance-based penetration chance: 99,06501%
+[12:10:29] [INFO] [Bullet] Starting wall penetration at (511.1272, 312.73553)
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(915.7532, 49.350296)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=917,082
+[12:10:29] [INFO] [Bullet] Distance to wall: 917,082 (62,4458% of viewport)
+[12:10:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17,359728
+[12:10:29] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:29] [INFO] [Bullet] Exiting penetration at (489.11404, 285.391) after traveling 30,10417 pixels through wall
+[12:10:29] [INFO] [Bullet] Damage multiplier after penetration: 0,225
+[12:10:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(680.9977, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(919.4239, 790.5269)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=1212,5482
+[12:10:29] [INFO] [Bullet] Distance to wall: 1212,5482 (82,56464% of viewport)
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1088.777, 1491.805), shooter_id=2272289360924, bullet_pos=(1245.373, 1377.163)
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=194.074737548828
+[12:10:29] [INFO] [Bullet] Distance to wall: 194.074737548828 (13.2149057516739% of viewport)
+[12:10:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(696.7036, 989.9338), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(920.7168, 783.0216)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=1208,6531
+[12:10:29] [INFO] [Bullet] Distance to wall: 1208,6531 (82,29941% of viewport)
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1004.93787, 64.635895)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=1007,01434
+[12:10:29] [INFO] [Bullet] Distance to wall: 1007,01434 (68,56946% of viewport)
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1083.1836, 283.3783)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=1119,6383
+[12:10:29] [INFO] [Bullet] Distance to wall: 1119,6383 (76,238235% of viewport)
+[12:10:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(717.5464, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:10:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(933.9044, 780.13965)
+[12:10:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:29] [INFO] [Bullet] Using shooter_position, distance=1216,8793
+[12:10:29] [INFO] [Bullet] Distance to wall: 1216,8793 (82,85955% of viewport)
+[12:10:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(516.3269, 336.58496)
+[12:10:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:30] [INFO] [Bullet] Using shooter_position, distance=616,34644
+[12:10:30] [INFO] [Bullet] Distance to wall: 616,34644 (41,968163% of viewport)
+[12:10:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(934.8779, 821.4347)
+[12:10:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:30] [INFO] [Bullet] Using shooter_position, distance=1244,4885
+[12:10:30] [INFO] [Bullet] Distance to wall: 1244,4885 (84,73951% of viewport)
+[12:10:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(742.2111, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[12:10:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(503.31604, 446.36053)
+[12:10:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:30] [INFO] [Bullet] Using shooter_position, distance=672,7293
+[12:10:30] [INFO] [Bullet] Distance to wall: 672,7293 (45,807377% of viewport)
+[12:10:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(931.3785, 959.0822)
+[12:10:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:30] [INFO] [Bullet] Using shooter_position, distance=1336,9011
+[12:10:30] [INFO] [Bullet] Distance to wall: 1336,9011 (91,03206% of viewport)
+[12:10:30] [INFO] [Bullet] Distance-based penetration chance: 40,46261%
+[12:10:30] [INFO] [Bullet] Starting wall penetration at (931.3785, 959.0822)
+[12:10:30] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41,98412
+[12:10:30] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:30] [INFO] [Bullet] Exiting penetration at (977.43665, 951.57056) after traveling 41,666668 pixels through wall
+[12:10:30] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:10:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(778.492, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[12:10:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(501.30338, 463.24704)
+[12:10:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:30] [INFO] [Bullet] Using shooter_position, distance=682,5708
+[12:10:30] [INFO] [Bullet] Distance to wall: 682,5708 (46,4775% of viewport)
+[12:10:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(761.4754, 64.479904)
+[12:10:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:30] [INFO] [Bullet] Using shooter_position, distance=764,20056
+[12:10:30] [INFO] [Bullet] Distance to wall: 764,20056 (52,03582% of viewport)
+[12:10:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1368.8855, 270.74066)
+[12:10:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:30] [INFO] [Bullet] Using shooter_position, distance=1395,4025
+[12:10:30] [INFO] [Bullet] Distance to wall: 1395,4025 (95,01552% of viewport)
+[12:10:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(928.61536, 604.3682)
+[12:10:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:30] [INFO] [Bullet] Using shooter_position, distance=1107,9655
+[12:10:30] [INFO] [Bullet] Distance to wall: 1107,9655 (75,443405% of viewport)
+[12:10:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(928.2354, 981.1625)
+[12:10:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:30] [INFO] [Bullet] Using shooter_position, distance=1350,6667
+[12:10:30] [INFO] [Bullet] Distance to wall: 1350,6667 (91,96938% of viewport)
+[12:10:30] [INFO] [Bullet] Distance-based penetration chance: 39,369053%
+[12:10:30] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:30] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:10:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(502.65714, 568.41516)
+[12:10:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:30] [INFO] [Bullet] Using shooter_position, distance=758,7885
+[12:10:30] [INFO] [Bullet] Distance to wall: 758,7885 (51,66731% of viewport)
+[12:10:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(816.1587, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[12:10:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(924.0393, 980.0393)
+[12:10:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:30] [INFO] [Bullet] Using shooter_position, distance=1346,9691
+[12:10:30] [INFO] [Bullet] Distance to wall: 1346,9691 (91,717606% of viewport)
+[12:10:30] [INFO] [Bullet] Distance-based penetration chance: 39,662804%
+[12:10:30] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(982.77246, 246.40002)
+[12:10:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:30] [INFO] [Bullet] Using shooter_position, distance=1013,19037
+[12:10:30] [INFO] [Bullet] Distance to wall: 1013,19037 (68,99% of viewport)
+[12:10:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(842.6587, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[12:10:30] [ENEMY] [Enemy4] Hit taken, health: 1/3
+[12:10:30] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[12:10:30] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:10:30] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:10:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(853.1587, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[12:10:30] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:10:30] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:10:30] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:10:30] [INFO] [LastChance] Player died
+[12:10:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(847.3254, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[12:10:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(825.1587, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[12:10:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(788.6587, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:30] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=6
+[12:10:30] [ENEMY] [Enemy10] FLANKING started: target=(651.6779, 1143.572), side=right, pos=(957.2564, 1420.892)
+[12:10:30] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:10:31] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:10:31] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[12:10:31] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:10:31] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:10:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:10:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:10:31] [INFO] [Player] Ready! Grenades: 1/3
+[12:10:31] [INFO] [ScoreManager] Level started with 10 enemies
+[12:10:31] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
+[12:10:31] [ENEMY] [Enemy1] Registered as sound listener
+[12:10:31] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:10:31] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
+[12:10:31] [ENEMY] [Enemy2] Registered as sound listener
+[12:10:31] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:10:31] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
+[12:10:31] [ENEMY] [Enemy3] Registered as sound listener
+[12:10:31] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:10:31] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
+[12:10:31] [ENEMY] [Enemy4] Registered as sound listener
+[12:10:31] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:10:31] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
+[12:10:31] [ENEMY] [Enemy5] Registered as sound listener
+[12:10:31] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:10:31] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
+[12:10:31] [ENEMY] [Enemy6] Registered as sound listener
+[12:10:31] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:10:31] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
+[12:10:31] [ENEMY] [Enemy7] Registered as sound listener
+[12:10:31] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:10:31] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
+[12:10:31] [ENEMY] [Enemy8] Registered as sound listener
+[12:10:31] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:10:31] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
+[12:10:31] [ENEMY] [Enemy9] Registered as sound listener
+[12:10:31] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:10:31] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
+[12:10:31] [ENEMY] [Enemy10] Registered as sound listener
+[12:10:31] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:10:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:10:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:10:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:10:31] [INFO] [LastChance] Found player: Player
+[12:10:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:10:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:10:31] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:10:31] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:10:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.46, 1518.223), source=ENEMY (Enemy10), range=1469, listeners=19
+[12:10:31] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
+[12:10:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.085, 1497.993), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:10:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.52, 1476.56), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:10:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:32] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:10:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1088.901, 1491.527), shooter_id=2420650280337, bullet_pos=(62.57323, 853.782)
+[12:10:32] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:10:32] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:10:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1088.901, 1491.527), shooter_id=2420650280337, bullet_pos=(227.0152, 711.4266)
+[12:10:32] [INFO] [Bullet] Using shooter_position, distance=1162.49926757813
+[12:10:32] [INFO] [Bullet] Distance to wall: 1162.49926757813 (79.1567127770546% of viewport)
+[12:10:32] [INFO] [Bullet] Distance-based penetration chance: 54.3171684267696%
+[12:10:32] [INFO] [Bullet] Starting wall penetration at (227.0152, 711.4266)
+[12:10:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 4.62396860122681
+[12:10:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.489, 1468.874), shooter_id=2420650280337, bullet_pos=(57.77457, 791.6436)
+[12:10:32] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
+[12:10:32] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
+[12:10:32] [INFO] [Bullet] Max penetration distance exceeded: 70.8333358764648 >= 48
+[12:10:32] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:32] [INFO] [Bullet] Exiting penetration at (284.3493, 661.7931) after traveling 70.8333358764648 pixels through wall
+[12:10:32] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:10:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.489, 1468.874), shooter_id=2420650280337, bullet_pos=(137.933, 714.4995)
+[12:10:32] [INFO] [Bullet] Using shooter_position, distance=1190.16979980469
+[12:10:32] [INFO] [Bullet] Distance to wall: 1190.16979980469 (81.0408501979834% of viewport)
+[12:10:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1028.993, 1445.066), shooter_id=2420650280337, bullet_pos=(55.21342, 729.6481)
+[12:10:32] [INFO] [Bullet] Using shooter_position, distance=1208.33312988281
+[12:10:32] [INFO] [Bullet] Distance to wall: 1208.33312988281 (82.2776247424219% of viewport)
+[12:10:32] [INFO] [Bullet] Distance-based penetration chance: 50.6761044671745%
+[12:10:32] [INFO] [Bullet] Starting wall penetration at (55.21342, 729.6481)
+[12:10:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17.8618545532227
+[12:10:32] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:32] [INFO] [Bullet] Exiting penetration at (17.6054, 702.0181) after traveling 41.6666717529297 pixels through wall
+[12:10:32] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:10:32] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:10:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(418.0297, 763.385), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:32] [ENEMY] [Enemy1] Heard gunshot at (418.0297, 763.385), source_type=0, intensity=0.01, distance=430
+[12:10:32] [ENEMY] [Enemy2] Heard gunshot at (418.0297, 763.385), source_type=0, intensity=0.05, distance=214
+[12:10:32] [ENEMY] [Enemy4] Heard gunshot at (418.0297, 763.385), source_type=0, intensity=0.02, distance=406
+[12:10:32] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.502, 755.5597), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:32] [INFO] [LastChance] Threat detected: @Area2D@9429
+[12:10:32] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(396.0237, 744.0452), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:32] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.502, 755.5597), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:32] [INFO] [LastChance] Threat detected: @Area2D@9431
+[12:10:32] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(938.87103, 697.43726)
+[12:10:33] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:33] [INFO] [Bullet] Using shooter_position, distance=1169,5715
+[12:10:33] [INFO] [Bullet] Distance to wall: 1169,5715 (79,638275% of viewport)
+[12:10:33] [INFO] [Bullet] Distance-based penetration chance: 53,755344%
+[12:10:33] [INFO] [Bullet] Starting wall penetration at (938.87103, 697.43726)
+[12:10:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49,560593
+[12:10:33] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[12:10:33] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:33] [INFO] [Bullet] Exiting penetration at (985.168, 691.57526) after traveling 41,666668 pixels through wall
+[12:10:33] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:10:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(985.168, 691.57526)
+[12:10:33] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:33] [INFO] [Bullet] Using shooter_position, distance=1203,6746
+[12:10:33] [INFO] [Bullet] Distance to wall: 1203,6746 (81,96042% of viewport)
+[12:10:33] [INFO] [Bullet] Distance-based penetration chance: 51,04618%
+[12:10:33] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(375.6397, 739.3867), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:33] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:33] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:10:33] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:10:33] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:10:33] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:10:33] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:10:33] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:10:33] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:10:33] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:10:33] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:10:33] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:10:33] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:10:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(612.3401, 762.8961), shooter_id=2418653791567, bullet_pos=(29.02063, 758.8749)
+[12:10:33] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
+[12:10:33] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
+[12:10:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:33] [INFO] [Bullet] Starting wall penetration at (29.02063, 758.8749)
+[12:10:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.1461038589478
+[12:10:33] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:33] [INFO] [Bullet] Exiting penetration at (19.85419, 758.8116) after traveling 4.16666650772095 pixels through wall
+[12:10:33] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:10:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(662.1519, 762.7601), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:33] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[12:10:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(655.6254, 770.1606), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:34] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:10:34] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:10:34] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:10:34] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:10:34] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:10:34] [INFO] [Player] Ready! Grenades: 1/3
+[12:10:34] [INFO] [ScoreManager] Level started with 10 enemies
+[12:10:34] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:10:34] [ENEMY] [Enemy1] Registered as sound listener
+[12:10:34] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:10:34] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:10:34] [ENEMY] [Enemy2] Registered as sound listener
+[12:10:34] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:10:34] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:10:34] [ENEMY] [Enemy3] Registered as sound listener
+[12:10:34] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:10:34] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:10:34] [ENEMY] [Enemy4] Registered as sound listener
+[12:10:34] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:10:34] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:10:34] [ENEMY] [Enemy5] Registered as sound listener
+[12:10:34] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:10:34] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:10:34] [ENEMY] [Enemy6] Registered as sound listener
+[12:10:34] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:10:34] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:10:34] [ENEMY] [Enemy7] Registered as sound listener
+[12:10:34] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:10:34] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:10:34] [ENEMY] [Enemy8] Registered as sound listener
+[12:10:34] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:10:34] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:10:34] [ENEMY] [Enemy9] Registered as sound listener
+[12:10:34] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:10:34] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:10:34] [ENEMY] [Enemy10] Registered as sound listener
+[12:10:34] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:10:34] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:10:34] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:10:34] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:10:34] [INFO] [LastChance] Found player: Player
+[12:10:34] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:10:34] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:10:34] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:10:34] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:10:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=20
+[12:10:35] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:10:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:10:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:10:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:35] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:10:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1089.039, 1491.225), shooter_id=2472894532793, bullet_pos=(64.61339, 850.4285)
+[12:10:35] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:10:35] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:10:35] [INFO] [Bullet] Distance-based penetration chance: 50.6761238618226%
+[12:10:35] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=2472894532793, bullet_pos=(60.65509, 787.2949)
+[12:10:35] [INFO] [Bullet] Using shooter_position, distance=1208.33386230469
+[12:10:35] [INFO] [Bullet] Distance to wall: 1208.33386230469 (82.2776746143741% of viewport)
+[12:10:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=2472894532793, bullet_pos=(179.7057, 701.6324)
+[12:10:35] [INFO] [Bullet] Using shooter_position, distance=1166.46118164063
+[12:10:35] [INFO] [Bullet] Distance to wall: 1166.46118164063 (79.4264867908878% of viewport)
+[12:10:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=2472894532793, bullet_pos=(59.01187, 724.3607)
+[12:10:35] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
+[12:10:35] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
+[12:10:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=2472894532793, bullet_pos=(123.9397, 685.1807)
+[12:10:35] [INFO] [Bullet] Using shooter_position, distance=1181.62512207031
+[12:10:35] [INFO] [Bullet] Distance to wall: 1181.62512207031 (80.4590273787729% of viewport)
+[12:10:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.362, 1444.423), shooter_id=2472894532793, bullet_pos=(67.10595, 653.2111)
+[12:10:35] [INFO] [Bullet] Using shooter_position, distance=1245.77380371094
+[12:10:35] [INFO] [Bullet] Distance to wall: 1245.77380371094 (84.8270290707073% of viewport)
+[12:10:35] [INFO] [Bullet] Distance-based penetration chance: 47.7017994175082%
+[12:10:35] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:35] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:10:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=2472894532793, bullet_pos=(510.7308, 919.6211)
+[12:10:35] [INFO] [Bullet] Using shooter_position, distance=775.546875
+[12:10:35] [INFO] [Bullet] Distance to wall: 775.546875 (52.8084128237024% of viewport)
+[12:10:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(418.5954, 785.073), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:35] [ENEMY] [Enemy1] Heard gunshot at (418.5954, 785.073), source_type=0, intensity=0.01, distance=451
+[12:10:35] [ENEMY] [Enemy2] Heard gunshot at (418.5954, 785.073), source_type=0, intensity=0.04, distance=236
+[12:10:35] [ENEMY] [Enemy4] Heard gunshot at (418.5954, 785.073), source_type=0, intensity=0.02, distance=398
+[12:10:35] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:36] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[12:10:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.4872, 755.4919), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(387.8159, 770.696), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:36] [INFO] [LastChance] Threat detected: @Area2D@9698
+[12:10:36] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:36] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:10:36] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:10:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.4872, 755.4919), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:36] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[12:10:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(361.4625, 769.0451), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:36] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:10:36] [INFO] [LastChance] Threat detected: @Area2D@9699
+[12:10:36] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.728, 1468.413), shooter_id=2472894532793, bullet_pos=(56.48889, 1215.961)
+[12:10:36] [INFO] [Bullet] Using shooter_position, distance=1033.54479980469
+[12:10:36] [INFO] [Bullet] Distance to wall: 1033.54479980469 (70.3759659400043% of viewport)
+[12:10:36] [INFO] [Bullet] Distance-based penetration chance: 64.561373069995%
+[12:10:36] [INFO] [Bullet] Starting wall penetration at (56.48889, 1215.961)
+[12:10:36] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:36] [INFO] [Bullet] Exiting penetration at (30.87008, 1232.675) after traveling 0 pixels through wall
+[12:10:36] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
+[12:10:36] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:10:36] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:10:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(663.8069, 761.9799), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(347.42, 777.1669), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.5663, 780.7302), shooter_id=2470898042857, bullet_pos=(496.9459, 817.0063)
+[12:10:36] [INFO] [Bullet] Using shooter_position, distance=125.000015258789
+[12:10:36] [INFO] [Bullet] Distance to wall: 125.000015258789 (8.51148089373093% of viewport)
+[12:10:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(657.5665, 770.6306), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:36] [INFO] [LastChance] Threat detected: @Area2D@9705
+[12:10:36] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(348.1949, 791.8594), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:36] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:10:36] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:10:36] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:10:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(913.2013, 745.5011)
+[12:10:36] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:36] [INFO] [Bullet] Using shooter_position, distance=1178,859
+[12:10:36] [INFO] [Bullet] Distance to wall: 1178,859 (80,270676% of viewport)
+[12:10:36] [INFO] [Bullet] Distance-based penetration chance: 53,017544%
+[12:10:36] [INFO] [Bullet] Starting wall penetration at (913.2013, 745.5011)
+[12:10:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(363.6197, 803.5353), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:10:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23,832285
+[12:10:36] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:36] [INFO] [Bullet] Exiting penetration at (959.79504, 742.8933) after traveling 41,666676 pixels through wall
+[12:10:36] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:10:36] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[12:10:36] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:10:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(608.6471, 779.4056), shooter_id=2470898042857, bullet_pos=(30.80323, 859.2443)
+[12:10:36] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
+[12:10:36] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
+[12:10:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(913.69305, 755.4845)
+[12:10:36] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:36] [INFO] [Bullet] Using shooter_position, distance=1185,5765
+[12:10:36] [INFO] [Bullet] Distance to wall: 1185,5765 (80,72809% of viewport)
+[12:10:36] [INFO] [Bullet] Distance-based penetration chance: 52,4839%
+[12:10:36] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:36] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[12:10:36] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:10:36] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:10:36] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[12:10:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(928.4986, 758.55756)
+[12:10:36] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:36] [INFO] [Bullet] Using shooter_position, distance=1198,966
+[12:10:36] [INFO] [Bullet] Distance to wall: 1198,966 (81,63979% of viewport)
+[12:10:36] [INFO] [Bullet] Distance-based penetration chance: 51,420242%
+[12:10:36] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(616.6621, 867.7759), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:36] [INFO] [LastChance] Threat detected: Bullet
+[12:10:36] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(570.9828, 839.6775), shooter_id=2470898042857, bullet_pos=(408.5645, 709.2051)
+[12:10:37] [INFO] [Bullet] Using shooter_position, distance=208.333358764648
+[12:10:37] [INFO] [Bullet] Distance to wall: 208.333358764648 (14.1858014895516% of viewport)
+[12:10:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:10:37] [INFO] [Bullet] Starting wall penetration at (408.5645, 709.2051)
+[12:10:37] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.8072280883789
+[12:10:37] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:37] [INFO] [Bullet] Exiting penetration at (372.1827, 679.9792) after traveling 41.6666679382324 pixels through wall
+[12:10:37] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:10:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(557.9116, 867.6032), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:37] [INFO] [LastChance] Threat detected: Bullet
+[12:10:37] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:10:37] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:10:37] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:10:37] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:10:37] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:10:37] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:10:37] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:10:37] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:10:37] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:10:37] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:10:37] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[12:10:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(540.3575, 734.0978), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:10:37] [ENEMY] [Enemy3] Hit taken, health: 1/4
+[12:10:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(569.3441, 739.4252), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:10:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:10:38] [ENEMY] [Enemy3] Hit taken, health: 0/4
+[12:10:38] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:10:38] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:10:38] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:10:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:10:39] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[12:10:39] [INFO] [LastChance] Threat detected: Bullet
+[12:10:39] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(598.4, 768.4156), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
+[12:10:40] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:10:40] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:10:40] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:10:40] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:10:40] [INFO] [LastChance] Player died
+[12:10:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:10:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[12:10:40] [INFO] [LastChance] Threat detected: Bullet
+[12:10:40] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:40] [ENEMY] [Enemy2] Hit taken, health: 1/2
+[12:10:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(621.7427, 796.7159), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:10:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:10:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[12:10:40] [INFO] [LastChance] Threat detected: @Area2D@9716
+[12:10:40] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:40] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:10:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(648.9664, 823.9396), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:10:40] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[12:10:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(399.5886, 557.9894), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:10:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[12:10:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(663.9349, 851.1633), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:10:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(399.0399, 568.642), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:10:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[12:10:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(663.9349, 877.8161), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:10:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:10:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(398.4913, 579.2946), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:10:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[12:10:40] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:10:40] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:10:40] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:10:40] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:10:40] [INFO] [Player] Ready! Grenades: 1/3
+[12:10:40] [INFO] [ScoreManager] Level started with 10 enemies
+[12:10:40] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
+[12:10:40] [ENEMY] [Enemy1] Registered as sound listener
+[12:10:40] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:10:40] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
+[12:10:40] [ENEMY] [Enemy2] Registered as sound listener
+[12:10:40] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:10:40] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
+[12:10:40] [ENEMY] [Enemy3] Registered as sound listener
+[12:10:40] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:10:40] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
+[12:10:40] [ENEMY] [Enemy4] Registered as sound listener
+[12:10:40] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:10:40] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
+[12:10:40] [ENEMY] [Enemy5] Registered as sound listener
+[12:10:40] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:10:40] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
+[12:10:40] [ENEMY] [Enemy6] Registered as sound listener
+[12:10:40] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:10:40] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
+[12:10:40] [ENEMY] [Enemy7] Registered as sound listener
+[12:10:40] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:10:40] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
+[12:10:40] [ENEMY] [Enemy8] Registered as sound listener
+[12:10:40] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:10:40] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
+[12:10:40] [ENEMY] [Enemy9] Registered as sound listener
+[12:10:40] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:10:40] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
+[12:10:40] [ENEMY] [Enemy10] Registered as sound listener
+[12:10:40] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:10:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.3333, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=19
+[12:10:40] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
+[12:10:40] [ENEMY] [Enemy4] Heard gunshot at (450.3333, 1256), source_type=0, intensity=0.01, distance=499
+[12:10:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:10:40] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:10:40] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:10:40] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:10:40] [INFO] [LastChance] Found player: Player
+[12:10:40] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:10:40] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:10:40] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:10:41] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:10:41] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:10:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.49, 1518.171), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:10:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(2475.3335, 1256)
+[12:10:41] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:10:41] [INFO] [Bullet] Using shooter_position, distance=2775,7544
+[12:10:41] [INFO] [Bullet] Distance to wall: 2775,7544 (189,00623% of viewport)
+[12:10:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.174, 1497.852), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:10:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.7, 1476.289), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:10:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:41] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:10:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1088.985, 1491.335), shooter_id=2571158686279, bullet_pos=(64.09964, 851.2745)
+[12:10:41] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
+[12:10:41] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
+[12:10:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.674, 1468.509), shooter_id=2571158686279, bullet_pos=(60.44024, 787.6282)
+[12:10:42] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
+[12:10:42] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
+[12:10:42] [INFO] [Bullet] Distance-based penetration chance: 50.6760947698504%
+[12:10:42] [INFO] [Bullet] Penetration failed (distance roll)
+[12:10:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1088.985, 1491.335), shooter_id=2571158686279, bullet_pos=(267.4449, 700.8831)
+[12:10:42] [INFO] [Bullet] Using shooter_position, distance=1140.06298828125
+[12:10:42] [INFO] [Bullet] Distance to wall: 1140.06298828125 (77.6289852630507% of viewport)
+[12:10:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.32, 1444.491), shooter_id=2571158686279, bullet_pos=(59.14255, 724.1966)
+[12:10:42] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
+[12:10:42] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
+[12:10:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1088.985, 1491.335), shooter_id=2571158686279, bullet_pos=(506.0846, 892.4882)
+[12:10:42] [INFO] [Bullet] Using shooter_position, distance=835.697998046875
+[12:10:42] [INFO] [Bullet] Distance to wall: 835.697998046875 (56.9042134001262% of viewport)
+[12:10:42] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:10:42] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:10:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.32, 1444.491), shooter_id=2571158686279, bullet_pos=(307.5883, 464.8216)
+[12:10:42] [INFO] [Bullet] Using shooter_position, distance=1216.81945800781
+[12:10:42] [INFO] [Bullet] Distance to wall: 1216.81945800781 (82.8554744294345% of viewport)
+[12:10:42] [ENEMY] [Enemy2] Hit taken, health: 2/3
+[12:10:43] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[12:10:43] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:10:46] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:10:47] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[12:10:47] [ENEMY] [Enemy4] FLANKING started: target=(699.9758, 1382.159), side=left, pos=(600.4022, 975.9338)
+[12:10:47] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
+[12:10:47] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[12:10:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(956.3019, 1478.088), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:10:47] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:10:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(911.3257, 1522.269), shooter_id=2571158686279, bullet_pos=(911.3257, 1522.269)
+[12:10:47] [INFO] [Bullet] Using shooter_position, distance=0
+[12:10:47] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:10:47] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:10:47] [INFO] [Bullet] Starting wall penetration at (911.3257, 1522.269)
+[12:10:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.4107513427734
+[12:10:47] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:10:47] [INFO] [Bullet] Exiting penetration at (875.3482, 1551.991) after traveling 41.6666679382324 pixels through wall
+[12:10:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:10:47] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:10:48] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:10:48] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:10:48] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:10:48] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:10:48] [INFO] [Player] Ready! Grenades: 1/3
+[12:10:48] [INFO] [ScoreManager] Level started with 10 enemies
+[12:10:48] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:10:48] [ENEMY] [Enemy1] Registered as sound listener
+[12:10:48] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:10:48] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:10:48] [ENEMY] [Enemy2] Registered as sound listener
+[12:10:48] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:10:48] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:10:48] [ENEMY] [Enemy3] Registered as sound listener
+[12:10:48] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:10:48] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:10:48] [ENEMY] [Enemy4] Registered as sound listener
+[12:10:48] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:10:48] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:10:48] [ENEMY] [Enemy5] Registered as sound listener
+[12:10:48] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:10:48] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:10:48] [ENEMY] [Enemy6] Registered as sound listener
+[12:10:48] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:10:48] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:10:48] [ENEMY] [Enemy7] Registered as sound listener
+[12:10:48] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:10:48] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:10:48] [ENEMY] [Enemy8] Registered as sound listener
+[12:10:48] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:10:48] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:10:48] [ENEMY] [Enemy9] Registered as sound listener
+[12:10:48] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:10:48] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:10:48] [ENEMY] [Enemy10] Registered as sound listener
+[12:10:48] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:10:48] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:10:48] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:10:48] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:10:48] [INFO] [LastChance] Found player: Player
+[12:10:48] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:10:48] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:10:48] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:10:48] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:10:49] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:10:49] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:10:50] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[12:10:50] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[12:10:50] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:10:50] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:10:50] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:10:50] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[12:10:50] [ENEMY] [Enemy10] FLANKING started: target=(897.6669, 709.2762), side=left, pos=(1061.809, 1459.636)
+[12:10:50] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:10:50] [ENEMY] [Enemy4] State: IDLE -> COMBAT
+[12:10:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
+[12:10:51] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:10:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:51] [INFO] [LastChance] Threat detected: Bullet
+[12:10:51] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:51] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:10:51] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:10:51] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:10:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:51] [INFO] [LastChance] Threat detected: Bullet
+[12:10:51] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:51] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:10:51] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:10:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:51] [INFO] [LastChance] Threat detected: Bullet
+[12:10:51] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:51] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:10:51] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:10:51] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:10:51] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:10:51] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:10:51] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:10:51] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:10:51] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:10:51] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:10:51] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:10:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:51] [INFO] [LastChance] Threat detected: Bullet
+[12:10:51] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:52] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:10:52] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:10:52] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:10:52] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:10:52] [INFO] [LastChance] Player died
+[12:10:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:52] [INFO] [LastChance] Threat detected: Bullet
+[12:10:52] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:52] [INFO] [LastChance] Threat detected: Bullet
+[12:10:52] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:52] [INFO] [LastChance] Threat detected: Bullet
+[12:10:52] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:10:52] [INFO] [LastChance] Threat detected: Bullet
+[12:10:52] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:10:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:10:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:10:53] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[12:10:53] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:10:53] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:10:53] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:10:53] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:10:53] [INFO] [Player] Ready! Grenades: 1/3
+[12:10:53] [INFO] [ScoreManager] Level started with 10 enemies
+[12:10:53] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:10:53] [ENEMY] [Enemy1] Registered as sound listener
+[12:10:53] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:10:53] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:10:53] [ENEMY] [Enemy2] Registered as sound listener
+[12:10:53] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:10:53] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:10:53] [ENEMY] [Enemy3] Registered as sound listener
+[12:10:53] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:10:53] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:10:53] [ENEMY] [Enemy4] Registered as sound listener
+[12:10:53] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:10:53] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:10:53] [ENEMY] [Enemy5] Registered as sound listener
+[12:10:53] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:10:53] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:10:53] [ENEMY] [Enemy6] Registered as sound listener
+[12:10:53] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:10:53] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:10:53] [ENEMY] [Enemy7] Registered as sound listener
+[12:10:53] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:10:53] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:10:53] [ENEMY] [Enemy8] Registered as sound listener
+[12:10:53] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:10:53] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:10:53] [ENEMY] [Enemy9] Registered as sound listener
+[12:10:53] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:10:53] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:10:53] [ENEMY] [Enemy10] Registered as sound listener
+[12:10:53] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:10:53] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:10:53] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:10:53] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:10:53] [INFO] [LastChance] Found player: Player
+[12:10:53] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:10:53] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:10:53] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:10:54] [INFO] ------------------------------------------------------------
+[12:10:54] [INFO] GAME LOG ENDED: 2026-01-22T12:10:54
+[12:10:54] [INFO] ============================================================
diff --git a/docs/case-studies/issue-217/logs/game_log_20260122_122412.txt b/docs/case-studies/issue-217/logs/game_log_20260122_122412.txt
new file mode 100644
index 00000000..50c7fa48
--- /dev/null
+++ b/docs/case-studies/issue-217/logs/game_log_20260122_122412.txt
@@ -0,0 +1,1200 @@
+[12:24:12] [INFO] ============================================================
+[12:24:12] [INFO] GAME LOG STARTED
+[12:24:12] [INFO] ============================================================
+[12:24:12] [INFO] Timestamp: 2026-01-22T12:24:12
+[12:24:12] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_122412.txt
+[12:24:12] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[12:24:12] [INFO] OS: Windows
+[12:24:12] [INFO] Debug build: false
+[12:24:12] [INFO] Engine version: 4.3-stable (official)
+[12:24:12] [INFO] Project: Godot Top-Down Template
+[12:24:12] [INFO] ------------------------------------------------------------
+[12:24:12] [INFO] [GameManager] GameManager ready
+[12:24:12] [INFO] [ScoreManager] ScoreManager ready
+[12:24:12] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[12:24:12] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:24:12] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[12:24:12] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[12:24:12] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[12:24:12] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[12:24:12] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[12:24:12] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[12:24:12] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:24:12] [INFO] [LastChance] Last chance shader loaded successfully
+[12:24:12] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[12:24:12] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[12:24:12] [INFO] [LastChance]   Sepia intensity: 0.70
+[12:24:12] [INFO] [LastChance]   Brightness: 0.60
+[12:24:12] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[12:24:12] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[12:24:12] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:24:12] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:24:12] [INFO] [Player] Ready! Grenades: 1/3
+[12:24:12] [INFO] [ScoreManager] Level started with 10 enemies
+[12:24:12] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[12:24:12] [ENEMY] [Enemy1] Registered as sound listener
+[12:24:12] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:24:12] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[12:24:12] [ENEMY] [Enemy2] Registered as sound listener
+[12:24:12] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:24:12] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[12:24:12] [ENEMY] [Enemy3] Registered as sound listener
+[12:24:12] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:24:12] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[12:24:12] [ENEMY] [Enemy4] Registered as sound listener
+[12:24:12] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:24:12] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[12:24:12] [ENEMY] [Enemy5] Registered as sound listener
+[12:24:12] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:24:12] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[12:24:12] [ENEMY] [Enemy6] Registered as sound listener
+[12:24:12] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:24:12] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[12:24:12] [ENEMY] [Enemy7] Registered as sound listener
+[12:24:12] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 3, behavior: PATROL, player_found: yes
+[12:24:12] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[12:24:12] [ENEMY] [Enemy8] Registered as sound listener
+[12:24:12] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:24:12] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[12:24:12] [ENEMY] [Enemy9] Registered as sound listener
+[12:24:12] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:24:12] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[12:24:12] [ENEMY] [Enemy10] Registered as sound listener
+[12:24:12] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:24:12] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:24:12] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:24:12] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:24:12] [INFO] [LastChance] Found player: Player
+[12:24:12] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:24:12] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:24:12] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:24:14] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:24:14] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:24:15] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:24:15] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:24:16] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[12:24:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:24:16] [ENEMY] [Enemy2] Heard gunshot at (689.5667, 752.2189), source_type=1, intensity=0.02, distance=353
+[12:24:16] [ENEMY] [Enemy4] Heard gunshot at (689.5667, 752.2189), source_type=1, intensity=0.07, distance=184
+[12:24:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:24:16] [INFO] [LastChance] Threat detected: Bullet
+[12:24:16] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:16] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:24:16] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:24:16] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:24:16] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:24:16] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:24:16] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:24:16] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:24:16] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:24:16] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:24:16] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:24:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:24:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:24:17] [INFO] [LastChance] Threat detected: Bullet
+[12:24:17] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:17] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:24:17] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:24:17] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:24:17] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:24:17] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:24:17] [INFO] [Player] Ready! Grenades: 1/3
+[12:24:17] [INFO] [ScoreManager] Level started with 10 enemies
+[12:24:17] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:24:17] [ENEMY] [Enemy1] Registered as sound listener
+[12:24:17] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:24:17] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:24:17] [ENEMY] [Enemy2] Registered as sound listener
+[12:24:17] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:24:17] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:24:17] [ENEMY] [Enemy3] Registered as sound listener
+[12:24:17] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:24:17] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:24:17] [ENEMY] [Enemy4] Registered as sound listener
+[12:24:17] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:24:17] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:24:17] [ENEMY] [Enemy5] Registered as sound listener
+[12:24:17] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:24:17] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:24:17] [ENEMY] [Enemy6] Registered as sound listener
+[12:24:17] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:24:17] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:24:17] [ENEMY] [Enemy7] Registered as sound listener
+[12:24:17] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:24:17] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:24:17] [ENEMY] [Enemy8] Registered as sound listener
+[12:24:17] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:24:17] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:24:17] [ENEMY] [Enemy9] Registered as sound listener
+[12:24:17] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:24:17] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:24:17] [ENEMY] [Enemy10] Registered as sound listener
+[12:24:17] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:24:17] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:24:17] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:24:17] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:24:17] [INFO] [LastChance] Found player: Player
+[12:24:17] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:24:17] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:24:17] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:24:17] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:24:18] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:24:19] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:24:19] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[12:24:19] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[12:24:19] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:24:19] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:24:19] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:24:19] [ENEMY] [Enemy10] FLANKING started: target=(836.3091, 578.0416), side=left, pos=(1061.496, 1460.101)
+[12:24:19] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:24:20] [ENEMY] [Enemy4] State: IDLE -> COMBAT
+[12:24:20] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:24:21] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[12:24:21] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:24:22] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[12:24:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(743.699, 424.7873), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:24:22] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:24:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:24:22] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[12:24:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(743.699, 424.7873), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:24:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:24:22] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[12:24:22] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:24:22] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:24:22] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:24:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(800.5979, 655.5831), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:24:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=4
+[12:24:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(743.699, 424.7873), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:24:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:24:22] [INFO] [LastChance] Threat detected: Bullet
+[12:24:22] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:24:22] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:24:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(800.5979, 655.5831), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:24:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=4
+[12:24:22] [INFO] [LastChance] Threat detected: Bullet
+[12:24:22] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:24:22] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:24:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(800.5979, 655.5831), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:24:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=4
+[12:24:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(599.98376, 1015.90106)
+[12:24:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:24:23] [INFO] [Bullet] Using shooter_position, distance=1179,8456
+[12:24:23] [INFO] [Bullet] Distance to wall: 1179,8456 (80,33786% of viewport)
+[12:24:23] [INFO] [LastChance] Threat detected: Bullet
+[12:24:23] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:23] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:23] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:24:23] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:24:23] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:24:23] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:24:23] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:24:23] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:24:23] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:24:23] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:24:23] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:24:23] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:24:23] [ENEMY] [Enemy2] FLANKING started: target=(587.92, 293.3564), side=right, pos=(454.6815, 530.6548)
+[12:24:23] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
+[12:24:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(800.5979, 655.5831), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:24:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=4
+[12:24:23] [INFO] [LastChance] Threat detected: Bullet
+[12:24:23] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:23] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:23] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:24:23] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:24:23] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:24:23] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:24:23] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:24:23] [INFO] [Player] Ready! Grenades: 1/3
+[12:24:23] [INFO] [ScoreManager] Level started with 10 enemies
+[12:24:23] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
+[12:24:23] [ENEMY] [Enemy1] Registered as sound listener
+[12:24:23] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:24:23] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
+[12:24:23] [ENEMY] [Enemy2] Registered as sound listener
+[12:24:23] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:24:23] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
+[12:24:23] [ENEMY] [Enemy3] Registered as sound listener
+[12:24:23] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:24:23] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
+[12:24:23] [ENEMY] [Enemy4] Registered as sound listener
+[12:24:23] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:24:23] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
+[12:24:23] [ENEMY] [Enemy5] Registered as sound listener
+[12:24:23] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:24:23] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
+[12:24:23] [ENEMY] [Enemy6] Registered as sound listener
+[12:24:23] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:24:23] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
+[12:24:23] [ENEMY] [Enemy7] Registered as sound listener
+[12:24:23] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:24:23] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
+[12:24:23] [ENEMY] [Enemy8] Registered as sound listener
+[12:24:23] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:24:23] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
+[12:24:23] [ENEMY] [Enemy9] Registered as sound listener
+[12:24:23] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:24:23] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
+[12:24:23] [ENEMY] [Enemy10] Registered as sound listener
+[12:24:23] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:24:23] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:24:23] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:24:23] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:24:23] [INFO] [LastChance] Found player: Player
+[12:24:23] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:24:23] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:24:23] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:24:24] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:24:24] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:24:25] [INFO] [GameManager] Debug mode toggled: ON
+[12:24:26] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:24:27] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[12:24:27] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[12:24:27] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:24:27] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:24:27] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:24:28] [ENEMY] [Enemy4] State: IDLE -> COMBAT
+[12:24:28] [ENEMY] [Enemy10] FLANKING started: target=(844.6549, 547.106), side=left, pos=(952.0367, 1447.664)
+[12:24:28] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:24:28] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:24:29] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[12:24:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(661.0042, 639.2381), source=ENEMY (Enemy3), range=1469, listeners=19
+[12:24:29] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
+[12:24:29] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[12:24:29] [INFO] [LastChance] Threat detected: Bullet
+[12:24:29] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:29] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:24:29] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:24:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(661.0042, 639.2381), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:24:29] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[12:24:29] [INFO] [LastChance] Threat detected: Bullet
+[12:24:29] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:29] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:24:29] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:24:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(661.0042, 639.2381), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:24:29] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[12:24:30] [INFO] [LastChance] Threat detected: Bullet
+[12:24:30] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:30] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:24:30] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:24:30] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:24:30] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:24:30] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:24:30] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:24:30] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:24:30] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:24:30] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:24:30] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:24:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(661.0042, 639.2381), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:24:30] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[12:24:30] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[12:24:30] [INFO] [LastChance] Threat detected: Bullet
+[12:24:30] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:30] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:24:30] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:24:30] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:24:30] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:24:30] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:24:30] [INFO] [Player] Ready! Grenades: 1/3
+[12:24:30] [INFO] [ScoreManager] Level started with 10 enemies
+[12:24:30] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:24:30] [ENEMY] [Enemy1] Registered as sound listener
+[12:24:30] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:24:30] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:24:30] [ENEMY] [Enemy2] Registered as sound listener
+[12:24:30] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:24:30] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:24:30] [ENEMY] [Enemy3] Registered as sound listener
+[12:24:30] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:24:30] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:24:30] [ENEMY] [Enemy4] Registered as sound listener
+[12:24:30] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:24:30] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:24:30] [ENEMY] [Enemy5] Registered as sound listener
+[12:24:30] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:24:30] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:24:30] [ENEMY] [Enemy6] Registered as sound listener
+[12:24:30] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:24:30] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:24:30] [ENEMY] [Enemy7] Registered as sound listener
+[12:24:30] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:24:30] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:24:30] [ENEMY] [Enemy8] Registered as sound listener
+[12:24:30] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:24:30] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:24:30] [ENEMY] [Enemy9] Registered as sound listener
+[12:24:30] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:24:30] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:24:30] [ENEMY] [Enemy10] Registered as sound listener
+[12:24:30] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:24:30] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:24:30] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:24:30] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:24:30] [INFO] [LastChance] Found player: Player
+[12:24:30] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:24:30] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:24:30] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:24:31] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:24:31] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:24:32] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:24:32] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[12:24:32] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[12:24:32] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:24:32] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:24:32] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:24:33] [ENEMY] [Enemy4] State: IDLE -> COMBAT
+[12:24:33] [ENEMY] [Enemy10] FLANKING started: target=(551.9977, 747.6327), side=right, pos=(1061.496, 1460.101)
+[12:24:33] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:24:33] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:24:34] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[12:24:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(690.6754, 736.998), source=ENEMY (Enemy3), range=1469, listeners=20
+[12:24:34] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:24:34] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[12:24:34] [INFO] [LastChance] Threat detected: Bullet
+[12:24:34] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:34] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:24:34] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:24:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(690.6754, 736.998), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:24:34] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[12:24:34] [INFO] [LastChance] Threat detected: Bullet
+[12:24:34] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:34] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:24:34] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:24:34] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:24:34] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:24:34] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:24:34] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:24:34] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:24:34] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:24:34] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:24:34] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:24:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(690.6754, 736.998), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:24:35] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[12:24:35] [INFO] [LastChance] Threat detected: Bullet
+[12:24:35] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:24:35] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:24:35] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:24:35] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:24:35] [INFO] [LastChance] Player died
+[12:24:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(690.6754, 736.998), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:24:35] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[12:24:35] [INFO] [LastChance] Threat detected: Bullet
+[12:24:35] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:35] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[12:24:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(690.6754, 736.998), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:24:35] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[12:24:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:24:36] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:24:36] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:24:36] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:24:36] [INFO] [Player] Ready! Grenades: 1/3
+[12:24:36] [INFO] [ScoreManager] Level started with 10 enemies
+[12:24:36] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:24:36] [ENEMY] [Enemy1] Registered as sound listener
+[12:24:36] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:24:36] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:24:36] [ENEMY] [Enemy2] Registered as sound listener
+[12:24:36] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:24:36] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:24:36] [ENEMY] [Enemy3] Registered as sound listener
+[12:24:36] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:24:36] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:24:36] [ENEMY] [Enemy4] Registered as sound listener
+[12:24:36] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:24:36] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:24:36] [ENEMY] [Enemy5] Registered as sound listener
+[12:24:36] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:24:36] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:24:36] [ENEMY] [Enemy6] Registered as sound listener
+[12:24:36] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:24:36] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:24:36] [ENEMY] [Enemy7] Registered as sound listener
+[12:24:36] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:24:36] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:24:36] [ENEMY] [Enemy8] Registered as sound listener
+[12:24:36] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:24:36] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:24:36] [ENEMY] [Enemy9] Registered as sound listener
+[12:24:36] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:24:36] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:24:36] [ENEMY] [Enemy10] Registered as sound listener
+[12:24:36] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:24:38] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:24:38] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:24:38] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:24:38] [INFO] [LastChance] Found player: Player
+[12:24:38] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:24:38] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:24:38] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:24:39] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:24:40] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:24:40] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:24:40] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[12:24:40] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[12:24:41] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:24:41] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:24:41] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:24:41] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[12:24:41] [ENEMY] [Enemy4] State: IDLE -> COMBAT
+[12:24:41] [ENEMY] [Enemy10] FLANKING started: target=(857.5422, 590.1484), side=left, pos=(1061.496, 1460.101)
+[12:24:41] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:24:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5923, 752.3362), source=ENEMY (Enemy3), range=1469, listeners=20
+[12:24:41] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:24:41] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[12:24:42] [INFO] [LastChance] Threat detected: Bullet
+[12:24:42] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:42] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:24:42] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:24:42] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:24:42] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:24:42] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:24:42] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:24:42] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:24:42] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:24:42] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:24:42] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:24:42] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:24:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5923, 752.3362), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:24:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[12:24:42] [INFO] [LastChance] Threat detected: @Area2D@1296
+[12:24:42] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:43] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:24:43] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:24:43] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:24:43] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:24:43] [INFO] [LastChance] Player died
+[12:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5923, 752.3362), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[12:24:43] [INFO] [LastChance] Threat detected: Bullet
+[12:24:43] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5923, 752.3362), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[12:24:43] [INFO] [LastChance] Threat detected: @Area2D@1297
+[12:24:43] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5923, 752.3362), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[12:24:43] [INFO] [LastChance] Threat detected: Bullet
+[12:24:43] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5923, 752.3362), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[12:24:43] [INFO] [LastChance] Threat detected: @Area2D@1298
+[12:24:43] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5923, 752.3362), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:24:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[12:24:43] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:24:43] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:24:43] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:24:43] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:24:43] [INFO] [Player] Ready! Grenades: 1/3
+[12:24:43] [INFO] [ScoreManager] Level started with 10 enemies
+[12:24:43] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:24:43] [ENEMY] [Enemy1] Registered as sound listener
+[12:24:43] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:24:43] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:24:43] [ENEMY] [Enemy2] Registered as sound listener
+[12:24:43] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:24:43] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:24:43] [ENEMY] [Enemy3] Registered as sound listener
+[12:24:43] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:24:43] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:24:43] [ENEMY] [Enemy4] Registered as sound listener
+[12:24:43] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:24:43] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:24:43] [ENEMY] [Enemy5] Registered as sound listener
+[12:24:43] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:24:43] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:24:43] [ENEMY] [Enemy6] Registered as sound listener
+[12:24:43] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:24:43] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:24:43] [ENEMY] [Enemy7] Registered as sound listener
+[12:24:43] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:24:43] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:24:43] [ENEMY] [Enemy8] Registered as sound listener
+[12:24:43] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:24:43] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:24:43] [ENEMY] [Enemy9] Registered as sound listener
+[12:24:43] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:24:43] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:24:43] [ENEMY] [Enemy10] Registered as sound listener
+[12:24:43] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:24:43] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:24:43] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:24:43] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:24:43] [INFO] [LastChance] Found player: Player
+[12:24:43] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:24:43] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:24:43] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:24:45] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:24:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.967, 1464.596), source=ENEMY (Enemy10), range=1469, listeners=20
+[12:24:45] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:24:45] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:24:45] [INFO] [LastChance] Threat detected: Bullet
+[12:24:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1012.757, 1430.454), shooter_id=328296564194, bullet_pos=(103.2222, 699.7987)
+[12:24:46] [INFO] [Bullet] Using shooter_position, distance=1166.6669921875
+[12:24:46] [INFO] [Bullet] Distance to wall: 1166.6669921875 (79.4405008094768% of viewport)
+[12:24:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1012.757, 1430.454), shooter_id=328296564194, bullet_pos=(45.26923, 748.7082)
+[12:24:46] [INFO] [Bullet] Using shooter_position, distance=1183.55871582031
+[12:24:46] [INFO] [Bullet] Distance to wall: 1183.55871582031 (80.5906893327758% of viewport)
+[12:24:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1061.927, 1424.066), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:24:46] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:24:46] [INFO] [LastChance] Threat detected: Bullet
+[12:24:46] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:46] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:24:46] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:24:46] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:24:47] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:24:47] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[12:24:48] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[12:24:48] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:24:51] [ENEMY] [Enemy7] FLANKING started: target=(957.1876, 1439.669), side=left, pos=(1420.441, 1002.247)
+[12:24:51] [ENEMY] [Enemy7] State: PURSUING -> FLANKING
+[12:24:52] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[12:24:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(966.2701, 1482.65), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:24:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[12:24:52] [INFO] [LastChance] Threat detected: Bullet
+[12:24:52] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:52] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:24:52] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:24:52] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:24:52] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:24:52] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:24:52] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:24:52] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:24:52] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:24:52] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:24:52] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:24:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(966.2701, 1482.65), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:24:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[12:24:53] [INFO] [LastChance] Threat detected: Bullet
+[12:24:53] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:53] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:24:53] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:24:53] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:24:53] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:24:53] [INFO] [LastChance] Player died
+[12:24:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(966.2701, 1482.65), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:24:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[12:24:53] [INFO] [LastChance] Threat detected: Bullet
+[12:24:53] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(966.2701, 1482.65), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:24:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[12:24:53] [INFO] [LastChance] Threat detected: Bullet
+[12:24:53] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(966.2701, 1482.65), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:24:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[12:24:53] [INFO] [LastChance] Threat detected: Bullet
+[12:24:53] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(966.2701, 1482.65), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:24:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
+[12:24:53] [INFO] [LastChance] Threat detected: Bullet
+[12:24:53] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:24:54] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:24:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:24:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:24:54] [INFO] [Player] Ready! Grenades: 1/3
+[12:24:54] [INFO] [ScoreManager] Level started with 10 enemies
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:24:54] [ENEMY] [Enemy1] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:24:54] [ENEMY] [Enemy2] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:24:54] [ENEMY] [Enemy3] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:24:54] [ENEMY] [Enemy4] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:24:54] [ENEMY] [Enemy5] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:24:54] [ENEMY] [Enemy6] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:24:54] [ENEMY] [Enemy7] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:24:54] [ENEMY] [Enemy8] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:24:54] [ENEMY] [Enemy9] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:24:54] [ENEMY] [Enemy10] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:24:54] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:24:54] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:24:54] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:24:54] [INFO] [LastChance] Found player: Player
+[12:24:54] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:24:54] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:24:54] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:24:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:24:54] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:24:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:24:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:24:54] [INFO] [Player] Ready! Grenades: 1/3
+[12:24:54] [INFO] [ScoreManager] Level started with 10 enemies
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
+[12:24:54] [ENEMY] [Enemy1] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
+[12:24:54] [ENEMY] [Enemy2] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
+[12:24:54] [ENEMY] [Enemy3] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
+[12:24:54] [ENEMY] [Enemy4] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
+[12:24:54] [ENEMY] [Enemy5] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
+[12:24:54] [ENEMY] [Enemy6] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
+[12:24:54] [ENEMY] [Enemy7] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
+[12:24:54] [ENEMY] [Enemy8] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
+[12:24:54] [ENEMY] [Enemy9] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:24:54] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
+[12:24:54] [ENEMY] [Enemy10] Registered as sound listener
+[12:24:54] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:24:54] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:24:54] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:24:54] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:24:54] [INFO] [LastChance] Found player: Player
+[12:24:54] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:24:54] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:24:54] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:24:54] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:24:55] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:24:56] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:24:56] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[12:24:56] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[12:24:56] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:24:56] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:24:56] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:24:56] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[12:24:56] [ENEMY] [Enemy4] State: IDLE -> COMBAT
+[12:24:57] [ENEMY] [Enemy10] FLANKING started: target=(871.1811, 598.0012), side=left, pos=(1061.496, 1460.101)
+[12:24:57] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:24:57] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:24:57] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:24:58] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[12:24:59] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[12:24:59] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:24:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(788.6158, 578.9846), source=ENEMY (Enemy4), range=1469, listeners=30
+[12:24:59] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
+[12:24:59] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[12:24:59] [INFO] [LastChance] Threat detected: Bullet
+[12:24:59] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:59] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:24:59] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:24:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(779.2922, 542.834), source=ENEMY (Enemy4), range=1469, listeners=10
+[12:24:59] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[12:24:59] [INFO] [LastChance] Threat detected: @Area2D@2056
+[12:24:59] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:24:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:24:59] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:24:59] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:24:59] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:24:59] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:24:59] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:24:59] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:24:59] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:24:59] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:24:59] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:24:59] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:24:59] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
+[12:25:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(771.3005, 511.8478), source=ENEMY (Enemy4), range=1469, listeners=10
+[12:25:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[12:25:00] [INFO] [LastChance] Threat detected: Bullet
+[12:25:00] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:25:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:25:00] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:25:00] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:25:00] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:25:00] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:25:00] [INFO] [LastChance] Player died
+[12:25:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(771.3005, 511.8478), source=ENEMY (Enemy4), range=1469, listeners=10
+[12:25:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[12:25:00] [INFO] [LastChance] Threat detected: Bullet
+[12:25:00] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:25:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:25:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(771.3005, 511.8478), source=ENEMY (Enemy4), range=1469, listeners=10
+[12:25:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[12:25:00] [ENEMY] [Enemy1] FLANKING started: target=(554.5383, 151.2579), side=right, pos=(456.4355, 375.3291)
+[12:25:00] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
+[12:25:00] [INFO] [LastChance] Threat detected: Bullet
+[12:25:00] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:25:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:25:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(771.3005, 511.8478), source=ENEMY (Enemy4), range=1469, listeners=10
+[12:25:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[12:25:00] [INFO] [LastChance] Threat detected: Bullet
+[12:25:00] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:25:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:25:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(771.3005, 511.8478), source=ENEMY (Enemy4), range=1469, listeners=10
+[12:25:01] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[12:25:01] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[12:25:01] [INFO] [LastChance] Threat detected: Bullet
+[12:25:01] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:25:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:25:01] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:25:01] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:25:01] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:25:01] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:25:01] [INFO] [Player] Ready! Grenades: 1/3
+[12:25:01] [INFO] [ScoreManager] Level started with 10 enemies
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:25:01] [ENEMY] [Enemy1] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:25:01] [ENEMY] [Enemy2] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:25:01] [ENEMY] [Enemy3] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:25:01] [ENEMY] [Enemy4] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:25:01] [ENEMY] [Enemy5] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:25:01] [ENEMY] [Enemy6] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:25:01] [ENEMY] [Enemy7] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:25:01] [ENEMY] [Enemy8] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:25:01] [ENEMY] [Enemy9] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:25:01] [ENEMY] [Enemy10] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:25:01] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:25:01] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:25:01] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:25:01] [INFO] [LastChance] Found player: Player
+[12:25:01] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:25:01] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:25:01] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:25:01] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:25:01] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:25:01] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:25:01] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:25:01] [INFO] [Player] Ready! Grenades: 1/3
+[12:25:01] [INFO] [ScoreManager] Level started with 10 enemies
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
+[12:25:01] [ENEMY] [Enemy1] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
+[12:25:01] [ENEMY] [Enemy2] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
+[12:25:01] [ENEMY] [Enemy3] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
+[12:25:01] [ENEMY] [Enemy4] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
+[12:25:01] [ENEMY] [Enemy5] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
+[12:25:01] [ENEMY] [Enemy6] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
+[12:25:01] [ENEMY] [Enemy7] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
+[12:25:01] [ENEMY] [Enemy8] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
+[12:25:01] [ENEMY] [Enemy9] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:25:01] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
+[12:25:01] [ENEMY] [Enemy10] Registered as sound listener
+[12:25:01] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:25:01] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:25:01] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:25:01] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:25:01] [INFO] [LastChance] Found player: Player
+[12:25:01] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:25:01] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:25:01] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:25:02] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:25:02] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:25:03] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:25:03] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[12:25:03] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[12:25:03] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:25:04] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:25:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=30
+[12:25:04] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
+[12:25:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:25:04] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:25:04] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:25:04] [ENEMY] [Enemy10] FLANKING started: target=(341.009, 798.2899), side=right, pos=(1061.496, 1460.101)
+[12:25:04] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:25:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:25:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:25:04] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:25:04] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:25:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:25:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:25:04] [INFO] [LastChance] Threat detected: Bullet
+[12:25:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:25:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:25:04] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:25:04] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:25:04] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:25:04] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:25:04] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:25:04] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:25:04] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:25:04] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:25:04] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:25:04] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:25:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:25:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:25:05] [INFO] [LastChance] Threat detected: Bullet
+[12:25:05] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:25:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:25:05] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:25:05] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:25:05] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:25:05] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:25:05] [INFO] [LastChance] Player died
+[12:25:05] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:25:05] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:25:05] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:25:05] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:25:05] [INFO] [Player] Ready! Grenades: 1/3
+[12:25:05] [INFO] [ScoreManager] Level started with 10 enemies
+[12:25:05] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:25:05] [ENEMY] [Enemy1] Registered as sound listener
+[12:25:05] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:25:05] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:25:05] [ENEMY] [Enemy2] Registered as sound listener
+[12:25:05] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:25:05] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:25:05] [ENEMY] [Enemy3] Registered as sound listener
+[12:25:05] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:25:05] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:25:05] [ENEMY] [Enemy4] Registered as sound listener
+[12:25:05] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:25:05] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:25:05] [ENEMY] [Enemy5] Registered as sound listener
+[12:25:05] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:25:05] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:25:05] [ENEMY] [Enemy6] Registered as sound listener
+[12:25:05] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:25:05] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:25:05] [ENEMY] [Enemy7] Registered as sound listener
+[12:25:05] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:25:05] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:25:05] [ENEMY] [Enemy8] Registered as sound listener
+[12:25:05] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:25:05] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:25:05] [ENEMY] [Enemy9] Registered as sound listener
+[12:25:05] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:25:05] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:25:05] [ENEMY] [Enemy10] Registered as sound listener
+[12:25:05] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:25:05] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:25:05] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:25:05] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:25:05] [INFO] [LastChance] Found player: Player
+[12:25:05] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:25:05] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:25:05] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:25:05] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:25:06] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:25:06] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:25:07] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[12:25:07] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[12:25:07] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:25:07] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:25:07] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:25:07] [ENEMY] [Enemy10] FLANKING started: target=(381.1985, 834.5874), side=right, pos=(1061.496, 1460.101)
+[12:25:07] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:25:07] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[12:25:07] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[12:25:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(524.0661, 687.2332), source=ENEMY (Enemy3), range=1469, listeners=20
+[12:25:08] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:25:08] [ENEMY] [Enemy4] Heard gunshot at (524.0661, 687.2332), source_type=1, intensity=0.02, distance=348
+[12:25:08] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[12:25:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(465.3385, 687.3163), shooter_id=550359795596, bullet_pos=(465.3385, 687.3163)
+[12:25:08] [INFO] [Bullet] Using shooter_position, distance=0
+[12:25:08] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:25:08] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:25:08] [INFO] [Bullet] Starting wall penetration at (465.3385, 687.3163)
+[12:25:08] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:25:08] [INFO] [Bullet] Exiting penetration at (419.0142, 681.6741) after traveling 41.6666679382324 pixels through wall
+[12:25:08] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:25:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:25:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:25:08] [INFO] [LastChance] Threat detected: Bullet
+[12:25:08] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:25:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:25:08] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:25:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:25:08] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:25:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.4337, 682.4752), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:25:08] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[12:25:08] [INFO] [LastChance] Threat detected: @Area2D@2813
+[12:25:08] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:25:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:25:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(521.5482, 677.2482), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:25:08] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[12:25:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:25:08] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:25:08] [INFO] [LastChance] Threat detected: Bullet
+[12:25:08] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:25:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:25:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(517.821, 671.8025), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:25:08] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[12:25:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:25:08] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:25:08] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:25:08] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:25:08] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:25:08] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:25:08] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:25:08] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:25:08] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:25:08] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:25:09] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:25:09] [INFO] [LastChance] Threat detected: @Area2D@2814
+[12:25:09] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:25:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:25:09] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:25:09] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:25:09] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:25:09] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:25:09] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:25:09] [INFO] [LastChance] Player died
+[12:25:09] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[12:25:09] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[12:25:10] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:25:10] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:25:10] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:25:10] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:25:10] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:25:10] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:25:10] [INFO] [Player] Ready! Grenades: 1/3
+[12:25:10] [INFO] [ScoreManager] Level started with 10 enemies
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:25:10] [ENEMY] [Enemy1] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:25:10] [ENEMY] [Enemy2] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:25:10] [ENEMY] [Enemy3] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:25:10] [ENEMY] [Enemy4] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:25:10] [ENEMY] [Enemy5] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:25:10] [ENEMY] [Enemy6] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:25:10] [ENEMY] [Enemy7] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:25:10] [ENEMY] [Enemy8] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:25:10] [ENEMY] [Enemy9] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:25:10] [ENEMY] [Enemy10] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:25:10] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:25:10] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:25:10] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:25:10] [INFO] [LastChance] Found player: Player
+[12:25:10] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:25:10] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:25:10] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:25:10] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:25:10] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:25:10] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:25:10] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:25:10] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:25:10] [INFO] [Player] Ready! Grenades: 1/3
+[12:25:10] [INFO] [ScoreManager] Level started with 10 enemies
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
+[12:25:10] [ENEMY] [Enemy1] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
+[12:25:10] [ENEMY] [Enemy2] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
+[12:25:10] [ENEMY] [Enemy3] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
+[12:25:10] [ENEMY] [Enemy4] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
+[12:25:10] [ENEMY] [Enemy5] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
+[12:25:10] [ENEMY] [Enemy6] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
+[12:25:10] [ENEMY] [Enemy7] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
+[12:25:10] [ENEMY] [Enemy8] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
+[12:25:10] [ENEMY] [Enemy9] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:25:10] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
+[12:25:10] [ENEMY] [Enemy10] Registered as sound listener
+[12:25:10] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:25:10] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:25:10] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:25:10] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:25:10] [INFO] [LastChance] Found player: Player
+[12:25:10] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:25:10] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:25:10] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:25:11] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:25:11] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:25:12] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:25:12] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[12:25:12] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[12:25:12] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:25:13] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:25:13] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:25:13] [ENEMY] [Enemy4] State: IDLE -> COMBAT
+[12:25:13] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[12:25:13] [ENEMY] [Enemy10] FLANKING started: target=(888.1908, 631.8721), side=left, pos=(1061.496, 1460.101)
+[12:25:13] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:25:13] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:25:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=30
+[12:25:13] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
+[12:25:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[12:25:13] [INFO] [LastChance] Threat detected: Bullet
+[12:25:13] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:25:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:25:13] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:25:13] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:25:13] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:25:13] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:25:13] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:25:13] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:25:13] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:25:13] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:25:13] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:25:13] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:25:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:25:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[12:25:14] [INFO] [LastChance] Threat detected: Bullet
+[12:25:14] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:25:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:25:14] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:25:14] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:25:14] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:25:14] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:25:14] [INFO] [LastChance] Player died
+[12:25:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:25:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[12:25:14] [INFO] [LastChance] Threat detected: Bullet
+[12:25:14] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:25:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:25:14] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:25:15] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:25:15] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:25:15] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:25:15] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:25:15] [INFO] [Player] Ready! Grenades: 1/3
+[12:25:15] [INFO] [ScoreManager] Level started with 10 enemies
+[12:25:15] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:25:15] [ENEMY] [Enemy1] Registered as sound listener
+[12:25:15] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:25:15] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:25:15] [ENEMY] [Enemy2] Registered as sound listener
+[12:25:15] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:25:15] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:25:15] [ENEMY] [Enemy3] Registered as sound listener
+[12:25:15] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:25:15] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:25:15] [ENEMY] [Enemy4] Registered as sound listener
+[12:25:15] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:25:15] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:25:15] [ENEMY] [Enemy5] Registered as sound listener
+[12:25:15] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:25:15] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:25:15] [ENEMY] [Enemy6] Registered as sound listener
+[12:25:15] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:25:15] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:25:15] [ENEMY] [Enemy7] Registered as sound listener
+[12:25:15] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:25:15] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:25:15] [ENEMY] [Enemy8] Registered as sound listener
+[12:25:15] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:25:15] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:25:15] [ENEMY] [Enemy9] Registered as sound listener
+[12:25:15] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:25:15] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:25:15] [ENEMY] [Enemy10] Registered as sound listener
+[12:25:15] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:25:15] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:25:15] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:25:15] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:25:15] [INFO] [LastChance] Found player: Player
+[12:25:15] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:25:15] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:25:15] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:25:16] [INFO] ------------------------------------------------------------
+[12:25:16] [INFO] GAME LOG ENDED: 2026-01-22T12:25:16
+[12:25:16] [INFO] ============================================================
diff --git a/docs/case-studies/issue-217/logs/game_log_20260122_123430.txt b/docs/case-studies/issue-217/logs/game_log_20260122_123430.txt
new file mode 100644
index 00000000..751313e6
--- /dev/null
+++ b/docs/case-studies/issue-217/logs/game_log_20260122_123430.txt
@@ -0,0 +1,2236 @@
+[12:34:30] [INFO] ============================================================
+[12:34:30] [INFO] GAME LOG STARTED
+[12:34:30] [INFO] ============================================================
+[12:34:30] [INFO] Timestamp: 2026-01-22T12:34:30
+[12:34:30] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_123430.txt
+[12:34:30] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[12:34:30] [INFO] OS: Windows
+[12:34:30] [INFO] Debug build: false
+[12:34:30] [INFO] Engine version: 4.3-stable (official)
+[12:34:30] [INFO] Project: Godot Top-Down Template
+[12:34:30] [INFO] ------------------------------------------------------------
+[12:34:30] [INFO] [GameManager] GameManager ready
+[12:34:30] [INFO] [ScoreManager] ScoreManager ready
+[12:34:30] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[12:34:30] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:34:30] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[12:34:30] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[12:34:30] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[12:34:30] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[12:34:30] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[12:34:30] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[12:34:30] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:34:30] [INFO] [LastChance] Last chance shader loaded successfully
+[12:34:30] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[12:34:30] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[12:34:30] [INFO] [LastChance]   Sepia intensity: 0.70
+[12:34:30] [INFO] [LastChance]   Brightness: 0.60
+[12:34:31] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[12:34:31] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[12:34:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:34:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:34:31] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:34:31] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:34:31] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:34:31] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:34:31] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[12:34:31] [INFO] [ScoreManager] Level started with 10 enemies
+[12:34:31] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[12:34:31] [ENEMY] [Enemy1] Registered as sound listener
+[12:34:31] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:34:31] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[12:34:31] [ENEMY] [Enemy2] Registered as sound listener
+[12:34:31] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:34:31] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[12:34:31] [ENEMY] [Enemy3] Registered as sound listener
+[12:34:31] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:34:31] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[12:34:31] [ENEMY] [Enemy4] Registered as sound listener
+[12:34:31] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:34:31] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[12:34:31] [ENEMY] [Enemy5] Registered as sound listener
+[12:34:31] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:34:31] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[12:34:31] [ENEMY] [Enemy6] Registered as sound listener
+[12:34:31] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:34:31] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[12:34:31] [ENEMY] [Enemy7] Registered as sound listener
+[12:34:31] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 3, behavior: PATROL, player_found: yes
+[12:34:31] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[12:34:31] [ENEMY] [Enemy8] Registered as sound listener
+[12:34:31] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:34:31] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[12:34:31] [ENEMY] [Enemy9] Registered as sound listener
+[12:34:31] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:34:31] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[12:34:31] [ENEMY] [Enemy10] Registered as sound listener
+[12:34:31] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:34:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:34:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:34:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:34:31] [INFO] [LastChance] Found player: Player
+[12:34:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:34:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:34:31] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:34:32] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:34:32] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:34:33] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:34:33] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[12:34:33] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[12:34:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5717, 752.2421), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:34:33] [ENEMY] [Enemy4] Heard gunshot at (689.5717, 752.2421), source_type=1, intensity=0.07, distance=184
+[12:34:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:34:33] [INFO] [LastChance] Threat detected: Bullet
+[12:34:33] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:34:33] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:34:33] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:34:33] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:34:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5717, 752.2421), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:34:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:34:33] [INFO] [LastChance] Threat detected: Bullet
+[12:34:33] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:34:33] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:34:33] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:34:33] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:34:33] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:34:33] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:34:33] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:34:33] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:34:33] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:34:33] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:34:33] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:34:33] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:34:34] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:34:34] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:34:34] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:34:34] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:34:34] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:34:34] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:34:34] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:34:34] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:34:34] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:34:34] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[12:34:34] [INFO] [ScoreManager] Level started with 10 enemies
+[12:34:34] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:34:34] [ENEMY] [Enemy1] Registered as sound listener
+[12:34:34] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:34:34] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:34:34] [ENEMY] [Enemy2] Registered as sound listener
+[12:34:34] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:34:34] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:34:34] [ENEMY] [Enemy3] Registered as sound listener
+[12:34:34] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:34:34] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:34:34] [ENEMY] [Enemy4] Registered as sound listener
+[12:34:34] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:34:34] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:34:34] [ENEMY] [Enemy5] Registered as sound listener
+[12:34:34] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:34:34] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:34:34] [ENEMY] [Enemy6] Registered as sound listener
+[12:34:34] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:34:34] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:34:34] [ENEMY] [Enemy7] Registered as sound listener
+[12:34:34] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:34:34] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:34:34] [ENEMY] [Enemy8] Registered as sound listener
+[12:34:34] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:34:34] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:34:34] [ENEMY] [Enemy9] Registered as sound listener
+[12:34:34] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:34:34] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:34:34] [ENEMY] [Enemy10] Registered as sound listener
+[12:34:34] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:34:34] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:34:34] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:34:34] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:34:34] [INFO] [LastChance] Found player: Player
+[12:34:34] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:34:34] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:34:34] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:34:34] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:34:35] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:34:35] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:34:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 777.9999), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:34:36] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:34:36] [ENEMY] [Enemy1] Heard gunshot at (450, 777.9999), source_type=0, intensity=0.01, distance=454
+[12:34:36] [ENEMY] [Enemy2] Heard gunshot at (450, 777.9999), source_type=0, intensity=0.05, distance=233
+[12:34:36] [ENEMY] [Enemy4] Heard gunshot at (450, 777.9999), source_type=0, intensity=0.02, distance=371
+[12:34:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:34:36] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[12:34:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 768.7222), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:34:36] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[12:34:36] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:34:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 779.7222), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:34:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(681.7183, 750.7386), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:34:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:34:36] [INFO] [LastChance] Threat detected: @Area2D@539
+[12:34:36] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:34:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:34:36] [ENEMY] [Enemy3] Hit taken, health: 1/4
+[12:34:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 806.9445), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:34:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(672.9478, 744.6675), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:34:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:34:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(516.0288, 797.7446)
+[12:34:36] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:36] [INFO] [Bullet] Using shooter_position, distance=950,0959
+[12:34:36] [INFO] [Bullet] Distance to wall: 950,0959 (64,69378% of viewport)
+[12:34:36] [INFO] [Bullet] Distance-based penetration chance: 71,1906%
+[12:34:36] [INFO] [Bullet] Penetration failed (distance roll)
+[12:34:36] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:34:36] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:34:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 839.389), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:34:36] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[12:34:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(515.36163, 826.26263)
+[12:34:36] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:36] [INFO] [Bullet] Using shooter_position, distance=973,81085
+[12:34:36] [INFO] [Bullet] Distance to wall: 973,81085 (66,30858% of viewport)
+[12:34:36] [INFO] [Bullet] Distance-based penetration chance: 69,306656%
+[12:34:36] [INFO] [Bullet] Starting wall penetration at (515.36163, 826.26263)
+[12:34:36] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:34:36] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:34:36] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:34:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37,8558
+[12:34:36] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:36] [INFO] [Bullet] Exiting penetration at (561.11475, 817.07416) after traveling 41,66667 pixels through wall
+[12:34:36] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:34:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(621.1182, 700.5733), shooter_id=91402275314, bullet_pos=(59.38475, 857.8417)
+[12:34:36] [INFO] [Bullet] Using shooter_position, distance=583.333374023438
+[12:34:36] [INFO] [Bullet] Distance to wall: 583.333374023438 (39.7202420927463% of viewport)
+[12:34:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:34:36] [INFO] [Bullet] Starting wall penetration at (59.38475, 857.8417)
+[12:34:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18.2289066314697
+[12:34:36] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:36] [INFO] [Bullet] Exiting penetration at (14.44608, 870.4232) after traveling 41.6666679382324 pixels through wall
+[12:34:36] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:34:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(644.4436, 724.9368), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:34:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:34:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.502, 782.0849), shooter_id=91402275314, bullet_pos=(512.4076, 863.2147)
+[12:34:37] [INFO] [Bullet] Using shooter_position, distance=124.999938964844
+[12:34:37] [INFO] [Bullet] Distance to wall: 124.999938964844 (8.5114756987359% of viewport)
+[12:34:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:34:37] [INFO] [Bullet] Starting wall penetration at (512.4076, 863.2147)
+[12:34:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(644.4436, 724.9368), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:34:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:34:37] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30.3571090698242
+[12:34:37] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:37] [INFO] [Bullet] Exiting penetration at (476.9057, 893.5032) after traveling 41.6666679382324 pixels through wall
+[12:34:37] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:34:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(597.2313, 773.9429), shooter_id=91402275314, bullet_pos=(522.0612, 809.9136)
+[12:34:37] [INFO] [Bullet] Using shooter_position, distance=83.3333358764648
+[12:34:37] [INFO] [Bullet] Distance to wall: 83.3333358764648 (5.67432007632112% of viewport)
+[12:34:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:34:37] [INFO] [Bullet] Starting wall penetration at (522.0612, 809.9136)
+[12:34:37] [INFO] [Bullet] Raycast backward hit penetrating body at distance 22.2097644805908
+[12:34:37] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:37] [INFO] [Bullet] Exiting penetration at (479.9659, 830.0572) after traveling 41.6666679382324 pixels through wall
+[12:34:37] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:34:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(644.4436, 724.9368), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:34:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:34:37] [INFO] [LastChance] Threat detected: Bullet
+[12:34:37] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:34:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:34:37] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[12:34:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(430.9059, 745.8215), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:34:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(588.3245, 763.4237), shooter_id=91402275314, bullet_pos=(50.86775, 830.8271)
+[12:34:37] [INFO] [Bullet] Using shooter_position, distance=541.666931152344
+[12:34:37] [INFO] [Bullet] Distance to wall: 541.666931152344 (36.8830973798211% of viewport)
+[12:34:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:34:37] [INFO] [Bullet] Starting wall penetration at (50.86775, 830.8271)
+[12:34:37] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.6511211395264
+[12:34:37] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:37] [INFO] [Bullet] Exiting penetration at (4.563793, 836.6342) after traveling 41.6666717529297 pixels through wall
+[12:34:37] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:34:37] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[12:34:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(411.6975, 736.4227), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:34:37] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:34:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(911.3423, 692.9829)
+[12:34:37] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:37] [INFO] [Bullet] Using shooter_position, distance=1144,8887
+[12:34:37] [INFO] [Bullet] Distance to wall: 1144,8887 (77,95757% of viewport)
+[12:34:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(397.1143, 742.1668), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:34:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(932.4519, 669.79047)
+[12:34:37] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:37] [INFO] [Bullet] Using shooter_position, distance=1148,0792
+[12:34:37] [INFO] [Bullet] Distance to wall: 1148,0792 (78,17483% of viewport)
+[12:34:37] [INFO] [Bullet] Distance-based penetration chance: 55,462708%
+[12:34:37] [INFO] [Bullet] Penetration failed (distance roll)
+[12:34:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(609.8085, 658.7888), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:34:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[12:34:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(609.8085, 658.7888), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:34:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[12:34:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(915.8447, 661.27423)
+[12:34:37] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:37] [INFO] [Bullet] Using shooter_position, distance=1129,6261
+[12:34:37] [INFO] [Bullet] Distance to wall: 1129,6261 (76,91832% of viewport)
+[12:34:37] [INFO] [Bullet] Distance-based penetration chance: 56,928627%
+[12:34:37] [INFO] [Bullet] Penetration failed (distance roll)
+[12:34:37] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:34:37] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:34:37] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:34:37] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:34:37] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:34:37] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:34:37] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:34:37] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:34:37] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[12:34:37] [INFO] [ScoreManager] Level started with 10 enemies
+[12:34:37] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:34:37] [ENEMY] [Enemy1] Registered as sound listener
+[12:34:37] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:34:37] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:34:37] [ENEMY] [Enemy2] Registered as sound listener
+[12:34:37] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:34:37] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:34:37] [ENEMY] [Enemy3] Registered as sound listener
+[12:34:37] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:34:37] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:34:37] [ENEMY] [Enemy4] Registered as sound listener
+[12:34:37] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:34:37] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:34:37] [ENEMY] [Enemy5] Registered as sound listener
+[12:34:37] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:34:37] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:34:37] [ENEMY] [Enemy6] Registered as sound listener
+[12:34:37] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:34:37] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:34:37] [ENEMY] [Enemy7] Registered as sound listener
+[12:34:37] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:34:37] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:34:37] [ENEMY] [Enemy8] Registered as sound listener
+[12:34:37] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:34:37] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:34:37] [ENEMY] [Enemy9] Registered as sound listener
+[12:34:37] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:34:37] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:34:37] [ENEMY] [Enemy10] Registered as sound listener
+[12:34:37] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:34:37] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:34:37] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:34:37] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:34:37] [INFO] [LastChance] Found player: Player
+[12:34:37] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:34:37] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:34:37] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:34:38] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:34:38] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:34:39] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:34:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(419.6131, 761.5075), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:34:39] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:34:39] [ENEMY] [Enemy1] Heard gunshot at (419.6131, 761.5075), source_type=0, intensity=0.01, distance=429
+[12:34:39] [ENEMY] [Enemy2] Heard gunshot at (419.6131, 761.5075), source_type=0, intensity=0.06, distance=212
+[12:34:39] [ENEMY] [Enemy4] Heard gunshot at (419.6131, 761.5075), source_type=0, intensity=0.02, distance=405
+[12:34:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:34:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(397.0192, 756.2248), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:34:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(935.1333, 662.18866)
+[12:34:39] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:39] [INFO] [Bullet] Using shooter_position, distance=1145,8483
+[12:34:39] [INFO] [Bullet] Distance to wall: 1145,8483 (78,02292% of viewport)
+[12:34:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(381.0781, 765.5127), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:34:39] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:34:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(916.90533, 683.12646)
+[12:34:40] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:40] [INFO] [Bullet] Using shooter_position, distance=1143,4059
+[12:34:40] [INFO] [Bullet] Distance to wall: 1143,4059 (77,85661% of viewport)
+[12:34:40] [INFO] [Bullet] Distance-based penetration chance: 55,83396%
+[12:34:40] [INFO] [Bullet] Penetration failed (distance roll)
+[12:34:40] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[12:34:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(372.9609, 789.1381), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:34:40] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[12:34:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(371.8354, 825.5754), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:34:40] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:34:40] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:34:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(520.06, 802.5654)
+[12:34:40] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:40] [INFO] [Bullet] Using shooter_position, distance=956,33344
+[12:34:40] [INFO] [Bullet] Distance to wall: 956,33344 (65,1185% of viewport)
+[12:34:40] [INFO] [Bullet] Distance-based penetration chance: 70,695076%
+[12:34:40] [INFO] [Bullet] Penetration failed (distance roll)
+[12:34:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(371.8354, 861.2977), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:34:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(519.3232, 833.96)
+[12:34:40] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:40] [INFO] [Bullet] Using shooter_position, distance=982,4387
+[12:34:40] [INFO] [Bullet] Distance to wall: 982,4387 (66,896065% of viewport)
+[12:34:40] [INFO] [Bullet] Distance-based penetration chance: 68,62127%
+[12:34:40] [INFO] [Bullet] Starting wall penetration at (519.3232, 833.96)
+[12:34:40] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41,910175
+[12:34:40] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:40] [INFO] [Bullet] Exiting penetration at (565.20825, 825.45496) after traveling 41,666668 pixels through wall
+[12:34:40] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:34:40] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:34:40] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[12:34:40] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:34:41] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[12:34:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(540.6364, 765.4301), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:41] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:34:41] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:34:41] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:34:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(579.1364, 765.4301), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:42] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:34:42] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:34:42] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:34:42] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[12:34:42] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:34:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(617.6364, 765.4301), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:42] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=0, below_threshold=5
+[12:34:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(413.7444, 659.2564), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:34:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[12:34:42] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[12:34:42] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[12:34:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.5646, 756.8073), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:42] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=0, below_threshold=5
+[12:34:42] [ENEMY] [Enemy10] FLANKING started: target=(554.2668, 888.9843), side=right, pos=(953.4262, 1416.483)
+[12:34:42] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:34:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(681.4647, 733.631), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:42] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=0, below_threshold=5
+[12:34:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(481.6124, 654.3028), shooter_id=156078443281, bullet_pos=(923.256, 776.8604)
+[12:34:42] [INFO] [Bullet] Using shooter_position, distance=458.333312988281
+[12:34:42] [INFO] [Bullet] Distance to wall: 458.333312988281 (31.2087580820184% of viewport)
+[12:34:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:34:42] [INFO] [Bullet] Starting wall penetration at (923.256, 776.8604)
+[12:34:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33.441047668457
+[12:34:42] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:42] [INFO] [Bullet] Exiting penetration at (968.2233, 789.339) after traveling 41.666675567627 pixels through wall
+[12:34:42] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:34:42] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[12:34:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(495.8242, 685.947)
+[12:34:42] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:42] [INFO] [Bullet] Using shooter_position, distance=846,3834
+[12:34:42] [INFO] [Bullet] Distance to wall: 846,3834 (57,6318% of viewport)
+[12:34:42] [INFO] [Bullet] Distance-based penetration chance: 79,429565%
+[12:34:42] [INFO] [Bullet] Starting wall penetration at (495.8242, 685.947)
+[12:34:42] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:34:42] [INFO] [Bullet] Exiting penetration at (450.6248, 674.337) after traveling 41,666668 pixels through wall
+[12:34:42] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:34:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(708.6884, 706.4073), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:42] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=0, below_threshold=5
+[12:34:42] [ENEMY] [Enemy2] Hit taken, health: 1/2
+[12:34:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(735.912, 679.1837), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:42] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=0, below_threshold=5
+[12:34:42] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[12:34:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(763.1357, 651.96), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:42] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=0, below_threshold=5
+[12:34:42] [ENEMY] [Enemy2] Hit taken, health: 0/2
+[12:34:42] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[12:34:42] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:34:42] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 9)
+[12:34:42] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:34:42] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:34:42] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:34:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(790.3594, 624.7363), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:34:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
+[12:34:42] [ENEMY] [Enemy3] Hit taken, health: 0/3
+[12:34:42] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:34:42] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[12:34:42] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 8)
+[12:34:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(517.33765, 591.80914)
+[12:34:42] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:42] [INFO] [Bullet] Using shooter_position, distance=786,0511
+[12:34:42] [INFO] [Bullet] Distance to wall: 786,0511 (53,523666% of viewport)
+[12:34:42] [INFO] [Bullet] Distance-based penetration chance: 84,22239%
+[12:34:42] [INFO] [Bullet] Starting wall penetration at (517.33765, 591.80914)
+[12:34:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(817.5831, 597.5126), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:34:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[12:34:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29,203405
+[12:34:42] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:42] [INFO] [Bullet] Exiting penetration at (471.00668, 586.2215) after traveling 41,666668 pixels through wall
+[12:34:42] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:34:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(844.4988, 570.1613), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:34:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[12:34:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(501.28693, 582.2003)
+[12:34:43] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:43] [INFO] [Bullet] Using shooter_position, distance=768,2746
+[12:34:43] [INFO] [Bullet] Distance to wall: 768,2746 (52,313232% of viewport)
+[12:34:43] [INFO] [Bullet] Distance-based penetration chance: 85,63457%
+[12:34:43] [INFO] [Bullet] Starting wall penetration at (501.28693, 582.2003)
+[12:34:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45,378216
+[12:34:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:43] [INFO] [Bullet] Exiting penetration at (454.67487, 579.9438) after traveling 41,66667 pixels through wall
+[12:34:43] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:34:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(527.84686, 567.1105)
+[12:34:43] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:43] [INFO] [Bullet] Using shooter_position, distance=774,7494
+[12:34:43] [INFO] [Bullet] Distance to wall: 774,7494 (52,75411% of viewport)
+[12:34:43] [INFO] [Bullet] Distance-based penetration chance: 85,12021%
+[12:34:43] [INFO] [Bullet] Starting wall penetration at (527.84686, 567.1105)
+[12:34:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18,8185
+[12:34:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:43] [INFO] [Bullet] Exiting penetration at (481.18237, 566.6609) after traveling 41,66667 pixels through wall
+[12:34:43] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:34:43] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[12:34:43] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
+[12:34:43] [ENEMY] [Enemy1] Player reloading state changed: false -> true
+[12:34:43] [ENEMY] [Enemy2] Player reloading state changed: false -> true
+[12:34:43] [ENEMY] [Enemy3] Player reloading state changed: false -> true
+[12:34:43] [ENEMY] [Enemy4] Player reloading state changed: false -> true
+[12:34:43] [ENEMY] [Enemy5] Player reloading state changed: false -> true
+[12:34:43] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[12:34:43] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[12:34:43] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[12:34:43] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[12:34:43] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[12:34:43] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(863.5659, 454.5591), source=PLAYER (Player), range=900, listeners=8
+[12:34:43] [ENEMY] [Enemy1] Heard player RELOAD at (863.5659, 454.5591), intensity=0.01, distance=410
+[12:34:43] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=4
+[12:34:43] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=410), can_see=false
+[12:34:43] [ENEMY] [Enemy1] Pursuing vulnerability sound at (863.5659, 454.5591), distance=410
+[12:34:43] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=529), can_see=false
+[12:34:43] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=843), can_see=false
+[12:34:43] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1086), can_see=false
+[12:34:43] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=845), can_see=false
+[12:34:43] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1437), can_see=false
+[12:34:43] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1652), can_see=false
+[12:34:43] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=763), can_see=false
+[12:34:43] [ENEMY] [Enemy1] Player vulnerable (reloading) - pursuing to attack (dist=404)
+[12:34:43] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
+[12:34:43] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
+[12:34:43] [ENEMY] [Enemy1] Player reloading state changed: true -> false
+[12:34:43] [ENEMY] [Enemy2] Player reloading state changed: true -> false
+[12:34:43] [ENEMY] [Enemy3] Player reloading state changed: true -> false
+[12:34:43] [ENEMY] [Enemy4] Player reloading state changed: true -> false
+[12:34:43] [ENEMY] [Enemy5] Player reloading state changed: true -> false
+[12:34:43] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[12:34:43] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[12:34:43] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[12:34:43] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[12:34:43] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[12:34:43] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
+[12:34:44] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
+[12:34:44] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[12:34:44] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[12:34:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(634.1, 592.1244), source=ENEMY (Enemy1), range=1469, listeners=8
+[12:34:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[12:34:44] [INFO] [LastChance] Threat detected: Bullet
+[12:34:44] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:34:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:34:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(634.1, 592.1244), source=ENEMY (Enemy1), range=1469, listeners=8
+[12:34:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[12:34:44] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:34:44] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:34:44] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:34:44] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:34:44] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:34:44] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:34:44] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:34:44] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:34:44] [INFO] [PenultimateHit] Applying saturation to 9 enemies
+[12:34:44] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:34:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(866.6917, 590.7711), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:34:44] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=4
+[12:34:45] [INFO] [LastChance] Threat detected: @Area2D@827
+[12:34:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:34:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:34:45] [ENEMY] [Enemy1] Hit taken, health: 3/4
+[12:34:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(634.1, 592.1244), source=ENEMY (Enemy1), range=1469, listeners=8
+[12:34:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[12:34:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:34:45] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:34:45] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:34:45] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:34:45] [INFO] [LastChance] Player died
+[12:34:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(882.5319, 613.6143), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:34:45] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=4
+[12:34:45] [INFO] [LastChance] Threat detected: @Area2D@828
+[12:34:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:34:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:34:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(634.1, 592.1244), source=ENEMY (Enemy1), range=1469, listeners=8
+[12:34:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[12:34:46] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:34:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.9348, 623.9859), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:34:46] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=4
+[12:34:46] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[12:34:46] [INFO] [LastChance] Threat detected: @Area2D@829
+[12:34:46] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:34:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:34:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(626.1755, 591.027), source=ENEMY (Enemy1), range=1469, listeners=8
+[12:34:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[12:34:46] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[12:34:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.9346, 630.2203), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:34:46] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=4
+[12:34:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(615.6096, 589.5639), source=ENEMY (Enemy1), range=1469, listeners=8
+[12:34:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[12:34:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(65.90102, 621.2801)
+[12:34:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:46] [INFO] [Bullet] Using shooter_position, distance=624,76544
+[12:34:46] [INFO] [Bullet] Distance to wall: 624,76544 (42,541428% of viewport)
+[12:34:46] [INFO] [Bullet] Distance-based penetration chance: 97,035%
+[12:34:46] [INFO] [Bullet] Starting wall penetration at (65.90102, 621.2801)
+[12:34:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(605.0437, 588.1008), source=ENEMY (Enemy1), range=1469, listeners=8
+[12:34:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[12:34:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12,764158
+[12:34:46] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:46] [INFO] [Bullet] Exiting penetration at (19.236404, 621.71814) after traveling 41,666668 pixels through wall
+[12:34:46] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:34:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.9344, 634.2625), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:34:46] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=4
+[12:34:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(564.9575, 635.0056), shooter_id=155508017903, bullet_pos=(937.5412, 677.5068)
+[12:34:46] [INFO] [Bullet] Using shooter_position, distance=374.999969482422
+[12:34:46] [INFO] [Bullet] Distance to wall: 374.999969482422 (25.5344374861978% of viewport)
+[12:34:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:34:46] [INFO] [Bullet] Starting wall penetration at (937.5412, 677.5068)
+[12:34:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48.2178497314453
+[12:34:46] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:46] [INFO] [Bullet] Exiting penetration at (983.9072, 682.7958) after traveling 41.6666679382324 pixels through wall
+[12:34:46] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:34:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(37.94815, 648.3868)
+[12:34:46] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:46] [INFO] [Bullet] Using shooter_position, distance=649,49634
+[12:34:46] [INFO] [Bullet] Distance to wall: 649,49634 (44,2254% of viewport)
+[12:34:46] [INFO] [Bullet] Distance-based penetration chance: 95,070366%
+[12:34:46] [INFO] [Bullet] Starting wall penetration at (37.94815, 648.3868)
+[12:34:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40,71611
+[12:34:46] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:46] [INFO] [Bullet] Exiting penetration at (-8.699654, 649.71344) after traveling 41,666668 pixels through wall
+[12:34:46] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:34:46] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:34:46] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:34:46] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:34:46] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:34:46] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:34:46] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:34:46] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:34:46] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:34:46] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[12:34:46] [INFO] [ScoreManager] Level started with 10 enemies
+[12:34:46] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
+[12:34:46] [ENEMY] [Enemy1] Registered as sound listener
+[12:34:46] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:34:46] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
+[12:34:46] [ENEMY] [Enemy2] Registered as sound listener
+[12:34:46] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:34:46] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
+[12:34:46] [ENEMY] [Enemy3] Registered as sound listener
+[12:34:46] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:34:46] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
+[12:34:46] [ENEMY] [Enemy4] Registered as sound listener
+[12:34:46] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:34:46] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
+[12:34:46] [ENEMY] [Enemy5] Registered as sound listener
+[12:34:46] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:34:46] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
+[12:34:46] [ENEMY] [Enemy6] Registered as sound listener
+[12:34:46] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:34:46] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
+[12:34:46] [ENEMY] [Enemy7] Registered as sound listener
+[12:34:46] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:34:46] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
+[12:34:46] [ENEMY] [Enemy8] Registered as sound listener
+[12:34:46] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:34:46] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
+[12:34:46] [ENEMY] [Enemy9] Registered as sound listener
+[12:34:46] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:34:46] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
+[12:34:46] [ENEMY] [Enemy10] Registered as sound listener
+[12:34:46] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:34:46] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:34:46] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:34:46] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:34:46] [INFO] [LastChance] Found player: Player
+[12:34:46] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:34:46] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:34:46] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:34:46] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:34:47] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:34:47] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:34:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(462.0572, 778.9461), source=PLAYER (AssaultRifle), range=1469, listeners=18
+[12:34:48] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
+[12:34:48] [ENEMY] [Enemy1] Heard gunshot at (462.0572, 778.9461), source_type=0, intensity=0.01, distance=459
+[12:34:48] [ENEMY] [Enemy2] Heard gunshot at (462.0572, 778.9461), source_type=0, intensity=0.04, distance=237
+[12:34:48] [ENEMY] [Enemy4] Heard gunshot at (462.0572, 778.9461), source_type=0, intensity=0.02, distance=359
+[12:34:48] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:34:48] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[12:34:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(484.0781, 760.5181), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:48] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:34:48] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[12:34:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(516.9867, 754.2654), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:48] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:34:48] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:34:48] [ENEMY] [Enemy3] Hit taken, health: 1/4
+[12:34:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.1047, 760.2284), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:34:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:34:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(555.3591, 754.5734), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:48] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:34:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(630.1016, 794.1287), shooter_id=297342601889, bullet_pos=(506.0178, 809.2356)
+[12:34:48] [INFO] [Bullet] Using shooter_position, distance=125.000038146973
+[12:34:48] [INFO] [Bullet] Distance to wall: 125.000038146973 (8.51148245222944% of viewport)
+[12:34:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:34:48] [INFO] [Bullet] Starting wall penetration at (506.0178, 809.2356)
+[12:34:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.6044807434082
+[12:34:48] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:48] [INFO] [Bullet] Exiting penetration at (459.6931, 814.8755) after traveling 41.6666679382324 pixels through wall
+[12:34:48] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:34:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(693.0878, 771.1541), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:34:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:34:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(589.3944, 765.3519), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:48] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=5
+[12:34:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(673.1058, 836.2026), shooter_id=297342601889, bullet_pos=(507.5169, 817.2781)
+[12:34:48] [INFO] [Bullet] Using shooter_position, distance=166.666732788086
+[12:34:48] [INFO] [Bullet] Distance to wall: 166.666732788086 (11.3486443086383% of viewport)
+[12:34:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:34:48] [INFO] [Bullet] Starting wall penetration at (507.5169, 817.2781)
+[12:34:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(913.0139, 732.5301)
+[12:34:48] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:48] [INFO] [Bullet] Using shooter_position, distance=1170,5532
+[12:34:48] [INFO] [Bullet] Distance to wall: 1170,5532 (79,705124% of viewport)
+[12:34:48] [INFO] [Bullet] Distance-based penetration chance: 53,677357%
+[12:34:48] [INFO] [Bullet] Starting wall penetration at (913.0139, 732.5301)
+[12:34:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23,63699
+[12:34:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.1007766723633
+[12:34:48] [ENEMY] [Enemy3] Hit taken, health: 0/4
+[12:34:48] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:34:48] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:34:48] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:34:48] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:48] [INFO] [Bullet] Exiting penetration at (461.1521, 811.9792) after traveling 41.6666679382324 pixels through wall
+[12:34:48] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:34:48] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:48] [INFO] [Bullet] Exiting penetration at (959.5922, 729.65936) after traveling 41,666668 pixels through wall
+[12:34:48] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:34:48] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:34:48] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:34:48] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:34:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(613.0252, 787.8344), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:34:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:34:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(929.2588, 771.2748)
+[12:34:48] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:48] [INFO] [Bullet] Using shooter_position, distance=1207,6368
+[12:34:48] [INFO] [Bullet] Distance to wall: 1207,6368 (82,23022% of viewport)
+[12:34:48] [INFO] [Bullet] Distance-based penetration chance: 50,731422%
+[12:34:48] [INFO] [Bullet] Penetration failed (distance roll)
+[12:34:49] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[12:34:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(623.5413, 945.7063), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:34:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:34:49] [ENEMY] [Enemy4] Hit taken, health: 2/3
+[12:34:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(630.0085, 981.5275), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:34:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:34:49] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[12:34:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(651.2734, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:34:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:34:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(935.2062, 897.0749)
+[12:34:49] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:49] [INFO] [Bullet] Using shooter_position, distance=1295,8989
+[12:34:49] [INFO] [Bullet] Distance to wall: 1295,8989 (88,24014% of viewport)
+[12:34:49] [INFO] [Bullet] Distance-based penetration chance: 43,71984%
+[12:34:49] [INFO] [Bullet] Starting wall penetration at (935.2062, 897.0749)
+[12:34:49] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45,84304
+[12:34:49] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:49] [INFO] [Bullet] Exiting penetration at (980.1827, 884.6293) after traveling 41,666668 pixels through wall
+[12:34:49] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:34:49] [ENEMY] [Enemy4] Hit taken, health: 1/3
+[12:34:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(687.1796, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:34:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:34:49] [ENEMY] [Enemy4] Hit taken, health: 0/3
+[12:34:49] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[12:34:49] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[12:34:49] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[12:34:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(725.2974, 989.0098), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:34:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[12:34:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(758.4398, 976.0755), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:34:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=7
+[12:34:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:34:49] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:34:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(923.03375, 641.3028)
+[12:34:49] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:49] [INFO] [Bullet] Using shooter_position, distance=1123,9487
+[12:34:49] [INFO] [Bullet] Distance to wall: 1123,9487 (76,53174% of viewport)
+[12:34:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(604.24506, 43.017696)
+[12:34:50] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:50] [INFO] [Bullet] Using shooter_position, distance=605,7744
+[12:34:50] [INFO] [Bullet] Distance to wall: 605,7744 (41,248295% of viewport)
+[12:34:50] [INFO] [Bullet] Distance-based penetration chance: 98,543655%
+[12:34:50] [INFO] [Bullet] Starting wall penetration at (604.24506, 43.017696)
+[12:34:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27,93252
+[12:34:50] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:50] [INFO] [Bullet] Exiting penetration at (585.2392, 7.3485794) after traveling 35,416668 pixels through wall
+[12:34:50] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[12:34:50] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:34:50] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[12:34:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(810.2457, 734.6382), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:34:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[12:34:50] [ENEMY] [Enemy2] Hit taken, health: 2/3
+[12:34:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(789.9976, 706.6161), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:34:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[12:34:50] [ENEMY] [Enemy2] Hit taken, health: 1/3
+[12:34:50] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[12:34:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(761.8431, 692.2711), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:34:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[12:34:50] [ENEMY] [Enemy10] FLANKING started: target=(950.8962, 737.3131), side=left, pos=(953.4262, 1416.483)
+[12:34:50] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:34:50] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:34:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(547.3694, 642.4068), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:34:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[12:34:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(733.3418, 693.9359), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:34:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[12:34:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(536.8629, 642.8331), source=ENEMY (Enemy2), range=1469, listeners=8
+[12:34:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[12:34:50] [ENEMY] [Enemy2] Hit taken, health: 0/3
+[12:34:50] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[12:34:50] [INFO] [ScoreManager] Kill registered. Combo: 3 (points: 3000)
+[12:34:50] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
+[12:34:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(705.6559, 711.9138), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:34:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=5
+[12:34:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(678.4323, 739.1375), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:34:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=5
+[12:34:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(469.4828, 633.3185), shooter_id=297057388454, bullet_pos=(922.5802, 702.3995)
+[12:34:51] [INFO] [Bullet] Using shooter_position, distance=458.333343505859
+[12:34:51] [INFO] [Bullet] Distance to wall: 458.333343505859 (31.2087601600164% of viewport)
+[12:34:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:34:51] [INFO] [Bullet] Starting wall penetration at (922.5802, 702.3995)
+[12:34:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33.0917816162109
+[12:34:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:51] [INFO] [Bullet] Exiting penetration at (968.7137, 709.4332) after traveling 41.6666641235352 pixels through wall
+[12:34:51] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:34:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(469.4828, 633.3185), shooter_id=297057388454, bullet_pos=(968.7137, 709.4332)
+[12:34:51] [INFO] [Bullet] Using shooter_position, distance=505
+[12:34:51] [INFO] [Bullet] Distance to wall: 505 (34.386378613117% of viewport)
+[12:34:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:34:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(490.0438, 605.7411), shooter_id=297057388454, bullet_pos=(1364.928, 591.4908)
+[12:34:51] [INFO] [Bullet] Using shooter_position, distance=874.999816894531
+[12:34:51] [INFO] [Bullet] Distance to wall: 874.999816894531 (59.5803465151354% of viewport)
+[12:34:51] [INFO] [Bullet] Distance-based penetration chance: 77.1562623990087%
+[12:34:51] [INFO] [Bullet] Starting wall penetration at (1364.928, 591.4908)
+[12:34:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.5912647247314
+[12:34:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:51] [INFO] [Bullet] Exiting penetration at (1411.588, 590.7308) after traveling 41.6666717529297 pixels through wall
+[12:34:51] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:34:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(65.43773, 450.14362)
+[12:34:51] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:51] [INFO] [Bullet] Using shooter_position, distance=454,87512
+[12:34:51] [INFO] [Bullet] Distance to wall: 454,87512 (30,973286% of viewport)
+[12:34:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:34:51] [INFO] [Bullet] Starting wall penetration at (65.43773, 450.14362)
+[12:34:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10,54186
+[12:34:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:51] [INFO] [Bullet] Exiting penetration at (22.242287, 432.48203) after traveling 41,66667 pixels through wall
+[12:34:51] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:34:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(225.5321, 473.60693)
+[12:34:51] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:51] [INFO] [Bullet] Using shooter_position, distance=524,5648
+[12:34:51] [INFO] [Bullet] Distance to wall: 524,5648 (35,718582% of viewport)
+[12:34:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:34:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(63.037148, 555.7637)
+[12:34:51] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:51] [INFO] [Bullet] Using shooter_position, distance=559,3272
+[12:34:51] [INFO] [Bullet] Distance to wall: 559,3272 (38,085617% of viewport)
+[12:34:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:34:51] [INFO] [Bullet] Starting wall penetration at (63.037148, 555.7637)
+[12:34:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 5,638081
+[12:34:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:51] [INFO] [Bullet] Exiting penetration at (26.96847, 573.9999) after traveling 35,416668 pixels through wall
+[12:34:51] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[12:34:52] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[12:34:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(481.6389, 625.1027), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:34:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
+[12:34:52] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:34:52] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:34:52] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:34:52] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:34:52] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:34:52] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:34:52] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:34:52] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:34:52] [INFO] [PenultimateHit] Applying saturation to 8 enemies
+[12:34:52] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:34:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(453.0394, 625.1027), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:34:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
+[12:34:52] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:34:52] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:34:52] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:34:52] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:34:52] [INFO] [LastChance] Player died
+[12:34:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(413.9894, 625.1027), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:34:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=2
+[12:34:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(375.4894, 625.1027), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:34:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=2
+[12:34:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(336.9894, 625.1027), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:34:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=2
+[12:34:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(458.2647, 408.9448), source=ENEMY (Enemy1), range=1469, listeners=7
+[12:34:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=3
+[12:34:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(498.8429, 463.5709), shooter_id=296772175767, bullet_pos=(498.8429, 463.5709)
+[12:34:53] [INFO] [Bullet] Using shooter_position, distance=0
+[12:34:53] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:34:53] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:34:53] [INFO] [Bullet] Starting wall penetration at (498.8429, 463.5709)
+[12:34:53] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48.981803894043
+[12:34:53] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:53] [INFO] [Bullet] Exiting penetration at (475.5181, 503.9904) after traveling 41.6666679382324 pixels through wall
+[12:34:53] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:34:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(298.4894, 625.1027), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:34:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=2
+[12:34:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(458.2647, 408.9448), source=ENEMY (Enemy1), range=1469, listeners=7
+[12:34:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=3
+[12:34:53] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:34:53] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:34:53] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:34:53] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:34:53] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:34:53] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:34:53] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:34:53] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:34:53] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[12:34:53] [INFO] [ScoreManager] Level started with 10 enemies
+[12:34:53] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 8)
+[12:34:53] [ENEMY] [Enemy1] Registered as sound listener
+[12:34:53] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:34:53] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 9)
+[12:34:53] [ENEMY] [Enemy2] Registered as sound listener
+[12:34:53] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:34:53] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 10)
+[12:34:53] [ENEMY] [Enemy3] Registered as sound listener
+[12:34:53] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:34:53] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 11)
+[12:34:53] [ENEMY] [Enemy4] Registered as sound listener
+[12:34:53] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:34:53] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 12)
+[12:34:53] [ENEMY] [Enemy5] Registered as sound listener
+[12:34:53] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:34:53] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 13)
+[12:34:53] [ENEMY] [Enemy6] Registered as sound listener
+[12:34:53] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:34:53] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 14)
+[12:34:53] [ENEMY] [Enemy7] Registered as sound listener
+[12:34:53] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:34:53] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 15)
+[12:34:53] [ENEMY] [Enemy8] Registered as sound listener
+[12:34:53] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:34:53] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 16)
+[12:34:53] [ENEMY] [Enemy9] Registered as sound listener
+[12:34:53] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:34:53] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 17)
+[12:34:53] [ENEMY] [Enemy10] Registered as sound listener
+[12:34:53] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:34:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(449.6667, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=17
+[12:34:53] [INFO] [SoundPropagation] Cleaned up 7 invalid listeners
+[12:34:53] [ENEMY] [Enemy4] Heard gunshot at (449.6667, 1256), source_type=0, intensity=0.01, distance=499
+[12:34:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:34:53] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:34:53] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:34:53] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:34:53] [INFO] [LastChance] Found player: Player
+[12:34:53] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:34:53] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:34:53] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:34:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(443, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=5
+[12:34:53] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:34:53] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:34:53] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:34:53] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:34:53] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:34:53] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:34:53] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:34:53] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:34:53] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:34:53] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:34:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(420.5139, 1252.772), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:54] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=5
+[12:34:55] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:34:55] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:34:55] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:34:55] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:34:55] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:34:55] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:34:55] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:34:55] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:34:55] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:34:55] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[12:34:55] [INFO] [ScoreManager] Level started with 10 enemies
+[12:34:55] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:34:55] [ENEMY] [Enemy1] Registered as sound listener
+[12:34:55] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:34:55] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:34:55] [ENEMY] [Enemy2] Registered as sound listener
+[12:34:55] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:34:55] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:34:55] [ENEMY] [Enemy3] Registered as sound listener
+[12:34:55] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:34:55] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:34:55] [ENEMY] [Enemy4] Registered as sound listener
+[12:34:55] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:34:55] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:34:55] [ENEMY] [Enemy5] Registered as sound listener
+[12:34:55] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:34:55] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:34:55] [ENEMY] [Enemy6] Registered as sound listener
+[12:34:55] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:34:55] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:34:55] [ENEMY] [Enemy7] Registered as sound listener
+[12:34:55] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:34:55] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:34:55] [ENEMY] [Enemy8] Registered as sound listener
+[12:34:55] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:34:55] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:34:55] [ENEMY] [Enemy9] Registered as sound listener
+[12:34:55] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:34:55] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:34:55] [ENEMY] [Enemy10] Registered as sound listener
+[12:34:55] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:34:55] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:34:55] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:34:55] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:34:55] [INFO] [LastChance] Found player: Player
+[12:34:55] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:34:55] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:34:55] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:34:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:34:55] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:34:55] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[12:34:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:34:55] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:34:55] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:34:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:34:56] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:34:56] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:34:56] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:34:56] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:34:56] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:34:56] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:34:56] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:34:56] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:34:56] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:34:56] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:34:56] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:34:56] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:34:56] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:34:56] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:34:56] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:34:56] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:34:56] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:34:56] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:34:56] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:34:56] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[12:34:56] [INFO] [ScoreManager] Level started with 10 enemies
+[12:34:56] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:34:56] [ENEMY] [Enemy1] Registered as sound listener
+[12:34:56] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:34:56] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:34:56] [ENEMY] [Enemy2] Registered as sound listener
+[12:34:56] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:34:56] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:34:56] [ENEMY] [Enemy3] Registered as sound listener
+[12:34:56] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:34:56] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:34:56] [ENEMY] [Enemy4] Registered as sound listener
+[12:34:56] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:34:56] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:34:56] [ENEMY] [Enemy5] Registered as sound listener
+[12:34:56] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:34:56] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:34:56] [ENEMY] [Enemy6] Registered as sound listener
+[12:34:56] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:34:56] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:34:56] [ENEMY] [Enemy7] Registered as sound listener
+[12:34:56] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:34:56] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:34:56] [ENEMY] [Enemy8] Registered as sound listener
+[12:34:56] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:34:56] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:34:56] [ENEMY] [Enemy9] Registered as sound listener
+[12:34:56] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:34:56] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:34:56] [ENEMY] [Enemy10] Registered as sound listener
+[12:34:56] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:34:56] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:34:56] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:34:56] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:34:56] [INFO] [LastChance] Found player: Player
+[12:34:56] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:34:56] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:34:56] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:34:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:34:57] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:34:57] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[12:34:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:34:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:34:57] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:34:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:34:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:34:57] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:34:57] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:34:57] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:34:57] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:34:57] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:34:57] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:34:57] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:34:57] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:34:57] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:34:57] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:34:57] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:34:57] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:34:57] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:34:57] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:34:57] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:34:57] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:34:57] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:34:57] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:34:57] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[12:34:57] [INFO] [ScoreManager] Level started with 10 enemies
+[12:34:57] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:34:57] [ENEMY] [Enemy1] Registered as sound listener
+[12:34:57] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:34:57] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:34:57] [ENEMY] [Enemy2] Registered as sound listener
+[12:34:57] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:34:57] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:34:57] [ENEMY] [Enemy3] Registered as sound listener
+[12:34:57] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:34:57] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:34:57] [ENEMY] [Enemy4] Registered as sound listener
+[12:34:57] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:34:57] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:34:57] [ENEMY] [Enemy5] Registered as sound listener
+[12:34:57] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:34:57] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:34:57] [ENEMY] [Enemy6] Registered as sound listener
+[12:34:57] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:34:57] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:34:57] [ENEMY] [Enemy7] Registered as sound listener
+[12:34:57] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:34:57] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:34:57] [ENEMY] [Enemy8] Registered as sound listener
+[12:34:57] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:34:57] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:34:57] [ENEMY] [Enemy9] Registered as sound listener
+[12:34:57] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:34:57] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:34:57] [ENEMY] [Enemy10] Registered as sound listener
+[12:34:57] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:34:57] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:34:57] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:34:57] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:34:57] [INFO] [LastChance] Found player: Player
+[12:34:57] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:34:57] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:34:57] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:34:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(494.2737, 1209.329), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:34:58] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:34:58] [ENEMY] [Enemy4] Heard gunshot at (494.2737, 1209.329), source_type=0, intensity=0.01, distance=435
+[12:34:58] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:34:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(674.1398, 1001.3062)
+[12:34:58] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:58] [INFO] [Bullet] Using shooter_position, distance=1207,0951
+[12:34:58] [INFO] [Bullet] Distance to wall: 1207,0951 (82,19333% of viewport)
+[12:34:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(532.2999, 1209.021), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:58] [ENEMY] [Enemy3] Heard gunshot at (532.2999, 1209.021), source_type=0, intensity=0.01, distance=489
+[12:34:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
+[12:34:58] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:34:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(665.925, 1017.73914)
+[12:34:58] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:58] [INFO] [Bullet] Using shooter_position, distance=1216,2438
+[12:34:58] [INFO] [Bullet] Distance to wall: 1216,2438 (82,81628% of viewport)
+[12:34:58] [INFO] [Bullet] Distance-based penetration chance: 50,047676%
+[12:34:58] [INFO] [Bullet] Starting wall penetration at (665.925, 1017.73914)
+[12:34:58] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25,027737
+[12:34:58] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:34:58] [INFO] [Bullet] Exiting penetration at (692.65, 979.4828) after traveling 41,666676 pixels through wall
+[12:34:58] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:34:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(997.8919, 1383.4304)
+[12:34:58] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:58] [INFO] [Bullet] Using shooter_position, distance=1705,7749
+[12:34:58] [INFO] [Bullet] Distance to wall: 1705,7749 (116,14935% of viewport)
+[12:34:58] [INFO] [Bullet] Distance-based penetration chance: 26,77013%
+[12:34:58] [INFO] [Bullet] Penetration failed (distance roll)
+[12:34:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(997.8919, 1383.4304)
+[12:34:58] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:34:58] [INFO] [Bullet] Using shooter_position, distance=1705,7749
+[12:34:58] [INFO] [Bullet] Distance to wall: 1705,7749 (116,14935% of viewport)
+[12:34:58] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[12:34:58] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:34:58] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:34:58] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:34:58] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:34:58] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:34:58] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:34:58] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:34:58] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:34:58] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:34:58] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:34:58] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[12:34:58] [INFO] [ScoreManager] Level started with 10 enemies
+[12:34:58] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:34:58] [ENEMY] [Enemy1] Registered as sound listener
+[12:34:58] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:34:58] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:34:58] [ENEMY] [Enemy2] Registered as sound listener
+[12:34:58] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:34:58] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:34:58] [ENEMY] [Enemy3] Registered as sound listener
+[12:34:58] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:34:58] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:34:58] [ENEMY] [Enemy4] Registered as sound listener
+[12:34:58] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:34:58] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:34:58] [ENEMY] [Enemy5] Registered as sound listener
+[12:34:58] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:34:58] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:34:58] [ENEMY] [Enemy6] Registered as sound listener
+[12:34:58] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:34:58] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:34:58] [ENEMY] [Enemy7] Registered as sound listener
+[12:34:58] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:34:58] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:34:58] [ENEMY] [Enemy8] Registered as sound listener
+[12:34:58] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:34:58] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:34:58] [ENEMY] [Enemy9] Registered as sound listener
+[12:34:58] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:34:58] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:34:58] [ENEMY] [Enemy10] Registered as sound listener
+[12:34:58] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:34:58] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:34:58] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:34:58] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:34:58] [INFO] [LastChance] Found player: Player
+[12:34:58] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:34:58] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:34:58] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:34:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:34:59] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:34:59] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[12:34:59] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:34:59] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:34:59] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:34:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:34:59] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:34:59] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:34:59] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:34:59] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:34:59] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:34:59] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:34:59] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:34:59] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:34:59] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:34:59] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:34:59] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:34:59] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:34:59] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:34:59] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:34:59] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:34:59] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:34:59] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:34:59] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:34:59] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:34:59] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:34:59] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[12:34:59] [INFO] [ScoreManager] Level started with 10 enemies
+[12:34:59] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:34:59] [ENEMY] [Enemy1] Registered as sound listener
+[12:34:59] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:34:59] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:34:59] [ENEMY] [Enemy2] Registered as sound listener
+[12:34:59] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:34:59] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:34:59] [ENEMY] [Enemy3] Registered as sound listener
+[12:34:59] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:34:59] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:34:59] [ENEMY] [Enemy4] Registered as sound listener
+[12:34:59] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:34:59] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:34:59] [ENEMY] [Enemy5] Registered as sound listener
+[12:34:59] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:34:59] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:34:59] [ENEMY] [Enemy6] Registered as sound listener
+[12:34:59] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:34:59] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:34:59] [ENEMY] [Enemy7] Registered as sound listener
+[12:34:59] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:34:59] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:34:59] [ENEMY] [Enemy8] Registered as sound listener
+[12:34:59] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:34:59] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:34:59] [ENEMY] [Enemy9] Registered as sound listener
+[12:34:59] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:34:59] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:34:59] [ENEMY] [Enemy10] Registered as sound listener
+[12:34:59] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:35:00] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:35:00] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:35:00] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:35:00] [INFO] [LastChance] Found player: Player
+[12:35:00] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:35:00] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:35:00] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:35:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:35:00] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:35:00] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[12:35:00] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:00] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:00] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(62.232513, 787.2721)
+[12:35:00] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:35:00] [INFO] [Bullet] Using shooter_position, distance=789,72797
+[12:35:00] [INFO] [Bullet] Distance to wall: 789,72797 (53,77403% of viewport)
+[12:35:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(120.59347, 692.559)
+[12:35:00] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:35:00] [INFO] [Bullet] Using shooter_position, distance=702,9799
+[12:35:00] [INFO] [Bullet] Distance to wall: 702,9799 (47,867195% of viewport)
+[12:35:00] [INFO] [Bullet] Distance-based penetration chance: 90,82161%
+[12:35:00] [INFO] [Bullet] Starting wall penetration at (120.59347, 692.559)
+[12:35:00] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35,06165
+[12:35:00] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:35:00] [INFO] [Bullet] Exiting penetration at (141.79576, 658.15015) after traveling 35,416668 pixels through wall
+[12:35:00] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[12:35:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:00] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(61.914368, 787.53516)
+[12:35:00] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:35:00] [INFO] [Bullet] Using shooter_position, distance=789,9652
+[12:35:00] [INFO] [Bullet] Distance to wall: 789,9652 (53,790188% of viewport)
+[12:35:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(120.68747, 693.0773)
+[12:35:00] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:35:00] [INFO] [Bullet] Using shooter_position, distance=703,5066
+[12:35:00] [INFO] [Bullet] Distance to wall: 703,5066 (47,903057% of viewport)
+[12:35:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(63.849304, 785.9396)
+[12:35:01] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:35:01] [INFO] [Bullet] Using shooter_position, distance=788,5289
+[12:35:01] [INFO] [Bullet] Distance to wall: 788,5289 (53,692383% of viewport)
+[12:35:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(124.57802, 692.7269)
+[12:35:01] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:35:01] [INFO] [Bullet] Using shooter_position, distance=703,83966
+[12:35:01] [INFO] [Bullet] Distance to wall: 703,83966 (47,92574% of viewport)
+[12:35:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(64.917755, 785.06396)
+[12:35:01] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:35:01] [INFO] [Bullet] Using shooter_position, distance=787,74347
+[12:35:01] [INFO] [Bullet] Distance to wall: 787,74347 (53,638905% of viewport)
+[12:35:01] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:35:01] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:35:01] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:35:01] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:35:01] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:35:01] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:35:01] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:35:01] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:35:01] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[12:35:01] [INFO] [ScoreManager] Level started with 10 enemies
+[12:35:01] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:35:01] [ENEMY] [Enemy1] Registered as sound listener
+[12:35:01] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:35:01] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:35:01] [ENEMY] [Enemy2] Registered as sound listener
+[12:35:01] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:35:01] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:35:01] [ENEMY] [Enemy3] Registered as sound listener
+[12:35:01] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:35:01] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:35:01] [ENEMY] [Enemy4] Registered as sound listener
+[12:35:01] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:35:01] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:35:01] [ENEMY] [Enemy5] Registered as sound listener
+[12:35:01] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:35:01] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:35:01] [ENEMY] [Enemy6] Registered as sound listener
+[12:35:01] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:35:01] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:35:01] [ENEMY] [Enemy7] Registered as sound listener
+[12:35:01] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:35:01] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:35:01] [ENEMY] [Enemy8] Registered as sound listener
+[12:35:01] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:35:01] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:35:01] [ENEMY] [Enemy9] Registered as sound listener
+[12:35:01] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:35:01] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:35:01] [ENEMY] [Enemy10] Registered as sound listener
+[12:35:01] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:35:01] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:35:01] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:35:01] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:35:01] [INFO] [LastChance] Found player: Player
+[12:35:01] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:35:01] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:35:01] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:35:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:35:01] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:35:01] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[12:35:01] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:01] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:35:01] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:35:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:02] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:02] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:35:02] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:35:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:02] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:02] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:35:02] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:35:02] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:35:02] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:35:02] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:35:02] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:35:02] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:35:02] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:35:02] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:35:02] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:35:02] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:35:02] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:35:02] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:35:02] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:35:02] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:35:02] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:35:02] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:35:02] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:35:02] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:35:02] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[12:35:02] [INFO] [ScoreManager] Level started with 10 enemies
+[12:35:02] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:35:02] [ENEMY] [Enemy1] Registered as sound listener
+[12:35:02] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:35:02] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:35:02] [ENEMY] [Enemy2] Registered as sound listener
+[12:35:02] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:35:02] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:35:02] [ENEMY] [Enemy3] Registered as sound listener
+[12:35:02] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:35:02] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:35:02] [ENEMY] [Enemy4] Registered as sound listener
+[12:35:02] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:35:02] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:35:02] [ENEMY] [Enemy5] Registered as sound listener
+[12:35:02] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:35:02] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:35:02] [ENEMY] [Enemy6] Registered as sound listener
+[12:35:02] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:35:02] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:35:02] [ENEMY] [Enemy7] Registered as sound listener
+[12:35:02] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:35:02] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:35:02] [ENEMY] [Enemy8] Registered as sound listener
+[12:35:02] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:35:02] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:35:02] [ENEMY] [Enemy9] Registered as sound listener
+[12:35:02] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:35:02] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:35:02] [ENEMY] [Enemy10] Registered as sound listener
+[12:35:02] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:35:02] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:35:02] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:35:02] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:35:02] [INFO] [LastChance] Found player: Player
+[12:35:02] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:35:02] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:35:02] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:35:03] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:35:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1136.944), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:35:03] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:35:03] [ENEMY] [Enemy3] Heard gunshot at (450, 1136.944), source_type=0, intensity=0.01, distance=461
+[12:35:03] [ENEMY] [Enemy4] Heard gunshot at (450, 1136.944), source_type=0, intensity=0.01, distance=423
+[12:35:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=4
+[12:35:03] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:35:03] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:35:03] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:35:03] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:35:03] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:35:03] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:35:03] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:35:03] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:35:03] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:35:03] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:35:04] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:35:04] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:35:04] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:35:04] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:35:04] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:35:04] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:35:04] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:35:04] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:35:04] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:35:04] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[12:35:04] [INFO] [ScoreManager] Level started with 10 enemies
+[12:35:04] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:35:04] [ENEMY] [Enemy1] Registered as sound listener
+[12:35:04] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:35:04] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:35:04] [ENEMY] [Enemy2] Registered as sound listener
+[12:35:04] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:35:04] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:35:04] [ENEMY] [Enemy3] Registered as sound listener
+[12:35:04] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:35:04] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:35:04] [ENEMY] [Enemy4] Registered as sound listener
+[12:35:04] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:35:04] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:35:04] [ENEMY] [Enemy5] Registered as sound listener
+[12:35:04] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:35:04] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:35:04] [ENEMY] [Enemy6] Registered as sound listener
+[12:35:04] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:35:04] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:35:04] [ENEMY] [Enemy7] Registered as sound listener
+[12:35:04] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:35:04] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:35:04] [ENEMY] [Enemy8] Registered as sound listener
+[12:35:04] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:35:04] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:35:04] [ENEMY] [Enemy9] Registered as sound listener
+[12:35:04] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:35:04] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:35:04] [ENEMY] [Enemy10] Registered as sound listener
+[12:35:04] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:35:04] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:35:04] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:35:04] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:35:04] [INFO] [LastChance] Found player: Player
+[12:35:04] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:35:04] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:35:04] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:35:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1419.056), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:35:05] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:35:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=0, below_threshold=7
+[12:35:05] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:35:05] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:35:05] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:35:05] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:35:05] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:35:05] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:35:05] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:35:05] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:35:05] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:35:05] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:35:05] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:35:05] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:35:05] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:35:05] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:35:05] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:35:05] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:35:05] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:35:05] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:35:05] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:35:05] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[12:35:05] [INFO] [ScoreManager] Level started with 10 enemies
+[12:35:05] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:35:05] [ENEMY] [Enemy1] Registered as sound listener
+[12:35:05] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:35:05] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:35:05] [ENEMY] [Enemy2] Registered as sound listener
+[12:35:05] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:35:05] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:35:05] [ENEMY] [Enemy3] Registered as sound listener
+[12:35:05] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:35:05] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:35:05] [ENEMY] [Enemy4] Registered as sound listener
+[12:35:05] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:35:05] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:35:05] [ENEMY] [Enemy5] Registered as sound listener
+[12:35:05] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:35:05] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:35:05] [ENEMY] [Enemy6] Registered as sound listener
+[12:35:05] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:35:05] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:35:05] [ENEMY] [Enemy7] Registered as sound listener
+[12:35:05] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:35:05] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:35:05] [ENEMY] [Enemy8] Registered as sound listener
+[12:35:05] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:35:05] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:35:05] [ENEMY] [Enemy9] Registered as sound listener
+[12:35:05] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:35:05] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:35:05] [ENEMY] [Enemy10] Registered as sound listener
+[12:35:05] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:35:06] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:35:06] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:35:06] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:35:06] [INFO] [LastChance] Found player: Player
+[12:35:06] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:35:06] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:35:06] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:35:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:35:06] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:35:06] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[12:35:06] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:06] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:35:06] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:35:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:07] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:35:07] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:35:07] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:35:07] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:35:07] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:35:07] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:35:07] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:35:07] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:35:07] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:35:07] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:35:08] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:35:08] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:35:08] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:35:08] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:35:08] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:35:08] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:35:08] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:35:08] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:35:08] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:35:08] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[12:35:08] [INFO] [ScoreManager] Level started with 10 enemies
+[12:35:08] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:35:08] [ENEMY] [Enemy1] Registered as sound listener
+[12:35:08] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:35:08] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:35:08] [ENEMY] [Enemy2] Registered as sound listener
+[12:35:08] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:35:08] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:35:08] [ENEMY] [Enemy3] Registered as sound listener
+[12:35:08] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:35:08] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:35:08] [ENEMY] [Enemy4] Registered as sound listener
+[12:35:08] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:35:08] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:35:08] [ENEMY] [Enemy5] Registered as sound listener
+[12:35:08] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:35:08] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:35:08] [ENEMY] [Enemy6] Registered as sound listener
+[12:35:08] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:35:08] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:35:08] [ENEMY] [Enemy7] Registered as sound listener
+[12:35:08] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:35:08] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:35:08] [ENEMY] [Enemy8] Registered as sound listener
+[12:35:08] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:35:08] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:35:08] [ENEMY] [Enemy9] Registered as sound listener
+[12:35:08] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:35:08] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:35:08] [ENEMY] [Enemy10] Registered as sound listener
+[12:35:08] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:35:08] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:35:08] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:35:08] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:35:08] [INFO] [LastChance] Found player: Player
+[12:35:08] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:35:08] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:35:08] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:35:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:35:08] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:35:08] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[12:35:08] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:35:08] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:35:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:08] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:35:08] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:35:08] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:35:08] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:35:08] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:35:08] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:35:08] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:35:08] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:35:08] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:35:08] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:35:09] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:35:09] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:35:09] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:35:09] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:35:09] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:35:09] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:35:09] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:35:09] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:35:09] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:35:09] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[12:35:09] [INFO] [ScoreManager] Level started with 10 enemies
+[12:35:09] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:35:09] [ENEMY] [Enemy1] Registered as sound listener
+[12:35:09] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:35:09] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:35:09] [ENEMY] [Enemy2] Registered as sound listener
+[12:35:09] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:35:09] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:35:09] [ENEMY] [Enemy3] Registered as sound listener
+[12:35:09] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:35:09] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:35:09] [ENEMY] [Enemy4] Registered as sound listener
+[12:35:09] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:35:09] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:35:09] [ENEMY] [Enemy5] Registered as sound listener
+[12:35:09] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:35:09] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:35:09] [ENEMY] [Enemy6] Registered as sound listener
+[12:35:09] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:35:09] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:35:09] [ENEMY] [Enemy7] Registered as sound listener
+[12:35:09] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:35:09] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:35:09] [ENEMY] [Enemy8] Registered as sound listener
+[12:35:09] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:35:09] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:35:09] [ENEMY] [Enemy9] Registered as sound listener
+[12:35:09] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:35:09] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:35:09] [ENEMY] [Enemy10] Registered as sound listener
+[12:35:09] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:35:09] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:35:09] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:35:09] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:35:09] [INFO] [LastChance] Found player: Player
+[12:35:09] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:35:09] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:35:09] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:35:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:35:09] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:35:09] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[12:35:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1258.0072, 1374.6096)
+[12:35:09] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:35:09] [INFO] [Bullet] Using shooter_position, distance=1863,3662
+[12:35:09] [INFO] [Bullet] Distance to wall: 1863,3662 (126,880035% of viewport)
+[12:35:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:10] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:35:10] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:35:10] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:35:10] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:35:10] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:35:10] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:35:10] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:35:10] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:35:10] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[12:35:10] [INFO] [ScoreManager] Level started with 10 enemies
+[12:35:10] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:35:10] [ENEMY] [Enemy1] Registered as sound listener
+[12:35:10] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:35:10] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:35:10] [ENEMY] [Enemy2] Registered as sound listener
+[12:35:10] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:35:10] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:35:10] [ENEMY] [Enemy3] Registered as sound listener
+[12:35:10] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:35:10] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:35:10] [ENEMY] [Enemy4] Registered as sound listener
+[12:35:10] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:35:10] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:35:10] [ENEMY] [Enemy5] Registered as sound listener
+[12:35:10] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:35:10] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:35:10] [ENEMY] [Enemy6] Registered as sound listener
+[12:35:10] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:35:10] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:35:10] [ENEMY] [Enemy7] Registered as sound listener
+[12:35:10] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:35:10] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:35:10] [ENEMY] [Enemy8] Registered as sound listener
+[12:35:10] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:35:10] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:35:10] [ENEMY] [Enemy9] Registered as sound listener
+[12:35:10] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:35:10] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:35:10] [ENEMY] [Enemy10] Registered as sound listener
+[12:35:10] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:35:10] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:35:10] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:35:10] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:35:10] [INFO] [LastChance] Found player: Player
+[12:35:10] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:35:10] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:35:10] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:35:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:35:11] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:35:11] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[12:35:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(469.33032, 1613.8113)
+[12:35:11] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:35:11] [INFO] [Bullet] Using shooter_position, distance=1680,6719
+[12:35:11] [INFO] [Bullet] Distance to wall: 1680,6719 (114,44005% of viewport)
+[12:35:11] [INFO] [Bullet] Distance-based penetration chance: 27,111992%
+[12:35:11] [INFO] [Bullet] Penetration failed (distance roll)
+[12:35:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(470.7452, 1613.7324)
+[12:35:11] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:35:11] [INFO] [Bullet] Using shooter_position, distance=1680,9917
+[12:35:11] [INFO] [Bullet] Distance to wall: 1680,9917 (114,461815% of viewport)
+[12:35:11] [INFO] [Bullet] Distance-based penetration chance: 27,107637%
+[12:35:11] [INFO] [Bullet] Penetration failed (distance roll)
+[12:35:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(471.06012, 1613.7136)
+[12:35:11] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:35:11] [INFO] [Bullet] Using shooter_position, distance=1681,062
+[12:35:11] [INFO] [Bullet] Distance to wall: 1681,062 (114,466606% of viewport)
+[12:35:11] [INFO] [Bullet] Distance-based penetration chance: 27,106678%
+[12:35:11] [INFO] [Bullet] Penetration failed (distance roll)
+[12:35:11] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:35:11] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:35:11] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:35:11] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:35:11] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:35:11] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:35:11] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:35:11] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:35:11] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[12:35:11] [INFO] [ScoreManager] Level started with 10 enemies
+[12:35:11] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:35:11] [ENEMY] [Enemy1] Registered as sound listener
+[12:35:11] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:35:11] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:35:11] [ENEMY] [Enemy2] Registered as sound listener
+[12:35:11] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:35:11] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:35:11] [ENEMY] [Enemy3] Registered as sound listener
+[12:35:11] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:35:11] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:35:11] [ENEMY] [Enemy4] Registered as sound listener
+[12:35:11] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:35:11] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:35:11] [ENEMY] [Enemy5] Registered as sound listener
+[12:35:11] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:35:11] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:35:11] [ENEMY] [Enemy6] Registered as sound listener
+[12:35:11] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:35:11] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:35:11] [ENEMY] [Enemy7] Registered as sound listener
+[12:35:11] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:35:11] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:35:11] [ENEMY] [Enemy8] Registered as sound listener
+[12:35:11] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:35:11] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:35:11] [ENEMY] [Enemy9] Registered as sound listener
+[12:35:11] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:35:11] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:35:11] [ENEMY] [Enemy10] Registered as sound listener
+[12:35:11] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:35:11] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:35:11] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:35:11] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:35:11] [INFO] [LastChance] Found player: Player
+[12:35:11] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:35:11] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:35:11] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:35:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:35:12] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:35:12] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[12:35:12] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:12] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(50.86345, 1229.7324)
+[12:35:12] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:35:12] [INFO] [Bullet] Using shooter_position, distance=1230,7839
+[12:35:12] [INFO] [Bullet] Distance to wall: 1230,7839 (83,80634% of viewport)
+[12:35:12] [INFO] [Bullet] Distance-based penetration chance: 48,892605%
+[12:35:12] [INFO] [Bullet] Starting wall penetration at (50.86345, 1229.7324)
+[12:35:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27,762423
+[12:35:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:35:12] [INFO] [Bullet] Exiting penetration at (4.297512, 1226.6678) after traveling 41,66667 pixels through wall
+[12:35:12] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:35:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:12] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(50.835953, 1230.152)
+[12:35:12] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:35:12] [INFO] [Bullet] Using shooter_position, distance=1231,2019
+[12:35:12] [INFO] [Bullet] Distance to wall: 1231,2019 (83,8348% of viewport)
+[12:35:12] [INFO] [Bullet] Distance-based penetration chance: 48,859398%
+[12:35:12] [INFO] [Bullet] Starting wall penetration at (50.835953, 1230.152)
+[12:35:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27,791264
+[12:35:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:35:12] [INFO] [Bullet] Exiting penetration at (4.266823, 1227.1364) after traveling 41,666668 pixels through wall
+[12:35:12] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:35:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(50.6577, 1233.071)
+[12:35:12] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:35:12] [INFO] [Bullet] Using shooter_position, distance=1234,1112
+[12:35:12] [INFO] [Bullet] Distance to wall: 1234,1112 (84,032906% of viewport)
+[12:35:12] [INFO] [Bullet] Distance-based penetration chance: 48,62828%
+[12:35:12] [INFO] [Bullet] Penetration failed (distance roll)
+[12:35:12] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:35:12] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:35:12] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:35:12] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:35:12] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:35:12] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:35:12] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:35:12] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:35:12] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[12:35:12] [INFO] [ScoreManager] Level started with 10 enemies
+[12:35:12] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:35:12] [ENEMY] [Enemy1] Registered as sound listener
+[12:35:12] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:35:12] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:35:12] [ENEMY] [Enemy2] Registered as sound listener
+[12:35:12] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:35:12] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:35:12] [ENEMY] [Enemy3] Registered as sound listener
+[12:35:12] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:35:12] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:35:12] [ENEMY] [Enemy4] Registered as sound listener
+[12:35:12] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:35:12] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:35:12] [ENEMY] [Enemy5] Registered as sound listener
+[12:35:12] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:35:12] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:35:12] [ENEMY] [Enemy6] Registered as sound listener
+[12:35:12] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:35:12] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:35:12] [ENEMY] [Enemy7] Registered as sound listener
+[12:35:12] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:35:12] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:35:12] [ENEMY] [Enemy8] Registered as sound listener
+[12:35:12] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:35:12] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:35:12] [ENEMY] [Enemy9] Registered as sound listener
+[12:35:12] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:35:12] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:35:12] [ENEMY] [Enemy10] Registered as sound listener
+[12:35:12] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:35:12] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:35:12] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:35:12] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:35:12] [INFO] [LastChance] Found player: Player
+[12:35:12] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:35:12] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:35:12] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:35:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:35:13] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:35:13] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[12:35:13] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:13] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:35:13] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:35:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:13] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:13] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:35:13] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:35:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:13] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:14] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:35:14] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:35:14] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:35:14] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:35:14] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:35:14] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:35:14] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:35:14] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:35:14] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:35:14] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:35:15] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:35:15] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:35:15] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:35:15] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:35:15] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:35:15] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:35:15] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:35:15] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:35:15] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:35:15] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[12:35:15] [INFO] [ScoreManager] Level started with 10 enemies
+[12:35:15] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:35:15] [ENEMY] [Enemy1] Registered as sound listener
+[12:35:15] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:35:15] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:35:15] [ENEMY] [Enemy2] Registered as sound listener
+[12:35:15] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:35:15] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:35:15] [ENEMY] [Enemy3] Registered as sound listener
+[12:35:15] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:35:15] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:35:15] [ENEMY] [Enemy4] Registered as sound listener
+[12:35:15] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:35:15] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:35:15] [ENEMY] [Enemy5] Registered as sound listener
+[12:35:15] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:35:15] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:35:15] [ENEMY] [Enemy6] Registered as sound listener
+[12:35:15] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:35:15] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:35:15] [ENEMY] [Enemy7] Registered as sound listener
+[12:35:15] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:35:15] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:35:15] [ENEMY] [Enemy8] Registered as sound listener
+[12:35:15] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:35:15] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:35:15] [ENEMY] [Enemy9] Registered as sound listener
+[12:35:15] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:35:15] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:35:15] [ENEMY] [Enemy10] Registered as sound listener
+[12:35:15] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:35:15] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:35:15] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:35:15] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:35:15] [INFO] [LastChance] Found player: Player
+[12:35:15] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:35:15] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:35:15] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:35:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:35:15] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:35:15] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[12:35:15] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:15] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:35:15] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:35:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:15] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:15] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:35:15] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:35:15] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:35:15] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:35:15] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:35:15] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:35:15] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:35:15] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:35:15] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:35:15] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:35:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:16] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:16] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:35:16] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:35:16] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:35:16] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:35:16] [INFO] [LastChance] Player died
+[12:35:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:16] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:17] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:35:17] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:35:17] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:35:17] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:35:17] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:35:17] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:35:17] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:35:17] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:35:17] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:35:17] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[12:35:17] [INFO] [ScoreManager] Level started with 10 enemies
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:35:17] [ENEMY] [Enemy1] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:35:17] [ENEMY] [Enemy2] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:35:17] [ENEMY] [Enemy3] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:35:17] [ENEMY] [Enemy4] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:35:17] [ENEMY] [Enemy5] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:35:17] [ENEMY] [Enemy6] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:35:17] [ENEMY] [Enemy7] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:35:17] [ENEMY] [Enemy8] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:35:17] [ENEMY] [Enemy9] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:35:17] [ENEMY] [Enemy10] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:35:17] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:35:17] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:35:17] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:35:17] [INFO] [LastChance] Found player: Player
+[12:35:17] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:35:17] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:35:17] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:35:17] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:35:17] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:35:17] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:35:17] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:35:17] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:35:17] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:35:17] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:35:17] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:35:17] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[12:35:17] [INFO] [ScoreManager] Level started with 10 enemies
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
+[12:35:17] [ENEMY] [Enemy1] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
+[12:35:17] [ENEMY] [Enemy2] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
+[12:35:17] [ENEMY] [Enemy3] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
+[12:35:17] [ENEMY] [Enemy4] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
+[12:35:17] [ENEMY] [Enemy5] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
+[12:35:17] [ENEMY] [Enemy6] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
+[12:35:17] [ENEMY] [Enemy7] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
+[12:35:17] [ENEMY] [Enemy8] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
+[12:35:17] [ENEMY] [Enemy9] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:35:17] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
+[12:35:17] [ENEMY] [Enemy10] Registered as sound listener
+[12:35:17] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:35:17] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:35:17] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:35:17] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:35:17] [INFO] [LastChance] Found player: Player
+[12:35:17] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:35:17] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:35:17] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:35:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=30
+[12:35:18] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
+[12:35:18] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[12:35:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:35:18] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:35:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:35:18] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:35:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:35:18] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:35:18] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:35:18] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:35:18] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:35:18] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:35:18] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:35:18] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:35:18] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:35:18] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:35:19] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:35:19] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:35:19] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:35:19] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:35:19] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:35:19] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:35:19] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:35:19] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:35:19] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:35:19] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[12:35:19] [INFO] [ScoreManager] Level started with 10 enemies
+[12:35:19] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:35:19] [ENEMY] [Enemy1] Registered as sound listener
+[12:35:19] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:35:19] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:35:19] [ENEMY] [Enemy2] Registered as sound listener
+[12:35:19] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:35:19] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:35:19] [ENEMY] [Enemy3] Registered as sound listener
+[12:35:19] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:35:19] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:35:19] [ENEMY] [Enemy4] Registered as sound listener
+[12:35:19] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:35:19] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:35:19] [ENEMY] [Enemy5] Registered as sound listener
+[12:35:19] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:35:19] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:35:19] [ENEMY] [Enemy6] Registered as sound listener
+[12:35:19] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:35:19] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:35:19] [ENEMY] [Enemy7] Registered as sound listener
+[12:35:19] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:35:19] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:35:19] [ENEMY] [Enemy8] Registered as sound listener
+[12:35:19] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:35:19] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:35:19] [ENEMY] [Enemy9] Registered as sound listener
+[12:35:19] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:35:19] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:35:19] [ENEMY] [Enemy10] Registered as sound listener
+[12:35:19] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:35:19] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:35:19] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:35:19] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:35:19] [INFO] [LastChance] Found player: Player
+[12:35:19] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:35:19] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:35:19] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:35:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:35:20] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:35:20] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[12:35:20] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:20] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:35:20] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:35:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:20] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:20] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:35:20] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:35:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:20] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:35:20] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:35:20] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:35:20] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:35:20] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:35:20] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:35:20] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:35:20] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:35:20] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:35:20] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:35:20] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:35:21] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:35:21] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:35:21] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:35:21] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:35:21] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:35:21] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:35:21] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:35:21] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:35:21] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:35:21] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[12:35:21] [INFO] [ScoreManager] Level started with 10 enemies
+[12:35:21] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:35:21] [ENEMY] [Enemy1] Registered as sound listener
+[12:35:21] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:35:21] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:35:21] [ENEMY] [Enemy2] Registered as sound listener
+[12:35:21] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:35:21] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:35:21] [ENEMY] [Enemy3] Registered as sound listener
+[12:35:21] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:35:21] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:35:21] [ENEMY] [Enemy4] Registered as sound listener
+[12:35:21] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:35:21] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:35:21] [ENEMY] [Enemy5] Registered as sound listener
+[12:35:21] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:35:21] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:35:21] [ENEMY] [Enemy6] Registered as sound listener
+[12:35:21] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:35:21] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:35:21] [ENEMY] [Enemy7] Registered as sound listener
+[12:35:21] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:35:21] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:35:21] [ENEMY] [Enemy8] Registered as sound listener
+[12:35:21] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:35:21] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:35:21] [ENEMY] [Enemy9] Registered as sound listener
+[12:35:21] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:35:21] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:35:21] [ENEMY] [Enemy10] Registered as sound listener
+[12:35:21] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:35:21] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:35:21] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:35:21] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:35:21] [INFO] [LastChance] Found player: Player
+[12:35:21] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:35:21] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:35:21] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:35:23] [INFO] ------------------------------------------------------------
+[12:35:23] [INFO] GAME LOG ENDED: 2026-01-22T12:35:23
+[12:35:23] [INFO] ============================================================
diff --git a/docs/case-studies/issue-217/logs/game_log_20260122_123547.txt b/docs/case-studies/issue-217/logs/game_log_20260122_123547.txt
new file mode 100644
index 00000000..171f09b2
--- /dev/null
+++ b/docs/case-studies/issue-217/logs/game_log_20260122_123547.txt
@@ -0,0 +1,254 @@
+[12:35:47] [INFO] ============================================================
+[12:35:47] [INFO] GAME LOG STARTED
+[12:35:47] [INFO] ============================================================
+[12:35:47] [INFO] Timestamp: 2026-01-22T12:35:47
+[12:35:47] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_123547.txt
+[12:35:47] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[12:35:47] [INFO] OS: Windows
+[12:35:47] [INFO] Debug build: false
+[12:35:47] [INFO] Engine version: 4.3-stable (official)
+[12:35:47] [INFO] Project: Godot Top-Down Template
+[12:35:47] [INFO] ------------------------------------------------------------
+[12:35:47] [INFO] [GameManager] GameManager ready
+[12:35:47] [INFO] [ScoreManager] ScoreManager ready
+[12:35:47] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[12:35:47] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:35:47] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[12:35:47] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[12:35:47] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[12:35:47] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[12:35:47] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[12:35:47] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[12:35:47] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:35:47] [INFO] [LastChance] Last chance shader loaded successfully
+[12:35:47] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[12:35:47] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[12:35:47] [INFO] [LastChance]   Sepia intensity: 0.70
+[12:35:47] [INFO] [LastChance]   Brightness: 0.60
+[12:35:47] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[12:35:47] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[12:35:47] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:35:47] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:35:48] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:35:48] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:35:48] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:35:48] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:35:48] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[12:35:48] [INFO] [ScoreManager] Level started with 10 enemies
+[12:35:48] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[12:35:48] [ENEMY] [Enemy1] Registered as sound listener
+[12:35:48] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:35:48] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[12:35:48] [ENEMY] [Enemy2] Registered as sound listener
+[12:35:48] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:35:48] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[12:35:48] [ENEMY] [Enemy3] Registered as sound listener
+[12:35:48] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:35:48] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[12:35:48] [ENEMY] [Enemy4] Registered as sound listener
+[12:35:48] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:35:48] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[12:35:48] [ENEMY] [Enemy5] Registered as sound listener
+[12:35:48] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:35:48] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[12:35:48] [ENEMY] [Enemy6] Registered as sound listener
+[12:35:48] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:35:48] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[12:35:48] [ENEMY] [Enemy7] Registered as sound listener
+[12:35:48] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 2, behavior: PATROL, player_found: yes
+[12:35:48] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[12:35:48] [ENEMY] [Enemy8] Registered as sound listener
+[12:35:48] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[12:35:48] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[12:35:48] [ENEMY] [Enemy9] Registered as sound listener
+[12:35:48] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:35:48] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[12:35:48] [ENEMY] [Enemy10] Registered as sound listener
+[12:35:48] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:35:48] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:35:48] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:35:48] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:35:48] [INFO] [LastChance] Found player: Player
+[12:35:48] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:35:48] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:35:48] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:35:48] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:35:48] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:35:49] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:35:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 772.3333), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:49] [ENEMY] [Enemy1] Heard gunshot at (450, 772.3333), source_type=0, intensity=0.01, distance=448
+[12:35:49] [ENEMY] [Enemy2] Heard gunshot at (450, 772.3333), source_type=0, intensity=0.05, distance=228
+[12:35:49] [ENEMY] [Enemy4] Heard gunshot at (450, 772.3333), source_type=0, intensity=0.02, distance=373
+[12:35:49] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:35:49] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[12:35:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 768.4444), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:49] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:35:49] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[12:35:49] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:35:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 768.4444), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:50] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:35:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(681.7596, 750.5379), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:35:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:35:50] [INFO] [LastChance] Threat detected: @Area2D@288
+[12:35:50] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:35:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:35:50] [ENEMY] [Enemy3] Hit taken, health: 1/4
+[12:35:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.15, 744.2408), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:35:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:35:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 768.4444), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:35:50] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:35:50] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:35:50] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:35:50] [INFO] [LastChance] Threat detected: Bullet
+[12:35:50] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:35:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:35:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(664.5403, 737.9437), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:35:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:35:50] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:35:50] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:35:50] [INFO] [LastChance] Threat detected: @Area2D@291
+[12:35:50] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:35:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:35:50] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:35:50] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:35:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(932.81464, 746.0607)
+[12:35:50] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:35:50] [INFO] [Bullet] Using shooter_position, distance=1194,4663
+[12:35:50] [INFO] [Bullet] Distance to wall: 1194,4663 (81,33341% of viewport)
+[12:35:50] [INFO] [Bullet] Distance-based penetration chance: 51,77769%
+[12:35:50] [INFO] [Bullet] Penetration failed (distance roll)
+[12:35:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(596.5869, 734.3471), shooter_id=40902854154, bullet_pos=(54.93697, 730.0847)
+[12:35:50] [INFO] [Bullet] Using shooter_position, distance=541.666748046875
+[12:35:50] [INFO] [Bullet] Distance to wall: 541.666748046875 (36.883084911833% of viewport)
+[12:35:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:35:50] [INFO] [Bullet] Starting wall penetration at (54.93697, 730.0847)
+[12:35:50] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.7289981842041
+[12:35:50] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:35:50] [INFO] [Bullet] Exiting penetration at (8.271736, 729.7174) after traveling 41.6666717529297 pixels through wall
+[12:35:50] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:35:50] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[12:35:50] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:35:51] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[12:35:51] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:35:51] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[12:35:51] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:35:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(430.5133, 658.7877), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:35:51] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[12:35:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(430.5133, 658.7877), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:35:51] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[12:35:51] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[12:35:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(498.478, 662.1646), shooter_id=40902854154, bullet_pos=(936.0811, 798.4481)
+[12:35:51] [INFO] [Bullet] Using shooter_position, distance=458.333587646484
+[12:35:51] [INFO] [Bullet] Distance to wall: 458.333587646484 (31.2087767840005% of viewport)
+[12:35:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:35:51] [INFO] [Bullet] Starting wall penetration at (936.0811, 798.4481)
+[12:35:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.7516746520996
+[12:35:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:35:51] [INFO] [Bullet] Exiting penetration at (980.6371, 812.3242) after traveling 41.6666717529297 pixels through wall
+[12:35:51] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:35:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(496.4698, 642.0444), shooter_id=40902854154, bullet_pos=(925.868, 802.3158)
+[12:35:52] [INFO] [Bullet] Using shooter_position, distance=458.333587646484
+[12:35:52] [INFO] [Bullet] Distance to wall: 458.333587646484 (31.2087767840005% of viewport)
+[12:35:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:35:52] [INFO] [Bullet] Starting wall penetration at (925.868, 802.3158)
+[12:35:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.851921081543
+[12:35:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:35:52] [INFO] [Bullet] Exiting penetration at (969.5885, 818.6343) after traveling 41.6666679382324 pixels through wall
+[12:35:52] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:35:52] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:35:52] [ENEMY] [Enemy10] FLANKING started: target=(974.1406, 756.5103), side=left, pos=(953.4263, 1416.483)
+[12:35:52] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:35:52] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[12:35:52] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:35:52] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
+[12:35:52] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
+[12:35:52] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[12:35:54] [ENEMY] [Enemy7] FLANKING started: target=(724.4142, 507.631), side=left, pos=(1489.885, 884.7651)
+[12:35:54] [ENEMY] [Enemy7] State: PURSUING -> FLANKING
+[12:35:54] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[12:35:54] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[12:35:54] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[12:35:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.6951, 562.3115), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:35:54] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[12:35:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(478.9962, 626.6019), shooter_id=40617641465, bullet_pos=(420.45, 685.9044)
+[12:35:54] [INFO] [Bullet] Using shooter_position, distance=83.333366394043
+[12:35:54] [INFO] [Bullet] Distance to wall: 83.333366394043 (5.67432215431913% of viewport)
+[12:35:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:35:54] [INFO] [Bullet] Starting wall penetration at (420.45, 685.9044)
+[12:35:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.99646186828613
+[12:35:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:35:55] [INFO] [Bullet] Exiting penetration at (387.6641, 719.1138) after traveling 41.6666679382324 pixels through wall
+[12:35:55] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:35:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.6951, 562.3115), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:35:55] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[12:35:55] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:35:55] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:35:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450.0099, 630.0308), shooter_id=40617641465, bullet_pos=(346.5534, 700.186)
+[12:35:55] [INFO] [Bullet] Using shooter_position, distance=125.000015258789
+[12:35:55] [INFO] [Bullet] Distance to wall: 125.000015258789 (8.51148089373093% of viewport)
+[12:35:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:35:55] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
+[12:35:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450.0099, 630.0308), shooter_id=40617641465, bullet_pos=(58.61002, 485.5018)
+[12:35:55] [INFO] [Bullet] Using shooter_position, distance=417.231994628906
+[12:35:55] [INFO] [Bullet] Distance to wall: 417.231994628906 (28.4100937362684% of viewport)
+[12:35:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:35:55] [INFO] [Bullet] Starting wall penetration at (58.61002, 485.5018)
+[12:35:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7.22461843490601
+[12:35:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:35:55] [INFO] [Bullet] Exiting penetration at (26.20803, 461.3436) after traveling 35.4166717529297 pixels through wall
+[12:35:55] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:35:55] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:35:55] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[12:35:55] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:35:55] [ENEMY] [Enemy10] FLANKING stuck (2.0s no progress), target=(256.9787, 534.3634), pos=(934.6943, 1033.573), fail_count=1
+[12:35:55] [ENEMY] [Enemy10] State: FLANKING -> PURSUING
+[12:35:55] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[12:35:56] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:35:56] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[12:35:56] [ENEMY] [Enemy7] FLANKING stuck (2.0s no progress), target=(229.761, 405.4384), pos=(1412.066, 824.5351), fail_count=1
+[12:35:56] [ENEMY] [Enemy7] State: FLANKING -> PURSUING
+[12:35:56] [ENEMY] [Enemy7] State: PURSUING -> COMBAT
+[12:35:57] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:35:57] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[12:35:57] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[12:35:57] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[12:35:57] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[12:35:57] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:35:57] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
+[12:35:57] [ENEMY] [Enemy3] State: IN_COVER -> COMBAT
+[12:35:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(366.0204, 550.504), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:35:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:35:58] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[12:35:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(376.312, 617.7698), shooter_id=40617641465, bullet_pos=(289.5714, 707.7757)
+[12:35:58] [INFO] [Bullet] Using shooter_position, distance=124.999969482422
+[12:35:58] [INFO] [Bullet] Distance to wall: 124.999969482422 (8.51147777673392% of viewport)
+[12:35:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:35:58] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:35:58] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:35:58] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:35:58] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:35:58] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:35:58] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:35:58] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:35:58] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:35:58] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:35:58] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:35:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(366.0204, 550.504), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:35:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:35:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(376.4229, 617.7527), shooter_id=40617641465, bullet_pos=(313.2495, 684.1744)
+[12:35:58] [INFO] [Bullet] Using shooter_position, distance=91.6663436889648
+[12:35:58] [INFO] [Bullet] Distance to wall: 91.6663436889648 (6.24172990132446% of viewport)
+[12:35:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:35:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(366.0204, 550.504), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:35:59] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:35:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(380.9518, 616.8942), shooter_id=40617641465, bullet_pos=(321.2273, 686.4337)
+[12:35:59] [INFO] [Bullet] Using shooter_position, distance=91.6666259765625
+[12:35:59] [INFO] [Bullet] Distance to wall: 91.6666259765625 (6.24174912280606% of viewport)
+[12:35:59] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:35:59] [INFO] [Bullet] Starting wall penetration at (321.2273, 686.4337)
+[12:35:59] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:35:59] [INFO] [Bullet] Exiting penetration at (315.2548, 693.3877) after traveling 4.16666650772095 pixels through wall
+[12:35:59] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:36:00] [INFO] ------------------------------------------------------------
+[12:36:00] [INFO] GAME LOG ENDED: 2026-01-22T12:36:00
+[12:36:00] [INFO] ============================================================
diff --git a/docs/case-studies/issue-217/logs/game_log_20260122_125115.txt b/docs/case-studies/issue-217/logs/game_log_20260122_125115.txt
new file mode 100644
index 00000000..47559bc2
--- /dev/null
+++ b/docs/case-studies/issue-217/logs/game_log_20260122_125115.txt
@@ -0,0 +1,4198 @@
+[12:51:15] [INFO] ============================================================
+[12:51:15] [INFO] GAME LOG STARTED
+[12:51:15] [INFO] ============================================================
+[12:51:15] [INFO] Timestamp: 2026-01-22T12:51:15
+[12:51:15] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_125115.txt
+[12:51:15] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[12:51:15] [INFO] OS: Windows
+[12:51:15] [INFO] Debug build: false
+[12:51:15] [INFO] Engine version: 4.3-stable (official)
+[12:51:15] [INFO] Project: Godot Top-Down Template
+[12:51:15] [INFO] ------------------------------------------------------------
+[12:51:15] [INFO] [GameManager] GameManager ready
+[12:51:15] [INFO] [ScoreManager] ScoreManager ready
+[12:51:15] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[12:51:15] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:51:15] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[12:51:15] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[12:51:15] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[12:51:15] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[12:51:15] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[12:51:15] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[12:51:15] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:51:15] [INFO] [LastChance] Last chance shader loaded successfully
+[12:51:15] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[12:51:15] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[12:51:15] [INFO] [LastChance]   Sepia intensity: 0.70
+[12:51:15] [INFO] [LastChance]   Brightness: 0.60
+[12:51:15] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[12:51:15] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[12:51:15] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:51:15] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:51:15] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:51:15] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:51:15] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:51:15] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:51:15] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[12:51:15] [INFO] [ScoreManager] Level started with 10 enemies
+[12:51:15] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[12:51:15] [ENEMY] [Enemy1] Registered as sound listener
+[12:51:15] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:51:15] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[12:51:15] [ENEMY] [Enemy2] Registered as sound listener
+[12:51:15] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:51:15] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[12:51:15] [ENEMY] [Enemy3] Registered as sound listener
+[12:51:15] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:51:15] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[12:51:15] [ENEMY] [Enemy4] Registered as sound listener
+[12:51:15] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:51:15] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[12:51:15] [ENEMY] [Enemy5] Registered as sound listener
+[12:51:15] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:51:15] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[12:51:15] [ENEMY] [Enemy6] Registered as sound listener
+[12:51:15] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:51:15] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[12:51:15] [ENEMY] [Enemy7] Registered as sound listener
+[12:51:15] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 2, behavior: PATROL, player_found: yes
+[12:51:15] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[12:51:15] [ENEMY] [Enemy8] Registered as sound listener
+[12:51:15] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:51:15] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[12:51:15] [ENEMY] [Enemy9] Registered as sound listener
+[12:51:15] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:51:15] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[12:51:15] [ENEMY] [Enemy10] Registered as sound listener
+[12:51:15] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:51:15] [INFO] [Player] Detecting weapon pose (frame 3)...
+[12:51:15] [INFO] [Player] Detected weapon: Rifle (default pose)
+[12:51:15] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[12:51:15] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:51:15] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:51:15] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:51:15] [INFO] [LastChance] Found player: Player
+[12:51:15] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:51:15] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:51:15] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:51:18] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:51:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(432.2306, 788.1065), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:51:18] [ENEMY] [Enemy1] Heard gunshot at (432.2306, 788.1065), source_type=0, intensity=0.01, distance=458
+[12:51:18] [ENEMY] [Enemy2] Heard gunshot at (432.2306, 788.1065), source_type=0, intensity=0.04, distance=240
+[12:51:18] [ENEMY] [Enemy4] Heard gunshot at (432.2306, 788.1065), source_type=0, intensity=0.02, distance=384
+[12:51:18] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:51:18] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[12:51:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(410.1624, 773.7704), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:51:19] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:51:19] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[12:51:19] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:51:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(394.1562, 773.3619), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:51:19] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:51:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(672.5315, 749.4142), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:51:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:51:19] [ENEMY] [Enemy3] Hit taken, health: 0/3
+[12:51:19] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:51:19] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:51:19] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:51:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(397.0408, 783.6891), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:19] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[12:51:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(410.2459, 796.2325), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:19] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[12:51:19] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:51:19] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:51:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(619.4374, 706.8511), shooter_id=40902854154, bullet_pos=(225.0176, 473.3932)
+[12:51:19] [INFO] [Bullet] Using shooter_position, distance=458.333465576172
+[12:51:19] [INFO] [Bullet] Distance to wall: 458.333465576172 (31.2087684720084% of viewport)
+[12:51:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(918.42816, 722.2072)
+[12:51:19] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:19] [INFO] [Bullet] Using shooter_position, distance=1168,3722
+[12:51:19] [INFO] [Bullet] Distance to wall: 1168,3722 (79,55662% of viewport)
+[12:51:19] [INFO] [Bullet] Distance-based penetration chance: 53,85062%
+[12:51:19] [INFO] [Bullet] Penetration failed (distance roll)
+[12:51:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(619.4374, 706.8511), shooter_id=40902854154, bullet_pos=(40.05333, 587.8243)
+[12:51:19] [INFO] [Bullet] Using shooter_position, distance=591.48388671875
+[12:51:19] [INFO] [Bullet] Distance to wall: 591.48388671875 (40.2752254896415% of viewport)
+[12:51:19] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:51:19] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:51:19] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:51:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(929.24854, 717.10565)
+[12:51:19] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:19] [INFO] [Bullet] Using shooter_position, distance=1173,7732
+[12:51:19] [INFO] [Bullet] Distance to wall: 1173,7732 (79,92438% of viewport)
+[12:51:19] [INFO] [Bullet] Distance-based penetration chance: 53,42157%
+[12:51:19] [INFO] [Bullet] Starting wall penetration at (929.24854, 717.10565)
+[12:51:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39,837143
+[12:51:19] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:19] [INFO] [Bullet] Exiting penetration at (975.3821, 710.07214) after traveling 41,666668 pixels through wall
+[12:51:19] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:51:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(975.3821, 710.07214)
+[12:51:19] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:19] [INFO] [Bullet] Using shooter_position, distance=1206,4712
+[12:51:19] [INFO] [Bullet] Distance to wall: 1206,4712 (82,15085% of viewport)
+[12:51:19] [INFO] [Bullet] Distance-based penetration chance: 50,824017%
+[12:51:19] [INFO] [Bullet] Starting wall penetration at (975.3821, 710.07214)
+[12:51:19] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
+[12:51:19] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:51:19] [INFO] [Bullet] Exiting penetration at (1021.5156, 703.03864) after traveling 41,666668 pixels through wall
+[12:51:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(619.4374, 706.8511), shooter_id=40902854154, bullet_pos=(192.1192, 694.279)
+[12:51:19] [INFO] [Bullet] Using shooter_position, distance=427.503082275391
+[12:51:19] [INFO] [Bullet] Distance to wall: 427.503082275391 (29.1094709809823% of viewport)
+[12:51:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:19] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[12:51:19] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:51:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(619.4374, 706.8511), shooter_id=40902854154, bullet_pos=(496.4981, 548.1229)
+[12:51:19] [INFO] [Bullet] Using shooter_position, distance=200.770294189453
+[12:51:19] [INFO] [Bullet] Distance to wall: 200.770294189453 (13.6708185153771% of viewport)
+[12:51:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:19] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:51:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(619.4374, 706.8511), shooter_id=40902854154, bullet_pos=(336.3745, 468.1092)
+[12:51:19] [INFO] [Bullet] Using shooter_position, distance=370.300201416016
+[12:51:19] [INFO] [Bullet] Distance to wall: 370.300201416016 (25.2144216364447% of viewport)
+[12:51:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(619.4374, 706.8511), shooter_id=40902854154, bullet_pos=(497.3528, 367.4151)
+[12:51:20] [INFO] [Bullet] Using shooter_position, distance=360.723510742188
+[12:51:20] [INFO] [Bullet] Distance to wall: 360.723510742188 (24.5623271584824% of viewport)
+[12:51:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(619.4374, 706.8511), shooter_id=40902854154, bullet_pos=(340.6967, 228.6314)
+[12:51:20] [INFO] [Bullet] Using shooter_position, distance=553.525451660156
+[12:51:20] [INFO] [Bullet] Distance to wall: 553.525451660156 (37.6905658470945% of viewport)
+[12:51:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:20] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:51:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(619.4374, 706.8511), shooter_id=40902854154, bullet_pos=(606.3029, 64.51357)
+[12:51:20] [INFO] [Bullet] Using shooter_position, distance=642.471801757813
+[12:51:20] [INFO] [Bullet] Distance to wall: 642.471801757813 (43.7470863831596% of viewport)
+[12:51:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.2741, 954.1059), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
+[12:51:20] [ENEMY] [Enemy4] Hit taken, health: 3/4
+[12:51:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(572.0559, 981.7713), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
+[12:51:20] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[12:51:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(604.3376, 989.9335), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:51:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(926.3246, 927.951)
+[12:51:20] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:20] [INFO] [Bullet] Using shooter_position, distance=1311,1714
+[12:51:20] [INFO] [Bullet] Distance to wall: 1311,1714 (89,280075% of viewport)
+[12:51:20] [INFO] [Bullet] Distance-based penetration chance: 42,50658%
+[12:51:20] [INFO] [Bullet] Starting wall penetration at (926.3246, 927.951)
+[12:51:20] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[12:51:20] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36,88028
+[12:51:21] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:21] [INFO] [Bullet] Exiting penetration at (972.4619, 920.94183) after traveling 41,666668 pixels through wall
+[12:51:21] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:51:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(755.5047, 914.0669), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:51:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
+[12:51:21] [INFO] [LastChance] Threat detected: Bullet
+[12:51:21] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:51:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:51:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(642.8376, 989.9335), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:21] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:51:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(700.6436, 954.3268), shooter_id=41188066843, bullet_pos=(634.9578, 1005.609)
+[12:51:21] [INFO] [Bullet] Using shooter_position, distance=83.3333053588867
+[12:51:21] [INFO] [Bullet] Distance to wall: 83.3333053588867 (5.67431799832311% of viewport)
+[12:51:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:21] [INFO] [Bullet] Starting wall penetration at (634.9578, 1005.609)
+[12:51:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.7803192138672
+[12:51:21] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:21] [INFO] [Bullet] Exiting penetration at (598.1737, 1034.326) after traveling 41.6666679382324 pixels through wall
+[12:51:21] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:51:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(759.0229, 914.0668), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:51:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
+[12:51:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(732.6467, 869.7905)
+[12:51:21] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:21] [INFO] [Bullet] Using shooter_position, distance=1137,2365
+[12:51:21] [INFO] [Bullet] Distance to wall: 1137,2365 (77,43652% of viewport)
+[12:51:21] [ENEMY] [Enemy4] Hit taken, health: 2/4
+[12:51:21] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:51:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(762.6435, 913.9401), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:51:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
+[12:51:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(681.3376, 989.9335), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:21] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:51:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:51:21] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:51:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(694.9302, 907.194), shooter_id=41188066843, bullet_pos=(496.6901, 843.1346)
+[12:51:21] [INFO] [Bullet] Using shooter_position, distance=208.333251953125
+[12:51:21] [INFO] [Bullet] Distance to wall: 208.333251953125 (14.1857942165585% of viewport)
+[12:51:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:21] [INFO] [Bullet] Starting wall penetration at (496.6901, 843.1346)
+[12:51:21] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:51:21] [INFO] [Bullet] Exiting penetration at (452.2843, 828.7853) after traveling 41.6666641235352 pixels through wall
+[12:51:21] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:51:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(719.8376, 989.9335), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:21] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:51:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:51:21] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:51:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(693.3014, 931.7098), shooter_id=41188066843, bullet_pos=(44.01464, 1082.942)
+[12:51:21] [INFO] [Bullet] Using shooter_position, distance=666.666748046875
+[12:51:21] [INFO] [Bullet] Distance to wall: 666.666748046875 (45.394564766565% of viewport)
+[12:51:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(758.3376, 989.9335), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:21] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
+[12:51:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:51:21] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:51:21] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:51:21] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:51:21] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:51:21] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:51:21] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:51:21] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:51:21] [INFO] [PenultimateHit] Applying saturation to 9 enemies
+[12:51:21] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:51:21] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:51:21] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:51:21] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:51:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(797.5969, 986.4017), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:22] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
+[12:51:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:51:22] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:51:22] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:51:22] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:51:22] [INFO] [LastChance] Player died
+[12:51:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(817.4929, 980.6235), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:22] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
+[12:51:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(815.7476, 976.835), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:22] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
+[12:51:22] [ENEMY] [Enemy1] State: SUPPRESSED -> IN_COVER
+[12:51:22] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
+[12:51:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(803.9133, 980.6498), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:22] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
+[12:51:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(619.4374, 706.8511), shooter_id=40902854154, bullet_pos=(1360.099, 559.7935)
+[12:51:23] [INFO] [Bullet] Using shooter_position, distance=755.119323730469
+[12:51:23] [INFO] [Bullet] Distance to wall: 755.119323730469 (51.4174632948054% of viewport)
+[12:51:23] [INFO] [Bullet] Distance-based penetration chance: 86.6796261560603%
+[12:51:23] [INFO] [Bullet] Starting wall penetration at (1360.099, 559.7935)
+[12:51:23] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:51:23] [INFO] [Bullet] Exiting penetration at (1373.766, 568.7737) after traveling 11.3537731170654 pixels through wall
+[12:51:23] [INFO] [Bullet] Damage multiplier after penetration: 0.003515625
+[12:51:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(782.7556, 989.9338), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:23] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
+[12:51:23] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:51:23] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:51:23] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:51:23] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:51:23] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:51:23] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:51:23] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:51:23] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:51:23] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[12:51:23] [INFO] [ScoreManager] Level started with 10 enemies
+[12:51:23] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
+[12:51:23] [ENEMY] [Enemy1] Registered as sound listener
+[12:51:23] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:51:23] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
+[12:51:23] [ENEMY] [Enemy2] Registered as sound listener
+[12:51:23] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:51:23] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
+[12:51:23] [ENEMY] [Enemy3] Registered as sound listener
+[12:51:23] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:51:23] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
+[12:51:23] [ENEMY] [Enemy4] Registered as sound listener
+[12:51:23] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:51:23] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
+[12:51:23] [ENEMY] [Enemy5] Registered as sound listener
+[12:51:23] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:51:23] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
+[12:51:23] [ENEMY] [Enemy6] Registered as sound listener
+[12:51:23] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:51:23] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
+[12:51:23] [ENEMY] [Enemy7] Registered as sound listener
+[12:51:23] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:51:23] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
+[12:51:23] [ENEMY] [Enemy8] Registered as sound listener
+[12:51:23] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:51:23] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
+[12:51:23] [ENEMY] [Enemy9] Registered as sound listener
+[12:51:23] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:51:23] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
+[12:51:23] [ENEMY] [Enemy10] Registered as sound listener
+[12:51:23] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:51:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(449.7643, 1256.236), source=PLAYER (AssaultRifle), range=1469, listeners=19
+[12:51:23] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
+[12:51:23] [ENEMY] [Enemy4] Heard gunshot at (449.7643, 1256.236), source_type=0, intensity=0.01, distance=500
+[12:51:23] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:51:23] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:51:23] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:51:23] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:51:23] [INFO] [LastChance] Found player: Player
+[12:51:23] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:51:23] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:51:23] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:51:23] [INFO] [Player] Detecting weapon pose (frame 3)...
+[12:51:23] [INFO] [Player] Detected weapon: Rifle (default pose)
+[12:51:23] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[12:51:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(2474.7644, 1256.2357)
+[12:51:23] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:23] [INFO] [Bullet] Using shooter_position, distance=2775,3535
+[12:51:23] [INFO] [Bullet] Distance to wall: 2775,3535 (188,97893% of viewport)
+[12:51:23] [INFO] [Bullet] Distance-based penetration chance: 12,204213%
+[12:51:23] [INFO] [Bullet] Penetration failed (distance roll)
+[12:51:24] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:51:24] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:51:24] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:51:24] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:51:24] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:51:24] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:51:24] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:51:24] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:51:24] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[12:51:24] [INFO] [ScoreManager] Level started with 10 enemies
+[12:51:24] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:51:24] [ENEMY] [Enemy1] Registered as sound listener
+[12:51:24] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:51:24] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:51:24] [ENEMY] [Enemy2] Registered as sound listener
+[12:51:24] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:51:24] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:51:24] [ENEMY] [Enemy3] Registered as sound listener
+[12:51:24] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:51:24] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:51:24] [ENEMY] [Enemy4] Registered as sound listener
+[12:51:24] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:51:24] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:51:24] [ENEMY] [Enemy5] Registered as sound listener
+[12:51:24] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:51:24] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:51:24] [ENEMY] [Enemy6] Registered as sound listener
+[12:51:24] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:51:24] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:51:24] [ENEMY] [Enemy7] Registered as sound listener
+[12:51:24] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:51:24] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:51:24] [ENEMY] [Enemy8] Registered as sound listener
+[12:51:24] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:51:24] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:51:24] [ENEMY] [Enemy9] Registered as sound listener
+[12:51:24] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:51:24] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:51:24] [ENEMY] [Enemy10] Registered as sound listener
+[12:51:24] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:51:24] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:51:24] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:51:24] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:51:24] [INFO] [LastChance] Found player: Player
+[12:51:24] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:51:24] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:51:24] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:51:24] [INFO] [Player] Detecting weapon pose (frame 3)...
+[12:51:24] [INFO] [Player] Detected weapon: Rifle (default pose)
+[12:51:24] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[12:51:24] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:51:25] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:51:25] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:51:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(439.3935, 781.2732), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[12:51:25] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:51:25] [ENEMY] [Enemy1] Heard gunshot at (439.3935, 781.2732), source_type=0, intensity=0.01, distance=453
+[12:51:25] [ENEMY] [Enemy2] Heard gunshot at (439.3935, 781.2732), source_type=0, intensity=0.05, distance=235
+[12:51:25] [ENEMY] [Enemy4] Heard gunshot at (439.3935, 781.2732), source_type=0, intensity=0.02, distance=380
+[12:51:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:51:25] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[12:51:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(419.7696, 765.1556), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:51:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:51:25] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[12:51:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(396.9915, 764.8821), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:51:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:51:25] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:51:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(677.939, 748.5837), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:51:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:51:26] [ENEMY] [Enemy3] Hit taken, health: 0/3
+[12:51:26] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:51:26] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:51:26] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:51:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(378.6958, 778.9857), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:26] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[12:51:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(635.6385, 695.2801), shooter_id=208272361116, bullet_pos=(520.6825, 574.6033)
+[12:51:26] [INFO] [Bullet] Using shooter_position, distance=166.666656494141
+[12:51:26] [INFO] [Bullet] Distance to wall: 166.666656494141 (11.3486391136432% of viewport)
+[12:51:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:26] [INFO] [Bullet] Starting wall penetration at (520.6825, 574.6033)
+[12:51:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.6805763244629
+[12:51:26] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:26] [INFO] [Bullet] Exiting penetration at (488.4948, 540.8138) after traveling 41.6666679382324 pixels through wall
+[12:51:26] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:51:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(370.1996, 806.1563), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:26] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[12:51:26] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:51:26] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:51:26] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:51:26] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:51:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1150.99, 714.28186)
+[12:51:26] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:26] [INFO] [Bullet] Using shooter_position, distance=1354,613
+[12:51:26] [INFO] [Bullet] Distance to wall: 1354,613 (92,23809% of viewport)
+[12:51:26] [INFO] [Bullet] Distance-based penetration chance: 39,05556%
+[12:51:26] [INFO] [Bullet] Starting wall penetration at (1150.99, 714.28186)
+[12:51:26] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:51:26] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:51:26] [INFO] [Bullet] Exiting penetration at (1197.4938, 710.38574) after traveling 41,66667 pixels through wall
+[12:51:26] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:51:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(933.11536, 741.06323)
+[12:51:26] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:26] [INFO] [Bullet] Using shooter_position, distance=1191,5868
+[12:51:26] [INFO] [Bullet] Distance to wall: 1191,5868 (81,13734% of viewport)
+[12:51:26] [INFO] [Bullet] Distance-based penetration chance: 52,006447%
+[12:51:26] [INFO] [Bullet] Starting wall penetration at (933.11536, 741.06323)
+[12:51:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 43,762833
+[12:51:26] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:26] [INFO] [Bullet] Exiting penetration at (979.47314, 735.70264) after traveling 41,666668 pixels through wall
+[12:51:26] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:51:27] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:51:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(395.494, 547.147), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:51:27] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[12:51:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(409.7278, 613.6902), shooter_id=207987148928, bullet_pos=(436.3845, 692.645)
+[12:51:27] [INFO] [Bullet] Using shooter_position, distance=83.3333587646484
+[12:51:27] [INFO] [Bullet] Distance to wall: 83.3333587646484 (5.67432163481963% of viewport)
+[12:51:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:27] [INFO] [Bullet] Starting wall penetration at (436.3845, 692.645)
+[12:51:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.2383651733398
+[12:51:27] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:27] [INFO] [Bullet] Exiting penetration at (451.3123, 736.8597) after traveling 41.6666717529297 pixels through wall
+[12:51:27] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:51:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(579.812, 732.2968), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:27] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:51:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(350.8301, 510.2847), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:51:27] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[12:51:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(611.8912, 729.8646), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:27] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:51:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(302.2523, 462.6319), shooter_id=207987148928, bullet_pos=(302.2523, 462.6319)
+[12:51:27] [INFO] [Bullet] Using shooter_position, distance=0
+[12:51:27] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:51:27] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:51:27] [INFO] [Bullet] Starting wall penetration at (302.2523, 462.6319)
+[12:51:27] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:51:27] [INFO] [Bullet] Exiting penetration at (265.412, 433.9862) after traveling 41.6666679382324 pixels through wall
+[12:51:27] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:51:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(632.09, 737.587), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:51:27] [ENEMY] [Enemy4] FLANKING started: target=(831.1484, 692.4719), side=left, pos=(783.4016, 895.8181)
+[12:51:27] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
+[12:51:27] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
+[12:51:27] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[12:51:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(637.1827, 751.5214), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:51:27] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:51:27] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:51:27] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:51:27] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:51:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(627.1694, 771.6678), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:51:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(250.09245, 462.0871)
+[12:51:27] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:27] [INFO] [Bullet] Using shooter_position, distance=525,4243
+[12:51:27] [INFO] [Bullet] Distance to wall: 525,4243 (35,77711% of viewport)
+[12:51:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(262.7104, 454.2078)
+[12:51:28] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:28] [INFO] [Bullet] Using shooter_position, distance=524,7108
+[12:51:28] [INFO] [Bullet] Distance to wall: 524,7108 (35,728527% of viewport)
+[12:51:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(55.851273, 624.066)
+[12:51:28] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:28] [INFO] [Bullet] Using shooter_position, distance=626,56024
+[12:51:28] [INFO] [Bullet] Distance to wall: 626,56024 (42,66364% of viewport)
+[12:51:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(128.45795, 685.8134)
+[12:51:28] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:28] [INFO] [Bullet] Using shooter_position, distance=697,74023
+[12:51:28] [INFO] [Bullet] Distance to wall: 697,74023 (47,510418% of viewport)
+[12:51:28] [INFO] [Bullet] Distance-based penetration chance: 91,23785%
+[12:51:28] [INFO] [Bullet] Starting wall penetration at (128.45795, 685.8134)
+[12:51:28] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:51:28] [INFO] [Bullet] Exiting penetration at (155.19942, 708.55536) after traveling 30,104168 pixels through wall
+[12:51:28] [INFO] [Bullet] Damage multiplier after penetration: 0,225
+[12:51:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(50.4865, 591.7865)
+[12:51:28] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:28] [INFO] [Bullet] Using shooter_position, distance=593,93616
+[12:51:28] [INFO] [Bullet] Distance to wall: 593,93616 (40,442207% of viewport)
+[12:51:28] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:51:28] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:51:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(210.1946, 686.3907)
+[12:51:28] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:28] [INFO] [Bullet] Using shooter_position, distance=717,8537
+[12:51:28] [INFO] [Bullet] Distance to wall: 717,8537 (48,879982% of viewport)
+[12:51:28] [ENEMY] [Enemy4] State: FLANKING -> COMBAT
+[12:51:28] [ENEMY] [Enemy10] FLANKING started: target=(515.5485, 1018.881), side=right, pos=(953.4262, 1416.483)
+[12:51:28] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:51:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(507.42047, 526.1871)
+[12:51:28] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:28] [INFO] [Bullet] Using shooter_position, distance=730,9914
+[12:51:28] [INFO] [Bullet] Distance to wall: 730,9914 (49,774548% of viewport)
+[12:51:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(338.46075, 467.07397)
+[12:51:28] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:28] [INFO] [Bullet] Using shooter_position, distance=576,8135
+[12:51:28] [INFO] [Bullet] Distance to wall: 576,8135 (39,276295% of viewport)
+[12:51:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(613.3287, 850.4131), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:51:28] [ENEMY] [Enemy4] Hit taken, health: 1/2
+[12:51:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(613.3287, 850.4131), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:51:28] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:51:28] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:51:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(509.28723, 384.1782)
+[12:51:28] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:28] [INFO] [Bullet] Using shooter_position, distance=637,93915
+[12:51:28] [INFO] [Bullet] Distance to wall: 637,93915 (43,43845% of viewport)
+[12:51:28] [INFO] [Bullet] Distance-based penetration chance: 95,98848%
+[12:51:28] [INFO] [Bullet] Starting wall penetration at (509.28723, 384.1782)
+[12:51:28] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7,1341915
+[12:51:28] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:28] [INFO] [Bullet] Exiting penetration at (530.4184, 373.924) after traveling 18,487724 pixels through wall
+[12:51:28] [INFO] [Bullet] Damage multiplier after penetration: 0,028125
+[12:51:28] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[12:51:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(609.9954, 850.4131), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:51:28] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:51:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(735.3463, 733.5771), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:51:28] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[12:51:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.2609, 801.5937), shooter_id=208557573805, bullet_pos=(733.5786, 843.2592)
+[12:51:29] [INFO] [Bullet] Using shooter_position, distance=41.6666793823242
+[12:51:29] [INFO] [Bullet] Distance to wall: 41.6666793823242 (2.83716081740981% of viewport)
+[12:51:29] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:51:29] [INFO] [Bullet] Starting wall penetration at (733.5786, 843.2592)
+[12:51:29] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:51:29] [INFO] [Bullet] Exiting penetration at (733.9344, 889.9245) after traveling 41.6666717529297 pixels through wall
+[12:51:29] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:51:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(591.3287, 850.4131), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:51:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(744.8082, 738.5015), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:51:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[12:51:29] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
+[12:51:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(753.7872, 805.955), shooter_id=208557573805, bullet_pos=(754.3416, 847.618)
+[12:51:29] [INFO] [Bullet] Using shooter_position, distance=41.6666526794434
+[12:51:29] [INFO] [Bullet] Distance to wall: 41.6666526794434 (2.83715899916155% of viewport)
+[12:51:29] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:51:29] [INFO] [Bullet] Starting wall penetration at (754.3416, 847.618)
+[12:51:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 4.28089618682861
+[12:51:29] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:29] [INFO] [Bullet] Exiting penetration at (754.9626, 894.2805) after traveling 41.6666679382324 pixels through wall
+[12:51:29] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:51:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(754.2701, 743.4258), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:51:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[12:51:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(565.8864, 841.3795), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:51:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(763.7321, 748.3501), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:51:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[12:51:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(775.7671, 807.9896), shooter_id=208557573805, bullet_pos=(811.8141, 1013.181)
+[12:51:29] [INFO] [Bullet] Using shooter_position, distance=208.333282470703
+[12:51:29] [INFO] [Bullet] Distance to wall: 208.333282470703 (14.1857962945565% of viewport)
+[12:51:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:29] [INFO] [Bullet] Starting wall penetration at (811.8141, 1013.181)
+[12:51:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.6816062927246
+[12:51:29] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:29] [INFO] [Bullet] Exiting penetration at (819.8887, 1059.143) after traveling 41.6666679382324 pixels through wall
+[12:51:29] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:51:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.3559, 819.7361), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:29] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:51:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(798.8179, 806.656), shooter_id=208557573805, bullet_pos=(859.5446, 1005.943)
+[12:51:29] [INFO] [Bullet] Using shooter_position, distance=208.333465576172
+[12:51:29] [INFO] [Bullet] Distance to wall: 208.333465576172 (14.1858087625446% of viewport)
+[12:51:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(798.8179, 806.656), shooter_id=208557573805, bullet_pos=(919.791, 872.2207)
+[12:51:29] [INFO] [Bullet] Using shooter_position, distance=137.598022460938
+[12:51:29] [INFO] [Bullet] Distance to wall: 137.598022460938 (9.36930236981777% of viewport)
+[12:51:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:29] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:51:29] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:51:29] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:51:29] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:51:29] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:51:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1367.1609, 201.8199)
+[12:51:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:29] [INFO] [Bullet] Using shooter_position, distance=1381,9769
+[12:51:29] [INFO] [Bullet] Distance to wall: 1381,9769 (94,10135% of viewport)
+[12:51:29] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:51:29] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:51:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1214.1667, 47.22644)
+[12:51:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:29] [INFO] [Bullet] Using shooter_position, distance=1215,0848
+[12:51:29] [INFO] [Bullet] Distance to wall: 1215,0848 (82,737366% of viewport)
+[12:51:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(798.8179, 806.656), shooter_id=208557573805, bullet_pos=(687.9709, 56.60919)
+[12:51:29] [INFO] [Bullet] Using shooter_position, distance=758.193481445313
+[12:51:29] [INFO] [Bullet] Distance to wall: 758.193481445313 (51.6267883464867% of viewport)
+[12:51:29] [INFO] [Bullet] Distance-based penetration chance: 86.4354135957655%
+[12:51:29] [INFO] [Bullet] Starting wall penetration at (687.9709, 56.60919)
+[12:51:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.52024364471436
+[12:51:29] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:29] [INFO] [Bullet] Exiting penetration at (678.3734, 22.84248) after traveling 30.1041717529297 pixels through wall
+[12:51:29] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[12:51:29] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:51:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1012.46454, 277.3957)
+[12:51:29] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:29] [INFO] [Bullet] Using shooter_position, distance=1049,7775
+[12:51:29] [INFO] [Bullet] Distance to wall: 1049,7775 (71,481285% of viewport)
+[12:51:29] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[12:51:29] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:51:30] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:51:30] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[12:51:30] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:51:30] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:51:30] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[12:51:30] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:51:30] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:51:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1526.1495, 784.0098)
+[12:51:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:30] [INFO] [Bullet] Using shooter_position, distance=1715,7517
+[12:51:30] [INFO] [Bullet] Distance to wall: 1715,7517 (116,82869% of viewport)
+[12:51:30] [INFO] [Bullet] Distance-based penetration chance: 26,634264%
+[12:51:30] [INFO] [Bullet] Penetration failed (distance roll)
+[12:51:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.9128, 707.8382), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:30] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
+[12:51:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.2752, 690.1723), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:30] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
+[12:51:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(930.0744, 861.0021)
+[12:51:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:30] [INFO] [Bullet] Using shooter_position, distance=1267,4237
+[12:51:30] [INFO] [Bullet] Distance to wall: 1267,4237 (86,301216% of viewport)
+[12:51:30] [ENEMY] [Enemy1] State: SUPPRESSED -> IN_COVER
+[12:51:30] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
+[12:51:30] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[12:51:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(680.2319, 680.5123), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:30] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
+[12:51:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(917.11346, 892.2138)
+[12:51:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:30] [INFO] [Bullet] Using shooter_position, distance=1279,5088
+[12:51:30] [INFO] [Bullet] Distance to wall: 1279,5088 (87,12411% of viewport)
+[12:51:30] [INFO] [Bullet] Distance-based penetration chance: 45,02188%
+[12:51:30] [INFO] [Bullet] Penetration failed (distance roll)
+[12:51:30] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:51:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(601.4301, 1005.89325)
+[12:51:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:30] [INFO] [Bullet] Using shooter_position, distance=1171,981
+[12:51:30] [INFO] [Bullet] Distance to wall: 1171,981 (79,80234% of viewport)
+[12:51:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(518.13916, 959.5565)
+[12:51:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:30] [INFO] [Bullet] Using shooter_position, distance=1090,5122
+[12:51:30] [INFO] [Bullet] Distance to wall: 1090,5122 (74,25498% of viewport)
+[12:51:30] [INFO] [Bullet] Distance-based penetration chance: 60,035854%
+[12:51:30] [INFO] [Bullet] Starting wall penetration at (518.13916, 959.5565)
+[12:51:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(676.0866, 682.8325), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:30] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
+[12:51:30] [INFO] [Bullet] Raycast backward hit penetrating body at distance 14,34699
+[12:51:30] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:30] [INFO] [Bullet] Exiting penetration at (487.46255, 942.4904) after traveling 30,104168 pixels through wall
+[12:51:30] [INFO] [Bullet] Damage multiplier after penetration: 0,225
+[12:51:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(924.1882, 942.9782)
+[12:51:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:30] [INFO] [Bullet] Using shooter_position, distance=1320,3528
+[12:51:30] [INFO] [Bullet] Distance to wall: 1320,3528 (89,90525% of viewport)
+[12:51:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(877.4896, 1002.7272)
+[12:51:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:30] [INFO] [Bullet] Using shooter_position, distance=1332,4601
+[12:51:30] [INFO] [Bullet] Distance to wall: 1332,4601 (90,72966% of viewport)
+[12:51:30] [INFO] [Bullet] Distance-based penetration chance: 40,815407%
+[12:51:30] [INFO] [Bullet] Penetration failed (distance roll)
+[12:51:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(660.8392, 697.1326), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:51:30] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
+[12:51:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(922.82324, 942.6859)
+[12:51:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:30] [INFO] [Bullet] Using shooter_position, distance=1319,189
+[12:51:30] [INFO] [Bullet] Distance to wall: 1319,189 (89,826004% of viewport)
+[12:51:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(872.3815, 999.31024)
+[12:51:30] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:30] [INFO] [Bullet] Using shooter_position, distance=1326,5256
+[12:51:30] [INFO] [Bullet] Distance to wall: 1326,5256 (90,32557% of viewport)
+[12:51:30] [ENEMY] [Enemy10] State: FLANKING -> RETREATING
+[12:51:30] [ENEMY] [Enemy4] Hit taken, health: 0/2
+[12:51:30] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[12:51:30] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:51:30] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[12:51:30] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
+[12:51:31] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[12:51:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(926.53375, 937.56836)
+[12:51:31] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:31] [INFO] [Bullet] Using shooter_position, distance=1318,1423
+[12:51:31] [INFO] [Bullet] Distance to wall: 1318,1423 (89,75474% of viewport)
+[12:51:31] [INFO] [Bullet] Distance-based penetration chance: 41,952812%
+[12:51:31] [INFO] [Bullet] Starting wall penetration at (926.53375, 937.56836)
+[12:51:31] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33,899837
+[12:51:31] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:31] [INFO] [Bullet] Exiting penetration at (961.1358, 968.8809) after traveling 41,666668 pixels through wall
+[12:51:31] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:51:31] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
+[12:51:31] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
+[12:51:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(469.6669, 854.4449), source=ENEMY (Enemy10), range=1469, listeners=8
+[12:51:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=4
+[12:51:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(492.4822, 918.5547), shooter_id=210268850699, bullet_pos=(517.9982, 951.4948)
+[12:51:32] [INFO] [Bullet] Using shooter_position, distance=41.6666946411133
+[12:51:32] [INFO] [Bullet] Distance to wall: 41.6666946411133 (2.83716185640882% of viewport)
+[12:51:32] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:51:32] [INFO] [Bullet] Starting wall penetration at (517.9982, 951.4948)
+[12:51:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.8658218383789
+[12:51:32] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:32] [INFO] [Bullet] Exiting penetration at (546.576, 988.3876) after traveling 41.6666679382324 pixels through wall
+[12:51:32] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:51:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(469.6669, 854.4449), source=ENEMY (Enemy10), range=1469, listeners=8
+[12:51:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=4
+[12:51:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(514.4132, 905.7125), shooter_id=210268850699, bullet_pos=(514.4132, 905.7125)
+[12:51:32] [INFO] [Bullet] Using shooter_position, distance=0
+[12:51:32] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:51:32] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:51:32] [INFO] [Bullet] Starting wall penetration at (514.4132, 905.7125)
+[12:51:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.0939674377441
+[12:51:32] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:32] [INFO] [Bullet] Exiting penetration at (549.9969, 935.9048) after traveling 41.6666641235352 pixels through wall
+[12:51:32] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:51:32] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
+[12:51:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(472.7523, 767.1786), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:51:32] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=2
+[12:51:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(512.9489, 820.36383)
+[12:51:32] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:32] [INFO] [Bullet] Using shooter_position, distance=967,52954
+[12:51:32] [INFO] [Bullet] Distance to wall: 967,52954 (65,88087% of viewport)
+[12:51:32] [ENEMY] [Enemy10] Hit taken, health: 1/2
+[12:51:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(434.2523, 767.1786), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:51:32] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=2
+[12:51:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(515.6321, 838.687)
+[12:51:32] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:32] [INFO] [Bullet] Using shooter_position, distance=984,5163
+[12:51:32] [INFO] [Bullet] Distance to wall: 984,5163 (67,03753% of viewport)
+[12:51:32] [ENEMY] [Enemy10] Hit taken, health: 0/2
+[12:51:32] [ENEMY] [Enemy10] Enemy died (ricochet: false, penetration: false)
+[12:51:32] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[12:51:32] [INFO] [SoundPropagation] Unregistered listener: Enemy10 (remaining: 7)
+[12:51:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(395.7523, 767.1786), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:51:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=2
+[12:51:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(517.6145, 854.64056)
+[12:51:32] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:32] [INFO] [Bullet] Using shooter_position, distance=999,1673
+[12:51:32] [INFO] [Bullet] Distance to wall: 999,1673 (68,03514% of viewport)
+[12:51:32] [INFO] [Bullet] Distance-based penetration chance: 67,29234%
+[12:51:32] [INFO] [Bullet] Starting wall penetration at (517.6145, 854.64056)
+[12:51:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38,806736
+[12:51:32] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:32] [INFO] [Bullet] Exiting penetration at (555.52716, 881.85095) after traveling 41,666668 pixels through wall
+[12:51:32] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:51:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(358.528, 770.2582), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:51:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=2
+[12:51:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(523.11206, 868.4835)
+[12:51:32] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:32] [INFO] [Bullet] Using shooter_position, distance=1013,8589
+[12:51:32] [INFO] [Bullet] Distance to wall: 1013,8589 (69,035515% of viewport)
+[12:51:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(327.1714, 787.504), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:51:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=2
+[12:51:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(500.07144, 870.2183)
+[12:51:32] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:32] [INFO] [Bullet] Using shooter_position, distance=1003,66895
+[12:51:32] [INFO] [Bullet] Distance to wall: 1003,66895 (68,34167% of viewport)
+[12:51:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(299.8675, 814.5341), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:51:32] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=2
+[12:51:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(518.20593, 896.8309)
+[12:51:32] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:32] [INFO] [Bullet] Using shooter_position, distance=1035,7814
+[12:51:32] [INFO] [Bullet] Distance to wall: 1035,7814 (70,52826% of viewport)
+[12:51:33] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
+[12:51:33] [ENEMY] [Enemy1] Player reloading state changed: false -> true
+[12:51:33] [ENEMY] [Enemy2] Player reloading state changed: false -> true
+[12:51:33] [ENEMY] [Enemy5] Player reloading state changed: false -> true
+[12:51:33] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[12:51:33] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[12:51:33] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[12:51:33] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[12:51:33] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[12:51:33] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(222.772, 962.1003), source=PLAYER (Player), range=900, listeners=7
+[12:51:33] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=2
+[12:51:33] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=590), can_see=false
+[12:51:33] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=540), can_see=false
+[12:51:33] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1599), can_see=false
+[12:51:33] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1802), can_see=false
+[12:51:33] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1390), can_see=false
+[12:51:33] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1747), can_see=false
+[12:51:33] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1967), can_see=false
+[12:51:33] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
+[12:51:33] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
+[12:51:33] [ENEMY] [Enemy1] Player reloading state changed: true -> false
+[12:51:33] [ENEMY] [Enemy2] Player reloading state changed: true -> false
+[12:51:33] [ENEMY] [Enemy5] Player reloading state changed: true -> false
+[12:51:33] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[12:51:33] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[12:51:33] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[12:51:33] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[12:51:33] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[12:51:33] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
+[12:51:33] [INFO] [Player.Reload.Anim] LeftArm: pos=(21.757977, 5.9466887), target=(24, 6), base=(24, 6)
+[12:51:33] [INFO] [Player.Reload.Anim] RightArm: pos=(-1.9999158, 6.3292303), target=(-2, 6), base=(-2, 6)
+[12:51:33] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
+[12:51:35] [INFO] [ScoreManager] Combo ended at 2. Max combo: 2
+[12:51:36] [INFO] [PauseMenu] Armory button pressed
+[12:51:36] [INFO] [PauseMenu] Creating new armory menu instance
+[12:51:36] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
+[12:51:36] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
+[12:51:36] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
+[12:51:36] [INFO] [PauseMenu] back_pressed signal exists on instance
+[12:51:36] [INFO] [PauseMenu] back_pressed signal connected
+[12:51:36] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
+[12:51:36] [INFO] [PauseMenu] _populate_weapon_grid method exists
+[12:51:40] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[12:51:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(588.6609, 733.3771), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:51:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=3
+[12:51:40] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[12:51:40] [ENEMY] [Enemy1] Hit taken, health: 3/4
+[12:51:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(615.8846, 706.1534), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:51:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=3
+[12:51:40] [ENEMY] [Enemy1] Hit taken, health: 2/4
+[12:51:40] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[12:51:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(646.6801, 687.5527), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:51:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=4
+[12:51:40] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:51:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(463.0329, 636.3464), source=ENEMY (Enemy1), range=1469, listeners=7
+[12:51:40] [ENEMY] [Enemy2] Heard gunshot at (463.0329, 636.3464), source_type=1, intensity=0.37, distance=82
+[12:51:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[12:51:40] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:51:40] [ENEMY] [Enemy2] Hit taken, health: 3/4
+[12:51:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.5035, 683.5053), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:51:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=4
+[12:51:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(463.1791, 625.6807), source=ENEMY (Enemy1), range=1469, listeners=7
+[12:51:40] [ENEMY] [Enemy2] Heard gunshot at (463.1791, 625.6807), source_type=1, intensity=0.48, distance=72
+[12:51:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[12:51:40] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:51:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(399.2193, 619.2708), source=ENEMY (Enemy2), range=1469, listeners=7
+[12:51:40] [ENEMY] [Enemy1] Heard gunshot at (399.2193, 619.2708), source_type=1, intensity=0.56, distance=67
+[12:51:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[12:51:40] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[12:51:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(722.0035, 683.5053), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:51:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=4
+[12:51:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(500.5877, 682.5243), shooter_id=207701936239, bullet_pos=(684.4252, 851.9459)
+[12:51:40] [INFO] [Bullet] Using shooter_position, distance=249.999877929688
+[12:51:40] [INFO] [Bullet] Distance to wall: 249.999877929688 (17.0229513974718% of viewport)
+[12:51:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(406.5312, 611.5047), source=ENEMY (Enemy2), range=1469, listeners=7
+[12:51:40] [ENEMY] [Enemy1] Heard gunshot at (406.5312, 611.5047), source_type=1, intensity=0.73, distance=59
+[12:51:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[12:51:40] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[12:51:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(334.4516, 598.3964), shooter_id=207987148928, bullet_pos=(43.52694, 577.604)
+[12:51:40] [INFO] [Bullet] Using shooter_position, distance=291.666717529297
+[12:51:40] [INFO] [Bullet] Distance to wall: 291.666717529297 (19.8601231243712% of viewport)
+[12:51:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(413.8431, 603.7386), source=ENEMY (Enemy2), range=1469, listeners=7
+[12:51:40] [ENEMY] [Enemy1] Heard gunshot at (413.8431, 603.7386), source_type=1, intensity=0.98, distance=50
+[12:51:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[12:51:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(500.5877, 682.5243), shooter_id=207701936239, bullet_pos=(503.0836, 972.0355)
+[12:51:40] [INFO] [Bullet] Using shooter_position, distance=289.521911621094
+[12:51:40] [INFO] [Bullet] Distance to wall: 289.521911621094 (19.7140793461313% of viewport)
+[12:51:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:40] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[12:51:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(757.8247, 689.9725), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:51:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=4
+[12:51:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(378.5089, 661.8944), shooter_id=207987148928, bullet_pos=(359.3683, 698.9045)
+[12:51:40] [INFO] [Bullet] Using shooter_position, distance=41.6666679382324
+[12:51:40] [INFO] [Bullet] Distance to wall: 41.6666679382324 (2.83716003816056% of viewport)
+[12:51:40] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:51:40] [INFO] [Bullet] Starting wall penetration at (359.3683, 698.9045)
+[12:51:40] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31.9235782623291
+[12:51:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(500.5877, 682.5243), shooter_id=207701936239, bullet_pos=(555.1674, 1011.271)
+[12:51:40] [INFO] [Bullet] Using shooter_position, distance=333.246429443359
+[12:51:40] [INFO] [Bullet] Distance to wall: 333.246429443359 (22.691362166948% of viewport)
+[12:51:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:40] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:40] [INFO] [Bullet] Exiting penetration at (337.9309, 740.3559) after traveling 41.666675567627 pixels through wall
+[12:51:40] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:51:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(339.3708, 600.5469), shooter_id=207987148928, bullet_pos=(47.73481, 596.3133)
+[12:51:40] [INFO] [Bullet] Using shooter_position, distance=291.666717529297
+[12:51:40] [INFO] [Bullet] Distance to wall: 291.666717529297 (19.8601231243712% of viewport)
+[12:51:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:40] [INFO] [Bullet] Starting wall penetration at (47.73481, 596.3133)
+[12:51:40] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30.9301986694336
+[12:51:40] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:40] [INFO] [Bullet] Exiting penetration at (1.073059, 595.6359) after traveling 41.6666679382324 pixels through wall
+[12:51:40] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:51:40] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:51:40] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[12:51:40] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:51:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(787.4427, 711.4153), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:51:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=4
+[12:51:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(500.5877, 682.5243), shooter_id=207701936239, bullet_pos=(694.5735, 890.9959)
+[12:51:41] [INFO] [Bullet] Using shooter_position, distance=284.7646484375
+[12:51:41] [INFO] [Bullet] Distance to wall: 284.7646484375 (19.3901485481248% of viewport)
+[12:51:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:41] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:51:41] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:51:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(500.5877, 682.5243), shooter_id=207701936239, bullet_pos=(810.3054, 997.4584)
+[12:51:41] [INFO] [Bullet] Using shooter_position, distance=441.7109375
+[12:51:41] [INFO] [Bullet] Distance to wall: 441.7109375 (30.076909969168% of viewport)
+[12:51:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:41] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:51:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(500.5877, 682.5243), shooter_id=207701936239, bullet_pos=(913.8011, 884.9078)
+[12:51:41] [INFO] [Bullet] Using shooter_position, distance=460.113525390625
+[12:51:41] [INFO] [Bullet] Distance to wall: 460.113525390625 (31.3299760180159% of viewport)
+[12:51:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(33.047543, 533.8956)
+[12:51:41] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:41] [INFO] [Bullet] Using shooter_position, distance=534,9174
+[12:51:41] [INFO] [Bullet] Distance to wall: 534,9174 (36,42351% of viewport)
+[12:51:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:41] [INFO] [Bullet] Starting wall penetration at (33.047543, 533.8956)
+[12:51:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45,59052
+[12:51:41] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:41] [INFO] [Bullet] Exiting penetration at (-12.378395, 523.2063) after traveling 41,66667 pixels through wall
+[12:51:41] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:51:41] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[12:51:41] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:51:41] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:51:41] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:51:41] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:51:41] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[12:51:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(500.5877, 682.5243), shooter_id=207701936239, bullet_pos=(517.3447, 496.5048)
+[12:51:41] [INFO] [Bullet] Using shooter_position, distance=186.772750854492
+[12:51:41] [INFO] [Bullet] Distance to wall: 186.772750854492 (12.717700050487% of viewport)
+[12:51:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:41] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:51:42] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:51:42] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[12:51:42] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:51:42] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[12:51:42] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[12:51:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(500.5877, 682.5243), shooter_id=207701936239, bullet_pos=(918.3983, 60.06573)
+[12:51:42] [INFO] [Bullet] Using shooter_position, distance=749.680114746094
+[12:51:42] [INFO] [Bullet] Distance to wall: 749.680114746094 (51.047097553236% of viewport)
+[12:51:42] [INFO] [Bullet] Distance-based penetration chance: 87.1117195212247%
+[12:51:42] [INFO] [Bullet] Penetration failed (distance roll)
+[12:51:42] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[12:51:42] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[12:51:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(540.1652, 690.9474), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:51:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=3
+[12:51:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(515.7053, 690.9474), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:51:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=3
+[12:51:42] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:51:42] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:51:42] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:51:42] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:51:42] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:51:42] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:51:42] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:51:42] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:51:42] [INFO] [PenultimateHit] Applying saturation to 7 enemies
+[12:51:42] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:51:43] [ENEMY] [Enemy7] FLANKING started: target=(577.4049, 875.2164), side=right, pos=(1485.411, 891.9965)
+[12:51:43] [ENEMY] [Enemy7] State: PURSUING -> FLANKING
+[12:51:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(263.01727, 274.7879)
+[12:51:43] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:43] [INFO] [Bullet] Using shooter_position, distance=380,37674
+[12:51:43] [INFO] [Bullet] Distance to wall: 380,37674 (25,90055% of viewport)
+[12:51:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(515.7731, 690.8953), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:51:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=3
+[12:51:43] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:51:43] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:51:43] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:51:43] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:51:43] [INFO] [LastChance] Player died
+[12:51:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(59.785282, 608.8692)
+[12:51:43] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:43] [INFO] [Bullet] Using shooter_position, distance=611,79736
+[12:51:43] [INFO] [Bullet] Distance to wall: 611,79736 (41,65841% of viewport)
+[12:51:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(141.62044, 703.9079)
+[12:51:43] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:51:43] [INFO] [Bullet] Using shooter_position, distance=718,013
+[12:51:43] [INFO] [Bullet] Distance to wall: 718,013 (48,890827% of viewport)
+[12:51:44] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:51:44] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:51:44] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:51:44] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:51:44] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:51:44] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:51:44] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:51:44] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:51:44] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[12:51:44] [INFO] [ScoreManager] Level started with 10 enemies
+[12:51:44] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 8)
+[12:51:44] [ENEMY] [Enemy1] Registered as sound listener
+[12:51:44] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:51:44] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 9)
+[12:51:44] [ENEMY] [Enemy2] Registered as sound listener
+[12:51:44] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:51:44] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 10)
+[12:51:44] [ENEMY] [Enemy3] Registered as sound listener
+[12:51:44] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:51:44] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 11)
+[12:51:44] [ENEMY] [Enemy4] Registered as sound listener
+[12:51:44] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:51:44] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 12)
+[12:51:44] [ENEMY] [Enemy5] Registered as sound listener
+[12:51:44] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:51:44] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 13)
+[12:51:44] [ENEMY] [Enemy6] Registered as sound listener
+[12:51:44] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:51:44] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 14)
+[12:51:44] [ENEMY] [Enemy7] Registered as sound listener
+[12:51:44] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:51:44] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 15)
+[12:51:44] [ENEMY] [Enemy8] Registered as sound listener
+[12:51:44] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:51:44] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 16)
+[12:51:44] [ENEMY] [Enemy9] Registered as sound listener
+[12:51:44] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:51:44] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 17)
+[12:51:44] [ENEMY] [Enemy10] Registered as sound listener
+[12:51:44] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:51:44] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:51:44] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:51:44] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:51:44] [INFO] [LastChance] Found player: Player
+[12:51:44] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:51:44] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:51:44] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:51:44] [INFO] [Player] Detecting weapon pose (frame 3)...
+[12:51:44] [INFO] [Player] Detected weapon: Rifle (default pose)
+[12:51:44] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[12:51:44] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:51:45] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:51:45] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:51:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(657.9607, 757.1705), source=ENEMY (Enemy3), range=1469, listeners=17
+[12:51:46] [INFO] [SoundPropagation] Cleaned up 7 invalid listeners
+[12:51:46] [ENEMY] [Enemy2] Heard gunshot at (657.9607, 757.1705), source_type=1, intensity=0.02, distance=331
+[12:51:46] [ENEMY] [Enemy4] Heard gunshot at (657.9607, 757.1705), source_type=1, intensity=0.06, distance=201
+[12:51:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:51:46] [INFO] [LastChance] Threat detected: Bullet
+[12:51:46] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:51:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:51:46] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:51:46] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:51:46] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:51:46] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:51:46] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:51:46] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:51:46] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:51:46] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:51:46] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:51:46] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:51:46] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[12:51:46] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:51:46] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:51:46] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:51:46] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:51:46] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:51:46] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:51:46] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:51:46] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:51:46] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:51:46] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[12:51:46] [INFO] [ScoreManager] Level started with 10 enemies
+[12:51:46] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:51:46] [ENEMY] [Enemy1] Registered as sound listener
+[12:51:46] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:51:46] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:51:46] [ENEMY] [Enemy2] Registered as sound listener
+[12:51:46] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:51:46] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:51:46] [ENEMY] [Enemy3] Registered as sound listener
+[12:51:46] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:51:46] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:51:46] [ENEMY] [Enemy4] Registered as sound listener
+[12:51:46] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:51:46] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:51:46] [ENEMY] [Enemy5] Registered as sound listener
+[12:51:46] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:51:46] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:51:46] [ENEMY] [Enemy6] Registered as sound listener
+[12:51:46] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:51:46] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:51:46] [ENEMY] [Enemy7] Registered as sound listener
+[12:51:46] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:51:46] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:51:46] [ENEMY] [Enemy8] Registered as sound listener
+[12:51:46] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:51:46] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:51:46] [ENEMY] [Enemy9] Registered as sound listener
+[12:51:46] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:51:46] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:51:46] [ENEMY] [Enemy10] Registered as sound listener
+[12:51:46] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:51:46] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:51:46] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:51:46] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:51:46] [INFO] [LastChance] Found player: Player
+[12:51:46] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:51:46] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:51:46] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:51:46] [INFO] [Player] Detecting weapon pose (frame 3)...
+[12:51:46] [INFO] [Player] Detected weapon: Rifle (default pose)
+[12:51:46] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[12:51:47] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:51:48] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:51:48] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:51:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(572.7762, 758.4925), source=ENEMY (Enemy3), range=1469, listeners=20
+[12:51:49] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:51:49] [ENEMY] [Enemy1] Heard gunshot at (572.7762, 758.4925), source_type=1, intensity=0.01, distance=491
+[12:51:49] [ENEMY] [Enemy2] Heard gunshot at (572.7762, 758.4925), source_type=1, intensity=0.03, distance=271
+[12:51:49] [ENEMY] [Enemy4] Heard gunshot at (572.7762, 758.4925), source_type=1, intensity=0.03, distance=268
+[12:51:49] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[12:51:49] [INFO] [LastChance] Threat detected: Bullet
+[12:51:49] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:51:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:51:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:51:49] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:51:49] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:51:49] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:51:49] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:51:49] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:51:49] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:51:49] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:51:49] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:51:49] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:51:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(572.7762, 758.4925), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:51:49] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[12:51:49] [INFO] [LastChance] Threat detected: Bullet
+[12:51:49] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:51:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:51:49] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:51:49] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:51:49] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:51:49] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:51:49] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:51:49] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:51:49] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:51:49] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:51:49] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:51:49] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[12:51:49] [INFO] [ScoreManager] Level started with 10 enemies
+[12:51:49] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:51:49] [ENEMY] [Enemy1] Registered as sound listener
+[12:51:49] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:51:49] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:51:49] [ENEMY] [Enemy2] Registered as sound listener
+[12:51:49] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:51:49] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:51:49] [ENEMY] [Enemy3] Registered as sound listener
+[12:51:49] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:51:49] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:51:49] [ENEMY] [Enemy4] Registered as sound listener
+[12:51:49] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:51:49] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:51:49] [ENEMY] [Enemy5] Registered as sound listener
+[12:51:49] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:51:49] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:51:49] [ENEMY] [Enemy6] Registered as sound listener
+[12:51:49] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:51:49] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:51:49] [ENEMY] [Enemy7] Registered as sound listener
+[12:51:49] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:51:49] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:51:49] [ENEMY] [Enemy8] Registered as sound listener
+[12:51:49] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:51:49] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:51:49] [ENEMY] [Enemy9] Registered as sound listener
+[12:51:49] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:51:49] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:51:49] [ENEMY] [Enemy10] Registered as sound listener
+[12:51:49] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:51:49] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:51:49] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:51:49] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:51:49] [INFO] [LastChance] Found player: Player
+[12:51:49] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:51:49] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:51:49] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:51:49] [INFO] [Player] Detecting weapon pose (frame 3)...
+[12:51:49] [INFO] [Player] Detected weapon: Rifle (default pose)
+[12:51:49] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[12:51:51] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:51:51] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:51:52] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[12:51:52] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:51:53] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:51:53] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[12:51:54] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[12:51:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.522, 1532.745), source=ENEMY (Enemy10), range=1469, listeners=20
+[12:51:54] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:51:54] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:51:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(914.4467, 1730.348)
+[12:51:54] [INFO] [Bullet] Using shooter_position, distance=166.666564941406
+[12:51:54] [INFO] [Bullet] Distance to wall: 166.666564941406 (11.3486328796492% of viewport)
+[12:51:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.522, 1532.745), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:51:54] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(914.4467, 1730.348)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=166.666564941406
+[12:51:55] [INFO] [Bullet] Distance to wall: 166.666564941406 (11.3486328796492% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.522, 1532.745), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:51:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1168.018, 2077.625)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=510.22607421875
+[12:51:55] [INFO] [Bullet] Distance to wall: 510.22607421875 (34.7422316165748% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(914.4467, 1730.348)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=166.666564941406
+[12:51:55] [INFO] [Bullet] Distance to wall: 166.666564941406 (11.3486328796492% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.522, 1532.745), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:51:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1226.241, 2075.886)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=529.705444335938
+[12:51:55] [INFO] [Bullet] Distance to wall: 529.705444335938 (36.0686177472573% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [ENEMY] [Enemy7] FLANKING started: target=(1128.79, 1642.641), side=right, pos=(1614.067, 933.2074)
+[12:51:55] [ENEMY] [Enemy7] State: PURSUING -> FLANKING
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(914.4467, 1730.348)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=166.666564941406
+[12:51:55] [INFO] [Bullet] Distance to wall: 166.666564941406 (11.3486328796492% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [INFO] [Bullet] Starting wall penetration at (914.4467, 1730.348)
+[12:51:55] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:51:55] [INFO] [Bullet] Exiting penetration at (888.0508, 1768.832) after traveling 41.6666679382324 pixels through wall
+[12:51:55] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:51:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.522, 1532.745), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:51:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1226.939, 2075.255)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=529.417663574219
+[12:51:55] [INFO] [Bullet] Distance to wall: 529.417663574219 (36.0490222260097% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [INFO] [Bullet] Starting wall penetration at (1226.939, 2075.255)
+[12:51:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.4236240386963
+[12:51:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:55] [INFO] [Bullet] Exiting penetration at (1254.076, 2105.207) after traveling 35.4166717529297 pixels through wall
+[12:51:55] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(914.4467, 1730.348)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=166.666564941406
+[12:51:55] [INFO] [Bullet] Distance to wall: 166.666564941406 (11.3486328796492% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.522, 1532.745), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:51:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(914.4467, 1730.348)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=166.666564941406
+[12:51:55] [INFO] [Bullet] Distance to wall: 166.666564941406 (11.3486328796492% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1491.013, 1703.937)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=494.910919189453
+[12:51:55] [INFO] [Bullet] Distance to wall: 494.910919189453 (33.6993945485431% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.522, 1532.745), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:51:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1160.132, 2083.248)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=513.189270019531
+[12:51:55] [INFO] [Bullet] Distance to wall: 513.189270019531 (34.9440010674866% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(914.4467, 1730.348)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=166.666564941406
+[12:51:55] [INFO] [Bullet] Distance to wall: 166.666564941406 (11.3486328796492% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.522, 1532.745), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:51:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1127.693, 2062.345)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=484.283111572266
+[12:51:55] [INFO] [Bullet] Distance to wall: 484.283111572266 (32.9757275850739% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [INFO] [Bullet] Starting wall penetration at (1127.693, 2062.345)
+[12:51:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 0.41784617304802
+[12:51:55] [INFO] [Bullet] Max penetration distance exceeded: 70.8333435058594 >= 48
+[12:51:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:55] [INFO] [Bullet] Exiting penetration at (1168.676, 2126.151) after traveling 70.8333435058594 pixels through wall
+[12:51:55] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(914.4467, 1730.348)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=166.666564941406
+[12:51:55] [INFO] [Bullet] Distance to wall: 166.666564941406 (11.3486328796492% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1293.695, 1398.963)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=344.709869384766
+[12:51:55] [INFO] [Bullet] Distance to wall: 344.709869384766 (23.4719288719656% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.522, 1532.745), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:51:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1106.729, 2074.911)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=491.870422363281
+[12:51:55] [INFO] [Bullet] Distance to wall: 491.870422363281 (33.4923615286684% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [INFO] [Bullet] Starting wall penetration at (1106.729, 2074.911)
+[12:51:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.2658309936523
+[12:51:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:55] [INFO] [Bullet] Exiting penetration at (1126.425, 2110.204) after traveling 35.4166717529297 pixels through wall
+[12:51:55] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(914.4467, 1730.348)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=166.666564941406
+[12:51:55] [INFO] [Bullet] Distance to wall: 166.666564941406 (11.3486328796492% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1502.413, 1737.287)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=514.374328613281
+[12:51:55] [INFO] [Bullet] Distance to wall: 514.374328613281 (35.0246938862656% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.522, 1532.745), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:51:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1175.064, 2072.369)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=507.501556396484
+[12:51:55] [INFO] [Bullet] Distance to wall: 507.501556396484 (34.5567141881102% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(914.4467, 1730.348)
+[12:51:55] [INFO] [Bullet] Using shooter_position, distance=166.666564941406
+[12:51:55] [INFO] [Bullet] Distance to wall: 166.666564941406 (11.3486328796492% of viewport)
+[12:51:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.522, 1532.745), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:51:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:51:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1175.501, 2072.036)
+[12:51:56] [INFO] [Bullet] Using shooter_position, distance=507.330139160156
+[12:51:56] [INFO] [Bullet] Distance to wall: 507.330139160156 (34.5450420732801% of viewport)
+[12:51:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(914.4467, 1730.348)
+[12:51:56] [INFO] [Bullet] Using shooter_position, distance=166.666564941406
+[12:51:56] [INFO] [Bullet] Distance to wall: 166.666564941406 (11.3486328796492% of viewport)
+[12:51:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:56] [INFO] [Bullet] Starting wall penetration at (914.4467, 1730.348)
+[12:51:56] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:51:56] [INFO] [Bullet] Exiting penetration at (888.0508, 1768.832) after traveling 41.6666679382324 pixels through wall
+[12:51:56] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:51:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.522, 1532.745), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:51:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:51:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1126.574, 2063.061)
+[12:51:56] [INFO] [Bullet] Using shooter_position, distance=484.703460693359
+[12:51:56] [INFO] [Bullet] Distance to wall: 484.703460693359 (33.004349929683% of viewport)
+[12:51:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:56] [INFO] [Bullet] Starting wall penetration at (1126.574, 2063.061)
+[12:51:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 1.35270309448242
+[12:51:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1146.82, 1398.446)
+[12:51:56] [INFO] [Bullet] Using shooter_position, distance=238.508346557617
+[12:51:56] [INFO] [Bullet] Distance to wall: 238.508346557617 (16.2404718952846% of viewport)
+[12:51:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:56] [INFO] [Bullet] Max penetration distance exceeded: 70.8333435058594 >= 48
+[12:51:56] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:56] [INFO] [Bullet] Exiting penetration at (1167.342, 2127.004) after traveling 70.8333435058594 pixels through wall
+[12:51:56] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:51:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(914.4467, 1730.348)
+[12:51:56] [INFO] [Bullet] Using shooter_position, distance=166.666564941406
+[12:51:56] [INFO] [Bullet] Distance to wall: 166.666564941406 (11.3486328796492% of viewport)
+[12:51:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1494.089, 1665.829)
+[12:51:56] [INFO] [Bullet] Using shooter_position, distance=490.818481445313
+[12:51:56] [INFO] [Bullet] Distance to wall: 490.818481445313 (33.4207329372151% of viewport)
+[12:51:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.522, 1532.745), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:51:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:51:56] [INFO] [LastChance] Threat detected: @Area2D@1694
+[12:51:56] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:51:56] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:51:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(914.4467, 1730.348)
+[12:51:56] [INFO] [Bullet] Using shooter_position, distance=166.666564941406
+[12:51:56] [INFO] [Bullet] Distance to wall: 166.666564941406 (11.3486328796492% of viewport)
+[12:51:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1485.958, 1658.914)
+[12:51:56] [INFO] [Bullet] Using shooter_position, distance=481.783172607422
+[12:51:56] [INFO] [Bullet] Distance to wall: 481.783172607422 (32.8055021439752% of viewport)
+[12:51:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.522, 1532.745), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:51:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:51:56] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:51:56] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:51:56] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:51:56] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:51:56] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:51:56] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:51:56] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:51:56] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:51:56] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:51:56] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:51:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1148.284, 2061.276)
+[12:51:56] [INFO] [Bullet] Using shooter_position, distance=488.723388671875
+[12:51:56] [INFO] [Bullet] Distance to wall: 488.723388671875 (33.2780742177359% of viewport)
+[12:51:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1306.238, 1403.938)
+[12:51:56] [INFO] [Bullet] Using shooter_position, distance=352.457366943359
+[12:51:56] [INFO] [Bullet] Distance to wall: 352.457366943359 (23.9994702271221% of viewport)
+[12:51:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(914.4458, 1730.346)
+[12:51:56] [INFO] [Bullet] Using shooter_position, distance=166.665863037109
+[12:51:56] [INFO] [Bullet] Distance to wall: 166.665863037109 (11.3485850856949% of viewport)
+[12:51:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.522, 1532.745), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:51:57] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:51:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1008.718, 1592.904), shooter_id=661693401916, bullet_pos=(1072.245, 2060.858)
+[12:51:57] [INFO] [Bullet] Using shooter_position, distance=472.245819091797
+[12:51:57] [INFO] [Bullet] Distance to wall: 472.245819091797 (32.1560862054497% of viewport)
+[12:51:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:51:57] [INFO] [Bullet] Starting wall penetration at (1072.245, 2060.858)
+[12:51:57] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:51:57] [INFO] [Bullet] Exiting penetration at (1075.925, 2068.566) after traveling 3.54166698455811 pixels through wall
+[12:51:57] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:51:57] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:51:57] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:51:57] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:51:57] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:51:57] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:51:57] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:51:57] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:51:57] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:51:57] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:51:57] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[12:51:57] [INFO] [ScoreManager] Level started with 10 enemies
+[12:51:57] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:51:57] [ENEMY] [Enemy1] Registered as sound listener
+[12:51:57] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:51:57] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:51:57] [ENEMY] [Enemy2] Registered as sound listener
+[12:51:57] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:51:57] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:51:57] [ENEMY] [Enemy3] Registered as sound listener
+[12:51:57] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:51:57] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:51:57] [ENEMY] [Enemy4] Registered as sound listener
+[12:51:57] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:51:57] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:51:57] [ENEMY] [Enemy5] Registered as sound listener
+[12:51:57] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:51:57] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:51:57] [ENEMY] [Enemy6] Registered as sound listener
+[12:51:57] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:51:57] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:51:57] [ENEMY] [Enemy7] Registered as sound listener
+[12:51:57] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:51:57] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:51:57] [ENEMY] [Enemy8] Registered as sound listener
+[12:51:57] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:51:57] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:51:57] [ENEMY] [Enemy9] Registered as sound listener
+[12:51:57] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:51:57] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:51:57] [ENEMY] [Enemy10] Registered as sound listener
+[12:51:57] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[12:51:57] [INFO] [Player] Detecting weapon pose (frame 3)...
+[12:51:57] [INFO] [Player] Detected weapon: Rifle (default pose)
+[12:51:57] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[12:51:57] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:51:57] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:51:57] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:51:57] [INFO] [LastChance] Found player: Player
+[12:51:57] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:51:57] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:51:57] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:51:58] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:51:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.955, 1464.611), source=ENEMY (Enemy10), range=1469, listeners=20
+[12:51:59] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:51:59] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:51:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1042.053, 1400.532), shooter_id=724406634589, bullet_pos=(1042.053, 1400.532)
+[12:51:59] [INFO] [Bullet] Using shooter_position, distance=0
+[12:51:59] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:51:59] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:51:59] [INFO] [Bullet] Starting wall penetration at (1042.053, 1400.532)
+[12:51:59] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.4804515838623
+[12:51:59] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:59] [INFO] [Bullet] Exiting penetration at (1031.489, 1355.077) after traveling 41.6666679382324 pixels through wall
+[12:51:59] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:51:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1036.086, 1440.942), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:51:59] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:51:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1016.853, 1375.668), shooter_id=724406634589, bullet_pos=(1016.853, 1375.668)
+[12:51:59] [INFO] [Bullet] Using shooter_position, distance=0
+[12:51:59] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:51:59] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:51:59] [INFO] [Bullet] Starting wall penetration at (1016.853, 1375.668)
+[12:51:59] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47.0036888122559
+[12:51:59] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:51:59] [INFO] [Bullet] Exiting penetration at (1008.881, 1329.687) after traveling 41.6666679382324 pixels through wall
+[12:51:59] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1023.846, 1430.638), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:52:00] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:52:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1023.846, 1430.638), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:52:00] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:52:00] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:52:00] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:52:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(982.0544, 1376.934), shooter_id=724406634589, bullet_pos=(765.5419, 1020.938)
+[12:52:00] [INFO] [Bullet] Using shooter_position, distance=416.666412353516
+[12:52:00] [INFO] [Bullet] Distance to wall: 416.666412353516 (28.371582199123% of viewport)
+[12:52:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:00] [INFO] [Bullet] Starting wall penetration at (765.5419, 1020.938)
+[12:52:00] [INFO] [Bullet] Raycast backward hit penetrating body at distance 22.1601734161377
+[12:52:00] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:00] [INFO] [Bullet] Exiting penetration at (741.2925, 981.0665) after traveling 41.6666717529297 pixels through wall
+[12:52:00] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1023.846, 1430.638), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:52:00] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:52:00] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:52:00] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:52:00] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:52:00] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:52:00] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:52:00] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:52:00] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:52:00] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:52:00] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:52:00] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:52:00] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:52:01] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:52:01] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:52:01] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:52:01] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:52:01] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:52:01] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:52:01] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:52:01] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:52:01] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:52:01] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[12:52:01] [INFO] [ScoreManager] Level started with 10 enemies
+[12:52:01] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:52:01] [ENEMY] [Enemy1] Registered as sound listener
+[12:52:01] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:52:01] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:52:01] [ENEMY] [Enemy2] Registered as sound listener
+[12:52:01] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:52:01] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:52:01] [ENEMY] [Enemy3] Registered as sound listener
+[12:52:01] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:52:01] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:52:01] [ENEMY] [Enemy4] Registered as sound listener
+[12:52:01] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:52:01] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:52:01] [ENEMY] [Enemy5] Registered as sound listener
+[12:52:01] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:52:01] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:52:01] [ENEMY] [Enemy6] Registered as sound listener
+[12:52:01] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:52:01] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:52:01] [ENEMY] [Enemy7] Registered as sound listener
+[12:52:01] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:52:01] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:52:01] [ENEMY] [Enemy8] Registered as sound listener
+[12:52:01] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:52:01] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:52:01] [ENEMY] [Enemy9] Registered as sound listener
+[12:52:01] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:52:01] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:52:01] [ENEMY] [Enemy10] Registered as sound listener
+[12:52:01] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:52:01] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:52:01] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:52:01] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:52:01] [INFO] [LastChance] Found player: Player
+[12:52:01] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:52:01] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:52:01] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:52:01] [INFO] [Player] Detecting weapon pose (frame 3)...
+[12:52:01] [INFO] [Player] Detected weapon: Rifle (default pose)
+[12:52:01] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[12:52:05] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:52:05] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:52:05] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[12:52:05] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[12:52:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.768, 754.7612), source=ENEMY (Enemy3), range=1469, listeners=20
+[12:52:05] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:52:05] [ENEMY] [Enemy4] Heard gunshot at (673.768, 754.7612), source_type=1, intensity=0.07, distance=192
+[12:52:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:52:05] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:52:06] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:52:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(608.7902, 734.5504), shooter_id=752441362459, bullet_pos=(37.20407, 481.7376)
+[12:52:06] [INFO] [Bullet] Using shooter_position, distance=624.999938964844
+[12:52:06] [INFO] [Bullet] Distance to wall: 624.999938964844 (42.5573951176636% of viewport)
+[12:52:06] [INFO] [Bullet] Distance-based penetration chance: 97.0163723627258%
+[12:52:06] [INFO] [Bullet] Starting wall penetration at (37.20407, 481.7376)
+[12:52:06] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.9762763977051
+[12:52:06] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:06] [INFO] [Bullet] Exiting penetration at (-5.474354, 462.8609) after traveling 41.6666679382324 pixels through wall
+[12:52:06] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:06] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:52:06] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:52:06] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:52:06] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:52:06] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:52:06] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[12:52:07] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:52:07] [ENEMY] [Enemy10] FLANKING started: target=(573.3854, 482.6725), side=right, pos=(1081.717, 1462.194)
+[12:52:07] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:52:07] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[12:52:08] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:52:08] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
+[12:52:08] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
+[12:52:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:52:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:52:08] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[12:52:08] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[12:52:08] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:52:09] [ENEMY] [Enemy10] State: FLANKING -> RETREATING
+[12:52:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(889.1281, 1736.1854)
+[12:52:09] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:09] [INFO] [Bullet] Using shooter_position, distance=1950,6123
+[12:52:09] [INFO] [Bullet] Distance to wall: 1950,6123 (132,82079% of viewport)
+[12:52:09] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
+[12:52:09] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[12:52:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(867.05383, 2094.673)
+[12:52:09] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:09] [INFO] [Bullet] Using shooter_position, distance=2267,033
+[12:52:09] [INFO] [Bullet] Distance to wall: 2267,033 (154,36644% of viewport)
+[12:52:09] [INFO] [Bullet] Distance-based penetration chance: 19,12671%
+[12:52:09] [INFO] [Bullet] Penetration failed (distance roll)
+[12:52:09] [ENEMY] [Enemy1] FLANKING started: target=(597.0859, 551.8576), side=left, pos=(455.5739, 370.8514)
+[12:52:09] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
+[12:52:10] [ENEMY] [Enemy1] State: FLANKING -> COMBAT
+[12:52:11] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:52:11] [ENEMY] [Enemy10] State: SUPPRESSED -> IN_COVER
+[12:52:11] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
+[12:52:12] [INFO] [GameManager] Debug mode toggled: ON
+[12:52:12] [ENEMY] [Enemy1] FLANKING started: target=(775.1152, 571.9728), side=left, pos=(506.0896, 624.0662)
+[12:52:12] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
+[12:52:12] [ENEMY] [Enemy1] State: FLANKING -> COMBAT
+[12:52:13] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:52:15] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[12:52:15] [ENEMY] [Enemy10] FLANKING started: target=(876.4021, 489.2219), side=left, pos=(686.3818, 1064.946)
+[12:52:15] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:52:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=10
+[12:52:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[12:52:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=10
+[12:52:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[12:52:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:15] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:15] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:15] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:15] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:15] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[12:52:15] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:15] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:15] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=10
+[12:52:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[12:52:15] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[12:52:15] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:52:15] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:52:15] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:52:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:15] [ENEMY] [Enemy10] State: FLANKING -> RETREATING
+[12:52:15] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
+[12:52:15] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[12:52:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:16] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:16] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:16] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:16] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:16] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:16] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:16] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:16] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:16] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:16] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:16] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:16] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:16] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:16] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:16] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:16] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:16] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:16] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:16] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:16] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:16] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:16] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:16] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:16] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:16] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:16] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:16] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:16] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:16] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:16] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:16] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:16] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:16] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:16] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:16] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:16] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:16] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:16] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:16] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:16] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:16] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:16] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:16] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:16] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:16] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:16] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:16] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:16] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:16] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:16] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:16] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:16] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:16] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:17] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:17] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:17] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:17] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:17] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:17] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:17] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:17] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:17] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:17] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:17] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:17] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:17] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:17] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:17] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:17] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:17] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:17] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:17] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:17] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:17] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:17] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:17] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:17] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:17] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:17] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:17] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:17] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:17] [ENEMY] [Enemy1] State: COMBAT -> SEEKING_COVER
+[12:52:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:17] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:17] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:17] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:17] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:17] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:17] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:17] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:17] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:17] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:18] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:18] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:18] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:18] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:18] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:18] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:18] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:18] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:18] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:18] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:18] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:18] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:18] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:18] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:18] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:18] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:18] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:18] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:18] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:18] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:18] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:18] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:18] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:18] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:18] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:18] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:18] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:18] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:18] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:18] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:18] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:18] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:18] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:18] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:18] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
+[12:52:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:18] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:18] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:18] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:18] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:18] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:18] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:19] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:19] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:19] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:19] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:19] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:19] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:19] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:21] [ENEMY] [Enemy10] State: SUPPRESSED -> IN_COVER
+[12:52:21] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
+[12:52:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:21] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:22] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:22] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:22] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:22] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:22] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:22] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:22] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:22] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:22] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
+[12:52:22] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
+[12:52:22] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[12:52:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:22] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:22] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:22] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:22] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:22] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:22] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:22] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:22] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:22] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:22] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:22] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:22] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:22] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:22] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:22] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:22] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:22] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:22] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:22] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:22] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:22] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:22] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:22] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:22] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:23] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:23] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:23] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:23] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:23] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:23] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:23] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:23] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:23] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:23] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:23] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:23] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:23] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:23] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:23] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:23] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:23] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:23] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:23] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:23] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:23] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:23] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:23] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:23] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:23] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:23] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:23] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:23] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:23] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:23] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:23] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:23] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:23] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:23] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:23] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:52:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:52:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:23] [ENEMY] [Enemy1] Hit taken, health: 2/3
+[12:52:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:23] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:23] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:23] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:23] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:23] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:52:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:52:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:24] [ENEMY] [Enemy1] Hit taken, health: 1/3
+[12:52:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:24] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:24] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:24] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:24] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:24] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:24] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:24] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:24] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:24] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:24] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:24] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:24] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:24] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:24] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:24] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:52:24] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:52:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:24] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:24] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.8917, 530.951), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:52:24] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[12:52:24] [ENEMY] [Enemy1] Hit taken, health: 0/3
+[12:52:24] [ENEMY] [Enemy1] Enemy died (ricochet: false, penetration: false)
+[12:52:24] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:52:24] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 8)
+[12:52:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:24] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:24] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:24] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:52:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
+[12:52:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:24] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:24] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(505.7023, 578.47107)
+[12:52:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:24] [INFO] [Bullet] Using shooter_position, distance=768,35126
+[12:52:24] [INFO] [Bullet] Distance to wall: 768,35126 (52,318455% of viewport)
+[12:52:24] [INFO] [Bullet] Distance-based penetration chance: 85,62847%
+[12:52:24] [INFO] [Bullet] Starting wall penetration at (505.7023, 578.47107)
+[12:52:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.1702, 598.7585), shooter_id=751870937942, bullet_pos=(570.9589, 1015.229)
+[12:52:24] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
+[12:52:24] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
+[12:52:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:24] [INFO] [Bullet] Starting wall penetration at (570.9589, 1015.229)
+[12:52:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:52:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
+[12:52:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8913879394531
+[12:52:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38,84456
+[12:52:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:24] [INFO] [Bullet] Exiting penetration at (572.3912, 1061.874) after traveling 41.6666679382324 pixels through wall
+[12:52:24] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:24] [INFO] [Bullet] Exiting penetration at (471.68234, 610.41504) after traveling 41,666668 pixels through wall
+[12:52:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:52:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(508.20078, 581.0973)
+[12:52:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:24] [INFO] [Bullet] Using shooter_position, distance=771,9729
+[12:52:24] [INFO] [Bullet] Distance to wall: 771,9729 (52,565056% of viewport)
+[12:52:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:52:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
+[12:52:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(508.1887, 581.0848)
+[12:52:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:24] [INFO] [Bullet] Using shooter_position, distance=771,95544
+[12:52:24] [INFO] [Bullet] Distance to wall: 771,95544 (52,56387% of viewport)
+[12:52:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(716.1153, 829.2395)
+[12:52:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:24] [INFO] [Bullet] Using shooter_position, distance=1095,6547
+[12:52:24] [INFO] [Bullet] Distance to wall: 1095,6547 (74,60514% of viewport)
+[12:52:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(933.04156, 963.60596)
+[12:52:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:24] [INFO] [Bullet] Using shooter_position, distance=1341,3064
+[12:52:24] [INFO] [Bullet] Distance to wall: 1341,3064 (91,33202% of viewport)
+[12:52:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(909.1394, 989.3157)
+[12:52:24] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:24] [INFO] [Bullet] Using shooter_position, distance=1343,607
+[12:52:24] [INFO] [Bullet] Distance to wall: 1343,607 (91,48868% of viewport)
+[12:52:24] [INFO] [Bullet] Distance-based penetration chance: 39,929886%
+[12:52:24] [INFO] [Bullet] Penetration failed (distance roll)
+[12:52:25] [ENEMY] [Enemy4] Hit taken, health: 2/3
+[12:52:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:52:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
+[12:52:25] [ENEMY] [Enemy4] Hit taken, health: 1/3
+[12:52:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[12:52:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
+[12:52:25] [ENEMY] [Enemy4] Hit taken, health: 0/3
+[12:52:25] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[12:52:25] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[12:52:25] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 7)
+[12:52:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:52:25] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=4
+[12:52:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:52:25] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=4
+[12:52:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(919.50934, 678.1395)
+[12:52:25] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:25] [INFO] [Bullet] Using shooter_position, distance=1142,5282
+[12:52:25] [INFO] [Bullet] Distance to wall: 1142,5282 (77,796844% of viewport)
+[12:52:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:52:25] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=4
+[12:52:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(919.50934, 678.1395)
+[12:52:26] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:26] [INFO] [Bullet] Using shooter_position, distance=1142,5282
+[12:52:26] [INFO] [Bullet] Distance to wall: 1142,5282 (77,796844% of viewport)
+[12:52:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(709.2393, 1012.02936)
+[12:52:26] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:26] [INFO] [Bullet] Using shooter_position, distance=1235,809
+[12:52:26] [INFO] [Bullet] Distance to wall: 1235,809 (84,148506% of viewport)
+[12:52:26] [INFO] [Bullet] Distance-based penetration chance: 48,49341%
+[12:52:26] [INFO] [Bullet] Starting wall penetration at (709.2393, 1012.02936)
+[12:52:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26,270018
+[12:52:26] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:26] [INFO] [Bullet] Exiting penetration at (687.7016, 1046.2292) after traveling 35,416668 pixels through wall
+[12:52:26] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[12:52:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:52:26] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=4
+[12:52:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(742.4636, 858.7541)
+[12:52:26] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:26] [INFO] [Bullet] Using shooter_position, distance=1135,214
+[12:52:26] [INFO] [Bullet] Distance to wall: 1135,214 (77,298805% of viewport)
+[12:52:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(919.50934, 678.1395)
+[12:52:26] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:26] [INFO] [Bullet] Using shooter_position, distance=1142,5282
+[12:52:26] [INFO] [Bullet] Distance to wall: 1142,5282 (77,796844% of viewport)
+[12:52:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(862.6753, 1000.1959)
+[12:52:26] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:26] [INFO] [Bullet] Using shooter_position, distance=1320,8333
+[12:52:26] [INFO] [Bullet] Distance to wall: 1320,8333 (89,937965% of viewport)
+[12:52:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(919.50934, 678.1395)
+[12:52:26] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:26] [INFO] [Bullet] Using shooter_position, distance=1142,5282
+[12:52:26] [INFO] [Bullet] Distance to wall: 1142,5282 (77,796844% of viewport)
+[12:52:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(909.2498, 932.9915)
+[12:52:26] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:26] [INFO] [Bullet] Using shooter_position, distance=1302,7695
+[12:52:26] [INFO] [Bullet] Distance to wall: 1302,7695 (88,70798% of viewport)
+[12:52:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(702.8963, 1007.95)
+[12:52:26] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:26] [INFO] [Bullet] Using shooter_position, distance=1228,8313
+[12:52:26] [INFO] [Bullet] Distance to wall: 1228,8313 (83,673386% of viewport)
+[12:52:26] [INFO] [Bullet] Distance-based penetration chance: 49,047714%
+[12:52:26] [INFO] [Bullet] Penetration failed (distance roll)
+[12:52:26] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
+[12:52:26] [ENEMY] [Enemy1] Player reloading state changed: false -> true
+[12:52:26] [ENEMY] [Enemy2] Player reloading state changed: false -> true
+[12:52:26] [ENEMY] [Enemy4] Player reloading state changed: false -> true
+[12:52:26] [ENEMY] [Enemy5] Player reloading state changed: false -> true
+[12:52:26] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[12:52:26] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[12:52:26] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[12:52:26] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[12:52:26] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[12:52:26] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(706.1769, 384.2296), source=PLAYER (Player), range=900, listeners=7
+[12:52:26] [ENEMY] [Enemy2] Heard player RELOAD at (706.1769, 384.2296), intensity=0.04, distance=244
+[12:52:26] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=1
+[12:52:26] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[12:52:26] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=994), can_see=false
+[12:52:26] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1246), can_see=false
+[12:52:26] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1041), can_see=false
+[12:52:26] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1600), can_see=false
+[12:52:26] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1817), can_see=false
+[12:52:26] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=634), can_see=false
+[12:52:26] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=true (dist=244), can_see=false
+[12:52:26] [ENEMY] [Enemy2] Pursuing vulnerability sound at (706.1769, 384.2296), distance=244
+[12:52:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(687.1712, 997.06726)
+[12:52:26] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:26] [INFO] [Bullet] Using shooter_position, distance=1210,9283
+[12:52:26] [INFO] [Bullet] Distance to wall: 1210,9283 (82,45434% of viewport)
+[12:52:26] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
+[12:52:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(510.62836, 825.99207)
+[12:52:26] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:26] [INFO] [Bullet] Using shooter_position, distance=971,08405
+[12:52:26] [INFO] [Bullet] Distance to wall: 971,08405 (66,1229% of viewport)
+[12:52:26] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
+[12:52:26] [ENEMY] [Enemy2] Player reloading state changed: true -> false
+[12:52:26] [ENEMY] [Enemy4] Player reloading state changed: true -> false
+[12:52:26] [ENEMY] [Enemy5] Player reloading state changed: true -> false
+[12:52:26] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[12:52:26] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[12:52:26] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[12:52:26] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[12:52:26] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[12:52:26] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
+[12:52:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(520.2033, 457.96826)
+[12:52:26] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:26] [INFO] [Bullet] Using shooter_position, distance=693,07025
+[12:52:26] [INFO] [Bullet] Distance to wall: 693,07025 (47,19243% of viewport)
+[12:52:26] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
+[12:52:26] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[12:52:27] [ENEMY] [Enemy10] State: SUPPRESSED -> IN_COVER
+[12:52:27] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
+[12:52:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(824.46924, 55.963593)
+[12:52:27] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:27] [INFO] [Bullet] Using shooter_position, distance=826,3664
+[12:52:27] [INFO] [Bullet] Distance to wall: 826,3664 (56,26881% of viewport)
+[12:52:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(977.0536, 242.14484)
+[12:52:27] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:27] [INFO] [Bullet] Using shooter_position, distance=1006,61206
+[12:52:27] [INFO] [Bullet] Distance to wall: 1006,61206 (68,54207% of viewport)
+[12:52:27] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:52:28] [INFO] [ScoreManager] Combo ended at 2. Max combo: 2
+[12:52:28] [ENEMY] [Enemy2] FLANKING started: target=(510.9951, 427.8649), side=left, pos=(507.724, 168.4284)
+[12:52:28] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
+[12:52:29] [ENEMY] [Enemy2] State: FLANKING -> COMBAT
+[12:52:29] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:52:31] [ENEMY] [Enemy2] FLANKING started: target=(512.5136, 434.1748), side=left, pos=(501.7617, 175.9339)
+[12:52:31] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
+[12:52:31] [ENEMY] [Enemy2] State: FLANKING -> COMBAT
+[12:52:31] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:52:32] [ENEMY] [Enemy10] FLANKING started: target=(797.2211, 562.3053), side=left, pos=(465.9726, 755.2325)
+[12:52:32] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:52:32] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[12:52:33] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[12:52:33] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:52:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:52:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=3
+[12:52:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:52:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=3
+[12:52:33] [ENEMY] [Enemy10] Hit taken, health: 2/3
+[12:52:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:52:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=3
+[12:52:33] [ENEMY] [Enemy10] Hit taken, health: 1/3
+[12:52:33] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
+[12:52:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[12:52:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=3
+[12:52:33] [ENEMY] [Enemy10] Hit taken, health: 0/3
+[12:52:33] [ENEMY] [Enemy10] Enemy died (ricochet: false, penetration: false)
+[12:52:33] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:52:33] [INFO] [SoundPropagation] Unregistered listener: Enemy10 (remaining: 6)
+[12:52:33] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:52:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[12:52:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=3
+[12:52:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[12:52:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=3
+[12:52:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(55.24893, 1486.5488)
+[12:52:34] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:34] [INFO] [Bullet] Using shooter_position, distance=1487,5752
+[12:52:34] [INFO] [Bullet] Distance to wall: 1487,5752 (101,291725% of viewport)
+[12:52:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(107.41542, 1584.8099)
+[12:52:34] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:34] [INFO] [Bullet] Using shooter_position, distance=1588,4459
+[12:52:34] [INFO] [Bullet] Distance to wall: 1588,4459 (108,16021% of viewport)
+[12:52:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(55.25461, 1486.5526)
+[12:52:34] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:34] [INFO] [Bullet] Using shooter_position, distance=1487,5791
+[12:52:34] [INFO] [Bullet] Distance to wall: 1487,5791 (101,292% of viewport)
+[12:52:34] [INFO] [Bullet] Distance-based penetration chance: 29,7416%
+[12:52:34] [INFO] [Bullet] Penetration failed (distance roll)
+[12:52:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(55.261993, 1486.5579)
+[12:52:34] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:34] [INFO] [Bullet] Using shooter_position, distance=1487,5847
+[12:52:34] [INFO] [Bullet] Distance to wall: 1487,5847 (101,29238% of viewport)
+[12:52:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(105.82958, 1585.651)
+[12:52:34] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:34] [INFO] [Bullet] Using shooter_position, distance=1589,1787
+[12:52:34] [INFO] [Bullet] Distance to wall: 1589,1787 (108,2101% of viewport)
+[12:52:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(211.30219, 1397.4633)
+[12:52:34] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:34] [INFO] [Bullet] Using shooter_position, distance=1413,3479
+[12:52:34] [INFO] [Bullet] Distance to wall: 1413,3479 (96,237465% of viewport)
+[12:52:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(289.07263, 1592.218)
+[12:52:34] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:34] [INFO] [Bullet] Using shooter_position, distance=1618,2463
+[12:52:34] [INFO] [Bullet] Distance to wall: 1618,2463 (110,18937% of viewport)
+[12:52:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[12:52:34] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=3
+[12:52:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(396.8448, 1397.558)
+[12:52:34] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:34] [INFO] [Bullet] Using shooter_position, distance=1452,8091
+[12:52:34] [INFO] [Bullet] Distance to wall: 1452,8091 (98,924446% of viewport)
+[12:52:34] [ENEMY] [Enemy2] Hit taken, health: 3/4
+[12:52:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[12:52:34] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=3
+[12:52:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(514.49365, 1591.5186)
+[12:52:35] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:35] [INFO] [Bullet] Using shooter_position, distance=1672,6133
+[12:52:35] [INFO] [Bullet] Distance to wall: 1672,6133 (113,89131% of viewport)
+[12:52:35] [INFO] [Bullet] Distance-based penetration chance: 27,221739%
+[12:52:35] [INFO] [Bullet] Penetration failed (distance roll)
+[12:52:35] [ENEMY] [Enemy2] Hit taken, health: 2/4
+[12:52:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[12:52:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=3
+[12:52:35] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[12:52:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[12:52:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=3
+[12:52:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(493.3608, 171.3557), source=ENEMY (Enemy2), range=1469, listeners=6
+[12:52:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[12:52:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(484.611, 165.255), source=ENEMY (Enemy2), range=1469, listeners=6
+[12:52:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[12:52:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[12:52:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=3
+[12:52:35] [ENEMY] [Enemy2] Hit taken, health: 1/4
+[12:52:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(474.1975, 162.9474), source=ENEMY (Enemy2), range=1469, listeners=6
+[12:52:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[12:52:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(438.5514, 215.3461), shooter_id=752156149843, bullet_pos=(233.4839, 422.751)
+[12:52:35] [INFO] [Bullet] Using shooter_position, distance=291.666687011719
+[12:52:35] [INFO] [Bullet] Distance to wall: 291.666687011719 (19.8601210463732% of viewport)
+[12:52:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(477.9211, 237.6295), shooter_id=752156149843, bullet_pos=(420.2631, 692.3216)
+[12:52:35] [INFO] [Bullet] Using shooter_position, distance=458.333282470703
+[12:52:35] [INFO] [Bullet] Distance to wall: 458.333282470703 (31.2087560040204% of viewport)
+[12:52:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:35] [INFO] [Bullet] Starting wall penetration at (420.2631, 692.3216)
+[12:52:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.8306427001953
+[12:52:35] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:35] [INFO] [Bullet] Exiting penetration at (414.3925, 738.6175) after traveling 41.6666717529297 pixels through wall
+[12:52:35] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.1769, 390.2296), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[12:52:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=3
+[12:52:35] [ENEMY] [Enemy2] Hit taken, health: 0/4
+[12:52:35] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[12:52:35] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[12:52:35] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 5)
+[12:52:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(438.5514, 215.3461), shooter_id=752156149843, bullet_pos=(60.35344, 238.3799)
+[12:52:35] [INFO] [Bullet] Using shooter_position, distance=378.898712158203
+[12:52:35] [INFO] [Bullet] Distance to wall: 378.898712158203 (25.7999100441473% of viewport)
+[12:52:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(408.28625, 64.14563)
+[12:52:35] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:35] [INFO] [Bullet] Using shooter_position, distance=413,2945
+[12:52:35] [INFO] [Bullet] Distance to wall: 413,2945 (28,141985% of viewport)
+[12:52:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(438.5514, 215.3461), shooter_id=752156149843, bullet_pos=(189.3024, 65.4313)
+[12:52:35] [INFO] [Bullet] Using shooter_position, distance=290.859893798828
+[12:52:35] [INFO] [Bullet] Distance to wall: 290.859893798828 (19.8051850129455% of viewport)
+[12:52:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(283.3543, 242.18578)
+[12:52:35] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:35] [INFO] [Bullet] Using shooter_position, distance=372,7514
+[12:52:35] [INFO] [Bullet] Distance to wall: 372,7514 (25,38133% of viewport)
+[12:52:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(438.5514, 215.3461), shooter_id=752156149843, bullet_pos=(278.3951, 226.5605)
+[12:52:35] [INFO] [Bullet] Using shooter_position, distance=160.548385620117
+[12:52:35] [INFO] [Bullet] Distance to wall: 160.548385620117 (10.9320347993229% of viewport)
+[12:52:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(171.33801, 57.818123)
+[12:52:35] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:35] [INFO] [Bullet] Using shooter_position, distance=180,83044
+[12:52:35] [INFO] [Bullet] Distance to wall: 180,83044 (12,313078% of viewport)
+[12:52:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:35] [INFO] [Bullet] Starting wall penetration at (171.33801, 57.818123)
+[12:52:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 4,8943243
+[12:52:35] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:35] [INFO] [Bullet] Exiting penetration at (153.11035, 27.817204) after traveling 30,10417 pixels through wall
+[12:52:35] [INFO] [Bullet] Damage multiplier after penetration: 0,225
+[12:52:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(438.5514, 215.3461), shooter_id=752156149843, bullet_pos=(400.035, 66.85681)
+[12:52:35] [INFO] [Bullet] Using shooter_position, distance=153.403289794922
+[12:52:35] [INFO] [Bullet] Distance to wall: 153.403289794922 (10.4455120859126% of viewport)
+[12:52:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:35] [INFO] [Bullet] Starting wall penetration at (400.035, 66.85681)
+[12:52:35] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:52:35] [INFO] [Bullet] Exiting penetration at (416.2436, 45.57629) after traveling 21.7502632141113 pixels through wall
+[12:52:35] [INFO] [Bullet] Damage multiplier after penetration: 0.05625
+[12:52:38] [INFO] [ScoreManager] Combo ended at 2. Max combo: 2
+[12:52:42] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:52:42] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:52:42] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:52:42] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:52:42] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:52:42] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:52:42] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:52:42] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:52:42] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[12:52:42] [INFO] [ScoreManager] Level started with 10 enemies
+[12:52:42] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 6)
+[12:52:42] [ENEMY] [Enemy1] Registered as sound listener
+[12:52:42] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:52:42] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 7)
+[12:52:42] [ENEMY] [Enemy2] Registered as sound listener
+[12:52:42] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:52:42] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 8)
+[12:52:42] [ENEMY] [Enemy3] Registered as sound listener
+[12:52:42] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:52:42] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 9)
+[12:52:42] [ENEMY] [Enemy4] Registered as sound listener
+[12:52:42] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:52:42] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 10)
+[12:52:42] [ENEMY] [Enemy5] Registered as sound listener
+[12:52:42] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:52:42] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 11)
+[12:52:42] [ENEMY] [Enemy6] Registered as sound listener
+[12:52:42] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:52:42] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 12)
+[12:52:42] [ENEMY] [Enemy7] Registered as sound listener
+[12:52:42] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:52:42] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 13)
+[12:52:42] [ENEMY] [Enemy8] Registered as sound listener
+[12:52:42] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:52:42] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 14)
+[12:52:42] [ENEMY] [Enemy9] Registered as sound listener
+[12:52:42] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:52:42] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 15)
+[12:52:42] [ENEMY] [Enemy10] Registered as sound listener
+[12:52:42] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:52:42] [INFO] [Player] Detecting weapon pose (frame 3)...
+[12:52:42] [INFO] [Player] Detected weapon: Rifle (default pose)
+[12:52:42] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[12:52:42] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:52:42] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:52:42] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:52:42] [INFO] [LastChance] Found player: Player
+[12:52:42] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:52:42] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:52:42] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:52:43] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:52:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=15
+[12:52:43] [INFO] [SoundPropagation] Cleaned up 5 invalid listeners
+[12:52:43] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:52:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1107.609, 1460.943), shooter_id=1722030230530, bullet_pos=(1070.721, 1386.219)
+[12:52:43] [INFO] [Bullet] Using shooter_position, distance=83.333366394043
+[12:52:43] [INFO] [Bullet] Distance to wall: 83.333366394043 (5.67432215431913% of viewport)
+[12:52:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:52:43] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:52:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1080.976, 1437.848), shooter_id=1722030230530, bullet_pos=(1065.567, 1399.135)
+[12:52:43] [INFO] [Bullet] Using shooter_position, distance=41.666675567627
+[12:52:43] [INFO] [Bullet] Distance to wall: 41.666675567627 (2.83716055766006% of viewport)
+[12:52:43] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:52:43] [INFO] [Bullet] Starting wall penetration at (1065.567, 1399.135)
+[12:52:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.7668037414551
+[12:52:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:43] [INFO] [Bullet] Exiting penetration at (1048.31, 1355.776) after traveling 41.6666679382324 pixels through wall
+[12:52:43] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1107.609, 1460.943), shooter_id=1722030230530, bullet_pos=(900.2705, 1618.776)
+[12:52:44] [INFO] [Bullet] Using shooter_position, distance=260.577728271484
+[12:52:44] [INFO] [Bullet] Distance to wall: 260.577728271484 (17.7432166781964% of viewport)
+[12:52:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:52:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:52:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1055.344, 1413.921), shooter_id=1722030230530, bullet_pos=(1043.045, 1374.111)
+[12:52:44] [INFO] [Bullet] Using shooter_position, distance=41.6667251586914
+[12:52:44] [INFO] [Bullet] Distance to wall: 41.6667251586914 (2.83716393440683% of viewport)
+[12:52:44] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:52:44] [INFO] [Bullet] Starting wall penetration at (1043.045, 1374.111)
+[12:52:44] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48.6442070007324
+[12:52:44] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:44] [INFO] [Bullet] Exiting penetration at (1029.271, 1329.523) after traveling 41.6666717529297 pixels through wall
+[12:52:44] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:44] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:52:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1107.609, 1460.943), shooter_id=1722030230530, bullet_pos=(1306.241, 2070.15)
+[12:52:44] [INFO] [Bullet] Using shooter_position, distance=640.771179199219
+[12:52:44] [INFO] [Bullet] Distance to wall: 640.771179199219 (43.6312878659758% of viewport)
+[12:52:44] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:52:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1107.609, 1460.943), shooter_id=1722030230530, bullet_pos=(1698.93, 1696.051)
+[12:52:44] [INFO] [Bullet] Using shooter_position, distance=636.345947265625
+[12:52:44] [INFO] [Bullet] Distance to wall: 636.345947265625 (43.3299656863334% of viewport)
+[12:52:44] [INFO] [Bullet] Distance-based penetration chance: 96.1150400326111%
+[12:52:44] [INFO] [Bullet] Starting wall penetration at (1698.93, 1696.051)
+[12:52:44] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29.1114501953125
+[12:52:44] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:44] [INFO] [Bullet] Exiting penetration at (1721.078, 1674.952) after traveling 25.5885429382324 pixels through wall
+[12:52:44] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
+[12:52:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5684, 752.2266), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:52:44] [ENEMY] [Enemy2] Heard gunshot at (689.5684, 752.2266), source_type=1, intensity=0.02, distance=353
+[12:52:44] [ENEMY] [Enemy4] Heard gunshot at (689.5684, 752.2266), source_type=1, intensity=0.07, distance=184
+[12:52:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:52:44] [INFO] [LastChance] Threat detected: Bullet
+[12:52:44] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:52:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:52:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5684, 752.2266), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:52:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:52:45] [INFO] [LastChance] Threat detected: Bullet
+[12:52:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:52:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:52:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(622.2756, 742.1128), shooter_id=1720033740889, bullet_pos=(501.6082, 709.4882)
+[12:52:45] [INFO] [Bullet] Using shooter_position, distance=124.999969482422
+[12:52:45] [INFO] [Bullet] Distance to wall: 124.999969482422 (8.51147777673392% of viewport)
+[12:52:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:45] [INFO] [Bullet] Starting wall penetration at (501.6082, 709.4882)
+[12:52:45] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:52:45] [INFO] [Bullet] Exiting penetration at (456.5591, 697.3083) after traveling 41.6666717529297 pixels through wall
+[12:52:45] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:45] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[12:52:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:52:45] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[12:52:45] [INFO] [LastChance] Threat detected: Bullet
+[12:52:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:52:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:52:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5684, 752.2266), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:52:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:52:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:52:45] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:52:45] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:52:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:52:45] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[12:52:45] [INFO] [LastChance] Threat detected: @Area2D@2638
+[12:52:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:52:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:52:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(434.7443, 608.5101), shooter_id=1719748527564, bullet_pos=(737.6307, 1006.329)
+[12:52:45] [INFO] [Bullet] Using shooter_position, distance=499.999847412109
+[12:52:45] [INFO] [Bullet] Distance to wall: 499.999847412109 (34.0459090289377% of viewport)
+[12:52:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:52:45] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[12:52:45] [INFO] [LastChance] Threat detected: @Area2D@2640
+[12:52:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:52:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:52:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(444.2599, 601.6881), shooter_id=1719748527564, bullet_pos=(688.6584, 828.3605)
+[12:52:45] [INFO] [Bullet] Using shooter_position, distance=333.333160400391
+[12:52:45] [INFO] [Bullet] Distance to wall: 333.333160400391 (22.6972678372964% of viewport)
+[12:52:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:45] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:52:45] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:52:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(444.2599, 601.6881), shooter_id=1719748527564, bullet_pos=(508.1036, 949.6296)
+[12:52:45] [INFO] [Bullet] Using shooter_position, distance=353.750305175781
+[12:52:45] [INFO] [Bullet] Distance to wall: 353.750305175781 (24.0875087688715% of viewport)
+[12:52:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(434.7443, 608.5101), shooter_id=1719748527564, bullet_pos=(908.3588, 731.2543)
+[12:52:45] [INFO] [Bullet] Using shooter_position, distance=489.261566162109
+[12:52:45] [INFO] [Bullet] Distance to wall: 489.261566162109 (33.3147197126671% of viewport)
+[12:52:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:45] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[12:52:45] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
+[12:52:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(444.2599, 601.6881), shooter_id=1719748527564, bullet_pos=(618.2275, 1009.647)
+[12:52:45] [INFO] [Bullet] Using shooter_position, distance=443.503112792969
+[12:52:45] [INFO] [Bullet] Distance to wall: 443.503112792969 (30.198942480386% of viewport)
+[12:52:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:45] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[12:52:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(690.6368, 760.1548), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:52:45] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[12:52:45] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:52:45] [ENEMY] [Enemy10] FLANKING started: target=(856.0554, 610.6229), side=left, pos=(1061.496, 1460.101)
+[12:52:45] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:52:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(444.2599, 601.6881), shooter_id=1719748527564, bullet_pos=(931.2341, 883.0164)
+[12:52:45] [INFO] [Bullet] Using shooter_position, distance=562.396179199219
+[12:52:45] [INFO] [Bullet] Distance to wall: 562.396179199219 (38.2945899970589% of viewport)
+[12:52:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(434.7443, 608.5101), shooter_id=1719748527564, bullet_pos=(517.3171, 266.8878)
+[12:52:45] [INFO] [Bullet] Using shooter_position, distance=351.459991455078
+[12:52:45] [INFO] [Bullet] Distance to wall: 351.459991455078 (23.9315570961132% of viewport)
+[12:52:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:45] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[12:52:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.6257, 768.7029), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:52:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:52:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(756.6281, 814.8587), shooter_id=1720033740889, bullet_pos=(756.6281, 814.8587)
+[12:52:45] [INFO] [Bullet] Using shooter_position, distance=0
+[12:52:45] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:52:45] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:52:45] [INFO] [Bullet] Starting wall penetration at (756.6281, 814.8587)
+[12:52:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42.5549621582031
+[12:52:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(738.9771, 712.261), shooter_id=1720033740889, bullet_pos=(1362.507, 40.33197)
+[12:52:45] [INFO] [Bullet] Using shooter_position, distance=916.667114257813
+[12:52:45] [INFO] [Bullet] Distance to wall: 916.667114257813 (62.417549412005% of viewport)
+[12:52:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(434.7443, 608.5101), shooter_id=1719748527564, bullet_pos=(679.6483, 62.6582)
+[12:52:45] [INFO] [Bullet] Using shooter_position, distance=598.2744140625
+[12:52:45] [INFO] [Bullet] Distance to wall: 598.2744140625 (40.7376049831561% of viewport)
+[12:52:45] [INFO] [Bullet] Distance-based penetration chance: 99.1394608529845%
+[12:52:45] [INFO] [Bullet] Starting wall penetration at (679.6483, 62.6582)
+[12:52:45] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:45] [INFO] [Bullet] Exiting penetration at (794.8989, 841.5629) after traveling 41.6666641235352 pixels through wall
+[12:52:45] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:45] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:52:45] [INFO] [Bullet] Exiting penetration at (698.6814, 38.71249) after traveling 25.5885429382324 pixels through wall
+[12:52:45] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
+[12:52:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(694.4796, 785.2475), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:52:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:52:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(686.0118, 785.9338), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:52:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:52:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(637.1786, 738.5427), shooter_id=1720033740889, bullet_pos=(508.2127, 524.3748)
+[12:52:46] [INFO] [Bullet] Using shooter_position, distance=250.00016784668
+[12:52:46] [INFO] [Bullet] Distance to wall: 250.00016784668 (17.0229711384529% of viewport)
+[12:52:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:46] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:52:46] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:52:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(630.5026, 762.0624), shooter_id=1720033740889, bullet_pos=(43.75944, 445.5554)
+[12:52:46] [INFO] [Bullet] Using shooter_position, distance=666.66650390625
+[12:52:46] [INFO] [Bullet] Distance to wall: 666.66650390625 (45.3945481425809% of viewport)
+[12:52:46] [INFO] [Bullet] Distance-based penetration chance: 93.7063605003223%
+[12:52:46] [INFO] [Bullet] Starting wall penetration at (43.75944, 445.5554)
+[12:52:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33.3054275512695
+[12:52:46] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:46] [INFO] [Bullet] Exiting penetration at (2.687408, 423.3999) after traveling 41.6666679382324 pixels through wall
+[12:52:46] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:46] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[12:52:46] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:52:46] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:52:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(637.1786, 738.5427), shooter_id=1720033740889, bullet_pos=(903.9161, 63.97391)
+[12:52:46] [INFO] [Bullet] Using shooter_position, distance=725.390808105469
+[12:52:46] [INFO] [Bullet] Distance to wall: 725.390808105469 (49.3931939999793% of viewport)
+[12:52:46] [INFO] [Bullet] Distance-based penetration chance: 89.0412736666908%
+[12:52:46] [INFO] [Bullet] Penetration failed (distance roll)
+[12:52:47] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[12:52:47] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[12:52:48] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
+[12:52:48] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
+[12:52:48] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
+[12:52:48] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
+[12:52:48] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[12:52:48] [ENEMY] [Enemy1] FLANKING started: target=(646.147, 212.276), side=right, pos=(456.541, 372.7277)
+[12:52:48] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
+[12:52:49] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
+[12:52:49] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
+[12:52:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(538.0409, 730.6431), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:52:49] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[12:52:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(564.9907, 793.1276), shooter_id=1722030230530, bullet_pos=(689.6606, 1009.824)
+[12:52:49] [INFO] [Bullet] Using shooter_position, distance=249.999954223633
+[12:52:49] [INFO] [Bullet] Distance to wall: 249.999954223633 (17.0229565924668% of viewport)
+[12:52:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(564.3085, 705.072), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:52:49] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[12:52:49] [ENEMY] [Enemy4] Hit taken, health: 3/4
+[12:52:49] [ENEMY] [Enemy4] Hit taken, health: 2/4
+[12:52:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(582.0906, 672.2458), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:52:49] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=1, below_threshold=3
+[12:52:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(612.4844, 733.1295), shooter_id=1722030230530, bullet_pos=(680.7668, 837.8314)
+[12:52:49] [INFO] [Bullet] Using shooter_position, distance=124.999900817871
+[12:52:49] [INFO] [Bullet] Distance to wall: 124.999900817871 (8.51147310123839% of viewport)
+[12:52:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:49] [INFO] [Bullet] Starting wall penetration at (680.7668, 837.8314)
+[12:52:49] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[12:52:49] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:52:49] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:52:49] [INFO] [Bullet] Exiting penetration at (706.2589, 876.92) after traveling 41.6666679382324 pixels through wall
+[12:52:49] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:49] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:52:49] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:52:49] [ENEMY] [Enemy1] State: FLANKING -> COMBAT
+[12:52:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(502.4398, 175.9339), source=ENEMY (Enemy1), range=1469, listeners=10
+[12:52:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:52:49] [INFO] [LastChance] Threat detected: Bullet
+[12:52:49] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:52:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:52:50] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:52:50] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:52:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(500.8626, 175.9339), source=ENEMY (Enemy1), range=1469, listeners=10
+[12:52:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:52:50] [ENEMY] [Enemy3] FLANKING started: target=(536.8822, 357.608), side=right, pos=(439.4148, 744.1974)
+[12:52:50] [ENEMY] [Enemy3] State: PURSUING -> FLANKING
+[12:52:50] [INFO] [LastChance] Threat detected: @Area2D@2660
+[12:52:50] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:52:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:52:50] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:52:50] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:52:50] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:52:50] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:52:50] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:52:50] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:52:50] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:52:50] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:52:50] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:52:50] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:52:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(499.2739, 175.9431), source=ENEMY (Enemy1), range=1469, listeners=10
+[12:52:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:52:50] [ENEMY] [Enemy3] State: FLANKING -> COMBAT
+[12:52:50] [INFO] [LastChance] Threat detected: Bullet
+[12:52:50] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:52:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:52:50] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:52:51] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:52:51] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:52:51] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:52:51] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:52:51] [INFO] [LastChance] Player died
+[12:52:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(568.8584, 690.2851), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:52:51] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[12:52:51] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[12:52:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(598.1606, 751.7015), shooter_id=1720033740889, bullet_pos=(686.6978, 892.9069)
+[12:52:51] [INFO] [Bullet] Using shooter_position, distance=166.666625976563
+[12:52:51] [INFO] [Bullet] Distance to wall: 166.666625976563 (11.3486370356452% of viewport)
+[12:52:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(598.1606, 751.7015), shooter_id=1720033740889, bullet_pos=(623.3717, 1025.198)
+[12:52:51] [INFO] [Bullet] Using shooter_position, distance=274.655853271484
+[12:52:51] [INFO] [Bullet] Distance to wall: 274.655853271484 (18.7018220968356% of viewport)
+[12:52:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:51] [INFO] [Bullet] Starting wall penetration at (623.3717, 1025.198)
+[12:52:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41.7447052001953
+[12:52:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:51] [INFO] [Bullet] Exiting penetration at (605.9211, 1061.653) after traveling 35.4166679382324 pixels through wall
+[12:52:51] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:52:51] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:52:51] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:52:51] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:52:51] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:52:51] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:52:51] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:52:51] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:52:51] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:52:51] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[12:52:51] [INFO] [ScoreManager] Level started with 10 enemies
+[12:52:51] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:52:51] [ENEMY] [Enemy1] Registered as sound listener
+[12:52:51] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:52:51] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:52:51] [ENEMY] [Enemy2] Registered as sound listener
+[12:52:51] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:52:51] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:52:51] [ENEMY] [Enemy3] Registered as sound listener
+[12:52:51] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:52:51] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:52:51] [ENEMY] [Enemy4] Registered as sound listener
+[12:52:51] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:52:51] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:52:51] [ENEMY] [Enemy5] Registered as sound listener
+[12:52:51] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:52:51] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:52:51] [ENEMY] [Enemy6] Registered as sound listener
+[12:52:51] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:52:51] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:52:51] [ENEMY] [Enemy7] Registered as sound listener
+[12:52:51] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:52:51] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:52:51] [ENEMY] [Enemy8] Registered as sound listener
+[12:52:51] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:52:51] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:52:51] [ENEMY] [Enemy9] Registered as sound listener
+[12:52:51] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:52:51] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:52:51] [ENEMY] [Enemy10] Registered as sound listener
+[12:52:51] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:52:51] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:52:51] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:52:51] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:52:51] [INFO] [LastChance] Found player: Player
+[12:52:51] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:52:51] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:52:51] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:52:51] [INFO] [Player] Detecting weapon pose (frame 3)...
+[12:52:51] [INFO] [Player] Detected weapon: Rifle (default pose)
+[12:52:51] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[12:52:52] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:52:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.458, 1518.227), source=ENEMY (Enemy10), range=1469, listeners=20
+[12:52:52] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[12:52:52] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:52:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1107.336, 1461.196), shooter_id=1846936602244, bullet_pos=(1070.18, 1386.605)
+[12:52:53] [INFO] [Bullet] Using shooter_position, distance=83.3332595825195
+[12:52:53] [INFO] [Bullet] Distance to wall: 83.3332595825195 (5.67431488132609% of viewport)
+[12:52:53] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.121, 1497.941), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:52:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:52:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1080.713, 1438.105), shooter_id=1846936602244, bullet_pos=(1065.2, 1399.433)
+[12:52:53] [INFO] [Bullet] Using shooter_position, distance=41.6666793823242
+[12:52:53] [INFO] [Bullet] Distance to wall: 41.6666793823242 (2.83716081740981% of viewport)
+[12:52:53] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:52:53] [INFO] [Bullet] Starting wall penetration at (1065.2, 1399.433)
+[12:52:53] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.4179916381836
+[12:52:53] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:53] [INFO] [Bullet] Exiting penetration at (1047.825, 1356.122) after traveling 41.6666717529297 pixels through wall
+[12:52:53] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1107.336, 1461.196), shooter_id=1846936602244, bullet_pos=(907.8509, 1666.719)
+[12:52:53] [INFO] [Bullet] Using shooter_position, distance=286.415130615234
+[12:52:53] [INFO] [Bullet] Distance to wall: 286.415130615234 (19.5025329145758% of viewport)
+[12:52:53] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.623, 1476.411), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:52:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:52:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1055.105, 1414.175), shooter_id=1846936602244, bullet_pos=(1042.734, 1374.387)
+[12:52:53] [INFO] [Bullet] Using shooter_position, distance=41.6667366027832
+[12:52:53] [INFO] [Bullet] Distance to wall: 41.6667366027832 (2.83716471365608% of viewport)
+[12:52:53] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:52:53] [INFO] [Bullet] Starting wall penetration at (1042.734, 1374.387)
+[12:52:53] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48.3554153442383
+[12:52:53] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:53] [INFO] [Bullet] Exiting penetration at (1028.879, 1329.825) after traveling 41.6666717529297 pixels through wall
+[12:52:53] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:53] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:52:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1107.336, 1461.196), shooter_id=1846936602244, bullet_pos=(1056.34, 2066.49)
+[12:52:53] [INFO] [Bullet] Using shooter_position, distance=607.438720703125
+[12:52:53] [INFO] [Bullet] Distance to wall: 607.438720703125 (41.3616194739903% of viewport)
+[12:52:53] [INFO] [Bullet] Distance-based penetration chance: 98.4114439470114%
+[12:52:53] [INFO] [Bullet] Starting wall penetration at (1056.34, 2066.49)
+[12:52:53] [INFO] [Bullet] Raycast backward hit penetrating body at distance 3.62476444244385
+[12:52:53] [INFO] [Bullet] Max penetration distance exceeded: 60.2083358764648 >= 48
+[12:52:53] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:53] [INFO] [Bullet] Exiting penetration at (1079.045, 2127.618) after traveling 60.2083358764648 pixels through wall
+[12:52:53] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[12:52:53] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:52:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(430.303, 785.3448), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:52:53] [ENEMY] [Enemy1] Heard gunshot at (430.303, 785.3448), source_type=0, intensity=0.01, distance=454
+[12:52:53] [ENEMY] [Enemy2] Heard gunshot at (430.303, 785.3448), source_type=0, intensity=0.04, distance=237
+[12:52:53] [ENEMY] [Enemy4] Heard gunshot at (430.303, 785.3448), source_type=0, intensity=0.02, distance=387
+[12:52:53] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:52:54] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[12:52:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3408, 753.2813), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:52:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:52:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(404.485, 772.8867), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:52:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:52:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(620.9435, 778.0074), shooter_id=1844940114081, bullet_pos=(500.0487, 809.7793)
+[12:52:54] [INFO] [Bullet] Using shooter_position, distance=125.000030517578
+[12:52:54] [INFO] [Bullet] Distance to wall: 125.000030517578 (8.51148193272994% of viewport)
+[12:52:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3408, 753.2813), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:52:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:52:54] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[12:52:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(383.9449, 775.2185), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:52:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:52:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(620.9435, 778.0074), shooter_id=1844940114081, bullet_pos=(707.7152, 874.439)
+[12:52:54] [INFO] [Bullet] Using shooter_position, distance=129.724258422852
+[12:52:54] [INFO] [Bullet] Distance to wall: 129.724258422852 (8.83316329788912% of viewport)
+[12:52:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:54] [INFO] [Bullet] Starting wall penetration at (707.7152, 874.439)
+[12:52:54] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:54] [INFO] [Bullet] Exiting penetration at (746.3046, 886.4543) after traveling 0 pixels through wall
+[12:52:54] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:52:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(620.6938, 777.3576), shooter_id=1844940114081, bullet_pos=(499.4804, 807.8912)
+[12:52:54] [INFO] [Bullet] Using shooter_position, distance=124.999984741211
+[12:52:54] [INFO] [Bullet] Distance to wall: 124.999984741211 (8.51147881573292% of viewport)
+[12:52:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:54] [INFO] [Bullet] Starting wall penetration at (499.4804, 807.8912)
+[12:52:54] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:52:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47.2024879455566
+[12:52:54] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:54] [INFO] [Bullet] Exiting penetration at (454.2274, 819.2904) after traveling 41.6666679382324 pixels through wall
+[12:52:54] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:54] [ENEMY] [Enemy3] Hit taken, health: 1/4
+[12:52:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(677.5341, 757.4845), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:52:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:52:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(375.4532, 787.2836), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:52:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:52:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.4584, 763.0887), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:52:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:52:54] [ENEMY] [Enemy3] Hit taken, health: 0/4
+[12:52:54] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:52:54] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:52:54] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:52:54] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[12:52:54] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:52:54] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:52:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(631.5198, 820.239), shooter_id=1844940114081, bullet_pos=(518.4098, 995.1929)
+[12:52:54] [INFO] [Bullet] Using shooter_position, distance=208.333282470703
+[12:52:54] [INFO] [Bullet] Distance to wall: 208.333282470703 (14.1857962945565% of viewport)
+[12:52:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(631.5198, 820.239), shooter_id=1844940114081, bullet_pos=(521.7693, 998.896)
+[12:52:54] [INFO] [Bullet] Using shooter_position, distance=209.674774169922
+[12:52:54] [INFO] [Bullet] Distance to wall: 209.674774169922 (14.277140931142% of viewport)
+[12:52:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:54] [INFO] [Bullet] Starting wall penetration at (521.7693, 998.896)
+[12:52:54] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:52:54] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:52:54] [INFO] [Bullet] Exiting penetration at (548.9258, 1028.83) after traveling 35.4166679382324 pixels through wall
+[12:52:54] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:52:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(635.5984, 811.0756), shooter_id=1844940114081, bullet_pos=(304.2768, 1389.583)
+[12:52:54] [INFO] [Bullet] Using shooter_position, distance=666.6669921875
+[12:52:54] [INFO] [Bullet] Distance to wall: 666.6669921875 (45.3945813905491% of viewport)
+[12:52:54] [INFO] [Bullet] Distance-based penetration chance: 93.7063217110261%
+[12:52:54] [INFO] [Bullet] Starting wall penetration at (304.2768, 1389.583)
+[12:52:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.8334999084473
+[12:52:54] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:54] [INFO] [Bullet] Exiting penetration at (281.0843, 1430.078) after traveling 41.6666679382324 pixels through wall
+[12:52:54] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:54] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:52:55] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:52:55] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[12:52:55] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:52:55] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:52:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(622.6545, 943.796), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:52:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:52:55] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[12:52:55] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:52:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.5571, 964.5524), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:52:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:52:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(935.5761, 895.23883)
+[12:52:55] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:55] [INFO] [Bullet] Using shooter_position, distance=1294,8959
+[12:52:55] [INFO] [Bullet] Distance to wall: 1294,8959 (88,171844% of viewport)
+[12:52:55] [INFO] [Bullet] Distance-based penetration chance: 43,799515%
+[12:52:55] [INFO] [Bullet] Penetration failed (distance roll)
+[12:52:56] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:52:56] [ENEMY] [Enemy4] Hit taken, health: 1/2
+[12:52:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(688.6625, 970.3332), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:52:56] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:52:56] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:52:56] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:52:56] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:52:56] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:52:56] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:52:56] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:52:56] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:52:56] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:52:56] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:52:56] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:52:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(811.4257, 816.4146), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:52:56] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[12:52:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(730.0909, 964.1248), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:52:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:52:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:52:57] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:52:57] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:52:57] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:52:57] [INFO] [LastChance] Player died
+[12:52:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(759.8711, 941.7457), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:52:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
+[12:52:57] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:52:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(807.232, 748.4954), shooter_id=1845225326915, bullet_pos=(844.9048, 41.16467)
+[12:52:57] [INFO] [Bullet] Using shooter_position, distance=708.333251953125
+[12:52:57] [INFO] [Bullet] Distance to wall: 708.333251953125 (48.2317136354862% of viewport)
+[12:52:57] [INFO] [Bullet] Distance-based penetration chance: 90.3963340919327%
+[12:52:57] [INFO] [Bullet] Penetration failed (distance roll)
+[12:52:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(787.0948, 914.522), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:52:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
+[12:52:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(814.3185, 887.2983), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:52:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[12:52:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(914.59814, 723.9579)
+[12:52:57] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:52:57] [INFO] [Bullet] Using shooter_position, distance=1166,4496
+[12:52:57] [INFO] [Bullet] Distance to wall: 1166,4496 (79,4257% of viewport)
+[12:52:57] [INFO] [Bullet] Distance-based penetration chance: 54,003357%
+[12:52:57] [INFO] [Bullet] Starting wall penetration at (914.59814, 723.9579)
+[12:52:57] [ENEMY] [Enemy10] FLANKING started: target=(682.6992, 1001.165), side=right, pos=(953.2405, 1416.812)
+[12:52:57] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:52:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 5,760804
+[12:52:57] [INFO] [Bullet] Max penetration distance exceeded: 83,333336 >= 48
+[12:52:57] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:57] [INFO] [Bullet] Exiting penetration at (960.81396, 648.67926) after traveling 83,333336 pixels through wall
+[12:52:57] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:52:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(841.5422, 860.0746), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:52:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[12:52:57] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:52:57] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:52:57] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:52:57] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:52:57] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:52:57] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:52:57] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:52:57] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:52:57] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[12:52:57] [INFO] [ScoreManager] Level started with 10 enemies
+[12:52:57] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
+[12:52:57] [ENEMY] [Enemy1] Registered as sound listener
+[12:52:57] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:52:57] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
+[12:52:57] [ENEMY] [Enemy2] Registered as sound listener
+[12:52:57] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:52:57] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
+[12:52:57] [ENEMY] [Enemy3] Registered as sound listener
+[12:52:57] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:52:57] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
+[12:52:57] [ENEMY] [Enemy4] Registered as sound listener
+[12:52:57] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:52:57] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
+[12:52:57] [ENEMY] [Enemy5] Registered as sound listener
+[12:52:57] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[12:52:57] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
+[12:52:57] [ENEMY] [Enemy6] Registered as sound listener
+[12:52:57] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:52:57] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
+[12:52:57] [ENEMY] [Enemy7] Registered as sound listener
+[12:52:57] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:52:57] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
+[12:52:57] [ENEMY] [Enemy8] Registered as sound listener
+[12:52:57] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:52:57] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
+[12:52:57] [ENEMY] [Enemy9] Registered as sound listener
+[12:52:57] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:52:57] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
+[12:52:57] [ENEMY] [Enemy10] Registered as sound listener
+[12:52:57] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:52:57] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:52:57] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:52:57] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:52:57] [INFO] [LastChance] Found player: Player
+[12:52:57] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:52:57] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:52:57] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:52:57] [INFO] [Player] Detecting weapon pose (frame 3)...
+[12:52:57] [INFO] [Player] Detected weapon: Rifle (default pose)
+[12:52:57] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[12:52:58] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:52:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.528, 1518.106), source=ENEMY (Enemy10), range=1469, listeners=19
+[12:52:58] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
+[12:52:58] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:52:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1107.609, 1460.943), shooter_id=1951173445564, bullet_pos=(1070.721, 1386.219)
+[12:52:58] [INFO] [Bullet] Using shooter_position, distance=83.333366394043
+[12:52:58] [INFO] [Bullet] Distance to wall: 83.333366394043 (5.67432215431913% of viewport)
+[12:52:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:52:58] [INFO] [Bullet] Starting wall penetration at (1070.721, 1386.219)
+[12:52:58] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.2705535888672
+[12:52:58] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:58] [INFO] [Bullet] Exiting penetration at (1050.064, 1344.373) after traveling 41.6666679382324 pixels through wall
+[12:52:58] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.222, 1497.771), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:52:58] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:52:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1080.976, 1437.848), shooter_id=1951173445564, bullet_pos=(1065.567, 1399.135)
+[12:52:58] [INFO] [Bullet] Using shooter_position, distance=41.666675567627
+[12:52:58] [INFO] [Bullet] Distance to wall: 41.666675567627 (2.83716055766006% of viewport)
+[12:52:58] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:52:58] [INFO] [Bullet] Starting wall penetration at (1065.567, 1399.135)
+[12:52:58] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.7668037414551
+[12:52:58] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:58] [INFO] [Bullet] Exiting penetration at (1048.31, 1355.776) after traveling 41.6666679382324 pixels through wall
+[12:52:58] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.749, 1476.207), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:52:58] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:52:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1055.344, 1413.921), shooter_id=1951173445564, bullet_pos=(1043.045, 1374.111)
+[12:52:58] [INFO] [Bullet] Using shooter_position, distance=41.6667251586914
+[12:52:58] [INFO] [Bullet] Distance to wall: 41.6667251586914 (2.83716393440683% of viewport)
+[12:52:58] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:52:58] [INFO] [Bullet] Starting wall penetration at (1043.045, 1374.111)
+[12:52:58] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48.6442070007324
+[12:52:58] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:52:58] [INFO] [Bullet] Exiting penetration at (1029.271, 1329.523) after traveling 41.6666717529297 pixels through wall
+[12:52:58] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:52:58] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:52:59] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:52:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5684, 752.2266), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:52:59] [ENEMY] [Enemy2] Heard gunshot at (689.5684, 752.2266), source_type=1, intensity=0.02, distance=353
+[12:52:59] [ENEMY] [Enemy4] Heard gunshot at (689.5684, 752.2266), source_type=1, intensity=0.07, distance=184
+[12:52:59] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:52:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(480.9133, 752.6773), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:52:59] [ENEMY] [Enemy1] Heard gunshot at (480.9133, 752.6773), source_type=0, intensity=0.01, distance=441
+[12:52:59] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:52:59] [INFO] [LastChance] Threat detected: Bullet
+[12:52:59] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:52:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:52:59] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:52:59] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:52:59] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[12:52:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5684, 752.2266), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:52:59] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:52:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(511.7504, 739.3031), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:52:59] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:52:59] [INFO] [LastChance] Threat detected: Bullet
+[12:52:59] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:52:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:52:59] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:52:59] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:52:59] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[12:52:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[12:52:59] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[12:52:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5684, 752.2266), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:52:59] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:52:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(544.1891, 741.145), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:52:59] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[12:52:59] [INFO] [LastChance] Threat detected: Bullet
+[12:52:59] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:52:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:52:59] [INFO] [LastChance] Threat detected: @Area2D@3198
+[12:52:59] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:52:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:52:59] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[12:52:59] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:52:59] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:52:59] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:52:59] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:52:59] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:52:59] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:52:59] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:52:59] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:52:59] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:52:59] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:52:59] [ENEMY] [Enemy3] Hit taken, health: 0/3
+[12:52:59] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:52:59] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:52:59] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:53:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:53:00] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
+[12:53:00] [INFO] [LastChance] Threat detected: @Area2D@3201
+[12:53:00] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:53:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:53:00] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:53:00] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:53:00] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:53:00] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:53:00] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:53:00] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:53:00] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:53:00] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:53:00] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:53:00] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[12:53:00] [INFO] [ScoreManager] Level started with 10 enemies
+[12:53:00] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
+[12:53:00] [ENEMY] [Enemy1] Registered as sound listener
+[12:53:00] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:53:00] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
+[12:53:00] [ENEMY] [Enemy2] Registered as sound listener
+[12:53:00] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:53:00] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
+[12:53:00] [ENEMY] [Enemy3] Registered as sound listener
+[12:53:00] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:53:00] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
+[12:53:00] [ENEMY] [Enemy4] Registered as sound listener
+[12:53:00] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:53:00] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
+[12:53:00] [ENEMY] [Enemy5] Registered as sound listener
+[12:53:00] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:53:00] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
+[12:53:00] [ENEMY] [Enemy6] Registered as sound listener
+[12:53:00] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:53:00] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
+[12:53:00] [ENEMY] [Enemy7] Registered as sound listener
+[12:53:00] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:53:00] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
+[12:53:00] [ENEMY] [Enemy8] Registered as sound listener
+[12:53:00] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:53:00] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
+[12:53:00] [ENEMY] [Enemy9] Registered as sound listener
+[12:53:00] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[12:53:00] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
+[12:53:00] [ENEMY] [Enemy10] Registered as sound listener
+[12:53:00] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:53:00] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:53:00] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:53:00] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:53:00] [INFO] [LastChance] Found player: Player
+[12:53:00] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:53:00] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:53:00] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:53:00] [INFO] [Player] Detecting weapon pose (frame 3)...
+[12:53:00] [INFO] [Player] Detected weapon: Rifle (default pose)
+[12:53:00] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[12:53:01] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:53:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.472, 1518.202), source=ENEMY (Enemy10), range=1469, listeners=19
+[12:53:01] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
+[12:53:01] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:53:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1107.365, 1461.161), shooter_id=1991052889170, bullet_pos=(1070.23, 1386.56)
+[12:53:01] [INFO] [Bullet] Using shooter_position, distance=83.3332977294922
+[12:53:01] [INFO] [Bullet] Distance to wall: 83.3332977294922 (5.6743174788236% of viewport)
+[12:53:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:53:01] [INFO] [Bullet] Starting wall penetration at (1070.23, 1386.56)
+[12:53:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.8708686828613
+[12:53:01] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:01] [INFO] [Bullet] Exiting penetration at (1049.434, 1344.783) after traveling 41.6666679382324 pixels through wall
+[12:53:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.134, 1497.917), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:53:01] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:53:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1080.7, 1438.095), shooter_id=1991052889170, bullet_pos=(1065.17, 1399.431)
+[12:53:01] [INFO] [Bullet] Using shooter_position, distance=41.6667251586914
+[12:53:01] [INFO] [Bullet] Distance to wall: 41.6667251586914 (2.83716393440683% of viewport)
+[12:53:01] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:01] [INFO] [Bullet] Starting wall penetration at (1065.17, 1399.431)
+[12:53:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.4164600372314
+[12:53:01] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:01] [INFO] [Bullet] Exiting penetration at (1047.777, 1356.127) after traveling 41.6666717529297 pixels through wall
+[12:53:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.628, 1476.4), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:53:01] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:53:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1055.039, 1414.195), shooter_id=1991052889170, bullet_pos=(1042.624, 1374.421)
+[12:53:01] [INFO] [Bullet] Using shooter_position, distance=41.6666946411133
+[12:53:01] [INFO] [Bullet] Distance to wall: 41.6666946411133 (2.83716185640882% of viewport)
+[12:53:01] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:01] [INFO] [Bullet] Starting wall penetration at (1042.624, 1374.421)
+[12:53:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48.3203582763672
+[12:53:01] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:01] [INFO] [Bullet] Exiting penetration at (1028.718, 1329.875) after traveling 41.6666679382324 pixels through wall
+[12:53:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:02] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:53:02] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5815, 752.2875), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:53:02] [ENEMY] [Enemy2] Heard gunshot at (689.5815, 752.2875), source_type=1, intensity=0.02, distance=353
+[12:53:02] [ENEMY] [Enemy4] Heard gunshot at (689.5815, 752.2875), source_type=1, intensity=0.07, distance=184
+[12:53:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(470.7346, 753.8652), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:53:02] [ENEMY] [Enemy1] Heard gunshot at (470.7346, 753.8652), source_type=0, intensity=0.01, distance=438
+[12:53:02] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:53:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(625.0829, 773.9789), shooter_id=1989056398676, bullet_pos=(502.8173, 799.9811)
+[12:53:02] [INFO] [Bullet] Using shooter_position, distance=124.999969482422
+[12:53:02] [INFO] [Bullet] Distance to wall: 124.999969482422 (8.51147777673392% of viewport)
+[12:53:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:53:02] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[12:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5815, 752.2875), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:53:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(497.5581, 740.2146), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:53:02] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:53:02] [INFO] [LastChance] Threat detected: @Area2D@3458
+[12:53:02] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:53:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:53:02] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[12:53:02] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[12:53:02] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[12:53:02] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:53:02] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:53:02] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:53:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(529.2903, 740.5601), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:53:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(625.0829, 773.9789), shooter_id=1989056398676, bullet_pos=(43.61322, 724.1892)
+[12:53:03] [INFO] [Bullet] Using shooter_position, distance=583.597412109375
+[12:53:03] [INFO] [Bullet] Distance to wall: 583.597412109375 (39.7382209315411% of viewport)
+[12:53:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:53:03] [INFO] [Bullet] Starting wall penetration at (43.61322, 724.1892)
+[12:53:03] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.6463298797607
+[12:53:03] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:03] [INFO] [Bullet] Exiting penetration at (3.736061, 717.6075) after traveling 35.4166717529297 pixels through wall
+[12:53:03] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[12:53:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:53:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
+[12:53:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(558.3206, 757.0138), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:53:03] [INFO] [LastChance] Threat detected: Bullet
+[12:53:03] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:53:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:53:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(929.1974, 749.1781)
+[12:53:03] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:03] [INFO] [Bullet] Using shooter_position, distance=1193,5978
+[12:53:03] [INFO] [Bullet] Distance to wall: 1193,5978 (81,27427% of viewport)
+[12:53:03] [INFO] [Bullet] Distance-based penetration chance: 51,846684%
+[12:53:03] [INFO] [Bullet] Starting wall penetration at (929.1974, 749.1781)
+[12:53:03] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39,862465
+[12:53:03] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:03] [INFO] [Bullet] Exiting penetration at (975.8532, 750.18353) after traveling 41,666668 pixels through wall
+[12:53:03] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:53:03] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:53:03] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:53:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:53:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
+[12:53:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(587.4952, 779.3945), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
+[12:53:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(916.2179, 739.34503)
+[12:53:03] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:03] [INFO] [Bullet] Using shooter_position, distance=1177,3217
+[12:53:03] [INFO] [Bullet] Distance to wall: 1177,3217 (80,166% of viewport)
+[12:53:03] [INFO] [Bullet] Distance-based penetration chance: 53,139668%
+[12:53:03] [INFO] [Bullet] Starting wall penetration at (916.2179, 739.34503)
+[12:53:03] [INFO] [LastChance] Threat detected: Bullet
+[12:53:03] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:53:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:53:03] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:53:03] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26,860434
+[12:53:03] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:03] [INFO] [Bullet] Exiting penetration at (962.82776, 737.044) after traveling 41,666668 pixels through wall
+[12:53:03] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[12:53:03] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:53:03] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:53:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(436.7524, 607.2701), shooter_id=1988771187122, bullet_pos=(779.6274, 1026.603)
+[12:53:03] [INFO] [Bullet] Using shooter_position, distance=541.666870117188
+[12:53:03] [INFO] [Bullet] Distance to wall: 541.666870117188 (36.8830932238251% of viewport)
+[12:53:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:53:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1192.2528, 713.5358)
+[12:53:03] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:03] [INFO] [Bullet] Using shooter_position, distance=1389,4603
+[12:53:03] [INFO] [Bullet] Distance to wall: 1389,4603 (94,61091% of viewport)
+[12:53:03] [INFO] [Bullet] Distance-based penetration chance: 36,287277%
+[12:53:03] [INFO] [Bullet] Penetration failed (distance roll)
+[12:53:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(436.7524, 607.2701), shooter_id=1988771187122, bullet_pos=(916.1362, 857.2756)
+[12:53:03] [INFO] [Bullet] Using shooter_position, distance=540.658569335938
+[12:53:03] [INFO] [Bullet] Distance to wall: 540.658569335938 (36.8144361695281% of viewport)
+[12:53:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:53:03] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[12:53:03] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[12:53:03] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[12:53:05] [ENEMY] [Enemy10] FLANKING started: target=(484.0155, 815.2908), side=right, pos=(953.1918, 1416.92)
+[12:53:05] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[12:53:05] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[12:53:05] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[12:53:05] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[12:53:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.7302, 562.1432), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:53:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
+[12:53:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(504.9454, 514.1235), shooter_id=1988771187122, bullet_pos=(504.9454, 514.1235)
+[12:53:05] [INFO] [Bullet] Using shooter_position, distance=0
+[12:53:05] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:53:05] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:05] [INFO] [Bullet] Starting wall penetration at (504.9454, 514.1235)
+[12:53:05] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.0807609558105
+[12:53:05] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:05] [INFO] [Bullet] Exiting penetration at (534.0181, 477.6193) after traveling 41.6666679382324 pixels through wall
+[12:53:05] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.7302, 562.1432), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:53:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
+[12:53:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(504.9593, 514.1374), shooter_id=1988771187122, bullet_pos=(504.9593, 514.1374)
+[12:53:05] [INFO] [Bullet] Using shooter_position, distance=0
+[12:53:05] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:53:05] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:05] [INFO] [Bullet] Starting wall penetration at (504.9593, 514.1374)
+[12:53:05] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.1140899658203
+[12:53:05] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:05] [INFO] [Bullet] Exiting penetration at (534.0425, 477.6415) after traveling 41.6666679382324 pixels through wall
+[12:53:05] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(458.9368, 440.3521), source=ENEMY (Enemy1), range=1469, listeners=9
+[12:53:05] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[12:53:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(512.7158, 684.345), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:05] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:53:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(523.3225, 418.3275), shooter_id=1988485974028, bullet_pos=(523.3225, 418.3275)
+[12:53:05] [INFO] [Bullet] Using shooter_position, distance=0
+[12:53:05] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:53:05] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:05] [INFO] [Bullet] Starting wall penetration at (523.3225, 418.3275)
+[12:53:05] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:53:05] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:53:05] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:53:05] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:53:05] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:53:05] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:53:05] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:53:05] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:53:05] [INFO] [PenultimateHit] Applying saturation to 9 enemies
+[12:53:05] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:53:05] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.9162216186523
+[12:53:05] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:05] [INFO] [Bullet] Exiting penetration at (565.4549, 398.2617) after traveling 41.6666679382324 pixels through wall
+[12:53:05] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:05] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[12:53:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.7302, 562.1432), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:53:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
+[12:53:06] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
+[12:53:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(504.873, 514.0508), shooter_id=1988771187122, bullet_pos=(504.873, 514.0508)
+[12:53:06] [INFO] [Bullet] Using shooter_position, distance=0
+[12:53:06] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:53:06] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:06] [INFO] [Bullet] Starting wall penetration at (504.873, 514.0508)
+[12:53:06] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[12:53:06] [INFO] [Bullet] Exiting penetration at (510.5728, 506.8718) after traveling 4.16666650772095 pixels through wall
+[12:53:06] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(512.7062, 684.152), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:53:06] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:53:06] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:53:06] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:53:06] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:53:06] [INFO] [LastChance] Player died
+[12:53:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.7302, 562.1432), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:53:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
+[12:53:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(505.2608, 514.4422), shooter_id=1988771187122, bullet_pos=(505.2608, 514.4422)
+[12:53:06] [INFO] [Bullet] Using shooter_position, distance=0
+[12:53:06] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:53:06] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:06] [INFO] [Bullet] Starting wall penetration at (505.2608, 514.4422)
+[12:53:06] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.8331756591797
+[12:53:06] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:06] [INFO] [Bullet] Exiting penetration at (534.5734, 478.1303) after traveling 41.6666679382324 pixels through wall
+[12:53:06] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(504.3213, 675.4199), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[12:53:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.7302, 562.1432), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:53:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
+[12:53:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(509.6836, 519.4052), shooter_id=1988771187122, bullet_pos=(509.6836, 519.4052)
+[12:53:06] [INFO] [Bullet] Using shooter_position, distance=0
+[12:53:06] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:53:06] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:06] [INFO] [Bullet] Starting wall penetration at (509.6836, 519.4052)
+[12:53:06] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.2454738616943
+[12:53:06] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:06] [INFO] [Bullet] Exiting penetration at (542.3995, 486.1268) after traveling 41.6666717529297 pixels through wall
+[12:53:06] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(483.8795, 661.8441), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[12:53:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.7302, 562.1432), source=ENEMY (Enemy2), range=1469, listeners=9
+[12:53:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
+[12:53:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(521.8727, 542.4695), shooter_id=1988771187122, bullet_pos=(521.8727, 542.4695)
+[12:53:06] [INFO] [Bullet] Using shooter_position, distance=0
+[12:53:06] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[12:53:06] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:06] [INFO] [Bullet] Starting wall penetration at (521.8727, 542.4695)
+[12:53:06] [INFO] [Bullet] Raycast backward hit penetrating body at distance 44.3489379882813
+[12:53:06] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:06] [INFO] [Bullet] Exiting penetration at (564.7055, 523.9459) after traveling 41.6666679382324 pixels through wall
+[12:53:06] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:06] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[12:53:06] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[12:53:06] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
+[12:53:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.6045, 657.7951), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[12:53:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(412.1045, 657.7951), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[12:53:07] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:53:07] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:53:07] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:53:07] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:53:07] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:53:07] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:53:07] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:53:07] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:53:07] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[12:53:07] [INFO] [ScoreManager] Level started with 10 enemies
+[12:53:07] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
+[12:53:07] [ENEMY] [Enemy1] Registered as sound listener
+[12:53:07] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:53:07] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
+[12:53:07] [ENEMY] [Enemy2] Registered as sound listener
+[12:53:07] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:53:07] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
+[12:53:07] [ENEMY] [Enemy3] Registered as sound listener
+[12:53:07] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:53:07] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
+[12:53:07] [ENEMY] [Enemy4] Registered as sound listener
+[12:53:07] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:53:07] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
+[12:53:07] [ENEMY] [Enemy5] Registered as sound listener
+[12:53:07] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:53:07] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
+[12:53:07] [ENEMY] [Enemy6] Registered as sound listener
+[12:53:07] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:53:07] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
+[12:53:07] [ENEMY] [Enemy7] Registered as sound listener
+[12:53:07] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:53:07] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
+[12:53:07] [ENEMY] [Enemy8] Registered as sound listener
+[12:53:07] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:53:07] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
+[12:53:07] [ENEMY] [Enemy9] Registered as sound listener
+[12:53:07] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:53:07] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
+[12:53:07] [ENEMY] [Enemy10] Registered as sound listener
+[12:53:07] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:53:07] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:53:07] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:53:07] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:53:07] [INFO] [LastChance] Found player: Player
+[12:53:07] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:53:07] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:53:07] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:53:07] [INFO] [Player] Detecting weapon pose (frame 3)...
+[12:53:07] [INFO] [Player] Detected weapon: Rifle (default pose)
+[12:53:07] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[12:53:08] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[12:53:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.387, 1518.346), source=ENEMY (Enemy10), range=1469, listeners=19
+[12:53:08] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
+[12:53:08] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:53:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1106.5, 1461.821), shooter_id=2189024036219, bullet_pos=(1068.342, 1387.737)
+[12:53:08] [INFO] [Bullet] Using shooter_position, distance=83.3333511352539
+[12:53:08] [INFO] [Bullet] Distance to wall: 83.3333511352539 (5.67432111532012% of viewport)
+[12:53:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:53:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.86, 1498.354), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:53:08] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:53:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1079.026, 1439.313), shooter_id=2189024036219, bullet_pos=(1062.59, 1401.025)
+[12:53:08] [INFO] [Bullet] Using shooter_position, distance=41.6667022705078
+[12:53:08] [INFO] [Bullet] Distance to wall: 41.6667022705078 (2.83716237590832% of viewport)
+[12:53:08] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:08] [INFO] [Bullet] Starting wall penetration at (1062.59, 1401.025)
+[12:53:08] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19.4330825805664
+[12:53:08] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:08] [INFO] [Bullet] Exiting penetration at (1044.181, 1358.143) after traveling 41.6666679382324 pixels through wall
+[12:53:08] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1106.5, 1461.821), shooter_id=2189024036219, bullet_pos=(901.7193, 1665.317)
+[12:53:08] [INFO] [Bullet] Using shooter_position, distance=288.696624755859
+[12:53:08] [INFO] [Bullet] Distance to wall: 288.696624755859 (19.6578840459088% of viewport)
+[12:53:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:53:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.051, 1477.272), source=ENEMY (Enemy10), range=1469, listeners=10
+[12:53:08] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[12:53:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1052.414, 1416.017), shooter_id=2189024036219, bullet_pos=(1038.685, 1376.677)
+[12:53:08] [INFO] [Bullet] Using shooter_position, distance=41.6667098999023
+[12:53:08] [INFO] [Bullet] Distance to wall: 41.6667098999023 (2.83716289540783% of viewport)
+[12:53:08] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:08] [INFO] [Bullet] Starting wall penetration at (1038.685, 1376.677)
+[12:53:08] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.9501037597656
+[12:53:08] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:08] [INFO] [Bullet] Exiting penetration at (1023.309, 1332.616) after traveling 41.6666679382324 pixels through wall
+[12:53:08] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:08] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[12:53:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1106.5, 1461.821), shooter_id=2189024036219, bullet_pos=(1088.061, 2082.122)
+[12:53:08] [INFO] [Bullet] Using shooter_position, distance=620.575012207031
+[12:53:08] [INFO] [Bullet] Distance to wall: 620.575012207031 (42.2560937180013% of viewport)
+[12:53:08] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[12:53:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(636.8471, 760.0097), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:53:09] [ENEMY] [Enemy2] Heard gunshot at (636.8471, 760.0097), source_type=1, intensity=0.02, distance=317
+[12:53:09] [ENEMY] [Enemy4] Heard gunshot at (636.8471, 760.0097), source_type=1, intensity=0.05, distance=215
+[12:53:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[12:53:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(389.6918, 779.2637), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:53:09] [ENEMY] [Enemy1] Heard gunshot at (389.6918, 779.2637), source_type=0, intensity=0.01, distance=439
+[12:53:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:53:09] [INFO] [LastChance] Threat detected: Bullet
+[12:53:09] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:53:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:53:09] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[12:53:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(626.2114, 760.8209), source=ENEMY (Enemy3), range=1469, listeners=10
+[12:53:09] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[12:53:09] [INFO] [LastChance] Threat detected: @Area2D@3736
+[12:53:09] [INFO] [LastChance] Not in hard mode - effect disabled
+[12:53:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[12:53:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(423.1659, 767.1302), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:53:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[12:53:09] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:53:09] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:53:09] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:53:09] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:53:09] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:53:09] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:53:09] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:53:09] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:53:09] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:53:09] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:53:09] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[12:53:09] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[12:53:09] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[12:53:09] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[12:53:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(571.212, 777.9716), shooter_id=2187027549251, bullet_pos=(64.64001, 855.6962)
+[12:53:09] [INFO] [Bullet] Using shooter_position, distance=512.5
+[12:53:09] [INFO] [Bullet] Distance to wall: 512.5 (34.8970674044009% of viewport)
+[12:53:09] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:53:12] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
+[12:53:12] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:53:12] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:53:12] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[12:53:12] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[12:53:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(637.3758, 766.4351), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:53:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(674.6002, 769.5147), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:53:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(705.9566, 786.7605), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:53:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(733.2604, 799.9338), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:53:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(765.4283, 799.9338), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:53:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(803.9283, 799.9338), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[12:53:13] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[12:53:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
+[12:53:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(789.6933, 976.5574), shooter_id=2187312761709, bullet_pos=(805.0283, 1015.299)
+[12:53:13] [INFO] [Bullet] Using shooter_position, distance=41.6666946411133
+[12:53:13] [INFO] [Bullet] Distance to wall: 41.6666946411133 (2.83716185640882% of viewport)
+[12:53:13] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:13] [INFO] [Bullet] Starting wall penetration at (805.0283, 1015.299)
+[12:53:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.3093872070313
+[12:53:13] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:13] [INFO] [Bullet] Exiting penetration at (822.2034, 1058.691) after traveling 41.6666679382324 pixels through wall
+[12:53:13] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:13] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[12:53:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
+[12:53:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(758.894, 977.593), shooter_id=2187312761709, bullet_pos=(755.5673, 1019.127)
+[12:53:13] [INFO] [Bullet] Using shooter_position, distance=41.6666488647461
+[12:53:13] [INFO] [Bullet] Distance to wall: 41.6666488647461 (2.8371587394118% of viewport)
+[12:53:13] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:13] [INFO] [Bullet] Starting wall penetration at (755.5673, 1019.127)
+[12:53:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41.7776565551758
+[12:53:13] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:13] [INFO] [Bullet] Exiting penetration at (751.8414, 1065.644) after traveling 41.6666717529297 pixels through wall
+[12:53:13] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
+[12:53:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(751.7698, 975.7826), shooter_id=2187312761709, bullet_pos=(743.9826, 1016.715)
+[12:53:13] [INFO] [Bullet] Using shooter_position, distance=41.6666564941406
+[12:53:13] [INFO] [Bullet] Distance to wall: 41.6666564941406 (2.8371592589113% of viewport)
+[12:53:13] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:13] [INFO] [Bullet] Starting wall penetration at (743.9826, 1016.715)
+[12:53:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.2511749267578
+[12:53:13] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:13] [INFO] [Bullet] Exiting penetration at (735.2609, 1062.56) after traveling 41.6666717529297 pixels through wall
+[12:53:13] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.9348, 831.3612), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:13] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
+[12:53:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
+[12:53:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(740.7822, 971.2625), shooter_id=2187312761709, bullet_pos=(725.9942, 1010.217)
+[12:53:13] [INFO] [Bullet] Using shooter_position, distance=41.6666603088379
+[12:53:13] [INFO] [Bullet] Distance to wall: 41.6666603088379 (2.83715951866106% of viewport)
+[12:53:13] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:13] [INFO] [Bullet] Starting wall penetration at (725.9942, 1010.217)
+[12:53:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31.9235553741455
+[12:53:13] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:13] [INFO] [Bullet] Exiting penetration at (709.4317, 1053.845) after traveling 41.6666717529297 pixels through wall
+[12:53:13] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.9348, 842.0952), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:13] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
+[12:53:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
+[12:53:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.6484, 966.9978), shooter_id=2187312761709, bullet_pos=(714.2218, 1003.859)
+[12:53:13] [INFO] [Bullet] Using shooter_position, distance=41.6666412353516
+[12:53:13] [INFO] [Bullet] Distance to wall: 41.6666412353516 (2.8371582199123% of viewport)
+[12:53:13] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:13] [INFO] [Bullet] Starting wall penetration at (714.2218, 1003.859)
+[12:53:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.8992652893066
+[12:53:13] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:13] [INFO] [Bullet] Exiting penetration at (692.4641, 1045.143) after traveling 41.6666679382324 pixels through wall
+[12:53:13] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(501.367, 552.2065)
+[12:53:13] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:13] [INFO] [Bullet] Using shooter_position, distance=745,8558
+[12:53:13] [INFO] [Bullet] Distance to wall: 745,8558 (50,786694% of viewport)
+[12:53:13] [INFO] [Bullet] Distance-based penetration chance: 87,41553%
+[12:53:13] [INFO] [Bullet] Penetration failed (distance roll)
+[12:53:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.9348, 842.801), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:13] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
+[12:53:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:13] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.1792, 966.674), shooter_id=2187312761709, bullet_pos=(713.4445, 1003.371)
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=41.6666679382324
+[12:53:14] [INFO] [Bullet] Distance to wall: 41.6666679382324 (2.83716003816056% of viewport)
+[12:53:14] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:14] [INFO] [Bullet] Starting wall penetration at (713.4445, 1003.371)
+[12:53:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.2436466217041
+[12:53:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:14] [INFO] [Bullet] Exiting penetration at (691.3417, 1044.471) after traveling 41.6666679382324 pixels through wall
+[12:53:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(503.17752, 560.3987)
+[12:53:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=753,1496
+[12:53:14] [INFO] [Bullet] Distance to wall: 753,1496 (51,28334% of viewport)
+[12:53:14] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[12:53:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.9348, 842.801), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:14] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
+[12:53:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:14] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.1792, 966.674), shooter_id=2187312761709, bullet_pos=(713.4445, 1003.371)
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=41.6666679382324
+[12:53:14] [INFO] [Bullet] Distance to wall: 41.6666679382324 (2.83716003816056% of viewport)
+[12:53:14] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:14] [INFO] [Bullet] Starting wall penetration at (713.4445, 1003.371)
+[12:53:14] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[12:53:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.2436466217041
+[12:53:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:14] [INFO] [Bullet] Exiting penetration at (691.3417, 1044.471) after traveling 41.6666679382324 pixels through wall
+[12:53:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(501.23743, 563.82965)
+[12:53:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=754,4155
+[12:53:14] [INFO] [Bullet] Distance to wall: 754,4155 (51,36954% of viewport)
+[12:53:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.9348, 842.801), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[12:53:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:14] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.1792, 966.674), shooter_id=2187312761709, bullet_pos=(713.4445, 1003.371)
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=41.6666679382324
+[12:53:14] [INFO] [Bullet] Distance to wall: 41.6666679382324 (2.83716003816056% of viewport)
+[12:53:14] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:14] [INFO] [Bullet] Starting wall penetration at (713.4445, 1003.371)
+[12:53:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.2436466217041
+[12:53:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:14] [INFO] [Bullet] Exiting penetration at (691.3417, 1044.471) after traveling 41.6666679382324 pixels through wall
+[12:53:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(499.81012, 565.8602)
+[12:53:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=754,9888
+[12:53:14] [INFO] [Bullet] Distance to wall: 754,9888 (51,408577% of viewport)
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(979.51953, 244.32703)
+[12:53:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=1009,5317
+[12:53:14] [INFO] [Bullet] Distance to wall: 1009,5317 (68,74087% of viewport)
+[12:53:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.9348, 842.801), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:14] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
+[12:53:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:14] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.1792, 966.674), shooter_id=2187312761709, bullet_pos=(713.4445, 1003.371)
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=41.6666679382324
+[12:53:14] [INFO] [Bullet] Distance to wall: 41.6666679382324 (2.83716003816056% of viewport)
+[12:53:14] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:14] [INFO] [Bullet] Starting wall penetration at (713.4445, 1003.371)
+[12:53:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.2436466217041
+[12:53:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:14] [INFO] [Bullet] Exiting penetration at (691.3417, 1044.471) after traveling 41.6666679382324 pixels through wall
+[12:53:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(499.02567, 566.9852)
+[12:53:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=755,3138
+[12:53:14] [INFO] [Bullet] Distance to wall: 755,3138 (51,43071% of viewport)
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1007.6737, 298.64008)
+[12:53:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=1050,9958
+[12:53:14] [INFO] [Bullet] Distance to wall: 1050,9958 (71,56424% of viewport)
+[12:53:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:14] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.1792, 966.674), shooter_id=2187312761709, bullet_pos=(713.4445, 1003.371)
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=41.6666679382324
+[12:53:14] [INFO] [Bullet] Distance to wall: 41.6666679382324 (2.83716003816056% of viewport)
+[12:53:14] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:14] [INFO] [Bullet] Starting wall penetration at (713.4445, 1003.371)
+[12:53:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.2436466217041
+[12:53:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:14] [INFO] [Bullet] Exiting penetration at (691.3417, 1044.471) after traveling 41.6666679382324 pixels through wall
+[12:53:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:14] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(498.59943, 567.5998)
+[12:53:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=755,49384
+[12:53:14] [INFO] [Bullet] Distance to wall: 755,49384 (51,44297% of viewport)
+[12:53:14] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(591.63464, 67.09354)
+[12:53:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=595,4268
+[12:53:14] [INFO] [Bullet] Distance to wall: 595,4268 (40,54371% of viewport)
+[12:53:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:14] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.1792, 966.674), shooter_id=2187312761709, bullet_pos=(713.4445, 1003.371)
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=41.6666679382324
+[12:53:14] [INFO] [Bullet] Distance to wall: 41.6666679382324 (2.83716003816056% of viewport)
+[12:53:14] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:14] [INFO] [Bullet] Starting wall penetration at (713.4445, 1003.371)
+[12:53:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.2436466217041
+[12:53:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:14] [INFO] [Bullet] Exiting penetration at (691.3417, 1044.471) after traveling 41.6666679382324 pixels through wall
+[12:53:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(1378.7334, 437.96405)
+[12:53:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=1446,623
+[12:53:14] [INFO] [Bullet] Distance to wall: 1446,623 (98,50323% of viewport)
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(990.836, 275.56628)
+[12:53:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=1028,4419
+[12:53:14] [INFO] [Bullet] Distance to wall: 1028,4419 (70,0285% of viewport)
+[12:53:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:14] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.1792, 966.674), shooter_id=2187312761709, bullet_pos=(713.4445, 1003.371)
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=41.6666679382324
+[12:53:14] [INFO] [Bullet] Distance to wall: 41.6666679382324 (2.83716003816056% of viewport)
+[12:53:14] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:14] [INFO] [Bullet] Starting wall penetration at (713.4445, 1003.371)
+[12:53:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.2436466217041
+[12:53:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:14] [INFO] [Bullet] Exiting penetration at (691.3417, 1044.471) after traveling 41.6666679382324 pixels through wall
+[12:53:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:14] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.1792, 966.674), shooter_id=2187312761709, bullet_pos=(713.4445, 1003.371)
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=41.6666679382324
+[12:53:14] [INFO] [Bullet] Distance to wall: 41.6666679382324 (2.83716003816056% of viewport)
+[12:53:14] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:14] [INFO] [Bullet] Starting wall penetration at (713.4445, 1003.371)
+[12:53:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.2436466217041
+[12:53:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:14] [INFO] [Bullet] Exiting penetration at (691.3417, 1044.471) after traveling 41.6666679382324 pixels through wall
+[12:53:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(48.08795, 231.78091)
+[12:53:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=236,7168
+[12:53:14] [INFO] [Bullet] Distance to wall: 236,7168 (16,118483% of viewport)
+[12:53:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:53:14] [INFO] [Bullet] Starting wall penetration at (48.08795, 231.78091)
+[12:53:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
+[12:53:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13,778359
+[12:53:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:14] [INFO] [Bullet] Exiting penetration at (18.813614, 240.65063) after traveling 25,588543 pixels through wall
+[12:53:14] [INFO] [Bullet] Damage multiplier after penetration: 0,1125
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(553.03925, 63.01333)
+[12:53:14] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=556,61755
+[12:53:14] [INFO] [Bullet] Distance to wall: 556,61755 (37,90111% of viewport)
+[12:53:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:53:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.1792, 966.674), shooter_id=2187312761709, bullet_pos=(713.4445, 1003.371)
+[12:53:14] [INFO] [Bullet] Using shooter_position, distance=41.6666679382324
+[12:53:14] [INFO] [Bullet] Distance to wall: 41.6666679382324 (2.83716003816056% of viewport)
+[12:53:14] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:14] [INFO] [Bullet] Starting wall penetration at (713.4445, 1003.371)
+[12:53:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.2436466217041
+[12:53:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:14] [INFO] [Bullet] Exiting penetration at (691.3417, 1044.471) after traveling 41.6666679382324 pixels through wall
+[12:53:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:15] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
+[12:53:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
+[12:53:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.1792, 966.674), shooter_id=2187312761709, bullet_pos=(713.4445, 1003.371)
+[12:53:15] [INFO] [Bullet] Using shooter_position, distance=41.6666679382324
+[12:53:15] [INFO] [Bullet] Distance to wall: 41.6666679382324 (2.83716003816056% of viewport)
+[12:53:15] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:15] [INFO] [Bullet] Starting wall penetration at (713.4445, 1003.371)
+[12:53:15] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.2436466217041
+[12:53:15] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:15] [INFO] [Bullet] Exiting penetration at (691.3417, 1044.471) after traveling 41.6666679382324 pixels through wall
+[12:53:15] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(257.92908, 227.08073)
+[12:53:15] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:15] [INFO] [Bullet] Using shooter_position, distance=343,6467
+[12:53:15] [INFO] [Bullet] Distance to wall: 343,6467 (23,399536% of viewport)
+[12:53:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:53:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
+[12:53:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.1792, 966.674), shooter_id=2187312761709, bullet_pos=(713.4445, 1003.371)
+[12:53:15] [INFO] [Bullet] Using shooter_position, distance=41.6666679382324
+[12:53:15] [INFO] [Bullet] Distance to wall: 41.6666679382324 (2.83716003816056% of viewport)
+[12:53:15] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:15] [INFO] [Bullet] Starting wall penetration at (713.4445, 1003.371)
+[12:53:15] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.2436466217041
+[12:53:15] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:15] [INFO] [Bullet] Exiting penetration at (691.3417, 1044.471) after traveling 41.6666679382324 pixels through wall
+[12:53:15] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
+[12:53:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.1792, 966.674), shooter_id=2187312761709, bullet_pos=(713.4445, 1003.371)
+[12:53:15] [INFO] [Bullet] Using shooter_position, distance=41.6666679382324
+[12:53:15] [INFO] [Bullet] Distance to wall: 41.6666679382324 (2.83716003816056% of viewport)
+[12:53:15] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:15] [INFO] [Bullet] Starting wall penetration at (713.4445, 1003.371)
+[12:53:15] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.2436466217041
+[12:53:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(48.06668, 153.1537)
+[12:53:15] [INFO] [Bullet] WARNING: Unable to determine shooter position
+[12:53:15] [INFO] [Bullet] Using shooter_position, distance=160,51935
+[12:53:15] [INFO] [Bullet] Distance to wall: 160,51935 (10,930058% of viewport)
+[12:53:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:53:15] [INFO] [Bullet] Starting wall penetration at (48.06668, 153.1537)
+[12:53:15] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:15] [INFO] [Bullet] Exiting penetration at (691.3417, 1044.471) after traveling 41.6666679382324 pixels through wall
+[12:53:15] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:15] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9,715857
+[12:53:15] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:15] [INFO] [Bullet] Exiting penetration at (22.836086, 144.26587) after traveling 21,75026 pixels through wall
+[12:53:15] [INFO] [Bullet] Damage multiplier after penetration: 0,05625
+[12:53:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.0664, 910.8315), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
+[12:53:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.1792, 966.674), shooter_id=2187312761709, bullet_pos=(713.4445, 1003.371)
+[12:53:15] [INFO] [Bullet] Using shooter_position, distance=41.6666679382324
+[12:53:15] [INFO] [Bullet] Distance to wall: 41.6666679382324 (2.83716003816056% of viewport)
+[12:53:15] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[12:53:15] [INFO] [Bullet] Starting wall penetration at (713.4445, 1003.371)
+[12:53:15] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.2436466217041
+[12:53:15] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:15] [INFO] [Bullet] Exiting penetration at (691.3417, 1044.471) after traveling 41.6666679382324 pixels through wall
+[12:53:15] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:15] [ENEMY] [Enemy4] State: COMBAT -> SEEKING_COVER
+[12:53:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(758.7102, 915.3367), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
+[12:53:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(722.7602, 914.0652), source=ENEMY (Enemy4), range=1469, listeners=9
+[12:53:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
+[12:53:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(788.6072, 931.2338), shooter_id=2187312761709, bullet_pos=(912.381, 948.699)
+[12:53:15] [INFO] [Bullet] Using shooter_position, distance=124.999938964844
+[12:53:15] [INFO] [Bullet] Distance to wall: 124.999938964844 (8.5114756987359% of viewport)
+[12:53:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:53:15] [INFO] [Bullet] Starting wall penetration at (912.381, 948.699)
+[12:53:15] [INFO] [Bullet] Raycast backward hit penetrating body at distance 22.8136882781982
+[12:53:15] [INFO] [Bullet] Body exited signal received for penetrating body
+[12:53:15] [INFO] [Bullet] Exiting penetration at (958.5899, 955.2193) after traveling 41.6666679382324 pixels through wall
+[12:53:15] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[12:53:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(825.0187, 900.0468), shooter_id=2187312761709, bullet_pos=(1374.666, 704.686)
+[12:53:15] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
+[12:53:15] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
+[12:53:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[12:53:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(825.0187, 900.0468), shooter_id=2187312761709, bullet_pos=(1577.163, 784.067)
+[12:53:15] [INFO] [Bullet] Using shooter_position, distance=761.033447265625
+[12:53:15] [INFO] [Bullet] Distance to wall: 761.033447265625 (51.8201668414285% of viewport)
+[12:53:15] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[12:53:15] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
+[12:53:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.9348, 842.801), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[12:53:16] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:53:16] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:53:16] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:53:16] [INFO] [LastChance] Player died
+[12:53:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.9348, 842.801), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[12:53:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.9348, 842.801), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[12:53:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.9348, 842.801), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[12:53:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
+[12:53:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(825.0187, 900.0468), shooter_id=2187312761709, bullet_pos=(2482.412, 362.8771)
+[12:53:16] [INFO] [Bullet] Using shooter_position, distance=1742.27001953125
+[12:53:16] [INFO] [Bullet] Distance to wall: 1742.27001953125 (118.634369381949% of viewport)
+[12:53:16] [INFO] [Bullet] Distance-based penetration chance: 26.2731261236102%
+[12:53:16] [INFO] [Bullet] Penetration failed (distance roll)
+[12:53:16] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:53:16] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:53:16] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:53:16] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:53:16] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:53:16] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:53:16] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:53:16] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:53:16] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[12:53:16] [INFO] [ScoreManager] Level started with 10 enemies
+[12:53:16] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
+[12:53:16] [ENEMY] [Enemy1] Registered as sound listener
+[12:53:16] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[12:53:16] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
+[12:53:16] [ENEMY] [Enemy2] Registered as sound listener
+[12:53:16] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[12:53:16] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
+[12:53:16] [ENEMY] [Enemy3] Registered as sound listener
+[12:53:16] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[12:53:16] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
+[12:53:16] [ENEMY] [Enemy4] Registered as sound listener
+[12:53:16] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[12:53:16] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
+[12:53:16] [ENEMY] [Enemy5] Registered as sound listener
+[12:53:16] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:53:16] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
+[12:53:16] [ENEMY] [Enemy6] Registered as sound listener
+[12:53:16] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:53:16] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
+[12:53:16] [ENEMY] [Enemy7] Registered as sound listener
+[12:53:16] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:53:16] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
+[12:53:16] [ENEMY] [Enemy8] Registered as sound listener
+[12:53:16] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[12:53:16] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
+[12:53:16] [ENEMY] [Enemy9] Registered as sound listener
+[12:53:16] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:53:16] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
+[12:53:16] [ENEMY] [Enemy10] Registered as sound listener
+[12:53:16] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[12:53:16] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:53:16] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:53:16] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:53:16] [INFO] [LastChance] Found player: Player
+[12:53:16] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:53:16] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:53:16] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:53:16] [INFO] [Player] Detecting weapon pose (frame 3)...
+[12:53:16] [INFO] [Player] Detected weapon: Rifle (default pose)
+[12:53:16] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[12:53:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=19
+[12:53:17] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
+[12:53:17] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[12:53:17] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:53:17] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:53:17] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:53:17] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:53:17] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:53:17] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:53:17] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:53:17] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:53:17] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:53:17] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:53:17] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:53:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:53:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:53:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:53:18] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:53:18] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:53:18] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:53:18] [INFO] [LastChance] Player died
+[12:53:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:53:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:53:18] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:53:18] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:53:18] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:53:18] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:53:18] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:53:18] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:53:18] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:53:18] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:53:18] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[12:53:18] [INFO] [ScoreManager] Level started with 10 enemies
+[12:53:18] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:53:18] [ENEMY] [Enemy1] Registered as sound listener
+[12:53:18] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[12:53:18] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:53:18] [ENEMY] [Enemy2] Registered as sound listener
+[12:53:18] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:53:18] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:53:18] [ENEMY] [Enemy3] Registered as sound listener
+[12:53:18] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:53:18] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:53:18] [ENEMY] [Enemy4] Registered as sound listener
+[12:53:18] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:53:18] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:53:18] [ENEMY] [Enemy5] Registered as sound listener
+[12:53:18] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:53:18] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:53:18] [ENEMY] [Enemy6] Registered as sound listener
+[12:53:18] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[12:53:18] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:53:18] [ENEMY] [Enemy7] Registered as sound listener
+[12:53:18] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[12:53:18] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:53:18] [ENEMY] [Enemy8] Registered as sound listener
+[12:53:18] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:53:18] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:53:18] [ENEMY] [Enemy9] Registered as sound listener
+[12:53:18] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:53:18] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:53:18] [ENEMY] [Enemy10] Registered as sound listener
+[12:53:18] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:53:18] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:53:18] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:53:18] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:53:18] [INFO] [LastChance] Found player: Player
+[12:53:18] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:53:18] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:53:18] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:53:18] [INFO] [Player] Detecting weapon pose (frame 3)...
+[12:53:18] [INFO] [Player] Detected weapon: Rifle (default pose)
+[12:53:18] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[12:53:19] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:53:19] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:53:19] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:53:19] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:53:19] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:53:19] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:53:19] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:53:19] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:53:19] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[12:53:19] [INFO] [ScoreManager] Level started with 10 enemies
+[12:53:19] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
+[12:53:19] [ENEMY] [Enemy1] Registered as sound listener
+[12:53:19] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:53:19] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
+[12:53:19] [ENEMY] [Enemy2] Registered as sound listener
+[12:53:19] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[12:53:19] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
+[12:53:19] [ENEMY] [Enemy3] Registered as sound listener
+[12:53:19] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[12:53:19] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
+[12:53:19] [ENEMY] [Enemy4] Registered as sound listener
+[12:53:19] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[12:53:19] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
+[12:53:19] [ENEMY] [Enemy5] Registered as sound listener
+[12:53:19] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[12:53:19] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
+[12:53:19] [ENEMY] [Enemy6] Registered as sound listener
+[12:53:19] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[12:53:19] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
+[12:53:19] [ENEMY] [Enemy7] Registered as sound listener
+[12:53:19] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[12:53:19] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
+[12:53:19] [ENEMY] [Enemy8] Registered as sound listener
+[12:53:19] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:53:19] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
+[12:53:19] [ENEMY] [Enemy9] Registered as sound listener
+[12:53:19] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[12:53:19] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
+[12:53:19] [ENEMY] [Enemy10] Registered as sound listener
+[12:53:19] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:53:19] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:53:19] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:53:19] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:53:19] [INFO] [LastChance] Found player: Player
+[12:53:19] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:53:19] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:53:19] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:53:19] [INFO] [Player] Detecting weapon pose (frame 3)...
+[12:53:19] [INFO] [Player] Detected weapon: Rifle (default pose)
+[12:53:19] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[12:53:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=30
+[12:53:19] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
+[12:53:19] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
+[12:53:19] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:53:19] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[12:53:19] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[12:53:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:53:20] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:53:20] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[12:53:20] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[12:53:20] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[12:53:20] [INFO] [PenultimateHit]   - Time scale: 0.10
+[12:53:20] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[12:53:20] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[12:53:20] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[12:53:20] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[12:53:20] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[12:53:20] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[12:53:21] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[12:53:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:53:21] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:53:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[12:53:21] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[12:53:21] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[12:53:21] [INFO] [PenultimateHit] Ending penultimate hit effect
+[12:53:21] [INFO] [LastChance] Player died
+[12:53:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:53:21] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:53:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[12:53:22] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[12:53:22] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[12:53:22] [INFO] [LastChance] Resetting all effects (scene change detected)
+[12:53:22] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[12:53:22] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[12:53:22] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[12:53:22] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[12:53:22] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[12:53:22] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[12:53:22] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[12:53:22] [INFO] [ScoreManager] Level started with 10 enemies
+[12:53:22] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[12:53:22] [ENEMY] [Enemy1] Registered as sound listener
+[12:53:22] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[12:53:22] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[12:53:22] [ENEMY] [Enemy2] Registered as sound listener
+[12:53:22] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[12:53:22] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[12:53:22] [ENEMY] [Enemy3] Registered as sound listener
+[12:53:22] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[12:53:22] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[12:53:22] [ENEMY] [Enemy4] Registered as sound listener
+[12:53:22] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[12:53:22] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[12:53:22] [ENEMY] [Enemy5] Registered as sound listener
+[12:53:22] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[12:53:22] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[12:53:22] [ENEMY] [Enemy6] Registered as sound listener
+[12:53:22] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[12:53:22] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[12:53:22] [ENEMY] [Enemy7] Registered as sound listener
+[12:53:22] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[12:53:22] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[12:53:22] [ENEMY] [Enemy8] Registered as sound listener
+[12:53:22] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[12:53:22] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[12:53:22] [ENEMY] [Enemy9] Registered as sound listener
+[12:53:22] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[12:53:22] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[12:53:22] [ENEMY] [Enemy10] Registered as sound listener
+[12:53:22] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[12:53:22] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[12:53:22] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[12:53:22] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[12:53:22] [INFO] [LastChance] Found player: Player
+[12:53:22] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[12:53:22] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[12:53:22] [INFO] [LastChance] Connected to player Died signal (C#)
+[12:53:22] [INFO] [Player] Detecting weapon pose (frame 3)...
+[12:53:22] [INFO] [Player] Detected weapon: Rifle (default pose)
+[12:53:22] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[12:53:23] [INFO] ------------------------------------------------------------
+[12:53:23] [INFO] GAME LOG ENDED: 2026-01-22T12:53:23
+[12:53:23] [INFO] ============================================================
diff --git a/docs/case-studies/issue-217/logs/game_log_20260122_134431.txt b/docs/case-studies/issue-217/logs/game_log_20260122_134431.txt
new file mode 100644
index 00000000..bdc6c579
--- /dev/null
+++ b/docs/case-studies/issue-217/logs/game_log_20260122_134431.txt
@@ -0,0 +1,300 @@
+[13:44:31] [INFO] ============================================================
+[13:44:31] [INFO] GAME LOG STARTED
+[13:44:31] [INFO] ============================================================
+[13:44:31] [INFO] Timestamp: 2026-01-22T13:44:31
+[13:44:31] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_134431.txt
+[13:44:31] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[13:44:31] [INFO] OS: Windows
+[13:44:31] [INFO] Debug build: false
+[13:44:31] [INFO] Engine version: 4.3-stable (official)
+[13:44:31] [INFO] Project: Godot Top-Down Template
+[13:44:31] [INFO] ------------------------------------------------------------
+[13:44:31] [INFO] [GameManager] GameManager ready
+[13:44:31] [INFO] [ScoreManager] ScoreManager ready
+[13:44:31] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[13:44:31] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[13:44:31] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[13:44:31] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[13:44:31] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[13:44:31] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[13:44:31] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[13:44:31] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[13:44:31] [INFO] [LastChance] Resetting all effects (scene change detected)
+[13:44:31] [INFO] [LastChance] Last chance shader loaded successfully
+[13:44:31] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[13:44:31] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[13:44:31] [INFO] [LastChance]   Sepia intensity: 0.70
+[13:44:31] [INFO] [LastChance]   Brightness: 0.60
+[13:44:31] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[13:44:31] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[13:44:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[13:44:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[13:44:31] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[13:44:31] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[13:44:31] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[13:44:31] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[13:44:31] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[13:44:31] [INFO] [ScoreManager] Level started with 10 enemies
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[13:44:31] [ENEMY] [Enemy1] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[13:44:31] [ENEMY] [Enemy2] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[13:44:31] [ENEMY] [Enemy3] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[13:44:31] [ENEMY] [Enemy4] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[13:44:31] [ENEMY] [Enemy5] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[13:44:31] [ENEMY] [Enemy6] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[13:44:31] [ENEMY] [Enemy7] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 3, behavior: PATROL, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[13:44:31] [ENEMY] [Enemy8] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[13:44:31] [ENEMY] [Enemy9] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[13:44:31] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[13:44:31] [ENEMY] [Enemy10] Registered as sound listener
+[13:44:31] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[13:44:31] [INFO] [Player] Detecting weapon pose (frame 3)...
+[13:44:31] [INFO] [Player] Detected weapon: Rifle (default pose)
+[13:44:31] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[13:44:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[13:44:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[13:44:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[13:44:31] [INFO] [LastChance] Found player: Player
+[13:44:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[13:44:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[13:44:31] [INFO] [LastChance] Connected to player Died signal (C#)
+[13:44:34] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[13:44:34] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[13:44:34] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[13:44:35] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[13:44:35] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[13:44:35] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:44:35] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[13:44:35] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[13:44:35] [ENEMY] [Enemy4] State: IDLE -> COMBAT
+[13:44:35] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[13:44:36] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[13:44:36] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[13:44:36] [ENEMY] [Enemy10] FLANKING started: target=(599.7478, 703.6628), side=right, pos=(1083.474, 1461.707)
+[13:44:36] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[13:44:37] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[13:44:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(724.4212, 553.2769), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[13:44:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[13:44:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(724.4212, 553.2769), shooter_id=43855644338, bullet_pos=(1050.3102, 39.597782)
+[13:44:38] [INFO] [Bullet] Using shooter_position, distance=608,3337
+[13:44:38] [INFO] [Bullet] Distance to wall: 608,3337 (41,42256% of viewport)
+[13:44:38] [INFO] [Bullet] Distance-based penetration chance: 98,34035%
+[13:44:38] [INFO] [Bullet] Starting wall penetration at (1050.3102, 39.597782)
+[13:44:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37,66891
+[13:44:38] [INFO] [Bullet] Body exited signal received for penetrating body
+[13:44:38] [INFO] [Bullet] Exiting penetration at (1075.3099, 0.19226456) after traveling 41,666676 pixels through wall
+[13:44:38] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[13:44:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(680.1254, 718.3966), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:44:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:38] [INFO] [LastChance] Threat detected: Bullet
+[13:44:38] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:38] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[13:44:38] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[13:44:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(680.1254, 718.3966), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:44:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:38] [INFO] [LastChance] Threat detected: Bullet
+[13:44:38] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:38] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[13:44:38] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[13:44:38] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[13:44:38] [INFO] [PenultimateHit]   - Time scale: 0.10
+[13:44:38] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[13:44:38] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[13:44:38] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[13:44:38] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[13:44:38] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[13:44:38] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[13:44:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(680.1254, 718.3966), source=ENEMY (Enemy3), range=1469, listeners=10
+[13:44:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:38] [INFO] [LastChance] Threat detected: Bullet
+[13:44:38] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:39] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[13:44:39] [INFO] [PenultimateHit] Ending penultimate hit effect
+[13:44:39] [INFO] [LastChance] Resetting all effects (scene change detected)
+[13:44:39] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[13:44:39] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[13:44:39] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[13:44:39] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[13:44:39] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[13:44:39] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[13:44:39] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[13:44:39] [INFO] [ScoreManager] Level started with 10 enemies
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[13:44:39] [ENEMY] [Enemy1] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[13:44:39] [ENEMY] [Enemy2] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[13:44:39] [ENEMY] [Enemy3] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[13:44:39] [ENEMY] [Enemy4] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[13:44:39] [ENEMY] [Enemy5] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[13:44:39] [ENEMY] [Enemy6] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[13:44:39] [ENEMY] [Enemy7] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[13:44:39] [ENEMY] [Enemy8] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[13:44:39] [ENEMY] [Enemy9] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[13:44:39] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[13:44:39] [ENEMY] [Enemy10] Registered as sound listener
+[13:44:39] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[13:44:39] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[13:44:39] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[13:44:39] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[13:44:39] [INFO] [LastChance] Found player: Player
+[13:44:39] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[13:44:39] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[13:44:39] [INFO] [LastChance] Connected to player Died signal (C#)
+[13:44:39] [INFO] [Player] Detecting weapon pose (frame 3)...
+[13:44:39] [INFO] [Player] Detected weapon: Rifle (default pose)
+[13:44:39] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[13:44:39] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[13:44:40] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:44:40] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[13:44:41] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[13:44:41] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[13:44:41] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[13:44:41] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[13:44:41] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[13:44:41] [ENEMY] [Enemy10] FLANKING started: target=(805.2064, 560.5539), side=left, pos=(1061.496, 1460.101)
+[13:44:41] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[13:44:42] [ENEMY] [Enemy4] State: IDLE -> COMBAT
+[13:44:42] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[13:44:43] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[13:44:43] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[13:44:44] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[13:44:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(739.9191, 683.1772), source=ENEMY (Enemy4), range=1469, listeners=20
+[13:44:44] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[13:44:44] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:44] [INFO] [LastChance] Threat detected: Bullet
+[13:44:44] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:44] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[13:44:44] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[13:44:44] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[13:44:44] [INFO] [PenultimateHit]   - Time scale: 0.10
+[13:44:44] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[13:44:44] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[13:44:44] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[13:44:44] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[13:44:44] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[13:44:44] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[13:44:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(726.4813, 660.1438), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:44:44] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:44] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[13:44:44] [INFO] [LastChance] Threat detected: Bullet
+[13:44:44] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[13:44:45] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[13:44:45] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[13:44:45] [INFO] [PenultimateHit] Ending penultimate hit effect
+[13:44:45] [INFO] [LastChance] Player died
+[13:44:45] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
+[13:44:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(726.4813, 660.1438), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:44:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:45] [INFO] [LastChance] Threat detected: Bullet
+[13:44:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:45] [ENEMY] [Enemy1] FLANKING started: target=(492.7919, 618.0549), side=left, pos=(457.1885, 441.6641)
+[13:44:45] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
+[13:44:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(726.4813, 660.1438), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:44:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:45] [INFO] [LastChance] Threat detected: Bullet
+[13:44:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(726.4813, 660.1438), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:44:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:45] [INFO] [LastChance] Threat detected: Bullet
+[13:44:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(726.4813, 660.1438), source=ENEMY (Enemy4), range=1469, listeners=10
+[13:44:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[13:44:45] [INFO] [LastChance] Threat detected: Bullet
+[13:44:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[13:44:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[13:44:45] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[13:44:46] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[13:44:46] [INFO] [LastChance] Resetting all effects (scene change detected)
+[13:44:46] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[13:44:46] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[13:44:46] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[13:44:46] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[13:44:46] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[13:44:46] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[13:44:46] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[13:44:46] [INFO] [ScoreManager] Level started with 10 enemies
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[13:44:46] [ENEMY] [Enemy1] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[13:44:46] [ENEMY] [Enemy2] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[13:44:46] [ENEMY] [Enemy3] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[13:44:46] [ENEMY] [Enemy4] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[13:44:46] [ENEMY] [Enemy5] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[13:44:46] [ENEMY] [Enemy6] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[13:44:46] [ENEMY] [Enemy7] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[13:44:46] [ENEMY] [Enemy8] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[13:44:46] [ENEMY] [Enemy9] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[13:44:46] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[13:44:46] [ENEMY] [Enemy10] Registered as sound listener
+[13:44:46] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[13:44:46] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[13:44:46] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[13:44:46] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[13:44:46] [INFO] [LastChance] Found player: Player
+[13:44:46] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[13:44:46] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[13:44:46] [INFO] [LastChance] Connected to player Died signal (C#)
+[13:44:46] [INFO] [Player] Detecting weapon pose (frame 3)...
+[13:44:46] [INFO] [Player] Detected weapon: Rifle (default pose)
+[13:44:46] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[13:44:51] [INFO] ------------------------------------------------------------
+[13:44:51] [INFO] GAME LOG ENDED: 2026-01-22T13:44:51
+[13:44:51] [INFO] ============================================================
diff --git a/docs/case-studies/issue-217/logs/game_log_20260122_140117.txt b/docs/case-studies/issue-217/logs/game_log_20260122_140117.txt
new file mode 100644
index 00000000..f5a72d53
--- /dev/null
+++ b/docs/case-studies/issue-217/logs/game_log_20260122_140117.txt
@@ -0,0 +1,1714 @@
+[14:01:17] [INFO] ============================================================
+[14:01:17] [INFO] GAME LOG STARTED
+[14:01:17] [INFO] ============================================================
+[14:01:17] [INFO] Timestamp: 2026-01-22T14:01:17
+[14:01:17] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_140117.txt
+[14:01:17] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[14:01:17] [INFO] OS: Windows
+[14:01:17] [INFO] Debug build: false
+[14:01:17] [INFO] Engine version: 4.3-stable (official)
+[14:01:17] [INFO] Project: Godot Top-Down Template
+[14:01:17] [INFO] ------------------------------------------------------------
+[14:01:17] [INFO] [GameManager] GameManager ready
+[14:01:17] [INFO] [ScoreManager] ScoreManager ready
+[14:01:17] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[14:01:17] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[14:01:17] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[14:01:17] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[14:01:17] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[14:01:17] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[14:01:17] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[14:01:17] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[14:01:17] [INFO] [LastChance] Resetting all effects (scene change detected)
+[14:01:17] [INFO] [LastChance] Last chance shader loaded successfully
+[14:01:17] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[14:01:17] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[14:01:17] [INFO] [LastChance]   Sepia intensity: 0.70
+[14:01:17] [INFO] [LastChance]   Brightness: 0.60
+[14:01:17] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[14:01:17] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[14:01:17] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[14:01:17] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[14:01:17] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[14:01:17] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[14:01:17] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[14:01:17] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[14:01:17] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[14:01:17] [INFO] [ScoreManager] Level started with 10 enemies
+[14:01:17] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[14:01:17] [ENEMY] [Enemy1] Registered as sound listener
+[14:01:17] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[14:01:17] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[14:01:17] [ENEMY] [Enemy2] Registered as sound listener
+[14:01:17] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[14:01:17] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[14:01:17] [ENEMY] [Enemy3] Registered as sound listener
+[14:01:17] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[14:01:17] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[14:01:17] [ENEMY] [Enemy4] Registered as sound listener
+[14:01:17] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[14:01:17] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[14:01:17] [ENEMY] [Enemy5] Registered as sound listener
+[14:01:17] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[14:01:17] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[14:01:17] [ENEMY] [Enemy6] Registered as sound listener
+[14:01:17] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[14:01:17] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[14:01:17] [ENEMY] [Enemy7] Registered as sound listener
+[14:01:17] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 3, behavior: PATROL, player_found: yes
+[14:01:17] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[14:01:17] [ENEMY] [Enemy8] Registered as sound listener
+[14:01:17] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[14:01:17] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[14:01:17] [ENEMY] [Enemy9] Registered as sound listener
+[14:01:17] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[14:01:17] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[14:01:17] [ENEMY] [Enemy10] Registered as sound listener
+[14:01:17] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[14:01:17] [INFO] [Player] Detecting weapon pose (frame 3)...
+[14:01:17] [INFO] [Player] Detected weapon: Rifle (default pose)
+[14:01:17] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[14:01:17] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[14:01:17] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[14:01:17] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[14:01:17] [INFO] [LastChance] Found player: Player
+[14:01:17] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[14:01:17] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[14:01:17] [INFO] [LastChance] Connected to player Died signal (C#)
+[14:01:21] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[14:01:22] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[14:01:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 768.4444), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[14:01:22] [ENEMY] [Enemy1] Heard gunshot at (450, 768.4444), source_type=0, intensity=0.01, distance=445
+[14:01:22] [ENEMY] [Enemy2] Heard gunshot at (450, 768.4444), source_type=0, intensity=0.05, distance=224
+[14:01:22] [ENEMY] [Enemy4] Heard gunshot at (450, 768.4444), source_type=0, intensity=0.02, distance=374
+[14:01:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[14:01:23] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[14:01:23] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
+[14:01:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(681.2406, 750.4148), source=ENEMY (Enemy3), range=1469, listeners=10
+[14:01:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[14:01:23] [INFO] [LastChance] Threat detected: Bullet
+[14:01:23] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:01:23] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:01:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(672.6377, 744.1086), source=ENEMY (Enemy3), range=1469, listeners=10
+[14:01:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[14:01:23] [INFO] [LastChance] Threat detected: @Area2D@286
+[14:01:23] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:01:23] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:01:23] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[14:01:23] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[14:01:23] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[14:01:23] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[14:01:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(618.4366, 728.2911), shooter_id=41037071882, bullet_pos=(51.80389, 722.0831)
+[14:01:23] [INFO] [Bullet] Using shooter_position, distance=566.666687011719
+[14:01:23] [INFO] [Bullet] Distance to wall: 566.666687011719 (38.5853767267834% of viewport)
+[14:01:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:23] [INFO] [Bullet] Starting wall penetration at (51.80389, 722.0831)
+[14:01:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18.5282535552979
+[14:01:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:23] [INFO] [Bullet] Exiting penetration at (13.47286, 721.6632) after traveling 33.3333358764648 pixels through wall
+[14:01:23] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[14:01:24] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[14:01:24] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[14:01:24] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[14:01:24] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[14:01:24] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[14:01:24] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[14:01:24] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[14:01:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(517.5146, 636.731), source=ENEMY (Enemy3), range=1469, listeners=10
+[14:01:24] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[14:01:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(493.7567, 700.4255), shooter_id=41037071882, bullet_pos=(493.7567, 700.4255)
+[14:01:24] [INFO] [Bullet] Using shooter_position, distance=0
+[14:01:24] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[14:01:24] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[14:01:24] [INFO] [Bullet] Starting wall penetration at (493.7567, 700.4255)
+[14:01:24] [INFO] [LastChance] Threat detected: Bullet
+[14:01:24] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:01:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:01:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.7108039855957
+[14:01:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:24] [INFO] [Bullet] Exiting penetration at (490.275, 738.6004) after traveling 33.3333358764648 pixels through wall
+[14:01:24] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[14:01:24] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[14:01:25] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[14:01:25] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[14:01:25] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[14:01:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(394.0321, 661.3087), source=ENEMY (Enemy3), range=1469, listeners=10
+[14:01:25] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[14:01:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(394.0321, 661.3087), source=ENEMY (Enemy3), range=1469, listeners=10
+[14:01:25] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[14:01:25] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[14:01:25] [INFO] [LastChance] Threat detected: @Area2D@288
+[14:01:25] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:01:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:01:25] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[14:01:25] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[14:01:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(459.0928, 675.8911), shooter_id=41037071882, bullet_pos=(921.5304, 738.5732)
+[14:01:25] [INFO] [Bullet] Using shooter_position, distance=466.666412353516
+[14:01:25] [INFO] [Bullet] Distance to wall: 466.666412353516 (31.7761741410158% of viewport)
+[14:01:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:25] [INFO] [Bullet] Starting wall penetration at (921.5304, 738.5732)
+[14:01:25] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.7314052581787
+[14:01:25] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:25] [INFO] [Bullet] Exiting penetration at (959.5164, 743.722) after traveling 33.3333358764648 pixels through wall
+[14:01:25] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[14:01:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(457.7, 675.0699), shooter_id=41037071882, bullet_pos=(914.086, 772.4855)
+[14:01:25] [INFO] [Bullet] Using shooter_position, distance=466.666839599609
+[14:01:25] [INFO] [Bullet] Distance to wall: 466.666839599609 (31.7762032329879% of viewport)
+[14:01:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:25] [INFO] [Bullet] Starting wall penetration at (914.086, 772.4855)
+[14:01:25] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15.925669670105
+[14:01:25] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:25] [INFO] [Bullet] Exiting penetration at (951.5748, 780.4875) after traveling 33.3333320617676 pixels through wall
+[14:01:25] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[14:01:26] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
+[14:01:26] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
+[14:01:26] [ENEMY] [Enemy10] FLANKING started: target=(925.405, 675.0721), side=left, pos=(1082.111, 1465.351)
+[14:01:26] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[14:01:27] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[14:01:27] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[14:01:27] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[14:01:27] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[14:01:27] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[14:01:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(538.2339, 646.5254), source=ENEMY (Enemy3), range=1469, listeners=10
+[14:01:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[14:01:28] [INFO] [LastChance] Threat detected: Bullet
+[14:01:28] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:01:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:01:28] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[14:01:28] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[14:01:28] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[14:01:28] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[14:01:28] [INFO] [PenultimateHit]   - Time scale: 0.10
+[14:01:28] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[14:01:28] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[14:01:28] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[14:01:28] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[14:01:28] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[14:01:28] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[14:01:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(538.2339, 646.5254), source=ENEMY (Enemy3), range=1469, listeners=10
+[14:01:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[14:01:28] [INFO] [LastChance] Threat detected: Bullet
+[14:01:28] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:01:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:01:29] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[14:01:29] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[14:01:29] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[14:01:29] [INFO] [PenultimateHit] Ending penultimate hit effect
+[14:01:29] [INFO] [LastChance] Player died
+[14:01:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(538.2339, 646.5254), source=ENEMY (Enemy3), range=1469, listeners=10
+[14:01:29] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[14:01:29] [INFO] [LastChance] Threat detected: Bullet
+[14:01:29] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:01:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:01:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(538.2339, 646.5254), source=ENEMY (Enemy3), range=1469, listeners=10
+[14:01:29] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
+[14:01:29] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[14:01:29] [INFO] [LastChance] Resetting all effects (scene change detected)
+[14:01:29] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[14:01:29] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[14:01:29] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[14:01:29] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[14:01:29] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[14:01:29] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[14:01:29] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[14:01:29] [INFO] [ScoreManager] Level started with 10 enemies
+[14:01:29] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[14:01:29] [ENEMY] [Enemy1] Registered as sound listener
+[14:01:29] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[14:01:29] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[14:01:29] [ENEMY] [Enemy2] Registered as sound listener
+[14:01:29] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[14:01:29] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[14:01:29] [ENEMY] [Enemy3] Registered as sound listener
+[14:01:29] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[14:01:29] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[14:01:29] [ENEMY] [Enemy4] Registered as sound listener
+[14:01:29] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[14:01:29] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[14:01:29] [ENEMY] [Enemy5] Registered as sound listener
+[14:01:29] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[14:01:29] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[14:01:29] [ENEMY] [Enemy6] Registered as sound listener
+[14:01:29] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[14:01:29] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[14:01:29] [ENEMY] [Enemy7] Registered as sound listener
+[14:01:29] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[14:01:29] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[14:01:29] [ENEMY] [Enemy8] Registered as sound listener
+[14:01:29] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[14:01:29] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[14:01:29] [ENEMY] [Enemy9] Registered as sound listener
+[14:01:29] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[14:01:29] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[14:01:29] [ENEMY] [Enemy10] Registered as sound listener
+[14:01:29] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[14:01:29] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[14:01:29] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[14:01:29] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[14:01:29] [INFO] [LastChance] Found player: Player
+[14:01:29] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[14:01:29] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[14:01:29] [INFO] [LastChance] Connected to player Died signal (C#)
+[14:01:29] [INFO] [Player] Detecting weapon pose (frame 3)...
+[14:01:29] [INFO] [Player] Detected weapon: Rifle (default pose)
+[14:01:29] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[14:01:29] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[14:01:30] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[14:01:31] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[14:01:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(481.8258, 751.5884), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[14:01:31] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[14:01:31] [ENEMY] [Enemy1] Heard gunshot at (481.8258, 751.5884), source_type=0, intensity=0.01, distance=441
+[14:01:31] [ENEMY] [Enemy2] Heard gunshot at (481.8258, 751.5884), source_type=0, intensity=0.05, distance=218
+[14:01:31] [ENEMY] [Enemy4] Heard gunshot at (481.8258, 751.5884), source_type=0, intensity=0.02, distance=351
+[14:01:31] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[14:01:31] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[14:01:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(506.7559, 735.0218), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[14:01:31] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[14:01:31] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[14:01:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(521.7092, 725.3207), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[14:01:31] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[14:01:31] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[14:01:31] [ENEMY] [Enemy3] Hit taken, health: 0/3
+[14:01:31] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[14:01:31] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[14:01:31] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[14:01:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(527.1174, 721.8121), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[14:01:31] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[14:01:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(527.1223, 721.8089), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[14:01:31] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[14:01:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(527.1174, 721.8121), shooter_id=178694130515, bullet_pos=(913.66895, 784.90594)
+[14:01:31] [INFO] [Bullet] Using shooter_position, distance=391,6669
+[14:01:31] [INFO] [Bullet] Distance to wall: 391,6669 (26,669321% of viewport)
+[14:01:31] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:31] [INFO] [Bullet] Starting wall penetration at (913.66895, 784.90594)
+[14:01:31] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15,706784
+[14:01:31] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:31] [INFO] [Bullet] Exiting penetration at (951.50165, 791.0811) after traveling 33,333336 pixels through wall
+[14:01:31] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:01:31] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[14:01:31] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[14:01:31] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[14:01:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(527.12225, 721.8089), shooter_id=178694130515, bullet_pos=(915.50336, 772.4334)
+[14:01:31] [INFO] [Bullet] Using shooter_position, distance=391,6666
+[14:01:31] [INFO] [Bullet] Distance to wall: 391,6666 (26,6693% of viewport)
+[14:01:31] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:31] [INFO] [Bullet] Starting wall penetration at (915.50336, 772.4334)
+[14:01:31] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[14:01:31] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17,66331
+[14:01:31] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:31] [INFO] [Bullet] Exiting penetration at (953.51514, 777.3881) after traveling 33,333336 pixels through wall
+[14:01:31] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:01:32] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[14:01:32] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[14:01:32] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[14:01:32] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[14:01:32] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[14:01:32] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[14:01:33] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[14:01:33] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[14:01:33] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[14:01:34] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[14:01:34] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[14:01:34] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[14:01:34] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[14:01:34] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[14:01:34] [ENEMY] [Enemy10] FLANKING started: target=(1078.539, 929.2885), side=left, pos=(955.1431, 1418.083)
+[14:01:34] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[14:01:35] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[14:01:35] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
+[14:01:35] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
+[14:01:35] [ENEMY] [Enemy2] FLANKING started: target=(662.1219, 1023.636), side=left, pos=(456.7956, 566.5663)
+[14:01:35] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
+[14:01:36] [ENEMY] [Enemy2] State: FLANKING -> COMBAT
+[14:01:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(679.9937, 979.853), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[14:01:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[14:01:36] [ENEMY] [Enemy4] Hit taken, health: 2/3
+[14:01:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(645.8604, 979.853), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[14:01:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[14:01:36] [ENEMY] [Enemy4] Hit taken, health: 1/3
+[14:01:36] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[14:01:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(621.327, 979.853), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[14:01:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[14:01:36] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[14:01:36] [ENEMY] [Enemy4] Hit taken, health: 0/3
+[14:01:36] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[14:01:36] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[14:01:36] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[14:01:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(608.1714, 979.853), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[14:01:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(574.8979, 738.7187), source=ENEMY (Enemy2), range=1469, listeners=8
+[14:01:36] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[14:01:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(605.727, 979.853), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=4
+[14:01:36] [INFO] [LastChance] Threat detected: @Area2D@550
+[14:01:36] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:01:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:01:36] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[14:01:36] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[14:01:36] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[14:01:36] [INFO] [PenultimateHit]   - Time scale: 0.10
+[14:01:36] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[14:01:36] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[14:01:36] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[14:01:36] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[14:01:36] [INFO] [PenultimateHit] Applying saturation to 9 enemies
+[14:01:36] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[14:01:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(574.8979, 738.7187), source=ENEMY (Enemy2), range=1469, listeners=8
+[14:01:36] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[14:01:37] [INFO] [LastChance] Threat detected: @Area2D@552
+[14:01:37] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:01:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:01:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(605.727, 979.853), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=4
+[14:01:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[14:01:37] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[14:01:37] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[14:01:37] [INFO] [PenultimateHit] Ending penultimate hit effect
+[14:01:37] [INFO] [LastChance] Player died
+[14:01:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(574.8979, 738.7187), source=ENEMY (Enemy2), range=1469, listeners=8
+[14:01:37] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[14:01:37] [INFO] [LastChance] Threat detected: @Area2D@554
+[14:01:37] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:01:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:01:37] [ENEMY] [Enemy2] Hit taken, health: 1/2
+[14:01:37] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[14:01:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(612.727, 979.853), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=4
+[14:01:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(608.17145, 979.85297), shooter_id=178694130515, bullet_pos=(989.82495, 55.548496)
+[14:01:37] [INFO] [Bullet] Using shooter_position, distance=999,999
+[14:01:37] [INFO] [Bullet] Distance to wall: 999,999 (68,091774% of viewport)
+[14:01:37] [INFO] [Bullet] Distance-based penetration chance: 67,226265%
+[14:01:37] [INFO] [Bullet] Penetration failed (distance roll)
+[14:01:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(566.9226, 739.3456), source=ENEMY (Enemy2), range=1469, listeners=8
+[14:01:37] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[14:01:37] [INFO] [LastChance] Threat detected: Bullet
+[14:01:37] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:01:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:01:37] [ENEMY] [Enemy2] Hit taken, health: 0/2
+[14:01:37] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[14:01:37] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[14:01:37] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
+[14:01:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(605.727, 979.85297), shooter_id=178694130515, bullet_pos=(906.9032, 43.77664)
+[14:01:37] [INFO] [Bullet] Using shooter_position, distance=983,3341
+[14:01:37] [INFO] [Bullet] Distance to wall: 983,3341 (66,95702% of viewport)
+[14:01:37] [INFO] [Bullet] Distance-based penetration chance: 68,55013%
+[14:01:37] [INFO] [Bullet] Starting wall penetration at (906.9032, 43.77664)
+[14:01:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(636.0603, 979.853), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[14:01:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=4
+[14:01:37] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34,29549
+[14:01:37] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:37] [INFO] [Bullet] Exiting penetration at (921.1962, -0.6472969) after traveling 41,66667 pixels through wall
+[14:01:37] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:01:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.0603, 979.853), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[14:01:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=4
+[14:01:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.0603, 979.85297), shooter_id=178694130515, bullet_pos=(521.87494, 510.20093)
+[14:01:38] [INFO] [Bullet] Using shooter_position, distance=483,33356
+[14:01:38] [INFO] [Bullet] Distance to wall: 483,33356 (32,91107% of viewport)
+[14:01:38] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(711.5603, 979.853), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[14:01:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=4
+[14:01:38] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[14:01:38] [INFO] [LastChance] Resetting all effects (scene change detected)
+[14:01:38] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[14:01:38] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[14:01:38] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[14:01:38] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[14:01:38] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[14:01:38] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[14:01:38] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[14:01:38] [INFO] [ScoreManager] Level started with 10 enemies
+[14:01:38] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 8)
+[14:01:38] [ENEMY] [Enemy1] Registered as sound listener
+[14:01:38] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[14:01:38] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 9)
+[14:01:38] [ENEMY] [Enemy2] Registered as sound listener
+[14:01:38] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[14:01:38] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 10)
+[14:01:38] [ENEMY] [Enemy3] Registered as sound listener
+[14:01:38] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[14:01:38] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 11)
+[14:01:38] [ENEMY] [Enemy4] Registered as sound listener
+[14:01:38] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[14:01:38] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 12)
+[14:01:38] [ENEMY] [Enemy5] Registered as sound listener
+[14:01:38] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[14:01:38] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 13)
+[14:01:38] [ENEMY] [Enemy6] Registered as sound listener
+[14:01:38] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[14:01:38] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 14)
+[14:01:38] [ENEMY] [Enemy7] Registered as sound listener
+[14:01:38] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[14:01:38] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 15)
+[14:01:38] [ENEMY] [Enemy8] Registered as sound listener
+[14:01:38] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[14:01:38] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 16)
+[14:01:38] [ENEMY] [Enemy9] Registered as sound listener
+[14:01:38] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[14:01:38] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 17)
+[14:01:38] [ENEMY] [Enemy10] Registered as sound listener
+[14:01:38] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[14:01:38] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[14:01:38] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[14:01:38] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[14:01:38] [INFO] [LastChance] Found player: Player
+[14:01:38] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[14:01:38] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[14:01:38] [INFO] [LastChance] Connected to player Died signal (C#)
+[14:01:38] [INFO] [Player] Detecting weapon pose (frame 3)...
+[14:01:38] [INFO] [Player] Detected weapon: Rifle (default pose)
+[14:01:38] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[14:01:38] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[14:01:39] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[14:01:40] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[14:01:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(429.4494, 773.6253), source=PLAYER (AssaultRifle), range=1469, listeners=17
+[14:01:40] [INFO] [SoundPropagation] Cleaned up 7 invalid listeners
+[14:01:40] [ENEMY] [Enemy1] Heard gunshot at (429.4494, 773.6253), source_type=0, intensity=0.01, distance=443
+[14:01:40] [ENEMY] [Enemy2] Heard gunshot at (429.4494, 773.6253), source_type=0, intensity=0.05, distance=226
+[14:01:40] [ENEMY] [Enemy4] Heard gunshot at (429.4494, 773.6253), source_type=0, intensity=0.02, distance=392
+[14:01:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[14:01:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(443.3016, 747.1568), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[14:01:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[14:01:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(429.4494, 773.6253), shooter_id=334588021678, bullet_pos=(744.3967, 806.5784)
+[14:01:40] [INFO] [Bullet] Using shooter_position, distance=316,6666
+[14:01:40] [INFO] [Bullet] Distance to wall: 316,6666 (21,56241% of viewport)
+[14:01:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:40] [INFO] [Bullet] Starting wall penetration at (744.3967, 806.5784)
+[14:01:40] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[14:01:40] [INFO] [Bullet] Exiting penetration at (790.81, 811.4347) after traveling 41,666668 pixels through wall
+[14:01:40] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:01:40] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[14:01:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(467.4664, 734.0663), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[14:01:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[14:01:40] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[14:01:40] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[14:01:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(665.0266, 747.7174), source=ENEMY (Enemy3), range=1469, listeners=10
+[14:01:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[14:01:40] [INFO] [LastChance] Threat detected: Bullet
+[14:01:40] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:01:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:01:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(500.9277, 734.0663), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[14:01:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[14:01:40] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[14:01:40] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[14:01:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(659.6625, 738.4977), source=ENEMY (Enemy3), range=1469, listeners=10
+[14:01:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[14:01:40] [INFO] [LastChance] Threat detected: Bullet
+[14:01:40] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:01:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:01:40] [ENEMY] [Enemy3] Hit taken, health: 0/3
+[14:01:40] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[14:01:40] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[14:01:40] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[14:01:40] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[14:01:40] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[14:01:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(536.1279, 734.0663), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[14:01:40] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[14:01:40] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[14:01:40] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[14:01:40] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[14:01:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(571.3281, 734.0663), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[14:01:40] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[14:01:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(536.12787, 734.06635), shooter_id=334588021678, bullet_pos=(920.949, 806.9753)
+[14:01:40] [INFO] [Bullet] Using shooter_position, distance=391,66696
+[14:01:40] [INFO] [Bullet] Distance to wall: 391,66696 (26,669323% of viewport)
+[14:01:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:40] [INFO] [Bullet] Starting wall penetration at (920.949, 806.9753)
+[14:01:40] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23,014572
+[14:01:40] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:40] [INFO] [Bullet] Exiting penetration at (958.6123, 814.111) after traveling 33,333332 pixels through wall
+[14:01:40] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:01:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(571.32806, 734.06635), shooter_id=334588021678, bullet_pos=(918.5464, 822.6233)
+[14:01:41] [INFO] [Bullet] Using shooter_position, distance=358,3335
+[14:01:41] [INFO] [Bullet] Distance to wall: 358,3335 (24,399588% of viewport)
+[14:01:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:41] [INFO] [Bullet] Starting wall penetration at (918.5464, 822.6233)
+[14:01:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20,32101
+[14:01:41] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:41] [INFO] [Bullet] Exiting penetration at (955.6907, 832.0968) after traveling 33,333332 pixels through wall
+[14:01:41] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:01:42] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[14:01:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(464.8368, 647.4814), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[14:01:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[14:01:42] [ENEMY] [Enemy2] Hit taken, health: 3/4
+[14:01:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(429.6368, 647.4814), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[14:01:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[14:01:42] [ENEMY] [Enemy2] Hit taken, health: 2/4
+[14:01:42] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[14:01:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(394.4369, 647.4814), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[14:01:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[14:01:42] [ENEMY] [Enemy2] Hit taken, health: 1/4
+[14:01:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(408.4639, 548.913), source=ENEMY (Enemy2), range=1469, listeners=9
+[14:01:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
+[14:01:43] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[14:01:43] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[14:01:43] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[14:01:43] [INFO] [PenultimateHit]   - Time scale: 0.10
+[14:01:43] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[14:01:43] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[14:01:43] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[14:01:43] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[14:01:43] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[14:01:43] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[14:01:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(365.287, 647.4814), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[14:01:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[14:01:43] [ENEMY] [Enemy10] FLANKING started: target=(560.29, 615.4828), side=left, pos=(955.9118, 1416.362)
+[14:01:43] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[14:01:43] [ENEMY] [Enemy2] Hit taken, health: 0/4
+[14:01:43] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[14:01:43] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[14:01:43] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 8)
+[14:01:43] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[14:01:44] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
+[14:01:44] [ENEMY] [Enemy1] Player reloading state changed: false -> true
+[14:01:44] [ENEMY] [Enemy2] Player reloading state changed: false -> true
+[14:01:44] [ENEMY] [Enemy4] Player reloading state changed: false -> true
+[14:01:44] [ENEMY] [Enemy5] Player reloading state changed: false -> true
+[14:01:44] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[14:01:44] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[14:01:44] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[14:01:44] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[14:01:44] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[14:01:44] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(329.0203, 640.4926), source=PLAYER (Player), range=900, listeners=8
+[14:01:44] [ENEMY] [Enemy1] Heard player RELOAD at (329.0203, 640.4926), intensity=0.04, distance=245
+[14:01:44] [ENEMY] [Enemy4] Heard player RELOAD at (329.0203, 640.4926), intensity=0.02, distance=380
+[14:01:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=6, self=0, below_threshold=0
+[14:01:44] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=true (dist=380), can_see=false
+[14:01:44] [ENEMY] [Enemy4] Pursuing vulnerability sound at (329.0203, 640.4926), distance=380
+[14:01:44] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1401), can_see=false
+[14:01:44] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1632), can_see=false
+[14:01:44] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1307), can_see=false
+[14:01:44] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1767), can_see=false
+[14:01:44] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1991), can_see=false
+[14:01:44] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=967), can_see=false
+[14:01:44] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
+[14:01:44] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
+[14:01:44] [ENEMY] [Enemy1] Player reloading state changed: true -> false
+[14:01:44] [ENEMY] [Enemy2] Player reloading state changed: true -> false
+[14:01:44] [ENEMY] [Enemy4] Player reloading state changed: true -> false
+[14:01:44] [ENEMY] [Enemy5] Player reloading state changed: true -> false
+[14:01:44] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[14:01:44] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[14:01:44] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[14:01:44] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[14:01:44] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[14:01:44] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
+[14:01:44] [INFO] [Player.Reload.Anim] LeftArm: pos=(17.793978, 5.4338593), target=(24, 6), base=(24, 6)
+[14:01:44] [INFO] [Player.Reload.Anim] RightArm: pos=(-1.090258, 6.4109287), target=(-2, 6), base=(-2, 6)
+[14:01:45] [ENEMY] [Enemy4] Pursuing vulnerability sound at (329.0203, 640.4926), distance=351
+[14:01:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(300.9739, 636.6266), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[14:01:45] [INFO] [Player.Reload.Anim] LeftArm: pos=(22.641403, 5.8760633), target=(24, 6), base=(24, 6)
+[14:01:45] [INFO] [Player.Reload.Anim] RightArm: pos=(-1.8008434, 6.089959), target=(-2, 6), base=(-2, 6)
+[14:01:46] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
+[14:01:46] [INFO] [PenultimateHit] Ending penultimate hit effect
+[14:01:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(274.7768, 626.5128), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[14:01:46] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
+[14:01:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(248.2395, 633.4457), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=2
+[14:01:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(300.9739, 636.6266), shooter_id=334588021678, bullet_pos=(476.34488, 49.76909)
+[14:01:46] [INFO] [Bullet] Using shooter_position, distance=612,50037
+[14:01:46] [INFO] [Bullet] Distance to wall: 612,50037 (41,70628% of viewport)
+[14:01:46] [INFO] [Bullet] Distance-based penetration chance: 98,00934%
+[14:01:46] [INFO] [Bullet] Starting wall penetration at (476.34488, 49.76909)
+[14:01:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28,121153
+[14:01:46] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:46] [INFO] [Bullet] Exiting penetration at (489.7065, 5.0561714) after traveling 41,66667 pixels through wall
+[14:01:46] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:01:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(248.23947, 633.4457), shooter_id=334588021678, bullet_pos=(336.37997, 463.24768)
+[14:01:46] [INFO] [Bullet] Using shooter_position, distance=191,66666
+[14:01:46] [INFO] [Bullet] Distance to wall: 191,66666 (13,050936% of viewport)
+[14:01:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:46] [ENEMY] [Enemy4] Pursuing vulnerability sound at (329.0203, 640.4926), distance=267
+[14:01:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(221.168, 656.1703), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=2
+[14:01:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(274.77676, 626.51276), shooter_id=334588021678, bullet_pos=(532.8871, 29.956635)
+[14:01:46] [INFO] [Bullet] Using shooter_position, distance=650,0001
+[14:01:46] [INFO] [Bullet] Distance to wall: 650,0001 (44,259705% of viewport)
+[14:01:46] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[14:01:46] [ENEMY] [Enemy1] Pursuing vulnerability sound at (329.0203, 640.4926), distance=251
+[14:01:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(221.16803, 656.1703), shooter_id=334588021678, bullet_pos=(338.9632, 454.75348)
+[14:01:46] [INFO] [Bullet] Using shooter_position, distance=233,3333
+[14:01:46] [INFO] [Bullet] Distance to wall: 233,3333 (15,888093% of viewport)
+[14:01:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(248.23947, 633.4457), shooter_id=334588021678, bullet_pos=(484.0752, 710.8808)
+[14:01:46] [INFO] [Bullet] Using shooter_position, distance=248,22305
+[14:01:46] [INFO] [Bullet] Distance to wall: 248,22305 (16,901964% of viewport)
+[14:01:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:46] [ENEMY] [Enemy4] Hit taken, health: 1/2
+[14:01:46] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[14:01:46] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[14:01:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(533.5969, 669.3354), source=ENEMY (Enemy4), range=1469, listeners=8
+[14:01:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[14:01:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(95.34384, 678.6869), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=1
+[14:01:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(539.6491, 678.1185), source=ENEMY (Enemy4), range=1469, listeners=8
+[14:01:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[14:01:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(95.34384, 678.6869), shooter_id=334588021678, bullet_pos=(220.15857, 685.4902)
+[14:01:46] [INFO] [Bullet] Using shooter_position, distance=125
+[14:01:46] [INFO] [Bullet] Distance to wall: 125 (8,51148% of viewport)
+[14:01:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:46] [INFO] [Bullet] Starting wall penetration at (220.15857, 685.4902)
+[14:01:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(577.657, 721.088), shooter_id=332054660761, bullet_pos=(690.2345, 843.9869)
+[14:01:46] [INFO] [Bullet] Using shooter_position, distance=166.66682434082
+[14:01:46] [INFO] [Bullet] Distance to wall: 166.66682434082 (11.3486505426323% of viewport)
+[14:01:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:46] [INFO] [Bullet] Raycast forward hit penetrating body at distance 7,7803006
+[14:01:46] [INFO] [Bullet] Max penetration distance exceeded: 66,66667 >= 48
+[14:01:46] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:46] [INFO] [Bullet] Exiting penetration at (291.71902, 689.39075) after traveling 66,66667 pixels through wall
+[14:01:46] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:01:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(544.1682, 687.7759), source=ENEMY (Enemy4), range=1469, listeners=8
+[14:01:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[14:01:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.062, 678.536), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=1
+[14:01:46] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[14:01:46] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[14:01:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(468.7733, 670.2317), shooter_id=332054660761, bullet_pos=(235.9466, 685.601)
+[14:01:46] [INFO] [Bullet] Using shooter_position, distance=233.333404541016
+[14:01:46] [INFO] [Bullet] Distance to wall: 233.333404541016 (15.888100577495% of viewport)
+[14:01:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:46] [INFO] [Bullet] Starting wall penetration at (235.9466, 685.601)
+[14:01:46] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[14:01:46] [INFO] [Bullet] Exiting penetration at (197.6966, 688.126) after traveling 33.3333358764648 pixels through wall
+[14:01:46] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[14:01:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(577.657, 721.088), shooter_id=332054660761, bullet_pos=(528.9583, 1010.298)
+[14:01:46] [INFO] [Bullet] Using shooter_position, distance=293.281494140625
+[14:01:46] [INFO] [Bullet] Distance to wall: 293.281494140625 (19.9700762331489% of viewport)
+[14:01:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(577.657, 721.088), shooter_id=332054660761, bullet_pos=(509.4113, 988.7631)
+[14:01:47] [INFO] [Bullet] Using shooter_position, distance=276.238006591797
+[14:01:47] [INFO] [Bullet] Distance to wall: 276.238006591797 (18.8095538257391% of viewport)
+[14:01:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(577.657, 721.088), shooter_id=332054660761, bullet_pos=(506.4354, 992.7811)
+[14:01:47] [INFO] [Bullet] Using shooter_position, distance=280.872985839844
+[14:01:47] [INFO] [Bullet] Distance to wall: 280.872985839844 (19.1251580857139% of viewport)
+[14:01:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(554.7568, 689.0605), source=ENEMY (Enemy4), range=1469, listeners=8
+[14:01:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
+[14:01:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(479.6692, 684.4199), shooter_id=332054660761, bullet_pos=(479.6692, 684.4199)
+[14:01:47] [INFO] [Bullet] Using shooter_position, distance=0
+[14:01:47] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[14:01:47] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[14:01:47] [INFO] [Bullet] Starting wall penetration at (479.6692, 684.4199)
+[14:01:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(577.657, 721.088), shooter_id=332054660761, bullet_pos=(516.8471, 1012.615)
+[14:01:47] [INFO] [Bullet] Using shooter_position, distance=297.801177978516
+[14:01:47] [INFO] [Bullet] Distance to wall: 297.801177978516 (20.2778298166366% of viewport)
+[14:01:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:47] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[14:01:47] [INFO] [Bullet] Exiting penetration at (442.0043, 677.2924) after traveling 33.3333320617676 pixels through wall
+[14:01:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[14:01:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.0649, 672.3887), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=1
+[14:01:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(470.6637, 680.5244), shooter_id=332054660761, bullet_pos=(42.27855, 615.226)
+[14:01:47] [INFO] [Bullet] Using shooter_position, distance=433.333251953125
+[14:01:47] [INFO] [Bullet] Distance to wall: 433.333251953125 (29.506457955076% of viewport)
+[14:01:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:47] [INFO] [Bullet] Starting wall penetration at (42.27855, 615.226)
+[14:01:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.936056137085
+[14:01:47] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:47] [INFO] [Bullet] Exiting penetration at (4.382938, 609.4496) after traveling 33.3333358764648 pixels through wall
+[14:01:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[14:01:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.06492, 659.125), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=2
+[14:01:47] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[14:01:47] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[14:01:47] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[14:01:47] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[14:01:47] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[14:01:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.06581, 640.1221), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=2
+[14:01:47] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[14:01:47] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[14:01:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.0649, 672.38873), shooter_id=334588021678, bullet_pos=(938.2374, 689.0043)
+[14:01:47] [INFO] [Bullet] Using shooter_position, distance=858,3334
+[14:01:47] [INFO] [Bullet] Distance to wall: 858,3334 (58,445503% of viewport)
+[14:01:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(577.657, 721.088), shooter_id=332054660761, bullet_pos=(311.7421, 1394.994)
+[14:01:47] [INFO] [Bullet] Using shooter_position, distance=724.472351074219
+[14:01:47] [INFO] [Bullet] Distance to wall: 724.472351074219 (49.3306545718279% of viewport)
+[14:01:47] [INFO] [Bullet] Distance-based penetration chance: 89.1142363328674%
+[14:01:47] [INFO] [Bullet] Starting wall penetration at (311.7421, 1394.994)
+[14:01:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(607.6437, 724.9361), source=ENEMY (Enemy4), range=1469, listeners=8
+[14:01:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[14:01:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 0.49230375885963
+[14:01:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15.2824926376343
+[14:01:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(534.2435, 708.116), shooter_id=332054660761, bullet_pos=(500.9233, 709.0524)
+[14:01:47] [INFO] [Bullet] Using shooter_position, distance=33.3333435058594
+[14:01:47] [INFO] [Bullet] Distance to wall: 33.3333435058594 (2.26972865392785% of viewport)
+[14:01:47] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[14:01:47] [INFO] [Bullet] Starting wall penetration at (500.9233, 709.0524)
+[14:01:47] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:47] [INFO] [Bullet] Exiting penetration at (295.3965, 1425.467) after traveling 29.580358505249 pixels through wall
+[14:01:47] [INFO] [Bullet] Damage multiplier after penetration: 0.028125
+[14:01:47] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[14:01:47] [INFO] [Bullet] Exiting penetration at (462.6051, 710.1292) after traveling 33.3333396911621 pixels through wall
+[14:01:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[14:01:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(607.6437, 724.9361), source=ENEMY (Enemy4), range=1469, listeners=8
+[14:01:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[14:01:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(535.2846, 703.7526), shooter_id=332054660761, bullet_pos=(502.4271, 698.1406)
+[14:01:47] [INFO] [Bullet] Using shooter_position, distance=33.3333473205566
+[14:01:47] [INFO] [Bullet] Distance to wall: 33.3333473205566 (2.2697289136776% of viewport)
+[14:01:47] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[14:01:47] [INFO] [Bullet] Starting wall penetration at (502.4271, 698.1406)
+[14:01:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.06492, 659.125), shooter_id=334588021678, bullet_pos=(937.91406, 687.94916)
+[14:01:47] [INFO] [Bullet] Using shooter_position, distance=858,33325
+[14:01:47] [INFO] [Bullet] Distance to wall: 858,33325 (58,445488% of viewport)
+[14:01:47] [INFO] [Bullet] Distance-based penetration chance: 78,48026%
+[14:01:47] [INFO] [Bullet] Penetration failed (distance roll)
+[14:01:47] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[14:01:47] [INFO] [Bullet] Exiting penetration at (464.6409, 691.6869) after traveling 33.3333358764648 pixels through wall
+[14:01:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[14:01:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(607.6437, 724.9361), source=ENEMY (Enemy4), range=1469, listeners=8
+[14:01:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=3
+[14:01:47] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[14:01:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.06581, 640.12213), shooter_id=334588021678, bullet_pos=(937.1241, 686.8867)
+[14:01:47] [INFO] [Bullet] Using shooter_position, distance=858,3332
+[14:01:47] [INFO] [Bullet] Distance to wall: 858,3332 (58,445488% of viewport)
+[14:01:47] [INFO] [Bullet] Distance-based penetration chance: 78,48026%
+[14:01:47] [INFO] [Bullet] Starting wall penetration at (937.1241, 686.8867)
+[14:01:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39,459064
+[14:01:47] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:47] [INFO] [Bullet] Exiting penetration at (975.40045, 688.9752) after traveling 33,333336 pixels through wall
+[14:01:47] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:01:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.06581, 640.12213), shooter_id=334588021678, bullet_pos=(975.40045, 688.9752)
+[14:01:47] [INFO] [Bullet] Using shooter_position, distance=896,66644
+[14:01:47] [INFO] [Bullet] Distance to wall: 896,66644 (61,055668% of viewport)
+[14:01:47] [INFO] [Bullet] Distance-based penetration chance: 75,43506%
+[14:01:47] [INFO] [Bullet] Starting wall penetration at (975.40045, 688.9752)
+[14:01:47] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[14:01:47] [INFO] [Bullet] Exiting penetration at (1013.6768, 691.0637) after traveling 33,333336 pixels through wall
+[14:01:47] [INFO] [LastChance] Threat detected: Bullet
+[14:01:47] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:01:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:01:47] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[14:01:47] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[14:01:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(536.8236, 699.6151), shooter_id=332054660761, bullet_pos=(42.88318, 498.4501)
+[14:01:47] [INFO] [Bullet] Using shooter_position, distance=533.333374023438
+[14:01:47] [INFO] [Bullet] Distance to wall: 533.333374023438 (36.3156501508536% of viewport)
+[14:01:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:47] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[14:01:47] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[14:01:47] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[14:01:47] [INFO] [LastChance] Player died
+[14:01:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(621.8731, 769.6605), source=ENEMY (Enemy4), range=1469, listeners=8
+[14:01:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=4
+[14:01:48] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[14:01:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(556.4337, 732.2655), shooter_id=332054660761, bullet_pos=(492.0835, 714.8446)
+[14:01:48] [INFO] [Bullet] Using shooter_position, distance=66.6666488647461
+[14:01:48] [INFO] [Bullet] Distance to wall: 66.6666488647461 (4.53945471035819% of viewport)
+[14:01:48] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[14:01:48] [INFO] [Bullet] Starting wall penetration at (492.0835, 714.8446)
+[14:01:48] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[14:01:48] [INFO] [Bullet] Exiting penetration at (455.0821, 704.8276) after traveling 33.3333358764648 pixels through wall
+[14:01:48] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[14:01:48] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[14:01:48] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[14:01:48] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[14:01:48] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[14:01:48] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[14:01:48] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[14:01:48] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[14:01:48] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[14:01:48] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[14:01:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.07583, 389.2469), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:48] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=2
+[14:01:48] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[14:01:48] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[14:01:48] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[14:01:48] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[14:01:48] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[14:01:48] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[14:01:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(83.03225, 355.2715), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:48] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=2
+[14:01:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.07583, 389.2469), shooter_id=334588021678, bullet_pos=(504.06198, 418.5842)
+[14:01:48] [INFO] [Bullet] Using shooter_position, distance=424,9999
+[14:01:48] [INFO] [Bullet] Distance to wall: 424,9999 (28,939026% of viewport)
+[14:01:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:48] [INFO] [Bullet] Starting wall penetration at (504.06198, 418.5842)
+[14:01:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18,347658
+[14:01:48] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:48] [INFO] [Bullet] Exiting penetration at (542.3039, 421.23032) after traveling 33,333332 pixels through wall
+[14:01:48] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:01:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(98.01141, 326.2761), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:48] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=2
+[14:01:48] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[14:01:48] [INFO] [LastChance] Resetting all effects (scene change detected)
+[14:01:48] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[14:01:48] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[14:01:48] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[14:01:48] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[14:01:48] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[14:01:48] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[14:01:48] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[14:01:48] [INFO] [ScoreManager] Level started with 10 enemies
+[14:01:48] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
+[14:01:48] [ENEMY] [Enemy1] Registered as sound listener
+[14:01:48] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[14:01:48] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
+[14:01:48] [ENEMY] [Enemy2] Registered as sound listener
+[14:01:48] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[14:01:48] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
+[14:01:48] [ENEMY] [Enemy3] Registered as sound listener
+[14:01:48] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[14:01:48] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
+[14:01:48] [ENEMY] [Enemy4] Registered as sound listener
+[14:01:48] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[14:01:48] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
+[14:01:48] [ENEMY] [Enemy5] Registered as sound listener
+[14:01:48] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[14:01:48] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
+[14:01:48] [ENEMY] [Enemy6] Registered as sound listener
+[14:01:48] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[14:01:48] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
+[14:01:48] [ENEMY] [Enemy7] Registered as sound listener
+[14:01:48] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[14:01:48] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
+[14:01:48] [ENEMY] [Enemy8] Registered as sound listener
+[14:01:48] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[14:01:48] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
+[14:01:48] [ENEMY] [Enemy9] Registered as sound listener
+[14:01:48] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[14:01:48] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
+[14:01:48] [ENEMY] [Enemy10] Registered as sound listener
+[14:01:48] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[14:01:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.2357, 1255.764), source=PLAYER (AssaultRifle), range=1469, listeners=18
+[14:01:48] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
+[14:01:48] [ENEMY] [Enemy4] Heard gunshot at (450.2357, 1255.764), source_type=0, intensity=0.01, distance=499
+[14:01:48] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[14:01:48] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[14:01:48] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[14:01:48] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[14:01:48] [INFO] [LastChance] Found player: Player
+[14:01:48] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[14:01:48] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[14:01:48] [INFO] [LastChance] Connected to player Died signal (C#)
+[14:01:48] [INFO] [Player] Detecting weapon pose (frame 3)...
+[14:01:48] [INFO] [Player] Detected weapon: Rifle (default pose)
+[14:01:48] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[14:01:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(454.9497, 1251.05), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[14:01:48] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[14:01:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(474.7487, 1231.251), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[14:01:48] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[14:01:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(454.9497, 1251.0503), shooter_id=474795214193, bullet_pos=(384.2068, 1602.3307)
+[14:01:48] [INFO] [Bullet] Using shooter_position, distance=358,33292
+[14:01:48] [INFO] [Bullet] Distance to wall: 358,33292 (24,399548% of viewport)
+[14:01:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:48] [INFO] [Bullet] Starting wall penetration at (384.2068, 1602.3307)
+[14:01:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36,8032
+[14:01:48] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:48] [INFO] [Bullet] Exiting penetration at (374.99374, 1648.0789) after traveling 41,666668 pixels through wall
+[14:01:48] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:01:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(474.74866, 1231.2513), shooter_id=474795214193, bullet_pos=(446.28452, 1588.4526)
+[14:01:49] [INFO] [Bullet] Using shooter_position, distance=358,33362
+[14:01:49] [INFO] [Bullet] Distance to wall: 358,33362 (24,399595% of viewport)
+[14:01:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:49] [INFO] [Bullet] Starting wall penetration at (446.28452, 1588.4526)
+[14:01:49] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23,044743
+[14:01:49] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:49] [INFO] [Bullet] Exiting penetration at (442.57755, 1634.9719) after traveling 41,666668 pixels through wall
+[14:01:49] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:01:49] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[14:01:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450.2357, 1255.7643), shooter_id=474795214193, bullet_pos=(2475.2358, 1255.7643)
+[14:01:49] [INFO] [Bullet] Using shooter_position, distance=2025,0001
+[14:01:49] [INFO] [Bullet] Distance to wall: 2025,0001 (137,88599% of viewport)
+[14:01:49] [INFO] [Bullet] Distance-based penetration chance: 22,422802%
+[14:01:49] [INFO] [Bullet] Penetration failed (distance roll)
+[14:01:49] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[14:01:49] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[14:01:49] [INFO] [LastChance] Resetting all effects (scene change detected)
+[14:01:49] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[14:01:49] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[14:01:49] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[14:01:49] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[14:01:49] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[14:01:49] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[14:01:49] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[14:01:49] [INFO] [ScoreManager] Level started with 10 enemies
+[14:01:49] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[14:01:49] [ENEMY] [Enemy1] Registered as sound listener
+[14:01:49] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[14:01:49] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[14:01:49] [ENEMY] [Enemy2] Registered as sound listener
+[14:01:49] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[14:01:49] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[14:01:49] [ENEMY] [Enemy3] Registered as sound listener
+[14:01:49] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[14:01:49] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[14:01:49] [ENEMY] [Enemy4] Registered as sound listener
+[14:01:49] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[14:01:49] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[14:01:49] [ENEMY] [Enemy5] Registered as sound listener
+[14:01:49] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[14:01:49] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[14:01:49] [ENEMY] [Enemy6] Registered as sound listener
+[14:01:49] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[14:01:49] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[14:01:49] [ENEMY] [Enemy7] Registered as sound listener
+[14:01:49] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[14:01:49] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[14:01:49] [ENEMY] [Enemy8] Registered as sound listener
+[14:01:49] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[14:01:49] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[14:01:49] [ENEMY] [Enemy9] Registered as sound listener
+[14:01:49] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[14:01:49] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[14:01:49] [ENEMY] [Enemy10] Registered as sound listener
+[14:01:49] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[14:01:49] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[14:01:49] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[14:01:49] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[14:01:49] [INFO] [LastChance] Found player: Player
+[14:01:49] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[14:01:49] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[14:01:49] [INFO] [LastChance] Connected to player Died signal (C#)
+[14:01:49] [INFO] [Player] Detecting weapon pose (frame 3)...
+[14:01:49] [INFO] [Player] Detected weapon: Rifle (default pose)
+[14:01:49] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[14:01:50] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[14:01:50] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[14:01:51] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[14:01:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 789.4444), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[14:01:51] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[14:01:51] [ENEMY] [Enemy1] Heard gunshot at (450, 789.4444), source_type=0, intensity=0.01, distance=464
+[14:01:51] [ENEMY] [Enemy2] Heard gunshot at (450, 789.4444), source_type=0, intensity=0.04, distance=245
+[14:01:51] [ENEMY] [Enemy4] Heard gunshot at (450, 789.4444), source_type=0, intensity=0.02, distance=367
+[14:01:51] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[14:01:51] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[14:01:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 772.9022), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[14:01:51] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[14:01:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 770.9111), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[14:01:51] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[14:01:51] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[14:01:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 772.9022), shooter_id=502762834333, bullet_pos=(927.9742, 657.67773)
+[14:01:51] [INFO] [Bullet] Using shooter_position, distance=491,66656
+[14:01:51] [INFO] [Bullet] Distance to wall: 491,66656 (33,47848% of viewport)
+[14:01:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(681.2181, 750.52), source=ENEMY (Enemy3), range=1469, listeners=10
+[14:01:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[14:01:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 782.5734), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[14:01:51] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[14:01:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(672.2088, 745.079), source=ENEMY (Enemy3), range=1469, listeners=10
+[14:01:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[14:01:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 770.91113), shooter_id=502762834333, bullet_pos=(930.99725, 669.0394)
+[14:01:51] [INFO] [Bullet] Using shooter_position, distance=491,66675
+[14:01:51] [INFO] [Bullet] Distance to wall: 491,66675 (33,478493% of viewport)
+[14:01:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:51] [INFO] [Bullet] Starting wall penetration at (930.99725, 669.0394)
+[14:01:51] [INFO] [LastChance] Threat detected: @Area2D@1374
+[14:01:51] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:01:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:01:51] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[14:01:51] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[14:01:51] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[14:01:51] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[14:01:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33,21961
+[14:01:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:51] [INFO] [Bullet] Exiting penetration at (968.4987, 661.09686) after traveling 33,333332 pixels through wall
+[14:01:51] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:01:51] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[14:01:51] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[14:01:51] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[14:01:51] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[14:01:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.9881, 728.8144), shooter_id=499944262601, bullet_pos=(50.85157, 753.3204)
+[14:01:51] [INFO] [Bullet] Using shooter_position, distance=566.666625976563
+[14:01:51] [INFO] [Bullet] Distance to wall: 566.666625976563 (38.5853725707874% of viewport)
+[14:01:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:52] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[14:01:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(610.2855, 963.0917), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[14:01:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[14:01:53] [ENEMY] [Enemy4] Hit taken, health: 1/2
+[14:01:53] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[14:01:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(640.7271, 974.5795), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[14:01:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[14:01:53] [ENEMY] [Enemy4] Hit taken, health: 0/2
+[14:01:53] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[14:01:53] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[14:01:53] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[14:01:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(675.4899, 975.6353), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=7
+[14:01:54] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[14:01:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(710.6901, 975.6353), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:54] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=7
+[14:01:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(675.48987, 975.6353), shooter_id=502762834333, bullet_pos=(935.5829, 843.6467)
+[14:01:54] [INFO] [Bullet] Using shooter_position, distance=291,66653
+[14:01:54] [INFO] [Bullet] Distance to wall: 291,66653 (19,860111% of viewport)
+[14:01:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:54] [INFO] [Bullet] Starting wall penetration at (935.5829, 843.6467)
+[14:01:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37,86558
+[14:01:54] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:54] [INFO] [Bullet] Exiting penetration at (969.76654, 826.2997) after traveling 33,333336 pixels through wall
+[14:01:54] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:01:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(710.69006, 975.6353), shooter_id=502762834333, bullet_pos=(931.83185, 842.0973)
+[14:01:54] [INFO] [Bullet] Using shooter_position, distance=258,3333
+[14:01:54] [INFO] [Bullet] Distance to wall: 258,3333 (17,59039% of viewport)
+[14:01:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:54] [INFO] [Bullet] Starting wall penetration at (931.83185, 842.0973)
+[14:01:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(745.8903, 975.6353), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:54] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[14:01:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33,46416
+[14:01:54] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:54] [INFO] [Bullet] Exiting penetration at (964.6464, 822.282) after traveling 33,333332 pixels through wall
+[14:01:54] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:01:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(745.89026, 975.6353), shooter_id=502762834333, bullet_pos=(919.9961, 833.1145)
+[14:01:54] [INFO] [Bullet] Using shooter_position, distance=225,00005
+[14:01:54] [INFO] [Bullet] Distance to wall: 225,00005 (15,320667% of viewport)
+[14:01:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:54] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[14:01:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(745.89026, 975.6353), shooter_id=502762834333, bullet_pos=(513.6411, 565.3077)
+[14:01:54] [INFO] [Bullet] Using shooter_position, distance=471,49597
+[14:01:54] [INFO] [Bullet] Distance to wall: 471,49597 (32,10503% of viewport)
+[14:01:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:54] [ENEMY] [Enemy10] FLANKING started: target=(689.5375, 1069.342), side=right, pos=(955.1431, 1418.083)
+[14:01:54] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[14:01:54] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[14:01:54] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[14:01:54] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[14:01:54] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[14:01:54] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[14:01:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(850.3182, 813.4621), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=7
+[14:01:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(872.4631, 787.4348), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=8
+[14:01:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(850.3182, 813.4621), shooter_id=502762834333, bullet_pos=(334.6535, 714.8977)
+[14:01:55] [INFO] [Bullet] Using shooter_position, distance=525
+[14:01:55] [INFO] [Bullet] Distance to wall: 525 (35,748215% of viewport)
+[14:01:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:55] [INFO] [Bullet] Starting wall penetration at (334.6535, 714.8977)
+[14:01:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(893.2143, 760.8303), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=8
+[14:01:55] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[14:01:55] [INFO] [Bullet] Exiting penetration at (297.00177, 707.7009) after traveling 33,333332 pixels through wall
+[14:01:55] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:01:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(872.46313, 787.4348), shooter_id=502762834333, bullet_pos=(386.55292, 712.4199)
+[14:01:55] [INFO] [Bullet] Using shooter_position, distance=491,66653
+[14:01:55] [INFO] [Bullet] Distance to wall: 491,66653 (33,47848% of viewport)
+[14:01:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(891.5209, 732.3179), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=8
+[14:01:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(893.2143, 760.83026), shooter_id=502762834333, bullet_pos=(472.6712, 699.4444)
+[14:01:55] [INFO] [Bullet] Using shooter_position, distance=424,99966
+[14:01:55] [INFO] [Bullet] Distance to wall: 424,99966 (28,939009% of viewport)
+[14:01:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:55] [INFO] [Bullet] Starting wall penetration at (472.6712, 699.4444)
+[14:01:55] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[14:01:55] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[14:01:55] [INFO] [Bullet] Exiting penetration at (434.73984, 693.90765) after traveling 33,333336 pixels through wall
+[14:01:55] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:01:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(875.4667, 708.8645), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=7
+[14:01:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(872.46313, 787.4348), shooter_id=502762834333, bullet_pos=(42.986084, 743.83466)
+[14:01:55] [INFO] [Bullet] Using shooter_position, distance=830,6222
+[14:01:55] [INFO] [Bullet] Distance to wall: 830,6222 (56,558598% of viewport)
+[14:01:55] [INFO] [Bullet] Distance-based penetration chance: 80,68164%
+[14:01:55] [INFO] [Bullet] Starting wall penetration at (42.986084, 743.83466)
+[14:01:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 22,301422
+[14:01:55] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:01:55] [INFO] [Bullet] Exiting penetration at (9.791225, 746.8699) after traveling 28,333336 pixels through wall
+[14:01:55] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[14:01:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(856.1006, 697.6429), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[14:01:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(832.9454, 697.5339), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[14:01:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(891.52094, 732.3179), shooter_id=502762834333, bullet_pos=(42.544544, 605.92377)
+[14:01:55] [INFO] [Bullet] Using shooter_position, distance=858,3335
+[14:01:55] [INFO] [Bullet] Distance to wall: 858,3335 (58,445507% of viewport)
+[14:01:55] [INFO] [Bullet] Distance-based penetration chance: 78,48024%
+[14:01:55] [INFO] [Bullet] Penetration failed (distance roll)
+[14:01:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(805.7657, 713.6921), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:56] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[14:01:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(875.4667, 708.8645), shooter_id=502762834333, bullet_pos=(61.033913, 577.24414)
+[14:01:56] [INFO] [Bullet] Using shooter_position, distance=824,99976
+[14:01:56] [INFO] [Bullet] Distance to wall: 824,99976 (56,17575% of viewport)
+[14:01:56] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[14:01:56] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[14:01:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(856.10065, 697.64294), shooter_id=502762834333, bullet_pos=(41.90977, 564.53314)
+[14:01:56] [INFO] [Bullet] Using shooter_position, distance=825
+[14:01:56] [INFO] [Bullet] Distance to wall: 825 (56,17577% of viewport)
+[14:01:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(805.76575, 713.69214), shooter_id=502762834333, bullet_pos=(506.5085, 586.9237)
+[14:01:56] [INFO] [Bullet] Using shooter_position, distance=325,00018
+[14:01:56] [INFO] [Bullet] Distance to wall: 325,00018 (22,12986% of viewport)
+[14:01:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:56] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[14:01:56] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[14:01:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(832.9454, 697.53394), shooter_id=502762834333, bullet_pos=(56.734676, 541.86444)
+[14:01:56] [INFO] [Bullet] Using shooter_position, distance=791,6666
+[14:01:56] [INFO] [Bullet] Distance to wall: 791,6666 (53,906036% of viewport)
+[14:01:56] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[14:01:56] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[14:01:56] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[14:01:56] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[14:01:56] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[14:01:56] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[14:01:56] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[14:01:56] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[14:01:56] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[14:01:56] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[14:01:57] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[14:01:57] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[14:01:57] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[14:01:57] [INFO] [ScoreManager] Combo ended at 2. Max combo: 2
+[14:01:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(472.9147, 645.9802), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:57] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=2
+[14:01:57] [ENEMY] [Enemy2] Hit taken, health: 1/2
+[14:01:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(437.7147, 645.9802), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:01:57] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=2
+[14:01:57] [ENEMY] [Enemy2] Hit taken, health: 0/2
+[14:01:57] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[14:01:57] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[14:01:57] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
+[14:01:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(402.5147, 645.9802), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[14:01:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=2
+[14:01:57] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[14:01:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(367.3148, 645.9802), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[14:01:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=2
+[14:01:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(402.51474, 645.9802), shooter_id=502762834333, bullet_pos=(500.48413, 301.2994)
+[14:01:57] [INFO] [Bullet] Using shooter_position, distance=358,33347
+[14:01:57] [INFO] [Bullet] Distance to wall: 358,33347 (24,399586% of viewport)
+[14:01:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(332.1148, 645.9802), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[14:01:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=2
+[14:01:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(367.3148, 645.9802), shooter_id=502762834333, bullet_pos=(503.63925, 350.95386)
+[14:01:58] [INFO] [Bullet] Using shooter_position, distance=324,99988
+[14:01:58] [INFO] [Bullet] Distance to wall: 324,99988 (22,129839% of viewport)
+[14:01:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(402.51474, 645.9802), shooter_id=502762834333, bullet_pos=(399.82272, 61.57612)
+[14:01:58] [INFO] [Bullet] Using shooter_position, distance=584,4103
+[14:01:58] [INFO] [Bullet] Distance to wall: 584,4103 (39,79357% of viewport)
+[14:01:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(332.11484, 645.9802), shooter_id=502762834333, bullet_pos=(498.24182, 366.64746)
+[14:01:58] [INFO] [Bullet] Using shooter_position, distance=324,99994
+[14:01:58] [INFO] [Bullet] Distance to wall: 324,99994 (22,129845% of viewport)
+[14:01:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(402.51474, 645.9802), shooter_id=502762834333, bullet_pos=(336.0707, 223.02846)
+[14:01:58] [INFO] [Bullet] Using shooter_position, distance=428,139
+[14:01:58] [INFO] [Bullet] Distance to wall: 428,139 (29,152771% of viewport)
+[14:01:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:58] [INFO] [Bullet] Starting wall penetration at (336.0707, 223.02846)
+[14:01:58] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[14:01:58] [INFO] [Bullet] Exiting penetration at (325.38925, 250.07928) after traveling 24,083334 pixels through wall
+[14:01:58] [INFO] [Bullet] Damage multiplier after penetration: 0,225
+[14:01:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(367.3148, 645.9802), shooter_id=502762834333, bullet_pos=(412.72604, 47.618137)
+[14:01:58] [INFO] [Bullet] Using shooter_position, distance=600,08276
+[14:01:58] [INFO] [Bullet] Distance to wall: 600,08276 (40,86074% of viewport)
+[14:01:58] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[14:01:58] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[14:01:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(332.11484, 645.9802), shooter_id=502762834333, bullet_pos=(288.20764, 57.99967)
+[14:01:58] [INFO] [Bullet] Using shooter_position, distance=589,6176
+[14:01:58] [INFO] [Bullet] Distance to wall: 589,6176 (40,148148% of viewport)
+[14:01:58] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
+[14:01:58] [ENEMY] [Enemy1] Player reloading state changed: false -> true
+[14:01:58] [ENEMY] [Enemy2] Player reloading state changed: false -> true
+[14:01:58] [ENEMY] [Enemy5] Player reloading state changed: false -> true
+[14:01:58] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[14:01:58] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[14:01:58] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[14:01:58] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[14:01:58] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[14:01:58] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(221.0109, 631.3137), source=PLAYER (Player), range=900, listeners=7
+[14:01:58] [ENEMY] [Enemy1] Heard player RELOAD at (221.0109, 631.3137), intensity=0.03, distance=305
+[14:01:58] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
+[14:01:58] [ENEMY] [Enemy10] Heard player RELOAD at (221.0109, 631.3137), intensity=0.02, distance=353
+[14:01:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=0
+[14:01:58] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=true (dist=305), can_see=false
+[14:01:58] [ENEMY] [Enemy1] Pursuing vulnerability sound at (221.0109, 631.3137), distance=305
+[14:01:58] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1506), can_see=false
+[14:01:58] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1738), can_see=false
+[14:01:58] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1228), can_see=false
+[14:01:58] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1868), can_see=false
+[14:01:58] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=2092), can_see=false
+[14:01:58] [ENEMY] [Enemy1] Player reloading - priority attack triggered
+[14:01:58] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[14:01:58] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
+[14:01:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(332.11484, 645.9802), shooter_id=502762834333, bullet_pos=(58.873634, 343.56052)
+[14:01:58] [INFO] [Bullet] Using shooter_position, distance=407,5763
+[14:01:58] [INFO] [Bullet] Distance to wall: 407,5763 (27,75262% of viewport)
+[14:01:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:01:58] [ENEMY] [Enemy1] Player reloading - priority attack triggered
+[14:01:58] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[14:01:58] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=400), can_see=true
+[14:01:58] [ENEMY] [Enemy10] Player vulnerable (reloading) - pursuing to attack (dist=400)
+[14:01:58] [ENEMY] [Enemy10] Pursuing vulnerability sound at (221.0109, 631.3137), distance=353
+[14:01:58] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[14:01:58] [INFO] [LastChance] Threat detected: @Area2D@1402
+[14:01:58] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:01:58] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:01:58] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
+[14:01:58] [ENEMY] [Enemy1] Player reloading state changed: true -> false
+[14:01:58] [ENEMY] [Enemy2] Player reloading state changed: true -> false
+[14:01:58] [ENEMY] [Enemy5] Player reloading state changed: true -> false
+[14:01:58] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[14:01:58] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[14:01:58] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[14:01:58] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[14:01:58] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[14:01:58] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
+[14:01:58] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[14:01:58] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[14:01:58] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[14:01:58] [INFO] [PenultimateHit]   - Time scale: 0.10
+[14:01:58] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[14:01:58] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[14:01:58] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[14:01:58] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[14:01:58] [INFO] [PenultimateHit] Applying saturation to 8 enemies
+[14:01:58] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[14:01:59] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[14:01:59] [INFO] [Player.Reload.Anim] LeftArm: pos=(16.791615, 5.844514), target=(24, 6), base=(24, 6)
+[14:01:59] [INFO] [Player.Reload.Anim] RightArm: pos=(-2.002021, 7.072162), target=(-2, 6), base=(-2, 6)
+[14:01:59] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[14:01:59] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[14:01:59] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[14:01:59] [ENEMY] [Enemy10] Pursuing vulnerability sound at (221.0109, 631.3137), distance=314
+[14:02:00] [INFO] [Player.Reload.Anim] LeftArm: pos=(22.421972, 5.9659615), target=(24, 6), base=(24, 6)
+[14:02:00] [INFO] [Player.Reload.Anim] RightArm: pos=(-2.0004427, 6.2347136), target=(-2, 6), base=(-2, 6)
+[14:02:00] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
+[14:02:00] [ENEMY] [Enemy10] Pursuing vulnerability sound at (221.0109, 631.3137), distance=298
+[14:02:01] [ENEMY] [Enemy10] Pursuing vulnerability sound at (221.0109, 631.3137), distance=310
+[14:02:01] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
+[14:02:01] [INFO] [PenultimateHit] Ending penultimate hit effect
+[14:02:01] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[14:02:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(364.584, 437.7611), source=ENEMY (Enemy1), range=1469, listeners=7
+[14:02:02] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[14:02:02] [INFO] [LastChance] Threat detected: Bullet
+[14:02:02] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:02:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:02:02] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[14:02:02] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[14:02:02] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[14:02:02] [INFO] [LastChance] Player died
+[14:02:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(364.584, 437.7611), source=ENEMY (Enemy1), range=1469, listeners=7
+[14:02:02] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[14:02:02] [INFO] [LastChance] Threat detected: Bullet
+[14:02:02] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:02:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:02:02] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[14:02:02] [ENEMY] [Enemy7] FLANKING started: target=(411.3071, 413.8791), side=left, pos=(1429.677, 849.9507)
+[14:02:02] [ENEMY] [Enemy7] State: PURSUING -> FLANKING
+[14:02:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(266.2572, 586.9886), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[14:02:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=2
+[14:02:02] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[14:02:02] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[14:02:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(266.25717, 586.98865), shooter_id=502762834333, bullet_pos=(478.32452, 684.3122)
+[14:02:02] [INFO] [Bullet] Using shooter_position, distance=233,33331
+[14:02:02] [INFO] [Bullet] Distance to wall: 233,33331 (15,888095% of viewport)
+[14:02:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:02:02] [ENEMY] [Enemy10] Hit taken, health: 1/2
+[14:02:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(244.6972, 614.025), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[14:02:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=1
+[14:02:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(244.69717, 614.025), shooter_id=502762834333, bullet_pos=(454.53754, 695.21655)
+[14:02:02] [INFO] [Bullet] Using shooter_position, distance=225,00009
+[14:02:02] [INFO] [Bullet] Distance to wall: 225,00009 (15,320671% of viewport)
+[14:02:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:02:02] [ENEMY] [Enemy10] Hit taken, health: 0/2
+[14:02:02] [ENEMY] [Enemy10] Enemy died (ricochet: false, penetration: false)
+[14:02:02] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[14:02:02] [INFO] [SoundPropagation] Unregistered listener: Enemy10 (remaining: 6)
+[14:02:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(216.5611, 629.9588), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[14:02:02] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=1
+[14:02:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(183.0276, 633.718), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[14:02:02] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=1
+[14:02:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(216.56105, 629.9588), shooter_id=502762834333, bullet_pos=(502.17615, 689.064)
+[14:02:02] [INFO] [Bullet] Using shooter_position, distance=291,66663
+[14:02:02] [INFO] [Bullet] Distance to wall: 291,66663 (19,860117% of viewport)
+[14:02:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:02:02] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[14:02:02] [INFO] [LastChance] Resetting all effects (scene change detected)
+[14:02:02] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[14:02:02] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[14:02:02] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[14:02:02] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[14:02:02] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[14:02:02] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[14:02:02] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[14:02:02] [INFO] [ScoreManager] Level started with 10 enemies
+[14:02:02] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 7)
+[14:02:02] [ENEMY] [Enemy1] Registered as sound listener
+[14:02:02] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[14:02:02] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 8)
+[14:02:02] [ENEMY] [Enemy2] Registered as sound listener
+[14:02:02] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[14:02:02] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 9)
+[14:02:02] [ENEMY] [Enemy3] Registered as sound listener
+[14:02:02] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[14:02:02] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 10)
+[14:02:02] [ENEMY] [Enemy4] Registered as sound listener
+[14:02:02] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[14:02:02] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 11)
+[14:02:02] [ENEMY] [Enemy5] Registered as sound listener
+[14:02:02] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[14:02:02] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 12)
+[14:02:02] [ENEMY] [Enemy6] Registered as sound listener
+[14:02:02] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[14:02:02] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 13)
+[14:02:02] [ENEMY] [Enemy7] Registered as sound listener
+[14:02:02] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[14:02:02] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 14)
+[14:02:02] [ENEMY] [Enemy8] Registered as sound listener
+[14:02:02] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[14:02:02] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 15)
+[14:02:02] [ENEMY] [Enemy9] Registered as sound listener
+[14:02:02] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[14:02:02] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 16)
+[14:02:02] [ENEMY] [Enemy10] Registered as sound listener
+[14:02:02] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[14:02:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(449.6667, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=16
+[14:02:02] [INFO] [SoundPropagation] Cleaned up 6 invalid listeners
+[14:02:02] [ENEMY] [Enemy4] Heard gunshot at (449.6667, 1256), source_type=0, intensity=0.01, distance=499
+[14:02:02] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[14:02:02] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[14:02:02] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[14:02:02] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[14:02:02] [INFO] [LastChance] Found player: Player
+[14:02:02] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[14:02:02] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[14:02:02] [INFO] [LastChance] Connected to player Died signal (C#)
+[14:02:02] [INFO] [Player] Detecting weapon pose (frame 3)...
+[14:02:02] [INFO] [Player] Detected weapon: Rifle (default pose)
+[14:02:02] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[14:02:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(443, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[14:02:02] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=5
+[14:02:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(415, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[14:02:02] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=5
+[14:02:03] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[14:02:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(415, 1256), shooter_id=729876007969, bullet_pos=(1687.029, 1343.0001)
+[14:02:03] [INFO] [Bullet] Using shooter_position, distance=1275,0007
+[14:02:03] [INFO] [Bullet] Distance to wall: 1275,0007 (86,81715% of viewport)
+[14:02:03] [INFO] [Bullet] Distance-based penetration chance: 45,38%
+[14:02:03] [INFO] [Bullet] Starting wall penetration at (1687.029, 1343.0001)
+[14:02:03] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33,665497
+[14:02:03] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:02:03] [INFO] [Bullet] Exiting penetration at (1733.587, 1346.1844) after traveling 41,666668 pixels through wall
+[14:02:03] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:02:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(449.66666, 1256), shooter_id=729876007969, bullet_pos=(2474.6667, 1256)
+[14:02:03] [INFO] [Bullet] Using shooter_position, distance=2025,0001
+[14:02:03] [INFO] [Bullet] Distance to wall: 2025,0001 (137,88599% of viewport)
+[14:02:03] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[14:02:03] [INFO] [LastChance] Resetting all effects (scene change detected)
+[14:02:03] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[14:02:03] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[14:02:03] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[14:02:03] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[14:02:03] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[14:02:03] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[14:02:03] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[14:02:03] [INFO] [ScoreManager] Level started with 10 enemies
+[14:02:03] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[14:02:03] [ENEMY] [Enemy1] Registered as sound listener
+[14:02:03] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[14:02:03] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[14:02:03] [ENEMY] [Enemy2] Registered as sound listener
+[14:02:03] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[14:02:03] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[14:02:03] [ENEMY] [Enemy3] Registered as sound listener
+[14:02:03] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[14:02:03] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[14:02:03] [ENEMY] [Enemy4] Registered as sound listener
+[14:02:03] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[14:02:03] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[14:02:03] [ENEMY] [Enemy5] Registered as sound listener
+[14:02:03] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[14:02:03] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[14:02:03] [ENEMY] [Enemy6] Registered as sound listener
+[14:02:03] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[14:02:03] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[14:02:03] [ENEMY] [Enemy7] Registered as sound listener
+[14:02:03] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[14:02:03] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[14:02:03] [ENEMY] [Enemy8] Registered as sound listener
+[14:02:03] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[14:02:03] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[14:02:03] [ENEMY] [Enemy9] Registered as sound listener
+[14:02:03] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[14:02:03] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[14:02:03] [ENEMY] [Enemy10] Registered as sound listener
+[14:02:03] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[14:02:03] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[14:02:03] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[14:02:03] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[14:02:03] [INFO] [LastChance] Found player: Player
+[14:02:03] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[14:02:03] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[14:02:03] [INFO] [LastChance] Connected to player Died signal (C#)
+[14:02:03] [INFO] [Player] Detecting weapon pose (frame 3)...
+[14:02:03] [INFO] [Player] Detected weapon: Rifle (default pose)
+[14:02:03] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[14:02:03] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[14:02:04] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[14:02:05] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[14:02:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.9239, 804.0493), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[14:02:05] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[14:02:05] [ENEMY] [Enemy1] Heard gunshot at (450.9239, 804.0493), source_type=0, intensity=0.01, distance=478
+[14:02:05] [ENEMY] [Enemy2] Heard gunshot at (450.9239, 804.0493), source_type=0, intensity=0.04, distance=259
+[14:02:05] [ENEMY] [Enemy4] Heard gunshot at (450.9239, 804.0493), source_type=0, intensity=0.02, distance=362
+[14:02:05] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[14:02:05] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[14:02:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(461.1183, 774.834), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[14:02:05] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[14:02:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(480.18, 757.5037), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[14:02:05] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[14:02:05] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[14:02:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(461.11826, 774.83405), shooter_id=749991889035, bullet_pos=(919.31866, 785.8834)
+[14:02:05] [INFO] [Bullet] Using shooter_position, distance=458,33362
+[14:02:05] [INFO] [Bullet] Distance to wall: 458,33362 (31,20878% of viewport)
+[14:02:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:02:05] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[14:02:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.5527, 758.2788), source=ENEMY (Enemy3), range=1469, listeners=10
+[14:02:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[14:02:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(505.4213, 751.366), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[14:02:05] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[14:02:05] [INFO] [LastChance] Threat detected: @Area2D@1926
+[14:02:05] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:02:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:02:05] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[14:02:05] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[14:02:05] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[14:02:05] [INFO] [PenultimateHit]   - Time scale: 0.10
+[14:02:05] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[14:02:05] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[14:02:05] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[14:02:05] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[14:02:05] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[14:02:05] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[14:02:05] [ENEMY] [Enemy3] Hit taken, health: 0/3
+[14:02:05] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[14:02:05] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[14:02:05] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[14:02:06] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[14:02:06] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[14:02:06] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[14:02:08] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
+[14:02:08] [INFO] [PenultimateHit] Ending penultimate hit effect
+[14:02:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(554.1591, 989.9335), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[14:02:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
+[14:02:09] [ENEMY] [Enemy4] Hit taken, health: 3/4
+[14:02:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(562.31, 989.9338), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[14:02:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
+[14:02:09] [ENEMY] [Enemy4] Hit taken, health: 2/4
+[14:02:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(576.8318, 989.9338), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[14:02:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
+[14:02:09] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[14:02:09] [ENEMY] [Enemy4] Hit taken, health: 1/4
+[14:02:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(743.5627, 914.9558), source=ENEMY (Enemy4), range=1469, listeners=9
+[14:02:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[14:02:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(595.8249, 989.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[14:02:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[14:02:09] [ENEMY] [Enemy4] Hit taken, health: 0/4
+[14:02:09] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[14:02:09] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[14:02:09] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[14:02:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(802.004, 872.8333), shooter_id=747458528817, bullet_pos=(919.6462, 754.7736)
+[14:02:09] [INFO] [Bullet] Using shooter_position, distance=166.66667175293
+[14:02:09] [INFO] [Bullet] Distance to wall: 166.66667175293 (11.3486401526422% of viewport)
+[14:02:09] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:02:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(802.004, 872.8333), shooter_id=747458528817, bullet_pos=(514.7107, 392.5052)
+[14:02:10] [INFO] [Bullet] Using shooter_position, distance=559.689636230469
+[14:02:10] [INFO] [Bullet] Distance to wall: 559.689636230469 (38.110296509423% of viewport)
+[14:02:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:02:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(802.004, 872.8333), shooter_id=747458528817, bullet_pos=(875.1879, 65.54822)
+[14:02:10] [INFO] [Bullet] Using shooter_position, distance=810.595520019531
+[14:02:10] [INFO] [Bullet] Distance to wall: 810.595520019531 (55.1949395118575% of viewport)
+[14:02:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(802.004, 872.8333), shooter_id=747458528817, bullet_pos=(1004.965, 203.2758)
+[14:02:10] [INFO] [Bullet] Using shooter_position, distance=699.642944335938
+[14:02:10] [INFO] [Bullet] Distance to wall: 699.642944335938 (47.6399746097653% of viewport)
+[14:02:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(802.004, 872.8333), shooter_id=747458528817, bullet_pos=(1168.669, 65.75311)
+[14:02:10] [INFO] [Bullet] Using shooter_position, distance=886.4658203125
+[14:02:10] [INFO] [Bullet] Distance to wall: 886.4658203125 (60.361087771986% of viewport)
+[14:02:10] [INFO] [Bullet] Distance-based penetration chance: 76.2453975993496%
+[14:02:10] [INFO] [Bullet] Starting wall penetration at (1168.669, 65.75311)
+[14:02:10] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[14:02:10] [INFO] [Bullet] Exiting penetration at (1185.82, 51.34478) after traveling 17.4002094268799 pixels through wall
+[14:02:10] [INFO] [Bullet] Damage multiplier after penetration: 0.05625
+[14:02:10] [ENEMY] [Enemy10] FLANKING started: target=(518.7419, 966.384), side=right, pos=(953.4262, 1416.483)
+[14:02:10] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[14:02:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(659.1499, 768.6757), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:02:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[14:02:11] [ENEMY] [Enemy2] Hit taken, health: 1/2
+[14:02:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.04, 743.7855), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[14:02:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[14:02:11] [ENEMY] [Enemy2] Hit taken, health: 0/2
+[14:02:11] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[14:02:11] [INFO] [ScoreManager] Kill registered. Combo: 3 (points: 3000)
+[14:02:11] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
+[14:02:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(708.9302, 718.8954), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[14:02:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=5
+[14:02:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(733.8203, 694.0052), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[14:02:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=5
+[14:02:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(758.7104, 669.1151), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[14:02:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=5
+[14:02:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(708.9302, 718.8954), shooter_id=749991889035, bullet_pos=(46.542873, 519.78204)
+[14:02:11] [INFO] [Bullet] Using shooter_position, distance=691,6669
+[14:02:11] [INFO] [Bullet] Distance to wall: 691,6669 (47,09687% of viewport)
+[14:02:11] [INFO] [Bullet] Distance-based penetration chance: 91,72032%
+[14:02:11] [INFO] [Bullet] Starting wall penetration at (46.542873, 519.78204)
+[14:02:11] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[14:02:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23,147625
+[14:02:11] [INFO] [Bullet] Body exited signal received for penetrating body
+[14:02:11] [INFO] [Bullet] Exiting penetration at (9.832256, 508.74686) after traveling 33,333336 pixels through wall
+[14:02:11] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[14:02:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.8203, 694.00525), shooter_id=749991889035, bullet_pos=(63.05227, 525.26587)
+[14:02:11] [INFO] [Bullet] Using shooter_position, distance=691,6667
+[14:02:11] [INFO] [Bullet] Distance to wall: 691,6667 (47,09686% of viewport)
+[14:02:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.8203, 694.00525), shooter_id=749991889035, bullet_pos=(230.67772, 474.9995)
+[14:02:12] [INFO] [Bullet] Using shooter_position, distance=548,74036
+[14:02:12] [INFO] [Bullet] Distance to wall: 548,74036 (37,364742% of viewport)
+[14:02:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:02:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(758.71045, 669.1151), shooter_id=749991889035, bullet_pos=(41.488415, 563.202)
+[14:02:12] [INFO] [Bullet] Using shooter_position, distance=725,00006
+[14:02:12] [INFO] [Bullet] Distance to wall: 725,00006 (49,36659% of viewport)
+[14:02:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(733.8203, 694.00525), shooter_id=749991889035, bullet_pos=(516.6741, 543.13184)
+[14:02:12] [INFO] [Bullet] Using shooter_position, distance=264,41498
+[14:02:12] [INFO] [Bullet] Distance to wall: 264,41498 (18,004503% of viewport)
+[14:02:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:02:12] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
+[14:02:12] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[14:02:12] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[14:02:12] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[14:02:13] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[14:02:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(454.6812, 426.1134), source=ENEMY (Enemy1), range=1469, listeners=7
+[14:02:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=3
+[14:02:13] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[14:02:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(464.9187, 485.2034), shooter_id=746602890835, bullet_pos=(507.5328, 575.6691)
+[14:02:13] [INFO] [Bullet] Using shooter_position, distance=99.9999771118164
+[14:02:13] [INFO] [Bullet] Distance to wall: 99.9999771118164 (6.80918232528703% of viewport)
+[14:02:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[14:02:13] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[14:02:13] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[14:02:13] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[14:02:13] [INFO] [LastChance] Player died
+[14:02:14] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[14:02:14] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[14:02:14] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[14:02:14] [INFO] [LastChance] Resetting all effects (scene change detected)
+[14:02:14] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[14:02:14] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[14:02:14] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[14:02:14] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[14:02:14] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[14:02:14] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[14:02:14] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[14:02:14] [INFO] [ScoreManager] Level started with 10 enemies
+[14:02:14] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 8)
+[14:02:14] [ENEMY] [Enemy1] Registered as sound listener
+[14:02:14] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[14:02:14] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 9)
+[14:02:14] [ENEMY] [Enemy2] Registered as sound listener
+[14:02:14] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[14:02:14] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 10)
+[14:02:14] [ENEMY] [Enemy3] Registered as sound listener
+[14:02:14] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[14:02:14] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 11)
+[14:02:14] [ENEMY] [Enemy4] Registered as sound listener
+[14:02:14] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[14:02:14] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 12)
+[14:02:14] [ENEMY] [Enemy5] Registered as sound listener
+[14:02:14] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[14:02:14] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 13)
+[14:02:14] [ENEMY] [Enemy6] Registered as sound listener
+[14:02:14] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[14:02:14] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 14)
+[14:02:14] [ENEMY] [Enemy7] Registered as sound listener
+[14:02:14] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[14:02:14] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 15)
+[14:02:14] [ENEMY] [Enemy8] Registered as sound listener
+[14:02:14] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[14:02:14] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 16)
+[14:02:14] [ENEMY] [Enemy9] Registered as sound listener
+[14:02:14] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[14:02:14] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 17)
+[14:02:14] [ENEMY] [Enemy10] Registered as sound listener
+[14:02:14] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[14:02:14] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[14:02:14] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[14:02:14] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[14:02:14] [INFO] [LastChance] Found player: Player
+[14:02:14] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[14:02:14] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[14:02:14] [INFO] [LastChance] Connected to player Died signal (C#)
+[14:02:14] [INFO] [Player] Detecting weapon pose (frame 3)...
+[14:02:14] [INFO] [Player] Detected weapon: Rifle (default pose)
+[14:02:14] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[14:02:15] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[14:02:15] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[14:02:18] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[14:02:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(935.8254, 1395.425), source=ENEMY (Enemy10), range=1469, listeners=17
+[14:02:18] [INFO] [SoundPropagation] Cleaned up 7 invalid listeners
+[14:02:18] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[14:02:18] [INFO] [LastChance] Threat detected: Bullet
+[14:02:18] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:02:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:02:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[14:02:18] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[14:02:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(935.8254, 1395.425), source=ENEMY (Enemy10), range=1469, listeners=10
+[14:02:18] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[14:02:18] [INFO] [LastChance] Threat detected: Bullet
+[14:02:18] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:02:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:02:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[14:02:18] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[14:02:18] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[14:02:18] [INFO] [PenultimateHit]   - Time scale: 0.10
+[14:02:18] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[14:02:18] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[14:02:18] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[14:02:18] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[14:02:18] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[14:02:18] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[14:02:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(935.8254, 1395.425), source=ENEMY (Enemy10), range=1469, listeners=10
+[14:02:19] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[14:02:19] [INFO] [LastChance] Threat detected: Bullet
+[14:02:19] [INFO] [LastChance] Not in hard mode - effect disabled
+[14:02:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[14:02:19] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[14:02:19] [INFO] [PenultimateHit] Ending penultimate hit effect
+[14:02:19] [INFO] [LastChance] Resetting all effects (scene change detected)
+[14:02:19] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[14:02:19] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[14:02:19] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[14:02:19] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[14:02:19] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[14:02:19] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[14:02:19] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[14:02:19] [INFO] [ScoreManager] Level started with 10 enemies
+[14:02:19] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[14:02:19] [ENEMY] [Enemy1] Registered as sound listener
+[14:02:19] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[14:02:19] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[14:02:19] [ENEMY] [Enemy2] Registered as sound listener
+[14:02:19] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[14:02:19] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[14:02:19] [ENEMY] [Enemy3] Registered as sound listener
+[14:02:19] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[14:02:19] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[14:02:19] [ENEMY] [Enemy4] Registered as sound listener
+[14:02:19] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[14:02:19] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[14:02:19] [ENEMY] [Enemy5] Registered as sound listener
+[14:02:19] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[14:02:19] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[14:02:19] [ENEMY] [Enemy6] Registered as sound listener
+[14:02:19] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[14:02:19] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[14:02:19] [ENEMY] [Enemy7] Registered as sound listener
+[14:02:19] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[14:02:19] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[14:02:19] [ENEMY] [Enemy8] Registered as sound listener
+[14:02:19] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[14:02:19] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[14:02:19] [ENEMY] [Enemy9] Registered as sound listener
+[14:02:19] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[14:02:19] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[14:02:19] [ENEMY] [Enemy10] Registered as sound listener
+[14:02:19] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[14:02:19] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[14:02:19] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[14:02:19] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[14:02:19] [INFO] [LastChance] Found player: Player
+[14:02:19] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[14:02:19] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[14:02:19] [INFO] [LastChance] Connected to player Died signal (C#)
+[14:02:19] [INFO] [Player] Detecting weapon pose (frame 3)...
+[14:02:19] [INFO] [Player] Detected weapon: Rifle (default pose)
+[14:02:19] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[14:02:21] [INFO] ------------------------------------------------------------
+[14:02:21] [INFO] GAME LOG ENDED: 2026-01-22T14:02:21
+[14:02:21] [INFO] ============================================================
diff --git a/docs/case-studies/issue-217/logs/solution-draft-log-initial.txt b/docs/case-studies/issue-217/logs/solution-draft-log-initial.txt
new file mode 100644
index 00000000..c10df63a
--- /dev/null
+++ b/docs/case-studies/issue-217/logs/solution-draft-log-initial.txt
@@ -0,0 +1,6714 @@
+Solution draft log for https://github.com/Jhon-Crow/godot-topdown-MVP/pull/221
+
+# Solve.mjs Log - 2026-01-22T07:16:36.271Z
+
+[2026-01-22T07:16:36.272Z] [INFO] 📁 Log file: /home/hive/solve-2026-01-22T07-16-36-271Z.log
+[2026-01-22T07:16:36.273Z] [INFO]    (All output will be logged here)
+[2026-01-22T07:16:36.797Z] [INFO] 
+[2026-01-22T07:16:36.797Z] [INFO] 🚀 solve v1.9.0
+[2026-01-22T07:16:36.798Z] [INFO] 🔧 Raw command executed:
+[2026-01-22T07:16:36.798Z] [INFO]    /home/hive/.nvm/versions/node/v20.20.0/bin/node /home/hive/.bun/bin/solve https://github.com/Jhon-Crow/godot-topdown-MVP/issues/217 --model opus --attach-logs --verbose --no-tool-check --auto-resume-on-limit-reset --tokens-budget-stats
+[2026-01-22T07:16:36.798Z] [INFO] 
+[2026-01-22T07:16:36.818Z] [INFO] 
+[2026-01-22T07:16:36.822Z] [WARNING] ⚠️  SECURITY WARNING: --attach-logs is ENABLED
+[2026-01-22T07:16:36.823Z] [INFO] 
+[2026-01-22T07:16:36.823Z] [INFO]    This option will upload the complete solution draft log file to the Pull Request.
+[2026-01-22T07:16:36.823Z] [INFO]    The log may contain sensitive information such as:
+[2026-01-22T07:16:36.824Z] [INFO]    • API keys, tokens, or secrets
+[2026-01-22T07:16:36.824Z] [INFO]    • File paths and directory structures
+[2026-01-22T07:16:36.825Z] [INFO]    • Command outputs and error messages
+[2026-01-22T07:16:36.825Z] [INFO]    • Internal system information
+[2026-01-22T07:16:36.826Z] [INFO] 
+[2026-01-22T07:16:36.826Z] [INFO]    ⚠️  DO NOT use this option with public repositories or if the log
+[2026-01-22T07:16:36.826Z] [INFO]        might contain sensitive data that should not be shared publicly.
+[2026-01-22T07:16:36.827Z] [INFO] 
+[2026-01-22T07:16:36.827Z] [INFO]    Continuing in 5 seconds... (Press Ctrl+C to abort)
+[2026-01-22T07:16:36.827Z] [INFO] 
+[2026-01-22T07:16:41.834Z] [INFO] 
+[2026-01-22T07:16:41.862Z] [INFO] 💾 Disk space check: 30885MB available (2048MB required) ✅
+[2026-01-22T07:16:41.864Z] [INFO] 🧠 Memory check: 10219MB available, swap: 4095MB (0MB used), total: 14314MB (256MB required) ✅
+[2026-01-22T07:16:41.887Z] [INFO] ⏩ Skipping tool connection validation (dry-run mode or skip-tool-connection-check enabled)
+[2026-01-22T07:16:41.888Z] [INFO] ⏩ Skipping GitHub authentication check (dry-run mode or skip-tool-connection-check enabled)
+[2026-01-22T07:16:41.888Z] [INFO] 📋 URL validation:
+[2026-01-22T07:16:41.888Z] [INFO]    Input URL: https://github.com/Jhon-Crow/godot-topdown-MVP/issues/217
+[2026-01-22T07:16:41.888Z] [INFO]    Is Issue URL: true
+[2026-01-22T07:16:41.888Z] [INFO]    Is PR URL: false
+[2026-01-22T07:16:41.889Z] [INFO] 🔍 Checking repository access for auto-fork...
+[2026-01-22T07:16:42.726Z] [INFO]    Repository visibility: public
+[2026-01-22T07:16:42.726Z] [INFO] ✅ Auto-fork: No write access detected, enabling fork mode
+[2026-01-22T07:16:42.727Z] [INFO] ✅ Repository access check: Skipped (fork mode enabled)
+[2026-01-22T07:16:43.112Z] [INFO]    Repository visibility: public
+[2026-01-22T07:16:43.112Z] [INFO]    Auto-cleanup default: false (repository is public)
+[2026-01-22T07:16:43.113Z] [INFO] 🔍 Auto-continue enabled: Checking for existing PRs for issue #217...
+[2026-01-22T07:16:43.930Z] [INFO] 🔍 Fork mode: Checking for existing branches in konard/Jhon-Crow-godot-topdown-MVP...
+[2026-01-22T07:16:45.050Z] [INFO] 📋 Found 9 existing PR(s) linked to issue #217
+[2026-01-22T07:16:45.051Z] [INFO]   PR #220: created 0h ago (OPEN, draft)
+[2026-01-22T07:16:45.051Z] [INFO]   PR #220: Branch 'issue-211-ec8419a1a04d' doesn't match expected pattern 'issue-217-*' - skipping
+[2026-01-22T07:16:45.051Z] [INFO]   PR #219: created 0h ago (OPEN, ready)
+[2026-01-22T07:16:45.052Z] [INFO]   PR #219: Branch 'issue-218-83341a85845f' doesn't match expected pattern 'issue-217-*' - skipping
+[2026-01-22T07:16:45.052Z] [INFO]   PR #191: created 6h ago (OPEN, ready)
+[2026-01-22T07:16:45.052Z] [INFO]   PR #191: Branch 'issue-190-adc7b44ddf0f' doesn't match expected pattern 'issue-217-*' - skipping
+[2026-01-22T07:16:45.052Z] [INFO]   PR #185: created 13h ago (OPEN, ready)
+[2026-01-22T07:16:45.052Z] [INFO]   PR #185: Branch 'issue-64-83f68d14faa8' doesn't match expected pattern 'issue-217-*' - skipping
+[2026-01-22T07:16:45.052Z] [INFO]   PR #164: created 24h ago (OPEN, ready)
+[2026-01-22T07:16:45.052Z] [INFO]   PR #164: Branch 'issue-162-f293ab8a56a2' doesn't match expected pattern 'issue-217-*' - skipping
+[2026-01-22T07:16:45.052Z] [INFO]   PR #156: created 29h ago (OPEN, ready)
+[2026-01-22T07:16:45.053Z] [INFO]   PR #156: Branch 'issue-66-8a5107c31340' doesn't match expected pattern 'issue-217-*' - skipping
+[2026-01-22T07:16:45.053Z] [INFO]   PR #148: created 35h ago (OPEN, ready)
+[2026-01-22T07:16:45.053Z] [INFO]   PR #148: Branch 'issue-99-350ba6cf4919' doesn't match expected pattern 'issue-217-*' - skipping
+[2026-01-22T07:16:45.053Z] [INFO]   PR #143: created 36h ago (OPEN, ready)
+[2026-01-22T07:16:45.053Z] [INFO]   PR #143: Branch 'issue-67-5378cf7bc660' doesn't match expected pattern 'issue-217-*' - skipping
+[2026-01-22T07:16:45.053Z] [INFO]   PR #108: created 99h ago (OPEN, ready)
+[2026-01-22T07:16:45.053Z] [INFO]   PR #108: Branch 'issue-101-7f4b45f5b977' doesn't match expected pattern 'issue-217-*' - skipping
+[2026-01-22T07:16:45.053Z] [INFO] ⏭️  No suitable PRs found (missing CLAUDE.md/.gitkeep or older than 24h) - creating new PR as usual
+[2026-01-22T07:16:45.053Z] [INFO] 📝 Issue mode: Working with issue #217
+[2026-01-22T07:16:45.054Z] [INFO] 
+Creating temporary directory: /tmp/gh-issue-solver-1769066205054
+[2026-01-22T07:16:45.056Z] [INFO] 
+🍴 Fork mode:                ENABLED
+[2026-01-22T07:16:45.056Z] [INFO]  Checking fork status...   
+
+[2026-01-22T07:16:45.423Z] [INFO] 🔍 Detecting fork conflicts... 
+[2026-01-22T07:16:46.473Z] [INFO] ✅ No fork conflict:         Safe to proceed
+[2026-01-22T07:16:46.849Z] [INFO] ✅ Fork exists:              konard/Jhon-Crow-godot-topdown-MVP
+[2026-01-22T07:16:46.850Z] [INFO] 🔍 Validating fork parent... 
+[2026-01-22T07:16:47.279Z] [INFO] ✅ Fork parent validated:    Jhon-Crow/godot-topdown-MVP
+[2026-01-22T07:16:47.280Z] [INFO] 
+📥 Cloning repository:       konard/Jhon-Crow-godot-topdown-MVP
+[2026-01-22T07:16:49.222Z] [INFO] ✅ Cloned to:                /tmp/gh-issue-solver-1769066205054
+[2026-01-22T07:16:49.275Z] [INFO] 🔗 Setting upstream:         Jhon-Crow/godot-topdown-MVP
+[2026-01-22T07:16:49.323Z] [INFO] ℹ️ Upstream exists:          Using existing upstream remote
+[2026-01-22T07:16:49.324Z] [INFO] 🔄 Fetching upstream...      
+[2026-01-22T07:16:49.653Z] [INFO] ✅ Upstream fetched:         Successfully
+[2026-01-22T07:16:49.654Z] [INFO] 🔄 Syncing default branch... 
+[2026-01-22T07:16:50.053Z] [INFO] ℹ️ Default branch:           main
+[2026-01-22T07:16:50.387Z] [INFO] ✅ Default branch synced:    with upstream/main
+[2026-01-22T07:16:50.388Z] [INFO] 🔄 Pushing to fork:          main branch
+[2026-01-22T07:16:50.831Z] [INFO] ✅ Fork updated:             Default branch pushed to fork
+[2026-01-22T07:16:50.972Z] [INFO] 
+📌 Default branch:           main
+[2026-01-22T07:16:51.019Z] [INFO] 
+🌿 Creating branch:          issue-217-6e363ec134f9 from main (default)
+[2026-01-22T07:16:51.074Z] [INFO] 🔍 Verifying:                Branch creation...
+[2026-01-22T07:16:51.117Z] [INFO] ✅ Branch created:           issue-217-6e363ec134f9
+[2026-01-22T07:16:51.118Z] [INFO] ✅ Current branch:           issue-217-6e363ec134f9
+[2026-01-22T07:16:51.118Z] [INFO]    Branch operation: Create new branch
+[2026-01-22T07:16:51.118Z] [INFO]    Branch verification: Matches expected
+[2026-01-22T07:16:51.121Z] [INFO] 
+🚀 Auto PR creation:         ENABLED
+[2026-01-22T07:16:51.121Z] [INFO]      Creating:               Initial commit and draft PR...
+[2026-01-22T07:16:51.121Z] [INFO] 
+[2026-01-22T07:16:51.164Z] [INFO]    Using CLAUDE.md mode (--claude-file=true, --gitkeep-file=false, --auto-gitkeep-file=true)
+[2026-01-22T07:16:51.164Z] [INFO] 📝 Creating:                 CLAUDE.md with task details
+[2026-01-22T07:16:51.165Z] [INFO]    Issue URL from argv['issue-url']: https://github.com/Jhon-Crow/godot-topdown-MVP/issues/217
+[2026-01-22T07:16:51.165Z] [INFO]    Issue URL from argv._[0]: undefined
+[2026-01-22T07:16:51.165Z] [INFO]    Final issue URL: https://github.com/Jhon-Crow/godot-topdown-MVP/issues/217
+[2026-01-22T07:16:51.165Z] [INFO] ✅ File created:             CLAUDE.md
+[2026-01-22T07:16:51.166Z] [INFO] 📦 Adding file:              To git staging
+[2026-01-22T07:16:51.269Z] [INFO]    Git status after add: A  CLAUDE.md
+[2026-01-22T07:16:51.269Z] [INFO] 📝 Creating commit:          With CLAUDE.md file
+[2026-01-22T07:16:51.333Z] [INFO] ✅ Commit created:           Successfully with CLAUDE.md
+[2026-01-22T07:16:51.334Z] [INFO]    Commit output: [issue-217-6e363ec134f9 7975b29] Initial commit with task details
+ 1 file changed, 7 insertions(+)
+ create mode 100644 CLAUDE.md
+[2026-01-22T07:16:51.384Z] [INFO]    Commit hash: 7975b29...
+[2026-01-22T07:16:51.439Z] [INFO]    Latest commit: 7975b29 Initial commit with task details
+[2026-01-22T07:16:51.495Z] [INFO]    Git status: clean
+[2026-01-22T07:16:51.545Z] [INFO]    Remotes: origin	https://github.com/konard/Jhon-Crow-godot-topdown-MVP.git (fetch)
+[2026-01-22T07:16:51.599Z] [INFO]    Branch info: * issue-217-6e363ec134f9 7975b29 [origin/main: ahead 1] Initial commit with task details
+  main                   751c691 [origin/main] Merge pull request #215 from konard/issue-210-53f792e0fc95
+[2026-01-22T07:16:51.600Z] [INFO] 📤 Pushing branch:           To remote repository...
+[2026-01-22T07:16:51.600Z] [INFO]    Push command: git push -u origin issue-217-6e363ec134f9
+[2026-01-22T07:16:52.410Z] [INFO]    Push exit code: 0
+[2026-01-22T07:16:52.410Z] [INFO]    Push output: remote: 
+remote: Create a pull request for 'issue-217-6e363ec134f9' on GitHub by visiting:        
+remote:      https://github.com/konard/Jhon-Crow-godot-topdown-MVP/pull/new/issue-217-6e363ec134f9        
+remote: 
+To https://github.com/konard/Jhon-Crow-godot-topdown-MVP.git
+ * [new branch]      issue-217-6e363ec134f9 -> issue-217-6e363ec134f9
+branch 'issue-217-6e363ec134f9' set up to track 'origin/issue-217-6e363ec134f9'.
+[2026-01-22T07:16:52.410Z] [INFO] ✅ Branch pushed:            Successfully to remote
+[2026-01-22T07:16:52.411Z] [INFO]    Push output: remote: 
+remote: Create a pull request for 'issue-217-6e363ec134f9' on GitHub by visiting:        
+remote:      https://github.com/konard/Jhon-Crow-godot-topdown-MVP/pull/new/issue-217-6e363ec134f9        
+remote: 
+To https://github.com/konard/Jhon-Crow-godot-topdown-MVP.git
+ * [new branch]      issue-217-6e363ec134f9 -> issue-217-6e363ec134f9
+branch 'issue-217-6e363ec134f9' set up to track 'origin/issue-217-6e363ec134f9'.
+[2026-01-22T07:16:52.411Z] [INFO]    Waiting for GitHub to sync...
+[2026-01-22T07:16:54.937Z] [INFO]    Compare API check: 1 commit(s) ahead of main
+[2026-01-22T07:16:54.937Z] [INFO]    GitHub compare API ready: 1 commit(s) found
+[2026-01-22T07:16:55.435Z] [INFO]    Branch verified on GitHub: issue-217-6e363ec134f9
+[2026-01-22T07:16:56.019Z] [INFO]    Remote commit SHA: 7975b29...
+[2026-01-22T07:16:56.020Z] [INFO] 📋 Getting issue:            Title from GitHub...
+[2026-01-22T07:16:56.379Z] [INFO]    Issue title: "добавить модельки врагов"
+[2026-01-22T07:16:56.379Z] [INFO] 👤 Getting user:             Current GitHub account...
+[2026-01-22T07:16:56.897Z] [INFO]    Current user: konard
+[2026-01-22T07:16:57.162Z] [INFO]    User is not a collaborator (will skip assignment)
+[2026-01-22T07:16:57.164Z] [INFO]    User is not a collaborator (will skip assignment)
+[2026-01-22T07:16:57.196Z] [INFO] 🔄 Fetching:                 Latest main branch...
+[2026-01-22T07:16:57.530Z] [INFO] ✅ Base updated:             Fetched latest main
+[2026-01-22T07:16:57.531Z] [INFO] 🔍 Checking:                 Commits between branches...
+[2026-01-22T07:16:57.579Z] [INFO]    Commits ahead of origin/main: 1
+[2026-01-22T07:16:57.580Z] [INFO] ✅ Commits found:            1 commit(s) ahead
+[2026-01-22T07:16:57.580Z] [INFO] 🔀 Creating PR:              Draft pull request...
+[2026-01-22T07:16:57.580Z] [INFO] 🎯 Target branch:            main (default)
+[2026-01-22T07:16:57.581Z] [INFO]    PR Title: [WIP] добавить модельки врагов
+[2026-01-22T07:16:57.581Z] [INFO]    Base branch: main
+[2026-01-22T07:16:57.581Z] [INFO]    Head branch: issue-217-6e363ec134f9
+[2026-01-22T07:16:57.581Z] [INFO]    Assignee: konard
+[2026-01-22T07:16:57.581Z] [INFO]    PR Body:
+## 🤖 AI-Powered Solution Draft
+
+This pull request is being automatically generated to solve issue Jhon-Crow/godot-topdown-MVP#217.
+
+### 📋 Issue Reference
+Fixes Jhon-Crow/godot-topdown-MVP#217
+
+### 🚧 Status
+**Work in Progress** - The AI assistant is currently analyzing and implementing the solution draft.
+
+### 📝 Implementation Details
+_Details will be added as the solution draft is developed..._
+
+---
+*This PR was created automatically by the AI issue solver*
+[2026-01-22T07:16:57.584Z] [INFO]    Command: cd "/tmp/gh-issue-solver-1769066205054" && gh pr create --draft --title "$(cat '/tmp/pr-title-1769066217584.txt')" --body-file "/tmp/pr-body-1769066217584.md" --base main --head konard:issue-217-6e363ec134f9 --repo Jhon-Crow/godot-topdown-MVP
+[2026-01-22T07:16:59.658Z] [INFO] 🔍 Verifying:                PR creation...
+[2026-01-22T07:17:00.016Z] [INFO] ✅ Verification:             PR exists on GitHub
+[2026-01-22T07:17:00.017Z] [INFO] ✅ PR created:               #221
+[2026-01-22T07:17:00.018Z] [INFO] 📍 PR URL:                   https://github.com/Jhon-Crow/godot-topdown-MVP/pull/221
+[2026-01-22T07:17:00.018Z] [INFO] ℹ️ Note:                     Could not assign (no permission)
+[2026-01-22T07:17:00.019Z] [INFO] 🔗 Linking:                  Issue #217 to PR #221...
+[2026-01-22T07:17:00.560Z] [INFO]    Issue node ID: I_kwDOQ35BQ87k9zEs
+[2026-01-22T07:17:00.904Z] [INFO]    PR node ID: PR_kwDOQ35BQ86-oLAV
+[2026-01-22T07:17:01.327Z] [INFO] 
+[2026-01-22T07:17:01.330Z] [WARNING] ⚠️ ISSUE LINK MISSING:       PR not linked to issue
+[2026-01-22T07:17:01.331Z] [INFO] 
+[2026-01-22T07:17:01.335Z] [WARNING]    The PR was created from a fork but wasn't linked to the issue.
+[2026-01-22T07:17:01.337Z] [WARNING]    Expected: "Fixes Jhon-Crow/godot-topdown-MVP#217" in PR body
+[2026-01-22T07:17:01.339Z] [INFO] 
+[2026-01-22T07:17:01.339Z] [WARNING]    To fix manually:
+[2026-01-22T07:17:01.340Z] [WARNING]    1. Edit the PR description at: https://github.com/Jhon-Crow/godot-topdown-MVP/pull/221
+[2026-01-22T07:17:01.342Z] [WARNING]    2. Add this line: Fixes Jhon-Crow/godot-topdown-MVP#217
+[2026-01-22T07:17:01.342Z] [INFO] 
+[2026-01-22T07:17:01.938Z] [INFO]   👤 Current user:           konard
+[2026-01-22T07:17:01.940Z] [INFO] 
+📊 Comment counting conditions:
+[2026-01-22T07:17:01.940Z] [INFO]    prNumber: 221
+[2026-01-22T07:17:01.941Z] [INFO]    branchName: issue-217-6e363ec134f9
+[2026-01-22T07:17:01.942Z] [INFO]    isContinueMode: false
+[2026-01-22T07:17:01.943Z] [INFO]    Will count comments: true
+[2026-01-22T07:17:01.945Z] [INFO] 💬 Counting comments:        Checking for new comments since last commit...
+[2026-01-22T07:17:01.948Z] [INFO]    PR #221 on branch: issue-217-6e363ec134f9
+[2026-01-22T07:17:01.949Z] [INFO]    Owner/Repo: Jhon-Crow/godot-topdown-MVP
+[2026-01-22T07:17:02.635Z] [INFO]   📅 Last commit time (from API): 2026-01-22T07:16:51.000Z
+[2026-01-22T07:17:04.024Z] [INFO]   💬 New PR comments:        0
+[2026-01-22T07:17:04.024Z] [INFO]   💬 New PR review comments: 0
+[2026-01-22T07:17:04.025Z] [INFO]   💬 New issue comments:     0
+[2026-01-22T07:17:04.025Z] [INFO]    Total new comments: 0
+[2026-01-22T07:17:04.027Z] [INFO]    Comment lines to add: No (saving tokens)
+[2026-01-22T07:17:04.028Z] [INFO]    PR review comments fetched: 0
+[2026-01-22T07:17:04.028Z] [INFO]    PR conversation comments fetched: 0
+[2026-01-22T07:17:04.029Z] [INFO]    Total PR comments checked: 0
+[2026-01-22T07:17:06.760Z] [INFO]    Feedback info will be added to prompt:
+[2026-01-22T07:17:06.762Z] [INFO] 📅 Getting timestamps:       From GitHub servers...
+[2026-01-22T07:17:06.761Z] [INFO]      - Pull request description was edited after last commit
+[2026-01-22T07:17:07.268Z] [INFO]   📝 Issue updated:          2026-01-22T06:46:34.000Z
+[2026-01-22T07:17:07.581Z] [INFO]   💬 Comments:               None found
+[2026-01-22T07:17:08.013Z] [INFO]   🔀 Recent PR:              2026-01-22T07:16:58.000Z
+[2026-01-22T07:17:08.014Z] [INFO] 
+✅ Reference time:           2026-01-22T07:16:58.000Z
+[2026-01-22T07:17:08.015Z] [INFO] 
+🔍 Checking for uncommitted changes to include as feedback...
+[2026-01-22T07:17:08.073Z] [INFO] ✅ No uncommitted changes found
+[2026-01-22T07:17:08.407Z] [INFO] 📦 Fork workflows detected:  https://github.com/konard/Jhon-Crow-godot-topdown-MVP/actions?query=branch%3Aissue-217-6e363ec134f9
+[2026-01-22T07:17:10.849Z] [INFO] 🎭 Playwright MCP detected - enabling browser automation hints
+[2026-01-22T07:17:10.856Z] [INFO] 
+📝 Final prompt structure:
+[2026-01-22T07:17:10.856Z] [INFO]    Characters: 529
+[2026-01-22T07:17:10.857Z] [INFO]    System prompt characters: 11916
+[2026-01-22T07:17:10.857Z] [INFO]    Feedback info: Included
+[2026-01-22T07:17:10.859Z] [INFO] 
+🤖 Executing Claude:         OPUS
+[2026-01-22T07:17:10.859Z] [INFO]    Model: opus
+[2026-01-22T07:17:10.859Z] [INFO]    Working directory: /tmp/gh-issue-solver-1769066205054
+[2026-01-22T07:17:10.860Z] [INFO]    Branch: issue-217-6e363ec134f9
+[2026-01-22T07:17:10.860Z] [INFO]    Prompt length: 529 chars
+[2026-01-22T07:17:10.861Z] [INFO]    System prompt length: 11916 chars
+[2026-01-22T07:17:10.861Z] [INFO]    Feedback info included: Yes (1 lines)
+[2026-01-22T07:17:10.914Z] [INFO] 📈 System resources before execution:
+[2026-01-22T07:17:10.914Z] [INFO]    Memory: MemFree:         8312060 kB
+[2026-01-22T07:17:10.915Z] [INFO]    Load: 0.49 0.51 0.33 1/488 368403
+[2026-01-22T07:17:10.915Z] [INFO] 
+📝 Raw command:              
+[2026-01-22T07:17:10.915Z] [INFO] (cd "/tmp/gh-issue-solver-1769066205054" && claude --output-format stream-json --verbose --dangerously-skip-permissions --model claude-opus-4-5-20251101 -p "Issue to solve: https://github.com/Jhon-Crow/godot-topdown-MVP/issues/217
+Your prepared branch: issue-217-6e363ec134f9
+Your prepared working directory: /tmp/gh-issue-solver-1769066205054
+Your prepared Pull Request: https://github.com/Jhon-Crow/godot-topdown-MVP/pull/221
+Your forked repository: konard/Jhon-Crow-godot-topdown-MVP
+Original repository (upstream): Jhon-Crow/godot-topdown-MVP
+GitHub Actions on your fork: https://github.com/konard/Jhon-Crow-godot-topdown-MVP/actions?query=branch%3Aissue-217-6e363ec134f9
+
+Proceed.
+" --append-system-prompt "You are an AI issue solver. You prefer to find the root cause of each and every issue. When you talk, you prefer to speak with facts which you have double-checked yourself or cite sources that provide evidence, like quote actual code or give references to documents or pages found on the internet. You are polite and patient, and prefer to assume good intent, trying your best to be helpful. If you are unsure or have assumptions, you prefer to test them yourself or ask questions to clarify requirements.
+General guidelines.
+   - When you execute commands, always save their logs to files for easier reading if the output becomes large.
+   - When running commands, do not set a timeout yourself — let them run as long as needed (default timeout - 2 minutes is more than enough), and once they finish, review the logs in the file.
+   - When running sudo commands (especially package installations like apt-get, yum, npm install, etc.), always run them in the background to avoid timeout issues and permission errors when the process needs to be killed. Use the run_in_background parameter or append & to the command.
+   - When CI is failing or user reports failures, consider adding a detailed investigation protocol to your todo list with these steps:
+      Step 1: List recent runs with timestamps using: gh run list --repo Jhon-Crow/godot-topdown-MVP --branch issue-217-6e363ec134f9 --limit 5 --json databaseId,conclusion,createdAt,headSha
+      Step 2: Verify runs are after the latest commit by checking timestamps and SHA
+      Step 3: For each non-passing run, download logs to preserve them: gh run view {run-id} --repo Jhon-Crow/godot-topdown-MVP --log > ci-logs/{workflow}-{run-id}.log
+      Step 4: Read each downloaded log file using Read tool to understand the actual failures
+      Step 5: Report findings with specific errors and line numbers from logs
+      This detailed investigation is especially helpful when user mentions CI failures, asks to investigate logs, you see non-passing status, or when finalizing a PR.
+      Note: If user says \"failing\" but tools show \"passing\", this might indicate stale data - consider downloading fresh logs and checking timestamps to resolve the discrepancy.
+   - When a code or log file has more than 1500 lines, read it in chunks of 1500 lines.
+   - When facing a complex problem, do as much tracing as possible and turn on all verbose modes.
+   - When you create debug, test, or example/experiment scripts for fixing, always keep them in an examples and/or experiments folders so you can reuse them later.
+   - When testing your assumptions, use the experiment scripts, and add it to experiments folder.
+   - When your experiments can show real world use case of the software, add it to examples folder.
+   - When you face something extremely hard, use divide and conquer — it always helps.
+
+Initial research.
+   - When you start, make sure you create detailed plan for yourself and follow your todo list step by step, make sure that as many points from these guidelines are added to your todo list to keep track of everything that can help you solve the issue with highest possible quality.
+   - When user mentions CI failures or asks to investigate logs, consider adding these todos to track the investigation: (1) List recent CI runs with timestamps, (2) Download logs from failed runs to ci-logs/ directory, (3) Analyze error messages and identify root cause, (4) Implement fix, (5) Verify fix resolves the specific errors found in logs.
+   - When you read issue, read all details and comments thoroughly.
+   - When you see screenshots or images in issue descriptions, pull request descriptions, comments, or discussions, use WebFetch tool (or fetch tool) to download the image first, then use Read tool to view and analyze it. IMPORTANT: Before reading downloaded images with the Read tool, verify the file is a valid image (not HTML). Use a CLI tool like 'file' command to check the actual file format. Reading corrupted or non-image files (like GitHub's HTML 404 pages saved as .png) can cause \"Could not process image\" errors and may crash the AI solver process. If the file command shows \"HTML\" or \"text\", the download failed and you should retry or skip the image.
+   - When you need issue details, use gh issue view https://github.com/Jhon-Crow/godot-topdown-MVP/issues/217.
+   - When you need related code, use gh search code --owner Jhon-Crow [keywords].
+   - When you need repo context, read files in your working directory.
+   - When you study related work, study the most recent related pull requests.
+   - When issue is not defined enough, write a comment to ask clarifying questions.
+   - When accessing GitHub Gists (especially private ones), use gh gist view command instead of direct URL fetching to ensure proper authentication.
+   - When you are fixing a bug, please make sure you first find the actual root cause, do as many experiments as needed.
+   - When you are fixing a bug and code does not have enough tracing/logs, add them and make sure they stay in the code, but are switched off by default.
+   - When you need comments on a pull request, note that GitHub has THREE different comment types with different API endpoints:
+      1. PR review comments (inline code comments): gh api repos/Jhon-Crow/godot-topdown-MVP/pulls/221/comments --paginate
+      2. PR conversation comments (general discussion): gh api repos/Jhon-Crow/godot-topdown-MVP/issues/221/comments --paginate
+      3. PR reviews (approve/request changes): gh api repos/Jhon-Crow/godot-topdown-MVP/pulls/221/reviews --paginate
+      IMPORTANT: The command \"gh pr view --json comments\" ONLY returns conversation comments and misses review comments!
+   - When you need latest comments on issue, use gh api repos/Jhon-Crow/godot-topdown-MVP/issues/217/comments --paginate.
+
+Solution development and testing.
+   - When issue is solvable, implement code with tests.
+   - When implementing features, search for similar existing implementations in the codebase and use them as examples instead of implementing everything from scratch.
+   - When coding, each atomic step that can be useful by itself should be commited to the pull request's branch, meaning if work will be interrupted by any reason parts of solution will still be kept intact and safe in pull request.
+   - When you test:
+      start from testing of small functions using separate scripts;
+      write unit tests with mocks for easy and quick start.
+   - When you test integrations, use existing framework.
+   - When you test solution draft, include automated checks in pr.
+   - When issue is unclear, write comment on issue asking questions.
+   - When you encounter any problems that you unable to solve yourself (any human feedback or help), write a comment to the pull request asking for help.
+   - When you need human help, use gh pr comment 221 --body \"your message\" to comment on existing PR.
+
+Preparing pull request.
+   - When you code, follow contributing guidelines.
+   - When you commit, write clear message.
+   - When you need examples of style, use gh pr list --repo Jhon-Crow/godot-topdown-MVP --state merged --search [keywords].
+   - When you open pr, describe solution draft and include tests.
+   - When there is a package with version and GitHub Actions workflows for automatic release, update the version (or other necessary release trigger) in your pull request to prepare for next release.
+   - When you update existing pr 221, use gh pr edit to modify title and description.
+   - When you are about to commit or push code, ALWAYS run local CI checks first if they are available in contributing guidelines (like ruff check, mypy, eslint, etc.) to catch errors before pushing.
+   - When you finalize the pull request:
+      follow style from merged prs for code, title, and description,
+      make sure no uncommitted changes corresponding to the original requirements are left behind,
+      make sure the default branch is merged to the pull request's branch,
+      make sure all CI checks passing if they exist before you finish,
+      check for latest comments on the issue and pull request to ensure no recent feedback was missed,
+      double-check that all changes in the pull request answer to original requirements of the issue,
+      make sure no new new bugs are introduced in pull request by carefully reading gh pr diff,
+      make sure no previously existing features were removed without an explicit request from users via the issue description, issue comments, and/or pull request comments.
+   - When you finish implementation, use gh pr ready 221.
+
+Workflow and collaboration.
+   - When you check branch, verify with git branch --show-current.
+   - When you push, push only to branch issue-217-6e363ec134f9.
+   - When you finish, create a pull request from branch issue-217-6e363ec134f9. (Note: PR 221 already exists, update it instead)
+   - When you organize workflow, use pull requests instead of direct merges to default branch (main or master).
+   - When you manage commits, preserve commit history for later analysis.
+   - When you contribute, keep repository history forward-moving with regular commits, pushes, and reverts if needed.
+   - When you face conflict that you cannot resolve yourself, ask for help.
+   - When you collaborate, respect branch protections by working only on issue-217-6e363ec134f9.
+   - When you mention result, include pull request url or comment url.
+   - When you need to create pr, remember pr 221 already exists for this branch.
+
+Self review.
+   - When you check your solution draft, run all tests locally.
+   - When you check your solution draft, verify git status shows a clean working tree with no uncommitted changes.
+   - When you compare with repo style, use gh pr diff [number].
+   - When you finalize, confirm code, tests, and description are consistent.
+
+GitHub CLI command patterns.
+   - IMPORTANT: Always use --paginate flag when fetching lists from GitHub API to ensure all results are returned (GitHub returns max 30 per page by default).
+   - When listing PR review comments (inline code comments), use gh api repos/OWNER/REPO/pulls/NUMBER/comments --paginate.
+   - When listing PR conversation comments, use gh api repos/OWNER/REPO/issues/NUMBER/comments --paginate.
+   - When listing PR reviews, use gh api repos/OWNER/REPO/pulls/NUMBER/reviews --paginate.
+   - When listing issue comments, use gh api repos/OWNER/REPO/issues/NUMBER/comments --paginate.
+   - When adding PR comment, use gh pr comment NUMBER --body \"text\" --repo OWNER/REPO.
+   - When adding issue comment, use gh issue comment NUMBER --body \"text\" --repo OWNER/REPO.
+   - When viewing PR details, use gh pr view NUMBER --repo OWNER/REPO.
+   - When filtering with jq, use gh api repos/\${owner}/\${repo}/pulls/\${prNumber}/comments --paginate --jq 'reverse | .[0:5]'.
+
+Playwright MCP usage (browser automation via mcp__playwright__* tools).
+   - When you develop frontend web applications (HTML, CSS, JavaScript, React, Vue, Angular, etc.), use Playwright MCP tools to test the UI in a real browser.
+   - When WebFetch tool fails to retrieve expected content (e.g., returns empty content, JavaScript-rendered pages, or login-protected pages), use Playwright MCP tools (browser_navigate, browser_snapshot) as a fallback for web browsing.
+   - When you need to interact with dynamic web pages that require JavaScript execution, use Playwright MCP tools.
+   - When you need to visually verify how a web page looks or take screenshots, use browser_take_screenshot from Playwright MCP.
+   - When you need to fill forms, click buttons, or perform user interactions on web pages, use Playwright MCP tools (browser_click, browser_type, browser_fill_form).
+   - When you need to test responsive design or different viewport sizes, use browser_resize from Playwright MCP.
+   - When you finish using the browser, always close it with browser_close to free resources." | jq -c .)
+[2026-01-22T07:17:10.916Z] [INFO] 
+[2026-01-22T07:17:10.916Z] [INFO] 📋 User prompt:
+[2026-01-22T07:17:10.916Z] [INFO] ---BEGIN USER PROMPT---
+[2026-01-22T07:17:10.916Z] [INFO] Issue to solve: https://github.com/Jhon-Crow/godot-topdown-MVP/issues/217
+Your prepared branch: issue-217-6e363ec134f9
+Your prepared working directory: /tmp/gh-issue-solver-1769066205054
+Your prepared Pull Request: https://github.com/Jhon-Crow/godot-topdown-MVP/pull/221
+Your forked repository: konard/Jhon-Crow-godot-topdown-MVP
+Original repository (upstream): Jhon-Crow/godot-topdown-MVP
+GitHub Actions on your fork: https://github.com/konard/Jhon-Crow-godot-topdown-MVP/actions?query=branch%3Aissue-217-6e363ec134f9
+
+Proceed.
+
+[2026-01-22T07:17:10.917Z] [INFO] ---END USER PROMPT---
+[2026-01-22T07:17:10.917Z] [INFO] 
+[2026-01-22T07:17:10.917Z] [INFO] 📋 System prompt:
+[2026-01-22T07:17:10.917Z] [INFO] ---BEGIN SYSTEM PROMPT---
+[2026-01-22T07:17:10.917Z] [INFO] You are an AI issue solver. You prefer to find the root cause of each and every issue. When you talk, you prefer to speak with facts which you have double-checked yourself or cite sources that provide evidence, like quote actual code or give references to documents or pages found on the internet. You are polite and patient, and prefer to assume good intent, trying your best to be helpful. If you are unsure or have assumptions, you prefer to test them yourself or ask questions to clarify requirements.
+General guidelines.
+   - When you execute commands, always save their logs to files for easier reading if the output becomes large.
+   - When running commands, do not set a timeout yourself — let them run as long as needed (default timeout - 2 minutes is more than enough), and once they finish, review the logs in the file.
+   - When running sudo commands (especially package installations like apt-get, yum, npm install, etc.), always run them in the background to avoid timeout issues and permission errors when the process needs to be killed. Use the run_in_background parameter or append & to the command.
+   - When CI is failing or user reports failures, consider adding a detailed investigation protocol to your todo list with these steps:
+      Step 1: List recent runs with timestamps using: gh run list --repo Jhon-Crow/godot-topdown-MVP --branch issue-217-6e363ec134f9 --limit 5 --json databaseId,conclusion,createdAt,headSha
+      Step 2: Verify runs are after the latest commit by checking timestamps and SHA
+      Step 3: For each non-passing run, download logs to preserve them: gh run view {run-id} --repo Jhon-Crow/godot-topdown-MVP --log > ci-logs/{workflow}-{run-id}.log
+      Step 4: Read each downloaded log file using Read tool to understand the actual failures
+      Step 5: Report findings with specific errors and line numbers from logs
+      This detailed investigation is especially helpful when user mentions CI failures, asks to investigate logs, you see non-passing status, or when finalizing a PR.
+      Note: If user says "failing" but tools show "passing", this might indicate stale data - consider downloading fresh logs and checking timestamps to resolve the discrepancy.
+   - When a code or log file has more than 1500 lines, read it in chunks of 1500 lines.
+   - When facing a complex problem, do as much tracing as possible and turn on all verbose modes.
+   - When you create debug, test, or example/experiment scripts for fixing, always keep them in an examples and/or experiments folders so you can reuse them later.
+   - When testing your assumptions, use the experiment scripts, and add it to experiments folder.
+   - When your experiments can show real world use case of the software, add it to examples folder.
+   - When you face something extremely hard, use divide and conquer — it always helps.
+
+Initial research.
+   - When you start, make sure you create detailed plan for yourself and follow your todo list step by step, make sure that as many points from these guidelines are added to your todo list to keep track of everything that can help you solve the issue with highest possible quality.
+   - When user mentions CI failures or asks to investigate logs, consider adding these todos to track the investigation: (1) List recent CI runs with timestamps, (2) Download logs from failed runs to ci-logs/ directory, (3) Analyze error messages and identify root cause, (4) Implement fix, (5) Verify fix resolves the specific errors found in logs.
+   - When you read issue, read all details and comments thoroughly.
+   - When you see screenshots or images in issue descriptions, pull request descriptions, comments, or discussions, use WebFetch tool (or fetch tool) to download the image first, then use Read tool to view and analyze it. IMPORTANT: Before reading downloaded images with the Read tool, verify the file is a valid image (not HTML). Use a CLI tool like 'file' command to check the actual file format. Reading corrupted or non-image files (like GitHub's HTML 404 pages saved as .png) can cause "Could not process image" errors and may crash the AI solver process. If the file command shows "HTML" or "text", the download failed and you should retry or skip the image.
+   - When you need issue details, use gh issue view https://github.com/Jhon-Crow/godot-topdown-MVP/issues/217.
+   - When you need related code, use gh search code --owner Jhon-Crow [keywords].
+   - When you need repo context, read files in your working directory.
+   - When you study related work, study the most recent related pull requests.
+   - When issue is not defined enough, write a comment to ask clarifying questions.
+   - When accessing GitHub Gists (especially private ones), use gh gist view command instead of direct URL fetching to ensure proper authentication.
+   - When you are fixing a bug, please make sure you first find the actual root cause, do as many experiments as needed.
+   - When you are fixing a bug and code does not have enough tracing/logs, add them and make sure they stay in the code, but are switched off by default.
+   - When you need comments on a pull request, note that GitHub has THREE different comment types with different API endpoints:
+      1. PR review comments (inline code comments): gh api repos/Jhon-Crow/godot-topdown-MVP/pulls/221/comments --paginate
+      2. PR conversation comments (general discussion): gh api repos/Jhon-Crow/godot-topdown-MVP/issues/221/comments --paginate
+      3. PR reviews (approve/request changes): gh api repos/Jhon-Crow/godot-topdown-MVP/pulls/221/reviews --paginate
+      IMPORTANT: The command "gh pr view --json comments" ONLY returns conversation comments and misses review comments!
+   - When you need latest comments on issue, use gh api repos/Jhon-Crow/godot-topdown-MVP/issues/217/comments --paginate.
+
+Solution development and testing.
+   - When issue is solvable, implement code with tests.
+   - When implementing features, search for similar existing implementations in the codebase and use them as examples instead of implementing everything from scratch.
+   - When coding, each atomic step that can be useful by itself should be commited to the pull request's branch, meaning if work will be interrupted by any reason parts of solution will still be kept intact and safe in pull request.
+   - When you test:
+      start from testing of small functions using separate scripts;
+      write unit tests with mocks for easy and quick start.
+   - When you test integrations, use existing framework.
+   - When you test solution draft, include automated checks in pr.
+   - When issue is unclear, write comment on issue asking questions.
+   - When you encounter any problems that you unable to solve yourself (any human feedback or help), write a comment to the pull request asking for help.
+   - When you need human help, use gh pr comment 221 --body "your message" to comment on existing PR.
+
+Preparing pull request.
+   - When you code, follow contributing guidelines.
+   - When you commit, write clear message.
+   - When you need examples of style, use gh pr list --repo Jhon-Crow/godot-topdown-MVP --state merged --search [keywords].
+   - When you open pr, describe solution draft and include tests.
+   - When there is a package with version and GitHub Actions workflows for automatic release, update the version (or other necessary release trigger) in your pull request to prepare for next release.
+   - When you update existing pr 221, use gh pr edit to modify title and description.
+   - When you are about to commit or push code, ALWAYS run local CI checks first if they are available in contributing guidelines (like ruff check, mypy, eslint, etc.) to catch errors before pushing.
+   - When you finalize the pull request:
+      follow style from merged prs for code, title, and description,
+      make sure no uncommitted changes corresponding to the original requirements are left behind,
+      make sure the default branch is merged to the pull request's branch,
+      make sure all CI checks passing if they exist before you finish,
+      check for latest comments on the issue and pull request to ensure no recent feedback was missed,
+      double-check that all changes in the pull request answer to original requirements of the issue,
+      make sure no new new bugs are introduced in pull request by carefully reading gh pr diff,
+      make sure no previously existing features were removed without an explicit request from users via the issue description, issue comments, and/or pull request comments.
+   - When you finish implementation, use gh pr ready 221.
+
+Workflow and collaboration.
+   - When you check branch, verify with git branch --show-current.
+   - When you push, push only to branch issue-217-6e363ec134f9.
+   - When you finish, create a pull request from branch issue-217-6e363ec134f9. (Note: PR 221 already exists, update it instead)
+   - When you organize workflow, use pull requests instead of direct merges to default branch (main or master).
+   - When you manage commits, preserve commit history for later analysis.
+   - When you contribute, keep repository history forward-moving with regular commits, pushes, and reverts if needed.
+   - When you face conflict that you cannot resolve yourself, ask for help.
+   - When you collaborate, respect branch protections by working only on issue-217-6e363ec134f9.
+   - When you mention result, include pull request url or comment url.
+   - When you need to create pr, remember pr 221 already exists for this branch.
+
+Self review.
+   - When you check your solution draft, run all tests locally.
+   - When you check your solution draft, verify git status shows a clean working tree with no uncommitted changes.
+   - When you compare with repo style, use gh pr diff [number].
+   - When you finalize, confirm code, tests, and description are consistent.
+
+GitHub CLI command patterns.
+   - IMPORTANT: Always use --paginate flag when fetching lists from GitHub API to ensure all results are returned (GitHub returns max 30 per page by default).
+   - When listing PR review comments (inline code comments), use gh api repos/OWNER/REPO/pulls/NUMBER/comments --paginate.
+   - When listing PR conversation comments, use gh api repos/OWNER/REPO/issues/NUMBER/comments --paginate.
+   - When listing PR reviews, use gh api repos/OWNER/REPO/pulls/NUMBER/reviews --paginate.
+   - When listing issue comments, use gh api repos/OWNER/REPO/issues/NUMBER/comments --paginate.
+   - When adding PR comment, use gh pr comment NUMBER --body "text" --repo OWNER/REPO.
+   - When adding issue comment, use gh issue comment NUMBER --body "text" --repo OWNER/REPO.
+   - When viewing PR details, use gh pr view NUMBER --repo OWNER/REPO.
+   - When filtering with jq, use gh api repos/${owner}/${repo}/pulls/${prNumber}/comments --paginate --jq 'reverse | .[0:5]'.
+
+Playwright MCP usage (browser automation via mcp__playwright__* tools).
+   - When you develop frontend web applications (HTML, CSS, JavaScript, React, Vue, Angular, etc.), use Playwright MCP tools to test the UI in a real browser.
+   - When WebFetch tool fails to retrieve expected content (e.g., returns empty content, JavaScript-rendered pages, or login-protected pages), use Playwright MCP tools (browser_navigate, browser_snapshot) as a fallback for web browsing.
+   - When you need to interact with dynamic web pages that require JavaScript execution, use Playwright MCP tools.
+   - When you need to visually verify how a web page looks or take screenshots, use browser_take_screenshot from Playwright MCP.
+   - When you need to fill forms, click buttons, or perform user interactions on web pages, use Playwright MCP tools (browser_click, browser_type, browser_fill_form).
+   - When you need to test responsive design or different viewport sizes, use browser_resize from Playwright MCP.
+   - When you finish using the browser, always close it with browser_close to free resources.
+[2026-01-22T07:17:10.918Z] [INFO] ---END SYSTEM PROMPT---
+[2026-01-22T07:17:10.918Z] [INFO] 
+[2026-01-22T07:17:10.918Z] [INFO] 📊 CLAUDE_CODE_MAX_OUTPUT_TOKENS: 64000
+[2026-01-22T07:17:10.919Z] [INFO] 📋 Command details:          
+[2026-01-22T07:17:10.919Z] [INFO]   📂 Working directory:      /tmp/gh-issue-solver-1769066205054
+[2026-01-22T07:17:10.919Z] [INFO]   🌿 Branch:                 issue-217-6e363ec134f9
+[2026-01-22T07:17:10.920Z] [INFO]   🤖 Model:                  Claude OPUS
+[2026-01-22T07:17:10.920Z] [INFO]   🍴 Fork:                   konard/Jhon-Crow-godot-topdown-MVP
+[2026-01-22T07:17:10.920Z] [INFO] 
+▶️ Streaming output:         
+
+[2026-01-22T07:17:17.309Z] [INFO] {
+  "type": "system",
+  "subtype": "init",
+  "cwd": "/tmp/gh-issue-solver-1769066205054",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "tools": [
+    "Task",
+    "TaskOutput",
+    "Bash",
+    "Glob",
+    "Grep",
+    "ExitPlanMode",
+    "Read",
+    "Edit",
+    "Write",
+    "NotebookEdit",
+    "WebFetch",
+    "TodoWrite",
+    "WebSearch",
+    "KillShell",
+    "AskUserQuestion",
+    "Skill",
+    "EnterPlanMode",
+    "MCPSearch",
+    "mcp__playwright__browser_close",
+    "mcp__playwright__browser_resize",
+    "mcp__playwright__browser_console_messages",
+    "mcp__playwright__browser_handle_dialog",
+    "mcp__playwright__browser_evaluate",
+    "mcp__playwright__browser_file_upload",
+    "mcp__playwright__browser_fill_form",
+    "mcp__playwright__browser_install",
+    "mcp__playwright__browser_press_key",
+    "mcp__playwright__browser_type",
+    "mcp__playwright__browser_navigate",
+    "mcp__playwright__browser_navigate_back",
+    "mcp__playwright__browser_network_requests",
+    "mcp__playwright__browser_run_code",
+    "mcp__playwright__browser_take_screenshot",
+    "mcp__playwright__browser_snapshot",
+    "mcp__playwright__browser_click",
+    "mcp__playwright__browser_drag",
+    "mcp__playwright__browser_hover",
+    "mcp__playwright__browser_select_option",
+    "mcp__playwright__browser_tabs",
+    "mcp__playwright__browser_wait_for"
+  ],
+  "mcp_servers": [
+    {
+      "name": "playwright",
+      "status": "connected"
+    }
+  ],
+  "model": "claude-opus-4-5-20251101",
+  "permissionMode": "bypassPermissions",
+  "slash_commands": [
+    "compact",
+    "context",
+    "cost",
+    "init",
+    "pr-comments",
+    "release-notes",
+    "review",
+    "security-review"
+  ],
+  "apiKeySource": "none",
+  "claude_code_version": "2.1.12",
+  "output_style": "default",
+  "agents": [
+    "Bash",
+    "general-purpose",
+    "statusline-setup",
+    "Explore",
+    "Plan"
+  ],
+  "skills": [],
+  "plugins": [],
+  "uuid": "5e13d5c2-f8a5-4a9a-89df-e307817832a0"
+}
+[2026-01-22T07:17:17.313Z] [INFO] 📌 Session ID: 19778b76-aaef-4c8b-ab74-908a92670320
+[2026-01-22T07:17:17.318Z] [INFO] 📁 Log renamed to: /home/hive/19778b76-aaef-4c8b-ab74-908a92670320.log
+[2026-01-22T07:17:20.362Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01Wsm5e26r7iaNEmA9EYe7jQ",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "I'll start by reading the issue details to understand what needs to be solved."
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 2,
+      "cache_creation_input_tokens": 6533,
+      "cache_read_input_tokens": 18904,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 6533,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 3,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "a6678ebb-1eb6-408b-9070-b0b5c92ecb32"
+}
+[2026-01-22T07:17:21.119Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01Wsm5e26r7iaNEmA9EYe7jQ",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01Nn8QxrpC8b6BcpgPkWemK1",
+        "name": "Bash",
+        "input": {
+          "command": "gh issue view https://github.com/Jhon-Crow/godot-topdown-MVP/issues/217",
+          "description": "Fetch issue details from GitHub"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 2,
+      "cache_creation_input_tokens": 6533,
+      "cache_read_input_tokens": 18904,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 6533,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 3,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "03ee2cab-b872-48d8-9a7d-9d31b6bf9e5e"
+}
+[2026-01-22T07:17:23.055Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01Nn8QxrpC8b6BcpgPkWemK1",
+        "type": "tool_result",
+        "content": "title:\tдобавить модельки врагов\nstate:\tOPEN\nauthor:\tJhon-Crow\nlabels:\t\ncomments:\t0\nassignees:\t\nprojects:\t\nmilestone:\t\nnumber:\t217\n--\nсделай модельки врагов на основе модельки игрока, но основной цвет должен быть чёрный, с белыми черепами(на предплечий или шлеме).",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "6262a4f2-6286-4a3c-848a-96bbee2e9890",
+  "tool_use_result": {
+    "stdout": "title:\tдобавить модельки врагов\nstate:\tOPEN\nauthor:\tJhon-Crow\nlabels:\t\ncomments:\t0\nassignees:\t\nprojects:\t\nmilestone:\t\nnumber:\t217\n--\nсделай модельки врагов на основе модельки игрока, но основной цвет должен быть чёрный, с белыми черепами(на предплечий или шлеме).",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:25.852Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_015ENN4Pfwxu2hRqJY6VfGVi",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Let me also check the existing PR to understand the current state:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 242,
+      "cache_read_input_tokens": 25437,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 242,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "1f806dcb-bd51-4259-9628-f8dc3274ec66"
+}
+[2026-01-22T07:17:26.588Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_015ENN4Pfwxu2hRqJY6VfGVi",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01Dy751ZGfATJD89kdD9gn2j",
+        "name": "Bash",
+        "input": {
+          "command": "gh pr view 221 --repo Jhon-Crow/godot-topdown-MVP",
+          "description": "View existing PR details"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 242,
+      "cache_read_input_tokens": 25437,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 242,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "8a341b56-6edf-43de-a62e-27c2a53d9a01"
+}
+[2026-01-22T07:17:29.180Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01Dy751ZGfATJD89kdD9gn2j",
+        "type": "tool_result",
+        "content": "title:\t[WIP] добавить модельки врагов\nstate:\tDRAFT\nauthor:\tkonard\nlabels:\t\nassignees:\t\nreviewers:\t\nprojects:\t\nmilestone:\t\nnumber:\t221\nurl:\thttps://github.com/Jhon-Crow/godot-topdown-MVP/pull/221\nadditions:\t7\ndeletions:\t0\nauto-merge:\tdisabled\n--\n## 🤖 AI-Powered Solution Draft\n\nThis pull request is being automatically generated to solve issue Jhon-Crow/godot-topdown-MVP#217.\n\n### 📋 Issue Reference\nFixes Jhon-Crow/godot-topdown-MVP#217\n\n### 🚧 Status\n**Work in Progress** - The AI assistant is currently analyzing and implementing the solution draft.\n\n### 📝 Implementation Details\n_Details will be added as the solution draft is developed..._\n\n---\n*This PR was created automatically by the AI issue solver*",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "dc43abce-4db8-4f53-855a-c04dfbb95cfb",
+  "tool_use_result": {
+    "stdout": "title:\t[WIP] добавить модельки врагов\nstate:\tDRAFT\nauthor:\tkonard\nlabels:\t\nassignees:\t\nreviewers:\t\nprojects:\t\nmilestone:\t\nnumber:\t221\nurl:\thttps://github.com/Jhon-Crow/godot-topdown-MVP/pull/221\nadditions:\t7\ndeletions:\t0\nauto-merge:\tdisabled\n--\n## 🤖 AI-Powered Solution Draft\n\nThis pull request is being automatically generated to solve issue Jhon-Crow/godot-topdown-MVP#217.\n\n### 📋 Issue Reference\nFixes Jhon-Crow/godot-topdown-MVP#217\n\n### 🚧 Status\n**Work in Progress** - The AI assistant is currently analyzing and implementing the solution draft.\n\n### 📝 Implementation Details\n_Details will be added as the solution draft is developed..._\n\n---\n*This PR was created automatically by the AI issue solver*",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:31.356Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01K95q2LjvxvvVJrCooUpySv",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Now let me understand the codebase structure and find the player model to create enemy models based on it:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 354,
+      "cache_read_input_tokens": 25679,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 354,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 4,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "15182fc7-814c-4d16-8f9d-b345b0a48144"
+}
+[2026-01-22T07:17:32.367Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01K95q2LjvxvvVJrCooUpySv",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01RboSJGXZkBiU47BQbke4bh",
+        "name": "Bash",
+        "input": {
+          "command": "ls -la",
+          "description": "List files in working directory"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 354,
+      "cache_read_input_tokens": 25679,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 354,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 4,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "3d6aaddf-bf03-402a-ba9c-c7f99c7d1c0d"
+}
+[2026-01-22T07:17:32.514Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01RboSJGXZkBiU47BQbke4bh",
+        "type": "tool_result",
+        "content": "total 212\ndrwxrwxr-x  13 hive hive  4096 Jan 22 08:16 .\ndrwxrwxrwt 176 root root 36864 Jan 22 08:17 ..\ndrwxrwxr-x   8 hive hive  4096 Jan 22 08:17 .git\ndrwxrwxr-x   3 hive hive  4096 Jan 22 08:16 .github\n-rw-rw-r--   1 hive hive   483 Jan 22 08:16 .gitignore\n-rw-rw-r--   1 hive hive   425 Jan 22 08:16 .gutconfig.json\n-rw-rw-r--   1 hive hive   316 Jan 22 08:16 CLAUDE.md\n-rw-rw-r--   1 hive hive   508 Jan 22 08:16 GodotTopDownTemplate.csproj\n-rw-rw-r--   1 hive hive  1075 Jan 22 08:16 GodotTopDownTemplate.sln\n-rw-rw-r--   1 hive hive  1211 Jan 22 08:16 LICENSE\n-rw-rw-r--   1 hive hive 22576 Jan 22 08:16 README.md\n-rw-rw-r--   1 hive hive 61332 Jan 22 08:16 README_RU.md\ndrwxrwxr-x  10 hive hive  4096 Jan 22 08:16 Scripts\ndrwxrwxr-x   3 hive hive  4096 Jan 22 08:16 addons\ndrwxrwxr-x   5 hive hive  4096 Jan 22 08:16 assets\ndrwxrwxr-x   4 hive hive  4096 Jan 22 08:16 docs\ndrwxrwxr-x   2 hive hive  4096 Jan 22 08:16 experiments\n-rw-rw-r--   1 hive hive  2420 Jan 22 08:16 export_presets.cfg\n-rw-rw-r--   1 hive hive   264 Jan 22 08:16 icon.svg\n-rw-rw-r--   1 hive hive  7374 Jan 22 08:16 project.godot\ndrwxrwxr-x   4 hive hive  4096 Jan 22 08:16 resources\ndrwxrwxr-x  10 hive hive  4096 Jan 22 08:16 scenes\ndrwxrwxr-x  14 hive hive  4096 Jan 22 08:16 scripts\ndrwxrwxr-x   4 hive hive  4096 Jan 22 08:16 tests",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "71e27d28-5845-4072-b8e8-24c71ef607a7",
+  "tool_use_result": {
+    "stdout": "total 212\ndrwxrwxr-x  13 hive hive  4096 Jan 22 08:16 .\ndrwxrwxrwt 176 root root 36864 Jan 22 08:17 ..\ndrwxrwxr-x   8 hive hive  4096 Jan 22 08:17 .git\ndrwxrwxr-x   3 hive hive  4096 Jan 22 08:16 .github\n-rw-rw-r--   1 hive hive   483 Jan 22 08:16 .gitignore\n-rw-rw-r--   1 hive hive   425 Jan 22 08:16 .gutconfig.json\n-rw-rw-r--   1 hive hive   316 Jan 22 08:16 CLAUDE.md\n-rw-rw-r--   1 hive hive   508 Jan 22 08:16 GodotTopDownTemplate.csproj\n-rw-rw-r--   1 hive hive  1075 Jan 22 08:16 GodotTopDownTemplate.sln\n-rw-rw-r--   1 hive hive  1211 Jan 22 08:16 LICENSE\n-rw-rw-r--   1 hive hive 22576 Jan 22 08:16 README.md\n-rw-rw-r--   1 hive hive 61332 Jan 22 08:16 README_RU.md\ndrwxrwxr-x  10 hive hive  4096 Jan 22 08:16 Scripts\ndrwxrwxr-x   3 hive hive  4096 Jan 22 08:16 addons\ndrwxrwxr-x   5 hive hive  4096 Jan 22 08:16 assets\ndrwxrwxr-x   4 hive hive  4096 Jan 22 08:16 docs\ndrwxrwxr-x   2 hive hive  4096 Jan 22 08:16 experiments\n-rw-rw-r--   1 hive hive  2420 Jan 22 08:16 export_presets.cfg\n-rw-rw-r--   1 hive hive   264 Jan 22 08:16 icon.svg\n-rw-rw-r--   1 hive hive  7374 Jan 22 08:16 project.godot\ndrwxrwxr-x   4 hive hive  4096 Jan 22 08:16 resources\ndrwxrwxr-x  10 hive hive  4096 Jan 22 08:16 scenes\ndrwxrwxr-x  14 hive hive  4096 Jan 22 08:16 scripts\ndrwxrwxr-x   4 hive hive  4096 Jan 22 08:16 tests",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:37.436Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01K4sGpb1XPbgCH7h8Df189f",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+        "name": "Task",
+        "input": {
+          "prompt": "Explore this Godot project to find:\n1. Player model/sprite files - look in assets/, scenes/, resources/ directories\n2. Enemy model/sprite files if they exist\n3. Understand the structure of how sprites/models are organized\n\nFocus on finding image files (.png, .svg, .jpg, etc.) that represent the player character and any enemy characters. Look for character sprites, particularly any that might be called \"player\" or similar.",
+          "subagent_type": "Explore",
+          "description": "Find player and enemy models"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 873,
+      "cache_read_input_tokens": 26033,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 873,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 25,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "d8939a5c-150d-4a56-bb47-712e692b9d5c"
+}
+[2026-01-22T07:17:37.480Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "type": "text",
+        "text": "Explore this Godot project to find:\n1. Player model/sprite files - look in assets/, scenes/, resources/ directories\n2. Enemy model/sprite files if they exist\n3. Understand the structure of how sprites/models are organized\n\nFocus on finding image files (.png, .svg, .jpg, etc.) that represent the player character and any enemy characters. Look for character sprites, particularly any that might be called \"player\" or similar."
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "2ad2411b-1749-48a4-8230-6e52f587520e"
+}
+[2026-01-22T07:17:39.697Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_013vcUZxGfGMDKfihdWuRrR9",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01T2E7x7q9pUB8vQiJT2YnjR",
+        "name": "Bash",
+        "input": {
+          "command": "find /tmp/gh-issue-solver-1769066205054 -type f \\( -name \"*.png\" -o -name \"*.svg\" -o -name \"*.jpg\" -o -name \"*.jpeg\" \\) | head -50",
+          "description": "Find all image files in the project"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 3,
+      "cache_creation_input_tokens": 13927,
+      "cache_read_input_tokens": 0,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 13927,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "46e6d0b5-1ca0-478c-9bf6-2464abf8ea8e"
+}
+[2026-01-22T07:17:40.006Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_013vcUZxGfGMDKfihdWuRrR9",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01FnTDKasCtLgHZnrHR7y81p",
+        "name": "Bash",
+        "input": {
+          "command": "ls -la /tmp/gh-issue-solver-1769066205054",
+          "description": "List top-level directory contents"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 3,
+      "cache_creation_input_tokens": 13927,
+      "cache_read_input_tokens": 0,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 13927,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "0ce4c6f8-d6e7-497e-8e47-8d62ba8825c3"
+}
+[2026-01-22T07:17:40.532Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_013vcUZxGfGMDKfihdWuRrR9",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01Wdmbvs5KsV8Hs4x3K2LqqM",
+        "name": "Bash",
+        "input": {
+          "command": "find /tmp/gh-issue-solver-1769066205054 -type d -name \"assets\" -o -type d -name \"scenes\" -o -type d -name \"resources\" -o -type d -name \"sprites\" 2>/dev/null",
+          "description": "Find key directories for assets"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 3,
+      "cache_creation_input_tokens": 13927,
+      "cache_read_input_tokens": 0,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 13927,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "3357b1a5-0317-4132-a9f8-607a25d0befa"
+}
+[2026-01-22T07:17:40.644Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01FnTDKasCtLgHZnrHR7y81p",
+        "type": "tool_result",
+        "content": "total 212\ndrwxrwxr-x  13 hive hive  4096 Jan 22 08:16 .\ndrwxrwxrwt 176 root root 36864 Jan 22 08:17 ..\ndrwxrwxr-x   8 hive hive  4096 Jan 22 08:17 .git\ndrwxrwxr-x   3 hive hive  4096 Jan 22 08:16 .github\n-rw-rw-r--   1 hive hive   483 Jan 22 08:16 .gitignore\n-rw-rw-r--   1 hive hive   425 Jan 22 08:16 .gutconfig.json\n-rw-rw-r--   1 hive hive   316 Jan 22 08:16 CLAUDE.md\n-rw-rw-r--   1 hive hive   508 Jan 22 08:16 GodotTopDownTemplate.csproj\n-rw-rw-r--   1 hive hive  1075 Jan 22 08:16 GodotTopDownTemplate.sln\n-rw-rw-r--   1 hive hive  1211 Jan 22 08:16 LICENSE\n-rw-rw-r--   1 hive hive 22576 Jan 22 08:16 README.md\n-rw-rw-r--   1 hive hive 61332 Jan 22 08:16 README_RU.md\ndrwxrwxr-x  10 hive hive  4096 Jan 22 08:16 Scripts\ndrwxrwxr-x   3 hive hive  4096 Jan 22 08:16 addons\ndrwxrwxr-x   5 hive hive  4096 Jan 22 08:16 assets\ndrwxrwxr-x   4 hive hive  4096 Jan 22 08:16 docs\ndrwxrwxr-x   2 hive hive  4096 Jan 22 08:16 experiments\n-rw-rw-r--   1 hive hive  2420 Jan 22 08:16 export_presets.cfg\n-rw-rw-r--   1 hive hive   264 Jan 22 08:16 icon.svg\n-rw-rw-r--   1 hive hive  7374 Jan 22 08:16 project.godot\ndrwxrwxr-x   4 hive hive  4096 Jan 22 08:16 resources\ndrwxrwxr-x  10 hive hive  4096 Jan 22 08:16 scenes\ndrwxrwxr-x  14 hive hive  4096 Jan 22 08:16 scripts\ndrwxrwxr-x   4 hive hive  4096 Jan 22 08:16 tests",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "0fca6397-db7b-4ad8-8ad1-3719871b3922",
+  "tool_use_result": {
+    "stdout": "total 212\ndrwxrwxr-x  13 hive hive  4096 Jan 22 08:16 .\ndrwxrwxrwt 176 root root 36864 Jan 22 08:17 ..\ndrwxrwxr-x   8 hive hive  4096 Jan 22 08:17 .git\ndrwxrwxr-x   3 hive hive  4096 Jan 22 08:16 .github\n-rw-rw-r--   1 hive hive   483 Jan 22 08:16 .gitignore\n-rw-rw-r--   1 hive hive   425 Jan 22 08:16 .gutconfig.json\n-rw-rw-r--   1 hive hive   316 Jan 22 08:16 CLAUDE.md\n-rw-rw-r--   1 hive hive   508 Jan 22 08:16 GodotTopDownTemplate.csproj\n-rw-rw-r--   1 hive hive  1075 Jan 22 08:16 GodotTopDownTemplate.sln\n-rw-rw-r--   1 hive hive  1211 Jan 22 08:16 LICENSE\n-rw-rw-r--   1 hive hive 22576 Jan 22 08:16 README.md\n-rw-rw-r--   1 hive hive 61332 Jan 22 08:16 README_RU.md\ndrwxrwxr-x  10 hive hive  4096 Jan 22 08:16 Scripts\ndrwxrwxr-x   3 hive hive  4096 Jan 22 08:16 addons\ndrwxrwxr-x   5 hive hive  4096 Jan 22 08:16 assets\ndrwxrwxr-x   4 hive hive  4096 Jan 22 08:16 docs\ndrwxrwxr-x   2 hive hive  4096 Jan 22 08:16 experiments\n-rw-rw-r--   1 hive hive  2420 Jan 22 08:16 export_presets.cfg\n-rw-rw-r--   1 hive hive   264 Jan 22 08:16 icon.svg\n-rw-rw-r--   1 hive hive  7374 Jan 22 08:16 project.godot\ndrwxrwxr-x   4 hive hive  4096 Jan 22 08:16 resources\ndrwxrwxr-x  10 hive hive  4096 Jan 22 08:16 scenes\ndrwxrwxr-x  14 hive hive  4096 Jan 22 08:16 scripts\ndrwxrwxr-x   4 hive hive  4096 Jan 22 08:16 tests",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:40.663Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01Wdmbvs5KsV8Hs4x3K2LqqM",
+        "type": "tool_result",
+        "content": "/tmp/gh-issue-solver-1769066205054/assets\n/tmp/gh-issue-solver-1769066205054/assets/sprites\n/tmp/gh-issue-solver-1769066205054/resources\n/tmp/gh-issue-solver-1769066205054/scenes",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "123fb1ce-43a8-43a5-9ff4-6cad75ed4438",
+  "tool_use_result": {
+    "stdout": "/tmp/gh-issue-solver-1769066205054/assets\n/tmp/gh-issue-solver-1769066205054/assets/sprites\n/tmp/gh-issue-solver-1769066205054/resources\n/tmp/gh-issue-solver-1769066205054/scenes",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:40.669Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01T2E7x7q9pUB8vQiJT2YnjR",
+        "type": "tool_result",
+        "content": "/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/soldier.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/soldier_spear.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/soldier_officer.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_combined_preview.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_head.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_left_arm.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_body.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_right_arm.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/flashbang.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_rifle_topdown.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_rifle.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/frag_grenade.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_basic.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/shotgun_icon.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/shotgun_topdown.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_topdown_medium.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/shotgun.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_simple.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_topdown_small.png\n/tmp/gh-issue-solver-1769066205054/icon.svg\n/tmp/gh-issue-solver-1769066205054/docs/case-studies/issue-196/reference_image.png\n/tmp/gh-issue-solver-1769066205054/docs/case-studies/issue-96/images/reference-2.png\n/tmp/gh-issue-solver-1769066205054/docs/case-studies/issue-96/images/reference-1.png\n/tmp/gh-issue-solver-1769066205054/addons/gut/gui/arrow.png\n/tmp/gh-issue-solver-1769066205054/addons/gut/gui/play.png\n/tmp/gh-issue-solver-1769066205054/addons/gut/icon.png\n/tmp/gh-issue-solver-1769066205054/addons/gut/images/green.png\n/tmp/gh-issue-solver-1769066205054/addons/gut/images/Script.svg\n/tmp/gh-issue-solver-1769066205054/addons/gut/images/red.png\n/tmp/gh-issue-solver-1769066205054/addons/gut/images/yellow.png\n/tmp/gh-issue-solver-1769066205054/addons/gut/images/Folder.svg\n/tmp/gh-issue-solver-1769066205054/experiments/shotgun_icon.png\n/tmp/gh-issue-solver-1769066205054/experiments/shotgun_topdown.png",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "886bced6-cfaf-4310-a298-86ce192bf228",
+  "tool_use_result": {
+    "stdout": "/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/soldier.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/soldier_spear.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/soldier_officer.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_combined_preview.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_head.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_left_arm.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_body.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_right_arm.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/flashbang.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_rifle_topdown.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_rifle.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/frag_grenade.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_basic.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/shotgun_icon.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/shotgun_topdown.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_topdown_medium.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/shotgun.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_simple.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_topdown_small.png\n/tmp/gh-issue-solver-1769066205054/icon.svg\n/tmp/gh-issue-solver-1769066205054/docs/case-studies/issue-196/reference_image.png\n/tmp/gh-issue-solver-1769066205054/docs/case-studies/issue-96/images/reference-2.png\n/tmp/gh-issue-solver-1769066205054/docs/case-studies/issue-96/images/reference-1.png\n/tmp/gh-issue-solver-1769066205054/addons/gut/gui/arrow.png\n/tmp/gh-issue-solver-1769066205054/addons/gut/gui/play.png\n/tmp/gh-issue-solver-1769066205054/addons/gut/icon.png\n/tmp/gh-issue-solver-1769066205054/addons/gut/images/green.png\n/tmp/gh-issue-solver-1769066205054/addons/gut/images/Script.svg\n/tmp/gh-issue-solver-1769066205054/addons/gut/images/red.png\n/tmp/gh-issue-solver-1769066205054/addons/gut/images/yellow.png\n/tmp/gh-issue-solver-1769066205054/addons/gut/images/Folder.svg\n/tmp/gh-issue-solver-1769066205054/experiments/shotgun_icon.png\n/tmp/gh-issue-solver-1769066205054/experiments/shotgun_topdown.png",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:42.593Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_01QLxtPaji7JejX47XYh9CXQ",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01T27GFwCThVeCpsjVA8ctka",
+        "name": "Bash",
+        "input": {
+          "command": "ls -la /tmp/gh-issue-solver-1769066205054/assets/sprites/",
+          "description": "List sprite directories"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 886,
+      "cache_creation_input_tokens": 1338,
+      "cache_read_input_tokens": 13927,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 1338,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "e7f0d4a8-243e-4a73-a7b5-86494729d81d"
+}
+[2026-01-22T07:17:42.882Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_01QLxtPaji7JejX47XYh9CXQ",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_018Th2j5RJYVzMmMFYDETd65",
+        "name": "Bash",
+        "input": {
+          "command": "ls -la /tmp/gh-issue-solver-1769066205054/assets/sprites/characters/",
+          "description": "List character sprites"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 886,
+      "cache_creation_input_tokens": 1338,
+      "cache_read_input_tokens": 13927,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 1338,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "f5851e7e-3e64-426d-9259-c6bc28376917"
+}
+[2026-01-22T07:17:43.241Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_01QLxtPaji7JejX47XYh9CXQ",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_018jNYM1RBtDHamSonnBBtdA",
+        "name": "Bash",
+        "input": {
+          "command": "ls -la /tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/",
+          "description": "List player sprite files"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 886,
+      "cache_creation_input_tokens": 1338,
+      "cache_read_input_tokens": 13927,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 1338,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "9b5a035f-2399-47b5-b28a-e3177f982bc3"
+}
+[2026-01-22T07:17:43.464Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_01QLxtPaji7JejX47XYh9CXQ",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01EYMdjZ727vhGxxmELV49va",
+        "name": "Bash",
+        "input": {
+          "command": "ls -la /tmp/gh-issue-solver-1769066205054/scenes/",
+          "description": "List scene files"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 886,
+      "cache_creation_input_tokens": 1338,
+      "cache_read_input_tokens": 13927,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 1338,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "076c6196-b9d3-44b6-9674-0ffd9457fd86"
+}
+[2026-01-22T07:17:43.607Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01T27GFwCThVeCpsjVA8ctka",
+        "type": "tool_result",
+        "content": "total 16\ndrwxrwxr-x 4 hive hive 4096 Jan 22 08:16 .\ndrwxrwxr-x 5 hive hive 4096 Jan 22 08:16 ..\n-rw-rw-r-- 1 hive hive    0 Jan 22 08:16 .gitkeep\ndrwxrwxr-x 3 hive hive 4096 Jan 22 08:16 characters\ndrwxrwxr-x 2 hive hive 4096 Jan 22 08:16 weapons",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "249b8366-7597-4be5-9c8e-d460f12e93f1",
+  "tool_use_result": {
+    "stdout": "total 16\ndrwxrwxr-x 4 hive hive 4096 Jan 22 08:16 .\ndrwxrwxr-x 5 hive hive 4096 Jan 22 08:16 ..\n-rw-rw-r-- 1 hive hive    0 Jan 22 08:16 .gitkeep\ndrwxrwxr-x 3 hive hive 4096 Jan 22 08:16 characters\ndrwxrwxr-x 2 hive hive 4096 Jan 22 08:16 weapons",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:43.628Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_018Th2j5RJYVzMmMFYDETd65",
+        "type": "tool_result",
+        "content": "total 24\ndrwxrwxr-x 3 hive hive 4096 Jan 22 08:16 .\ndrwxrwxr-x 4 hive hive 4096 Jan 22 08:16 ..\ndrwxrwxr-x 2 hive hive 4096 Jan 22 08:16 player\n-rw-rw-r-- 1 hive hive 1335 Jan 22 08:16 soldier.png\n-rw-rw-r-- 1 hive hive 1224 Jan 22 08:16 soldier_officer.png\n-rw-rw-r-- 1 hive hive 1374 Jan 22 08:16 soldier_spear.png",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "b0037e24-b052-45ac-8de3-6f4b9be26ab0",
+  "tool_use_result": {
+    "stdout": "total 24\ndrwxrwxr-x 3 hive hive 4096 Jan 22 08:16 .\ndrwxrwxr-x 4 hive hive 4096 Jan 22 08:16 ..\ndrwxrwxr-x 2 hive hive 4096 Jan 22 08:16 player\n-rw-rw-r-- 1 hive hive 1335 Jan 22 08:16 soldier.png\n-rw-rw-r-- 1 hive hive 1224 Jan 22 08:16 soldier_officer.png\n-rw-rw-r-- 1 hive hive 1374 Jan 22 08:16 soldier_spear.png",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:43.641Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_018jNYM1RBtDHamSonnBBtdA",
+        "type": "tool_result",
+        "content": "total 28\ndrwxrwxr-x 2 hive hive 4096 Jan 22 08:16 .\ndrwxrwxr-x 3 hive hive 4096 Jan 22 08:16 ..\n-rw-rw-r-- 1 hive hive  326 Jan 22 08:16 player_body.png\n-rw-rw-r-- 1 hive hive  530 Jan 22 08:16 player_combined_preview.png\n-rw-rw-r-- 1 hive hive  201 Jan 22 08:16 player_head.png\n-rw-rw-r-- 1 hive hive  142 Jan 22 08:16 player_left_arm.png\n-rw-rw-r-- 1 hive hive  142 Jan 22 08:16 player_right_arm.png",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "a69f335f-c482-41cc-a1cf-82e3eadf0a19",
+  "tool_use_result": {
+    "stdout": "total 28\ndrwxrwxr-x 2 hive hive 4096 Jan 22 08:16 .\ndrwxrwxr-x 3 hive hive 4096 Jan 22 08:16 ..\n-rw-rw-r-- 1 hive hive  326 Jan 22 08:16 player_body.png\n-rw-rw-r-- 1 hive hive  530 Jan 22 08:16 player_combined_preview.png\n-rw-rw-r-- 1 hive hive  201 Jan 22 08:16 player_head.png\n-rw-rw-r-- 1 hive hive  142 Jan 22 08:16 player_left_arm.png\n-rw-rw-r-- 1 hive hive  142 Jan 22 08:16 player_right_arm.png",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:43.647Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01EYMdjZ727vhGxxmELV49va",
+        "type": "tool_result",
+        "content": "total 40\ndrwxrwxr-x 10 hive hive 4096 Jan 22 08:16 .\ndrwxrwxr-x 13 hive hive 4096 Jan 22 08:16 ..\ndrwxrwxr-x  3 hive hive 4096 Jan 22 08:16 characters\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 effects\ndrwxrwxr-x  3 hive hive 4096 Jan 22 08:16 levels\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 main\ndrwxrwxr-x  3 hive hive 4096 Jan 22 08:16 objects\ndrwxrwxr-x  3 hive hive 4096 Jan 22 08:16 projectiles\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 ui\ndrwxrwxr-x  3 hive hive 4096 Jan 22 08:16 weapons",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "ed981bd2-80cc-43cd-a2a6-2da5a0fe1c5c",
+  "tool_use_result": {
+    "stdout": "total 40\ndrwxrwxr-x 10 hive hive 4096 Jan 22 08:16 .\ndrwxrwxr-x 13 hive hive 4096 Jan 22 08:16 ..\ndrwxrwxr-x  3 hive hive 4096 Jan 22 08:16 characters\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 effects\ndrwxrwxr-x  3 hive hive 4096 Jan 22 08:16 levels\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 main\ndrwxrwxr-x  3 hive hive 4096 Jan 22 08:16 objects\ndrwxrwxr-x  3 hive hive 4096 Jan 22 08:16 projectiles\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 ui\ndrwxrwxr-x  3 hive hive 4096 Jan 22 08:16 weapons",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:45.570Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_01HLptSqZJXb79yRZu141PEc",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_012ZN38RLcmbAc7M9PxCzNBc",
+        "name": "Bash",
+        "input": {
+          "command": "ls -la /tmp/gh-issue-solver-1769066205054/scenes/characters/",
+          "description": "List character scenes"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 7,
+      "cache_creation_input_tokens": 2255,
+      "cache_read_input_tokens": 15265,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 2255,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "02eb695d-e2a0-402f-a1c0-940f806ccbbd"
+}
+[2026-01-22T07:17:46.100Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_01HLptSqZJXb79yRZu141PEc",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01A5cEY4JW1MXNF3PB1AiqjX",
+        "name": "Bash",
+        "input": {
+          "command": "find /tmp/gh-issue-solver-1769066205054/scenes/characters -type f -name \"*.tscn\" -o -name \"*.tres\"",
+          "description": "Find Godot scene and resource files"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 7,
+      "cache_creation_input_tokens": 2255,
+      "cache_read_input_tokens": 15265,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 2255,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "0211e062-fabd-4c90-9975-251e6081c6cb"
+}
+[2026-01-22T07:17:46.398Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_01HLptSqZJXb79yRZu141PEc",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01KXj5hNcqD7KFLdY6iu6wTy",
+        "name": "Bash",
+        "input": {
+          "command": "ls -la /tmp/gh-issue-solver-1769066205054/resources/",
+          "description": "List resources directory"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 7,
+      "cache_creation_input_tokens": 2255,
+      "cache_read_input_tokens": 15265,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 2255,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "6715a41d-8720-45f7-911b-494f78c8a99d"
+}
+[2026-01-22T07:17:46.515Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_012ZN38RLcmbAc7M9PxCzNBc",
+        "type": "tool_result",
+        "content": "total 16\ndrwxrwxr-x  3 hive hive 4096 Jan 22 08:16 .\ndrwxrwxr-x 10 hive hive 4096 Jan 22 08:16 ..\n-rw-rw-r--  1 hive hive 2643 Jan 22 08:16 Player.tscn\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 csharp",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "510c940d-c986-4b50-ac09-35e94b37a4d0",
+  "tool_use_result": {
+    "stdout": "total 16\ndrwxrwxr-x  3 hive hive 4096 Jan 22 08:16 .\ndrwxrwxr-x 10 hive hive 4096 Jan 22 08:16 ..\n-rw-rw-r--  1 hive hive 2643 Jan 22 08:16 Player.tscn\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 csharp",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:46.527Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01A5cEY4JW1MXNF3PB1AiqjX",
+        "type": "tool_result",
+        "content": "/tmp/gh-issue-solver-1769066205054/scenes/characters/csharp/Player.tscn\n/tmp/gh-issue-solver-1769066205054/scenes/characters/Player.tscn",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "4af06a9b-d0a3-43f1-8e00-274858669fcf",
+  "tool_use_result": {
+    "stdout": "/tmp/gh-issue-solver-1769066205054/scenes/characters/csharp/Player.tscn\n/tmp/gh-issue-solver-1769066205054/scenes/characters/Player.tscn",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:46.531Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01KXj5hNcqD7KFLdY6iu6wTy",
+        "type": "tool_result",
+        "content": "total 16\ndrwxrwxr-x  4 hive hive 4096 Jan 22 08:16 .\ndrwxrwxr-x 13 hive hive 4096 Jan 22 08:16 ..\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 calibers\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 weapons",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "4e8f73e7-40fd-456e-a15b-d86ee6f18172",
+  "tool_use_result": {
+    "stdout": "total 16\ndrwxrwxr-x  4 hive hive 4096 Jan 22 08:16 .\ndrwxrwxr-x 13 hive hive 4096 Jan 22 08:16 ..\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 calibers\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 weapons",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:48.740Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_01KfmmfRFJ4ZFQA3nB14ym1o",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01CvQpEsRtc6RKeU9PD6nkdg",
+        "name": "Read",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/scenes/characters/Player.tscn"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 7,
+      "cache_creation_input_tokens": 803,
+      "cache_read_input_tokens": 17520,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 803,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 3,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "37f172aa-265c-4be2-ad3b-5cab2b472486"
+}
+[2026-01-22T07:17:49.444Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_01KfmmfRFJ4ZFQA3nB14ym1o",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01STfUxygDwZgKHcbTaEFrNk",
+        "name": "Bash",
+        "input": {
+          "command": "find /tmp/gh-issue-solver-1769066205054 -type f \\( -name \"*enemy*\" -o -name \"*Enemy*\" -o -name \"*soldier*\" -o -name \"*Soldier*\" \\) \\( -name \"*.tscn\" -o -name \"*.tres\" \\)",
+          "description": "Find enemy-related scene and resource files"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 7,
+      "cache_creation_input_tokens": 803,
+      "cache_read_input_tokens": 17520,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 803,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 3,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "98e59df3-0096-4d98-8c33-1f98d87582f1"
+}
+[2026-01-22T07:17:49.818Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_01KfmmfRFJ4ZFQA3nB14ym1o",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_0112uWt9K92Sy3c1mB1MazyF",
+        "name": "Bash",
+        "input": {
+          "command": "ls -la /tmp/gh-issue-solver-1769066205054/scripts/",
+          "description": "List script directory structure"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 7,
+      "cache_creation_input_tokens": 803,
+      "cache_read_input_tokens": 17520,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 803,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 3,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "8f225f55-f1d2-469d-8f7e-0b0b51f93e96"
+}
+[2026-01-22T07:17:49.875Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01CvQpEsRtc6RKeU9PD6nkdg",
+        "type": "tool_result",
+        "content": "     1→[gd_scene load_steps=11 format=3 uid=\"uid://bk8nq2vj5r7p1\"]\n     2→\n     3→[ext_resource type=\"Script\" path=\"res://scripts/characters/player.gd\" id=\"1_player\"]\n     4→[ext_resource type=\"Script\" path=\"res://scripts/objects/hit_area.gd\" id=\"2_hit_area\"]\n     5→[ext_resource type=\"Script\" path=\"res://scripts/components/threat_sphere.gd\" id=\"3_threat_sphere\"]\n     6→[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/player/player_body.png\" id=\"4_body\"]\n     7→[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/player/player_head.png\" id=\"5_head\"]\n     8→[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/player/player_left_arm.png\" id=\"6_left_arm\"]\n     9→[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/player/player_right_arm.png\" id=\"7_right_arm\"]\n    10→\n    11→[sub_resource type=\"CircleShape2D\" id=\"CircleShape2D_player\"]\n    12→radius = 16.0\n    13→\n    14→[sub_resource type=\"CircleShape2D\" id=\"CircleShape2D_threat\"]\n    15→radius = 150.0\n    16→\n    17→[node name=\"Player\" type=\"CharacterBody2D\" groups=[\"player\"]]\n    18→collision_layer = 1\n    19→collision_mask = 4\n    20→script = ExtResource(\"1_player\")\n    21→\n    22→[node name=\"CollisionShape2D\" type=\"CollisionShape2D\" parent=\".\"]\n    23→shape = SubResource(\"CircleShape2D_player\")\n    24→\n    25→[node name=\"PlayerModel\" type=\"Node2D\" parent=\".\"]\n    26→\n    27→[node name=\"Body\" type=\"Sprite2D\" parent=\"PlayerModel\"]\n    28→z_index = 1\n    29→position = Vector2(-4, 0)\n    30→texture = ExtResource(\"4_body\")\n    31→\n    32→[node name=\"LeftArm\" type=\"Sprite2D\" parent=\"PlayerModel\"]\n    33→z_index = 4\n    34→position = Vector2(24, 6)\n    35→texture = ExtResource(\"6_left_arm\")\n    36→\n    37→[node name=\"RightArm\" type=\"Sprite2D\" parent=\"PlayerModel\"]\n    38→z_index = 4\n    39→position = Vector2(-2, 6)\n    40→texture = ExtResource(\"7_right_arm\")\n    41→\n    42→[node name=\"Head\" type=\"Sprite2D\" parent=\"PlayerModel\"]\n    43→z_index = 3\n    44→position = Vector2(-6, -2)\n    45→texture = ExtResource(\"5_head\")\n    46→\n    47→[node name=\"WeaponMount\" type=\"Node2D\" parent=\"PlayerModel\"]\n    48→position = Vector2(0, 6)\n    49→\n    50→[node name=\"Camera2D\" type=\"Camera2D\" parent=\".\"]\n    51→process_callback = 0\n    52→limit_left = 0\n    53→limit_top = 0\n    54→limit_right = 4128\n    55→limit_bottom = 3088\n    56→limit_smoothed = true\n    57→position_smoothing_enabled = true\n    58→position_smoothing_speed = 5.0\n    59→\n    60→[node name=\"HitArea\" type=\"Area2D\" parent=\".\"]\n    61→collision_layer = 1\n    62→collision_mask = 16\n    63→script = ExtResource(\"2_hit_area\")\n    64→\n    65→[node name=\"HitCollisionShape\" type=\"CollisionShape2D\" parent=\"HitArea\"]\n    66→shape = SubResource(\"CircleShape2D_player\")\n    67→\n    68→[node name=\"ThreatSphere\" type=\"Area2D\" parent=\".\"]\n    69→collision_layer = 0\n    70→collision_mask = 16\n    71→monitorable = false\n    72→script = ExtResource(\"3_threat_sphere\")\n    73→threat_radius = 150.0\n    74→trajectory_tolerance_degrees = 15.0\n    75→\n    76→[node name=\"ThreatCollisionShape\" type=\"CollisionShape2D\" parent=\"ThreatSphere\"]\n    77→shape = SubResource(\"CircleShape2D_threat\")\n    78→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "c723f3a1-9cd6-424e-affa-3a0c817a438a",
+  "tool_use_result": {
+    "type": "text",
+    "file": {
+      "filePath": "/tmp/gh-issue-solver-1769066205054/scenes/characters/Player.tscn",
+      "content": "[gd_scene load_steps=11 format=3 uid=\"uid://bk8nq2vj5r7p1\"]\n\n[ext_resource type=\"Script\" path=\"res://scripts/characters/player.gd\" id=\"1_player\"]\n[ext_resource type=\"Script\" path=\"res://scripts/objects/hit_area.gd\" id=\"2_hit_area\"]\n[ext_resource type=\"Script\" path=\"res://scripts/components/threat_sphere.gd\" id=\"3_threat_sphere\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/player/player_body.png\" id=\"4_body\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/player/player_head.png\" id=\"5_head\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/player/player_left_arm.png\" id=\"6_left_arm\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/player/player_right_arm.png\" id=\"7_right_arm\"]\n\n[sub_resource type=\"CircleShape2D\" id=\"CircleShape2D_player\"]\nradius = 16.0\n\n[sub_resource type=\"CircleShape2D\" id=\"CircleShape2D_threat\"]\nradius = 150.0\n\n[node name=\"Player\" type=\"CharacterBody2D\" groups=[\"player\"]]\ncollision_layer = 1\ncollision_mask = 4\nscript = ExtResource(\"1_player\")\n\n[node name=\"CollisionShape2D\" type=\"CollisionShape2D\" parent=\".\"]\nshape = SubResource(\"CircleShape2D_player\")\n\n[node name=\"PlayerModel\" type=\"Node2D\" parent=\".\"]\n\n[node name=\"Body\" type=\"Sprite2D\" parent=\"PlayerModel\"]\nz_index = 1\nposition = Vector2(-4, 0)\ntexture = ExtResource(\"4_body\")\n\n[node name=\"LeftArm\" type=\"Sprite2D\" parent=\"PlayerModel\"]\nz_index = 4\nposition = Vector2(24, 6)\ntexture = ExtResource(\"6_left_arm\")\n\n[node name=\"RightArm\" type=\"Sprite2D\" parent=\"PlayerModel\"]\nz_index = 4\nposition = Vector2(-2, 6)\ntexture = ExtResource(\"7_right_arm\")\n\n[node name=\"Head\" type=\"Sprite2D\" parent=\"PlayerModel\"]\nz_index = 3\nposition = Vector2(-6, -2)\ntexture = ExtResource(\"5_head\")\n\n[node name=\"WeaponMount\" type=\"Node2D\" parent=\"PlayerModel\"]\nposition = Vector2(0, 6)\n\n[node name=\"Camera2D\" type=\"Camera2D\" parent=\".\"]\nprocess_callback = 0\nlimit_left = 0\nlimit_top = 0\nlimit_right = 4128\nlimit_bottom = 3088\nlimit_smoothed = true\nposition_smoothing_enabled = true\nposition_smoothing_speed = 5.0\n\n[node name=\"HitArea\" type=\"Area2D\" parent=\".\"]\ncollision_layer = 1\ncollision_mask = 16\nscript = ExtResource(\"2_hit_area\")\n\n[node name=\"HitCollisionShape\" type=\"CollisionShape2D\" parent=\"HitArea\"]\nshape = SubResource(\"CircleShape2D_player\")\n\n[node name=\"ThreatSphere\" type=\"Area2D\" parent=\".\"]\ncollision_layer = 0\ncollision_mask = 16\nmonitorable = false\nscript = ExtResource(\"3_threat_sphere\")\nthreat_radius = 150.0\ntrajectory_tolerance_degrees = 15.0\n\n[node name=\"ThreatCollisionShape\" type=\"CollisionShape2D\" parent=\"ThreatSphere\"]\nshape = SubResource(\"CircleShape2D_threat\")\n",
+      "numLines": 78,
+      "startLine": 1,
+      "totalLines": 78
+    }
+  }
+}
+[2026-01-22T07:17:49.937Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01STfUxygDwZgKHcbTaEFrNk",
+        "type": "tool_result",
+        "content": "/tmp/gh-issue-solver-1769066205054/scenes/objects/Enemy.tscn\n/tmp/gh-issue-solver-1769066205054/scenes/objects/csharp/Enemy.tscn",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "ac5a835e-b6fa-4287-809a-184f1056ee4c",
+  "tool_use_result": {
+    "stdout": "/tmp/gh-issue-solver-1769066205054/scenes/objects/Enemy.tscn\n/tmp/gh-issue-solver-1769066205054/scenes/objects/csharp/Enemy.tscn",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:49.945Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_0112uWt9K92Sy3c1mB1MazyF",
+        "type": "tool_result",
+        "content": "total 60\ndrwxrwxr-x 14 hive hive 4096 Jan 22 08:16 .\ndrwxrwxr-x 13 hive hive 4096 Jan 22 08:16 ..\ndrwxrwxr-x  3 hive hive 4096 Jan 22 08:16 ai\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 autoload\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 characters\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 components\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 data\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 effects\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 levels\n-rw-rw-r--  1 hive hive  325 Jan 22 08:16 main.gd\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 objects\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 projectiles\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 shaders\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 ui\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 utils",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "d13821d0-c049-4577-aa20-0fd78f7337cf",
+  "tool_use_result": {
+    "stdout": "total 60\ndrwxrwxr-x 14 hive hive 4096 Jan 22 08:16 .\ndrwxrwxr-x 13 hive hive 4096 Jan 22 08:16 ..\ndrwxrwxr-x  3 hive hive 4096 Jan 22 08:16 ai\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 autoload\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 characters\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 components\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 data\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 effects\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 levels\n-rw-rw-r--  1 hive hive  325 Jan 22 08:16 main.gd\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 objects\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 projectiles\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 shaders\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 ui\ndrwxrwxr-x  2 hive hive 4096 Jan 22 08:16 utils",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:52.049Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_015BwmsyAYZW13kaQCXJF7wu",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01UFntmEbFuckXESsqk5594r",
+        "name": "Read",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/scenes/objects/Enemy.tscn"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 7,
+      "cache_creation_input_tokens": 2205,
+      "cache_read_input_tokens": 18323,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 2205,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "b389414e-d3fd-4655-b38e-c3f3232045e2"
+}
+[2026-01-22T07:17:52.491Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_015BwmsyAYZW13kaQCXJF7wu",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01J6dBb6Sxt2Kpvc9Q3bpyth",
+        "name": "Bash",
+        "input": {
+          "command": "find /tmp/gh-issue-solver-1769066205054/assets/sprites/characters -type f",
+          "description": "List all character sprite files"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 7,
+      "cache_creation_input_tokens": 2205,
+      "cache_read_input_tokens": 18323,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 2205,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "e31a217b-aa88-4b86-8302-4c46800b18cd"
+}
+[2026-01-22T07:17:52.756Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_015BwmsyAYZW13kaQCXJF7wu",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01Lg7yFzRT6sUrgLcGRRcbwK",
+        "name": "Bash",
+        "input": {
+          "command": "find /tmp/gh-issue-solver-1769066205054/assets/sprites/weapons -type f",
+          "description": "List all weapon sprite files"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 7,
+      "cache_creation_input_tokens": 2205,
+      "cache_read_input_tokens": 18323,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 2205,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "083781d7-db54-436a-967a-5db0196965b7"
+}
+[2026-01-22T07:17:52.802Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01UFntmEbFuckXESsqk5594r",
+        "type": "tool_result",
+        "content": "     1→[gd_scene load_steps=6 format=3 uid=\"uid://cx5m8np6u3bwd\"]\n     2→\n     3→[ext_resource type=\"Script\" path=\"res://scripts/objects/enemy.gd\" id=\"1_enemy\"]\n     4→[ext_resource type=\"Script\" path=\"res://scripts/objects/hit_area.gd\" id=\"2_hit_area\"]\n     5→[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/weapons/m16_rifle_topdown.png\" id=\"3_rifle_sprite\"]\n     6→\n     7→[sub_resource type=\"PlaceholderTexture2D\" id=\"PlaceholderTexture2D_enemy\"]\n     8→size = Vector2(48, 48)\n     9→\n    10→[sub_resource type=\"CircleShape2D\" id=\"CircleShape2D_enemy\"]\n    11→radius = 24.0\n    12→\n    13→[node name=\"Enemy\" type=\"CharacterBody2D\" groups=[\"enemies\"]]\n    14→collision_layer = 2\n    15→collision_mask = 4\n    16→script = ExtResource(\"1_enemy\")\n    17→\n    18→[node name=\"Sprite2D\" type=\"Sprite2D\" parent=\".\"]\n    19→modulate = Color(0.9, 0.2, 0.2, 1)\n    20→texture = SubResource(\"PlaceholderTexture2D_enemy\")\n    21→\n    22→[node name=\"WeaponSprite\" type=\"Sprite2D\" parent=\".\"]\n    23→z_index = 1\n    24→texture = ExtResource(\"3_rifle_sprite\")\n    25→offset = Vector2(20, 0)\n    26→\n    27→[node name=\"CollisionShape2D\" type=\"CollisionShape2D\" parent=\".\"]\n    28→shape = SubResource(\"CircleShape2D_enemy\")\n    29→\n    30→[node name=\"RayCast2D\" type=\"RayCast2D\" parent=\".\"]\n    31→target_position = Vector2(400, 0)\n    32→collision_mask = 5\n    33→\n    34→[node name=\"HitArea\" type=\"Area2D\" parent=\".\"]\n    35→collision_layer = 2\n    36→collision_mask = 16\n    37→script = ExtResource(\"2_hit_area\")\n    38→\n    39→[node name=\"HitCollisionShape\" type=\"CollisionShape2D\" parent=\"HitArea\"]\n    40→shape = SubResource(\"CircleShape2D_enemy\")\n    41→\n    42→[node name=\"NavigationAgent2D\" type=\"NavigationAgent2D\" parent=\".\"]\n    43→path_desired_distance = 4.0\n    44→target_desired_distance = 10.0\n    45→avoidance_enabled = true\n    46→radius = 24.0\n    47→neighbor_distance = 100.0\n    48→max_neighbors = 5\n    49→time_horizon_agents = 1.0\n    50→time_horizon_obstacles = 1.0\n    51→max_speed = 320.0\n    52→debug_enabled = false\n    53→\n    54→[node name=\"DebugLabel\" type=\"Label\" parent=\".\"]\n    55→visible = false\n    56→offset_left = -50.0\n    57→offset_top = -50.0\n    58→offset_right = 50.0\n    59→offset_bottom = -30.0\n    60→horizontal_alignment = 1\n    61→vertical_alignment = 1\n    62→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "c00fb96b-fa92-4df3-878d-bd0838a8da2b",
+  "tool_use_result": {
+    "type": "text",
+    "file": {
+      "filePath": "/tmp/gh-issue-solver-1769066205054/scenes/objects/Enemy.tscn",
+      "content": "[gd_scene load_steps=6 format=3 uid=\"uid://cx5m8np6u3bwd\"]\n\n[ext_resource type=\"Script\" path=\"res://scripts/objects/enemy.gd\" id=\"1_enemy\"]\n[ext_resource type=\"Script\" path=\"res://scripts/objects/hit_area.gd\" id=\"2_hit_area\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/weapons/m16_rifle_topdown.png\" id=\"3_rifle_sprite\"]\n\n[sub_resource type=\"PlaceholderTexture2D\" id=\"PlaceholderTexture2D_enemy\"]\nsize = Vector2(48, 48)\n\n[sub_resource type=\"CircleShape2D\" id=\"CircleShape2D_enemy\"]\nradius = 24.0\n\n[node name=\"Enemy\" type=\"CharacterBody2D\" groups=[\"enemies\"]]\ncollision_layer = 2\ncollision_mask = 4\nscript = ExtResource(\"1_enemy\")\n\n[node name=\"Sprite2D\" type=\"Sprite2D\" parent=\".\"]\nmodulate = Color(0.9, 0.2, 0.2, 1)\ntexture = SubResource(\"PlaceholderTexture2D_enemy\")\n\n[node name=\"WeaponSprite\" type=\"Sprite2D\" parent=\".\"]\nz_index = 1\ntexture = ExtResource(\"3_rifle_sprite\")\noffset = Vector2(20, 0)\n\n[node name=\"CollisionShape2D\" type=\"CollisionShape2D\" parent=\".\"]\nshape = SubResource(\"CircleShape2D_enemy\")\n\n[node name=\"RayCast2D\" type=\"RayCast2D\" parent=\".\"]\ntarget_position = Vector2(400, 0)\ncollision_mask = 5\n\n[node name=\"HitArea\" type=\"Area2D\" parent=\".\"]\ncollision_layer = 2\ncollision_mask = 16\nscript = ExtResource(\"2_hit_area\")\n\n[node name=\"HitCollisionShape\" type=\"CollisionShape2D\" parent=\"HitArea\"]\nshape = SubResource(\"CircleShape2D_enemy\")\n\n[node name=\"NavigationAgent2D\" type=\"NavigationAgent2D\" parent=\".\"]\npath_desired_distance = 4.0\ntarget_desired_distance = 10.0\navoidance_enabled = true\nradius = 24.0\nneighbor_distance = 100.0\nmax_neighbors = 5\ntime_horizon_agents = 1.0\ntime_horizon_obstacles = 1.0\nmax_speed = 320.0\ndebug_enabled = false\n\n[node name=\"DebugLabel\" type=\"Label\" parent=\".\"]\nvisible = false\noffset_left = -50.0\noffset_top = -50.0\noffset_right = 50.0\noffset_bottom = -30.0\nhorizontal_alignment = 1\nvertical_alignment = 1\n",
+      "numLines": 62,
+      "startLine": 1,
+      "totalLines": 62
+    }
+  }
+}
+[2026-01-22T07:17:52.858Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01J6dBb6Sxt2Kpvc9Q3bpyth",
+        "type": "tool_result",
+        "content": "/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/soldier.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/soldier_spear.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/soldier_officer.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_combined_preview.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_head.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_left_arm.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_body.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_right_arm.png",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "0305c3ff-0c1d-4525-98aa-a95d1189daca",
+  "tool_use_result": {
+    "stdout": "/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/soldier.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/soldier_spear.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/soldier_officer.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_combined_preview.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_head.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_left_arm.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_body.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_right_arm.png",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:52.864Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01Lg7yFzRT6sUrgLcGRRcbwK",
+        "type": "tool_result",
+        "content": "/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/flashbang.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_rifle_topdown.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_rifle.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/frag_grenade.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_basic.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/shotgun_icon.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/shotgun_topdown.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_topdown_medium.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/shotgun.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_simple.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_topdown_small.png",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "2f2682ec-80ba-42d4-b80e-b14554532b65",
+  "tool_use_result": {
+    "stdout": "/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/flashbang.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_rifle_topdown.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_rifle.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/frag_grenade.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_basic.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/shotgun_icon.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/shotgun_topdown.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_topdown_medium.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/shotgun.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_simple.png\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons/m16_topdown_small.png",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:54.650Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_01Xs7mTr2wCVmthQdbZkSLdN",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01H3AQwqcYzVeB3qzomEaADs",
+        "name": "Bash",
+        "input": {
+          "command": "ls -la /tmp/gh-issue-solver-1769066205054/scripts/characters/",
+          "description": "List character scripts"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 7,
+      "cache_creation_input_tokens": 1896,
+      "cache_read_input_tokens": 20528,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 1896,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "2056b137-d989-4baf-8ee1-9ee043341d0a"
+}
+[2026-01-22T07:17:54.939Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_01Xs7mTr2wCVmthQdbZkSLdN",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01SYkB996BQcFaJ1BkdUw3Mr",
+        "name": "Bash",
+        "input": {
+          "command": "ls -la /tmp/gh-issue-solver-1769066205054/scripts/objects/",
+          "description": "List object scripts"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 7,
+      "cache_creation_input_tokens": 1896,
+      "cache_read_input_tokens": 20528,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 1896,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "7768e2be-9c36-4577-bc88-7696f64b02e4"
+}
+[2026-01-22T07:17:55.398Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_01Xs7mTr2wCVmthQdbZkSLdN",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01KjMRcbvZaYsmiXu4ZpiCHs",
+        "name": "Bash",
+        "input": {
+          "command": "find /tmp/gh-issue-solver-1769066205054/assets -type d | sort",
+          "description": "Show complete asset directory tree"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 7,
+      "cache_creation_input_tokens": 1896,
+      "cache_read_input_tokens": 20528,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 1896,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "7a46abd2-dfb1-4f2a-ab3b-65b5ec15bbf3"
+}
+[2026-01-22T07:17:55.507Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01H3AQwqcYzVeB3qzomEaADs",
+        "type": "tool_result",
+        "content": "total 64\ndrwxrwxr-x  2 hive hive  4096 Jan 22 08:16 .\ndrwxrwxr-x 14 hive hive  4096 Jan 22 08:16 ..\n-rw-rw-r--  1 hive hive 54846 Jan 22 08:16 player.gd",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "e59848fc-8b53-4ab1-989c-03dc9054473c",
+  "tool_use_result": {
+    "stdout": "total 64\ndrwxrwxr-x  2 hive hive  4096 Jan 22 08:16 .\ndrwxrwxr-x 14 hive hive  4096 Jan 22 08:16 ..\n-rw-rw-r--  1 hive hive 54846 Jan 22 08:16 player.gd",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:55.522Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01SYkB996BQcFaJ1BkdUw3Mr",
+        "type": "tool_result",
+        "content": "total 180\ndrwxrwxr-x  2 hive hive   4096 Jan 22 08:16 .\ndrwxrwxr-x 14 hive hive   4096 Jan 22 08:16 ..\n-rw-rw-r--  1 hive hive 161486 Jan 22 08:16 enemy.gd\n-rw-rw-r--  1 hive hive   3535 Jan 22 08:16 grenade_target.gd\n-rw-rw-r--  1 hive hive   2061 Jan 22 08:16 hit_area.gd\n-rw-rw-r--  1 hive hive   3444 Jan 22 08:16 target.gd",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "48bae0be-304c-493c-8605-1407bfe028c4",
+  "tool_use_result": {
+    "stdout": "total 180\ndrwxrwxr-x  2 hive hive   4096 Jan 22 08:16 .\ndrwxrwxr-x 14 hive hive   4096 Jan 22 08:16 ..\n-rw-rw-r--  1 hive hive 161486 Jan 22 08:16 enemy.gd\n-rw-rw-r--  1 hive hive   3535 Jan 22 08:16 grenade_target.gd\n-rw-rw-r--  1 hive hive   2061 Jan 22 08:16 hit_area.gd\n-rw-rw-r--  1 hive hive   3444 Jan 22 08:16 target.gd",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:55.528Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01KjMRcbvZaYsmiXu4ZpiCHs",
+        "type": "tool_result",
+        "content": "",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "6e8bc320-8c8b-433f-bb30-c4ba56cd1c0f",
+  "tool_use_result": {
+    "stdout": "",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:17:57.266Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-haiku-4-5-20251001",
+    "id": "msg_014hWRvTpmdB1z1WkZ6Hz35C",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01FjYopJp6ugxe4NTyj2p2sy",
+        "name": "Bash",
+        "input": {
+          "command": "find /tmp/gh-issue-solver-1769066205054/assets -type d",
+          "description": "Show all asset subdirectories"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 7,
+      "cache_creation_input_tokens": 776,
+      "cache_read_input_tokens": 22424,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 776,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 25,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "52d95cf1-287a-4bf9-be4d-a2c00e407f04"
+}
+[2026-01-22T07:17:57.367Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01FjYopJp6ugxe4NTyj2p2sy",
+        "type": "tool_result",
+        "content": "/tmp/gh-issue-solver-1769066205054/assets\n/tmp/gh-issue-solver-1769066205054/assets/fonts\n/tmp/gh-issue-solver-1769066205054/assets/sprites\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons\n/tmp/gh-issue-solver-1769066205054/assets/audio",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "88bedac7-5ab6-43df-8f26-70fa92fb2aa4",
+  "tool_use_result": {
+    "stdout": "/tmp/gh-issue-solver-1769066205054/assets\n/tmp/gh-issue-solver-1769066205054/assets/fonts\n/tmp/gh-issue-solver-1769066205054/assets/sprites\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters\n/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player\n/tmp/gh-issue-solver-1769066205054/assets/sprites/weapons\n/tmp/gh-issue-solver-1769066205054/assets/audio",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:18:10.847Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_016AwuDzmjWG2szRPQMBvp9U",
+        "type": "tool_result",
+        "content": [
+          {
+            "type": "text",
+            "text": "Perfect! Now let me create a comprehensive summary report of my findings.\n\n## Godot Project Sprite/Model Structure Report\n\nI've thoroughly explored the Godot project and found a well-organized sprite and asset structure. Here are my findings:\n\n### 1. **Player Model/Sprite Files**\n\nThe player character uses a **modular, component-based sprite system**. All player sprites are located in:\n- `/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/`\n\n**Player Components:**\n- `player_body.png` - Main torso sprite\n- `player_head.png` - Head sprite\n- `player_left_arm.png` - Left arm sprite\n- `player_right_arm.png` - Right arm sprite\n- `player_combined_preview.png` - Preview showing all parts combined\n\n**Player Scene Definition:**\n- `/tmp/gh-issue-solver-1769066205054/scenes/characters/Player.tscn`\n- Uses modular assembly via a `PlayerModel` node that combines individual body parts at specific Z-indexes and positions:\n  - Body (Z-index: 1, position: -4, 0)\n  - Head (Z-index: 3, position: -6, -2)\n  - Left Arm (Z-index: 4, position: 24, 6)\n  - Right Arm (Z-index: 4, position: -2, 6)\n- Includes a `WeaponMount` node for weapon attachment\n- Collision: CircleShape2D with radius 16.0\n- Threat sphere: Radius 150.0\n\n### 2. **Enemy Model/Sprite Files**\n\nEnemies use a **placeholder sprite system** but have detailed enemy definitions. Enemy sprites are located in:\n- `/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/`\n\n**Enemy Character Sprites:**\n- `soldier.png` - Basic soldier sprite\n- `soldier_spear.png` - Soldier with spear variant\n- `soldier_officer.png` - Officer variant\n\n**Enemy Scene Definition:**\n- `/tmp/gh-issue-solver-1769066205054/scenes/objects/Enemy.tscn`\n- Currently uses a `PlaceholderTexture2D` (48x48) in red color for the main sprite\n- Includes `WeaponSprite` using `m16_rifle_topdown.png` weapon sprite\n- Collision: CircleShape2D with radius 24.0\n- Navigation: Uses NavigationAgent2D with max_speed: 320.0\n- Equipped with M16 rifle weapon\n\n### 3. **Project Asset Organization**\n\n**Directory Structure:**\n```\n/assets/\n├── sprites/\n│   ├── characters/\n│   │   ├── player/\n│   │   │   ├── player_body.png\n│   │   │   ├── player_head.png\n│   │   │   ├── player_left_arm.png\n│   │   │   ├── player_right_arm.png\n│   │   │   └── player_combined_preview.png\n│   │   ├── soldier.png\n│   │   ├── soldier_spear.png\n│   │   └── soldier_officer.png\n│   └── weapons/\n│       ├── m16_rifle_topdown.png\n│       ├── m16_rifle.png\n│       ├── m16_basic.png\n│       ├── m16_simple.png\n│       ├── m16_topdown_medium.png\n│       ├── m16_topdown_small.png\n│       ├── shotgun.png\n│       ├── shotgun_topdown.png\n│       ├── shotgun_icon.png\n│       ├── frag_grenade.png\n│       └── flashbang.png\n├── fonts/\n└── audio/\n\n/scenes/\n├── characters/\n│   └── Player.tscn (main player scene)\n├── objects/\n│   └── Enemy.tscn (enemy template scene)\n└── [other scene directories]\n\n/scripts/\n├── characters/\n│   └── player.gd (player controller script)\n└── objects/\n    ├── enemy.gd (enemy AI/behavior)\n    ├── hit_area.gd (damage detection)\n    ├── target.gd\n    └── grenade_target.gd\n```\n\n### 4. **Sprite Usage Pattern**\n\n**Player Construction:**\n- Modular approach: Body parts assembled at runtime with precise positioning\n- Weapon mounted separately via WeaponMount node\n- Supports dynamic animation through individual component rotation/positioning\n\n**Enemy Construction:**\n- Placeholder sprite currently in use (red circle with 48x48 size)\n- Actual soldier sprites available but not yet integrated\n- Weapon sprite displayed as overlay using `m16_rifle_topdown.png`\n- Red color tint applied via modulate property\n\n**Weapons:**\n- Separate weapon sprite system with multiple variants (M16 rifles, shotguns, grenades)\n- Top-down optimized versions available (`_topdown` suffix)\n- Multiple detail levels (basic, simple, medium)\n\n### 5. **Key Observations**\n\n1. **Player uses modular sprites** - Body parts are separate PNG files combined into a single character\n2. **Enemy uses a placeholder sprite** - The soldier sprites exist but aren't currently used; enemies render as red placeholders\n3. **Comprehensive weapon sprite library** - Multiple weapon variants for different gameplay scenarios\n4. **Well-organized directory structure** - Clear separation between characters, weapons, and other assets\n5. **Top-down perspective optimization** - Multiple top-down weapon variants suggest this is a top-down tactical shooter\n6. **Collision layers properly configured** - Player (layer 1), Enemies (layer 2), World (layer 4), Weapons (layer 16)\n\nAll files are absolute paths as requested in the response above."
+          },
+          {
+            "type": "text",
+            "text": "agentId: a29454e (for resuming to continue this agent's work if needed)"
+          }
+        ]
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "62509ace-48d4-4e37-98c1-f977204a8c77",
+  "tool_use_result": {
+    "status": "completed",
+    "prompt": "Explore this Godot project to find:\n1. Player model/sprite files - look in assets/, scenes/, resources/ directories\n2. Enemy model/sprite files if they exist\n3. Understand the structure of how sprites/models are organized\n\nFocus on finding image files (.png, .svg, .jpg, etc.) that represent the player character and any enemy characters. Look for character sprites, particularly any that might be called \"player\" or similar.",
+    "agentId": "a29454e",
+    "content": [
+      {
+        "type": "text",
+        "text": "Perfect! Now let me create a comprehensive summary report of my findings.\n\n## Godot Project Sprite/Model Structure Report\n\nI've thoroughly explored the Godot project and found a well-organized sprite and asset structure. Here are my findings:\n\n### 1. **Player Model/Sprite Files**\n\nThe player character uses a **modular, component-based sprite system**. All player sprites are located in:\n- `/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/`\n\n**Player Components:**\n- `player_body.png` - Main torso sprite\n- `player_head.png` - Head sprite\n- `player_left_arm.png` - Left arm sprite\n- `player_right_arm.png` - Right arm sprite\n- `player_combined_preview.png` - Preview showing all parts combined\n\n**Player Scene Definition:**\n- `/tmp/gh-issue-solver-1769066205054/scenes/characters/Player.tscn`\n- Uses modular assembly via a `PlayerModel` node that combines individual body parts at specific Z-indexes and positions:\n  - Body (Z-index: 1, position: -4, 0)\n  - Head (Z-index: 3, position: -6, -2)\n  - Left Arm (Z-index: 4, position: 24, 6)\n  - Right Arm (Z-index: 4, position: -2, 6)\n- Includes a `WeaponMount` node for weapon attachment\n- Collision: CircleShape2D with radius 16.0\n- Threat sphere: Radius 150.0\n\n### 2. **Enemy Model/Sprite Files**\n\nEnemies use a **placeholder sprite system** but have detailed enemy definitions. Enemy sprites are located in:\n- `/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/`\n\n**Enemy Character Sprites:**\n- `soldier.png` - Basic soldier sprite\n- `soldier_spear.png` - Soldier with spear variant\n- `soldier_officer.png` - Officer variant\n\n**Enemy Scene Definition:**\n- `/tmp/gh-issue-solver-1769066205054/scenes/objects/Enemy.tscn`\n- Currently uses a `PlaceholderTexture2D` (48x48) in red color for the main sprite\n- Includes `WeaponSprite` using `m16_rifle_topdown.png` weapon sprite\n- Collision: CircleShape2D with radius 24.0\n- Navigation: Uses NavigationAgent2D with max_speed: 320.0\n- Equipped with M16 rifle weapon\n\n### 3. **Project Asset Organization**\n\n**Directory Structure:**\n```\n/assets/\n├── sprites/\n│   ├── characters/\n│   │   ├── player/\n│   │   │   ├── player_body.png\n│   │   │   ├── player_head.png\n│   │   │   ├── player_left_arm.png\n│   │   │   ├── player_right_arm.png\n│   │   │   └── player_combined_preview.png\n│   │   ├── soldier.png\n│   │   ├── soldier_spear.png\n│   │   └── soldier_officer.png\n│   └── weapons/\n│       ├── m16_rifle_topdown.png\n│       ├── m16_rifle.png\n│       ├── m16_basic.png\n│       ├── m16_simple.png\n│       ├── m16_topdown_medium.png\n│       ├── m16_topdown_small.png\n│       ├── shotgun.png\n│       ├── shotgun_topdown.png\n│       ├── shotgun_icon.png\n│       ├── frag_grenade.png\n│       └── flashbang.png\n├── fonts/\n└── audio/\n\n/scenes/\n├── characters/\n│   └── Player.tscn (main player scene)\n├── objects/\n│   └── Enemy.tscn (enemy template scene)\n└── [other scene directories]\n\n/scripts/\n├── characters/\n│   └── player.gd (player controller script)\n└── objects/\n    ├── enemy.gd (enemy AI/behavior)\n    ├── hit_area.gd (damage detection)\n    ├── target.gd\n    └── grenade_target.gd\n```\n\n### 4. **Sprite Usage Pattern**\n\n**Player Construction:**\n- Modular approach: Body parts assembled at runtime with precise positioning\n- Weapon mounted separately via WeaponMount node\n- Supports dynamic animation through individual component rotation/positioning\n\n**Enemy Construction:**\n- Placeholder sprite currently in use (red circle with 48x48 size)\n- Actual soldier sprites available but not yet integrated\n- Weapon sprite displayed as overlay using `m16_rifle_topdown.png`\n- Red color tint applied via modulate property\n\n**Weapons:**\n- Separate weapon sprite system with multiple variants (M16 rifles, shotguns, grenades)\n- Top-down optimized versions available (`_topdown` suffix)\n- Multiple detail levels (basic, simple, medium)\n\n### 5. **Key Observations**\n\n1. **Player uses modular sprites** - Body parts are separate PNG files combined into a single character\n2. **Enemy uses a placeholder sprite** - The soldier sprites exist but aren't currently used; enemies render as red placeholders\n3. **Comprehensive weapon sprite library** - Multiple weapon variants for different gameplay scenarios\n4. **Well-organized directory structure** - Clear separation between characters, weapons, and other assets\n5. **Top-down perspective optimization** - Multiple top-down weapon variants suggest this is a top-down tactical shooter\n6. **Collision layers properly configured** - Player (layer 1), Enemies (layer 2), World (layer 4), Weapons (layer 16)\n\nAll files are absolute paths as requested in the response above."
+      }
+    ],
+    "totalDurationMs": 33385,
+    "totalTokens": 23485,
+    "totalToolUseCount": 20,
+    "usage": {
+      "input_tokens": 5,
+      "cache_creation_input_tokens": 279,
+      "cache_read_input_tokens": 23200,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 279,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    }
+  }
+}
+[2026-01-22T07:18:14.406Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01VzkJoS1pZmtCBeZVhAfdUv",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Now I understand the structure. The issue asks to create enemy models based on the player model with:\n- Black as the main color\n- White skulls on forearms or helmet\n\nLet me create a detailed todo list and start implementing:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 1636,
+      "cache_read_input_tokens": 26906,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 1636,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "90499d46-ea3e-44c1-b7f9-20e1021e251b"
+}
+[2026-01-22T07:18:18.616Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01VzkJoS1pZmtCBeZVhAfdUv",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_017PgiouJoCnxjVVwQVGe2WL",
+        "name": "TodoWrite",
+        "input": {
+          "todos": [
+            {
+              "content": "Read and analyze player sprite files structure",
+              "status": "in_progress",
+              "activeForm": "Analyzing player sprite files"
+            },
+            {
+              "content": "Create enemy body sprite (black version of player body)",
+              "status": "pending",
+              "activeForm": "Creating enemy body sprite"
+            },
+            {
+              "content": "Create enemy head sprite (black with white skull)",
+              "status": "pending",
+              "activeForm": "Creating enemy head sprite"
+            },
+            {
+              "content": "Create enemy arm sprites (black with white skull on forearm)",
+              "status": "pending",
+              "activeForm": "Creating enemy arm sprites"
+            },
+            {
+              "content": "Create combined preview image for enemy",
+              "status": "pending",
+              "activeForm": "Creating combined preview image"
+            },
+            {
+              "content": "Update Enemy.tscn to use new modular enemy sprites",
+              "status": "pending",
+              "activeForm": "Updating Enemy scene"
+            },
+            {
+              "content": "Test the enemy model in the game",
+              "status": "pending",
+              "activeForm": "Testing enemy model"
+            },
+            {
+              "content": "Commit and update PR",
+              "status": "pending",
+              "activeForm": "Committing and updating PR"
+            }
+          ]
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 1636,
+      "cache_read_input_tokens": 26906,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 1636,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "4dc3b2d7-21fa-479b-a3e0-37e9aac19269"
+}
+[2026-01-22T07:18:18.640Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_017PgiouJoCnxjVVwQVGe2WL",
+        "type": "tool_result",
+        "content": "Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "be82739f-0dce-40f1-b45e-5368d3e3520e",
+  "tool_use_result": {
+    "oldTodos": [],
+    "newTodos": [
+      {
+        "content": "Read and analyze player sprite files structure",
+        "status": "in_progress",
+        "activeForm": "Analyzing player sprite files"
+      },
+      {
+        "content": "Create enemy body sprite (black version of player body)",
+        "status": "pending",
+        "activeForm": "Creating enemy body sprite"
+      },
+      {
+        "content": "Create enemy head sprite (black with white skull)",
+        "status": "pending",
+        "activeForm": "Creating enemy head sprite"
+      },
+      {
+        "content": "Create enemy arm sprites (black with white skull on forearm)",
+        "status": "pending",
+        "activeForm": "Creating enemy arm sprites"
+      },
+      {
+        "content": "Create combined preview image for enemy",
+        "status": "pending",
+        "activeForm": "Creating combined preview image"
+      },
+      {
+        "content": "Update Enemy.tscn to use new modular enemy sprites",
+        "status": "pending",
+        "activeForm": "Updating Enemy scene"
+      },
+      {
+        "content": "Test the enemy model in the game",
+        "status": "pending",
+        "activeForm": "Testing enemy model"
+      },
+      {
+        "content": "Commit and update PR",
+        "status": "pending",
+        "activeForm": "Committing and updating PR"
+      }
+    ]
+  }
+}
+[2026-01-22T07:18:21.939Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01Mu4cwefQuxucVX6ABnPbVk",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01Qbo8B8CpJRMbSeeAZpu9Ws",
+        "name": "Read",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_body.png"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 393,
+      "cache_read_input_tokens": 28542,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 393,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 18,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "d9f53afb-5fd2-4506-9c99-e1bd45b57d72"
+}
+[2026-01-22T07:18:22.346Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01Mu4cwefQuxucVX6ABnPbVk",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01S1PvSEcZyAhrxQYjCfUkuR",
+        "name": "Read",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_head.png"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 393,
+      "cache_read_input_tokens": 28542,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 393,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 18,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "cd3c7b19-d022-46f4-81d5-907def27cf2c"
+}
+[2026-01-22T07:18:23.089Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01Mu4cwefQuxucVX6ABnPbVk",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01XbHAHJ5XEct7JW1z8Sedy4",
+        "name": "Read",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_left_arm.png"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 393,
+      "cache_read_input_tokens": 28542,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 393,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 18,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "10fd5626-bb22-4996-9515-3f0c5498c364"
+}
+[2026-01-22T07:18:23.415Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01Mu4cwefQuxucVX6ABnPbVk",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01PEumpwvayYfWWcLoEG8DPw",
+        "name": "Read",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_right_arm.png"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 393,
+      "cache_read_input_tokens": 28542,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 393,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 18,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "d9d0c2c5-5a53-496b-9087-7f9f910fd679"
+}
+[2026-01-22T07:18:23.508Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01S1PvSEcZyAhrxQYjCfUkuR",
+        "type": "tool_result",
+        "content": [
+          {
+            "type": "image",
+            "source": {
+              "type": "base64",
+              "data": "iVBORw0KGgoAAAANSUhEUgAAAA4AAAASCAYAAABrXO8xAAAAkElEQVR4nO2TqxWEQAxF70wDY2LQFLEaTRuURRFrVq/GbAdozBgqABWWTxgYz9O55+bk5DmMlK9ykiIA0L1/zppxewBAIY1I4NN+N7P+CgKIcaRuqukApqAzeDGmIAv2asuNW1/wbkTCf9XcPKARfT8PEIcx39h3vfn9KRusVr2y7hviAdR6BoscP+tWH60yzxbpNcME0pS5AAAAAElFTkSuQmCC",
+              "media_type": "image/png"
+            }
+          }
+        ]
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "4911fa73-d3c7-4a9b-a006-1a600344a7b4",
+  "tool_use_result": {
+    "type": "image",
+    "file": {
+      "base64": "iVBORw0KGgoAAAANSUhEUgAAAA4AAAASCAYAAABrXO8xAAAAkElEQVR4nO2TqxWEQAxF70wDY2LQFLEaTRuURRFrVq/GbAdozBgqABWWTxgYz9O55+bk5DmMlK9ykiIA0L1/zppxewBAIY1I4NN+N7P+CgKIcaRuqukApqAzeDGmIAv2asuNW1/wbkTCf9XcPKARfT8PEIcx39h3vfn9KRusVr2y7hviAdR6BoscP+tWH60yzxbpNcME0pS5AAAAAElFTkSuQmCC",
+      "type": "image/png",
+      "originalSize": 201,
+      "dimensions": {
+        "originalWidth": 14,
+        "originalHeight": 18,
+        "displayWidth": 14,
+        "displayHeight": 18
+      }
+    }
+  }
+}
+[2026-01-22T07:18:23.528Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01Qbo8B8CpJRMbSeeAZpu9Ws",
+        "type": "tool_result",
+        "content": [
+          {
+            "type": "image",
+            "source": {
+              "type": "base64",
+              "data": "iVBORw0KGgoAAAANSUhEUgAAABwAAAAYCAYAAADpnJ2CAAABDUlEQVR4nM2WIRfCIBDHD99WLBQKZWXFYrHsa/gB/RAWs3nFbKFYViiUFYMGHntucnCwzec/bbyD3x3cHTCYqbqpX+5btYrF7KMGFNBUIXAyMASigMnAFFAIGgXmgjAoClwC5CQkh/Z8Y15gczwEQZV5AgDAg5dpUMHhcrqyggpaSiwVlBshgI2yiJtZ9crNmvwj2tb+8Q0VmCqfQ1qb9YCYfgoUgv8+wqEOY9nqzmQnbJbeNZ6lvoT5qkPXCTDwsIjBF6Uo2tqE5KPx3Dp0AaF1ODRcBJwrcuHrzu5l2dsIdR+PUEgOujOj2yKapapVjPJ0CDn5qdXLYuoseUvdRLmvZt0q//+ICoEpZ/0GwxJqUqHWIssAAAAASUVORK5CYII=",
+              "media_type": "image/png"
+            }
+          }
+        ]
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "2435c7e8-8a4f-4007-901e-42ae0e81610f",
+  "tool_use_result": {
+    "type": "image",
+    "file": {
+      "base64": "iVBORw0KGgoAAAANSUhEUgAAABwAAAAYCAYAAADpnJ2CAAABDUlEQVR4nM2WIRfCIBDHD99WLBQKZWXFYrHsa/gB/RAWs3nFbKFYViiUFYMGHntucnCwzec/bbyD3x3cHTCYqbqpX+5btYrF7KMGFNBUIXAyMASigMnAFFAIGgXmgjAoClwC5CQkh/Z8Y15gczwEQZV5AgDAg5dpUMHhcrqyggpaSiwVlBshgI2yiJtZ9crNmvwj2tb+8Q0VmCqfQ1qb9YCYfgoUgv8+wqEOY9nqzmQnbJbeNZ6lvoT5qkPXCTDwsIjBF6Uo2tqE5KPx3Dp0AaF1ODRcBJwrcuHrzu5l2dsIdR+PUEgOujOj2yKapapVjPJ0CDn5qdXLYuoseUvdRLmvZt0q//+ICoEpZ/0GwxJqUqHWIssAAAAASUVORK5CYII=",
+      "type": "image/png",
+      "originalSize": 326,
+      "dimensions": {
+        "originalWidth": 28,
+        "originalHeight": 24,
+        "displayWidth": 28,
+        "displayHeight": 24
+      }
+    }
+  }
+}
+[2026-01-22T07:18:23.560Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01XbHAHJ5XEct7JW1z8Sedy4",
+        "type": "tool_result",
+        "content": [
+          {
+            "type": "image",
+            "source": {
+              "type": "base64",
+              "data": "iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAAVUlEQVR4nGNgoDJgxCepbK78n1iDRCT5GU5uOMcIN3BaXsD/6fsfMTAwMDB84/oIV0SyC9f3ZMJd8fzRc4aFjx6RbAgyYEHmSMpJMoh8+0iRgSMQAADs6xTDjBvTPwAAAABJRU5ErkJggg==",
+              "media_type": "image/png"
+            }
+          }
+        ]
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "2cab9114-b550-4cc0-b798-ee17c18efa2f",
+  "tool_use_result": {
+    "type": "image",
+    "file": {
+      "base64": "iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAAVUlEQVR4nGNgoDJgxCepbK78n1iDRCT5GU5uOMcIN3BaXsD/6fsfMTAwMDB84/oIV0SyC9f3ZMJd8fzRc4aFjx6RbAgyYEHmSMpJMoh8+0iRgSMQAADs6xTDjBvTPwAAAABJRU5ErkJggg==",
+      "type": "image/png",
+      "originalSize": 142,
+      "dimensions": {
+        "originalWidth": 20,
+        "originalHeight": 8,
+        "displayWidth": 20,
+        "displayHeight": 8
+      }
+    }
+  }
+}
+[2026-01-22T07:18:23.574Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01PEumpwvayYfWWcLoEG8DPw",
+        "type": "tool_result",
+        "content": [
+          {
+            "type": "image",
+            "source": {
+              "type": "base64",
+              "data": "iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAAVUlEQVR4nGNgGHGAcX1P5n9kgTk3blBkIAsy5/mj5wxv3nykyEBGGGNaXsD/6fsfMTAwMDB844IYKiLJT76B2ICyufJ/fPLIQESSn+HkhnN4zSMLAADLthUoB9DYWwAAAABJRU5ErkJggg==",
+              "media_type": "image/png"
+            }
+          }
+        ]
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "2c9e126f-137d-4ff3-8eed-c1d916e2bf09",
+  "tool_use_result": {
+    "type": "image",
+    "file": {
+      "base64": "iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAAVUlEQVR4nGNgGHGAcX1P5n9kgTk3blBkIAsy5/mj5wxv3nykyEBGGGNaXsD/6fsfMTAwMDB844IYKiLJT76B2ICyufJ/fPLIQESSn+HkhnN4zSMLAADLthUoB9DYWwAAAABJRU5ErkJggg==",
+      "type": "image/png",
+      "originalSize": 142,
+      "dimensions": {
+        "originalWidth": 20,
+        "originalHeight": 8,
+        "displayWidth": 20,
+        "displayHeight": 8
+      }
+    }
+  }
+}
+[2026-01-22T07:18:27.455Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_019L7YuzWEaTjZpcpZ6E7gXg",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "I can see the player sprites are small pixel art sprites with a green/military color scheme. Let me also check the combined preview and the Player.tscn to understand the full structure:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 406,
+      "cache_read_input_tokens": 28935,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 406,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "c928b1bf-7394-43f2-a987-872a04944183"
+}
+[2026-01-22T07:18:27.892Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_019L7YuzWEaTjZpcpZ6E7gXg",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01ECDVH1q7tv2v8Ttaktp3Vd",
+        "name": "Read",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/player_combined_preview.png"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 406,
+      "cache_read_input_tokens": 28935,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 406,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "410975e9-94af-4a6f-8452-5a2ad4d0561a"
+}
+[2026-01-22T07:18:28.301Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_019L7YuzWEaTjZpcpZ6E7gXg",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01Bk6nQpZQJ9uySXv5crSHEt",
+        "name": "Read",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/scenes/characters/Player.tscn"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 406,
+      "cache_read_input_tokens": 28935,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 406,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "60d6f6a5-ea56-435e-a058-6ec4a15c129b"
+}
+[2026-01-22T07:18:28.335Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01Bk6nQpZQJ9uySXv5crSHEt",
+        "type": "tool_result",
+        "content": "     1→[gd_scene load_steps=11 format=3 uid=\"uid://bk8nq2vj5r7p1\"]\n     2→\n     3→[ext_resource type=\"Script\" path=\"res://scripts/characters/player.gd\" id=\"1_player\"]\n     4→[ext_resource type=\"Script\" path=\"res://scripts/objects/hit_area.gd\" id=\"2_hit_area\"]\n     5→[ext_resource type=\"Script\" path=\"res://scripts/components/threat_sphere.gd\" id=\"3_threat_sphere\"]\n     6→[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/player/player_body.png\" id=\"4_body\"]\n     7→[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/player/player_head.png\" id=\"5_head\"]\n     8→[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/player/player_left_arm.png\" id=\"6_left_arm\"]\n     9→[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/player/player_right_arm.png\" id=\"7_right_arm\"]\n    10→\n    11→[sub_resource type=\"CircleShape2D\" id=\"CircleShape2D_player\"]\n    12→radius = 16.0\n    13→\n    14→[sub_resource type=\"CircleShape2D\" id=\"CircleShape2D_threat\"]\n    15→radius = 150.0\n    16→\n    17→[node name=\"Player\" type=\"CharacterBody2D\" groups=[\"player\"]]\n    18→collision_layer = 1\n    19→collision_mask = 4\n    20→script = ExtResource(\"1_player\")\n    21→\n    22→[node name=\"CollisionShape2D\" type=\"CollisionShape2D\" parent=\".\"]\n    23→shape = SubResource(\"CircleShape2D_player\")\n    24→\n    25→[node name=\"PlayerModel\" type=\"Node2D\" parent=\".\"]\n    26→\n    27→[node name=\"Body\" type=\"Sprite2D\" parent=\"PlayerModel\"]\n    28→z_index = 1\n    29→position = Vector2(-4, 0)\n    30→texture = ExtResource(\"4_body\")\n    31→\n    32→[node name=\"LeftArm\" type=\"Sprite2D\" parent=\"PlayerModel\"]\n    33→z_index = 4\n    34→position = Vector2(24, 6)\n    35→texture = ExtResource(\"6_left_arm\")\n    36→\n    37→[node name=\"RightArm\" type=\"Sprite2D\" parent=\"PlayerModel\"]\n    38→z_index = 4\n    39→position = Vector2(-2, 6)\n    40→texture = ExtResource(\"7_right_arm\")\n    41→\n    42→[node name=\"Head\" type=\"Sprite2D\" parent=\"PlayerModel\"]\n    43→z_index = 3\n    44→position = Vector2(-6, -2)\n    45→texture = ExtResource(\"5_head\")\n    46→\n    47→[node name=\"WeaponMount\" type=\"Node2D\" parent=\"PlayerModel\"]\n    48→position = Vector2(0, 6)\n    49→\n    50→[node name=\"Camera2D\" type=\"Camera2D\" parent=\".\"]\n    51→process_callback = 0\n    52→limit_left = 0\n    53→limit_top = 0\n    54→limit_right = 4128\n    55→limit_bottom = 3088\n    56→limit_smoothed = true\n    57→position_smoothing_enabled = true\n    58→position_smoothing_speed = 5.0\n    59→\n    60→[node name=\"HitArea\" type=\"Area2D\" parent=\".\"]\n    61→collision_layer = 1\n    62→collision_mask = 16\n    63→script = ExtResource(\"2_hit_area\")\n    64→\n    65→[node name=\"HitCollisionShape\" type=\"CollisionShape2D\" parent=\"HitArea\"]\n    66→shape = SubResource(\"CircleShape2D_player\")\n    67→\n    68→[node name=\"ThreatSphere\" type=\"Area2D\" parent=\".\"]\n    69→collision_layer = 0\n    70→collision_mask = 16\n    71→monitorable = false\n    72→script = ExtResource(\"3_threat_sphere\")\n    73→threat_radius = 150.0\n    74→trajectory_tolerance_degrees = 15.0\n    75→\n    76→[node name=\"ThreatCollisionShape\" type=\"CollisionShape2D\" parent=\"ThreatSphere\"]\n    77→shape = SubResource(\"CircleShape2D_threat\")\n    78→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "e015ade2-36f9-4bb9-81f1-ffc666f3fe46",
+  "tool_use_result": {
+    "type": "text",
+    "file": {
+      "filePath": "/tmp/gh-issue-solver-1769066205054/scenes/characters/Player.tscn",
+      "content": "[gd_scene load_steps=11 format=3 uid=\"uid://bk8nq2vj5r7p1\"]\n\n[ext_resource type=\"Script\" path=\"res://scripts/characters/player.gd\" id=\"1_player\"]\n[ext_resource type=\"Script\" path=\"res://scripts/objects/hit_area.gd\" id=\"2_hit_area\"]\n[ext_resource type=\"Script\" path=\"res://scripts/components/threat_sphere.gd\" id=\"3_threat_sphere\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/player/player_body.png\" id=\"4_body\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/player/player_head.png\" id=\"5_head\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/player/player_left_arm.png\" id=\"6_left_arm\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/player/player_right_arm.png\" id=\"7_right_arm\"]\n\n[sub_resource type=\"CircleShape2D\" id=\"CircleShape2D_player\"]\nradius = 16.0\n\n[sub_resource type=\"CircleShape2D\" id=\"CircleShape2D_threat\"]\nradius = 150.0\n\n[node name=\"Player\" type=\"CharacterBody2D\" groups=[\"player\"]]\ncollision_layer = 1\ncollision_mask = 4\nscript = ExtResource(\"1_player\")\n\n[node name=\"CollisionShape2D\" type=\"CollisionShape2D\" parent=\".\"]\nshape = SubResource(\"CircleShape2D_player\")\n\n[node name=\"PlayerModel\" type=\"Node2D\" parent=\".\"]\n\n[node name=\"Body\" type=\"Sprite2D\" parent=\"PlayerModel\"]\nz_index = 1\nposition = Vector2(-4, 0)\ntexture = ExtResource(\"4_body\")\n\n[node name=\"LeftArm\" type=\"Sprite2D\" parent=\"PlayerModel\"]\nz_index = 4\nposition = Vector2(24, 6)\ntexture = ExtResource(\"6_left_arm\")\n\n[node name=\"RightArm\" type=\"Sprite2D\" parent=\"PlayerModel\"]\nz_index = 4\nposition = Vector2(-2, 6)\ntexture = ExtResource(\"7_right_arm\")\n\n[node name=\"Head\" type=\"Sprite2D\" parent=\"PlayerModel\"]\nz_index = 3\nposition = Vector2(-6, -2)\ntexture = ExtResource(\"5_head\")\n\n[node name=\"WeaponMount\" type=\"Node2D\" parent=\"PlayerModel\"]\nposition = Vector2(0, 6)\n\n[node name=\"Camera2D\" type=\"Camera2D\" parent=\".\"]\nprocess_callback = 0\nlimit_left = 0\nlimit_top = 0\nlimit_right = 4128\nlimit_bottom = 3088\nlimit_smoothed = true\nposition_smoothing_enabled = true\nposition_smoothing_speed = 5.0\n\n[node name=\"HitArea\" type=\"Area2D\" parent=\".\"]\ncollision_layer = 1\ncollision_mask = 16\nscript = ExtResource(\"2_hit_area\")\n\n[node name=\"HitCollisionShape\" type=\"CollisionShape2D\" parent=\"HitArea\"]\nshape = SubResource(\"CircleShape2D_player\")\n\n[node name=\"ThreatSphere\" type=\"Area2D\" parent=\".\"]\ncollision_layer = 0\ncollision_mask = 16\nmonitorable = false\nscript = ExtResource(\"3_threat_sphere\")\nthreat_radius = 150.0\ntrajectory_tolerance_degrees = 15.0\n\n[node name=\"ThreatCollisionShape\" type=\"CollisionShape2D\" parent=\"ThreatSphere\"]\nshape = SubResource(\"CircleShape2D_threat\")\n",
+      "numLines": 78,
+      "startLine": 1,
+      "totalLines": 78
+    }
+  }
+}
+[2026-01-22T07:18:28.348Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01ECDVH1q7tv2v8Ttaktp3Vd",
+        "type": "tool_result",
+        "content": [
+          {
+            "type": "image",
+            "source": {
+              "type": "base64",
+              "data": "iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAB2UlEQVR4nO3YoVLDQBQF0FuGmpqYmJiaaAwmugaDKYI/wNSg+Ixqamr4Amqqq2Oqa2JiYmJiYhBBwHbapU02ydukHe4xtMxseO8um90EICIiIiIiIiIiIiL6NwZ9FyDBD/zC9RwAQLja1urpYgLwA79Qn6MwMqpLjVHNK67rYL3cGF2j9wAOG9eVBXGuecU0hN4CKGtcpwdR1bxiEsKNaRFS/MAv6jSvxui/q2oeANI0w+PLpPRvdRZAk8b18Yc/pVhfApIFu56DNMmMZv9oXMlSuBWp7IRgel/a+Dj7AgDEztBWCUaMAqgzi3Vnp29/Anh/nRaLTQwAyEcZgOtrqo59AJ/z2X6WZxPgI44xgnzjefT7wdW+nzHyxUs4cnIJeGMPbp61unCathuv5JHdEPYBPL0tWu0IVTe9vlQdhjo/CElIE5n/LsDiNmjL/Pnh6Ptyt6scU3YaFAtAPYZKLoWqtZ/ESet7jbWToK2DkFrTUtt1Z0dhvbimARy+8NCvXefe4HoOwtV20NnjsF6sRAASOr8Jqlka5j8BpHl1AOohyPRNUR2dbYNRGA2aNiC57emu5hxgY/aBHpaAasS7G1/EyfFqX4pK6T0ApclrcSIiIiIiIiKiJr4BQBWswB3tRi8AAAAASUVORK5CYII=",
+              "media_type": "image/png"
+            }
+          }
+        ]
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "0bb156d4-8fad-4d0a-b53a-292218afa751",
+  "tool_use_result": {
+    "type": "image",
+    "file": {
+      "base64": "iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAB2UlEQVR4nO3YoVLDQBQF0FuGmpqYmJiaaAwmugaDKYI/wNSg+Ixqamr4Amqqq2Oqa2JiYmJiYhBBwHbapU02ydukHe4xtMxseO8um90EICIiIiIiIiIiIiL6NwZ9FyDBD/zC9RwAQLja1urpYgLwA79Qn6MwMqpLjVHNK67rYL3cGF2j9wAOG9eVBXGuecU0hN4CKGtcpwdR1bxiEsKNaRFS/MAv6jSvxui/q2oeANI0w+PLpPRvdRZAk8b18Yc/pVhfApIFu56DNMmMZv9oXMlSuBWp7IRgel/a+Dj7AgDEztBWCUaMAqgzi3Vnp29/Anh/nRaLTQwAyEcZgOtrqo59AJ/z2X6WZxPgI44xgnzjefT7wdW+nzHyxUs4cnIJeGMPbp61unCathuv5JHdEPYBPL0tWu0IVTe9vlQdhjo/CElIE5n/LsDiNmjL/Pnh6Ptyt6scU3YaFAtAPYZKLoWqtZ/ESet7jbWToK2DkFrTUtt1Z0dhvbimARy+8NCvXefe4HoOwtV20NnjsF6sRAASOr8Jqlka5j8BpHl1AOohyPRNUR2dbYNRGA2aNiC57emu5hxgY/aBHpaAasS7G1/EyfFqX4pK6T0ApclrcSIiIiIiIiKiJr4BQBWswB3tRi8AAAAASUVORK5CYII=",
+      "type": "image/png",
+      "originalSize": 530,
+      "dimensions": {
+        "originalWidth": 64,
+        "originalHeight": 64,
+        "displayWidth": 64,
+        "displayHeight": 64
+      }
+    }
+  }
+}
+[2026-01-22T07:18:32.450Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01KehakZzWt6fFMckybr8n2d",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Now let me check the Enemy.tscn file to see its current structure:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 1310,
+      "cache_creation_input_tokens": 226,
+      "cache_read_input_tokens": 29341,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 226,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 6,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "28a10571-7df0-4be8-914a-4fe75a7a14c3"
+}
+[2026-01-22T07:18:32.856Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01KehakZzWt6fFMckybr8n2d",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01CrDT6xJ6JStZ8ayiDBrNgC",
+        "name": "Read",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/scenes/objects/Enemy.tscn"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 1310,
+      "cache_creation_input_tokens": 226,
+      "cache_read_input_tokens": 29341,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 226,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 6,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "877f105d-70da-403f-bf33-9a047dc7e62c"
+}
+[2026-01-22T07:18:32.886Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01CrDT6xJ6JStZ8ayiDBrNgC",
+        "type": "tool_result",
+        "content": "     1→[gd_scene load_steps=6 format=3 uid=\"uid://cx5m8np6u3bwd\"]\n     2→\n     3→[ext_resource type=\"Script\" path=\"res://scripts/objects/enemy.gd\" id=\"1_enemy\"]\n     4→[ext_resource type=\"Script\" path=\"res://scripts/objects/hit_area.gd\" id=\"2_hit_area\"]\n     5→[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/weapons/m16_rifle_topdown.png\" id=\"3_rifle_sprite\"]\n     6→\n     7→[sub_resource type=\"PlaceholderTexture2D\" id=\"PlaceholderTexture2D_enemy\"]\n     8→size = Vector2(48, 48)\n     9→\n    10→[sub_resource type=\"CircleShape2D\" id=\"CircleShape2D_enemy\"]\n    11→radius = 24.0\n    12→\n    13→[node name=\"Enemy\" type=\"CharacterBody2D\" groups=[\"enemies\"]]\n    14→collision_layer = 2\n    15→collision_mask = 4\n    16→script = ExtResource(\"1_enemy\")\n    17→\n    18→[node name=\"Sprite2D\" type=\"Sprite2D\" parent=\".\"]\n    19→modulate = Color(0.9, 0.2, 0.2, 1)\n    20→texture = SubResource(\"PlaceholderTexture2D_enemy\")\n    21→\n    22→[node name=\"WeaponSprite\" type=\"Sprite2D\" parent=\".\"]\n    23→z_index = 1\n    24→texture = ExtResource(\"3_rifle_sprite\")\n    25→offset = Vector2(20, 0)\n    26→\n    27→[node name=\"CollisionShape2D\" type=\"CollisionShape2D\" parent=\".\"]\n    28→shape = SubResource(\"CircleShape2D_enemy\")\n    29→\n    30→[node name=\"RayCast2D\" type=\"RayCast2D\" parent=\".\"]\n    31→target_position = Vector2(400, 0)\n    32→collision_mask = 5\n    33→\n    34→[node name=\"HitArea\" type=\"Area2D\" parent=\".\"]\n    35→collision_layer = 2\n    36→collision_mask = 16\n    37→script = ExtResource(\"2_hit_area\")\n    38→\n    39→[node name=\"HitCollisionShape\" type=\"CollisionShape2D\" parent=\"HitArea\"]\n    40→shape = SubResource(\"CircleShape2D_enemy\")\n    41→\n    42→[node name=\"NavigationAgent2D\" type=\"NavigationAgent2D\" parent=\".\"]\n    43→path_desired_distance = 4.0\n    44→target_desired_distance = 10.0\n    45→avoidance_enabled = true\n    46→radius = 24.0\n    47→neighbor_distance = 100.0\n    48→max_neighbors = 5\n    49→time_horizon_agents = 1.0\n    50→time_horizon_obstacles = 1.0\n    51→max_speed = 320.0\n    52→debug_enabled = false\n    53→\n    54→[node name=\"DebugLabel\" type=\"Label\" parent=\".\"]\n    55→visible = false\n    56→offset_left = -50.0\n    57→offset_top = -50.0\n    58→offset_right = 50.0\n    59→offset_bottom = -30.0\n    60→horizontal_alignment = 1\n    61→vertical_alignment = 1\n    62→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "12aaca61-52f8-4f2f-b485-0241dc1c4a7d",
+  "tool_use_result": {
+    "type": "text",
+    "file": {
+      "filePath": "/tmp/gh-issue-solver-1769066205054/scenes/objects/Enemy.tscn",
+      "content": "[gd_scene load_steps=6 format=3 uid=\"uid://cx5m8np6u3bwd\"]\n\n[ext_resource type=\"Script\" path=\"res://scripts/objects/enemy.gd\" id=\"1_enemy\"]\n[ext_resource type=\"Script\" path=\"res://scripts/objects/hit_area.gd\" id=\"2_hit_area\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/weapons/m16_rifle_topdown.png\" id=\"3_rifle_sprite\"]\n\n[sub_resource type=\"PlaceholderTexture2D\" id=\"PlaceholderTexture2D_enemy\"]\nsize = Vector2(48, 48)\n\n[sub_resource type=\"CircleShape2D\" id=\"CircleShape2D_enemy\"]\nradius = 24.0\n\n[node name=\"Enemy\" type=\"CharacterBody2D\" groups=[\"enemies\"]]\ncollision_layer = 2\ncollision_mask = 4\nscript = ExtResource(\"1_enemy\")\n\n[node name=\"Sprite2D\" type=\"Sprite2D\" parent=\".\"]\nmodulate = Color(0.9, 0.2, 0.2, 1)\ntexture = SubResource(\"PlaceholderTexture2D_enemy\")\n\n[node name=\"WeaponSprite\" type=\"Sprite2D\" parent=\".\"]\nz_index = 1\ntexture = ExtResource(\"3_rifle_sprite\")\noffset = Vector2(20, 0)\n\n[node name=\"CollisionShape2D\" type=\"CollisionShape2D\" parent=\".\"]\nshape = SubResource(\"CircleShape2D_enemy\")\n\n[node name=\"RayCast2D\" type=\"RayCast2D\" parent=\".\"]\ntarget_position = Vector2(400, 0)\ncollision_mask = 5\n\n[node name=\"HitArea\" type=\"Area2D\" parent=\".\"]\ncollision_layer = 2\ncollision_mask = 16\nscript = ExtResource(\"2_hit_area\")\n\n[node name=\"HitCollisionShape\" type=\"CollisionShape2D\" parent=\"HitArea\"]\nshape = SubResource(\"CircleShape2D_enemy\")\n\n[node name=\"NavigationAgent2D\" type=\"NavigationAgent2D\" parent=\".\"]\npath_desired_distance = 4.0\ntarget_desired_distance = 10.0\navoidance_enabled = true\nradius = 24.0\nneighbor_distance = 100.0\nmax_neighbors = 5\ntime_horizon_agents = 1.0\ntime_horizon_obstacles = 1.0\nmax_speed = 320.0\ndebug_enabled = false\n\n[node name=\"DebugLabel\" type=\"Label\" parent=\".\"]\nvisible = false\noffset_left = -50.0\noffset_top = -50.0\noffset_right = 50.0\noffset_bottom = -30.0\nhorizontal_alignment = 1\nvertical_alignment = 1\n",
+      "numLines": 62,
+      "startLine": 1,
+      "totalLines": 62
+    }
+  }
+}
+[2026-01-22T07:18:38.423Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01SRtV2Rm7L8kMXpWg4fLUPa",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01BkQLoc3EgntFB5kZMKBtss",
+        "name": "TodoWrite",
+        "input": {
+          "todos": [
+            {
+              "content": "Read and analyze player sprite files structure",
+              "status": "completed",
+              "activeForm": "Analyzing player sprite files"
+            },
+            {
+              "content": "Create enemy body sprite (black version of player body)",
+              "status": "in_progress",
+              "activeForm": "Creating enemy body sprite"
+            },
+            {
+              "content": "Create enemy head sprite (black with white skull)",
+              "status": "pending",
+              "activeForm": "Creating enemy head sprite"
+            },
+            {
+              "content": "Create enemy arm sprites (black with white skull on forearm)",
+              "status": "pending",
+              "activeForm": "Creating enemy arm sprites"
+            },
+            {
+              "content": "Create combined preview image for enemy",
+              "status": "pending",
+              "activeForm": "Creating combined preview image"
+            },
+            {
+              "content": "Update Enemy.tscn to use new modular enemy sprites",
+              "status": "pending",
+              "activeForm": "Updating Enemy scene"
+            },
+            {
+              "content": "Test the enemy model in the game",
+              "status": "pending",
+              "activeForm": "Testing enemy model"
+            },
+            {
+              "content": "Commit and update PR",
+              "status": "pending",
+              "activeForm": "Committing and updating PR"
+            }
+          ]
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 2404,
+      "cache_read_input_tokens": 29567,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 2404,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 25,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "78a08d99-7b82-49a9-b49d-fde20357aaba"
+}
+[2026-01-22T07:18:38.447Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01BkQLoc3EgntFB5kZMKBtss",
+        "type": "tool_result",
+        "content": "Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "a1ee068b-b941-4a60-a725-eeaacee346d5",
+  "tool_use_result": {
+    "oldTodos": [
+      {
+        "content": "Read and analyze player sprite files structure",
+        "status": "in_progress",
+        "activeForm": "Analyzing player sprite files"
+      },
+      {
+        "content": "Create enemy body sprite (black version of player body)",
+        "status": "pending",
+        "activeForm": "Creating enemy body sprite"
+      },
+      {
+        "content": "Create enemy head sprite (black with white skull)",
+        "status": "pending",
+        "activeForm": "Creating enemy head sprite"
+      },
+      {
+        "content": "Create enemy arm sprites (black with white skull on forearm)",
+        "status": "pending",
+        "activeForm": "Creating enemy arm sprites"
+      },
+      {
+        "content": "Create combined preview image for enemy",
+        "status": "pending",
+        "activeForm": "Creating combined preview image"
+      },
+      {
+        "content": "Update Enemy.tscn to use new modular enemy sprites",
+        "status": "pending",
+        "activeForm": "Updating Enemy scene"
+      },
+      {
+        "content": "Test the enemy model in the game",
+        "status": "pending",
+        "activeForm": "Testing enemy model"
+      },
+      {
+        "content": "Commit and update PR",
+        "status": "pending",
+        "activeForm": "Committing and updating PR"
+      }
+    ],
+    "newTodos": [
+      {
+        "content": "Read and analyze player sprite files structure",
+        "status": "completed",
+        "activeForm": "Analyzing player sprite files"
+      },
+      {
+        "content": "Create enemy body sprite (black version of player body)",
+        "status": "in_progress",
+        "activeForm": "Creating enemy body sprite"
+      },
+      {
+        "content": "Create enemy head sprite (black with white skull)",
+        "status": "pending",
+        "activeForm": "Creating enemy head sprite"
+      },
+      {
+        "content": "Create enemy arm sprites (black with white skull on forearm)",
+        "status": "pending",
+        "activeForm": "Creating enemy arm sprites"
+      },
+      {
+        "content": "Create combined preview image for enemy",
+        "status": "pending",
+        "activeForm": "Creating combined preview image"
+      },
+      {
+        "content": "Update Enemy.tscn to use new modular enemy sprites",
+        "status": "pending",
+        "activeForm": "Updating Enemy scene"
+      },
+      {
+        "content": "Test the enemy model in the game",
+        "status": "pending",
+        "activeForm": "Testing enemy model"
+      },
+      {
+        "content": "Commit and update PR",
+        "status": "pending",
+        "activeForm": "Committing and updating PR"
+      }
+    ]
+  }
+}
+[2026-01-22T07:18:42.311Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01SpFsQEqML1eXsJZBPbPiiZ",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Now I need to check what tools are available to create/manipulate images. Let me see if ImageMagick or similar tools are available:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 343,
+      "cache_read_input_tokens": 31971,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 343,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 2,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "1b7b12c5-02f8-4e5a-97e4-d95381a0c00c"
+}
+[2026-01-22T07:18:43.912Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01SpFsQEqML1eXsJZBPbPiiZ",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_012Sf6ukvqj1LFdbHytfT2hf",
+        "name": "Bash",
+        "input": {
+          "command": "which convert magick python3 pip3 2>/dev/null; convert --version 2>/dev/null | head -3; python3 --version 2>/dev/null",
+          "description": "Check for image manipulation tools"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 343,
+      "cache_read_input_tokens": 31971,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 343,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 2,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "36b96dbf-9312-4305-959c-dcd7fe28a358"
+}
+[2026-01-22T07:18:45.519Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_012Sf6ukvqj1LFdbHytfT2hf",
+        "type": "tool_result",
+        "content": "/home/hive/.pyenv/shims/python3\n/home/hive/.pyenv/shims/pip3\nPython 3.14.2",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "b9fa4c7e-55d1-441c-835c-3fbbcedad8d6",
+  "tool_use_result": {
+    "stdout": "/home/hive/.pyenv/shims/python3\n/home/hive/.pyenv/shims/pip3\nPython 3.14.2",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:18:48.519Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01EvmhA2ns69UCzcg2aWU47X",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Let me check if PIL/Pillow is available:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 192,
+      "cache_read_input_tokens": 32314,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 192,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 5,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "f980d09f-1865-493e-9457-b2f78ed4c762"
+}
+[2026-01-22T07:18:49.180Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01EvmhA2ns69UCzcg2aWU47X",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01J6qqvimRArCGVfFyekedo8",
+        "name": "Bash",
+        "input": {
+          "command": "python3 -c \"from PIL import Image; print('PIL available')\" 2>&1",
+          "description": "Check if PIL is installed"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 192,
+      "cache_read_input_tokens": 32314,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 192,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 5,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "98103c6b-3944-43c7-b114-2e529c1a16f9"
+}
+[2026-01-22T07:18:50.519Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01J6qqvimRArCGVfFyekedo8",
+        "type": "tool_result",
+        "content": "PIL available",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "2cfc7c34-c309-4773-9f73-08e8717c4382",
+  "tool_use_result": {
+    "stdout": "PIL available",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:18:53.736Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01TtsqGo5TuJJxgjgxLW619T",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Let me first get the exact dimensions and details of the player sprites to create matching enemy sprites:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 120,
+      "cache_read_input_tokens": 32506,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 120,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 3,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "79c8fdd8-01f5-4516-8c32-c37ff835ea84"
+}
+[2026-01-22T07:18:55.668Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01TtsqGo5TuJJxgjgxLW619T",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_018Rko2dpVUAhUsynTCakvg4",
+        "name": "Bash",
+        "input": {
+          "command": "python3 << 'EOF'\nfrom PIL import Image\nimport os\n\nsprites_dir = '/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player/'\nsprites = ['player_body.png', 'player_head.png', 'player_left_arm.png', 'player_right_arm.png']\n\nfor sprite in sprites:\n    path = os.path.join(sprites_dir, sprite)\n    img = Image.open(path)\n    print(f\"{sprite}: size={img.size}, mode={img.mode}\")\nEOF",
+          "description": "Get sprite dimensions"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 120,
+      "cache_read_input_tokens": 32506,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 120,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 3,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "bff2f1ce-90a0-4d97-96fb-36bf9914bc1a"
+}
+[2026-01-22T07:18:56.046Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_018Rko2dpVUAhUsynTCakvg4",
+        "type": "tool_result",
+        "content": "player_body.png: size=(28, 24), mode=RGBA\nplayer_head.png: size=(14, 18), mode=RGBA\nplayer_left_arm.png: size=(20, 8), mode=RGBA\nplayer_right_arm.png: size=(20, 8), mode=RGBA",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "bf9bd562-b040-41c6-862e-ba85b27f4402",
+  "tool_use_result": {
+    "stdout": "player_body.png: size=(28, 24), mode=RGBA\nplayer_head.png: size=(14, 18), mode=RGBA\nplayer_left_arm.png: size=(20, 8), mode=RGBA\nplayer_right_arm.png: size=(20, 8), mode=RGBA",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:18:59.107Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_015KdQdvXsfpZBfUrVdUQCtj",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Now I'll create a script to generate the enemy sprites with black coloring and white skulls. Let me create the directory for enemy sprites first:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 313,
+      "cache_read_input_tokens": 32626,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 313,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 2,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "8e441fb1-e59c-4bfc-b726-6b5b507bb7cb"
+}
+[2026-01-22T07:18:59.692Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_015KdQdvXsfpZBfUrVdUQCtj",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01UUGZcgCTLQWwCt5UGvBmkR",
+        "name": "Bash",
+        "input": {
+          "command": "mkdir -p /tmp/gh-issue-solver-1769066205054/assets/sprites/characters/enemy",
+          "description": "Create enemy sprites directory"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 313,
+      "cache_read_input_tokens": 32626,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 313,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 2,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "5ea53623-b5d1-45b0-b2b4-4492ffaade89"
+}
+[2026-01-22T07:18:59.794Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01UUGZcgCTLQWwCt5UGvBmkR",
+        "type": "tool_result",
+        "content": "",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "3cf54297-76a3-4f7b-9d3a-542cdbc15186",
+  "tool_use_result": {
+    "stdout": "",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:19:02.255Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01FSajqv7jub4oUTrdadnt8a",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Now let me create a script to generate the enemy sprites. I'll create black versions of the player sprites with white skulls:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 153,
+      "cache_read_input_tokens": 32939,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 153,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "2e58fa4b-377b-4e12-bd95-c480df932f05"
+}
+[2026-01-22T07:19:26.068Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01FSajqv7jub4oUTrdadnt8a",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01C4h7ZfNK2i4pEyX13ZHd25",
+        "name": "Write",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/experiments/create_enemy_sprites.py",
+          "content": "#!/usr/bin/env python3\n\"\"\"\nScript to create enemy sprites based on player sprites.\nCreates black versions with white skull decorations.\n\"\"\"\n\nfrom PIL import Image, ImageDraw\nimport os\n\n# Paths\nBASE_DIR = '/tmp/gh-issue-solver-1769066205054'\nPLAYER_DIR = os.path.join(BASE_DIR, 'assets/sprites/characters/player')\nENEMY_DIR = os.path.join(BASE_DIR, 'assets/sprites/characters/enemy')\n\n# Ensure enemy directory exists\nos.makedirs(ENEMY_DIR, exist_ok=True)\n\n\ndef convert_to_dark(image):\n    \"\"\"Convert green/military colors to dark/black colors, preserving transparency.\"\"\"\n    img = image.convert('RGBA')\n    pixels = img.load()\n\n    for y in range(img.height):\n        for x in range(img.width):\n            r, g, b, a = pixels[x, y]\n            if a > 0:  # Only modify non-transparent pixels\n                # Convert to grayscale, then darken significantly\n                gray = int(0.299 * r + 0.587 * g + 0.114 * b)\n                # Make it dark - reduce to 20-40% of grayscale value\n                dark = int(gray * 0.25)\n                pixels[x, y] = (dark, dark, dark, a)\n\n    return img\n\n\ndef draw_simple_skull_on_head(image):\n    \"\"\"Draw a simple white skull symbol on the head (helmet area).\"\"\"\n    img = image.copy()\n    draw = ImageDraw.Draw(img)\n\n    # Head size is 14x18 - skull should be small and centered\n    # Simple skull: circle for head, two dots for eyes\n    cx, cy = 7, 8  # Center point for skull\n\n    # Skull outline (small white oval)\n    draw.ellipse([cx-3, cy-3, cx+3, cy+2], fill=(255, 255, 255, 255))\n\n    # Eyes (two black dots)\n    draw.point((cx-1, cy-1), fill=(0, 0, 0, 255))\n    draw.point((cx+1, cy-1), fill=(0, 0, 0, 255))\n\n    # Nose (small vertical line)\n    draw.point((cx, cy), fill=(0, 0, 0, 255))\n\n    # Teeth area (white rectangle at bottom)\n    draw.rectangle([cx-2, cy+1, cx+2, cy+2], fill=(255, 255, 255, 255))\n\n    # Tooth lines (black)\n    draw.point((cx, cy+1), fill=(0, 0, 0, 255))\n\n    return img\n\n\ndef draw_simple_skull_on_arm(image, is_left=True):\n    \"\"\"Draw a small white skull on the forearm.\"\"\"\n    img = image.copy()\n    draw = ImageDraw.Draw(img)\n\n    # Arm size is 20x8 - skull should be tiny\n    # Position depends on left or right arm\n    if is_left:\n        cx, cy = 10, 4  # Center-right for left arm (forearm area)\n    else:\n        cx, cy = 10, 4  # Center-right for right arm (forearm area)\n\n    # Very simple skull - just a few pixels\n    # Small white circle/oval for skull\n    draw.ellipse([cx-2, cy-2, cx+2, cy+1], fill=(255, 255, 255, 255))\n\n    # Eyes (two black dots)\n    draw.point((cx-1, cy-1), fill=(0, 0, 0, 255))\n    draw.point((cx+1, cy-1), fill=(0, 0, 0, 255))\n\n    return img\n\n\ndef create_enemy_body():\n    \"\"\"Create enemy body sprite (black version of player body).\"\"\"\n    player_body = Image.open(os.path.join(PLAYER_DIR, 'player_body.png'))\n    enemy_body = convert_to_dark(player_body)\n    enemy_body.save(os.path.join(ENEMY_DIR, 'enemy_body.png'))\n    print(f\"Created enemy_body.png ({enemy_body.size})\")\n    return enemy_body\n\n\ndef create_enemy_head():\n    \"\"\"Create enemy head sprite (black with white skull).\"\"\"\n    player_head = Image.open(os.path.join(PLAYER_DIR, 'player_head.png'))\n    enemy_head = convert_to_dark(player_head)\n    enemy_head = draw_simple_skull_on_head(enemy_head)\n    enemy_head.save(os.path.join(ENEMY_DIR, 'enemy_head.png'))\n    print(f\"Created enemy_head.png ({enemy_head.size})\")\n    return enemy_head\n\n\ndef create_enemy_arms():\n    \"\"\"Create enemy arm sprites (black with skull on forearm).\"\"\"\n    # Left arm\n    player_left_arm = Image.open(os.path.join(PLAYER_DIR, 'player_left_arm.png'))\n    enemy_left_arm = convert_to_dark(player_left_arm)\n    enemy_left_arm = draw_simple_skull_on_arm(enemy_left_arm, is_left=True)\n    enemy_left_arm.save(os.path.join(ENEMY_DIR, 'enemy_left_arm.png'))\n    print(f\"Created enemy_left_arm.png ({enemy_left_arm.size})\")\n\n    # Right arm\n    player_right_arm = Image.open(os.path.join(PLAYER_DIR, 'player_right_arm.png'))\n    enemy_right_arm = convert_to_dark(player_right_arm)\n    enemy_right_arm = draw_simple_skull_on_arm(enemy_right_arm, is_left=False)\n    enemy_right_arm.save(os.path.join(ENEMY_DIR, 'enemy_right_arm.png'))\n    print(f\"Created enemy_right_arm.png ({enemy_right_arm.size})\")\n\n    return enemy_left_arm, enemy_right_arm\n\n\ndef create_combined_preview(body, head, left_arm, right_arm):\n    \"\"\"Create a combined preview image showing all enemy parts assembled.\"\"\"\n    # Use same dimensions as player combined preview\n    preview_width = 64\n    preview_height = 64\n\n    preview = Image.new('RGBA', (preview_width, preview_height), (0, 0, 0, 0))\n\n    # Center point for assembly\n    cx, cy = 32, 32\n\n    # Paste body (positioned at center) - offset similar to Player.tscn (-4, 0)\n    body_x = cx - body.width // 2 - 4\n    body_y = cy - body.height // 2\n    preview.paste(body, (body_x, body_y), body)\n\n    # Paste head (above body) - offset similar to Player.tscn (-6, -2)\n    head_x = cx - head.width // 2 - 6\n    head_y = cy - body.height // 2 - head.height // 2 - 2\n    preview.paste(head, (head_x, head_y), head)\n\n    # Paste left arm - offset similar to Player.tscn (24, 6)\n    left_arm_x = cx + 24 - left_arm.width // 2\n    left_arm_y = cy + 6 - left_arm.height // 2\n    preview.paste(left_arm, (left_arm_x, left_arm_y), left_arm)\n\n    # Paste right arm - offset similar to Player.tscn (-2, 6)\n    right_arm_x = cx - 2 - right_arm.width // 2\n    right_arm_y = cy + 6 - right_arm.height // 2\n    preview.paste(right_arm, (right_arm_x, right_arm_y), right_arm)\n\n    preview.save(os.path.join(ENEMY_DIR, 'enemy_combined_preview.png'))\n    print(f\"Created enemy_combined_preview.png ({preview.size})\")\n    return preview\n\n\ndef main():\n    print(\"Creating enemy sprites based on player sprites...\")\n    print(f\"Player sprites from: {PLAYER_DIR}\")\n    print(f\"Enemy sprites to: {ENEMY_DIR}\")\n    print()\n\n    body = create_enemy_body()\n    head = create_enemy_head()\n    left_arm, right_arm = create_enemy_arms()\n    create_combined_preview(body, head, left_arm, right_arm)\n\n    print(\"\\nAll enemy sprites created successfully!\")\n\n\nif __name__ == '__main__':\n    main()\n"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 153,
+      "cache_read_input_tokens": 32939,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 153,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "650bfe98-f420-40e2-9d84-16e3fda1b5b7"
+}
+[2026-01-22T07:19:26.129Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01C4h7ZfNK2i4pEyX13ZHd25",
+        "type": "tool_result",
+        "content": "File created successfully at: /tmp/gh-issue-solver-1769066205054/experiments/create_enemy_sprites.py"
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "cce6664b-42d8-42a6-acde-c395e0c7bc1a",
+  "tool_use_result": {
+    "type": "create",
+    "filePath": "/tmp/gh-issue-solver-1769066205054/experiments/create_enemy_sprites.py",
+    "content": "#!/usr/bin/env python3\n\"\"\"\nScript to create enemy sprites based on player sprites.\nCreates black versions with white skull decorations.\n\"\"\"\n\nfrom PIL import Image, ImageDraw\nimport os\n\n# Paths\nBASE_DIR = '/tmp/gh-issue-solver-1769066205054'\nPLAYER_DIR = os.path.join(BASE_DIR, 'assets/sprites/characters/player')\nENEMY_DIR = os.path.join(BASE_DIR, 'assets/sprites/characters/enemy')\n\n# Ensure enemy directory exists\nos.makedirs(ENEMY_DIR, exist_ok=True)\n\n\ndef convert_to_dark(image):\n    \"\"\"Convert green/military colors to dark/black colors, preserving transparency.\"\"\"\n    img = image.convert('RGBA')\n    pixels = img.load()\n\n    for y in range(img.height):\n        for x in range(img.width):\n            r, g, b, a = pixels[x, y]\n            if a > 0:  # Only modify non-transparent pixels\n                # Convert to grayscale, then darken significantly\n                gray = int(0.299 * r + 0.587 * g + 0.114 * b)\n                # Make it dark - reduce to 20-40% of grayscale value\n                dark = int(gray * 0.25)\n                pixels[x, y] = (dark, dark, dark, a)\n\n    return img\n\n\ndef draw_simple_skull_on_head(image):\n    \"\"\"Draw a simple white skull symbol on the head (helmet area).\"\"\"\n    img = image.copy()\n    draw = ImageDraw.Draw(img)\n\n    # Head size is 14x18 - skull should be small and centered\n    # Simple skull: circle for head, two dots for eyes\n    cx, cy = 7, 8  # Center point for skull\n\n    # Skull outline (small white oval)\n    draw.ellipse([cx-3, cy-3, cx+3, cy+2], fill=(255, 255, 255, 255))\n\n    # Eyes (two black dots)\n    draw.point((cx-1, cy-1), fill=(0, 0, 0, 255))\n    draw.point((cx+1, cy-1), fill=(0, 0, 0, 255))\n\n    # Nose (small vertical line)\n    draw.point((cx, cy), fill=(0, 0, 0, 255))\n\n    # Teeth area (white rectangle at bottom)\n    draw.rectangle([cx-2, cy+1, cx+2, cy+2], fill=(255, 255, 255, 255))\n\n    # Tooth lines (black)\n    draw.point((cx, cy+1), fill=(0, 0, 0, 255))\n\n    return img\n\n\ndef draw_simple_skull_on_arm(image, is_left=True):\n    \"\"\"Draw a small white skull on the forearm.\"\"\"\n    img = image.copy()\n    draw = ImageDraw.Draw(img)\n\n    # Arm size is 20x8 - skull should be tiny\n    # Position depends on left or right arm\n    if is_left:\n        cx, cy = 10, 4  # Center-right for left arm (forearm area)\n    else:\n        cx, cy = 10, 4  # Center-right for right arm (forearm area)\n\n    # Very simple skull - just a few pixels\n    # Small white circle/oval for skull\n    draw.ellipse([cx-2, cy-2, cx+2, cy+1], fill=(255, 255, 255, 255))\n\n    # Eyes (two black dots)\n    draw.point((cx-1, cy-1), fill=(0, 0, 0, 255))\n    draw.point((cx+1, cy-1), fill=(0, 0, 0, 255))\n\n    return img\n\n\ndef create_enemy_body():\n    \"\"\"Create enemy body sprite (black version of player body).\"\"\"\n    player_body = Image.open(os.path.join(PLAYER_DIR, 'player_body.png'))\n    enemy_body = convert_to_dark(player_body)\n    enemy_body.save(os.path.join(ENEMY_DIR, 'enemy_body.png'))\n    print(f\"Created enemy_body.png ({enemy_body.size})\")\n    return enemy_body\n\n\ndef create_enemy_head():\n    \"\"\"Create enemy head sprite (black with white skull).\"\"\"\n    player_head = Image.open(os.path.join(PLAYER_DIR, 'player_head.png'))\n    enemy_head = convert_to_dark(player_head)\n    enemy_head = draw_simple_skull_on_head(enemy_head)\n    enemy_head.save(os.path.join(ENEMY_DIR, 'enemy_head.png'))\n    print(f\"Created enemy_head.png ({enemy_head.size})\")\n    return enemy_head\n\n\ndef create_enemy_arms():\n    \"\"\"Create enemy arm sprites (black with skull on forearm).\"\"\"\n    # Left arm\n    player_left_arm = Image.open(os.path.join(PLAYER_DIR, 'player_left_arm.png'))\n    enemy_left_arm = convert_to_dark(player_left_arm)\n    enemy_left_arm = draw_simple_skull_on_arm(enemy_left_arm, is_left=True)\n    enemy_left_arm.save(os.path.join(ENEMY_DIR, 'enemy_left_arm.png'))\n    print(f\"Created enemy_left_arm.png ({enemy_left_arm.size})\")\n\n    # Right arm\n    player_right_arm = Image.open(os.path.join(PLAYER_DIR, 'player_right_arm.png'))\n    enemy_right_arm = convert_to_dark(player_right_arm)\n    enemy_right_arm = draw_simple_skull_on_arm(enemy_right_arm, is_left=False)\n    enemy_right_arm.save(os.path.join(ENEMY_DIR, 'enemy_right_arm.png'))\n    print(f\"Created enemy_right_arm.png ({enemy_right_arm.size})\")\n\n    return enemy_left_arm, enemy_right_arm\n\n\ndef create_combined_preview(body, head, left_arm, right_arm):\n    \"\"\"Create a combined preview image showing all enemy parts assembled.\"\"\"\n    # Use same dimensions as player combined preview\n    preview_width = 64\n    preview_height = 64\n\n    preview = Image.new('RGBA', (preview_width, preview_height), (0, 0, 0, 0))\n\n    # Center point for assembly\n    cx, cy = 32, 32\n\n    # Paste body (positioned at center) - offset similar to Player.tscn (-4, 0)\n    body_x = cx - body.width // 2 - 4\n    body_y = cy - body.height // 2\n    preview.paste(body, (body_x, body_y), body)\n\n    # Paste head (above body) - offset similar to Player.tscn (-6, -2)\n    head_x = cx - head.width // 2 - 6\n    head_y = cy - body.height // 2 - head.height // 2 - 2\n    preview.paste(head, (head_x, head_y), head)\n\n    # Paste left arm - offset similar to Player.tscn (24, 6)\n    left_arm_x = cx + 24 - left_arm.width // 2\n    left_arm_y = cy + 6 - left_arm.height // 2\n    preview.paste(left_arm, (left_arm_x, left_arm_y), left_arm)\n\n    # Paste right arm - offset similar to Player.tscn (-2, 6)\n    right_arm_x = cx - 2 - right_arm.width // 2\n    right_arm_y = cy + 6 - right_arm.height // 2\n    preview.paste(right_arm, (right_arm_x, right_arm_y), right_arm)\n\n    preview.save(os.path.join(ENEMY_DIR, 'enemy_combined_preview.png'))\n    print(f\"Created enemy_combined_preview.png ({preview.size})\")\n    return preview\n\n\ndef main():\n    print(\"Creating enemy sprites based on player sprites...\")\n    print(f\"Player sprites from: {PLAYER_DIR}\")\n    print(f\"Enemy sprites to: {ENEMY_DIR}\")\n    print()\n\n    body = create_enemy_body()\n    head = create_enemy_head()\n    left_arm, right_arm = create_enemy_arms()\n    create_combined_preview(body, head, left_arm, right_arm)\n\n    print(\"\\nAll enemy sprites created successfully!\")\n\n\nif __name__ == '__main__':\n    main()\n",
+    "structuredPatch": [],
+    "originalFile": null
+  }
+}
+[2026-01-22T07:19:28.987Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01GQjHEYRvbG12q7ZtvAALBD",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01WzKBGanJs7w9K8S7HwZAqf",
+        "name": "Bash",
+        "input": {
+          "command": "python3 experiments/create_enemy_sprites.py",
+          "description": "Run script to create enemy sprites"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 2562,
+      "cache_read_input_tokens": 33092,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 2562,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 25,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "920e5e6c-d396-4b8f-a798-5f4a7154b746"
+}
+[2026-01-22T07:19:30.171Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01WzKBGanJs7w9K8S7HwZAqf",
+        "type": "tool_result",
+        "content": "Creating enemy sprites based on player sprites...\nPlayer sprites from: /tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player\nEnemy sprites to: /tmp/gh-issue-solver-1769066205054/assets/sprites/characters/enemy\n\nCreated enemy_body.png ((28, 24))\nCreated enemy_head.png ((14, 18))\nCreated enemy_left_arm.png ((20, 8))\nCreated enemy_right_arm.png ((20, 8))\nCreated enemy_combined_preview.png ((64, 64))\n\nAll enemy sprites created successfully!",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "668ce701-2f89-4ec0-b2c1-7275fd61b454",
+  "tool_use_result": {
+    "stdout": "Creating enemy sprites based on player sprites...\nPlayer sprites from: /tmp/gh-issue-solver-1769066205054/assets/sprites/characters/player\nEnemy sprites to: /tmp/gh-issue-solver-1769066205054/assets/sprites/characters/enemy\n\nCreated enemy_body.png ((28, 24))\nCreated enemy_head.png ((14, 18))\nCreated enemy_left_arm.png ((20, 8))\nCreated enemy_right_arm.png ((20, 8))\nCreated enemy_combined_preview.png ((64, 64))\n\nAll enemy sprites created successfully!",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:19:32.535Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01FFj6bNEek5PtShxMBpfaoW",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Let me verify the created sprites look correct:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 236,
+      "cache_read_input_tokens": 35654,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 236,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "f0baa232-95af-4285-8fdd-7e904a21a35f"
+}
+[2026-01-22T07:19:33.133Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01FFj6bNEek5PtShxMBpfaoW",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_018M5UiyjSQGkXcBTm64zx2V",
+        "name": "Read",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/enemy/enemy_combined_preview.png"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 236,
+      "cache_read_input_tokens": 35654,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 236,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "df9b86de-8099-465d-87d7-2acc0ad0b715"
+}
+[2026-01-22T07:19:33.581Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01FFj6bNEek5PtShxMBpfaoW",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_0167y72Qqx9z9zzohxA91yRj",
+        "name": "Read",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/enemy/enemy_head.png"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 236,
+      "cache_read_input_tokens": 35654,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 236,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "6e8dcb3b-9be7-43cb-879a-06278ea4c60b"
+}
+[2026-01-22T07:19:33.967Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01FFj6bNEek5PtShxMBpfaoW",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01C37yJp4TWsfgzKhhyMbhR2",
+        "name": "Read",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/enemy/enemy_body.png"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 236,
+      "cache_read_input_tokens": 35654,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 236,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "d9c77571-9be2-4498-85ca-c05e29c055d2"
+}
+[2026-01-22T07:19:34.487Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01FFj6bNEek5PtShxMBpfaoW",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01YEurHfZR8Rbg1T2A9MoQNe",
+        "name": "Read",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/assets/sprites/characters/enemy/enemy_left_arm.png"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 236,
+      "cache_read_input_tokens": 35654,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 236,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "343e47fd-533d-451a-a10b-e3be5ee83848"
+}
+[2026-01-22T07:19:34.544Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_0167y72Qqx9z9zzohxA91yRj",
+        "type": "tool_result",
+        "content": [
+          {
+            "type": "image",
+            "source": {
+              "type": "base64",
+              "data": "iVBORw0KGgoAAAANSUhEUgAAAA4AAAASCAYAAABrXO8xAAAAq0lEQVR4nJWTsRKEIAxEXxhjY2fh/3+fhVY2WsQqnkJAbxsYyGMTJhECDcNgfd8DsK6rRDGSAwAOuVSVeZ4fsekNAjiOg2marABbUA2+HFtQBHfulmtZlms/jmNxL/cfjKAIVtVfqjkkIo81f6wAXWaGiGAWVlKCUT3RedXRXWvqvrweqekYydsvAez7/i9P2rYt7P6WG9xSfXPNJyQBuGsNVtXi7NM8RsN8AgWsScuKOucBAAAAAElFTkSuQmCC",
+              "media_type": "image/png"
+            }
+          }
+        ]
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "75fc0afc-8457-4ee9-a028-219caf9d85cf",
+  "tool_use_result": {
+    "type": "image",
+    "file": {
+      "base64": "iVBORw0KGgoAAAANSUhEUgAAAA4AAAASCAYAAABrXO8xAAAAq0lEQVR4nJWTsRKEIAxEXxhjY2fh/3+fhVY2WsQqnkJAbxsYyGMTJhECDcNgfd8DsK6rRDGSAwAOuVSVeZ4fsekNAjiOg2marABbUA2+HFtQBHfulmtZlms/jmNxL/cfjKAIVtVfqjkkIo81f6wAXWaGiGAWVlKCUT3RedXRXWvqvrweqekYydsvAez7/i9P2rYt7P6WG9xSfXPNJyQBuGsNVtXi7NM8RsN8AgWsScuKOucBAAAAAElFTkSuQmCC",
+      "type": "image/png",
+      "originalSize": 228,
+      "dimensions": {
+        "originalWidth": 14,
+        "originalHeight": 18,
+        "displayWidth": 14,
+        "displayHeight": 18
+      }
+    }
+  }
+}
+[2026-01-22T07:19:34.563Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_018M5UiyjSQGkXcBTm64zx2V",
+        "type": "tool_result",
+        "content": [
+          {
+            "type": "image",
+            "source": {
+              "type": "base64",
+              "data": "iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACAklEQVR4nO2ava6DMAyFT65u6JCpDK06dOv7v1c7UKkqA2XInVxBGn4CcUh1/S0UVWB84sTBBhAEQRAEQfinKG4DxhhbFAUA4H6/s9sLhe2BjDEWAMh5QmuN2+2WjRA/HDcdch4A2rbF4XCwHHaXEF2AMeeJnERgiYAx54lcRPiNeTMafZeqqt6/y7KMaXI10SPAHf2u8+55DlHAMgUIclYp1Tu6omwJqwCEtRZKKVi7+ZT/gFWAofme0zqQJAIAZDn6QOQs4COn0faRLAJ8aK1R1zWMMXYohXITXYDX67X42i2EiCpAXdezX3Jo9H2kFIFlCkxFwZjzRCoR2NaAIRG01rPvsd/v2UWI9l7uPiwJMOfFaAzu+sHqNDg0SmsdT8ViZVOEJ8EZBewbIXcqTC2QqSNn042QD59Abduy2ctOgNR8hQAhqTOUrxCAk8WLIDU5YmYD3wLIvQ9g2wjFYokAIdvo6MrO6QuEVImn2mnn89m6NUayPcdO9H3A6XTqnT8ej9759Xp91wfpeDweg+1cLpf3KJdliefz2fu/qqoPOz4RWDdCTdN4cziVx+i4Ns/vdjs0TTNpx5dN2BaXtaFJrOko204hUlFN3iFJe3zJdUVRJGmnJ2tThwoRUl1aQ/I+/ZgQqZzustmHCl0htnBcEARBEARBEARBEARBEIT/yR+8udLL5b/OZQAAAABJRU5ErkJggg==",
+              "media_type": "image/png"
+            }
+          }
+        ]
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "00823a45-ad0b-492f-ae94-a9da914de54e",
+  "tool_use_result": {
+    "type": "image",
+    "file": {
+      "base64": "iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACAklEQVR4nO2ava6DMAyFT65u6JCpDK06dOv7v1c7UKkqA2XInVxBGn4CcUh1/S0UVWB84sTBBhAEQRAEQfinKG4DxhhbFAUA4H6/s9sLhe2BjDEWAMh5QmuN2+2WjRA/HDcdch4A2rbF4XCwHHaXEF2AMeeJnERgiYAx54lcRPiNeTMafZeqqt6/y7KMaXI10SPAHf2u8+55DlHAMgUIclYp1Tu6omwJqwCEtRZKKVi7+ZT/gFWAofme0zqQJAIAZDn6QOQs4COn0faRLAJ8aK1R1zWMMXYohXITXYDX67X42i2EiCpAXdezX3Jo9H2kFIFlCkxFwZjzRCoR2NaAIRG01rPvsd/v2UWI9l7uPiwJMOfFaAzu+sHqNDg0SmsdT8ViZVOEJ8EZBewbIXcqTC2QqSNn042QD59Abduy2ctOgNR8hQAhqTOUrxCAk8WLIDU5YmYD3wLIvQ9g2wjFYokAIdvo6MrO6QuEVImn2mnn89m6NUayPcdO9H3A6XTqnT8ej9759Xp91wfpeDweg+1cLpf3KJdliefz2fu/qqoPOz4RWDdCTdN4cziVx+i4Ns/vdjs0TTNpx5dN2BaXtaFJrOko204hUlFN3iFJe3zJdUVRJGmnJ2tThwoRUl1aQ/I+/ZgQqZzustmHCl0htnBcEARBEARBEARBEARBEIT/yR+8udLL5b/OZQAAAABJRU5ErkJggg==",
+      "type": "image/png",
+      "originalSize": 571,
+      "dimensions": {
+        "originalWidth": 64,
+        "originalHeight": 64,
+        "displayWidth": 64,
+        "displayHeight": 64
+      }
+    }
+  }
+}
+[2026-01-22T07:19:34.588Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01C37yJp4TWsfgzKhhyMbhR2",
+        "type": "tool_result",
+        "content": [
+          {
+            "type": "image",
+            "source": {
+              "type": "base64",
+              "data": "iVBORw0KGgoAAAANSUhEUgAAABwAAAAYCAYAAADpnJ2CAAAAyElEQVR4nM2WsQrEIAyG46EuTr7/G7o4uehwN0hAxGjSqtw3tRD4qs1vVPAS59wXn1NKalW/LOCIemZisXAm4ojZQoloJl0Kn4ooKSncIUKstRBjVEOh936bqMUYAyEEpU+LetQtEUBdpV6XVXLOAFD/R/tOgXU9H65QyuiDSinnhBRXhcaY+yvUGMid3TpqGMzh9eAvjzaqvaXgTpI5bA7crWJx8CVYayHnzJsWPW+mRys8Hot+ALOFKSXFuSSt+P9L1EzM2YEf+6xazoAde78AAAAASUVORK5CYII=",
+              "media_type": "image/png"
+            }
+          }
+        ]
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "b9dd8d32-b079-4b5d-a96f-70c50a17adc3",
+  "tool_use_result": {
+    "type": "image",
+    "file": {
+      "base64": "iVBORw0KGgoAAAANSUhEUgAAABwAAAAYCAYAAADpnJ2CAAAAyElEQVR4nM2WsQrEIAyG46EuTr7/G7o4uehwN0hAxGjSqtw3tRD4qs1vVPAS59wXn1NKalW/LOCIemZisXAm4ojZQoloJl0Kn4ooKSncIUKstRBjVEOh936bqMUYAyEEpU+LetQtEUBdpV6XVXLOAFD/R/tOgXU9H65QyuiDSinnhBRXhcaY+yvUGMid3TpqGMzh9eAvjzaqvaXgTpI5bA7crWJx8CVYayHnzJsWPW+mRys8Hot+ALOFKSXFuSSt+P9L1EzM2YEf+6xazoAde78AAAAASUVORK5CYII=",
+      "type": "image/png",
+      "originalSize": 257,
+      "dimensions": {
+        "originalWidth": 28,
+        "originalHeight": 24,
+        "displayWidth": 28,
+        "displayHeight": 24
+      }
+    }
+  }
+}
+[2026-01-22T07:19:34.606Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01YEurHfZR8Rbg1T2A9MoQNe",
+        "type": "tool_result",
+        "content": [
+          {
+            "type": "image",
+            "source": {
+              "type": "base64",
+              "data": "iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAAbUlEQVR4nM2PsQ7AIAhEj6Tq4Obu5v9/Gi4uTHSjGlPi0KG3EOC4PICPRd4y56ynQTFG9N7JAmutysybCQDmeSnFJ2ytGYWIYIyxGJgZRARVteqFXnOTUoKIbCZVXWoI4Z3Q5X8C7QsiOrr5r24S+yh21dmA5QAAAABJRU5ErkJggg==",
+              "media_type": "image/png"
+            }
+          }
+        ]
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "5fc7d9c5-4eb7-4976-a6c7-a0b302334875",
+  "tool_use_result": {
+    "type": "image",
+    "file": {
+      "base64": "iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAAbUlEQVR4nM2PsQ7AIAhEj6Tq4Obu5v9/Gi4uTHSjGlPi0KG3EOC4PICPRd4y56ynQTFG9N7JAmutysybCQDmeSnFJ2ytGYWIYIyxGJgZRARVteqFXnOTUoKIbCZVXWoI4Z3Q5X8C7QsiOrr5r24S+yh21dmA5QAAAABJRU5ErkJggg==",
+      "type": "image/png",
+      "originalSize": 166,
+      "dimensions": {
+        "originalWidth": 20,
+        "originalHeight": 8,
+        "displayWidth": 20,
+        "displayHeight": 8
+      }
+    }
+  }
+}
+[2026-01-22T07:19:38.591Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01HMbP2wPfyzFyKVyUNsQLWs",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "The sprites look good! The enemy has:\n- Black body\n- Black head with white skull\n- Black arms with white skull decoration on the forearm\n\nLet me update the todo list and proceed to update the Enemy.tscn file:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 424,
+      "cache_read_input_tokens": 35890,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 424,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "933cade3-d091-4910-baf2-a820e2aa43a8"
+}
+[2026-01-22T07:19:41.130Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01HMbP2wPfyzFyKVyUNsQLWs",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01CQ6AEgoBd6YoVoHMYqNmH9",
+        "name": "TodoWrite",
+        "input": {
+          "todos": [
+            {
+              "content": "Read and analyze player sprite files structure",
+              "status": "completed",
+              "activeForm": "Analyzing player sprite files"
+            },
+            {
+              "content": "Create enemy body sprite (black version of player body)",
+              "status": "completed",
+              "activeForm": "Creating enemy body sprite"
+            },
+            {
+              "content": "Create enemy head sprite (black with white skull)",
+              "status": "completed",
+              "activeForm": "Creating enemy head sprite"
+            },
+            {
+              "content": "Create enemy arm sprites (black with white skull on forearm)",
+              "status": "completed",
+              "activeForm": "Creating enemy arm sprites"
+            },
+            {
+              "content": "Create combined preview image for enemy",
+              "status": "completed",
+              "activeForm": "Creating combined preview image"
+            },
+            {
+              "content": "Update Enemy.tscn to use new modular enemy sprites",
+              "status": "in_progress",
+              "activeForm": "Updating Enemy scene"
+            },
+            {
+              "content": "Test the enemy model in the game",
+              "status": "pending",
+              "activeForm": "Testing enemy model"
+            },
+            {
+              "content": "Commit and update PR",
+              "status": "pending",
+              "activeForm": "Committing and updating PR"
+            }
+          ]
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 424,
+      "cache_read_input_tokens": 35890,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 424,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "cece7283-ea70-42f9-91c9-96711c9d2f69"
+}
+[2026-01-22T07:19:41.157Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01CQ6AEgoBd6YoVoHMYqNmH9",
+        "type": "tool_result",
+        "content": "Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "f93e53cc-2000-4ba7-937d-6a9098349ca6",
+  "tool_use_result": {
+    "oldTodos": [
+      {
+        "content": "Read and analyze player sprite files structure",
+        "status": "completed",
+        "activeForm": "Analyzing player sprite files"
+      },
+      {
+        "content": "Create enemy body sprite (black version of player body)",
+        "status": "in_progress",
+        "activeForm": "Creating enemy body sprite"
+      },
+      {
+        "content": "Create enemy head sprite (black with white skull)",
+        "status": "pending",
+        "activeForm": "Creating enemy head sprite"
+      },
+      {
+        "content": "Create enemy arm sprites (black with white skull on forearm)",
+        "status": "pending",
+        "activeForm": "Creating enemy arm sprites"
+      },
+      {
+        "content": "Create combined preview image for enemy",
+        "status": "pending",
+        "activeForm": "Creating combined preview image"
+      },
+      {
+        "content": "Update Enemy.tscn to use new modular enemy sprites",
+        "status": "pending",
+        "activeForm": "Updating Enemy scene"
+      },
+      {
+        "content": "Test the enemy model in the game",
+        "status": "pending",
+        "activeForm": "Testing enemy model"
+      },
+      {
+        "content": "Commit and update PR",
+        "status": "pending",
+        "activeForm": "Committing and updating PR"
+      }
+    ],
+    "newTodos": [
+      {
+        "content": "Read and analyze player sprite files structure",
+        "status": "completed",
+        "activeForm": "Analyzing player sprite files"
+      },
+      {
+        "content": "Create enemy body sprite (black version of player body)",
+        "status": "completed",
+        "activeForm": "Creating enemy body sprite"
+      },
+      {
+        "content": "Create enemy head sprite (black with white skull)",
+        "status": "completed",
+        "activeForm": "Creating enemy head sprite"
+      },
+      {
+        "content": "Create enemy arm sprites (black with white skull on forearm)",
+        "status": "completed",
+        "activeForm": "Creating enemy arm sprites"
+      },
+      {
+        "content": "Create combined preview image for enemy",
+        "status": "completed",
+        "activeForm": "Creating combined preview image"
+      },
+      {
+        "content": "Update Enemy.tscn to use new modular enemy sprites",
+        "status": "in_progress",
+        "activeForm": "Updating Enemy scene"
+      },
+      {
+        "content": "Test the enemy model in the game",
+        "status": "pending",
+        "activeForm": "Testing enemy model"
+      },
+      {
+        "content": "Commit and update PR",
+        "status": "pending",
+        "activeForm": "Committing and updating PR"
+      }
+    ]
+  }
+}
+[2026-01-22T07:19:44.638Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01WmTmbDF9ehat6SfKTJPERQ",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Now I need to update the Enemy.tscn file to use the new modular enemy sprites similar to how the Player.tscn is structured:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 395,
+      "cache_read_input_tokens": 36314,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 395,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 2,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "712c370e-d697-4a01-8b4f-70926e09b0b4"
+}
+[2026-01-22T07:19:55.710Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01WmTmbDF9ehat6SfKTJPERQ",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_017AWjsRT3aFeqeFVE1HX7v3",
+        "name": "Write",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/scenes/objects/Enemy.tscn",
+          "content": "[gd_scene load_steps=10 format=3 uid=\"uid://cx5m8np6u3bwd\"]\n\n[ext_resource type=\"Script\" path=\"res://scripts/objects/enemy.gd\" id=\"1_enemy\"]\n[ext_resource type=\"Script\" path=\"res://scripts/objects/hit_area.gd\" id=\"2_hit_area\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/weapons/m16_rifle_topdown.png\" id=\"3_rifle_sprite\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/enemy/enemy_body.png\" id=\"4_body\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/enemy/enemy_head.png\" id=\"5_head\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/enemy/enemy_left_arm.png\" id=\"6_left_arm\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/enemy/enemy_right_arm.png\" id=\"7_right_arm\"]\n\n[sub_resource type=\"CircleShape2D\" id=\"CircleShape2D_enemy\"]\nradius = 24.0\n\n[node name=\"Enemy\" type=\"CharacterBody2D\" groups=[\"enemies\"]]\ncollision_layer = 2\ncollision_mask = 4\nscript = ExtResource(\"1_enemy\")\n\n[node name=\"EnemyModel\" type=\"Node2D\" parent=\".\"]\n\n[node name=\"Body\" type=\"Sprite2D\" parent=\"EnemyModel\"]\nz_index = 1\nposition = Vector2(-4, 0)\ntexture = ExtResource(\"4_body\")\n\n[node name=\"LeftArm\" type=\"Sprite2D\" parent=\"EnemyModel\"]\nz_index = 4\nposition = Vector2(24, 6)\ntexture = ExtResource(\"6_left_arm\")\n\n[node name=\"RightArm\" type=\"Sprite2D\" parent=\"EnemyModel\"]\nz_index = 4\nposition = Vector2(-2, 6)\ntexture = ExtResource(\"7_right_arm\")\n\n[node name=\"Head\" type=\"Sprite2D\" parent=\"EnemyModel\"]\nz_index = 3\nposition = Vector2(-6, -2)\ntexture = ExtResource(\"5_head\")\n\n[node name=\"WeaponMount\" type=\"Node2D\" parent=\"EnemyModel\"]\nposition = Vector2(0, 6)\n\n[node name=\"WeaponSprite\" type=\"Sprite2D\" parent=\"EnemyModel/WeaponMount\"]\nz_index = 2\ntexture = ExtResource(\"3_rifle_sprite\")\noffset = Vector2(20, 0)\n\n[node name=\"CollisionShape2D\" type=\"CollisionShape2D\" parent=\".\"]\nshape = SubResource(\"CircleShape2D_enemy\")\n\n[node name=\"RayCast2D\" type=\"RayCast2D\" parent=\".\"]\ntarget_position = Vector2(400, 0)\ncollision_mask = 5\n\n[node name=\"HitArea\" type=\"Area2D\" parent=\".\"]\ncollision_layer = 2\ncollision_mask = 16\nscript = ExtResource(\"2_hit_area\")\n\n[node name=\"HitCollisionShape\" type=\"CollisionShape2D\" parent=\"HitArea\"]\nshape = SubResource(\"CircleShape2D_enemy\")\n\n[node name=\"NavigationAgent2D\" type=\"NavigationAgent2D\" parent=\".\"]\npath_desired_distance = 4.0\ntarget_desired_distance = 10.0\navoidance_enabled = true\nradius = 24.0\nneighbor_distance = 100.0\nmax_neighbors = 5\ntime_horizon_agents = 1.0\ntime_horizon_obstacles = 1.0\nmax_speed = 320.0\ndebug_enabled = false\n\n[node name=\"DebugLabel\" type=\"Label\" parent=\".\"]\nvisible = false\noffset_left = -50.0\noffset_top = -50.0\noffset_right = 50.0\noffset_bottom = -30.0\nhorizontal_alignment = 1\nvertical_alignment = 1\n"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 395,
+      "cache_read_input_tokens": 36314,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 395,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 2,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "cd4bdb9b-3545-460f-8a0e-54d14d066bff"
+}
+[2026-01-22T07:19:55.748Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_017AWjsRT3aFeqeFVE1HX7v3",
+        "type": "tool_result",
+        "content": "The file /tmp/gh-issue-solver-1769066205054/scenes/objects/Enemy.tscn has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n     1→[gd_scene load_steps=10 format=3 uid=\"uid://cx5m8np6u3bwd\"]\n     2→\n     3→[ext_resource type=\"Script\" path=\"res://scripts/objects/enemy.gd\" id=\"1_enemy\"]\n     4→[ext_resource type=\"Script\" path=\"res://scripts/objects/hit_area.gd\" id=\"2_hit_area\"]\n     5→[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/weapons/m16_rifle_topdown.png\" id=\"3_rifle_sprite\"]\n     6→[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/enemy/enemy_body.png\" id=\"4_body\"]\n     7→[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/enemy/enemy_head.png\" id=\"5_head\"]\n     8→[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/enemy/enemy_left_arm.png\" id=\"6_left_arm\"]\n     9→[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/enemy/enemy_right_arm.png\" id=\"7_right_arm\"]\n    10→\n    11→[sub_resource type=\"CircleShape2D\" id=\"CircleShape2D_enemy\"]\n    12→radius = 24.0\n    13→\n    14→[node name=\"Enemy\" type=\"CharacterBody2D\" groups=[\"enemies\"]]\n    15→collision_layer = 2\n    16→collision_mask = 4\n    17→script = ExtResource(\"1_enemy\")\n    18→\n    19→[node name=\"EnemyModel\" type=\"Node2D\" parent=\".\"]\n    20→\n    21→[node name=\"Body\" type=\"Sprite2D\" parent=\"EnemyModel\"]\n    22→z_index = 1\n    23→position = Vector2(-4, 0)\n    24→texture = ExtResource(\"4_body\")\n    25→\n    26→[node name=\"LeftArm\" type=\"Sprite2D\" parent=\"EnemyModel\"]\n    27→z_index = 4\n    28→position = Vector2(24, 6)\n    29→texture = ExtResource(\"6_left_arm\")\n    30→\n    31→[node name=\"RightArm\" type=\"Sprite2D\" parent=\"EnemyModel\"]\n    32→z_index = 4\n    33→position = Vector2(-2, 6)\n    34→texture = ExtResource(\"7_right_arm\")\n    35→\n    36→[node name=\"Head\" type=\"Sprite2D\" parent=\"EnemyModel\"]\n    37→z_index = 3\n    38→position = Vector2(-6, -2)\n    39→texture = ExtResource(\"5_head\")\n    40→\n    41→[node name=\"WeaponMount\" type=\"Node2D\" parent=\"EnemyModel\"]\n    42→position = Vector2(0, 6)\n    43→\n    44→[node name=\"WeaponSprite\" type=\"Sprite2D\" parent=\"EnemyModel/WeaponMount\"]\n    45→z_index = 2\n    46→texture = ExtResource(\"3_rifle_sprite\")\n    47→offset = Vector2(20, 0)\n    48→\n    49→[node name=\"CollisionShape2D\" type=\"CollisionShape2D\" parent=\".\"]\n    50→shape = SubResource(\"CircleShape2D_enemy\")\n    51→\n    52→[node name=\"RayCast2D\" type=\"RayCast2D\" parent=\".\"]\n    53→target_position = Vector2(400, 0)\n    54→collision_mask = 5\n    55→\n    56→[node name=\"HitArea\" type=\"Area2D\" parent=\".\"]\n    57→collision_layer = 2\n    58→collision_mask = 16\n    59→script = ExtResource(\"2_hit_area\")\n    60→\n    61→[node name=\"HitCollisionShape\" type=\"CollisionShape2D\" parent=\"HitArea\"]\n    62→shape = SubResource(\"CircleShape2D_enemy\")\n    63→\n    64→[node name=\"NavigationAgent2D\" type=\"NavigationAgent2D\" parent=\".\"]\n    65→path_desired_distance = 4.0\n    66→target_desired_distance = 10.0\n    67→avoidance_enabled = true\n    68→radius = 24.0\n    69→neighbor_distance = 100.0\n    70→max_neighbors = 5\n    71→time_horizon_agents = 1.0\n    72→time_horizon_obstacles = 1.0\n    73→max_speed = 320.0\n    74→debug_enabled = false\n    75→\n    76→[node name=\"DebugLabel\" type=\"Label\" parent=\".\"]\n    77→visible = false\n    78→offset_left = -50.0\n    79→offset_top = -50.0\n    80→offset_right = 50.0\n    81→offset_bottom = -30.0\n    82→horizontal_alignment = 1\n    83→vertical_alignment = 1\n    84→"
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "f16190f1-3c02-4e4e-89ec-a8096191ce4d",
+  "tool_use_result": {
+    "type": "update",
+    "filePath": "/tmp/gh-issue-solver-1769066205054/scenes/objects/Enemy.tscn",
+    "content": "[gd_scene load_steps=10 format=3 uid=\"uid://cx5m8np6u3bwd\"]\n\n[ext_resource type=\"Script\" path=\"res://scripts/objects/enemy.gd\" id=\"1_enemy\"]\n[ext_resource type=\"Script\" path=\"res://scripts/objects/hit_area.gd\" id=\"2_hit_area\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/weapons/m16_rifle_topdown.png\" id=\"3_rifle_sprite\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/enemy/enemy_body.png\" id=\"4_body\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/enemy/enemy_head.png\" id=\"5_head\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/enemy/enemy_left_arm.png\" id=\"6_left_arm\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/enemy/enemy_right_arm.png\" id=\"7_right_arm\"]\n\n[sub_resource type=\"CircleShape2D\" id=\"CircleShape2D_enemy\"]\nradius = 24.0\n\n[node name=\"Enemy\" type=\"CharacterBody2D\" groups=[\"enemies\"]]\ncollision_layer = 2\ncollision_mask = 4\nscript = ExtResource(\"1_enemy\")\n\n[node name=\"EnemyModel\" type=\"Node2D\" parent=\".\"]\n\n[node name=\"Body\" type=\"Sprite2D\" parent=\"EnemyModel\"]\nz_index = 1\nposition = Vector2(-4, 0)\ntexture = ExtResource(\"4_body\")\n\n[node name=\"LeftArm\" type=\"Sprite2D\" parent=\"EnemyModel\"]\nz_index = 4\nposition = Vector2(24, 6)\ntexture = ExtResource(\"6_left_arm\")\n\n[node name=\"RightArm\" type=\"Sprite2D\" parent=\"EnemyModel\"]\nz_index = 4\nposition = Vector2(-2, 6)\ntexture = ExtResource(\"7_right_arm\")\n\n[node name=\"Head\" type=\"Sprite2D\" parent=\"EnemyModel\"]\nz_index = 3\nposition = Vector2(-6, -2)\ntexture = ExtResource(\"5_head\")\n\n[node name=\"WeaponMount\" type=\"Node2D\" parent=\"EnemyModel\"]\nposition = Vector2(0, 6)\n\n[node name=\"WeaponSprite\" type=\"Sprite2D\" parent=\"EnemyModel/WeaponMount\"]\nz_index = 2\ntexture = ExtResource(\"3_rifle_sprite\")\noffset = Vector2(20, 0)\n\n[node name=\"CollisionShape2D\" type=\"CollisionShape2D\" parent=\".\"]\nshape = SubResource(\"CircleShape2D_enemy\")\n\n[node name=\"RayCast2D\" type=\"RayCast2D\" parent=\".\"]\ntarget_position = Vector2(400, 0)\ncollision_mask = 5\n\n[node name=\"HitArea\" type=\"Area2D\" parent=\".\"]\ncollision_layer = 2\ncollision_mask = 16\nscript = ExtResource(\"2_hit_area\")\n\n[node name=\"HitCollisionShape\" type=\"CollisionShape2D\" parent=\"HitArea\"]\nshape = SubResource(\"CircleShape2D_enemy\")\n\n[node name=\"NavigationAgent2D\" type=\"NavigationAgent2D\" parent=\".\"]\npath_desired_distance = 4.0\ntarget_desired_distance = 10.0\navoidance_enabled = true\nradius = 24.0\nneighbor_distance = 100.0\nmax_neighbors = 5\ntime_horizon_agents = 1.0\ntime_horizon_obstacles = 1.0\nmax_speed = 320.0\ndebug_enabled = false\n\n[node name=\"DebugLabel\" type=\"Label\" parent=\".\"]\nvisible = false\noffset_left = -50.0\noffset_top = -50.0\noffset_right = 50.0\noffset_bottom = -30.0\nhorizontal_alignment = 1\nvertical_alignment = 1\n",
+    "structuredPatch": [
+      {
+        "oldStart": 1,
+        "oldLines": 12,
+        "newStart": 1,
+        "newLines": 13,
+        "lines": [
+          "-[gd_scene load_steps=6 format=3 uid=\"uid://cx5m8np6u3bwd\"]",
+          "+[gd_scene load_steps=10 format=3 uid=\"uid://cx5m8np6u3bwd\"]",
+          " ",
+          " [ext_resource type=\"Script\" path=\"res://scripts/objects/enemy.gd\" id=\"1_enemy\"]",
+          " [ext_resource type=\"Script\" path=\"res://scripts/objects/hit_area.gd\" id=\"2_hit_area\"]",
+          " [ext_resource type=\"Texture2D\" path=\"res://assets/sprites/weapons/m16_rifle_topdown.png\" id=\"3_rifle_sprite\"]",
+          "+[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/enemy/enemy_body.png\" id=\"4_body\"]",
+          "+[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/enemy/enemy_head.png\" id=\"5_head\"]",
+          "+[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/enemy/enemy_left_arm.png\" id=\"6_left_arm\"]",
+          "+[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/characters/enemy/enemy_right_arm.png\" id=\"7_right_arm\"]",
+          " ",
+          "-[sub_resource type=\"PlaceholderTexture2D\" id=\"PlaceholderTexture2D_enemy\"]",
+          "-size = Vector2(48, 48)",
+          "-",
+          " [sub_resource type=\"CircleShape2D\" id=\"CircleShape2D_enemy\"]",
+          " radius = 24.0",
+          " "
+        ]
+      },
+      {
+        "oldStart": 15,
+        "oldLines": 12,
+        "newStart": 16,
+        "newLines": 33,
+        "lines": [
+          " collision_mask = 4",
+          " script = ExtResource(\"1_enemy\")",
+          " ",
+          "-[node name=\"Sprite2D\" type=\"Sprite2D\" parent=\".\"]",
+          "-modulate = Color(0.9, 0.2, 0.2, 1)",
+          "-texture = SubResource(\"PlaceholderTexture2D_enemy\")",
+          "+[node name=\"EnemyModel\" type=\"Node2D\" parent=\".\"]",
+          " ",
+          "-[node name=\"WeaponSprite\" type=\"Sprite2D\" parent=\".\"]",
+          "+[node name=\"Body\" type=\"Sprite2D\" parent=\"EnemyModel\"]",
+          " z_index = 1",
+          "+position = Vector2(-4, 0)",
+          "+texture = ExtResource(\"4_body\")",
+          "+",
+          "+[node name=\"LeftArm\" type=\"Sprite2D\" parent=\"EnemyModel\"]",
+          "+z_index = 4",
+          "+position = Vector2(24, 6)",
+          "+texture = ExtResource(\"6_left_arm\")",
+          "+",
+          "+[node name=\"RightArm\" type=\"Sprite2D\" parent=\"EnemyModel\"]",
+          "+z_index = 4",
+          "+position = Vector2(-2, 6)",
+          "+texture = ExtResource(\"7_right_arm\")",
+          "+",
+          "+[node name=\"Head\" type=\"Sprite2D\" parent=\"EnemyModel\"]",
+          "+z_index = 3",
+          "+position = Vector2(-6, -2)",
+          "+texture = ExtResource(\"5_head\")",
+          "+",
+          "+[node name=\"WeaponMount\" type=\"Node2D\" parent=\"EnemyModel\"]",
+          "+position = Vector2(0, 6)",
+          "+",
+          "+[node name=\"WeaponSprite\" type=\"Sprite2D\" parent=\"EnemyModel/WeaponMount\"]",
+          "+z_index = 2",
+          " texture = ExtResource(\"3_rifle_sprite\")",
+          " offset = Vector2(20, 0)",
+          " "
+        ]
+      }
+    ],
+    "originalFile": "[gd_scene load_steps=6 format=3 uid=\"uid://cx5m8np6u3bwd\"]\n\n[ext_resource type=\"Script\" path=\"res://scripts/objects/enemy.gd\" id=\"1_enemy\"]\n[ext_resource type=\"Script\" path=\"res://scripts/objects/hit_area.gd\" id=\"2_hit_area\"]\n[ext_resource type=\"Texture2D\" path=\"res://assets/sprites/weapons/m16_rifle_topdown.png\" id=\"3_rifle_sprite\"]\n\n[sub_resource type=\"PlaceholderTexture2D\" id=\"PlaceholderTexture2D_enemy\"]\nsize = Vector2(48, 48)\n\n[sub_resource type=\"CircleShape2D\" id=\"CircleShape2D_enemy\"]\nradius = 24.0\n\n[node name=\"Enemy\" type=\"CharacterBody2D\" groups=[\"enemies\"]]\ncollision_layer = 2\ncollision_mask = 4\nscript = ExtResource(\"1_enemy\")\n\n[node name=\"Sprite2D\" type=\"Sprite2D\" parent=\".\"]\nmodulate = Color(0.9, 0.2, 0.2, 1)\ntexture = SubResource(\"PlaceholderTexture2D_enemy\")\n\n[node name=\"WeaponSprite\" type=\"Sprite2D\" parent=\".\"]\nz_index = 1\ntexture = ExtResource(\"3_rifle_sprite\")\noffset = Vector2(20, 0)\n\n[node name=\"CollisionShape2D\" type=\"CollisionShape2D\" parent=\".\"]\nshape = SubResource(\"CircleShape2D_enemy\")\n\n[node name=\"RayCast2D\" type=\"RayCast2D\" parent=\".\"]\ntarget_position = Vector2(400, 0)\ncollision_mask = 5\n\n[node name=\"HitArea\" type=\"Area2D\" parent=\".\"]\ncollision_layer = 2\ncollision_mask = 16\nscript = ExtResource(\"2_hit_area\")\n\n[node name=\"HitCollisionShape\" type=\"CollisionShape2D\" parent=\"HitArea\"]\nshape = SubResource(\"CircleShape2D_enemy\")\n\n[node name=\"NavigationAgent2D\" type=\"NavigationAgent2D\" parent=\".\"]\npath_desired_distance = 4.0\ntarget_desired_distance = 10.0\navoidance_enabled = true\nradius = 24.0\nneighbor_distance = 100.0\nmax_neighbors = 5\ntime_horizon_agents = 1.0\ntime_horizon_obstacles = 1.0\nmax_speed = 320.0\ndebug_enabled = false\n\n[node name=\"DebugLabel\" type=\"Label\" parent=\".\"]\nvisible = false\noffset_left = -50.0\noffset_top = -50.0\noffset_right = 50.0\noffset_bottom = -30.0\nhorizontal_alignment = 1\nvertical_alignment = 1\n"
+  }
+}
+[2026-01-22T07:19:59.842Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_015YT8wQREuQm1B5qxyiJi8g",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Now let me check if there are any .import files needed for Godot to recognize the new sprites. Godot typically auto-generates these when it first opens the project, but let me check if there are existing patterns:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 2513,
+      "cache_read_input_tokens": 36709,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 2513,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 4,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "51238f38-bebe-4038-8c1d-a3e87d3b0e95"
+}
+[2026-01-22T07:20:00.400Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_015YT8wQREuQm1B5qxyiJi8g",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01QdiyMWy3Umv941hjgYXbEj",
+        "name": "Glob",
+        "input": {
+          "pattern": "**/*.import",
+          "path": "/tmp/gh-issue-solver-1769066205054/assets/sprites/characters"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 2513,
+      "cache_read_input_tokens": 36709,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 2513,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 4,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "0f73ec28-2198-4338-8c5a-bf8b2750be02"
+}
+[2026-01-22T07:20:00.443Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01QdiyMWy3Umv941hjgYXbEj",
+        "type": "tool_result",
+        "content": "No files found"
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "fbcc5ef9-72ac-4df8-a68b-22642d187232",
+  "tool_use_result": {
+    "filenames": [],
+    "durationMs": 16,
+    "numFiles": 0,
+    "truncated": false
+  }
+}
+[2026-01-22T07:20:03.090Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01QpH6GNqxzwQBEfAt5hmj38",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01AeFunJF7u4TDrinhPftkbW",
+        "name": "Glob",
+        "input": {
+          "pattern": "**/*.import",
+          "path": "/tmp/gh-issue-solver-1769066205054"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 153,
+      "cache_read_input_tokens": 39222,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 153,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 25,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "5d80b03c-ae8f-4f19-8b8c-1aebc726d8ce"
+}
+[2026-01-22T07:20:03.155Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01AeFunJF7u4TDrinhPftkbW",
+        "type": "tool_result",
+        "content": "/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/AnonymousPro-Bold.ttf.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/AnonymousPro-BoldItalic.ttf.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/AnonymousPro-Italic.ttf.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/CourierPrime-Bold.ttf.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/AnonymousPro-Regular.ttf.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/CourierPrime-Italic.ttf.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/CourierPrime-Regular.ttf.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/CourierPrime-BoldItalic.ttf.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/LobsterTwo-BoldItalic.ttf.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/LobsterTwo-Bold.ttf.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/LobsterTwo-Italic.ttf.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/LobsterTwo-Regular.ttf.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/gui/arrow.png.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/gui/play.png.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/icon.png.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/images/Script.svg.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/images/green.png.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/images/yellow.png.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/images/Folder.svg.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/images/red.png.import\n/tmp/gh-issue-solver-1769066205054/addons/gut/source_code_pro.fnt.import"
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "bf1b6c65-d4a1-41e9-8675-65023a12aadc",
+  "tool_use_result": {
+    "filenames": [
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/AnonymousPro-Bold.ttf.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/AnonymousPro-BoldItalic.ttf.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/AnonymousPro-Italic.ttf.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/CourierPrime-Bold.ttf.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/AnonymousPro-Regular.ttf.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/CourierPrime-Italic.ttf.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/CourierPrime-Regular.ttf.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/CourierPrime-BoldItalic.ttf.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/LobsterTwo-BoldItalic.ttf.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/LobsterTwo-Bold.ttf.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/LobsterTwo-Italic.ttf.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/fonts/LobsterTwo-Regular.ttf.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/gui/arrow.png.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/gui/play.png.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/icon.png.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/images/Script.svg.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/images/green.png.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/images/yellow.png.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/images/Folder.svg.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/images/red.png.import",
+      "/tmp/gh-issue-solver-1769066205054/addons/gut/source_code_pro.fnt.import"
+    ],
+    "durationMs": 22,
+    "numFiles": 21,
+    "truncated": false
+  }
+}
+[2026-01-22T07:20:06.267Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01YMyeBDK2UDg2x9ACcqxRxR",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "The .import files are only in the addons directory and appear to be auto-generated. Godot will create them when the project is opened. Let me check git status to see all changes:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 775,
+      "cache_read_input_tokens": 39375,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 775,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 5,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "19004c53-db1c-4cec-8d7b-c07504071207"
+}
+[2026-01-22T07:20:07.336Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01YMyeBDK2UDg2x9ACcqxRxR",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01HnsPdompqViHgALPrmx8ZQ",
+        "name": "Bash",
+        "input": {
+          "command": "git status",
+          "description": "Check git status"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 775,
+      "cache_read_input_tokens": 39375,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 775,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 5,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "7f19dc40-016e-4fda-afdf-17ecc1824bf7"
+}
+[2026-01-22T07:20:07.485Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01HnsPdompqViHgALPrmx8ZQ",
+        "type": "tool_result",
+        "content": "On branch issue-217-6e363ec134f9\nYour branch is up to date with 'origin/issue-217-6e363ec134f9'.\n\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git restore <file>...\" to discard changes in working directory)\n\tmodified:   scenes/objects/Enemy.tscn\n\nUntracked files:\n  (use \"git add <file>...\" to include in what will be committed)\n\tassets/sprites/characters/enemy/\n\texperiments/create_enemy_sprites.py\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "662adbfc-1e84-466e-97c9-52b5263087f4",
+  "tool_use_result": {
+    "stdout": "On branch issue-217-6e363ec134f9\nYour branch is up to date with 'origin/issue-217-6e363ec134f9'.\n\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git restore <file>...\" to discard changes in working directory)\n\tmodified:   scenes/objects/Enemy.tscn\n\nUntracked files:\n  (use \"git add <file>...\" to include in what will be committed)\n\tassets/sprites/characters/enemy/\n\texperiments/create_enemy_sprites.py\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:20:12.205Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01TESQGrqi27aDbLFsu9oKda",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01ViWcHiHE6KZFrX2SJN8F66",
+        "name": "TodoWrite",
+        "input": {
+          "todos": [
+            {
+              "content": "Read and analyze player sprite files structure",
+              "status": "completed",
+              "activeForm": "Analyzing player sprite files"
+            },
+            {
+              "content": "Create enemy body sprite (black version of player body)",
+              "status": "completed",
+              "activeForm": "Creating enemy body sprite"
+            },
+            {
+              "content": "Create enemy head sprite (black with white skull)",
+              "status": "completed",
+              "activeForm": "Creating enemy head sprite"
+            },
+            {
+              "content": "Create enemy arm sprites (black with white skull on forearm)",
+              "status": "completed",
+              "activeForm": "Creating enemy arm sprites"
+            },
+            {
+              "content": "Create combined preview image for enemy",
+              "status": "completed",
+              "activeForm": "Creating combined preview image"
+            },
+            {
+              "content": "Update Enemy.tscn to use new modular enemy sprites",
+              "status": "completed",
+              "activeForm": "Updating Enemy scene"
+            },
+            {
+              "content": "Check for any CI configuration that needs review",
+              "status": "in_progress",
+              "activeForm": "Checking CI configuration"
+            },
+            {
+              "content": "Commit and update PR",
+              "status": "pending",
+              "activeForm": "Committing and updating PR"
+            }
+          ]
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 289,
+      "cache_read_input_tokens": 40150,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 289,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 25,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "99a21040-4647-4d0b-a21f-8294f87d71e6"
+}
+[2026-01-22T07:20:12.240Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01ViWcHiHE6KZFrX2SJN8F66",
+        "type": "tool_result",
+        "content": "Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "182769c0-ae79-45ba-8008-b658a9154285",
+  "tool_use_result": {
+    "oldTodos": [
+      {
+        "content": "Read and analyze player sprite files structure",
+        "status": "completed",
+        "activeForm": "Analyzing player sprite files"
+      },
+      {
+        "content": "Create enemy body sprite (black version of player body)",
+        "status": "completed",
+        "activeForm": "Creating enemy body sprite"
+      },
+      {
+        "content": "Create enemy head sprite (black with white skull)",
+        "status": "completed",
+        "activeForm": "Creating enemy head sprite"
+      },
+      {
+        "content": "Create enemy arm sprites (black with white skull on forearm)",
+        "status": "completed",
+        "activeForm": "Creating enemy arm sprites"
+      },
+      {
+        "content": "Create combined preview image for enemy",
+        "status": "completed",
+        "activeForm": "Creating combined preview image"
+      },
+      {
+        "content": "Update Enemy.tscn to use new modular enemy sprites",
+        "status": "in_progress",
+        "activeForm": "Updating Enemy scene"
+      },
+      {
+        "content": "Test the enemy model in the game",
+        "status": "pending",
+        "activeForm": "Testing enemy model"
+      },
+      {
+        "content": "Commit and update PR",
+        "status": "pending",
+        "activeForm": "Committing and updating PR"
+      }
+    ],
+    "newTodos": [
+      {
+        "content": "Read and analyze player sprite files structure",
+        "status": "completed",
+        "activeForm": "Analyzing player sprite files"
+      },
+      {
+        "content": "Create enemy body sprite (black version of player body)",
+        "status": "completed",
+        "activeForm": "Creating enemy body sprite"
+      },
+      {
+        "content": "Create enemy head sprite (black with white skull)",
+        "status": "completed",
+        "activeForm": "Creating enemy head sprite"
+      },
+      {
+        "content": "Create enemy arm sprites (black with white skull on forearm)",
+        "status": "completed",
+        "activeForm": "Creating enemy arm sprites"
+      },
+      {
+        "content": "Create combined preview image for enemy",
+        "status": "completed",
+        "activeForm": "Creating combined preview image"
+      },
+      {
+        "content": "Update Enemy.tscn to use new modular enemy sprites",
+        "status": "completed",
+        "activeForm": "Updating Enemy scene"
+      },
+      {
+        "content": "Check for any CI configuration that needs review",
+        "status": "in_progress",
+        "activeForm": "Checking CI configuration"
+      },
+      {
+        "content": "Commit and update PR",
+        "status": "pending",
+        "activeForm": "Committing and updating PR"
+      }
+    ]
+  }
+}
+[2026-01-22T07:20:14.681Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01ECavoMRr8VvtVoZ7wDXyvz",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Let me check if there's any CI configuration for this repository:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 345,
+      "cache_read_input_tokens": 40439,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 345,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 4,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "b46a676e-498e-4e66-90d4-44afb07c87f6"
+}
+[2026-01-22T07:20:15.211Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01ECavoMRr8VvtVoZ7wDXyvz",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01Eh6XAzpTRtkZGo1ooQUPQV",
+        "name": "Glob",
+        "input": {
+          "pattern": "**/*.yml",
+          "path": "/tmp/gh-issue-solver-1769066205054/.github"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 345,
+      "cache_read_input_tokens": 40439,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 345,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 4,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "faec9693-4100-43b0-96fc-654e7776c0bf"
+}
+[2026-01-22T07:20:15.241Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01Eh6XAzpTRtkZGo1ooQUPQV",
+        "type": "tool_result",
+        "content": "/tmp/gh-issue-solver-1769066205054/.github/workflows/build-windows.yml\n/tmp/gh-issue-solver-1769066205054/.github/workflows/test.yml\n/tmp/gh-issue-solver-1769066205054/.github/workflows/architecture-check.yml"
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "da7bfb0d-2225-43b6-b44c-8c213a32ba15",
+  "tool_use_result": {
+    "filenames": [
+      "/tmp/gh-issue-solver-1769066205054/.github/workflows/build-windows.yml",
+      "/tmp/gh-issue-solver-1769066205054/.github/workflows/test.yml",
+      "/tmp/gh-issue-solver-1769066205054/.github/workflows/architecture-check.yml"
+    ],
+    "durationMs": 12,
+    "numFiles": 3,
+    "truncated": false
+  }
+}
+[2026-01-22T07:20:18.164Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01PAgNmsaCH4HMCffqrwXzGi",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01A8QG6j6ZVKYudGHa5ACs84",
+        "name": "Read",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/.github/workflows/architecture-check.yml"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 183,
+      "cache_read_input_tokens": 40784,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 183,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 25,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "7eb28564-7138-4b05-aeed-68351c3ead9b"
+}
+[2026-01-22T07:20:18.545Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01PAgNmsaCH4HMCffqrwXzGi",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01RsbC3Z25G3C2xSXURfhqHv",
+        "name": "Read",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/.github/workflows/test.yml"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 183,
+      "cache_read_input_tokens": 40784,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 183,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 25,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "4fefd6a4-428d-4ee8-89a5-dbe917a9e2de"
+}
+[2026-01-22T07:20:18.575Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01A8QG6j6ZVKYudGHa5ACs84",
+        "type": "tool_result",
+        "content": "     1→name: Architecture Best Practices Check\n     2→\n     3→on:\n     4→  push:\n     5→    branches: [ main, issue-* ]\n     6→  pull_request:\n     7→    branches: [ main ]\n     8→  workflow_dispatch:\n     9→\n    10→jobs:\n    11→  architecture-check:\n    12→    name: Check Architecture Best Practices\n    13→    runs-on: ubuntu-latest\n    14→\n    15→    steps:\n    16→      - name: Checkout\n    17→        uses: actions/checkout@v4\n    18→\n    19→      - name: Check script line counts\n    20→        id: line_counts\n    21→        run: |\n    22→          echo \"Checking GDScript file sizes...\"\n    23→          # Current limits - these will be reduced as refactoring progresses\n    24→          # Target: MAX_LINES=800, WARN_LINES=500\n    25→          # Current: Higher limits to allow existing large scripts while encouraging refactoring\n    26→          MAX_LINES=5000  # Will be reduced to 800 as refactoring progresses\n    27→          WARN_LINES=800  # Warns for scripts that should be considered for refactoring\n    28→          errors=0\n    29→          warnings=0\n    30→          large_scripts=0\n    31→\n    32→          # Find all GDScript files (excluding addons and tests)\n    33→          while IFS= read -r file; do\n    34→            lines=$(wc -l < \"$file\")\n    35→            if [ \"$lines\" -gt \"$MAX_LINES\" ]; then\n    36→              echo \"::error file=$file::Script exceeds $MAX_LINES lines ($lines lines). Refactoring required.\"\n    37→              errors=$((errors + 1))\n    38→            elif [ \"$lines\" -gt \"$WARN_LINES\" ]; then\n    39→              echo \"::warning file=$file::Script has $lines lines (warning threshold: $WARN_LINES). Consider splitting into components using the patterns in scripts/components/.\"\n    40→              warnings=$((warnings + 1))\n    41→            fi\n    42→            if [ \"$lines\" -gt 500 ]; then\n    43→              large_scripts=$((large_scripts + 1))\n    44→            fi\n    45→          done < <(find scripts -name \"*.gd\" -type f 2>/dev/null)\n    46→\n    47→          echo \"errors=$errors\" >> $GITHUB_OUTPUT\n    48→          echo \"warnings=$warnings\" >> $GITHUB_OUTPUT\n    49→          echo \"large_scripts=$large_scripts\" >> $GITHUB_OUTPUT\n    50→\n    51→          if [ \"$errors\" -gt 0 ]; then\n    52→            echo \"Found $errors script(s) exceeding line limit.\"\n    53→            exit 1\n    54→          fi\n    55→\n    56→          echo \"All scripts within size limits. ($warnings warnings, $large_scripts scripts over 500 lines)\"\n    57→          echo \"\"\n    58→          echo \"Note: Gradual refactoring is encouraged. See scripts/components/ for reusable component patterns.\"\n    59→\n    60→      - name: Check for class_name declarations\n    61→        run: |\n    62→          echo \"Checking component files have class_name...\"\n    63→          errors=0\n    64→\n    65→          # Check components folder\n    66→          if [ -d \"scripts/components\" ]; then\n    67→            for file in scripts/components/*.gd; do\n    68→              if [ -f \"$file\" ]; then\n    69→                if ! grep -q \"^class_name\" \"$file\"; then\n    70→                  echo \"::error file=$file::Component script missing class_name declaration\"\n    71→                  errors=$((errors + 1))\n    72→                fi\n    73→              fi\n    74→            done\n    75→          fi\n    76→\n    77→          # Check AI states folder\n    78→          if [ -d \"scripts/ai/states\" ]; then\n    79→            for file in scripts/ai/states/*.gd; do\n    80→              if [ -f \"$file\" ]; then\n    81→                if ! grep -q \"^class_name\" \"$file\"; then\n    82→                  echo \"::error file=$file::AI state script missing class_name declaration\"\n    83→                  errors=$((errors + 1))\n    84→                fi\n    85→              fi\n    86→            done\n    87→          fi\n    88→\n    89→          if [ \"$errors\" -gt 0 ]; then\n    90→            echo \"Found $errors files missing class_name declarations.\"\n    91→            exit 1\n    92→          fi\n    93→\n    94→          echo \"All component/state files have class_name declarations.\"\n    95→\n    96→      - name: Check folder structure\n    97→        run: |\n    98→          echo \"Checking project folder structure...\"\n    99→          required_dirs=(\n   100→            \"scripts/autoload\"\n   101→            \"scripts/ai\"\n   102→            \"scripts/characters\"\n   103→            \"scripts/objects\"\n   104→            \"scripts/ui\"\n   105→            \"scenes/characters\"\n   106→            \"scenes/levels\"\n   107→            \"scenes/objects\"\n   108→            \"scenes/ui\"\n   109→          )\n   110→\n   111→          errors=0\n   112→          for dir in \"${required_dirs[@]}\"; do\n   113→            if [ ! -d \"$dir\" ]; then\n   114→              echo \"::error::Required directory '$dir' not found\"\n   115→              errors=$((errors + 1))\n   116→            fi\n   117→          done\n   118→\n   119→          if [ \"$errors\" -gt 0 ]; then\n   120→            echo \"Found $errors missing required directories.\"\n   121→            exit 1\n   122→          fi\n   123→\n   124→          echo \"All required directories present.\"\n   125→\n   126→      - name: Check snake_case naming\n   127→        run: |\n   128→          echo \"Checking snake_case naming convention for GDScript files...\"\n   129→          errors=0\n   130→\n   131→          # Check GDScript files use snake_case (lowercase with underscores)\n   132→          while IFS= read -r file; do\n   133→            basename=$(basename \"$file\" .gd)\n   134→            # Check if filename contains uppercase letters\n   135→            if [[ \"$basename\" =~ [A-Z] ]]; then\n   136→              echo \"::error file=$file::GDScript filename should be snake_case (lowercase with underscores)\"\n   137→              errors=$((errors + 1))\n   138→            fi\n   139→          done < <(find scripts -name \"*.gd\" -type f 2>/dev/null)\n   140→\n   141→          if [ \"$errors\" -gt 0 ]; then\n   142→            echo \"Found $errors files with incorrect naming.\"\n   143→            exit 1\n   144→          fi\n   145→\n   146→          echo \"All GDScript files use snake_case naming.\"\n   147→\n   148→      - name: Check for direct singleton access patterns\n   149→        run: |\n   150→          echo \"Checking for potential tight coupling with autoloads...\"\n   151→          warnings=0\n   152→\n   153→          # Look for potential issues (direct global access without null check)\n   154→          while IFS= read -r file; do\n   155→            # Check for patterns that might indicate tight coupling\n   156→            # This is a soft warning, not an error\n   157→            if grep -qE \"^[^#]*\\b(GameManager|AudioManager|InputSettings)\\.[a-z]\" \"$file\"; then\n   158→              # Check if the same file has null checks\n   159→              if ! grep -qE \"get_node_or_null.*/(GameManager|AudioManager|InputSettings)\" \"$file\"; then\n   160→                echo \"::warning file=$file::Consider using get_node_or_null for autoload access to improve robustness\"\n   161→                warnings=$((warnings + 1))\n   162→              fi\n   163→            fi\n   164→          done < <(find scripts -name \"*.gd\" -type f 2>/dev/null)\n   165→\n   166→          echo \"Found $warnings potential coupling warnings (non-blocking).\"\n   167→\n   168→      - name: Summary\n   169→        run: |\n   170→          echo \"=== Architecture Check Complete ===\"\n   171→          echo \"\"\n   172→          echo \"Checks performed:\"\n   173→          echo \"  ✓ Script line counts (max 800, warn at 500)\"\n   174→          echo \"  ✓ class_name declarations for components\"\n   175→          echo \"  ✓ Required folder structure\"\n   176→          echo \"  ✓ snake_case naming convention\"\n   177→          echo \"  ✓ Autoload coupling patterns\"\n   178→          echo \"\"\n   179→          echo \"All critical checks passed!\"\n   180→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "7ad4041c-8a75-45e2-b390-68e6b4ca4925",
+  "tool_use_result": {
+    "type": "text",
+    "file": {
+      "filePath": "/tmp/gh-issue-solver-1769066205054/.github/workflows/architecture-check.yml",
+      "content": "name: Architecture Best Practices Check\n\non:\n  push:\n    branches: [ main, issue-* ]\n  pull_request:\n    branches: [ main ]\n  workflow_dispatch:\n\njobs:\n  architecture-check:\n    name: Check Architecture Best Practices\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n\n      - name: Check script line counts\n        id: line_counts\n        run: |\n          echo \"Checking GDScript file sizes...\"\n          # Current limits - these will be reduced as refactoring progresses\n          # Target: MAX_LINES=800, WARN_LINES=500\n          # Current: Higher limits to allow existing large scripts while encouraging refactoring\n          MAX_LINES=5000  # Will be reduced to 800 as refactoring progresses\n          WARN_LINES=800  # Warns for scripts that should be considered for refactoring\n          errors=0\n          warnings=0\n          large_scripts=0\n\n          # Find all GDScript files (excluding addons and tests)\n          while IFS= read -r file; do\n            lines=$(wc -l < \"$file\")\n            if [ \"$lines\" -gt \"$MAX_LINES\" ]; then\n              echo \"::error file=$file::Script exceeds $MAX_LINES lines ($lines lines). Refactoring required.\"\n              errors=$((errors + 1))\n            elif [ \"$lines\" -gt \"$WARN_LINES\" ]; then\n              echo \"::warning file=$file::Script has $lines lines (warning threshold: $WARN_LINES). Consider splitting into components using the patterns in scripts/components/.\"\n              warnings=$((warnings + 1))\n            fi\n            if [ \"$lines\" -gt 500 ]; then\n              large_scripts=$((large_scripts + 1))\n            fi\n          done < <(find scripts -name \"*.gd\" -type f 2>/dev/null)\n\n          echo \"errors=$errors\" >> $GITHUB_OUTPUT\n          echo \"warnings=$warnings\" >> $GITHUB_OUTPUT\n          echo \"large_scripts=$large_scripts\" >> $GITHUB_OUTPUT\n\n          if [ \"$errors\" -gt 0 ]; then\n            echo \"Found $errors script(s) exceeding line limit.\"\n            exit 1\n          fi\n\n          echo \"All scripts within size limits. ($warnings warnings, $large_scripts scripts over 500 lines)\"\n          echo \"\"\n          echo \"Note: Gradual refactoring is encouraged. See scripts/components/ for reusable component patterns.\"\n\n      - name: Check for class_name declarations\n        run: |\n          echo \"Checking component files have class_name...\"\n          errors=0\n\n          # Check components folder\n          if [ -d \"scripts/components\" ]; then\n            for file in scripts/components/*.gd; do\n              if [ -f \"$file\" ]; then\n                if ! grep -q \"^class_name\" \"$file\"; then\n                  echo \"::error file=$file::Component script missing class_name declaration\"\n                  errors=$((errors + 1))\n                fi\n              fi\n            done\n          fi\n\n          # Check AI states folder\n          if [ -d \"scripts/ai/states\" ]; then\n            for file in scripts/ai/states/*.gd; do\n              if [ -f \"$file\" ]; then\n                if ! grep -q \"^class_name\" \"$file\"; then\n                  echo \"::error file=$file::AI state script missing class_name declaration\"\n                  errors=$((errors + 1))\n                fi\n              fi\n            done\n          fi\n\n          if [ \"$errors\" -gt 0 ]; then\n            echo \"Found $errors files missing class_name declarations.\"\n            exit 1\n          fi\n\n          echo \"All component/state files have class_name declarations.\"\n\n      - name: Check folder structure\n        run: |\n          echo \"Checking project folder structure...\"\n          required_dirs=(\n            \"scripts/autoload\"\n            \"scripts/ai\"\n            \"scripts/characters\"\n            \"scripts/objects\"\n            \"scripts/ui\"\n            \"scenes/characters\"\n            \"scenes/levels\"\n            \"scenes/objects\"\n            \"scenes/ui\"\n          )\n\n          errors=0\n          for dir in \"${required_dirs[@]}\"; do\n            if [ ! -d \"$dir\" ]; then\n              echo \"::error::Required directory '$dir' not found\"\n              errors=$((errors + 1))\n            fi\n          done\n\n          if [ \"$errors\" -gt 0 ]; then\n            echo \"Found $errors missing required directories.\"\n            exit 1\n          fi\n\n          echo \"All required directories present.\"\n\n      - name: Check snake_case naming\n        run: |\n          echo \"Checking snake_case naming convention for GDScript files...\"\n          errors=0\n\n          # Check GDScript files use snake_case (lowercase with underscores)\n          while IFS= read -r file; do\n            basename=$(basename \"$file\" .gd)\n            # Check if filename contains uppercase letters\n            if [[ \"$basename\" =~ [A-Z] ]]; then\n              echo \"::error file=$file::GDScript filename should be snake_case (lowercase with underscores)\"\n              errors=$((errors + 1))\n            fi\n          done < <(find scripts -name \"*.gd\" -type f 2>/dev/null)\n\n          if [ \"$errors\" -gt 0 ]; then\n            echo \"Found $errors files with incorrect naming.\"\n            exit 1\n          fi\n\n          echo \"All GDScript files use snake_case naming.\"\n\n      - name: Check for direct singleton access patterns\n        run: |\n          echo \"Checking for potential tight coupling with autoloads...\"\n          warnings=0\n\n          # Look for potential issues (direct global access without null check)\n          while IFS= read -r file; do\n            # Check for patterns that might indicate tight coupling\n            # This is a soft warning, not an error\n            if grep -qE \"^[^#]*\\b(GameManager|AudioManager|InputSettings)\\.[a-z]\" \"$file\"; then\n              # Check if the same file has null checks\n              if ! grep -qE \"get_node_or_null.*/(GameManager|AudioManager|InputSettings)\" \"$file\"; then\n                echo \"::warning file=$file::Consider using get_node_or_null for autoload access to improve robustness\"\n                warnings=$((warnings + 1))\n              fi\n            fi\n          done < <(find scripts -name \"*.gd\" -type f 2>/dev/null)\n\n          echo \"Found $warnings potential coupling warnings (non-blocking).\"\n\n      - name: Summary\n        run: |\n          echo \"=== Architecture Check Complete ===\"\n          echo \"\"\n          echo \"Checks performed:\"\n          echo \"  ✓ Script line counts (max 800, warn at 500)\"\n          echo \"  ✓ class_name declarations for components\"\n          echo \"  ✓ Required folder structure\"\n          echo \"  ✓ snake_case naming convention\"\n          echo \"  ✓ Autoload coupling patterns\"\n          echo \"\"\n          echo \"All critical checks passed!\"\n",
+      "numLines": 180,
+      "startLine": 1,
+      "totalLines": 180
+    }
+  }
+}
+[2026-01-22T07:20:18.586Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01RsbC3Z25G3C2xSXURfhqHv",
+        "type": "tool_result",
+        "content": "     1→name: Run GUT Tests\n     2→\n     3→on:\n     4→  push:\n     5→    branches: [ main, issue-* ]\n     6→  pull_request:\n     7→    branches: [ main ]\n     8→  workflow_dispatch:\n     9→\n    10→jobs:\n    11→  test:\n    12→    name: Run Unit Tests\n    13→    runs-on: ubuntu-latest\n    14→\n    15→    steps:\n    16→      - name: Checkout\n    17→        uses: actions/checkout@v4\n    18→\n    19→      - name: Setup .NET\n    20→        uses: actions/setup-dotnet@v4\n    21→        with:\n    22→          dotnet-version: '8.0.x'\n    23→\n    24→      - name: Download Godot\n    25→        run: |\n    26→          wget -q https://github.com/godotengine/godot/releases/download/4.3-stable/Godot_v4.3-stable_mono_linux_x86_64.zip\n    27→          unzip -q Godot_v4.3-stable_mono_linux_x86_64.zip\n    28→          mv Godot_v4.3-stable_mono_linux_x86_64 godot\n    29→          chmod +x godot/Godot_v4.3-stable_mono_linux.x86_64\n    30→\n    31→      - name: Import project assets\n    32→        run: |\n    33→          # Run Godot to import resources (required before running tests)\n    34→          timeout 60 godot/Godot_v4.3-stable_mono_linux.x86_64 --headless --import . || true\n    35→\n    36→      - name: Run GUT tests\n    37→        run: |\n    38→          # Run tests using GUT command line\n    39→          godot/Godot_v4.3-stable_mono_linux.x86_64 --headless -s addons/gut/gut_cmdln.gd \\\n    40→            -gdir=res://tests/unit,res://tests/integration \\\n    41→            -ginclude_subdirs \\\n    42→            -gexit \\\n    43→            -glog=2 \\\n    44→            -gjunit_xml_file=test-results.xml 2>&1 | tee test-output.log\n    45→\n    46→          # Check for test failures in output\n    47→          if grep -q \"FAILED\" test-output.log; then\n    48→            echo \"Tests failed!\"\n    49→            exit 1\n    50→          fi\n    51→\n    52→      - name: Upload test results\n    53→        uses: actions/upload-artifact@v4\n    54→        if: always()\n    55→        with:\n    56→          name: test-results\n    57→          path: |\n    58→            test-results.xml\n    59→            test-output.log\n    60→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "853dd3b4-4470-42ed-95f0-722053595b52",
+  "tool_use_result": {
+    "type": "text",
+    "file": {
+      "filePath": "/tmp/gh-issue-solver-1769066205054/.github/workflows/test.yml",
+      "content": "name: Run GUT Tests\n\non:\n  push:\n    branches: [ main, issue-* ]\n  pull_request:\n    branches: [ main ]\n  workflow_dispatch:\n\njobs:\n  test:\n    name: Run Unit Tests\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n\n      - name: Setup .NET\n        uses: actions/setup-dotnet@v4\n        with:\n          dotnet-version: '8.0.x'\n\n      - name: Download Godot\n        run: |\n          wget -q https://github.com/godotengine/godot/releases/download/4.3-stable/Godot_v4.3-stable_mono_linux_x86_64.zip\n          unzip -q Godot_v4.3-stable_mono_linux_x86_64.zip\n          mv Godot_v4.3-stable_mono_linux_x86_64 godot\n          chmod +x godot/Godot_v4.3-stable_mono_linux.x86_64\n\n      - name: Import project assets\n        run: |\n          # Run Godot to import resources (required before running tests)\n          timeout 60 godot/Godot_v4.3-stable_mono_linux.x86_64 --headless --import . || true\n\n      - name: Run GUT tests\n        run: |\n          # Run tests using GUT command line\n          godot/Godot_v4.3-stable_mono_linux.x86_64 --headless -s addons/gut/gut_cmdln.gd \\\n            -gdir=res://tests/unit,res://tests/integration \\\n            -ginclude_subdirs \\\n            -gexit \\\n            -glog=2 \\\n            -gjunit_xml_file=test-results.xml 2>&1 | tee test-output.log\n\n          # Check for test failures in output\n          if grep -q \"FAILED\" test-output.log; then\n            echo \"Tests failed!\"\n            exit 1\n          fi\n\n      - name: Upload test results\n        uses: actions/upload-artifact@v4\n        if: always()\n        with:\n          name: test-results\n          path: |\n            test-results.xml\n            test-output.log\n",
+      "numLines": 60,
+      "startLine": 1,
+      "totalLines": 60
+    }
+  }
+}
+[2026-01-22T07:20:22.166Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_018AfdP1S4CtZZiQ7qFyjadw",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Good, the CI runs architecture checks and GUT tests. Since I'm adding sprites and modifying a .tscn file (no GDScript changes), the tests should still pass. Let me also check if there are any existing tests for Enemy:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 3384,
+      "cache_read_input_tokens": 40967,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 3384,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 2,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "6cc93a44-78a2-4ee6-ad42-cf899a98beff"
+}
+[2026-01-22T07:20:22.660Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_018AfdP1S4CtZZiQ7qFyjadw",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01XqjUxd5rhh8PpKtFb11ALY",
+        "name": "Glob",
+        "input": {
+          "pattern": "**/test_*.gd",
+          "path": "/tmp/gh-issue-solver-1769066205054/tests"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 3384,
+      "cache_read_input_tokens": 40967,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 3384,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 2,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "b5c87e3e-c8c6-4cbf-92c8-e8a36f43351d"
+}
+[2026-01-22T07:20:22.703Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01XqjUxd5rhh8PpKtFb11ALY",
+        "type": "tool_result",
+        "content": "/tmp/gh-issue-solver-1769066205054/tests/integration/test_enemy_death_bullet_passthrough.gd\n/tmp/gh-issue-solver-1769066205054/tests/integration/test_hit_effects_manager.gd\n/tmp/gh-issue-solver-1769066205054/tests/integration/test_bullet.gd\n/tmp/gh-issue-solver-1769066205054/tests/integration/test_hit_area.gd\n/tmp/gh-issue-solver-1769066205054/tests/integration/test_target.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_difficulty_manager.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_audio_manager.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_enemy_actions.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_enemy.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_pursuing_state.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_magazine_inventory.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_level_helpers.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_game_manager.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_input_settings.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_ricochet.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_file_logger.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_goap_action.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_impact_effects_manager.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_goap_planner.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_penetration.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_player.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_score_manager.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_screen_shake_manager.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_tutorial_level.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_ui_menus.gd\n/tmp/gh-issue-solver-1769066205054/tests/unit/test_sound_propagation.gd"
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "51fab39d-d953-4f80-8ce6-974881161b47",
+  "tool_use_result": {
+    "filenames": [
+      "/tmp/gh-issue-solver-1769066205054/tests/integration/test_enemy_death_bullet_passthrough.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/integration/test_hit_effects_manager.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/integration/test_bullet.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/integration/test_hit_area.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/integration/test_target.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_difficulty_manager.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_audio_manager.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_enemy_actions.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_enemy.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_pursuing_state.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_magazine_inventory.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_level_helpers.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_game_manager.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_input_settings.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_ricochet.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_file_logger.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_goap_action.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_impact_effects_manager.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_goap_planner.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_penetration.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_player.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_score_manager.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_screen_shake_manager.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_tutorial_level.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_ui_menus.gd",
+      "/tmp/gh-issue-solver-1769066205054/tests/unit/test_sound_propagation.gd"
+    ],
+    "durationMs": 14,
+    "numFiles": 26,
+    "truncated": false
+  }
+}
+[2026-01-22T07:20:25.517Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01JJ6iB4mWWpPvn662tgdU9F",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Let me check the enemy test file to understand if it loads the scene and might be affected by my changes:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 888,
+      "cache_read_input_tokens": 44351,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 888,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 3,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "4dc61f09-45ea-45d8-aaec-b8d45521a1d5"
+}
+[2026-01-22T07:20:25.942Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01JJ6iB4mWWpPvn662tgdU9F",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01WspTeViEiEfarzBJzsh8PD",
+        "name": "Read",
+        "input": {
+          "file_path": "/tmp/gh-issue-solver-1769066205054/tests/unit/test_enemy.gd"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 888,
+      "cache_read_input_tokens": 44351,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 888,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 3,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "36848b3b-bfb2-4b15-a465-eac91f17b535"
+}
+[2026-01-22T07:20:25.967Z] [INFO] {"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01WspTeViEiEfarzBJzsh8PD","type":"tool_result","content":"     1→extends GutTest\n     2→## Unit tests for Enemy object.\n     3→##\n     4→## Tests the enemy AI state machine, health system, ammo management,\n     5→## and tactical behavior logic.\n     6→\n     7→\n     8→# ============================================================================\n     9→# Mock Enemy Class for Testing Logic\n    10→# ============================================================================\n    11→\n    12→\n    13→class MockEnemy:\n    14→\t## AI States for tactical behavior (mirrors actual enum)\n    15→\tenum AIState {\n    16→\t\tIDLE,\n    17→\t\tCOMBAT,\n    18→\t\tSEEKING_COVER,\n    19→\t\tIN_COVER,\n    20→\t\tFLANKING,\n    21→\t\tSUPPRESSED,\n    22→\t\tRETREATING,\n    23→\t\tPURSUING,\n    24→\t\tASSAULT\n    25→\t}\n    26→\n    27→\t## Retreat behavior modes\n    28→\tenum RetreatMode {\n    29→\t\tFULL_HP,\n    30→\t\tONE_HIT,\n    31→\t\tMULTIPLE_HITS\n    32→\t}\n    33→\n    34→\t## Behavior modes\n    35→\tenum BehaviorMode {\n    36→\t\tPATROL,\n    37→\t\tGUARD\n    38→\t}\n    39→\n    40→\t## Configuration\n    41→\tvar behavior_mode: BehaviorMode = BehaviorMode.GUARD\n    42→\tvar move_speed: float = 220.0\n    43→\tvar combat_move_speed: float = 320.0\n    44→\tvar rotation_speed: float = 15.0\n    45→\tvar detection_range: float = 0.0\n    46→\tvar shoot_cooldown: float = 0.1\n    47→\tvar bullet_spawn_offset: float = 30.0\n    48→\tvar weapon_loudness: float = 1469.0\n    49→\tvar min_health: int = 2\n    50→\tvar max_health: int = 4\n    51→\tvar threat_sphere_radius: float = 100.0\n    52→\tvar suppression_cooldown: float = 2.0\n    53→\tvar threat_reaction_delay: float = 0.2\n    54→\tvar flank_angle: float = PI / 3.0\n    55→\tvar flank_distance: float = 200.0\n    56→\tvar enable_flanking: bool = true\n    57→\tvar enable_cover: bool = true\n    58→\tvar magazine_size: int = 30\n    59→\tvar total_magazines: int = 5\n    60→\tvar reload_time: float = 3.0\n    61→\tvar detection_delay: float = 0.2\n    62→\tvar lead_prediction_delay: float = 0.3\n    63→\tvar lead_prediction_visibility_threshold: float = 0.6\n    64→\tvar bullet_speed: float = 2500.0\n    65→\n    66→\t## State\n    67→\tvar _current_health: int = 0\n    68→\tvar _max_health: int = 0\n    69→\tvar _is_alive: bool = true\n    70→\tvar _current_state: AIState = AIState.IDLE\n    71→\tvar _can_see_player: bool = false\n    72→\tvar _under_fire: bool = false\n    73→\tvar _has_valid_cover: bool = false\n    74→\tvar _cover_position: Vector2 = Vector2.ZERO\n    75→\tvar _suppression_timer: float = 0.0\n    76→\tvar _shoot_timer: float = 0.0\n    77→\tvar _current_ammo: int = 0\n    78→\tvar _reserve_ammo: int = 0\n    79→\tvar _is_reloading: bool = false\n    80→\tvar _reload_timer: float = 0.0\n    81→\tvar _hits_taken: int = 0\n    82→\n    83→\t## Patrol state\n    84→\tvar _patrol_points: Array[Vector2] = []\n    85→\tvar _current_patrol_index: int = 0\n    86→\tvar _initial_position: Vector2 = Vector2.ZERO\n    87→\n    88→\t## Distraction threshold\n    89→\tconst PLAYER_DISTRACTION_ANGLE: float = 0.4014  # ~23 degrees\n    90→\n    91→\t## Callbacks for signals\n    92→\tvar on_hit: Callable\n    93→\tvar on_died: Callable\n    94→\tvar on_state_changed: Callable\n    95→\tvar on_ammo_changed: Callable\n    96→\tvar on_reload_started: Callable\n    97→\tvar on_reload_finished: Callable\n    98→\tvar on_ammo_depleted: Callable\n    99→\n   100→\n   101→\tfunc initialize() -> void:\n   102→\t\t_max_health = randi_range(min_health, max_health)\n   103→\t\t_current_health = _max_health\n   104→\t\t_current_ammo = magazine_size\n   105→\t\t_reserve_ammo = magazine_size * (total_magazines - 1)\n   106→\t\t_is_alive = true\n   107→\t\t_current_state = AIState.IDLE\n   108→\n   109→\n   110→\tfunc get_current_health() -> int:\n   111→\t\treturn _current_health\n   112→\n   113→\n   114→\tfunc get_max_health() -> int:\n   115→\t\treturn _max_health\n   116→\n   117→\n   118→\tfunc is_alive() -> bool:\n   119→\t\treturn _is_alive\n   120→\n   121→\n   122→\tfunc get_health_percent() -> float:\n   123→\t\tif _max_health <= 0:\n   124→\t\t\treturn 0.0\n   125→\t\treturn float(_current_health) / float(_max_health)\n   126→\n   127→\n   128→\tfunc get_current_state() -> AIState:\n   129→\t\treturn _current_state\n   130→\n   131→\n   132→\tfunc set_state(new_state: AIState) -> void:\n   133→\t\tif new_state != _current_state:\n   134→\t\t\t_current_state = new_state\n   135→\t\t\tif on_state_changed:\n   136→\t\t\t\ton_state_changed.call(new_state)\n   137→\n   138→\n   139→\tfunc on_bullet_hit() -> void:\n   140→\t\tif not _is_alive:\n   141→\t\t\treturn\n   142→\n   143→\t\t_current_health -= 1\n   144→\t\t_hits_taken += 1\n   145→\n   146→\t\tif on_hit:\n   147→\t\t\ton_hit.call()\n   148→\n   149→\t\tif _current_health <= 0:\n   150→\t\t\t_die()\n   151→\n   152→\n   153→\tfunc _die() -> void:\n   154→\t\t_is_alive = false\n   155→\t\tif on_died:\n   156→\t\t\ton_died.call()\n   157→\n   158→\n   159→\tfunc can_shoot() -> bool:\n   160→\t\treturn _is_alive and _current_ammo > 0 and not _is_reloading and _shoot_timer >= shoot_cooldown\n   161→\n   162→\n   163→\tfunc shoot() -> bool:\n   164→\t\tif not can_shoot():\n   165→\t\t\treturn false\n   166→\n   167→\t\t_current_ammo -= 1\n   168→\t\t_shoot_timer = 0.0\n   169→\n   170→\t\tif on_ammo_changed:\n   171→\t\t\ton_ammo_changed.call(_current_ammo, _reserve_ammo)\n   172→\n   173→\t\treturn true\n   174→\n   175→\n   176→\tfunc update_shoot_timer(delta: float) -> void:\n   177→\t\t_shoot_timer += delta\n   178→\n   179→\n   180→\tfunc needs_reload() -> bool:\n   181→\t\treturn _current_ammo <= 0 and _reserve_ammo > 0\n   182→\n   183→\n   184→\tfunc start_reload() -> void:\n   185→\t\tif _is_reloading or _reserve_ammo <= 0:\n   186→\t\t\treturn\n   187→\t\t_is_reloading = true\n   188→\t\t_reload_timer = 0.0\n   189→\t\tif on_reload_started:\n   190→\t\t\ton_reload_started.call()\n   191→\n   192→\n   193→\tfunc update_reload(delta: float) -> void:\n   194→\t\tif not _is_reloading:\n   195→\t\t\treturn\n   196→\t\t_reload_timer += delta\n   197→\t\tif _reload_timer >= reload_time:\n   198→\t\t\t_complete_reload()\n   199→\n   200→\n   201→\tfunc _complete_reload() -> void:\n   202→\t\tvar ammo_needed := magazine_size - _current_ammo\n   203→\t\tvar ammo_to_load := mini(ammo_needed, _reserve_ammo)\n   204→\t\t_reserve_ammo -= ammo_to_load\n   205→\t\t_current_ammo += ammo_to_load\n   206→\t\t_is_reloading = false\n   207→\t\t_reload_timer = 0.0\n   208→\n   209→\t\tif on_reload_finished:\n   210→\t\t\ton_reload_finished.call()\n   211→\t\tif on_ammo_changed:\n   212→\t\t\ton_ammo_changed.call(_current_ammo, _reserve_ammo)\n   213→\n   214→\n   215→\tfunc is_reloading() -> bool:\n   216→\t\treturn _is_reloading\n   217→\n   218→\n   219→\tfunc get_current_ammo() -> int:\n   220→\t\treturn _current_ammo\n   221→\n   222→\n   223→\tfunc get_reserve_ammo() -> int:\n   224→\t\treturn _reserve_ammo\n   225→\n   226→\n   227→\tfunc has_ammo() -> bool:\n   228→\t\treturn _current_ammo > 0 or _reserve_ammo > 0\n   229→\n   230→\n   231→\tfunc get_retreat_mode() -> RetreatMode:\n   232→\t\tif _hits_taken == 0:\n   233→\t\t\treturn RetreatMode.FULL_HP\n   234→\t\telif _hits_taken == 1:\n   235→\t\t\treturn RetreatMode.ONE_HIT\n   236→\t\telse:\n   237→\t\t\treturn RetreatMode.MULTIPLE_HITS\n   238→\n   239→\n   240→\tfunc should_seek_cover() -> bool:\n   241→\t\treturn enable_cover and _under_fire and not _has_valid_cover\n   242→\n   243→\n   244→\tfunc should_flank() -> bool:\n   245→\t\treturn enable_flanking and _can_see_player and not _under_fire\n   246→\n   247→\n   248→\tfunc set_under_fire(value: bool) -> void:\n   249→\t\t_under_fire = value\n   250→\n   251→\n   252→\tfunc set_can_see_player(value: bool) -> void:\n   253→\t\t_can_see_player = value\n   254→\n   255→\n   256→\tfunc update_suppression(delta: float) -> void:\n   257→\t\tif _under_fire:\n   258→\t\t\t_suppression_timer = suppression_cooldown\n   259→\t\telse:\n   260→\t\t\t_suppression_timer -= delta\n   261→\t\t\tif _suppression_timer < 0:\n   262→\t\t\t\t_suppression_timer = 0\n   263→\n   264→\n   265→\tfunc is_suppressed() -> bool:\n   266→\t\treturn _suppression_timer > 0\n   267→\n   268→\n   269→\tfunc calculate_lead_position(target_pos: Vector2, target_velocity: Vector2, own_pos: Vector2) -> Vector2:\n   270→\t\tif target_velocity == Vector2.ZERO:\n   271→\t\t\treturn target_pos\n   272→\n   273→\t\tvar distance := own_pos.distance_to(target_pos)\n   274→\t\tvar time_to_hit := distance / bullet_speed\n   275→\t\treturn target_pos + target_velocity * time_to_hit\n   276→\n   277→\n   278→\tfunc is_player_distracted(player_rotation: float, enemy_position: Vector2, player_position: Vector2) -> bool:\n   279→\t\tvar to_enemy := (enemy_position - player_position).normalized()\n   280→\t\tvar player_facing := Vector2.RIGHT.rotated(player_rotation)\n   281→\t\tvar angle_diff := abs(to_enemy.angle_to(player_facing))\n   282→\t\treturn angle_diff > PLAYER_DISTRACTION_ANGLE\n   283→\n   284→\n   285→\tfunc setup_patrol(initial_pos: Vector2, offsets: Array[Vector2]) -> void:\n   286→\t\t_initial_position = initial_pos\n   287→\t\t_patrol_points.clear()\n   288→\t\tfor offset in offsets:\n   289→\t\t\t_patrol_points.append(initial_pos + offset)\n   290→\n   291→\n   292→\tfunc get_next_patrol_point() -> Vector2:\n   293→\t\tif _patrol_points.is_empty():\n   294→\t\t\treturn _initial_position\n   295→\t\t_current_patrol_index = (_current_patrol_index + 1) % _patrol_points.size()\n   296→\t\treturn _patrol_points[_current_patrol_index]\n   297→\n   298→\n   299→var enemy: MockEnemy\n   300→\n   301→\n   302→func before_each() -> void:\n   303→\tenemy = MockEnemy.new()\n   304→\tseed(12345)  # Fixed seed for reproducibility\n   305→\tenemy.initialize()\n   306→\n   307→\n   308→func after_each() -> void:\n   309→\tenemy = null\n   310→\n   311→\n   312→# ============================================================================\n   313→# Initial State Tests\n   314→# ============================================================================\n   315→\n   316→\n   317→func test_initial_state_is_idle() -> void:\n   318→\tassert_eq(enemy.get_current_state(), MockEnemy.AIState.IDLE,\n   319→\t\t\"Enemy should start in IDLE state\")\n   320→\n   321→\n   322→func test_initial_health_within_range() -> void:\n   323→\tvar health := enemy.get_current_health()\n   324→\tassert_true(health >= enemy.min_health and health <= enemy.max_health,\n   325→\t\t\"Initial health should be within configured range\")\n   326→\n   327→\n   328→func test_initial_health_equals_max() -> void:\n   329→\tassert_eq(enemy.get_current_health(), enemy.get_max_health(),\n   330→\t\t\"Current health should equal max health initially\")\n   331→\n   332→\n   333→func test_enemy_starts_alive() -> void:\n   334→\tassert_true(enemy.is_alive(), \"Enemy should start alive\")\n   335→\n   336→\n   337→func test_initial_ammo_equals_magazine_size() -> void:\n   338→\tassert_eq(enemy.get_current_ammo(), enemy.magazine_size,\n   339→\t\t\"Initial ammo should equal magazine size\")\n   340→\n   341→\n   342→func test_initial_reserve_ammo() -> void:\n   343→\tvar expected := enemy.magazine_size * (enemy.total_magazines - 1)\n   344→\tassert_eq(enemy.get_reserve_ammo(), expected,\n   345→\t\t\"Reserve ammo should be (total_magazines - 1) * magazine_size\")\n   346→\n   347→\n   348→func test_not_reloading_initially() -> void:\n   349→\tassert_false(enemy.is_reloading(), \"Enemy should not be reloading initially\")\n   350→\n   351→\n   352→# ============================================================================\n   353→# Health Tests\n   354→# ============================================================================\n   355→\n   356→\n   357→func test_hit_decreases_health() -> void:\n   358→\tvar initial := enemy.get_current_health()\n   359→\tenemy.on_bullet_hit()\n   360→\n   361→\tassert_eq(enemy.get_current_health(), initial - 1, \"Hit should decrease health by 1\")\n   362→\n   363→\n   364→func test_enemy_dies_at_zero_health() -> void:\n   365→\tvar hits_to_kill := enemy.get_current_health()\n   366→\tfor i in range(hits_to_kill):\n   367→\t\tenemy.on_bullet_hit()\n   368→\n   369→\tassert_false(enemy.is_alive(), \"Enemy should die when health reaches 0\")\n   370→\n   371→\n   372→func test_hit_callback_called() -> void:\n   373→\tvar hit_called := false\n   374→\tenemy.on_hit = func(): hit_called = true\n   375→\n   376→\tenemy.on_bullet_hit()\n   377→\n   378→\tassert_true(hit_called, \"Hit callback should be called\")\n   379→\n   380→\n   381→func test_died_callback_called() -> void:\n   382→\tvar died_called := false\n   383→\tenemy.on_died = func(): died_called = true\n   384→\n   385→\tvar hits := enemy.get_current_health()\n   386→\tfor i in range(hits):\n   387→\t\tenemy.on_bullet_hit()\n   388→\n   389→\tassert_true(died_called, \"Died callback should be called\")\n   390→\n   391→\n   392→func test_dead_enemy_cannot_be_hit_again() -> void:\n   393→\t# Kill the enemy\n   394→\tvar hits := enemy.get_current_health()\n   395→\tfor i in range(hits):\n   396→\t\tenemy.on_bullet_hit()\n   397→\n   398→\t# Try to hit again\n   399→\tenemy.on_bullet_hit()\n   400→\n   401→\tassert_eq(enemy.get_current_health(), 0, \"Dead enemy health should stay at 0\")\n   402→\n   403→\n   404→func test_health_percent_full() -> void:\n   405→\tassert_eq(enemy.get_health_percent(), 1.0, \"Full health should be 100%\")\n   406→\n   407→\n   408→func test_health_percent_half() -> void:\n   409→\tvar half := enemy.get_max_health() / 2\n   410→\tenemy._current_health = half\n   411→\tvar expected := float(half) / float(enemy.get_max_health())\n   412→\n   413→\tassert_almost_eq(enemy.get_health_percent(), expected, 0.001)\n   414→\n   415→\n   416→# ============================================================================\n   417→# AI State Tests\n   418→# ============================================================================\n   419→\n   420→\n   421→func test_state_change_emits_signal() -> void:\n   422→\tvar new_state_received: int = -1\n   423→\tenemy.on_state_changed = func(s): new_state_received = s\n   424→\n   425→\tenemy.set_state(MockEnemy.AIState.COMBAT)\n   426→\n   427→\tassert_eq(new_state_received, MockEnemy.AIState.COMBAT,\n   428→\t\t\"State changed signal should pass new state\")\n   429→\n   430→\n   431→func test_state_change_same_state_no_signal() -> void:\n   432→\tvar signal_called := false\n   433→\tenemy.on_state_changed = func(_s): signal_called = true\n   434→\n   435→\tenemy.set_state(MockEnemy.AIState.IDLE)  # Already IDLE\n   436→\n   437→\tassert_false(signal_called, \"Signal should not be called for same state\")\n   438→\n   439→\n   440→func test_all_states_can_be_set() -> void:\n   441→\tvar states := [\n   442→\t\tMockEnemy.AIState.IDLE,\n   443→\t\tMockEnemy.AIState.COMBAT,\n   444→\t\tMockEnemy.AIState.SEEKING_COVER,\n   445→\t\tMockEnemy.AIState.IN_COVER,\n   446→\t\tMockEnemy.AIState.FLANKING,\n   447→\t\tMockEnemy.AIState.SUPPRESSED,\n   448→\t\tMockEnemy.AIState.RETREATING,\n   449→\t\tMockEnemy.AIState.PURSUING,\n   450→\t\tMockEnemy.AIState.ASSAULT\n   451→\t]\n   452→\n   453→\tfor state in states:\n   454→\t\tenemy.set_state(state)\n   455→\t\tassert_eq(enemy.get_current_state(), state, \"Should be able to set state %d\" % state)\n   456→\n   457→\n   458→# ============================================================================\n   459→# Ammo and Shooting Tests\n   460→# ============================================================================\n   461→\n   462→\n   463→func test_can_shoot_with_ammo_and_cooldown() -> void:\n   464→\tenemy._shoot_timer = enemy.shoot_cooldown  # Cooldown ready\n   465→\n   466→\tassert_true(enemy.can_shoot(), \"Should be able to shoot with ammo and cooldown ready\")\n   467→\n   468→\n   469→func test_cannot_shoot_without_cooldown() -> void:\n   470→\tenemy._shoot_timer = 0.0  # Cooldown not ready\n   471→\n   472→\tassert_false(enemy.can_shoot(), \"Should not be able to shoot during cooldown\")\n   473→\n   474→\n   475→func test_cannot_shoot_without_ammo() -> void:\n   476→\tenemy._current_ammo = 0\n   477→\tenemy._shoot_timer = enemy.shoot_cooldown\n   478→\n   479→\tassert_false(enemy.can_shoot(), \"Should not be able to shoot without ammo\")\n   480→\n   481→\n   482→func test_cannot_shoot_while_reloading() -> void:\n   483→\tenemy._is_reloading = true\n   484→\tenemy._shoot_timer = enemy.shoot_cooldown\n   485→\n   486→\tassert_false(enemy.can_shoot(), \"Should not be able to shoot while reloading\")\n   487→\n   488→\n   489→func test_shooting_decreases_ammo() -> void:\n   490→\tenemy._shoot_timer = enemy.shoot_cooldown\n   491→\tvar initial := enemy.get_current_ammo()\n   492→\n   493→\tenemy.shoot()\n   494→\n   495→\tassert_eq(enemy.get_current_ammo(), initial - 1, \"Shooting should decrease ammo\")\n   496→\n   497→\n   498→func test_shooting_resets_timer() -> void:\n   499→\tenemy._shoot_timer = enemy.shoot_cooldown\n   500→\tenemy.shoot()\n   501→\n   502→\tassert_eq(enemy._shoot_timer, 0.0, \"Shooting should reset timer\")\n   503→\n   504→\n   505→func test_shoot_timer_updates() -> void:\n   506→\tenemy._shoot_timer = 0.0\n   507→\tenemy.update_shoot_timer(0.05)\n   508→\n   509→\tassert_eq(enemy._shoot_timer, 0.05, \"Timer should update by delta\")\n   510→\n   511→\n   512→# ============================================================================\n   513→# Reload Tests\n   514→# ============================================================================\n   515→\n   516→\n   517→func test_needs_reload_when_empty_with_reserve() -> void:\n   518→\tenemy._current_ammo = 0\n   519→\n   520→\tassert_true(enemy.needs_reload(), \"S
+[2026-01-22T07:20:25.973Z] [INFO] hould need reload when empty with reserve\")\n   521→\n   522→\n   523→func test_no_reload_needed_with_ammo() -> void:\n   524→\tassert_false(enemy.needs_reload(), \"Should not need reload with ammo\")\n   525→\n   526→\n   527→func test_no_reload_needed_without_reserve() -> void:\n   528→\tenemy._current_ammo = 0\n   529→\tenemy._reserve_ammo = 0\n   530→\n   531→\tassert_false(enemy.needs_reload(), \"Should not need reload without reserve\")\n   532→\n   533→\n   534→func test_start_reload_sets_reloading() -> void:\n   535→\tenemy._current_ammo = 0\n   536→\tenemy.start_reload()\n   537→\n   538→\tassert_true(enemy.is_reloading(), \"Should be reloading after start_reload\")\n   539→\n   540→\n   541→func test_reload_callback_called() -> void:\n   542→\tvar started := false\n   543→\tenemy.on_reload_started = func(): started = true\n   544→\n   545→\tenemy._current_ammo = 0\n   546→\tenemy.start_reload()\n   547→\n   548→\tassert_true(started, \"Reload started callback should be called\")\n   549→\n   550→\n   551→func test_reload_completes_after_time() -> void:\n   552→\tenemy._current_ammo = 0\n   553→\tenemy.start_reload()\n   554→\tenemy.update_reload(enemy.reload_time + 0.1)\n   555→\n   556→\tassert_false(enemy.is_reloading(), \"Should not be reloading after reload time\")\n   557→\n   558→\n   559→func test_reload_refills_ammo() -> void:\n   560→\tenemy._current_ammo = 0\n   561→\tvar initial_reserve := enemy.get_reserve_ammo()\n   562→\tenemy.start_reload()\n   563→\tenemy.update_reload(enemy.reload_time + 0.1)\n   564→\n   565→\tassert_eq(enemy.get_current_ammo(), enemy.magazine_size,\n   566→\t\t\"Ammo should be refilled after reload\")\n   567→\tassert_eq(enemy.get_reserve_ammo(), initial_reserve - enemy.magazine_size,\n   568→\t\t\"Reserve should decrease by magazine size\")\n   569→\n   570→\n   571→func test_cannot_start_reload_when_reloading() -> void:\n   572→\tenemy._current_ammo = 0\n   573→\tenemy.start_reload()\n   574→\tenemy.start_reload()  # Try again\n   575→\n   576→\t# Should still have same reload state (not restarted)\n   577→\tassert_true(enemy.is_reloading())\n   578→\n   579→\n   580→func test_has_ammo_with_current() -> void:\n   581→\tassert_true(enemy.has_ammo(), \"Should have ammo with current ammo\")\n   582→\n   583→\n   584→func test_has_ammo_with_only_reserve() -> void:\n   585→\tenemy._current_ammo = 0\n   586→\n   587→\tassert_true(enemy.has_ammo(), \"Should have ammo with reserve only\")\n   588→\n   589→\n   590→func test_no_ammo_when_both_empty() -> void:\n   591→\tenemy._current_ammo = 0\n   592→\tenemy._reserve_ammo = 0\n   593→\n   594→\tassert_false(enemy.has_ammo(), \"Should not have ammo when both empty\")\n   595→\n   596→\n   597→# ============================================================================\n   598→# Retreat Mode Tests\n   599→# ============================================================================\n   600→\n   601→\n   602→func test_retreat_mode_full_hp() -> void:\n   603→\tassert_eq(enemy.get_retreat_mode(), MockEnemy.RetreatMode.FULL_HP,\n   604→\t\t\"Should be FULL_HP retreat mode with no damage\")\n   605→\n   606→\n   607→func test_retreat_mode_one_hit() -> void:\n   608→\tenemy.on_bullet_hit()\n   609→\n   610→\tassert_eq(enemy.get_retreat_mode(), MockEnemy.RetreatMode.ONE_HIT,\n   611→\t\t\"Should be ONE_HIT retreat mode after one hit\")\n   612→\n   613→\n   614→func test_retreat_mode_multiple_hits() -> void:\n   615→\tenemy.on_bullet_hit()\n   616→\tenemy.on_bullet_hit()\n   617→\n   618→\tassert_eq(enemy.get_retreat_mode(), MockEnemy.RetreatMode.MULTIPLE_HITS,\n   619→\t\t\"Should be MULTIPLE_HITS retreat mode after multiple hits\")\n   620→\n   621→\n   622→# ============================================================================\n   623→# Cover and Flanking Tests\n   624→# ============================================================================\n   625→\n   626→\n   627→func test_should_seek_cover_when_under_fire() -> void:\n   628→\tenemy.enable_cover = true\n   629→\tenemy._under_fire = true\n   630→\tenemy._has_valid_cover = false\n   631→\n   632→\tassert_true(enemy.should_seek_cover(), \"Should seek cover when under fire\")\n   633→\n   634→\n   635→func test_should_not_seek_cover_when_has_cover() -> void:\n   636→\tenemy.enable_cover = true\n   637→\tenemy._under_fire = true\n   638→\tenemy._has_valid_cover = true\n   639→\n   640→\tassert_false(enemy.should_seek_cover(), \"Should not seek cover when already has cover\")\n   641→\n   642→\n   643→func test_should_not_seek_cover_when_disabled() -> void:\n   644→\tenemy.enable_cover = false\n   645→\tenemy._under_fire = true\n   646→\n   647→\tassert_false(enemy.should_seek_cover(), \"Should not seek cover when disabled\")\n   648→\n   649→\n   650→func test_should_flank_when_see_player() -> void:\n   651→\tenemy.enable_flanking = true\n   652→\tenemy._can_see_player = true\n   653→\tenemy._under_fire = false\n   654→\n   655→\tassert_true(enemy.should_flank(), \"Should flank when can see player\")\n   656→\n   657→\n   658→func test_should_not_flank_under_fire() -> void:\n   659→\tenemy.enable_flanking = true\n   660→\tenemy._can_see_player = true\n   661→\tenemy._under_fire = true\n   662→\n   663→\tassert_false(enemy.should_flank(), \"Should not flank when under fire\")\n   664→\n   665→\n   666→func test_should_not_flank_when_disabled() -> void:\n   667→\tenemy.enable_flanking = false\n   668→\tenemy._can_see_player = true\n   669→\n   670→\tassert_false(enemy.should_flank(), \"Should not flank when disabled\")\n   671→\n   672→\n   673→# ============================================================================\n   674→# Suppression Tests\n   675→# ============================================================================\n   676→\n   677→\n   678→func test_suppressed_when_under_fire() -> void:\n   679→\tenemy.set_under_fire(true)\n   680→\tenemy.update_suppression(0.0)\n   681→\n   682→\tassert_true(enemy.is_suppressed(), \"Should be suppressed when under fire\")\n   683→\n   684→\n   685→func test_suppression_decreases_over_time() -> void:\n   686→\tenemy._suppression_timer = 2.0\n   687→\tenemy._under_fire = false\n   688→\tenemy.update_suppression(1.0)\n   689→\n   690→\tassert_eq(enemy._suppression_timer, 1.0, \"Suppression timer should decrease\")\n   691→\n   692→\n   693→func test_suppression_resets_when_under_fire() -> void:\n   694→\tenemy._suppression_timer = 0.5\n   695→\tenemy.set_under_fire(true)\n   696→\tenemy.update_suppression(0.0)\n   697→\n   698→\tassert_eq(enemy._suppression_timer, enemy.suppression_cooldown,\n   699→\t\t\"Suppression should reset to full when under fire\")\n   700→\n   701→\n   702→# ============================================================================\n   703→# Lead Prediction Tests\n   704→# ============================================================================\n   705→\n   706→\n   707→func test_lead_prediction_stationary_target() -> void:\n   708→\tvar target_pos := Vector2(500, 0)\n   709→\tvar target_vel := Vector2.ZERO\n   710→\tvar own_pos := Vector2.ZERO\n   711→\n   712→\tvar result := enemy.calculate_lead_position(target_pos, target_vel, own_pos)\n   713→\n   714→\tassert_eq(result, target_pos, \"Stationary target should not need prediction\")\n   715→\n   716→\n   717→func test_lead_prediction_moving_target() -> void:\n   718→\tvar target_pos := Vector2(500, 0)\n   719→\tvar target_vel := Vector2(100, 0)  # Moving right\n   720→\tvar own_pos := Vector2.ZERO\n   721→\n   722→\tvar result := enemy.calculate_lead_position(target_pos, target_vel, own_pos)\n   723→\n   724→\tassert_true(result.x > target_pos.x, \"Lead position should be ahead of moving target\")\n   725→\n   726→\n   727→# ============================================================================\n   728→# Distraction Detection Tests\n   729→# ============================================================================\n   730→\n   731→\n   732→func test_player_distracted_when_looking_away() -> void:\n   733→\tvar player_rotation := 0.0  # Facing right\n   734→\tvar enemy_position := Vector2(0, 100)  # Enemy is below\n   735→\tvar player_position := Vector2.ZERO\n   736→\n   737→\tassert_true(enemy.is_player_distracted(player_rotation, enemy_position, player_position),\n   738→\t\t\"Player should be distracted when looking away from enemy\")\n   739→\n   740→\n   741→func test_player_not_distracted_when_facing() -> void:\n   742→\tvar player_rotation := PI / 2  # Facing down\n   743→\tvar enemy_position := Vector2(0, 100)  # Enemy is below\n   744→\tvar player_position := Vector2.ZERO\n   745→\n   746→\tassert_false(enemy.is_player_distracted(player_rotation, enemy_position, player_position),\n   747→\t\t\"Player should not be distracted when facing enemy\")\n   748→\n   749→\n   750→# ============================================================================\n   751→# Patrol Tests\n   752→# ============================================================================\n   753→\n   754→\n   755→func test_setup_patrol_creates_points() -> void:\n   756→\tvar initial := Vector2(100, 100)\n   757→\tvar offsets: Array[Vector2] = [Vector2(50, 0), Vector2(-50, 0)]\n   758→\tenemy.setup_patrol(initial, offsets)\n   759→\n   760→\tassert_eq(enemy._patrol_points.size(), 2, \"Should have 2 patrol points\")\n   761→\tassert_eq(enemy._patrol_points[0], Vector2(150, 100), \"First patrol point incorrect\")\n   762→\tassert_eq(enemy._patrol_points[1], Vector2(50, 100), \"Second patrol point incorrect\")\n   763→\n   764→\n   765→func test_get_next_patrol_point_cycles() -> void:\n   766→\tvar initial := Vector2.ZERO\n   767→\tvar offsets: Array[Vector2] = [Vector2(100, 0), Vector2(-100, 0)]\n   768→\tenemy.setup_patrol(initial, offsets)\n   769→\n   770→\tvar first := enemy.get_next_patrol_point()\n   771→\tvar second := enemy.get_next_patrol_point()\n   772→\tvar third := enemy.get_next_patrol_point()  # Should cycle back\n   773→\n   774→\tassert_eq(first, Vector2(-100, 0), \"First call should go to second point\")\n   775→\tassert_eq(second, Vector2(100, 0), \"Second call should go to first point\")\n   776→\tassert_eq(third, Vector2(-100, 0), \"Third call should cycle back\")\n   777→\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"parent_tool_use_id":null,"session_id":"19778b76-aaef-4c8b-ab74-908a92670320","uuid":"3194e810-e9e1-4057-b880-1f9412101701","tool_use_result":{"type":"text","file":{"filePath":"/tmp/gh-issue-solver-1769066205054/tests/unit/test_enemy.gd","content":"extends GutTest\n## Unit tests for Enemy object.\n##\n## Tests the enemy AI state machine, health system, ammo management,\n## and tactical behavior logic.\n\n\n# ============================================================================\n# Mock Enemy Class for Testing Logic\n# ============================================================================\n\n\nclass MockEnemy:\n\t## AI States for tactical behavior (mirrors actual enum)\n\tenum AIState {\n\t\tIDLE,\n\t\tCOMBAT,\n\t\tSEEKING_COVER,\n\t\tIN_COVER,\n\t\tFLANKING,\n\t\tSUPPRESSED,\n\t\tRETREATING,\n\t\tPURSUING,\n\t\tASSAULT\n\t}\n\n\t## Retreat behavior modes\n\tenum RetreatMode {\n\t\tFULL_HP,\n\t\tONE_HIT,\n\t\tMULTIPLE_HITS\n\t}\n\n\t## Behavior modes\n\tenum BehaviorMode {\n\t\tPATROL,\n\t\tGUARD\n\t}\n\n\t## Configuration\n\tvar behavior_mode: BehaviorMode = BehaviorMode.GUARD\n\tvar move_speed: float = 220.0\n\tvar combat_move_speed: float = 320.0\n\tvar rotation_speed: float = 15.0\n\tvar detection_range: float = 0.0\n\tvar shoot_cooldown: float = 0.1\n\tvar bullet_spawn_offset: float = 30.0\n\tvar weapon_loudness: float = 1469.0\n\tvar min_health: int = 2\n\tvar max_health: int = 4\n\tvar threat_sphere_radius: float = 100.0\n\tvar suppression_cooldown: float = 2.0\n\tvar threat_reaction_delay: float = 0.2\n\tvar flank_angle: float = PI / 3.0\n\tvar flank_distance: float = 200.0\n\tvar enable_flanking: bool = true\n\tvar enable_cover: bool = true\n\tvar magazine_size: int = 30\n\tvar total_magazines: int = 5\n\tvar reload_time: float = 3.0\n\tvar detection_delay: float = 0.2\n\tvar lead_prediction_delay: float = 0.3\n\tvar lead_prediction_visibility_threshold: float = 0.6\n\tvar bullet_speed: float = 2500.0\n\n\t## State\n\tvar _current_health: int = 0\n\tvar _max_health: int = 0\n\tvar _is_alive: bool = true\n\tvar _current_state: AIState = AIState.IDLE\n\tvar _can_see_player: bool = false\n\tvar _under_fire: bool = false\n\tvar _has_valid_cover: bool = false\n\tvar _cover_position: Vector2 = Vector2.ZERO\n\tvar _suppression_timer: float = 0.0\n\tvar _shoot_timer: float = 0.0\n\tvar _current_ammo: int = 0\n\tvar _reserve_ammo: int = 0\n\tvar _is_reloading: bool = false\n\tvar _reload_timer: float = 0.0\n\tvar _hits_taken: int = 0\n\n\t## Patrol state\n\tvar _patrol_points: Array[Vector2] = []\n\tvar _current_patrol_index: int = 0\n\tvar _initial_position: Vector2 = Vector2.ZERO\n\n\t## Distraction threshold\n\tconst PLAYER_DISTRACTION_ANGLE: float = 0.4014  # ~23 degrees\n\n\t## Callbacks for signals\n\tvar on_hit: Callable\n\tvar on_died: Callable\n\tvar on_state_changed: Callable\n\tvar on_ammo_changed: Callable\n\tvar on_reload_started: Callable\n\tvar on_reload_finished: Callable\n\tvar on_ammo_depleted: Callable\n\n\n\tfunc initialize() -> void:\n\t\t_max_health = randi_range(min_health, max_health)\n\t\t_current_health = _max_health\n\t\t_current_ammo = magazine_size\n\t\t_reserve_ammo = magazine_size * (total_magazines - 1)\n\t\t_is_alive = true\n\t\t_current_state = AIState.IDLE\n\n\n\tfunc get_current_health() -> int:\n\t\treturn _current_health\n\n\n\tfunc get_max_health() -> int:\n\t\treturn _max_health\n\n\n\tfunc is_alive() -> bool:\n\t\treturn _is_alive\n\n\n\tfunc get_health_percent() -> float:\n\t\tif _max_health <= 0:\n\t\t\treturn 0.0\n\t\treturn float(_current_health) / float(_max_health)\n\n\n\tfunc get_current_state() -> AIState:\n\t\treturn _current_state\n\n\n\tfunc set_state(new_state: AIState) -> void:\n\t\tif new_state != _current_state:\n\t\t\t_current_state = new_state\n\t\t\tif on_state_changed:\n\t\t\t\ton_state_changed.call(new_state)\n\n\n\tfunc on_bullet_hit() -> void:\n\t\tif not _is_alive:\n\t\t\treturn\n\n\t\t_current_health -= 1\n\t\t_hits_taken += 1\n\n\t\tif on_hit:\n\t\t\ton_hit.call()\n\n\t\tif _current_health <= 0:\n\t\t\t_die()\n\n\n\tfunc _die() -> void:\n\t\t_is_alive = false\n\t\tif on_died:\n\t\t\ton_died.call()\n\n\n\tfunc can_shoot() -> bool:\n\t\treturn _is_alive and _current_ammo > 0 and not _is_reloading and _shoot_timer >= shoot_cooldown\n\n\n\tfunc shoot() -> bool:\n\t\tif not can_shoot():\n\t\t\treturn false\n\n\t\t_current_ammo -= 1\n\t\t_shoot_timer = 0.0\n\n\t\tif on_ammo_changed:\n\t\t\ton_ammo_changed.call(_current_ammo, _reserve_ammo)\n\n\t\treturn true\n\n\n\tfunc update_shoot_timer(delta: float) -> void:\n\t\t_shoot_timer += delta\n\n\n\tfunc needs_reload() -> bool:\n\t\treturn _current_ammo <= 0 and _reserve_ammo > 0\n\n\n\tfunc start_reload() -> void:\n\t\tif _is_reloading or _reserve_ammo <= 0:\n\t\t\treturn\n\t\t_is_reloading = true\n\t\t_reload_timer = 0.0\n\t\tif on_reload_started:\n\t\t\ton_reload_started.call()\n\n\n\tfunc update_reload(delta: float) -> void:\n\t\tif not _is_reloading:\n\t\t\treturn\n\t\t_reload_timer += delta\n\t\tif _reload_timer >= reload_time:\n\t\t\t_complete_reload()\n\n\n\tfunc _complete_reload() -> void:\n\t\tvar ammo_needed := magazine_size - _current_ammo\n\t\tvar ammo_to_load := mini(ammo_needed, _reserve_ammo)\n\t\t_reserve_ammo -= ammo_to_load\n\t\t_current_ammo += ammo_to_load\n\t\t_is_reloading = false\n\t\t_reload_timer = 0.0\n\n\t\tif on_reload_finished:\n\t\t\ton_reload_finished.call()\n\t\tif on_ammo_changed:\n\t\t\ton_ammo_changed.call(_current_ammo, _reserve_ammo)\n\n\n\tfunc is_reloading() -> bool:\n\t\treturn _is_reloading\n\n\n\tfunc get_current_ammo() -> int:\n\t\treturn _current_ammo\n\n\n\tfunc get_reserve_ammo() -> int:\n\t\treturn _reserve_ammo\n\n\n\tfunc has_ammo() -> bool:\n\t\treturn _current_ammo > 0 or _reserve_ammo > 0\n\n\n\tfunc get_retreat_mode() -> RetreatMode:\n\t\tif _hits_taken == 0:\n\t\t\treturn RetreatMode.FULL_HP\n\t\telif _hits_taken == 1:\n\t\t\treturn RetreatMode.ONE_HIT\n\t\telse:\n\t\t\treturn RetreatMode.MULTIPLE_HITS\n\n\n\tfunc should_seek_cover() -> bool:\n\t\treturn enable_cover and _under_fire and not _has_valid_cover\n\n\n\tfunc should_flank() -> bool:\n\t\treturn enable_flanking and _can_see_player and not _under_fire\n\n\n\tfunc set_under_fire(value: bool) -> void:\n\t\t_under_fire = value\n\n\n\tfunc set_can_see_player(value: bool) -> void:\n\t\t_can_see_player = value\n\n\n\tfunc update_suppression(delta: float) -> void:\n\t\tif _under_fire:\n\t\t\t_suppression_timer = suppression_cooldown\n\t\telse:\n\t\t\t_suppression_timer -= delta\n\t\t\tif _suppression_timer < 0:\n\t\t\t\t_suppression_timer = 0\n\n\n\tfunc is_suppressed() -> bool:\n\t\treturn _suppression_timer > 0\n\n\n\tfunc calculate_lead_position(target_pos: Vector2, target_velocity: Vector2, own_pos: Vector2) -> Vector2:\n\t\tif target_velocity == Vector2.ZERO:\n\t\t\treturn target_pos\n\n\t\tvar distance := own_pos.distance_to(target_pos)\n\t\tvar time_to_hit := distance / bullet_speed\n\t\treturn target_pos + target_velocity * time_to_hit\n\n\n\tfunc is_player_distracted(player_rotation: float, enemy_position: Vector2, player_position: Vector2) -> bool:\n\t\tvar to_enemy := (enemy_position - player_position).normalized()\n\t\tvar player_facing := Vector2.RIGHT.rotated(player_rotation)\n\t\tvar angle_diff := abs(to_enemy.angle_to(player_facing))\n\t\treturn angle_diff > PLAYER_DISTRACTION_ANGLE\n\n\n\tfunc setup_patrol(initial_pos: Vector2, offsets: Array[Vector2]) -> void:\n\t\t_initial_position = initial_pos\n\t\t_patrol_points.clear()\n\t\tfor offset in offsets:\n\t\t\t_patrol_points.append(initial_pos + offset)\n\n\n\tfunc get_next_patrol_point() -> Vector2:\n\t\tif _patrol_points.is_empty():\n\t\t\treturn _initial_position\n\t\t_current_patrol_index = (_current_patrol_index + 1) % _patrol_points.size()\n\t\treturn _patrol_points[_current_patrol_index]\n\n\nvar enemy: MockEnemy\n\n\nfunc before_each() -> void:\n\tenemy = MockEnemy.new()\n\tseed(12345)  # Fixed seed for reproducibility\n\tenemy.initialize()\n\n\nfunc after_each() -> void:\n\tenemy = null\n\n\n# ============================================================================\n# Initial State Tests\n# ============================================================================\n\n\nfunc test_initial_state_is_idle() -> void:\n\tassert_eq(enemy.get_current_state(), MockEnemy.AIState.IDLE,\n\t\t\"Enemy should start in IDLE state\")\n\n\nfunc test_initial_health_within_range() -> void:\n\tvar health := enemy.get_current_health()\n\tassert_true(health >= enemy.min_health and health <= enemy.max_health,\n\t\t\"Initial health should be within configured range\")\n\n\nfunc test_initial_health_equals_max() -> void:\n\tassert_eq(enemy.get_current_health(), enemy.get_max_health(),\n\t\t\"Current health should equal max health initially\")\n\n\nfunc test_enemy_starts_alive() -> void:\n\tassert_true(enemy.is_alive(), \"Enemy should start alive\")\n\n\nfunc test_initial_ammo_equals_magazine_size() -> void:\n\tassert_eq(enemy.get_current_ammo(), enemy.magazine_size,\n\t\t\"Initial ammo should equal magazine size\")\n\n\nfunc test_initial_reserve_ammo() -> void:\n\tvar expected := enemy.magazine_size * (enemy.total_magazines - 1)\n\tassert_eq(enemy.get_reserve_ammo(), expected,\n\t\t\"Reserve ammo should be (total_magazines - 1) * magazine_size\")\n\n\nfunc test_not_reloading_initially() -> void:\n\tassert_false(enemy.is_reloading(), \"Enemy should not be reloading initially\")\n\n\n# ============================================================================\n# Health Tests\n# ============================================================================\n\n\nfunc test_hit_decreases_health() -> void:\n\tvar initial := enemy.get_current_health()\n\tenemy.on_bullet_hit()\n\n\tassert_eq(enemy.get_current_health(), initial - 1, \"Hit should decrease health by 1\")\n\n\nfunc test_enemy_dies_at_zero_health() -> void:\n\tvar hits_to_kill := enemy.get_current_health()\n\tfor i in range(hits_to_kill):\n\t\tenemy.on_bullet_hit()\n\n\tassert_false(enemy.is_alive(), \"Enemy should die when health reaches 0\")\n\n\nfunc test_hit_callback_called() -> void:\n\tvar hit_called := false\n\tenemy.on_hit = func(): hit_called = true\n\n\tenemy.on_bullet_hit()\n\n\tassert_true(hit_called, \"Hit callback should be called\")\n\n\nfunc test_died_callback_called() -> void:\n\tvar died_called := false\n\tenemy.on_died = func(): died_called = true\n\n\tvar hits := enemy.get_current_health()\n\tfor i in range(hits):\n\t\tenemy.on_bullet_hit()\n\n\tassert_true(died_called, \"Died callback should be called\")\n\n\nfunc test_dead_enemy_cannot_be_hit_again() -> void:\n\t# Kill the enemy\n\tvar hits := enemy.get_current_health()\n\tfor i in range(hits):\n\t\tenemy.on_bullet_hit()\n\n\t# Try to hit again\n\tenemy.on_bullet_hit()\n\n\tassert_eq(enemy.get_current_health(), 0, \"Dead enemy health should stay at 0\")\n\n\nfunc test_health_percent_full() -> void:\n\tassert_eq(enemy.get_health_percent(), 1.0, \"Full health should be 100%\")\n\n\nfunc test_health_percent_half() -> void:\n\tvar half := enemy.get_max_health() / 2\n\tenemy._current_health = half\n\tvar expected := float(half) / float(enemy.get_max_health())\n\n\tassert_almost_eq(enemy.get_health_percent(), expected, 0.001)\n\n\n# ============================================================================\n# AI State Tests\n# ============================================================================\n\n\nfunc test_state_change_emits_signal() -> void:\n\tvar new_state_received: int = -1\n\tenemy.on_state_changed = func(s): new_state_received = s\n\n\tenemy.set_state(MockEnemy.AIState.COMBAT)\n\n\tassert_eq(new_state_received, MockEnemy.AIState.COMBAT,\n\t\t\"State changed signal should pass new state\")\n\n\nfunc test_state_change_same_state_no_signal() -> void:\n\tvar signal_called := false\n\tenemy.on_state_changed = func(_s): signal_called = true\n\n\tenemy.set_state(MockEnemy.AIState.IDLE)  # Already IDLE\n\n\tassert_false(signal_called, \"Signal should not be called for same state\")\n\n\nfunc test_all_states_can_be_set() -> void:\n\tvar states := [\n\t\tMockEnemy.AIState.IDLE,\n\t\tMockEnemy.AIState.COMBAT,\n\t\tMockEnemy.AIState.SEEKING_COVER,\n\t\tMockEnemy.AIState.IN_COVER,\n\t\tMockEnemy.AIState.FLANKING,\n\t\tMockEnemy.AIState.SUPPRESSED,\n\t\tMockEnemy.AIState.RETREATING,\n\t\tMockEnemy.AIState.PURSUING,\n\t\tMockEnemy.AIState.ASSAULT\n\t]\n\n\tfor state in states:\n\t\tenemy.set_state(state)\n\t\tassert_eq(enemy.get_current_state(), state, \"Should be able to set state %d\" % state)\n\n\n# ============================================================================\n# Ammo and Shooting Tests\n# ============================================================================\n\n\nfunc test_can_shoot_with_ammo_and_cooldown() -> void:\n\tenemy._shoot_timer = enemy.shoot_cooldown  # Cooldown ready\n\n\tassert_true(enemy.can_shoot(), \"Should be able to shoot with ammo and cooldown ready\")\n\n\nfunc test_cannot_shoot_without_cooldown() -> void:\n\tenemy._shoot_timer = 0.0  # Cooldown not ready\n\n\tassert_false(enemy.can_shoot(), \"Should not be able to shoot during cooldown\")\n\n\nfunc test_cannot_shoot_without_ammo() -> void:\n\tenemy._current_ammo = 0\n\tenemy._shoot_timer = enemy.shoot_cooldown\n\n\tassert_false(enemy.can_shoot(), \"Should not be able to shoot without ammo\")\n\n\nfunc test_cannot_shoot_while_reloading() -> void:\n\tenemy._is_reloading = true\n\tenemy._shoot_timer = enemy.shoot_cooldown\n\n\tassert_false(enemy.can_shoot(), \"Should not be able to shoot while reloading\")\n\n\nfunc test_shooting_decreases_ammo() -> void:\n\tenemy._shoot_timer = enemy.shoot_cooldown\n\tvar initial := enemy.get_current_ammo()\n\n\tenemy.shoot()\n\n\tassert_eq(enemy.get_current_ammo(), initial - 1, \"Shooting should decrease ammo\")\n\n\nfunc test_shooting_resets_timer() -> void:\n\tenemy._shoot_timer = enemy.shoot_cooldown\n\tenemy.shoot()\n\n\tassert_eq(enemy._shoot_timer, 0.0, \"Shooting should reset timer\")\n\n\nfunc test_shoot_timer_updates() -> void:\n\tenemy._shoot_timer = 0.0\n\tenemy.update_shoot_timer(0.05)\n\n\tassert_eq(enemy._shoot_timer, 0.05, \"Timer should update by delta\")\n\n\n# ============================================================================\n# Reload Tests\n# ============================================================================\n\n\nfunc test_needs_reload_when_empty_with_reserve() -> void:\n\tenemy._current_ammo = 0\n\n\tassert_true(enemy.needs_reload(), \"Should need reload when empty with reserve\")\n\n\nfunc test_no_reload_needed_with_ammo() -> void:\n\tassert_false(enemy.needs_reload(), \"Should not need reload with ammo\")\n\n\nfunc test_no_reload_needed_without_reserve() -> void:\n\tenemy._current_ammo = 0\n\tenemy._reserve_ammo = 0\n\n\tassert_false(enemy.needs_reload(), \"Should not need reload without reserve\")\n\n\nfunc test_start_reload_sets_reloading() -> void:\n\tenemy._current_ammo = 0\n\tenemy.start_reload()\n\n\tassert_true(enemy.is_reloading(), \"Should be reloading after start_reload\")\n\n\nfunc test_reload_callback_called() -> void:\n\tvar started := false\n\tenemy.on_reload_started = func(): started = true\n\n\tenemy._current_ammo = 0\n\tenemy.start_reload()\n\n\tassert_true(started, \"Reload started callback should be called\")\n\n\nfunc test_reload_completes_after_time() -> void:\n\tenemy._current_ammo = 0\n\tenemy.start_reload()\n\tenemy.update_reload(enemy.reload_time + 0.1)\n\n\tassert_false(enemy.is_reloading(), \"Should not be reloading after reload time\")\n\n\nfunc test_reload_refills_ammo() -> void:\n\tenemy._current_ammo = 0\n\tvar initial_reserve := enemy.get_reserve_ammo()\n\tenemy.start_reload()\n\tenemy.update_reload(enemy.reload_time + 0.1)\n\n\tassert_eq(enemy.get_current_ammo(), enemy.magazine_size,\n\t\t\"Ammo should be refilled after reload\")\n\tassert_eq(enemy.get_reserve_ammo(), initial_reserve - enemy.magazine_size,\n\t\t\"Reserve should decrease by magazine size\")\n\n\nfunc test_cannot_start_reload_when_reloading() -> void:\n\tenemy._current_ammo = 0\n\tenemy.start_reload()\n\tenemy.start_reload()  # Try again\n\n\t# Should still have same reload state (not restarted)\n\tassert_true(enemy.is_reloading())\n\n\nfunc test_has_ammo_with_current() -> void:\n\tassert_true(enemy.has_ammo(), \"Should have ammo with current ammo\")\n\n\nfunc test_has_ammo_with_only_reserve() -> void:\n\tenemy._current_ammo = 0\n\n\tassert_true(enemy.has_ammo(), \"Should have ammo with reserve only\")\n\n\nfunc test_no_ammo_when_both_empty() -> void:\n\tenemy._current_ammo = 0\n\tenemy._reserve_ammo = 0\n\n\tassert_false(enemy.has_ammo(), \"Should not have ammo when both empty\")\n\n\n# ============================================================================\n# Retreat Mode Tests\n# ============================================================================\n\n\nfunc test_retreat_mode_full_hp() -> void:\n\tassert_eq(enemy.get_retreat_mode(), MockEnemy.RetreatMode.FULL_HP,\n\t\t\"Should be FULL_HP retreat mode with no damage\")\n\n\nfunc test_retreat_mode_one_hit() -> void:\n\tenemy.on_bullet_hit()\n\n\tassert_eq(enemy.get_retreat_mode(), MockEnemy.RetreatMode.ONE_HIT,\n\t\t\"Should be ONE_HIT retreat mode after one hit\")\n\n\nfunc test_retreat_mode_multiple_hits() -> void:\n\tenemy.on_bullet_hit()\n\tenemy.on_bullet_hit()\n\n\tassert_eq(enemy.get_retreat_mode(), MockEnemy.RetreatMode.MULTIPLE_HITS,\n\t\t\"Should be MULTIPLE_HITS retreat mode after multiple hits\")\n\n\n# ============================================================================\n# Cover and Flanking Tests\n# ============================================================================\n\n\nfunc test_should_seek_cover_when_under_fire() -> void:\n\tenemy.enable_cover = true\n\tenemy._under_fire = true\n\tenemy._has_valid_cover = false\n\n\tassert_true(enemy.should_seek_cover(), \"Should seek cover when under fire\")\n\n\nfunc test_should_not_seek_cover_when_has_cover() -> void:\n\tenemy.enable_cover = true\n\tenemy._under_fire = true\n\tenemy._has_valid_cover = true\n\n\tassert_false(enemy.should_seek_cover(), \"Should not seek cover when already has cover\")\n\n\nfunc test_should_not_seek_cover_when_disabled() -> void:\n\tenemy.enable_cover = false\n\tenemy._under_fire = true\n\n\tassert_false(enemy.should_seek_cover(), \"Should not seek cover when disabled\")\n\n\nfunc test_should_flank_when_see_player() -> void:\n\tenemy.enable_flanking = true\n\tenemy._can_see_player = true\n\tenemy._under_fire = false\n\n\tassert_true(enemy.should_flank(), \"Should flank when can see player\")\n\n\nfunc test_should_not_flank_under_fire() -> void:\n\tenemy.enable_flanking = true\n\tenemy._can_see_player = true\n\tenemy._under_fire = true\n\n\tassert_false(enemy.should_flank(), \"Should not flank when under fire\")\n\n\nfunc test_should_not_flank_when_disabled() -> void:\n\tenemy.enable_flanking = false\n\tenemy._can_see_player = true\n\n\tassert_false(enemy.should_flank(), \"Should not flank when disabled\")\n\n\n# ============================================================================\n# Suppression Tests\n# ============================================================================\n\n\nfunc test_suppressed_when_under_fire() -> void:\n\tenemy.set_under_fire(true)\n\tenemy.update_suppression(0.0)\n\n\tassert_true(enemy.is_suppressed(), \"Should be suppressed when under fire\")\n\n\nfunc test_suppression_decreases_over_time() -> void:\n\tenemy._suppression_timer = 2.0\n\tenemy._under_fire = false\n\tenemy.update_suppression(1.0)\n\n\tassert_eq(enemy._suppression_timer, 1.0, \"Suppression timer should decrease\")\n\n\nfunc test_suppression_resets_when_under_fire() -> void:\n\tenemy._suppression_timer = 0.5\n\tenemy.set_under_fire(true)\n\tenemy.update_suppression(0.0)\n\n\tassert_eq(enemy._suppression_timer, enemy.suppression_cooldown,\n\t\t\"Suppression should reset to full when under fire\")\n\n\n# ============================================================================\n# Lead Prediction Tests\n# ============================================================================\n\n\nfunc test_lead_prediction_stationary_target() -> void:\n\tvar target_pos := Vector2(500, 0)\n\tvar target_vel := Vector2.ZERO\n\tvar own_pos := Vector2.ZERO\n\n\tvar result := enemy.calculate_lead_position(target_pos, target_vel, own_pos)\n\n\tassert_eq(result, target_pos, \"Stationary target should not need prediction\")\n\n\nfunc test_lead_prediction_moving_target() -> void:\n\tvar target_pos := Vector2(500, 0)\n\tvar target_vel := Vector2(100, 0)  # Moving right\n\tvar own_pos := Vector2.ZERO\n\n\tvar result := enemy.calculate_lead_position(target_pos, target_vel, own_pos)\n\n\tassert_true(result.x > target_pos.x, \"Lead position should be ahead of moving target\")\n\n\n# ============================================================================\n# Distraction Detection Tests\n# ============================================================================\n\n\nfunc test_player_distracted_when_looking_away() -> void:\n\tvar player_rotation := 0.0  # Facing right\n\tvar enemy_position := Vector2(0, 100)  # Enemy is below\n\tvar player_position := Vector2.ZERO\n\n\tassert_true(enemy.is_player_distracted(player_rotation, enemy_position, player_position),\n\t\t\"Player should be distracted when looking away from enemy\")\n\n\nfunc test_player_not_distracted_when_facing() -> void:\n\tvar player_rotation := PI / 2  # Facing down\n\tvar enemy_position := Vector2(0, 100)  # Enemy is below\n\tvar player_position := Vector2.ZERO\n\n\tassert_false(enemy.is_player_distracted(player_rotation, enemy_position, player_position),\n\t\t\"Player should not be distracted when facing enemy\")\n\n\n# ============================================================================\n# Patrol Tests\n# ============================================================================\n\n\nfunc test_setup_patrol_creates_points() -> void:\n\tvar initial := Vector2(100, 100)\n\tvar offsets: Array[Vector2] = [Vector2(50, 0), Vector2(-50, 0)]\n\tenemy.setup_patrol(initial, offsets)\n\n\tassert_eq(enemy._patrol_points.size(), 2, \"Should have 2 patrol points\")\n\tassert_eq(enemy._patrol_points[0], Vector2(150, 100), \"First patrol point incorrect\")\n\tassert_eq(enemy._patrol_points[1], Vector2(50, 100), \"Second patrol point incorrect\")\n\n\nfunc test_get_next_patrol_point_cycles() -> void:\n\tvar initial := Vector2.ZERO\n\tvar offsets: Array[Vector2] = [Vector2(100, 0), Vector2(-100, 0)]\n\tenemy.setup_patrol(initial, offsets)\n\n\tvar first := enemy.get_next_patrol_point()\n\tvar second := enemy.get_next_patrol_point()\n\tvar third := enemy.get_next_patrol_point()  # Should cycle back\n\n\tassert_eq(first, Vector2(-100, 0), \"First call should go to second point\")\n\tassert_eq(second, Vector2(100, 0), \"Second call should go to first point\")\n\tassert_eq(third, Vector2(-100, 0), \"Third call should cycle back\")\n","numLines":777,"startLine":1,"totalLines":777}}}
+[2026-01-22T07:20:29.284Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01PYKaWgUKPhMVV5SC38g7ud",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "The test file uses a MockEnemy class rather than loading the actual scene, so my changes won't break the tests. Let me also check if any integration tests load the Enemy scene:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 9534,
+      "cache_read_input_tokens": 45239,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 9534,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "8c15285b-2a0f-46ca-9da9-27e9eea609f3"
+}
+[2026-01-22T07:20:31.026Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01PYKaWgUKPhMVV5SC38g7ud",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01BRBtoyAEs5bdxUSMEbgw4d",
+        "name": "Bash",
+        "input": {
+          "command": "grep -l \"Enemy.tscn\" /tmp/gh-issue-solver-1769066205054/tests/**/*.gd 2>/dev/null || echo \"No tests load Enemy.tscn directly\"",
+          "description": "Check if any tests load Enemy.tscn"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 9534,
+      "cache_read_input_tokens": 45239,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 9534,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "83a368a8-4ee1-485c-a71c-7e94723a5548"
+}
+[2026-01-22T07:20:32.246Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01BRBtoyAEs5bdxUSMEbgw4d",
+        "type": "tool_result",
+        "content": "No tests load Enemy.tscn directly",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "d048b810-44c0-4a5f-9443-c5a24aeef566",
+  "tool_use_result": {
+    "stdout": "No tests load Enemy.tscn directly",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:20:35.155Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01E7AjaXsDkhERTfMpgekESG",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "No tests directly load the Enemy scene. Now let me check recent merged PRs to follow the style, and then commit the changes:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 425,
+      "cache_read_input_tokens": 54773,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 425,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "4a6ae5de-6fda-4e3d-bfe8-badf073b9f7a"
+}
+[2026-01-22T07:20:36.392Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01E7AjaXsDkhERTfMpgekESG",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01BVQFNtWTPkZ2jo4rhxbVya",
+        "name": "Bash",
+        "input": {
+          "command": "gh pr list --repo Jhon-Crow/godot-topdown-MVP --state merged --limit 5 --json number,title,body",
+          "description": "Check recent merged PRs for style"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 425,
+      "cache_read_input_tokens": 54773,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 425,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "af15ff30-0b8b-4a5b-84ad-48728c1d0a69"
+}
+[2026-01-22T07:20:37.787Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01BVQFNtWTPkZ2jo4rhxbVya",
+        "type": "tool_result",
+        "content": "[{\"body\":\"## Summary\\n\\n- Reduce total shotgun shells to 20 (8 in tube + 12 reserve)\\n- Add continuous drag-and-drop reload gestures for bolt open/close\\n- Preserve backward compatibility with release-based gestures\\n- **Updated**: Shell loading behavior preserved as original (requires RMB release)\\n- **Fixed**: Increased cooldown protection (750ms) to prevent accidental bolt reopening\\n- **Fixed**: Shell count now correctly uses spare magazines for ReserveAmmo\\n- **Fixed**: Reserve ammo display now shows correctly (signal timing fix)\\n\\n## Changes\\n\\n### 1. Shell Count Reduction\\nChanged `MaxReserveAmmo` from 24 to 12 in `resources/weapons/ShotgunData.tres`. With 8 shells in the tube magazine, this gives exactly 20 total shells on the building level as requested.\\n\\n**Bug fix in Shotgun._Ready()**: \\n- Fixed MagazineInventory initialization to use 2 magazines (one CurrentMagazine set to 0, one spare with reserve shells)\\n- The `ReserveAmmo` property returns `TotalSpareAmmo`, so reserve shells must be in spare magazines\\n- Updated `LoadShell()` to consume from spare magazines correctly\\n\\n### 2. Reserve Ammo Display Fix\\n**Root cause:** The `ShellCountChanged` signal was emitted during `_Ready()` before the shotgun was added to the player's children. GDScript handlers couldn't find the shotgun to read `ReserveAmmo`.\\n\\n**Fix:** Use `CallDeferred(MethodName.EmitInitialShellCount)` to emit the signal after the shotgun is added to the scene tree. This ensures the display correctly shows \\\"8/12\\\" instead of \\\"8/0\\\".\\n\\n### 3. Continuous Reload Gestures (Bolt Open/Close Only)\\nAdded `TryProcessMidDragGesture()` method in `Scripts/Weapons/Shotgun.cs` that enables:\\n\\n**New fluid reload motion for bolt:**\\n1. Hold RMB and drag UP → opens bolt\\n2. Without releasing RMB, drag DOWN → closes bolt\\n\\n**Also works for pump-action after firing:**\\n1. Fire with LMB (shotgun enters NeedsPumpUp state)\\n2. Hold RMB and drag UP → ejects spent shell\\n3. Without releasing RMB, drag DOWN → chambers next round\\n\\n### 4. Shell Loading Behavior (Preserved Original)\\nShell loading with MMB continues to use the original release-based gesture:\\n- Open bolt (RMB drag UP, release)\\n- Load shell (MMB + RMB drag DOWN, release)\\n- Close bolt (RMB drag DOWN, release)\\n\\n**Why:** Based on user feedback, the original shell loading behavior provides better control and intentionality.\\n\\n### 5. Bolt Close Cooldown Protection\\nAdded **750ms** cooldown (history: 250ms → 400ms → 500ms → 750ms) after closing the bolt to prevent accidental reopening due to continued mouse movement:\\n- After `CompleteReload()` (reload completion)\\n- After pump-down (mid-drag and release-based gestures)\\n\\n**Why:** User reported accidental bolt reopening during pump-action sequences. Increased cooldown provides more robust protection.\\n\\n**Verbose logging enabled:** Game now outputs detailed timing information to help diagnose remaining issues.\\n\\n### 6. Backward Compatibility\\nOriginal release-based gestures still work for all operations:\\n- RMB drag UP (release) → action\\n- RMB drag DOWN (release) → action\\n\\n## User Feedback Integration (6 rounds)\\n\\n1. **\\\"keep original shell loading\\\"** → Preserved release-based shell loading, kept continuous bolt open/close\\n2. **\\\"accidental bolt opens after closing\\\"** → Added 250ms cooldown\\n3. **\\\"still happens during pump-action\\\"** → Increased to 400ms\\n4. **\\\"still 8+24 shells\\\"** → Fixed MagazineInventory initialization\\n5. **\\\"now 8 total (should be 8+12)\\\"** → Fixed to use spare magazines\\n6. **\\\"still 8/0 display, still accidental opens\\\"** → Fixed signal timing with CallDeferred, increased cooldown to 750ms\\n\\n## Test Plan\\n\\n- [x] Verify building level starts with 20 total shells (8 in tube + 12 reserve)\\n- [x] Test continuous bolt open/close: hold RMB, drag up, then down without releasing\\n- [x] Test old reload gestures: RMB drag up (release), then RMB drag down (release)\\n- [x] Test continuous pump-action after firing\\n- [x] Verify shell loading uses original behavior (requires RMB release)\\n- [ ] Verify reserve ammo display shows 12 (not 0) at game start\\n- [ ] Verify bolt close cooldown (750ms) prevents accidental reopening during pump-action\\n\\n## Case Study\\n\\nDocumentation added to `docs/case-studies/issue-210/` with:\\n- Timeline of events\\n- User feedback analysis (6 rounds)\\n- Root cause analysis for each issue\\n- Resolution details\\n- User-provided game logs\\n\\nFixes #210\\n\\n🤖 Generated with [Claude Code](https://claude.com/claude-code)\",\"number\":215,\"title\":\"Update shotgun: 20 shells + continuous reload gestures\"},{\"body\":\"## Summary\\n- Fix input processing order to detect MMB presses on first reload attempt\\n- Initialize MMB tracking flag based on current state instead of unconditionally resetting\\n- Add diagnostic logging flag for debugging similar issues\\n\\n## Problem\\nAfter opening the bolt (RMB drag UP) and trying to load a shell (MMB + RMB drag DOWN) for the **first time**, the bolt closes instead of loading a shell. Subsequent attempts work correctly.\\n\\n**Original (Russian):** \\\"После открытия затвора и попытки зарядить патрон (MMB + RMB драг вниз) в первый раз - затвор закрывается (должно сразу заряжаться).\\\"\\n\\n## Root Cause\\nThe bug was caused by **incorrect order of input processing** in `_Process()`:\\n\\n```csharp\\n// BEFORE FIX (problematic order)\\nHandleDragGestures();      // Checks _isMiddleMouseHeld (from PREVIOUS frame)\\nHandleMiddleMouseButton(); // Updates _isMiddleMouseHeld (for CURRENT frame)\\n```\\n\\nWhen the user pressed MMB on the **same frame** as starting the RMB drag, the MMB state wasn't updated yet when `HandleDragGestures()` checked it.\\n\\nAdditionally, `_wasMiddleMouseHeldDuringDrag` was unconditionally reset to `false` at drag start, losing information about MMB already being held.\\n\\n## Solution\\n1. **Reorder input processing**: Call `HandleMiddleMouseButton()` BEFORE `HandleDragGestures()` so MMB state is up-to-date when checking\\n2. **Initialize flag properly**: Set `_wasMiddleMouseHeldDuringDrag = _isMiddleMouseHeld` at drag start (instead of `false`)\\n3. **Add diagnostic logging**: Added `VerboseInputLogging` flag (off by default) for debugging\\n\\n## Files Changed\\n- `Scripts/Weapons/Shotgun.cs` - Fixed input processing order and MMB tracking logic\\n- `docs/case-studies/issue-213/` - Case study documentation with detailed analysis\\n\\n## Test Plan\\n- [ ] Start tutorial level with shotgun equipped\\n- [ ] Fire some shells to create space in tube magazine\\n- [ ] Open bolt (RMB drag UP)\\n- [ ] **Immediately** try to load a shell (MMB + RMB drag DOWN)\\n- [ ] Verify shell is loaded (not bolt closed)\\n- [ ] Repeat multiple times with varying timing\\n- [ ] Verify subsequent shell loading also works\\n- [ ] Close bolt and verify normal operation\\n\\nFixes #213\\n\\n---\\nGenerated with [Claude Code](https://claude.com/claude-code)\",\"number\":214,\"title\":\"Fix shotgun reload input timing - first shell load attempt now works\"},{\"body\":\"## Summary\\n- Connect `ShellCountChanged` signal from Shotgun weapon to UI handler in ALL level scripts\\n- Add handler function `_on_shell_count_changed()` to update ammo counter in real-time during reload\\n- Ammo counter now updates immediately as each shell is loaded\\n\\n## Problem\\nWhen reloading the shotgun one shell at a time, the ammo counter should update immediately as each shell is loaded. Previously, the counter only updated after firing the weapon.\\n\\n## Root Cause\\nThe level scripts were connected to `AmmoChanged` and `MagazinesChanged` signals, but NOT to the `ShellCountChanged` signal that is emitted by `Shotgun.cs` when each shell is loaded.\\n\\n**Initial fix (v1)** only updated `building_level.gd`, but user testing revealed the issue persisted on the tutorial level because each level script has its own signal connection code.\\n\\n## Solution (Complete v2 Fix)\\n1. Connect the `ShellCountChanged` signal from the weapon to a new handler in ALL level scripts\\n2. The handler fetches the current reserve ammo and updates the ammo label\\n3. Added Shotgun weapon detection to `test_tier.gd` (was only handling AssaultRifle)\\n\\n## Files Changed\\n- `scripts/levels/building_level.gd` - Added signal connection and handler function (v1)\\n- `scripts/levels/tutorial_level.gd` - Added signal connection and handler function (v2)\\n- `scripts/levels/test_tier.gd` - Added Shotgun detection and signal handler (v2)\\n- `docs/case-studies/issue-208/README.md` - Case study with complete timeline and analysis\\n- `docs/case-studies/issue-208/logs/` - User testing logs\\n\\n## Test Plan\\n- [ ] Start **tutorial level** with shotgun equipped\\n- [ ] Fire a few shells to reduce tube count\\n- [ ] Open bolt (RMB drag UP)\\n- [ ] Load shells (MMB + RMB drag DOWN)\\n- [ ] Verify ammo counter increments immediately with each loaded shell\\n- [ ] Close bolt and verify normal operation continues\\n- [ ] Repeat test on building level and test tier\\n\\nFixes #208\\n\\n---\\nGenerated with [Claude Code](https://claude.com/claude-code)\",\"number\":209,\"title\":\"Fix shotgun reload UI - update ammo counter immediately when loading shells\"},{\"body\":\"## Summary\\nFixes the frag grenade's HE (High Explosive) damage which was not working correctly. Enemies within the blast zone were not being killed by the shockwave.\\n\\n## Root Cause\\n\\nThe `explosion_damage` value in `scenes/projectiles/FragGrenade.tscn` was incorrectly set to `2` instead of `99`:\\n\\n```ini\\n# Before (incorrect):\\nexplosion_damage = 2\\n\\n# After (correct):\\nexplosion_damage = 99\\n```\\n\\nThis value overrides the default `explosion_damage = 99` defined in the script `scripts/projectiles/frag_grenade.gd`.\\n\\n### Evidence from Logs\\n\\nFrom the game log provided in the issue:\\n\\n```\\n[07:21:53] [ENEMY] [Enemy3] Hit taken, health: 2/3\\n[07:21:53] [ENEMY] [Enemy3] Hit taken, health: 1/3\\n[07:21:53] [INFO] [FragGrenade] Applied 2 HE damage to enemy at distance 226.7\\n```\\n\\nThe log showed only 2 damage was applied (reducing Enemy3's health from 3 to 1), when it should have been 99 damage (instantly killing the enemy).\\n\\n## Changes\\n\\n### `scenes/projectiles/FragGrenade.tscn`\\n- Changed `explosion_damage` from `2` to `99` (main fix)\\n- Changed `effect_radius` from `250.0` to `225.0` (per requirement: ~450 diameter zone)\\n\\n### `scripts/projectiles/frag_grenade.gd`\\n- Updated default `effect_radius` from `250.0` to `225.0` for consistency\\n- Updated comment to reflect the user requirement\\n\\n### Documentation\\n- Added `docs/case-studies/issue-206/` with detailed root cause analysis and game log\\n\\n## Shockwave Physics\\n\\nThe code already correctly implements physics-based shockwave propagation:\\n- Uses raycast line-of-sight check (`_has_line_of_sight_to()`)\\n- Checks for obstacles (walls) with `collision_mask = 4`\\n- Only applies damage if there's clear line of sight (no walls blocking)\\n\\nThis means the shockwave is correctly blocked by walls.\\n\\n## Test Plan\\n\\n- [ ] Throw frag grenade near enemies in open area - should instantly kill all enemies within 225px radius\\n- [ ] Throw frag grenade near enemies behind a wall - wall should block shockwave damage\\n- [ ] Verify shrapnel continues to work (4 pieces, ricochet, 1 damage each)\\n\\nFixes #206\\n\\n---\\n🤖 Generated with [Claude Code](https://claude.com/claude-code)\",\"number\":207,\"title\":\"Fix frag grenade HE damage - explosion_damage was 2 instead of 99\"},{\"body\":\"## Summary\\nДобавляет полноценную звуковую реализацию для многосоставной системы дробовика (pump-action):\\n- Случайный выбор звука выстрела из 4 вариантов\\n- Звуки открытия/закрытия затвора при перезарядке и цикле помпы\\n- Звук выброса гильзы при открытии затвора\\n- Звук загрузки патрона в магазин\\n- Звук пустого магазина специфичный для дробовика\\n\\n## Changes\\n\\n### AudioManager (`scripts/autoload/audio_manager.gd`)\\n- Added shotgun sound constants for shots, action, shell, and empty click\\n- Added volume constants: `VOLUME_SHOTGUN_SHOT = -3.0`, `VOLUME_SHOTGUN_ACTION = -5.0`\\n- Added preloading for all shotgun sounds\\n- Added convenience methods: `play_shotgun_shot()`, `play_shotgun_action_open()`, `play_shotgun_action_close()`, `play_shell_shotgun()`, `play_shotgun_empty_click()`, `play_shotgun_load_shell()`\\n\\n### Shotgun (`Scripts/Weapons/Shotgun.cs`)\\n- Updated all sound methods to use proper shotgun sounds instead of placeholders\\n- Added shell ejection sound with 150ms delay after action opens (pump UP)\\n\\n## Sound Mapping for Each Action\\n\\n### Fire Sequence (LMB → RMB UP → RMB DOWN)\\n| Step | Action | Sound Method |\\n|------|--------|-------------|\\n| 1 | LMB Press - Fire | `play_shotgun_shot` (random 1-4) |\\n| 2 | RMB Drag UP - Eject shell | `play_shotgun_action_open` + `play_shell_shotgun` (+150ms) |\\n| 3 | RMB Drag DOWN - Chamber | `play_shotgun_action_close` |\\n\\n### Reload Sequence (RMB UP → [MMB + RMB DOWN]×N → RMB DOWN)\\n| Step | Action | Sound Method |\\n|------|--------|-------------|\\n| 1 | RMB Drag UP - Open bolt | `play_shotgun_action_open` |\\n| 2 | MMB + RMB Drag DOWN - Load shell | `play_shotgun_load_shell` (per shell) |\\n| 3 | RMB Drag DOWN - Close bolt | `play_shotgun_action_close` |\\n\\n### Empty Magazine\\n| Action | Sound Method |\\n|--------|-------------|\\n| LMB on empty | `play_shotgun_empty_click` |\\n\\n## Test Plan\\n- [ ] Fire shotgun and hear random shot sound (4 variants)\\n- [ ] RMB drag UP after firing - hear action open + shell eject sounds\\n- [ ] RMB drag DOWN after pump up - hear action close sound\\n- [ ] Start reload (RMB UP when not full) - hear action open\\n- [ ] Load shells (MMB + RMB DOWN) - hear shell load sound per shell\\n- [ ] Close bolt (RMB DOWN without MMB) - hear action close\\n- [ ] Fire empty shotgun (LMB) - hear shotgun-specific empty click\\n\\n## Fixes\\nFixes #204\\n\\n---\\n🤖 Generated with [Claude Code](https://claude.ai/code)\\n\\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\",\"number\":205,\"title\":\"Добавить звуки дробовику\"}]",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "92a3c054-499c-49de-9c86-2cff3b5d1a93",
+  "tool_use_result": {
+    "stdout": "[{\"body\":\"## Summary\\n\\n- Reduce total shotgun shells to 20 (8 in tube + 12 reserve)\\n- Add continuous drag-and-drop reload gestures for bolt open/close\\n- Preserve backward compatibility with release-based gestures\\n- **Updated**: Shell loading behavior preserved as original (requires RMB release)\\n- **Fixed**: Increased cooldown protection (750ms) to prevent accidental bolt reopening\\n- **Fixed**: Shell count now correctly uses spare magazines for ReserveAmmo\\n- **Fixed**: Reserve ammo display now shows correctly (signal timing fix)\\n\\n## Changes\\n\\n### 1. Shell Count Reduction\\nChanged `MaxReserveAmmo` from 24 to 12 in `resources/weapons/ShotgunData.tres`. With 8 shells in the tube magazine, this gives exactly 20 total shells on the building level as requested.\\n\\n**Bug fix in Shotgun._Ready()**: \\n- Fixed MagazineInventory initialization to use 2 magazines (one CurrentMagazine set to 0, one spare with reserve shells)\\n- The `ReserveAmmo` property returns `TotalSpareAmmo`, so reserve shells must be in spare magazines\\n- Updated `LoadShell()` to consume from spare magazines correctly\\n\\n### 2. Reserve Ammo Display Fix\\n**Root cause:** The `ShellCountChanged` signal was emitted during `_Ready()` before the shotgun was added to the player's children. GDScript handlers couldn't find the shotgun to read `ReserveAmmo`.\\n\\n**Fix:** Use `CallDeferred(MethodName.EmitInitialShellCount)` to emit the signal after the shotgun is added to the scene tree. This ensures the display correctly shows \\\"8/12\\\" instead of \\\"8/0\\\".\\n\\n### 3. Continuous Reload Gestures (Bolt Open/Close Only)\\nAdded `TryProcessMidDragGesture()` method in `Scripts/Weapons/Shotgun.cs` that enables:\\n\\n**New fluid reload motion for bolt:**\\n1. Hold RMB and drag UP → opens bolt\\n2. Without releasing RMB, drag DOWN → closes bolt\\n\\n**Also works for pump-action after firing:**\\n1. Fire with LMB (shotgun enters NeedsPumpUp state)\\n2. Hold RMB and drag UP → ejects spent shell\\n3. Without releasing RMB, drag DOWN → chambers next round\\n\\n### 4. Shell Loading Behavior (Preserved Original)\\nShell loading with MMB continues to use the original release-based gesture:\\n- Open bolt (RMB drag UP, release)\\n- Load shell (MMB + RMB drag DOWN, release)\\n- Close bolt (RMB drag DOWN, release)\\n\\n**Why:** Based on user feedback, the original shell loading behavior provides better control and intentionality.\\n\\n### 5. Bolt Close Cooldown Protection\\nAdded **750ms** cooldown (history: 250ms → 400ms → 500ms → 750ms) after closing the bolt to prevent accidental reopening due to continued mouse movement:\\n- After `CompleteReload()` (reload completion)\\n- After pump-down (mid-drag and release-based gestures)\\n\\n**Why:** User reported accidental bolt reopening during pump-action sequences. Increased cooldown provides more robust protection.\\n\\n**Verbose logging enabled:** Game now outputs detailed timing information to help diagnose remaining issues.\\n\\n### 6. Backward Compatibility\\nOriginal release-based gestures still work for all operations:\\n- RMB drag UP (release) → action\\n- RMB drag DOWN (release) → action\\n\\n## User Feedback Integration (6 rounds)\\n\\n1. **\\\"keep original shell loading\\\"** → Preserved release-based shell loading, kept continuous bolt open/close\\n2. **\\\"accidental bolt opens after closing\\\"** → Added 250ms cooldown\\n3. **\\\"still happens during pump-action\\\"** → Increased to 400ms\\n4. **\\\"still 8+24 shells\\\"** → Fixed MagazineInventory initialization\\n5. **\\\"now 8 total (should be 8+12)\\\"** → Fixed to use spare magazines\\n6. **\\\"still 8/0 display, still accidental opens\\\"** → Fixed signal timing with CallDeferred, increased cooldown to 750ms\\n\\n## Test Plan\\n\\n- [x] Verify building level starts with 20 total shells (8 in tube + 12 reserve)\\n- [x] Test continuous bolt open/close: hold RMB, drag up, then down without releasing\\n- [x] Test old reload gestures: RMB drag up (release), then RMB drag down (release)\\n- [x] Test continuous pump-action after firing\\n- [x] Verify shell loading uses original behavior (requires RMB release)\\n- [ ] Verify reserve ammo display shows 12 (not 0) at game start\\n- [ ] Verify bolt close cooldown (750ms) prevents accidental reopening during pump-action\\n\\n## Case Study\\n\\nDocumentation added to `docs/case-studies/issue-210/` with:\\n- Timeline of events\\n- User feedback analysis (6 rounds)\\n- Root cause analysis for each issue\\n- Resolution details\\n- User-provided game logs\\n\\nFixes #210\\n\\n🤖 Generated with [Claude Code](https://claude.com/claude-code)\",\"number\":215,\"title\":\"Update shotgun: 20 shells + continuous reload gestures\"},{\"body\":\"## Summary\\n- Fix input processing order to detect MMB presses on first reload attempt\\n- Initialize MMB tracking flag based on current state instead of unconditionally resetting\\n- Add diagnostic logging flag for debugging similar issues\\n\\n## Problem\\nAfter opening the bolt (RMB drag UP) and trying to load a shell (MMB + RMB drag DOWN) for the **first time**, the bolt closes instead of loading a shell. Subsequent attempts work correctly.\\n\\n**Original (Russian):** \\\"После открытия затвора и попытки зарядить патрон (MMB + RMB драг вниз) в первый раз - затвор закрывается (должно сразу заряжаться).\\\"\\n\\n## Root Cause\\nThe bug was caused by **incorrect order of input processing** in `_Process()`:\\n\\n```csharp\\n// BEFORE FIX (problematic order)\\nHandleDragGestures();      // Checks _isMiddleMouseHeld (from PREVIOUS frame)\\nHandleMiddleMouseButton(); // Updates _isMiddleMouseHeld (for CURRENT frame)\\n```\\n\\nWhen the user pressed MMB on the **same frame** as starting the RMB drag, the MMB state wasn't updated yet when `HandleDragGestures()` checked it.\\n\\nAdditionally, `_wasMiddleMouseHeldDuringDrag` was unconditionally reset to `false` at drag start, losing information about MMB already being held.\\n\\n## Solution\\n1. **Reorder input processing**: Call `HandleMiddleMouseButton()` BEFORE `HandleDragGestures()` so MMB state is up-to-date when checking\\n2. **Initialize flag properly**: Set `_wasMiddleMouseHeldDuringDrag = _isMiddleMouseHeld` at drag start (instead of `false`)\\n3. **Add diagnostic logging**: Added `VerboseInputLogging` flag (off by default) for debugging\\n\\n## Files Changed\\n- `Scripts/Weapons/Shotgun.cs` - Fixed input processing order and MMB tracking logic\\n- `docs/case-studies/issue-213/` - Case study documentation with detailed analysis\\n\\n## Test Plan\\n- [ ] Start tutorial level with shotgun equipped\\n- [ ] Fire some shells to create space in tube magazine\\n- [ ] Open bolt (RMB drag UP)\\n- [ ] **Immediately** try to load a shell (MMB + RMB drag DOWN)\\n- [ ] Verify shell is loaded (not bolt closed)\\n- [ ] Repeat multiple times with varying timing\\n- [ ] Verify subsequent shell loading also works\\n- [ ] Close bolt and verify normal operation\\n\\nFixes #213\\n\\n---\\nGenerated with [Claude Code](https://claude.com/claude-code)\",\"number\":214,\"title\":\"Fix shotgun reload input timing - first shell load attempt now works\"},{\"body\":\"## Summary\\n- Connect `ShellCountChanged` signal from Shotgun weapon to UI handler in ALL level scripts\\n- Add handler function `_on_shell_count_changed()` to update ammo counter in real-time during reload\\n- Ammo counter now updates immediately as each shell is loaded\\n\\n## Problem\\nWhen reloading the shotgun one shell at a time, the ammo counter should update immediately as each shell is loaded. Previously, the counter only updated after firing the weapon.\\n\\n## Root Cause\\nThe level scripts were connected to `AmmoChanged` and `MagazinesChanged` signals, but NOT to the `ShellCountChanged` signal that is emitted by `Shotgun.cs` when each shell is loaded.\\n\\n**Initial fix (v1)** only updated `building_level.gd`, but user testing revealed the issue persisted on the tutorial level because each level script has its own signal connection code.\\n\\n## Solution (Complete v2 Fix)\\n1. Connect the `ShellCountChanged` signal from the weapon to a new handler in ALL level scripts\\n2. The handler fetches the current reserve ammo and updates the ammo label\\n3. Added Shotgun weapon detection to `test_tier.gd` (was only handling AssaultRifle)\\n\\n## Files Changed\\n- `scripts/levels/building_level.gd` - Added signal connection and handler function (v1)\\n- `scripts/levels/tutorial_level.gd` - Added signal connection and handler function (v2)\\n- `scripts/levels/test_tier.gd` - Added Shotgun detection and signal handler (v2)\\n- `docs/case-studies/issue-208/README.md` - Case study with complete timeline and analysis\\n- `docs/case-studies/issue-208/logs/` - User testing logs\\n\\n## Test Plan\\n- [ ] Start **tutorial level** with shotgun equipped\\n- [ ] Fire a few shells to reduce tube count\\n- [ ] Open bolt (RMB drag UP)\\n- [ ] Load shells (MMB + RMB drag DOWN)\\n- [ ] Verify ammo counter increments immediately with each loaded shell\\n- [ ] Close bolt and verify normal operation continues\\n- [ ] Repeat test on building level and test tier\\n\\nFixes #208\\n\\n---\\nGenerated with [Claude Code](https://claude.com/claude-code)\",\"number\":209,\"title\":\"Fix shotgun reload UI - update ammo counter immediately when loading shells\"},{\"body\":\"## Summary\\nFixes the frag grenade's HE (High Explosive) damage which was not working correctly. Enemies within the blast zone were not being killed by the shockwave.\\n\\n## Root Cause\\n\\nThe `explosion_damage` value in `scenes/projectiles/FragGrenade.tscn` was incorrectly set to `2` instead of `99`:\\n\\n```ini\\n# Before (incorrect):\\nexplosion_damage = 2\\n\\n# After (correct):\\nexplosion_damage = 99\\n```\\n\\nThis value overrides the default `explosion_damage = 99` defined in the script `scripts/projectiles/frag_grenade.gd`.\\n\\n### Evidence from Logs\\n\\nFrom the game log provided in the issue:\\n\\n```\\n[07:21:53] [ENEMY] [Enemy3] Hit taken, health: 2/3\\n[07:21:53] [ENEMY] [Enemy3] Hit taken, health: 1/3\\n[07:21:53] [INFO] [FragGrenade] Applied 2 HE damage to enemy at distance 226.7\\n```\\n\\nThe log showed only 2 damage was applied (reducing Enemy3's health from 3 to 1), when it should have been 99 damage (instantly killing the enemy).\\n\\n## Changes\\n\\n### `scenes/projectiles/FragGrenade.tscn`\\n- Changed `explosion_damage` from `2` to `99` (main fix)\\n- Changed `effect_radius` from `250.0` to `225.0` (per requirement: ~450 diameter zone)\\n\\n### `scripts/projectiles/frag_grenade.gd`\\n- Updated default `effect_radius` from `250.0` to `225.0` for consistency\\n- Updated comment to reflect the user requirement\\n\\n### Documentation\\n- Added `docs/case-studies/issue-206/` with detailed root cause analysis and game log\\n\\n## Shockwave Physics\\n\\nThe code already correctly implements physics-based shockwave propagation:\\n- Uses raycast line-of-sight check (`_has_line_of_sight_to()`)\\n- Checks for obstacles (walls) with `collision_mask = 4`\\n- Only applies damage if there's clear line of sight (no walls blocking)\\n\\nThis means the shockwave is correctly blocked by walls.\\n\\n## Test Plan\\n\\n- [ ] Throw frag grenade near enemies in open area - should instantly kill all enemies within 225px radius\\n- [ ] Throw frag grenade near enemies behind a wall - wall should block shockwave damage\\n- [ ] Verify shrapnel continues to work (4 pieces, ricochet, 1 damage each)\\n\\nFixes #206\\n\\n---\\n🤖 Generated with [Claude Code](https://claude.com/claude-code)\",\"number\":207,\"title\":\"Fix frag grenade HE damage - explosion_damage was 2 instead of 99\"},{\"body\":\"## Summary\\nДобавляет полноценную звуковую реализацию для многосоставной системы дробовика (pump-action):\\n- Случайный выбор звука выстрела из 4 вариантов\\n- Звуки открытия/закрытия затвора при перезарядке и цикле помпы\\n- Звук выброса гильзы при открытии затвора\\n- Звук загрузки патрона в магазин\\n- Звук пустого магазина специфичный для дробовика\\n\\n## Changes\\n\\n### AudioManager (`scripts/autoload/audio_manager.gd`)\\n- Added shotgun sound constants for shots, action, shell, and empty click\\n- Added volume constants: `VOLUME_SHOTGUN_SHOT = -3.0`, `VOLUME_SHOTGUN_ACTION = -5.0`\\n- Added preloading for all shotgun sounds\\n- Added convenience methods: `play_shotgun_shot()`, `play_shotgun_action_open()`, `play_shotgun_action_close()`, `play_shell_shotgun()`, `play_shotgun_empty_click()`, `play_shotgun_load_shell()`\\n\\n### Shotgun (`Scripts/Weapons/Shotgun.cs`)\\n- Updated all sound methods to use proper shotgun sounds instead of placeholders\\n- Added shell ejection sound with 150ms delay after action opens (pump UP)\\n\\n## Sound Mapping for Each Action\\n\\n### Fire Sequence (LMB → RMB UP → RMB DOWN)\\n| Step | Action | Sound Method |\\n|------|--------|-------------|\\n| 1 | LMB Press - Fire | `play_shotgun_shot` (random 1-4) |\\n| 2 | RMB Drag UP - Eject shell | `play_shotgun_action_open` + `play_shell_shotgun` (+150ms) |\\n| 3 | RMB Drag DOWN - Chamber | `play_shotgun_action_close` |\\n\\n### Reload Sequence (RMB UP → [MMB + RMB DOWN]×N → RMB DOWN)\\n| Step | Action | Sound Method |\\n|------|--------|-------------|\\n| 1 | RMB Drag UP - Open bolt | `play_shotgun_action_open` |\\n| 2 | MMB + RMB Drag DOWN - Load shell | `play_shotgun_load_shell` (per shell) |\\n| 3 | RMB Drag DOWN - Close bolt | `play_shotgun_action_close` |\\n\\n### Empty Magazine\\n| Action | Sound Method |\\n|--------|-------------|\\n| LMB on empty | `play_shotgun_empty_click` |\\n\\n## Test Plan\\n- [ ] Fire shotgun and hear random shot sound (4 variants)\\n- [ ] RMB drag UP after firing - hear action open + shell eject sounds\\n- [ ] RMB drag DOWN after pump up - hear action close sound\\n- [ ] Start reload (RMB UP when not full) - hear action open\\n- [ ] Load shells (MMB + RMB DOWN) - hear shell load sound per shell\\n- [ ] Close bolt (RMB DOWN without MMB) - hear action close\\n- [ ] Fire empty shotgun (LMB) - hear shotgun-specific empty click\\n\\n## Fixes\\nFixes #204\\n\\n---\\n🤖 Generated with [Claude Code](https://claude.ai/code)\\n\\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\",\"number\":205,\"title\":\"Добавить звуки дробовику\"}]",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:20:44.695Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01EKubGVEsngDnV3GWDEf51x",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01AKdyN5rvdqoj7zyEddmLak",
+        "name": "TodoWrite",
+        "input": {
+          "todos": [
+            {
+              "content": "Read and analyze player sprite files structure",
+              "status": "completed",
+              "activeForm": "Analyzing player sprite files"
+            },
+            {
+              "content": "Create enemy body sprite (black version of player body)",
+              "status": "completed",
+              "activeForm": "Creating enemy body sprite"
+            },
+            {
+              "content": "Create enemy head sprite (black with white skull)",
+              "status": "completed",
+              "activeForm": "Creating enemy head sprite"
+            },
+            {
+              "content": "Create enemy arm sprites (black with white skull on forearm)",
+              "status": "completed",
+              "activeForm": "Creating enemy arm sprites"
+            },
+            {
+              "content": "Create combined preview image for enemy",
+              "status": "completed",
+              "activeForm": "Creating combined preview image"
+            },
+            {
+              "content": "Update Enemy.tscn to use new modular enemy sprites",
+              "status": "completed",
+              "activeForm": "Updating Enemy scene"
+            },
+            {
+              "content": "Check for any CI configuration that needs review",
+              "status": "completed",
+              "activeForm": "Checking CI configuration"
+            },
+            {
+              "content": "Commit and update PR",
+              "status": "in_progress",
+              "activeForm": "Committing and updating PR"
+            }
+          ]
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 4471,
+      "cache_read_input_tokens": 55198,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 4471,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 26,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "c5edab46-5341-4c85-9d6b-a4a5c3936913"
+}
+[2026-01-22T07:20:44.718Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01AKdyN5rvdqoj7zyEddmLak",
+        "type": "tool_result",
+        "content": "Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "3d05f9e2-723c-4149-8510-860a0ede825a",
+  "tool_use_result": {
+    "oldTodos": [
+      {
+        "content": "Read and analyze player sprite files structure",
+        "status": "completed",
+        "activeForm": "Analyzing player sprite files"
+      },
+      {
+        "content": "Create enemy body sprite (black version of player body)",
+        "status": "completed",
+        "activeForm": "Creating enemy body sprite"
+      },
+      {
+        "content": "Create enemy head sprite (black with white skull)",
+        "status": "completed",
+        "activeForm": "Creating enemy head sprite"
+      },
+      {
+        "content": "Create enemy arm sprites (black with white skull on forearm)",
+        "status": "completed",
+        "activeForm": "Creating enemy arm sprites"
+      },
+      {
+        "content": "Create combined preview image for enemy",
+        "status": "completed",
+        "activeForm": "Creating combined preview image"
+      },
+      {
+        "content": "Update Enemy.tscn to use new modular enemy sprites",
+        "status": "completed",
+        "activeForm": "Updating Enemy scene"
+      },
+      {
+        "content": "Check for any CI configuration that needs review",
+        "status": "in_progress",
+        "activeForm": "Checking CI configuration"
+      },
+      {
+        "content": "Commit and update PR",
+        "status": "pending",
+        "activeForm": "Committing and updating PR"
+      }
+    ],
+    "newTodos": [
+      {
+        "content": "Read and analyze player sprite files structure",
+        "status": "completed",
+        "activeForm": "Analyzing player sprite files"
+      },
+      {
+        "content": "Create enemy body sprite (black version of player body)",
+        "status": "completed",
+        "activeForm": "Creating enemy body sprite"
+      },
+      {
+        "content": "Create enemy head sprite (black with white skull)",
+        "status": "completed",
+        "activeForm": "Creating enemy head sprite"
+      },
+      {
+        "content": "Create enemy arm sprites (black with white skull on forearm)",
+        "status": "completed",
+        "activeForm": "Creating enemy arm sprites"
+      },
+      {
+        "content": "Create combined preview image for enemy",
+        "status": "completed",
+        "activeForm": "Creating combined preview image"
+      },
+      {
+        "content": "Update Enemy.tscn to use new modular enemy sprites",
+        "status": "completed",
+        "activeForm": "Updating Enemy scene"
+      },
+      {
+        "content": "Check for any CI configuration that needs review",
+        "status": "completed",
+        "activeForm": "Checking CI configuration"
+      },
+      {
+        "content": "Commit and update PR",
+        "status": "in_progress",
+        "activeForm": "Committing and updating PR"
+      }
+    ]
+  }
+}
+[2026-01-22T07:20:47.803Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_016vAt5mMGddYJLUXXBKPWbx",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Now let me commit the changes. First, let me check the current git log for commit message style:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 345,
+      "cache_read_input_tokens": 59669,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 345,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "e4a29175-3d56-44d9-ae93-c0b39de317f1"
+}
+[2026-01-22T07:20:48.443Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_016vAt5mMGddYJLUXXBKPWbx",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01UokcPFWrunJStcjPdRpDJn",
+        "name": "Bash",
+        "input": {
+          "command": "git log --oneline -10",
+          "description": "Check recent commit messages for style"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 345,
+      "cache_read_input_tokens": 59669,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 345,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "be6ba50c-ec2b-4341-a05a-63d202d91166"
+}
+[2026-01-22T07:20:48.544Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01UokcPFWrunJStcjPdRpDJn",
+        "type": "tool_result",
+        "content": "7975b29 Initial commit with task details\n751c691 Merge pull request #215 from konard/issue-210-53f792e0fc95\ncd42bfe Update case study with feedback #5/#6 analysis and fixes\n97110ca Fix reserve ammo display and increase cooldown to 750ms\n5075de6 Fix shell count to use spare magazines and increase cooldown to 500ms\n5dd2a9d Update case study with feedback #4 and shell count fix analysis\n3aadaea Fix shotgun shell count to use MaxReserveAmmo from WeaponData\n074f93b Update case study with complete user feedback timeline\n31acef1 Increase bolt close cooldown from 250ms to 400ms\nafcbcba Add cooldown protection to prevent accidental bolt reopening",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "ab2bb380-cf45-4e44-8a98-5eecfdef594c",
+  "tool_use_result": {
+    "stdout": "7975b29 Initial commit with task details\n751c691 Merge pull request #215 from konard/issue-210-53f792e0fc95\ncd42bfe Update case study with feedback #5/#6 analysis and fixes\n97110ca Fix reserve ammo display and increase cooldown to 750ms\n5075de6 Fix shell count to use spare magazines and increase cooldown to 500ms\n5dd2a9d Update case study with feedback #4 and shell count fix analysis\n3aadaea Fix shotgun shell count to use MaxReserveAmmo from WeaponData\n074f93b Update case study with complete user feedback timeline\n31acef1 Increase bolt close cooldown from 250ms to 400ms\nafcbcba Add cooldown protection to prevent accidental bolt reopening",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:20:50.943Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01RhF7AERpqgfvykCiGdJuae",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Now let me add the files and commit:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 300,
+      "cache_read_input_tokens": 60014,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 300,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 4,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "342a24cd-f460-497d-bf40-6b592b2dc84f"
+}
+[2026-01-22T07:20:52.230Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01RhF7AERpqgfvykCiGdJuae",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_012H4z9KVJ1Z77dv1EqQC9LA",
+        "name": "Bash",
+        "input": {
+          "command": "git add assets/sprites/characters/enemy/ scenes/objects/Enemy.tscn experiments/create_enemy_sprites.py && git status",
+          "description": "Stage files for commit"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 300,
+      "cache_read_input_tokens": 60014,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 300,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 4,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "669186da-8738-4267-a873-2b5e1da551d5"
+}
+[2026-01-22T07:20:53.542Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_012H4z9KVJ1Z77dv1EqQC9LA",
+        "type": "tool_result",
+        "content": "On branch issue-217-6e363ec134f9\nYour branch is up to date with 'origin/issue-217-6e363ec134f9'.\n\nChanges to be committed:\n  (use \"git restore --staged <file>...\" to unstage)\n\tnew file:   assets/sprites/characters/enemy/enemy_body.png\n\tnew file:   assets/sprites/characters/enemy/enemy_combined_preview.png\n\tnew file:   assets/sprites/characters/enemy/enemy_head.png\n\tnew file:   assets/sprites/characters/enemy/enemy_left_arm.png\n\tnew file:   assets/sprites/characters/enemy/enemy_right_arm.png\n\tnew file:   experiments/create_enemy_sprites.py\n\tmodified:   scenes/objects/Enemy.tscn",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "90a6a521-acc9-48bc-be4c-081cab73ab6f",
+  "tool_use_result": {
+    "stdout": "On branch issue-217-6e363ec134f9\nYour branch is up to date with 'origin/issue-217-6e363ec134f9'.\n\nChanges to be committed:\n  (use \"git restore --staged <file>...\" to unstage)\n\tnew file:   assets/sprites/characters/enemy/enemy_body.png\n\tnew file:   assets/sprites/characters/enemy/enemy_combined_preview.png\n\tnew file:   assets/sprites/characters/enemy/enemy_head.png\n\tnew file:   assets/sprites/characters/enemy/enemy_left_arm.png\n\tnew file:   assets/sprites/characters/enemy/enemy_right_arm.png\n\tnew file:   experiments/create_enemy_sprites.py\n\tmodified:   scenes/objects/Enemy.tscn",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:21:00.577Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01RF29EVW6457unSfBR6R6nK",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_011D1q3Y5jLVS3cgvZKg5Cn5",
+        "name": "Bash",
+        "input": {
+          "command": "git commit -m \"$(cat <<'EOF'\nAdd enemy models based on player sprites with skull markings\n\nCreated enemy character sprites as modular body parts (body, head, arms)\nbased on the player model structure. The enemy uses black coloring with\nwhite skull decorations on the head/helmet and forearms for visual\ndistinction from the player's green/military style.\n\n- Added enemy_body.png, enemy_head.png, enemy_left_arm.png, enemy_right_arm.png\n- Added enemy_combined_preview.png showing assembled character\n- Updated Enemy.tscn to use modular sprite system (EnemyModel node)\n- Replaced placeholder texture with proper body part sprites\n- Added sprite generation script to experiments/ for reproducibility\n\nFixes #217\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\"",
+          "description": "Commit the enemy model changes"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 314,
+      "cache_read_input_tokens": 60314,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 314,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 24,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "c0afb43b-986a-46f3-a4c3-fd8129752b67"
+}
+[2026-01-22T07:21:01.584Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_011D1q3Y5jLVS3cgvZKg5Cn5",
+        "type": "tool_result",
+        "content": "[issue-217-6e363ec134f9 026747e] Add enemy models based on player sprites with skull markings\n 7 files changed, 207 insertions(+), 8 deletions(-)\n create mode 100644 assets/sprites/characters/enemy/enemy_body.png\n create mode 100644 assets/sprites/characters/enemy/enemy_combined_preview.png\n create mode 100644 assets/sprites/characters/enemy/enemy_head.png\n create mode 100644 assets/sprites/characters/enemy/enemy_left_arm.png\n create mode 100644 assets/sprites/characters/enemy/enemy_right_arm.png\n create mode 100644 experiments/create_enemy_sprites.py",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "922cf14c-704e-4f18-8b12-c3bf08aa771c",
+  "tool_use_result": {
+    "stdout": "[issue-217-6e363ec134f9 026747e] Add enemy models based on player sprites with skull markings\n 7 files changed, 207 insertions(+), 8 deletions(-)\n create mode 100644 assets/sprites/characters/enemy/enemy_body.png\n create mode 100644 assets/sprites/characters/enemy/enemy_combined_preview.png\n create mode 100644 assets/sprites/characters/enemy/enemy_head.png\n create mode 100644 assets/sprites/characters/enemy/enemy_left_arm.png\n create mode 100644 assets/sprites/characters/enemy/enemy_right_arm.png\n create mode 100644 experiments/create_enemy_sprites.py",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:21:04.590Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01XPnC7FEhWZdptDJ3TnGtdm",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01QfTM4w7m2tr5JWFKTrjLJV",
+        "name": "Bash",
+        "input": {
+          "command": "git push origin issue-217-6e363ec134f9",
+          "description": "Push changes to remote"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 465,
+      "cache_read_input_tokens": 60628,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 465,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 25,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "937e3f63-4234-47bd-9f0e-8a078204c1a0"
+}
+[2026-01-22T07:21:06.843Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01QfTM4w7m2tr5JWFKTrjLJV",
+        "type": "tool_result",
+        "content": "To https://github.com/konard/Jhon-Crow-godot-topdown-MVP.git\n   7975b29..026747e  issue-217-6e363ec134f9 -> issue-217-6e363ec134f9",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "e1b18861-d3ac-4af4-9cf5-646faca94212",
+  "tool_use_result": {
+    "stdout": "To https://github.com/konard/Jhon-Crow-godot-topdown-MVP.git\n   7975b29..026747e  issue-217-6e363ec134f9 -> issue-217-6e363ec134f9",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:21:09.355Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01PYcHBJ4vGaCpidMRWjur3y",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Now let me update the PR description with details about the implementation:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 158,
+      "cache_read_input_tokens": 61093,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 158,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 4,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "04d6feff-22d4-4975-84a0-0fbaa1b46e4d"
+}
+[2026-01-22T07:21:18.121Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01PYcHBJ4vGaCpidMRWjur3y",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01BLw1VLpaMdVCykrVtVVcG2",
+        "name": "Bash",
+        "input": {
+          "command": "gh pr edit 221 --repo Jhon-Crow/godot-topdown-MVP --title \"Добавить модельки врагов\" --body \"$(cat <<'EOF'\n## Summary\n\nСоздал модельки врагов на основе модельки игрока:\n- Основной цвет - чёрный\n- Белые черепа на шлеме (голове) и на предплечьях\n\n## Changes\n\n### Enemy Sprites (новые файлы)\nСоздал модульные спрайты врага в `assets/sprites/characters/enemy/`:\n- `enemy_body.png` - тело врага (чёрное)\n- `enemy_head.png` - голова/шлем с белым черепом\n- `enemy_left_arm.png` - левая рука с черепом на предплечье\n- `enemy_right_arm.png` - правая рука с черепом на предплечье\n- `enemy_combined_preview.png` - превью собранной модели\n\n### Enemy.tscn\nОбновил сцену врага для использования модульной системы спрайтов (аналогично Player.tscn):\n- Добавил узел `EnemyModel` с Body, Head, LeftArm, RightArm\n- Заменил красный placeholder на настоящие спрайты\n- Сохранил WeaponMount для оружия\n\n### Sprite Generation Script\nДобавил скрипт `experiments/create_enemy_sprites.py` для воспроизведения генерации спрайтов.\n\n## Screenshots\n\nСравнение спрайтов:\n\n| Player (green) | Enemy (black + skull) |\n|----------------|----------------------|\n| Body + Head + Arms | Body + Head (skull) + Arms (skulls) |\n\n## Test Plan\n\n- [x] Enemy sprites created based on player structure\n- [x] Black coloring applied to all body parts\n- [x] White skulls visible on head and forearms\n- [ ] Verify in-game appearance matches design\n\nFixes #217\n\n---\n🤖 Generated with [Claude Code](https://claude.com/claude-code)\nEOF\n)\"",
+          "description": "Update PR description"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 158,
+      "cache_read_input_tokens": 61093,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 158,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 4,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "8b98bc6f-f46c-41b8-af5a-005da2ca7409"
+}
+[2026-01-22T07:21:20.979Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01BLw1VLpaMdVCykrVtVVcG2",
+        "type": "tool_result",
+        "content": "https://github.com/Jhon-Crow/godot-topdown-MVP/pull/221",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "eeb3ae07-896f-4ff9-a3f5-cd7a983ac0ba",
+  "tool_use_result": {
+    "stdout": "https://github.com/Jhon-Crow/godot-topdown-MVP/pull/221",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:21:23.338Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01N11J18v8qCYS6NnJnR7ka2",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Now let me check if CI is passing by monitoring the workflow:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 662,
+      "cache_read_input_tokens": 61251,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 662,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 6,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "b506dd9f-3323-4cc5-835e-fb4544c67e18"
+}
+[2026-01-22T07:21:24.789Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01N11J18v8qCYS6NnJnR7ka2",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01C7GA9NV7DyGckDv7PX3Gar",
+        "name": "Bash",
+        "input": {
+          "command": "gh run list --repo konard/Jhon-Crow-godot-topdown-MVP --branch issue-217-6e363ec134f9 --limit 5 --json databaseId,conclusion,createdAt,headSha,status",
+          "description": "Check CI status"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 662,
+      "cache_read_input_tokens": 61251,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 662,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 6,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "493c0206-f760-4158-b05c-796075bd1f30"
+}
+[2026-01-22T07:21:26.447Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01C7GA9NV7DyGckDv7PX3Gar",
+        "type": "tool_result",
+        "content": "[{\"conclusion\":\"\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685417,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"status\":\"in_progress\"},{\"conclusion\":\"\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685404,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"status\":\"in_progress\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685420,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:16:54Z\",\"databaseId\":21239588360,\"headSha\":\"7975b295b5061a65cf0a5ed1c3babaf1beee9df7\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:16:54Z\",\"databaseId\":21239588373,\"headSha\":\"7975b295b5061a65cf0a5ed1c3babaf1beee9df7\",\"status\":\"completed\"}]",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "951c185a-a0eb-4ffd-8b96-b9c0def9310c",
+  "tool_use_result": {
+    "stdout": "[{\"conclusion\":\"\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685417,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"status\":\"in_progress\"},{\"conclusion\":\"\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685404,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"status\":\"in_progress\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685420,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:16:54Z\",\"databaseId\":21239588360,\"headSha\":\"7975b295b5061a65cf0a5ed1c3babaf1beee9df7\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:16:54Z\",\"databaseId\":21239588373,\"headSha\":\"7975b295b5061a65cf0a5ed1c3babaf1beee9df7\",\"status\":\"completed\"}]",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:21:29.722Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01XmEMyTF7tcx1NdwxEnUFMr",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Two workflows are still in progress, one (architecture check) has passed. Let me wait a moment and check again:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 723,
+      "cache_read_input_tokens": 61913,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 723,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "512b05e9-1222-4274-bf44-367d06669355"
+}
+[2026-01-22T07:21:30.767Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01XmEMyTF7tcx1NdwxEnUFMr",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01ThmBBFMzVmJXHQgRj5epJ2",
+        "name": "Bash",
+        "input": {
+          "command": "sleep 30 && gh run list --repo konard/Jhon-Crow-godot-topdown-MVP --branch issue-217-6e363ec134f9 --limit 5 --json databaseId,conclusion,createdAt,headSha,status,name",
+          "description": "Wait and check CI status again"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 723,
+      "cache_read_input_tokens": 61913,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 723,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "d669ace8-fb74-4b5c-a037-6cc26d2597e5"
+}
+[2026-01-22T07:22:03.335Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01ThmBBFMzVmJXHQgRj5epJ2",
+        "type": "tool_result",
+        "content": "[{\"conclusion\":\"\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685404,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"name\":\"Build Windows Portable EXE\",\"status\":\"in_progress\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685420,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"name\":\"Architecture Best Practices Check\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685417,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"name\":\"Run GUT Tests\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:16:54Z\",\"databaseId\":21239588360,\"headSha\":\"7975b295b5061a65cf0a5ed1c3babaf1beee9df7\",\"name\":\"Architecture Best Practices Check\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:16:54Z\",\"databaseId\":21239588373,\"headSha\":\"7975b295b5061a65cf0a5ed1c3babaf1beee9df7\",\"name\":\"Run GUT Tests\",\"status\":\"completed\"}]",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "aa4d25eb-68d4-4802-a89d-f3ad78807eea",
+  "tool_use_result": {
+    "stdout": "[{\"conclusion\":\"\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685404,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"name\":\"Build Windows Portable EXE\",\"status\":\"in_progress\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685420,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"name\":\"Architecture Best Practices Check\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685417,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"name\":\"Run GUT Tests\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:16:54Z\",\"databaseId\":21239588360,\"headSha\":\"7975b295b5061a65cf0a5ed1c3babaf1beee9df7\",\"name\":\"Architecture Best Practices Check\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:16:54Z\",\"databaseId\":21239588373,\"headSha\":\"7975b295b5061a65cf0a5ed1c3babaf1beee9df7\",\"name\":\"Run GUT Tests\",\"status\":\"completed\"}]",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:22:06.404Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_0142JWuKuZRVG3iosHvriD8u",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Architecture check and GUT Tests are passing. Only the Windows build is still running (that takes longer). Let me wait for it:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 544,
+      "cache_read_input_tokens": 62636,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 544,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "1ce3c82f-cbda-448f-8db5-5e0f06d8b9ed"
+}
+[2026-01-22T07:22:07.320Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_0142JWuKuZRVG3iosHvriD8u",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01HahjDsT2sdUHaaYmYWSEs2",
+        "name": "Bash",
+        "input": {
+          "command": "sleep 60 && gh run list --repo konard/Jhon-Crow-godot-topdown-MVP --branch issue-217-6e363ec134f9 --limit 5 --json databaseId,conclusion,createdAt,headSha,status,name",
+          "description": "Wait for Windows build to complete"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 544,
+      "cache_read_input_tokens": 62636,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 544,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "e88ad9af-341e-419c-a19e-dced4a1308c5"
+}
+[2026-01-22T07:23:09.480Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01HahjDsT2sdUHaaYmYWSEs2",
+        "type": "tool_result",
+        "content": "[{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685420,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"name\":\"Architecture Best Practices Check\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685417,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"name\":\"Run GUT Tests\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685404,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"name\":\"Build Windows Portable EXE\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:16:54Z\",\"databaseId\":21239588360,\"headSha\":\"7975b295b5061a65cf0a5ed1c3babaf1beee9df7\",\"name\":\"Architecture Best Practices Check\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:16:54Z\",\"databaseId\":21239588373,\"headSha\":\"7975b295b5061a65cf0a5ed1c3babaf1beee9df7\",\"name\":\"Run GUT Tests\",\"status\":\"completed\"}]",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "8ec08219-c5a8-4177-b68f-a1ff92792469",
+  "tool_use_result": {
+    "stdout": "[{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685420,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"name\":\"Architecture Best Practices Check\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685417,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"name\":\"Run GUT Tests\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:21:08Z\",\"databaseId\":21239685404,\"headSha\":\"026747e94acf505c01b308655b8de2f8e90f0e02\",\"name\":\"Build Windows Portable EXE\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:16:54Z\",\"databaseId\":21239588360,\"headSha\":\"7975b295b5061a65cf0a5ed1c3babaf1beee9df7\",\"name\":\"Architecture Best Practices Check\",\"status\":\"completed\"},{\"conclusion\":\"success\",\"createdAt\":\"2026-01-22T07:16:54Z\",\"databaseId\":21239588373,\"headSha\":\"7975b295b5061a65cf0a5ed1c3babaf1beee9df7\",\"name\":\"Run GUT Tests\",\"status\":\"completed\"}]",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:23:12.111Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01VsYxDs1oWArztTmDFWEeoR",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "All CI checks are passing. Now let me mark the PR as ready for review:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 546,
+      "cache_read_input_tokens": 63180,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 546,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "cb582373-d91c-4c3d-97bf-53e1342461f8"
+}
+[2026-01-22T07:23:12.770Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01VsYxDs1oWArztTmDFWEeoR",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01Nbe83nabvPAPCFRpp4fhhw",
+        "name": "Bash",
+        "input": {
+          "command": "gh pr ready 221 --repo Jhon-Crow/godot-topdown-MVP",
+          "description": "Mark PR as ready for review"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 546,
+      "cache_read_input_tokens": 63180,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 546,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "4549c7af-d994-427f-bca5-d4d3580f92fb"
+}
+[2026-01-22T07:23:14.156Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01Nbe83nabvPAPCFRpp4fhhw",
+        "type": "tool_result",
+        "content": "✓ Pull request Jhon-Crow/godot-topdown-MVP#221 is marked as \"ready for review\"",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "2950fdd8-ebbd-40ad-9f23-728aa56917ec",
+  "tool_use_result": {
+    "stdout": "✓ Pull request Jhon-Crow/godot-topdown-MVP#221 is marked as \"ready for review\"",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:23:18.746Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_015jxKUpmX42yEeZQrrMqyM9",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01AGAVDqzVKRGbT3VybUiDps",
+        "name": "TodoWrite",
+        "input": {
+          "todos": [
+            {
+              "content": "Read and analyze player sprite files structure",
+              "status": "completed",
+              "activeForm": "Analyzing player sprite files"
+            },
+            {
+              "content": "Create enemy body sprite (black version of player body)",
+              "status": "completed",
+              "activeForm": "Creating enemy body sprite"
+            },
+            {
+              "content": "Create enemy head sprite (black with white skull)",
+              "status": "completed",
+              "activeForm": "Creating enemy head sprite"
+            },
+            {
+              "content": "Create enemy arm sprites (black with white skull on forearm)",
+              "status": "completed",
+              "activeForm": "Creating enemy arm sprites"
+            },
+            {
+              "content": "Create combined preview image for enemy",
+              "status": "completed",
+              "activeForm": "Creating combined preview image"
+            },
+            {
+              "content": "Update Enemy.tscn to use new modular enemy sprites",
+              "status": "completed",
+              "activeForm": "Updating Enemy scene"
+            },
+            {
+              "content": "Check for any CI configuration that needs review",
+              "status": "completed",
+              "activeForm": "Checking CI configuration"
+            },
+            {
+              "content": "Commit and update PR",
+              "status": "completed",
+              "activeForm": "Committing and updating PR"
+            }
+          ]
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 155,
+      "cache_read_input_tokens": 63726,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 155,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 25,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "e0952241-16ab-4559-9b13-24cad1df8db1"
+}
+[2026-01-22T07:23:18.773Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01AGAVDqzVKRGbT3VybUiDps",
+        "type": "tool_result",
+        "content": "Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "559964c3-7553-413a-811a-46ab5ccc6322",
+  "tool_use_result": {
+    "oldTodos": [
+      {
+        "content": "Read and analyze player sprite files structure",
+        "status": "completed",
+        "activeForm": "Analyzing player sprite files"
+      },
+      {
+        "content": "Create enemy body sprite (black version of player body)",
+        "status": "completed",
+        "activeForm": "Creating enemy body sprite"
+      },
+      {
+        "content": "Create enemy head sprite (black with white skull)",
+        "status": "completed",
+        "activeForm": "Creating enemy head sprite"
+      },
+      {
+        "content": "Create enemy arm sprites (black with white skull on forearm)",
+        "status": "completed",
+        "activeForm": "Creating enemy arm sprites"
+      },
+      {
+        "content": "Create combined preview image for enemy",
+        "status": "completed",
+        "activeForm": "Creating combined preview image"
+      },
+      {
+        "content": "Update Enemy.tscn to use new modular enemy sprites",
+        "status": "completed",
+        "activeForm": "Updating Enemy scene"
+      },
+      {
+        "content": "Check for any CI configuration that needs review",
+        "status": "completed",
+        "activeForm": "Checking CI configuration"
+      },
+      {
+        "content": "Commit and update PR",
+        "status": "in_progress",
+        "activeForm": "Committing and updating PR"
+      }
+    ],
+    "newTodos": [
+      {
+        "content": "Read and analyze player sprite files structure",
+        "status": "completed",
+        "activeForm": "Analyzing player sprite files"
+      },
+      {
+        "content": "Create enemy body sprite (black version of player body)",
+        "status": "completed",
+        "activeForm": "Creating enemy body sprite"
+      },
+      {
+        "content": "Create enemy head sprite (black with white skull)",
+        "status": "completed",
+        "activeForm": "Creating enemy head sprite"
+      },
+      {
+        "content": "Create enemy arm sprites (black with white skull on forearm)",
+        "status": "completed",
+        "activeForm": "Creating enemy arm sprites"
+      },
+      {
+        "content": "Create combined preview image for enemy",
+        "status": "completed",
+        "activeForm": "Creating combined preview image"
+      },
+      {
+        "content": "Update Enemy.tscn to use new modular enemy sprites",
+        "status": "completed",
+        "activeForm": "Updating Enemy scene"
+      },
+      {
+        "content": "Check for any CI configuration that needs review",
+        "status": "completed",
+        "activeForm": "Checking CI configuration"
+      },
+      {
+        "content": "Commit and update PR",
+        "status": "completed",
+        "activeForm": "Committing and updating PR"
+      }
+    ]
+  }
+}
+[2026-01-22T07:23:22.437Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01T2X2sQc3ZFkgJcgKL1oEvj",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "Let me verify the final state of the PR:"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 343,
+      "cache_read_input_tokens": 63881,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 343,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "58aabb9d-2852-42d9-854b-ac09318f8893"
+}
+[2026-01-22T07:23:23.080Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_01T2X2sQc3ZFkgJcgKL1oEvj",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "tool_use",
+        "id": "toolu_01Ct8eBAqC5MUApEfuGrUiqV",
+        "name": "Bash",
+        "input": {
+          "command": "gh pr view 221 --repo Jhon-Crow/godot-topdown-MVP",
+          "description": "View final PR state"
+        }
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 343,
+      "cache_read_input_tokens": 63881,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 343,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "9ee2f746-b0e7-40ef-a3b1-f20c9ab45f3b"
+}
+[2026-01-22T07:23:24.193Z] [INFO] {
+  "type": "user",
+  "message": {
+    "role": "user",
+    "content": [
+      {
+        "tool_use_id": "toolu_01Ct8eBAqC5MUApEfuGrUiqV",
+        "type": "tool_result",
+        "content": "title:\tДобавить модельки врагов\nstate:\tOPEN\nauthor:\tkonard\nlabels:\t\nassignees:\t\nreviewers:\t\nprojects:\t\nmilestone:\t\nnumber:\t221\nurl:\thttps://github.com/Jhon-Crow/godot-topdown-MVP/pull/221\nadditions:\t214\ndeletions:\t8\nauto-merge:\tdisabled\n--\n## Summary\n\nСоздал модельки врагов на основе модельки игрока:\n- Основной цвет - чёрный\n- Белые черепа на шлеме (голове) и на предплечьях\n\n## Changes\n\n### Enemy Sprites (новые файлы)\nСоздал модульные спрайты врага в `assets/sprites/characters/enemy/`:\n- `enemy_body.png` - тело врага (чёрное)\n- `enemy_head.png` - голова/шлем с белым черепом\n- `enemy_left_arm.png` - левая рука с черепом на предплечье\n- `enemy_right_arm.png` - правая рука с черепом на предплечье\n- `enemy_combined_preview.png` - превью собранной модели\n\n### Enemy.tscn\nОбновил сцену врага для использования модульной системы спрайтов (аналогично Player.tscn):\n- Добавил узел `EnemyModel` с Body, Head, LeftArm, RightArm\n- Заменил красный placeholder на настоящие спрайты\n- Сохранил WeaponMount для оружия\n\n### Sprite Generation Script\nДобавил скрипт `experiments/create_enemy_sprites.py` для воспроизведения генерации спрайтов.\n\n## Screenshots\n\nСравнение спрайтов:\n\n| Player (green) | Enemy (black + skull) |\n|----------------|----------------------|\n| Body + Head + Arms | Body + Head (skull) + Arms (skulls) |\n\n## Test Plan\n\n- [x] Enemy sprites created based on player structure\n- [x] Black coloring applied to all body parts\n- [x] White skulls visible on head and forearms\n- [ ] Verify in-game appearance matches design\n\nFixes #217\n\n---\n🤖 Generated with [Claude Code](https://claude.com/claude-code)",
+        "is_error": false
+      }
+    ]
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "0c7cbdf7-54b1-4ab2-a6d0-90b861633b78",
+  "tool_use_result": {
+    "stdout": "title:\tДобавить модельки врагов\nstate:\tOPEN\nauthor:\tkonard\nlabels:\t\nassignees:\t\nreviewers:\t\nprojects:\t\nmilestone:\t\nnumber:\t221\nurl:\thttps://github.com/Jhon-Crow/godot-topdown-MVP/pull/221\nadditions:\t214\ndeletions:\t8\nauto-merge:\tdisabled\n--\n## Summary\n\nСоздал модельки врагов на основе модельки игрока:\n- Основной цвет - чёрный\n- Белые черепа на шлеме (голове) и на предплечьях\n\n## Changes\n\n### Enemy Sprites (новые файлы)\nСоздал модульные спрайты врага в `assets/sprites/characters/enemy/`:\n- `enemy_body.png` - тело врага (чёрное)\n- `enemy_head.png` - голова/шлем с белым черепом\n- `enemy_left_arm.png` - левая рука с черепом на предплечье\n- `enemy_right_arm.png` - правая рука с черепом на предплечье\n- `enemy_combined_preview.png` - превью собранной модели\n\n### Enemy.tscn\nОбновил сцену врага для использования модульной системы спрайтов (аналогично Player.tscn):\n- Добавил узел `EnemyModel` с Body, Head, LeftArm, RightArm\n- Заменил красный placeholder на настоящие спрайты\n- Сохранил WeaponMount для оружия\n\n### Sprite Generation Script\nДобавил скрипт `experiments/create_enemy_sprites.py` для воспроизведения генерации спрайтов.\n\n## Screenshots\n\nСравнение спрайтов:\n\n| Player (green) | Enemy (black + skull) |\n|----------------|----------------------|\n| Body + Head + Arms | Body + Head (skull) + Arms (skulls) |\n\n## Test Plan\n\n- [x] Enemy sprites created based on player structure\n- [x] Black coloring applied to all body parts\n- [x] White skulls visible on head and forearms\n- [ ] Verify in-game appearance matches design\n\nFixes #217\n\n---\n🤖 Generated with [Claude Code](https://claude.com/claude-code)",
+    "stderr": "",
+    "interrupted": false,
+    "isImage": false
+  }
+}
+[2026-01-22T07:23:32.612Z] [INFO] {
+  "type": "assistant",
+  "message": {
+    "model": "claude-opus-4-5-20251101",
+    "id": "msg_013TySyZLEwjkuW3n6ndMtqJ",
+    "type": "message",
+    "role": "assistant",
+    "content": [
+      {
+        "type": "text",
+        "text": "The implementation is complete. Here's a summary of what was done:\n\n## Summary\n\nI've successfully implemented enemy models based on the player model structure as requested in issue #217.\n\n### Changes Made\n\n1. **Created Enemy Sprites** (`assets/sprites/characters/enemy/`):\n   - `enemy_body.png` - Black body sprite (28x24 pixels)\n   - `enemy_head.png` - Black head with white skull on helmet (14x18 pixels)\n   - `enemy_left_arm.png` - Black arm with white skull on forearm (20x8 pixels)\n   - `enemy_right_arm.png` - Black arm with white skull on forearm (20x8 pixels)\n   - `enemy_combined_preview.png` - Preview showing assembled character (64x64 pixels)\n\n2. **Updated `scenes/objects/Enemy.tscn`**:\n   - Replaced the red placeholder texture with a modular sprite system\n   - Added `EnemyModel` node containing Body, Head, LeftArm, RightArm (similar to Player.tscn)\n   - Positioned sprites using same offsets as player model\n   - Kept WeaponMount for weapon attachment\n\n3. **Added Generation Script** (`experiments/create_enemy_sprites.py`):\n   - Python script that programmatically generates the enemy sprites\n   - Can be used to regenerate or modify the sprites in the future\n\n### Visual Design\n- Main color: **Black** (dark gray for visibility)\n- Skull decoration: **White skulls** on the head/helmet and forearms\n- Structure: Modular body parts matching player design\n\n### CI Status\nAll CI checks passed:\n- Architecture Best Practices Check ✓\n- Run GUT Tests ✓\n- Build Windows Portable EXE ✓\n\n**Pull Request**: https://github.com/Jhon-Crow/godot-topdown-MVP/pull/221"
+      }
+    ],
+    "stop_reason": null,
+    "stop_sequence": null,
+    "usage": {
+      "input_tokens": 0,
+      "cache_creation_input_tokens": 708,
+      "cache_read_input_tokens": 64224,
+      "cache_creation": {
+        "ephemeral_5m_input_tokens": 708,
+        "ephemeral_1h_input_tokens": 0
+      },
+      "output_tokens": 1,
+      "service_tier": "standard"
+    },
+    "context_management": null
+  },
+  "parent_tool_use_id": null,
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "uuid": "f7e2f322-71dd-449d-ad8e-fe6b036e4f5b"
+}
+[2026-01-22T07:23:32.645Z] [INFO] {
+  "type": "result",
+  "subtype": "success",
+  "is_error": false,
+  "duration_ms": 375367,
+  "duration_api_ms": 286149,
+  "num_turns": 49,
+  "result": "The implementation is complete. Here's a summary of what was done:\n\n## Summary\n\nI've successfully implemented enemy models based on the player model structure as requested in issue #217.\n\n### Changes Made\n\n1. **Created Enemy Sprites** (`assets/sprites/characters/enemy/`):\n   - `enemy_body.png` - Black body sprite (28x24 pixels)\n   - `enemy_head.png` - Black head with white skull on helmet (14x18 pixels)\n   - `enemy_left_arm.png` - Black arm with white skull on forearm (20x8 pixels)\n   - `enemy_right_arm.png` - Black arm with white skull on forearm (20x8 pixels)\n   - `enemy_combined_preview.png` - Preview showing assembled character (64x64 pixels)\n\n2. **Updated `scenes/objects/Enemy.tscn`**:\n   - Replaced the red placeholder texture with a modular sprite system\n   - Added `EnemyModel` node containing Body, Head, LeftArm, RightArm (similar to Player.tscn)\n   - Positioned sprites using same offsets as player model\n   - Kept WeaponMount for weapon attachment\n\n3. **Added Generation Script** (`experiments/create_enemy_sprites.py`):\n   - Python script that programmatically generates the enemy sprites\n   - Can be used to regenerate or modify the sprites in the future\n\n### Visual Design\n- Main color: **Black** (dark gray for visibility)\n- Skull decoration: **White skulls** on the head/helmet and forearms\n- Structure: Modular body parts matching player design\n\n### CI Status\nAll CI checks passed:\n- Architecture Best Practices Check ✓\n- Run GUT Tests ✓\n- Build Windows Portable EXE ✓\n\n**Pull Request**: https://github.com/Jhon-Crow/godot-topdown-MVP/pull/221",
+  "session_id": "19778b76-aaef-4c8b-ab74-908a92670320",
+  "total_cost_usd": 1.5348854499999995,
+  "usage": {
+    "input_tokens": 1312,
+    "cache_creation_input_tokens": 46028,
+    "cache_read_input_tokens": 1762386,
+    "output_tokens": 10907,
+    "server_tool_use": {
+      "web_search_requests": 0,
+      "web_fetch_requests": 0
+    },
+    "service_tier": "standard",
+    "cache_creation": {
+      "ephemeral_1h_input_tokens": 0,
+      "ephemeral_5m_input_tokens": 46028
+    }
+  },
+  "modelUsage": {
+    "claude-haiku-4-5-20251001": {
+      "inputTokens": 27030,
+      "outputTokens": 3457,
+      "cacheReadInputTokens": 131187,
+      "cacheCreationInputTokens": 23479,
+      "webSearchRequests": 0,
+      "costUSD": 0.08678244999999998,
+      "contextWindow": 200000,
+      "maxOutputTokens": 64000
+    },
+    "claude-opus-4-5-20251101": {
+      "inputTokens": 1312,
+      "outputTokens": 10907,
+      "cacheReadInputTokens": 1762386,
+      "cacheCreationInputTokens": 46028,
+      "webSearchRequests": 0,
+      "costUSD": 1.448103,
+      "contextWindow": 200000,
+      "maxOutputTokens": 64000
+    }
+  },
+  "permission_denials": [],
+  "uuid": "b94e5d2a-e0e2-457d-81c2-14d099fc2acf"
+}
+[2026-01-22T07:23:32.646Z] [INFO] 💰 Anthropic official cost captured from success result: $1.534885
+[2026-01-22T07:23:33.180Z] [INFO] 
+
+✅ Claude command completed
+[2026-01-22T07:23:33.181Z] [INFO] 📊 Total messages: 0, Tool uses: 0
+[2026-01-22T07:23:33.290Z] [INFO] 
+💰 Token Usage Summary:
+[2026-01-22T07:23:33.291Z] [INFO] 
+   📊 Claude Opus 4.5:
+[2026-01-22T07:23:33.292Z] [INFO]       Model ID: claude-opus-4-5-20251101
+[2026-01-22T07:23:33.292Z] [INFO]       Provider: Anthropic
+[2026-01-22T07:23:33.292Z] [INFO]       Context window: 200 000 tokens
+[2026-01-22T07:23:33.292Z] [INFO]       Max output: 64 000 tokens
+[2026-01-22T07:23:33.293Z] [INFO]       Input modalities: text, image, pdf
+[2026-01-22T07:23:33.293Z] [INFO]       Output modalities: text
+[2026-01-22T07:23:33.293Z] [INFO]       Knowledge cutoff: 2025-03-31
+[2026-01-22T07:23:33.293Z] [INFO]       Released: 2025-11-01
+[2026-01-22T07:23:33.293Z] [INFO]       Capabilities: Attachments, Reasoning, Temperature, Tool calls
+[2026-01-22T07:23:33.293Z] [INFO]       Open weights: No
+[2026-01-22T07:23:33.294Z] [INFO] 
+[2026-01-22T07:23:33.294Z] [INFO]       Usage:
+[2026-01-22T07:23:33.294Z] [INFO]         Input tokens: 2 624
+[2026-01-22T07:23:33.294Z] [INFO]         Cache creation tokens: 81 562
+[2026-01-22T07:23:33.294Z] [INFO]         Cache read tokens: 3 245 599
+[2026-01-22T07:23:33.295Z] [INFO]         Output tokens: 496
+[2026-01-22T07:23:33.295Z] [INFO] 
+[2026-01-22T07:23:33.295Z] [INFO]       Cost Calculation (USD):
+[2026-01-22T07:23:33.296Z] [INFO]         Input: 2 624 tokens × $5/M = $0.013120
+[2026-01-22T07:23:33.296Z] [INFO]         Cache write: 81 562 tokens × $6.25/M = $0.509763
+[2026-01-22T07:23:33.296Z] [INFO]         Cache read: 3 245 599 tokens × $0.5/M = $1.622799
+[2026-01-22T07:23:33.296Z] [INFO]         Output: 496 tokens × $25/M = $0.012400
+[2026-01-22T07:23:33.297Z] [INFO]         ─────────────────────────────────
+[2026-01-22T07:23:33.297Z] [INFO]         Total: $2.158082
+[2026-01-22T07:23:33.297Z] [INFO] 
+      📊 Token Budget Statistics:
+[2026-01-22T07:23:33.297Z] [INFO]         Context window:
+[2026-01-22T07:23:33.298Z] [INFO]           Used: 3 329 785 tokens
+[2026-01-22T07:23:33.298Z] [INFO]           Limit: 200 000 tokens
+[2026-01-22T07:23:33.298Z] [INFO]           Ratio: 16.6489 (1664.89%)
+[2026-01-22T07:23:33.298Z] [INFO]         Output tokens:
+[2026-01-22T07:23:33.298Z] [INFO]           Used: 496 tokens
+[2026-01-22T07:23:33.299Z] [INFO]           Limit: 64 000 tokens
+[2026-01-22T07:23:33.299Z] [INFO]           Ratio: 0.0077 (0.78%)
+[2026-01-22T07:23:33.299Z] [INFO]         Total session tokens: 84 682
+[2026-01-22T07:23:33.299Z] [INFO] 
+   💰 Cost estimation:
+[2026-01-22T07:23:33.300Z] [INFO]       Public pricing estimate: $2.158082 USD
+[2026-01-22T07:23:33.300Z] [INFO]       Calculated by Anthropic: $1.534885 USD
+[2026-01-22T07:23:33.300Z] [INFO]       Difference:              $-0.623197 (-28.88%)
+[2026-01-22T07:23:33.300Z] [INFO]       Total tokens: 84 682
+[2026-01-22T07:23:33.301Z] [INFO] 
+💡 To continue this session in Claude Code interactive mode:
+
+[2026-01-22T07:23:33.301Z] [INFO]    (cd "/tmp/gh-issue-solver-1769066205054" && claude --resume 19778b76-aaef-4c8b-ab74-908a92670320 --model opus)
+
+[2026-01-22T07:23:33.301Z] [INFO] 
+🔍 Checking for uncommitted changes...
+[2026-01-22T07:23:33.352Z] [INFO] ✅ No uncommitted changes found
+[2026-01-22T07:23:33.404Z] [INFO] 🔄 Cleanup:                  Reverting CLAUDE.md commit
+[2026-01-22T07:23:33.404Z] [INFO]    Using saved commit hash: 7975b29...
+[2026-01-22T07:23:33.405Z] [INFO]    Checking if CLAUDE.md was modified since initial commit...
+[2026-01-22T07:23:33.447Z] [INFO]    No modifications detected, using standard git revert...
+[2026-01-22T07:23:33.497Z] [INFO] 📦 Committed:                CLAUDE.md revert
+[2026-01-22T07:23:34.262Z] [INFO] 📤 Pushed:                   CLAUDE.md revert to GitHub
+[2026-01-22T07:23:34.263Z] [INFO] 
+=== Session Summary ===
+[2026-01-22T07:23:34.263Z] [INFO] ✅ Session ID: 19778b76-aaef-4c8b-ab74-908a92670320
+[2026-01-22T07:23:34.264Z] [INFO] ✅ Complete log file: /home/hive/19778b76-aaef-4c8b-ab74-908a92670320.log
+[2026-01-22T07:23:34.264Z] [INFO] 
+[2026-01-22T07:23:34.264Z] [INFO] 💡 To continue this session in Claude Code interactive mode:
+[2026-01-22T07:23:34.264Z] [INFO] 
+[2026-01-22T07:23:34.264Z] [INFO]    (cd "/tmp/gh-issue-solver-1769066205054" && claude --resume 19778b76-aaef-4c8b-ab74-908a92670320 --model opus)
+[2026-01-22T07:23:34.264Z] [INFO] 
+[2026-01-22T07:23:34.265Z] [INFO] 
+🔍 Searching for created pull requests or comments...
+[2026-01-22T07:23:34.568Z] [INFO] 
+🔍 Checking for pull requests from branch issue-217-6e363ec134f9...
+[2026-01-22T07:23:35.046Z] [INFO]   ✅ Found pull request #221: "Добавить модельки врагов"
+[2026-01-22T07:23:35.406Z] [INFO]   ✅ PR body already contains issue reference
+[2026-01-22T07:23:35.407Z] [INFO]   ✅ PR is already ready for review
+[2026-01-22T07:23:35.408Z] [INFO] 
+📎 Uploading solution draft log to Pull Request...
+[2026-01-22T07:23:35.461Z] [INFO]   💰 Calculated cost: $2.158082
diff --git a/docs/case-studies/issue-217/pr-conversation-comments.json b/docs/case-studies/issue-217/pr-conversation-comments.json
new file mode 100644
index 00000000..2407251c
--- /dev/null
+++ b/docs/case-studies/issue-217/pr-conversation-comments.json
@@ -0,0 +1 @@
+[{"url":"https://api.github.com/repos/Jhon-Crow/godot-topdown-MVP/issues/comments/3782927221","html_url":"https://github.com/Jhon-Crow/godot-topdown-MVP/pull/221#issuecomment-3782927221","issue_url":"https://api.github.com/repos/Jhon-Crow/godot-topdown-MVP/issues/221","id":3782927221,"node_id":"IC_kwDOQ35BQ87heuN1","user":{"login":"konard","id":1431904,"node_id":"MDQ6VXNlcjE0MzE5MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/1431904?v=4","gravatar_id":"","url":"https://api.github.com/users/konard","html_url":"https://github.com/konard","followers_url":"https://api.github.com/users/konard/followers","following_url":"https://api.github.com/users/konard/following{/other_user}","gists_url":"https://api.github.com/users/konard/gists{/gist_id}","starred_url":"https://api.github.com/users/konard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konard/subscriptions","organizations_url":"https://api.github.com/users/konard/orgs","repos_url":"https://api.github.com/users/konard/repos","events_url":"https://api.github.com/users/konard/events{/privacy}","received_events_url":"https://api.github.com/users/konard/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2026-01-22T07:23:40Z","updated_at":"2026-01-22T07:23:40Z","body":"## 🤖 Solution Draft Log\nThis log file contains the complete execution trace of the AI solution draft process.\n\n💰 **Cost estimation:**\n- Public pricing estimate: $2.158082 USD\n- Calculated by Anthropic: $1.534885 USD\n- Difference: $-0.623197 (-28.88%)\n📎 **Log file uploaded as Gist** (433KB)\n🔗 [View complete solution draft log](https://gist.githubusercontent.com/konard/37cad20cbd3c49d5e7ac97c383fac356/raw/72c4d74f5007e8850c76b9559926c6d017335d30/solution-draft-log-pr-1769066616618.txt)\n---\n*Now working session is ended, feel free to review and add any feedback on the solution draft.*","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/Jhon-Crow/godot-topdown-MVP/issues/comments/3782927221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/Jhon-Crow/godot-topdown-MVP/issues/comments/3782968975","html_url":"https://github.com/Jhon-Crow/godot-topdown-MVP/pull/221#issuecomment-3782968975","issue_url":"https://api.github.com/repos/Jhon-Crow/godot-topdown-MVP/issues/221","id":3782968975,"node_id":"IC_kwDOQ35BQ87he4aP","user":{"login":"Jhon-Crow","id":133867474,"node_id":"U_kgDOB_qn0g","avatar_url":"https://avatars.githubusercontent.com/u/133867474?v=4","gravatar_id":"","url":"https://api.github.com/users/Jhon-Crow","html_url":"https://github.com/Jhon-Crow","followers_url":"https://api.github.com/users/Jhon-Crow/followers","following_url":"https://api.github.com/users/Jhon-Crow/following{/other_user}","gists_url":"https://api.github.com/users/Jhon-Crow/gists{/gist_id}","starred_url":"https://api.github.com/users/Jhon-Crow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jhon-Crow/subscriptions","organizations_url":"https://api.github.com/users/Jhon-Crow/orgs","repos_url":"https://api.github.com/users/Jhon-Crow/repos","events_url":"https://api.github.com/users/Jhon-Crow/events{/privacy}","received_events_url":"https://api.github.com/users/Jhon-Crow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2026-01-22T07:35:33Z","updated_at":"2026-01-22T07:35:33Z","body":"сделай модельки больше (такого же размера как моделька игрока).\r\nдобавь анимацию ходьбы такую же, как у игрока (переиспользуй).\r\n\r\nPlease download all logs and data related about the issue to this repository, make sure we compile that data to `./docs/case-studies/issue-{id}` folder, and use it to do deep case study analysis (also make sure to search online for additional facts and data), in which we will reconstruct timeline/sequence of events, find root causes of the problem, and propose possible solutions.\r\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/Jhon-Crow/godot-topdown-MVP/issues/comments/3782968975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/Jhon-Crow/godot-topdown-MVP/issues/comments/3782971095","html_url":"https://github.com/Jhon-Crow/godot-topdown-MVP/pull/221#issuecomment-3782971095","issue_url":"https://api.github.com/repos/Jhon-Crow/godot-topdown-MVP/issues/221","id":3782971095,"node_id":"IC_kwDOQ35BQ87he47X","user":{"login":"konard","id":1431904,"node_id":"MDQ6VXNlcjE0MzE5MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/1431904?v=4","gravatar_id":"","url":"https://api.github.com/users/konard","html_url":"https://github.com/konard","followers_url":"https://api.github.com/users/konard/followers","following_url":"https://api.github.com/users/konard/following{/other_user}","gists_url":"https://api.github.com/users/konard/gists{/gist_id}","starred_url":"https://api.github.com/users/konard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konard/subscriptions","organizations_url":"https://api.github.com/users/konard/orgs","repos_url":"https://api.github.com/users/konard/repos","events_url":"https://api.github.com/users/konard/events{/privacy}","received_events_url":"https://api.github.com/users/konard/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2026-01-22T07:36:08Z","updated_at":"2026-01-22T07:36:08Z","body":"🤖 **AI Work Session Started**\n\nStarting automated work session at 2026-01-22T07:36:06.460Z\n\nThe PR has been converted to draft mode while work is in progress.\n\n_This comment marks the beginning of an AI work session. Please wait working session to finish, and provide your feedback._","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/Jhon-Crow/godot-topdown-MVP/issues/comments/3782971095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]
\ No newline at end of file
diff --git a/docs/case-studies/issue-217/pr-data.json b/docs/case-studies/issue-217/pr-data.json
new file mode 100644
index 00000000..d2dd05f4
--- /dev/null
+++ b/docs/case-studies/issue-217/pr-data.json
@@ -0,0 +1 @@
+{"additions":207,"author":{"id":"MDQ6VXNlcjE0MzE5MDQ=","is_bot":false,"login":"konard","name":"Konstantin Diachenko"},"body":"## Summary\n\nСоздал модельки врагов на основе модельки игрока:\n- Основной цвет - чёрный\n- Белые черепа на шлеме (голове) и на предплечьях\n\n## Changes\n\n### Enemy Sprites (новые файлы)\nСоздал модульные спрайты врага в `assets/sprites/characters/enemy/`:\n- `enemy_body.png` - тело врага (чёрное)\n- `enemy_head.png` - голова/шлем с белым черепом\n- `enemy_left_arm.png` - левая рука с черепом на предплечье\n- `enemy_right_arm.png` - правая рука с черепом на предплечье\n- `enemy_combined_preview.png` - превью собранной модели\n\n### Enemy.tscn\nОбновил сцену врага для использования модульной системы спрайтов (аналогично Player.tscn):\n- Добавил узел `EnemyModel` с Body, Head, LeftArm, RightArm\n- Заменил красный placeholder на настоящие спрайты\n- Сохранил WeaponMount для оружия\n\n### Sprite Generation Script\nДобавил скрипт `experiments/create_enemy_sprites.py` для воспроизведения генерации спрайтов.\n\n## Screenshots\n\nСравнение спрайтов:\n\n| Player (green) | Enemy (black + skull) |\n|----------------|----------------------|\n| Body + Head + Arms | Body + Head (skull) + Arms (skulls) |\n\n## Test Plan\n\n- [x] Enemy sprites created based on player structure\n- [x] Black coloring applied to all body parts\n- [x] White skulls visible on head and forearms\n- [ ] Verify in-game appearance matches design\n\nFixes #217\n\n---\n🤖 Generated with [Claude Code](https://claude.com/claude-code)","commits":[{"authoredDate":"2026-01-22T07:16:51Z","authors":[{"email":"drakonard@gmail.com","id":"MDQ6VXNlcjE0MzE5MDQ=","login":"konard","name":"konard"}],"committedDate":"2026-01-22T07:16:51Z","messageBody":"Adding CLAUDE.md with task information for AI processing.\nThis file will be removed when the task is complete.\n\nIssue: https://github.com/Jhon-Crow/godot-topdown-MVP/issues/217","messageHeadline":"Initial commit with task details","oid":"7975b295b5061a65cf0a5ed1c3babaf1beee9df7"},{"authoredDate":"2026-01-22T07:21:01Z","authors":[{"email":"drakonard@gmail.com","id":"MDQ6VXNlcjE0MzE5MDQ=","login":"konard","name":"konard"},{"email":"noreply@anthropic.com","id":"MDQ6VXNlcjgxODQ3","login":"claude","name":"Claude Opus 4.5"}],"committedDate":"2026-01-22T07:21:01Z","messageBody":"Created enemy character sprites as modular body parts (body, head, arms)\nbased on the player model structure. The enemy uses black coloring with\nwhite skull decorations on the head/helmet and forearms for visual\ndistinction from the player's green/military style.\n\n- Added enemy_body.png, enemy_head.png, enemy_left_arm.png, enemy_right_arm.png\n- Added enemy_combined_preview.png showing assembled character\n- Updated Enemy.tscn to use modular sprite system (EnemyModel node)\n- Replaced placeholder texture with proper body part sprites\n- Added sprite generation script to experiments/ for reproducibility\n\nFixes #217\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>","messageHeadline":"Add enemy models based on player sprites with skull markings","oid":"026747e94acf505c01b308655b8de2f8e90f0e02"},{"authoredDate":"2026-01-22T07:23:33Z","authors":[{"email":"drakonard@gmail.com","id":"MDQ6VXNlcjE0MzE5MDQ=","login":"konard","name":"konard"}],"committedDate":"2026-01-22T07:23:33Z","messageBody":"This reverts commit 7975b295b5061a65cf0a5ed1c3babaf1beee9df7.","messageHeadline":"Revert \"Initial commit with task details\"","oid":"db4fc30e1cb692033d9a26b5c8d44c827c74c2d6"}],"createdAt":"2026-01-22T07:16:58Z","deletions":8,"files":[{"path":"assets/sprites/characters/enemy/enemy_body.png","additions":0,"deletions":0},{"path":"assets/sprites/characters/enemy/enemy_combined_preview.png","additions":0,"deletions":0},{"path":"assets/sprites/characters/enemy/enemy_head.png","additions":0,"deletions":0},{"path":"assets/sprites/characters/enemy/enemy_left_arm.png","additions":0,"deletions":0},{"path":"assets/sprites/characters/enemy/enemy_right_arm.png","additions":0,"deletions":0},{"path":"experiments/create_enemy_sprites.py","additions":177,"deletions":0},{"path":"scenes/objects/Enemy.tscn","additions":30,"deletions":8}],"state":"OPEN","title":"Добавить модельки врагов"}
diff --git a/docs/case-studies/issue-217/pr-diff.txt b/docs/case-studies/issue-217/pr-diff.txt
new file mode 100644
index 00000000..e0da2f32
--- /dev/null
+++ b/docs/case-studies/issue-217/pr-diff.txt
@@ -0,0 +1,262 @@
+diff --git a/assets/sprites/characters/enemy/enemy_body.png b/assets/sprites/characters/enemy/enemy_body.png
+new file mode 100644
+index 0000000..c806dff
+Binary files /dev/null and b/assets/sprites/characters/enemy/enemy_body.png differ
+diff --git a/assets/sprites/characters/enemy/enemy_combined_preview.png b/assets/sprites/characters/enemy/enemy_combined_preview.png
+new file mode 100644
+index 0000000..8edbec5
+Binary files /dev/null and b/assets/sprites/characters/enemy/enemy_combined_preview.png differ
+diff --git a/assets/sprites/characters/enemy/enemy_head.png b/assets/sprites/characters/enemy/enemy_head.png
+new file mode 100644
+index 0000000..950de4a
+Binary files /dev/null and b/assets/sprites/characters/enemy/enemy_head.png differ
+diff --git a/assets/sprites/characters/enemy/enemy_left_arm.png b/assets/sprites/characters/enemy/enemy_left_arm.png
+new file mode 100644
+index 0000000..717094d
+Binary files /dev/null and b/assets/sprites/characters/enemy/enemy_left_arm.png differ
+diff --git a/assets/sprites/characters/enemy/enemy_right_arm.png b/assets/sprites/characters/enemy/enemy_right_arm.png
+new file mode 100644
+index 0000000..4ff8bd7
+Binary files /dev/null and b/assets/sprites/characters/enemy/enemy_right_arm.png differ
+diff --git a/experiments/create_enemy_sprites.py b/experiments/create_enemy_sprites.py
+new file mode 100644
+index 0000000..5a79763
+--- /dev/null
++++ b/experiments/create_enemy_sprites.py
+@@ -0,0 +1,177 @@
++#!/usr/bin/env python3
++"""
++Script to create enemy sprites based on player sprites.
++Creates black versions with white skull decorations.
++"""
++
++from PIL import Image, ImageDraw
++import os
++
++# Paths
++BASE_DIR = '/tmp/gh-issue-solver-1769066205054'
++PLAYER_DIR = os.path.join(BASE_DIR, 'assets/sprites/characters/player')
++ENEMY_DIR = os.path.join(BASE_DIR, 'assets/sprites/characters/enemy')
++
++# Ensure enemy directory exists
++os.makedirs(ENEMY_DIR, exist_ok=True)
++
++
++def convert_to_dark(image):
++    """Convert green/military colors to dark/black colors, preserving transparency."""
++    img = image.convert('RGBA')
++    pixels = img.load()
++
++    for y in range(img.height):
++        for x in range(img.width):
++            r, g, b, a = pixels[x, y]
++            if a > 0:  # Only modify non-transparent pixels
++                # Convert to grayscale, then darken significantly
++                gray = int(0.299 * r + 0.587 * g + 0.114 * b)
++                # Make it dark - reduce to 20-40% of grayscale value
++                dark = int(gray * 0.25)
++                pixels[x, y] = (dark, dark, dark, a)
++
++    return img
++
++
++def draw_simple_skull_on_head(image):
++    """Draw a simple white skull symbol on the head (helmet area)."""
++    img = image.copy()
++    draw = ImageDraw.Draw(img)
++
++    # Head size is 14x18 - skull should be small and centered
++    # Simple skull: circle for head, two dots for eyes
++    cx, cy = 7, 8  # Center point for skull
++
++    # Skull outline (small white oval)
++    draw.ellipse([cx-3, cy-3, cx+3, cy+2], fill=(255, 255, 255, 255))
++
++    # Eyes (two black dots)
++    draw.point((cx-1, cy-1), fill=(0, 0, 0, 255))
++    draw.point((cx+1, cy-1), fill=(0, 0, 0, 255))
++
++    # Nose (small vertical line)
++    draw.point((cx, cy), fill=(0, 0, 0, 255))
++
++    # Teeth area (white rectangle at bottom)
++    draw.rectangle([cx-2, cy+1, cx+2, cy+2], fill=(255, 255, 255, 255))
++
++    # Tooth lines (black)
++    draw.point((cx, cy+1), fill=(0, 0, 0, 255))
++
++    return img
++
++
++def draw_simple_skull_on_arm(image, is_left=True):
++    """Draw a small white skull on the forearm."""
++    img = image.copy()
++    draw = ImageDraw.Draw(img)
++
++    # Arm size is 20x8 - skull should be tiny
++    # Position depends on left or right arm
++    if is_left:
++        cx, cy = 10, 4  # Center-right for left arm (forearm area)
++    else:
++        cx, cy = 10, 4  # Center-right for right arm (forearm area)
++
++    # Very simple skull - just a few pixels
++    # Small white circle/oval for skull
++    draw.ellipse([cx-2, cy-2, cx+2, cy+1], fill=(255, 255, 255, 255))
++
++    # Eyes (two black dots)
++    draw.point((cx-1, cy-1), fill=(0, 0, 0, 255))
++    draw.point((cx+1, cy-1), fill=(0, 0, 0, 255))
++
++    return img
++
++
++def create_enemy_body():
++    """Create enemy body sprite (black version of player body)."""
++    player_body = Image.open(os.path.join(PLAYER_DIR, 'player_body.png'))
++    enemy_body = convert_to_dark(player_body)
++    enemy_body.save(os.path.join(ENEMY_DIR, 'enemy_body.png'))
++    print(f"Created enemy_body.png ({enemy_body.size})")
++    return enemy_body
++
++
++def create_enemy_head():
++    """Create enemy head sprite (black with white skull)."""
++    player_head = Image.open(os.path.join(PLAYER_DIR, 'player_head.png'))
++    enemy_head = convert_to_dark(player_head)
++    enemy_head = draw_simple_skull_on_head(enemy_head)
++    enemy_head.save(os.path.join(ENEMY_DIR, 'enemy_head.png'))
++    print(f"Created enemy_head.png ({enemy_head.size})")
++    return enemy_head
++
++
++def create_enemy_arms():
++    """Create enemy arm sprites (black with skull on forearm)."""
++    # Left arm
++    player_left_arm = Image.open(os.path.join(PLAYER_DIR, 'player_left_arm.png'))
++    enemy_left_arm = convert_to_dark(player_left_arm)
++    enemy_left_arm = draw_simple_skull_on_arm(enemy_left_arm, is_left=True)
++    enemy_left_arm.save(os.path.join(ENEMY_DIR, 'enemy_left_arm.png'))
++    print(f"Created enemy_left_arm.png ({enemy_left_arm.size})")
++
++    # Right arm
++    player_right_arm = Image.open(os.path.join(PLAYER_DIR, 'player_right_arm.png'))
++    enemy_right_arm = convert_to_dark(player_right_arm)
++    enemy_right_arm = draw_simple_skull_on_arm(enemy_right_arm, is_left=False)
++    enemy_right_arm.save(os.path.join(ENEMY_DIR, 'enemy_right_arm.png'))
++    print(f"Created enemy_right_arm.png ({enemy_right_arm.size})")
++
++    return enemy_left_arm, enemy_right_arm
++
++
++def create_combined_preview(body, head, left_arm, right_arm):
++    """Create a combined preview image showing all enemy parts assembled."""
++    # Use same dimensions as player combined preview
++    preview_width = 64
++    preview_height = 64
++
++    preview = Image.new('RGBA', (preview_width, preview_height), (0, 0, 0, 0))
++
++    # Center point for assembly
++    cx, cy = 32, 32
++
++    # Paste body (positioned at center) - offset similar to Player.tscn (-4, 0)
++    body_x = cx - body.width // 2 - 4
++    body_y = cy - body.height // 2
++    preview.paste(body, (body_x, body_y), body)
++
++    # Paste head (above body) - offset similar to Player.tscn (-6, -2)
++    head_x = cx - head.width // 2 - 6
++    head_y = cy - body.height // 2 - head.height // 2 - 2
++    preview.paste(head, (head_x, head_y), head)
++
++    # Paste left arm - offset similar to Player.tscn (24, 6)
++    left_arm_x = cx + 24 - left_arm.width // 2
++    left_arm_y = cy + 6 - left_arm.height // 2
++    preview.paste(left_arm, (left_arm_x, left_arm_y), left_arm)
++
++    # Paste right arm - offset similar to Player.tscn (-2, 6)
++    right_arm_x = cx - 2 - right_arm.width // 2
++    right_arm_y = cy + 6 - right_arm.height // 2
++    preview.paste(right_arm, (right_arm_x, right_arm_y), right_arm)
++
++    preview.save(os.path.join(ENEMY_DIR, 'enemy_combined_preview.png'))
++    print(f"Created enemy_combined_preview.png ({preview.size})")
++    return preview
++
++
++def main():
++    print("Creating enemy sprites based on player sprites...")
++    print(f"Player sprites from: {PLAYER_DIR}")
++    print(f"Enemy sprites to: {ENEMY_DIR}")
++    print()
++
++    body = create_enemy_body()
++    head = create_enemy_head()
++    left_arm, right_arm = create_enemy_arms()
++    create_combined_preview(body, head, left_arm, right_arm)
++
++    print("\nAll enemy sprites created successfully!")
++
++
++if __name__ == '__main__':
++    main()
+diff --git a/scenes/objects/Enemy.tscn b/scenes/objects/Enemy.tscn
+index 0ecd4e0..245d1dd 100644
+--- a/scenes/objects/Enemy.tscn
++++ b/scenes/objects/Enemy.tscn
+@@ -1,11 +1,12 @@
+-[gd_scene load_steps=6 format=3 uid="uid://cx5m8np6u3bwd"]
++[gd_scene load_steps=10 format=3 uid="uid://cx5m8np6u3bwd"]
+ 
+ [ext_resource type="Script" path="res://scripts/objects/enemy.gd" id="1_enemy"]
+ [ext_resource type="Script" path="res://scripts/objects/hit_area.gd" id="2_hit_area"]
+ [ext_resource type="Texture2D" path="res://assets/sprites/weapons/m16_rifle_topdown.png" id="3_rifle_sprite"]
+-
+-[sub_resource type="PlaceholderTexture2D" id="PlaceholderTexture2D_enemy"]
+-size = Vector2(48, 48)
++[ext_resource type="Texture2D" path="res://assets/sprites/characters/enemy/enemy_body.png" id="4_body"]
++[ext_resource type="Texture2D" path="res://assets/sprites/characters/enemy/enemy_head.png" id="5_head"]
++[ext_resource type="Texture2D" path="res://assets/sprites/characters/enemy/enemy_left_arm.png" id="6_left_arm"]
++[ext_resource type="Texture2D" path="res://assets/sprites/characters/enemy/enemy_right_arm.png" id="7_right_arm"]
+ 
+ [sub_resource type="CircleShape2D" id="CircleShape2D_enemy"]
+ radius = 24.0
+@@ -15,12 +16,33 @@ collision_layer = 2
+ collision_mask = 4
+ script = ExtResource("1_enemy")
+ 
+-[node name="Sprite2D" type="Sprite2D" parent="."]
+-modulate = Color(0.9, 0.2, 0.2, 1)
+-texture = SubResource("PlaceholderTexture2D_enemy")
++[node name="EnemyModel" type="Node2D" parent="."]
+ 
+-[node name="WeaponSprite" type="Sprite2D" parent="."]
++[node name="Body" type="Sprite2D" parent="EnemyModel"]
+ z_index = 1
++position = Vector2(-4, 0)
++texture = ExtResource("4_body")
++
++[node name="LeftArm" type="Sprite2D" parent="EnemyModel"]
++z_index = 4
++position = Vector2(24, 6)
++texture = ExtResource("6_left_arm")
++
++[node name="RightArm" type="Sprite2D" parent="EnemyModel"]
++z_index = 4
++position = Vector2(-2, 6)
++texture = ExtResource("7_right_arm")
++
++[node name="Head" type="Sprite2D" parent="EnemyModel"]
++z_index = 3
++position = Vector2(-6, -2)
++texture = ExtResource("5_head")
++
++[node name="WeaponMount" type="Node2D" parent="EnemyModel"]
++position = Vector2(0, 6)
++
++[node name="WeaponSprite" type="Sprite2D" parent="EnemyModel/WeaponMount"]
++z_index = 2
+ texture = ExtResource("3_rifle_sprite")
+ offset = Vector2(20, 0)
+ 
diff --git a/docs/case-studies/issue-217/pr-review-comments.json b/docs/case-studies/issue-217/pr-review-comments.json
new file mode 100644
index 00000000..0637a088
--- /dev/null
+++ b/docs/case-studies/issue-217/pr-review-comments.json
@@ -0,0 +1 @@
+[]
\ No newline at end of file
diff --git a/docs/case-studies/issue-245/README.md b/docs/case-studies/issue-245/README.md
new file mode 100644
index 00000000..8a262ee3
--- /dev/null
+++ b/docs/case-studies/issue-245/README.md
@@ -0,0 +1,193 @@
+# Case Study: Issue #245 - Fix Enemy Shooting
+
+## Overview
+
+**Issue:** [#245 - fix стрельба врагов](https://github.com/Jhon-Crow/godot-topdown-MVP/issues/245)
+**Pull Request:** [#246](https://github.com/Jhon-Crow/godot-topdown-MVP/pull/246)
+**Date Created:** 2026-01-22
+**Status:** Fix Implemented
+
+## Problem Statement
+
+The issue reports that in PR #221 (which added enemy models), enemies are shooting incorrectly:
+- Bullets are not flying from the weapon
+- Bullets should fly from the weapon in the correct direction
+- Enemies should aim the same way as before (aiming logic should be preserved)
+
+Translation of issue text:
+> "в ветке https://github.com/Jhon-Crow/godot-topdown-MVP/pull/221 добавлены модельки врагов, но они стреляют не из оружия - пули должны лететь из оружия по правильному направлению, так же враги должны целиться как раньше (то есть нужно только прикрепить линию огня и прицеливания к оружию)."
+
+Translation:
+> "In PR #221, enemy models were added, but they don't shoot from the weapon - bullets should fly from the weapon in the correct direction, also enemies should aim like before (i.e., just need to attach the firing line and aiming to the weapon)."
+
+## Root Cause Analysis
+
+### The Problem
+
+The current enemy shooting implementation spawns bullets from the **enemy center position** plus a directional offset:
+
+```gdscript
+# OLD CODE (enemy.gd, _shoot() function)
+var direction := (target_position - global_position).normalized()
+bullet.global_position = global_position + direction * bullet_spawn_offset
+```
+
+This has two issues:
+
+1. **Bullet spawn position is incorrect**: Bullets spawn from the enemy's center (`global_position`) plus an offset in the direction of the target, NOT from the weapon's actual muzzle position.
+
+2. **Visual disconnect**: The weapon sprite (`WeaponSprite`) is positioned and rotated to visually point at the target, but bullets don't actually originate from where the weapon's barrel appears to be.
+
+### The Enemy Scene Structure
+
+Current `Enemy.tscn`:
+```
+Enemy (CharacterBody2D)
+├── Sprite2D (placeholder texture)
+├── WeaponSprite (m16_rifle_topdown.png)
+│   └── offset = Vector2(20, 0)
+├── CollisionShape2D
+├── RayCast2D
+├── HitArea
+└── NavigationAgent2D
+```
+
+The weapon sprite:
+- Uses `m16_rifle_topdown.png` (64x16 pixels)
+- Has an offset of `Vector2(20, 0)` - meaning it's rendered 20 pixels to the right of its node position
+- Rotates to point at the target via `_update_weapon_sprite_rotation()`
+- Flips vertically when aiming left (to avoid upside-down appearance)
+
+### Expected Behavior
+
+Bullets should spawn from the **weapon muzzle** (the end of the rifle barrel), not from the enemy's center. The muzzle position should be calculated based on:
+1. The weapon sprite's global position
+2. The weapon's rotation (which direction it's pointing)
+3. The distance from the weapon node to the muzzle (right edge of the sprite)
+
+## Solution
+
+### 1. Added `_get_muzzle_position()` Helper Function
+
+This function calculates the actual weapon muzzle position in world coordinates:
+
+```gdscript
+func _get_muzzle_position() -> Vector2:
+    if not _weapon_sprite:
+        # Fallback: return position in direction of aim
+        if _player and is_instance_valid(_player):
+            var direction := (_player.global_position - global_position).normalized()
+            return global_position + direction * bullet_spawn_offset
+        return global_position + Vector2.RIGHT * bullet_spawn_offset
+
+    # Calculate weapon's forward direction from its global rotation
+    var weapon_forward := Vector2.from_angle(_weapon_sprite.global_rotation)
+
+    # The muzzle is 52px from the weapon sprite's position along its forward direction
+    # (20px offset + 32px half-width of 64px sprite)
+    var muzzle_offset := 52.0
+    return _weapon_sprite.global_position + weapon_forward * muzzle_offset
+```
+
+**Key insight**: The muzzle offset is calculated as:
+- Sprite offset: 20px (from scene file)
+- Half sprite width: 32px (64px / 2)
+- Total: 52px from the WeaponSprite node position to the muzzle
+
+### 2. Updated Shooting Functions
+
+All three shooting functions were updated to:
+1. Get the muzzle position using `_get_muzzle_position()`
+2. Calculate bullet direction from **muzzle to target** (not enemy center to target)
+3. Spawn bullet at the muzzle position
+4. Set `shooter_position` to the muzzle for accurate distance calculations
+
+Updated functions:
+- `_shoot()` - Main shooting function
+- `_shoot_with_inaccuracy()` - Retreat mode shooting
+- `_shoot_burst_shot()` - Burst fire mode
+
+### 3. Updated Raycast Functions
+
+Functions that check firing lines were updated to start raycasts from the muzzle position:
+
+- `_is_bullet_spawn_clear()` - Checks if there's a wall blocking the shot
+- `_is_firing_line_clear_of_friendlies()` - Checks for friendly fire
+- `_is_shot_clear_of_cover()` - Checks if shot is blocked by cover
+
+### 4. Updated Debug Visualization
+
+The `_draw()` function was updated to show the actual muzzle position instead of the old bullet spawn point.
+
+## Files Modified
+
+### scripts/objects/enemy.gd
+
+1. **Added `_get_muzzle_position()` function** (after `_update_weapon_sprite_rotation()`)
+   - Calculates weapon muzzle position in world coordinates
+   - Handles weapon rotation and sprite offset
+   - Provides fallback for missing weapon sprite
+
+2. **Updated `_shoot()`**
+   - Now uses `_get_muzzle_position()` for bullet spawn position
+   - Calculates direction from muzzle to target
+
+3. **Updated `_shoot_with_inaccuracy()`**
+   - Same changes as `_shoot()`
+
+4. **Updated `_shoot_burst_shot()`**
+   - Same changes as `_shoot()`
+
+5. **Updated `_is_bullet_spawn_clear()`**
+   - Checks from enemy center to muzzle
+   - Checks from muzzle outward in firing direction
+
+6. **Updated `_is_firing_line_clear_of_friendlies()`**
+   - Starts raycast from muzzle position
+
+7. **Updated `_is_shot_clear_of_cover()`**
+   - Starts raycast from muzzle position
+
+8. **Updated `_draw()` debug visualization**
+   - Shows actual muzzle position
+
+## Relationship to PR #221
+
+PR #221 introduced modular enemy models with a more complex structure:
+```
+Enemy (CharacterBody2D)
+├── EnemyModel (Node2D)
+│   ├── Body, Head, Arms (Sprite2D)
+│   └── WeaponMount (Node2D)
+│       └── WeaponSprite (Sprite2D)
+```
+
+PR #221 also attempted to fix the bullet spawn issue but encountered challenges with:
+- Coordinate system flipping when enemies aim left
+- Using `global_transform.x` which gets mirrored with negative Y scale
+- Execution order between model rotation and shooting
+
+This fix (issue #245) takes a simpler approach that works with the current main branch's structure (without the EnemyModel hierarchy). The key insight is to use `Vector2.from_angle(_weapon_sprite.global_rotation)` to get the weapon's forward direction, which correctly handles all rotation cases.
+
+## Lessons Learned
+
+1. **Bullet spawn should match visual position**: Players expect bullets to come from where the weapon visually points. Using the enemy center + offset creates a disconnect between visual and gameplay.
+
+2. **Use rotation angles, not transform axes**: When a sprite can be flipped (negative scale), using `global_transform.x` can give incorrect directions. Instead, use `Vector2.from_angle(rotation)` which always gives the intended direction.
+
+3. **Calculate direction from spawn point to target**: When bullets spawn from a different position than the character center, the direction should be calculated from the spawn point to ensure bullets actually fly toward the target.
+
+4. **Update all related systems**: When changing bullet spawn position, also update:
+   - Raycast checks for walls
+   - Friendly fire detection
+   - Cover detection
+   - Debug visualization
+
+## Test Plan
+
+- [ ] Verify bullets spawn from the weapon muzzle visually
+- [ ] Verify bullets fly toward the player (not offset to the side)
+- [ ] Verify enemies can still hit the player when aiming at them
+- [ ] Verify enemies don't shoot through walls (spawn clear check works)
+- [ ] Verify friendly fire avoidance still works
+- [ ] Verify debug visualization shows correct muzzle position
diff --git a/docs/case-studies/issue-245/analysis.md b/docs/case-studies/issue-245/analysis.md
new file mode 100644
index 00000000..6346145f
--- /dev/null
+++ b/docs/case-studies/issue-245/analysis.md
@@ -0,0 +1,188 @@
+# Case Study: Issue #245 - Enemy Shooting Position and Facing Direction Bug
+
+## Problem Description
+
+### Initial Report (2026-01-22 ~15:14)
+User report (translated from Russian): "Enemies shoot from the back, from the side, from the weapon - inconsistently."
+
+The original issue: Enemy bullets should spawn from the weapon muzzle and fly in the correct direction, but they appear to come from incorrect positions relative to the weapon visual.
+
+### Second Report (2026-01-22 ~15:28)
+After initial fix for muzzle position: "Bullets fly from the barrels, but enemies turn their backs to me."
+
+The muzzle position fix worked (bullets now spawn from weapon), but the enemy MODEL is visually facing the wrong direction.
+
+### Third Report (2026-01-22 ~16:37)
+After rotation negation fix: "Enemies move and attack with their backs facing forward"
+
+Despite applying the rotation negation fix, the issue persisted. This led to a deeper investigation.
+
+## Timeline
+
+1. PR #221 added enemy models with modular sprites (body, head, arms, weapon)
+2. PR #246 attempted to fix the muzzle shooting by:
+   - Using `_weapon_sprite.global_position` as base
+   - Adding offset in direction of `_enemy_model.rotation`
+3. User testing revealed bullets still spawn from incorrect positions
+4. Second fix applied: Using `_weapon_sprite.global_transform.x.normalized()` for visual direction
+5. User testing revealed enemies now turn their backs to player
+6. Rotation negation fix applied: Negate rotation when flipping vertically
+7. User testing revealed enemies still face backwards
+8. **True root cause identified**: Dual rotation system conflict - both Enemy node and EnemyModel have rotation applied
+
+## Technical Analysis
+
+### Scene Structure
+```
+Enemy (CharacterBody2D)
+  EnemyModel (Node2D) - rotation and scale applied here
+    Body, Head, Arms (Sprite2D children)
+    WeaponMount (Node2D) - position (0, 6)
+      WeaponSprite (Sprite2D) - offset (20, 0), no individual rotation
+```
+
+### Bug #1: Muzzle Position (Fixed)
+
+In `_get_bullet_spawn_position()`:
+```gdscript
+var weapon_forward := Vector2.from_angle(_enemy_model.rotation)
+var result := _weapon_sprite.global_position + weapon_forward * scaled_muzzle_offset
+```
+
+The issue: `Vector2.from_angle(_enemy_model.rotation)` only accounts for rotation, not scale.
+
+**Solution**: Use `_weapon_sprite.global_transform.x.normalized()` which gives the actual visual forward direction including scale effects.
+
+### Bug #2: Model Facing Wrong Direction (The Real Issue)
+
+In `_update_enemy_model_rotation()`:
+```gdscript
+var target_angle := face_direction.angle()
+_enemy_model.rotation = target_angle
+
+if aiming_left:
+    _enemy_model.scale = Vector2(enemy_model_scale, -enemy_model_scale)
+```
+
+**The Problem**: When we apply a negative Y scale (vertical flip) to avoid an upside-down sprite, the visual effect of rotation is INVERTED. A rotation angle that would normally point left now visually points right.
+
+**Mathematical Explanation**:
+
+When a 2D transform has negative scale on one axis, it creates a mirror effect. Consider:
+- Sprite faces right at angle 0°
+- To face up-left (angle -153°), we rotate by -153°
+- If we ALSO flip vertically (scale.y = -1), the visual result is mirrored
+
+The issue is that negative scale.y mirrors the Y axis, which effectively inverts the rotation direction visually. The combination of:
+- `rotation = -153°` (intending to face up-left)
+- `scale.y = -1.3` (vertical flip)
+
+Results in the sprite visually facing up-RIGHT instead of up-LEFT, because the flip mirrors the rotation effect.
+
+**Solution**: When applying vertical flip, negate the rotation angle:
+```gdscript
+if aiming_left:
+    _enemy_model.rotation = -target_angle  # Negate to compensate for flip
+    _enemy_model.scale = Vector2(enemy_model_scale, -enemy_model_scale)
+else:
+    _enemy_model.rotation = target_angle
+    _enemy_model.scale = Vector2(enemy_model_scale, enemy_model_scale)
+```
+
+This ensures the visual result is correct:
+- Without flip: rotation = target_angle, scale.y positive -> faces target_angle ✓
+- With flip: rotation = -target_angle, scale.y negative -> faces target_angle ✓ (the two inversions cancel out)
+
+### Bug #3: Dual Rotation System Conflict (The TRUE Root Cause)
+
+The previous fix (negating rotation when flipping) was mathematically correct, but the issue persisted because of a deeper architectural problem.
+
+**Discovery**: The enemy.gd code sets rotation in TWO places:
+1. `_enemy_model.rotation` in `_update_enemy_model_rotation()` - for visual facing direction
+2. `rotation` (the Enemy CharacterBody2D node itself) in multiple places like `_aim_at_player()`, state processing, etc.
+
+**The Problem**: In Godot's scene tree, the EnemyModel is a child of the Enemy node:
+```
+Enemy (CharacterBody2D) <- has its own rotation
+  └── EnemyModel (Node2D) <- also has rotation
+```
+
+When you set `_enemy_model.rotation`, it's in LOCAL coordinates. The final VISUAL rotation is:
+```
+visual_rotation = parent_rotation + local_rotation
+```
+
+So if:
+- Enemy node: `rotation = 30°` (from `_aim_at_player()`)
+- EnemyModel: `rotation = -30°` (from `_update_enemy_model_rotation()`)
+- Visual result: `30° + (-30°) = 0°` - facing wrong direction!
+
+The fix with rotation negation was correct for the flip compensation, but it was being "undone" by the parent's rotation.
+
+**Code locations where Enemy node rotation is set:**
+- Line 1353: `rotation = direction_to_player.angle()` (distracted attack)
+- Line 1410: `rotation = direction_to_player.angle()` (vulnerable attack)
+- Line 1569: `rotation = direction_to_player.angle()` (sidestepping)
+- Line 1621: `rotation = direction_to_player.angle()` (seeking clear shot)
+- Line 1674: `rotation = direction_to_player.angle()` (exposed positioning)
+- Line 2116: `rotation = target_angle` (patrol walking)
+- Line 3621: `rotation = target_angle` (gradual aiming)
+- Plus several more...
+
+### Root Cause Summary
+
+Two separate issues combined:
+1. **Flip compensation**: When vertically flipping (scale.y < 0), rotation must be negated ✓ (correctly fixed)
+2. **Parent-child rotation**: Using local `rotation` for EnemyModel while parent Enemy node also rotates causes unwanted rotation composition ✗
+
+This is a Godot transform hierarchy issue documented in various places:
+- [Godot Issue #21020](https://github.com/godotengine/godot/issues/21020)
+- [Godot Forum discussions](https://forum.godotengine.org/t/flipping-node-sprite-scale-x-1-flipping-every-frame/67514)
+
+## Solution
+
+### Primary Fix: Use `global_rotation` Instead of `rotation`
+
+The solution is to use `global_rotation` for setting the EnemyModel's facing direction. This ensures the visual direction is set in world coordinates, independent of any parent rotation:
+
+```gdscript
+if aiming_left:
+    _enemy_model.global_rotation = -target_angle  # Use GLOBAL rotation
+    _enemy_model.scale = Vector2(enemy_model_scale, -enemy_model_scale)
+else:
+    _enemy_model.global_rotation = target_angle   # Use GLOBAL rotation
+    _enemy_model.scale = Vector2(enemy_model_scale, enemy_model_scale)
+```
+
+With `global_rotation`:
+- The EnemyModel's facing direction is set directly in world space
+- Parent rotation (Enemy node) doesn't affect the visual direction
+- The flip compensation (rotation negation) works correctly
+
+### Secondary Fix: Player Model (Same Pattern)
+
+Applied the same fix to `_update_player_model_rotation()` in player.gd for consistency, since the player's CharacterBody2D also has rotation applied during grenade throws.
+
+### Tertiary Fix: Muzzle Position (Previous Fix)
+
+Using `_weapon_sprite.global_transform.x.normalized()` for weapon forward direction, which correctly accounts for all transforms including the global rotation and scale.
+
+## Data Files
+
+- `game_log_20260122_151419.txt` - Initial game log showing bullet spawn positions
+- `game_log_20260122_152844.txt` - Second game log showing model facing issue after muzzle fix
+- `game_log_20260122_163542.txt` - Third game log showing model still facing backwards after rotation negation fix
+
+## Verification
+
+After the fix, enemies should:
+1. Always visually face the player when shooting
+2. Spawn bullets from the visual muzzle position
+3. Bullets fly toward the target
+4. Work correctly when enemy is facing left (vertically flipped model)
+
+## References
+
+- [Godot Issue #21020 - Global rotation can return opposite sign of expected](https://github.com/godotengine/godot/issues/21020)
+- [Godot Forum - Flipping Node/Sprite](https://forum.godotengine.org/t/flipping-node-sprite-scale-x-1-flipping-every-frame/67514)
+- [KidsCanCode - Top-down movement](https://kidscancode.org/godot_recipes/4.x/2d/topdown_movement/index.html)
diff --git a/docs/case-studies/issue-245/game_log_20260122_151419.txt b/docs/case-studies/issue-245/game_log_20260122_151419.txt
new file mode 100644
index 00000000..d8f86e09
--- /dev/null
+++ b/docs/case-studies/issue-245/game_log_20260122_151419.txt
@@ -0,0 +1,3072 @@
+[15:14:19] [INFO] ============================================================
+[15:14:19] [INFO] GAME LOG STARTED
+[15:14:19] [INFO] ============================================================
+[15:14:19] [INFO] Timestamp: 2026-01-22T15:14:19
+[15:14:19] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_151419.txt
+[15:14:19] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[15:14:19] [INFO] OS: Windows
+[15:14:19] [INFO] Debug build: false
+[15:14:19] [INFO] Engine version: 4.3-stable (official)
+[15:14:19] [INFO] Project: Godot Top-Down Template
+[15:14:19] [INFO] ------------------------------------------------------------
+[15:14:19] [INFO] [GameManager] GameManager ready
+[15:14:19] [INFO] [ScoreManager] ScoreManager ready
+[15:14:19] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[15:14:19] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[15:14:19] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[15:14:19] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[15:14:19] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[15:14:19] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[15:14:19] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[15:14:19] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[15:14:19] [INFO] [LastChance] Resetting all effects (scene change detected)
+[15:14:19] [INFO] [LastChance] Last chance shader loaded successfully
+[15:14:19] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[15:14:19] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[15:14:19] [INFO] [LastChance]   Sepia intensity: 0.70
+[15:14:19] [INFO] [LastChance]   Brightness: 0.60
+[15:14:19] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[15:14:19] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[15:14:20] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[15:14:20] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[15:14:20] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[15:14:20] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[15:14:20] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[15:14:20] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[15:14:20] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[15:14:20] [INFO] [ScoreManager] Level started with 10 enemies
+[15:14:20] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[15:14:20] [ENEMY] [Enemy1] Registered as sound listener
+[15:14:20] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[15:14:20] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[15:14:20] [ENEMY] [Enemy2] Registered as sound listener
+[15:14:20] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[15:14:20] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[15:14:20] [ENEMY] [Enemy3] Registered as sound listener
+[15:14:20] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[15:14:20] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[15:14:20] [ENEMY] [Enemy4] Registered as sound listener
+[15:14:20] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[15:14:20] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[15:14:20] [ENEMY] [Enemy5] Registered as sound listener
+[15:14:20] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[15:14:20] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[15:14:20] [ENEMY] [Enemy6] Registered as sound listener
+[15:14:20] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[15:14:20] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[15:14:20] [ENEMY] [Enemy7] Registered as sound listener
+[15:14:20] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 4, behavior: PATROL, player_found: yes
+[15:14:20] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[15:14:20] [ENEMY] [Enemy8] Registered as sound listener
+[15:14:20] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[15:14:20] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[15:14:20] [ENEMY] [Enemy9] Registered as sound listener
+[15:14:20] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[15:14:20] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[15:14:20] [ENEMY] [Enemy10] Registered as sound listener
+[15:14:20] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[15:14:20] [INFO] [Player] Detecting weapon pose (frame 3)...
+[15:14:20] [INFO] [Player] Detected weapon: Rifle (default pose)
+[15:14:20] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[15:14:20] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[15:14:20] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[15:14:20] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[15:14:20] [INFO] [LastChance] Found player: Player
+[15:14:20] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[15:14:20] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[15:14:20] [INFO] [LastChance] Connected to player Died signal (C#)
+[15:14:21] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[15:14:21] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[15:14:22] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[15:14:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 778.1666), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:14:22] [ENEMY] [Enemy1] Heard gunshot at (450, 778.1666), source_type=0, intensity=0.01, distance=454
+[15:14:22] [ENEMY] [Enemy2] Heard gunshot at (450, 778.1666), source_type=0, intensity=0.05, distance=234
+[15:14:22] [ENEMY] [Enemy4] Heard gunshot at (450, 778.1666), source_type=0, intensity=0.02, distance=371
+[15:14:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:14:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(448.8055, 770.7707), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:14:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:14:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 778.1666), shooter_id=43855644338, bullet_pos=(933.24225, 787.5534)
+[15:14:22] [INFO] [Bullet] Using shooter_position, distance=483,3334
+[15:14:22] [INFO] [Bullet] Distance to wall: 483,3334 (32,911064% of viewport)
+[15:14:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(441.0409, 773.1972), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:14:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:14:22] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[15:14:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(448.80545, 770.7707), shooter_id=43855644338, bullet_pos=(931.7518, 790.1078)
+[15:14:22] [INFO] [Bullet] Using shooter_position, distance=483,33328
+[15:14:22] [INFO] [Bullet] Distance to wall: 483,33328 (32,911053% of viewport)
+[15:14:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:22] [INFO] [Bullet] Starting wall penetration at (931.7518, 790.1078)
+[15:14:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42,415
+[15:14:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:22] [INFO] [Bullet] Exiting penetration at (978.38104, 791.9748) after traveling 41,66667 pixels through wall
+[15:14:22] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:14:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(441.04092, 773.1972), shooter_id=43855644338, bullet_pos=(923.8449, 795.8145)
+[15:14:22] [INFO] [Bullet] Using shooter_position, distance=483,33347
+[15:14:22] [INFO] [Bullet] Distance to wall: 483,33347 (32,911064% of viewport)
+[15:14:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:22] [INFO] [Bullet] Starting wall penetration at (923.8449, 795.8145)
+[15:14:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(404.3946, 806.4073), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:14:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:14:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34,49824
+[15:14:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:22] [INFO] [Bullet] Exiting penetration at (970.46045, 797.9982) after traveling 41,666668 pixels through wall
+[15:14:22] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:14:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(404.39462, 806.40735), shooter_id=43855644338, bullet_pos=(512.3459, 797.3164)
+[15:14:22] [INFO] [Bullet] Using shooter_position, distance=108,33338
+[15:14:22] [INFO] [Bullet] Distance to wall: 108,33338 (7,3766193% of viewport)
+[15:14:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:22] [INFO] [Bullet] Starting wall penetration at (512.3459, 797.3164)
+[15:14:22] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:14:22] [INFO] [Bullet] Exiting penetration at (558.84796, 793.4003) after traveling 41,666668 pixels through wall
+[15:14:22] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:14:22] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[15:14:22] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[15:14:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(377.1709, 833.631), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:14:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:14:22] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
+[15:14:22] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[15:14:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(377.17093, 833.63104), shooter_id=43855644338, bullet_pos=(526.3015, 817.50446)
+[15:14:22] [INFO] [Bullet] Using shooter_position, distance=150
+[15:14:22] [INFO] [Bullet] Distance to wall: 150 (10,213776% of viewport)
+[15:14:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:22] [INFO] [Bullet] Starting wall penetration at (526.3015, 817.50446)
+[15:14:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48,981594
+[15:14:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:22] [INFO] [Bullet] Exiting penetration at (572.6977, 812.4873) after traveling 41,666668 pixels through wall
+[15:14:22] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:14:23] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:14:23] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[15:14:23] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[15:14:23] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[15:14:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(643.2892, 809.061), source=ENEMY (Enemy3), range=1469, listeners=10
+[15:14:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[15:14:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(568.0106, 804.7856), shooter_id=41037071882, bullet_pos=(526.7708, 810.7341)
+[15:14:23] [INFO] [Bullet] Using shooter_position, distance=41.6666679382324
+[15:14:23] [INFO] [Bullet] Distance to wall: 41.6666679382324 (2.83716003816056% of viewport)
+[15:14:23] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[15:14:23] [INFO] [Bullet] Starting wall penetration at (526.7708, 810.7341)
+[15:14:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19.6188659667969
+[15:14:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:23] [INFO] [Bullet] Exiting penetration at (480.5821, 817.3964) after traveling 41.6666679382324 pixels through wall
+[15:14:23] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:14:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(643.2892, 809.061), source=ENEMY (Enemy3), range=1469, listeners=10
+[15:14:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[15:14:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(317.5041, 760.8934), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:14:23] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:14:23] [INFO] [LastChance] Threat detected: Bullet
+[15:14:23] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:23] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(643.2892, 809.061), source=ENEMY (Enemy3), range=1469, listeners=10
+[15:14:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[15:14:24] [INFO] [LastChance] Threat detected: @Area2D@294
+[15:14:24] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(643.2892, 809.061), source=ENEMY (Enemy3), range=1469, listeners=10
+[15:14:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[15:14:24] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[15:14:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(317.5041, 738.2823), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:14:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:14:24] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[15:14:24] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[15:14:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(572.8608, 788.0653), shooter_id=41037071882, bullet_pos=(381.3182, 706.125)
+[15:14:24] [INFO] [Bullet] Using shooter_position, distance=208.333404541016
+[15:14:24] [INFO] [Bullet] Distance to wall: 208.333404541016 (14.1858046065486% of viewport)
+[15:14:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(568.9375, 797.9366), shooter_id=41037071882, bullet_pos=(30.97445, 734.702)
+[15:14:24] [INFO] [Bullet] Using shooter_position, distance=541.666748046875
+[15:14:24] [INFO] [Bullet] Distance to wall: 541.666748046875 (36.883084911833% of viewport)
+[15:14:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:24] [INFO] [Bullet] Starting wall penetration at (30.97445, 734.702)
+[15:14:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47.6992835998535
+[15:14:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:24] [INFO] [Bullet] Exiting penetration at (-15.37313, 729.2542) after traveling 41.6666679382324 pixels through wall
+[15:14:24] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:14:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(317.5041, 736.0665), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:14:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:14:24] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[15:14:24] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[15:14:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(317.50406, 760.8934), shooter_id=43855644338, bullet_pos=(923.3987, 706.4766)
+[15:14:24] [INFO] [Bullet] Using shooter_position, distance=608,33344
+[15:14:24] [INFO] [Bullet] Distance to wall: 608,33344 (41,422543% of viewport)
+[15:14:24] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[15:14:24] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[15:14:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(317.5041, 749.0665), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:14:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:14:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(317.50406, 738.28235), shooter_id=43855644338, bullet_pos=(925.8109, 732.6006)
+[15:14:24] [INFO] [Bullet] Using shooter_position, distance=608,33344
+[15:14:24] [INFO] [Bullet] Distance to wall: 608,33344 (41,422543% of viewport)
+[15:14:24] [INFO] [Bullet] Distance-based penetration chance: 98,34037%
+[15:14:24] [INFO] [Bullet] Starting wall penetration at (925.8109, 732.6006)
+[15:14:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36,477116
+[15:14:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:24] [INFO] [Bullet] Exiting penetration at (972.4755, 732.16473) after traveling 41,666668 pixels through wall
+[15:14:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:14:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(317.50406, 736.0665), shooter_id=43855644338, bullet_pos=(925.7933, 743.37634)
+[15:14:24] [INFO] [Bullet] Using shooter_position, distance=608,33307
+[15:14:24] [INFO] [Bullet] Distance to wall: 608,33307 (41,42252% of viewport)
+[15:14:24] [INFO] [Bullet] Distance-based penetration chance: 98,3404%
+[15:14:24] [INFO] [Bullet] Starting wall penetration at (925.7933, 743.37634)
+[15:14:24] [ENEMY] [Enemy1] FLANKING started: target=(129.3513, 711.0874), side=left, pos=(249.8113, 401.9338)
+[15:14:24] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
+[15:14:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36,459175
+[15:14:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:24] [INFO] [Bullet] Exiting penetration at (972.45654, 743.9371) after traveling 41,666668 pixels through wall
+[15:14:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:14:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(317.50406, 749.0665), shooter_id=43855644338, bullet_pos=(925.76996, 740.0164)
+[15:14:24] [INFO] [Bullet] Using shooter_position, distance=608,3332
+[15:14:24] [INFO] [Bullet] Distance to wall: 608,3332 (41,422527% of viewport)
+[15:14:24] [INFO] [Bullet] Distance-based penetration chance: 98,340385%
+[15:14:24] [INFO] [Bullet] Starting wall penetration at (925.76996, 740.0164)
+[15:14:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36,43549
+[15:14:24] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:24] [INFO] [Bullet] Exiting penetration at (972.43146, 739.32214) after traveling 41,66667 pixels through wall
+[15:14:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:14:25] [ENEMY] [Enemy10] FLANKING started: target=(281.673, 1073.553), side=right, pos=(953.4263, 1416.483)
+[15:14:25] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[15:14:25] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[15:14:25] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
+[15:14:25] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
+[15:14:25] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
+[15:14:26] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[15:14:26] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[15:14:26] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[15:14:27] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:14:27] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[15:14:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(595.3979, 734.0651), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:14:27] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=2, self=0, below_threshold=3
+[15:14:27] [ENEMY] [Enemy4] Hit taken, health: 3/4
+[15:14:27] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[15:14:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(583.2729, 946.8464), source=ENEMY (Enemy4), range=1469, listeners=10
+[15:14:27] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[15:14:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(568.9718, 1009.1), shooter_id=41322284571, bullet_pos=(568.9718, 1009.1)
+[15:14:27] [INFO] [Bullet] Using shooter_position, distance=0
+[15:14:27] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[15:14:27] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[15:14:27] [INFO] [Bullet] Starting wall penetration at (568.9718, 1009.1)
+[15:14:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29.1595783233643
+[15:14:27] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:27] [INFO] [Bullet] Exiting penetration at (564.1185, 971.0751) after traveling 33.3333320617676 pixels through wall
+[15:14:27] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:14:27] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[15:14:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(584.0731, 957.0198), source=ENEMY (Enemy4), range=1469, listeners=10
+[15:14:27] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[15:14:28] [INFO] [LastChance] Threat detected: Bullet
+[15:14:28] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(595.3979, 734.0651), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:14:28] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=2, self=0, below_threshold=3
+[15:14:28] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
+[15:14:28] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
+[15:14:28] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[15:14:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(657.0165, 947.9819), shooter_id=41322284571, bullet_pos=(516.6434, 573.4214)
+[15:14:28] [INFO] [Bullet] Using shooter_position, distance=400.000244140625
+[15:14:28] [INFO] [Bullet] Distance to wall: 400.000244140625 (27.2367521591263% of viewport)
+[15:14:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:28] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[15:14:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(657.0165, 947.9819), shooter_id=41322284571, bullet_pos=(715.7515, 67.88492)
+[15:14:28] [INFO] [Bullet] Using shooter_position, distance=882.054748535156
+[15:14:28] [INFO] [Bullet] Distance to wall: 882.054748535156 (60.0607297834209% of viewport)
+[15:14:28] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[15:14:28] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[15:14:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(595.3979, 734.0651), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:14:28] [INFO] [SoundPropagation] Sound result: notified=5, out_of_range=2, self=0, below_threshold=3
+[15:14:28] [ENEMY] [Enemy3] Hit taken, health: 0/3
+[15:14:28] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[15:14:28] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[15:14:28] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[15:14:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(595.3979, 734.0651), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:28] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=3
+[15:14:28] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[15:14:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(595.3979, 734.0651), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:28] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=3
+[15:14:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(595.39795, 734.06506), shooter_id=43855644338, bullet_pos=(578.8016, 1025.2589)
+[15:14:28] [INFO] [Bullet] Using shooter_position, distance=291,6664
+[15:14:28] [INFO] [Bullet] Distance to wall: 291,6664 (19,860102% of viewport)
+[15:14:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:28] [INFO] [Bullet] Starting wall penetration at (578.8016, 1025.2589)
+[15:14:28] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39,594303
+[15:14:28] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:28] [INFO] [Bullet] Exiting penetration at (576.62036, 1063.5302) after traveling 33,333336 pixels through wall
+[15:14:28] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:14:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(595.39795, 734.06506), shooter_id=43855644338, bullet_pos=(578.8026, 1025.2594)
+[15:14:29] [INFO] [Bullet] Using shooter_position, distance=291,66684
+[15:14:29] [INFO] [Bullet] Distance to wall: 291,66684 (19,860132% of viewport)
+[15:14:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:29] [INFO] [Bullet] Starting wall penetration at (578.8026, 1025.2594)
+[15:14:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39,594784
+[15:14:29] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:29] [INFO] [Bullet] Exiting penetration at (576.6215, 1063.5306) after traveling 33,333336 pixels through wall
+[15:14:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:14:29] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:14:29] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
+[15:14:29] [ENEMY] [Enemy1] Player reloading state changed: false -> true
+[15:14:29] [ENEMY] [Enemy2] Player reloading state changed: false -> true
+[15:14:29] [ENEMY] [Enemy3] Player reloading state changed: false -> true
+[15:14:29] [ENEMY] [Enemy4] Player reloading state changed: false -> true
+[15:14:29] [ENEMY] [Enemy5] Player reloading state changed: false -> true
+[15:14:29] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[15:14:29] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[15:14:29] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[15:14:29] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[15:14:29] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[15:14:29] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(595.3979, 728.0651), source=PLAYER (Player), range=900, listeners=9
+[15:14:29] [ENEMY] [Enemy1] Heard player RELOAD at (595.3979, 728.0651), intensity=0.02, distance=364
+[15:14:29] [ENEMY] [Enemy2] Heard player RELOAD at (595.3979, 728.0651), intensity=0.05, distance=214
+[15:14:29] [ENEMY] [Enemy4] Heard player RELOAD at (595.3979, 728.0651), intensity=0.04, distance=254
+[15:14:29] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
+[15:14:29] [ENEMY] [Enemy10] Heard player RELOAD at (595.3979, 728.0651), intensity=0.02, distance=329
+[15:14:29] [ENEMY] [Enemy10] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
+[15:14:29] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=5, self=0, below_threshold=0
+[15:14:29] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=true (dist=364), can_see=false
+[15:14:29] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=true (dist=214), can_see=false
+[15:14:29] [ENEMY] [Enemy2] Pursuing vulnerability sound at (595.3979, 728.0651), distance=214
+[15:14:29] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=true (dist=254), can_see=false
+[15:14:29] [ENEMY] [Enemy4] Pursuing vulnerability sound at (595.3979, 728.0651), distance=254
+[15:14:29] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1168), can_see=false
+[15:14:29] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1383), can_see=false
+[15:14:29] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1030), can_see=false
+[15:14:29] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1491), can_see=false
+[15:14:29] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1714), can_see=false
+[15:14:29] [ENEMY] [Enemy10] Pursuing vulnerability sound at (595.3979, 728.0651), distance=329
+[15:14:29] [ENEMY] [Enemy2] Player reloading - priority attack triggered
+[15:14:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(408.9579, 630.3762), source=ENEMY (Enemy2), range=1469, listeners=9
+[15:14:29] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[15:14:29] [INFO] [LastChance] Threat detected: Bullet
+[15:14:29] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:29] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[15:14:29] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[15:14:29] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[15:14:29] [INFO] [PenultimateHit]   - Time scale: 0.10
+[15:14:29] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[15:14:29] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[15:14:29] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[15:14:29] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[15:14:29] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[15:14:29] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[15:14:29] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
+[15:14:29] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
+[15:14:29] [ENEMY] [Enemy1] Player reloading state changed: true -> false
+[15:14:29] [ENEMY] [Enemy2] Player reloading state changed: true -> false
+[15:14:29] [ENEMY] [Enemy3] Player reloading state changed: true -> false
+[15:14:29] [ENEMY] [Enemy4] Player reloading state changed: true -> false
+[15:14:29] [ENEMY] [Enemy5] Player reloading state changed: true -> false
+[15:14:29] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[15:14:29] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[15:14:29] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[15:14:29] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[15:14:29] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[15:14:29] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
+[15:14:30] [INFO] [Player.Reload.Anim] LeftArm: pos=(16.44633, 4.788643), target=(24, 6), base=(24, 6)
+[15:14:30] [INFO] [Player.Reload.Anim] RightArm: pos=(-2.0000002, 6.2494807), target=(-2, 6), base=(-2, 6)
+[15:14:30] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[15:14:30] [INFO] [PenultimateHit] Ending penultimate hit effect
+[15:14:30] [INFO] [LastChance] Resetting all effects (scene change detected)
+[15:14:30] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[15:14:30] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[15:14:30] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[15:14:30] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[15:14:30] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[15:14:30] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[15:14:30] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[15:14:30] [INFO] [ScoreManager] Level started with 10 enemies
+[15:14:30] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
+[15:14:30] [ENEMY] [Enemy1] Registered as sound listener
+[15:14:30] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[15:14:30] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
+[15:14:30] [ENEMY] [Enemy2] Registered as sound listener
+[15:14:30] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[15:14:30] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
+[15:14:30] [ENEMY] [Enemy3] Registered as sound listener
+[15:14:30] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[15:14:30] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
+[15:14:30] [ENEMY] [Enemy4] Registered as sound listener
+[15:14:30] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[15:14:30] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
+[15:14:30] [ENEMY] [Enemy5] Registered as sound listener
+[15:14:30] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[15:14:30] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
+[15:14:30] [ENEMY] [Enemy6] Registered as sound listener
+[15:14:30] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[15:14:30] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
+[15:14:30] [ENEMY] [Enemy7] Registered as sound listener
+[15:14:30] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[15:14:30] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
+[15:14:30] [ENEMY] [Enemy8] Registered as sound listener
+[15:14:30] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[15:14:30] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
+[15:14:30] [ENEMY] [Enemy9] Registered as sound listener
+[15:14:30] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[15:14:30] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
+[15:14:30] [ENEMY] [Enemy10] Registered as sound listener
+[15:14:30] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[15:14:30] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[15:14:30] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[15:14:30] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[15:14:30] [INFO] [LastChance] Found player: Player
+[15:14:30] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[15:14:30] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[15:14:30] [INFO] [LastChance] Connected to player Died signal (C#)
+[15:14:30] [INFO] [Player] Detecting weapon pose (frame 3)...
+[15:14:30] [INFO] [Player] Detected weapon: Rifle (default pose)
+[15:14:30] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[15:14:31] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[15:14:31] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[15:14:32] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[15:14:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(520.6901, 761.4474), source=PLAYER (AssaultRifle), range=1469, listeners=19
+[15:14:32] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
+[15:14:32] [ENEMY] [Enemy1] Heard gunshot at (520.6901, 761.4474), source_type=0, intensity=0.01, distance=467
+[15:14:32] [ENEMY] [Enemy2] Heard gunshot at (520.6901, 761.4474), source_type=0, intensity=0.04, distance=243
+[15:14:32] [ENEMY] [Enemy4] Heard gunshot at (520.6901, 761.4474), source_type=0, intensity=0.03, distance=312
+[15:14:32] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[15:14:32] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[15:14:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(546.3581, 735.7794), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:14:32] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[15:14:32] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[15:14:32] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[15:14:32] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[15:14:32] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[15:14:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(571.2482, 710.8892), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:32] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[15:14:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(596.1384, 685.9991), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:32] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[15:14:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(571.2482, 710.8892), shooter_id=280464722749, bullet_pos=(927.51917, 749.27856)
+[15:14:32] [INFO] [Bullet] Using shooter_position, distance=358,33325
+[15:14:32] [INFO] [Bullet] Distance to wall: 358,33325 (24,39957% of viewport)
+[15:14:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(596.13837, 685.9991), shooter_id=280464722749, bullet_pos=(926.1182, 825.69855)
+[15:14:32] [INFO] [Bullet] Using shooter_position, distance=358,33313
+[15:14:32] [INFO] [Bullet] Distance to wall: 358,33313 (24,399563% of viewport)
+[15:14:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:32] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[15:14:32] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[15:14:32] [ENEMY] [Enemy4] Hit taken, health: 3/4
+[15:14:33] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[15:14:33] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:14:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0654, 849.3372), source=ENEMY (Enemy4), range=1469, listeners=9
+[15:14:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[15:14:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(776.42, 915.3923), shooter_id=277931362982, bullet_pos=(757.4652, 887.9728)
+[15:14:33] [INFO] [Bullet] Using shooter_position, distance=33.3333473205566
+[15:14:33] [INFO] [Bullet] Distance to wall: 33.3333473205566 (2.2697289136776% of viewport)
+[15:14:33] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[15:14:33] [INFO] [Bullet] Starting wall penetration at (757.4652, 887.9728)
+[15:14:33] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:14:33] [INFO] [Bullet] Exiting penetration at (735.6672, 856.4404) after traveling 33.3333358764648 pixels through wall
+[15:14:33] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:14:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(784.0654, 859.1369), source=ENEMY (Enemy4), range=1469, listeners=9
+[15:14:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[15:14:33] [ENEMY] [Enemy10] FLANKING started: target=(840.2349, 583.2734), side=left, pos=(1061.496, 1460.101)
+[15:14:33] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[15:14:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(776.4115, 928.2394), shooter_id=277931362982, bullet_pos=(749.7617, 867.131)
+[15:14:33] [INFO] [Bullet] Using shooter_position, distance=66.6666870117188
+[15:14:33] [INFO] [Bullet] Distance to wall: 66.6666870117188 (4.5394573078557% of viewport)
+[15:14:33] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[15:14:33] [INFO] [Bullet] Starting wall penetration at (749.7617, 867.131)
+[15:14:33] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:14:33] [INFO] [Bullet] Exiting penetration at (734.4381, 831.9937) after traveling 33.3333396911621 pixels through wall
+[15:14:33] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:14:33] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[15:14:33] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[15:14:34] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[15:14:34] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[15:14:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(459.4185, 677.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[15:14:35] [ENEMY] [Enemy2] Hit taken, health: 2/3
+[15:14:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(424.2186, 677.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[15:14:35] [ENEMY] [Enemy2] Hit taken, health: 1/3
+[15:14:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
+[15:14:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[15:14:35] [INFO] [LastChance] Threat detected: Bullet
+[15:14:35] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:35] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[15:14:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(389.0186, 677.9337), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[15:14:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[15:14:35] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[15:14:35] [ENEMY] [Enemy2] Hit taken, health: 0/3
+[15:14:35] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[15:14:35] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[15:14:35] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 8)
+[15:14:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(353.8187, 677.9337), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:14:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=4
+[15:14:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.243, 409.2924), source=ENEMY (Enemy1), range=1469, listeners=8
+[15:14:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=4
+[15:14:35] [INFO] [LastChance] Threat detected: @Area2D@576
+[15:14:35] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(356.1583, 484.684), shooter_id=277075724915, bullet_pos=(353.6595, 684.6685)
+[15:14:35] [INFO] [Bullet] Using shooter_position, distance=200.000122070313
+[15:14:35] [INFO] [Bullet] Distance to wall: 200.000122070313 (13.6183760795631% of viewport)
+[15:14:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:35] [INFO] [Bullet] Starting wall penetration at (353.6595, 684.6685)
+[15:14:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(318.6187, 677.9337), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:14:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[15:14:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10.9997596740723
+[15:14:35] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:35] [INFO] [Bullet] Exiting penetration at (353.1805, 722.9989) after traveling 33.3333320617676 pixels through wall
+[15:14:35] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:14:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.243, 409.2924), source=ENEMY (Enemy1), range=1469, listeners=8
+[15:14:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=4
+[15:14:35] [INFO] [LastChance] Threat detected: @Area2D@579
+[15:14:35] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(353.81866, 677.9337), shooter_id=280464722749, bullet_pos=(503.69583, 209.66776)
+[15:14:35] [INFO] [Bullet] Using shooter_position, distance=491,66675
+[15:14:35] [INFO] [Bullet] Distance to wall: 491,66675 (33,478493% of viewport)
+[15:14:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(345.1619, 483.6429), shooter_id=277075724915, bullet_pos=(312.5912, 714.6916)
+[15:14:35] [INFO] [Bullet] Using shooter_position, distance=233.333160400391
+[15:14:35] [INFO] [Bullet] Distance to wall: 233.333160400391 (15.8880839535109% of viewport)
+[15:14:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:35] [INFO] [Bullet] Starting wall penetration at (312.5912, 714.6916)
+[15:14:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41.0515098571777
+[15:14:35] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:35] [INFO] [Bullet] Exiting penetration at (307.2403, 752.6496) after traveling 33.3333320617676 pixels through wall
+[15:14:35] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:14:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(318.6187, 677.9337), shooter_id=280464722749, bullet_pos=(505.76443, 372.35342)
+[15:14:35] [INFO] [Bullet] Using shooter_position, distance=358,3334
+[15:14:35] [INFO] [Bullet] Distance to wall: 358,3334 (24,399582% of viewport)
+[15:14:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:35] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[15:14:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(353.81866, 677.9337), shooter_id=280464722749, bullet_pos=(442.91638, 45.561523)
+[15:14:35] [INFO] [Bullet] Using shooter_position, distance=638,61804
+[15:14:35] [INFO] [Bullet] Distance to wall: 638,61804 (43,48468% of viewport)
+[15:14:36] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[15:14:36] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[15:14:36] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
+[15:14:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(318.6187, 677.9337), shooter_id=280464722749, bullet_pos=(264.6433, 51.111088)
+[15:14:36] [INFO] [Bullet] Using shooter_position, distance=629,1423
+[15:14:36] [INFO] [Bullet] Distance to wall: 629,1423 (42,839455% of viewport)
+[15:14:36] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
+[15:14:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(318.6187, 677.9337), shooter_id=280464722749, bullet_pos=(60.9687, 384.09274)
+[15:14:36] [INFO] [Bullet] Using shooter_position, distance=390,8018
+[15:14:36] [INFO] [Bullet] Distance to wall: 390,8018 (26,610413% of viewport)
+[15:14:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:36] [INFO] [LastChance] Threat detected: @Area2D@578
+[15:14:36] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(318.6187, 677.9337), shooter_id=280464722749, bullet_pos=(296.5076, 699.8692)
+[15:14:36] [INFO] [Bullet] Using shooter_position, distance=31,145897
+[15:14:36] [INFO] [Bullet] Distance to wall: 31,145897 (2,1207814% of viewport)
+[15:14:36] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[15:14:36] [INFO] [Bullet] Starting wall penetration at (296.5076, 699.8692)
+[15:14:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10,337102
+[15:14:36] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:36] [INFO] [Bullet] Exiting penetration at (311.7365, 720.28595) after traveling 20,470833 pixels through wall
+[15:14:36] [INFO] [Bullet] Damage multiplier after penetration: 0,1125
+[15:14:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(346.5229, 398.0844), source=ENEMY (Enemy1), range=1469, listeners=8
+[15:14:36] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[15:14:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(339.3472, 473.1159), shooter_id=277075724915, bullet_pos=(339.3472, 473.1159)
+[15:14:36] [INFO] [Bullet] Using shooter_position, distance=0
+[15:14:36] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[15:14:36] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[15:14:36] [INFO] [Bullet] Starting wall penetration at (339.3472, 473.1159)
+[15:14:36] [INFO] [LastChance] Threat detected: Bullet
+[15:14:36] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.4328346252441
+[15:14:37] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:37] [INFO] [Bullet] Exiting penetration at (346.6198, 510.753) after traveling 33.3333320617676 pixels through wall
+[15:14:37] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:14:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(346.5229, 398.0844), source=ENEMY (Enemy1), range=1469, listeners=8
+[15:14:37] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[15:14:37] [INFO] [LastChance] Threat detected: Bullet
+[15:14:37] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:37] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[15:14:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(346.5229, 398.0844), source=ENEMY (Enemy1), range=1469, listeners=8
+[15:14:37] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[15:14:37] [INFO] [LastChance] Threat detected: @Area2D@588
+[15:14:37] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[15:14:37] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[15:14:37] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[15:14:37] [INFO] [PenultimateHit]   - Time scale: 0.10
+[15:14:37] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[15:14:37] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[15:14:37] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[15:14:37] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[15:14:37] [INFO] [PenultimateHit] Applying saturation to 9 enemies
+[15:14:37] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[15:14:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[15:14:37] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[15:14:37] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[15:14:37] [INFO] [PenultimateHit] Ending penultimate hit effect
+[15:14:37] [INFO] [LastChance] Player died
+[15:14:37] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[15:14:37] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[15:14:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(285.822, 398.989), source=ENEMY (Enemy1), range=1469, listeners=8
+[15:14:37] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[15:14:37] [INFO] [LastChance] Threat detected: Bullet
+[15:14:37] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(285.822, 398.989), source=ENEMY (Enemy1), range=1469, listeners=8
+[15:14:37] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[15:14:37] [INFO] [LastChance] Threat detected: Bullet
+[15:14:37] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(285.822, 398.989), source=ENEMY (Enemy1), range=1469, listeners=8
+[15:14:37] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[15:14:37] [INFO] [LastChance] Threat detected: @Area2D@589
+[15:14:37] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:37] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[15:14:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(346.3588, 420.6139), shooter_id=277075724915, bullet_pos=(527.2319, 523.9953)
+[15:14:37] [INFO] [Bullet] Using shooter_position, distance=208.333358764648
+[15:14:37] [INFO] [Bullet] Distance to wall: 208.333358764648 (14.1858014895516% of viewport)
+[15:14:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(280.8184, 400.8353), source=ENEMY (Enemy1), range=1469, listeners=8
+[15:14:37] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[15:14:37] [INFO] [LastChance] Threat detected: @Area2D@590
+[15:14:37] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(346.594, 413.9773), shooter_id=277075724915, bullet_pos=(496.2467, 487.3383)
+[15:14:37] [INFO] [Bullet] Using shooter_position, distance=166.666625976563
+[15:14:37] [INFO] [Bullet] Distance to wall: 166.666625976563 (11.3486370356452% of viewport)
+[15:14:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:37] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[15:14:37] [INFO] [LastChance] Resetting all effects (scene change detected)
+[15:14:37] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[15:14:37] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[15:14:37] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[15:14:37] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[15:14:37] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[15:14:37] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[15:14:37] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[15:14:37] [INFO] [ScoreManager] Level started with 10 enemies
+[15:14:37] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
+[15:14:37] [ENEMY] [Enemy1] Registered as sound listener
+[15:14:37] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[15:14:37] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
+[15:14:37] [ENEMY] [Enemy2] Registered as sound listener
+[15:14:37] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[15:14:37] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
+[15:14:37] [ENEMY] [Enemy3] Registered as sound listener
+[15:14:37] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[15:14:37] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
+[15:14:37] [ENEMY] [Enemy4] Registered as sound listener
+[15:14:37] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[15:14:37] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
+[15:14:37] [ENEMY] [Enemy5] Registered as sound listener
+[15:14:37] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[15:14:37] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
+[15:14:37] [ENEMY] [Enemy6] Registered as sound listener
+[15:14:37] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[15:14:37] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
+[15:14:37] [ENEMY] [Enemy7] Registered as sound listener
+[15:14:37] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[15:14:37] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
+[15:14:37] [ENEMY] [Enemy8] Registered as sound listener
+[15:14:37] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[15:14:37] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
+[15:14:37] [ENEMY] [Enemy9] Registered as sound listener
+[15:14:37] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[15:14:37] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
+[15:14:37] [ENEMY] [Enemy10] Registered as sound listener
+[15:14:37] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[15:14:37] [INFO] [Player] Detecting weapon pose (frame 3)...
+[15:14:37] [INFO] [Player] Detected weapon: Rifle (default pose)
+[15:14:37] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[15:14:37] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[15:14:37] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[15:14:37] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[15:14:37] [INFO] [LastChance] Found player: Player
+[15:14:37] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[15:14:37] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[15:14:37] [INFO] [LastChance] Connected to player Died signal (C#)
+[15:14:38] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[15:14:38] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[15:14:39] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[15:14:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.4109, 742.9841), source=PLAYER (AssaultRifle), range=1469, listeners=18
+[15:14:39] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
+[15:14:39] [ENEMY] [Enemy1] Heard gunshot at (457.4109, 742.9841), source_type=0, intensity=0.01, distance=423
+[15:14:39] [ENEMY] [Enemy2] Heard gunshot at (457.4109, 742.9841), source_type=0, intensity=0.06, distance=201
+[15:14:39] [ENEMY] [Enemy4] Heard gunshot at (457.4109, 742.9841), source_type=0, intensity=0.02, distance=377
+[15:14:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:14:39] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[15:14:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(475.6378, 734.8641), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:14:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:14:39] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[15:14:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(497.7681, 746.1541), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:14:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:14:39] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[15:14:39] [ENEMY] [Enemy3] Hit taken, health: 1/4
+[15:14:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(688.4629, 760.6805), source=ENEMY (Enemy3), range=1469, listeners=10
+[15:14:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[15:14:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(521.7053, 769.5067), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:14:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[15:14:39] [INFO] [LastChance] Threat detected: Bullet
+[15:14:39] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:39] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[15:14:39] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[15:14:39] [ENEMY] [Enemy3] Hit taken, health: 0/4
+[15:14:39] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[15:14:39] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[15:14:39] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[15:14:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(536.5997, 794.8034), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[15:14:39] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[15:14:39] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:14:39] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[15:14:39] [ENEMY] [Enemy4] Hit taken, health: 1/2
+[15:14:40] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[15:14:40] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[15:14:40] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[15:14:41] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[15:14:41] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[15:14:41] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[15:14:41] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[15:14:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(588.2861, 745.4563), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:41] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[15:14:41] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[15:14:41] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[15:14:41] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[15:14:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(613.1762, 720.5662), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:41] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[15:14:41] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[15:14:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(588.2861, 745.4563), shooter_id=395657087884, bullet_pos=(929.52576, 854.81055)
+[15:14:41] [INFO] [Bullet] Using shooter_position, distance=358,33347
+[15:14:41] [INFO] [Bullet] Distance to wall: 358,33347 (24,399586% of viewport)
+[15:14:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:41] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[15:14:41] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[15:14:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(638.0663, 695.676), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:41] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[15:14:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(613.1762, 720.56616), shooter_id=395657087884, bullet_pos=(914.74304, 841.7366)
+[15:14:41] [INFO] [Bullet] Using shooter_position, distance=324,99973
+[15:14:41] [INFO] [Bullet] Distance to wall: 324,99973 (22,12983% of viewport)
+[15:14:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:41] [INFO] [Bullet] Starting wall penetration at (914.74304, 841.7366)
+[15:14:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15,424576
+[15:14:41] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:41] [INFO] [Bullet] Exiting penetration at (950.31244, 856.02844) after traveling 33,333332 pixels through wall
+[15:14:41] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:14:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(638.06635, 695.676), shooter_id=395657087884, bullet_pos=(931.98865, 900.6458)
+[15:14:41] [INFO] [Bullet] Using shooter_position, distance=358,33356
+[15:14:41] [INFO] [Bullet] Distance to wall: 358,33356 (24,399591% of viewport)
+[15:14:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:41] [INFO] [Bullet] Starting wall penetration at (931.98865, 900.6458)
+[15:14:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33,442955
+[15:14:41] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:41] [INFO] [Bullet] Exiting penetration at (963.4315, 922.5728) after traveling 33,333332 pixels through wall
+[15:14:41] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:14:41] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[15:14:41] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[15:14:41] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[15:14:41] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[15:14:42] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[15:14:42] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[15:14:42] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[15:14:42] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[15:14:42] [ENEMY] [Enemy10] FLANKING started: target=(824.4255, 607.4343), side=left, pos=(955.1431, 1418.083)
+[15:14:42] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[15:14:43] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[15:14:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(489.5393, 674.5961), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[15:14:43] [ENEMY] [Enemy2] Hit taken, health: 3/4
+[15:14:43] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[15:14:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(454.3394, 674.5961), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[15:14:43] [ENEMY] [Enemy2] Hit taken, health: 2/4
+[15:14:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(419.1394, 674.5961), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[15:14:43] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[15:14:43] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
+[15:14:43] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[15:14:43] [ENEMY] [Enemy2] Hit taken, health: 1/4
+[15:14:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(383.9395, 674.5961), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:43] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[15:14:43] [ENEMY] [Enemy2] Hit taken, health: 0/4
+[15:14:43] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[15:14:43] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[15:14:43] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 8)
+[15:14:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(348.7395, 674.5961), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:14:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[15:14:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(313.5396, 674.5961), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:14:43] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=4
+[15:14:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(348.7395, 674.5961), shooter_id=395657087884, bullet_pos=(499.3694, 424.83606)
+[15:14:43] [INFO] [Bullet] Using shooter_position, distance=291,6667
+[15:14:43] [INFO] [Bullet] Distance to wall: 291,6667 (19,86012% of viewport)
+[15:14:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(313.53955, 674.5961), shooter_id=395657087884, bullet_pos=(511.44717, 416.80255)
+[15:14:44] [INFO] [Bullet] Using shooter_position, distance=324,99994
+[15:14:44] [INFO] [Bullet] Distance to wall: 324,99994 (22,129845% of viewport)
+[15:14:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(348.7395, 674.5961), shooter_id=395657087884, bullet_pos=(335.282, 223.15479)
+[15:14:44] [INFO] [Bullet] Using shooter_position, distance=451,64188
+[15:14:44] [INFO] [Bullet] Distance to wall: 451,64188 (30,753126% of viewport)
+[15:14:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(348.7395, 674.5961), shooter_id=395657087884, bullet_pos=(435.67624, 52.88118)
+[15:14:44] [INFO] [Bullet] Using shooter_position, distance=627,7639
+[15:14:44] [INFO] [Bullet] Distance to wall: 627,7639 (42,7456% of viewport)
+[15:14:44] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[15:14:44] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[15:14:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(313.53955, 674.5961), shooter_id=395657087884, bullet_pos=(283.19107, 52.386276)
+[15:14:44] [INFO] [Bullet] Using shooter_position, distance=622,9495
+[15:14:44] [INFO] [Bullet] Distance to wall: 622,9495 (42,417778% of viewport)
+[15:14:44] [INFO] [Bullet] Distance-based penetration chance: 97,17926%
+[15:14:44] [INFO] [Bullet] Starting wall penetration at (283.19107, 52.386276)
+[15:14:44] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9,278171
+[15:14:44] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:44] [INFO] [Bullet] Exiting penetration at (265.4968, 24.136957) after traveling 28,333336 pixels through wall
+[15:14:44] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[15:14:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(348.7395, 674.5961), shooter_id=395657087884, bullet_pos=(500.97635, 208.50284)
+[15:14:44] [INFO] [Bullet] Using shooter_position, distance=490,3254
+[15:14:44] [INFO] [Bullet] Distance to wall: 490,3254 (33,38716% of viewport)
+[15:14:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:44] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[15:14:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(348.7395, 674.5961), shooter_id=395657087884, bullet_pos=(327.21408, 687.5697)
+[15:14:44] [INFO] [Bullet] Using shooter_position, distance=25,132793
+[15:14:44] [INFO] [Bullet] Distance to wall: 25,132793 (1,7113382% of viewport)
+[15:14:44] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[15:14:44] [INFO] [Bullet] Starting wall penetration at (327.21408, 687.5697)
+[15:14:44] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:14:44] [INFO] [Bullet] Exiting penetration at (319.5762, 708.62756) after traveling 17,400208 pixels through wall
+[15:14:44] [INFO] [Bullet] Damage multiplier after penetration: 0,05625
+[15:14:44] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[15:14:44] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
+[15:14:44] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[15:14:44] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
+[15:14:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(316.9135, 394.3009), source=ENEMY (Enemy1), range=1469, listeners=8
+[15:14:45] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=4
+[15:14:45] [INFO] [LastChance] Threat detected: Bullet
+[15:14:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[15:14:45] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[15:14:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(316.9135, 394.3009), source=ENEMY (Enemy1), range=1469, listeners=8
+[15:14:45] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=4
+[15:14:45] [INFO] [LastChance] Threat detected: Bullet
+[15:14:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[15:14:45] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[15:14:45] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[15:14:45] [INFO] [PenultimateHit]   - Time scale: 0.10
+[15:14:45] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[15:14:45] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[15:14:45] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[15:14:45] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[15:14:45] [INFO] [PenultimateHit] Applying saturation to 9 enemies
+[15:14:45] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[15:14:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(316.9135, 394.3009), source=ENEMY (Enemy1), range=1469, listeners=8
+[15:14:45] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=4
+[15:14:45] [INFO] [LastChance] Threat detected: Bullet
+[15:14:45] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:45] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[15:14:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[15:14:45] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[15:14:45] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[15:14:45] [INFO] [PenultimateHit] Ending penultimate hit effect
+[15:14:45] [INFO] [LastChance] Player died
+[15:14:46] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[15:14:46] [INFO] [LastChance] Resetting all effects (scene change detected)
+[15:14:46] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[15:14:46] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[15:14:46] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[15:14:46] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[15:14:46] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[15:14:46] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[15:14:46] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[15:14:46] [INFO] [ScoreManager] Level started with 10 enemies
+[15:14:46] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
+[15:14:46] [ENEMY] [Enemy1] Registered as sound listener
+[15:14:46] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[15:14:46] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
+[15:14:46] [ENEMY] [Enemy2] Registered as sound listener
+[15:14:46] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[15:14:46] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
+[15:14:46] [ENEMY] [Enemy3] Registered as sound listener
+[15:14:46] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[15:14:46] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
+[15:14:46] [ENEMY] [Enemy4] Registered as sound listener
+[15:14:46] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[15:14:46] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
+[15:14:46] [ENEMY] [Enemy5] Registered as sound listener
+[15:14:46] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[15:14:46] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
+[15:14:46] [ENEMY] [Enemy6] Registered as sound listener
+[15:14:46] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[15:14:46] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
+[15:14:46] [ENEMY] [Enemy7] Registered as sound listener
+[15:14:46] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[15:14:46] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
+[15:14:46] [ENEMY] [Enemy8] Registered as sound listener
+[15:14:46] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[15:14:46] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
+[15:14:46] [ENEMY] [Enemy9] Registered as sound listener
+[15:14:46] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[15:14:46] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
+[15:14:46] [ENEMY] [Enemy10] Registered as sound listener
+[15:14:46] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[15:14:46] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[15:14:46] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[15:14:46] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[15:14:46] [INFO] [LastChance] Found player: Player
+[15:14:46] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[15:14:46] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[15:14:46] [INFO] [LastChance] Connected to player Died signal (C#)
+[15:14:46] [INFO] [Player] Detecting weapon pose (frame 3)...
+[15:14:46] [INFO] [Player] Detected weapon: Rifle (default pose)
+[15:14:46] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[15:14:46] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[15:14:47] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[15:14:47] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[15:14:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(454.3621, 800.4428), source=PLAYER (AssaultRifle), range=1469, listeners=18
+[15:14:47] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
+[15:14:47] [ENEMY] [Enemy1] Heard gunshot at (454.3621, 800.4428), source_type=0, intensity=0.01, distance=476
+[15:14:47] [ENEMY] [Enemy2] Heard gunshot at (454.3621, 800.4428), source_type=0, intensity=0.04, distance=256
+[15:14:47] [ENEMY] [Enemy4] Heard gunshot at (454.3621, 800.4428), source_type=0, intensity=0.02, distance=360
+[15:14:47] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:14:47] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[15:14:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(469.5412, 775.594), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:14:47] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:14:47] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[15:14:47] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[15:14:47] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[15:14:47] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[15:14:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(492.9362, 762.6162), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[15:14:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(518.9216, 762.1426), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:48] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[15:14:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(492.9362, 762.6162), shooter_id=540612234195, bullet_pos=(912.47687, 694.71295)
+[15:14:48] [INFO] [Bullet] Using shooter_position, distance=425,00027
+[15:14:48] [INFO] [Bullet] Distance to wall: 425,00027 (28,93905% of viewport)
+[15:14:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:48] [INFO] [Bullet] Starting wall penetration at (912.47687, 694.71295)
+[15:14:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 14,504126
+[15:14:48] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:48] [INFO] [Bullet] Exiting penetration at (950.3178, 688.5883) after traveling 33,333332 pixels through wall
+[15:14:48] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:14:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(544.3181, 775.3096), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:48] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[15:14:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(518.92163, 762.1426), shooter_id=540612234195, bullet_pos=(910.1528, 743.6785)
+[15:14:48] [INFO] [Bullet] Using shooter_position, distance=391,66663
+[15:14:48] [INFO] [Bullet] Distance to wall: 391,66663 (26,669302% of viewport)
+[15:14:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:48] [INFO] [Bullet] Starting wall penetration at (910.1528, 743.6785)
+[15:14:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12,457332
+[15:14:48] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:48] [INFO] [Bullet] Exiting penetration at (948.4435, 741.8714) after traveling 33,333332 pixels through wall
+[15:14:48] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:14:48] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[15:14:48] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:14:48] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[15:14:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(569.2462, 799.3203), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
+[15:14:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(544.31805, 775.3096), shooter_id=540612234195, bullet_pos=(935.8002, 763.282)
+[15:14:48] [INFO] [Bullet] Using shooter_position, distance=391,66684
+[15:14:48] [INFO] [Bullet] Distance to wall: 391,66684 (26,669317% of viewport)
+[15:14:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:48] [INFO] [Bullet] Starting wall penetration at (935.8002, 763.282)
+[15:14:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38,133404
+[15:14:48] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:48] [INFO] [Bullet] Exiting penetration at (974.1154, 762.1048) after traveling 33,333332 pixels through wall
+[15:14:48] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:14:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(569.24615, 799.32025), shooter_id=540612234195, bullet_pos=(925.91797, 764.85254)
+[15:14:48] [INFO] [Bullet] Using shooter_position, distance=358,33337
+[15:14:48] [INFO] [Bullet] Distance to wall: 358,33337 (24,399578% of viewport)
+[15:14:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:48] [INFO] [Bullet] Starting wall penetration at (925.91797, 764.85254)
+[15:14:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28,204329
+[15:14:48] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:48] [INFO] [Bullet] Exiting penetration at (964.07355, 761.1653) after traveling 33,33334 pixels through wall
+[15:14:48] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:14:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(608.3834, 915.1091), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[15:14:48] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[15:14:48] [ENEMY] [Enemy4] Hit taken, health: 3/4
+[15:14:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(628.0515, 937.8751), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[15:14:49] [ENEMY] [Enemy4] Hit taken, health: 2/4
+[15:14:49] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[15:14:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(640.8184, 952.4488), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[15:14:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(757.0092, 914.0658), source=ENEMY (Enemy4), range=1469, listeners=9
+[15:14:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
+[15:14:49] [INFO] [LastChance] Threat detected: Bullet
+[15:14:49] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[15:14:49] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[15:14:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(641.2872, 962.5787), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[15:14:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(764.9055, 917.8507), source=ENEMY (Enemy4), range=1469, listeners=9
+[15:14:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
+[15:14:49] [ENEMY] [Enemy4] Hit taken, health: 1/4
+[15:14:49] [INFO] [LastChance] Threat detected: Bullet
+[15:14:49] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(631.5061, 965.3672), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:14:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[15:14:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[15:14:49] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[15:14:49] [ENEMY] [Enemy4] Hit taken, health: 0/4
+[15:14:49] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[15:14:49] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[15:14:49] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[15:14:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(615.1833, 956.1719), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:14:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[15:14:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(615.1833, 956.17194), shooter_id=540612234195, bullet_pos=(927.3255, 865.6613)
+[15:14:49] [INFO] [Bullet] Using shooter_position, distance=324,99988
+[15:14:49] [INFO] [Bullet] Distance to wall: 324,99988 (22,129839% of viewport)
+[15:14:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:49] [INFO] [Bullet] Starting wall penetration at (927.3255, 865.6613)
+[15:14:49] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29,301497
+[15:14:49] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:49] [INFO] [Bullet] Exiting penetration at (964.1423, 854.9857) after traveling 33,333332 pixels through wall
+[15:14:49] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:14:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(561.2144, 684.1154), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:14:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
+[15:14:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.4478, 656.7202), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:14:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
+[15:14:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(561.2144, 684.1154), shooter_id=540612234195, bullet_pos=(269.23782, 476.38385)
+[15:14:50] [INFO] [Bullet] Using shooter_position, distance=358,33328
+[15:14:50] [INFO] [Bullet] Distance to wall: 358,33328 (24,399572% of viewport)
+[15:14:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:50] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[15:14:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(528.8062, 639.7004), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:14:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
+[15:14:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(561.2144, 684.1154), shooter_id=540612234195, bullet_pos=(58.586212, 628.78424)
+[15:14:50] [INFO] [Bullet] Using shooter_position, distance=505,66458
+[15:14:50] [INFO] [Bullet] Distance to wall: 505,66458 (34,431633% of viewport)
+[15:14:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:50] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[15:14:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(561.2144, 684.1154), shooter_id=540612234195, bullet_pos=(139.78383, 689.4092)
+[15:14:51] [INFO] [Bullet] Using shooter_position, distance=421,46387
+[15:14:51] [INFO] [Bullet] Distance to wall: 421,46387 (28,69825% of viewport)
+[15:14:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(499.2897, 633.0559), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:14:51] [ENEMY] [Enemy2] Heard gunshot at (499.2897, 633.0559), source_type=0, intensity=0.45, distance=74
+[15:14:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
+[15:14:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(549.4478, 656.7202), shooter_id=540612234195, bullet_pos=(55.666298, 396.11377)
+[15:14:51] [INFO] [Bullet] Using shooter_position, distance=558,3331
+[15:14:51] [INFO] [Bullet] Distance to wall: 558,3331 (38,017933% of viewport)
+[15:14:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:51] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[15:14:51] [ENEMY] [Enemy2] Hit taken, health: 2/3
+[15:14:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(528.8062, 639.7004), shooter_id=540612234195, bullet_pos=(47.964024, 428.9499)
+[15:14:51] [INFO] [Bullet] Using shooter_position, distance=525
+[15:14:51] [INFO] [Bullet] Distance to wall: 525 (35,748215% of viewport)
+[15:14:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:51] [INFO] [Bullet] Starting wall penetration at (47.964024, 428.9499)
+[15:14:51] [ENEMY] [Enemy10] FLANKING started: target=(670.5872, 624.9637), side=left, pos=(955.1431, 1418.083)
+[15:14:51] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[15:14:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(466.875, 637.842), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:14:51] [ENEMY] [Enemy2] Heard gunshot at (466.875, 637.842), source_type=0, intensity=0.78, distance=57
+[15:14:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[15:14:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20,903278
+[15:14:51] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:51] [INFO] [Bullet] Exiting penetration at (12.854916, 413.56177) after traveling 33,333336 pixels through wall
+[15:14:51] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:14:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(549.4478, 656.7202), shooter_id=540612234195, bullet_pos=(246.16151, 264.27667)
+[15:14:51] [INFO] [Bullet] Using shooter_position, distance=495,97836
+[15:14:51] [INFO] [Bullet] Distance to wall: 495,97836 (33,77208% of viewport)
+[15:14:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:51] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[15:14:51] [ENEMY] [Enemy2] Hit taken, health: 1/3
+[15:14:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(416.3417, 634.3892), source=ENEMY (Enemy2), range=1469, listeners=8
+[15:14:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[15:14:51] [INFO] [LastChance] Threat detected: @Area2D@1141
+[15:14:51] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:51] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[15:14:51] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[15:14:51] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[15:14:51] [INFO] [PenultimateHit]   - Time scale: 0.10
+[15:14:51] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[15:14:51] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[15:14:51] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[15:14:51] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[15:14:51] [INFO] [PenultimateHit] Applying saturation to 9 enemies
+[15:14:51] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[15:14:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(438.2935, 653.0398), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:14:51] [ENEMY] [Enemy2] Heard gunshot at (438.2935, 653.0398), source_type=0, intensity=1.00, distance=24
+[15:14:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=3
+[15:14:51] [ENEMY] [Enemy2] Hit taken, health: 0/3
+[15:14:51] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[15:14:51] [INFO] [ScoreManager] Kill registered. Combo: 3 (points: 3000)
+[15:14:51] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
+[15:14:51] [ENEMY] [Enemy1] Hit taken, health: 2/3
+[15:14:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(561.2144, 684.1154), shooter_id=540612234195, bullet_pos=(496.94284, 464.46506)
+[15:14:51] [INFO] [Bullet] Using shooter_position, distance=228,86047
+[15:14:51] [INFO] [Bullet] Distance to wall: 228,86047 (15,583531% of viewport)
+[15:14:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:52] [ENEMY] [Enemy1] Hit taken, health: 1/3
+[15:14:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(412.6526, 659.899), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[15:14:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
+[15:14:52] [ENEMY] [Enemy1] Hit taken, health: 0/3
+[15:14:52] [ENEMY] [Enemy1] Enemy died (ricochet: false, penetration: false)
+[15:14:52] [INFO] [ScoreManager] Kill registered. Combo: 4 (points: 5000)
+[15:14:52] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 6)
+[15:14:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(385.314, 656.1932), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:14:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=0, below_threshold=3
+[15:14:53] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
+[15:14:53] [ENEMY] [Enemy1] Player reloading state changed: false -> true
+[15:14:53] [ENEMY] [Enemy2] Player reloading state changed: false -> true
+[15:14:53] [ENEMY] [Enemy4] Player reloading state changed: false -> true
+[15:14:53] [ENEMY] [Enemy5] Player reloading state changed: false -> true
+[15:14:53] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[15:14:53] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[15:14:53] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[15:14:53] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[15:14:53] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[15:14:53] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(372.378, 643.7007), source=PLAYER (Player), range=900, listeners=6
+[15:14:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=1
+[15:14:53] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1360), can_see=false
+[15:14:53] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1589), can_see=false
+[15:14:53] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1262), can_see=false
+[15:14:53] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1727), can_see=false
+[15:14:53] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1951), can_see=false
+[15:14:53] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=880), can_see=false
+[15:14:53] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
+[15:14:54] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
+[15:14:54] [ENEMY] [Enemy1] Player reloading state changed: true -> false
+[15:14:54] [ENEMY] [Enemy2] Player reloading state changed: true -> false
+[15:14:54] [ENEMY] [Enemy4] Player reloading state changed: true -> false
+[15:14:54] [ENEMY] [Enemy5] Player reloading state changed: true -> false
+[15:14:54] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[15:14:54] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[15:14:54] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[15:14:54] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[15:14:54] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[15:14:54] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
+[15:14:54] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
+[15:14:54] [INFO] [PenultimateHit] Ending penultimate hit effect
+[15:14:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(385.31396, 656.1932), shooter_id=540612234195, bullet_pos=(503.53912, 209.05847)
+[15:14:54] [INFO] [Bullet] Using shooter_position, distance=462,5004
+[15:14:54] [INFO] [Bullet] Distance to wall: 462,5004 (31,492504% of viewport)
+[15:14:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(385.31396, 656.1932), shooter_id=540612234195, bullet_pos=(434.43808, 40.596607)
+[15:14:54] [INFO] [Bullet] Using shooter_position, distance=617,55347
+[15:14:54] [INFO] [Bullet] Distance to wall: 617,55347 (42,050354% of viewport)
+[15:14:54] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
+[15:14:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(385.31396, 656.1932), shooter_id=540612234195, bullet_pos=(338.45123, 233.79489)
+[15:14:54] [INFO] [Bullet] Using shooter_position, distance=424,9899
+[15:14:54] [INFO] [Bullet] Distance to wall: 424,9899 (28,938345% of viewport)
+[15:14:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(385.31396, 656.1932), shooter_id=540612234195, bullet_pos=(504.6927, 556.76056)
+[15:14:54] [INFO] [Bullet] Using shooter_position, distance=155,36449
+[15:14:54] [INFO] [Bullet] Distance to wall: 155,36449 (10,579054% of viewport)
+[15:14:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:14:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(385.31396, 656.1932), shooter_id=540612234195, bullet_pos=(438.61786, 699.4567)
+[15:14:54] [INFO] [Bullet] Using shooter_position, distance=68,65158
+[15:14:54] [INFO] [Bullet] Distance to wall: 68,65158 (4,6746125% of viewport)
+[15:14:54] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[15:14:54] [INFO] [Bullet] Starting wall penetration at (438.61786, 699.4567)
+[15:14:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12,927488
+[15:14:54] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:54] [INFO] [Bullet] Exiting penetration at (427.3778, 723.7309) after traveling 21,75026 pixels through wall
+[15:14:54] [INFO] [Bullet] Damage multiplier after penetration: 0,05625
+[15:14:57] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[15:14:57] [INFO] [ScoreManager] Combo ended at 4. Max combo: 4
+[15:14:57] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[15:14:59] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[15:14:59] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[15:14:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(513.632, 625.9384), source=ENEMY (Enemy10), range=1469, listeners=6
+[15:14:59] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=3
+[15:14:59] [INFO] [LastChance] Threat detected: Bullet
+[15:14:59] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(550.4119, 624.8621), source=ENEMY (Enemy10), range=1469, listeners=6
+[15:14:59] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=3
+[15:14:59] [INFO] [LastChance] Threat detected: @Area2D@1155
+[15:14:59] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(586.6804, 616.0651), source=ENEMY (Enemy10), range=1469, listeners=6
+[15:14:59] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=3
+[15:14:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(916.1317, 564.7162), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:14:59] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=4
+[15:14:59] [INFO] [LastChance] Threat detected: @Area2D@1156
+[15:14:59] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:14:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:14:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(582.2473, 609.3234), shooter_id=539790149884, bullet_pos=(1361.484, 313.969)
+[15:14:59] [INFO] [Bullet] Using shooter_position, distance=833.3330078125
+[15:14:59] [INFO] [Bullet] Distance to wall: 833.3330078125 (56.7431768662341% of viewport)
+[15:14:59] [INFO] [Bullet] Distance-based penetration chance: 80.4662936560603%
+[15:14:59] [INFO] [Bullet] Starting wall penetration at (1361.484, 313.969)
+[15:14:59] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[15:14:59] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[15:14:59] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[15:14:59] [INFO] [LastChance] Player died
+[15:14:59] [ENEMY] [Enemy10] Hit taken, health: 3/4
+[15:14:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(623.6259, 610.8229), source=ENEMY (Enemy10), range=1469, listeners=6
+[15:14:59] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=3
+[15:14:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(914.1021, 589.9338), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:14:59] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=4
+[15:14:59] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18.3096771240234
+[15:14:59] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:14:59] [INFO] [Bullet] Exiting penetration at (1405.121, 297.4291) after traveling 41.6666679382324 pixels through wall
+[15:14:59] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:15:00] [INFO] [LastChance] Threat detected: @Area2D@1158
+[15:15:00] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(619.531, 612.9044), shooter_id=539790149884, bullet_pos=(1367.429, 379.9678)
+[15:15:00] [INFO] [Bullet] Using shooter_position, distance=783.333251953125
+[15:15:00] [INFO] [Bullet] Distance to wall: 783.333251953125 (53.3386015483254% of viewport)
+[15:15:00] [ENEMY] [Enemy10] Hit taken, health: 2/4
+[15:15:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(658.6783, 607.6033), source=ENEMY (Enemy10), range=1469, listeners=6
+[15:15:00] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=3
+[15:15:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(923.9031, 589.9338), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:15:00] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=4
+[15:15:00] [INFO] [LastChance] Threat detected: Bullet
+[15:15:00] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:00] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[15:15:00] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
+[15:15:00] [ENEMY] [Enemy10] Hit taken, health: 1/4
+[15:15:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(619.531, 612.9044), shooter_id=539790149884, bullet_pos=(1121.087, 296.808)
+[15:15:00] [INFO] [Bullet] Using shooter_position, distance=592.853637695313
+[15:15:00] [INFO] [Bullet] Distance to wall: 592.853637695313 (40.3684943523855% of viewport)
+[15:15:00] [INFO] [Bullet] Distance-based penetration chance: 99.5700899222169%
+[15:15:00] [INFO] [Bullet] Starting wall penetration at (1121.087, 296.808)
+[15:15:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(947.1294, 590.5158), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:15:00] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=4
+[15:15:00] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:00] [INFO] [Bullet] Exiting penetration at (1089.505, 286.1464) after traveling 0 pixels through wall
+[15:15:00] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[15:15:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(692.15, 608.4029), source=ENEMY (Enemy10), range=1469, listeners=6
+[15:15:00] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=1, below_threshold=3
+[15:15:00] [ENEMY] [Enemy10] Hit taken, health: 0/4
+[15:15:00] [ENEMY] [Enemy10] Enemy died (ricochet: false, penetration: false)
+[15:15:00] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[15:15:00] [INFO] [SoundPropagation] Unregistered listener: Enemy10 (remaining: 5)
+[15:15:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(981.3519, 590.5158), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:00] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=4
+[15:15:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1016.225, 589.7275), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:00] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
+[15:15:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1016.22546, 589.7275), shooter_id=540612234195, bullet_pos=(924.99457, 598.6554)
+[15:15:00] [INFO] [Bullet] Using shooter_position, distance=91,6667
+[15:15:00] [INFO] [Bullet] Distance to wall: 91,6667 (6,2417545% of viewport)
+[15:15:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:00] [INFO] [Bullet] Starting wall penetration at (924.99457, 598.6554)
+[15:15:00] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:15:00] [INFO] [Bullet] Exiting penetration at (886.84344, 602.3889) after traveling 33,333336 pixels through wall
+[15:15:00] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:00] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[15:15:00] [INFO] [LastChance] Resetting all effects (scene change detected)
+[15:15:00] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[15:15:00] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[15:15:00] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[15:15:00] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[15:15:00] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[15:15:00] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[15:15:00] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[15:15:00] [INFO] [ScoreManager] Level started with 10 enemies
+[15:15:00] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 6)
+[15:15:00] [ENEMY] [Enemy1] Registered as sound listener
+[15:15:00] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[15:15:00] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 7)
+[15:15:00] [ENEMY] [Enemy2] Registered as sound listener
+[15:15:00] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[15:15:00] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 8)
+[15:15:00] [ENEMY] [Enemy3] Registered as sound listener
+[15:15:00] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[15:15:00] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 9)
+[15:15:00] [ENEMY] [Enemy4] Registered as sound listener
+[15:15:00] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[15:15:00] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 10)
+[15:15:00] [ENEMY] [Enemy5] Registered as sound listener
+[15:15:00] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[15:15:00] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 11)
+[15:15:00] [ENEMY] [Enemy6] Registered as sound listener
+[15:15:00] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[15:15:00] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 12)
+[15:15:00] [ENEMY] [Enemy7] Registered as sound listener
+[15:15:00] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[15:15:00] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 13)
+[15:15:00] [ENEMY] [Enemy8] Registered as sound listener
+[15:15:00] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[15:15:00] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 14)
+[15:15:00] [ENEMY] [Enemy9] Registered as sound listener
+[15:15:00] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[15:15:00] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 15)
+[15:15:00] [ENEMY] [Enemy10] Registered as sound listener
+[15:15:00] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[15:15:00] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[15:15:00] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[15:15:00] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[15:15:00] [INFO] [LastChance] Found player: Player
+[15:15:00] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[15:15:00] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[15:15:00] [INFO] [LastChance] Connected to player Died signal (C#)
+[15:15:00] [INFO] [Player] Detecting weapon pose (frame 3)...
+[15:15:00] [INFO] [Player] Detected weapon: Rifle (default pose)
+[15:15:00] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[15:15:01] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[15:15:01] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[15:15:02] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[15:15:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(449.4035, 781.4932), source=PLAYER (AssaultRifle), range=1469, listeners=15
+[15:15:02] [INFO] [SoundPropagation] Cleaned up 5 invalid listeners
+[15:15:02] [ENEMY] [Enemy1] Heard gunshot at (449.4035, 781.4932), source_type=0, intensity=0.01, distance=457
+[15:15:02] [ENEMY] [Enemy2] Heard gunshot at (449.4035, 781.4932), source_type=0, intensity=0.04, distance=237
+[15:15:02] [ENEMY] [Enemy4] Heard gunshot at (449.4035, 781.4932), source_type=0, intensity=0.02, distance=370
+[15:15:02] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:15:02] [ENEMY] [Enemy3] Hit taken, health: 2/3
+[15:15:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(469.7321, 753.0822), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:15:02] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:15:02] [ENEMY] [Enemy3] Hit taken, health: 1/3
+[15:15:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(496.692, 737.1015), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:15:02] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:15:02] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[15:15:02] [ENEMY] [Enemy3] Hit taken, health: 0/3
+[15:15:02] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[15:15:02] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[15:15:02] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[15:15:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(525.3606, 734.0407), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:15:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[15:15:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.7205, 743.3241), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:15:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[15:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(525.3606, 734.0407), shooter_id=662616148760, bullet_pos=(910.88666, 803.12213)
+[15:15:03] [INFO] [Bullet] Using shooter_position, distance=391,66644
+[15:15:03] [INFO] [Bullet] Distance to wall: 391,66644 (26,669289% of viewport)
+[15:15:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:03] [INFO] [Bullet] Starting wall penetration at (910.88666, 803.12213)
+[15:15:03] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12,820004
+[15:15:03] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:03] [INFO] [Bullet] Exiting penetration at (948.619, 809.8833) after traveling 33,333336 pixels through wall
+[15:15:03] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:03] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[15:15:03] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:15:03] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[15:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(549.7205, 743.3241), shooter_id=662616148760, bullet_pos=(939.2663, 784.0274)
+[15:15:03] [INFO] [Bullet] Using shooter_position, distance=391,66653
+[15:15:03] [INFO] [Bullet] Distance to wall: 391,66653 (26,669296% of viewport)
+[15:15:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:03] [INFO] [Bullet] Starting wall penetration at (939.2663, 784.0274)
+[15:15:03] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41,617374
+[15:15:03] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:03] [INFO] [Bullet] Exiting penetration at (977.392, 788.0111) after traveling 33,333336 pixels through wall
+[15:15:03] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(571.164, 892.6501), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:15:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[15:15:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(571.164, 892.6501), shooter_id=662616148760, bullet_pos=(696.04535, 887.2032)
+[15:15:03] [INFO] [Bullet] Using shooter_position, distance=125,00008
+[15:15:03] [INFO] [Bullet] Distance to wall: 125,00008 (8,511485% of viewport)
+[15:15:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:03] [INFO] [Bullet] Starting wall penetration at (696.04535, 887.2032)
+[15:15:03] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:15:03] [INFO] [Bullet] Exiting penetration at (734.3423, 885.5328) after traveling 33,333332 pixels through wall
+[15:15:03] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(580.8153, 923.0964), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:15:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[15:15:04] [ENEMY] [Enemy4] Hit taken, health: 1/2
+[15:15:04] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[15:15:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(586.6557, 946.0135), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:15:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[15:15:04] [ENEMY] [Enemy4] Hit taken, health: 0/2
+[15:15:04] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[15:15:04] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[15:15:04] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[15:15:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(582.4161, 960.4857), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[15:15:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(571.7777, 962.9359), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=5
+[15:15:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(582.41614, 960.4857), shooter_id=662616148760, bullet_pos=(933.71423, 889.82794)
+[15:15:04] [INFO] [Bullet] Using shooter_position, distance=358,33347
+[15:15:04] [INFO] [Bullet] Distance to wall: 358,33347 (24,399586% of viewport)
+[15:15:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:04] [INFO] [Bullet] Starting wall penetration at (933.71423, 889.82794)
+[15:15:04] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36,001827
+[15:15:04] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:04] [INFO] [Bullet] Exiting penetration at (971.295, 882.2692) after traveling 33,333336 pixels through wall
+[15:15:04] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(556.9507, 953.3652), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=5
+[15:15:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(571.7777, 962.9359), shooter_id=662616148760, bullet_pos=(927.45416, 919.38275)
+[15:15:04] [INFO] [Bullet] Using shooter_position, distance=358,3331
+[15:15:04] [INFO] [Bullet] Distance to wall: 358,3331 (24,39956% of viewport)
+[15:15:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:04] [INFO] [Bullet] Starting wall penetration at (927.45416, 919.38275)
+[15:15:04] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29,723665
+[15:15:04] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:04] [INFO] [Bullet] Exiting penetration at (965.5033, 914.7236) after traveling 33,333336 pixels through wall
+[15:15:04] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(548.1235, 932.1879), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=5
+[15:15:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(556.9507, 953.3652), shooter_id=662616148760, bullet_pos=(911.37524, 900.5842)
+[15:15:04] [INFO] [Bullet] Using shooter_position, distance=358,33307
+[15:15:04] [INFO] [Bullet] Distance to wall: 358,33307 (24,399557% of viewport)
+[15:15:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(548.12354, 932.1879), shooter_id=662616148760, bullet_pos=(938.09534, 895.7919)
+[15:15:04] [INFO] [Bullet] Using shooter_position, distance=391,66653
+[15:15:04] [INFO] [Bullet] Distance to wall: 391,66653 (26,669296% of viewport)
+[15:15:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:04] [INFO] [Bullet] Starting wall penetration at (938.09534, 895.7919)
+[15:15:04] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40,437794
+[15:15:04] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:04] [INFO] [Bullet] Exiting penetration at (976.2628, 892.2297) after traveling 33,333332 pixels through wall
+[15:15:04] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(616.5967, 757.4496), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[15:15:05] [ENEMY] [Enemy10] FLANKING started: target=(512.274, 912.3282), side=right, pos=(955.9684, 1417.582)
+[15:15:05] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[15:15:05] [ENEMY] [Enemy2] Hit taken, health: 2/3
+[15:15:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(640.5043, 737.9578), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[15:15:05] [ENEMY] [Enemy2] Hit taken, health: 1/3
+[15:15:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(654.4718, 726.6016), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[15:15:05] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[15:15:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(433.824, 637.8196), source=ENEMY (Enemy2), range=1469, listeners=8
+[15:15:05] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[15:15:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(658.4553, 724.5583), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[15:15:05] [INFO] [LastChance] Threat detected: @Area2D@1436
+[15:15:05] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(435.1058, 627.2303), source=ENEMY (Enemy2), range=1469, listeners=8
+[15:15:05] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[15:15:05] [INFO] [LastChance] Threat detected: @Area2D@1438
+[15:15:05] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:05] [ENEMY] [Enemy2] Hit taken, health: 0/3
+[15:15:05] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[15:15:05] [INFO] [ScoreManager] Kill registered. Combo: 3 (points: 3000)
+[15:15:05] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
+[15:15:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.412, 731.6051), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[15:15:05] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=5
+[15:15:05] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[15:15:05] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[15:15:05] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[15:15:05] [INFO] [PenultimateHit]   - Time scale: 0.10
+[15:15:05] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[15:15:05] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[15:15:05] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[15:15:05] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[15:15:05] [INFO] [PenultimateHit] Applying saturation to 9 enemies
+[15:15:05] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[15:15:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(654.4718, 726.60156), shooter_id=662616148760, bullet_pos=(65.58449, 396.6974)
+[15:15:06] [INFO] [Bullet] Using shooter_position, distance=675,00006
+[15:15:06] [INFO] [Bullet] Distance to wall: 675,00006 (45,961998% of viewport)
+[15:15:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(497.0423, 668.4054), shooter_id=659512363694, bullet_pos=(911.3293, 712.8763)
+[15:15:06] [INFO] [Bullet] Using shooter_position, distance=416.666931152344
+[15:15:06] [INFO] [Bullet] Distance to wall: 416.666931152344 (28.3716175250892% of viewport)
+[15:15:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:06] [INFO] [LastChance] Threat detected: @Area2D@1436
+[15:15:06] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(654.4718, 726.60156), shooter_id=662616148760, bullet_pos=(276.27094, 277.04572)
+[15:15:07] [INFO] [Bullet] Using shooter_position, distance=587,48303
+[15:15:07] [INFO] [Bullet] Distance to wall: 587,48303 (40,002804% of viewport)
+[15:15:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(652.41205, 731.6051), shooter_id=662616148760, bullet_pos=(66.397644, 440.88086)
+[15:15:08] [INFO] [Bullet] Using shooter_position, distance=654,16626
+[15:15:08] [INFO] [Bullet] Distance to wall: 654,16626 (44,543385% of viewport)
+[15:15:08] [ENEMY] [Enemy1] Hit taken, health: 1/2
+[15:15:08] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
+[15:15:08] [ENEMY] [Enemy1] Player reloading state changed: false -> true
+[15:15:08] [ENEMY] [Enemy2] Player reloading state changed: false -> true
+[15:15:08] [ENEMY] [Enemy4] Player reloading state changed: false -> true
+[15:15:08] [ENEMY] [Enemy5] Player reloading state changed: false -> true
+[15:15:08] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[15:15:08] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[15:15:08] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[15:15:08] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[15:15:08] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[15:15:08] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(590.3243, 701.004), source=PLAYER (Player), range=900, listeners=7
+[15:15:08] [ENEMY] [Enemy1] Heard player RELOAD at (590.3243, 701.004), intensity=0.02, distance=322
+[15:15:08] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=1
+[15:15:08] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
+[15:15:08] [INFO] [PenultimateHit] Ending penultimate hit effect
+[15:15:08] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=true (dist=322), can_see=false
+[15:15:08] [ENEMY] [Enemy1] Pursuing vulnerability sound at (590.3243, 701.004), distance=322
+[15:15:08] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1164), can_see=false
+[15:15:08] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1383), can_see=false
+[15:15:08] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1035), can_see=false
+[15:15:08] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1509), can_see=false
+[15:15:08] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1732), can_see=false
+[15:15:08] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=618), can_see=true
+[15:15:08] [ENEMY] [Enemy10] Player vulnerable (reloading) - pursuing to attack (dist=618)
+[15:15:08] [ENEMY] [Enemy10] State: FLANKING -> PURSUING
+[15:15:09] [ENEMY] [Enemy1] Player reloading - priority attack triggered
+[15:15:09] [ENEMY] [Enemy1] Player reloading - priority attack triggered
+[15:15:09] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
+[15:15:09] [ENEMY] [Enemy1] Player reloading - priority attack triggered
+[15:15:09] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[15:15:09] [ENEMY] [Enemy1] Player reloading - priority attack triggered
+[15:15:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(464.5975, 527.7325), source=ENEMY (Enemy1), range=1469, listeners=7
+[15:15:09] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=3
+[15:15:09] [INFO] [LastChance] Threat detected: Bullet
+[15:15:09] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:09] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[15:15:09] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
+[15:15:09] [ENEMY] [Enemy1] Player reloading state changed: true -> false
+[15:15:09] [ENEMY] [Enemy2] Player reloading state changed: true -> false
+[15:15:09] [ENEMY] [Enemy5] Player reloading state changed: true -> false
+[15:15:09] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[15:15:09] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[15:15:09] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[15:15:09] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[15:15:09] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[15:15:09] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
+[15:15:09] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[15:15:09] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[15:15:09] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[15:15:09] [INFO] [LastChance] Player died
+[15:15:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(463.2506, 536.3129), source=ENEMY (Enemy1), range=1469, listeners=7
+[15:15:09] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=3
+[15:15:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.7735, 523.231), source=ENEMY (Enemy1), range=1469, listeners=7
+[15:15:09] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=3
+[15:15:09] [INFO] [LastChance] Threat detected: Bullet
+[15:15:09] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:09] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
+[15:15:09] [INFO] [Player.Reload.Anim] LeftArm: pos=(23.708916, 5.9969945), target=(24, 6), base=(24, 6)
+[15:15:09] [INFO] [Player.Reload.Anim] RightArm: pos=(-1.9999995, 6.0460095), target=(-2, 6), base=(-2, 6)
+[15:15:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(437.3087, 588.4502), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[15:15:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
+[15:15:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(402.5768, 579.8737), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[15:15:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
+[15:15:09] [ENEMY] [Enemy1] Hit taken, health: 0/2
+[15:15:09] [ENEMY] [Enemy1] Enemy died (ricochet: false, penetration: false)
+[15:15:09] [INFO] [ScoreManager] Kill registered. Combo: 4 (points: 5000)
+[15:15:09] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 6)
+[15:15:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.30875, 588.4502), shooter_id=662616148760, bullet_pos=(339.8389, 30.229218)
+[15:15:09] [INFO] [Bullet] Using shooter_position, distance=566,66656
+[15:15:09] [INFO] [Bullet] Distance to wall: 566,66656 (38,58537% of viewport)
+[15:15:09] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:09] [INFO] [Bullet] Starting wall penetration at (339.8389, 30.229218)
+[15:15:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(364.0788, 579.8691), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:15:09] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=0, below_threshold=3
+[15:15:09] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48,464237
+[15:15:09] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:09] [INFO] [Bullet] Exiting penetration at (331.81198, -15.741932) after traveling 41,66667 pixels through wall
+[15:15:09] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:09] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[15:15:09] [INFO] [LastChance] Resetting all effects (scene change detected)
+[15:15:09] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[15:15:09] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[15:15:09] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[15:15:09] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[15:15:09] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[15:15:09] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[15:15:09] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[15:15:09] [INFO] [ScoreManager] Level started with 10 enemies
+[15:15:09] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 7)
+[15:15:09] [ENEMY] [Enemy1] Registered as sound listener
+[15:15:09] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[15:15:09] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 8)
+[15:15:09] [ENEMY] [Enemy2] Registered as sound listener
+[15:15:09] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[15:15:09] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 9)
+[15:15:09] [ENEMY] [Enemy3] Registered as sound listener
+[15:15:09] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[15:15:09] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 10)
+[15:15:09] [ENEMY] [Enemy4] Registered as sound listener
+[15:15:09] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[15:15:09] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 11)
+[15:15:09] [ENEMY] [Enemy5] Registered as sound listener
+[15:15:09] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[15:15:09] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 12)
+[15:15:09] [ENEMY] [Enemy6] Registered as sound listener
+[15:15:09] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[15:15:09] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 13)
+[15:15:09] [ENEMY] [Enemy7] Registered as sound listener
+[15:15:09] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[15:15:09] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 14)
+[15:15:09] [ENEMY] [Enemy8] Registered as sound listener
+[15:15:09] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[15:15:09] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 15)
+[15:15:09] [ENEMY] [Enemy9] Registered as sound listener
+[15:15:09] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[15:15:09] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 16)
+[15:15:09] [ENEMY] [Enemy10] Registered as sound listener
+[15:15:09] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[15:15:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(449.6667, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=16
+[15:15:09] [INFO] [SoundPropagation] Cleaned up 6 invalid listeners
+[15:15:09] [ENEMY] [Enemy4] Heard gunshot at (449.6667, 1256), source_type=0, intensity=0.01, distance=499
+[15:15:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
+[15:15:09] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[15:15:09] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[15:15:09] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[15:15:09] [INFO] [LastChance] Found player: Player
+[15:15:09] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[15:15:09] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[15:15:09] [INFO] [LastChance] Connected to player Died signal (C#)
+[15:15:09] [INFO] [Player] Detecting weapon pose (frame 3)...
+[15:15:09] [INFO] [Player] Detected weapon: Rifle (default pose)
+[15:15:09] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[15:15:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(438, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:15:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=5
+[15:15:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(410, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:15:10] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=5
+[15:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(438, 1256), shooter_id=773211556480, bullet_pos=(347.97552, 696.53015)
+[15:15:10] [INFO] [Bullet] Using shooter_position, distance=566,6665
+[15:15:10] [INFO] [Bullet] Distance to wall: 566,6665 (38,585365% of viewport)
+[15:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:10] [INFO] [Bullet] Starting wall penetration at (347.97552, 696.53015)
+[15:15:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38,026825
+[15:15:10] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:10] [INFO] [Bullet] Exiting penetration at (340.56174, 650.4561) after traveling 41,666668 pixels through wall
+[15:15:10] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(410, 1256), shooter_id=773211556480, bullet_pos=(459.05057, 691.4606)
+[15:15:10] [INFO] [Bullet] Using shooter_position, distance=566,6663
+[15:15:10] [INFO] [Bullet] Distance to wall: 566,6663 (38,585354% of viewport)
+[15:15:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:10] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[15:15:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(449.66666, 1256), shooter_id=773211556480, bullet_pos=(2474.6667, 1256)
+[15:15:10] [INFO] [Bullet] Using shooter_position, distance=2025,0001
+[15:15:10] [INFO] [Bullet] Distance to wall: 2025,0001 (137,88599% of viewport)
+[15:15:10] [INFO] [Bullet] Distance-based penetration chance: 22,422802%
+[15:15:10] [INFO] [Bullet] Penetration failed (distance roll)
+[15:15:10] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[15:15:10] [INFO] [LastChance] Resetting all effects (scene change detected)
+[15:15:10] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[15:15:10] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[15:15:10] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[15:15:10] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[15:15:10] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[15:15:10] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[15:15:10] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[15:15:10] [INFO] [ScoreManager] Level started with 10 enemies
+[15:15:10] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[15:15:10] [ENEMY] [Enemy1] Registered as sound listener
+[15:15:10] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[15:15:10] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[15:15:10] [ENEMY] [Enemy2] Registered as sound listener
+[15:15:10] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[15:15:10] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[15:15:10] [ENEMY] [Enemy3] Registered as sound listener
+[15:15:10] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[15:15:10] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[15:15:10] [ENEMY] [Enemy4] Registered as sound listener
+[15:15:10] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[15:15:10] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[15:15:10] [ENEMY] [Enemy5] Registered as sound listener
+[15:15:10] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[15:15:10] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[15:15:10] [ENEMY] [Enemy6] Registered as sound listener
+[15:15:10] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[15:15:10] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[15:15:10] [ENEMY] [Enemy7] Registered as sound listener
+[15:15:10] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[15:15:10] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[15:15:10] [ENEMY] [Enemy8] Registered as sound listener
+[15:15:10] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[15:15:10] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[15:15:10] [ENEMY] [Enemy9] Registered as sound listener
+[15:15:10] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[15:15:10] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[15:15:10] [ENEMY] [Enemy10] Registered as sound listener
+[15:15:10] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[15:15:11] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[15:15:11] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[15:15:11] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[15:15:11] [INFO] [LastChance] Found player: Player
+[15:15:11] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[15:15:11] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[15:15:11] [INFO] [LastChance] Connected to player Died signal (C#)
+[15:15:11] [INFO] [Player] Detecting weapon pose (frame 3)...
+[15:15:11] [INFO] [Player] Detected weapon: Rifle (default pose)
+[15:15:11] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[15:15:11] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[15:15:11] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[15:15:12] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[15:15:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(454.6194, 794.5801), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[15:15:12] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[15:15:12] [ENEMY] [Enemy1] Heard gunshot at (454.6194, 794.5801), source_type=0, intensity=0.01, distance=471
+[15:15:12] [ENEMY] [Enemy2] Heard gunshot at (454.6194, 794.5801), source_type=0, intensity=0.04, distance=251
+[15:15:12] [ENEMY] [Enemy4] Heard gunshot at (454.6194, 794.5801), source_type=0, intensity=0.02, distance=361
+[15:15:12] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:15:12] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[15:15:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(472.1392, 766.2311), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:15:12] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:15:12] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[15:15:12] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[15:15:12] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[15:15:12] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[15:15:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(496.7643, 750.6298), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:15:12] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[15:15:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(525.8595, 747.0505), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:15:12] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[15:15:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(496.76434, 750.6298), shooter_id=793797199197, bullet_pos=(921.6979, 758.1667)
+[15:15:12] [INFO] [Bullet] Using shooter_position, distance=425,00034
+[15:15:12] [INFO] [Bullet] Distance to wall: 425,00034 (28,939056% of viewport)
+[15:15:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:12] [INFO] [Bullet] Starting wall penetration at (921.6979, 758.1667)
+[15:15:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24,028925
+[15:15:12] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:12] [INFO] [Bullet] Exiting penetration at (960.02515, 758.8465) after traveling 33,333336 pixels through wall
+[15:15:12] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(525.8595, 747.0505), shooter_id=793797199197, bullet_pos=(917.4571, 754.3971)
+[15:15:13] [INFO] [Bullet] Using shooter_position, distance=391,6665
+[15:15:13] [INFO] [Bullet] Distance to wall: 391,6665 (26,669294% of viewport)
+[15:15:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:13] [INFO] [Bullet] Starting wall penetration at (917.4571, 754.3971)
+[15:15:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19,787172
+[15:15:13] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:13] [INFO] [Bullet] Exiting penetration at (955.7837, 755.11615) after traveling 33,333332 pixels through wall
+[15:15:13] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:13] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[15:15:13] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:15:13] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[15:15:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(580.47, 901.429), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:15:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[15:15:13] [ENEMY] [Enemy4] Hit taken, health: 3/4
+[15:15:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(571.7035, 930.2664), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:15:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[15:15:13] [ENEMY] [Enemy4] Hit taken, health: 2/4
+[15:15:13] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[15:15:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(555.8221, 947.9562), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:15:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
+[15:15:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(742.6345, 914.0654), source=ENEMY (Enemy4), range=1469, listeners=9
+[15:15:14] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
+[15:15:14] [ENEMY] [Enemy4] Hit taken, health: 1/4
+[15:15:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.2535, 952.6367), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:15:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
+[15:15:14] [INFO] [LastChance] Threat detected: @Area2D@1964
+[15:15:14] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(752.4313, 914.0654), source=ENEMY (Enemy4), range=1469, listeners=9
+[15:15:14] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
+[15:15:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(808.9781, 906.3672), shooter_id=791263840161, bullet_pos=(520.6552, 989.2509)
+[15:15:14] [INFO] [Bullet] Using shooter_position, distance=299.999725341797
+[15:15:14] [INFO] [Bullet] Distance to wall: 299.999725341797 (20.4275329493745% of viewport)
+[15:15:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:14] [INFO] [Bullet] Starting wall penetration at (520.6552, 989.2509)
+[15:15:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(808.9781, 906.3672), shooter_id=791263840161, bullet_pos=(515.8498, 990.6323)
+[15:15:14] [INFO] [Bullet] Using shooter_position, distance=304.999725341797
+[15:15:14] [INFO] [Bullet] Distance to wall: 304.999725341797 (20.7679921435638% of viewport)
+[15:15:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:14] [INFO] [Bullet] Already penetrating, cannot start new penetration
+[15:15:14] [INFO] [LastChance] Threat detected: @Area2D@1965
+[15:15:14] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:14] [ENEMY] [Enemy4] Hit taken, health: 0/4
+[15:15:14] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[15:15:14] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[15:15:14] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[15:15:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.8416519165039
+[15:15:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:14] [INFO] [Bullet] Exiting penetration at (483.8139, 999.8416) after traveling 33.3333358764648 pixels through wall
+[15:15:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:15:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(540.0667, 944.1302), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:14] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=5
+[15:15:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(822.4816, 906.6603), shooter_id=791263840161, bullet_pos=(527.5052, 961.3326)
+[15:15:14] [INFO] [Bullet] Using shooter_position, distance=300.000183105469
+[15:15:14] [INFO] [Bullet] Distance to wall: 300.000183105469 (20.4275641193447% of viewport)
+[15:15:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:14] [INFO] [Bullet] Starting wall penetration at (527.5052, 961.3326)
+[15:15:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10.3596086502075
+[15:15:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:14] [INFO] [Bullet] Exiting penetration at (489.8139, 968.3185) after traveling 33.3333320617676 pixels through wall
+[15:15:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:15:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(540.06665, 944.1302), shooter_id=793797199197, bullet_pos=(927.367, 885.8091)
+[15:15:14] [INFO] [Bullet] Using shooter_position, distance=391,66684
+[15:15:14] [INFO] [Bullet] Distance to wall: 391,66684 (26,669317% of viewport)
+[15:15:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:14] [INFO] [Bullet] Starting wall penetration at (927.367, 885.8091)
+[15:15:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29,603037
+[15:15:14] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:14] [INFO] [Bullet] Exiting penetration at (965.273, 880.1011) after traveling 33,333336 pixels through wall
+[15:15:14] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(604.1645, 787.1202), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:14] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[15:15:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(629.0546, 762.2301), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:15] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[15:15:15] [ENEMY] [Enemy2] Hit taken, health: 3/4
+[15:15:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(648.0855, 736.8292), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:15] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[15:15:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(629.0546, 762.2301), shooter_id=793797199197, bullet_pos=(318.71747, 471.85797)
+[15:15:15] [INFO] [Bullet] Using shooter_position, distance=425,00015
+[15:15:15] [INFO] [Bullet] Distance to wall: 425,00015 (28,939041% of viewport)
+[15:15:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:15] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[15:15:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(653.4806, 711.5287), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[15:15:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(393.9751, 615.2749), source=ENEMY (Enemy2), range=1469, listeners=8
+[15:15:15] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[15:15:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(648.0855, 736.82916), shooter_id=793797199197, bullet_pos=(277.62268, 466.96518)
+[15:15:15] [INFO] [Bullet] Using shooter_position, distance=458,33316
+[15:15:15] [INFO] [Bullet] Distance to wall: 458,33316 (31,208748% of viewport)
+[15:15:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(401.1773, 607.4069), source=ENEMY (Enemy2), range=1469, listeners=8
+[15:15:15] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[15:15:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(645.7741, 687.8149), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[15:15:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(629.0546, 762.2301), shooter_id=793797199197, bullet_pos=(58.842865, 698.7725)
+[15:15:15] [INFO] [Bullet] Using shooter_position, distance=573,732
+[15:15:15] [INFO] [Bullet] Distance to wall: 573,732 (39,066467% of viewport)
+[15:15:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:15] [INFO] [LastChance] Threat detected: @Area2D@1978
+[15:15:15] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:15] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
+[15:15:15] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[15:15:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(408.3795, 599.5388), source=ENEMY (Enemy2), range=1469, listeners=8
+[15:15:15] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=3
+[15:15:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(653.4806, 711.5287), shooter_id=793797199197, bullet_pos=(301.6787, 473.0747)
+[15:15:15] [INFO] [Bullet] Using shooter_position, distance=424,99985
+[15:15:15] [INFO] [Bullet] Distance to wall: 424,99985 (28,93902% of viewport)
+[15:15:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:15] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[15:15:15] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[15:15:15] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[15:15:15] [INFO] [PenultimateHit]   - Time scale: 0.10
+[15:15:15] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[15:15:15] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[15:15:15] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[15:15:15] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[15:15:15] [INFO] [PenultimateHit] Applying saturation to 9 enemies
+[15:15:15] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[15:15:15] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[15:15:15] [INFO] [LastChance] Threat detected: @Area2D@1981
+[15:15:15] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:15] [ENEMY] [Enemy2] Hit taken, health: 2/4
+[15:15:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(648.0855, 736.82916), shooter_id=793797199197, bullet_pos=(65.867615, 662.6585)
+[15:15:15] [INFO] [Bullet] Using shooter_position, distance=586,9233
+[15:15:15] [INFO] [Bullet] Distance to wall: 586,9233 (39,964687% of viewport)
+[15:15:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(454.6666, 643.833), shooter_id=790693415430, bullet_pos=(908.7875, 650.3062)
+[15:15:15] [INFO] [Bullet] Using shooter_position, distance=454.167083740234
+[15:15:15] [INFO] [Bullet] Distance to wall: 454.167083740234 (30.9250718714988% of viewport)
+[15:15:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:15] [INFO] [Bullet] Starting wall penetration at (908.7875, 650.3062)
+[15:15:15] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:15:15] [INFO] [Bullet] Exiting penetration at (917.9533, 650.4369) after traveling 4.16666698455811 pixels through wall
+[15:15:15] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:15:16] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[15:15:16] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[15:15:16] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[15:15:16] [INFO] [PenultimateHit] Ending penultimate hit effect
+[15:15:16] [INFO] [LastChance] Player died
+[15:15:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(648.0855, 736.82916), shooter_id=793797199197, bullet_pos=(109.21057, 715.33844)
+[15:15:16] [INFO] [Bullet] Using shooter_position, distance=539,3033
+[15:15:16] [INFO] [Bullet] Distance to wall: 539,3033 (36,722153% of viewport)
+[15:15:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(648.0855, 736.82916), shooter_id=793797199197, bullet_pos=(62.73027, 782.60803)
+[15:15:16] [INFO] [Bullet] Using shooter_position, distance=587,14264
+[15:15:16] [INFO] [Bullet] Distance to wall: 587,14264 (39,97962% of viewport)
+[15:15:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(653.4806, 711.5287), shooter_id=793797199197, bullet_pos=(60.596096, 661.59766)
+[15:15:16] [INFO] [Bullet] Using shooter_position, distance=594,98334
+[15:15:16] [INFO] [Bullet] Distance to wall: 594,98334 (40,513508% of viewport)
+[15:15:16] [INFO] [Bullet] Distance-based penetration chance: 99,40091%
+[15:15:16] [INFO] [Bullet] Starting wall penetration at (60.596096, 661.59766)
+[15:15:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 4,115417
+[15:15:16] [INFO] [Bullet] Max penetration distance exceeded: 70,833336 >= 48
+[15:15:16] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:16] [INFO] [Bullet] Exiting penetration at (0.85881424, 708.3112) after traveling 70,833336 pixels through wall
+[15:15:16] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[15:15:16] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[15:15:16] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[15:15:16] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[15:15:16] [ENEMY] [Enemy10] FLANKING started: target=(745.6094, 664.6656), side=left, pos=(955.1431, 1418.083)
+[15:15:16] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[15:15:16] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[15:15:16] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[15:15:16] [INFO] [LastChance] Resetting all effects (scene change detected)
+[15:15:16] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[15:15:16] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[15:15:16] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[15:15:16] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[15:15:16] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[15:15:16] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[15:15:16] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[15:15:16] [INFO] [ScoreManager] Level started with 10 enemies
+[15:15:16] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
+[15:15:16] [ENEMY] [Enemy1] Registered as sound listener
+[15:15:16] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[15:15:16] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
+[15:15:16] [ENEMY] [Enemy2] Registered as sound listener
+[15:15:16] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[15:15:16] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
+[15:15:16] [ENEMY] [Enemy3] Registered as sound listener
+[15:15:16] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[15:15:16] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
+[15:15:16] [ENEMY] [Enemy4] Registered as sound listener
+[15:15:16] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[15:15:16] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
+[15:15:16] [ENEMY] [Enemy5] Registered as sound listener
+[15:15:16] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[15:15:16] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
+[15:15:16] [ENEMY] [Enemy6] Registered as sound listener
+[15:15:16] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[15:15:16] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
+[15:15:16] [ENEMY] [Enemy7] Registered as sound listener
+[15:15:16] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[15:15:16] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
+[15:15:16] [ENEMY] [Enemy8] Registered as sound listener
+[15:15:16] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[15:15:16] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
+[15:15:16] [ENEMY] [Enemy9] Registered as sound listener
+[15:15:16] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[15:15:16] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
+[15:15:16] [ENEMY] [Enemy10] Registered as sound listener
+[15:15:16] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[15:15:16] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[15:15:16] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[15:15:16] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[15:15:16] [INFO] [LastChance] Found player: Player
+[15:15:16] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[15:15:16] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[15:15:16] [INFO] [LastChance] Connected to player Died signal (C#)
+[15:15:16] [INFO] [Player] Detecting weapon pose (frame 3)...
+[15:15:16] [INFO] [Player] Detected weapon: Rifle (default pose)
+[15:15:16] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[15:15:17] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[15:15:17] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[15:15:18] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[15:15:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(338.5055, 819.3447), source=PLAYER (AssaultRifle), range=1469, listeners=18
+[15:15:18] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
+[15:15:18] [ENEMY] [Enemy1] Heard gunshot at (338.5055, 819.3447), source_type=0, intensity=0.01, distance=471
+[15:15:18] [ENEMY] [Enemy2] Heard gunshot at (338.5055, 819.3447), source_type=0, intensity=0.03, distance=276
+[15:15:18] [ENEMY] [Enemy4] Heard gunshot at (338.5055, 819.3447), source_type=0, intensity=0.01, distance=468
+[15:15:18] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:15:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(351.4398, 786.2024), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:15:18] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:15:18] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[15:15:18] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[15:15:18] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[15:15:18] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[15:15:18] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[15:15:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(374.7347, 763.5043), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:15:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[15:15:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(404.2013, 753.4977), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:15:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[15:15:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(439.0012, 752.7994), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:15:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[15:15:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(374.7347, 763.50433), shooter_id=864076957767, bullet_pos=(932.51465, 738.6523)
+[15:15:18] [INFO] [Bullet] Using shooter_position, distance=558,3333
+[15:15:18] [INFO] [Bullet] Distance to wall: 558,3333 (38,017944% of viewport)
+[15:15:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:18] [INFO] [Bullet] Starting wall penetration at (932.51465, 738.6523)
+[15:15:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34,844532
+[15:15:18] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:18] [INFO] [Bullet] Exiting penetration at (970.81, 736.94604) after traveling 33,333336 pixels through wall
+[15:15:18] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:18] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[15:15:18] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[15:15:18] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:15:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(404.20132, 753.49774), shooter_id=864076957767, bullet_pos=(929.2009, 752.6422)
+[15:15:18] [INFO] [Bullet] Using shooter_position, distance=525,0003
+[15:15:18] [INFO] [Bullet] Distance to wall: 525,0003 (35,748238% of viewport)
+[15:15:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:18] [INFO] [Bullet] Starting wall penetration at (929.2009, 752.6422)
+[15:15:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31,534283
+[15:15:18] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:18] [INFO] [Bullet] Exiting penetration at (967.53424, 752.5798) after traveling 33,333336 pixels through wall
+[15:15:18] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(439.0012, 752.79944), shooter_id=864076957767, bullet_pos=(930.0942, 776.53864)
+[15:15:18] [INFO] [Bullet] Using shooter_position, distance=491,6664
+[15:15:18] [INFO] [Bullet] Distance to wall: 491,6664 (33,47847% of viewport)
+[15:15:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:18] [INFO] [Bullet] Starting wall penetration at (930.0942, 776.53864)
+[15:15:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32,420567
+[15:15:18] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:18] [INFO] [Bullet] Exiting penetration at (968.38275, 778.38947) after traveling 33,333336 pixels through wall
+[15:15:18] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(572.0898, 855.9842), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:15:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[15:15:19] [ENEMY] [Enemy4] Hit taken, health: 1/2
+[15:15:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(572.0898, 891.1844), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:15:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[15:15:19] [ENEMY] [Enemy4] Hit taken, health: 0/2
+[15:15:19] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[15:15:19] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[15:15:19] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
+[15:15:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(570.1188, 925.5681), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:19] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[15:15:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(558.8126, 952.3603), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:19] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=5
+[15:15:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(570.11884, 925.56805), shooter_id=864076957767, bullet_pos=(927.6941, 902.2689)
+[15:15:19] [INFO] [Bullet] Using shooter_position, distance=358,33353
+[15:15:19] [INFO] [Bullet] Distance to wall: 358,33353 (24,39959% of viewport)
+[15:15:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:19] [INFO] [Bullet] Starting wall penetration at (927.6941, 902.2689)
+[15:15:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30,009855
+[15:15:19] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:19] [INFO] [Bullet] Exiting penetration at (965.94635, 899.7764) after traveling 33,333336 pixels through wall
+[15:15:19] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(542.6879, 966.8492), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:19] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=5
+[15:15:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.81256, 952.3603), shooter_id=864076957767, bullet_pos=(909.57465, 879.0898)
+[15:15:20] [INFO] [Bullet] Using shooter_position, distance=358,3331
+[15:15:20] [INFO] [Bullet] Distance to wall: 358,3331 (24,39956% of viewport)
+[15:15:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.81256, 952.3603), shooter_id=864076957767, bullet_pos=(737.4323, 847.59296)
+[15:15:20] [INFO] [Bullet] Using shooter_position, distance=207,07779
+[15:15:20] [INFO] [Bullet] Distance to wall: 207,07779 (14,100307% of viewport)
+[15:15:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(542.68787, 966.8492), shooter_id=864076957767, bullet_pos=(922.3231, 870.51624)
+[15:15:20] [INFO] [Bullet] Using shooter_position, distance=391,6669
+[15:15:20] [INFO] [Bullet] Distance to wall: 391,6669 (26,669321% of viewport)
+[15:15:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:20] [INFO] [Bullet] Starting wall penetration at (922.3231, 870.51624)
+[15:15:20] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24,222996
+[15:15:20] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:20] [INFO] [Bullet] Exiting penetration at (959.4789, 861.0879) after traveling 33,333336 pixels through wall
+[15:15:20] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:20] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[15:15:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(633.2793, 846.3121), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:20] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[15:15:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(656.9869, 820.9321), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[15:15:21] [ENEMY] [Enemy2] Hit taken, health: 1/2
+[15:15:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(669.6074, 793.7878), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:15:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[15:15:21] [ENEMY] [Enemy2] Hit taken, health: 0/2
+[15:15:21] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[15:15:21] [INFO] [ScoreManager] Kill registered. Combo: 3 (points: 3000)
+[15:15:21] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
+[15:15:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(671.2345, 764.1198), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[15:15:21] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=5
+[15:15:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(669.60736, 793.7878), shooter_id=864076957767, bullet_pos=(250.82214, 477.17468)
+[15:15:21] [INFO] [Bullet] Using shooter_position, distance=524,99994
+[15:15:21] [INFO] [Bullet] Distance to wall: 524,99994 (35,748215% of viewport)
+[15:15:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(671.2345, 728.9196), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[15:15:21] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=5
+[15:15:21] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[15:15:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(669.60736, 793.7878), shooter_id=864076957767, bullet_pos=(47.499664, 639.2241)
+[15:15:21] [INFO] [Bullet] Using shooter_position, distance=641,02094
+[15:15:21] [INFO] [Bullet] Distance to wall: 641,02094 (43,648296% of viewport)
+[15:15:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(669.60736, 793.7878), shooter_id=864076957767, bullet_pos=(104.69098, 691.154)
+[15:15:21] [INFO] [Bullet] Using shooter_position, distance=574,16394
+[15:15:21] [INFO] [Bullet] Distance to wall: 574,16394 (39,09588% of viewport)
+[15:15:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:21] [INFO] [Bullet] Starting wall penetration at (104.69098, 691.154)
+[15:15:21] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:15:21] [INFO] [Bullet] Exiting penetration at (126.22256, 710.7047) after traveling 24,083334 pixels through wall
+[15:15:21] [INFO] [Bullet] Damage multiplier after penetration: 0,225
+[15:15:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(671.2345, 764.11975), shooter_id=864076957767, bullet_pos=(59.60391, 374.8473)
+[15:15:21] [INFO] [Bullet] Using shooter_position, distance=725,00006
+[15:15:21] [INFO] [Bullet] Distance to wall: 725,00006 (49,36659% of viewport)
+[15:15:21] [INFO] [Bullet] Distance-based penetration chance: 89,07232%
+[15:15:21] [INFO] [Bullet] Starting wall penetration at (59.60391, 374.8473)
+[15:15:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 5,6128883
+[15:15:21] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:21] [INFO] [Bullet] Exiting penetration at (27.26482, 354.26508) after traveling 33,333332 pixels through wall
+[15:15:21] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(671.2345, 728.91956), shooter_id=864076957767, bullet_pos=(64.57093, 473.25928)
+[15:15:21] [INFO] [Bullet] Using shooter_position, distance=658,33344
+[15:15:21] [INFO] [Bullet] Distance to wall: 658,33344 (44,827137% of viewport)
+[15:15:21] [INFO] [Bullet] Distance-based penetration chance: 94,36834%
+[15:15:21] [INFO] [Bullet] Penetration failed (distance roll)
+[15:15:21] [ENEMY] [Enemy10] FLANKING started: target=(797.5244, 655.8068), side=left, pos=(956.4773, 1424.79)
+[15:15:21] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[15:15:22] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[15:15:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(503.193, 657.4583), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[15:15:22] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=4
+[15:15:22] [ENEMY] [Enemy1] Hit taken, health: 2/3
+[15:15:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(467.9931, 657.4583), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[15:15:22] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
+[15:15:22] [ENEMY] [Enemy1] Hit taken, health: 1/3
+[15:15:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(432.7931, 657.4583), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[15:15:22] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
+[15:15:22] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[15:15:22] [ENEMY] [Enemy1] Hit taken, health: 0/3
+[15:15:22] [ENEMY] [Enemy1] Enemy died (ricochet: false, penetration: false)
+[15:15:22] [INFO] [ScoreManager] Kill registered. Combo: 4 (points: 5000)
+[15:15:22] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 6)
+[15:15:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(397.5932, 657.4583), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:15:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=0, below_threshold=3
+[15:15:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(362.883, 656.2757), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:15:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=0, below_threshold=3
+[15:15:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(362.88303, 656.2757), shooter_id=864076957767, bullet_pos=(508.7117, 365.82935)
+[15:15:23] [INFO] [Bullet] Using shooter_position, distance=325,00012
+[15:15:23] [INFO] [Bullet] Distance to wall: 325,00012 (22,129856% of viewport)
+[15:15:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(397.59317, 657.45825), shooter_id=864076957767, bullet_pos=(530.6205, 46.77929)
+[15:15:23] [INFO] [Bullet] Using shooter_position, distance=625,00006
+[15:15:23] [INFO] [Bullet] Distance to wall: 625,00006 (42,557404% of viewport)
+[15:15:23] [INFO] [Bullet] Distance-based penetration chance: 97,016365%
+[15:15:23] [INFO] [Bullet] Starting wall penetration at (530.6205, 46.77929)
+[15:15:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23,207457
+[15:15:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:23] [INFO] [Bullet] Exiting penetration at (538.7795, 9.324318) after traveling 33,333332 pixels through wall
+[15:15:23] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:23] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
+[15:15:23] [ENEMY] [Enemy1] Player reloading state changed: false -> true
+[15:15:23] [ENEMY] [Enemy2] Player reloading state changed: false -> true
+[15:15:23] [ENEMY] [Enemy5] Player reloading state changed: false -> true
+[15:15:23] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[15:15:23] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[15:15:23] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[15:15:23] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[15:15:23] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[15:15:23] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(318.0057, 624.8758), source=PLAYER (Player), range=900, listeners=6
+[15:15:23] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=1
+[15:15:23] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1409), can_see=false
+[15:15:23] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1641), can_see=false
+[15:15:23] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1322), can_see=false
+[15:15:23] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1784), can_see=false
+[15:15:23] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=2008), can_see=false
+[15:15:23] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=762), can_see=true
+[15:15:23] [ENEMY] [Enemy10] Player vulnerable (reloading) - pursuing to attack (dist=762)
+[15:15:23] [ENEMY] [Enemy10] State: FLANKING -> PURSUING
+[15:15:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(362.88303, 656.2757), shooter_id=864076957767, bullet_pos=(344.0986, 62.633797)
+[15:15:23] [INFO] [Bullet] Using shooter_position, distance=593,939
+[15:15:23] [INFO] [Bullet] Distance to wall: 593,939 (40,4424% of viewport)
+[15:15:23] [INFO] [Bullet] Distance-based penetration chance: 99,483864%
+[15:15:23] [INFO] [Bullet] Starting wall penetration at (344.0986, 62.633797)
+[15:15:23] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:15:23] [INFO] [Bullet] Exiting penetration at (328.19397, 33.339535) after traveling 28,333334 pixels through wall
+[15:15:23] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[15:15:23] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
+[15:15:23] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
+[15:15:23] [ENEMY] [Enemy1] Player reloading state changed: true -> false
+[15:15:23] [ENEMY] [Enemy2] Player reloading state changed: true -> false
+[15:15:23] [ENEMY] [Enemy5] Player reloading state changed: true -> false
+[15:15:23] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[15:15:23] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[15:15:23] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[15:15:23] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[15:15:23] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[15:15:23] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
+[15:15:23] [INFO] [Player.Reload.Anim] LeftArm: pos=(22.931742, 5.9811754), target=(24, 6), base=(24, 6)
+[15:15:23] [INFO] [Player.Reload.Anim] RightArm: pos=(-1.9999895, 6.1623545), target=(-2, 6), base=(-2, 6)
+[15:15:23] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
+[15:15:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(644.0577, 338.14), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:15:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=4
+[15:15:26] [INFO] [ScoreManager] Combo ended at 4. Max combo: 4
+[15:15:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(644.0577, 299.64), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:15:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=4
+[15:15:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(644.05774, 338.14), shooter_id=864076957767, bullet_pos=(501.79733, 711.9875)
+[15:15:26] [INFO] [Bullet] Using shooter_position, distance=399,99997
+[15:15:26] [INFO] [Bullet] Distance to wall: 399,99997 (27,236732% of viewport)
+[15:15:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:26] [INFO] [Bullet] Starting wall penetration at (501.79733, 711.9875)
+[15:15:26] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:15:26] [INFO] [Bullet] Exiting penetration at (485.20026, 755.603) after traveling 41,66667 pixels through wall
+[15:15:26] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(648.6771, 263.0535), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:15:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=4
+[15:15:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.0786, 232.5898), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:15:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=4
+[15:15:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(648.6771, 263.05347), shooter_id=864076957767, bullet_pos=(498.88867, 809.56464)
+[15:15:26] [INFO] [Bullet] Using shooter_position, distance=566,6666
+[15:15:26] [INFO] [Bullet] Distance to wall: 566,6666 (38,585373% of viewport)
+[15:15:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(695.3023, 205.3662), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:15:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=4
+[15:15:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(648.6771, 263.05347), shooter_id=864076957767, bullet_pos=(455.92517, 706.9453)
+[15:15:26] [INFO] [Bullet] Using shooter_position, distance=483,9352
+[15:15:26] [INFO] [Bullet] Distance to wall: 483,9352 (32,95204% of viewport)
+[15:15:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:26] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
+[15:15:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(644.05774, 299.64), shooter_id=864076957767, bullet_pos=(300.3734, 1397.0835)
+[15:15:26] [INFO] [Bullet] Using shooter_position, distance=1150,0005
+[15:15:26] [INFO] [Bullet] Distance to wall: 1150,0005 (78,30565% of viewport)
+[15:15:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(722.526, 178.1426), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:15:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=4
+[15:15:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(668.0786, 232.58981), shooter_id=864076957767, bullet_pos=(503.9917, 818.3756)
+[15:15:26] [INFO] [Bullet] Using shooter_position, distance=608,3334
+[15:15:26] [INFO] [Bullet] Distance to wall: 608,3334 (41,42254% of viewport)
+[15:15:26] [INFO] [Bullet] Distance-based penetration chance: 98,34037%
+[15:15:26] [INFO] [Bullet] Starting wall penetration at (503.9917, 818.3756)
+[15:15:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31,867937
+[15:15:26] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:26] [INFO] [Bullet] Exiting penetration at (491.4042, 863.3126) after traveling 41,666676 pixels through wall
+[15:15:26] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:26] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
+[15:15:26] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[15:15:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(695.3023, 205.36623), shooter_id=864076957767, bullet_pos=(516.54694, 830.30334)
+[15:15:26] [INFO] [Bullet] Using shooter_position, distance=649,9999
+[15:15:26] [INFO] [Bullet] Distance to wall: 649,9999 (44,25969% of viewport)
+[15:15:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(695.3023, 205.36623), shooter_id=864076957767, bullet_pos=(575.2252, 1002.6727)
+[15:15:26] [INFO] [Bullet] Using shooter_position, distance=806,29785
+[15:15:26] [INFO] [Bullet] Distance to wall: 806,29785 (54,9023% of viewport)
+[15:15:26] [INFO] [Bullet] Distance-based penetration chance: 82,61398%
+[15:15:26] [INFO] [Bullet] Starting wall penetration at (575.2252, 1002.6727)
+[15:15:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17,887497
+[15:15:27] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:27] [INFO] [Bullet] Exiting penetration at (588.24994, 1040.9332) after traveling 35,416664 pixels through wall
+[15:15:27] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[15:15:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(722.526, 178.14264), shooter_id=864076957767, bullet_pos=(522.7213, 883.73145)
+[15:15:27] [INFO] [Bullet] Using shooter_position, distance=733,3331
+[15:15:27] [INFO] [Bullet] Distance to wall: 733,3331 (49,934002% of viewport)
+[15:15:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(722.526, 178.14264), shooter_id=864076957767, bullet_pos=(555.21075, 1026.7544)
+[15:15:27] [INFO] [Bullet] Using shooter_position, distance=864,9487
+[15:15:27] [INFO] [Bullet] Distance to wall: 864,9487 (58,89595% of viewport)
+[15:15:28] [ENEMY] [Enemy6] State: IDLE -> COMBAT
+[15:15:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1356.563, 86.07376), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:15:28] [ENEMY] [Enemy5] Heard gunshot at (1356.563, 86.07376), source_type=0, intensity=0.01, distance=433
+[15:15:28] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=4
+[15:15:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1393.15, 90.69318), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:15:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=4
+[15:15:29] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[15:15:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1423.444, 109.9394), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:15:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=4
+[15:15:29] [ENEMY] [Enemy6] Hit taken, health: 2/3
+[15:15:29] [ENEMY] [Enemy5] State: COMBAT -> RETREATING
+[15:15:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1441.264, 137.0513), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:15:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=3
+[15:15:29] [ENEMY] [Enemy5] Hit taken, health: 1/2
+[15:15:29] [ENEMY] [Enemy6] State: COMBAT -> RETREATING
+[15:15:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1447.831, 166.9539), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[15:15:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=3
+[15:15:29] [ENEMY] [Enemy5] Hit taken, health: 0/2
+[15:15:29] [ENEMY] [Enemy5] Enemy died (ricochet: false, penetration: false)
+[15:15:29] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[15:15:29] [INFO] [SoundPropagation] Unregistered listener: Enemy5 (remaining: 5)
+[15:15:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1818.734, 375.1936), source=ENEMY (Enemy6), range=1469, listeners=5
+[15:15:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=2
+[15:15:29] [ENEMY] [Enemy6] State: RETREATING -> IN_COVER
+[15:15:29] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1763.817, 334.9149), shooter_id=862114023734, bullet_pos=(1635.246, 299.5997)
+[15:15:29] [INFO] [Bullet] Using shooter_position, distance=133.333190917969
+[15:15:29] [INFO] [Bullet] Distance to wall: 133.333190917969 (9.07890214772334% of viewport)
+[15:15:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:29] [INFO] [Bullet] Starting wall penetration at (1635.246, 299.5997)
+[15:15:29] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:15:29] [INFO] [Bullet] Exiting penetration at (1598.282, 289.4466) after traveling 33.3333320617676 pixels through wall
+[15:15:29] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:15:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1393.1497, 90.69318), shooter_id=864076957767, bullet_pos=(2482.4988, 720.5518)
+[15:15:29] [INFO] [Bullet] Using shooter_position, distance=1258,3336
+[15:15:29] [INFO] [Bullet] Distance to wall: 1258,3336 (85,68226% of viewport)
+[15:15:29] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[15:15:29] [ENEMY] [Enemy10] State: SUPPRESSED -> IN_COVER
+[15:15:29] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
+[15:15:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1815.215, 380.5397), source=ENEMY (Enemy6), range=1469, listeners=5
+[15:15:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=2
+[15:15:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1447.8313, 166.95392), shooter_id=864076957767, bullet_pos=(2488.1594, 676.3181)
+[15:15:30] [INFO] [Bullet] Using shooter_position, distance=1158,3326
+[15:15:30] [INFO] [Bullet] Distance to wall: 1158,3326 (78,873% of viewport)
+[15:15:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1764.982, 341.2121), shooter_id=862114023734, bullet_pos=(1640.535, 293.35)
+[15:15:30] [INFO] [Bullet] Using shooter_position, distance=133.33332824707
+[15:15:30] [INFO] [Bullet] Distance to wall: 133.33332824707 (9.07891149871439% of viewport)
+[15:15:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1815.215, 380.5397), source=ENEMY (Enemy6), range=1469, listeners=5
+[15:15:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=2
+[15:15:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1485.774, 150.3966), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=3
+[15:15:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1766.458, 339.7647), shooter_id=862114023734, bullet_pos=(1646.97, 280.6008)
+[15:15:30] [INFO] [Bullet] Using shooter_position, distance=133.33349609375
+[15:15:30] [INFO] [Bullet] Distance to wall: 133.33349609375 (9.07892292770345% of viewport)
+[15:15:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:30] [INFO] [Bullet] Starting wall penetration at (1646.97, 280.6008)
+[15:15:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1815.215, 380.5397), source=ENEMY (Enemy6), range=1469, listeners=5
+[15:15:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=2
+[15:15:30] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.964900970459
+[15:15:30] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:30] [INFO] [Bullet] Exiting penetration at (1612.617, 263.5911) after traveling 33.3333320617676 pixels through wall
+[15:15:30] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:15:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1815.215, 380.5397), source=ENEMY (Enemy6), range=1469, listeners=5
+[15:15:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=2
+[15:15:30] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1484.773, 122.6709), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=3
+[15:15:30] [INFO] [LastChance] Threat detected: @Area2D@2295
+[15:15:30] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1767.659, 338.6514), shooter_id=862114023734, bullet_pos=(1391.243, 62.80975)
+[15:15:30] [INFO] [Bullet] Using shooter_position, distance=466.666290283203
+[15:15:30] [INFO] [Bullet] Distance to wall: 466.666290283203 (31.7761658290237% of viewport)
+[15:15:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1496.504, 95.70219), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=3
+[15:15:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1769.027, 337.4464), shooter_id=862114023734, bullet_pos=(1530.125, 59.29178)
+[15:15:30] [INFO] [Bullet] Using shooter_position, distance=366.666442871094
+[15:15:30] [INFO] [Bullet] Distance to wall: 366.666442871094 (24.9669923352282% of viewport)
+[15:15:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:30] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[15:15:30] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[15:15:30] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[15:15:30] [INFO] [PenultimateHit]   - Time scale: 0.10
+[15:15:30] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[15:15:30] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[15:15:30] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[15:15:30] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[15:15:30] [INFO] [PenultimateHit] Applying saturation to 6 enemies
+[15:15:30] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[15:15:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1516.226, 86.07462), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=3
+[15:15:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1767.659, 338.6514), shooter_id=862114023734, bullet_pos=(1125.764, 283.1438)
+[15:15:31] [INFO] [Bullet] Using shooter_position, distance=644.290649414063
+[15:15:31] [INFO] [Bullet] Distance to wall: 644.290649414063 (43.8709350646395% of viewport)
+[15:15:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1516.2262, 86.07462), shooter_id=864076957767, bullet_pos=(1642.6501, 272.1989)
+[15:15:31] [INFO] [Bullet] Using shooter_position, distance=225,0006
+[15:15:31] [INFO] [Bullet] Distance to wall: 225,0006 (15,320704% of viewport)
+[15:15:31] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1548.088, 86.07462), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:31] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=3
+[15:15:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1485.774, 150.39662), shooter_id=864076957767, bullet_pos=(2478.695, 786.4344)
+[15:15:32] [INFO] [Bullet] Using shooter_position, distance=1179,1676
+[15:15:32] [INFO] [Bullet] Distance to wall: 1179,1676 (80,291695% of viewport)
+[15:15:32] [INFO] [Bullet] Distance-based penetration chance: 52,993023%
+[15:15:32] [INFO] [Bullet] Penetration failed (distance roll)
+[15:15:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1516.2262, 86.07462), shooter_id=864076957767, bullet_pos=(1821.8262, 60.026573)
+[15:15:32] [INFO] [Bullet] Using shooter_position, distance=306,70807
+[15:15:32] [INFO] [Bullet] Distance to wall: 306,70807 (20,884317% of viewport)
+[15:15:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1588.789, 86.07462), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:32] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=3
+[15:15:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1767.659, 338.6514), shooter_id=862114023734, bullet_pos=(1370.933, 559.2701)
+[15:15:32] [INFO] [Bullet] Using shooter_position, distance=453.942596435547
+[15:15:32] [INFO] [Bullet] Distance to wall: 453.942596435547 (30.9097861181269% of viewport)
+[15:15:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1484.7726, 122.67094), shooter_id=864076957767, bullet_pos=(2477.9072, 874.85974)
+[15:15:32] [INFO] [Bullet] Using shooter_position, distance=1245,8348
+[15:15:32] [INFO] [Bullet] Distance to wall: 1245,8348 (84,83119% of viewport)
+[15:15:32] [INFO] [Bullet] Distance-based penetration chance: 47,69695%
+[15:15:32] [INFO] [Bullet] Starting wall penetration at (2477.9072, 874.85974)
+[15:15:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23,970163
+[15:15:32] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:32] [INFO] [Bullet] Exiting penetration at (2515.1082, 903.03534) after traveling 41,666668 pixels through wall
+[15:15:32] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1627.289, 86.07462), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:32] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=3
+[15:15:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1767.659, 338.6514), shooter_id=862114023734, bullet_pos=(1274.351, 684.9848)
+[15:15:32] [INFO] [Bullet] Using shooter_position, distance=602.742797851563
+[15:15:32] [INFO] [Bullet] Distance to wall: 602.742797851563 (41.0418654519867% of viewport)
+[15:15:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1496.5038, 95.70219), shooter_id=864076957767, bullet_pos=(2478.6821, 966.3262)
+[15:15:32] [INFO] [Bullet] Using shooter_position, distance=1312,5016
+[15:15:32] [INFO] [Bullet] Distance to wall: 1312,5016 (89,37065% of viewport)
+[15:15:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1665.789, 86.07462), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:32] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=2
+[15:15:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1704.289, 86.07462), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:32] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=2
+[15:15:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1742.789, 86.07462), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:32] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=2
+[15:15:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1548.0876, 86.07462), shooter_id=864076957767, bullet_pos=(2323.6646, 1370.0072)
+[15:15:32] [INFO] [Bullet] Using shooter_position, distance=1500,0009
+[15:15:32] [INFO] [Bullet] Distance to wall: 1500,0009 (102,13782% of viewport)
+[15:15:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1767.659, 338.6514), shooter_id=862114023734, bullet_pos=(1022.168, 272.4543)
+[15:15:32] [INFO] [Bullet] Using shooter_position, distance=748.42431640625
+[15:15:32] [INFO] [Bullet] Distance to wall: 748.42431640625 (50.9615879350665% of viewport)
+[15:15:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1775.789, 86.07462), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:32] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=2
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1588.7888, 86.07462), shooter_id=864076957767, bullet_pos=(2284.9502, 1395.8988)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=1483,3341
+[15:15:33] [INFO] [Bullet] Distance to wall: 1483,3341 (101,00295% of viewport)
+[15:15:33] [INFO] [Bullet] Distance-based penetration chance: 29,79941%
+[15:15:33] [INFO] [Bullet] Penetration failed (distance roll)
+[15:15:33] [ENEMY] [Enemy7] FLANKING started: target=(1940.418, 214.4535), side=left, pos=(1631.249, 824.0672)
+[15:15:33] [ENEMY] [Enemy7] State: PURSUING -> FLANKING
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1548.0876, 86.07462), shooter_id=864076957767, bullet_pos=(2461.833, 1038.4803)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=1319,8512
+[15:15:33] [INFO] [Bullet] Distance to wall: 1319,8512 (89,87109% of viewport)
+[15:15:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1808.789, 86.07462), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=2
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1627.2888, 86.07462), shooter_id=864076957767, bullet_pos=(2295.459, 1363.5544)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=1441,6678
+[15:15:33] [INFO] [Bullet] Distance to wall: 1441,6678 (98,16582% of viewport)
+[15:15:33] [INFO] [Bullet] Distance-based penetration chance: 32,139893%
+[15:15:33] [INFO] [Bullet] Penetration failed (distance roll)
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1767.659, 338.6514), shooter_id=862114023734, bullet_pos=(1116.326, 66.06543)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=706.071899414063
+[15:15:33] [INFO] [Bullet] Distance to wall: 706.071899414063 (48.0777339828408% of viewport)
+[15:15:33] [INFO] [Bullet] Distance-based penetration chance: 90.5759770200191%
+[15:15:33] [INFO] [Bullet] Starting wall penetration at (1116.326, 66.06543)
+[15:15:33] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:15:33] [INFO] [Bullet] Exiting penetration at (1126.075, 44.69648) after traveling 18.4877223968506 pixels through wall
+[15:15:33] [INFO] [Bullet] Damage multiplier after penetration: 0.028125
+[15:15:33] [ENEMY] [Enemy10] FLANKING started: target=(1846.467, 279.8155), side=left, pos=(466.4188, 966.8649)
+[15:15:33] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[15:15:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1847.289, 86.07462), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=2
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1808.7888, 86.07462), shooter_id=864076957767, bullet_pos=(1716.5621, 602.9103)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=524,9998
+[15:15:33] [INFO] [Bullet] Distance to wall: 524,9998 (35,748203% of viewport)
+[15:15:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1885.789, 86.07462), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=2
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1704.2888, 86.07462), shooter_id=864076957767, bullet_pos=(2287.6086, 1404.4603)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=1441,6667
+[15:15:33] [INFO] [Bullet] Distance to wall: 1441,6667 (98,16574% of viewport)
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1665.7888, 86.07462), shooter_id=864076957767, bullet_pos=(2464.3342, 1624.5063)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=1733,3341
+[15:15:33] [INFO] [Bullet] Distance to wall: 1733,3341 (118,02591% of viewport)
+[15:15:33] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
+[15:15:33] [INFO] [PenultimateHit] Ending penultimate hit effect
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1847.2888, 86.07462), shooter_id=864076957767, bullet_pos=(1615.008, 602.9469)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=566,6668
+[15:15:33] [INFO] [Bullet] Distance to wall: 566,6668 (38,585384% of viewport)
+[15:15:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:33] [INFO] [Bullet] Starting wall penetration at (1615.008, 602.9469)
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1775.7888, 86.07462), shooter_id=864076957767, bullet_pos=(1814.5524, 1193.7301)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=1108,3336
+[15:15:33] [INFO] [Bullet] Distance to wall: 1108,3336 (75,468475% of viewport)
+[15:15:33] [INFO] [Bullet] Distance-based penetration chance: 58,620117%
+[15:15:33] [INFO] [Bullet] Penetration failed (distance roll)
+[15:15:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1924.289, 86.07462), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=2
+[15:15:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23,585402
+[15:15:33] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:33] [INFO] [Bullet] Exiting penetration at (1595.879, 645.5129) after traveling 41,666668 pixels through wall
+[15:15:33] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:33] [ENEMY] [Enemy6] State: SEEKING_COVER -> IN_COVER
+[15:15:33] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1962.789, 86.07462), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=2
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1665.7888, 86.07462), shooter_id=864076957767, bullet_pos=(2317.4746, 2066.1443)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=2084,5552
+[15:15:33] [INFO] [Bullet] Distance to wall: 2084,5552 (141,94121% of viewport)
+[15:15:33] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1885.7888, 86.07462), shooter_id=864076957767, bullet_pos=(1384.1716, 621.0109)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=733,3325
+[15:15:33] [INFO] [Bullet] Distance to wall: 733,3325 (49,93396% of viewport)
+[15:15:33] [ENEMY] [Enemy6] State: SEEKING_COVER -> IN_COVER
+[15:15:33] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2001.289, 86.07462), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=3
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1704.2888, 86.07462), shooter_id=864076957767, bullet_pos=(2074.1497, 2085.1074)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=2032,9607
+[15:15:33] [INFO] [Bullet] Distance to wall: 2032,9607 (138,42804% of viewport)
+[15:15:33] [INFO] [Bullet] Distance-based penetration chance: 22,314394%
+[15:15:33] [INFO] [Bullet] Starting wall penetration at (2074.1497, 2085.1074)
+[15:15:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29,000994
+[15:15:33] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:33] [INFO] [Bullet] Exiting penetration at (2062.0554, 2123.672) after traveling 35,41667 pixels through wall
+[15:15:33] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1924.2888, 86.07462), shooter_id=864076957767, bullet_pos=(1383.8322, 581.7392)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=733,33264
+[15:15:33] [INFO] [Bullet] Distance to wall: 733,33264 (49,93397% of viewport)
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1742.7888, 86.07462), shooter_id=864076957767, bullet_pos=(2436.1917, 2077.12)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=2108,3335
+[15:15:33] [INFO] [Bullet] Distance to wall: 2108,3335 (143,56032% of viewport)
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1924.2888, 86.07462), shooter_id=864076957767, bullet_pos=(1410.8291, 611.817)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=734,8781
+[15:15:33] [INFO] [Bullet] Distance to wall: 734,8781 (50,039204% of viewport)
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1742.7888, 86.07462), shooter_id=864076957767, bullet_pos=(2472.5405, 2010.5659)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=2058,204
+[15:15:33] [INFO] [Bullet] Distance to wall: 2058,204 (140,14691% of viewport)
+[15:15:33] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:33] [ENEMY] [Enemy6] State: SEEKING_COVER -> IN_COVER
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1962.7888, 86.07462), shooter_id=864076957767, bullet_pos=(1379.7019, 596.5978)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=774,9995
+[15:15:33] [INFO] [Bullet] Distance to wall: 774,9995 (52,771145% of viewport)
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1962.7888, 86.07462), shooter_id=864076957767, bullet_pos=(1383.6649, 599.64655)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=774,04175
+[15:15:33] [INFO] [Bullet] Distance to wall: 774,04175 (52,705925% of viewport)
+[15:15:33] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1962.7888, 86.07462), shooter_id=864076957767, bullet_pos=(1293.4852, 686.80743)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=899,3593
+[15:15:33] [INFO] [Bullet] Distance to wall: 899,3593 (61,239033% of viewport)
+[15:15:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2001.2888, 86.07462), shooter_id=864076957767, bullet_pos=(1419.6256, 598.2194)
+[15:15:33] [INFO] [Bullet] Using shooter_position, distance=774,9996
+[15:15:33] [INFO] [Bullet] Distance to wall: 774,9996 (52,771145% of viewport)
+[15:15:33] [INFO] [Bullet] Distance-based penetration chance: 85,10033%
+[15:15:33] [INFO] [Bullet] Starting wall penetration at (1419.6256, 598.2194)
+[15:15:33] [ENEMY] [Enemy9] State: IDLE -> COMBAT
+[15:15:33] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7,6543603
+[15:15:34] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:34] [INFO] [Bullet] Exiting penetration at (1384.6007, 629.0582) after traveling 41,666668 pixels through wall
+[15:15:34] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:34] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:34] [ENEMY] [Enemy6] State: SEEKING_COVER -> IN_COVER
+[15:15:34] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:34] [ENEMY] [Enemy7] State: FLANKING -> COMBAT
+[15:15:34] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:34] [ENEMY] [Enemy6] State: SEEKING_COVER -> IN_COVER
+[15:15:34] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1742.7888, 86.07462), shooter_id=864076957767, bullet_pos=(2063.5012, 1199.7786)
+[15:15:34] [INFO] [Bullet] Using shooter_position, distance=1158,962
+[15:15:34] [INFO] [Bullet] Distance to wall: 1158,962 (78,915855% of viewport)
+[15:15:34] [INFO] [Bullet] Distance-based penetration chance: 54,598164%
+[15:15:34] [INFO] [Bullet] Starting wall penetration at (2063.5012, 1199.7786)
+[15:15:34] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21,911587
+[15:15:34] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:34] [INFO] [Bullet] Exiting penetration at (2047.6893, 1168.437) after traveling 30,10417 pixels through wall
+[15:15:34] [INFO] [Bullet] Damage multiplier after penetration: 0,225
+[15:15:34] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:34] [ENEMY] [Enemy6] State: SEEKING_COVER -> IN_COVER
+[15:15:34] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
+[15:15:34] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[15:15:34] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[15:15:34] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[15:15:34] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[15:15:34] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[15:15:34] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(2191.462, 129.8397), source=PLAYER (Player), range=900, listeners=5
+[15:15:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=0, below_threshold=2
+[15:15:34] [INFO] [ScoreManager] Combo ended at 1. Max combo: 4
+[15:15:34] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=694), can_see=false
+[15:15:34] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:34] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=573), can_see=true
+[15:15:34] [ENEMY] [Enemy7] Player vulnerable (reloading) - pursuing to attack (dist=573)
+[15:15:34] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[15:15:34] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1352), can_see=false
+[15:15:34] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1306), can_see=false
+[15:15:34] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=1656), can_see=false
+[15:15:34] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:34] [ENEMY] [Enemy6] State: SEEKING_COVER -> IN_COVER
+[15:15:34] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:34] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:34] [ENEMY] [Enemy9] State: COMBAT -> PURSUING
+[15:15:34] [ENEMY] [Enemy6] Player vulnerable (reloading) - pursuing to attack (dist=688)
+[15:15:34] [ENEMY] [Enemy6] State: SEEKING_COVER -> RETREATING
+[15:15:34] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
+[15:15:34] [ENEMY] [Enemy7] State: PURSUING -> COMBAT
+[15:15:34] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[15:15:34] [INFO] [Player.Reload.Anim] LeftArm: pos=(11.400496, 5.699933), target=(12, 6), base=(24, 6)
+[15:15:34] [INFO] [Player.Reload.Anim] RightArm: pos=(-1.9998134, 7.8498306), target=(-2, 8), base=(-2, 6)
+[15:15:34] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
+[15:15:34] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[15:15:34] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[15:15:34] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[15:15:34] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[15:15:34] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[15:15:34] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
+[15:15:34] [ENEMY] [Enemy6] State: RETREATING -> IN_COVER
+[15:15:34] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:34] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:34] [ENEMY] [Enemy7] State: PURSUING -> COMBAT
+[15:15:34] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
+[15:15:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2196.113, 369.5391), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
+[15:15:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2211.203, 401.7886), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
+[15:15:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2237.732, 429.3002), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
+[15:15:35] [ENEMY] [Enemy9] State: PURSUING -> COMBAT
+[15:15:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2196.1133, 369.5391), shooter_id=864076957767, bullet_pos=(1597.2749, 792.8244)
+[15:15:35] [INFO] [Bullet] Using shooter_position, distance=733,3334
+[15:15:35] [INFO] [Bullet] Distance to wall: 733,3334 (49,93402% of viewport)
+[15:15:35] [INFO] [Bullet] Distance-based penetration chance: 88,41031%
+[15:15:35] [INFO] [Bullet] Penetration failed (distance roll)
+[15:15:35] [ENEMY] [Enemy7] State: COMBAT -> RETREATING
+[15:15:35] [ENEMY] [Enemy7] Hit taken, health: 3/4
+[15:15:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2264.178, 455.7461), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
+[15:15:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2211.2034, 401.7886), shooter_id=864076957767, bullet_pos=(1627.2941, 787.8586)
+[15:15:35] [INFO] [Bullet] Using shooter_position, distance=700,00006
+[15:15:35] [INFO] [Bullet] Distance to wall: 700,00006 (47,664295% of viewport)
+[15:15:35] [ENEMY] [Enemy6] State: SEEKING_COVER -> IN_COVER
+[15:15:35] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2289.069, 480.6362), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
+[15:15:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2313.96, 505.5263), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
+[15:15:35] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2264.1785, 455.74606), shooter_id=864076957767, bullet_pos=(1694.1061, 785.018)
+[15:15:35] [INFO] [Bullet] Using shooter_position, distance=658,3332
+[15:15:35] [INFO] [Bullet] Distance to wall: 658,3332 (44,827118% of viewport)
+[15:15:35] [ENEMY] [Enemy6] State: SEEKING_COVER -> IN_COVER
+[15:15:35] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:35] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2352.436, 546.7892), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
+[15:15:35] [ENEMY] [Enemy6] State: SEEKING_COVER -> IN_COVER
+[15:15:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2264.1785, 455.74606), shooter_id=864076957767, bullet_pos=(1393.7017, 615.36566)
+[15:15:35] [INFO] [Bullet] Using shooter_position, distance=884,9906
+[15:15:35] [INFO] [Bullet] Distance to wall: 884,9906 (60,260643% of viewport)
+[15:15:35] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:35] [ENEMY] [Enemy9] State: COMBAT -> PURSUING
+[15:15:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2313.9597, 505.52634), shooter_id=864076957767, bullet_pos=(1766.7865, 616.60034)
+[15:15:35] [INFO] [Bullet] Using shooter_position, distance=558,3332
+[15:15:35] [INFO] [Bullet] Distance to wall: 558,3332 (38,017933% of viewport)
+[15:15:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:35] [INFO] [Bullet] Starting wall penetration at (1766.7865, 616.60034)
+[15:15:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2289.069, 480.6362), shooter_id=864076957767, bullet_pos=(1519.511, 777.9685)
+[15:15:35] [INFO] [Bullet] Using shooter_position, distance=825,00073
+[15:15:35] [INFO] [Bullet] Distance to wall: 825,00073 (56,175816% of viewport)
+[15:15:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 1,1376076
+[15:15:35] [INFO] [Bullet] Max penetration distance exceeded: 66,66667 >= 48
+[15:15:35] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:35] [INFO] [Bullet] Exiting penetration at (1696.5522, 630.8576) after traveling 66,66667 pixels through wall
+[15:15:35] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:36] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:36] [ENEMY] [Enemy6] State: SEEKING_COVER -> IN_COVER
+[15:15:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2363.923, 577.2308), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:36] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
+[15:15:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2264.1785, 455.74606), shooter_id=864076957767, bullet_pos=(1268.1384, 696.50867)
+[15:15:36] [INFO] [Bullet] Using shooter_position, distance=1024,7255
+[15:15:36] [INFO] [Bullet] Distance to wall: 1024,7255 (69,775444% of viewport)
+[15:15:36] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:36] [ENEMY] [Enemy10] State: FLANKING -> RETREATING
+[15:15:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2289.069, 480.6362), shooter_id=864076957767, bullet_pos=(1360.5717, 704.7345)
+[15:15:36] [INFO] [Bullet] Using shooter_position, distance=955,1584
+[15:15:36] [INFO] [Bullet] Distance to wall: 955,1584 (65,03849% of viewport)
+[15:15:36] [INFO] [Bullet] Distance-based penetration chance: 70,78843%
+[15:15:36] [INFO] [Bullet] Starting wall penetration at (1360.5717, 704.7345)
+[15:15:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2289.069, 480.6362), shooter_id=864076957767, bullet_pos=(1356.0305, 702.6421)
+[15:15:36] [INFO] [Bullet] Using shooter_position, distance=959,08685
+[15:15:36] [INFO] [Bullet] Distance to wall: 959,08685 (65,30599% of viewport)
+[15:15:36] [INFO] [Bullet] Distance-based penetration chance: 70,47635%
+[15:15:36] [INFO] [Bullet] Penetration failed (distance roll)
+[15:15:36] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
+[15:15:36] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:15:36] [INFO] [Bullet] Exiting penetration at (1330.2975, 690.78516) after traveling 28,333334 pixels through wall
+[15:15:36] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[15:15:36] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:36] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[15:15:36] [ENEMY] [Enemy6] State: SEEKING_COVER -> IN_COVER
+[15:15:36] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2364.979, 611.9937), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:36] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
+[15:15:36] [ENEMY] [Enemy10] Hit taken, health: 1/2
+[15:15:36] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2364.979, 647.1938), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:36] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
+[15:15:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2352.4358, 546.78925), shooter_id=864076957767, bullet_pos=(1367.1388, 434.5785)
+[15:15:36] [INFO] [Bullet] Using shooter_position, distance=991,666
+[15:15:36] [INFO] [Bullet] Distance to wall: 991,666 (67,52436% of viewport)
+[15:15:36] [INFO] [Bullet] Distance-based penetration chance: 67,888245%
+[15:15:36] [INFO] [Bullet] Penetration failed (distance roll)
+[15:15:36] [ENEMY] [Enemy6] State: SEEKING_COVER -> IN_COVER
+[15:15:36] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
+[15:15:36] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2364.979, 682.394), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:36] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
+[15:15:36] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:36] [ENEMY] [Enemy6] State: SEEKING_COVER -> IN_COVER
+[15:15:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2363.9233, 577.23083), shooter_id=864076957767, bullet_pos=(1378.1339, 296.44)
+[15:15:36] [INFO] [Bullet] Using shooter_position, distance=1024,9996
+[15:15:36] [INFO] [Bullet] Distance to wall: 1024,9996 (69,79411% of viewport)
+[15:15:36] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2362.023, 716.3695), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:36] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
+[15:15:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2364.9792, 647.19385), shooter_id=864076957767, bullet_pos=(1646.9922, 313.68155)
+[15:15:36] [INFO] [Bullet] Using shooter_position, distance=791,6665
+[15:15:36] [INFO] [Bullet] Distance to wall: 791,6665 (53,90603% of viewport)
+[15:15:36] [INFO] [Bullet] Distance-based penetration chance: 83,7763%
+[15:15:36] [INFO] [Bullet] Starting wall penetration at (1646.9922, 313.68155)
+[15:15:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2347.044, 745.3649), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:36] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
+[15:15:36] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:15:36] [INFO] [Bullet] Exiting penetration at (1612.2264, 297.53253) after traveling 33,333336 pixels through wall
+[15:15:36] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:36] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:36] [ENEMY] [Enemy6] State: SEEKING_COVER -> IN_COVER
+[15:15:36] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2322.66, 770.465), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:36] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
+[15:15:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2364.9792, 682.39404), shooter_id=864076957767, bullet_pos=(1648.6414, 273.1464)
+[15:15:36] [INFO] [Bullet] Using shooter_position, distance=824,99915
+[15:15:36] [INFO] [Bullet] Distance to wall: 824,99915 (56,17571% of viewport)
+[15:15:36] [INFO] [Bullet] Distance-based penetration chance: 81,12834%
+[15:15:36] [INFO] [Bullet] Starting wall penetration at (1648.6414, 273.1464)
+[15:15:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 44,08587
+[15:15:36] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:36] [INFO] [Bullet] Exiting penetration at (1615.3569, 254.13086) after traveling 33,333336 pixels through wall
+[15:15:36] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2362.023, 716.3695), shooter_id=864076957767, bullet_pos=(1885.0477, 312.48804)
+[15:15:36] [INFO] [Bullet] Using shooter_position, distance=625,0005
+[15:15:36] [INFO] [Bullet] Distance to wall: 625,0005 (42,557434% of viewport)
+[15:15:36] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2297.77, 795.3552), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:36] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
+[15:15:37] [ENEMY] [Enemy7] Hit taken, health: 2/4
+[15:15:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2272.879, 820.2453), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:37] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
+[15:15:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2362.023, 716.3695), shooter_id=864076957767, bullet_pos=(1604.5675, 600.0072)
+[15:15:37] [INFO] [Bullet] Using shooter_position, distance=766,34125
+[15:15:37] [INFO] [Bullet] Distance to wall: 766,34125 (52,181583% of viewport)
+[15:15:37] [INFO] [Bullet] Distance-based penetration chance: 85,788155%
+[15:15:37] [INFO] [Bullet] Starting wall penetration at (1604.5675, 600.0072)
+[15:15:37] [ENEMY] [Enemy7] Hit taken, health: 1/4
+[15:15:37] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:15:37] [INFO] [Bullet] Exiting penetration at (1581.2911, 623.86774) after traveling 28,333334 pixels through wall
+[15:15:37] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[15:15:37] [ENEMY] [Enemy6] State: SEEKING_COVER -> IN_COVER
+[15:15:37] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2247.907, 844.9384), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:37] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
+[15:15:37] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:37] [ENEMY] [Enemy10] State: SEEKING_COVER -> IN_COVER
+[15:15:37] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[15:15:37] [ENEMY] [Enemy6] State: SEEKING_COVER -> IN_COVER
+[15:15:37] [ENEMY] [Enemy6] State: IN_COVER -> SUPPRESSED
+[15:15:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2272.879, 820.2453), shooter_id=864076957767, bullet_pos=(1582.2377, 62.85565)
+[15:15:37] [INFO] [Bullet] Using shooter_position, distance=1024,9998
+[15:15:37] [INFO] [Bullet] Distance to wall: 1024,9998 (69,79412% of viewport)
+[15:15:37] [INFO] [Bullet] Distance-based penetration chance: 65,2402%
+[15:15:37] [INFO] [Bullet] Starting wall penetration at (1582.2377, 62.85565)
+[15:15:37] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:15:37] [INFO] [Bullet] Exiting penetration at (1556.4088, 34.5305) after traveling 33,333332 pixels through wall
+[15:15:37] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:37] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
+[15:15:37] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[15:15:37] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[15:15:37] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[15:15:37] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[15:15:37] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[15:15:37] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(2140.463, 841.1063), source=PLAYER (Player), range=900, listeners=5
+[15:15:37] [ENEMY] [Enemy9] Heard player RELOAD at (2140.463, 841.1063), intensity=0.02, distance=390
+[15:15:37] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=3
+[15:15:37] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=958), can_see=false
+[15:15:37] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=525), can_see=false
+[15:15:37] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=655), can_see=false
+[15:15:37] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=true (dist=390), can_see=false
+[15:15:37] [ENEMY] [Enemy9] Pursuing vulnerability sound at (2140.463, 841.1063), distance=390
+[15:15:37] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=853), can_see=false
+[15:15:37] [INFO] [Player.Reload.Anim] LeftArm: pos=(18.04575, 4.6666665), target=(4, 2), base=(24, 6)
+[15:15:37] [INFO] [Player.Reload.Anim] RightArm: pos=(-2.7124176, 6), target=(-2, 6), base=(-2, 6)
+[15:15:37] [ENEMY] [Enemy9] Player reloading - priority attack triggered
+[15:15:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(2143.988, 1227.317), source=ENEMY (Enemy9), range=1469, listeners=5
+[15:15:37] [ENEMY] [Enemy8] Heard gunshot at (2143.988, 1227.317), source_type=1, intensity=0.02, distance=330
+[15:15:37] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=3
+[15:15:37] [ENEMY] [Enemy9] State: PURSUING -> COMBAT
+[15:15:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2247.9067, 844.93835), shooter_id=864076957767, bullet_pos=(1535.9686, 61.858852)
+[15:15:37] [INFO] [Bullet] Using shooter_position, distance=1058,3334
+[15:15:37] [INFO] [Bullet] Distance to wall: 1058,3334 (72,063866% of viewport)
+[15:15:37] [ENEMY] [Enemy8] Player vulnerable (reloading) - pursuing to attack (dist=655)
+[15:15:37] [ENEMY] [Enemy8] State: COMBAT -> PURSUING
+[15:15:37] [INFO] [LastChance] Threat detected: @Area2D@2372
+[15:15:37] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:37] [ENEMY] [Enemy6] Hit taken, health: 1/3
+[15:15:37] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
+[15:15:38] [ENEMY] [Enemy7] Player vulnerable (reloading) - pursuing to attack (dist=452)
+[15:15:38] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
+[15:15:38] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[15:15:38] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[15:15:38] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[15:15:38] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[15:15:38] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[15:15:38] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
+[15:15:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(2143.081, 1167.522), shooter_id=862969661604, bullet_pos=(2123.455, 67.69783)
+[15:15:38] [INFO] [Bullet] Using shooter_position, distance=1099.99951171875
+[15:15:38] [INFO] [Bullet] Distance to wall: 1099.99951171875 (74.9009894736728% of viewport)
+[15:15:38] [INFO] [Bullet] Distance-based penetration chance: 59.2821789473818%
+[15:15:38] [INFO] [Bullet] Starting wall penetration at (2123.455, 67.69783)
+[15:15:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 2.62981629371643
+[15:15:38] [INFO] [Bullet] Max penetration distance exceeded: 66.6666641235352 >= 48
+[15:15:38] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:38] [INFO] [Bullet] Exiting penetration at (2122.177, -3.957424) after traveling 66.6666641235352 pixels through wall
+[15:15:38] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:15:38] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
+[15:15:38] [ENEMY] [Enemy9] State: COMBAT -> PURSUING
+[15:15:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1965.135, 359.3676), source=ENEMY (Enemy7), range=1469, listeners=5
+[15:15:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=4
+[15:15:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1947.922, 350.9761), source=ENEMY (Enemy7), range=1469, listeners=5
+[15:15:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=4
+[15:15:38] [INFO] [LastChance] Threat detected: @Area2D@2376
+[15:15:38] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1970.392, 418.9894), shooter_id=862399235809, bullet_pos=(2285.393, 1368.08)
+[15:15:38] [INFO] [Bullet] Using shooter_position, distance=999.999084472656
+[15:15:38] [INFO] [Bullet] Distance to wall: 999.999084472656 (68.0917764979151% of viewport)
+[15:15:38] [INFO] [Bullet] Distance-based penetration chance: 67.2262607524324%
+[15:15:38] [INFO] [Bullet] Starting wall penetration at (2285.393, 1368.08)
+[15:15:38] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:15:38] [INFO] [Bullet] Exiting penetration at (2297.468, 1404.462) after traveling 33.3333358764648 pixels through wall
+[15:15:38] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:15:39] [ENEMY] [Enemy9] State: PURSUING -> RETREATING
+[15:15:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1953.59, 410.6071), shooter_id=862399235809, bullet_pos=(2071.8, 1201.825)
+[15:15:39] [INFO] [Bullet] Using shooter_position, distance=799.99951171875
+[15:15:39] [INFO] [Bullet] Distance to wall: 799.99951171875 (54.4734378223161% of viewport)
+[15:15:39] [INFO] [Bullet] Distance-based penetration chance: 83.1143225406312%
+[15:15:39] [INFO] [Bullet] Starting wall penetration at (2071.8, 1201.825)
+[15:15:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.0451641082764
+[15:15:39] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:39] [INFO] [Bullet] Exiting penetration at (2077.465, 1239.737) after traveling 33.3333320617676 pixels through wall
+[15:15:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:15:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1950.393, 366.3491), source=ENEMY (Enemy7), range=1469, listeners=5
+[15:15:39] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=4
+[15:15:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1961.173, 300.4525), shooter_id=862399235809, bullet_pos=(1961.173, 300.4525)
+[15:15:39] [INFO] [Bullet] Using shooter_position, distance=0
+[15:15:39] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[15:15:39] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[15:15:39] [INFO] [Bullet] Starting wall penetration at (1961.173, 300.4525)
+[15:15:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13.0949382781982
+[15:15:39] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:39] [INFO] [Bullet] Exiting penetration at (1947.378, 336.2176) after traveling 33.3333320617676 pixels through wall
+[15:15:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:15:39] [ENEMY] [Enemy10] State: SUPPRESSED -> IN_COVER
+[15:15:39] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
+[15:15:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1829.121, 536.4863), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:39] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
+[15:15:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1804.23, 511.5962), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=2
+[15:15:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1779.339, 486.7061), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[15:15:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=2
+[15:15:39] [ENEMY] [Enemy7] Hit taken, health: 0/4
+[15:15:39] [ENEMY] [Enemy7] Enemy died (ricochet: false, penetration: false)
+[15:15:39] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[15:15:39] [INFO] [SoundPropagation] Unregistered listener: Enemy7 (remaining: 4)
+[15:15:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1829.1206, 536.4863), shooter_id=864076957767, bullet_pos=(2462.9314, 62.125458)
+[15:15:39] [INFO] [Bullet] Using shooter_position, distance=791,6656
+[15:15:39] [INFO] [Bullet] Distance to wall: 791,6656 (53,90597% of viewport)
+[15:15:39] [INFO] [Bullet] Distance-based penetration chance: 83,77637%
+[15:15:39] [INFO] [Bullet] Starting wall penetration at (2462.9314, 62.125458)
+[15:15:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1829.1206, 536.4863), shooter_id=864076957767, bullet_pos=(2466.9343, 59.129494)
+[15:15:39] [INFO] [Bullet] Using shooter_position, distance=796,66547
+[15:15:39] [INFO] [Bullet] Distance to wall: 796,66547 (54,246418% of viewport)
+[15:15:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1754.449, 461.8159), source=PLAYER (AssaultRifle), range=1469, listeners=4
+[15:15:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=2
+[15:15:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26,547585
+[15:15:39] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:39] [INFO] [Bullet] Exiting penetration at (2490.1445, 83.05429) after traveling 28,333332 pixels through wall
+[15:15:39] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[15:15:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1754.4487, 461.81592), shooter_id=864076957767, bullet_pos=(1920.1509, 309.606)
+[15:15:39] [INFO] [Bullet] Using shooter_position, distance=225,00014
+[15:15:39] [INFO] [Bullet] Distance to wall: 225,00014 (15,320674% of viewport)
+[15:15:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1804.23, 511.5962), shooter_id=864076957767, bullet_pos=(2405.8652, 49.962402)
+[15:15:39] [INFO] [Bullet] Using shooter_position, distance=758,33417
+[15:15:39] [INFO] [Bullet] Distance to wall: 758,33417 (51,636368% of viewport)
+[15:15:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1729.558, 436.9258), source=PLAYER (AssaultRifle), range=1469, listeners=4
+[15:15:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=2
+[15:15:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1804.23, 511.5962), shooter_id=864076957767, bullet_pos=(2484.8403, 93.12423)
+[15:15:39] [INFO] [Bullet] Using shooter_position, distance=798,9676
+[15:15:39] [INFO] [Bullet] Distance to wall: 798,9676 (54,403175% of viewport)
+[15:15:39] [INFO] [Bullet] Distance-based penetration chance: 83,1963%
+[15:15:39] [INFO] [Bullet] Penetration failed (distance roll)
+[15:15:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1704.667, 412.0356), source=PLAYER (AssaultRifle), range=1469, listeners=4
+[15:15:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=2
+[15:15:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1704.6675, 412.03564), shooter_id=864076957767, bullet_pos=(1911.813, 324.19644)
+[15:15:40] [INFO] [Bullet] Using shooter_position, distance=224,99997
+[15:15:40] [INFO] [Bullet] Distance to wall: 224,99997 (15,320662% of viewport)
+[15:15:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1754.4487, 461.81592), shooter_id=864076957767, bullet_pos=(2467.547, 672.33105)
+[15:15:40] [INFO] [Bullet] Using shooter_position, distance=743,52264
+[15:15:40] [INFO] [Bullet] Distance to wall: 743,52264 (50,627827% of viewport)
+[15:15:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1729.5581, 436.92578), shooter_id=864076957767, bullet_pos=(2478.6926, 91.34954)
+[15:15:40] [INFO] [Bullet] Using shooter_position, distance=825,0003
+[15:15:40] [INFO] [Bullet] Distance to wall: 825,0003 (56,175793% of viewport)
+[15:15:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1729.5581, 436.92578), shooter_id=864076957767, bullet_pos=(2421.9248, 67.26267)
+[15:15:40] [INFO] [Bullet] Using shooter_position, distance=784,87103
+[15:15:40] [INFO] [Bullet] Distance to wall: 784,87103 (53,443314% of viewport)
+[15:15:40] [ENEMY] [Enemy9] State: RETREATING -> IN_COVER
+[15:15:40] [ENEMY] [Enemy9] State: IN_COVER -> SUPPRESSED
+[15:15:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1704.6675, 412.03564), shooter_id=864076957767, bullet_pos=(2469.9941, 670.09546)
+[15:15:40] [INFO] [Bullet] Using shooter_position, distance=807,66315
+[15:15:40] [INFO] [Bullet] Distance to wall: 807,66315 (54,99527% of viewport)
+[15:15:40] [ENEMY] [Enemy6] State: SUPPRESSED -> SEEKING_COVER
+[15:15:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1552.459, 366.7617), source=PLAYER (AssaultRifle), range=1469, listeners=4
+[15:15:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=2
+[15:15:40] [ENEMY] [Enemy6] Hit taken, health: 0/3
+[15:15:40] [ENEMY] [Enemy6] Enemy died (ricochet: false, penetration: false)
+[15:15:40] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[15:15:40] [INFO] [SoundPropagation] Unregistered listener: Enemy6 (remaining: 3)
+[15:15:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1527.504, 391.4969), source=PLAYER (AssaultRifle), range=1469, listeners=3
+[15:15:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=2
+[15:15:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1502.613, 416.3871), source=PLAYER (AssaultRifle), range=1469, listeners=3
+[15:15:41] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=2
+[15:15:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1729.5581, 436.92578), shooter_id=864076957767, bullet_pos=(1531.2742, 605.3685)
+[15:15:41] [INFO] [Bullet] Using shooter_position, distance=260,17203
+[15:15:41] [INFO] [Bullet] Distance to wall: 260,17203 (17,715593% of viewport)
+[15:15:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1527.5039, 391.49695), shooter_id=864076957767, bullet_pos=(1378.3975, 65.659744)
+[15:15:41] [INFO] [Bullet] Using shooter_position, distance=358,33313
+[15:15:41] [INFO] [Bullet] Distance to wall: 358,33313 (24,399563% of viewport)
+[15:15:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:41] [INFO] [Bullet] Starting wall penetration at (1378.3975, 65.659744)
+[15:15:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 1,3166537
+[15:15:41] [INFO] [Bullet] Max penetration distance exceeded: 66,66667 >= 48
+[15:15:41] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:41] [INFO] [Bullet] Exiting penetration at (1348.5762, 0.49229813) after traveling 66,66667 pixels through wall
+[15:15:41] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1475.437, 435.7586), source=PLAYER (AssaultRifle), range=1469, listeners=3
+[15:15:41] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=2
+[15:15:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1729.5581, 436.92578), shooter_id=864076957767, bullet_pos=(1375.3379, 540.82294)
+[15:15:41] [INFO] [Bullet] Using shooter_position, distance=369,14304
+[15:15:41] [INFO] [Bullet] Distance to wall: 369,14304 (25,135628% of viewport)
+[15:15:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1502.6133, 416.3871), shooter_id=864076957767, bullet_pos=(1364.7358, 49.791145)
+[15:15:41] [INFO] [Bullet] Using shooter_position, distance=391,66666
+[15:15:41] [INFO] [Bullet] Distance to wall: 391,66666 (26,669302% of viewport)
+[15:15:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:41] [INFO] [Bullet] Starting wall penetration at (1364.7358, 49.791145)
+[15:15:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19,325487
+[15:15:41] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:41] [INFO] [Bullet] Exiting penetration at (1351.2415, 13.911543) after traveling 33,333336 pixels through wall
+[15:15:41] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1445.481, 442.2349), source=PLAYER (AssaultRifle), range=1469, listeners=3
+[15:15:41] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=2
+[15:15:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1475.4373, 435.7586), shooter_id=864076957767, bullet_pos=(1391.6195, 53.165607)
+[15:15:41] [INFO] [Bullet] Using shooter_position, distance=391,66672
+[15:15:41] [INFO] [Bullet] Distance to wall: 391,66672 (26,669308% of viewport)
+[15:15:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:41] [INFO] [Bullet] Starting wall penetration at (1391.6195, 53.165607)
+[15:15:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16,665764
+[15:15:41] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:41] [INFO] [Bullet] Exiting penetration at (1383.416, 15.720333) after traveling 33,333332 pixels through wall
+[15:15:41] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:41] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
+[15:15:41] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
+[15:15:41] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
+[15:15:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1445.4807, 442.23492), shooter_id=864076957767, bullet_pos=(1365.1168, 58.901577)
+[15:15:41] [INFO] [Bullet] Using shooter_position, distance=391,66672
+[15:15:41] [INFO] [Bullet] Distance to wall: 391,66672 (26,669308% of viewport)
+[15:15:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:15:41] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
+[15:15:41] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[15:15:41] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[15:15:41] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[15:15:41] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[15:15:41] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[15:15:41] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(1412.328, 424.2174), source=PLAYER (Player), range=900, listeners=3
+[15:15:41] [ENEMY] [Enemy10] Heard player RELOAD at (1412.328, 424.2174), intensity=0.11, distance=150
+[15:15:41] [ENEMY] [Enemy10] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
+[15:15:41] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=0
+[15:15:41] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=959), can_see=false
+[15:15:41] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=986), can_see=false
+[15:15:41] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[15:15:41] [ENEMY] [Enemy10] Pursuing vulnerability sound at (1412.328, 424.2174), distance=150
+[15:15:41] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[15:15:41] [INFO] [Player.Reload.Anim] LeftArm: pos=(4.08793, 2.0205529), target=(4, 2), base=(24, 6)
+[15:15:41] [INFO] [Player.Reload.Anim] RightArm: pos=(-1.985166, 6), target=(-2, 6), base=(-2, 6)
+[15:15:41] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
+[15:15:41] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[15:15:41] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
+[15:15:41] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[15:15:41] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[15:15:41] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[15:15:41] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[15:15:41] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[15:15:41] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
+[15:15:42] [ENEMY] [Enemy9] State: SUPPRESSED -> IN_COVER
+[15:15:42] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
+[15:15:42] [ENEMY] [Enemy9] State: IN_COVER -> PURSUING
+[15:15:42] [ENEMY] [Enemy8] FLANKING started: target=(1603.514, 257.1277), side=left, pos=(1891.666, 1254.929)
+[15:15:42] [ENEMY] [Enemy8] State: PURSUING -> FLANKING
+[15:15:42] [ENEMY] [Enemy10] Pursuing vulnerability sound at (1412.328, 424.2174), distance=157
+[15:15:42] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[15:15:42] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
+[15:15:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1354.292, 129.9142), source=PLAYER (AssaultRifle), range=1469, listeners=3
+[15:15:42] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=2
+[15:15:42] [ENEMY] [Enemy10] Hit taken, health: 0/2
+[15:15:42] [ENEMY] [Enemy10] Enemy died (ricochet: false, penetration: false)
+[15:15:42] [INFO] [ScoreManager] Kill registered. Combo: 3 (points: 3000)
+[15:15:42] [INFO] [SoundPropagation] Unregistered listener: Enemy10 (remaining: 2)
+[15:15:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1328.177, 107.9805), source=PLAYER (AssaultRifle), range=1469, listeners=2
+[15:15:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
+[15:15:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1297.082, 98.0695), source=PLAYER (AssaultRifle), range=1469, listeners=2
+[15:15:43] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
+[15:15:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1264.05, 100.8284), source=PLAYER (AssaultRifle), range=1469, listeners=2
+[15:15:43] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
+[15:15:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1328.1769, 107.98049), shooter_id=864076957767, bullet_pos=(1275.722, 697.3175)
+[15:15:43] [INFO] [Bullet] Using shooter_position, distance=591,6669
+[15:15:43] [INFO] [Bullet] Distance to wall: 591,6669 (40,287685% of viewport)
+[15:15:43] [INFO] [Bullet] Distance-based penetration chance: 99,66437%
+[15:15:43] [INFO] [Bullet] Starting wall penetration at (1275.722, 697.3175)
+[15:15:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23,592783
+[15:15:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:43] [INFO] [Bullet] Exiting penetration at (1272.3236, 735.4999) after traveling 33,333336 pixels through wall
+[15:15:43] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1297.0822, 98.0695), shooter_id=864076957767, bullet_pos=(1283.2345, 689.5743)
+[15:15:43] [INFO] [Bullet] Using shooter_position, distance=591,6668
+[15:15:43] [INFO] [Bullet] Distance to wall: 591,6668 (40,28768% of viewport)
+[15:15:43] [INFO] [Bullet] Distance-based penetration chance: 99,664375%
+[15:15:43] [INFO] [Bullet] Starting wall penetration at (1283.2345, 689.5743)
+[15:15:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15,901512
+[15:15:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:43] [INFO] [Bullet] Exiting penetration at (1282.3373, 727.89716) after traveling 33,333336 pixels through wall
+[15:15:43] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1264.0497, 100.82841), shooter_id=864076957767, bullet_pos=(1274.422, 692.40405)
+[15:15:43] [INFO] [Bullet] Using shooter_position, distance=591,66656
+[15:15:43] [INFO] [Bullet] Distance to wall: 591,66656 (40,287666% of viewport)
+[15:15:43] [INFO] [Bullet] Distance-based penetration chance: 99,66439%
+[15:15:43] [INFO] [Bullet] Starting wall penetration at (1274.422, 692.40405)
+[15:15:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18,734325
+[15:15:43] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:43] [INFO] [Bullet] Exiting penetration at (1275.094, 730.73145) after traveling 33,333336 pixels through wall
+[15:15:43] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:15:44] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
+[15:15:44] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[15:15:44] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[15:15:44] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[15:15:44] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(1278.884, 374.1062), source=PLAYER (Player), range=900, listeners=2
+[15:15:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=0
+[15:15:44] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=954), can_see=false
+[15:15:44] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1035), can_see=false
+[15:15:44] [INFO] [Player.Reload.Anim] LeftArm: pos=(4.1751714, 2.0308294), target=(4, 2), base=(24, 6)
+[15:15:44] [INFO] [Player.Reload.Anim] RightArm: pos=(-2.0210242, 6), target=(-2, 6), base=(-2, 6)
+[15:15:44] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
+[15:15:44] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
+[15:15:44] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[15:15:44] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[15:15:44] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[15:15:44] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
+[15:15:45] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
+[15:15:45] [ENEMY] [Enemy8] State: FLANKING -> COMBAT
+[15:15:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1717.292, 694.3591), source=ENEMY (Enemy8), range=1469, listeners=2
+[15:15:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=0
+[15:15:46] [INFO] [LastChance] Threat detected: Bullet
+[15:15:46] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1717.292, 694.3591), source=ENEMY (Enemy8), range=1469, listeners=2
+[15:15:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=0
+[15:15:46] [INFO] [LastChance] Threat detected: @Area2D@2413
+[15:15:46] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:46] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[15:15:46] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[15:15:46] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[15:15:46] [INFO] [LastChance] Player died
+[15:15:46] [INFO] [ScoreManager] Combo ended at 3. Max combo: 4
+[15:15:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1717.292, 694.3591), source=ENEMY (Enemy8), range=1469, listeners=2
+[15:15:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=0
+[15:15:46] [INFO] [LastChance] Threat detected: @Area2D@2414
+[15:15:46] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1717.292, 694.3591), source=ENEMY (Enemy8), range=1469, listeners=2
+[15:15:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=0
+[15:15:46] [INFO] [LastChance] Threat detected: @Area2D@2415
+[15:15:46] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1717.292, 694.3591), source=ENEMY (Enemy8), range=1469, listeners=2
+[15:15:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=0
+[15:15:46] [INFO] [LastChance] Threat detected: @Area2D@2416
+[15:15:46] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:46] [ENEMY] [Enemy9] FLANKING started: target=(1438.097, 843.1418), side=right, pos=(1807.733, 1163.737)
+[15:15:46] [ENEMY] [Enemy9] State: PURSUING -> FLANKING
+[15:15:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1717.292, 694.3591), source=ENEMY (Enemy8), range=1469, listeners=2
+[15:15:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=0
+[15:15:46] [INFO] [LastChance] Threat detected: @Area2D@2417
+[15:15:46] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:15:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:15:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1651.413, 680.4559), shooter_id=862684449035, bullet_pos=(28.81845, 592.0775)
+[15:15:46] [INFO] [Bullet] Using shooter_position, distance=1624.99951171875
+[15:15:46] [INFO] [Bullet] Distance to wall: 1624.99951171875 (110.649204863547% of viewport)
+[15:15:46] [INFO] [Bullet] Distance-based penetration chance: 27.8701590272906%
+[15:15:46] [INFO] [Bullet] Starting wall penetration at (28.81845, 592.0775)
+[15:15:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49.8529396057129
+[15:15:46] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:15:46] [INFO] [Bullet] Exiting penetration at (-17.77915, 589.5395) after traveling 41.6666679382324 pixels through wall
+[15:15:46] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:15:46] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[15:15:46] [INFO] [LastChance] Resetting all effects (scene change detected)
+[15:15:46] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[15:15:46] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[15:15:46] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[15:15:46] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[15:15:46] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[15:15:46] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[15:15:46] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[15:15:46] [INFO] [ScoreManager] Level started with 10 enemies
+[15:15:46] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 3)
+[15:15:46] [ENEMY] [Enemy1] Registered as sound listener
+[15:15:46] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[15:15:46] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 4)
+[15:15:46] [ENEMY] [Enemy2] Registered as sound listener
+[15:15:46] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[15:15:46] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 5)
+[15:15:46] [ENEMY] [Enemy3] Registered as sound listener
+[15:15:46] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[15:15:46] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 6)
+[15:15:46] [ENEMY] [Enemy4] Registered as sound listener
+[15:15:46] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[15:15:46] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 7)
+[15:15:46] [ENEMY] [Enemy5] Registered as sound listener
+[15:15:46] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[15:15:46] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 8)
+[15:15:46] [ENEMY] [Enemy6] Registered as sound listener
+[15:15:46] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[15:15:46] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 9)
+[15:15:46] [ENEMY] [Enemy7] Registered as sound listener
+[15:15:46] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[15:15:46] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 10)
+[15:15:46] [ENEMY] [Enemy8] Registered as sound listener
+[15:15:46] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[15:15:46] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 11)
+[15:15:46] [ENEMY] [Enemy9] Registered as sound listener
+[15:15:46] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[15:15:46] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 12)
+[15:15:46] [ENEMY] [Enemy10] Registered as sound listener
+[15:15:46] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[15:15:46] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[15:15:46] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[15:15:46] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[15:15:46] [INFO] [LastChance] Found player: Player
+[15:15:46] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[15:15:46] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[15:15:46] [INFO] [LastChance] Connected to player Died signal (C#)
+[15:15:47] [INFO] [Player] Detecting weapon pose (frame 3)...
+[15:15:47] [INFO] [Player] Detected weapon: Rifle (default pose)
+[15:15:47] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[15:15:48] [INFO] ------------------------------------------------------------
+[15:15:48] [INFO] GAME LOG ENDED: 2026-01-22T15:15:48
+[15:15:48] [INFO] ============================================================
diff --git a/docs/case-studies/issue-245/game_log_20260122_152844.txt b/docs/case-studies/issue-245/game_log_20260122_152844.txt
new file mode 100644
index 00000000..bae5444b
--- /dev/null
+++ b/docs/case-studies/issue-245/game_log_20260122_152844.txt
@@ -0,0 +1,1118 @@
+[15:28:44] [INFO] ============================================================
+[15:28:44] [INFO] GAME LOG STARTED
+[15:28:44] [INFO] ============================================================
+[15:28:44] [INFO] Timestamp: 2026-01-22T15:28:44
+[15:28:44] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_152844.txt
+[15:28:44] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[15:28:44] [INFO] OS: Windows
+[15:28:44] [INFO] Debug build: false
+[15:28:44] [INFO] Engine version: 4.3-stable (official)
+[15:28:44] [INFO] Project: Godot Top-Down Template
+[15:28:44] [INFO] ------------------------------------------------------------
+[15:28:44] [INFO] [GameManager] GameManager ready
+[15:28:44] [INFO] [ScoreManager] ScoreManager ready
+[15:28:44] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[15:28:44] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[15:28:44] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[15:28:44] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[15:28:44] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[15:28:44] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[15:28:44] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[15:28:44] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[15:28:44] [INFO] [LastChance] Resetting all effects (scene change detected)
+[15:28:44] [INFO] [LastChance] Last chance shader loaded successfully
+[15:28:44] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[15:28:44] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[15:28:44] [INFO] [LastChance]   Sepia intensity: 0.70
+[15:28:44] [INFO] [LastChance]   Brightness: 0.60
+[15:28:44] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[15:28:44] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[15:28:44] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[15:28:44] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[15:28:44] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[15:28:44] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[15:28:44] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[15:28:44] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[15:28:44] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[15:28:44] [INFO] [ScoreManager] Level started with 10 enemies
+[15:28:44] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[15:28:44] [ENEMY] [Enemy1] Registered as sound listener
+[15:28:44] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[15:28:44] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[15:28:44] [ENEMY] [Enemy2] Registered as sound listener
+[15:28:44] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[15:28:44] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[15:28:44] [ENEMY] [Enemy3] Registered as sound listener
+[15:28:44] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[15:28:44] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[15:28:44] [ENEMY] [Enemy4] Registered as sound listener
+[15:28:44] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[15:28:44] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[15:28:44] [ENEMY] [Enemy5] Registered as sound listener
+[15:28:44] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[15:28:44] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[15:28:44] [ENEMY] [Enemy6] Registered as sound listener
+[15:28:44] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[15:28:44] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[15:28:44] [ENEMY] [Enemy7] Registered as sound listener
+[15:28:44] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 3, behavior: PATROL, player_found: yes
+[15:28:44] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[15:28:44] [ENEMY] [Enemy8] Registered as sound listener
+[15:28:44] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[15:28:44] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[15:28:44] [ENEMY] [Enemy9] Registered as sound listener
+[15:28:44] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[15:28:44] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[15:28:44] [ENEMY] [Enemy10] Registered as sound listener
+[15:28:44] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[15:28:44] [INFO] [Player] Detecting weapon pose (frame 3)...
+[15:28:44] [INFO] [Player] Detected weapon: Rifle (default pose)
+[15:28:44] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[15:28:44] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[15:28:44] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[15:28:44] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[15:28:44] [INFO] [LastChance] Found player: Player
+[15:28:44] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[15:28:44] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[15:28:44] [INFO] [LastChance] Connected to player Died signal (C#)
+[15:28:48] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[15:28:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 775.1666), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:28:49] [ENEMY] [Enemy1] Heard gunshot at (450, 775.1666), source_type=0, intensity=0.01, distance=451
+[15:28:49] [ENEMY] [Enemy2] Heard gunshot at (450, 775.1666), source_type=0, intensity=0.05, distance=231
+[15:28:49] [ENEMY] [Enemy4] Heard gunshot at (450, 775.1666), source_type=0, intensity=0.02, distance=372
+[15:28:49] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:28:49] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[15:28:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 762.5), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:28:49] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:28:49] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[15:28:49] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[15:28:49] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[15:28:49] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[15:28:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 766.8733), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:28:49] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[15:28:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 786.8555), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:28:49] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[15:28:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 766.8733), shooter_id=43855644338, bullet_pos=(908.18195, 755.08875)
+[15:28:49] [INFO] [Bullet] Using shooter_position, distance=458,33347
+[15:28:49] [INFO] [Bullet] Distance to wall: 458,33347 (31,208769% of viewport)
+[15:28:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:49] [INFO] [Bullet] Starting wall penetration at (908.18195, 755.08875)
+[15:28:49] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10,506098
+[15:28:49] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:28:49] [INFO] [Bullet] Exiting penetration at (946.5026, 754.10315) after traveling 33,333332 pixels through wall
+[15:28:49] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:28:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 819.4777), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:28:49] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[15:28:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 819.4777), shooter_id=43855644338, bullet_pos=(507.34048, 808.7611)
+[15:28:49] [INFO] [Bullet] Using shooter_position, distance=58,333324
+[15:28:49] [INFO] [Bullet] Distance to wall: 58,333324 (3,9720232% of viewport)
+[15:28:49] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[15:28:49] [INFO] [Bullet] Starting wall penetration at (507.34048, 808.7611)
+[15:28:49] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21,385344
+[15:28:49] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:28:49] [INFO] [Bullet] Exiting penetration at (545.02136, 801.71875) after traveling 33,333332 pixels through wall
+[15:28:49] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:28:49] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[15:28:49] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[15:28:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 786.85547), shooter_id=43855644338, bullet_pos=(939.02673, 735.97406)
+[15:28:49] [INFO] [Bullet] Using shooter_position, distance=491,66663
+[15:28:49] [INFO] [Bullet] Distance to wall: 491,66663 (33,478485% of viewport)
+[15:28:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:49] [INFO] [Bullet] Starting wall penetration at (939.02673, 735.97406)
+[15:28:49] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41,376392
+[15:28:49] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:28:49] [INFO] [Bullet] Exiting penetration at (977.15424, 732.007) after traveling 33,333332 pixels through wall
+[15:28:49] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:28:50] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:28:50] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[15:28:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(543.6703, 723.1625), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:28:51] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[15:28:51] [ENEMY] [Enemy2] Hit taken, health: 1/2
+[15:28:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(570.8464, 703.791), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:28:51] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[15:28:51] [ENEMY] [Enemy2] Hit taken, health: 0/2
+[15:28:51] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[15:28:51] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[15:28:51] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 8)
+[15:28:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(600.892, 696.9861), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:28:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
+[15:28:51] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[15:28:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(623.9816, 701.4496), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:28:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
+[15:28:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(600.89197, 696.9861), shooter_id=43855644338, bullet_pos=(324.78052, 468.58914)
+[15:28:51] [INFO] [Bullet] Using shooter_position, distance=358,33322
+[15:28:51] [INFO] [Bullet] Distance to wall: 358,33322 (24,399569% of viewport)
+[15:28:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:51] [ENEMY] [Enemy4] FLANKING started: target=(826.5465, 670.5807), side=left, pos=(783.1835, 896.5894)
+[15:28:51] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
+[15:28:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(638.8708, 716.8294), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:28:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
+[15:28:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(623.9816, 701.4496), shooter_id=43855644338, bullet_pos=(303.95306, 475.65222)
+[15:28:51] [INFO] [Bullet] Using shooter_position, distance=391,66663
+[15:28:51] [INFO] [Bullet] Distance to wall: 391,66663 (26,669302% of viewport)
+[15:28:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(600.89197, 696.9861), shooter_id=43855644338, bullet_pos=(49.56732, 676.6341)
+[15:28:51] [INFO] [Bullet] Using shooter_position, distance=551,7002
+[15:28:51] [INFO] [Bullet] Distance to wall: 551,7002 (37,566284% of viewport)
+[15:28:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(638.8708, 716.8294), shooter_id=43855644338, bullet_pos=(288.852, 475.76538)
+[15:28:51] [INFO] [Bullet] Using shooter_position, distance=425,00003
+[15:28:51] [INFO] [Bullet] Distance to wall: 425,00003 (28,939035% of viewport)
+[15:28:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(623.9816, 701.4496), shooter_id=43855644338, bullet_pos=(58.163254, 675.31494)
+[15:28:51] [INFO] [Bullet] Using shooter_position, distance=566,42163
+[15:28:51] [INFO] [Bullet] Distance to wall: 566,42163 (38,56869% of viewport)
+[15:28:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:51] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[15:28:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(623.9816, 701.4496), shooter_id=43855644338, bullet_pos=(102.60483, 704.49774)
+[15:28:51] [INFO] [Bullet] Using shooter_position, distance=521,38574
+[15:28:51] [INFO] [Bullet] Distance to wall: 521,38574 (35,502113% of viewport)
+[15:28:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:51] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
+[15:28:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(623.9816, 701.4496), shooter_id=43855644338, bullet_pos=(63.248734, 728.19867)
+[15:28:52] [INFO] [Bullet] Using shooter_position, distance=561,37054
+[15:28:52] [INFO] [Bullet] Distance to wall: 561,37054 (38,224754% of viewport)
+[15:28:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:52] [INFO] [Bullet] Starting wall penetration at (63.248734, 728.19867)
+[15:28:52] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:28:52] [INFO] [Bullet] Exiting penetration at (41.429054, 741.33887) after traveling 20,470835 pixels through wall
+[15:28:52] [INFO] [Bullet] Damage multiplier after penetration: 0,1125
+[15:28:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(638.8708, 716.8294), shooter_id=43855644338, bullet_pos=(54.549377, 643.80817)
+[15:28:52] [INFO] [Bullet] Using shooter_position, distance=588,86633
+[15:28:52] [INFO] [Bullet] Distance to wall: 588,86633 (40,096992% of viewport)
+[15:28:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(638.8708, 716.8294), shooter_id=43855644338, bullet_pos=(144.71332, 690.05646)
+[15:28:52] [INFO] [Bullet] Using shooter_position, distance=494,8822
+[15:28:52] [INFO] [Bullet] Distance to wall: 494,8822 (33,69744% of viewport)
+[15:28:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:52] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[15:28:52] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[15:28:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(638.8708, 716.8294), shooter_id=43855644338, bullet_pos=(497.58044, 514.9049)
+[15:28:52] [INFO] [Bullet] Using shooter_position, distance=246,4477
+[15:28:52] [INFO] [Bullet] Distance to wall: 246,4477 (16,781076% of viewport)
+[15:28:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:52] [ENEMY] [Enemy4] State: FLANKING -> COMBAT
+[15:28:52] [ENEMY] [Enemy1] Hit taken, health: 3/4
+[15:28:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(593.497, 896.0716), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:28:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[15:28:53] [ENEMY] [Enemy4] Hit taken, health: 2/3
+[15:28:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(699.6826, 767.5026), source=ENEMY (Enemy4), range=1469, listeners=8
+[15:28:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=6
+[15:28:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.1381, 886.5569), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:28:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
+[15:28:53] [INFO] [LastChance] Threat detected: Bullet
+[15:28:53] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:28:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:28:53] [ENEMY] [Enemy4] Hit taken, health: 1/3
+[15:28:53] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[15:28:53] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[15:28:53] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[15:28:53] [INFO] [PenultimateHit]   - Time scale: 0.10
+[15:28:53] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[15:28:53] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[15:28:53] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[15:28:53] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[15:28:53] [INFO] [PenultimateHit] Applying saturation to 9 enemies
+[15:28:53] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[15:28:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(699.6826, 767.5026), source=ENEMY (Enemy4), range=1469, listeners=8
+[15:28:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=6
+[15:28:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.0688, 868.6328), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[15:28:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=4
+[15:28:53] [INFO] [LastChance] Threat detected: @Area2D@308
+[15:28:53] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:28:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:28:53] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[15:28:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(541.06885, 868.6328), shooter_id=43855644338, bullet_pos=(678.1744, 818.94)
+[15:28:53] [INFO] [Bullet] Using shooter_position, distance=145,83313
+[15:28:53] [INFO] [Bullet] Distance to wall: 145,83313 (9,930046% of viewport)
+[15:28:53] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:53] [INFO] [Bullet] Starting wall penetration at (678.1744, 818.94)
+[15:28:53] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:28:53] [INFO] [Bullet] Exiting penetration at (686.7925, 815.81647) after traveling 4,166667 pixels through wall
+[15:28:53] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:28:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[15:28:54] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[15:28:54] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[15:28:54] [INFO] [PenultimateHit] Ending penultimate hit effect
+[15:28:54] [INFO] [LastChance] Player died
+[15:28:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(705.056, 772.2949), source=ENEMY (Enemy4), range=1469, listeners=8
+[15:28:54] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=6
+[15:28:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(713.1355, 779.2587), source=ENEMY (Enemy4), range=1469, listeners=8
+[15:28:54] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=6
+[15:28:54] [INFO] [LastChance] Threat detected: @Area2D@310
+[15:28:54] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:28:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:28:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(719.1868, 785.9333), source=ENEMY (Enemy4), range=1469, listeners=8
+[15:28:54] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=6
+[15:28:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(746.5181, 718.3367), shooter_id=41322284571, bullet_pos=(511.9702, 955.1877)
+[15:28:54] [INFO] [Bullet] Using shooter_position, distance=333.333374023438
+[15:28:54] [INFO] [Bullet] Distance to wall: 333.333374023438 (22.6972823832825% of viewport)
+[15:28:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(746.0093, 719.6774), shooter_id=41322284571, bullet_pos=(522.9941, 832.6564)
+[15:28:54] [INFO] [Bullet] Using shooter_position, distance=250.000015258789
+[15:28:54] [INFO] [Bullet] Distance to wall: 250.000015258789 (17.0229607484629% of viewport)
+[15:28:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(746.5181, 718.3367), shooter_id=41322284571, bullet_pos=(558.7149, 1014.901)
+[15:28:54] [INFO] [Bullet] Using shooter_position, distance=351.027404785156
+[15:28:54] [INFO] [Bullet] Distance to wall: 351.027404785156 (23.9021014743015% of viewport)
+[15:28:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:54] [INFO] [LastChance] Threat detected: @Area2D@311
+[15:28:54] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:28:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:28:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(723.8992, 785.9335), source=ENEMY (Enemy4), range=1469, listeners=8
+[15:28:54] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=6
+[15:28:54] [INFO] [LastChance] Threat detected: @Area2D@315
+[15:28:54] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:28:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:28:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(746.0093, 719.6774), shooter_id=41322284571, bullet_pos=(694.7161, 893.2033)
+[15:28:54] [INFO] [Bullet] Using shooter_position, distance=180.948104858398
+[15:28:54] [INFO] [Bullet] Distance to wall: 180.948104858398 (12.3210891940334% of viewport)
+[15:28:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(746.5181, 718.3367), shooter_id=41322284571, bullet_pos=(687.0101, 880.7479)
+[15:28:54] [INFO] [Bullet] Using shooter_position, distance=172.969985961914
+[15:28:54] [INFO] [Bullet] Distance to wall: 172.969985961914 (11.7778444079048% of viewport)
+[15:28:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:54] [INFO] [LastChance] Threat detected: Bullet
+[15:28:54] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:28:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:28:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(746.0093, 719.6774), shooter_id=41322284571, bullet_pos=(515.7015, 942.2991)
+[15:28:54] [INFO] [Bullet] Using shooter_position, distance=320.315551757813
+[15:28:54] [INFO] [Bullet] Distance to wall: 320.315551757813 (21.8108749275517% of viewport)
+[15:28:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:28:54] [INFO] [Bullet] Starting wall penetration at (515.7015, 942.2991)
+[15:28:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18.8228092193604
+[15:28:54] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:28:54] [INFO] [Bullet] Exiting penetration at (481.8475, 951.5837) after traveling 30.1041698455811 pixels through wall
+[15:28:54] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[15:28:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(724.9413, 717.893), shooter_id=41322284571, bullet_pos=(62.02592, 788.5161)
+[15:28:54] [INFO] [Bullet] Using shooter_position, distance=666.666625976563
+[15:28:54] [INFO] [Bullet] Distance to wall: 666.666625976563 (45.3945564545729% of viewport)
+[15:28:54] [INFO] [Bullet] Distance-based penetration chance: 93.7063508029982%
+[15:28:54] [INFO] [Bullet] Starting wall penetration at (62.02592, 788.5161)
+[15:28:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.470832824707
+[15:28:54] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:28:54] [INFO] [Bullet] Exiting penetration at (15.62185, 793.4597) after traveling 41.6666679382324 pixels through wall
+[15:28:54] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:28:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[15:28:54] [INFO] [LastChance] Resetting all effects (scene change detected)
+[15:28:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[15:28:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[15:28:54] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[15:28:54] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[15:28:54] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[15:28:54] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[15:28:54] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[15:28:54] [INFO] [ScoreManager] Level started with 10 enemies
+[15:28:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
+[15:28:54] [ENEMY] [Enemy1] Registered as sound listener
+[15:28:54] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[15:28:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
+[15:28:54] [ENEMY] [Enemy2] Registered as sound listener
+[15:28:54] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[15:28:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
+[15:28:54] [ENEMY] [Enemy3] Registered as sound listener
+[15:28:54] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[15:28:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
+[15:28:54] [ENEMY] [Enemy4] Registered as sound listener
+[15:28:54] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[15:28:54] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
+[15:28:54] [ENEMY] [Enemy5] Registered as sound listener
+[15:28:54] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[15:28:54] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
+[15:28:54] [ENEMY] [Enemy6] Registered as sound listener
+[15:28:54] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[15:28:54] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
+[15:28:54] [ENEMY] [Enemy7] Registered as sound listener
+[15:28:54] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[15:28:54] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
+[15:28:54] [ENEMY] [Enemy8] Registered as sound listener
+[15:28:54] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[15:28:54] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
+[15:28:54] [ENEMY] [Enemy9] Registered as sound listener
+[15:28:54] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[15:28:54] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
+[15:28:54] [ENEMY] [Enemy10] Registered as sound listener
+[15:28:54] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[15:28:54] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[15:28:54] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[15:28:54] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[15:28:54] [INFO] [LastChance] Found player: Player
+[15:28:54] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[15:28:54] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[15:28:54] [INFO] [LastChance] Connected to player Died signal (C#)
+[15:28:54] [INFO] [Player] Detecting weapon pose (frame 3)...
+[15:28:54] [INFO] [Player] Detected weapon: Rifle (default pose)
+[15:28:54] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[15:28:55] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[15:28:55] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[15:28:56] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[15:28:56] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[15:28:56] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[15:28:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=18
+[15:28:56] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
+[15:28:56] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
+[15:28:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[15:28:56] [INFO] [LastChance] Threat detected: Bullet
+[15:28:56] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:28:56] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:28:56] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[15:28:56] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[15:28:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[15:28:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[15:28:56] [INFO] [LastChance] Threat detected: Bullet
+[15:28:56] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:28:56] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:28:56] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[15:28:56] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[15:28:56] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[15:28:56] [INFO] [PenultimateHit]   - Time scale: 0.10
+[15:28:56] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[15:28:56] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[15:28:56] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[15:28:56] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[15:28:56] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[15:28:56] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[15:28:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[15:28:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[15:28:57] [INFO] [LastChance] Threat detected: Bullet
+[15:28:57] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:28:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:28:57] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[15:28:57] [INFO] [PenultimateHit] Ending penultimate hit effect
+[15:28:57] [INFO] [LastChance] Resetting all effects (scene change detected)
+[15:28:57] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[15:28:57] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[15:28:57] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[15:28:57] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[15:28:57] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[15:28:57] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[15:28:57] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[15:28:57] [INFO] [ScoreManager] Level started with 10 enemies
+[15:28:57] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[15:28:57] [ENEMY] [Enemy1] Registered as sound listener
+[15:28:57] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[15:28:57] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[15:28:57] [ENEMY] [Enemy2] Registered as sound listener
+[15:28:57] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[15:28:57] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[15:28:57] [ENEMY] [Enemy3] Registered as sound listener
+[15:28:57] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[15:28:57] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[15:28:57] [ENEMY] [Enemy4] Registered as sound listener
+[15:28:57] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[15:28:57] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[15:28:57] [ENEMY] [Enemy5] Registered as sound listener
+[15:28:57] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[15:28:57] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[15:28:57] [ENEMY] [Enemy6] Registered as sound listener
+[15:28:57] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[15:28:57] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[15:28:57] [ENEMY] [Enemy7] Registered as sound listener
+[15:28:57] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[15:28:57] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[15:28:57] [ENEMY] [Enemy8] Registered as sound listener
+[15:28:57] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[15:28:57] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[15:28:57] [ENEMY] [Enemy9] Registered as sound listener
+[15:28:57] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[15:28:57] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[15:28:57] [ENEMY] [Enemy10] Registered as sound listener
+[15:28:57] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[15:28:57] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[15:28:57] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[15:28:57] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[15:28:57] [INFO] [LastChance] Found player: Player
+[15:28:57] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[15:28:57] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[15:28:57] [INFO] [LastChance] Connected to player Died signal (C#)
+[15:28:57] [INFO] [Player] Detecting weapon pose (frame 3)...
+[15:28:57] [INFO] [Player] Detected weapon: Rifle (default pose)
+[15:28:57] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[15:28:58] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[15:28:58] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[15:28:59] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[15:28:59] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[15:28:59] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[15:28:59] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[15:29:00] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[15:29:00] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:29:00] [ENEMY] [Enemy10] FLANKING started: target=(791.6444, 649.3685), side=left, pos=(1061.496, 1460.101)
+[15:29:00] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[15:29:01] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[15:29:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=20
+[15:29:01] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[15:29:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[15:29:01] [INFO] [LastChance] Threat detected: Bullet
+[15:29:01] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[15:29:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[15:29:02] [INFO] [LastChance] Threat detected: @Area2D@824
+[15:29:02] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:02] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
+[15:29:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[15:29:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[15:29:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(406.4388, 482.2568), shooter_id=196645751068, bullet_pos=(227.9174, 712.9073)
+[15:29:02] [INFO] [Bullet] Using shooter_position, distance=291.666839599609
+[15:29:02] [INFO] [Bullet] Distance to wall: 291.666839599609 (19.8601314363632% of viewport)
+[15:29:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:29:02] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:29:02] [INFO] [LastChance] Threat detected: @Area2D@825
+[15:29:02] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(381.3451, 484.5585), shooter_id=196645751068, bullet_pos=(56.53656, 1297.04)
+[15:29:02] [INFO] [Bullet] Using shooter_position, distance=875.000610351563
+[15:29:02] [INFO] [Bullet] Distance to wall: 875.000610351563 (59.5804005430837% of viewport)
+[15:29:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(406.4388, 482.2568), shooter_id=196645751068, bullet_pos=(50.28012, 442.2433)
+[15:29:02] [INFO] [Bullet] Using shooter_position, distance=358.399291992188
+[15:29:02] [INFO] [Bullet] Distance to wall: 358.399291992188 (24.4040668299335% of viewport)
+[15:29:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:29:02] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[15:29:02] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[15:29:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(381.3451, 484.5585), shooter_id=196645751068, bullet_pos=(191.7981, 1591.18)
+[15:29:02] [INFO] [Bullet] Using shooter_position, distance=1122.73706054688
+[15:29:02] [INFO] [Bullet] Distance to wall: 1122.73706054688 (76.4492309840453% of viewport)
+[15:29:02] [INFO] [Bullet] Distance-based penetration chance: 57.4758971852805%
+[15:29:02] [INFO] [Bullet] Penetration failed (distance roll)
+[15:29:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(406.4388, 482.2568), shooter_id=196645751068, bullet_pos=(338.5933, 50.1718)
+[15:29:02] [INFO] [Bullet] Using shooter_position, distance=437.379028320313
+[15:29:02] [INFO] [Bullet] Distance to wall: 437.379028320313 (29.7819423074445% of viewport)
+[15:29:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:29:02] [INFO] [Bullet] Starting wall penetration at (338.5933, 50.1718)
+[15:29:02] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.5480518341064
+[15:29:02] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:29:02] [INFO] [Bullet] Exiting penetration at (359.3899, 21.89097) after traveling 30.1041717529297 pixels through wall
+[15:29:02] [INFO] [Bullet] Damage multiplier after penetration: 0.225
+[15:29:03] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[15:29:03] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[15:29:03] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[15:29:03] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[15:29:03] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[15:29:03] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[15:29:03] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[15:29:03] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[15:29:03] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[15:29:03] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[15:29:03] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[15:29:03] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[15:29:03] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[15:29:03] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[15:29:03] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[15:29:03] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[15:29:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[15:29:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[15:29:03] [INFO] [LastChance] Threat detected: Bullet
+[15:29:03] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:03] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[15:29:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[15:29:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[15:29:04] [INFO] [LastChance] Threat detected: Bullet
+[15:29:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:04] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[15:29:04] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[15:29:04] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
+[15:29:04] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[15:29:04] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[15:29:04] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[15:29:04] [INFO] [PenultimateHit]   - Time scale: 0.10
+[15:29:04] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[15:29:04] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[15:29:04] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[15:29:04] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[15:29:04] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[15:29:04] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[15:29:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[15:29:04] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
+[15:29:04] [INFO] [LastChance] Threat detected: Bullet
+[15:29:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:04] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:29:04] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[15:29:04] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[15:29:04] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[15:29:04] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[15:29:04] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[15:29:04] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[15:29:04] [INFO] [PenultimateHit] Ending penultimate hit effect
+[15:29:04] [INFO] [LastChance] Player died
+[15:29:04] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
+[15:29:04] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
+[15:29:04] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[15:29:05] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
+[15:29:05] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[15:29:05] [INFO] [LastChance] Resetting all effects (scene change detected)
+[15:29:05] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[15:29:05] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[15:29:05] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[15:29:05] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[15:29:05] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[15:29:05] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[15:29:05] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[15:29:05] [INFO] [ScoreManager] Level started with 10 enemies
+[15:29:05] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[15:29:05] [ENEMY] [Enemy1] Registered as sound listener
+[15:29:05] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[15:29:05] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[15:29:05] [ENEMY] [Enemy2] Registered as sound listener
+[15:29:05] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[15:29:05] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[15:29:05] [ENEMY] [Enemy3] Registered as sound listener
+[15:29:05] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[15:29:05] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[15:29:05] [ENEMY] [Enemy4] Registered as sound listener
+[15:29:05] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[15:29:05] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[15:29:05] [ENEMY] [Enemy5] Registered as sound listener
+[15:29:05] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[15:29:05] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[15:29:05] [ENEMY] [Enemy6] Registered as sound listener
+[15:29:05] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[15:29:05] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[15:29:05] [ENEMY] [Enemy7] Registered as sound listener
+[15:29:05] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[15:29:05] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[15:29:05] [ENEMY] [Enemy8] Registered as sound listener
+[15:29:05] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[15:29:05] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[15:29:05] [ENEMY] [Enemy9] Registered as sound listener
+[15:29:05] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[15:29:05] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[15:29:05] [ENEMY] [Enemy10] Registered as sound listener
+[15:29:05] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[15:29:05] [INFO] [Player] Detecting weapon pose (frame 3)...
+[15:29:05] [INFO] [Player] Detected weapon: Rifle (default pose)
+[15:29:05] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[15:29:05] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[15:29:05] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[15:29:05] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[15:29:05] [INFO] [LastChance] Found player: Player
+[15:29:05] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[15:29:05] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[15:29:05] [INFO] [LastChance] Connected to player Died signal (C#)
+[15:29:05] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[15:29:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1068.613, 1459.284), source=ENEMY (Enemy10), range=1469, listeners=20
+[15:29:06] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[15:29:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[15:29:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.279, 1434.974), source=ENEMY (Enemy10), range=1469, listeners=10
+[15:29:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[15:29:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1006.687, 1424.074), source=ENEMY (Enemy10), range=1469, listeners=10
+[15:29:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[15:29:06] [INFO] [LastChance] Threat detected: Bullet
+[15:29:06] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:06] [INFO] [LastChance] Threat detected: @Area2D@1082
+[15:29:06] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1057.739, 1500.745), shooter_id=306922391513, bullet_pos=(550.4454, 1006.388)
+[15:29:06] [INFO] [Bullet] Using shooter_position, distance=708.333374023438
+[15:29:06] [INFO] [Bullet] Distance to wall: 708.333374023438 (48.2317219474783% of viewport)
+[15:29:06] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[15:29:06] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[15:29:06] [INFO] [LastChance] Threat detected: @Area2D@1083
+[15:29:06] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:07] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[15:29:07] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[15:29:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.6848, 757.897), source=ENEMY (Enemy3), range=1469, listeners=10
+[15:29:08] [ENEMY] [Enemy2] Heard gunshot at (652.6848, 757.897), source_type=1, intensity=0.02, distance=327
+[15:29:08] [ENEMY] [Enemy4] Heard gunshot at (652.6848, 757.897), source_type=1, intensity=0.06, distance=205
+[15:29:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[15:29:08] [INFO] [LastChance] Threat detected: Bullet
+[15:29:08] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:08] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[15:29:08] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[15:29:08] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[15:29:08] [ENEMY] [Enemy10] FLANKING started: target=(838.767, 720.6638), side=left, pos=(900.0226, 1371.45)
+[15:29:08] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[15:29:08] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[15:29:08] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:29:08] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[15:29:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.6848, 757.897), source=ENEMY (Enemy3), range=1469, listeners=10
+[15:29:09] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[15:29:09] [INFO] [LastChance] Threat detected: Bullet
+[15:29:09] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:09] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[15:29:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.6848, 757.897), source=ENEMY (Enemy3), range=1469, listeners=10
+[15:29:09] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[15:29:09] [INFO] [LastChance] Threat detected: Bullet
+[15:29:09] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:09] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[15:29:09] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[15:29:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.6848, 757.897), source=ENEMY (Enemy3), range=1469, listeners=10
+[15:29:09] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[15:29:09] [INFO] [LastChance] Threat detected: Bullet
+[15:29:09] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:09] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[15:29:09] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[15:29:09] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[15:29:09] [INFO] [PenultimateHit]   - Time scale: 0.10
+[15:29:09] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[15:29:09] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[15:29:09] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[15:29:09] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[15:29:09] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[15:29:09] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[15:29:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.6848, 757.897), source=ENEMY (Enemy3), range=1469, listeners=10
+[15:29:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=1, below_threshold=4
+[15:29:09] [INFO] [LastChance] Threat detected: Bullet
+[15:29:09] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:09] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[15:29:09] [INFO] [PenultimateHit] Ending penultimate hit effect
+[15:29:09] [INFO] [LastChance] Resetting all effects (scene change detected)
+[15:29:09] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[15:29:09] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[15:29:09] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[15:29:09] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[15:29:09] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[15:29:09] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[15:29:09] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[15:29:09] [INFO] [ScoreManager] Level started with 10 enemies
+[15:29:09] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[15:29:09] [ENEMY] [Enemy1] Registered as sound listener
+[15:29:09] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[15:29:09] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[15:29:09] [ENEMY] [Enemy2] Registered as sound listener
+[15:29:09] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[15:29:09] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[15:29:09] [ENEMY] [Enemy3] Registered as sound listener
+[15:29:09] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[15:29:09] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[15:29:09] [ENEMY] [Enemy4] Registered as sound listener
+[15:29:09] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[15:29:09] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[15:29:09] [ENEMY] [Enemy5] Registered as sound listener
+[15:29:09] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[15:29:09] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[15:29:09] [ENEMY] [Enemy6] Registered as sound listener
+[15:29:09] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[15:29:09] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[15:29:09] [ENEMY] [Enemy7] Registered as sound listener
+[15:29:09] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[15:29:09] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[15:29:09] [ENEMY] [Enemy8] Registered as sound listener
+[15:29:09] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[15:29:09] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[15:29:09] [ENEMY] [Enemy9] Registered as sound listener
+[15:29:09] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[15:29:09] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[15:29:09] [ENEMY] [Enemy10] Registered as sound listener
+[15:29:09] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[15:29:09] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[15:29:09] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[15:29:09] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[15:29:09] [INFO] [LastChance] Found player: Player
+[15:29:09] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[15:29:09] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[15:29:09] [INFO] [LastChance] Connected to player Died signal (C#)
+[15:29:09] [INFO] [Player] Detecting weapon pose (frame 3)...
+[15:29:09] [INFO] [Player] Detected weapon: Rifle (default pose)
+[15:29:09] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[15:29:12] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[15:29:13] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[15:29:13] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[15:29:13] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[15:29:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1131.25, 1540.796), source=ENEMY (Enemy10), range=1469, listeners=20
+[15:29:13] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[15:29:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[15:29:13] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[15:29:13] [INFO] [LastChance] Threat detected: Bullet
+[15:29:13] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:13] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[15:29:13] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[15:29:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1131.25, 1540.796), source=ENEMY (Enemy10), range=1469, listeners=10
+[15:29:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[15:29:14] [INFO] [LastChance] Threat detected: @Area2D@1336
+[15:29:14] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:14] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[15:29:14] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[15:29:14] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[15:29:14] [INFO] [PenultimateHit]   - Time scale: 0.10
+[15:29:14] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[15:29:14] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[15:29:14] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[15:29:14] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[15:29:14] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[15:29:14] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[15:29:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1131.25, 1540.796), source=ENEMY (Enemy10), range=1469, listeners=10
+[15:29:14] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
+[15:29:14] [INFO] [LastChance] Threat detected: Bullet
+[15:29:14] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:14] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[15:29:14] [INFO] [PenultimateHit] Ending penultimate hit effect
+[15:29:14] [INFO] [LastChance] Resetting all effects (scene change detected)
+[15:29:14] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[15:29:14] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[15:29:14] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[15:29:14] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[15:29:14] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[15:29:14] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[15:29:14] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[15:29:14] [INFO] [ScoreManager] Level started with 10 enemies
+[15:29:14] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[15:29:14] [ENEMY] [Enemy1] Registered as sound listener
+[15:29:14] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[15:29:14] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[15:29:14] [ENEMY] [Enemy2] Registered as sound listener
+[15:29:14] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[15:29:14] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[15:29:14] [ENEMY] [Enemy3] Registered as sound listener
+[15:29:14] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[15:29:14] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[15:29:14] [ENEMY] [Enemy4] Registered as sound listener
+[15:29:14] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[15:29:14] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[15:29:14] [ENEMY] [Enemy5] Registered as sound listener
+[15:29:14] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[15:29:14] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[15:29:14] [ENEMY] [Enemy6] Registered as sound listener
+[15:29:14] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[15:29:14] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[15:29:14] [ENEMY] [Enemy7] Registered as sound listener
+[15:29:14] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[15:29:14] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[15:29:14] [ENEMY] [Enemy8] Registered as sound listener
+[15:29:14] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[15:29:14] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[15:29:14] [ENEMY] [Enemy9] Registered as sound listener
+[15:29:14] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[15:29:14] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[15:29:14] [ENEMY] [Enemy10] Registered as sound listener
+[15:29:14] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[15:29:14] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[15:29:14] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[15:29:14] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[15:29:14] [INFO] [LastChance] Found player: Player
+[15:29:14] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[15:29:14] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[15:29:14] [INFO] [LastChance] Connected to player Died signal (C#)
+[15:29:14] [INFO] [Player] Detecting weapon pose (frame 3)...
+[15:29:14] [INFO] [Player] Detected weapon: Rifle (default pose)
+[15:29:14] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[15:29:15] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[15:29:15] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[15:29:16] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[15:29:16] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[15:29:16] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[15:29:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5684, 752.2266), source=ENEMY (Enemy3), range=1469, listeners=20
+[15:29:16] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[15:29:16] [ENEMY] [Enemy4] Heard gunshot at (689.5684, 752.2266), source_type=1, intensity=0.07, distance=184
+[15:29:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[15:29:16] [INFO] [LastChance] Threat detected: Bullet
+[15:29:16] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:16] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[15:29:16] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[15:29:16] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[15:29:16] [INFO] [PenultimateHit]   - Time scale: 0.10
+[15:29:16] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[15:29:16] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[15:29:16] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[15:29:16] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[15:29:16] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[15:29:16] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[15:29:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5684, 752.2266), source=ENEMY (Enemy3), range=1469, listeners=10
+[15:29:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[15:29:16] [INFO] [LastChance] Threat detected: Bullet
+[15:29:16] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:17] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[15:29:17] [INFO] [PenultimateHit] Ending penultimate hit effect
+[15:29:17] [INFO] [LastChance] Resetting all effects (scene change detected)
+[15:29:17] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[15:29:17] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[15:29:17] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[15:29:17] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[15:29:17] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[15:29:17] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[15:29:17] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[15:29:17] [INFO] [ScoreManager] Level started with 10 enemies
+[15:29:17] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[15:29:17] [ENEMY] [Enemy1] Registered as sound listener
+[15:29:17] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[15:29:17] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[15:29:17] [ENEMY] [Enemy2] Registered as sound listener
+[15:29:17] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[15:29:17] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[15:29:17] [ENEMY] [Enemy3] Registered as sound listener
+[15:29:17] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
+[15:29:17] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[15:29:17] [ENEMY] [Enemy4] Registered as sound listener
+[15:29:17] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[15:29:17] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[15:29:17] [ENEMY] [Enemy5] Registered as sound listener
+[15:29:17] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[15:29:17] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[15:29:17] [ENEMY] [Enemy6] Registered as sound listener
+[15:29:17] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[15:29:17] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[15:29:17] [ENEMY] [Enemy7] Registered as sound listener
+[15:29:17] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[15:29:17] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[15:29:17] [ENEMY] [Enemy8] Registered as sound listener
+[15:29:17] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[15:29:17] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[15:29:17] [ENEMY] [Enemy9] Registered as sound listener
+[15:29:17] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[15:29:17] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[15:29:17] [ENEMY] [Enemy10] Registered as sound listener
+[15:29:17] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[15:29:17] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[15:29:17] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[15:29:17] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[15:29:17] [INFO] [LastChance] Found player: Player
+[15:29:17] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[15:29:17] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[15:29:17] [INFO] [LastChance] Connected to player Died signal (C#)
+[15:29:17] [INFO] [Player] Detecting weapon pose (frame 3)...
+[15:29:17] [INFO] [Player] Detected weapon: Rifle (default pose)
+[15:29:17] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[15:29:17] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[15:29:18] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[15:29:18] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[15:29:19] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[15:29:19] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[15:29:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=20
+[15:29:19] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[15:29:19] [ENEMY] [Enemy4] Heard gunshot at (689.5667, 752.2189), source_type=1, intensity=0.07, distance=184
+[15:29:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[15:29:19] [INFO] [LastChance] Threat detected: Bullet
+[15:29:19] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5667, 752.2189), source=ENEMY (Enemy3), range=1469, listeners=10
+[15:29:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[15:29:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(753.9475, 774.2576), shooter_id=448874416019, bullet_pos=(471.6288, 701.0071)
+[15:29:19] [INFO] [Bullet] Using shooter_position, distance=291.666687011719
+[15:29:19] [INFO] [Bullet] Distance to wall: 291.666687011719 (19.8601210463732% of viewport)
+[15:29:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:29:19] [INFO] [Bullet] Starting wall penetration at (471.6288, 701.0071)
+[15:29:19] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:29:19] [INFO] [Bullet] Exiting penetration at (426.4579, 689.287) after traveling 41.6666679382324 pixels through wall
+[15:29:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[15:29:19] [INFO] [LastChance] Threat detected: @Area2D@1841
+[15:29:19] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:19] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[15:29:19] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[15:29:19] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[15:29:19] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[15:29:19] [INFO] [PenultimateHit]   - Time scale: 0.10
+[15:29:19] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[15:29:19] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[15:29:19] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[15:29:19] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[15:29:19] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[15:29:19] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[15:29:20] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[15:29:20] [INFO] [PenultimateHit] Ending penultimate hit effect
+[15:29:20] [INFO] [LastChance] Resetting all effects (scene change detected)
+[15:29:20] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[15:29:20] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[15:29:20] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[15:29:20] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[15:29:20] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[15:29:20] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[15:29:20] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[15:29:20] [INFO] [ScoreManager] Level started with 10 enemies
+[15:29:20] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[15:29:20] [ENEMY] [Enemy1] Registered as sound listener
+[15:29:20] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[15:29:20] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[15:29:20] [ENEMY] [Enemy2] Registered as sound listener
+[15:29:20] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[15:29:20] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[15:29:20] [ENEMY] [Enemy3] Registered as sound listener
+[15:29:20] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[15:29:20] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[15:29:20] [ENEMY] [Enemy4] Registered as sound listener
+[15:29:20] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[15:29:20] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[15:29:20] [ENEMY] [Enemy5] Registered as sound listener
+[15:29:20] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[15:29:20] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[15:29:20] [ENEMY] [Enemy6] Registered as sound listener
+[15:29:20] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[15:29:20] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[15:29:20] [ENEMY] [Enemy7] Registered as sound listener
+[15:29:20] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[15:29:20] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[15:29:20] [ENEMY] [Enemy8] Registered as sound listener
+[15:29:20] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[15:29:20] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[15:29:20] [ENEMY] [Enemy9] Registered as sound listener
+[15:29:20] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[15:29:20] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[15:29:20] [ENEMY] [Enemy10] Registered as sound listener
+[15:29:20] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[15:29:20] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[15:29:20] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[15:29:20] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[15:29:20] [INFO] [LastChance] Found player: Player
+[15:29:20] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[15:29:20] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[15:29:20] [INFO] [LastChance] Connected to player Died signal (C#)
+[15:29:20] [INFO] [Player] Detecting weapon pose (frame 3)...
+[15:29:20] [INFO] [Player] Detected weapon: Rifle (default pose)
+[15:29:20] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[15:29:20] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[15:29:21] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[15:29:21] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[15:29:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 792.6666), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[15:29:21] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[15:29:21] [ENEMY] [Enemy1] Heard gunshot at (450, 792.6666), source_type=0, intensity=0.01, distance=467
+[15:29:21] [ENEMY] [Enemy2] Heard gunshot at (450, 792.6666), source_type=0, intensity=0.04, distance=248
+[15:29:21] [ENEMY] [Enemy4] Heard gunshot at (450, 792.6666), source_type=0, intensity=0.02, distance=366
+[15:29:21] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:29:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(454.6194, 756.0801), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:29:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:29:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 792.6666), shooter_id=485046094275, bullet_pos=(933.27484, 800.1701)
+[15:29:22] [INFO] [Bullet] Using shooter_position, distance=483,3331
+[15:29:22] [INFO] [Bullet] Distance to wall: 483,3331 (32,91104% of viewport)
+[15:29:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:29:22] [INFO] [Bullet] Starting wall penetration at (933.27484, 800.1701)
+[15:29:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 43,941147
+[15:29:22] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[15:29:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:29:22] [INFO] [Bullet] Exiting penetration at (979.93585, 800.8946) after traveling 41,666668 pixels through wall
+[15:29:22] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:29:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(472.8167, 734.0656), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[15:29:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[15:29:22] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[15:29:22] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[15:29:22] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[15:29:22] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[15:29:22] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[15:29:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(502.0623, 734.065), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:29:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[15:29:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(531.9578, 727.3566), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[15:29:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[15:29:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(502.06226, 734.065), shooter_id=485046094275, bullet_pos=(926.1056, 762.5595)
+[15:29:22] [INFO] [Bullet] Using shooter_position, distance=424,99963
+[15:29:22] [INFO] [Bullet] Distance to wall: 424,99963 (28,939009% of viewport)
+[15:29:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:29:22] [INFO] [Bullet] Starting wall penetration at (926.1056, 762.5595)
+[15:29:22] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[15:29:22] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:29:22] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[15:29:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28,416601
+[15:29:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:29:22] [INFO] [Bullet] Exiting penetration at (964.35266, 765.1296) after traveling 33,333336 pixels through wall
+[15:29:22] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:29:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(531.9578, 727.3566), shooter_id=485046094275, bullet_pos=(922.9508, 750.3188)
+[15:29:22] [INFO] [Bullet] Using shooter_position, distance=391,66666
+[15:29:22] [INFO] [Bullet] Distance to wall: 391,66666 (26,669302% of viewport)
+[15:29:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:29:22] [INFO] [Bullet] Starting wall penetration at (922.9508, 750.3188)
+[15:29:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25,261652
+[15:29:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[15:29:22] [INFO] [Bullet] Exiting penetration at (961.2182, 752.56616) after traveling 33,333336 pixels through wall
+[15:29:22] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[15:29:23] [ENEMY] [Enemy10] FLANKING started: target=(728.0076, 643.8514), side=left, pos=(1061.496, 1460.101)
+[15:29:23] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[15:29:23] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[15:29:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
+[15:29:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
+[15:29:23] [INFO] [LastChance] Threat detected: Bullet
+[15:29:23] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:23] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(381.3778, 484.5492), shooter_id=481942309900, bullet_pos=(292.2075, 700.1718)
+[15:29:24] [INFO] [Bullet] Using shooter_position, distance=233.33332824707
+[15:29:24] [INFO] [Bullet] Distance to wall: 233.33332824707 (15.8880953824999% of viewport)
+[15:29:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:29:24] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[15:29:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
+[15:29:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
+[15:29:24] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[15:29:24] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[15:29:24] [INFO] [LastChance] Threat detected: @Area2D@2100
+[15:29:24] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
+[15:29:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
+[15:29:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(403.7033, 482.0523), shooter_id=481942309900, bullet_pos=(244.9963, 696.3492)
+[15:29:24] [INFO] [Bullet] Using shooter_position, distance=266.666595458984
+[15:29:24] [INFO] [Bullet] Distance to wall: 266.666595458984 (18.1578188414328% of viewport)
+[15:29:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:29:24] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:29:24] [INFO] [LastChance] Threat detected: Bullet
+[15:29:24] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(419.6505, 484.8505), shooter_id=481942309900, bullet_pos=(202.0399, 691.3588)
+[15:29:24] [INFO] [Bullet] Using shooter_position, distance=300.000091552734
+[15:29:24] [INFO] [Bullet] Distance to wall: 300.000091552734 (20.4275578853507% of viewport)
+[15:29:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:29:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(403.7033, 482.0523), shooter_id=481942309900, bullet_pos=(58.09262, 515.609)
+[15:29:24] [INFO] [Bullet] Using shooter_position, distance=347.235961914063
+[15:29:24] [INFO] [Bullet] Distance to wall: 347.235961914063 (23.64393515736% of viewport)
+[15:29:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:29:24] [INFO] [Bullet] Starting wall penetration at (58.09262, 515.609)
+[15:29:24] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:29:24] [INFO] [Bullet] Exiting penetration at (34.13062, 492.4372) after traveling 28.3333358764648 pixels through wall
+[15:29:24] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[15:29:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(419.6505, 484.8505), shooter_id=481942309900, bullet_pos=(64.20654, 583.5303)
+[15:29:24] [INFO] [Bullet] Using shooter_position, distance=368.8876953125
+[15:29:24] [INFO] [Bullet] Distance to wall: 368.8876953125 (25.1182414984867% of viewport)
+[15:29:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[15:29:24] [INFO] [Bullet] Starting wall penetration at (64.20654, 583.5303)
+[15:29:24] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[15:29:24] [INFO] [Bullet] Exiting penetration at (37.95256, 562.9916) after traveling 28.3333358764648 pixels through wall
+[15:29:24] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[15:29:24] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[15:29:25] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[15:29:25] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[15:29:25] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
+[15:29:26] [ENEMY] [Enemy4] FLANKING started: target=(50.56506, 246.2586), side=right, pos=(569.433, 908.5724)
+[15:29:26] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
+[15:29:27] [ENEMY] [Enemy2] FLANKING started: target=(386.0957, 135.4046), side=left, pos=(300.8068, 510.7766)
+[15:29:27] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
+[15:29:28] [ENEMY] [Enemy10] FLANKING timeout (5.0s), target=(382.4599, 13.39944), pos=(418.0693, 267.3653)
+[15:29:28] [ENEMY] [Enemy10] State: FLANKING -> PURSUING
+[15:29:28] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[15:29:29] [ENEMY] [Enemy2] State: FLANKING -> COMBAT
+[15:29:29] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[15:29:29] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:29:31] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[15:29:31] [ENEMY] [Enemy10] State: COMBAT -> SEEKING_COVER
+[15:29:31] [ENEMY] [Enemy4] FLANKING timeout (5.0s), target=(79.46769, -83.952), pos=(88.06756, 89.15133)
+[15:29:31] [ENEMY] [Enemy4] State: FLANKING -> PURSUING
+[15:29:31] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[15:29:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(362.9747, 199.5845), source=ENEMY (Enemy10), range=1469, listeners=9
+[15:29:31] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
+[15:29:31] [INFO] [LastChance] Threat detected: Bullet
+[15:29:31] [INFO] [LastChance] Not in hard mode - effect disabled
+[15:29:31] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[15:29:31] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[15:29:31] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[15:29:31] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[15:29:31] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[15:29:32] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
+[15:29:32] [ENEMY] [Enemy10] State: SEEKING_COVER -> IN_COVER
+[15:29:32] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
+[15:29:32] [ENEMY] [Enemy1] FLANKING started: target=(391.0157, 113.9272), side=left, pos=(274.3453, 298.067)
+[15:29:32] [ENEMY] [Enemy1] State: COMBAT -> FLANKING
+[15:29:32] [ENEMY] [Enemy1] State: FLANKING -> COMBAT
+[15:29:32] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[15:29:32] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[15:29:34] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[15:29:34] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
+[15:29:34] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
+[15:29:34] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[15:29:35] [ENEMY] [Enemy1] FLANKING started: target=(393.4138, 94.03214), side=left, pos=(300.2155, 298.067)
+[15:29:35] [ENEMY] [Enemy1] State: COMBAT -> FLANKING
+[15:29:35] [ENEMY] [Enemy1] State: FLANKING -> COMBAT
+[15:29:36] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
+[15:29:36] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[15:29:36] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[15:29:37] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
+[15:29:37] [INFO] ------------------------------------------------------------
+[15:29:37] [INFO] GAME LOG ENDED: 2026-01-22T15:29:37
+[15:29:37] [INFO] ============================================================
diff --git a/docs/case-studies/issue-245/game_log_20260122_163542.txt b/docs/case-studies/issue-245/game_log_20260122_163542.txt
new file mode 100644
index 00000000..0fc29dd1
--- /dev/null
+++ b/docs/case-studies/issue-245/game_log_20260122_163542.txt
@@ -0,0 +1,2019 @@
+[16:35:42] [INFO] ============================================================
+[16:35:42] [INFO] GAME LOG STARTED
+[16:35:42] [INFO] ============================================================
+[16:35:42] [INFO] Timestamp: 2026-01-22T16:35:42
+[16:35:42] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_163542.txt
+[16:35:42] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
+[16:35:42] [INFO] OS: Windows
+[16:35:42] [INFO] Debug build: false
+[16:35:42] [INFO] Engine version: 4.3-stable (official)
+[16:35:42] [INFO] Project: Godot Top-Down Template
+[16:35:42] [INFO] ------------------------------------------------------------
+[16:35:42] [INFO] [GameManager] GameManager ready
+[16:35:42] [INFO] [ScoreManager] ScoreManager ready
+[16:35:42] [INFO] [SoundPropagation] SoundPropagation autoload initialized
+[16:35:42] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[16:35:42] [INFO] [PenultimateHit] Saturation shader loaded successfully
+[16:35:42] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
+[16:35:42] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
+[16:35:42] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
+[16:35:42] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
+[16:35:42] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
+[16:35:42] [INFO] [LastChance] Resetting all effects (scene change detected)
+[16:35:42] [INFO] [LastChance] Last chance shader loaded successfully
+[16:35:42] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
+[16:35:42] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
+[16:35:42] [INFO] [LastChance]   Sepia intensity: 0.70
+[16:35:42] [INFO] [LastChance]   Brightness: 0.60
+[16:35:42] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
+[16:35:42] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
+[16:35:42] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[16:35:42] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[16:35:42] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[16:35:42] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[16:35:42] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[16:35:42] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[16:35:42] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[16:35:42] [INFO] [ScoreManager] Level started with 10 enemies
+[16:35:42] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
+[16:35:42] [ENEMY] [Enemy1] Registered as sound listener
+[16:35:42] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[16:35:42] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
+[16:35:42] [ENEMY] [Enemy2] Registered as sound listener
+[16:35:42] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[16:35:42] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
+[16:35:42] [ENEMY] [Enemy3] Registered as sound listener
+[16:35:42] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[16:35:42] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
+[16:35:42] [ENEMY] [Enemy4] Registered as sound listener
+[16:35:42] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[16:35:42] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
+[16:35:42] [ENEMY] [Enemy5] Registered as sound listener
+[16:35:42] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[16:35:42] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
+[16:35:42] [ENEMY] [Enemy6] Registered as sound listener
+[16:35:42] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[16:35:42] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
+[16:35:42] [ENEMY] [Enemy7] Registered as sound listener
+[16:35:42] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 4, behavior: PATROL, player_found: yes
+[16:35:42] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
+[16:35:42] [ENEMY] [Enemy8] Registered as sound listener
+[16:35:42] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[16:35:42] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
+[16:35:42] [ENEMY] [Enemy9] Registered as sound listener
+[16:35:42] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[16:35:42] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
+[16:35:42] [ENEMY] [Enemy10] Registered as sound listener
+[16:35:42] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[16:35:42] [INFO] [Player] Detecting weapon pose (frame 3)...
+[16:35:42] [INFO] [Player] Detected weapon: Rifle (default pose)
+[16:35:42] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[16:35:42] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[16:35:42] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[16:35:42] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[16:35:42] [INFO] [LastChance] Found player: Player
+[16:35:42] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[16:35:42] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[16:35:42] [INFO] [LastChance] Connected to player Died signal (C#)
+[16:35:44] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[16:35:44] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[16:35:45] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[16:35:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(443.4004, 782.7662), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[16:35:45] [ENEMY] [Enemy1] Heard gunshot at (443.4004, 782.7662), source_type=0, intensity=0.01, distance=456
+[16:35:45] [ENEMY] [Enemy2] Heard gunshot at (443.4004, 782.7662), source_type=0, intensity=0.04, distance=237
+[16:35:45] [ENEMY] [Enemy4] Heard gunshot at (443.4004, 782.7662), source_type=0, intensity=0.02, distance=375
+[16:35:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[16:35:45] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[16:35:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(428.2365, 764.034), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[16:35:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[16:35:45] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[16:35:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(411.9168, 761.0643), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[16:35:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[16:35:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(428.23648, 764.034), shooter_id=43855644338, bullet_pos=(908.9944, 661.0406)
+[16:35:45] [INFO] [Bullet] Using shooter_position, distance=491,66635
+[16:35:45] [INFO] [Bullet] Distance to wall: 491,66635 (33,478466% of viewport)
+[16:35:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:35:45] [INFO] [Bullet] Starting wall penetration at (908.9944, 661.0406)
+[16:35:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10,714894
+[16:35:45] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:45] [INFO] [Bullet] Exiting penetration at (946.4772, 653.0106) after traveling 33,333332 pixels through wall
+[16:35:45] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:35:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.1757, 746.8484), source=ENEMY (Enemy3), range=1469, listeners=10
+[16:35:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[16:35:45] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[16:35:45] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[16:35:45] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[16:35:45] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[16:35:45] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[16:35:45] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[16:35:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(726.3151, 694.2216), shooter_id=41037071882, bullet_pos=(52.86952, 984.4781)
+[16:35:45] [INFO] [Bullet] Using shooter_position, distance=733.333374023438
+[16:35:45] [INFO] [Bullet] Distance to wall: 733.333374023438 (49.9340179184247% of viewport)
+[16:35:45] [INFO] [Bullet] Distance-based penetration chance: 88.4103124285046%
+[16:35:45] [INFO] [Bullet] Starting wall penetration at (52.86952, 984.4781)
+[16:35:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15.6079330444336
+[16:35:45] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:45] [INFO] [Bullet] Exiting penetration at (17.66669, 999.6506) after traveling 33.3333396911621 pixels through wall
+[16:35:45] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:35:46] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[16:35:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(558.942, 710.9568), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:35:46] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[16:35:47] [ENEMY] [Enemy2] Hit taken, health: 3/4
+[16:35:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(576.1997, 692.4609), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:35:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[16:35:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(588.6663, 685.9501), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:35:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[16:35:47] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[16:35:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(407.536, 545.9968), source=ENEMY (Enemy2), range=1469, listeners=9
+[16:35:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[16:35:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(597.223, 692.5209), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:35:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[16:35:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(473.4839, 562.7739), shooter_id=40751859193, bullet_pos=(500.5169, 582.276)
+[16:35:47] [INFO] [Bullet] Using shooter_position, distance=33.3333435058594
+[16:35:47] [INFO] [Bullet] Distance to wall: 33.3333435058594 (2.26972865392785% of viewport)
+[16:35:47] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[16:35:47] [INFO] [Bullet] Starting wall penetration at (500.5169, 582.276)
+[16:35:47] [INFO] [LastChance] Threat detected: @Area2D@291
+[16:35:47] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:35:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:35:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.37717437744141
+[16:35:47] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:47] [INFO] [Bullet] Exiting penetration at (531.6048, 604.7034) after traveling 33.3333358764648 pixels through wall
+[16:35:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:35:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(576.1997, 692.4609), shooter_id=43855644338, bullet_pos=(39.862732, 371.5751)
+[16:35:47] [INFO] [Bullet] Using shooter_position, distance=625
+[16:35:47] [INFO] [Bullet] Distance to wall: 625 (42,5574% of viewport)
+[16:35:47] [INFO] [Bullet] Distance-based penetration chance: 97,016365%
+[16:35:47] [INFO] [Bullet] Starting wall penetration at (39.862732, 371.5751)
+[16:35:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29,170803
+[16:35:47] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:47] [INFO] [Bullet] Exiting penetration at (6.9674015, 351.8941) after traveling 33,333332 pixels through wall
+[16:35:47] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:35:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(416.956, 540.9929), source=ENEMY (Enemy2), range=1469, listeners=9
+[16:35:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[16:35:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(484.656, 547.871), shooter_id=40751859193, bullet_pos=(506.0317, 573.4481)
+[16:35:47] [INFO] [Bullet] Using shooter_position, distance=33.3333358764648
+[16:35:47] [INFO] [Bullet] Distance to wall: 33.3333358764648 (2.26972813442835% of viewport)
+[16:35:47] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[16:35:47] [INFO] [Bullet] Starting wall penetration at (506.0317, 573.4481)
+[16:35:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10.313512802124
+[16:35:47] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:47] [INFO] [Bullet] Exiting penetration at (530.6138, 602.8618) after traveling 33.3333320617676 pixels through wall
+[16:35:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:35:47] [INFO] [LastChance] Threat detected: @Area2D@295
+[16:35:47] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:35:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:35:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(601.8699, 712.1733), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:35:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[16:35:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(426.376, 535.9889), source=ENEMY (Enemy2), range=1469, listeners=9
+[16:35:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[16:35:47] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
+[16:35:47] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
+[16:35:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(597.223, 692.52094), shooter_id=43855644338, bullet_pos=(270.25256, 476.89868)
+[16:35:47] [INFO] [Bullet] Using shooter_position, distance=391,6665
+[16:35:47] [INFO] [Bullet] Distance to wall: 391,6665 (26,669294% of viewport)
+[16:35:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:35:47] [INFO] [LastChance] Threat detected: @Area2D@297
+[16:35:47] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:35:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:35:47] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
+[16:35:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(435.7961, 530.9849), source=ENEMY (Enemy2), range=1469, listeners=9
+[16:35:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[16:35:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(602.7892, 744.2974), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:35:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
+[16:35:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(601.8699, 712.1733), shooter_id=43855644338, bullet_pos=(303.59387, 458.33475)
+[16:35:47] [INFO] [Bullet] Using shooter_position, distance=391,66638
+[16:35:47] [INFO] [Bullet] Distance to wall: 391,66638 (26,669285% of viewport)
+[16:35:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:35:47] [INFO] [Bullet] Starting wall penetration at (303.59387, 458.33475)
+[16:35:47] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[16:35:47] [INFO] [Bullet] Exiting penetration at (274.40088, 433.49094) after traveling 33,333336 pixels through wall
+[16:35:47] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:35:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(597.223, 692.52094), shooter_id=43855644338, bullet_pos=(51.924957, 618.08325)
+[16:35:47] [INFO] [Bullet] Using shooter_position, distance=550,3553
+[16:35:47] [INFO] [Bullet] Distance to wall: 550,3553 (37,474705% of viewport)
+[16:35:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:35:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(597.223, 692.52094), shooter_id=43855644338, bullet_pos=(152.54774, 692.94586)
+[16:35:47] [INFO] [Bullet] Using shooter_position, distance=444,6755
+[16:35:47] [INFO] [Bullet] Distance to wall: 444,6755 (30,278774% of viewport)
+[16:35:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:35:47] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[16:35:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(602.78925, 744.29736), shooter_id=43855644338, bullet_pos=(339.82178, 454.0372)
+[16:35:47] [INFO] [Bullet] Using shooter_position, distance=391,66675
+[16:35:47] [INFO] [Bullet] Distance to wall: 391,66675 (26,669308% of viewport)
+[16:35:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:35:47] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[16:35:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(465.5287, 592.1942), shooter_id=40751859193, bullet_pos=(725.2144, 1019.468)
+[16:35:47] [INFO] [Bullet] Using shooter_position, distance=499.999603271484
+[16:35:47] [INFO] [Bullet] Distance to wall: 499.999603271484 (34.0458924049536% of viewport)
+[16:35:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:35:47] [INFO] [Bullet] Starting wall penetration at (725.2144, 1019.468)
+[16:35:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33.0299758911133
+[16:35:47] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:47] [INFO] [Bullet] Exiting penetration at (745.1236, 1052.226) after traveling 33.3333358764648 pixels through wall
+[16:35:47] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:35:47] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[16:35:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(602.78925, 744.29736), shooter_id=43855644338, bullet_pos=(504.53543, 291.1296)
+[16:35:47] [INFO] [Bullet] Using shooter_position, distance=463,6969
+[16:35:47] [INFO] [Bullet] Distance to wall: 463,6969 (31,573975% of viewport)
+[16:35:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:35:47] [INFO] [Bullet] Starting wall penetration at (504.53543, 291.1296)
+[16:35:47] [INFO] [Bullet] Raycast backward hit penetrating body at distance 5,956766
+[16:35:47] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:47] [INFO] [Bullet] Exiting penetration at (528.2352, 267.68967) after traveling 28,333334 pixels through wall
+[16:35:47] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[16:35:47] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[16:35:48] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[16:35:48] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[16:35:48] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[16:35:48] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[16:35:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(597.223, 692.52094), shooter_id=43855644338, bullet_pos=(499.36652, 506.10376)
+[16:35:48] [INFO] [Bullet] Using shooter_position, distance=210,54039
+[16:35:48] [INFO] [Bullet] Distance to wall: 210,54039 (14,336082% of viewport)
+[16:35:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:35:48] [INFO] [Bullet] Starting wall penetration at (499.36652, 506.10376)
+[16:35:48] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[16:35:48] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[16:35:48] [INFO] [Bullet] Exiting penetration at (521.79034, 494.02335) after traveling 20,47083 pixels through wall
+[16:35:48] [INFO] [Bullet] Damage multiplier after penetration: 0,1125
+[16:35:48] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[16:35:48] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[16:35:48] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[16:35:48] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[16:35:48] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[16:35:48] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[16:35:48] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[16:35:48] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[16:35:48] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[16:35:48] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[16:35:48] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[16:35:48] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[16:35:49] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
+[16:35:49] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[16:35:49] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[16:35:49] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[16:35:49] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
+[16:35:49] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[16:35:50] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
+[16:35:50] [ENEMY] [Enemy7] State: IDLE -> COMBAT
+[16:35:50] [ENEMY] [Enemy1] State: SUPPRESSED -> IN_COVER
+[16:35:50] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
+[16:35:51] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
+[16:35:51] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
+[16:35:51] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
+[16:35:51] [ENEMY] [Enemy1] Player reloading state changed: false -> true
+[16:35:51] [ENEMY] [Enemy2] Player reloading state changed: false -> true
+[16:35:51] [ENEMY] [Enemy4] Player reloading state changed: false -> true
+[16:35:51] [ENEMY] [Enemy5] Player reloading state changed: false -> true
+[16:35:51] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[16:35:51] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[16:35:51] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[16:35:51] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[16:35:51] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[16:35:51] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(865.9251, 946.336), source=PLAYER (Player), range=900, listeners=9
+[16:35:51] [ENEMY] [Enemy4] Heard player RELOAD at (865.9251, 946.336), intensity=0.05, distance=234
+[16:35:51] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from SEEKING_COVER to PURSUING
+[16:35:51] [ENEMY] [Enemy10] Heard player RELOAD at (865.9251, 946.336), intensity=0.01, distance=440
+[16:35:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=3
+[16:35:51] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=829), can_see=false
+[16:35:51] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=679), can_see=false
+[16:35:51] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=true (dist=234), can_see=false
+[16:35:51] [ENEMY] [Enemy4] Pursuing vulnerability sound at (865.9251, 946.336), distance=234
+[16:35:51] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1025), can_see=false
+[16:35:51] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1192), can_see=false
+[16:35:51] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=749), can_see=true
+[16:35:51] [ENEMY] [Enemy7] Player vulnerable (reloading) - pursuing to attack (dist=749)
+[16:35:51] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
+[16:35:51] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1150), can_see=false
+[16:35:51] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1374), can_see=false
+[16:35:51] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=440), can_see=false
+[16:35:51] [ENEMY] [Enemy10] Pursuing vulnerability sound at (865.9251, 946.336), distance=440
+[16:35:51] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[16:35:51] [ENEMY] [Enemy10] Player vulnerable (reloading) - pursuing to attack (dist=430)
+[16:35:51] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[16:35:51] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[16:35:51] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
+[16:35:51] [ENEMY] [Enemy4] Player reloading - priority attack triggered
+[16:35:51] [ENEMY] [Enemy10] Player reloading - priority attack triggered
+[16:35:51] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
+[16:35:51] [ENEMY] [Enemy1] Player reloading state changed: true -> false
+[16:35:51] [ENEMY] [Enemy2] Player reloading state changed: true -> false
+[16:35:51] [ENEMY] [Enemy4] Player reloading state changed: true -> false
+[16:35:51] [ENEMY] [Enemy5] Player reloading state changed: true -> false
+[16:35:51] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[16:35:51] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[16:35:51] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[16:35:51] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[16:35:51] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[16:35:51] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
+[16:35:51] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[16:35:51] [INFO] [Player.Reload.Anim] LeftArm: pos=(23.60571, 5.9928837), target=(24, 6), base=(24, 6)
+[16:35:51] [INFO] [Player.Reload.Anim] RightArm: pos=(-1.9999998, 6.0597854), target=(-2, 6), base=(-2, 6)
+[16:35:51] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
+[16:35:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(867.2857, 864.5422), source=ENEMY (Enemy4), range=1469, listeners=9
+[16:35:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=7
+[16:35:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(934.8857, 856.7422), shooter_id=41322284571, bullet_pos=(934.8857, 856.7422)
+[16:35:52] [INFO] [Bullet] Using shooter_position, distance=0
+[16:35:52] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[16:35:52] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[16:35:52] [INFO] [Bullet] Starting wall penetration at (934.8857, 856.7422)
+[16:35:52] [INFO] [LastChance] Threat detected: Bullet
+[16:35:52] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:35:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:35:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.14585494995117
+[16:35:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:52] [INFO] [Bullet] Exiting penetration at (906.4215, 893.7229) after traveling 41.6666641235352 pixels through wall
+[16:35:52] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:35:52] [ENEMY] [Enemy10] Pursuing vulnerability sound at (865.9251, 946.336), distance=118
+[16:35:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(867.2857, 864.5422), source=ENEMY (Enemy4), range=1469, listeners=9
+[16:35:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=7
+[16:35:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(934.8857, 856.7422), shooter_id=41322284571, bullet_pos=(934.8857, 856.7422)
+[16:35:52] [INFO] [Bullet] Using shooter_position, distance=0
+[16:35:52] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[16:35:52] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[16:35:52] [INFO] [Bullet] Starting wall penetration at (934.8857, 856.7422)
+[16:35:52] [INFO] [LastChance] Threat detected: Bullet
+[16:35:52] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:35:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:35:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.14585494995117
+[16:35:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:52] [INFO] [Bullet] Exiting penetration at (906.4215, 893.7229) after traveling 41.6666641235352 pixels through wall
+[16:35:52] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:35:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(867.2857, 864.5422), source=ENEMY (Enemy4), range=1469, listeners=9
+[16:35:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=7
+[16:35:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(934.8857, 856.7422), shooter_id=41322284571, bullet_pos=(934.8857, 856.7422)
+[16:35:52] [INFO] [Bullet] Using shooter_position, distance=0
+[16:35:52] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[16:35:52] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[16:35:52] [INFO] [Bullet] Starting wall penetration at (934.8857, 856.7422)
+[16:35:52] [INFO] [LastChance] Threat detected: Bullet
+[16:35:52] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:35:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:35:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.14585494995117
+[16:35:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:52] [INFO] [Bullet] Exiting penetration at (906.4215, 893.7229) after traveling 41.6666641235352 pixels through wall
+[16:35:52] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:35:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(867.2857, 864.5422), source=ENEMY (Enemy4), range=1469, listeners=9
+[16:35:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=7
+[16:35:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(934.8857, 856.7422), shooter_id=41322284571, bullet_pos=(934.8857, 856.7422)
+[16:35:52] [INFO] [Bullet] Using shooter_position, distance=0
+[16:35:52] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[16:35:52] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[16:35:52] [INFO] [Bullet] Starting wall penetration at (934.8857, 856.7422)
+[16:35:52] [INFO] [LastChance] Threat detected: Bullet
+[16:35:52] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:35:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:35:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.14585494995117
+[16:35:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:52] [INFO] [Bullet] Exiting penetration at (906.4215, 893.7229) after traveling 41.6666641235352 pixels through wall
+[16:35:52] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:35:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(867.2857, 864.5422), source=ENEMY (Enemy4), range=1469, listeners=9
+[16:35:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=7
+[16:35:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(934.8857, 856.7423), shooter_id=41322284571, bullet_pos=(934.8857, 856.7423)
+[16:35:52] [INFO] [Bullet] Using shooter_position, distance=0
+[16:35:52] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[16:35:52] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[16:35:52] [INFO] [Bullet] Starting wall penetration at (934.8857, 856.7423)
+[16:35:52] [INFO] [LastChance] Threat detected: Bullet
+[16:35:52] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:35:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:35:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.14585494995117
+[16:35:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:52] [INFO] [Bullet] Exiting penetration at (906.4215, 893.723) after traveling 41.6666641235352 pixels through wall
+[16:35:52] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:35:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(867.2857, 864.5422), source=ENEMY (Enemy4), range=1469, listeners=9
+[16:35:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=7
+[16:35:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(934.8857, 856.7423), shooter_id=41322284571, bullet_pos=(934.8857, 856.7423)
+[16:35:52] [INFO] [Bullet] Using shooter_position, distance=0
+[16:35:52] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[16:35:52] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[16:35:52] [INFO] [Bullet] Starting wall penetration at (934.8857, 856.7423)
+[16:35:52] [INFO] [LastChance] Threat detected: Bullet
+[16:35:52] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:35:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:35:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.14585494995117
+[16:35:52] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:52] [INFO] [Bullet] Exiting penetration at (906.4215, 893.723) after traveling 41.6666641235352 pixels through wall
+[16:35:52] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:35:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(867.2857, 864.5422), source=ENEMY (Enemy4), range=1469, listeners=9
+[16:35:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=7
+[16:35:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(934.8857, 856.7423), shooter_id=41322284571, bullet_pos=(934.8857, 856.7423)
+[16:35:53] [INFO] [Bullet] Using shooter_position, distance=0
+[16:35:53] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[16:35:53] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[16:35:53] [INFO] [Bullet] Starting wall penetration at (934.8857, 856.7423)
+[16:35:53] [INFO] [LastChance] Threat detected: Bullet
+[16:35:53] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:35:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:35:53] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.14585494995117
+[16:35:53] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:53] [INFO] [Bullet] Exiting penetration at (906.4215, 893.723) after traveling 41.6666641235352 pixels through wall
+[16:35:53] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:35:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(867.2857, 864.5422), source=ENEMY (Enemy4), range=1469, listeners=9
+[16:35:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=6
+[16:35:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(934.8857, 856.7423), shooter_id=41322284571, bullet_pos=(934.8857, 856.7423)
+[16:35:53] [INFO] [Bullet] Using shooter_position, distance=0
+[16:35:53] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[16:35:53] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[16:35:53] [INFO] [Bullet] Starting wall penetration at (934.8857, 856.7423)
+[16:35:53] [INFO] [LastChance] Threat detected: Bullet
+[16:35:53] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:35:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:35:53] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.9813222885132
+[16:35:53] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:53] [INFO] [Bullet] Exiting penetration at (903.1805, 890.985) after traveling 41.6666679382324 pixels through wall
+[16:35:53] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:35:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(867.2857, 864.5422), source=ENEMY (Enemy4), range=1469, listeners=9
+[16:35:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=6
+[16:35:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(934.8857, 856.7423), shooter_id=41322284571, bullet_pos=(934.8857, 856.7423)
+[16:35:53] [INFO] [Bullet] Using shooter_position, distance=0
+[16:35:53] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[16:35:53] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[16:35:53] [INFO] [Bullet] Starting wall penetration at (934.8857, 856.7423)
+[16:35:53] [INFO] [LastChance] Threat detected: Bullet
+[16:35:53] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:35:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:35:53] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17.6095161437988
+[16:35:53] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:53] [INFO] [Bullet] Exiting penetration at (898.1306, 885.4973) after traveling 41.6666679382324 pixels through wall
+[16:35:53] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:35:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(867.2857, 864.5422), source=ENEMY (Enemy4), range=1469, listeners=9
+[16:35:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=6
+[16:35:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(934.8857, 856.7423), shooter_id=41322284571, bullet_pos=(934.8857, 856.7423)
+[16:35:53] [INFO] [Bullet] Using shooter_position, distance=0
+[16:35:53] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[16:35:53] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[16:35:53] [INFO] [Bullet] Starting wall penetration at (934.8857, 856.7423)
+[16:35:53] [ENEMY] [Enemy10] Pursuing vulnerability sound at (865.9251, 946.336), distance=117
+[16:35:53] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.3519344329834
+[16:35:53] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:53] [INFO] [Bullet] Exiting penetration at (894.3001, 879.7768) after traveling 41.6666717529297 pixels through wall
+[16:35:53] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:35:53] [INFO] [LastChance] Threat detected: Bullet
+[16:35:53] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:35:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:35:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(867.2857, 864.5422), source=ENEMY (Enemy4), range=1469, listeners=9
+[16:35:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=6
+[16:35:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(934.8857, 856.7423), shooter_id=41322284571, bullet_pos=(934.8857, 856.7423)
+[16:35:53] [INFO] [Bullet] Using shooter_position, distance=0
+[16:35:53] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
+[16:35:53] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
+[16:35:53] [INFO] [Bullet] Starting wall penetration at (934.8857, 856.7423)
+[16:35:53] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.3109340667725
+[16:35:53] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:35:53] [INFO] [Bullet] Exiting penetration at (892.7651, 876.8331) after traveling 41.6666679382324 pixels through wall
+[16:35:53] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:35:53] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[16:35:54] [ENEMY] [Enemy10] Pursuing vulnerability sound at (865.9251, 946.336), distance=118
+[16:35:55] [ENEMY] [Enemy7] FLANKING started: target=(714.7709, 526.1076), side=left, pos=(1428.824, 830.3895)
+[16:35:55] [ENEMY] [Enemy7] State: PURSUING -> FLANKING
+[16:35:55] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[16:35:55] [ENEMY] [Enemy10] Pursuing vulnerability sound at (865.9251, 946.336), distance=118
+[16:35:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(500.3268, 663.9338), source=ENEMY (Enemy2), range=1469, listeners=9
+[16:35:55] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[16:35:55] [INFO] [LastChance] Threat detected: Bullet
+[16:35:55] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:35:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:35:55] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[16:35:55] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[16:35:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(500.3268, 663.9338), source=ENEMY (Enemy2), range=1469, listeners=9
+[16:35:55] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=3
+[16:35:56] [INFO] [LastChance] Threat detected: Bullet
+[16:35:56] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:35:56] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:35:56] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[16:35:56] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[16:35:56] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[16:35:56] [INFO] [PenultimateHit]   - Time scale: 0.10
+[16:35:56] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[16:35:56] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[16:35:56] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[16:35:56] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[16:35:56] [INFO] [PenultimateHit] Applying saturation to 9 enemies
+[16:35:56] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[16:35:56] [ENEMY] [Enemy10] Pursuing vulnerability sound at (865.9251, 946.336), distance=118
+[16:35:56] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
+[16:35:56] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[16:35:56] [INFO] [PenultimateHit] Ending penultimate hit effect
+[16:35:56] [INFO] [LastChance] Resetting all effects (scene change detected)
+[16:35:56] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[16:35:56] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[16:35:56] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[16:35:56] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[16:35:56] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[16:35:56] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[16:35:56] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[16:35:56] [INFO] [ScoreManager] Level started with 10 enemies
+[16:35:56] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
+[16:35:56] [ENEMY] [Enemy1] Registered as sound listener
+[16:35:56] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[16:35:56] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
+[16:35:56] [ENEMY] [Enemy2] Registered as sound listener
+[16:35:56] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[16:35:56] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
+[16:35:56] [ENEMY] [Enemy3] Registered as sound listener
+[16:35:56] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[16:35:56] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
+[16:35:56] [ENEMY] [Enemy4] Registered as sound listener
+[16:35:56] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[16:35:56] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
+[16:35:56] [ENEMY] [Enemy5] Registered as sound listener
+[16:35:56] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[16:35:56] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
+[16:35:56] [ENEMY] [Enemy6] Registered as sound listener
+[16:35:56] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[16:35:56] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
+[16:35:56] [ENEMY] [Enemy7] Registered as sound listener
+[16:35:56] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[16:35:56] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
+[16:35:56] [ENEMY] [Enemy8] Registered as sound listener
+[16:35:56] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[16:35:56] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
+[16:35:56] [ENEMY] [Enemy9] Registered as sound listener
+[16:35:56] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
+[16:35:56] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
+[16:35:56] [ENEMY] [Enemy10] Registered as sound listener
+[16:35:56] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[16:35:56] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[16:35:56] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[16:35:56] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[16:35:56] [INFO] [LastChance] Found player: Player
+[16:35:56] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[16:35:56] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[16:35:56] [INFO] [LastChance] Connected to player Died signal (C#)
+[16:35:56] [INFO] [Player] Detecting weapon pose (frame 3)...
+[16:35:56] [INFO] [Player] Detected weapon: Rifle (default pose)
+[16:35:56] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[16:35:57] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[16:35:57] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[16:35:58] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[16:35:58] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[16:35:58] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[16:35:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5923, 752.3362), source=ENEMY (Enemy3), range=1469, listeners=19
+[16:35:58] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
+[16:35:58] [ENEMY] [Enemy4] Heard gunshot at (689.5923, 752.3362), source_type=1, intensity=0.07, distance=184
+[16:35:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[16:35:58] [INFO] [LastChance] Threat detected: Bullet
+[16:35:58] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:35:58] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:35:58] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[16:35:58] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[16:35:58] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[16:35:58] [INFO] [PenultimateHit]   - Time scale: 0.10
+[16:35:58] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[16:35:58] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[16:35:58] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[16:35:58] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[16:35:58] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[16:35:58] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[16:35:58] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[16:35:59] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[16:35:59] [INFO] [PenultimateHit] Ending penultimate hit effect
+[16:35:59] [INFO] [LastChance] Resetting all effects (scene change detected)
+[16:35:59] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[16:35:59] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[16:35:59] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[16:35:59] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[16:35:59] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[16:35:59] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[16:35:59] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
+[16:35:59] [INFO] [ScoreManager] Level started with 10 enemies
+[16:35:59] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[16:35:59] [ENEMY] [Enemy1] Registered as sound listener
+[16:35:59] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[16:35:59] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[16:35:59] [ENEMY] [Enemy2] Registered as sound listener
+[16:35:59] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[16:35:59] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[16:35:59] [ENEMY] [Enemy3] Registered as sound listener
+[16:35:59] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[16:35:59] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[16:35:59] [ENEMY] [Enemy4] Registered as sound listener
+[16:35:59] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[16:35:59] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[16:35:59] [ENEMY] [Enemy5] Registered as sound listener
+[16:35:59] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[16:35:59] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[16:35:59] [ENEMY] [Enemy6] Registered as sound listener
+[16:35:59] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[16:35:59] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[16:35:59] [ENEMY] [Enemy7] Registered as sound listener
+[16:35:59] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[16:35:59] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[16:35:59] [ENEMY] [Enemy8] Registered as sound listener
+[16:35:59] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
+[16:35:59] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[16:35:59] [ENEMY] [Enemy9] Registered as sound listener
+[16:35:59] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[16:35:59] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[16:35:59] [ENEMY] [Enemy10] Registered as sound listener
+[16:35:59] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[16:35:59] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[16:35:59] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[16:35:59] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[16:35:59] [INFO] [LastChance] Found player: Player
+[16:35:59] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[16:35:59] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[16:35:59] [INFO] [LastChance] Connected to player Died signal (C#)
+[16:35:59] [INFO] [Player] Detecting weapon pose (frame 3)...
+[16:35:59] [INFO] [Player] Detected weapon: Rifle (default pose)
+[16:35:59] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[16:36:00] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[16:36:00] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[16:36:01] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[16:36:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
+[16:36:01] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[16:36:01] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
+[16:36:01] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
+[16:36:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[16:36:01] [INFO] [LastChance] Threat detected: Bullet
+[16:36:01] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:01] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[16:36:01] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[16:36:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[16:36:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[16:36:01] [INFO] [LastChance] Threat detected: @Area2D@822
+[16:36:01] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:02] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[16:36:02] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[16:36:02] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[16:36:02] [INFO] [PenultimateHit]   - Time scale: 0.10
+[16:36:02] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[16:36:02] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[16:36:02] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[16:36:02] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[16:36:02] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[16:36:02] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[16:36:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[16:36:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[16:36:02] [INFO] [LastChance] Threat detected: Bullet
+[16:36:02] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:02] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[16:36:02] [INFO] [PenultimateHit] Ending penultimate hit effect
+[16:36:02] [INFO] [LastChance] Resetting all effects (scene change detected)
+[16:36:02] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[16:36:02] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[16:36:02] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[16:36:02] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[16:36:02] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[16:36:02] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[16:36:02] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[16:36:02] [INFO] [ScoreManager] Level started with 10 enemies
+[16:36:02] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[16:36:02] [ENEMY] [Enemy1] Registered as sound listener
+[16:36:02] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[16:36:02] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[16:36:02] [ENEMY] [Enemy2] Registered as sound listener
+[16:36:02] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[16:36:02] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[16:36:02] [ENEMY] [Enemy3] Registered as sound listener
+[16:36:02] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[16:36:02] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[16:36:02] [ENEMY] [Enemy4] Registered as sound listener
+[16:36:02] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[16:36:02] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[16:36:02] [ENEMY] [Enemy5] Registered as sound listener
+[16:36:02] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[16:36:02] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[16:36:02] [ENEMY] [Enemy6] Registered as sound listener
+[16:36:02] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[16:36:02] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[16:36:02] [ENEMY] [Enemy7] Registered as sound listener
+[16:36:02] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[16:36:02] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[16:36:02] [ENEMY] [Enemy8] Registered as sound listener
+[16:36:02] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[16:36:02] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[16:36:02] [ENEMY] [Enemy9] Registered as sound listener
+[16:36:02] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[16:36:02] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[16:36:02] [ENEMY] [Enemy10] Registered as sound listener
+[16:36:02] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[16:36:02] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[16:36:02] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[16:36:02] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[16:36:02] [INFO] [LastChance] Found player: Player
+[16:36:02] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[16:36:02] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[16:36:02] [INFO] [LastChance] Connected to player Died signal (C#)
+[16:36:02] [INFO] [Player] Detecting weapon pose (frame 3)...
+[16:36:02] [INFO] [Player] Detected weapon: Rifle (default pose)
+[16:36:02] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[16:36:03] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[16:36:03] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[16:36:04] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[16:36:04] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[16:36:04] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[16:36:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
+[16:36:04] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[16:36:04] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
+[16:36:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[16:36:04] [INFO] [LastChance] Threat detected: Bullet
+[16:36:04] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:05] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[16:36:05] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[16:36:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[16:36:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[16:36:05] [INFO] [LastChance] Threat detected: Bullet
+[16:36:05] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:05] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[16:36:05] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[16:36:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[16:36:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[16:36:05] [INFO] [LastChance] Threat detected: Bullet
+[16:36:05] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:05] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[16:36:05] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[16:36:05] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[16:36:05] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[16:36:05] [INFO] [PenultimateHit]   - Time scale: 0.10
+[16:36:05] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[16:36:05] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[16:36:05] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[16:36:05] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[16:36:05] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[16:36:05] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[16:36:05] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[16:36:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[16:36:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[16:36:05] [INFO] [LastChance] Threat detected: Bullet
+[16:36:05] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:05] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[16:36:05] [INFO] [PenultimateHit] Ending penultimate hit effect
+[16:36:05] [INFO] [LastChance] Resetting all effects (scene change detected)
+[16:36:05] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[16:36:05] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[16:36:05] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[16:36:05] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[16:36:05] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[16:36:05] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[16:36:05] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[16:36:05] [INFO] [ScoreManager] Level started with 10 enemies
+[16:36:05] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[16:36:05] [ENEMY] [Enemy1] Registered as sound listener
+[16:36:05] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[16:36:05] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[16:36:05] [ENEMY] [Enemy2] Registered as sound listener
+[16:36:05] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[16:36:05] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[16:36:05] [ENEMY] [Enemy3] Registered as sound listener
+[16:36:05] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[16:36:05] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[16:36:05] [ENEMY] [Enemy4] Registered as sound listener
+[16:36:05] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[16:36:05] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[16:36:05] [ENEMY] [Enemy5] Registered as sound listener
+[16:36:05] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[16:36:05] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[16:36:05] [ENEMY] [Enemy6] Registered as sound listener
+[16:36:05] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[16:36:05] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[16:36:05] [ENEMY] [Enemy7] Registered as sound listener
+[16:36:05] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[16:36:05] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[16:36:05] [ENEMY] [Enemy8] Registered as sound listener
+[16:36:05] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[16:36:05] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[16:36:05] [ENEMY] [Enemy9] Registered as sound listener
+[16:36:05] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[16:36:05] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[16:36:05] [ENEMY] [Enemy10] Registered as sound listener
+[16:36:05] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[16:36:05] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[16:36:05] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[16:36:05] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[16:36:05] [INFO] [LastChance] Found player: Player
+[16:36:05] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[16:36:05] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[16:36:05] [INFO] [LastChance] Connected to player Died signal (C#)
+[16:36:05] [INFO] [Player] Detecting weapon pose (frame 3)...
+[16:36:05] [INFO] [Player] Detected weapon: Rifle (default pose)
+[16:36:05] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[16:36:06] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[16:36:06] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[16:36:07] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[16:36:07] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[16:36:07] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[16:36:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=20
+[16:36:07] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[16:36:07] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
+[16:36:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[16:36:07] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[16:36:07] [INFO] [LastChance] Threat detected: Bullet
+[16:36:07] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(767.6, 742.2), shooter_id=405706638754, bullet_pos=(37.0553, 572.481)
+[16:36:08] [INFO] [Bullet] Using shooter_position, distance=750.000061035156
+[16:36:08] [INFO] [Bullet] Distance to wall: 750.000061035156 (51.0688832843876% of viewport)
+[16:36:08] [ENEMY] [Enemy10] FLANKING started: target=(695.9799, 611.5286), side=left, pos=(1061.496, 1460.101)
+[16:36:08] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[16:36:08] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[16:36:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[16:36:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[16:36:08] [INFO] [LastChance] Threat detected: @Area2D@1327
+[16:36:08] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[16:36:08] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[16:36:08] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[16:36:08] [INFO] [PenultimateHit]   - Time scale: 0.10
+[16:36:08] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[16:36:08] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[16:36:08] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[16:36:08] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[16:36:08] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[16:36:08] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[16:36:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[16:36:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[16:36:08] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[16:36:08] [INFO] [LastChance] Threat detected: Bullet
+[16:36:08] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:09] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[16:36:09] [INFO] [PenultimateHit] Ending penultimate hit effect
+[16:36:09] [INFO] [LastChance] Resetting all effects (scene change detected)
+[16:36:09] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[16:36:09] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[16:36:09] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[16:36:09] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[16:36:09] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[16:36:09] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[16:36:09] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[16:36:09] [INFO] [ScoreManager] Level started with 10 enemies
+[16:36:09] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[16:36:09] [ENEMY] [Enemy1] Registered as sound listener
+[16:36:09] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[16:36:09] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[16:36:09] [ENEMY] [Enemy2] Registered as sound listener
+[16:36:09] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[16:36:09] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[16:36:09] [ENEMY] [Enemy3] Registered as sound listener
+[16:36:09] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[16:36:09] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[16:36:09] [ENEMY] [Enemy4] Registered as sound listener
+[16:36:09] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[16:36:09] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[16:36:09] [ENEMY] [Enemy5] Registered as sound listener
+[16:36:09] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[16:36:09] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[16:36:09] [ENEMY] [Enemy6] Registered as sound listener
+[16:36:09] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[16:36:09] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[16:36:09] [ENEMY] [Enemy7] Registered as sound listener
+[16:36:09] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[16:36:09] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[16:36:09] [ENEMY] [Enemy8] Registered as sound listener
+[16:36:09] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[16:36:09] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[16:36:09] [ENEMY] [Enemy9] Registered as sound listener
+[16:36:09] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[16:36:09] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[16:36:09] [ENEMY] [Enemy10] Registered as sound listener
+[16:36:09] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
+[16:36:09] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[16:36:09] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[16:36:09] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[16:36:09] [INFO] [LastChance] Found player: Player
+[16:36:09] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[16:36:09] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[16:36:09] [INFO] [LastChance] Connected to player Died signal (C#)
+[16:36:09] [INFO] [Player] Detecting weapon pose (frame 3)...
+[16:36:09] [INFO] [Player] Detected weapon: Rifle (default pose)
+[16:36:09] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[16:36:09] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[16:36:09] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[16:36:10] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[16:36:10] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[16:36:10] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[16:36:11] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[16:36:11] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[16:36:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=20
+[16:36:11] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[16:36:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[16:36:11] [INFO] [LastChance] Threat detected: Bullet
+[16:36:11] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[16:36:11] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[16:36:11] [ENEMY] [Enemy10] FLANKING started: target=(681.1831, 600.437), side=left, pos=(1061.496, 1460.101)
+[16:36:11] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[16:36:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[16:36:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[16:36:11] [INFO] [LastChance] Threat detected: Bullet
+[16:36:11] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[16:36:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[16:36:11] [INFO] [LastChance] Threat detected: @Area2D@1580
+[16:36:11] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[16:36:11] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[16:36:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(391.4061, 617.5037), shooter_id=442968836246, bullet_pos=(932.9706, 606.9713)
+[16:36:11] [INFO] [Bullet] Using shooter_position, distance=541.666931152344
+[16:36:11] [INFO] [Bullet] Distance to wall: 541.666931152344 (36.8830973798211% of viewport)
+[16:36:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:11] [INFO] [Bullet] Starting wall penetration at (932.9706, 606.9713)
+[16:36:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[16:36:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[16:36:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 43.636791229248
+[16:36:11] [INFO] [LastChance] Threat detected: @Area2D@1581
+[16:36:11] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:11] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:11] [INFO] [Bullet] Exiting penetration at (979.6285, 606.0639) after traveling 41.6666717529297 pixels through wall
+[16:36:11] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:36:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[16:36:11] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[16:36:11] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[16:36:11] [INFO] [PenultimateHit]   - Time scale: 0.10
+[16:36:11] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[16:36:11] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[16:36:11] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[16:36:11] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[16:36:11] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[16:36:11] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[16:36:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
+[16:36:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
+[16:36:12] [INFO] [LastChance] Threat detected: Bullet
+[16:36:12] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:12] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[16:36:12] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[16:36:12] [INFO] [PenultimateHit] Ending penultimate hit effect
+[16:36:12] [INFO] [LastChance] Resetting all effects (scene change detected)
+[16:36:12] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[16:36:12] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[16:36:12] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[16:36:12] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[16:36:12] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[16:36:12] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[16:36:12] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[16:36:12] [INFO] [ScoreManager] Level started with 10 enemies
+[16:36:12] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[16:36:12] [ENEMY] [Enemy1] Registered as sound listener
+[16:36:12] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[16:36:12] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[16:36:12] [ENEMY] [Enemy2] Registered as sound listener
+[16:36:12] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[16:36:12] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[16:36:12] [ENEMY] [Enemy3] Registered as sound listener
+[16:36:12] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[16:36:12] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[16:36:12] [ENEMY] [Enemy4] Registered as sound listener
+[16:36:12] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[16:36:12] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[16:36:12] [ENEMY] [Enemy5] Registered as sound listener
+[16:36:12] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[16:36:12] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[16:36:12] [ENEMY] [Enemy6] Registered as sound listener
+[16:36:12] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
+[16:36:12] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[16:36:12] [ENEMY] [Enemy7] Registered as sound listener
+[16:36:12] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[16:36:12] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[16:36:12] [ENEMY] [Enemy8] Registered as sound listener
+[16:36:12] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
+[16:36:12] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[16:36:12] [ENEMY] [Enemy9] Registered as sound listener
+[16:36:12] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[16:36:12] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[16:36:12] [ENEMY] [Enemy10] Registered as sound listener
+[16:36:12] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[16:36:12] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[16:36:12] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[16:36:12] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[16:36:12] [INFO] [LastChance] Found player: Player
+[16:36:12] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[16:36:12] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[16:36:12] [INFO] [LastChance] Connected to player Died signal (C#)
+[16:36:12] [INFO] [Player] Detecting weapon pose (frame 3)...
+[16:36:12] [INFO] [Player] Detected weapon: Rifle (default pose)
+[16:36:12] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[16:36:12] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[16:36:13] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[16:36:13] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[16:36:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(469.5997, 796.4759), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[16:36:13] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[16:36:13] [ENEMY] [Enemy1] Heard gunshot at (469.5997, 796.4759), source_type=0, intensity=0.01, distance=478
+[16:36:13] [ENEMY] [Enemy2] Heard gunshot at (469.5997, 796.4759), source_type=0, intensity=0.04, distance=256
+[16:36:13] [ENEMY] [Enemy4] Heard gunshot at (469.5997, 796.4759), source_type=0, intensity=0.02, distance=346
+[16:36:13] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[16:36:14] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[16:36:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(495.1131, 778.9393), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[16:36:14] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[16:36:14] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[16:36:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(526.9199, 773.9335), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[16:36:14] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[16:36:14] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[16:36:14] [ENEMY] [Enemy3] Hit taken, health: 1/4
+[16:36:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(707.8433, 753.3613), source=ENEMY (Enemy3), range=1469, listeners=10
+[16:36:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[16:36:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(562.1201, 773.9335), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[16:36:14] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[16:36:14] [ENEMY] [Enemy3] Hit taken, health: 0/4
+[16:36:14] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[16:36:14] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[16:36:14] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[16:36:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(775.4122, 745.2966), shooter_id=479358617221, bullet_pos=(521.2071, 825.8625)
+[16:36:14] [INFO] [Bullet] Using shooter_position, distance=266.666625976563
+[16:36:14] [INFO] [Bullet] Distance to wall: 266.666625976563 (18.1578209194308% of viewport)
+[16:36:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:14] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[16:36:14] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[16:36:14] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[16:36:14] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[16:36:14] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[16:36:14] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[16:36:15] [ENEMY] [Enemy10] FLANKING started: target=(837.6115, 694.2463), side=left, pos=(1061.496, 1460.101)
+[16:36:15] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[16:36:15] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[16:36:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(402.9655, 560.2461), source=ENEMY (Enemy2), range=1469, listeners=9
+[16:36:16] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[16:36:16] [INFO] [LastChance] Threat detected: Bullet
+[16:36:16] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:16] [ENEMY] [Enemy1] FLANKING started: target=(444.0375, 526.4483), side=right, pos=(240.926, 401.9332)
+[16:36:16] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
+[16:36:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(402.9655, 560.2461), source=ENEMY (Enemy2), range=1469, listeners=9
+[16:36:16] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[16:36:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(470.5655, 552.4461), shooter_id=479073405677, bullet_pos=(248.2103, 699.6512)
+[16:36:16] [INFO] [Bullet] Using shooter_position, distance=266.666809082031
+[16:36:16] [INFO] [Bullet] Distance to wall: 266.666809082031 (18.1578333874188% of viewport)
+[16:36:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:16] [INFO] [LastChance] Threat detected: @Area2D@1838
+[16:36:16] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(402.9655, 560.2461), source=ENEMY (Enemy2), range=1469, listeners=9
+[16:36:16] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[16:36:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(470.5655, 552.4461), shooter_id=479073405677, bullet_pos=(53.54468, 574.0537)
+[16:36:16] [INFO] [Bullet] Using shooter_position, distance=417.580261230469
+[16:36:16] [INFO] [Bullet] Distance to wall: 417.580261230469 (28.4338078495746% of viewport)
+[16:36:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:16] [INFO] [Bullet] Starting wall penetration at (53.54468, 574.0537)
+[16:36:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7.69357299804688
+[16:36:16] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:16] [INFO] [Bullet] Exiting penetration at (25.53524, 555.9821) after traveling 28.3333339691162 pixels through wall
+[16:36:16] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[16:36:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(470.5655, 552.4461), shooter_id=479073405677, bullet_pos=(207.0397, 695.8133)
+[16:36:16] [INFO] [Bullet] Using shooter_position, distance=300
+[16:36:16] [INFO] [Bullet] Distance to wall: 300 (20.4275516513566% of viewport)
+[16:36:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:16] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[16:36:16] [INFO] [LastChance] Threat detected: @Area2D@1840
+[16:36:16] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(470.5655, 552.4461), shooter_id=479073405677, bullet_pos=(46.75131, 570.7051)
+[16:36:16] [INFO] [Bullet] Using shooter_position, distance=424.207336425781
+[16:36:16] [INFO] [Bullet] Distance to wall: 424.207336425781 (28.8850575857402% of viewport)
+[16:36:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:16] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[16:36:16] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[16:36:16] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[16:36:16] [INFO] [PenultimateHit]   - Time scale: 0.10
+[16:36:16] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[16:36:16] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[16:36:16] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[16:36:16] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[16:36:16] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[16:36:16] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[16:36:17] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[16:36:17] [INFO] [PenultimateHit] Ending penultimate hit effect
+[16:36:17] [INFO] [LastChance] Resetting all effects (scene change detected)
+[16:36:17] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[16:36:17] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[16:36:17] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[16:36:17] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[16:36:17] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[16:36:17] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[16:36:17] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[16:36:17] [INFO] [ScoreManager] Level started with 10 enemies
+[16:36:17] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
+[16:36:17] [ENEMY] [Enemy1] Registered as sound listener
+[16:36:17] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[16:36:17] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
+[16:36:17] [ENEMY] [Enemy2] Registered as sound listener
+[16:36:17] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
+[16:36:17] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
+[16:36:17] [ENEMY] [Enemy3] Registered as sound listener
+[16:36:17] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[16:36:17] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
+[16:36:17] [ENEMY] [Enemy4] Registered as sound listener
+[16:36:17] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[16:36:17] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
+[16:36:17] [ENEMY] [Enemy5] Registered as sound listener
+[16:36:17] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
+[16:36:17] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
+[16:36:17] [ENEMY] [Enemy6] Registered as sound listener
+[16:36:17] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[16:36:17] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
+[16:36:17] [ENEMY] [Enemy7] Registered as sound listener
+[16:36:17] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[16:36:17] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
+[16:36:17] [ENEMY] [Enemy8] Registered as sound listener
+[16:36:17] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[16:36:17] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
+[16:36:17] [ENEMY] [Enemy9] Registered as sound listener
+[16:36:17] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[16:36:17] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
+[16:36:17] [ENEMY] [Enemy10] Registered as sound listener
+[16:36:17] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[16:36:17] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[16:36:17] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[16:36:17] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[16:36:17] [INFO] [LastChance] Found player: Player
+[16:36:17] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[16:36:17] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[16:36:17] [INFO] [LastChance] Connected to player Died signal (C#)
+[16:36:17] [INFO] [Player] Detecting weapon pose (frame 3)...
+[16:36:17] [INFO] [Player] Detected weapon: Rifle (default pose)
+[16:36:17] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[16:36:17] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[16:36:18] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[16:36:18] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[16:36:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(529.3325, 756.756), source=PLAYER (AssaultRifle), range=1469, listeners=19
+[16:36:19] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
+[16:36:19] [ENEMY] [Enemy1] Heard gunshot at (529.3325, 756.756), source_type=0, intensity=0.01, distance=467
+[16:36:19] [ENEMY] [Enemy2] Heard gunshot at (529.3325, 756.756), source_type=0, intensity=0.04, distance=244
+[16:36:19] [ENEMY] [Enemy4] Heard gunshot at (529.3325, 756.756), source_type=0, intensity=0.03, distance=306
+[16:36:19] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[16:36:19] [ENEMY] [Enemy3] Hit taken, health: 3/4
+[16:36:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(564.5326, 756.756), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[16:36:19] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[16:36:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5767, 752.2654), source=ENEMY (Enemy3), range=1469, listeners=10
+[16:36:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[16:36:19] [ENEMY] [Enemy3] Hit taken, health: 2/4
+[16:36:19] [INFO] [LastChance] Threat detected: @Area2D@2096
+[16:36:19] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(599.6511, 756.559), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[16:36:19] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[16:36:19] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[16:36:19] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[16:36:19] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[16:36:19] [ENEMY] [Enemy3] Hit taken, health: 1/4
+[16:36:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(695.6243, 758.2856), source=ENEMY (Enemy3), range=1469, listeners=10
+[16:36:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[16:36:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(630.0892, 748.7203), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[16:36:19] [ENEMY] [Enemy3] Heard gunshot at (630.0892, 748.7203), source_type=0, intensity=0.49, distance=71
+[16:36:19] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=0, below_threshold=5
+[16:36:19] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[16:36:19] [ENEMY] [Enemy3] Hit taken, health: 0/4
+[16:36:19] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[16:36:19] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[16:36:19] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[16:36:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(762.8926, 748.0106), shooter_id=543950899158, bullet_pos=(505.0649, 816.0985)
+[16:36:19] [INFO] [Bullet] Using shooter_position, distance=266.666564941406
+[16:36:19] [INFO] [Bullet] Distance to wall: 266.666564941406 (18.1578167634347% of viewport)
+[16:36:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(650.545, 731.657), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:36:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
+[16:36:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(762.8926, 748.0106), shooter_id=543950899158, bullet_pos=(697.0623, 883.0424)
+[16:36:19] [INFO] [Bullet] Using shooter_position, distance=150.223892211914
+[16:36:19] [INFO] [Bullet] Distance to wall: 150.223892211914 (10.229021058089% of viewport)
+[16:36:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:19] [INFO] [Bullet] Starting wall penetration at (697.0623, 883.0424)
+[16:36:19] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[16:36:19] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[16:36:19] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[16:36:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.2006454467773
+[16:36:19] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:19] [INFO] [Bullet] Exiting penetration at (728.5372, 894.0168) after traveling 28.3333358764648 pixels through wall
+[16:36:19] [INFO] [Bullet] Damage multiplier after penetration: 0.45
+[16:36:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(650.54504, 731.65704), shooter_id=546769472347, bullet_pos=(908.05945, 752.2108)
+[16:36:19] [INFO] [Bullet] Using shooter_position, distance=258,33337
+[16:36:19] [INFO] [Bullet] Distance to wall: 258,33337 (17,590395% of viewport)
+[16:36:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:19] [INFO] [Bullet] Starting wall penetration at (908.05945, 752.2108)
+[16:36:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(658.8855, 709.9083), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:36:19] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
+[16:36:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10,303906
+[16:36:19] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:19] [INFO] [Bullet] Exiting penetration at (946.27124, 755.26074) after traveling 33,333336 pixels through wall
+[16:36:19] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:36:19] [ENEMY] [Enemy10] FLANKING started: target=(857.8019, 700.463), side=left, pos=(1061.496, 1460.101)
+[16:36:19] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[16:36:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(658.8855, 709.90826), shooter_id=546769472347, bullet_pos=(924.39813, 830.6245)
+[16:36:20] [INFO] [Bullet] Using shooter_position, distance=291,66653
+[16:36:20] [INFO] [Bullet] Distance to wall: 291,66653 (19,860111% of viewport)
+[16:36:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:20] [INFO] [Bullet] Starting wall penetration at (924.39813, 830.6245)
+[16:36:20] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25,5886
+[16:36:20] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:20] [INFO] [Bullet] Exiting penetration at (959.29407, 846.49005) after traveling 33,333332 pixels through wall
+[16:36:20] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:36:20] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[16:36:20] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
+[16:36:20] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
+[16:36:20] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[16:36:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(443.9432, 654.7408), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:36:20] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[16:36:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.94324, 654.74084), shooter_id=546769472347, bullet_pos=(506.574, 509.32135)
+[16:36:20] [INFO] [Bullet] Using shooter_position, distance=158,33333
+[16:36:20] [INFO] [Bullet] Distance to wall: 158,33333 (10,781208% of viewport)
+[16:36:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(404.3433, 654.7408), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:36:21] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[16:36:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(404.3433, 654.74084), shooter_id=546769472347, bullet_pos=(499.2604, 488.22705)
+[16:36:21] [INFO] [Bullet] Using shooter_position, distance=191,66664
+[16:36:21] [INFO] [Bullet] Distance to wall: 191,66664 (13,050935% of viewport)
+[16:36:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:21] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
+[16:36:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(369.1433, 654.7408), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:36:21] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
+[16:36:21] [ENEMY] [Enemy2] Hit taken, health: 2/3
+[16:36:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.94324, 654.74084), shooter_id=546769472347, bullet_pos=(264.06613, 54.992252)
+[16:36:21] [INFO] [Bullet] Using shooter_position, distance=626,1423
+[16:36:21] [INFO] [Bullet] Distance to wall: 626,1423 (42,635178% of viewport)
+[16:36:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(333.9434, 654.7408), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:36:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=4
+[16:36:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(404.3433, 654.74084), shooter_id=546769472347, bullet_pos=(294.18118, 46.880234)
+[16:36:21] [INFO] [Bullet] Using shooter_position, distance=617,76227
+[16:36:21] [INFO] [Bullet] Distance to wall: 617,76227 (42,06457% of viewport)
+[16:36:21] [INFO] [Bullet] Distance-based penetration chance: 97,59133%
+[16:36:21] [INFO] [Bullet] Starting wall penetration at (294.18118, 46.880234)
+[16:36:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16,925116
+[16:36:21] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:21] [INFO] [Bullet] Exiting penetration at (280.13467, 16.651003) after traveling 28,333332 pixels through wall
+[16:36:21] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[16:36:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(298.7434, 654.7408), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:36:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=4
+[16:36:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(333.9434, 654.74084), shooter_id=546769472347, bullet_pos=(496.42267, 412.5221)
+[16:36:21] [INFO] [Bullet] Using shooter_position, distance=291,66666
+[16:36:21] [INFO] [Bullet] Distance to wall: 291,66666 (19,86012% of viewport)
+[16:36:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(263.5435, 654.7408), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:36:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=4
+[16:36:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(298.74344, 654.74084), shooter_id=546769472347, bullet_pos=(501.54382, 445.11856)
+[16:36:21] [INFO] [Bullet] Using shooter_position, distance=291,66675
+[16:36:21] [INFO] [Bullet] Distance to wall: 291,66675 (19,860126% of viewport)
+[16:36:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(333.9434, 654.74084), shooter_id=546769472347, bullet_pos=(328.0628, 47.84268)
+[16:36:21] [INFO] [Bullet] Using shooter_position, distance=606,9267
+[16:36:21] [INFO] [Bullet] Distance to wall: 606,9267 (41,326756% of viewport)
+[16:36:21] [ENEMY] [Enemy2] Hit taken, health: 1/3
+[16:36:21] [ENEMY] [Enemy1] FLANKING started: target=(419.9348, 578.3177), side=right, pos=(273.5279, 401.9337)
+[16:36:21] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
+[16:36:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(228.3435, 654.7408), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:36:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=3
+[16:36:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(298.74344, 654.74084), shooter_id=546769472347, bullet_pos=(310.86377, 268.36703)
+[16:36:21] [INFO] [Bullet] Using shooter_position, distance=386,56387
+[16:36:21] [INFO] [Bullet] Distance to wall: 386,56387 (26,321846% of viewport)
+[16:36:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:21] [INFO] [Bullet] Starting wall penetration at (310.86377, 268.36703)
+[16:36:21] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[16:36:21] [INFO] [Bullet] Exiting penetration at (286.4176, 245.70659) after traveling 28,33333 pixels through wall
+[16:36:21] [INFO] [Bullet] Damage multiplier after penetration: 0,45
+[16:36:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(333.9434, 654.74084), shooter_id=546769472347, bullet_pos=(255.65556, 231.77005)
+[16:36:21] [INFO] [Bullet] Using shooter_position, distance=430,15494
+[16:36:21] [INFO] [Bullet] Distance to wall: 430,15494 (29,290041% of viewport)
+[16:36:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:21] [INFO] [Bullet] Starting wall penetration at (255.65556, 231.77005)
+[16:36:21] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[16:36:21] [INFO] [Bullet] Exiting penetration at (245.00203, 258.83188) after traveling 24,083334 pixels through wall
+[16:36:21] [INFO] [Bullet] Damage multiplier after penetration: 0,225
+[16:36:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(193.1436, 654.7408), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:36:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=3
+[16:36:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(228.34354, 654.74084), shooter_id=546769472347, bullet_pos=(504.64548, 561.3245)
+[16:36:21] [INFO] [Bullet] Using shooter_position, distance=291,66653
+[16:36:21] [INFO] [Bullet] Distance to wall: 291,66653 (19,860111% of viewport)
+[16:36:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:21] [INFO] [Bullet] Starting wall penetration at (504.64548, 561.3245)
+[16:36:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17,902567
+[16:36:21] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:21] [INFO] [Bullet] Exiting penetration at (540.9595, 549.04694) after traveling 33,333336 pixels through wall
+[16:36:21] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:36:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(157.9436, 654.7408), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:36:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
+[16:36:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(193.14359, 654.74084), shooter_id=546769472347, bullet_pos=(512.31476, 593.4647)
+[16:36:22] [INFO] [Bullet] Using shooter_position, distance=325
+[16:36:22] [INFO] [Bullet] Distance to wall: 325 (22,129848% of viewport)
+[16:36:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(122.7437, 654.7408), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:36:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
+[16:36:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(157.94363, 654.74084), shooter_id=546769472347, bullet_pos=(503.53113, 560.0196)
+[16:36:22] [INFO] [Bullet] Using shooter_position, distance=358,3334
+[16:36:22] [INFO] [Bullet] Distance to wall: 358,3334 (24,399582% of viewport)
+[16:36:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(87.54366, 654.7408), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:36:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
+[16:36:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(122.74367, 654.74084), shooter_id=546769472347, bullet_pos=(520.78516, 505.78445)
+[16:36:22] [INFO] [Bullet] Using shooter_position, distance=425,00003
+[16:36:22] [INFO] [Bullet] Distance to wall: 425,00003 (28,939035% of viewport)
+[16:36:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.00037, 654.7408), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:36:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
+[16:36:22] [ENEMY] [Enemy1] Hit taken, health: 2/3
+[16:36:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(87.543655, 654.74084), shooter_id=546769472347, bullet_pos=(512.4983, 483.03455)
+[16:36:22] [INFO] [Bullet] Using shooter_position, distance=458,3334
+[16:36:22] [INFO] [Bullet] Distance to wall: 458,3334 (31,208765% of viewport)
+[16:36:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:22] [ENEMY] [Enemy1] State: FLANKING -> RETREATING
+[16:36:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.00037, 654.7408), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:36:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
+[16:36:22] [ENEMY] [Enemy1] Hit taken, health: 1/3
+[16:36:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(398.9821, 471.245), source=ENEMY (Enemy1), range=1469, listeners=9
+[16:36:22] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[16:36:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.00037, 654.7408), source=PLAYER (AssaultRifle), range=1469, listeners=9
+[16:36:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
+[16:36:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(390.901, 464.2827), source=ENEMY (Enemy1), range=1469, listeners=9
+[16:36:22] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
+[16:36:22] [ENEMY] [Enemy1] Hit taken, health: 0/3
+[16:36:22] [ENEMY] [Enemy1] Enemy died (ricochet: false, penetration: false)
+[16:36:22] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[16:36:22] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 8)
+[16:36:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.06487, 653.2712), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[16:36:22] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=2
+[16:36:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(415.3191, 405.1866), shooter_id=543380474611, bullet_pos=(137.3119, 692.7838)
+[16:36:22] [INFO] [Bullet] Using shooter_position, distance=400.000183105469
+[16:36:22] [INFO] [Bullet] Distance to wall: 400.000183105469 (27.2367480031302% of viewport)
+[16:36:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:22] [INFO] [Bullet] Starting wall penetration at (137.3119, 692.7838)
+[16:36:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11.606819152832
+[16:36:22] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:22] [INFO] [Bullet] Exiting penetration at (110.6696, 720.3452) after traveling 33.3333358764648 pixels through wall
+[16:36:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:36:22] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[16:36:22] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[16:36:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(419.3946, 402.487), shooter_id=543380474611, bullet_pos=(101.1382, 696.5801)
+[16:36:22] [INFO] [Bullet] Using shooter_position, distance=433.33349609375
+[16:36:22] [INFO] [Bullet] Distance to wall: 433.33349609375 (29.5064745790601% of viewport)
+[16:36:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.00037, 654.74084), shooter_id=546769472347, bullet_pos=(507.05176, 411.09485)
+[16:36:22] [INFO] [Bullet] Using shooter_position, distance=491,6668
+[16:36:22] [INFO] [Bullet] Distance to wall: 491,6668 (33,4785% of viewport)
+[16:36:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.06626, 644.1714), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[16:36:22] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=2
+[16:36:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(419.3946, 402.487), shooter_id=543380474611, bullet_pos=(51.96021, 659.3739)
+[16:36:22] [INFO] [Bullet] Using shooter_position, distance=448.329040527344
+[16:36:22] [INFO] [Bullet] Distance to wall: 448.329040527344 (30.5275487739182% of viewport)
+[16:36:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[16:36:22] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[16:36:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.064865, 653.2712), shooter_id=546769472347, bullet_pos=(516.67944, 427.20996)
+[16:36:23] [INFO] [Bullet] Using shooter_position, distance=491,6665
+[16:36:23] [INFO] [Bullet] Distance to wall: 491,6665 (33,478477% of viewport)
+[16:36:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:23] [INFO] [Bullet] Starting wall penetration at (516.67944, 427.20996)
+[16:36:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30,089737
+[16:36:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:23] [INFO] [Bullet] Exiting penetration at (550.7206, 409.58484) after traveling 33,333332 pixels through wall
+[16:36:23] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:36:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.07459, 626.381), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[16:36:23] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=2
+[16:36:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.00037, 654.74084), shooter_id=546769472347, bullet_pos=(252.55333, 275.5712)
+[16:36:23] [INFO] [Bullet] Using shooter_position, distance=416,5863
+[16:36:23] [INFO] [Bullet] Distance to wall: 416,5863 (28,366127% of viewport)
+[16:36:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:23] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
+[16:36:23] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
+[16:36:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.06626, 644.1714), shooter_id=546769472347, bullet_pos=(519.4198, 423.4803)
+[16:36:23] [INFO] [Bullet] Using shooter_position, distance=491,66666
+[16:36:23] [INFO] [Bullet] Distance to wall: 491,66666 (33,478485% of viewport)
+[16:36:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.07459, 600.0216), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[16:36:23] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=2
+[16:36:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.00037, 654.74084), shooter_id=546769472347, bullet_pos=(53.04265, 372.3624)
+[16:36:23] [INFO] [Bullet] Using shooter_position, distance=283,6623
+[16:36:23] [INFO] [Bullet] Distance to wall: 283,6623 (19,315088% of viewport)
+[16:36:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:23] [INFO] [Bullet] Starting wall penetration at (53.04265, 372.3624)
+[16:36:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 5,6950936
+[16:36:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:23] [INFO] [Bullet] Exiting penetration at (26.876081, 385.05692) after traveling 24,083334 pixels through wall
+[16:36:23] [INFO] [Bullet] Damage multiplier after penetration: 0,225
+[16:36:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.07459, 626.381), shooter_id=546769472347, bullet_pos=(523.5558, 414.106)
+[16:36:23] [INFO] [Bullet] Using shooter_position, distance=491,6668
+[16:36:23] [INFO] [Bullet] Distance to wall: 491,6668 (33,4785% of viewport)
+[16:36:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:23] [INFO] [Bullet] Starting wall penetration at (523.5558, 414.106)
+[16:36:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37,84084
+[16:36:23] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:23] [INFO] [Bullet] Exiting penetration at (558.13226, 397.55576) after traveling 33,333336 pixels through wall
+[16:36:23] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:36:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.07459, 600.0216), shooter_id=546769472347, bullet_pos=(497.8155, 411.4425)
+[16:36:23] [INFO] [Bullet] Using shooter_position, distance=458,33344
+[16:36:23] [INFO] [Bullet] Distance to wall: 458,33344 (31,208769% of viewport)
+[16:36:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:23] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[16:36:24] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[16:36:24] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[16:36:24] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
+[16:36:24] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
+[16:36:24] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
+[16:36:24] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
+[16:36:24] [ENEMY] [Enemy1] Player reloading state changed: false -> true
+[16:36:24] [ENEMY] [Enemy2] Player reloading state changed: false -> true
+[16:36:24] [ENEMY] [Enemy4] Player reloading state changed: false -> true
+[16:36:24] [ENEMY] [Enemy5] Player reloading state changed: false -> true
+[16:36:24] [ENEMY] [Enemy6] Player reloading state changed: false -> true
+[16:36:24] [ENEMY] [Enemy7] Player reloading state changed: false -> true
+[16:36:24] [ENEMY] [Enemy8] Player reloading state changed: false -> true
+[16:36:24] [ENEMY] [Enemy9] Player reloading state changed: false -> true
+[16:36:24] [ENEMY] [Enemy10] Player reloading state changed: false -> true
+[16:36:24] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(80.07582, 286.1666), source=PLAYER (Player), range=900, listeners=8
+[16:36:24] [ENEMY] [Enemy2] Heard player RELOAD at (80.07582, 286.1666), intensity=0.01, distance=449
+[16:36:24] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
+[16:36:24] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=6, self=0, below_threshold=1
+[16:36:24] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=449), can_see=false
+[16:36:24] [ENEMY] [Enemy2] Pursuing vulnerability sound at (80.07582, 286.1666), distance=449
+[16:36:24] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=921), can_see=false
+[16:36:24] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1621), can_see=false
+[16:36:24] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1877), can_see=false
+[16:36:24] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1649), can_see=false
+[16:36:24] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=2160), can_see=false
+[16:36:24] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=2383), can_see=false
+[16:36:24] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=609), can_see=true
+[16:36:24] [ENEMY] [Enemy10] Player vulnerable (reloading) - pursuing to attack (dist=609)
+[16:36:24] [ENEMY] [Enemy10] FLANKING started: target=(271.5536, 228.4063), side=left, pos=(524.0657, 703.3022)
+[16:36:24] [ENEMY] [Enemy10] FLANKING started: target=(271.5869, 224.1165), side=left, pos=(524.0657, 699.3832)
+[16:36:24] [ENEMY] [Enemy10] FLANKING started: target=(271.6199, 219.8265), side=left, pos=(524.0657, 695.4641)
+[16:36:24] [ENEMY] [Enemy10] FLANKING started: target=(271.6529, 215.5364), side=left, pos=(524.0657, 691.545)
+[16:36:24] [ENEMY] [Enemy10] FLANKING started: target=(271.6858, 211.2462), side=left, pos=(524.0657, 687.626)
+[16:36:24] [ENEMY] [Enemy10] FLANKING started: target=(271.7186, 206.9559), side=left, pos=(524.0657, 683.7068)
+[16:36:24] [ENEMY] [Enemy10] State: FLANKING -> PURSUING
+[16:36:24] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
+[16:36:24] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
+[16:36:24] [ENEMY] [Enemy1] Player reloading state changed: true -> false
+[16:36:24] [ENEMY] [Enemy2] Player reloading state changed: true -> false
+[16:36:24] [ENEMY] [Enemy4] Player reloading state changed: true -> false
+[16:36:24] [ENEMY] [Enemy5] Player reloading state changed: true -> false
+[16:36:24] [ENEMY] [Enemy6] Player reloading state changed: true -> false
+[16:36:24] [ENEMY] [Enemy7] Player reloading state changed: true -> false
+[16:36:24] [ENEMY] [Enemy8] Player reloading state changed: true -> false
+[16:36:24] [ENEMY] [Enemy9] Player reloading state changed: true -> false
+[16:36:24] [ENEMY] [Enemy10] Player reloading state changed: true -> false
+[16:36:24] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
+[16:36:24] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
+[16:36:25] [ENEMY] [Enemy4] FLANKING started: target=(276.2971, 76.67899), side=left, pos=(784.0742, 880.225)
+[16:36:25] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
+[16:36:25] [ENEMY] [Enemy2] Pursuing vulnerability sound at (80.07582, 286.1666), distance=218
+[16:36:26] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
+[16:36:26] [INFO] [ScoreManager] Combo ended at 2. Max combo: 2
+[16:36:26] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
+[16:36:26] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
+[16:36:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(114.8066, 87.00002), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[16:36:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=1
+[16:36:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(81.66422, 99.93433), source=PLAYER (AssaultRifle), range=1469, listeners=8
+[16:36:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=1
+[16:36:27] [ENEMY] [Enemy2] Hit taken, health: 0/3
+[16:36:27] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
+[16:36:27] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[16:36:27] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
+[16:36:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.06126, 118.6163), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[16:36:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=0
+[16:36:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(81.66422, 99.93433), shooter_id=546769472347, bullet_pos=(253.10904, 424.05023)
+[16:36:27] [INFO] [Bullet] Using shooter_position, distance=366,66666
+[16:36:27] [INFO] [Bullet] Distance to wall: 366,66666 (24,967007% of viewport)
+[16:36:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:27] [INFO] [Bullet] Starting wall penetration at (253.10904, 424.05023)
+[16:36:27] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[16:36:27] [INFO] [Bullet] Exiting penetration at (271.03284, 457.9351) after traveling 33,333332 pixels through wall
+[16:36:27] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:36:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.0641, 140.9949), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[16:36:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=0
+[16:36:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.06126, 118.616264), shooter_id=546769472347, bullet_pos=(292.76, 447.49615)
+[16:36:27] [INFO] [Bullet] Using shooter_position, distance=391,66663
+[16:36:27] [INFO] [Bullet] Distance to wall: 391,66663 (26,669302% of viewport)
+[16:36:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:27] [INFO] [Bullet] Starting wall penetration at (292.76, 447.49615)
+[16:36:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 6,769597
+[16:36:27] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:27] [INFO] [Bullet] Exiting penetration at (313.57733, 479.6844) after traveling 33,333332 pixels through wall
+[16:36:27] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:36:27] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
+[16:36:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.0641, 140.99492), shooter_id=546769472347, bullet_pos=(283.34335, 436.0887)
+[16:36:27] [INFO] [Bullet] Using shooter_position, distance=358,33337
+[16:36:27] [INFO] [Bullet] Distance to wall: 358,33337 (24,399578% of viewport)
+[16:36:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:27] [INFO] [Bullet] Starting wall penetration at (283.34335, 436.0887)
+[16:36:27] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[16:36:27] [INFO] [Bullet] Exiting penetration at (305.0895, 467.6569) after traveling 33,333336 pixels through wall
+[16:36:27] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:36:27] [ENEMY] [Enemy4] State: FLANKING -> COMBAT
+[16:36:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.07584, 287.6976), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[16:36:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=0
+[16:36:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.075836, 287.69757), shooter_id=546769472347, bullet_pos=(223.31754, 461.21075)
+[16:36:28] [INFO] [Bullet] Using shooter_position, distance=225,00002
+[16:36:28] [INFO] [Bullet] Distance to wall: 225,00002 (15,320664% of viewport)
+[16:36:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.07584, 322.8975), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[16:36:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=0
+[16:36:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.07584, 358.0975), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[16:36:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=0
+[16:36:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.075836, 287.69757), shooter_id=546769472347, bullet_pos=(59.133102, 731.9898)
+[16:36:28] [INFO] [Bullet] Using shooter_position, distance=444,78555
+[16:36:28] [INFO] [Bullet] Distance to wall: 444,78555 (30,286268% of viewport)
+[16:36:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.075836, 322.89752), shooter_id=546769472347, bullet_pos=(442.72708, 702.51447)
+[16:36:28] [INFO] [Bullet] Using shooter_position, distance=524,99994
+[16:36:28] [INFO] [Bullet] Distance to wall: 524,99994 (35,748215% of viewport)
+[16:36:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.07584, 393.2974), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[16:36:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=0
+[16:36:28] [ENEMY] [Enemy10] Hit taken, health: 3/4
+[16:36:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(323.4222, 298.0649), source=ENEMY (Enemy4), range=1469, listeners=7
+[16:36:28] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=2
+[16:36:28] [INFO] [LastChance] Threat detected: @Area2D@2159
+[16:36:28] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.07584, 428.4974), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[16:36:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=0
+[16:36:28] [ENEMY] [Enemy10] Hit taken, health: 2/4
+[16:36:28] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[16:36:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(391.0222, 290.2649), shooter_id=544236111393, bullet_pos=(41.00191, 399.4905)
+[16:36:28] [INFO] [Bullet] Using shooter_position, distance=366.666687011719
+[16:36:28] [INFO] [Bullet] Distance to wall: 366.666687011719 (24.9670089592123% of viewport)
+[16:36:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:28] [INFO] [Bullet] Starting wall penetration at (41.00191, 399.4905)
+[16:36:28] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.9032897949219
+[16:36:28] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:28] [INFO] [Bullet] Exiting penetration at (4.40888, 410.9095) after traveling 33.3333320617676 pixels through wall
+[16:36:28] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:36:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.07584, 463.6973), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[16:36:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=0
+[16:36:28] [ENEMY] [Enemy10] Hit taken, health: 1/4
+[16:36:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.07584, 498.8973), source=PLAYER (AssaultRifle), range=1469, listeners=7
+[16:36:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=0
+[16:36:28] [ENEMY] [Enemy10] Hit taken, health: 0/4
+[16:36:28] [ENEMY] [Enemy10] Enemy died (ricochet: false, penetration: false)
+[16:36:28] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
+[16:36:28] [INFO] [SoundPropagation] Unregistered listener: Enemy10 (remaining: 6)
+[16:36:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.075836, 287.69757), shooter_id=546769472347, bullet_pos=(624.1204, 1396.1997)
+[16:36:28] [INFO] [Bullet] Using shooter_position, distance=1234,8124
+[16:36:28] [INFO] [Bullet] Distance to wall: 1234,8124 (84,08065% of viewport)
+[16:36:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.07584, 534.0974), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[16:36:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=0
+[16:36:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.07584, 569.2975), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[16:36:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=0
+[16:36:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.075836, 498.89728), shooter_id=546769472347, bullet_pos=(918.7057, 801.8316)
+[16:36:29] [INFO] [Bullet] Using shooter_position, distance=891,66656
+[16:36:29] [INFO] [Bullet] Distance to wall: 891,66656 (60,715218% of viewport)
+[16:36:29] [INFO] [Bullet] Distance-based penetration chance: 75,832245%
+[16:36:29] [INFO] [Bullet] Starting wall penetration at (918.7057, 801.8316)
+[16:36:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.075836, 287.69757), shooter_id=546769472347, bullet_pos=(849.5125, 1024.2775)
+[16:36:29] [INFO] [Bullet] Using shooter_position, distance=1065,168
+[16:36:29] [INFO] [Bullet] Distance to wall: 1065,168 (72,52925% of viewport)
+[16:36:29] [INFO] [Bullet] Distance-based penetration chance: 62,04921%
+[16:36:29] [INFO] [Bullet] Starting wall penetration at (849.5125, 1024.2775)
+[16:36:29] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[16:36:29] [INFO] [Bullet] Exiting penetration at (862.71344, 1002.4945) after traveling 20,47083 pixels through wall
+[16:36:29] [INFO] [Bullet] Damage multiplier after penetration: 0,1125
+[16:36:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19,945261
+[16:36:29] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:29] [INFO] [Bullet] Exiting penetration at (954.7589, 814.8549) after traveling 33,333336 pixels through wall
+[16:36:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:36:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.075836, 534.09735), shooter_id=546769472347, bullet_pos=(934.39124, 789.4681)
+[16:36:29] [INFO] [Bullet] Using shooter_position, distance=891,66644
+[16:36:29] [INFO] [Bullet] Distance to wall: 891,66644 (60,71521% of viewport)
+[16:36:29] [INFO] [Bullet] Distance-based penetration chance: 75,83225%
+[16:36:29] [INFO] [Bullet] Starting wall penetration at (934.39124, 789.4681)
+[16:36:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36,65419
+[16:36:29] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:29] [INFO] [Bullet] Exiting penetration at (971.1188, 800.44666) after traveling 33,333336 pixels through wall
+[16:36:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:36:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.075836, 569.29755), shooter_id=546769472347, bullet_pos=(915.2833, 767.1988)
+[16:36:29] [INFO] [Bullet] Using shooter_position, distance=858,33356
+[16:36:29] [INFO] [Bullet] Distance to wall: 858,33356 (58,445515% of viewport)
+[16:36:29] [INFO] [Bullet] Distance-based penetration chance: 78,48024%
+[16:36:29] [INFO] [Bullet] Starting wall penetration at (915.2833, 767.1988)
+[16:36:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17,043049
+[16:36:29] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:29] [INFO] [Bullet] Exiting penetration at (952.58386, 776.0371) after traveling 33,333336 pixels through wall
+[16:36:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:36:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(424.1408, 529.8232), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[16:36:31] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=2
+[16:36:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(424.14078, 529.8232), shooter_id=546769472347, bullet_pos=(339.31854, 438.00714)
+[16:36:31] [INFO] [Bullet] Using shooter_position, distance=124,999985
+[16:36:31] [INFO] [Bullet] Distance to wall: 124,999985 (8,511479% of viewport)
+[16:36:31] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(449.0309, 504.933), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[16:36:31] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=2
+[16:36:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(424.14078, 529.8232), shooter_id=546769472347, bullet_pos=(502.65854, 200.40205)
+[16:36:31] [INFO] [Bullet] Using shooter_position, distance=338,64926
+[16:36:31] [INFO] [Bullet] Distance to wall: 338,64926 (23,059252% of viewport)
+[16:36:31] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:31] [ENEMY] [Enemy4] Hit taken, health: 2/3
+[16:36:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(473.9211, 480.0429), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[16:36:31] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=2
+[16:36:31] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
+[16:36:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(424.14078, 529.8232), shooter_id=546769472347, bullet_pos=(391.44733, 67.123245)
+[16:36:31] [INFO] [Bullet] Using shooter_position, distance=463,85355
+[16:36:31] [INFO] [Bullet] Distance to wall: 463,85355 (31,58464% of viewport)
+[16:36:31] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:31] [ENEMY] [Enemy4] Hit taken, health: 1/3
+[16:36:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(279.4784, 380.9664), source=ENEMY (Enemy4), range=1469, listeners=6
+[16:36:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[16:36:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(483.935, 455.1528), source=PLAYER (AssaultRifle), range=1469, listeners=6
+[16:36:31] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=3
+[16:36:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(268.8126, 380.8286), source=ENEMY (Enemy4), range=1469, listeners=6
+[16:36:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=1, below_threshold=2
+[16:36:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(424.14078, 529.8232), shooter_id=546769472347, bullet_pos=(259.07993, 229.7776)
+[16:36:31] [INFO] [Bullet] Using shooter_position, distance=342,45065
+[16:36:31] [INFO] [Bullet] Distance to wall: 342,45065 (23,318096% of viewport)
+[16:36:31] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:31] [ENEMY] [Enemy4] Hit taken, health: 0/3
+[16:36:31] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
+[16:36:31] [INFO] [ScoreManager] Kill registered. Combo: 3 (points: 3000)
+[16:36:31] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 5)
+[16:36:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(483.935, 430.2626), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[16:36:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=3
+[16:36:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(212.4754, 392.8491), shooter_id=544236111393, bullet_pos=(512.4395, 397.4955)
+[16:36:31] [INFO] [Bullet] Using shooter_position, distance=300.000030517578
+[16:36:31] [INFO] [Bullet] Distance to wall: 300.000030517578 (20.4275537293546% of viewport)
+[16:36:31] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:31] [INFO] [LastChance] Threat detected: @Area2D@2182
+[16:36:31] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:31] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:31] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[16:36:31] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[16:36:31] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[16:36:31] [INFO] [PenultimateHit]   - Time scale: 0.10
+[16:36:31] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[16:36:31] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[16:36:31] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[16:36:31] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[16:36:31] [INFO] [PenultimateHit] Applying saturation to 6 enemies
+[16:36:31] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[16:36:31] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[16:36:31] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[16:36:31] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[16:36:31] [INFO] [PenultimateHit] Ending penultimate hit effect
+[16:36:31] [INFO] [LastChance] Player died
+[16:36:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(483.9339, 402.0945), source=PLAYER (AssaultRifle), range=1469, listeners=5
+[16:36:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=3
+[16:36:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.93503, 430.26263), shooter_id=546769472347, bullet_pos=(53.224308, 299.92303)
+[16:36:31] [INFO] [Bullet] Using shooter_position, distance=450,00015
+[16:36:31] [INFO] [Bullet] Distance to wall: 450,00015 (30,641338% of viewport)
+[16:36:31] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(424.14078, 529.8232), shooter_id=546769472347, bullet_pos=(63.02951, 56.49577)
+[16:36:31] [INFO] [Bullet] Using shooter_position, distance=595,3488
+[16:36:31] [INFO] [Bullet] Distance to wall: 595,3488 (40,5384% of viewport)
+[16:36:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(424.14078, 529.8232), shooter_id=546769472347, bullet_pos=(58.80219, 59.16593)
+[16:36:31] [INFO] [Bullet] Using shooter_position, distance=595,8108
+[16:36:31] [INFO] [Bullet] Distance to wall: 595,8108 (40,569855% of viewport)
+[16:36:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.93503, 430.26263), shooter_id=546769472347, bullet_pos=(230.34341, 257.69568)
+[16:36:32] [INFO] [Bullet] Using shooter_position, distance=306,73776
+[16:36:32] [INFO] [Bullet] Distance to wall: 306,73776 (20,88634% of viewport)
+[16:36:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.93393, 402.09448), shooter_id=546769472347, bullet_pos=(43.012, 376.4572)
+[16:36:32] [INFO] [Bullet] Using shooter_position, distance=441,66663
+[16:36:32] [INFO] [Bullet] Distance to wall: 441,66663 (30,073893% of viewport)
+[16:36:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.93503, 430.26263), shooter_id=546769472347, bullet_pos=(45.415752, 241.6211)
+[16:36:32] [INFO] [Bullet] Using shooter_position, distance=477,3728
+[16:36:32] [INFO] [Bullet] Distance to wall: 477,3728 (32,50519% of viewport)
+[16:36:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:32] [INFO] [Bullet] Starting wall penetration at (45.415752, 241.6211)
+[16:36:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21,637827
+[16:36:32] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:32] [INFO] [Bullet] Exiting penetration at (10.443459, 238.58118) after traveling 30,104166 pixels through wall
+[16:36:32] [INFO] [Bullet] Damage multiplier after penetration: 0,225
+[16:36:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(424.14078, 529.8232), shooter_id=546769472347, bullet_pos=(273.85294, 225.95174)
+[16:36:32] [INFO] [Bullet] Using shooter_position, distance=339,00488
+[16:36:32] [INFO] [Bullet] Distance to wall: 339,00488 (23,083466% of viewport)
+[16:36:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:32] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[16:36:32] [INFO] [LastChance] Resetting all effects (scene change detected)
+[16:36:32] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[16:36:32] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[16:36:32] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[16:36:32] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[16:36:32] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[16:36:32] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[16:36:32] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
+[16:36:32] [INFO] [ScoreManager] Level started with 10 enemies
+[16:36:32] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 6)
+[16:36:32] [ENEMY] [Enemy1] Registered as sound listener
+[16:36:32] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
+[16:36:32] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 7)
+[16:36:32] [ENEMY] [Enemy2] Registered as sound listener
+[16:36:32] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[16:36:32] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 8)
+[16:36:32] [ENEMY] [Enemy3] Registered as sound listener
+[16:36:32] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
+[16:36:32] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 9)
+[16:36:32] [ENEMY] [Enemy4] Registered as sound listener
+[16:36:32] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
+[16:36:32] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 10)
+[16:36:32] [ENEMY] [Enemy5] Registered as sound listener
+[16:36:32] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[16:36:32] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 11)
+[16:36:32] [ENEMY] [Enemy6] Registered as sound listener
+[16:36:32] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[16:36:32] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 12)
+[16:36:32] [ENEMY] [Enemy7] Registered as sound listener
+[16:36:32] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
+[16:36:32] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 13)
+[16:36:32] [ENEMY] [Enemy8] Registered as sound listener
+[16:36:32] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[16:36:32] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 14)
+[16:36:32] [ENEMY] [Enemy9] Registered as sound listener
+[16:36:32] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[16:36:32] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 15)
+[16:36:32] [ENEMY] [Enemy10] Registered as sound listener
+[16:36:32] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[16:36:32] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[16:36:32] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[16:36:32] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[16:36:32] [INFO] [LastChance] Found player: Player
+[16:36:32] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[16:36:32] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[16:36:32] [INFO] [LastChance] Connected to player Died signal (C#)
+[16:36:32] [INFO] [Player] Detecting weapon pose (frame 3)...
+[16:36:32] [INFO] [Player] Detected weapon: Rifle (default pose)
+[16:36:32] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[16:36:32] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[16:36:33] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[16:36:33] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[16:36:34] [ENEMY] [Enemy1] State: IDLE -> COMBAT
+[16:36:34] [ENEMY] [Enemy2] State: IDLE -> COMBAT
+[16:36:34] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
+[16:36:34] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[16:36:34] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[16:36:34] [ENEMY] [Enemy4] State: IDLE -> COMBAT
+[16:36:34] [ENEMY] [Enemy10] FLANKING started: target=(871.5354, 631.1593), side=left, pos=(1061.496, 1460.101)
+[16:36:34] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
+[16:36:34] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
+[16:36:35] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[16:36:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=15
+[16:36:35] [INFO] [SoundPropagation] Cleaned up 5 invalid listeners
+[16:36:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[16:36:35] [INFO] [LastChance] Threat detected: Bullet
+[16:36:35] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:35] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
+[16:36:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[16:36:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[16:36:35] [INFO] [LastChance] Threat detected: Bullet
+[16:36:35] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
+[16:36:35] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
+[16:36:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[16:36:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[16:36:35] [INFO] [LastChance] Threat detected: Bullet
+[16:36:35] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
+[16:36:35] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
+[16:36:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[16:36:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[16:36:35] [INFO] [LastChance] Threat detected: Bullet
+[16:36:35] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[16:36:35] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[16:36:35] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[16:36:35] [INFO] [PenultimateHit]   - Time scale: 0.10
+[16:36:35] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[16:36:35] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[16:36:35] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[16:36:35] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[16:36:35] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[16:36:35] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[16:36:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
+[16:36:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
+[16:36:36] [INFO] [LastChance] Threat detected: Bullet
+[16:36:36] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[16:36:36] [INFO] [PenultimateHit] Ending penultimate hit effect
+[16:36:36] [INFO] [LastChance] Resetting all effects (scene change detected)
+[16:36:36] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[16:36:36] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[16:36:36] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[16:36:36] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[16:36:36] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[16:36:36] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[16:36:36] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[16:36:36] [INFO] [ScoreManager] Level started with 10 enemies
+[16:36:36] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
+[16:36:36] [ENEMY] [Enemy1] Registered as sound listener
+[16:36:36] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
+[16:36:36] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
+[16:36:36] [ENEMY] [Enemy2] Registered as sound listener
+[16:36:36] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
+[16:36:36] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
+[16:36:36] [ENEMY] [Enemy3] Registered as sound listener
+[16:36:36] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[16:36:36] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
+[16:36:36] [ENEMY] [Enemy4] Registered as sound listener
+[16:36:36] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
+[16:36:36] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
+[16:36:36] [ENEMY] [Enemy5] Registered as sound listener
+[16:36:36] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
+[16:36:36] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
+[16:36:36] [ENEMY] [Enemy6] Registered as sound listener
+[16:36:36] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
+[16:36:36] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
+[16:36:36] [ENEMY] [Enemy7] Registered as sound listener
+[16:36:36] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
+[16:36:36] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
+[16:36:36] [ENEMY] [Enemy8] Registered as sound listener
+[16:36:36] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[16:36:36] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
+[16:36:36] [ENEMY] [Enemy9] Registered as sound listener
+[16:36:36] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
+[16:36:36] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
+[16:36:36] [ENEMY] [Enemy10] Registered as sound listener
+[16:36:36] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
+[16:36:36] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[16:36:36] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[16:36:36] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[16:36:36] [INFO] [LastChance] Found player: Player
+[16:36:36] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[16:36:36] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[16:36:36] [INFO] [LastChance] Connected to player Died signal (C#)
+[16:36:36] [INFO] [Player] Detecting weapon pose (frame 3)...
+[16:36:36] [INFO] [Player] Detected weapon: Rifle (default pose)
+[16:36:36] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[16:36:36] [ENEMY] [Enemy10] State: IDLE -> COMBAT
+[16:36:37] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
+[16:36:37] [ENEMY] [Enemy3] State: IDLE -> COMBAT
+[16:36:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(458.6229, 779.7384), source=PLAYER (AssaultRifle), range=1469, listeners=20
+[16:36:37] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
+[16:36:37] [ENEMY] [Enemy1] Heard gunshot at (458.6229, 779.7384), source_type=0, intensity=0.01, distance=458
+[16:36:37] [ENEMY] [Enemy2] Heard gunshot at (458.6229, 779.7384), source_type=0, intensity=0.04, distance=237
+[16:36:37] [ENEMY] [Enemy4] Heard gunshot at (458.6229, 779.7384), source_type=0, intensity=0.02, distance=362
+[16:36:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[16:36:38] [ENEMY] [Enemy3] Hit taken, health: 1/2
+[16:36:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(481.0212, 751.6162), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[16:36:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[16:36:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(508.06, 733.2221), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[16:36:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
+[16:36:38] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
+[16:36:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(481.02124, 751.6162), shooter_id=772674686117, bullet_pos=(932.5775, 673.0917)
+[16:36:38] [INFO] [Bullet] Using shooter_position, distance=458,33304
+[16:36:38] [INFO] [Bullet] Distance to wall: 458,33304 (31,208742% of viewport)
+[16:36:38] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:38] [INFO] [Bullet] Starting wall penetration at (932.5775, 673.0917)
+[16:36:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34,859467
+[16:36:38] [INFO] [Bullet] Body exited signal received for penetrating body
+[16:36:38] [INFO] [Bullet] Exiting penetration at (970.34406, 666.5242) after traveling 33,333336 pixels through wall
+[16:36:38] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:36:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(695.8962, 757.9509), source=ENEMY (Enemy3), range=1469, listeners=10
+[16:36:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[16:36:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.9594, 734.7856), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[16:36:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[16:36:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(508.05997, 733.2221), shooter_id=772674686117, bullet_pos=(931.00995, 691.52704)
+[16:36:38] [INFO] [Bullet] Using shooter_position, distance=425,0002
+[16:36:38] [INFO] [Bullet] Distance to wall: 425,0002 (28,939047% of viewport)
+[16:36:38] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:38] [INFO] [Bullet] Starting wall penetration at (931.00995, 691.52704)
+[16:36:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(704.0941, 764.7739), source=ENEMY (Enemy3), range=1469, listeners=10
+[16:36:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
+[16:36:38] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[16:36:38] [INFO] [Bullet] Exiting penetration at (969.1584, 687.7663) after traveling 33,33334 pixels through wall
+[16:36:38] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:36:38] [INFO] [LastChance] Threat detected: @Area2D@2702
+[16:36:38] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(571.0573, 747.751), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[16:36:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
+[16:36:38] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
+[16:36:38] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
+[16:36:38] [INFO] [PenultimateHit] Starting penultimate hit effect:
+[16:36:38] [INFO] [PenultimateHit]   - Time scale: 0.10
+[16:36:38] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
+[16:36:38] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
+[16:36:38] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
+[16:36:38] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
+[16:36:38] [INFO] [PenultimateHit] Applying saturation to 10 enemies
+[16:36:38] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
+[16:36:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(541.95935, 734.78564), shooter_id=772674686117, bullet_pos=(908.39014, 721.6284)
+[16:36:38] [INFO] [Bullet] Using shooter_position, distance=366,6669
+[16:36:38] [INFO] [Bullet] Distance to wall: 366,6669 (24,967024% of viewport)
+[16:36:38] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:38] [INFO] [Bullet] Starting wall penetration at (908.39014, 721.6284)
+[16:36:38] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[16:36:38] [INFO] [Bullet] Exiting penetration at (917.5509, 721.29944) after traveling 4,166667 pixels through wall
+[16:36:38] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:36:38] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
+[16:36:38] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
+[16:36:38] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[16:36:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(592.2851, 772.6912), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[16:36:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=5
+[16:36:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(571.05725, 747.751), shooter_id=772674686117, bullet_pos=(911.9334, 689.41693)
+[16:36:39] [INFO] [Bullet] Using shooter_position, distance=345,83148
+[16:36:39] [INFO] [Bullet] Distance to wall: 345,83148 (23,548302% of viewport)
+[16:36:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
+[16:36:39] [INFO] [Bullet] Starting wall penetration at (911.9334, 689.41693)
+[16:36:39] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[16:36:39] [INFO] [Bullet] Exiting penetration at (920.9687, 687.8707) after traveling 4,1666665 pixels through wall
+[16:36:39] [INFO] [Bullet] Damage multiplier after penetration: 0,9
+[16:36:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(728.4396, 698.1887), shooter_id=769856112197, bullet_pos=(65.83246, 971.2521)
+[16:36:40] [INFO] [Bullet] Using shooter_position, distance=716.667175292969
+[16:36:40] [INFO] [Bullet] Distance to wall: 716.667175292969 (48.7991858004299% of viewport)
+[16:36:40] [INFO] [Bullet] Distance-based penetration chance: 89.7342832328318%
+[16:36:40] [INFO] [Bullet] Starting wall penetration at (65.83246, 971.2521)
+[16:36:40] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
+[16:36:40] [INFO] [Bullet] Exiting penetration at (57.35725, 974.7448) after traveling 4.16666698455811 pixels through wall
+[16:36:40] [INFO] [Bullet] Damage multiplier after penetration: 0.9
+[16:36:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(599.076, 801.3755), source=PLAYER (AssaultRifle), range=1469, listeners=10
+[16:36:40] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
+[16:36:40] [ENEMY] [Enemy3] Hit taken, health: 0/2
+[16:36:40] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
+[16:36:40] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
+[16:36:40] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
+[16:36:41] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[16:36:41] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
+[16:36:41] [INFO] [PenultimateHit] Ending penultimate hit effect
+[16:36:41] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
+[16:36:43] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
+[16:36:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(687.9865, 916.6106), source=ENEMY (Enemy4), range=1469, listeners=9
+[16:36:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
+[16:36:44] [INFO] [LastChance] Threat detected: Bullet
+[16:36:44] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:44] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
+[16:36:44] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
+[16:36:44] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
+[16:36:44] [INFO] [PenultimateHit] Player died - ending penultimate effect
+[16:36:44] [INFO] [LastChance] Player died
+[16:36:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(687.9865, 916.6106), source=ENEMY (Enemy4), range=1469, listeners=9
+[16:36:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
+[16:36:44] [INFO] [LastChance] Threat detected: Bullet
+[16:36:44] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:44] [ENEMY] [Enemy2] FLANKING started: target=(399.2537, 915.2767), side=left, pos=(440.8623, 647.7097)
+[16:36:44] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
+[16:36:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(687.9865, 916.6106), source=ENEMY (Enemy4), range=1469, listeners=9
+[16:36:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
+[16:36:44] [INFO] [LastChance] Threat detected: Bullet
+[16:36:44] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:44] [ENEMY] [Enemy2] State: FLANKING -> COMBAT
+[16:36:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(687.9865, 916.6106), source=ENEMY (Enemy4), range=1469, listeners=9
+[16:36:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
+[16:36:44] [INFO] [LastChance] Threat detected: Bullet
+[16:36:44] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(687.9865, 916.6106), source=ENEMY (Enemy4), range=1469, listeners=9
+[16:36:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
+[16:36:44] [INFO] [LastChance] Threat detected: Bullet
+[16:36:44] [INFO] [LastChance] Not in hard mode - effect disabled
+[16:36:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
+[16:36:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(687.9865, 916.6106), source=ENEMY (Enemy4), range=1469, listeners=9
+[16:36:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
+[16:36:44] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
+[16:36:44] [INFO] [LastChance] Resetting all effects (scene change detected)
+[16:36:44] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
+[16:36:44] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
+[16:36:44] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
+[16:36:44] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
+[16:36:44] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
+[16:36:44] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
+[16:36:44] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
+[16:36:44] [INFO] [ScoreManager] Level started with 10 enemies
+[16:36:44] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
+[16:36:44] [ENEMY] [Enemy1] Registered as sound listener
+[16:36:44] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
+[16:36:44] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
+[16:36:44] [ENEMY] [Enemy2] Registered as sound listener
+[16:36:44] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
+[16:36:44] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
+[16:36:44] [ENEMY] [Enemy3] Registered as sound listener
+[16:36:44] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
+[16:36:44] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
+[16:36:44] [ENEMY] [Enemy4] Registered as sound listener
+[16:36:44] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
+[16:36:44] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
+[16:36:44] [ENEMY] [Enemy5] Registered as sound listener
+[16:36:44] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
+[16:36:44] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
+[16:36:44] [ENEMY] [Enemy6] Registered as sound listener
+[16:36:44] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
+[16:36:44] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
+[16:36:44] [ENEMY] [Enemy7] Registered as sound listener
+[16:36:44] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
+[16:36:44] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
+[16:36:44] [ENEMY] [Enemy8] Registered as sound listener
+[16:36:44] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
+[16:36:44] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
+[16:36:44] [ENEMY] [Enemy9] Registered as sound listener
+[16:36:44] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
+[16:36:44] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
+[16:36:44] [ENEMY] [Enemy10] Registered as sound listener
+[16:36:44] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
+[16:36:44] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
+[16:36:44] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
+[16:36:44] [INFO] [PenultimateHit] Connected to player Died signal (C#)
+[16:36:44] [INFO] [LastChance] Found player: Player
+[16:36:44] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
+[16:36:44] [INFO] [LastChance] Connected to player Damaged signal (C#)
+[16:36:44] [INFO] [LastChance] Connected to player Died signal (C#)
+[16:36:44] [INFO] [Player] Detecting weapon pose (frame 3)...
+[16:36:44] [INFO] [Player] Detected weapon: Rifle (default pose)
+[16:36:44] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
+[16:36:46] [INFO] ------------------------------------------------------------
+[16:36:46] [INFO] GAME LOG ENDED: 2026-01-22T16:36:46
+[16:36:46] [INFO] ============================================================
diff --git a/experiments/create_enemy_sprites.py b/experiments/create_enemy_sprites.py
new file mode 100644
index 00000000..5a797633
--- /dev/null
+++ b/experiments/create_enemy_sprites.py
@@ -0,0 +1,177 @@
+#!/usr/bin/env python3
+"""
+Script to create enemy sprites based on player sprites.
+Creates black versions with white skull decorations.
+"""
+
+from PIL import Image, ImageDraw
+import os
+
+# Paths
+BASE_DIR = '/tmp/gh-issue-solver-1769066205054'
+PLAYER_DIR = os.path.join(BASE_DIR, 'assets/sprites/characters/player')
+ENEMY_DIR = os.path.join(BASE_DIR, 'assets/sprites/characters/enemy')
+
+# Ensure enemy directory exists
+os.makedirs(ENEMY_DIR, exist_ok=True)
+
+
+def convert_to_dark(image):
+    """Convert green/military colors to dark/black colors, preserving transparency."""
+    img = image.convert('RGBA')
+    pixels = img.load()
+
+    for y in range(img.height):
+        for x in range(img.width):
+            r, g, b, a = pixels[x, y]
+            if a > 0:  # Only modify non-transparent pixels
+                # Convert to grayscale, then darken significantly
+                gray = int(0.299 * r + 0.587 * g + 0.114 * b)
+                # Make it dark - reduce to 20-40% of grayscale value
+                dark = int(gray * 0.25)
+                pixels[x, y] = (dark, dark, dark, a)
+
+    return img
+
+
+def draw_simple_skull_on_head(image):
+    """Draw a simple white skull symbol on the head (helmet area)."""
+    img = image.copy()
+    draw = ImageDraw.Draw(img)
+
+    # Head size is 14x18 - skull should be small and centered
+    # Simple skull: circle for head, two dots for eyes
+    cx, cy = 7, 8  # Center point for skull
+
+    # Skull outline (small white oval)
+    draw.ellipse([cx-3, cy-3, cx+3, cy+2], fill=(255, 255, 255, 255))
+
+    # Eyes (two black dots)
+    draw.point((cx-1, cy-1), fill=(0, 0, 0, 255))
+    draw.point((cx+1, cy-1), fill=(0, 0, 0, 255))
+
+    # Nose (small vertical line)
+    draw.point((cx, cy), fill=(0, 0, 0, 255))
+
+    # Teeth area (white rectangle at bottom)
+    draw.rectangle([cx-2, cy+1, cx+2, cy+2], fill=(255, 255, 255, 255))
+
+    # Tooth lines (black)
+    draw.point((cx, cy+1), fill=(0, 0, 0, 255))
+
+    return img
+
+
+def draw_simple_skull_on_arm(image, is_left=True):
+    """Draw a small white skull on the forearm."""
+    img = image.copy()
+    draw = ImageDraw.Draw(img)
+
+    # Arm size is 20x8 - skull should be tiny
+    # Position depends on left or right arm
+    if is_left:
+        cx, cy = 10, 4  # Center-right for left arm (forearm area)
+    else:
+        cx, cy = 10, 4  # Center-right for right arm (forearm area)
+
+    # Very simple skull - just a few pixels
+    # Small white circle/oval for skull
+    draw.ellipse([cx-2, cy-2, cx+2, cy+1], fill=(255, 255, 255, 255))
+
+    # Eyes (two black dots)
+    draw.point((cx-1, cy-1), fill=(0, 0, 0, 255))
+    draw.point((cx+1, cy-1), fill=(0, 0, 0, 255))
+
+    return img
+
+
+def create_enemy_body():
+    """Create enemy body sprite (black version of player body)."""
+    player_body = Image.open(os.path.join(PLAYER_DIR, 'player_body.png'))
+    enemy_body = convert_to_dark(player_body)
+    enemy_body.save(os.path.join(ENEMY_DIR, 'enemy_body.png'))
+    print(f"Created enemy_body.png ({enemy_body.size})")
+    return enemy_body
+
+
+def create_enemy_head():
+    """Create enemy head sprite (black with white skull)."""
+    player_head = Image.open(os.path.join(PLAYER_DIR, 'player_head.png'))
+    enemy_head = convert_to_dark(player_head)
+    enemy_head = draw_simple_skull_on_head(enemy_head)
+    enemy_head.save(os.path.join(ENEMY_DIR, 'enemy_head.png'))
+    print(f"Created enemy_head.png ({enemy_head.size})")
+    return enemy_head
+
+
+def create_enemy_arms():
+    """Create enemy arm sprites (black with skull on forearm)."""
+    # Left arm
+    player_left_arm = Image.open(os.path.join(PLAYER_DIR, 'player_left_arm.png'))
+    enemy_left_arm = convert_to_dark(player_left_arm)
+    enemy_left_arm = draw_simple_skull_on_arm(enemy_left_arm, is_left=True)
+    enemy_left_arm.save(os.path.join(ENEMY_DIR, 'enemy_left_arm.png'))
+    print(f"Created enemy_left_arm.png ({enemy_left_arm.size})")
+
+    # Right arm
+    player_right_arm = Image.open(os.path.join(PLAYER_DIR, 'player_right_arm.png'))
+    enemy_right_arm = convert_to_dark(player_right_arm)
+    enemy_right_arm = draw_simple_skull_on_arm(enemy_right_arm, is_left=False)
+    enemy_right_arm.save(os.path.join(ENEMY_DIR, 'enemy_right_arm.png'))
+    print(f"Created enemy_right_arm.png ({enemy_right_arm.size})")
+
+    return enemy_left_arm, enemy_right_arm
+
+
+def create_combined_preview(body, head, left_arm, right_arm):
+    """Create a combined preview image showing all enemy parts assembled."""
+    # Use same dimensions as player combined preview
+    preview_width = 64
+    preview_height = 64
+
+    preview = Image.new('RGBA', (preview_width, preview_height), (0, 0, 0, 0))
+
+    # Center point for assembly
+    cx, cy = 32, 32
+
+    # Paste body (positioned at center) - offset similar to Player.tscn (-4, 0)
+    body_x = cx - body.width // 2 - 4
+    body_y = cy - body.height // 2
+    preview.paste(body, (body_x, body_y), body)
+
+    # Paste head (above body) - offset similar to Player.tscn (-6, -2)
+    head_x = cx - head.width // 2 - 6
+    head_y = cy - body.height // 2 - head.height // 2 - 2
+    preview.paste(head, (head_x, head_y), head)
+
+    # Paste left arm - offset similar to Player.tscn (24, 6)
+    left_arm_x = cx + 24 - left_arm.width // 2
+    left_arm_y = cy + 6 - left_arm.height // 2
+    preview.paste(left_arm, (left_arm_x, left_arm_y), left_arm)
+
+    # Paste right arm - offset similar to Player.tscn (-2, 6)
+    right_arm_x = cx - 2 - right_arm.width // 2
+    right_arm_y = cy + 6 - right_arm.height // 2
+    preview.paste(right_arm, (right_arm_x, right_arm_y), right_arm)
+
+    preview.save(os.path.join(ENEMY_DIR, 'enemy_combined_preview.png'))
+    print(f"Created enemy_combined_preview.png ({preview.size})")
+    return preview
+
+
+def main():
+    print("Creating enemy sprites based on player sprites...")
+    print(f"Player sprites from: {PLAYER_DIR}")
+    print(f"Enemy sprites to: {ENEMY_DIR}")
+    print()
+
+    body = create_enemy_body()
+    head = create_enemy_head()
+    left_arm, right_arm = create_enemy_arms()
+    create_combined_preview(body, head, left_arm, right_arm)
+
+    print("\nAll enemy sprites created successfully!")
+
+
+if __name__ == '__main__':
+    main()
diff --git a/scenes/objects/Enemy.tscn b/scenes/objects/Enemy.tscn
index 0ecd4e08..245d1dd0 100644
--- a/scenes/objects/Enemy.tscn
+++ b/scenes/objects/Enemy.tscn
@@ -1,11 +1,12 @@
-[gd_scene load_steps=6 format=3 uid="uid://cx5m8np6u3bwd"]
+[gd_scene load_steps=10 format=3 uid="uid://cx5m8np6u3bwd"]
 
 [ext_resource type="Script" path="res://scripts/objects/enemy.gd" id="1_enemy"]
 [ext_resource type="Script" path="res://scripts/objects/hit_area.gd" id="2_hit_area"]
 [ext_resource type="Texture2D" path="res://assets/sprites/weapons/m16_rifle_topdown.png" id="3_rifle_sprite"]
-
-[sub_resource type="PlaceholderTexture2D" id="PlaceholderTexture2D_enemy"]
-size = Vector2(48, 48)
+[ext_resource type="Texture2D" path="res://assets/sprites/characters/enemy/enemy_body.png" id="4_body"]
+[ext_resource type="Texture2D" path="res://assets/sprites/characters/enemy/enemy_head.png" id="5_head"]
+[ext_resource type="Texture2D" path="res://assets/sprites/characters/enemy/enemy_left_arm.png" id="6_left_arm"]
+[ext_resource type="Texture2D" path="res://assets/sprites/characters/enemy/enemy_right_arm.png" id="7_right_arm"]
 
 [sub_resource type="CircleShape2D" id="CircleShape2D_enemy"]
 radius = 24.0
@@ -15,12 +16,33 @@ collision_layer = 2
 collision_mask = 4
 script = ExtResource("1_enemy")
 
-[node name="Sprite2D" type="Sprite2D" parent="."]
-modulate = Color(0.9, 0.2, 0.2, 1)
-texture = SubResource("PlaceholderTexture2D_enemy")
+[node name="EnemyModel" type="Node2D" parent="."]
 
-[node name="WeaponSprite" type="Sprite2D" parent="."]
+[node name="Body" type="Sprite2D" parent="EnemyModel"]
 z_index = 1
+position = Vector2(-4, 0)
+texture = ExtResource("4_body")
+
+[node name="LeftArm" type="Sprite2D" parent="EnemyModel"]
+z_index = 4
+position = Vector2(24, 6)
+texture = ExtResource("6_left_arm")
+
+[node name="RightArm" type="Sprite2D" parent="EnemyModel"]
+z_index = 4
+position = Vector2(-2, 6)
+texture = ExtResource("7_right_arm")
+
+[node name="Head" type="Sprite2D" parent="EnemyModel"]
+z_index = 3
+position = Vector2(-6, -2)
+texture = ExtResource("5_head")
+
+[node name="WeaponMount" type="Node2D" parent="EnemyModel"]
+position = Vector2(0, 6)
+
+[node name="WeaponSprite" type="Sprite2D" parent="EnemyModel/WeaponMount"]
+z_index = 2
 texture = ExtResource("3_rifle_sprite")
 offset = Vector2(20, 0)
 
diff --git a/scripts/characters/player.gd b/scripts/characters/player.gd
index d658beb6..96427583 100644
--- a/scripts/characters/player.gd
+++ b/scripts/characters/player.gd
@@ -398,17 +398,24 @@ func _update_player_model_rotation() -> void:
 	# Calculate target rotation angle
 	var target_angle := aim_direction.angle()
 
-	# Apply rotation to the player model
-	_player_model.rotation = target_angle
-
 	# Handle sprite flipping for left/right aim
 	# When aiming left (angle > 90° or < -90°), flip vertically to avoid upside-down appearance
 	var aiming_left := absf(target_angle) > PI / 2
 
-	# Flip the player model vertically when aiming left
+	# Apply rotation to the player model using GLOBAL rotation.
+	# IMPORTANT: We use global_rotation instead of (local) rotation because the Player
+	# CharacterBody2D node may also have its own rotation (e.g., during grenade throws).
+	# Using global_rotation ensures the PlayerModel's visual direction is set in world
+	# coordinates, independent of any parent rotation.
+	#
+	# When we flip the model vertically (negative scale.y), we must NEGATE the rotation
+	# angle to compensate. This is because a negative Y scale mirrors the coordinate
+	# system, which inverts the effect of rotation.
 	if aiming_left:
+		_player_model.global_rotation = -target_angle
 		_player_model.scale = Vector2(player_model_scale, -player_model_scale)
 	else:
+		_player_model.global_rotation = target_angle
 		_player_model.scale = Vector2(player_model_scale, player_model_scale)
 
 
diff --git a/scripts/objects/enemy.gd b/scripts/objects/enemy.gd
index 2e6b14af..9372f25d 100644
--- a/scripts/objects/enemy.gd
+++ b/scripts/objects/enemy.gd
@@ -163,6 +163,16 @@ enum BehaviorMode {
 ## This prevents pre-firing at players who are at cover edges.
 @export var lead_prediction_visibility_threshold: float = 0.6
 
+## Walking animation speed multiplier - higher = faster leg cycle.
+@export var walk_anim_speed: float = 12.0
+
+## Walking animation intensity - higher = more pronounced movement.
+@export var walk_anim_intensity: float = 1.0
+
+## Scale multiplier for the enemy model (body, head, arms).
+## Default is 1.3 to match the player size.
+@export var enemy_model_scale: float = 1.3
+
 ## Signal emitted when the enemy is hit.
 signal hit
 
@@ -194,11 +204,23 @@ signal ammo_depleted
 ## 23 degrees ≈ 0.4014 radians.
 const PLAYER_DISTRACTION_ANGLE: float = 0.4014
 
-## Reference to the sprite for color changes.
-@onready var _sprite: Sprite2D = $Sprite2D
+## Reference to the enemy model node containing all sprites.
+@onready var _enemy_model: Node2D = $EnemyModel
+
+## References to individual sprite parts for color changes and animation.
+@onready var _body_sprite: Sprite2D = $EnemyModel/Body
+@onready var _head_sprite: Sprite2D = $EnemyModel/Head
+@onready var _left_arm_sprite: Sprite2D = $EnemyModel/LeftArm
+@onready var _right_arm_sprite: Sprite2D = $EnemyModel/RightArm
+
+## Legacy reference for compatibility (points to body sprite).
+@onready var _sprite: Sprite2D = $EnemyModel/Body
 
 ## Reference to the weapon sprite for visual rotation.
-@onready var _weapon_sprite: Sprite2D = $WeaponSprite
+@onready var _weapon_sprite: Sprite2D = $EnemyModel/WeaponMount/WeaponSprite
+
+## Reference to weapon mount for animation.
+@onready var _weapon_mount: Node2D = $EnemyModel/WeaponMount
 
 ## RayCast2D for line of sight detection.
 @onready var _raycast: RayCast2D = $RayCast2D
@@ -222,6 +244,18 @@ const PLAYER_DISTRACTION_ANGLE: float = 0.4014
 var _original_hit_area_layer: int = 0
 var _original_hit_area_mask: int = 0
 
+## Walking animation time accumulator.
+var _walk_anim_time: float = 0.0
+
+## Whether the enemy is currently walking (for animation state).
+var _is_walking: bool = false
+
+## Base positions for body parts (stored on ready for animation offsets).
+var _base_body_pos: Vector2 = Vector2.ZERO
+var _base_head_pos: Vector2 = Vector2.ZERO
+var _base_left_arm_pos: Vector2 = Vector2.ZERO
+var _base_right_arm_pos: Vector2 = Vector2.ZERO
+
 ## Wall detection raycasts for obstacle avoidance (created at runtime).
 var _wall_raycasts: Array[RayCast2D] = []
 
@@ -608,6 +642,20 @@ func _ready() -> void:
 	if bullet_scene == null:
 		bullet_scene = preload("res://scenes/projectiles/Bullet.tscn")
 
+	# Initialize walking animation base positions
+	if _body_sprite:
+		_base_body_pos = _body_sprite.position
+	if _head_sprite:
+		_base_head_pos = _head_sprite.position
+	if _left_arm_sprite:
+		_base_left_arm_pos = _left_arm_sprite.position
+	if _right_arm_sprite:
+		_base_right_arm_pos = _right_arm_sprite.position
+
+	# Apply scale to enemy model for larger appearance (same as player)
+	if _enemy_model:
+		_enemy_model.scale = Vector2(enemy_model_scale, enemy_model_scale)
+
 
 ## Initialize health with random value between min and max.
 func _initialize_health() -> void:
@@ -961,7 +1009,15 @@ func _physics_process(delta: float) -> void:
 	_update_goap_state()
 	_update_suppression(delta)
 
-	# Process AI state machine
+	# Update enemy model rotation BEFORE processing AI state (which may shoot).
+	# This ensures the weapon is correctly positioned when bullets are created.
+	# Note: We don't call _update_weapon_sprite_rotation() anymore because:
+	# 1. The EnemyModel rotation already rotates the weapon correctly
+	# 2. The previous _update_weapon_sprite_rotation() was using the Enemy's rotation
+	#    instead of EnemyModel's rotation, causing the weapon to be offset by 90 degrees
+	_update_enemy_model_rotation()
+
+	# Process AI state machine (may trigger shooting)
 	_process_ai_state(delta)
 
 	# Update debug label if enabled
@@ -971,8 +1027,8 @@ func _physics_process(delta: float) -> void:
 	if debug_label_enabled:
 		queue_redraw()
 
-	# Update weapon sprite rotation to match enemy aim direction
-	_update_weapon_sprite_rotation()
+	# Update walking animation based on movement
+	_update_walk_animation(delta)
 
 	move_and_slide()
 
@@ -994,6 +1050,187 @@ func _update_goap_state() -> void:
 	_goap_world_state["player_distracted"] = _is_player_distracted()
 
 
+## Updates the enemy model rotation to face the aim/movement direction.
+## The enemy model (body, head, arms) rotates to follow the direction of movement or aim.
+## Note: Enemy sprites face RIGHT (0 radians), same as player sprites.
+##
+## IMPORTANT: When aiming at the player, we calculate the direction from the WEAPON position
+## to the player, not from the enemy center. This ensures the weapon barrel actually points
+## at the player, accounting for the weapon's offset from the enemy center.
+func _update_enemy_model_rotation() -> void:
+	if not _enemy_model:
+		return
+
+	# Determine the direction to face:
+	# - If can see player, face the player (simple direction from enemy center)
+	# - Otherwise, face the movement direction
+	#
+	# NOTE: We use simple center-to-player direction, NOT offset-compensated direction.
+	# This ensures the weapon visually points in the same direction as bullets fly.
+	# The bullets are fired from the muzzle toward the target, and the muzzle is
+	# positioned along the direction the model faces.
+	var face_direction: Vector2
+
+	if _player != null and _can_see_player:
+		# Simple direction from enemy center to player (like player character does)
+		face_direction = (_player.global_position - global_position).normalized()
+	elif velocity.length_squared() > 1.0:
+		# Face movement direction
+		face_direction = velocity.normalized()
+	else:
+		# Keep current rotation
+		return
+
+	# Calculate target rotation angle
+	# Enemy sprites face RIGHT (same as player sprites, 0 radians)
+	var target_angle := face_direction.angle()
+
+	# Handle sprite flipping for left/right aim
+	# When aiming left (angle > 90° or < -90°), flip vertically to avoid upside-down appearance
+	var aiming_left := absf(target_angle) > PI / 2
+
+	# Apply rotation to the enemy model using GLOBAL rotation.
+	# IMPORTANT: We use global_rotation instead of (local) rotation because the Enemy
+	# CharacterBody2D node may also have its own rotation (for aiming/turning). Using
+	# global_rotation ensures the EnemyModel's visual direction is set in world coordinates,
+	# independent of any parent rotation.
+	#
+	# When we flip the model vertically (negative scale.y), we must NEGATE the rotation
+	# angle to compensate. This is because a negative Y scale mirrors the coordinate
+	# system, which inverts the effect of rotation.
+	#
+	# Example: To face angle -153° (up-left):
+	# - Without flip: global_rotation = -153°, scale.y = 1.3  -> faces up-left ✓
+	# - With flip but no angle adjustment: global_rotation = -153°, scale.y = -1.3 -> faces down-right ✗
+	# - With flip AND angle negation: global_rotation = 153°, scale.y = -1.3 -> faces up-left ✓
+	if aiming_left:
+		_enemy_model.global_rotation = -target_angle
+		_enemy_model.scale = Vector2(enemy_model_scale, -enemy_model_scale)
+	else:
+		_enemy_model.global_rotation = target_angle
+		_enemy_model.scale = Vector2(enemy_model_scale, enemy_model_scale)
+
+
+## DEPRECATED: This function is no longer used.
+##
+## Previously used to calculate an aim direction that would compensate for the weapon's
+## offset from the enemy center. This caused issues because:
+## 1. The model rotation was different from the bullet direction
+## 2. The weapon would visually point in a different direction than bullets fly
+##
+## The new approach is simpler:
+## 1. Model faces the player (center-to-center direction)
+## 2. Bullets spawn from muzzle and fly FROM MUZZLE TO TARGET
+## 3. This ensures the weapon visually points where bullets go
+##
+## Kept for reference in case the iterative offset approach is needed elsewhere.
+##
+## @param target_pos: The position to aim at (typically the player's position).
+## @return: The direction vector the model should face for the weapon to point at target.
+func _calculate_aim_direction_from_weapon(target_pos: Vector2) -> Vector2:
+	# WeaponMount is at local position (0, 6) in EnemyModel
+	# This offset needs to be accounted for when calculating aim direction
+	var weapon_mount_local := Vector2(0, 6)
+
+	# Start with a rough estimate: direction from enemy center to target
+	var rough_direction := (target_pos - global_position)
+	var rough_distance := rough_direction.length()
+
+	# For distant targets, the offset error is negligible - use simple calculation
+	# threshold is ~3x the weapon offset to avoid unnecessary iteration
+	if rough_distance > 25.0 * enemy_model_scale:
+		return rough_direction.normalized()
+
+	# For close targets, iterate to find the correct rotation
+	# Start with the rough direction
+	var current_direction := rough_direction.normalized()
+
+	# Iterate to refine the aim direction (2 iterations is usually enough)
+	for _i in range(2):
+		var estimated_angle := current_direction.angle()
+
+		# Determine if we would flip (affects how weapon offset transforms)
+		var would_flip := absf(estimated_angle) > PI / 2
+
+		# Calculate weapon position with this estimated rotation
+		var weapon_offset_world: Vector2
+		if would_flip:
+			# When flipped, scale.y is negative, which affects the Y component of the offset
+			# Transform: scale then rotate
+			var scaled := Vector2(weapon_mount_local.x * enemy_model_scale, weapon_mount_local.y * -enemy_model_scale)
+			weapon_offset_world = scaled.rotated(estimated_angle)
+		else:
+			var scaled := weapon_mount_local * enemy_model_scale
+			weapon_offset_world = scaled.rotated(estimated_angle)
+
+		var weapon_global_pos := global_position + weapon_offset_world
+
+		# Calculate new direction from weapon to target
+		var new_direction := (target_pos - weapon_global_pos)
+		if new_direction.length_squared() < 0.01:
+			# Target is at weapon position, keep current direction
+			break
+		current_direction = new_direction.normalized()
+
+	return current_direction
+
+
+## Updates the walking animation based on enemy movement state.
+## Creates a natural bobbing motion for body parts during movement.
+## @param delta: Time since last frame.
+func _update_walk_animation(delta: float) -> void:
+	var is_moving := velocity.length() > 10.0
+
+	if is_moving:
+		# Accumulate animation time based on movement speed
+		# Use combat_move_speed as max for faster walk animation during combat
+		var max_speed := maxf(move_speed, combat_move_speed)
+		var speed_factor := velocity.length() / max_speed
+		_walk_anim_time += delta * walk_anim_speed * speed_factor
+		_is_walking = true
+
+		# Calculate animation offsets using sine waves
+		# Body bobs up and down (frequency = 2x for double step)
+		var body_bob := sin(_walk_anim_time * 2.0) * 1.5 * walk_anim_intensity
+
+		# Head bobs slightly less than body (dampened)
+		var head_bob := sin(_walk_anim_time * 2.0) * 0.8 * walk_anim_intensity
+
+		# Arms swing opposite to each other (alternating)
+		var arm_swing := sin(_walk_anim_time) * 3.0 * walk_anim_intensity
+
+		# Apply offsets to sprites
+		if _body_sprite:
+			_body_sprite.position = _base_body_pos + Vector2(0, body_bob)
+
+		if _head_sprite:
+			_head_sprite.position = _base_head_pos + Vector2(0, head_bob)
+
+		if _left_arm_sprite:
+			# Left arm swings forward/back (y-axis in top-down)
+			_left_arm_sprite.position = _base_left_arm_pos + Vector2(arm_swing, 0)
+
+		if _right_arm_sprite:
+			# Right arm swings opposite to left arm
+			_right_arm_sprite.position = _base_right_arm_pos + Vector2(-arm_swing, 0)
+	else:
+		# Return to idle pose smoothly
+		if _is_walking:
+			_is_walking = false
+			_walk_anim_time = 0.0
+
+		# Interpolate back to base positions
+		var lerp_speed := 10.0 * delta
+		if _body_sprite:
+			_body_sprite.position = _body_sprite.position.lerp(_base_body_pos, lerp_speed)
+		if _head_sprite:
+			_head_sprite.position = _head_sprite.position.lerp(_base_head_pos, lerp_speed)
+		if _left_arm_sprite:
+			_left_arm_sprite.position = _left_arm_sprite.position.lerp(_base_left_arm_pos, lerp_speed)
+		if _right_arm_sprite:
+			_right_arm_sprite.position = _right_arm_sprite.position.lerp(_base_right_arm_pos, lerp_speed)
+
+
 ## Update suppression state.
 func _update_suppression(delta: float) -> void:
 	# Clean up destroyed bullets from tracking
@@ -2093,7 +2330,12 @@ func _shoot_with_inaccuracy() -> void:
 	if not _should_shoot_at_target(target_position):
 		return
 
-	var direction := (target_position - global_position).normalized()
+	# Calculate bullet spawn position at weapon muzzle first
+	var weapon_forward := _get_weapon_forward_direction()
+	var bullet_spawn_pos := _get_bullet_spawn_position(weapon_forward)
+
+	# Calculate base direction FROM MUZZLE TO TARGET
+	var direction := (target_position - bullet_spawn_pos).normalized()
 
 	# Add inaccuracy spread
 	var inaccuracy_angle := randf_range(-RETREAT_INACCURACY_SPREAD, RETREAT_INACCURACY_SPREAD)
@@ -2106,12 +2348,11 @@ func _shoot_with_inaccuracy() -> void:
 
 	# Create and fire bullet
 	var bullet := bullet_scene.instantiate()
-	bullet.global_position = global_position + direction * bullet_spawn_offset
+	bullet.global_position = bullet_spawn_pos
 	bullet.direction = direction
 	bullet.shooter_id = get_instance_id()
 	# Set shooter position for distance-based penetration calculation
-	# Direct assignment - the bullet script defines this property
-	bullet.shooter_position = global_position
+	bullet.shooter_position = bullet_spawn_pos
 	get_tree().current_scene.add_child(bullet)
 
 	# Play sounds
@@ -2144,7 +2385,13 @@ func _shoot_burst_shot() -> void:
 		return
 
 	var target_position := _player.global_position
-	var direction := (target_position - global_position).normalized()
+
+	# Calculate bullet spawn position at weapon muzzle first
+	var weapon_forward := _get_weapon_forward_direction()
+	var bullet_spawn_pos := _get_bullet_spawn_position(weapon_forward)
+
+	# Calculate base direction FROM MUZZLE TO TARGET
+	var direction := (target_position - bullet_spawn_pos).normalized()
 
 	# Apply arc offset for burst spread
 	direction = direction.rotated(_retreat_burst_angle_offset)
@@ -2160,12 +2407,11 @@ func _shoot_burst_shot() -> void:
 
 	# Create and fire bullet
 	var bullet := bullet_scene.instantiate()
-	bullet.global_position = global_position + direction * bullet_spawn_offset
+	bullet.global_position = bullet_spawn_pos
 	bullet.direction = direction
 	bullet.shooter_id = get_instance_id()
 	# Set shooter position for distance-based penetration calculation
-	# Direct assignment - the bullet script defines this property
-	bullet.shooter_position = global_position
+	bullet.shooter_position = bullet_spawn_pos
 	get_tree().current_scene.add_child(bullet)
 
 	# Play sounds
@@ -2583,13 +2829,15 @@ func _is_firing_line_clear_of_friendlies(target_position: Vector2) -> bool:
 	if not enable_friendly_fire_avoidance:
 		return true
 
-	var direction := (target_position - global_position).normalized()
-	var distance := global_position.distance_to(target_position)
+	# Get actual muzzle position for accurate raycast
+	var weapon_forward := _get_weapon_forward_direction()
+	var muzzle_pos := _get_bullet_spawn_position(weapon_forward)
+	var distance := muzzle_pos.distance_to(target_position)
 
 	# Use direct space state to check if any enemies are in the firing line
 	var space_state := get_world_2d().direct_space_state
 	var query := PhysicsRayQueryParameters2D.new()
-	query.from = global_position + direction * bullet_spawn_offset  # Start from bullet spawn point
+	query.from = muzzle_pos  # Start from actual muzzle position
 	query.to = target_position
 	query.collision_mask = 2  # Only check enemies (layer 2)
 	query.exclude = [get_rid()]  # Exclude self using RID
@@ -2601,7 +2849,7 @@ func _is_firing_line_clear_of_friendlies(target_position: Vector2) -> bool:
 
 	# Check if the hit position is before the target
 	var hit_position: Vector2 = result["position"]
-	var distance_to_hit := global_position.distance_to(hit_position)
+	var distance_to_hit := muzzle_pos.distance_to(hit_position)
 
 	if distance_to_hit < distance - 20.0:  # 20 pixel tolerance
 		_log_debug("Friendly in firing line at distance %0.1f (target at %0.1f)" % [distance_to_hit, distance])
@@ -2613,13 +2861,15 @@ func _is_firing_line_clear_of_friendlies(target_position: Vector2) -> bool:
 ## Check if a bullet fired at the target position would be blocked by cover/obstacles.
 ## Returns true if the shot would likely hit the target, false if blocked by cover.
 func _is_shot_clear_of_cover(target_position: Vector2) -> bool:
-	var direction := (target_position - global_position).normalized()
-	var distance := global_position.distance_to(target_position)
+	# Get actual muzzle position for accurate raycast
+	var weapon_forward := _get_weapon_forward_direction()
+	var muzzle_pos := _get_bullet_spawn_position(weapon_forward)
+	var distance := muzzle_pos.distance_to(target_position)
 
 	# Use direct space state to check if obstacles block the shot
 	var space_state := get_world_2d().direct_space_state
 	var query := PhysicsRayQueryParameters2D.new()
-	query.from = global_position + direction * bullet_spawn_offset  # Start from bullet spawn point
+	query.from = muzzle_pos  # Start from actual muzzle position
 	query.to = target_position
 	query.collision_mask = 4  # Only check obstacles (layer 3)
 
@@ -2630,7 +2880,7 @@ func _is_shot_clear_of_cover(target_position: Vector2) -> bool:
 
 	# Check if the obstacle is before the target position
 	var hit_position: Vector2 = result["position"]
-	var distance_to_hit := global_position.distance_to(hit_position)
+	var distance_to_hit := muzzle_pos.distance_to(hit_position)
 
 	if distance_to_hit < distance - 10.0:  # 10 pixel tolerance
 		_log_debug("Shot blocked by cover at distance %0.1f (target at %0.1f)" % [distance_to_hit, distance])
@@ -2725,8 +2975,9 @@ func _find_sidestep_direction_for_clear_shot(direction_to_player: Vector2) -> Ve
 func _should_shoot_at_target(target_position: Vector2) -> bool:
 	# Check if the immediate path to bullet spawn is clear
 	# This prevents shooting into walls the enemy is flush against
-	var direction := (target_position - global_position).normalized()
-	if not _is_bullet_spawn_clear(direction):
+	# Use weapon forward direction since that's where bullets actually spawn and travel
+	var weapon_direction := _get_weapon_forward_direction()
+	if not _is_bullet_spawn_clear(weapon_direction):
 		return false
 
 	# Check if friendlies are in the way
@@ -3397,23 +3648,39 @@ func _shoot() -> void:
 	if not _should_shoot_at_target(target_position):
 		return
 
-	var direction := (target_position - global_position).normalized()
+	# Calculate bullet spawn position at weapon muzzle first
+	# We need this to calculate the correct bullet direction
+	var weapon_forward := _get_weapon_forward_direction()
+	var bullet_spawn_pos := _get_bullet_spawn_position(weapon_forward)
+
+	# Calculate bullet direction FROM MUZZLE TO TARGET
+	# This ensures bullets actually fly toward the target, not just in the model's facing direction
+	# The model faces the player (center-to-center), and bullets fly from muzzle to target
+	var direction := (target_position - bullet_spawn_pos).normalized()
 
 	# Create bullet instance
 	var bullet := bullet_scene.instantiate()
+	bullet.global_position = bullet_spawn_pos
 
-	# Set bullet position with offset in shoot direction
-	bullet.global_position = global_position + direction * bullet_spawn_offset
-
-	# Set bullet direction
+	# Debug logging for weapon geometry analysis
+	if debug_logging:
+		var weapon_visual_pos := _weapon_sprite.global_position if _weapon_sprite else Vector2.ZERO
+		var model_rot := _enemy_model.rotation if _enemy_model else 0.0
+		var model_scale := _enemy_model.scale if _enemy_model else Vector2.ONE
+		_log_debug("SHOOT: enemy_pos=%v, target_pos=%v" % [global_position, target_position])
+		_log_debug("  model_rotation=%.2f rad (%.1f deg), model_scale=%v" % [model_rot, rad_to_deg(model_rot), model_scale])
+		_log_debug("  weapon_node_pos=%v, muzzle=%v" % [weapon_visual_pos, bullet_spawn_pos])
+		_log_debug("  direction=%v (angle=%.1f deg) - FROM MUZZLE TO TARGET" % [direction, rad_to_deg(direction.angle())])
+
+	# Set bullet direction (from muzzle to target)
 	bullet.direction = direction
 
 	# Set shooter ID to identify this enemy as the source
 	# This prevents enemies from detecting their own bullets in the threat sphere
 	bullet.shooter_id = get_instance_id()
 	# Set shooter position for distance-based penetration calculation
-	# Direct assignment - the bullet script defines this property
-	bullet.shooter_position = global_position
+	# Use the bullet spawn position (weapon muzzle) for accurate distance calculation
+	bullet.shooter_position = bullet_spawn_pos
 
 	# Add bullet to the scene tree
 	get_tree().current_scene.add_child(bullet)
@@ -3640,10 +3907,10 @@ func on_hit_with_bullet_info(hit_direction: Vector2, caliber_data: Resource, has
 
 ## Shows a brief flash effect when hit.
 func _show_hit_flash() -> void:
-	if not _sprite:
+	if not _enemy_model:
 		return
 
-	_sprite.modulate = hit_flash_color
+	_set_all_sprites_modulate(hit_flash_color)
 
 	await get_tree().create_timer(hit_flash_duration).timeout
 
@@ -3654,12 +3921,23 @@ func _show_hit_flash() -> void:
 
 ## Updates the sprite color based on current health percentage.
 func _update_health_visual() -> void:
-	if not _sprite:
-		return
-
 	# Interpolate color based on health percentage
 	var health_percent := _get_health_percent()
-	_sprite.modulate = full_health_color.lerp(low_health_color, 1.0 - health_percent)
+	var color := full_health_color.lerp(low_health_color, 1.0 - health_percent)
+	_set_all_sprites_modulate(color)
+
+
+## Sets the modulate color on all enemy sprite parts.
+## @param color: The color to apply to all sprites.
+func _set_all_sprites_modulate(color: Color) -> void:
+	if _body_sprite:
+		_body_sprite.modulate = color
+	if _head_sprite:
+		_head_sprite.modulate = color
+	if _left_arm_sprite:
+		_left_arm_sprite.modulate = color
+	if _right_arm_sprite:
+		_right_arm_sprite.modulate = color
 
 
 ## Returns the current health as a percentage (0.0 to 1.0).
@@ -3669,6 +3947,66 @@ func _get_health_percent() -> float:
 	return float(_current_health) / float(_max_health)
 
 
+## Calculates the bullet spawn position at the weapon's muzzle.
+## The muzzle is positioned relative to the weapon mount, offset in the weapon's forward direction.
+## @param direction: The normalized direction the bullet will travel (used for fallback only).
+## @return: The global position where the bullet should spawn.
+func _get_bullet_spawn_position(_direction: Vector2) -> Vector2:
+	# The rifle sprite (m16_rifle_topdown.png) is 64px long with offset (20, 0).
+	# The muzzle (right edge in local space) is at: offset.x + sprite_width/2 = 20 + 32 = 52px
+	# from the WeaponSprite node position.
+	var muzzle_local_offset := 52.0  # Distance from node to muzzle in local +X direction
+	if _weapon_sprite and _enemy_model:
+		# Get the weapon's VISUAL forward direction from global_transform.
+		# IMPORTANT: We use global_transform.x because it correctly accounts for the
+		# vertical flip (scale.y negative) that happens when aiming left. The flip
+		# affects where the muzzle visually appears, so we need the transformed direction.
+		# Using Vector2.from_angle(_enemy_model.rotation) would give incorrect results
+		# because it doesn't account for the scale flip.
+		var weapon_forward := _weapon_sprite.global_transform.x.normalized()
+		# Calculate muzzle offset accounting for enemy model scale
+		var scaled_muzzle_offset := muzzle_local_offset * enemy_model_scale
+		# Use weapon sprite's global position as base, then offset to reach the muzzle
+		var result := _weapon_sprite.global_position + weapon_forward * scaled_muzzle_offset
+		if debug_logging:
+			var angle_forward := Vector2.from_angle(_enemy_model.rotation)
+			_log_debug("  _get_bullet_spawn_position: visual_forward=%v vs angle_forward=%v" % [weapon_forward, angle_forward])
+			_log_debug("  muzzle_position=%v, weapon_pos=%v, offset=%.1f" % [result, _weapon_sprite.global_position, scaled_muzzle_offset])
+		return result
+	else:
+		# Fallback to old behavior if weapon sprite or enemy model not found
+		return global_position + _direction * bullet_spawn_offset
+
+
+## Returns the weapon's forward direction in world coordinates.
+## This is the direction the weapon barrel is visually pointing.
+##
+## NOTE: This is used to calculate the muzzle position, NOT the bullet direction.
+## The actual bullet direction is calculated in _shoot() as (target - muzzle).normalized()
+## to ensure bullets fly toward the target, not just in the model's facing direction.
+##
+## IMPORTANT: We use global_transform.x to get the actual visual forward direction.
+## This correctly accounts for the vertical flip (scale.y negative) that happens
+## when aiming left. The transform includes all parent transforms, so it gives
+## the true world-space direction the weapon is pointing.
+##
+## @returns: Normalized direction vector the weapon is visually pointing.
+func _get_weapon_forward_direction() -> Vector2:
+	if _weapon_sprite:
+		# Use the weapon sprite's global_transform.x for the true visual forward direction.
+		# This correctly handles the vertical flip case (scale.y negative) because
+		# global_transform includes all parent transforms including scale.
+		return _weapon_sprite.global_transform.x.normalized()
+	elif _enemy_model:
+		# Fallback to enemy model's transform if weapon sprite not available
+		return _enemy_model.global_transform.x.normalized()
+	else:
+		# Fallback: calculate direction to player
+		if _player and is_instance_valid(_player):
+			return (_player.global_position - global_position).normalized()
+		return Vector2.RIGHT  # Default fallback
+
+
 ## Updates the weapon sprite rotation to match the direction the enemy will shoot.
 ## This ensures the rifle visually points where bullets will travel.
 ## Also handles vertical flipping when aiming left to avoid upside-down appearance.
@@ -4057,10 +4395,11 @@ func _draw() -> void:
 		var to_player := _player.global_position - global_position
 		draw_line(Vector2.ZERO, to_player, color_to_player, 1.5)
 
-		# Draw bullet spawn point and check if blocked
-		var direction_to_player := to_player.normalized()
-		var spawn_point := direction_to_player * bullet_spawn_offset
-		if _is_bullet_spawn_clear(direction_to_player):
+		# Draw bullet spawn point (actual muzzle position) and check if blocked
+		var weapon_forward := _get_weapon_forward_direction()
+		var muzzle_global := _get_bullet_spawn_position(weapon_forward)
+		var spawn_point := muzzle_global - global_position  # Convert to local coordinates for draw
+		if _is_bullet_spawn_clear(weapon_forward):
 			draw_circle(spawn_point, 5.0, color_bullet_spawn)
 		else:
 			# Draw X for blocked spawn point
