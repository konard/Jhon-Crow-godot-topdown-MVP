[20:24:51] [INFO] ============================================================
[20:24:51] [INFO] GAME LOG STARTED
[20:24:51] [INFO] ============================================================
[20:24:51] [INFO] Timestamp: 2026-01-24T20:24:51
[20:24:51] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260124_202451.txt
[20:24:51] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
[20:24:51] [INFO] OS: Windows
[20:24:51] [INFO] Debug build: false
[20:24:51] [INFO] Engine version: 4.3-stable (official)
[20:24:51] [INFO] Project: Godot Top-Down Template
[20:24:51] [INFO] ------------------------------------------------------------
[20:24:51] [INFO] [GameManager] GameManager ready
[20:24:51] [INFO] [ScoreManager] ScoreManager ready
[20:24:51] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[20:24:51] [INFO] [ImpactEffects] Scenes loaded: DustEffect, BloodEffect, SparksEffect, BloodDecal
[20:24:51] [INFO] [ImpactEffects] ImpactEffectsManager ready - FULL VERSION with blood effects enabled
[20:24:51] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:24:51] [INFO] [PenultimateHit] Saturation shader loaded successfully
[20:24:51] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[20:24:51] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[20:24:51] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[20:24:51] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[20:24:51] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[20:24:51] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:24:51] [INFO] [LastChance] Last chance shader loaded successfully
[20:24:51] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[20:24:51] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[20:24:51] [INFO] [LastChance]   Sepia intensity: 0.70
[20:24:51] [INFO] [LastChance]   Brightness: 0.60
[20:24:51] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[20:24:51] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[20:24:51] [ENEMY] [Enemy1] Death animation component initialized
[20:24:51] [ENEMY] [Enemy2] Death animation component initialized
[20:24:51] [ENEMY] [Enemy3] Death animation component initialized
[20:24:51] [ENEMY] [Enemy4] Death animation component initialized
[20:24:51] [ENEMY] [Enemy5] Death animation component initialized
[20:24:51] [ENEMY] [Enemy6] Death animation component initialized
[20:24:51] [ENEMY] [Enemy7] Death animation component initialized
[20:24:51] [ENEMY] [Enemy8] Death animation component initialized
[20:24:51] [ENEMY] [Enemy9] Death animation component initialized
[20:24:51] [ENEMY] [Enemy10] Death animation component initialized
[20:24:51] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:24:51] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:24:51] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:24:51] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:24:51] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:24:51] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:24:51] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:24:51] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:24:51] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:24:51] [INFO] [ScoreManager] Level started with 10 enemies
[20:24:51] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[20:24:51] [ENEMY] [Enemy1] Registered as sound listener
[20:24:51] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:24:51] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[20:24:51] [ENEMY] [Enemy2] Registered as sound listener
[20:24:51] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:24:51] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[20:24:51] [ENEMY] [Enemy3] Registered as sound listener
[20:24:51] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:24:51] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[20:24:51] [ENEMY] [Enemy4] Registered as sound listener
[20:24:51] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:24:51] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[20:24:51] [ENEMY] [Enemy5] Registered as sound listener
[20:24:51] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:24:51] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[20:24:51] [ENEMY] [Enemy6] Registered as sound listener
[20:24:51] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:24:51] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[20:24:51] [ENEMY] [Enemy7] Registered as sound listener
[20:24:51] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 3, behavior: PATROL, player_found: yes
[20:24:51] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[20:24:51] [ENEMY] [Enemy8] Registered as sound listener
[20:24:51] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:24:51] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[20:24:51] [ENEMY] [Enemy9] Registered as sound listener
[20:24:51] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:24:51] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[20:24:51] [ENEMY] [Enemy10] Registered as sound listener
[20:24:51] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:24:51] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:24:51] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:24:51] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:24:51] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:24:51] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:24:51] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:24:51] [INFO] [LastChance] Found player: Player
[20:24:51] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:24:51] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:24:51] [INFO] [LastChance] Connected to player Died signal (C#)
[20:24:52] [INFO] [PauseMenu] Armory button pressed
[20:24:52] [INFO] [PauseMenu] Creating new armory menu instance
[20:24:52] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[20:24:52] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[20:24:52] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[20:24:52] [INFO] [PauseMenu] back_pressed signal exists on instance
[20:24:52] [INFO] [PauseMenu] back_pressed signal connected
[20:24:52] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[20:24:52] [INFO] [PauseMenu] _populate_weapon_grid method exists
[20:24:54] [INFO] [GameManager] Weapon selected: silenced_pistol
[20:24:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:24:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:24:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:24:54] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:24:54] [ENEMY] [Enemy1] Death animation component initialized
[20:24:54] [ENEMY] [Enemy2] Death animation component initialized
[20:24:54] [ENEMY] [Enemy3] Death animation component initialized
[20:24:54] [ENEMY] [Enemy4] Death animation component initialized
[20:24:54] [ENEMY] [Enemy5] Death animation component initialized
[20:24:54] [ENEMY] [Enemy6] Death animation component initialized
[20:24:54] [ENEMY] [Enemy7] Death animation component initialized
[20:24:54] [ENEMY] [Enemy8] Death animation component initialized
[20:24:54] [ENEMY] [Enemy9] Death animation component initialized
[20:24:54] [ENEMY] [Enemy10] Death animation component initialized
[20:24:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:24:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:24:54] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:24:54] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:24:54] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:24:54] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:24:54] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:24:54] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:24:54] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:24:54] [INFO] [ScoreManager] Level started with 10 enemies
[20:24:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:24:54] [ENEMY] [Enemy1] Registered as sound listener
[20:24:54] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:24:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:24:54] [ENEMY] [Enemy2] Registered as sound listener
[20:24:54] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:24:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:24:54] [ENEMY] [Enemy3] Registered as sound listener
[20:24:54] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:24:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:24:54] [ENEMY] [Enemy4] Registered as sound listener
[20:24:54] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:24:54] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:24:54] [ENEMY] [Enemy5] Registered as sound listener
[20:24:54] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:24:54] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:24:54] [ENEMY] [Enemy6] Registered as sound listener
[20:24:54] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:24:54] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:24:54] [ENEMY] [Enemy7] Registered as sound listener
[20:24:54] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:24:54] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:24:54] [ENEMY] [Enemy8] Registered as sound listener
[20:24:54] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:24:54] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:24:54] [ENEMY] [Enemy9] Registered as sound listener
[20:24:54] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:24:54] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:24:54] [ENEMY] [Enemy10] Registered as sound listener
[20:24:54] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:24:54] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:24:54] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:24:54] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:24:54] [INFO] [LastChance] Found player: Player
[20:24:54] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:24:54] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:24:54] [INFO] [LastChance] Connected to player Died signal (C#)
[20:24:54] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:24:54] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:24:54] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:25:03] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:03] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:03] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:25:03] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:25:03] [ENEMY] [Enemy1] Death animation component initialized
[20:25:03] [ENEMY] [Enemy2] Death animation component initialized
[20:25:03] [ENEMY] [Enemy3] Death animation component initialized
[20:25:03] [ENEMY] [Enemy4] Death animation component initialized
[20:25:03] [ENEMY] [Enemy5] Death animation component initialized
[20:25:03] [ENEMY] [Enemy6] Death animation component initialized
[20:25:03] [ENEMY] [Enemy7] Death animation component initialized
[20:25:03] [ENEMY] [Enemy8] Death animation component initialized
[20:25:03] [ENEMY] [Enemy9] Death animation component initialized
[20:25:03] [ENEMY] [Enemy10] Death animation component initialized
[20:25:03] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:25:03] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:25:03] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:25:03] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:25:03] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:25:03] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:25:03] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:25:03] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:25:03] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:25:03] [INFO] [ScoreManager] Level started with 10 enemies
[20:25:03] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:25:03] [ENEMY] [Enemy1] Registered as sound listener
[20:25:03] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:25:03] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:25:03] [ENEMY] [Enemy2] Registered as sound listener
[20:25:03] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:25:03] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:25:03] [ENEMY] [Enemy3] Registered as sound listener
[20:25:03] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:25:03] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:25:03] [ENEMY] [Enemy4] Registered as sound listener
[20:25:03] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:25:03] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:25:03] [ENEMY] [Enemy5] Registered as sound listener
[20:25:03] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:25:03] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:25:03] [ENEMY] [Enemy6] Registered as sound listener
[20:25:03] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:25:03] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:25:03] [ENEMY] [Enemy7] Registered as sound listener
[20:25:03] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:25:03] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:25:03] [ENEMY] [Enemy8] Registered as sound listener
[20:25:03] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:25:03] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:25:03] [ENEMY] [Enemy9] Registered as sound listener
[20:25:03] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:25:03] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:25:03] [ENEMY] [Enemy10] Registered as sound listener
[20:25:03] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:25:03] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:25:03] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:25:03] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:25:03] [INFO] [LastChance] Found player: Player
[20:25:03] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:25:03] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:25:03] [INFO] [LastChance] Connected to player Died signal (C#)
[20:25:03] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:25:03] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:25:03] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:25:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=311066363567, bullet_pos=(2476.25, 829.1163)
[20:25:05] [INFO] [Bullet] Using shooter_position, distance=2069.5009765625
[20:25:05] [INFO] [Bullet] Distance to wall: 2069.5009765625 (140.916126970878% of viewport)
[20:25:05] [INFO] [Bullet] Distance-based penetration chance: 21.8167746058244%
[20:25:05] [INFO] [Bullet] Caliber cannot penetrate walls
[20:25:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=311066363567, bullet_pos=(2463.319, 880.1807)
[20:25:05] [INFO] [Bullet] Using shooter_position, distance=2047.00244140625
[20:25:05] [INFO] [Bullet] Distance to wall: 2047.00244140625 (139.384160340931% of viewport)
[20:25:05] [INFO] [Bullet] Distance-based penetration chance: 22.1231679318138%
[20:25:05] [INFO] [Bullet] Penetration failed (distance roll)
[20:25:06] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:06] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:06] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:25:06] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:25:06] [ENEMY] [Enemy1] Death animation component initialized
[20:25:06] [ENEMY] [Enemy2] Death animation component initialized
[20:25:06] [ENEMY] [Enemy3] Death animation component initialized
[20:25:06] [ENEMY] [Enemy4] Death animation component initialized
[20:25:06] [ENEMY] [Enemy5] Death animation component initialized
[20:25:06] [ENEMY] [Enemy6] Death animation component initialized
[20:25:06] [ENEMY] [Enemy7] Death animation component initialized
[20:25:06] [ENEMY] [Enemy8] Death animation component initialized
[20:25:06] [ENEMY] [Enemy9] Death animation component initialized
[20:25:06] [ENEMY] [Enemy10] Death animation component initialized
[20:25:06] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:25:06] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:25:06] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:25:06] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:25:06] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:25:06] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:25:06] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:25:06] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:25:06] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:25:06] [INFO] [ScoreManager] Level started with 10 enemies
[20:25:06] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 31)
[20:25:06] [ENEMY] [Enemy1] Registered as sound listener
[20:25:06] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:25:06] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 32)
[20:25:06] [ENEMY] [Enemy2] Registered as sound listener
[20:25:06] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:25:06] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 33)
[20:25:06] [ENEMY] [Enemy3] Registered as sound listener
[20:25:06] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:25:06] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 34)
[20:25:06] [ENEMY] [Enemy4] Registered as sound listener
[20:25:06] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:25:06] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 35)
[20:25:06] [ENEMY] [Enemy5] Registered as sound listener
[20:25:06] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:25:06] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 36)
[20:25:06] [ENEMY] [Enemy6] Registered as sound listener
[20:25:06] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:25:06] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 37)
[20:25:06] [ENEMY] [Enemy7] Registered as sound listener
[20:25:06] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:25:06] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 38)
[20:25:06] [ENEMY] [Enemy8] Registered as sound listener
[20:25:06] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:25:06] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 39)
[20:25:06] [ENEMY] [Enemy9] Registered as sound listener
[20:25:06] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:25:06] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 40)
[20:25:06] [ENEMY] [Enemy10] Registered as sound listener
[20:25:06] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:25:06] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:25:06] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:25:06] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:25:06] [INFO] [LastChance] Found player: Player
[20:25:06] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:25:06] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:25:06] [INFO] [LastChance] Connected to player Died signal (C#)
[20:25:06] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:25:06] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:25:06] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:25:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:25:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:25:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.731, 1535.008), source=ENEMY (Enemy10), range=1469, listeners=40
[20:25:06] [INFO] [SoundPropagation] Cleaned up 30 invalid listeners
[20:25:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:25:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:25:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1139.423, 1516.307), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:25:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1107.906, 1496.302), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:25:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1077.232, 1475.026), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:07] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:25:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=458017999628, bullet_pos=(53.14801, 921.1365)
[20:25:07] [INFO] [Bullet] Using shooter_position, distance=1208.33337402344
[20:25:07] [INFO] [Bullet] Distance to wall: 1208.33337402344 (82.277641366406% of viewport)
[20:25:07] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:25:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=458017999628, bullet_pos=(46.85162, 857.2495)
[20:25:07] [INFO] [Bullet] Using shooter_position, distance=1208.33435058594
[20:25:07] [INFO] [Bullet] Distance to wall: 1208.33435058594 (82.2777078623423% of viewport)
[20:25:07] [INFO] [Bullet] Distance-based penetration chance: 50.676007493934%
[20:25:07] [INFO] [Bullet] Penetration failed (distance roll)
[20:25:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=458017999628, bullet_pos=(347.4098, 715.1977)
[20:25:07] [INFO] [Bullet] Using shooter_position, distance=1099.93322753906
[20:25:07] [INFO] [Bullet] Distance to wall: 1099.93322753906 (74.896476061992% of viewport)
[20:25:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=458017999628, bullet_pos=(43.06916, 793.3154)
[20:25:07] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[20:25:07] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[20:25:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=458017999628, bullet_pos=(502.3253, 865.3317)
[20:25:07] [INFO] [Bullet] Using shooter_position, distance=884.382080078125
[20:25:07] [INFO] [Bullet] Distance to wall: 884.382080078125 (60.219202067767% of viewport)
[20:25:07] [INFO] [Bullet] Distance-based penetration chance: 76.4109309209385%
[20:25:07] [INFO] [Bullet] Starting wall penetration at (502.3253, 865.3317)
[20:25:07] [INFO] [Bullet] Raycast backward hit penetrating body at distance 4.92087459564209
[20:25:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=458017999628, bullet_pos=(162.9709, 708.8482)
[20:25:07] [INFO] [Bullet] Using shooter_position, distance=1163.72119140625
[20:25:07] [INFO] [Bullet] Distance to wall: 1163.72119140625 (79.2399158174315% of viewport)
[20:25:07] [INFO] [Bullet] Max penetration distance exceeded: 60.2083320617676 >= 48
[20:25:07] [INFO] [Bullet] Body exited signal received for penetrating body
[20:25:07] [INFO] [Bullet] Exiting penetration at (549.1516, 910.7126) after traveling 60.2083320617676 pixels through wall
[20:25:07] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[20:25:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.067, 1441.411), shooter_id=458017999628, bullet_pos=(42.81244, 728.0042)
[20:25:07] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
[20:25:07] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
[20:25:07] [INFO] [LastChance] Threat detected: @Area2D@1089
[20:25:07] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:25:07] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:25:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.067, 1441.411), shooter_id=458017999628, bullet_pos=(330.9867, 458.4644)
[20:25:07] [INFO] [Bullet] Using shooter_position, distance=1199.27563476563
[20:25:07] [INFO] [Bullet] Distance to wall: 1199.27563476563 (81.6608832446277% of viewport)
[20:25:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.067, 1441.411), shooter_id=458017999628, bullet_pos=(497.8412, 595.2074)
[20:25:07] [INFO] [Bullet] Using shooter_position, distance=993.324829101563
[20:25:07] [INFO] [Bullet] Distance to wall: 993.324829101563 (67.6373141768239% of viewport)
[20:25:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.067, 1441.411), shooter_id=458017999628, bullet_pos=(379.0846, 700.2267)
[20:25:07] [INFO] [Bullet] Using shooter_position, distance=978.596740722656
[20:25:07] [INFO] [Bullet] Distance to wall: 978.596740722656 (66.6344515565377% of viewport)
[20:25:07] [INFO] [Bullet] Distance-based penetration chance: 68.9264731840394%
[20:25:07] [INFO] [Bullet] Penetration failed (distance roll)
[20:25:09] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[20:25:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(935.4274, 1394.386), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:09] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(932.9097, 1388.057), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:09] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:09] [INFO] [LastChance] Threat detected: Bullet
[20:25:09] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:25:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(929.741, 1383.727), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:09] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:09] [INFO] [LastChance] Threat detected: @Area2D@1103
[20:25:09] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:25:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(905.566, 1374.388), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:09] [ENEMY] [Enemy4] Heard gunshot at (905.566, 1374.388), source_type=1, intensity=0.01, distance=486
[20:25:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[20:25:09] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:25:09] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:25:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(875.6914, 1361.912), shooter_id=458017999628, bullet_pos=(57.71535, 786.6587)
[20:25:09] [INFO] [Bullet] Using shooter_position, distance=1000.00042724609
[20:25:09] [INFO] [Bullet] Distance to wall: 1000.00042724609 (68.0918679298276% of viewport)
[20:25:09] [INFO] [LastChance] Threat detected: @Area2D@1105
[20:25:09] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:25:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(880.8238, 1359.349), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[20:25:09] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:25:09] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:25:09] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:25:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(875.6914, 1361.912), shooter_id=458017999628, bullet_pos=(219.4558, 703.0264)
[20:25:09] [INFO] [Bullet] Using shooter_position, distance=929.932739257813
[20:25:09] [INFO] [Bullet] Distance to wall: 929.932739257813 (63.3208302115884% of viewport)
[20:25:09] [INFO] [LastChance] Threat detected: @Area2D@1107
[20:25:09] [INFO] [LastChance] Triggering last chance effect!
[20:25:09] [INFO] [LastChance] Starting last chance effect:
[20:25:09] [INFO] [LastChance]   - Time will be frozen (except player)
[20:25:09] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:25:09] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:25:09] [INFO] [LastChance]   - Brightness: 0.60
[20:25:09] [INFO] [LastChance] Pushed bullet @Area2D@1107 from distance 140.4 to 200.0
[20:25:09] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:25:09] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:25:09] [INFO] [LastChance] Skipping player node: Player
[20:25:09] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:25:09] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1088
[20:25:09] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1090
[20:25:09] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1092
[20:25:09] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1102
[20:25:09] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1104
[20:25:09] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1106
[20:25:09] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1108
[20:25:09] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1111
[20:25:09] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:25:09] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:25:09] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:25:10] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:10] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:10] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:25:10] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:25:10] [INFO] [LastChance] Ending last chance effect
[20:25:10] [INFO] [LastChance] All process modes restored
[20:25:10] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:25:10] [ENEMY] [Enemy1] Death animation component initialized
[20:25:10] [ENEMY] [Enemy2] Death animation component initialized
[20:25:10] [ENEMY] [Enemy3] Death animation component initialized
[20:25:10] [ENEMY] [Enemy4] Death animation component initialized
[20:25:10] [ENEMY] [Enemy5] Death animation component initialized
[20:25:10] [ENEMY] [Enemy6] Death animation component initialized
[20:25:10] [ENEMY] [Enemy7] Death animation component initialized
[20:25:10] [ENEMY] [Enemy8] Death animation component initialized
[20:25:10] [ENEMY] [Enemy9] Death animation component initialized
[20:25:10] [ENEMY] [Enemy10] Death animation component initialized
[20:25:10] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:25:10] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:25:10] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:25:10] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:25:10] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:25:10] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:25:10] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:25:10] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:25:10] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:25:10] [INFO] [ScoreManager] Level started with 10 enemies
[20:25:10] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:25:10] [ENEMY] [Enemy1] Registered as sound listener
[20:25:10] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:25:10] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:25:10] [ENEMY] [Enemy2] Registered as sound listener
[20:25:10] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:25:10] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:25:10] [ENEMY] [Enemy3] Registered as sound listener
[20:25:10] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:25:10] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:25:10] [ENEMY] [Enemy4] Registered as sound listener
[20:25:10] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:25:10] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:25:10] [ENEMY] [Enemy5] Registered as sound listener
[20:25:10] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:25:10] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:25:10] [ENEMY] [Enemy6] Registered as sound listener
[20:25:10] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:25:10] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:25:10] [ENEMY] [Enemy7] Registered as sound listener
[20:25:10] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:25:10] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:25:10] [ENEMY] [Enemy8] Registered as sound listener
[20:25:10] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:25:10] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:25:10] [ENEMY] [Enemy9] Registered as sound listener
[20:25:10] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:25:10] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:25:10] [ENEMY] [Enemy10] Registered as sound listener
[20:25:10] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:25:10] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:25:10] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:25:10] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:25:10] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:25:10] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:25:10] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:25:10] [INFO] [LastChance] Found player: Player
[20:25:10] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:25:10] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:25:10] [INFO] [LastChance] Connected to player Died signal (C#)
[20:25:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.07456, 972.704), shooter_id=684862736674, bullet_pos=(498.8591, 809.3945)
[20:25:16] [INFO] [Bullet] Using shooter_position, distance=449.500274658203
[20:25:16] [INFO] [Bullet] Distance to wall: 449.500274658203 (30.6073002595981% of viewport)
[20:25:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:25:16] [INFO] [Bullet] Caliber cannot penetrate walls
[20:25:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:16] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:25:16] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:25:16] [ENEMY] [Enemy1] Death animation component initialized
[20:25:16] [ENEMY] [Enemy2] Death animation component initialized
[20:25:16] [ENEMY] [Enemy3] Death animation component initialized
[20:25:16] [ENEMY] [Enemy4] Death animation component initialized
[20:25:16] [ENEMY] [Enemy5] Death animation component initialized
[20:25:16] [ENEMY] [Enemy6] Death animation component initialized
[20:25:16] [ENEMY] [Enemy7] Death animation component initialized
[20:25:16] [ENEMY] [Enemy8] Death animation component initialized
[20:25:16] [ENEMY] [Enemy9] Death animation component initialized
[20:25:16] [ENEMY] [Enemy10] Death animation component initialized
[20:25:16] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:25:16] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:25:16] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:25:16] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:25:16] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:25:16] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:25:16] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:25:16] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:25:16] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:25:16] [INFO] [ScoreManager] Level started with 10 enemies
[20:25:16] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:25:16] [ENEMY] [Enemy1] Registered as sound listener
[20:25:16] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:25:16] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:25:16] [ENEMY] [Enemy2] Registered as sound listener
[20:25:16] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:25:16] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:25:16] [ENEMY] [Enemy3] Registered as sound listener
[20:25:16] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:25:16] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:25:16] [ENEMY] [Enemy4] Registered as sound listener
[20:25:16] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:25:16] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:25:16] [ENEMY] [Enemy5] Registered as sound listener
[20:25:16] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:25:16] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:25:16] [ENEMY] [Enemy6] Registered as sound listener
[20:25:16] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:25:16] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:25:16] [ENEMY] [Enemy7] Registered as sound listener
[20:25:16] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:25:16] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:25:16] [ENEMY] [Enemy8] Registered as sound listener
[20:25:16] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:25:16] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:25:16] [ENEMY] [Enemy9] Registered as sound listener
[20:25:16] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:25:16] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:25:16] [ENEMY] [Enemy10] Registered as sound listener
[20:25:16] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:25:16] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:25:16] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:25:16] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:25:16] [INFO] [LastChance] Found player: Player
[20:25:16] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:25:16] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:25:16] [INFO] [LastChance] Connected to player Died signal (C#)
[20:25:16] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:25:16] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:25:16] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:25:20] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:25:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(565.229, 782.6271), source=ENEMY (Enemy3), range=1469, listeners=30
[20:25:20] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[20:25:20] [ENEMY] [Enemy2] Heard gunshot at (565.229, 782.6271), source_type=1, intensity=0.03, distance=285
[20:25:20] [ENEMY] [Enemy4] Heard gunshot at (565.229, 782.6271), source_type=1, intensity=0.04, distance=262
[20:25:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[20:25:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(501.2792, 805.887), shooter_id=1049498748966, bullet_pos=(501.2792, 805.887)
[20:25:20] [INFO] [Bullet] Using shooter_position, distance=0
[20:25:20] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[20:25:20] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:25:20] [INFO] [Bullet] Starting wall penetration at (501.2792, 805.887)
[20:25:20] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.3516387939453
[20:25:20] [INFO] [Bullet] Body exited signal received for penetrating body
[20:25:20] [INFO] [Bullet] Exiting penetration at (455.884, 816.7062) after traveling 41.6666679382324 pixels through wall
[20:25:20] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:25:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(544.1182, 786.7539), source=ENEMY (Enemy3), range=1469, listeners=10
[20:25:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[20:25:20] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:20] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:20] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:25:20] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:25:20] [ENEMY] [Enemy1] Death animation component initialized
[20:25:20] [ENEMY] [Enemy2] Death animation component initialized
[20:25:20] [ENEMY] [Enemy3] Death animation component initialized
[20:25:20] [ENEMY] [Enemy4] Death animation component initialized
[20:25:20] [ENEMY] [Enemy5] Death animation component initialized
[20:25:20] [ENEMY] [Enemy6] Death animation component initialized
[20:25:20] [ENEMY] [Enemy7] Death animation component initialized
[20:25:20] [ENEMY] [Enemy8] Death animation component initialized
[20:25:20] [ENEMY] [Enemy9] Death animation component initialized
[20:25:20] [ENEMY] [Enemy10] Death animation component initialized
[20:25:20] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:25:20] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:25:20] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:25:20] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:25:20] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:25:20] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:25:20] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:25:20] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:25:20] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:25:20] [INFO] [ScoreManager] Level started with 10 enemies
[20:25:20] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:25:20] [ENEMY] [Enemy1] Registered as sound listener
[20:25:20] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:25:20] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:25:20] [ENEMY] [Enemy2] Registered as sound listener
[20:25:20] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:25:20] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:25:20] [ENEMY] [Enemy3] Registered as sound listener
[20:25:20] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:25:20] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:25:20] [ENEMY] [Enemy4] Registered as sound listener
[20:25:20] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:25:20] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:25:20] [ENEMY] [Enemy5] Registered as sound listener
[20:25:20] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:25:20] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:25:20] [ENEMY] [Enemy6] Registered as sound listener
[20:25:20] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:25:20] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:25:20] [ENEMY] [Enemy7] Registered as sound listener
[20:25:20] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:25:20] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:25:20] [ENEMY] [Enemy8] Registered as sound listener
[20:25:20] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:25:20] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:25:20] [ENEMY] [Enemy9] Registered as sound listener
[20:25:20] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:25:20] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:25:20] [ENEMY] [Enemy10] Registered as sound listener
[20:25:20] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:25:20] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:25:20] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:25:20] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:25:20] [INFO] [LastChance] Found player: Player
[20:25:20] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:25:20] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:25:20] [INFO] [LastChance] Connected to player Died signal (C#)
[20:25:20] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:25:20] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:25:20] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:25:25] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:25:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(637.4479, 763.3965), source=ENEMY (Enemy3), range=1469, listeners=20
[20:25:25] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:25:25] [ENEMY] [Enemy2] Heard gunshot at (637.4479, 763.3965), source_type=1, intensity=0.02, distance=319
[20:25:25] [ENEMY] [Enemy4] Heard gunshot at (637.4479, 763.3965), source_type=1, intensity=0.06, distance=212
[20:25:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:25:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(600.3984, 767.9309), source=ENEMY (Enemy3), range=1469, listeners=10
[20:25:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:25:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.07458, 886.9763), shooter_id=1269632600393, bullet_pos=(503.2222, 829.7488)
[20:25:26] [INFO] [Bullet] Using shooter_position, distance=426.999847412109
[20:25:26] [INFO] [Bullet] Distance to wall: 426.999847412109 (29.0752047937742% of viewport)
[20:25:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:25:26] [INFO] [Bullet] Caliber cannot penetrate walls
[20:25:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(571.7246, 781.3188), shooter_id=1266814027155, bullet_pos=(36.26015, 863.0544)
[20:25:26] [INFO] [Bullet] Using shooter_position, distance=541.666809082031
[20:25:26] [INFO] [Bullet] Distance to wall: 541.666809082031 (36.8830890678291% of viewport)
[20:25:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:25:26] [INFO] [Bullet] Starting wall penetration at (36.26015, 863.0544)
[20:25:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.1312, 770.0665), source=ENEMY (Enemy3), range=1469, listeners=10
[20:25:26] [ENEMY] [Enemy1] Heard gunshot at (563.1312, 770.0665), source_type=1, intensity=0.01, distance=496
[20:25:26] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[20:25:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42.3571701049805
[20:25:26] [INFO] [Bullet] Body exited signal received for penetrating body
[20:25:26] [INFO] [Bullet] Exiting penetration at (-9.872162, 870.0962) after traveling 41.6666679382324 pixels through wall
[20:25:26] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:25:26] [INFO] [LastChance] Threat detected: @Area2D@1871
[20:25:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(533.5991, 781.287), shooter_id=1266814027155, bullet_pos=(35.30353, 822.537)
[20:25:26] [INFO] [Bullet] Using shooter_position, distance=500
[20:25:26] [INFO] [Bullet] Distance to wall: 500 (34.0459194189277% of viewport)
[20:25:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:25:26] [INFO] [Bullet] Starting wall penetration at (35.30353, 822.537)
[20:25:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 43.3518409729004
[20:25:26] [INFO] [Bullet] Body exited signal received for penetrating body
[20:25:26] [INFO] [Bullet] Exiting penetration at (-11.20406, 826.387) after traveling 41.6666641235352 pixels through wall
[20:25:26] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:25:26] [INFO] [LastChance] Threat detected: @Area2D@1876
[20:25:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(525.8017, 770.4438), source=ENEMY (Enemy3), range=1469, listeners=10
[20:25:26] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[20:25:26] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:25:26] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:25:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(495.712, 779.6825), shooter_id=1266814027155, bullet_pos=(37.54427, 792.0058)
[20:25:26] [INFO] [Bullet] Using shooter_position, distance=458.333404541016
[20:25:26] [INFO] [Bullet] Distance to wall: 458.333404541016 (31.2087643160124% of viewport)
[20:25:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:25:26] [INFO] [LastChance] Threat detected: Bullet
[20:25:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(521.7399, 761.4821), source=ENEMY (Enemy3), range=1469, listeners=10
[20:25:26] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[20:25:26] [ENEMY] [Enemy3] Hit taken, health: 3/4
[20:25:26] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:25:26] [INFO] [ImpactEffects] spawn_blood_effect called at (524.3107, 758.7748), dir=(0.997836, -0.065755), lethal=false
[20:25:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:25:26] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:25:26] [INFO] [ImpactEffects] Blood effect spawned at (524.3107, 758.7748) (scale=0.9)
[20:25:26] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:25:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1149.013, 1574.967), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:25:26] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:25:26] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:25:26] [INFO] [LastChance] Threat detected: @Area2D@1882
[20:25:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(522.9963, 739.1024), source=ENEMY (Enemy3), range=1469, listeners=10
[20:25:26] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[20:25:26] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:25:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1122.546, 1551.133), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(454.3746, 770.5816), shooter_id=1266814027155, bullet_pos=(37.97052, 755.7903)
[20:25:26] [INFO] [Bullet] Using shooter_position, distance=416.666748046875
[20:25:26] [INFO] [Bullet] Distance to wall: 416.666748046875 (28.3716050571011% of viewport)
[20:25:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:25:26] [INFO] [Bullet] Starting wall penetration at (37.97052, 755.7903)
[20:25:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.6923866271973
[20:25:26] [INFO] [Bullet] Body exited signal received for penetrating body
[20:25:26] [INFO] [Bullet] Exiting penetration at (-8.66674, 754.1337) after traveling 41.666675567627 pixels through wall
[20:25:26] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:25:26] [ENEMY] [Enemy3] Hit taken, health: 2/4
[20:25:26] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:25:26] [INFO] [ImpactEffects] spawn_blood_effect called at (523.6116, 716.7837), dir=(0.997439, -0.071526), lethal=false
[20:25:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:25:26] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:25:26] [INFO] [ImpactEffects] Blood effect spawned at (523.6116, 716.7837) (scale=0.9)
[20:25:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(524.246, 713.16), source=ENEMY (Enemy3), range=1469, listeners=10
[20:25:26] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[20:25:26] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:25:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1093.319, 1527.905), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:26] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:25:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(457.1411, 755.597), shooter_id=1266814027155, bullet_pos=(40.49606, 759.8445)
[20:25:26] [INFO] [Bullet] Using shooter_position, distance=416.666656494141
[20:25:26] [INFO] [Bullet] Distance to wall: 416.666656494141 (28.3715988231071% of viewport)
[20:25:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:25:26] [INFO] [Bullet] Starting wall penetration at (40.49606, 759.8445)
[20:25:26] [INFO] [LastChance] Threat detected: @Area2D@1889
[20:25:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38.170166015625
[20:25:26] [INFO] [Bullet] Body exited signal received for penetrating body
[20:25:26] [INFO] [Bullet] Exiting penetration at (-6.168182, 760.3202) after traveling 41.6666717529297 pixels through wall
[20:25:26] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:25:26] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:25:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.003, 1504.789), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:26] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:25:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(461.9248, 740.0319), shooter_id=1266814027155, bullet_pos=(64.43977, 864.9989)
[20:25:26] [INFO] [Bullet] Using shooter_position, distance=416.666687011719
[20:25:26] [INFO] [Bullet] Distance to wall: 416.666687011719 (28.3716009011051% of viewport)
[20:25:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:25:26] [INFO] [LastChance] Threat detected: @Area2D@1883
[20:25:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:26] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:25:26] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:25:26] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:25:26] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:25:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1034.588, 1481.799), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:26] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[20:25:26] [INFO] [LastChance] Threat detected: @Area2D@1885
[20:25:26] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:25:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:26] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
[20:25:26] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:25:26] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:25:26] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:25:26] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:25:26] [INFO] [LastChance] Threat detected: @Area2D@1890
[20:25:26] [INFO] [LastChance] Triggering last chance effect!
[20:25:26] [INFO] [LastChance] Starting last chance effect:
[20:25:26] [INFO] [LastChance]   - Time will be frozen (except player)
[20:25:26] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:25:26] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:25:26] [INFO] [LastChance]   - Brightness: 0.60
[20:25:26] [INFO] [LastChance] Pushed bullet @Area2D@1890 from distance 130.8 to 200.0
[20:25:26] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:25:26] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:25:26] [INFO] [LastChance] Skipping player node: Player
[20:25:26] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:25:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1870
[20:25:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1872
[20:25:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1874
[20:25:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1877
[20:25:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1879
[20:25:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1880
[20:25:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1884
[20:25:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1886
[20:25:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1891
[20:25:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1893
[20:25:26] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1897
[20:25:26] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:25:26] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:25:26] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:25:27] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:27] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:27] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:25:27] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:25:27] [INFO] [LastChance] Ending last chance effect
[20:25:27] [INFO] [LastChance] All process modes restored
[20:25:27] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:25:27] [ENEMY] [Enemy1] Death animation component initialized
[20:25:27] [ENEMY] [Enemy2] Death animation component initialized
[20:25:27] [ENEMY] [Enemy3] Death animation component initialized
[20:25:27] [ENEMY] [Enemy4] Death animation component initialized
[20:25:27] [ENEMY] [Enemy5] Death animation component initialized
[20:25:27] [ENEMY] [Enemy6] Death animation component initialized
[20:25:27] [ENEMY] [Enemy7] Death animation component initialized
[20:25:27] [ENEMY] [Enemy8] Death animation component initialized
[20:25:27] [ENEMY] [Enemy9] Death animation component initialized
[20:25:27] [ENEMY] [Enemy10] Death animation component initialized
[20:25:27] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:25:27] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:25:27] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:25:27] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:25:27] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:25:27] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:25:27] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:25:27] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:25:27] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:25:27] [INFO] [ScoreManager] Level started with 10 enemies
[20:25:27] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:25:27] [ENEMY] [Enemy1] Registered as sound listener
[20:25:27] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:25:27] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:25:27] [ENEMY] [Enemy2] Registered as sound listener
[20:25:27] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:25:27] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:25:27] [ENEMY] [Enemy3] Registered as sound listener
[20:25:27] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:25:27] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:25:27] [ENEMY] [Enemy4] Registered as sound listener
[20:25:27] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:25:27] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:25:27] [ENEMY] [Enemy5] Registered as sound listener
[20:25:27] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:25:27] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:25:27] [ENEMY] [Enemy6] Registered as sound listener
[20:25:27] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:25:27] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:25:27] [ENEMY] [Enemy7] Registered as sound listener
[20:25:27] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:25:27] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:25:27] [ENEMY] [Enemy8] Registered as sound listener
[20:25:27] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:25:27] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:25:27] [ENEMY] [Enemy9] Registered as sound listener
[20:25:27] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:25:27] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:25:27] [ENEMY] [Enemy10] Registered as sound listener
[20:25:27] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:25:27] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:25:27] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:25:27] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:25:27] [INFO] [LastChance] Found player: Player
[20:25:27] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:25:27] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:25:27] [INFO] [LastChance] Connected to player Died signal (C#)
[20:25:27] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:25:27] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:25:27] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:25:30] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:25:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1131.112, 1548.504), source=ENEMY (Enemy10), range=1469, listeners=20
[20:25:30] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:25:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:30] [INFO] [LastChance] Threat detected: Bullet
[20:25:30] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:30] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:25:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(948.5083, 1321.236), shooter_id=1619185895511, bullet_pos=(1011.344, 1384.97)
[20:25:30] [INFO] [Bullet] Using shooter_position, distance=89.4998931884766
[20:25:30] [INFO] [Bullet] Distance to wall: 89.4998931884766 (6.09421230299502% of viewport)
[20:25:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:25:30] [INFO] [Bullet] Caliber cannot penetrate walls
[20:25:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(948.5083, 1321.236), shooter_id=1619185895511, bullet_pos=(1011.344, 1384.97)
[20:25:30] [INFO] [Bullet] Using shooter_position, distance=89.4998931884766
[20:25:30] [INFO] [Bullet] Distance to wall: 89.4998931884766 (6.09421230299502% of viewport)
[20:25:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:25:30] [INFO] [Bullet] Caliber cannot penetrate walls
[20:25:30] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:25:30] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:25:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.447, 1506.483), shooter_id=1618363811437, bullet_pos=(573.374, 1008.841)
[20:25:30] [INFO] [Bullet] Using shooter_position, distance=708.334350585938
[20:25:30] [INFO] [Bullet] Distance to wall: 708.334350585938 (48.2317884434146% of viewport)
[20:25:30] [INFO] [Bullet] Distance-based penetration chance: 90.3962468160163%
[20:25:30] [INFO] [Bullet] Starting wall penetration at (573.374, 1008.841)
[20:25:30] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.0832138061523
[20:25:30] [INFO] [Bullet] Body exited signal received for penetrating body
[20:25:30] [INFO] [Bullet] Exiting penetration at (540.1646, 976.0547) after traveling 41.6666679382324 pixels through wall
[20:25:30] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:25:30] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:30] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:30] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:25:30] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:25:30] [ENEMY] [Enemy1] Death animation component initialized
[20:25:30] [ENEMY] [Enemy2] Death animation component initialized
[20:25:30] [ENEMY] [Enemy3] Death animation component initialized
[20:25:30] [ENEMY] [Enemy4] Death animation component initialized
[20:25:30] [ENEMY] [Enemy5] Death animation component initialized
[20:25:30] [ENEMY] [Enemy6] Death animation component initialized
[20:25:30] [ENEMY] [Enemy7] Death animation component initialized
[20:25:30] [ENEMY] [Enemy8] Death animation component initialized
[20:25:30] [ENEMY] [Enemy9] Death animation component initialized
[20:25:30] [ENEMY] [Enemy10] Death animation component initialized
[20:25:30] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:25:30] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:25:30] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:25:30] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:25:30] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:25:30] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:25:30] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:25:30] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:25:30] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:25:30] [INFO] [ScoreManager] Level started with 10 enemies
[20:25:30] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:25:30] [ENEMY] [Enemy1] Registered as sound listener
[20:25:30] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:25:30] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:25:30] [ENEMY] [Enemy2] Registered as sound listener
[20:25:30] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:25:30] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:25:30] [ENEMY] [Enemy3] Registered as sound listener
[20:25:30] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:25:30] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:25:30] [ENEMY] [Enemy4] Registered as sound listener
[20:25:30] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:25:30] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:25:30] [ENEMY] [Enemy5] Registered as sound listener
[20:25:30] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:25:30] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:25:30] [ENEMY] [Enemy6] Registered as sound listener
[20:25:30] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:25:30] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:25:30] [ENEMY] [Enemy7] Registered as sound listener
[20:25:30] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:25:30] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:25:30] [ENEMY] [Enemy8] Registered as sound listener
[20:25:30] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:25:30] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:25:30] [ENEMY] [Enemy9] Registered as sound listener
[20:25:30] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:25:30] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:25:30] [ENEMY] [Enemy10] Registered as sound listener
[20:25:30] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:25:30] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:25:30] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:25:30] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:25:30] [INFO] [LastChance] Found player: Player
[20:25:30] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:25:30] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:25:30] [INFO] [LastChance] Connected to player Died signal (C#)
[20:25:30] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:25:30] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:25:30] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:25:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=1825864419369, bullet_pos=(1112.867, 1374.734)
[20:25:31] [INFO] [Bullet] Using shooter_position, distance=674.50048828125
[20:25:31] [INFO] [Bullet] Distance to wall: 674.50048828125 (45.9279785441017% of viewport)
[20:25:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:31] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:25:31] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:25:31] [ENEMY] [Enemy1] Death animation component initialized
[20:25:31] [ENEMY] [Enemy2] Death animation component initialized
[20:25:31] [ENEMY] [Enemy3] Death animation component initialized
[20:25:31] [ENEMY] [Enemy4] Death animation component initialized
[20:25:31] [ENEMY] [Enemy5] Death animation component initialized
[20:25:31] [ENEMY] [Enemy6] Death animation component initialized
[20:25:31] [ENEMY] [Enemy7] Death animation component initialized
[20:25:31] [ENEMY] [Enemy8] Death animation component initialized
[20:25:31] [ENEMY] [Enemy9] Death animation component initialized
[20:25:31] [ENEMY] [Enemy10] Death animation component initialized
[20:25:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:25:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:25:31] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:25:31] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:25:31] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:25:31] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:25:31] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:25:31] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:25:31] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:25:31] [INFO] [ScoreManager] Level started with 10 enemies
[20:25:31] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:25:31] [ENEMY] [Enemy1] Registered as sound listener
[20:25:31] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:25:31] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:25:31] [ENEMY] [Enemy2] Registered as sound listener
[20:25:31] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:25:31] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:25:31] [ENEMY] [Enemy3] Registered as sound listener
[20:25:31] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:25:31] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:25:31] [ENEMY] [Enemy4] Registered as sound listener
[20:25:31] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:25:31] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:25:31] [ENEMY] [Enemy5] Registered as sound listener
[20:25:31] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:25:31] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:25:31] [ENEMY] [Enemy6] Registered as sound listener
[20:25:31] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:25:31] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:25:31] [ENEMY] [Enemy7] Registered as sound listener
[20:25:31] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:25:31] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:25:31] [ENEMY] [Enemy8] Registered as sound listener
[20:25:31] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:25:31] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:25:31] [ENEMY] [Enemy9] Registered as sound listener
[20:25:31] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:25:31] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:25:31] [ENEMY] [Enemy10] Registered as sound listener
[20:25:31] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:25:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:25:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:25:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:25:31] [INFO] [LastChance] Found player: Player
[20:25:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:25:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:25:31] [INFO] [LastChance] Connected to player Died signal (C#)
[20:25:31] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:25:31] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:25:31] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:25:35] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:25:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1125.168, 1553.135), source=ENEMY (Enemy10), range=1469, listeners=30
[20:25:35] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[20:25:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:35] [INFO] [LastChance] Threat detected: Bullet
[20:25:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:35] [ENEMY] [Enemy10] Hit taken, health: 1/2
[20:25:35] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:25:35] [INFO] [ImpactEffects] spawn_blood_effect called at (1105.042, 1535.641), dir=(0.788975, 0.614425), lethal=false
[20:25:35] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:25:35] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:25:35] [INFO] [ImpactEffects] Blood effect spawned at (1105.042, 1535.641) (scale=0.9)
[20:25:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1097.03, 1528.599), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:36] [INFO] [LastChance] Threat detected: @Area2D@2663
[20:25:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:36] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:25:36] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:25:36] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:25:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1071.113, 1496.153), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:36] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1011.255, 1463.785), shooter_id=1901127009838, bullet_pos=(896.565, 1414.075)
[20:25:36] [INFO] [Bullet] Using shooter_position, distance=124.999908447266
[20:25:36] [INFO] [Bullet] Distance to wall: 124.999908447266 (8.51147362073789% of viewport)
[20:25:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:25:36] [INFO] [Bullet] Starting wall penetration at (896.565, 1414.075)
[20:25:36] [ENEMY] [Enemy10] Hit taken, health: 0/2
[20:25:36] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:25:36] [INFO] [ImpactEffects] spawn_blood_effect called at (1079.757, 1489.904), dir=(0.796293, 0.604911), lethal=true
[20:25:36] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:25:36] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:25:36] [INFO] [ImpactEffects] Blood effect spawned at (1079.757, 1489.904) (scale=1.35)
[20:25:36] [ENEMY] [Enemy10] Enemy died (ricochet: false, penetration: false)
[20:25:36] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:25:36] [INFO] [SoundPropagation] Unregistered listener: Enemy10 (remaining: 9)
[20:25:36] [INFO] [DeathAnim] Started - Angle: 37.2 deg, Index: 14
[20:25:36] [ENEMY] [Enemy10] Death animation started with hit direction: (0.796293, 0.604911)
[20:25:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.3317642211914
[20:25:36] [INFO] [Bullet] Body exited signal received for penetrating body
[20:25:36] [INFO] [Bullet] Exiting penetration at (853.7472, 1395.517) after traveling 41.6666679382324 pixels through wall
[20:25:36] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:25:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(871.9327, 1409.099), shooter_id=1901949093972, bullet_pos=(892.1825, 1422.89)
[20:25:36] [INFO] [Bullet] Using shooter_position, distance=24.5000305175781
[20:25:36] [INFO] [Bullet] Distance to wall: 24.5000305175781 (1.66825212952547% of viewport)
[20:25:36] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:25:36] [INFO] [Bullet] Caliber cannot penetrate walls
[20:25:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1068.772, 1514.994), shooter_id=1901127009838, bullet_pos=(120.3794, 700.714)
[20:25:36] [INFO] [Bullet] Using shooter_position, distance=1250.00073242188
[20:25:36] [INFO] [Bullet] Distance to wall: 1250.00073242188 (85.1148484192715% of viewport)
[20:25:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1068.772, 1514.994), shooter_id=1901127009838, bullet_pos=(65.39851, 752.9423)
[20:25:36] [INFO] [Bullet] Using shooter_position, distance=1259.95336914063
[20:25:36] [INFO] [Bullet] Distance to wall: 1259.95336914063 (85.7925417547364% of viewport)
[20:25:36] [ENEMY] [Enemy10] Ragdoll activated
[20:25:36] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:25:37] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[20:25:37] [ENEMY] [Enemy1] Player reloading state changed: false -> true
[20:25:37] [ENEMY] [Enemy2] Player reloading state changed: false -> true
[20:25:37] [ENEMY] [Enemy3] Player reloading state changed: false -> true
[20:25:37] [ENEMY] [Enemy4] Player reloading state changed: false -> true
[20:25:37] [ENEMY] [Enemy5] Player reloading state changed: false -> true
[20:25:37] [ENEMY] [Enemy6] Player reloading state changed: false -> true
[20:25:37] [ENEMY] [Enemy7] Player reloading state changed: false -> true
[20:25:37] [ENEMY] [Enemy8] Player reloading state changed: false -> true
[20:25:37] [ENEMY] [Enemy9] Player reloading state changed: false -> true
[20:25:37] [ENEMY] [Enemy10] Player reloading state changed: false -> true
[20:25:37] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(871.9327, 1477.321), source=PLAYER (Player), range=900, listeners=9
[20:25:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=7, self=0, below_threshold=2
[20:25:37] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=1264), can_see=false
[20:25:37] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=1041), can_see=false
[20:25:37] [ENEMY] [Enemy3] Player vulnerable (reloading) but cannot attack: close=false (dist=747), can_see=false
[20:25:37] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=582), can_see=false
[20:25:37] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1399), can_see=false
[20:25:37] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1489), can_see=false
[20:25:37] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=939), can_see=false
[20:25:37] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1028), can_see=false
[20:25:37] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1230), can_see=false
[20:25:37] [ENEMY] [Enemy10] Death animation completed
[20:25:37] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[20:25:37] [INFO] [Player.Reload.Anim] LeftArm: pos=(-2.1893206, 5.9051185), target=(-2, 6), base=(10, 6)
[20:25:37] [INFO] [Player.Reload.Anim] RightArm: pos=(2.0000002, 7.9524856), target=(2, 8), base=(2, 6)
[20:25:37] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
[20:25:37] [ENEMY] [Enemy1] Player reloading state changed: true -> false
[20:25:37] [ENEMY] [Enemy2] Player reloading state changed: true -> false
[20:25:37] [ENEMY] [Enemy3] Player reloading state changed: true -> false
[20:25:37] [ENEMY] [Enemy4] Player reloading state changed: true -> false
[20:25:37] [ENEMY] [Enemy5] Player reloading state changed: true -> false
[20:25:37] [ENEMY] [Enemy6] Player reloading state changed: true -> false
[20:25:37] [ENEMY] [Enemy7] Player reloading state changed: true -> false
[20:25:37] [ENEMY] [Enemy8] Player reloading state changed: true -> false
[20:25:37] [ENEMY] [Enemy9] Player reloading state changed: true -> false
[20:25:37] [ENEMY] [Enemy10] Player reloading state changed: true -> false
[20:25:37] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[20:25:38] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[20:25:39] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:39] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:39] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:25:39] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:25:39] [ENEMY] [Enemy1] Death animation component initialized
[20:25:39] [ENEMY] [Enemy2] Death animation component initialized
[20:25:39] [ENEMY] [Enemy3] Death animation component initialized
[20:25:39] [ENEMY] [Enemy4] Death animation component initialized
[20:25:39] [ENEMY] [Enemy5] Death animation component initialized
[20:25:39] [ENEMY] [Enemy6] Death animation component initialized
[20:25:39] [ENEMY] [Enemy7] Death animation component initialized
[20:25:39] [ENEMY] [Enemy8] Death animation component initialized
[20:25:39] [ENEMY] [Enemy9] Death animation component initialized
[20:25:39] [ENEMY] [Enemy10] Death animation component initialized
[20:25:39] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:25:39] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:25:39] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:25:39] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:25:39] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:25:39] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:25:39] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:25:39] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:25:39] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:25:39] [INFO] [ScoreManager] Level started with 10 enemies
[20:25:39] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[20:25:39] [ENEMY] [Enemy1] Registered as sound listener
[20:25:39] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:25:39] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[20:25:39] [ENEMY] [Enemy2] Registered as sound listener
[20:25:39] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:25:39] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[20:25:39] [ENEMY] [Enemy3] Registered as sound listener
[20:25:39] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:25:39] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[20:25:39] [ENEMY] [Enemy4] Registered as sound listener
[20:25:39] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:25:39] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[20:25:39] [ENEMY] [Enemy5] Registered as sound listener
[20:25:39] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:25:39] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[20:25:39] [ENEMY] [Enemy6] Registered as sound listener
[20:25:39] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:25:39] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[20:25:39] [ENEMY] [Enemy7] Registered as sound listener
[20:25:39] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:25:39] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[20:25:39] [ENEMY] [Enemy8] Registered as sound listener
[20:25:39] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:25:39] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[20:25:39] [ENEMY] [Enemy9] Registered as sound listener
[20:25:39] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:25:39] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[20:25:39] [ENEMY] [Enemy10] Registered as sound listener
[20:25:39] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:25:39] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:25:39] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:25:39] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:25:39] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:25:39] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:25:39] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:25:39] [INFO] [LastChance] Found player: Player
[20:25:39] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:25:39] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:25:39] [INFO] [LastChance] Connected to player Died signal (C#)
[20:25:43] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:25:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1124.706, 1553.496), source=ENEMY (Enemy10), range=1469, listeners=19
[20:25:43] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[20:25:43] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:43] [INFO] [LastChance] Threat detected: Bullet
[20:25:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:43] [ENEMY] [Enemy10] Hit taken, health: 3/4
[20:25:43] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:25:43] [INFO] [ImpactEffects] spawn_blood_effect called at (1108.331, 1539.822), dir=(0.831595, 0.555383), lethal=false
[20:25:43] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:25:43] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:25:43] [INFO] [ImpactEffects] Blood effect spawned at (1108.331, 1539.822) (scale=0.9)
[20:25:43] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:25:43] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:25:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1096.076, 1529.536), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:43] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:43] [INFO] [LastChance] Threat detected: @Area2D@2942
[20:25:43] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:25:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:43] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:25:43] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:25:43] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:25:43] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:25:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1073.404, 1501.064), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:43] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:43] [INFO] [LastChance] Threat detected: Bullet
[20:25:43] [INFO] [LastChance] Triggering last chance effect!
[20:25:43] [INFO] [LastChance] Starting last chance effect:
[20:25:43] [INFO] [LastChance]   - Time will be frozen (except player)
[20:25:43] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:25:43] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:25:43] [INFO] [LastChance]   - Brightness: 0.60
[20:25:43] [INFO] [LastChance] Pushed bullet Bullet from distance 127.6 to 200.0
[20:25:43] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:25:43] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:25:43] [INFO] [LastChance] Skipping player node: Player
[20:25:43] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:25:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2941
[20:25:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2943
[20:25:43] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2944
[20:25:43] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:25:43] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:25:43] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:25:44] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:44] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:44] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:25:44] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:25:44] [INFO] [LastChance] Ending last chance effect
[20:25:44] [INFO] [LastChance] All process modes restored
[20:25:44] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:25:44] [ENEMY] [Enemy1] Death animation component initialized
[20:25:44] [ENEMY] [Enemy2] Death animation component initialized
[20:25:44] [ENEMY] [Enemy3] Death animation component initialized
[20:25:44] [ENEMY] [Enemy4] Death animation component initialized
[20:25:44] [ENEMY] [Enemy5] Death animation component initialized
[20:25:44] [ENEMY] [Enemy6] Death animation component initialized
[20:25:44] [ENEMY] [Enemy7] Death animation component initialized
[20:25:44] [ENEMY] [Enemy8] Death animation component initialized
[20:25:44] [ENEMY] [Enemy9] Death animation component initialized
[20:25:44] [ENEMY] [Enemy10] Death animation component initialized
[20:25:44] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:25:44] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:25:44] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:25:44] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:25:44] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:25:44] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:25:44] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:25:44] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:25:44] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:25:44] [INFO] [ScoreManager] Level started with 10 enemies
[20:25:44] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:25:44] [ENEMY] [Enemy1] Registered as sound listener
[20:25:44] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:25:44] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:25:44] [ENEMY] [Enemy2] Registered as sound listener
[20:25:44] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:25:44] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:25:44] [ENEMY] [Enemy3] Registered as sound listener
[20:25:44] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:25:44] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:25:44] [ENEMY] [Enemy4] Registered as sound listener
[20:25:44] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:25:44] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:25:44] [ENEMY] [Enemy5] Registered as sound listener
[20:25:44] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:25:44] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:25:44] [ENEMY] [Enemy6] Registered as sound listener
[20:25:44] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:25:44] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:25:44] [ENEMY] [Enemy7] Registered as sound listener
[20:25:44] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:25:44] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:25:44] [ENEMY] [Enemy8] Registered as sound listener
[20:25:44] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:25:44] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:25:44] [ENEMY] [Enemy9] Registered as sound listener
[20:25:44] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:25:44] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:25:44] [ENEMY] [Enemy10] Registered as sound listener
[20:25:44] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:25:45] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:25:45] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:25:45] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:25:45] [INFO] [LastChance] Found player: Player
[20:25:45] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:25:45] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:25:45] [INFO] [LastChance] Connected to player Died signal (C#)
[20:25:45] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:25:45] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:25:45] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:25:47] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:25:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1127.188, 1553.391), source=ENEMY (Enemy10), range=1469, listeners=20
[20:25:48] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:25:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:48] [INFO] [LastChance] Threat detected: Bullet
[20:25:48] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:48] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:25:48] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:25:48] [ENEMY] [Enemy10] Hit taken, health: 2/3
[20:25:48] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:25:48] [INFO] [ImpactEffects] spawn_blood_effect called at (1098.663, 1529.306), dir=(0.824423, 0.565974), lethal=false
[20:25:48] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:25:48] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:25:48] [INFO] [ImpactEffects] Blood effect spawned at (1098.663, 1529.306) (scale=0.9)
[20:25:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1098.663, 1529.306), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:48] [INFO] [LastChance] Threat detected: @Area2D@3198
[20:25:48] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:25:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:48] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:25:48] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:25:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1065.496, 1502.473), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:48] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:25:48] [INFO] [LastChance] Threat detected: Bullet
[20:25:48] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:25:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:48] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:25:48] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:25:48] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:25:48] [ENEMY] [Enemy10] Hit taken, health: 1/3
[20:25:48] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:25:48] [INFO] [ImpactEffects] spawn_blood_effect called at (1067.913, 1510.099), dir=(0.800437, 0.599417), lethal=false
[20:25:48] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:25:48] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:25:48] [INFO] [ImpactEffects] Blood effect spawned at (1067.913, 1510.099) (scale=0.9)
[20:25:48] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:25:48] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:25:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(871.9337, 1388.009), shooter_id=2534567577797, bullet_pos=(891.6839, 1402.507)
[20:25:49] [INFO] [Bullet] Using shooter_position, distance=24.4999542236328
[20:25:49] [INFO] [Bullet] Distance to wall: 24.4999542236328 (1.66824693453044% of viewport)
[20:25:49] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:25:49] [INFO] [Bullet] Caliber cannot penetrate walls
[20:25:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1068.718, 1512.641), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1010.024, 1477.097), shooter_id=2533745494509, bullet_pos=(897.1207, 1423.451)
[20:25:49] [INFO] [Bullet] Using shooter_position, distance=125.000045776367
[20:25:49] [INFO] [Bullet] Distance to wall: 125.000045776367 (8.51148297172894% of viewport)
[20:25:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:25:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1068.718, 1512.641), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1010.024, 1477.097), shooter_id=2533745494509, bullet_pos=(1001.508, 1384.981)
[20:25:49] [INFO] [Bullet] Using shooter_position, distance=92.5085601806641
[20:25:49] [INFO] [Bullet] Distance to wall: 92.5085601806641 (6.29907797094383% of viewport)
[20:25:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:25:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1010.024, 1477.097), shooter_id=2533745494509, bullet_pos=(996.7533, 1383.433)
[20:25:49] [INFO] [Bullet] Using shooter_position, distance=94.5991363525391
[20:25:49] [INFO] [Bullet] Distance to wall: 94.5991363525391 (6.4414291467174% of viewport)
[20:25:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:25:49] [INFO] [Bullet] Starting wall penetration at (996.7533, 1383.433)
[20:25:49] [INFO] [LastChance] Threat detected: @Area2D@3207
[20:25:49] [INFO] [LastChance] Triggering last chance effect!
[20:25:49] [INFO] [LastChance] Starting last chance effect:
[20:25:49] [INFO] [LastChance]   - Time will be frozen (except player)
[20:25:49] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:25:49] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:25:49] [INFO] [LastChance]   - Brightness: 0.60
[20:25:49] [INFO] [LastChance] Pushed bullet Bullet from distance 127.2 to 200.0
[20:25:49] [INFO] [LastChance] Pushed bullet @Area2D@3207 from distance 118.2 to 200.0
[20:25:49] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[20:25:49] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:25:49] [INFO] [LastChance] Skipping player node: Player
[20:25:49] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:25:49] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3197
[20:25:49] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3199
[20:25:49] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3200
[20:25:49] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3201
[20:25:49] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3205
[20:25:49] [INFO] [Bullet] Body exited signal received for penetrating body
[20:25:49] [INFO] [Bullet] Exiting penetration at (1057.035, 1414.631) after traveling 0 pixels through wall
[20:25:49] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[20:25:49] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:25:49] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:25:49] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:25:49] [INFO] [LastChance] Freezing newly fired player bullet: Bullet9mm
[20:25:49] [INFO] [LastChance] Registered frozen player bullet: Bullet9mm
[20:25:49] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@3210
[20:25:49] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@3210
[20:25:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:50] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:25:50] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:25:50] [INFO] [LastChance] Ending last chance effect
[20:25:50] [INFO] [LastChance] All process modes restored
[20:25:50] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:25:50] [ENEMY] [Enemy1] Death animation component initialized
[20:25:50] [ENEMY] [Enemy2] Death animation component initialized
[20:25:50] [ENEMY] [Enemy3] Death animation component initialized
[20:25:50] [ENEMY] [Enemy4] Death animation component initialized
[20:25:50] [ENEMY] [Enemy5] Death animation component initialized
[20:25:50] [ENEMY] [Enemy6] Death animation component initialized
[20:25:50] [ENEMY] [Enemy7] Death animation component initialized
[20:25:50] [ENEMY] [Enemy8] Death animation component initialized
[20:25:50] [ENEMY] [Enemy9] Death animation component initialized
[20:25:50] [ENEMY] [Enemy10] Death animation component initialized
[20:25:50] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:25:50] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:25:50] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:25:50] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:25:50] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:25:50] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:25:50] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:25:50] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:25:50] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:25:50] [INFO] [ScoreManager] Level started with 10 enemies
[20:25:50] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:25:50] [ENEMY] [Enemy1] Registered as sound listener
[20:25:50] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:25:50] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:25:50] [ENEMY] [Enemy2] Registered as sound listener
[20:25:50] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:25:50] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:25:50] [ENEMY] [Enemy3] Registered as sound listener
[20:25:50] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:25:50] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:25:50] [ENEMY] [Enemy4] Registered as sound listener
[20:25:50] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:25:50] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:25:50] [ENEMY] [Enemy5] Registered as sound listener
[20:25:50] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:25:50] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:25:50] [ENEMY] [Enemy6] Registered as sound listener
[20:25:50] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:25:50] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:25:50] [ENEMY] [Enemy7] Registered as sound listener
[20:25:50] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:25:50] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:25:50] [ENEMY] [Enemy8] Registered as sound listener
[20:25:50] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:25:50] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:25:50] [ENEMY] [Enemy9] Registered as sound listener
[20:25:50] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:25:50] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:25:50] [ENEMY] [Enemy10] Registered as sound listener
[20:25:50] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:25:50] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:25:50] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:25:50] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:25:50] [INFO] [LastChance] Found player: Player
[20:25:50] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:25:50] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:25:50] [INFO] [LastChance] Connected to player Died signal (C#)
[20:25:50] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:25:50] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:25:50] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:25:51] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:25:52] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:25:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(871.9337, 1374.702), shooter_id=2795503617534, bullet_pos=(909.6322, 1398.347)
[20:25:53] [INFO] [Bullet] Using shooter_position, distance=44.5000152587891
[20:25:53] [INFO] [Bullet] Distance to wall: 44.5000152587891 (3.03008786728357% of viewport)
[20:25:53] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:25:53] [INFO] [Bullet] Caliber cannot penetrate walls
[20:25:53] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[20:25:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1034.776, 1489.924), source=ENEMY (Enemy10), range=1469, listeners=20
[20:25:53] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:25:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:53] [INFO] [LastChance] Threat detected: Bullet
[20:25:53] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:53] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:25:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1034.776, 1489.924), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(907.6219, 1279.485), shooter_id=2795503617534, bullet_pos=(1027.499, 1380.868)
[20:25:53] [INFO] [Bullet] Using shooter_position, distance=156.999984741211
[20:25:53] [INFO] [Bullet] Distance to wall: 156.999984741211 (10.6904176585443% of viewport)
[20:25:53] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:25:53] [INFO] [Bullet] Caliber cannot penetrate walls
[20:25:53] [INFO] [LastChance] Threat detected: @Area2D@3465
[20:25:53] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:53] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:25:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(997.8467, 1432.768), shooter_id=2794681535147, bullet_pos=(794.8764, 1021.827)
[20:25:53] [INFO] [Bullet] Using shooter_position, distance=458.333374023438
[20:25:53] [INFO] [Bullet] Distance to wall: 458.333374023438 (31.2087622380144% of viewport)
[20:25:53] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:25:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.4872, 1438.687), shooter_id=2794681535147, bullet_pos=(464.6213, 687.1583)
[20:25:53] [INFO] [Bullet] Using shooter_position, distance=916.667236328125
[20:25:53] [INFO] [Bullet] Distance to wall: 916.667236328125 (62.417557723997% of viewport)
[20:25:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(997.8467, 1432.768), shooter_id=2794681535147, bullet_pos=(665.4581, 1394.583)
[20:25:54] [INFO] [Bullet] Using shooter_position, distance=334.57470703125
[20:25:54] [INFO] [Bullet] Distance to wall: 334.57470703125 (22.7818070303946% of viewport)
[20:25:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:25:54] [INFO] [Bullet] Starting wall penetration at (665.4581, 1394.583)
[20:25:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.9799118041992
[20:25:54] [INFO] [Bullet] Body exited signal received for penetrating body
[20:25:54] [INFO] [Bullet] Exiting penetration at (652.202, 1432.764) after traveling 35.4166717529297 pixels through wall
[20:25:54] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[20:25:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:25:54] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:25:54] [ENEMY] [Enemy1] Death animation component initialized
[20:25:54] [ENEMY] [Enemy2] Death animation component initialized
[20:25:54] [ENEMY] [Enemy3] Death animation component initialized
[20:25:54] [ENEMY] [Enemy4] Death animation component initialized
[20:25:54] [ENEMY] [Enemy5] Death animation component initialized
[20:25:54] [ENEMY] [Enemy6] Death animation component initialized
[20:25:54] [ENEMY] [Enemy7] Death animation component initialized
[20:25:54] [ENEMY] [Enemy8] Death animation component initialized
[20:25:54] [ENEMY] [Enemy9] Death animation component initialized
[20:25:54] [ENEMY] [Enemy10] Death animation component initialized
[20:25:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:25:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:25:54] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:25:54] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:25:54] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:25:54] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:25:54] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:25:54] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:25:54] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:25:54] [INFO] [ScoreManager] Level started with 10 enemies
[20:25:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:25:54] [ENEMY] [Enemy1] Registered as sound listener
[20:25:54] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:25:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:25:54] [ENEMY] [Enemy2] Registered as sound listener
[20:25:54] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:25:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:25:54] [ENEMY] [Enemy3] Registered as sound listener
[20:25:54] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:25:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:25:54] [ENEMY] [Enemy4] Registered as sound listener
[20:25:54] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:25:54] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:25:54] [ENEMY] [Enemy5] Registered as sound listener
[20:25:54] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:25:54] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:25:54] [ENEMY] [Enemy6] Registered as sound listener
[20:25:54] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:25:54] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:25:54] [ENEMY] [Enemy7] Registered as sound listener
[20:25:54] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:25:54] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:25:54] [ENEMY] [Enemy8] Registered as sound listener
[20:25:54] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:25:54] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:25:54] [ENEMY] [Enemy9] Registered as sound listener
[20:25:54] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:25:54] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:25:54] [ENEMY] [Enemy10] Registered as sound listener
[20:25:54] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:25:54] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:25:54] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:25:54] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:25:54] [INFO] [LastChance] Found player: Player
[20:25:54] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:25:54] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:25:54] [INFO] [LastChance] Connected to player Died signal (C#)
[20:25:54] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:25:54] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:25:54] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:25:55] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:25:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.505, 1556.304), source=ENEMY (Enemy10), range=1469, listeners=20
[20:25:55] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:25:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:25:55] [INFO] [LastChance] Threat detected: Bullet
[20:25:55] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1111.747, 1532.513), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:56] [INFO] [LastChance] Threat detected: @Area2D@3724
[20:25:56] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:56] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:56] [ENEMY] [Enemy10] Hit taken, health: 3/4
[20:25:56] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:25:56] [INFO] [ImpactEffects] spawn_blood_effect called at (1096.288, 1517.815), dir=(0.76458, 0.644529), lethal=false
[20:25:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:25:56] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:25:56] [INFO] [ImpactEffects] Blood effect spawned at (1096.288, 1517.815) (scale=0.9)
[20:25:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1092.505, 1514.056), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(943.361, 1344.016), shooter_id=3020939069096, bullet_pos=(996.7819, 1384.454)
[20:25:56] [INFO] [Bullet] Using shooter_position, distance=66.9999771118164
[20:25:56] [INFO] [Bullet] Distance to wall: 66.9999771118164 (4.5621516436378% of viewport)
[20:25:56] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:25:56] [INFO] [Bullet] Caliber cannot penetrate walls
[20:25:56] [INFO] [LastChance] Threat detected: @Area2D@3727
[20:25:56] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:56] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:56] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:25:56] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
[20:25:56] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:25:56] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:25:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1056.449, 1492.681), shooter_id=3020116986452, bullet_pos=(532.8527, 1015.625)
[20:25:56] [INFO] [Bullet] Using shooter_position, distance=708.333374023438
[20:25:56] [INFO] [Bullet] Distance to wall: 708.333374023438 (48.2317219474783% of viewport)
[20:25:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1041.974, 1468.272), shooter_id=3020116986452, bullet_pos=(629.8463, 998.403)
[20:25:56] [INFO] [Bullet] Using shooter_position, distance=625.000549316406
[20:25:56] [INFO] [Bullet] Distance to wall: 625.000549316406 (42.5574366776238% of viewport)
[20:25:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.222, 1521.037), shooter_id=3020116986452, bullet_pos=(60.95715, 730.2006)
[20:25:56] [INFO] [Bullet] Using shooter_position, distance=1291.6669921875
[20:25:56] [INFO] [Bullet] Distance to wall: 1291.6669921875 (87.9519806642087% of viewport)
[20:25:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.222, 1521.037), shooter_id=3020116986452, bullet_pos=(125.2191, 689.9377)
[20:25:56] [INFO] [Bullet] Using shooter_position, distance=1267.50939941406
[20:25:56] [INFO] [Bullet] Distance to wall: 1267.50939941406 (86.3070457503693% of viewport)
[20:25:56] [INFO] [Bullet] Distance-based penetration chance: 45.9751132912359%
[20:25:56] [INFO] [Bullet] Starting wall penetration at (125.2191, 689.9377)
[20:25:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.7669525146484
[20:25:56] [INFO] [Bullet] Body exited signal received for penetrating body
[20:25:56] [INFO] [Bullet] Exiting penetration at (159.4686, 668.479) after traveling 35.4166717529297 pixels through wall
[20:25:56] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[20:25:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1056.449, 1492.681), shooter_id=3020116986452, bullet_pos=(45.54324, 1377.674)
[20:25:56] [INFO] [Bullet] Using shooter_position, distance=1017.42706298828
[20:25:56] [INFO] [Bullet] Distance to wall: 1017.42706298828 (69.2784796022706% of viewport)
[20:25:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1056.449, 1492.681), shooter_id=3020116986452, bullet_pos=(418.6197, 1584.267)
[20:25:56] [INFO] [Bullet] Using shooter_position, distance=644.371520996094
[20:25:56] [INFO] [Bullet] Distance to wall: 644.371520996094 (43.8764417593698% of viewport)
[20:25:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1092.505, 1514.056), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:57] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1092.505, 1514.056), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:57] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:57] [INFO] [LastChance] Threat detected: @Area2D@3738
[20:25:57] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:25:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1092.505, 1514.056), source=ENEMY (Enemy10), range=1469, listeners=10
[20:25:57] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:25:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:25:57] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:25:57] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
[20:25:57] [INFO] [LastChance] Threat detected: @Area2D@3739
[20:25:57] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:25:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:25:57] [ENEMY] [Enemy10] Hit taken, health: 2/4
[20:25:57] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:25:57] [INFO] [ImpactEffects] spawn_blood_effect called at (1096.598, 1504.205), dir=(0.79909, 0.601211), lethal=false
[20:25:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:25:57] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:25:57] [INFO] [ImpactEffects] Blood effect spawned at (1096.598, 1504.205) (scale=0.9)
[20:25:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(844.3063, 1360.014), shooter_id=3020939069096, bullet_pos=(897.3972, 1400.884)
[20:25:57] [INFO] [Bullet] Using shooter_position, distance=66.9999847412109
[20:25:57] [INFO] [Bullet] Distance to wall: 66.9999847412109 (4.56215216313731% of viewport)
[20:25:57] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:25:57] [INFO] [Bullet] Caliber cannot penetrate walls
[20:25:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1035.158, 1478.29), shooter_id=3020116986452, bullet_pos=(551.421, 1019.55)
[20:25:57] [INFO] [Bullet] Using shooter_position, distance=666.666687011719
[20:25:57] [INFO] [Bullet] Distance to wall: 666.666687011719 (45.3945606105689% of viewport)
[20:25:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1040.318, 1471.351), shooter_id=3020116986452, bullet_pos=(37.24669, 875.5652)
[20:25:57] [INFO] [Bullet] Using shooter_position, distance=1166.66723632813
[20:25:57] [INFO] [Bullet] Distance to wall: 1166.66723632813 (79.4405174334609% of viewport)
[20:25:57] [INFO] [Bullet] Distance-based penetration chance: 53.9860629942957%
[20:25:57] [INFO] [Bullet] Starting wall penetration at (37.24669, 875.5652)
[20:25:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.564281463623
[20:25:57] [INFO] [Bullet] Body exited signal received for penetrating body
[20:25:57] [INFO] [Bullet] Exiting penetration at (-2.876152, 851.7339) after traveling 41.6666679382324 pixels through wall
[20:25:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:25:57] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:25:57] [ENEMY] [Enemy10] State: SEEKING_COVER -> IN_COVER
[20:25:57] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:25:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1035.158, 1478.29), shooter_id=3020116986452, bullet_pos=(59.2132, 1485.707)
[20:25:58] [INFO] [Bullet] Using shooter_position, distance=975.973266601563
[20:25:58] [INFO] [Bullet] Distance to wall: 975.973266601563 (66.4558143794889% of viewport)
[20:25:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1035.158, 1478.29), shooter_id=3020116986452, bullet_pos=(155.9965, 1607.443)
[20:25:58] [INFO] [Bullet] Using shooter_position, distance=888.597778320313
[20:25:58] [INFO] [Bullet] Distance to wall: 888.597778320313 (60.5062567130631% of viewport)
[20:25:58] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:58] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:25:58] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:25:58] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:25:58] [ENEMY] [Enemy1] Death animation component initialized
[20:25:58] [ENEMY] [Enemy2] Death animation component initialized
[20:25:58] [ENEMY] [Enemy3] Death animation component initialized
[20:25:58] [ENEMY] [Enemy4] Death animation component initialized
[20:25:58] [ENEMY] [Enemy5] Death animation component initialized
[20:25:58] [ENEMY] [Enemy6] Death animation component initialized
[20:25:58] [ENEMY] [Enemy7] Death animation component initialized
[20:25:58] [ENEMY] [Enemy8] Death animation component initialized
[20:25:58] [ENEMY] [Enemy9] Death animation component initialized
[20:25:58] [ENEMY] [Enemy10] Death animation component initialized
[20:25:58] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:25:58] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:25:58] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:25:58] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:25:58] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:25:58] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:25:58] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:25:58] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:25:58] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:25:58] [INFO] [ScoreManager] Level started with 10 enemies
[20:25:58] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:25:58] [ENEMY] [Enemy1] Registered as sound listener
[20:25:58] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:25:58] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:25:58] [ENEMY] [Enemy2] Registered as sound listener
[20:25:58] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:25:58] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:25:58] [ENEMY] [Enemy3] Registered as sound listener
[20:25:58] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:25:58] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:25:58] [ENEMY] [Enemy4] Registered as sound listener
[20:25:58] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:25:58] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:25:58] [ENEMY] [Enemy5] Registered as sound listener
[20:25:58] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:25:58] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:25:58] [ENEMY] [Enemy6] Registered as sound listener
[20:25:58] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:25:58] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:25:58] [ENEMY] [Enemy7] Registered as sound listener
[20:25:58] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:25:58] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:25:58] [ENEMY] [Enemy8] Registered as sound listener
[20:25:58] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:25:58] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:25:58] [ENEMY] [Enemy9] Registered as sound listener
[20:25:58] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:25:58] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:25:58] [ENEMY] [Enemy10] Registered as sound listener
[20:25:58] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:25:58] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:25:58] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:25:58] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:25:58] [INFO] [LastChance] Found player: Player
[20:25:58] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:25:58] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:25:58] [INFO] [LastChance] Connected to player Died signal (C#)
[20:25:58] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:25:58] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:25:58] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:26:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(849.4519, 1378.89), shooter_id=3267731917356, bullet_pos=(886.2203, 1403.957)
[20:26:00] [INFO] [Bullet] Using shooter_position, distance=44.4999351501465
[20:26:00] [INFO] [Bullet] Distance to wall: 44.4999351501465 (3.03008241253879% of viewport)
[20:26:00] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:26:00] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:00] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:26:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1134.049, 1555.322), source=ENEMY (Enemy10), range=1469, listeners=20
[20:26:00] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:26:00] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:00] [INFO] [LastChance] Threat detected: Bullet
[20:26:00] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:26:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1110.966, 1533.166), source=ENEMY (Enemy10), range=1469, listeners=10
[20:26:00] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:00] [INFO] [LastChance] Threat detected: @Area2D@4002
[20:26:00] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:26:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:01] [ENEMY] [Enemy10] Hit taken, health: 1/2
[20:26:01] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:26:01] [INFO] [ImpactEffects] spawn_blood_effect called at (1110.966, 1533.166), dir=(0.796443, 0.604713), lethal=false
[20:26:01] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:26:01] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:26:01] [INFO] [ImpactEffects] Blood effect spawned at (1110.966, 1533.166) (scale=0.9)
[20:26:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1110.966, 1533.166), source=ENEMY (Enemy10), range=1469, listeners=10
[20:26:01] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:01] [INFO] [LastChance] Threat detected: @Area2D@4004
[20:26:01] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:26:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(969.2357, 1378.914), shooter_id=3267731917356, bullet_pos=(989.8474, 1392.158)
[20:26:01] [INFO] [Bullet] Using shooter_position, distance=24.4999847412109
[20:26:01] [INFO] [Bullet] Distance to wall: 24.4999847412109 (1.66824901252845% of viewport)
[20:26:01] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:26:01] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:01] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:26:01] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:26:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.7, 1515.568), shooter_id=3266909832424, bullet_pos=(523.6183, 1011.204)
[20:26:01] [INFO] [Bullet] Using shooter_position, distance=749.999938964844
[20:26:01] [INFO] [Bullet] Distance to wall: 749.999938964844 (51.0688749723955% of viewport)
[20:26:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.7, 1515.568), shooter_id=3266909832424, bullet_pos=(519.4509, 1013.966)
[20:26:01] [INFO] [Bullet] Using shooter_position, distance=751.241943359375
[20:26:01] [INFO] [Bullet] Distance to wall: 751.241943359375 (51.1534453354639% of viewport)
[20:26:01] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:26:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1111.302, 1525.173), source=ENEMY (Enemy10), range=1469, listeners=10
[20:26:01] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:01] [INFO] [LastChance] Threat detected: @Area2D@4010
[20:26:01] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:26:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1111.75, 1514.516), source=ENEMY (Enemy10), range=1469, listeners=10
[20:26:01] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1056.518, 1484.808), shooter_id=3266909832424, bullet_pos=(913.0891, 1399.921)
[20:26:01] [INFO] [Bullet] Using shooter_position, distance=166.666687011719
[20:26:01] [INFO] [Bullet] Distance to wall: 166.666687011719 (11.3486411916412% of viewport)
[20:26:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:26:01] [INFO] [Bullet] Starting wall penetration at (913.0891, 1399.921)
[20:26:01] [INFO] [LastChance] Threat detected: @Area2D@4011
[20:26:01] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:26:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:01] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:26:01] [INFO] [Bullet] Exiting penetration at (872.929, 1376.152) after traveling 41.666675567627 pixels through wall
[20:26:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:26:01] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:26:01] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:26:01] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:26:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.197, 1503.859), source=ENEMY (Enemy10), range=1469, listeners=10
[20:26:01] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:01] [INFO] [LastChance] Threat detected: @Area2D@4013
[20:26:01] [INFO] [LastChance] Triggering last chance effect!
[20:26:01] [INFO] [LastChance] Starting last chance effect:
[20:26:01] [INFO] [LastChance]   - Time will be frozen (except player)
[20:26:01] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:26:01] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:26:01] [INFO] [LastChance]   - Brightness: 0.60
[20:26:01] [INFO] [LastChance] Pushed bullet @Area2D@4013 from distance 133.6 to 200.0
[20:26:01] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:26:01] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:26:01] [INFO] [LastChance] Skipping player node: Player
[20:26:01] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:26:01] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4000
[20:26:01] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4001
[20:26:01] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4003
[20:26:01] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4005
[20:26:01] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4006
[20:26:01] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:26:01] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:26:01] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:26:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:01] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:26:01] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:26:01] [INFO] [LastChance] Ending last chance effect
[20:26:01] [INFO] [LastChance] All process modes restored
[20:26:01] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:26:01] [ENEMY] [Enemy1] Death animation component initialized
[20:26:01] [ENEMY] [Enemy2] Death animation component initialized
[20:26:01] [ENEMY] [Enemy3] Death animation component initialized
[20:26:01] [ENEMY] [Enemy4] Death animation component initialized
[20:26:01] [ENEMY] [Enemy5] Death animation component initialized
[20:26:01] [ENEMY] [Enemy6] Death animation component initialized
[20:26:01] [ENEMY] [Enemy7] Death animation component initialized
[20:26:01] [ENEMY] [Enemy8] Death animation component initialized
[20:26:01] [ENEMY] [Enemy9] Death animation component initialized
[20:26:01] [ENEMY] [Enemy10] Death animation component initialized
[20:26:01] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:26:01] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:26:01] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:26:01] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:26:01] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:26:01] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:26:01] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:26:01] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:26:01] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:26:01] [INFO] [ScoreManager] Level started with 10 enemies
[20:26:01] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:26:01] [ENEMY] [Enemy1] Registered as sound listener
[20:26:01] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:26:01] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:26:01] [ENEMY] [Enemy2] Registered as sound listener
[20:26:01] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:26:01] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:26:01] [ENEMY] [Enemy3] Registered as sound listener
[20:26:01] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:26:01] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:26:01] [ENEMY] [Enemy4] Registered as sound listener
[20:26:01] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:26:01] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:26:01] [ENEMY] [Enemy5] Registered as sound listener
[20:26:01] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:26:01] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:26:01] [ENEMY] [Enemy6] Registered as sound listener
[20:26:01] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:26:01] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:26:01] [ENEMY] [Enemy7] Registered as sound listener
[20:26:01] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:26:01] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:26:01] [ENEMY] [Enemy8] Registered as sound listener
[20:26:01] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:26:01] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:26:01] [ENEMY] [Enemy9] Registered as sound listener
[20:26:01] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:26:01] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:26:01] [ENEMY] [Enemy10] Registered as sound listener
[20:26:01] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:26:01] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:26:01] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:26:01] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:26:01] [INFO] [LastChance] Found player: Player
[20:26:01] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:26:01] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:26:01] [INFO] [LastChance] Connected to player Died signal (C#)
[20:26:01] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:26:01] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:26:01] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:26:03] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:26:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(837.9019, 1350.055), shooter_id=3451996079496, bullet_pos=(912.8112, 1399.033)
[20:26:03] [INFO] [Bullet] Using shooter_position, distance=89.4999923706055
[20:26:03] [INFO] [Bullet] Distance to wall: 89.4999923706055 (6.09421905648856% of viewport)
[20:26:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:26:03] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1143.582, 1569.985), source=ENEMY (Enemy10), range=1469, listeners=20
[20:26:03] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:26:03] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:26:03] [INFO] [LastChance] Threat detected: Bullet
[20:26:03] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:26:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1116.186, 1545.295), source=ENEMY (Enemy10), range=1469, listeners=10
[20:26:03] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:03] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:26:03] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:26:03] [INFO] [LastChance] Threat detected: @Area2D@4268
[20:26:03] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:26:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:04] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:26:04] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:26:04] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:26:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(835.8392, 1385.063), shooter_id=3451996079496, bullet_pos=(893.3519, 1419.433)
[20:26:04] [INFO] [Bullet] Using shooter_position, distance=66.9999923706055
[20:26:04] [INFO] [Bullet] Distance to wall: 66.9999923706055 (4.56215268263681% of viewport)
[20:26:04] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:26:04] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:04] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
[20:26:04] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:26:04] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:26:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(863.7271, 1347.939), shooter_id=3451996079496, bullet_pos=(1496.424, 1735.569)
[20:26:04] [INFO] [Bullet] Using shooter_position, distance=741.998718261719
[20:26:04] [INFO] [Bullet] Distance to wall: 741.998718261719 (50.5240571417722% of viewport)
[20:26:04] [INFO] [Bullet] Distance-based penetration chance: 87.7219333345991%
[20:26:04] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:04] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:26:04] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:26:04] [ENEMY] [Enemy1] Death animation component initialized
[20:26:04] [ENEMY] [Enemy2] Death animation component initialized
[20:26:04] [ENEMY] [Enemy3] Death animation component initialized
[20:26:04] [ENEMY] [Enemy4] Death animation component initialized
[20:26:04] [ENEMY] [Enemy5] Death animation component initialized
[20:26:04] [ENEMY] [Enemy6] Death animation component initialized
[20:26:04] [ENEMY] [Enemy7] Death animation component initialized
[20:26:04] [ENEMY] [Enemy8] Death animation component initialized
[20:26:04] [ENEMY] [Enemy9] Death animation component initialized
[20:26:04] [ENEMY] [Enemy10] Death animation component initialized
[20:26:04] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:26:04] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:26:04] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:26:04] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:26:04] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:26:04] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:26:04] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:26:04] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:26:04] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:26:04] [INFO] [ScoreManager] Level started with 10 enemies
[20:26:04] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:26:04] [ENEMY] [Enemy1] Registered as sound listener
[20:26:04] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:26:04] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:26:04] [ENEMY] [Enemy2] Registered as sound listener
[20:26:04] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:26:04] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:26:04] [ENEMY] [Enemy3] Registered as sound listener
[20:26:04] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:26:04] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:26:04] [ENEMY] [Enemy4] Registered as sound listener
[20:26:04] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:26:04] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:26:04] [ENEMY] [Enemy5] Registered as sound listener
[20:26:04] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:26:04] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:26:04] [ENEMY] [Enemy6] Registered as sound listener
[20:26:04] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:26:04] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:26:04] [ENEMY] [Enemy7] Registered as sound listener
[20:26:04] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:26:04] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:26:04] [ENEMY] [Enemy8] Registered as sound listener
[20:26:04] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:26:04] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:26:04] [ENEMY] [Enemy9] Registered as sound listener
[20:26:04] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:26:04] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:26:04] [ENEMY] [Enemy10] Registered as sound listener
[20:26:04] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:26:04] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:26:04] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:26:04] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:26:04] [INFO] [LastChance] Found player: Player
[20:26:04] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:26:04] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:26:04] [INFO] [LastChance] Connected to player Died signal (C#)
[20:26:04] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:26:04] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:26:04] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:26:06] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:26:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1132.407, 1559.538), source=ENEMY (Enemy10), range=1469, listeners=20
[20:26:06] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:26:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:07] [INFO] [LastChance] Threat detected: Bullet
[20:26:07] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:26:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1103.727, 1535.637), source=ENEMY (Enemy10), range=1469, listeners=10
[20:26:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:26:07] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:26:07] [ENEMY] [Enemy10] Hit taken, health: 3/4
[20:26:07] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:26:07] [INFO] [ImpactEffects] spawn_blood_effect called at (1095.458, 1528.9), dir=(0.822426, 0.568872), lethal=false
[20:26:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:26:07] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:26:07] [INFO] [ImpactEffects] Blood effect spawned at (1095.458, 1528.9) (scale=0.9)
[20:26:07] [INFO] [LastChance] Threat detected: @Area2D@4527
[20:26:07] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:26:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:26:07] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:26:07] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:26:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1074.342, 1512.618), source=ENEMY (Enemy10), range=1469, listeners=10
[20:26:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:07] [INFO] [LastChance] Threat detected: Bullet
[20:26:07] [INFO] [LastChance] Triggering last chance effect!
[20:26:07] [INFO] [LastChance] Starting last chance effect:
[20:26:07] [INFO] [LastChance]   - Time will be frozen (except player)
[20:26:07] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:26:07] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:26:07] [INFO] [LastChance]   - Brightness: 0.60
[20:26:07] [INFO] [LastChance] Pushed bullet Bullet9mm from distance 141.0 to 200.0
[20:26:07] [INFO] [LastChance] Pushed bullet Bullet from distance 141.6 to 200.0
[20:26:07] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[20:26:07] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:26:07] [INFO] [LastChance] Skipping player node: Player
[20:26:07] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:26:07] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4526
[20:26:07] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4528
[20:26:07] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4529
[20:26:07] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4530
[20:26:07] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:26:07] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:26:07] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:26:07] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@4531
[20:26:07] [INFO] [LastChance] Registered frozen player bullet: @Area2D@4531
[20:26:07] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@4532
[20:26:07] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@4532
[20:26:07] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:07] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:07] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:26:07] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:26:07] [INFO] [LastChance] Ending last chance effect
[20:26:07] [INFO] [LastChance] All process modes restored
[20:26:07] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:26:07] [ENEMY] [Enemy1] Death animation component initialized
[20:26:07] [ENEMY] [Enemy2] Death animation component initialized
[20:26:07] [ENEMY] [Enemy3] Death animation component initialized
[20:26:07] [ENEMY] [Enemy4] Death animation component initialized
[20:26:07] [ENEMY] [Enemy5] Death animation component initialized
[20:26:07] [ENEMY] [Enemy6] Death animation component initialized
[20:26:07] [ENEMY] [Enemy7] Death animation component initialized
[20:26:07] [ENEMY] [Enemy8] Death animation component initialized
[20:26:07] [ENEMY] [Enemy9] Death animation component initialized
[20:26:07] [ENEMY] [Enemy10] Death animation component initialized
[20:26:07] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:26:07] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:26:07] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:26:07] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:26:07] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:26:07] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:26:07] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:26:07] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:26:07] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:26:07] [INFO] [ScoreManager] Level started with 10 enemies
[20:26:07] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:26:07] [ENEMY] [Enemy1] Registered as sound listener
[20:26:07] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:26:07] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:26:07] [ENEMY] [Enemy2] Registered as sound listener
[20:26:07] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:26:07] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:26:07] [ENEMY] [Enemy3] Registered as sound listener
[20:26:07] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:26:07] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:26:07] [ENEMY] [Enemy4] Registered as sound listener
[20:26:07] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:26:07] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:26:07] [ENEMY] [Enemy5] Registered as sound listener
[20:26:07] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:26:07] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:26:07] [ENEMY] [Enemy6] Registered as sound listener
[20:26:07] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:26:07] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:26:07] [ENEMY] [Enemy7] Registered as sound listener
[20:26:07] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:26:07] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:26:07] [ENEMY] [Enemy8] Registered as sound listener
[20:26:07] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:26:07] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:26:07] [ENEMY] [Enemy9] Registered as sound listener
[20:26:07] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:26:07] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:26:07] [ENEMY] [Enemy10] Registered as sound listener
[20:26:07] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:26:07] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:26:07] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:26:07] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:26:07] [INFO] [LastChance] Found player: Player
[20:26:07] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:26:07] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:26:07] [INFO] [LastChance] Connected to player Died signal (C#)
[20:26:07] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:26:07] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:26:07] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:26:08] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:26:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1143.5, 1519.95), source=ENEMY (Enemy10), range=1469, listeners=20
[20:26:08] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:26:08] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:08] [INFO] [LastChance] Threat detected: Bullet
[20:26:08] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:26:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:26:08] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:26:09] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:26:12] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:12] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:12] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:26:12] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:26:12] [ENEMY] [Enemy1] Death animation component initialized
[20:26:12] [ENEMY] [Enemy2] Death animation component initialized
[20:26:12] [ENEMY] [Enemy3] Death animation component initialized
[20:26:12] [ENEMY] [Enemy4] Death animation component initialized
[20:26:12] [ENEMY] [Enemy5] Death animation component initialized
[20:26:12] [ENEMY] [Enemy6] Death animation component initialized
[20:26:12] [ENEMY] [Enemy7] Death animation component initialized
[20:26:12] [ENEMY] [Enemy8] Death animation component initialized
[20:26:12] [ENEMY] [Enemy9] Death animation component initialized
[20:26:12] [ENEMY] [Enemy10] Death animation component initialized
[20:26:12] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:26:12] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:26:12] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:26:12] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:26:12] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:26:12] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:26:12] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:26:12] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:26:12] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:26:12] [INFO] [ScoreManager] Level started with 10 enemies
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:26:12] [ENEMY] [Enemy1] Registered as sound listener
[20:26:12] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:26:12] [ENEMY] [Enemy2] Registered as sound listener
[20:26:12] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:26:12] [ENEMY] [Enemy3] Registered as sound listener
[20:26:12] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:26:12] [ENEMY] [Enemy4] Registered as sound listener
[20:26:12] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:26:12] [ENEMY] [Enemy5] Registered as sound listener
[20:26:12] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:26:12] [ENEMY] [Enemy6] Registered as sound listener
[20:26:12] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:26:12] [ENEMY] [Enemy7] Registered as sound listener
[20:26:12] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:26:12] [ENEMY] [Enemy8] Registered as sound listener
[20:26:12] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:26:12] [ENEMY] [Enemy9] Registered as sound listener
[20:26:12] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:26:12] [ENEMY] [Enemy10] Registered as sound listener
[20:26:12] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:26:12] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:12] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:12] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:26:12] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:26:12] [ENEMY] [Enemy1] Death animation component initialized
[20:26:12] [ENEMY] [Enemy2] Death animation component initialized
[20:26:12] [ENEMY] [Enemy3] Death animation component initialized
[20:26:12] [ENEMY] [Enemy4] Death animation component initialized
[20:26:12] [ENEMY] [Enemy5] Death animation component initialized
[20:26:12] [ENEMY] [Enemy6] Death animation component initialized
[20:26:12] [ENEMY] [Enemy7] Death animation component initialized
[20:26:12] [ENEMY] [Enemy8] Death animation component initialized
[20:26:12] [ENEMY] [Enemy9] Death animation component initialized
[20:26:12] [ENEMY] [Enemy10] Death animation component initialized
[20:26:12] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:26:12] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:26:12] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:26:12] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:26:12] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:26:12] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:26:12] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:26:12] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:26:12] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:26:12] [INFO] [ScoreManager] Level started with 10 enemies
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:26:12] [ENEMY] [Enemy1] Registered as sound listener
[20:26:12] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:26:12] [ENEMY] [Enemy2] Registered as sound listener
[20:26:12] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:26:12] [ENEMY] [Enemy3] Registered as sound listener
[20:26:12] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:26:12] [ENEMY] [Enemy4] Registered as sound listener
[20:26:12] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:26:12] [ENEMY] [Enemy5] Registered as sound listener
[20:26:12] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:26:12] [ENEMY] [Enemy6] Registered as sound listener
[20:26:12] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:26:12] [ENEMY] [Enemy7] Registered as sound listener
[20:26:12] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:26:12] [ENEMY] [Enemy8] Registered as sound listener
[20:26:12] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:26:12] [ENEMY] [Enemy9] Registered as sound listener
[20:26:12] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:26:12] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:26:12] [ENEMY] [Enemy10] Registered as sound listener
[20:26:12] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:26:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:13] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:26:13] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:26:13] [ENEMY] [Enemy1] Death animation component initialized
[20:26:13] [ENEMY] [Enemy2] Death animation component initialized
[20:26:13] [ENEMY] [Enemy3] Death animation component initialized
[20:26:13] [ENEMY] [Enemy4] Death animation component initialized
[20:26:13] [ENEMY] [Enemy5] Death animation component initialized
[20:26:13] [ENEMY] [Enemy6] Death animation component initialized
[20:26:13] [ENEMY] [Enemy7] Death animation component initialized
[20:26:13] [ENEMY] [Enemy8] Death animation component initialized
[20:26:13] [ENEMY] [Enemy9] Death animation component initialized
[20:26:13] [ENEMY] [Enemy10] Death animation component initialized
[20:26:13] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:26:13] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:26:13] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:26:13] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:26:13] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:26:13] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:26:13] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:26:13] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:26:13] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:26:13] [INFO] [ScoreManager] Level started with 10 enemies
[20:26:13] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 31)
[20:26:13] [ENEMY] [Enemy1] Registered as sound listener
[20:26:13] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:26:13] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 32)
[20:26:13] [ENEMY] [Enemy2] Registered as sound listener
[20:26:13] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:26:13] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 33)
[20:26:13] [ENEMY] [Enemy3] Registered as sound listener
[20:26:13] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:26:13] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 34)
[20:26:13] [ENEMY] [Enemy4] Registered as sound listener
[20:26:13] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:26:13] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 35)
[20:26:13] [ENEMY] [Enemy5] Registered as sound listener
[20:26:13] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:26:13] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 36)
[20:26:13] [ENEMY] [Enemy6] Registered as sound listener
[20:26:13] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:26:13] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 37)
[20:26:13] [ENEMY] [Enemy7] Registered as sound listener
[20:26:13] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:26:13] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 38)
[20:26:13] [ENEMY] [Enemy8] Registered as sound listener
[20:26:13] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:26:13] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 39)
[20:26:13] [ENEMY] [Enemy9] Registered as sound listener
[20:26:13] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:26:13] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 40)
[20:26:13] [ENEMY] [Enemy10] Registered as sound listener
[20:26:13] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:26:15] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:26:15] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:26:15] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:26:15] [INFO] [LastChance] Found player: Player
[20:26:15] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:26:15] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:26:15] [INFO] [LastChance] Connected to player Died signal (C#)
[20:26:15] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:26:15] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:26:15] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:26:15] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:15] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:15] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:26:15] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:26:15] [ENEMY] [Enemy1] Death animation component initialized
[20:26:15] [ENEMY] [Enemy2] Death animation component initialized
[20:26:15] [ENEMY] [Enemy3] Death animation component initialized
[20:26:15] [ENEMY] [Enemy4] Death animation component initialized
[20:26:15] [ENEMY] [Enemy5] Death animation component initialized
[20:26:15] [ENEMY] [Enemy6] Death animation component initialized
[20:26:15] [ENEMY] [Enemy7] Death animation component initialized
[20:26:15] [ENEMY] [Enemy8] Death animation component initialized
[20:26:15] [ENEMY] [Enemy9] Death animation component initialized
[20:26:15] [ENEMY] [Enemy10] Death animation component initialized
[20:26:15] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:26:15] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:26:15] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:26:15] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:26:15] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:26:15] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:26:15] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:26:15] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:26:15] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:26:15] [INFO] [ScoreManager] Level started with 10 enemies
[20:26:15] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 41)
[20:26:15] [ENEMY] [Enemy1] Registered as sound listener
[20:26:15] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:26:15] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 42)
[20:26:15] [ENEMY] [Enemy2] Registered as sound listener
[20:26:15] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:26:15] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 43)
[20:26:15] [ENEMY] [Enemy3] Registered as sound listener
[20:26:15] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:26:15] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 44)
[20:26:15] [ENEMY] [Enemy4] Registered as sound listener
[20:26:15] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:26:15] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 45)
[20:26:15] [ENEMY] [Enemy5] Registered as sound listener
[20:26:15] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:26:15] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 46)
[20:26:15] [ENEMY] [Enemy6] Registered as sound listener
[20:26:15] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:26:15] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 47)
[20:26:15] [ENEMY] [Enemy7] Registered as sound listener
[20:26:15] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:26:15] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 48)
[20:26:15] [ENEMY] [Enemy8] Registered as sound listener
[20:26:15] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:26:15] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 49)
[20:26:15] [ENEMY] [Enemy9] Registered as sound listener
[20:26:15] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:26:15] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 50)
[20:26:15] [ENEMY] [Enemy10] Registered as sound listener
[20:26:15] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:26:15] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:26:15] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:26:15] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:26:15] [INFO] [LastChance] Found player: Player
[20:26:15] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:26:15] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:26:15] [INFO] [LastChance] Connected to player Died signal (C#)
[20:26:15] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:26:15] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:26:15] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:26:19] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:26:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(871.9886, 1323.755), shooter_id=3968969214535, bullet_pos=(986.1249, 1394.911)
[20:26:19] [INFO] [Bullet] Using shooter_position, distance=134.500183105469
[20:26:19] [INFO] [Bullet] Distance to wall: 134.500183105469 (9.15836479167962% of viewport)
[20:26:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:26:19] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:19] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:26:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(871.9886, 1357.588), shooter_id=3968969214535, bullet_pos=(1487.237, 1730.614)
[20:26:19] [INFO] [Bullet] Using shooter_position, distance=719.499328613281
[20:26:19] [INFO] [Bullet] Distance to wall: 719.499328613281 (48.9920323278807% of viewport)
[20:26:19] [INFO] [Bullet] Distance-based penetration chance: 89.5092956174725%
[20:26:19] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:19] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:26:19] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:26:19] [ENEMY] [Enemy1] Death animation component initialized
[20:26:19] [ENEMY] [Enemy2] Death animation component initialized
[20:26:19] [ENEMY] [Enemy3] Death animation component initialized
[20:26:19] [ENEMY] [Enemy4] Death animation component initialized
[20:26:19] [ENEMY] [Enemy5] Death animation component initialized
[20:26:19] [ENEMY] [Enemy6] Death animation component initialized
[20:26:19] [ENEMY] [Enemy7] Death animation component initialized
[20:26:19] [ENEMY] [Enemy8] Death animation component initialized
[20:26:19] [ENEMY] [Enemy9] Death animation component initialized
[20:26:19] [ENEMY] [Enemy10] Death animation component initialized
[20:26:19] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:26:19] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:26:19] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:26:19] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:26:19] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:26:19] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:26:19] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:26:19] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:26:19] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:26:19] [INFO] [ScoreManager] Level started with 10 enemies
[20:26:19] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 51)
[20:26:19] [ENEMY] [Enemy1] Registered as sound listener
[20:26:19] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:26:19] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 52)
[20:26:19] [ENEMY] [Enemy2] Registered as sound listener
[20:26:19] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:26:19] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 53)
[20:26:19] [ENEMY] [Enemy3] Registered as sound listener
[20:26:19] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:26:19] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 54)
[20:26:19] [ENEMY] [Enemy4] Registered as sound listener
[20:26:19] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:26:19] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 55)
[20:26:19] [ENEMY] [Enemy5] Registered as sound listener
[20:26:19] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:26:19] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 56)
[20:26:19] [ENEMY] [Enemy6] Registered as sound listener
[20:26:19] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:26:19] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 57)
[20:26:19] [ENEMY] [Enemy7] Registered as sound listener
[20:26:19] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:26:19] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 58)
[20:26:19] [ENEMY] [Enemy8] Registered as sound listener
[20:26:19] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:26:19] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 59)
[20:26:19] [ENEMY] [Enemy9] Registered as sound listener
[20:26:19] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:26:19] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 60)
[20:26:19] [ENEMY] [Enemy10] Registered as sound listener
[20:26:19] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:26:19] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:26:19] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:26:19] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:26:19] [INFO] [LastChance] Found player: Player
[20:26:19] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:26:19] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:26:19] [INFO] [LastChance] Connected to player Died signal (C#)
[20:26:20] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:26:20] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:26:20] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:26:21] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:26:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1092.322, 1523.781), source=ENEMY (Enemy10), range=1469, listeners=60
[20:26:22] [INFO] [SoundPropagation] Cleaned up 50 invalid listeners
[20:26:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:22] [INFO] [LastChance] Threat detected: Bullet
[20:26:22] [INFO] [LastChance] Not in hard mode - effect disabled
[20:26:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:26:22] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:26:22] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:26:22] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:26:22] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:26:22] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:26:22] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:26:22] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:26:22] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:26:22] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:26:22] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:26:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1092.322, 1523.781), source=ENEMY (Enemy10), range=1469, listeners=10
[20:26:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:22] [INFO] [LastChance] Threat detected: Bullet
[20:26:22] [INFO] [LastChance] Not in hard mode - effect disabled
[20:26:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:22] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:26:22] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:26:22] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:26:22] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:26:22] [ENEMY] [Enemy1] Death animation component initialized
[20:26:22] [ENEMY] [Enemy2] Death animation component initialized
[20:26:22] [ENEMY] [Enemy3] Death animation component initialized
[20:26:22] [ENEMY] [Enemy4] Death animation component initialized
[20:26:22] [ENEMY] [Enemy5] Death animation component initialized
[20:26:22] [ENEMY] [Enemy6] Death animation component initialized
[20:26:22] [ENEMY] [Enemy7] Death animation component initialized
[20:26:22] [ENEMY] [Enemy8] Death animation component initialized
[20:26:22] [ENEMY] [Enemy9] Death animation component initialized
[20:26:22] [ENEMY] [Enemy10] Death animation component initialized
[20:26:22] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:26:22] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:26:22] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:26:22] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:26:22] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:26:22] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:26:22] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:26:22] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:26:22] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:26:22] [INFO] [ScoreManager] Level started with 10 enemies
[20:26:22] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:26:22] [ENEMY] [Enemy1] Registered as sound listener
[20:26:22] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:26:22] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:26:22] [ENEMY] [Enemy2] Registered as sound listener
[20:26:22] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:26:22] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:26:22] [ENEMY] [Enemy3] Registered as sound listener
[20:26:22] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:26:22] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:26:22] [ENEMY] [Enemy4] Registered as sound listener
[20:26:22] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:26:22] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:26:22] [ENEMY] [Enemy5] Registered as sound listener
[20:26:22] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:26:22] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:26:22] [ENEMY] [Enemy6] Registered as sound listener
[20:26:22] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:26:22] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:26:22] [ENEMY] [Enemy7] Registered as sound listener
[20:26:22] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:26:22] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:26:22] [ENEMY] [Enemy8] Registered as sound listener
[20:26:22] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:26:22] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:26:22] [ENEMY] [Enemy9] Registered as sound listener
[20:26:22] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:26:22] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:26:22] [ENEMY] [Enemy10] Registered as sound listener
[20:26:22] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:26:22] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:26:22] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:26:22] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:26:22] [INFO] [LastChance] Found player: Player
[20:26:22] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:26:22] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:26:22] [INFO] [LastChance] Connected to player Died signal (C#)
[20:26:22] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:26:22] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:26:22] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:26:24] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:26:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1086.286, 1523.353), source=ENEMY (Enemy10), range=1469, listeners=20
[20:26:24] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:26:24] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:24] [INFO] [LastChance] Threat detected: Bullet
[20:26:24] [INFO] [LastChance] Not in hard mode - effect disabled
[20:26:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:24] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:26:24] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:26:25] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:25] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:25] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:26:25] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:26:25] [ENEMY] [Enemy1] Death animation component initialized
[20:26:25] [ENEMY] [Enemy2] Death animation component initialized
[20:26:25] [ENEMY] [Enemy3] Death animation component initialized
[20:26:25] [ENEMY] [Enemy4] Death animation component initialized
[20:26:25] [ENEMY] [Enemy5] Death animation component initialized
[20:26:25] [ENEMY] [Enemy6] Death animation component initialized
[20:26:25] [ENEMY] [Enemy7] Death animation component initialized
[20:26:25] [ENEMY] [Enemy8] Death animation component initialized
[20:26:25] [ENEMY] [Enemy9] Death animation component initialized
[20:26:25] [ENEMY] [Enemy10] Death animation component initialized
[20:26:25] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:26:25] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:26:25] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:26:25] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:26:25] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:26:25] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:26:25] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:26:25] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:26:25] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:26:25] [INFO] [ScoreManager] Level started with 10 enemies
[20:26:25] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:26:25] [ENEMY] [Enemy1] Registered as sound listener
[20:26:25] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:26:25] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:26:25] [ENEMY] [Enemy2] Registered as sound listener
[20:26:25] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:26:25] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:26:25] [ENEMY] [Enemy3] Registered as sound listener
[20:26:25] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:26:25] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:26:25] [ENEMY] [Enemy4] Registered as sound listener
[20:26:25] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:26:25] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:26:25] [ENEMY] [Enemy5] Registered as sound listener
[20:26:25] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:26:25] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:26:25] [ENEMY] [Enemy6] Registered as sound listener
[20:26:25] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:26:25] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:26:25] [ENEMY] [Enemy7] Registered as sound listener
[20:26:25] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:26:25] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:26:25] [ENEMY] [Enemy8] Registered as sound listener
[20:26:25] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:26:25] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:26:25] [ENEMY] [Enemy9] Registered as sound listener
[20:26:25] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:26:25] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:26:25] [ENEMY] [Enemy10] Registered as sound listener
[20:26:25] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:26:25] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:26:25] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:26:25] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:26:25] [INFO] [LastChance] Found player: Player
[20:26:25] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:26:25] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:26:25] [INFO] [LastChance] Connected to player Died signal (C#)
[20:26:25] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:26:25] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:26:25] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:26:26] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:26:27] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:26:30] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[20:26:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(954.1316, 1485.596), source=ENEMY (Enemy10), range=1469, listeners=20
[20:26:31] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:26:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(911.7827, 1432.331), shooter_id=4505101928080, bullet_pos=(911.7827, 1432.331)
[20:26:31] [INFO] [Bullet] Using shooter_position, distance=0
[20:26:31] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[20:26:31] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:26:31] [INFO] [Bullet] Starting wall penetration at (911.7827, 1432.331)
[20:26:31] [INFO] [LastChance] Threat detected: Bullet
[20:26:31] [INFO] [LastChance] Not in hard mode - effect disabled
[20:26:31] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:31] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8.58173847198486
[20:26:31] [INFO] [Bullet] Body exited signal received for penetrating body
[20:26:31] [INFO] [Bullet] Exiting penetration at (887.1188, 1392.715) after traveling 41.6666679382324 pixels through wall
[20:26:31] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:26:31] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:26:31] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:26:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(954.1316, 1485.596), source=ENEMY (Enemy10), range=1469, listeners=10
[20:26:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(911.7827, 1432.331), shooter_id=4505101928080, bullet_pos=(911.7827, 1432.331)
[20:26:31] [INFO] [Bullet] Using shooter_position, distance=0
[20:26:31] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[20:26:31] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:26:31] [INFO] [Bullet] Starting wall penetration at (911.7827, 1432.331)
[20:26:31] [INFO] [LastChance] Threat detected: Bullet
[20:26:31] [INFO] [LastChance] Not in hard mode - effect disabled
[20:26:31] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:31] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8.58173847198486
[20:26:31] [INFO] [Bullet] Body exited signal received for penetrating body
[20:26:31] [INFO] [Bullet] Exiting penetration at (887.1188, 1392.715) after traveling 41.6666679382324 pixels through wall
[20:26:31] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:26:31] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:26:31] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:26:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(954.1316, 1485.596), source=ENEMY (Enemy10), range=1469, listeners=10
[20:26:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(911.7827, 1432.331), shooter_id=4505101928080, bullet_pos=(911.7827, 1432.331)
[20:26:31] [INFO] [Bullet] Using shooter_position, distance=0
[20:26:31] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[20:26:31] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:26:31] [INFO] [Bullet] Starting wall penetration at (911.7827, 1432.331)
[20:26:31] [INFO] [LastChance] Threat detected: Bullet
[20:26:31] [INFO] [LastChance] Not in hard mode - effect disabled
[20:26:31] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:31] [INFO] [Bullet] Raycast backward hit penetrating body at distance 8.58173847198486
[20:26:31] [INFO] [Bullet] Body exited signal received for penetrating body
[20:26:31] [INFO] [Bullet] Exiting penetration at (887.1188, 1392.715) after traveling 41.6666679382324 pixels through wall
[20:26:31] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:26:31] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:26:31] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:26:31] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:26:31] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:26:31] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:26:31] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:26:31] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:26:31] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:26:31] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:26:31] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:26:31] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:26:32] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:32] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:32] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:26:32] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:26:32] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:26:32] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:26:32] [ENEMY] [Enemy1] Death animation component initialized
[20:26:32] [ENEMY] [Enemy2] Death animation component initialized
[20:26:32] [ENEMY] [Enemy3] Death animation component initialized
[20:26:32] [ENEMY] [Enemy4] Death animation component initialized
[20:26:32] [ENEMY] [Enemy5] Death animation component initialized
[20:26:32] [ENEMY] [Enemy6] Death animation component initialized
[20:26:32] [ENEMY] [Enemy7] Death animation component initialized
[20:26:32] [ENEMY] [Enemy8] Death animation component initialized
[20:26:32] [ENEMY] [Enemy9] Death animation component initialized
[20:26:32] [ENEMY] [Enemy10] Death animation component initialized
[20:26:32] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:26:32] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:26:32] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:26:32] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:26:32] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:26:32] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:26:32] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:26:32] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:26:32] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:26:32] [INFO] [ScoreManager] Level started with 10 enemies
[20:26:32] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:26:32] [ENEMY] [Enemy1] Registered as sound listener
[20:26:32] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:26:32] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:26:32] [ENEMY] [Enemy2] Registered as sound listener
[20:26:32] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:26:32] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:26:32] [ENEMY] [Enemy3] Registered as sound listener
[20:26:32] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:26:32] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:26:32] [ENEMY] [Enemy4] Registered as sound listener
[20:26:32] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:26:32] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:26:32] [ENEMY] [Enemy5] Registered as sound listener
[20:26:32] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:26:32] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:26:32] [ENEMY] [Enemy6] Registered as sound listener
[20:26:32] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:26:32] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:26:32] [ENEMY] [Enemy7] Registered as sound listener
[20:26:32] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:26:32] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:26:32] [ENEMY] [Enemy8] Registered as sound listener
[20:26:32] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:26:32] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:26:32] [ENEMY] [Enemy9] Registered as sound listener
[20:26:32] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:26:32] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:26:32] [ENEMY] [Enemy10] Registered as sound listener
[20:26:32] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:26:32] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:26:32] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:26:32] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:26:32] [INFO] [LastChance] Found player: Player
[20:26:32] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:26:32] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:26:32] [INFO] [LastChance] Connected to player Died signal (C#)
[20:26:32] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:26:32] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:26:32] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:26:33] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:26:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(759.2173, 1292.213), shooter_id=4884418004388, bullet_pos=(896.7308, 1407.583)
[20:26:34] [INFO] [Bullet] Using shooter_position, distance=179.499877929688
[20:26:34] [INFO] [Bullet] Distance to wall: 179.499877929688 (12.222476759403% of viewport)
[20:26:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:26:34] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:34] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:26:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(811.2108, 1235.038), shooter_id=4884418004388, bullet_pos=(993.3358, 1401.889)
[20:26:34] [INFO] [Bullet] Using shooter_position, distance=246.999588012695
[20:26:34] [INFO] [Bullet] Distance to wall: 246.999588012695 (16.8186561399771% of viewport)
[20:26:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:26:34] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:34] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
[20:26:34] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:26:34] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:26:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(831.1566, 1209.321), shooter_id=4884418004388, bullet_pos=(1043.333, 1375.488)
[20:26:34] [INFO] [Bullet] Using shooter_position, distance=269.499908447266
[20:26:34] [INFO] [Bullet] Distance to wall: 269.499908447266 (18.350744332808% of viewport)
[20:26:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:26:34] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(881.4871, 1252.1), shooter_id=4884418004388, bullet_pos=(1061.782, 1385.869)
[20:26:34] [INFO] [Bullet] Using shooter_position, distance=224.499954223633
[20:26:34] [INFO] [Bullet] Distance to wall: 224.499954223633 (15.2866147021015% of viewport)
[20:26:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:26:34] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:34] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
[20:26:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(891.4122, 1315.606), shooter_id=4884418004388, bullet_pos=(1007.141, 1384.141)
[20:26:35] [INFO] [Bullet] Using shooter_position, distance=134.500015258789
[20:26:35] [INFO] [Bullet] Distance to wall: 134.500015258789 (9.15835336269056% of viewport)
[20:26:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:26:35] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(891.4122, 1315.606), shooter_id=4884418004388, bullet_pos=(1007.141, 1384.141)
[20:26:35] [INFO] [Bullet] Using shooter_position, distance=134.500015258789
[20:26:35] [INFO] [Bullet] Distance to wall: 134.500015258789 (9.15835336269056% of viewport)
[20:26:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:26:35] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:35] [ENEMY] [Enemy10] State: SEEKING_COVER -> IN_COVER
[20:26:35] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:26:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(836.4092, 1389.677), shooter_id=4884418004388, bullet_pos=(894.4413, 1423.163)
[20:26:35] [INFO] [Bullet] Using shooter_position, distance=67.0000152587891
[20:26:35] [INFO] [Bullet] Distance to wall: 67.0000152587891 (4.56215424113532% of viewport)
[20:26:35] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:26:35] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:26:36] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:26:36] [ENEMY] [Enemy1] Death animation component initialized
[20:26:36] [ENEMY] [Enemy2] Death animation component initialized
[20:26:36] [ENEMY] [Enemy3] Death animation component initialized
[20:26:36] [ENEMY] [Enemy4] Death animation component initialized
[20:26:36] [ENEMY] [Enemy5] Death animation component initialized
[20:26:36] [ENEMY] [Enemy6] Death animation component initialized
[20:26:36] [ENEMY] [Enemy7] Death animation component initialized
[20:26:36] [ENEMY] [Enemy8] Death animation component initialized
[20:26:36] [ENEMY] [Enemy9] Death animation component initialized
[20:26:36] [ENEMY] [Enemy10] Death animation component initialized
[20:26:36] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:26:36] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:26:36] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:26:36] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:26:36] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:26:36] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:26:36] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:26:36] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:26:36] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:26:36] [INFO] [ScoreManager] Level started with 10 enemies
[20:26:36] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:26:36] [ENEMY] [Enemy1] Registered as sound listener
[20:26:36] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:26:36] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:26:36] [ENEMY] [Enemy2] Registered as sound listener
[20:26:36] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:26:36] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:26:36] [ENEMY] [Enemy3] Registered as sound listener
[20:26:36] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:26:36] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:26:36] [ENEMY] [Enemy4] Registered as sound listener
[20:26:36] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:26:36] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:26:36] [ENEMY] [Enemy5] Registered as sound listener
[20:26:36] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:26:36] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:26:36] [ENEMY] [Enemy6] Registered as sound listener
[20:26:36] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:26:36] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:26:36] [ENEMY] [Enemy7] Registered as sound listener
[20:26:36] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:26:36] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:26:36] [ENEMY] [Enemy8] Registered as sound listener
[20:26:36] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:26:36] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:26:36] [ENEMY] [Enemy9] Registered as sound listener
[20:26:36] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:26:36] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:26:36] [ENEMY] [Enemy10] Registered as sound listener
[20:26:36] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:26:36] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:26:36] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:26:36] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:26:36] [INFO] [LastChance] Found player: Player
[20:26:36] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:26:36] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:26:36] [INFO] [LastChance] Connected to player Died signal (C#)
[20:26:36] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:26:36] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:26:36] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:26:37] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:26:37] [ENEMY] [Enemy10] Hit taken, health: 3/4
[20:26:37] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:26:37] [INFO] [ImpactEffects] spawn_blood_effect called at (1076.732, 1475.944), dir=(0.855381, 0.518), lethal=false
[20:26:37] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:26:37] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:26:37] [INFO] [ImpactEffects] Blood effect spawned at (1076.732, 1475.944) (scale=0.9)
[20:26:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1068.1, 1469.678), source=ENEMY (Enemy10), range=1469, listeners=30
[20:26:37] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[20:26:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:37] [INFO] [LastChance] Threat detected: Bullet
[20:26:37] [INFO] [LastChance] Not in hard mode - effect disabled
[20:26:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:26:37] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:26:37] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:26:37] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:26:37] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:26:37] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:26:37] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:26:37] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:26:37] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:26:37] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:26:37] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:26:38] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:26:38] [ENEMY] [Enemy10] Hit taken, health: 2/4
[20:26:38] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:26:38] [INFO] [ImpactEffects] spawn_blood_effect called at (1068.749, 1469.21), dir=(0.852676, 0.52244), lethal=false
[20:26:38] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:26:38] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:26:38] [INFO] [ImpactEffects] Blood effect spawned at (1068.749, 1469.21) (scale=0.9)
[20:26:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1075.887, 1464.062), source=ENEMY (Enemy10), range=1469, listeners=10
[20:26:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:38] [INFO] [LastChance] Threat detected: Bullet
[20:26:38] [INFO] [LastChance] Not in hard mode - effect disabled
[20:26:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1013.749, 1436.323), shooter_id=5117369649771, bullet_pos=(915.5603, 1401.542)
[20:26:39] [INFO] [Bullet] Using shooter_position, distance=104.166915893555
[20:26:39] [INFO] [Bullet] Distance to wall: 104.166915893555 (7.09291684926036% of viewport)
[20:26:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:26:39] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:26:39] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:26:39] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:26:39] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:26:39] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:26:39] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[20:26:39] [INFO] [LastChance] Player died
[20:26:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.944, 1459.693), source=ENEMY (Enemy10), range=1469, listeners=10
[20:26:39] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:39] [INFO] [LastChance] Threat detected: Bullet
[20:26:39] [INFO] [LastChance] Not in hard mode - effect disabled
[20:26:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1088.422, 1451.4), source=ENEMY (Enemy10), range=1469, listeners=10
[20:26:39] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:39] [INFO] [LastChance] Threat detected: Bullet
[20:26:39] [INFO] [LastChance] Not in hard mode - effect disabled
[20:26:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:39] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:39] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:39] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:26:39] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:26:39] [ENEMY] [Enemy1] Death animation component initialized
[20:26:39] [ENEMY] [Enemy2] Death animation component initialized
[20:26:39] [ENEMY] [Enemy3] Death animation component initialized
[20:26:39] [ENEMY] [Enemy4] Death animation component initialized
[20:26:39] [ENEMY] [Enemy5] Death animation component initialized
[20:26:39] [ENEMY] [Enemy6] Death animation component initialized
[20:26:39] [ENEMY] [Enemy7] Death animation component initialized
[20:26:39] [ENEMY] [Enemy8] Death animation component initialized
[20:26:39] [ENEMY] [Enemy9] Death animation component initialized
[20:26:39] [ENEMY] [Enemy10] Death animation component initialized
[20:26:39] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:26:39] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:26:39] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:26:39] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:26:39] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:26:39] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:26:39] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:26:39] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:26:39] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:26:39] [INFO] [ScoreManager] Level started with 10 enemies
[20:26:39] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:26:39] [ENEMY] [Enemy1] Registered as sound listener
[20:26:39] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:26:39] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:26:39] [ENEMY] [Enemy2] Registered as sound listener
[20:26:39] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:26:39] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:26:39] [ENEMY] [Enemy3] Registered as sound listener
[20:26:39] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:26:39] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:26:39] [ENEMY] [Enemy4] Registered as sound listener
[20:26:39] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:26:39] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:26:39] [ENEMY] [Enemy5] Registered as sound listener
[20:26:39] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:26:39] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:26:39] [ENEMY] [Enemy6] Registered as sound listener
[20:26:39] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:26:39] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:26:39] [ENEMY] [Enemy7] Registered as sound listener
[20:26:39] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:26:39] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:26:39] [ENEMY] [Enemy8] Registered as sound listener
[20:26:39] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:26:39] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:26:39] [ENEMY] [Enemy9] Registered as sound listener
[20:26:39] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:26:39] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:26:39] [ENEMY] [Enemy10] Registered as sound listener
[20:26:39] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:26:39] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:26:39] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:26:39] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:26:39] [INFO] [LastChance] Found player: Player
[20:26:39] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:26:39] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:26:39] [INFO] [LastChance] Connected to player Died signal (C#)
[20:26:39] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:26:39] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:26:39] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:26:41] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:26:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1093.27, 1511.445), source=ENEMY (Enemy10), range=1469, listeners=20
[20:26:42] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:26:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:42] [INFO] [LastChance] Threat detected: Bullet
[20:26:42] [INFO] [LastChance] Not in hard mode - effect disabled
[20:26:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:42] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:26:42] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:26:42] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:26:42] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:26:42] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:26:42] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:26:42] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:26:42] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:26:42] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:26:42] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:26:42] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:26:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1093.27, 1511.445), source=ENEMY (Enemy10), range=1469, listeners=10
[20:26:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:42] [INFO] [LastChance] Threat detected: Bullet
[20:26:42] [INFO] [LastChance] Not in hard mode - effect disabled
[20:26:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:42] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:42] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:42] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:26:42] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:26:42] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:26:42] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:26:42] [ENEMY] [Enemy1] Death animation component initialized
[20:26:42] [ENEMY] [Enemy2] Death animation component initialized
[20:26:42] [ENEMY] [Enemy3] Death animation component initialized
[20:26:42] [ENEMY] [Enemy4] Death animation component initialized
[20:26:42] [ENEMY] [Enemy5] Death animation component initialized
[20:26:42] [ENEMY] [Enemy6] Death animation component initialized
[20:26:42] [ENEMY] [Enemy7] Death animation component initialized
[20:26:42] [ENEMY] [Enemy8] Death animation component initialized
[20:26:42] [ENEMY] [Enemy9] Death animation component initialized
[20:26:42] [ENEMY] [Enemy10] Death animation component initialized
[20:26:42] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:26:42] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:26:42] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:26:42] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:26:42] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:26:42] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:26:42] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:26:42] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:26:42] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:26:42] [INFO] [ScoreManager] Level started with 10 enemies
[20:26:42] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:26:42] [ENEMY] [Enemy1] Registered as sound listener
[20:26:42] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:26:42] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:26:42] [ENEMY] [Enemy2] Registered as sound listener
[20:26:42] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:26:42] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:26:42] [ENEMY] [Enemy3] Registered as sound listener
[20:26:42] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:26:42] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:26:42] [ENEMY] [Enemy4] Registered as sound listener
[20:26:42] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:26:42] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:26:42] [ENEMY] [Enemy5] Registered as sound listener
[20:26:42] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:26:42] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:26:42] [ENEMY] [Enemy6] Registered as sound listener
[20:26:42] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:26:42] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:26:42] [ENEMY] [Enemy7] Registered as sound listener
[20:26:42] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:26:42] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:26:42] [ENEMY] [Enemy8] Registered as sound listener
[20:26:42] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:26:42] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:26:42] [ENEMY] [Enemy9] Registered as sound listener
[20:26:42] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:26:42] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:26:42] [ENEMY] [Enemy10] Registered as sound listener
[20:26:42] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:26:42] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:26:42] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:26:42] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:26:42] [INFO] [LastChance] Found player: Player
[20:26:42] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:26:42] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:26:42] [INFO] [LastChance] Connected to player Died signal (C#)
[20:26:42] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:26:42] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:26:42] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:26:44] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:26:44] [ENEMY] [Enemy10] Hit taken, health: 1/2
[20:26:44] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:26:44] [INFO] [ImpactEffects] spawn_blood_effect called at (1115.795, 1535.696), dir=(0.846434, 0.532494), lethal=false
[20:26:44] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:26:44] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:26:44] [INFO] [ImpactEffects] Blood effect spawned at (1115.795, 1535.696) (scale=0.9)
[20:26:44] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:26:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1104.524, 1528.188), source=ENEMY (Enemy10), range=1469, listeners=20
[20:26:44] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:26:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:44] [INFO] [LastChance] Threat detected: Bullet
[20:26:44] [INFO] [LastChance] Not in hard mode - effect disabled
[20:26:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:44] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:26:44] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:26:44] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:26:44] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:26:44] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:26:44] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:26:44] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:26:44] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:26:44] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:26:44] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:26:44] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:26:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1111.353, 1536.382), source=ENEMY (Enemy10), range=1469, listeners=10
[20:26:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:44] [INFO] [LastChance] Threat detected: @Area2D@7592
[20:26:44] [INFO] [LastChance] Not in hard mode - effect disabled
[20:26:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:26:45] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:26:45] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:26:45] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:26:45] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:26:45] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[20:26:45] [INFO] [LastChance] Player died
[20:26:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(925.7148, 1378.944), shooter_id=5505711868527, bullet_pos=(1500.748, 1704.916)
[20:26:45] [INFO] [Bullet] Using shooter_position, distance=660.999816894531
[20:26:45] [INFO] [Bullet] Distance to wall: 660.999816894531 (45.0086930038344% of viewport)
[20:26:45] [INFO] [Bullet] Distance-based penetration chance: 94.1565248288599%
[20:26:45] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(948.363, 1442.713), shooter_id=5505711868527, bullet_pos=(1503.94, 1692.751)
[20:26:45] [INFO] [Bullet] Using shooter_position, distance=609.248901367188
[20:26:45] [INFO] [Bullet] Distance to wall: 609.248901367188 (41.484878004035% of viewport)
[20:26:45] [INFO] [Bullet] Distance-based penetration chance: 98.2676423286258%
[20:26:45] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:45] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:45] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:45] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:26:45] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:26:45] [ENEMY] [Enemy1] Death animation component initialized
[20:26:45] [ENEMY] [Enemy2] Death animation component initialized
[20:26:45] [ENEMY] [Enemy3] Death animation component initialized
[20:26:45] [ENEMY] [Enemy4] Death animation component initialized
[20:26:45] [ENEMY] [Enemy5] Death animation component initialized
[20:26:45] [ENEMY] [Enemy6] Death animation component initialized
[20:26:45] [ENEMY] [Enemy7] Death animation component initialized
[20:26:45] [ENEMY] [Enemy8] Death animation component initialized
[20:26:45] [ENEMY] [Enemy9] Death animation component initialized
[20:26:45] [ENEMY] [Enemy10] Death animation component initialized
[20:26:45] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:26:45] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:26:45] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:26:45] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:26:45] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:26:45] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:26:45] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:26:45] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:26:45] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:26:45] [INFO] [ScoreManager] Level started with 10 enemies
[20:26:45] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:26:45] [ENEMY] [Enemy1] Registered as sound listener
[20:26:45] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:26:45] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:26:45] [ENEMY] [Enemy2] Registered as sound listener
[20:26:45] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:26:45] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:26:45] [ENEMY] [Enemy3] Registered as sound listener
[20:26:45] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:26:45] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:26:45] [ENEMY] [Enemy4] Registered as sound listener
[20:26:45] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:26:45] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:26:45] [ENEMY] [Enemy5] Registered as sound listener
[20:26:45] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:26:45] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:26:45] [ENEMY] [Enemy6] Registered as sound listener
[20:26:45] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:26:45] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:26:45] [ENEMY] [Enemy7] Registered as sound listener
[20:26:45] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:26:45] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:26:45] [ENEMY] [Enemy8] Registered as sound listener
[20:26:45] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:26:45] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:26:45] [ENEMY] [Enemy9] Registered as sound listener
[20:26:45] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:26:45] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:26:45] [ENEMY] [Enemy10] Registered as sound listener
[20:26:45] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:26:45] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:26:45] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:26:45] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:26:45] [INFO] [LastChance] Found player: Player
[20:26:45] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:26:45] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:26:45] [INFO] [LastChance] Connected to player Died signal (C#)
[20:26:45] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:26:45] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:26:45] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:26:46] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:46] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:26:46] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:26:46] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:26:46] [ENEMY] [Enemy1] Death animation component initialized
[20:26:46] [ENEMY] [Enemy2] Death animation component initialized
[20:26:46] [ENEMY] [Enemy3] Death animation component initialized
[20:26:46] [ENEMY] [Enemy4] Death animation component initialized
[20:26:46] [ENEMY] [Enemy5] Death animation component initialized
[20:26:46] [ENEMY] [Enemy6] Death animation component initialized
[20:26:46] [ENEMY] [Enemy7] Death animation component initialized
[20:26:46] [ENEMY] [Enemy8] Death animation component initialized
[20:26:46] [ENEMY] [Enemy9] Death animation component initialized
[20:26:46] [ENEMY] [Enemy10] Death animation component initialized
[20:26:46] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:26:46] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:26:46] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:26:46] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:26:46] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:26:46] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:26:46] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:26:46] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:26:46] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:26:46] [INFO] [ScoreManager] Level started with 10 enemies
[20:26:46] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:26:46] [ENEMY] [Enemy1] Registered as sound listener
[20:26:46] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:26:46] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:26:46] [ENEMY] [Enemy2] Registered as sound listener
[20:26:46] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:26:46] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:26:46] [ENEMY] [Enemy3] Registered as sound listener
[20:26:46] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:26:46] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:26:46] [ENEMY] [Enemy4] Registered as sound listener
[20:26:46] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:26:46] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:26:46] [ENEMY] [Enemy5] Registered as sound listener
[20:26:46] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:26:46] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:26:46] [ENEMY] [Enemy6] Registered as sound listener
[20:26:46] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:26:46] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:26:46] [ENEMY] [Enemy7] Registered as sound listener
[20:26:46] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:26:46] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:26:46] [ENEMY] [Enemy8] Registered as sound listener
[20:26:46] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:26:46] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:26:46] [ENEMY] [Enemy9] Registered as sound listener
[20:26:46] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:26:46] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:26:46] [ENEMY] [Enemy10] Registered as sound listener
[20:26:46] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:26:46] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:26:46] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:26:46] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:26:46] [INFO] [LastChance] Found player: Player
[20:26:46] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:26:46] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:26:46] [INFO] [LastChance] Connected to player Died signal (C#)
[20:26:46] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:26:46] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:26:46] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:26:47] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:26:48] [ENEMY] [Enemy10] Hit taken, health: 1/2
[20:26:48] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:26:48] [INFO] [ImpactEffects] spawn_blood_effect called at (1117.607, 1500.892), dir=(0.869784, 0.493433), lethal=false
[20:26:48] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:26:48] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:26:48] [INFO] [ImpactEffects] Blood effect spawned at (1117.607, 1500.892) (scale=0.9)
[20:26:48] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:26:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1093.985, 1475.102), source=ENEMY (Enemy10), range=1469, listeners=30
[20:26:48] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[20:26:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:48] [INFO] [LastChance] Threat detected: Bullet
[20:26:48] [INFO] [LastChance] Not in hard mode - effect disabled
[20:26:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1031.59, 1447.947), shooter_id=5734855084272, bullet_pos=(914.6485, 1403.791)
[20:26:48] [INFO] [Bullet] Using shooter_position, distance=124.999969482422
[20:26:48] [INFO] [Bullet] Distance to wall: 124.999969482422 (8.51147777673392% of viewport)
[20:26:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:26:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1097.539, 1465.045), source=ENEMY (Enemy10), range=1469, listeners=10
[20:26:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:26:48] [INFO] [LastChance] Threat detected: @Area2D@8103
[20:26:48] [INFO] [LastChance] Not in hard mode - effect disabled
[20:26:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:26:48] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:26:48] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:26:48] [ENEMY] [Enemy10] Hit taken, health: 0/2
[20:26:48] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:26:48] [INFO] [ImpactEffects] spawn_blood_effect called at (1099.316, 1460.016), dir=(0.878059, 0.478552), lethal=true
[20:26:48] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:26:48] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:26:48] [INFO] [ImpactEffects] Blood effect spawned at (1099.316, 1460.016) (scale=1.35)
[20:26:48] [ENEMY] [Enemy10] Enemy died (ricochet: false, penetration: false)
[20:26:48] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:26:48] [INFO] [SoundPropagation] Unregistered listener: Enemy10 (remaining: 9)
[20:26:48] [INFO] [DeathAnim] Started - Angle: 28.6 deg, Index: 13
[20:26:48] [ENEMY] [Enemy10] Death animation started with hit direction: (0.878059, 0.478552)
[20:26:48] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:26:48] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:26:48] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:26:48] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:26:48] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:26:48] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:26:48] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:26:48] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:26:48] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:26:48] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:26:48] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:26:50] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[20:26:50] [ENEMY] [Enemy1] Player reloading state changed: false -> true
[20:26:50] [ENEMY] [Enemy2] Player reloading state changed: false -> true
[20:26:50] [ENEMY] [Enemy3] Player reloading state changed: false -> true
[20:26:50] [ENEMY] [Enemy4] Player reloading state changed: false -> true
[20:26:50] [ENEMY] [Enemy5] Player reloading state changed: false -> true
[20:26:50] [ENEMY] [Enemy6] Player reloading state changed: false -> true
[20:26:50] [ENEMY] [Enemy7] Player reloading state changed: false -> true
[20:26:50] [ENEMY] [Enemy8] Player reloading state changed: false -> true
[20:26:50] [ENEMY] [Enemy9] Player reloading state changed: false -> true
[20:26:50] [ENEMY] [Enemy10] Player reloading state changed: false -> true
[20:26:50] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(993.5063, 1447.731), source=PLAYER (Player), range=900, listeners=9
[20:26:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=6, self=0, below_threshold=3
[20:26:50] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=1298), can_see=false
[20:26:50] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=1076), can_see=false
[20:26:50] [ENEMY] [Enemy3] Player vulnerable (reloading) but cannot attack: close=false (dist=757), can_see=false
[20:26:50] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=581), can_see=false
[20:26:50] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1305), can_see=false
[20:26:50] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1382), can_see=false
[20:26:50] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=893), can_see=false
[20:26:50] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=906), can_see=false
[20:26:50] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1111), can_see=false
[20:26:50] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[20:26:50] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
[20:26:50] [ENEMY] [Enemy1] Player reloading state changed: true -> false
[20:26:50] [ENEMY] [Enemy2] Player reloading state changed: true -> false
[20:26:50] [ENEMY] [Enemy3] Player reloading state changed: true -> false
[20:26:50] [ENEMY] [Enemy4] Player reloading state changed: true -> false
[20:26:50] [ENEMY] [Enemy5] Player reloading state changed: true -> false
[20:26:50] [ENEMY] [Enemy6] Player reloading state changed: true -> false
[20:26:50] [ENEMY] [Enemy7] Player reloading state changed: true -> false
[20:26:50] [ENEMY] [Enemy8] Player reloading state changed: true -> false
[20:26:50] [ENEMY] [Enemy9] Player reloading state changed: true -> false
[20:26:50] [ENEMY] [Enemy10] Player reloading state changed: true -> false
[20:26:50] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[20:26:50] [INFO] [Player.Reload.Anim] LeftArm: pos=(3.1614127, 5.241355), target=(10, 6), base=(10, 6)
[20:26:50] [INFO] [Player.Reload.Anim] RightArm: pos=(2.6364374, 6.4014864), target=(2, 6), base=(2, 6)
[20:26:51] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
[20:26:51] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:26:51] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:26:51] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[20:26:51] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[20:26:51] [ENEMY] [Enemy10] Ragdoll activated
[20:26:51] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:26:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(971.0079, 1421.3), shooter_id=5735677168405, bullet_pos=(1496.469, 1638.932)
[20:26:51] [INFO] [Bullet] Using shooter_position, distance=568.746459960938
[20:26:51] [INFO] [Bullet] Distance to wall: 568.746459960938 (38.7269922912609% of viewport)
[20:26:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:26:51] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:52] [ENEMY] [Enemy10] Death animation completed
[20:26:54] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[20:26:58] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:26:58] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:26:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.9351, 777.6672), shooter_id=5735677168405, bullet_pos=(910.9327, 778.9946)
[20:26:58] [INFO] [Bullet] Using shooter_position, distance=426.999755859375
[20:26:58] [INFO] [Bullet] Distance to wall: 426.999755859375 (29.0751985597802% of viewport)
[20:26:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:26:58] [INFO] [Bullet] Caliber cannot penetrate walls
[20:26:59] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:26:59] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:26:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.9351, 775.1118), shooter_id=5735677168405, bullet_pos=(931.3878, 732.2603)
[20:26:59] [INFO] [Bullet] Using shooter_position, distance=449.499969482422
[20:26:59] [INFO] [Bullet] Distance to wall: 449.499969482422 (30.607279479618% of viewport)
[20:26:59] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:26:59] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.2116, 791.459), source=ENEMY (Enemy3), range=1469, listeners=9
[20:27:00] [ENEMY] [Enemy2] Heard gunshot at (652.2116, 791.459), source_type=1, intensity=0.02, distance=349
[20:27:00] [ENEMY] [Enemy4] Heard gunshot at (652.2116, 791.459), source_type=1, intensity=0.07, distance=183
[20:27:00] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[20:27:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(583.3718, 796.8281), shooter_id=5732858595745, bullet_pos=(501.6279, 813.0262)
[20:27:00] [INFO] [Bullet] Using shooter_position, distance=83.3333282470703
[20:27:00] [INFO] [Bullet] Distance to wall: 83.3333282470703 (5.67431955682162% of viewport)
[20:27:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:00] [INFO] [Bullet] Starting wall penetration at (501.6279, 813.0262)
[20:27:00] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.007137298584
[20:27:00] [INFO] [Bullet] Body exited signal received for penetrating body
[20:27:00] [INFO] [Bullet] Exiting penetration at (455.8513, 822.0971) after traveling 41.6666717529297 pixels through wall
[20:27:00] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:27:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.2116, 791.459), source=ENEMY (Enemy3), range=1469, listeners=9
[20:27:00] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[20:27:00] [INFO] [LastChance] Threat detected: @Area2D@8130
[20:27:00] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:00] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[20:27:00] [ENEMY] [Enemy3] Hit taken, health: 2/3
[20:27:00] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:27:00] [INFO] [ImpactEffects] spawn_blood_effect called at (642.6856, 803.9213), dir=(0.983893, 0.178758), lethal=false
[20:27:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:27:00] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:27:00] [INFO] [ImpactEffects] Wall found for blood splatter at (680, 810.7007) (dist=37 px)
[20:27:00] [INFO] [ImpactEffects] Blood effect spawned at (642.6856, 803.9213) (scale=0.9)
[20:27:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(583.3356, 789.056), shooter_id=5732858595745, bullet_pos=(42.72403, 755.2611)
[20:27:00] [INFO] [Bullet] Using shooter_position, distance=541.666870117188
[20:27:00] [INFO] [Bullet] Distance to wall: 541.666870117188 (36.8830932238251% of viewport)
[20:27:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:00] [INFO] [Bullet] Starting wall penetration at (42.72403, 755.2611)
[20:27:00] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.9217071533203
[20:27:00] [INFO] [Bullet] Body exited signal received for penetrating body
[20:27:00] [INFO] [Bullet] Exiting penetration at (-3.851723, 752.3495) after traveling 41.6666717529297 pixels through wall
[20:27:00] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:27:00] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
[20:27:00] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:27:00] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:27:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(675.892, 914.0659), source=ENEMY (Enemy4), range=1469, listeners=9
[20:27:00] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=5
[20:27:00] [INFO] [LastChance] Threat detected: Bullet
[20:27:00] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(617.7909, 878.7148), shooter_id=5733143808091, bullet_pos=(519.1602, 801.923)
[20:27:00] [INFO] [Bullet] Using shooter_position, distance=125.000007629395
[20:27:00] [INFO] [Bullet] Distance to wall: 125.000007629395 (8.51148037423143% of viewport)
[20:27:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:00] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:27:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.9351, 735.9453), shooter_id=5735677168405, bullet_pos=(917.6396, 854.056)
[20:27:00] [INFO] [Bullet] Using shooter_position, distance=449.499542236328
[20:27:00] [INFO] [Bullet] Distance to wall: 449.499542236328 (30.6072503876458% of viewport)
[20:27:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:00] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:00] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:00] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:00] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:27:00] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:27:00] [ENEMY] [Enemy1] Death animation component initialized
[20:27:00] [ENEMY] [Enemy2] Death animation component initialized
[20:27:00] [ENEMY] [Enemy3] Death animation component initialized
[20:27:00] [ENEMY] [Enemy4] Death animation component initialized
[20:27:00] [ENEMY] [Enemy5] Death animation component initialized
[20:27:00] [ENEMY] [Enemy6] Death animation component initialized
[20:27:00] [ENEMY] [Enemy7] Death animation component initialized
[20:27:00] [ENEMY] [Enemy8] Death animation component initialized
[20:27:00] [ENEMY] [Enemy9] Death animation component initialized
[20:27:00] [ENEMY] [Enemy10] Death animation component initialized
[20:27:00] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:27:00] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:27:00] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:27:00] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:27:00] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:27:00] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:27:00] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:27:00] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:27:00] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:27:00] [INFO] [ScoreManager] Level started with 10 enemies
[20:27:00] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[20:27:00] [ENEMY] [Enemy1] Registered as sound listener
[20:27:00] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:27:00] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[20:27:00] [ENEMY] [Enemy2] Registered as sound listener
[20:27:00] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:27:00] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[20:27:00] [ENEMY] [Enemy3] Registered as sound listener
[20:27:00] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:27:00] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[20:27:00] [ENEMY] [Enemy4] Registered as sound listener
[20:27:00] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:27:00] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[20:27:00] [ENEMY] [Enemy5] Registered as sound listener
[20:27:00] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:27:00] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[20:27:00] [ENEMY] [Enemy6] Registered as sound listener
[20:27:00] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:27:00] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[20:27:00] [ENEMY] [Enemy7] Registered as sound listener
[20:27:00] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:27:00] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[20:27:00] [ENEMY] [Enemy8] Registered as sound listener
[20:27:00] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:27:00] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[20:27:00] [ENEMY] [Enemy9] Registered as sound listener
[20:27:00] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:27:00] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[20:27:00] [ENEMY] [Enemy10] Registered as sound listener
[20:27:00] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:27:00] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:27:00] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:27:00] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:27:00] [INFO] [LastChance] Found player: Player
[20:27:00] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:27:00] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:27:00] [INFO] [LastChance] Connected to player Died signal (C#)
[20:27:00] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:27:00] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:27:00] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:27:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1141.944), shooter_id=6456225039883, bullet_pos=(896.1692, 1403.137)
[20:27:04] [INFO] [Bullet] Using shooter_position, distance=516.999633789063
[20:27:04] [INFO] [Bullet] Distance to wall: 516.999633789063 (35.2034557431951% of viewport)
[20:27:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:04] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1141.944), shooter_id=6456225039883, bullet_pos=(1502.44, 1701.619)
[20:27:05] [INFO] [Bullet] Using shooter_position, distance=1192.0009765625
[20:27:05] [INFO] [Bullet] Distance to wall: 1192.0009765625 (81.16553839066% of viewport)
[20:27:05] [INFO] [Bullet] Distance-based penetration chance: 51.97353854423%
[20:27:05] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1141.944), shooter_id=6456225039883, bullet_pos=(998.4521, 1402.04)
[20:27:05] [INFO] [Bullet] Using shooter_position, distance=607.000427246094
[20:27:05] [INFO] [Bullet] Distance to wall: 607.000427246094 (41.3317752665504% of viewport)
[20:27:05] [INFO] [Bullet] Distance-based penetration chance: 98.4462621890246%
[20:27:05] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1141.944), shooter_id=6456225039883, bullet_pos=(998.4521, 1402.04)
[20:27:05] [INFO] [Bullet] Using shooter_position, distance=607.000427246094
[20:27:05] [INFO] [Bullet] Distance to wall: 607.000427246094 (41.3317752665504% of viewport)
[20:27:05] [INFO] [Bullet] Distance-based penetration chance: 98.4462621890246%
[20:27:05] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1141.944), shooter_id=6456225039883, bullet_pos=(1499.622, 1706.883)
[20:27:06] [INFO] [Bullet] Using shooter_position, distance=1191.99963378906
[20:27:06] [INFO] [Bullet] Distance to wall: 1191.99963378906 (81.1654469587475% of viewport)
[20:27:06] [INFO] [Bullet] Distance-based penetration chance: 51.9736452147946%
[20:27:06] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1141.944), shooter_id=6456225039883, bullet_pos=(1488.083, 1680.567)
[20:27:07] [INFO] [Bullet] Using shooter_position, distance=1169.50048828125
[20:27:07] [INFO] [Bullet] Distance to wall: 1169.50048828125 (79.6334387688401% of viewport)
[20:27:07] [INFO] [Bullet] Distance-based penetration chance: 53.7609881030199%
[20:27:07] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:07] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:27:07] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:27:08] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:27:08] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:27:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(595.3715, 1091.896), shooter_id=6456225039883, bullet_pos=(994.9139, 1383.265)
[20:27:08] [INFO] [Bullet] Using shooter_position, distance=494.499877929688
[20:27:08] [INFO] [Bullet] Distance to wall: 494.499877929688 (33.6714059933275% of viewport)
[20:27:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:08] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(708.3514, 1040.067), shooter_id=6456225039883, bullet_pos=(1037.361, 1378.5)
[20:27:09] [INFO] [Bullet] Using shooter_position, distance=472.000244140625
[20:27:09] [INFO] [Bullet] Distance to wall: 472.000244140625 (32.1393645554518% of viewport)
[20:27:09] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:09] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(751.1848, 1040.067), shooter_id=6456225039883, bullet_pos=(1356.214, 2067.1)
[20:27:10] [INFO] [Bullet] Using shooter_position, distance=1191.99731445313
[20:27:10] [INFO] [Bullet] Distance to wall: 1191.99731445313 (81.1652890308986% of viewport)
[20:27:10] [INFO] [Bullet] Distance-based penetration chance: 51.9738294639516%
[20:27:10] [INFO] [Bullet] Penetration failed (distance roll)
[20:27:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(836.407, 1040.067), shooter_id=6456225039883, bullet_pos=(894.6137, 1417.606)
[20:27:10] [INFO] [Bullet] Using shooter_position, distance=382.000518798828
[20:27:10] [INFO] [Bullet] Distance to wall: 382.000518798828 (26.011117762027% of viewport)
[20:27:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:10] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:10] [ENEMY] [Enemy10] State: SUPPRESSED -> IN_COVER
[20:27:10] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
[20:27:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(856.5737, 1040.067), shooter_id=6456225039883, bullet_pos=(910.5909, 1418.228)
[20:27:11] [INFO] [Bullet] Using shooter_position, distance=382.000213623047
[20:27:11] [INFO] [Bullet] Distance to wall: 382.000213623047 (26.0110969820468% of viewport)
[20:27:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:11] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(856.5737, 1040.067), shooter_id=6456225039883, bullet_pos=(1019.772, 2061.613)
[20:27:12] [INFO] [Bullet] Using shooter_position, distance=1034.5
[20:27:12] [INFO] [Bullet] Distance to wall: 1034.5 (70.4410072777614% of viewport)
[20:27:12] [INFO] [Bullet] Distance-based penetration chance: 64.4854915092783%
[20:27:12] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:12] [ENEMY] [Enemy1] Player ammo empty state changed: false -> true
[20:27:12] [ENEMY] [Enemy2] Player ammo empty state changed: false -> true
[20:27:12] [ENEMY] [Enemy3] Player ammo empty state changed: false -> true
[20:27:12] [ENEMY] [Enemy4] Player ammo empty state changed: false -> true
[20:27:12] [ENEMY] [Enemy5] Player ammo empty state changed: false -> true
[20:27:12] [ENEMY] [Enemy6] Player ammo empty state changed: false -> true
[20:27:12] [ENEMY] [Enemy7] Player ammo empty state changed: false -> true
[20:27:12] [ENEMY] [Enemy8] Player ammo empty state changed: false -> true
[20:27:12] [ENEMY] [Enemy9] Player ammo empty state changed: false -> true
[20:27:12] [ENEMY] [Enemy10] Player ammo empty state changed: false -> true
[20:27:12] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(856.5737, 1040.067), source=PLAYER (Player), range=600, listeners=19
[20:27:12] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[20:27:12] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (856.5737, 1040.067), intensity=0.02, distance=330
[20:27:12] [ENEMY] [Enemy3] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[20:27:12] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (856.5737, 1040.067), intensity=0.11, distance=151
[20:27:12] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[20:27:12] [ENEMY] [Enemy10] Heard player EMPTY_CLICK at (856.5737, 1040.067), intensity=0.01, distance=472
[20:27:12] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=7, self=0, below_threshold=0
[20:27:12] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=887), can_see=false
[20:27:12] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=670), can_see=false
[20:27:12] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=330), can_see=false
[20:27:12] [ENEMY] [Enemy3] Pursuing vulnerability sound at (856.5737, 1040.067), distance=330
[20:27:12] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=151), can_see=false
[20:27:12] [ENEMY] [Enemy4] Pursuing vulnerability sound at (856.5737, 1040.067), distance=151
[20:27:12] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1090), can_see=false
[20:27:12] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1242), can_see=false
[20:27:12] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=768), can_see=false
[20:27:12] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1121), can_see=false
[20:27:12] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1344), can_see=false
[20:27:12] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=472), can_see=false
[20:27:12] [ENEMY] [Enemy10] Pursuing vulnerability sound at (856.5737, 1040.067), distance=472
[20:27:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(856.5737, 1040.067), shooter_id=6456225039883, bullet_pos=(1035.889, 2081.744)
[20:27:12] [INFO] [Bullet] Using shooter_position, distance=1056.99841308594
[20:27:12] [INFO] [Bullet] Distance to wall: 1056.99841308594 (71.9729655957166% of viewport)
[20:27:12] [INFO] [Bullet] Distance-based penetration chance: 62.6982068049973%
[20:27:12] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:13] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) - pursuing to attack (dist=408)
[20:27:13] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[20:27:13] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:27:13] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=887), can_see=false
[20:27:13] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=670), can_see=false
[20:27:13] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=420), can_see=false
[20:27:13] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=273), can_see=false
[20:27:13] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1090), can_see=false
[20:27:13] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1242), can_see=false
[20:27:13] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=768), can_see=false
[20:27:13] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1121), can_see=false
[20:27:13] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1344), can_see=false
[20:27:13] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=407), can_see=true
[20:27:13] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(856.5737, 1040.067), source=PLAYER (Player), range=600, listeners=10
[20:27:13] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (856.5737, 1040.067), intensity=0.01, distance=435
[20:27:13] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (856.5737, 1040.067), intensity=0.03, distance=281
[20:27:13] [ENEMY] [Enemy10] Heard player EMPTY_CLICK at (856.5737, 1040.067), intensity=0.02, distance=407
[20:27:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=7, self=0, below_threshold=0
[20:27:13] [ENEMY] [Enemy10] Player empty ammo - priority attack triggered
[20:27:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(974.9384, 1421.261), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:13] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[20:27:13] [INFO] [LastChance] Threat detected: Bullet
[20:27:13] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:13] [ENEMY] [Enemy10] Player empty ammo - priority attack triggered
[20:27:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(953.3328, 1414.216), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:13] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:27:13] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:27:13] [INFO] [LastChance] Threat detected: @Area2D@8416
[20:27:13] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:13] [ENEMY] [Enemy10] Player empty ammo - priority attack triggered
[20:27:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(950.0603, 1383.871), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:13] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:27:13] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:27:13] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:27:13] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:27:13] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:27:13] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:27:13] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:27:13] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:27:13] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:27:13] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:27:13] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:27:13] [ENEMY] [Enemy3] Pursuing vulnerability sound at (856.5737, 1040.067), distance=433
[20:27:13] [ENEMY] [Enemy4] Pursuing vulnerability sound at (856.5737, 1040.067), distance=333
[20:27:13] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=887), can_see=false
[20:27:13] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=670), can_see=false
[20:27:13] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=432), can_see=false
[20:27:13] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=333), can_see=false
[20:27:13] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1090), can_see=false
[20:27:13] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1242), can_see=false
[20:27:13] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=768), can_see=false
[20:27:13] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1121), can_see=false
[20:27:13] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1344), can_see=false
[20:27:13] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(856.5737, 1040.067), source=PLAYER (Player), range=600, listeners=10
[20:27:13] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (856.5737, 1040.067), intensity=0.01, distance=431
[20:27:13] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (856.5737, 1040.067), intensity=0.02, distance=334
[20:27:13] [ENEMY] [Enemy10] Heard player EMPTY_CLICK at (856.5737, 1040.067), intensity=0.02, distance=337
[20:27:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=7, self=0, below_threshold=0
[20:27:13] [INFO] [LastChance] Threat detected: Bullet
[20:27:13] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:14] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=887), can_see=false
[20:27:14] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=670), can_see=false
[20:27:14] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=425), can_see=false
[20:27:14] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=345), can_see=false
[20:27:14] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1090), can_see=false
[20:27:14] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1242), can_see=false
[20:27:14] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=767), can_see=false
[20:27:14] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1121), can_see=false
[20:27:14] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1344), can_see=false
[20:27:14] [ENEMY] [Enemy10] Player empty ammo - priority attack triggered
[20:27:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(949.6113, 1348.144), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:14] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:14] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:14] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:14] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:27:14] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:27:14] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:27:14] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:27:14] [ENEMY] [Enemy1] Death animation component initialized
[20:27:14] [ENEMY] [Enemy2] Death animation component initialized
[20:27:14] [ENEMY] [Enemy3] Death animation component initialized
[20:27:14] [ENEMY] [Enemy4] Death animation component initialized
[20:27:14] [ENEMY] [Enemy5] Death animation component initialized
[20:27:14] [ENEMY] [Enemy6] Death animation component initialized
[20:27:14] [ENEMY] [Enemy7] Death animation component initialized
[20:27:14] [ENEMY] [Enemy8] Death animation component initialized
[20:27:14] [ENEMY] [Enemy9] Death animation component initialized
[20:27:14] [ENEMY] [Enemy10] Death animation component initialized
[20:27:14] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:27:14] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:27:14] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:27:14] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:27:14] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:27:14] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:27:14] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:27:14] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:27:14] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:27:14] [INFO] [ScoreManager] Level started with 10 enemies
[20:27:14] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:27:14] [ENEMY] [Enemy1] Registered as sound listener
[20:27:14] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:27:14] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:27:14] [ENEMY] [Enemy2] Registered as sound listener
[20:27:14] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:27:14] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:27:14] [ENEMY] [Enemy3] Registered as sound listener
[20:27:14] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:27:14] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:27:14] [ENEMY] [Enemy4] Registered as sound listener
[20:27:14] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:27:14] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:27:14] [ENEMY] [Enemy5] Registered as sound listener
[20:27:14] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:27:14] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:27:14] [ENEMY] [Enemy6] Registered as sound listener
[20:27:14] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:27:14] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:27:14] [ENEMY] [Enemy7] Registered as sound listener
[20:27:14] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:27:14] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:27:14] [ENEMY] [Enemy8] Registered as sound listener
[20:27:14] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:27:14] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:27:14] [ENEMY] [Enemy9] Registered as sound listener
[20:27:14] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:27:14] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:27:14] [ENEMY] [Enemy10] Registered as sound listener
[20:27:14] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:27:14] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:27:14] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:27:14] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:27:14] [INFO] [LastChance] Found player: Player
[20:27:14] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:27:14] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:27:14] [INFO] [LastChance] Connected to player Died signal (C#)
[20:27:14] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:27:14] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:27:14] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:27:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=7193801787335, bullet_pos=(1504.457, 1570.191)
[20:27:15] [INFO] [Bullet] Using shooter_position, distance=1101.99914550781
[20:27:15] [INFO] [Bullet] Distance to wall: 1101.99914550781 (75.0371482153723% of viewport)
[20:27:15] [INFO] [Bullet] Distance-based penetration chance: 59.1233270820656%
[20:27:15] [INFO] [Bullet] Penetration failed (distance roll)
[20:27:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=7193801787335, bullet_pos=(1501.23, 1580.63)
[20:27:16] [INFO] [Bullet] Using shooter_position, distance=1101.99865722656
[20:27:16] [INFO] [Bullet] Distance to wall: 1101.99865722656 (75.0371149674042% of viewport)
[20:27:16] [INFO] [Bullet] Distance-based penetration chance: 59.1233658713618%
[20:27:16] [INFO] [Bullet] Penetration failed (distance roll)
[20:27:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=7193801787335, bullet_pos=(1503.513, 1573.288)
[20:27:16] [INFO] [Bullet] Using shooter_position, distance=1102
[20:27:16] [INFO] [Bullet] Distance to wall: 1102 (75.0372063993167% of viewport)
[20:27:16] [INFO] [Bullet] Distance-based penetration chance: 59.1232592007972%
[20:27:16] [INFO] [Bullet] Penetration failed (distance roll)
[20:27:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=7193801787335, bullet_pos=(1501.125, 1580.971)
[20:27:17] [INFO] [Bullet] Using shooter_position, distance=1102.00085449219
[20:27:17] [INFO] [Bullet] Distance to wall: 1102.00085449219 (75.037264583261% of viewport)
[20:27:17] [INFO] [Bullet] Distance-based penetration chance: 59.1231913195289%
[20:27:17] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=7193801787335, bullet_pos=(1487.508, 1548.157)
[20:27:17] [INFO] [Bullet] Using shooter_position, distance=1079.49987792969
[20:27:17] [INFO] [Bullet] Distance to wall: 1079.49987792969 (73.5051317134729% of viewport)
[20:27:17] [INFO] [Bullet] Distance-based penetration chance: 60.910679667615%
[20:27:17] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=7193801787335, bullet_pos=(1503.245, 1574.155)
[20:27:17] [INFO] [Bullet] Using shooter_position, distance=1101.99877929688
[20:27:17] [INFO] [Bullet] Distance to wall: 1101.99877929688 (75.0371232793962% of viewport)
[20:27:17] [INFO] [Bullet] Distance-based penetration chance: 59.1233561740378%
[20:27:17] [INFO] [Bullet] Penetration failed (distance roll)
[20:27:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=7193801787335, bullet_pos=(1485.312, 1555.694)
[20:27:18] [INFO] [Bullet] Using shooter_position, distance=1079.49938964844
[20:27:18] [INFO] [Bullet] Distance to wall: 1079.49938964844 (73.5050984655047% of viewport)
[20:27:18] [INFO] [Bullet] Distance-based penetration chance: 60.9107184569112%
[20:27:18] [INFO] [Bullet] Penetration failed (distance roll)
[20:27:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=7193801787335, bullet_pos=(1501.786, 1578.86)
[20:27:18] [INFO] [Bullet] Using shooter_position, distance=1101.99975585938
[20:27:18] [INFO] [Bullet] Distance to wall: 1101.99975585938 (75.0371897753326% of viewport)
[20:27:18] [INFO] [Bullet] Distance-based penetration chance: 59.1232785954453%
[20:27:18] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=7193801787335, bullet_pos=(1504.76, 1569.198)
[20:27:19] [INFO] [Bullet] Using shooter_position, distance=1102.00158691406
[20:27:19] [INFO] [Bullet] Distance to wall: 1102.00158691406 (75.0373144552132% of viewport)
[20:27:19] [INFO] [Bullet] Distance-based penetration chance: 59.1231331355845%
[20:27:19] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=7193801787335, bullet_pos=(1504.051, 1571.53)
[20:27:19] [INFO] [Bullet] Using shooter_position, distance=1102.00012207031
[20:27:19] [INFO] [Bullet] Distance to wall: 1102.00012207031 (75.0372147113087% of viewport)
[20:27:19] [INFO] [Bullet] Distance-based penetration chance: 59.1232495034732%
[20:27:19] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=7193801787335, bullet_pos=(1502.568, 1576.349)
[20:27:19] [INFO] [Bullet] Using shooter_position, distance=1101.99951171875
[20:27:19] [INFO] [Bullet] Distance to wall: 1101.99951171875 (75.0371731513485% of viewport)
[20:27:19] [INFO] [Bullet] Distance-based penetration chance: 59.1232979900934%
[20:27:19] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=7193801787335, bullet_pos=(990.9661, 1402.315)
[20:27:20] [INFO] [Bullet] Using shooter_position, distance=562.000183105469
[20:27:20] [INFO] [Bullet] Distance to wall: 562.000183105469 (38.2676258948628% of viewport)
[20:27:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:20] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:20] [ENEMY] [Enemy1] Player ammo empty state changed: false -> true
[20:27:20] [ENEMY] [Enemy2] Player ammo empty state changed: false -> true
[20:27:20] [ENEMY] [Enemy3] Player ammo empty state changed: false -> true
[20:27:20] [ENEMY] [Enemy4] Player ammo empty state changed: false -> true
[20:27:20] [ENEMY] [Enemy5] Player ammo empty state changed: false -> true
[20:27:20] [ENEMY] [Enemy6] Player ammo empty state changed: false -> true
[20:27:20] [ENEMY] [Enemy7] Player ammo empty state changed: false -> true
[20:27:20] [ENEMY] [Enemy8] Player ammo empty state changed: false -> true
[20:27:20] [ENEMY] [Enemy9] Player ammo empty state changed: false -> true
[20:27:20] [ENEMY] [Enemy10] Player ammo empty state changed: false -> true
[20:27:20] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(450, 1250), source=PLAYER (Player), range=600, listeners=20
[20:27:20] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:27:20] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (450, 1250), intensity=0.01, distance=495
[20:27:20] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[20:27:20] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=8, self=0, below_threshold=1
[20:27:20] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=912), can_see=false
[20:27:20] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=702), can_see=false
[20:27:20] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=559), can_see=false
[20:27:20] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=495), can_see=false
[20:27:20] [ENEMY] [Enemy4] Pursuing vulnerability sound at (450, 1250), distance=495
[20:27:20] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1540), can_see=false
[20:27:20] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1700), can_see=false
[20:27:20] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1213), can_see=false
[20:27:20] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1464), can_see=false
[20:27:20] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1677), can_see=false
[20:27:20] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=792), can_see=false
[20:27:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=7193801787335, bullet_pos=(1499.901, 1584.833)
[20:27:20] [INFO] [Bullet] Using shooter_position, distance=1102.00085449219
[20:27:20] [INFO] [Bullet] Distance to wall: 1102.00085449219 (75.037264583261% of viewport)
[20:27:20] [INFO] [Bullet] Distance-based penetration chance: 59.1231913195289%
[20:27:20] [INFO] [Bullet] Penetration failed (distance roll)
[20:27:20] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:20] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:20] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:27:20] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:27:20] [ENEMY] [Enemy1] Death animation component initialized
[20:27:20] [ENEMY] [Enemy2] Death animation component initialized
[20:27:20] [ENEMY] [Enemy3] Death animation component initialized
[20:27:20] [ENEMY] [Enemy4] Death animation component initialized
[20:27:20] [ENEMY] [Enemy5] Death animation component initialized
[20:27:20] [ENEMY] [Enemy6] Death animation component initialized
[20:27:20] [ENEMY] [Enemy7] Death animation component initialized
[20:27:20] [ENEMY] [Enemy8] Death animation component initialized
[20:27:20] [ENEMY] [Enemy9] Death animation component initialized
[20:27:20] [ENEMY] [Enemy10] Death animation component initialized
[20:27:20] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:27:20] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:27:20] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:27:20] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:27:20] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:27:20] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:27:20] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:27:20] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:27:20] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:27:20] [INFO] [ScoreManager] Level started with 10 enemies
[20:27:20] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:27:20] [ENEMY] [Enemy1] Registered as sound listener
[20:27:20] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:27:20] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:27:20] [ENEMY] [Enemy2] Registered as sound listener
[20:27:20] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:27:20] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:27:20] [ENEMY] [Enemy3] Registered as sound listener
[20:27:20] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:27:20] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:27:20] [ENEMY] [Enemy4] Registered as sound listener
[20:27:20] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:27:20] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:27:20] [ENEMY] [Enemy5] Registered as sound listener
[20:27:20] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:27:20] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:27:20] [ENEMY] [Enemy6] Registered as sound listener
[20:27:20] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:27:20] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:27:20] [ENEMY] [Enemy7] Registered as sound listener
[20:27:21] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:27:21] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:27:21] [ENEMY] [Enemy8] Registered as sound listener
[20:27:21] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:27:21] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:27:21] [ENEMY] [Enemy9] Registered as sound listener
[20:27:21] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:27:21] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:27:21] [ENEMY] [Enemy10] Registered as sound listener
[20:27:21] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:27:21] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:27:21] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:27:21] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:27:21] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:27:21] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:27:21] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:27:21] [INFO] [LastChance] Found player: Player
[20:27:21] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:27:21] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:27:21] [INFO] [LastChance] Connected to player Died signal (C#)
[20:27:23] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:27:24] [ENEMY] [Enemy10] Hit taken, health: 3/4
[20:27:24] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:27:24] [INFO] [ImpactEffects] spawn_blood_effect called at (1107.254, 1528.506), dir=(0.756938, 0.653487), lethal=false
[20:27:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:27:24] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:27:24] [INFO] [ImpactEffects] Blood effect spawned at (1107.254, 1528.506) (scale=0.9)
[20:27:24] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:27:24] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:27:24] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:27:24] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:24] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:24] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:27:24] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:27:24] [ENEMY] [Enemy1] Death animation component initialized
[20:27:24] [ENEMY] [Enemy2] Death animation component initialized
[20:27:24] [ENEMY] [Enemy3] Death animation component initialized
[20:27:24] [ENEMY] [Enemy4] Death animation component initialized
[20:27:24] [ENEMY] [Enemy5] Death animation component initialized
[20:27:24] [ENEMY] [Enemy6] Death animation component initialized
[20:27:24] [ENEMY] [Enemy7] Death animation component initialized
[20:27:24] [ENEMY] [Enemy8] Death animation component initialized
[20:27:24] [ENEMY] [Enemy9] Death animation component initialized
[20:27:24] [ENEMY] [Enemy10] Death animation component initialized
[20:27:24] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:27:24] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:27:24] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:27:24] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:27:24] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:27:24] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:27:24] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:27:24] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:27:24] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:27:24] [INFO] [ScoreManager] Level started with 10 enemies
[20:27:24] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:27:24] [ENEMY] [Enemy1] Registered as sound listener
[20:27:24] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:27:24] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:27:24] [ENEMY] [Enemy2] Registered as sound listener
[20:27:24] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:27:24] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:27:24] [ENEMY] [Enemy3] Registered as sound listener
[20:27:24] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:27:24] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:27:24] [ENEMY] [Enemy4] Registered as sound listener
[20:27:24] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:27:24] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:27:24] [ENEMY] [Enemy5] Registered as sound listener
[20:27:24] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:27:24] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:27:24] [ENEMY] [Enemy6] Registered as sound listener
[20:27:24] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:27:24] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:27:24] [ENEMY] [Enemy7] Registered as sound listener
[20:27:24] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:27:24] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:27:24] [ENEMY] [Enemy8] Registered as sound listener
[20:27:24] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:27:24] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:27:24] [ENEMY] [Enemy9] Registered as sound listener
[20:27:24] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:27:24] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:27:24] [ENEMY] [Enemy10] Registered as sound listener
[20:27:24] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:27:24] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:27:24] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:27:24] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:27:24] [INFO] [LastChance] Found player: Player
[20:27:24] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:27:24] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:27:24] [INFO] [LastChance] Connected to player Died signal (C#)
[20:27:24] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:27:24] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:27:24] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:27:28] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:27:29] [ENEMY] [Enemy10] Hit taken, health: 2/3
[20:27:29] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:27:29] [INFO] [ImpactEffects] spawn_blood_effect called at (1116.403, 1539.83), dir=(0.840193, 0.542287), lethal=false
[20:27:29] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:27:29] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:27:29] [INFO] [ImpactEffects] Blood effect spawned at (1116.403, 1539.83) (scale=0.9)
[20:27:29] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:27:29] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:27:29] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:27:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.561, 1495.062), source=ENEMY (Enemy10), range=1469, listeners=30
[20:27:30] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[20:27:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.561, 1495.062), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:30] [INFO] [LastChance] Threat detected: @Area2D@9207
[20:27:30] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.561, 1495.062), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:30] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:27:30] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:27:30] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
[20:27:30] [INFO] [LastChance] Threat detected: @Area2D@9209
[20:27:30] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:30] [ENEMY] [Enemy10] State: SEEKING_COVER -> IN_COVER
[20:27:30] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:27:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.676, 1461.914), shooter_id=7771407780290, bullet_pos=(542.3003, 999.6539)
[20:27:30] [INFO] [Bullet] Using shooter_position, distance=666.667175292969
[20:27:30] [INFO] [Bullet] Distance to wall: 666.667175292969 (45.3945938585371% of viewport)
[20:27:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(901.7276, 1360.445), shooter_id=7772229863982, bullet_pos=(1235.335, 1626.968)
[20:27:30] [INFO] [Bullet] Using shooter_position, distance=426.99951171875
[20:27:30] [INFO] [Bullet] Distance to wall: 426.99951171875 (29.0751819357961% of viewport)
[20:27:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:30] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1027.727, 1454.52), shooter_id=7771407780290, bullet_pos=(44.62508, 907.5887)
[20:27:30] [INFO] [Bullet] Using shooter_position, distance=1124.99963378906
[20:27:30] [INFO] [Bullet] Distance to wall: 1124.99963378906 (76.6032937566112% of viewport)
[20:27:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1027.727, 1454.52), shooter_id=7771407780290, bullet_pos=(462.1503, 701.9547)
[20:27:30] [INFO] [Bullet] Using shooter_position, distance=941.399230957031
[20:27:30] [INFO] [Bullet] Distance to wall: 941.399230957031 (64.1016047164072% of viewport)
[20:27:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.676, 1461.914), shooter_id=7771407780290, bullet_pos=(43.1832, 1404.238)
[20:27:31] [INFO] [Bullet] Using shooter_position, distance=981.189636230469
[20:27:31] [INFO] [Bullet] Distance to wall: 981.189636230469 (66.8110065795791% of viewport)
[20:27:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1027.727, 1454.52), shooter_id=7771407780290, bullet_pos=(689.6532, 858.1083)
[20:27:31] [INFO] [Bullet] Using shooter_position, distance=685.566528320313
[20:27:31] [INFO] [Bullet] Distance to wall: 685.566528320313 (46.6814855590148% of viewport)
[20:27:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.676, 1461.914), shooter_id=7771407780290, bullet_pos=(283.5184, 1593.712)
[20:27:31] [INFO] [Bullet] Using shooter_position, distance=750.816345214844
[20:27:31] [INFO] [Bullet] Distance to wall: 750.816345214844 (51.1244655751968% of viewport)
[20:27:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1027.727, 1454.52), shooter_id=7771407780290, bullet_pos=(505.7844, 958.9541)
[20:27:31] [INFO] [Bullet] Using shooter_position, distance=719.729309082031
[20:27:31] [INFO] [Bullet] Distance to wall: 719.729309082031 (49.0076921208947% of viewport)
[20:27:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1027.727, 1454.52), shooter_id=7771407780290, bullet_pos=(588.5927, 999.0414)
[20:27:31] [INFO] [Bullet] Using shooter_position, distance=632.692932128906
[20:27:31] [INFO] [Bullet] Distance to wall: 632.692932128906 (43.0812251683717% of viewport)
[20:27:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.676, 1461.914), shooter_id=7771407780290, bullet_pos=(599.9509, 1415.349)
[20:27:31] [INFO] [Bullet] Using shooter_position, distance=425.282196044922
[20:27:31] [INFO] [Bullet] Distance to wall: 425.282196044922 (28.9582467537001% of viewport)
[20:27:31] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:31] [INFO] [LastChance] Threat detected: @Area2D@9209
[20:27:31] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:31] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:31] [ENEMY] [Enemy4] Hit taken, health: 3/4
[20:27:31] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:27:31] [INFO] [ImpactEffects] spawn_blood_effect called at (800, 900), dir=(0.896043, -0.443968), lethal=false
[20:27:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:27:31] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:27:31] [INFO] [ImpactEffects] Blood effect spawned at (800, 900) (scale=1)
[20:27:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.676, 1461.914), shooter_id=7771407780290, bullet_pos=(891.7061, 1518.652)
[20:27:31] [INFO] [Bullet] Using shooter_position, distance=142.731918334961
[20:27:31] [INFO] [Bullet] Distance to wall: 142.731918334961 (9.7188787802821% of viewport)
[20:27:31] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1129.848, 1453.059), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1129.848, 1453.059), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1065.865, 1442.569), shooter_id=7771407780290, bullet_pos=(899.2004, 1441.825)
[20:27:31] [INFO] [Bullet] Using shooter_position, distance=166.666702270508
[20:27:31] [INFO] [Bullet] Distance to wall: 166.666702270508 (11.3486422306402% of viewport)
[20:27:31] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:31] [INFO] [Bullet] Starting wall penetration at (899.2004, 1441.825)
[20:27:31] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.4661102294922
[20:27:31] [INFO] [LastChance] Threat detected: @Area2D@9220
[20:27:31] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:31] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:31] [INFO] [Bullet] Body exited signal received for penetrating body
[20:27:31] [INFO] [Bullet] Exiting penetration at (852.5342, 1441.617) after traveling 41.6666679382324 pixels through wall
[20:27:31] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:27:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1129.848, 1453.059), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1066.458, 1439.439), shooter_id=7771407780290, bullet_pos=(904.7756, 1398.983)
[20:27:31] [INFO] [Bullet] Using shooter_position, distance=166.666748046875
[20:27:31] [INFO] [Bullet] Distance to wall: 166.666748046875 (11.3486453476373% of viewport)
[20:27:31] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:31] [INFO] [Bullet] Starting wall penetration at (904.7756, 1398.983)
[20:27:31] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
[20:27:31] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:27:31] [INFO] [Bullet] Exiting penetration at (859.5046, 1387.656) after traveling 41.6666717529297 pixels through wall
[20:27:31] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:27:31] [INFO] [LastChance] Threat detected: Bullet
[20:27:31] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:31] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1066.903, 1436.91), shooter_id=7771407780290, bullet_pos=(990.4241, 1403.813)
[20:27:32] [INFO] [Bullet] Using shooter_position, distance=83.3333053588867
[20:27:32] [INFO] [Bullet] Distance to wall: 83.3333053588867 (5.67431799832311% of viewport)
[20:27:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:32] [INFO] [Bullet] Starting wall penetration at (990.4241, 1403.813)
[20:27:32] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:27:32] [INFO] [Bullet] Exiting penetration at (947.5959, 1385.278) after traveling 41.6666679382324 pixels through wall
[20:27:32] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:27:32] [ENEMY] [Enemy10] State: SEEKING_COVER -> IN_COVER
[20:27:32] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:27:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1126.838, 1443.053), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:32] [INFO] [LastChance] Threat detected: Bullet
[20:27:32] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1126.838, 1443.053), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1063.533, 1429.043), shooter_id=7771407780290, bullet_pos=(898.6815, 1404.509)
[20:27:32] [INFO] [Bullet] Using shooter_position, distance=166.666748046875
[20:27:32] [INFO] [Bullet] Distance to wall: 166.666748046875 (11.3486453476373% of viewport)
[20:27:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:32] [INFO] [Bullet] Starting wall penetration at (898.6815, 1404.509)
[20:27:32] [INFO] [LastChance] Threat detected: @Area2D@9225
[20:27:32] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.8675498962402
[20:27:32] [INFO] [Bullet] Body exited signal received for penetrating body
[20:27:32] [INFO] [Bullet] Exiting penetration at (852.5232, 1397.64) after traveling 41.6666717529297 pixels through wall
[20:27:32] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:27:32] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:27:32] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:27:32] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:27:32] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:27:32] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:27:32] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:27:32] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:27:32] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:27:32] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:27:32] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:27:32] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:27:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1126.838, 1443.053), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:32] [INFO] [LastChance] Threat detected: Bullet
[20:27:32] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1126.838, 1443.053), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:32] [INFO] [LastChance] Threat detected: @Area2D@9228
[20:27:32] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:32] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
[20:27:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(928.819, 1413.546), shooter_id=7772229863982, bullet_pos=(1019.956, 1402.954)
[20:27:33] [INFO] [Bullet] Using shooter_position, distance=91.7509231567383
[20:27:33] [INFO] [Bullet] Distance to wall: 91.7509231567383 (6.24748907281308% of viewport)
[20:27:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:33] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:33] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:33] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:33] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:27:33] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:27:33] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:27:33] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:27:33] [ENEMY] [Enemy1] Death animation component initialized
[20:27:33] [ENEMY] [Enemy2] Death animation component initialized
[20:27:33] [ENEMY] [Enemy3] Death animation component initialized
[20:27:33] [ENEMY] [Enemy4] Death animation component initialized
[20:27:33] [ENEMY] [Enemy5] Death animation component initialized
[20:27:33] [ENEMY] [Enemy6] Death animation component initialized
[20:27:33] [ENEMY] [Enemy7] Death animation component initialized
[20:27:33] [ENEMY] [Enemy8] Death animation component initialized
[20:27:33] [ENEMY] [Enemy9] Death animation component initialized
[20:27:33] [ENEMY] [Enemy10] Death animation component initialized
[20:27:33] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:27:33] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:27:33] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:27:33] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:27:33] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:27:33] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:27:33] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:27:33] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:27:33] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:27:33] [INFO] [ScoreManager] Level started with 10 enemies
[20:27:33] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:27:33] [ENEMY] [Enemy1] Registered as sound listener
[20:27:33] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:27:33] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:27:33] [ENEMY] [Enemy2] Registered as sound listener
[20:27:33] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:27:33] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:27:33] [ENEMY] [Enemy3] Registered as sound listener
[20:27:33] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:27:33] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:27:33] [ENEMY] [Enemy4] Registered as sound listener
[20:27:33] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:27:33] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:27:33] [ENEMY] [Enemy5] Registered as sound listener
[20:27:33] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:27:33] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:27:33] [ENEMY] [Enemy6] Registered as sound listener
[20:27:33] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:27:33] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:27:33] [ENEMY] [Enemy7] Registered as sound listener
[20:27:33] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:27:33] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:27:33] [ENEMY] [Enemy8] Registered as sound listener
[20:27:33] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:27:33] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:27:33] [ENEMY] [Enemy9] Registered as sound listener
[20:27:33] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:27:33] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:27:33] [ENEMY] [Enemy10] Registered as sound listener
[20:27:33] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:27:33] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:27:33] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:27:33] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:27:33] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:27:33] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:27:33] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:27:33] [INFO] [LastChance] Found player: Player
[20:27:33] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:27:33] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:27:33] [INFO] [LastChance] Connected to player Died signal (C#)
[20:27:35] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:27:35] [ENEMY] [Enemy10] Hit taken, health: 1/2
[20:27:35] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:27:35] [INFO] [ImpactEffects] spawn_blood_effect called at (1137.213, 1543.261), dir=(0.830204, 0.557459), lethal=false
[20:27:35] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:27:35] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:27:35] [INFO] [ImpactEffects] Blood effect spawned at (1137.213, 1543.261) (scale=0.9)
[20:27:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(918.7867, 1324.062), shooter_id=8271838577993, bullet_pos=(988.7686, 1379.854)
[20:27:35] [INFO] [Bullet] Using shooter_position, distance=89.5
[20:27:35] [INFO] [Bullet] Distance to wall: 89.5 (6.09421957598806% of viewport)
[20:27:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:35] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:35] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:27:35] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:27:35] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:27:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1096.034, 1501.481), source=ENEMY (Enemy10), range=1469, listeners=20
[20:27:35] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:27:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:35] [INFO] [LastChance] Threat detected: Bullet
[20:27:35] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:27:35] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:27:35] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:27:35] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:27:35] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:27:35] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:27:35] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:27:35] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:27:35] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:27:35] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:27:35] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:27:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1096.034, 1501.481), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:35] [INFO] [LastChance] Threat detected: @Area2D@9483
[20:27:35] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:36] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:27:36] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:27:36] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:27:36] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:27:36] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:27:36] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[20:27:36] [INFO] [LastChance] Player died
[20:27:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1096.034, 1501.481), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:36] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:36] [INFO] [LastChance] Threat detected: Bullet
[20:27:36] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:36] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
[20:27:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:27:36] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:27:36] [ENEMY] [Enemy1] Death animation component initialized
[20:27:36] [ENEMY] [Enemy2] Death animation component initialized
[20:27:36] [ENEMY] [Enemy3] Death animation component initialized
[20:27:36] [ENEMY] [Enemy4] Death animation component initialized
[20:27:36] [ENEMY] [Enemy5] Death animation component initialized
[20:27:36] [ENEMY] [Enemy6] Death animation component initialized
[20:27:36] [ENEMY] [Enemy7] Death animation component initialized
[20:27:36] [ENEMY] [Enemy8] Death animation component initialized
[20:27:36] [ENEMY] [Enemy9] Death animation component initialized
[20:27:36] [ENEMY] [Enemy10] Death animation component initialized
[20:27:36] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:27:36] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:27:36] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:27:36] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:27:36] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:27:36] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:27:36] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:27:36] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:27:36] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:27:36] [INFO] [ScoreManager] Level started with 10 enemies
[20:27:36] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:27:36] [ENEMY] [Enemy1] Registered as sound listener
[20:27:36] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:27:36] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:27:36] [ENEMY] [Enemy2] Registered as sound listener
[20:27:36] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:27:36] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:27:36] [ENEMY] [Enemy3] Registered as sound listener
[20:27:36] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:27:36] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:27:36] [ENEMY] [Enemy4] Registered as sound listener
[20:27:36] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:27:36] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:27:36] [ENEMY] [Enemy5] Registered as sound listener
[20:27:36] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:27:36] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:27:36] [ENEMY] [Enemy6] Registered as sound listener
[20:27:36] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:27:36] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:27:36] [ENEMY] [Enemy7] Registered as sound listener
[20:27:36] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:27:36] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:27:36] [ENEMY] [Enemy8] Registered as sound listener
[20:27:36] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:27:36] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:27:36] [ENEMY] [Enemy9] Registered as sound listener
[20:27:36] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:27:36] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:27:36] [ENEMY] [Enemy10] Registered as sound listener
[20:27:36] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:27:36] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:27:36] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:27:36] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:27:36] [INFO] [LastChance] Found player: Player
[20:27:36] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:27:36] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:27:36] [INFO] [LastChance] Connected to player Died signal (C#)
[20:27:36] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:27:36] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:27:36] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:27:37] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:27:38] [ENEMY] [Enemy10] Hit taken, health: 3/4
[20:27:38] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:27:38] [INFO] [ImpactEffects] spawn_blood_effect called at (1099.972, 1488.867), dir=(0.873755, 0.486367), lethal=false
[20:27:38] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:27:38] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:27:38] [INFO] [ImpactEffects] Blood effect spawned at (1099.972, 1488.867) (scale=0.9)
[20:27:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.343, 1476.853), source=ENEMY (Enemy10), range=1469, listeners=20
[20:27:38] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:27:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:38] [INFO] [LastChance] Threat detected: Bullet
[20:27:38] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:38] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:27:38] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:27:38] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:27:38] [ENEMY] [Enemy10] Hit taken, health: 2/4
[20:27:38] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:27:38] [INFO] [ImpactEffects] spawn_blood_effect called at (1088.425, 1471.656), dir=(0.868097, 0.496394), lethal=false
[20:27:38] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:27:38] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:27:38] [INFO] [ImpactEffects] Blood effect spawned at (1088.425, 1471.656) (scale=0.9)
[20:27:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1088.425, 1471.656), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1025.27, 1446.319), shooter_id=8438369225583, bullet_pos=(905.2123, 1411.516)
[20:27:38] [INFO] [Bullet] Using shooter_position, distance=124.999885559082
[20:27:38] [INFO] [Bullet] Distance to wall: 124.999885559082 (8.51147206223938% of viewport)
[20:27:38] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1096.535, 1464.726), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:38] [INFO] [LastChance] Threat detected: @Area2D@9739
[20:27:38] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:38] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:27:38] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:27:38] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:27:38] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:27:38] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:27:38] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:27:38] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:27:38] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:27:38] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:27:38] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:27:38] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:27:38] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:27:38] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:27:38] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:27:38] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:27:38] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:27:38] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[20:27:38] [INFO] [LastChance] Player died
[20:27:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1103.643, 1457.014), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:38] [INFO] [LastChance] Threat detected: Bullet
[20:27:38] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:39] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:39] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:39] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:27:39] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:27:39] [ENEMY] [Enemy1] Death animation component initialized
[20:27:39] [ENEMY] [Enemy2] Death animation component initialized
[20:27:39] [ENEMY] [Enemy3] Death animation component initialized
[20:27:39] [ENEMY] [Enemy4] Death animation component initialized
[20:27:39] [ENEMY] [Enemy5] Death animation component initialized
[20:27:39] [ENEMY] [Enemy6] Death animation component initialized
[20:27:39] [ENEMY] [Enemy7] Death animation component initialized
[20:27:39] [ENEMY] [Enemy8] Death animation component initialized
[20:27:39] [ENEMY] [Enemy9] Death animation component initialized
[20:27:39] [ENEMY] [Enemy10] Death animation component initialized
[20:27:39] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:27:39] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:27:39] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:27:39] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:27:39] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:27:39] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:27:39] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:27:39] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:27:39] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:27:39] [INFO] [ScoreManager] Level started with 10 enemies
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:27:39] [ENEMY] [Enemy1] Registered as sound listener
[20:27:39] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:27:39] [ENEMY] [Enemy2] Registered as sound listener
[20:27:39] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:27:39] [ENEMY] [Enemy3] Registered as sound listener
[20:27:39] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:27:39] [ENEMY] [Enemy4] Registered as sound listener
[20:27:39] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:27:39] [ENEMY] [Enemy5] Registered as sound listener
[20:27:39] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:27:39] [ENEMY] [Enemy6] Registered as sound listener
[20:27:39] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:27:39] [ENEMY] [Enemy7] Registered as sound listener
[20:27:39] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:27:39] [ENEMY] [Enemy8] Registered as sound listener
[20:27:39] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:27:39] [ENEMY] [Enemy9] Registered as sound listener
[20:27:39] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:27:39] [ENEMY] [Enemy10] Registered as sound listener
[20:27:39] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:27:39] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:27:39] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:27:39] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:27:39] [INFO] [LastChance] Found player: Player
[20:27:39] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:27:39] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:27:39] [INFO] [LastChance] Connected to player Died signal (C#)
[20:27:39] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:27:39] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:27:39] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:27:39] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:39] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:39] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:27:39] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:27:39] [ENEMY] [Enemy1] Death animation component initialized
[20:27:39] [ENEMY] [Enemy2] Death animation component initialized
[20:27:39] [ENEMY] [Enemy3] Death animation component initialized
[20:27:39] [ENEMY] [Enemy4] Death animation component initialized
[20:27:39] [ENEMY] [Enemy5] Death animation component initialized
[20:27:39] [ENEMY] [Enemy6] Death animation component initialized
[20:27:39] [ENEMY] [Enemy7] Death animation component initialized
[20:27:39] [ENEMY] [Enemy8] Death animation component initialized
[20:27:39] [ENEMY] [Enemy9] Death animation component initialized
[20:27:39] [ENEMY] [Enemy10] Death animation component initialized
[20:27:39] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:27:39] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:27:39] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:27:39] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:27:39] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:27:39] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:27:39] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:27:39] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:27:39] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:27:39] [INFO] [ScoreManager] Level started with 10 enemies
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:27:39] [ENEMY] [Enemy1] Registered as sound listener
[20:27:39] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:27:39] [ENEMY] [Enemy2] Registered as sound listener
[20:27:39] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:27:39] [ENEMY] [Enemy3] Registered as sound listener
[20:27:39] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:27:39] [ENEMY] [Enemy4] Registered as sound listener
[20:27:39] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:27:39] [ENEMY] [Enemy5] Registered as sound listener
[20:27:39] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:27:39] [ENEMY] [Enemy6] Registered as sound listener
[20:27:39] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:27:39] [ENEMY] [Enemy7] Registered as sound listener
[20:27:39] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:27:39] [ENEMY] [Enemy8] Registered as sound listener
[20:27:39] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:27:39] [ENEMY] [Enemy9] Registered as sound listener
[20:27:39] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:27:39] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:27:39] [ENEMY] [Enemy10] Registered as sound listener
[20:27:39] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:27:39] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:27:39] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:27:39] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:27:39] [INFO] [LastChance] Found player: Player
[20:27:39] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:27:39] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:27:39] [INFO] [LastChance] Connected to player Died signal (C#)
[20:27:39] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:27:39] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:27:39] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:27:40] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:27:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(707.7054, 1299.676), shooter_id=8636608808480, bullet_pos=(899.1783, 1416.887)
[20:27:40] [INFO] [Bullet] Using shooter_position, distance=224.500045776367
[20:27:40] [INFO] [Bullet] Distance to wall: 224.500045776367 (15.2866209360956% of viewport)
[20:27:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:40] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:41] [ENEMY] [Enemy10] Hit taken, health: 1/2
[20:27:41] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:27:41] [INFO] [ImpactEffects] spawn_blood_effect called at (1074.163, 1469.925), dir=(0.852325, 0.523012), lethal=false
[20:27:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:27:41] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:27:41] [INFO] [ImpactEffects] Blood effect spawned at (1074.163, 1469.925) (scale=0.9)
[20:27:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1065.442, 1463.783), source=ENEMY (Enemy10), range=1469, listeners=30
[20:27:41] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[20:27:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:41] [INFO] [LastChance] Threat detected: Bullet
[20:27:41] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(836.8743, 1301.049), shooter_id=8636608808480, bullet_pos=(990.0414, 1394.645)
[20:27:41] [INFO] [Bullet] Using shooter_position, distance=179.500137329102
[20:27:41] [INFO] [Bullet] Distance to wall: 179.500137329102 (12.2224944223861% of viewport)
[20:27:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:41] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:41] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:27:41] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:27:41] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:27:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1058.747, 1449.95), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:41] [INFO] [LastChance] Threat detected: Bullet
[20:27:41] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1067.656, 1444.088), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:41] [INFO] [LastChance] Threat detected: @Area2D@10256
[20:27:41] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:41] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:27:41] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:27:41] [ENEMY] [Enemy10] Hit taken, health: 0/2
[20:27:41] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:27:41] [INFO] [ImpactEffects] spawn_blood_effect called at (1073.782, 1438.942), dir=(0.893451, 0.44916), lethal=true
[20:27:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:27:41] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:27:41] [INFO] [ImpactEffects] Blood effect spawned at (1073.782, 1438.942) (scale=1.35)
[20:27:41] [ENEMY] [Enemy10] Enemy died (ricochet: false, penetration: false)
[20:27:41] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:27:41] [INFO] [SoundPropagation] Unregistered listener: Enemy10 (remaining: 9)
[20:27:41] [INFO] [DeathAnim] Started - Angle: 26.7 deg, Index: 13
[20:27:41] [ENEMY] [Enemy10] Death animation started with hit direction: (0.893451, 0.44916)
[20:27:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(996.0379, 1423.528), shooter_id=8635786726268, bullet_pos=(54.26606, 1087.276)
[20:27:41] [INFO] [Bullet] Using shooter_position, distance=999.999755859375
[20:27:41] [INFO] [Bullet] Distance to wall: 999.999755859375 (68.0918222138713% of viewport)
[20:27:41] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:41] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:41] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:27:41] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:27:41] [ENEMY] [Enemy1] Death animation component initialized
[20:27:41] [ENEMY] [Enemy2] Death animation component initialized
[20:27:41] [ENEMY] [Enemy3] Death animation component initialized
[20:27:41] [ENEMY] [Enemy4] Death animation component initialized
[20:27:41] [ENEMY] [Enemy5] Death animation component initialized
[20:27:41] [ENEMY] [Enemy6] Death animation component initialized
[20:27:41] [ENEMY] [Enemy7] Death animation component initialized
[20:27:41] [ENEMY] [Enemy8] Death animation component initialized
[20:27:41] [ENEMY] [Enemy9] Death animation component initialized
[20:27:41] [ENEMY] [Enemy10] Death animation component initialized
[20:27:41] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:27:41] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:27:41] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:27:41] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:27:41] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:27:41] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:27:41] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:27:41] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:27:41] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:27:41] [INFO] [ScoreManager] Level started with 10 enemies
[20:27:41] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[20:27:41] [ENEMY] [Enemy1] Registered as sound listener
[20:27:41] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:27:41] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[20:27:41] [ENEMY] [Enemy2] Registered as sound listener
[20:27:41] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:27:41] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[20:27:41] [ENEMY] [Enemy3] Registered as sound listener
[20:27:41] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:27:41] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[20:27:41] [ENEMY] [Enemy4] Registered as sound listener
[20:27:41] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:27:41] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[20:27:41] [ENEMY] [Enemy5] Registered as sound listener
[20:27:41] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:27:41] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[20:27:41] [ENEMY] [Enemy6] Registered as sound listener
[20:27:41] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:27:41] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[20:27:41] [ENEMY] [Enemy7] Registered as sound listener
[20:27:41] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:27:41] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[20:27:41] [ENEMY] [Enemy8] Registered as sound listener
[20:27:41] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:27:41] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[20:27:41] [ENEMY] [Enemy9] Registered as sound listener
[20:27:41] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:27:41] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[20:27:41] [ENEMY] [Enemy10] Registered as sound listener
[20:27:41] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:27:41] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:27:41] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:27:41] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:27:41] [INFO] [LastChance] Found player: Player
[20:27:41] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:27:41] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:27:41] [INFO] [LastChance] Connected to player Died signal (C#)
[20:27:41] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:27:41] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:27:41] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:27:42] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:27:43] [ENEMY] [Enemy10] Hit taken, health: 2/3
[20:27:43] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:27:43] [INFO] [ImpactEffects] spawn_blood_effect called at (1066.241, 1472.521), dir=(0.87393, 0.486052), lethal=false
[20:27:43] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:27:43] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:27:43] [INFO] [ImpactEffects] Blood effect spawned at (1066.241, 1472.521) (scale=0.9)
[20:27:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1061.795, 1469.575), source=ENEMY (Enemy10), range=1469, listeners=19
[20:27:43] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[20:27:43] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:43] [INFO] [LastChance] Threat detected: Bullet
[20:27:43] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(695.4039, 1241.377), shooter_id=8784583853637, bullet_pos=(996.9396, 1391.861)
[20:27:43] [INFO] [Bullet] Using shooter_position, distance=337.000061035156
[20:27:43] [INFO] [Bullet] Distance to wall: 337.000061035156 (22.9469538443533% of viewport)
[20:27:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:43] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1031.383, 1447.932), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:43] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:43] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:27:43] [INFO] [LastChance] Threat detected: @Area2D@10524
[20:27:43] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1029.386, 1436.699), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:43] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1038.153, 1442.752), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:43] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(768.8322, 1250), shooter_id=8784583853637, bullet_pos=(1003.799, 1381.988)
[20:27:43] [INFO] [Bullet] Using shooter_position, distance=269.499877929688
[20:27:43] [INFO] [Bullet] Distance to wall: 269.499877929688 (18.35074225481% of viewport)
[20:27:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:43] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(768.8322, 1250), shooter_id=8784583853637, bullet_pos=(1003.799, 1381.988)
[20:27:43] [INFO] [Bullet] Using shooter_position, distance=269.499877929688
[20:27:43] [INFO] [Bullet] Distance to wall: 269.499877929688 (18.35074225481% of viewport)
[20:27:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:43] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:43] [INFO] [LastChance] Threat detected: @Area2D@10528
[20:27:43] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1047.825, 1447.229), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:43] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:43] [INFO] [LastChance] Threat detected: @Area2D@10531
[20:27:43] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:43] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:27:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1001.321, 1438.243), shooter_id=8783761770983, bullet_pos=(33.71271, 786.4427)
[20:27:43] [INFO] [Bullet] Using shooter_position, distance=1166.66625976563
[20:27:43] [INFO] [Bullet] Distance to wall: 1166.66625976563 (79.4404509375245% of viewport)
[20:27:43] [INFO] [Bullet] Distance-based penetration chance: 53.9861405728881%
[20:27:43] [INFO] [Bullet] Starting wall penetration at (33.71271, 786.4427)
[20:27:43] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:27:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 44.6016273498535
[20:27:43] [INFO] [Bullet] Body exited signal received for penetrating body
[20:27:43] [INFO] [Bullet] Exiting penetration at (-4.991644, 760.3706) after traveling 41.6666679382324 pixels through wall
[20:27:43] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:27:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(990.546, 1410.491), shooter_id=8783761770983, bullet_pos=(623.4435, 1012.197)
[20:27:43] [INFO] [Bullet] Using shooter_position, distance=541.666748046875
[20:27:43] [INFO] [Bullet] Distance to wall: 541.666748046875 (36.883084911833% of viewport)
[20:27:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(973.0001, 1412.82), shooter_id=8783761770983, bullet_pos=(48.62056, 701.0385)
[20:27:43] [INFO] [Bullet] Using shooter_position, distance=1166.66650390625
[20:27:43] [INFO] [Bullet] Distance to wall: 1166.66650390625 (79.4404675615086% of viewport)
[20:27:43] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:43] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:43] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:27:43] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:27:43] [ENEMY] [Enemy1] Death animation component initialized
[20:27:43] [ENEMY] [Enemy2] Death animation component initialized
[20:27:43] [ENEMY] [Enemy3] Death animation component initialized
[20:27:43] [ENEMY] [Enemy4] Death animation component initialized
[20:27:43] [ENEMY] [Enemy5] Death animation component initialized
[20:27:43] [ENEMY] [Enemy6] Death animation component initialized
[20:27:43] [ENEMY] [Enemy7] Death animation component initialized
[20:27:43] [ENEMY] [Enemy8] Death animation component initialized
[20:27:43] [ENEMY] [Enemy9] Death animation component initialized
[20:27:43] [ENEMY] [Enemy10] Death animation component initialized
[20:27:43] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:27:43] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:27:43] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:27:43] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:27:43] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:27:43] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:27:43] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:27:43] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:27:43] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:27:43] [INFO] [ScoreManager] Level started with 10 enemies
[20:27:43] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:27:43] [ENEMY] [Enemy1] Registered as sound listener
[20:27:43] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:27:43] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:27:43] [ENEMY] [Enemy2] Registered as sound listener
[20:27:43] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:27:43] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:27:43] [ENEMY] [Enemy3] Registered as sound listener
[20:27:43] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:27:43] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:27:43] [ENEMY] [Enemy4] Registered as sound listener
[20:27:43] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:27:43] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:27:43] [ENEMY] [Enemy5] Registered as sound listener
[20:27:43] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:27:43] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:27:43] [ENEMY] [Enemy6] Registered as sound listener
[20:27:43] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:27:43] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:27:43] [ENEMY] [Enemy7] Registered as sound listener
[20:27:43] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:27:43] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:27:43] [ENEMY] [Enemy8] Registered as sound listener
[20:27:43] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:27:43] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:27:43] [ENEMY] [Enemy9] Registered as sound listener
[20:27:43] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:27:43] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:27:43] [ENEMY] [Enemy10] Registered as sound listener
[20:27:43] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:27:43] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:27:43] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:27:43] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:27:43] [INFO] [LastChance] Found player: Player
[20:27:43] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:27:43] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:27:43] [INFO] [LastChance] Connected to player Died signal (C#)
[20:27:43] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:27:43] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:27:43] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:27:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=8901470717326, bullet_pos=(1708.432, 1198.136)
[20:27:45] [INFO] [Bullet] Using shooter_position, distance=1259.50085449219
[20:27:45] [INFO] [Bullet] Distance to wall: 1259.50085449219 (85.7617292002232% of viewport)
[20:27:45] [INFO] [Bullet] Distance-based penetration chance: 46.6113159330729%
[20:27:45] [INFO] [Bullet] Penetration failed (distance roll)
[20:27:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=8901470717326, bullet_pos=(1708.448, 1198.525)
[20:27:46] [INFO] [Bullet] Using shooter_position, distance=1259.5
[20:27:46] [INFO] [Bullet] Distance to wall: 1259.5 (85.7616710162789% of viewport)
[20:27:46] [INFO] [Bullet] Distance-based penetration chance: 46.6113838143413%
[20:27:46] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=8901470717326, bullet_pos=(1708.803, 1208.119)
[20:27:46] [INFO] [Bullet] Using shooter_position, distance=1259.49963378906
[20:27:46] [INFO] [Bullet] Distance to wall: 1259.49963378906 (85.7616460803028% of viewport)
[20:27:46] [INFO] [Bullet] Distance-based penetration chance: 46.6114129063135%
[20:27:46] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:47] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:47] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:47] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:27:47] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:27:47] [ENEMY] [Enemy1] Death animation component initialized
[20:27:47] [ENEMY] [Enemy2] Death animation component initialized
[20:27:47] [ENEMY] [Enemy3] Death animation component initialized
[20:27:47] [ENEMY] [Enemy4] Death animation component initialized
[20:27:47] [ENEMY] [Enemy5] Death animation component initialized
[20:27:47] [ENEMY] [Enemy6] Death animation component initialized
[20:27:47] [ENEMY] [Enemy7] Death animation component initialized
[20:27:47] [ENEMY] [Enemy8] Death animation component initialized
[20:27:47] [ENEMY] [Enemy9] Death animation component initialized
[20:27:47] [ENEMY] [Enemy10] Death animation component initialized
[20:27:47] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:27:47] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:27:47] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:27:47] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:27:47] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:27:47] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:27:47] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:27:47] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:27:47] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:27:47] [INFO] [ScoreManager] Level started with 10 enemies
[20:27:47] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:27:47] [ENEMY] [Enemy1] Registered as sound listener
[20:27:47] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:27:47] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:27:47] [ENEMY] [Enemy2] Registered as sound listener
[20:27:47] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:27:47] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:27:47] [ENEMY] [Enemy3] Registered as sound listener
[20:27:47] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:27:47] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:27:47] [ENEMY] [Enemy4] Registered as sound listener
[20:27:47] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:27:47] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:27:47] [ENEMY] [Enemy5] Registered as sound listener
[20:27:47] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:27:47] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:27:47] [ENEMY] [Enemy6] Registered as sound listener
[20:27:47] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:27:47] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:27:47] [ENEMY] [Enemy7] Registered as sound listener
[20:27:47] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:27:47] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:27:47] [ENEMY] [Enemy8] Registered as sound listener
[20:27:47] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:27:47] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:27:47] [ENEMY] [Enemy9] Registered as sound listener
[20:27:47] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:27:47] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:27:47] [ENEMY] [Enemy10] Registered as sound listener
[20:27:47] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:27:47] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:27:47] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:27:47] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:27:47] [INFO] [LastChance] Found player: Player
[20:27:47] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:27:47] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:27:47] [INFO] [LastChance] Connected to player Died signal (C#)
[20:27:47] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:27:47] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:27:47] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:27:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=9127828916153, bullet_pos=(1708.953, 1212.875)
[20:27:49] [INFO] [Bullet] Using shooter_position, distance=1259.50048828125
[20:27:49] [INFO] [Bullet] Distance to wall: 1259.50048828125 (85.7617042642471% of viewport)
[20:27:49] [INFO] [Bullet] Distance-based penetration chance: 46.6113450250451%
[20:27:49] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=9127828916153, bullet_pos=(1708.058, 1189.758)
[20:27:50] [INFO] [Bullet] Using shooter_position, distance=1259.49975585938
[20:27:50] [INFO] [Bullet] Distance to wall: 1259.49975585938 (85.7616543922948% of viewport)
[20:27:50] [INFO] [Bullet] Distance-based penetration chance: 46.6114032089894%
[20:27:50] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1250), shooter_id=9127828916153, bullet_pos=(1708.94, 1212.438)
[20:27:51] [INFO] [Bullet] Using shooter_position, distance=1259.49987792969
[20:27:51] [INFO] [Bullet] Distance to wall: 1259.49987792969 (85.7616627042868% of viewport)
[20:27:51] [INFO] [Bullet] Distance-based penetration chance: 46.6113935116654%
[20:27:51] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:51] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:51] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:51] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:27:51] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:27:51] [ENEMY] [Enemy1] Death animation component initialized
[20:27:51] [ENEMY] [Enemy2] Death animation component initialized
[20:27:51] [ENEMY] [Enemy3] Death animation component initialized
[20:27:51] [ENEMY] [Enemy4] Death animation component initialized
[20:27:51] [ENEMY] [Enemy5] Death animation component initialized
[20:27:51] [ENEMY] [Enemy6] Death animation component initialized
[20:27:51] [ENEMY] [Enemy7] Death animation component initialized
[20:27:51] [ENEMY] [Enemy8] Death animation component initialized
[20:27:51] [ENEMY] [Enemy9] Death animation component initialized
[20:27:51] [ENEMY] [Enemy10] Death animation component initialized
[20:27:51] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:27:51] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:27:51] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:27:51] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:27:51] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:27:51] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:27:51] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:27:51] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:27:51] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:27:51] [INFO] [ScoreManager] Level started with 10 enemies
[20:27:51] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 31)
[20:27:51] [ENEMY] [Enemy1] Registered as sound listener
[20:27:51] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:27:51] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 32)
[20:27:51] [ENEMY] [Enemy2] Registered as sound listener
[20:27:51] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:27:51] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 33)
[20:27:51] [ENEMY] [Enemy3] Registered as sound listener
[20:27:51] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:27:51] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 34)
[20:27:51] [ENEMY] [Enemy4] Registered as sound listener
[20:27:51] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:27:51] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 35)
[20:27:51] [ENEMY] [Enemy5] Registered as sound listener
[20:27:51] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:27:51] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 36)
[20:27:51] [ENEMY] [Enemy6] Registered as sound listener
[20:27:51] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:27:51] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 37)
[20:27:51] [ENEMY] [Enemy7] Registered as sound listener
[20:27:51] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:27:51] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 38)
[20:27:51] [ENEMY] [Enemy8] Registered as sound listener
[20:27:51] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:27:51] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 39)
[20:27:51] [ENEMY] [Enemy9] Registered as sound listener
[20:27:51] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:27:51] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 40)
[20:27:51] [ENEMY] [Enemy10] Registered as sound listener
[20:27:51] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:27:51] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:27:51] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:27:51] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:27:51] [INFO] [LastChance] Found player: Player
[20:27:51] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:27:51] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:27:51] [INFO] [LastChance] Connected to player Died signal (C#)
[20:27:51] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:27:51] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:27:51] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:27:52] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:27:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=40
[20:27:52] [INFO] [SoundPropagation] Cleaned up 30 invalid listeners
[20:27:52] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:53] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:27:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=9332259294147, bullet_pos=(41.69983, 702.3934)
[20:27:53] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[20:27:53] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[20:27:53] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:27:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=9332259294147, bullet_pos=(510.1906, 374.7977)
[20:27:53] [INFO] [Bullet] Using shooter_position, distance=1166.58044433594
[20:27:53] [INFO] [Bullet] Distance to wall: 1166.58044433594 (79.4346076071164% of viewport)
[20:27:53] [INFO] [Bullet] Distance-based penetration chance: 53.9929577916975%
[20:27:53] [INFO] [Bullet] Starting wall penetration at (510.1906, 374.7977)
[20:27:53] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.5659866333008
[20:27:53] [INFO] [Bullet] Body exited signal received for penetrating body
[20:27:53] [INFO] [Bullet] Exiting penetration at (543.3127, 351.6367) after traveling 35.4166679382324 pixels through wall
[20:27:53] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[20:27:53] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:27:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 793.9999), shooter_id=9333081377360, bullet_pos=(921.6261, 775.2116)
[20:27:53] [INFO] [Bullet] Using shooter_position, distance=472.000183105469
[20:27:53] [INFO] [Bullet] Distance to wall: 472.000183105469 (32.1393603994558% of viewport)
[20:27:53] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:53] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:53] [ENEMY] [Enemy3] Hit taken, health: 1/2
[20:27:53] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:27:53] [INFO] [ImpactEffects] spawn_blood_effect called at (672.4723, 762.8239), dir=(0.995275, -0.0971), lethal=false
[20:27:53] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:27:53] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:27:53] [INFO] [ImpactEffects] Blood effect spawned at (672.4723, 762.8239) (scale=0.9)
[20:27:54] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:27:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 784.4444), shooter_id=9333081377360, bullet_pos=(916.5315, 712.8057)
[20:27:54] [INFO] [Bullet] Using shooter_position, distance=471.999725341797
[20:27:54] [INFO] [Bullet] Distance to wall: 471.999725341797 (32.1393292294857% of viewport)
[20:27:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:54] [INFO] [Bullet] Caliber cannot penetrate walls
[20:27:54] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:27:54] [ENEMY] [Enemy10] FLANKING started: target=(646.0011, 744.6503), side=left, pos=(1022.668, 1432.257)
[20:27:54] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:27:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:27:54] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:27:54] [ENEMY] [Enemy1] Death animation component initialized
[20:27:54] [ENEMY] [Enemy2] Death animation component initialized
[20:27:54] [ENEMY] [Enemy3] Death animation component initialized
[20:27:54] [ENEMY] [Enemy4] Death animation component initialized
[20:27:54] [ENEMY] [Enemy5] Death animation component initialized
[20:27:54] [ENEMY] [Enemy6] Death animation component initialized
[20:27:54] [ENEMY] [Enemy7] Death animation component initialized
[20:27:54] [ENEMY] [Enemy8] Death animation component initialized
[20:27:54] [ENEMY] [Enemy9] Death animation component initialized
[20:27:54] [ENEMY] [Enemy10] Death animation component initialized
[20:27:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:27:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:27:54] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:27:54] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:27:54] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:27:54] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:27:54] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:27:54] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:27:54] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:27:54] [INFO] [ScoreManager] Level started with 10 enemies
[20:27:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:27:54] [ENEMY] [Enemy1] Registered as sound listener
[20:27:54] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:27:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:27:54] [ENEMY] [Enemy2] Registered as sound listener
[20:27:54] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:27:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:27:54] [ENEMY] [Enemy3] Registered as sound listener
[20:27:54] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:27:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:27:54] [ENEMY] [Enemy4] Registered as sound listener
[20:27:54] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:27:54] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:27:54] [ENEMY] [Enemy5] Registered as sound listener
[20:27:54] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:27:54] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:27:54] [ENEMY] [Enemy6] Registered as sound listener
[20:27:54] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:27:54] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:27:54] [ENEMY] [Enemy7] Registered as sound listener
[20:27:54] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:27:54] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:27:54] [ENEMY] [Enemy8] Registered as sound listener
[20:27:54] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:27:54] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:27:54] [ENEMY] [Enemy9] Registered as sound listener
[20:27:54] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:27:54] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:27:54] [ENEMY] [Enemy10] Registered as sound listener
[20:27:54] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:27:54] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:27:54] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:27:54] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:27:54] [INFO] [LastChance] Found player: Player
[20:27:54] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:27:54] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:27:54] [INFO] [LastChance] Connected to player Died signal (C#)
[20:27:54] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:27:54] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:27:54] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:27:55] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:27:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1061.635, 1469.769), source=ENEMY (Enemy10), range=1469, listeners=20
[20:27:55] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:27:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1030.254, 1449.547), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(999.5549, 1428.307), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(968.225, 1415.097), source=ENEMY (Enemy10), range=1469, listeners=10
[20:27:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1000.312, 1440.238), shooter_id=9500517992778, bullet_pos=(49.33207, 839.1879)
[20:27:56] [INFO] [Bullet] Using shooter_position, distance=1124.99987792969
[20:27:56] [INFO] [Bullet] Distance to wall: 1124.99987792969 (76.6033103805953% of viewport)
[20:27:56] [INFO] [Bullet] Distance-based penetration chance: 57.2961378893055%
[20:27:56] [INFO] [Bullet] Starting wall penetration at (49.33207, 839.1879)
[20:27:56] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:27:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.162992477417
[20:27:56] [INFO] [Bullet] Body exited signal received for penetrating body
[20:27:56] [INFO] [Bullet] Exiting penetration at (9.88401, 814.2554) after traveling 41.6666679382324 pixels through wall
[20:27:56] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:27:56] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:56] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:27:56] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:27:56] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:27:56] [ENEMY] [Enemy1] Death animation component initialized
[20:27:56] [ENEMY] [Enemy2] Death animation component initialized
[20:27:56] [ENEMY] [Enemy3] Death animation component initialized
[20:27:56] [ENEMY] [Enemy4] Death animation component initialized
[20:27:56] [ENEMY] [Enemy5] Death animation component initialized
[20:27:56] [ENEMY] [Enemy6] Death animation component initialized
[20:27:56] [ENEMY] [Enemy7] Death animation component initialized
[20:27:56] [ENEMY] [Enemy8] Death animation component initialized
[20:27:56] [ENEMY] [Enemy9] Death animation component initialized
[20:27:56] [ENEMY] [Enemy10] Death animation component initialized
[20:27:56] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:27:56] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:27:56] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:27:56] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:27:56] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:27:56] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:27:56] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:27:56] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:27:56] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:27:56] [INFO] [ScoreManager] Level started with 10 enemies
[20:27:56] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:27:56] [ENEMY] [Enemy1] Registered as sound listener
[20:27:56] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:27:56] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:27:56] [ENEMY] [Enemy2] Registered as sound listener
[20:27:56] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:27:56] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:27:56] [ENEMY] [Enemy3] Registered as sound listener
[20:27:56] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:27:56] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:27:56] [ENEMY] [Enemy4] Registered as sound listener
[20:27:56] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:27:56] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:27:56] [ENEMY] [Enemy5] Registered as sound listener
[20:27:56] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:27:56] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:27:56] [ENEMY] [Enemy6] Registered as sound listener
[20:27:56] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:27:56] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:27:56] [ENEMY] [Enemy7] Registered as sound listener
[20:27:56] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:27:56] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:27:56] [ENEMY] [Enemy8] Registered as sound listener
[20:27:56] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:27:56] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:27:56] [ENEMY] [Enemy9] Registered as sound listener
[20:27:56] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:27:56] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:27:56] [ENEMY] [Enemy10] Registered as sound listener
[20:27:56] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:27:56] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:27:56] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:27:56] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:27:56] [INFO] [LastChance] Found player: Player
[20:27:56] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:27:56] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:27:56] [INFO] [LastChance] Connected to player Died signal (C#)
[20:27:56] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:27:56] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:27:56] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:27:56] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:27:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.399, 1465.457), source=ENEMY (Enemy10), range=1469, listeners=20
[20:27:57] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:27:57] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:27:57] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:27:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.763, 1430.831), shooter_id=9613596428593, bullet_pos=(42.53045, 701.2751)
[20:27:57] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
[20:27:57] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
[20:27:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.763, 1430.831), shooter_id=9613596428593, bullet_pos=(505.1012, 365.3714)
[20:27:58] [INFO] [Bullet] Using shooter_position, distance=1177.22839355469
[20:27:58] [INFO] [Bullet] Distance to wall: 1177.22839355469 (80.1596460492732% of viewport)
[20:27:58] [INFO] [Bullet] Distance-based penetration chance: 53.1470796091813%
[20:27:58] [INFO] [Bullet] Penetration failed (distance roll)
[20:27:58] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:27:58] [ENEMY] [Enemy3] Hit taken, health: 2/3
[20:27:58] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:27:58] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.989863, -0.142022), lethal=false
[20:27:58] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:27:58] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:27:58] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=0.9)
[20:27:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:27:58] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[20:27:58] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[20:27:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:27:58] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:27:58] [INFO] [LastChance] Threat detected: Bullet
[20:27:58] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:58] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:58] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:27:58] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:27:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(635.8423, 772.6801), shooter_id=9611599939965, bullet_pos=(513.9907, 800.5585)
[20:27:58] [INFO] [Bullet] Using shooter_position, distance=125.000030517578
[20:27:58] [INFO] [Bullet] Distance to wall: 125.000030517578 (8.51148193272994% of viewport)
[20:27:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:58] [ENEMY] [Enemy10] FLANKING started: target=(680.5552, 762.8384), side=left, pos=(1030.969, 1438.953)
[20:27:58] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:27:58] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:27:58] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:27:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:27:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:27:59] [INFO] [LastChance] Threat detected: Bullet
[20:27:59] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:59] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:27:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(635.8423, 772.6801), shooter_id=9611599939965, bullet_pos=(513.9907, 800.5585)
[20:27:59] [INFO] [Bullet] Using shooter_position, distance=125.000030517578
[20:27:59] [INFO] [Bullet] Distance to wall: 125.000030517578 (8.51148193272994% of viewport)
[20:27:59] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:59] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:27:59] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:27:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(693.8083, 755.066), source=ENEMY (Enemy3), range=1469, listeners=10
[20:27:59] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:27:59] [ENEMY] [Enemy3] Hit taken, health: 1/3
[20:27:59] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:27:59] [INFO] [ImpactEffects] spawn_blood_effect called at (687.6166, 760.132), dir=(0.992231, -0.124407), lethal=false
[20:27:59] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:27:59] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:27:59] [INFO] [ImpactEffects] Blood effect spawned at (687.6166, 760.132) (scale=0.9)
[20:27:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(629.2833, 776.679), shooter_id=9611599939965, bullet_pos=(515.6091, 828.6709)
[20:27:59] [INFO] [Bullet] Using shooter_position, distance=124.999969482422
[20:27:59] [INFO] [Bullet] Distance to wall: 124.999969482422 (8.51147777673392% of viewport)
[20:27:59] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:59] [INFO] [Bullet] Starting wall penetration at (515.6091, 828.6709)
[20:27:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(685.5527, 761.8206), source=ENEMY (Enemy3), range=1469, listeners=10
[20:27:59] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:27:59] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29.50244140625
[20:27:59] [INFO] [LastChance] Threat detected: @Area2D@11832
[20:27:59] [INFO] [LastChance] Not in hard mode - effect disabled
[20:27:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:27:59] [INFO] [Bullet] Body exited signal received for penetrating body
[20:27:59] [INFO] [Bullet] Exiting penetration at (473.1707, 848.0812) after traveling 41.6666717529297 pixels through wall
[20:27:59] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:27:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(620.5297, 781.8856), shooter_id=9611599939965, bullet_pos=(500.2971, 816.0784)
[20:27:59] [INFO] [Bullet] Using shooter_position, distance=125.000030517578
[20:27:59] [INFO] [Bullet] Distance to wall: 125.000030517578 (8.51148193272994% of viewport)
[20:27:59] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:27:59] [INFO] [Bullet] Starting wall penetration at (500.2971, 816.0784)
[20:27:59] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.3577575683594
[20:27:59] [INFO] [Bullet] Body exited signal received for penetrating body
[20:27:59] [INFO] [Bullet] Exiting penetration at (455.4103, 828.8437) after traveling 41.6666679382324 pixels through wall
[20:27:59] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:27:59] [ENEMY] [Enemy3] Hit taken, health: 0/3
[20:27:59] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:27:59] [INFO] [ImpactEffects] spawn_blood_effect called at (642.9828, 798.1737), dir=(0.985595, -0.169122), lethal=true
[20:27:59] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:27:59] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:27:59] [INFO] [ImpactEffects] Blood effect spawned at (642.9828, 798.1737) (scale=1.35)
[20:27:59] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[20:27:59] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:27:59] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[20:27:59] [INFO] [DeathAnim] Started - Angle: -9.7 deg, Index: 11
[20:27:59] [ENEMY] [Enemy3] Death animation started with hit direction: (0.985595, -0.169122)
[20:27:59] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:27:59] [ENEMY] [Enemy3] Ragdoll activated
[20:27:59] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:28:00] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[20:28:00] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[20:28:00] [ENEMY] [Enemy3] Death animation completed
[20:28:00] [ENEMY] [Enemy1] State: IDLE -> COMBAT
[20:28:01] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[20:28:01] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:28:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
[20:28:01] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
[20:28:01] [INFO] [LastChance] Threat detected: Bullet
[20:28:01] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:01] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[20:28:01] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:28:01] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:28:01] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:28:01] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:28:01] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:28:01] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:28:01] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:28:01] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:28:01] [INFO] [PenultimateHit] Applying saturation to 9 enemies
[20:28:01] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:28:01] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:28:01] [ENEMY] [Enemy2] Hit taken, health: 2/3
[20:28:01] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[20:28:01] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(-0.672112, -0.740449), lethal=false
[20:28:01] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:28:01] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:28:01] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=0.9)
[20:28:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=9
[20:28:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=2
[20:28:02] [INFO] [LastChance] Threat detected: Bullet
[20:28:02] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:02] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:28:02] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:28:02] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:28:02] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:28:02] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:28:02] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[20:28:02] [INFO] [LastChance] Player died
[20:28:02] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:28:02] [ENEMY] [Enemy2] Hit taken, health: 1/3
[20:28:02] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[20:28:02] [INFO] [ImpactEffects] spawn_blood_effect called at (402.4792, 542.3938), dir=(-0.722562, -0.691306), lethal=false
[20:28:02] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:28:02] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:28:02] [INFO] [ImpactEffects] Wall found for blood splatter at (330.9932, 474) (dist=98 px)
[20:28:02] [INFO] [ImpactEffects] Blood effect spawned at (402.4792, 542.3938) (scale=0.9)
[20:28:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(402.4792, 542.3938), source=ENEMY (Enemy2), range=1469, listeners=9
[20:28:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:28:02] [INFO] [LastChance] Threat detected: Bullet
[20:28:02] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(405.7849, 532.2522), source=ENEMY (Enemy2), range=1469, listeners=9
[20:28:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:28:02] [INFO] [LastChance] Threat detected: @Area2D@11863
[20:28:02] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(469.135, 893.4507), source=ENEMY (Enemy10), range=1469, listeners=9
[20:28:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:28:02] [INFO] [LastChance] Threat detected: Bullet
[20:28:02] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(469.135, 893.4507), source=ENEMY (Enemy10), range=1469, listeners=9
[20:28:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:28:02] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:28:02] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:28:02] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:28:02] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:28:02] [ENEMY] [Enemy1] Death animation component initialized
[20:28:02] [ENEMY] [Enemy2] Death animation component initialized
[20:28:02] [ENEMY] [Enemy3] Death animation component initialized
[20:28:02] [ENEMY] [Enemy4] Death animation component initialized
[20:28:02] [ENEMY] [Enemy5] Death animation component initialized
[20:28:02] [ENEMY] [Enemy6] Death animation component initialized
[20:28:02] [ENEMY] [Enemy7] Death animation component initialized
[20:28:02] [ENEMY] [Enemy8] Death animation component initialized
[20:28:02] [ENEMY] [Enemy9] Death animation component initialized
[20:28:02] [ENEMY] [Enemy10] Death animation component initialized
[20:28:02] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:28:02] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:28:02] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:28:02] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:28:02] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:28:02] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:28:02] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:28:02] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:28:02] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:28:02] [INFO] [ScoreManager] Level started with 10 enemies
[20:28:02] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[20:28:02] [ENEMY] [Enemy1] Registered as sound listener
[20:28:02] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:28:02] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[20:28:02] [ENEMY] [Enemy2] Registered as sound listener
[20:28:02] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:28:02] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[20:28:02] [ENEMY] [Enemy3] Registered as sound listener
[20:28:02] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:28:02] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[20:28:02] [ENEMY] [Enemy4] Registered as sound listener
[20:28:02] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:28:02] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[20:28:02] [ENEMY] [Enemy5] Registered as sound listener
[20:28:02] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:28:02] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[20:28:02] [ENEMY] [Enemy6] Registered as sound listener
[20:28:02] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:28:02] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[20:28:02] [ENEMY] [Enemy7] Registered as sound listener
[20:28:02] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:28:02] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[20:28:02] [ENEMY] [Enemy8] Registered as sound listener
[20:28:02] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:28:02] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[20:28:02] [ENEMY] [Enemy9] Registered as sound listener
[20:28:02] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:28:02] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[20:28:02] [ENEMY] [Enemy10] Registered as sound listener
[20:28:02] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:28:02] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:28:02] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:28:02] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:28:02] [INFO] [LastChance] Found player: Player
[20:28:02] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:28:02] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:28:02] [INFO] [LastChance] Connected to player Died signal (C#)
[20:28:03] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:28:03] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:28:03] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:28:03] [INFO] [Player.Debug] Debug mode toggled: ON
[20:28:03] [INFO] [GameManager] Debug mode toggled: ON
[20:28:05] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:28:05] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:28:06] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:28:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=19
[20:28:07] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[20:28:07] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[20:28:07] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[20:28:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:07] [INFO] [LastChance] Threat detected: Bullet
[20:28:07] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.935, 802.6108), shooter_id=9984322570602, bullet_pos=(508.2175, 799.3541)
[20:28:07] [INFO] [Bullet] Using shooter_position, distance=24.4999809265137
[20:28:07] [INFO] [Bullet] Distance to wall: 24.4999809265137 (1.6682487527787% of viewport)
[20:28:07] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:28:07] [INFO] [Bullet] Caliber cannot penetrate walls
[20:28:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.1644, 773.5715), shooter_id=9981503998154, bullet_pos=(514.713, 803.1443)
[20:28:07] [INFO] [Bullet] Using shooter_position, distance=125.000053405762
[20:28:07] [INFO] [Bullet] Distance to wall: 125.000053405762 (8.51148349122845% of viewport)
[20:28:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:28:07] [INFO] [Bullet] Starting wall penetration at (514.713, 803.1443)
[20:28:07] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:28:07] [INFO] [Bullet] Exiting penetration at (469.3711, 814.1849) after traveling 41.6666679382324 pixels through wall
[20:28:07] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:28:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:07] [INFO] [LastChance] Threat detected: Bullet
[20:28:07] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.1644, 773.5715), shooter_id=9981503998154, bullet_pos=(514.713, 803.1443)
[20:28:07] [INFO] [Bullet] Using shooter_position, distance=125.000053405762
[20:28:07] [INFO] [Bullet] Distance to wall: 125.000053405762 (8.51148349122845% of viewport)
[20:28:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:28:07] [INFO] [Bullet] Starting wall penetration at (514.713, 803.1443)
[20:28:07] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:28:07] [INFO] [Bullet] Exiting penetration at (469.3711, 814.1849) after traveling 41.6666679382324 pixels through wall
[20:28:07] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:28:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:07] [INFO] [LastChance] Threat detected: Bullet
[20:28:07] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.1644, 773.5715), shooter_id=9981503998154, bullet_pos=(514.713, 803.1443)
[20:28:07] [INFO] [Bullet] Using shooter_position, distance=125.000053405762
[20:28:07] [INFO] [Bullet] Distance to wall: 125.000053405762 (8.51148349122845% of viewport)
[20:28:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:28:07] [INFO] [Bullet] Starting wall penetration at (514.713, 803.1443)
[20:28:07] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:28:07] [INFO] [Bullet] Exiting penetration at (469.3711, 814.1849) after traveling 41.6666679382324 pixels through wall
[20:28:07] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:28:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:07] [INFO] [LastChance] Threat detected: Bullet
[20:28:07] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.1644, 773.5715), shooter_id=9981503998154, bullet_pos=(514.713, 803.1443)
[20:28:07] [INFO] [Bullet] Using shooter_position, distance=125.000053405762
[20:28:07] [INFO] [Bullet] Distance to wall: 125.000053405762 (8.51148349122845% of viewport)
[20:28:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:28:07] [INFO] [Bullet] Starting wall penetration at (514.713, 803.1443)
[20:28:07] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:28:07] [INFO] [Bullet] Exiting penetration at (469.3711, 814.1849) after traveling 41.6666679382324 pixels through wall
[20:28:07] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:28:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.935, 802.6108), shooter_id=9984322570602, bullet_pos=(508.1298, 798.7559)
[20:28:07] [INFO] [Bullet] Using shooter_position, distance=24.5000095367432
[20:28:07] [INFO] [Bullet] Distance to wall: 24.5000095367432 (1.66825070090184% of viewport)
[20:28:07] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:28:07] [INFO] [Bullet] Caliber cannot penetrate walls
[20:28:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:07] [INFO] [LastChance] Threat detected: Bullet
[20:28:07] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:07] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:28:07] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:28:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.1644, 773.5715), shooter_id=9981503998154, bullet_pos=(514.713, 803.1443)
[20:28:07] [INFO] [Bullet] Using shooter_position, distance=125.000053405762
[20:28:07] [INFO] [Bullet] Distance to wall: 125.000053405762 (8.51148349122845% of viewport)
[20:28:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:28:07] [INFO] [Bullet] Starting wall penetration at (514.713, 803.1443)
[20:28:07] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:28:07] [INFO] [Bullet] Exiting penetration at (469.3711, 814.1849) after traveling 41.6666679382324 pixels through wall
[20:28:07] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:28:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:08] [INFO] [LastChance] Threat detected: Bullet
[20:28:08] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.1644, 773.5715), shooter_id=9981503998154, bullet_pos=(514.713, 803.1443)
[20:28:08] [INFO] [Bullet] Using shooter_position, distance=125.000053405762
[20:28:08] [INFO] [Bullet] Distance to wall: 125.000053405762 (8.51148349122845% of viewport)
[20:28:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:28:08] [INFO] [Bullet] Starting wall penetration at (514.713, 803.1443)
[20:28:08] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:28:08] [INFO] [Bullet] Exiting penetration at (469.3711, 814.1849) after traveling 41.6666679382324 pixels through wall
[20:28:08] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:28:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:08] [INFO] [LastChance] Threat detected: Bullet
[20:28:08] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.1644, 773.5715), shooter_id=9981503998154, bullet_pos=(514.713, 803.1443)
[20:28:08] [INFO] [Bullet] Using shooter_position, distance=125.000053405762
[20:28:08] [INFO] [Bullet] Distance to wall: 125.000053405762 (8.51148349122845% of viewport)
[20:28:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:28:08] [INFO] [Bullet] Starting wall penetration at (514.713, 803.1443)
[20:28:08] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:28:08] [INFO] [Bullet] Exiting penetration at (469.3711, 814.1849) after traveling 41.6666679382324 pixels through wall
[20:28:08] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:28:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:08] [INFO] [LastChance] Threat detected: Bullet
[20:28:08] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.1644, 773.5715), shooter_id=9981503998154, bullet_pos=(514.713, 803.1443)
[20:28:08] [INFO] [Bullet] Using shooter_position, distance=125.000053405762
[20:28:08] [INFO] [Bullet] Distance to wall: 125.000053405762 (8.51148349122845% of viewport)
[20:28:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:28:08] [INFO] [Bullet] Starting wall penetration at (514.713, 803.1443)
[20:28:08] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:28:08] [INFO] [Bullet] Exiting penetration at (469.3711, 814.1849) after traveling 41.6666679382324 pixels through wall
[20:28:08] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:28:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:08] [INFO] [LastChance] Threat detected: Bullet
[20:28:08] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.1644, 773.5715), shooter_id=9981503998154, bullet_pos=(514.713, 803.1443)
[20:28:08] [INFO] [Bullet] Using shooter_position, distance=125.000053405762
[20:28:08] [INFO] [Bullet] Distance to wall: 125.000053405762 (8.51148349122845% of viewport)
[20:28:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:28:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(636.1644, 773.5715), shooter_id=9981503998154, bullet_pos=(693.3911, 838.1943)
[20:28:08] [INFO] [Bullet] Using shooter_position, distance=86.3191757202148
[20:28:08] [INFO] [Bullet] Distance to wall: 86.3191757202148 (5.87763140175739% of viewport)
[20:28:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:28:08] [INFO] [Bullet] Starting wall penetration at (693.3911, 838.1943)
[20:28:08] [INFO] [LastChance] Threat detected: @Area2D@12144
[20:28:08] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:08] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:28:08] [INFO] [Bullet] Exiting penetration at (733.0519, 845.9743) after traveling 35.4166679382324 pixels through wall
[20:28:08] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[20:28:08] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:28:08] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:28:08] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:28:08] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:28:08] [ENEMY] [Enemy1] Death animation component initialized
[20:28:08] [ENEMY] [Enemy2] Death animation component initialized
[20:28:08] [ENEMY] [Enemy3] Death animation component initialized
[20:28:08] [ENEMY] [Enemy4] Death animation component initialized
[20:28:08] [ENEMY] [Enemy5] Death animation component initialized
[20:28:08] [ENEMY] [Enemy6] Death animation component initialized
[20:28:08] [ENEMY] [Enemy7] Death animation component initialized
[20:28:08] [ENEMY] [Enemy8] Death animation component initialized
[20:28:08] [ENEMY] [Enemy9] Death animation component initialized
[20:28:08] [ENEMY] [Enemy10] Death animation component initialized
[20:28:08] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:28:08] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:28:08] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:28:08] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:28:08] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:28:08] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:28:08] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:28:08] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:28:08] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:28:08] [INFO] [ScoreManager] Level started with 10 enemies
[20:28:08] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:28:08] [ENEMY] [Enemy1] Registered as sound listener
[20:28:08] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:28:08] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:28:08] [ENEMY] [Enemy2] Registered as sound listener
[20:28:08] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:28:08] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:28:08] [ENEMY] [Enemy3] Registered as sound listener
[20:28:08] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:28:08] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:28:08] [ENEMY] [Enemy4] Registered as sound listener
[20:28:08] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:28:08] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:28:08] [ENEMY] [Enemy5] Registered as sound listener
[20:28:08] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:28:08] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:28:08] [ENEMY] [Enemy6] Registered as sound listener
[20:28:08] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:28:08] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:28:08] [ENEMY] [Enemy7] Registered as sound listener
[20:28:08] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:28:08] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:28:08] [ENEMY] [Enemy8] Registered as sound listener
[20:28:08] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:28:08] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:28:08] [ENEMY] [Enemy9] Registered as sound listener
[20:28:08] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:28:08] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:28:08] [ENEMY] [Enemy10] Registered as sound listener
[20:28:08] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:28:08] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:28:08] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:28:08] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:28:08] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:28:08] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:28:08] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:28:08] [INFO] [LastChance] Found player: Player
[20:28:08] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:28:08] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:28:08] [INFO] [LastChance] Connected to player Died signal (C#)
[20:28:09] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:28:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.402, 1465.453), source=ENEMY (Enemy10), range=1469, listeners=20
[20:28:09] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:28:09] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:28:10] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:28:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.784, 1430.795), shooter_id=10302536025561, bullet_pos=(42.94823, 700.7146)
[20:28:10] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
[20:28:10] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
[20:28:10] [INFO] [Bullet] Distance-based penetration chance: 50.6760656778783%
[20:28:10] [INFO] [Bullet] Starting wall penetration at (42.94823, 700.7146)
[20:28:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32.9269104003906
[20:28:10] [INFO] [Bullet] Body exited signal received for penetrating body
[20:28:10] [INFO] [Bullet] Exiting penetration at (5.762829, 672.5184) after traveling 41.6666679382324 pixels through wall
[20:28:10] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:28:10] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:28:11] [ENEMY] [Enemy3] Hit taken, health: 1/2
[20:28:11] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:28:11] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.986012, -0.166675), lethal=false
[20:28:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:28:11] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:28:11] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=0.9)
[20:28:11] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:28:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(693.8083, 755.066), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:11] [ENEMY] [Enemy2] Heard gunshot at (693.8083, 755.066), source_type=1, intensity=0.02, distance=358
[20:28:11] [ENEMY] [Enemy4] Heard gunshot at (693.8083, 755.066), source_type=1, intensity=0.08, distance=180
[20:28:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(626.2677, 763.3644), shooter_id=10300539538365, bullet_pos=(506.0038, 797.4465)
[20:28:11] [INFO] [Bullet] Using shooter_position, distance=124.999946594238
[20:28:11] [INFO] [Bullet] Distance to wall: 124.999946594238 (8.51147621823541% of viewport)
[20:28:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:28:11] [INFO] [Bullet] Starting wall penetration at (506.0038, 797.4465)
[20:28:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(685.5527, 761.8206), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:11] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:28:11] [INFO] [Bullet] Exiting penetration at (461.1053, 810.1705) after traveling 41.6666679382324 pixels through wall
[20:28:11] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:28:11] [INFO] [LastChance] Threat detected: @Area2D@12402
[20:28:11] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:28:11] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:28:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(677.2971, 768.5752), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:11] [ENEMY] [Enemy10] FLANKING started: target=(681.6219, 726.2845), side=left, pos=(1030.999, 1438.915)
[20:28:11] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:28:11] [INFO] [LastChance] Threat detected: Bullet
[20:28:11] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:11] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:28:11] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:28:11] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:28:11] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:28:11] [ENEMY] [Enemy1] Death animation component initialized
[20:28:11] [ENEMY] [Enemy2] Death animation component initialized
[20:28:11] [ENEMY] [Enemy3] Death animation component initialized
[20:28:11] [ENEMY] [Enemy4] Death animation component initialized
[20:28:11] [ENEMY] [Enemy5] Death animation component initialized
[20:28:11] [ENEMY] [Enemy6] Death animation component initialized
[20:28:11] [ENEMY] [Enemy7] Death animation component initialized
[20:28:11] [ENEMY] [Enemy8] Death animation component initialized
[20:28:11] [ENEMY] [Enemy9] Death animation component initialized
[20:28:11] [ENEMY] [Enemy10] Death animation component initialized
[20:28:11] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:28:11] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:28:11] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:28:11] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:28:11] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:28:11] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:28:11] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:28:11] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:28:11] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:28:11] [INFO] [ScoreManager] Level started with 10 enemies
[20:28:11] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:28:11] [ENEMY] [Enemy1] Registered as sound listener
[20:28:11] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:28:11] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:28:11] [ENEMY] [Enemy2] Registered as sound listener
[20:28:11] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:28:11] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:28:11] [ENEMY] [Enemy3] Registered as sound listener
[20:28:11] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:28:11] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:28:11] [ENEMY] [Enemy4] Registered as sound listener
[20:28:11] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:28:11] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:28:11] [ENEMY] [Enemy5] Registered as sound listener
[20:28:11] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:28:11] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:28:11] [ENEMY] [Enemy6] Registered as sound listener
[20:28:11] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:28:11] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:28:11] [ENEMY] [Enemy7] Registered as sound listener
[20:28:11] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:28:11] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:28:11] [ENEMY] [Enemy8] Registered as sound listener
[20:28:11] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:28:11] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:28:11] [ENEMY] [Enemy9] Registered as sound listener
[20:28:11] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:28:11] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:28:11] [ENEMY] [Enemy10] Registered as sound listener
[20:28:11] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:28:11] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:28:11] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:28:11] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:28:11] [INFO] [LastChance] Found player: Player
[20:28:11] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:28:11] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:28:11] [INFO] [LastChance] Connected to player Died signal (C#)
[20:28:11] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:28:11] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:28:11] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:28:12] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:28:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.434, 1465.41), source=ENEMY (Enemy10), range=1469, listeners=20
[20:28:13] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:28:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:28:13] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:28:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.927, 1430.556), shooter_id=10484099058332, bullet_pos=(45.49129, 697.3223)
[20:28:13] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
[20:28:13] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
[20:28:13] [INFO] [Bullet] Distance-based penetration chance: 50.6760947698504%
[20:28:13] [INFO] [Bullet] Starting wall penetration at (45.49129, 697.3223)
[20:28:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29.6931285858154
[20:28:13] [INFO] [Bullet] Body exited signal received for penetrating body
[20:28:13] [INFO] [Bullet] Exiting penetration at (8.398586, 669.0043) after traveling 41.6666679382324 pixels through wall
[20:28:13] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:28:14] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:28:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:14] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[20:28:14] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[20:28:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:14] [INFO] [LastChance] Threat detected: Bullet
[20:28:14] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:14] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:28:14] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:28:14] [ENEMY] [Enemy10] FLANKING started: target=(680.8466, 751.9755), side=left, pos=(1035.235, 1442.151)
[20:28:14] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:28:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:14] [INFO] [LastChance] Threat detected: Bullet
[20:28:14] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:14] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:28:14] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:28:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:14] [INFO] [LastChance] Threat detected: Bullet
[20:28:14] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:14] [ENEMY] [Enemy3] Hit taken, health: 3/4
[20:28:14] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:28:14] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.986523, -0.163625), lethal=false
[20:28:14] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:28:14] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:28:14] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=0.9)
[20:28:14] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:28:14] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:28:14] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:28:14] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:28:14] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:28:14] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:28:14] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:28:14] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:28:14] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:28:14] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:28:14] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:28:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:15] [INFO] [LastChance] Threat detected: Bullet
[20:28:15] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:15] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:28:15] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:28:15] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:28:15] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:28:15] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:28:15] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[20:28:15] [INFO] [LastChance] Player died
[20:28:15] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:28:15] [ENEMY] [Enemy3] Hit taken, health: 2/4
[20:28:15] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:28:15] [INFO] [ImpactEffects] spawn_blood_effect called at (693.7116, 754.9453), dir=(0.990788, -0.135423), lethal=false
[20:28:15] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:28:15] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:28:15] [INFO] [ImpactEffects] Blood effect spawned at (693.7116, 754.9453) (scale=0.9)
[20:28:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(693.7116, 754.9453), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:15] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:28:15] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:28:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(628.0635, 772.8599), shooter_id=10482102569591, bullet_pos=(513.0843, 821.8984)
[20:28:15] [INFO] [Bullet] Using shooter_position, distance=125.000038146973
[20:28:15] [INFO] [Bullet] Distance to wall: 125.000038146973 (8.51148245222944% of viewport)
[20:28:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:28:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(685.3271, 761.539), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:15] [INFO] [LastChance] Threat detected: @Area2D@12666
[20:28:15] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(619.2375, 777.7489), shooter_id=10482102569591, bullet_pos=(496.2082, 799.8578)
[20:28:15] [INFO] [Bullet] Using shooter_position, distance=125.000045776367
[20:28:15] [INFO] [Bullet] Distance to wall: 125.000045776367 (8.51148297172894% of viewport)
[20:28:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:28:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(676.9426, 768.1326), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(628.0635, 772.8599), shooter_id=10482102569591, bullet_pos=(680.3828, 893.7704)
[20:28:15] [INFO] [Bullet] Using shooter_position, distance=131.744659423828
[20:28:15] [INFO] [Bullet] Distance to wall: 131.744659423828 (8.97073611723545% of viewport)
[20:28:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:28:15] [INFO] [Bullet] Starting wall penetration at (680.3828, 893.7704)
[20:28:15] [INFO] [LastChance] Threat detected: @Area2D@12670
[20:28:15] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:15] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:28:15] [INFO] [Bullet] Exiting penetration at (717.5176, 909.7236) after traveling 35.4166679382324 pixels through wall
[20:28:15] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[20:28:16] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[20:28:16] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:28:16] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:28:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:28:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:28:16] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:28:16] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:28:16] [ENEMY] [Enemy1] Death animation component initialized
[20:28:16] [ENEMY] [Enemy2] Death animation component initialized
[20:28:16] [ENEMY] [Enemy3] Death animation component initialized
[20:28:16] [ENEMY] [Enemy4] Death animation component initialized
[20:28:16] [ENEMY] [Enemy5] Death animation component initialized
[20:28:16] [ENEMY] [Enemy6] Death animation component initialized
[20:28:16] [ENEMY] [Enemy7] Death animation component initialized
[20:28:16] [ENEMY] [Enemy8] Death animation component initialized
[20:28:16] [ENEMY] [Enemy9] Death animation component initialized
[20:28:16] [ENEMY] [Enemy10] Death animation component initialized
[20:28:16] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:28:16] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:28:16] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:28:16] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:28:16] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:28:16] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:28:16] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:28:16] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:28:16] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:28:16] [INFO] [ScoreManager] Level started with 10 enemies
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:28:16] [ENEMY] [Enemy1] Registered as sound listener
[20:28:16] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:28:16] [ENEMY] [Enemy2] Registered as sound listener
[20:28:16] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:28:16] [ENEMY] [Enemy3] Registered as sound listener
[20:28:16] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:28:16] [ENEMY] [Enemy4] Registered as sound listener
[20:28:16] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:28:16] [ENEMY] [Enemy5] Registered as sound listener
[20:28:16] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:28:16] [ENEMY] [Enemy6] Registered as sound listener
[20:28:16] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:28:16] [ENEMY] [Enemy7] Registered as sound listener
[20:28:16] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:28:16] [ENEMY] [Enemy8] Registered as sound listener
[20:28:16] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:28:16] [ENEMY] [Enemy9] Registered as sound listener
[20:28:16] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:28:16] [ENEMY] [Enemy10] Registered as sound listener
[20:28:16] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:28:16] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:28:16] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:28:16] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:28:16] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:28:16] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:28:16] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:28:16] [INFO] [LastChance] Found player: Player
[20:28:16] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:28:16] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:28:16] [INFO] [LastChance] Connected to player Died signal (C#)
[20:28:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:28:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:28:16] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:28:16] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:28:16] [ENEMY] [Enemy1] Death animation component initialized
[20:28:16] [ENEMY] [Enemy2] Death animation component initialized
[20:28:16] [ENEMY] [Enemy3] Death animation component initialized
[20:28:16] [ENEMY] [Enemy4] Death animation component initialized
[20:28:16] [ENEMY] [Enemy5] Death animation component initialized
[20:28:16] [ENEMY] [Enemy6] Death animation component initialized
[20:28:16] [ENEMY] [Enemy7] Death animation component initialized
[20:28:16] [ENEMY] [Enemy8] Death animation component initialized
[20:28:16] [ENEMY] [Enemy9] Death animation component initialized
[20:28:16] [ENEMY] [Enemy10] Death animation component initialized
[20:28:16] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:28:16] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:28:16] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:28:16] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:28:16] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:28:16] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:28:16] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:28:16] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:28:16] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:28:16] [INFO] [ScoreManager] Level started with 10 enemies
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:28:16] [ENEMY] [Enemy1] Registered as sound listener
[20:28:16] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:28:16] [ENEMY] [Enemy2] Registered as sound listener
[20:28:16] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:28:16] [ENEMY] [Enemy3] Registered as sound listener
[20:28:16] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:28:16] [ENEMY] [Enemy4] Registered as sound listener
[20:28:16] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:28:16] [ENEMY] [Enemy5] Registered as sound listener
[20:28:16] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:28:16] [ENEMY] [Enemy6] Registered as sound listener
[20:28:16] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:28:16] [ENEMY] [Enemy7] Registered as sound listener
[20:28:16] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:28:16] [ENEMY] [Enemy8] Registered as sound listener
[20:28:16] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:28:16] [ENEMY] [Enemy9] Registered as sound listener
[20:28:16] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:28:16] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:28:16] [ENEMY] [Enemy10] Registered as sound listener
[20:28:16] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:28:16] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:28:16] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:28:16] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:28:16] [INFO] [LastChance] Found player: Player
[20:28:16] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:28:16] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:28:16] [INFO] [LastChance] Connected to player Died signal (C#)
[20:28:16] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:28:16] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:28:16] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:28:21] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:28:21] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:28:22] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:28:23] [ENEMY] [Enemy3] Hit taken, health: 2/3
[20:28:23] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:28:23] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.99785, -0.065535), lethal=false
[20:28:23] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:28:23] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:28:23] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=0.9)
[20:28:23] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:28:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(693.8083, 755.066), source=ENEMY (Enemy3), range=1469, listeners=30
[20:28:23] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[20:28:23] [ENEMY] [Enemy2] Heard gunshot at (693.8083, 755.066), source_type=1, intensity=0.02, distance=358
[20:28:23] [ENEMY] [Enemy4] Heard gunshot at (693.8083, 755.066), source_type=1, intensity=0.08, distance=180
[20:28:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:23] [INFO] [LastChance] Threat detected: Bullet
[20:28:23] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:23] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(626.788, 766.8506), shooter_id=10784461555785, bullet_pos=(506.1992, 799.7647)
[20:28:23] [INFO] [Bullet] Using shooter_position, distance=125.000030517578
[20:28:23] [INFO] [Bullet] Distance to wall: 125.000030517578 (8.51148193272994% of viewport)
[20:28:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:28:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(685.5527, 761.8206), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:23] [INFO] [LastChance] Threat detected: @Area2D@13182
[20:28:23] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:23] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:23] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:28:23] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:28:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(619.0934, 776.4413), shooter_id=10784461555785, bullet_pos=(497.7529, 806.4657)
[20:28:23] [INFO] [Bullet] Using shooter_position, distance=124.999961853027
[20:28:23] [INFO] [Bullet] Distance to wall: 124.999961853027 (8.51147725723441% of viewport)
[20:28:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:28:23] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:28:23] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:28:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(677.2971, 768.5752), source=ENEMY (Enemy3), range=1469, listeners=10
[20:28:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:28:23] [INFO] [LastChance] Threat detected: Bullet
[20:28:23] [INFO] [LastChance] Not in hard mode - effect disabled
[20:28:23] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:28:23] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:28:23] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:28:23] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:28:23] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:28:23] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:28:23] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:28:23] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:28:23] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:28:23] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:28:23] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:28:23] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:28:23] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:28:23] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:28:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.9349, 756.3899), shooter_id=10787280128821, bullet_pos=(909.2745, 683.7335)
[20:28:23] [INFO] [Bullet] Using shooter_position, distance=431.500518798828
[20:28:23] [INFO] [Bullet] Distance to wall: 431.500518798828 (29.3816637845008% of viewport)
[20:28:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:28:23] [INFO] [Bullet] Caliber cannot penetrate walls
[20:28:23] [ENEMY] [Enemy3] Hit taken, health: 1/3
[20:28:23] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:28:23] [INFO] [ImpactEffects] spawn_blood_effect called at (666.9775, 777.0184), dir=(0.972317, -0.233667), lethal=false
[20:28:23] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:28:23] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:28:23] [INFO] [ImpactEffects] Blood effect spawned at (666.9775, 777.0184) (scale=0.9)
[20:28:23] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:28:23] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:28:23] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:28:23] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:28:23] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:28:23] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:28:23] [ENEMY] [Enemy1] Death animation component initialized
[20:28:23] [ENEMY] [Enemy2] Death animation component initialized
[20:28:23] [ENEMY] [Enemy3] Death animation component initialized
[20:28:24] [ENEMY] [Enemy4] Death animation component initialized
[20:28:24] [ENEMY] [Enemy5] Death animation component initialized
[20:28:24] [ENEMY] [Enemy6] Death animation component initialized
[20:28:24] [ENEMY] [Enemy7] Death animation component initialized
[20:28:24] [ENEMY] [Enemy8] Death animation component initialized
[20:28:24] [ENEMY] [Enemy9] Death animation component initialized
[20:28:24] [ENEMY] [Enemy10] Death animation component initialized
[20:28:24] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:28:24] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:28:24] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:28:24] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:28:24] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:28:24] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:28:24] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:28:24] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:28:24] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:28:24] [INFO] [ScoreManager] Level started with 10 enemies
[20:28:24] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:28:24] [ENEMY] [Enemy1] Registered as sound listener
[20:28:24] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:28:24] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:28:24] [ENEMY] [Enemy2] Registered as sound listener
[20:28:24] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:28:24] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:28:24] [ENEMY] [Enemy3] Registered as sound listener
[20:28:24] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:28:24] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:28:24] [ENEMY] [Enemy4] Registered as sound listener
[20:28:24] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:28:24] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:28:24] [ENEMY] [Enemy5] Registered as sound listener
[20:28:24] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:28:24] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:28:24] [ENEMY] [Enemy6] Registered as sound listener
[20:28:24] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:28:24] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:28:24] [ENEMY] [Enemy7] Registered as sound listener
[20:28:24] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:28:24] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:28:24] [ENEMY] [Enemy8] Registered as sound listener
[20:28:24] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:28:24] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:28:24] [ENEMY] [Enemy9] Registered as sound listener
[20:28:24] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:28:24] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:28:24] [ENEMY] [Enemy10] Registered as sound listener
[20:28:24] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:28:24] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:28:24] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:28:24] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:28:24] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:28:24] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:28:24] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:28:24] [INFO] [LastChance] Found player: Player
[20:28:24] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:28:24] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:28:24] [INFO] [LastChance] Connected to player Died signal (C#)
[20:28:25] [INFO] ------------------------------------------------------------
[20:28:25] [INFO] GAME LOG ENDED: 2026-01-24T20:28:25
[20:28:25] [INFO] ============================================================
