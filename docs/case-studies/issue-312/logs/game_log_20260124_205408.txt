[20:54:08] [INFO] ============================================================
[20:54:08] [INFO] GAME LOG STARTED
[20:54:08] [INFO] ============================================================
[20:54:08] [INFO] Timestamp: 2026-01-24T20:54:08
[20:54:08] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260124_205408.txt
[20:54:08] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
[20:54:08] [INFO] OS: Windows
[20:54:08] [INFO] Debug build: false
[20:54:08] [INFO] Engine version: 4.3-stable (official)
[20:54:08] [INFO] Project: Godot Top-Down Template
[20:54:08] [INFO] ------------------------------------------------------------
[20:54:08] [INFO] [GameManager] GameManager ready
[20:54:08] [INFO] [ScoreManager] ScoreManager ready
[20:54:08] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[20:54:08] [INFO] [ImpactEffects] Scenes loaded: DustEffect, BloodEffect, SparksEffect, BloodDecal
[20:54:08] [INFO] [ImpactEffects] ImpactEffectsManager ready - FULL VERSION with blood effects enabled
[20:54:08] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:54:08] [INFO] [PenultimateHit] Saturation shader loaded successfully
[20:54:08] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[20:54:08] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[20:54:08] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[20:54:08] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[20:54:08] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[20:54:08] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:54:08] [INFO] [LastChance] Last chance shader loaded successfully
[20:54:08] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[20:54:08] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[20:54:08] [INFO] [LastChance]   Sepia intensity: 0.70
[20:54:08] [INFO] [LastChance]   Brightness: 0.60
[20:54:08] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[20:54:08] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[20:54:08] [ENEMY] [Enemy1] Death animation component initialized
[20:54:08] [ENEMY] [Enemy2] Death animation component initialized
[20:54:08] [ENEMY] [Enemy3] Death animation component initialized
[20:54:08] [ENEMY] [Enemy4] Death animation component initialized
[20:54:08] [ENEMY] [Enemy5] Death animation component initialized
[20:54:08] [ENEMY] [Enemy6] Death animation component initialized
[20:54:08] [ENEMY] [Enemy7] Death animation component initialized
[20:54:08] [ENEMY] [Enemy8] Death animation component initialized
[20:54:08] [ENEMY] [Enemy9] Death animation component initialized
[20:54:08] [ENEMY] [Enemy10] Death animation component initialized
[20:54:08] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:54:08] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:54:08] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:54:08] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:54:08] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:54:08] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:54:08] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:54:08] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:54:08] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:54:08] [INFO] [ScoreManager] Level started with 10 enemies
[20:54:08] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[20:54:08] [ENEMY] [Enemy1] Registered as sound listener
[20:54:08] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:54:08] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[20:54:08] [ENEMY] [Enemy2] Registered as sound listener
[20:54:08] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:54:08] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[20:54:08] [ENEMY] [Enemy3] Registered as sound listener
[20:54:08] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:54:08] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[20:54:08] [ENEMY] [Enemy4] Registered as sound listener
[20:54:08] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:54:08] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[20:54:08] [ENEMY] [Enemy5] Registered as sound listener
[20:54:08] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:54:08] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[20:54:08] [ENEMY] [Enemy6] Registered as sound listener
[20:54:08] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:54:08] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[20:54:08] [ENEMY] [Enemy7] Registered as sound listener
[20:54:08] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 3, behavior: PATROL, player_found: yes
[20:54:08] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[20:54:08] [ENEMY] [Enemy8] Registered as sound listener
[20:54:08] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:54:08] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[20:54:08] [ENEMY] [Enemy9] Registered as sound listener
[20:54:08] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:54:08] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[20:54:08] [ENEMY] [Enemy10] Registered as sound listener
[20:54:08] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:54:08] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:54:08] [INFO] [Player] Detected weapon: Rifle (default pose)
[20:54:08] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[20:54:08] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:54:08] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:54:08] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:54:08] [INFO] [LastChance] Found player: Player
[20:54:08] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:54:08] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:54:08] [INFO] [LastChance] Connected to player Died signal (C#)
[20:54:11] [INFO] [Player.Debug] Debug mode toggled: ON
[20:54:11] [INFO] [GameManager] Debug mode toggled: ON
[20:54:14] [INFO] [PauseMenu] Armory button pressed
[20:54:14] [INFO] [PauseMenu] Creating new armory menu instance
[20:54:14] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[20:54:14] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[20:54:14] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[20:54:14] [INFO] [PauseMenu] back_pressed signal exists on instance
[20:54:14] [INFO] [PauseMenu] back_pressed signal connected
[20:54:14] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[20:54:14] [INFO] [PauseMenu] _populate_weapon_grid method exists
[20:54:15] [INFO] [GameManager] Weapon selected: silenced_pistol
[20:54:15] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:16] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:54:16] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:54:16] [ENEMY] [Enemy1] Death animation component initialized
[20:54:16] [ENEMY] [Enemy2] Death animation component initialized
[20:54:16] [ENEMY] [Enemy3] Death animation component initialized
[20:54:16] [ENEMY] [Enemy4] Death animation component initialized
[20:54:16] [ENEMY] [Enemy5] Death animation component initialized
[20:54:16] [ENEMY] [Enemy6] Death animation component initialized
[20:54:16] [ENEMY] [Enemy7] Death animation component initialized
[20:54:16] [ENEMY] [Enemy8] Death animation component initialized
[20:54:16] [ENEMY] [Enemy9] Death animation component initialized
[20:54:16] [ENEMY] [Enemy10] Death animation component initialized
[20:54:16] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:54:16] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:54:16] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:54:16] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:54:16] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:54:16] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:54:16] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:54:16] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:54:16] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:54:16] [INFO] [ScoreManager] Level started with 10 enemies
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:54:16] [ENEMY] [Enemy1] Registered as sound listener
[20:54:16] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:54:16] [ENEMY] [Enemy2] Registered as sound listener
[20:54:16] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:54:16] [ENEMY] [Enemy3] Registered as sound listener
[20:54:16] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:54:16] [ENEMY] [Enemy4] Registered as sound listener
[20:54:16] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:54:16] [ENEMY] [Enemy5] Registered as sound listener
[20:54:16] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:54:16] [ENEMY] [Enemy6] Registered as sound listener
[20:54:16] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:54:16] [ENEMY] [Enemy7] Registered as sound listener
[20:54:16] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:54:16] [ENEMY] [Enemy8] Registered as sound listener
[20:54:16] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:54:16] [ENEMY] [Enemy9] Registered as sound listener
[20:54:16] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:54:16] [ENEMY] [Enemy10] Registered as sound listener
[20:54:16] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:54:16] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:54:16] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:54:16] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:54:16] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:54:16] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:54:16] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:54:16] [INFO] [LastChance] Found player: Player
[20:54:16] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:54:16] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:54:16] [INFO] [LastChance] Connected to player Died signal (C#)
[20:54:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:16] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:54:16] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:54:16] [ENEMY] [Enemy1] Death animation component initialized
[20:54:16] [ENEMY] [Enemy2] Death animation component initialized
[20:54:16] [ENEMY] [Enemy3] Death animation component initialized
[20:54:16] [ENEMY] [Enemy4] Death animation component initialized
[20:54:16] [ENEMY] [Enemy5] Death animation component initialized
[20:54:16] [ENEMY] [Enemy6] Death animation component initialized
[20:54:16] [ENEMY] [Enemy7] Death animation component initialized
[20:54:16] [ENEMY] [Enemy8] Death animation component initialized
[20:54:16] [ENEMY] [Enemy9] Death animation component initialized
[20:54:16] [ENEMY] [Enemy10] Death animation component initialized
[20:54:16] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:54:16] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:54:16] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:54:16] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:54:16] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:54:16] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:54:16] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:54:16] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:54:16] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:54:16] [INFO] [ScoreManager] Level started with 10 enemies
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:54:16] [ENEMY] [Enemy1] Registered as sound listener
[20:54:16] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:54:16] [ENEMY] [Enemy2] Registered as sound listener
[20:54:16] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:54:16] [ENEMY] [Enemy3] Registered as sound listener
[20:54:16] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:54:16] [ENEMY] [Enemy4] Registered as sound listener
[20:54:16] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:54:16] [ENEMY] [Enemy5] Registered as sound listener
[20:54:16] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:54:16] [ENEMY] [Enemy6] Registered as sound listener
[20:54:16] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:54:16] [ENEMY] [Enemy7] Registered as sound listener
[20:54:16] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:54:16] [ENEMY] [Enemy8] Registered as sound listener
[20:54:16] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:54:16] [ENEMY] [Enemy9] Registered as sound listener
[20:54:16] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:54:16] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:54:16] [ENEMY] [Enemy10] Registered as sound listener
[20:54:16] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:54:16] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:54:16] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:54:16] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:54:16] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:54:16] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:54:16] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:54:16] [INFO] [LastChance] Found player: Player
[20:54:16] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:54:16] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:54:16] [INFO] [LastChance] Connected to player Died signal (C#)
[20:54:17] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:54:17] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:54:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.731, 1535.008), source=ENEMY (Enemy10), range=1469, listeners=30
[20:54:17] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[20:54:17] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:54:17] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:54:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1139.423, 1516.307), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:17] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:17] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:54:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1107.906, 1496.302), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:17] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:17] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:54:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1077.226, 1475.035), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:17] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:17] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:54:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1047.428, 1452.549), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:17] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=345258329760, bullet_pos=(53.14801, 921.1365)
[20:54:17] [INFO] [Bullet] Using shooter_position, distance=1208.33337402344
[20:54:17] [INFO] [Bullet] Distance to wall: 1208.33337402344 (82.277641366406% of viewport)
[20:54:17] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:54:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=345258329760, bullet_pos=(46.85162, 857.2495)
[20:54:18] [INFO] [Bullet] Using shooter_position, distance=1208.33435058594
[20:54:18] [INFO] [Bullet] Distance to wall: 1208.33435058594 (82.2777078623423% of viewport)
[20:54:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=345258329760, bullet_pos=(429.875, 713.8279)
[20:54:18] [INFO] [Bullet] Using shooter_position, distance=1045.58166503906
[20:54:18] [INFO] [Bullet] Distance to wall: 1045.58166503906 (71.1955782276564% of viewport)
[20:54:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=345258329760, bullet_pos=(43.06916, 793.3154)
[20:54:18] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[20:54:18] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[20:54:18] [INFO] [Bullet] Distance-based penetration chance: 50.6760753752023%
[20:54:18] [INFO] [Bullet] Penetration failed (distance roll)
[20:54:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=345258329760, bullet_pos=(297.1095, 714.0465)
[20:54:18] [INFO] [Bullet] Using shooter_position, distance=1099.009765625
[20:54:18] [INFO] [Bullet] Distance to wall: 1099.009765625 (74.8335958421667% of viewport)
[20:54:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:18] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:54:18] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:54:18] [ENEMY] [Enemy1] Death animation component initialized
[20:54:18] [ENEMY] [Enemy2] Death animation component initialized
[20:54:18] [ENEMY] [Enemy3] Death animation component initialized
[20:54:18] [ENEMY] [Enemy4] Death animation component initialized
[20:54:18] [ENEMY] [Enemy5] Death animation component initialized
[20:54:18] [ENEMY] [Enemy6] Death animation component initialized
[20:54:18] [ENEMY] [Enemy7] Death animation component initialized
[20:54:18] [ENEMY] [Enemy8] Death animation component initialized
[20:54:18] [ENEMY] [Enemy9] Death animation component initialized
[20:54:18] [ENEMY] [Enemy10] Death animation component initialized
[20:54:18] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:54:18] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:54:18] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:54:18] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:54:18] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:54:18] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:54:18] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:54:18] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:54:18] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:54:18] [INFO] [ScoreManager] Level started with 10 enemies
[20:54:18] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:54:18] [ENEMY] [Enemy1] Registered as sound listener
[20:54:18] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:54:18] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:54:18] [ENEMY] [Enemy2] Registered as sound listener
[20:54:18] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:54:18] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:54:18] [ENEMY] [Enemy3] Registered as sound listener
[20:54:18] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:54:18] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:54:18] [ENEMY] [Enemy4] Registered as sound listener
[20:54:18] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:54:18] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:54:18] [ENEMY] [Enemy5] Registered as sound listener
[20:54:18] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:54:18] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:54:18] [ENEMY] [Enemy6] Registered as sound listener
[20:54:18] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:54:18] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:54:18] [ENEMY] [Enemy7] Registered as sound listener
[20:54:18] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:54:18] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:54:18] [ENEMY] [Enemy8] Registered as sound listener
[20:54:18] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:54:18] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:54:18] [ENEMY] [Enemy9] Registered as sound listener
[20:54:18] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:54:18] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:54:18] [ENEMY] [Enemy10] Registered as sound listener
[20:54:18] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:54:18] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:54:18] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:54:18] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:54:18] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:54:18] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:54:18] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:54:18] [INFO] [LastChance] Found player: Player
[20:54:18] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:54:18] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:54:18] [INFO] [LastChance] Connected to player Died signal (C#)
[20:54:21] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:54:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1127.326, 1552.49), source=ENEMY (Enemy10), range=1469, listeners=20
[20:54:21] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:54:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:21] [INFO] [LastChance] Threat detected: Bullet
[20:54:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:54:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.33, 1533.777), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:21] [INFO] [LastChance] Threat detected: @Area2D@1095
[20:54:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:54:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:54:21] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:54:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(913.6563, 1359.115), shooter_id=445099542931, bullet_pos=(1145.923, 1633.509)
[20:54:21] [INFO] [Bullet] Using shooter_position, distance=359.499420166016
[20:54:21] [INFO] [Bullet] Distance to wall: 359.499420166016 (24.4789765802468% of viewport)
[20:54:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:21] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.33, 1533.777), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:21] [INFO] [LastChance] Threat detected: @Area2D@1099
[20:54:21] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:54:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:21] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:54:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1072.87, 1511.534), shooter_id=444277459907, bullet_pos=(559.2327, 1023.772)
[20:54:21] [INFO] [Bullet] Using shooter_position, distance=708.333129882813
[20:54:21] [INFO] [Bullet] Distance to wall: 708.333129882813 (48.2317053234942% of viewport)
[20:54:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:54:21] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:54:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1113.917, 1524.07), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:21] [INFO] [LastChance] Threat detected: @Area2D@1102
[20:54:21] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:54:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:54:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1126.953, 1501.421), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:21] [INFO] [LastChance] Threat detected: @Area2D@1103
[20:54:21] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:54:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:54:21] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:54:21] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:54:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1072.87, 1511.534), shooter_id=444277459907, bullet_pos=(218.5572, 1390.888)
[20:54:21] [INFO] [Bullet] Using shooter_position, distance=862.789978027344
[20:54:21] [INFO] [Bullet] Distance to wall: 862.789978027344 (58.7489561347547% of viewport)
[20:54:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[20:54:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1139.989, 1478.772), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:21] [INFO] [LastChance] Threat detected: @Area2D@1106
[20:54:21] [INFO] [LastChance] Triggering last chance effect!
[20:54:21] [INFO] [LastChance] Starting last chance effect:
[20:54:21] [INFO] [LastChance]   - Time will be frozen (except player)
[20:54:21] [INFO] [LastChance]   - Duration: 6.0 real seconds
[20:54:21] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:54:21] [INFO] [LastChance]   - Brightness: 0.60
[20:54:21] [INFO] [LastChance] Pushed bullet @Area2D@1106 from distance 104.2 to 200.0
[20:54:21] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:54:21] [INFO] [LastChance] Set player Player and all 17 children to PROCESS_MODE_ALWAYS
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:54:21] [INFO] [LastChance] Skipping player node: Player
[20:54:21] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:54:21] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1094
[20:54:21] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1096
[20:54:21] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1098
[20:54:21] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1100
[20:54:21] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1104
[20:54:21] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1107
[20:54:21] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:54:21] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:54:21] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:54:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:22] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:54:22] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:54:22] [INFO] [LastChance] Ending last chance effect
[20:54:22] [INFO] [LastChance] All process modes restored
[20:54:22] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:54:22] [ENEMY] [Enemy1] Death animation component initialized
[20:54:22] [ENEMY] [Enemy2] Death animation component initialized
[20:54:22] [ENEMY] [Enemy3] Death animation component initialized
[20:54:22] [ENEMY] [Enemy4] Death animation component initialized
[20:54:22] [ENEMY] [Enemy5] Death animation component initialized
[20:54:22] [ENEMY] [Enemy6] Death animation component initialized
[20:54:22] [ENEMY] [Enemy7] Death animation component initialized
[20:54:22] [ENEMY] [Enemy8] Death animation component initialized
[20:54:22] [ENEMY] [Enemy9] Death animation component initialized
[20:54:22] [ENEMY] [Enemy10] Death animation component initialized
[20:54:22] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:54:22] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:54:22] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:54:22] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:54:22] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:54:22] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:54:22] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:54:22] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:54:22] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:54:22] [INFO] [ScoreManager] Level started with 10 enemies
[20:54:22] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:54:22] [ENEMY] [Enemy1] Registered as sound listener
[20:54:22] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:54:22] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:54:22] [ENEMY] [Enemy2] Registered as sound listener
[20:54:22] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:54:22] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:54:22] [ENEMY] [Enemy3] Registered as sound listener
[20:54:22] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:54:22] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:54:22] [ENEMY] [Enemy4] Registered as sound listener
[20:54:22] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:54:22] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:54:22] [ENEMY] [Enemy5] Registered as sound listener
[20:54:22] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:54:22] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:54:22] [ENEMY] [Enemy6] Registered as sound listener
[20:54:22] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:54:22] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:54:22] [ENEMY] [Enemy7] Registered as sound listener
[20:54:22] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:54:22] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:54:22] [ENEMY] [Enemy8] Registered as sound listener
[20:54:22] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:54:22] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:54:22] [ENEMY] [Enemy9] Registered as sound listener
[20:54:22] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:54:22] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:54:22] [ENEMY] [Enemy10] Registered as sound listener
[20:54:22] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:54:22] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:54:22] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:54:22] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:54:22] [INFO] [LastChance] Found player: Player
[20:54:22] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:54:22] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:54:22] [INFO] [LastChance] Connected to player Died signal (C#)
[20:54:22] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:54:22] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:54:22] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:54:23] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:23] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:23] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:54:23] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:54:23] [ENEMY] [Enemy1] Death animation component initialized
[20:54:23] [ENEMY] [Enemy2] Death animation component initialized
[20:54:23] [ENEMY] [Enemy3] Death animation component initialized
[20:54:23] [ENEMY] [Enemy4] Death animation component initialized
[20:54:23] [ENEMY] [Enemy5] Death animation component initialized
[20:54:23] [ENEMY] [Enemy6] Death animation component initialized
[20:54:23] [ENEMY] [Enemy7] Death animation component initialized
[20:54:23] [ENEMY] [Enemy8] Death animation component initialized
[20:54:23] [ENEMY] [Enemy9] Death animation component initialized
[20:54:23] [ENEMY] [Enemy10] Death animation component initialized
[20:54:23] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:54:23] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:54:23] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:54:23] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:54:23] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:54:23] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:54:23] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:54:23] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:54:23] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:54:23] [INFO] [ScoreManager] Level started with 10 enemies
[20:54:23] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:54:23] [ENEMY] [Enemy1] Registered as sound listener
[20:54:23] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:54:23] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:54:23] [ENEMY] [Enemy2] Registered as sound listener
[20:54:23] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:54:23] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:54:23] [ENEMY] [Enemy3] Registered as sound listener
[20:54:23] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:54:23] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:54:23] [ENEMY] [Enemy4] Registered as sound listener
[20:54:23] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:54:23] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:54:23] [ENEMY] [Enemy5] Registered as sound listener
[20:54:23] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:54:23] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:54:23] [ENEMY] [Enemy6] Registered as sound listener
[20:54:23] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:54:23] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:54:23] [ENEMY] [Enemy7] Registered as sound listener
[20:54:23] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:54:23] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:54:23] [ENEMY] [Enemy8] Registered as sound listener
[20:54:23] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:54:23] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:54:23] [ENEMY] [Enemy9] Registered as sound listener
[20:54:23] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:54:23] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:54:23] [ENEMY] [Enemy10] Registered as sound listener
[20:54:23] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:54:23] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:54:23] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:54:23] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:54:23] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:54:23] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:54:23] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:54:23] [INFO] [LastChance] Found player: Player
[20:54:23] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:54:23] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:54:23] [INFO] [LastChance] Connected to player Died signal (C#)
[20:54:26] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:54:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1124.277, 1557.128), source=ENEMY (Enemy10), range=1469, listeners=30
[20:54:27] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[20:54:27] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:27] [INFO] [LastChance] Threat detected: Bullet
[20:54:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:54:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:27] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:54:27] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:54:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1094.637, 1534.429), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:27] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:27] [INFO] [LastChance] Threat detected: @Area2D@1612
[20:54:27] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:54:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1036.224, 1499.521), shooter_id=773245110624, bullet_pos=(903.9011, 1398.188)
[20:54:27] [INFO] [Bullet] Using shooter_position, distance=166.666595458984
[20:54:27] [INFO] [Bullet] Distance to wall: 166.666595458984 (11.3486349576472% of viewport)
[20:54:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.996, 1511.731), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:27] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:27] [INFO] [LastChance] Threat detected: Bullet
[20:54:27] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:54:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.583, 1476.823), shooter_id=773245110624, bullet_pos=(907.3412, 1400.823)
[20:54:27] [INFO] [Bullet] Using shooter_position, distance=124.999946594238
[20:54:27] [INFO] [Bullet] Distance to wall: 124.999946594238 (8.51147621823541% of viewport)
[20:54:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.996, 1511.731), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:27] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:27] [INFO] [LastChance] Threat detected: @Area2D@1616
[20:54:27] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:54:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.583, 1476.823), shooter_id=773245110624, bullet_pos=(907.3412, 1400.823)
[20:54:27] [INFO] [Bullet] Using shooter_position, distance=124.999946594238
[20:54:27] [INFO] [Bullet] Distance to wall: 124.999946594238 (8.51147621823541% of viewport)
[20:54:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.996, 1511.731), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:27] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:29] [INFO] [LastChance] Threat detected: @Area2D@1619
[20:54:29] [INFO] [LastChance] Not in hard mode - effect disabled
[20:54:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.583, 1476.823), shooter_id=773245110624, bullet_pos=(907.3412, 1400.823)
[20:54:29] [INFO] [Bullet] Using shooter_position, distance=124.999946594238
[20:54:29] [INFO] [Bullet] Distance to wall: 124.999946594238 (8.51147621823541% of viewport)
[20:54:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.996, 1511.731), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:29] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:29] [INFO] [LastChance] Threat detected: @Area2D@1622
[20:54:29] [INFO] [LastChance] Not in hard mode - effect disabled
[20:54:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.583, 1476.823), shooter_id=773245110624, bullet_pos=(907.3412, 1400.823)
[20:54:29] [INFO] [Bullet] Using shooter_position, distance=124.999946594238
[20:54:29] [INFO] [Bullet] Distance to wall: 124.999946594238 (8.51147621823541% of viewport)
[20:54:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:29] [INFO] [Bullet] Starting wall penetration at (907.3412, 1400.823)
[20:54:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.3131217956543
[20:54:29] [INFO] [Bullet] Body exited signal received for penetrating body
[20:54:29] [INFO] [Bullet] Exiting penetration at (870.2908, 1372.45) after traveling 41.6666679382324 pixels through wall
[20:54:29] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:54:29] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:54:29] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:54:29] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:54:29] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:54:29] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:54:29] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:54:29] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:54:29] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:54:29] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:54:29] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:54:29] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:54:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.996, 1511.731), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:29] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:29] [INFO] [LastChance] Threat detected: Bullet
[20:54:29] [INFO] [LastChance] Not in hard mode - effect disabled
[20:54:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:29] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:29] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:29] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:54:29] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:54:29] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:54:29] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:54:29] [ENEMY] [Enemy1] Death animation component initialized
[20:54:29] [ENEMY] [Enemy2] Death animation component initialized
[20:54:29] [ENEMY] [Enemy3] Death animation component initialized
[20:54:29] [ENEMY] [Enemy4] Death animation component initialized
[20:54:29] [ENEMY] [Enemy5] Death animation component initialized
[20:54:29] [ENEMY] [Enemy6] Death animation component initialized
[20:54:29] [ENEMY] [Enemy7] Death animation component initialized
[20:54:29] [ENEMY] [Enemy8] Death animation component initialized
[20:54:29] [ENEMY] [Enemy9] Death animation component initialized
[20:54:29] [ENEMY] [Enemy10] Death animation component initialized
[20:54:29] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:54:29] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:54:29] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:54:29] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:54:29] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:54:29] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:54:29] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:54:29] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:54:29] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:54:29] [INFO] [ScoreManager] Level started with 10 enemies
[20:54:29] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:54:29] [ENEMY] [Enemy1] Registered as sound listener
[20:54:29] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:54:29] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:54:29] [ENEMY] [Enemy2] Registered as sound listener
[20:54:29] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:54:29] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:54:29] [ENEMY] [Enemy3] Registered as sound listener
[20:54:29] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:54:29] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:54:29] [ENEMY] [Enemy4] Registered as sound listener
[20:54:29] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:54:29] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:54:29] [ENEMY] [Enemy5] Registered as sound listener
[20:54:29] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:54:29] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:54:29] [ENEMY] [Enemy6] Registered as sound listener
[20:54:29] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:54:29] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:54:29] [ENEMY] [Enemy7] Registered as sound listener
[20:54:29] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:54:29] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:54:29] [ENEMY] [Enemy8] Registered as sound listener
[20:54:29] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:54:29] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:54:29] [ENEMY] [Enemy9] Registered as sound listener
[20:54:29] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:54:29] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:54:29] [ENEMY] [Enemy10] Registered as sound listener
[20:54:29] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:54:29] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:54:29] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:54:29] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:54:29] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:54:29] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:54:29] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:54:29] [INFO] [LastChance] Found player: Player
[20:54:29] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:54:29] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:54:29] [INFO] [LastChance] Connected to player Died signal (C#)
[20:54:32] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:54:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1106.259, 1528.64), source=ENEMY (Enemy10), range=1469, listeners=20
[20:54:32] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:54:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:32] [INFO] [LastChance] Threat detected: Bullet
[20:54:32] [INFO] [LastChance] Not in hard mode - effect disabled
[20:54:32] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:32] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:54:32] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:54:32] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:54:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1110.471, 1534.805), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:33] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:33] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:33] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:54:33] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:54:33] [ENEMY] [Enemy1] Death animation component initialized
[20:54:33] [ENEMY] [Enemy2] Death animation component initialized
[20:54:33] [ENEMY] [Enemy3] Death animation component initialized
[20:54:33] [ENEMY] [Enemy4] Death animation component initialized
[20:54:33] [ENEMY] [Enemy5] Death animation component initialized
[20:54:33] [ENEMY] [Enemy6] Death animation component initialized
[20:54:33] [ENEMY] [Enemy7] Death animation component initialized
[20:54:33] [ENEMY] [Enemy8] Death animation component initialized
[20:54:33] [ENEMY] [Enemy9] Death animation component initialized
[20:54:33] [ENEMY] [Enemy10] Death animation component initialized
[20:54:33] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:54:33] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:54:33] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:54:33] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:54:33] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:54:33] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:54:33] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:54:33] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:54:33] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:54:33] [INFO] [ScoreManager] Level started with 10 enemies
[20:54:33] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:54:33] [ENEMY] [Enemy1] Registered as sound listener
[20:54:33] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:54:33] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:54:33] [ENEMY] [Enemy2] Registered as sound listener
[20:54:33] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:54:33] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:54:33] [ENEMY] [Enemy3] Registered as sound listener
[20:54:33] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:54:33] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:54:33] [ENEMY] [Enemy4] Registered as sound listener
[20:54:33] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:54:33] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:54:33] [ENEMY] [Enemy5] Registered as sound listener
[20:54:33] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:54:33] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:54:33] [ENEMY] [Enemy6] Registered as sound listener
[20:54:33] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:54:33] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:54:33] [ENEMY] [Enemy7] Registered as sound listener
[20:54:33] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:54:33] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:54:33] [ENEMY] [Enemy8] Registered as sound listener
[20:54:33] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:54:33] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:54:33] [ENEMY] [Enemy9] Registered as sound listener
[20:54:33] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:54:33] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:54:33] [ENEMY] [Enemy10] Registered as sound listener
[20:54:33] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:54:33] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:54:33] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:54:33] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:54:33] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:54:33] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:54:33] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:54:33] [INFO] [LastChance] Found player: Player
[20:54:33] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:54:33] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:54:33] [INFO] [LastChance] Connected to player Died signal (C#)
[20:54:34] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:54:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1065.696, 1463.499), source=ENEMY (Enemy10), range=1469, listeners=20
[20:54:35] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:54:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(629.2013, 1174.841), shooter_id=1204788661048, bullet_pos=(904.9974, 1405.442)
[20:54:35] [INFO] [Bullet] Using shooter_position, distance=359.500122070313
[20:54:35] [INFO] [Bullet] Distance to wall: 359.500122070313 (24.4790243742011% of viewport)
[20:54:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:35] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:35] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:54:35] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:54:35] [INFO] [LastChance] Threat detected: Bullet
[20:54:35] [INFO] [LastChance] Not in hard mode - effect disabled
[20:54:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1035.877, 1441.035), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:54:35] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:54:35] [INFO] [LastChance] Threat detected: @Area2D@2133
[20:54:35] [INFO] [LastChance] Not in hard mode - effect disabled
[20:54:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1003.029, 1425.186), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:54:35] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:54:35] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:54:35] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:54:35] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:54:35] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:54:35] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:54:35] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:54:35] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:54:35] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:54:35] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:54:35] [INFO] [LastChance] Threat detected: Bullet
[20:54:35] [INFO] [LastChance] Not in hard mode - effect disabled
[20:54:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:35] [ENEMY] [Enemy10] Hit taken, health: 2/3
[20:54:35] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:54:35] [INFO] [ImpactEffects] spawn_blood_effect called at (983.534, 1423.65), dir=(0.775171, 0.631752), lethal=false
[20:54:35] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:54:35] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:54:35] [INFO] [ImpactEffects] Blood effect spawned at (983.534, 1423.65) (scale=0.9)
[20:54:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:54:35] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:54:35] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:54:35] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:54:35] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:54:35] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[20:54:35] [INFO] [LastChance] Player died
[20:54:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(966.6243, 1414.888), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:35] [INFO] [LastChance] Threat detected: Bullet
[20:54:35] [INFO] [LastChance] Not in hard mode - effect disabled
[20:54:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:36] [ENEMY] [Enemy10] Hit taken, health: 1/3
[20:54:36] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:54:36] [INFO] [ImpactEffects] spawn_blood_effect called at (966.6243, 1414.888), dir=(0.768067, 0.640369), lethal=false
[20:54:36] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:54:36] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:54:36] [INFO] [ImpactEffects] Blood effect spawned at (966.6243, 1414.888) (scale=0.9)
[20:54:36] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:54:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:54:36] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:54:36] [ENEMY] [Enemy1] Death animation component initialized
[20:54:36] [ENEMY] [Enemy2] Death animation component initialized
[20:54:36] [ENEMY] [Enemy3] Death animation component initialized
[20:54:36] [ENEMY] [Enemy4] Death animation component initialized
[20:54:36] [ENEMY] [Enemy5] Death animation component initialized
[20:54:36] [ENEMY] [Enemy6] Death animation component initialized
[20:54:36] [ENEMY] [Enemy7] Death animation component initialized
[20:54:36] [ENEMY] [Enemy8] Death animation component initialized
[20:54:36] [ENEMY] [Enemy9] Death animation component initialized
[20:54:36] [ENEMY] [Enemy10] Death animation component initialized
[20:54:36] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:54:36] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:54:36] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:54:36] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:54:36] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:54:36] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:54:36] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:54:36] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:54:36] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:54:36] [INFO] [ScoreManager] Level started with 10 enemies
[20:54:36] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:54:36] [ENEMY] [Enemy1] Registered as sound listener
[20:54:36] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:54:36] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:54:36] [ENEMY] [Enemy2] Registered as sound listener
[20:54:36] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:54:36] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:54:36] [ENEMY] [Enemy3] Registered as sound listener
[20:54:36] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:54:36] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:54:36] [ENEMY] [Enemy4] Registered as sound listener
[20:54:36] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:54:36] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:54:36] [ENEMY] [Enemy5] Registered as sound listener
[20:54:36] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:54:36] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:54:36] [ENEMY] [Enemy6] Registered as sound listener
[20:54:36] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:54:36] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:54:36] [ENEMY] [Enemy7] Registered as sound listener
[20:54:36] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:54:36] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:54:36] [ENEMY] [Enemy8] Registered as sound listener
[20:54:36] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:54:36] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:54:36] [ENEMY] [Enemy9] Registered as sound listener
[20:54:36] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:54:36] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:54:36] [ENEMY] [Enemy10] Registered as sound listener
[20:54:36] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:54:36] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:54:36] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:54:36] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:54:36] [INFO] [LastChance] Found player: Player
[20:54:36] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:54:36] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:54:36] [INFO] [LastChance] Connected to player Died signal (C#)
[20:54:36] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:54:36] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:54:36] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:54:36] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:54:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(550.4856, 1196.897), shooter_id=1390814431920, bullet_pos=(887.1135, 1421.178)
[20:54:37] [INFO] [Bullet] Using shooter_position, distance=404.500152587891
[20:54:37] [INFO] [Bullet] Distance to wall: 404.500152587891 (27.5431591999026% of viewport)
[20:54:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:37] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:37] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:54:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(608.8221, 1138.561), shooter_id=1390814431920, bullet_pos=(887.2373, 1431.999)
[20:54:37] [INFO] [Bullet] Using shooter_position, distance=404.500793457031
[20:54:37] [INFO] [Bullet] Distance to wall: 404.500793457031 (27.5432028378608% of viewport)
[20:54:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:37] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:37] [ENEMY] [Enemy4] Memory: high confidence (0.87) - transitioning to PURSUING
[20:54:37] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:54:37] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
[20:54:38] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:54:38] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:54:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(805.7166, 1186.602), shooter_id=1390814431920, bullet_pos=(998.7603, 1374.656)
[20:54:38] [INFO] [Bullet] Using shooter_position, distance=269.499481201172
[20:54:38] [INFO] [Bullet] Distance to wall: 269.499481201172 (18.3507152408358% of viewport)
[20:54:38] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:38] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(805.7166, 1186.602), shooter_id=1390814431920, bullet_pos=(998.7603, 1374.656)
[20:54:38] [INFO] [Bullet] Using shooter_position, distance=269.499481201172
[20:54:38] [INFO] [Bullet] Distance to wall: 269.499481201172 (18.3507152408358% of viewport)
[20:54:38] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:38] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:38] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:38] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:38] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:54:38] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:54:38] [ENEMY] [Enemy1] Death animation component initialized
[20:54:38] [ENEMY] [Enemy2] Death animation component initialized
[20:54:38] [ENEMY] [Enemy3] Death animation component initialized
[20:54:38] [ENEMY] [Enemy4] Death animation component initialized
[20:54:38] [ENEMY] [Enemy5] Death animation component initialized
[20:54:38] [ENEMY] [Enemy6] Death animation component initialized
[20:54:38] [ENEMY] [Enemy7] Death animation component initialized
[20:54:38] [ENEMY] [Enemy8] Death animation component initialized
[20:54:38] [ENEMY] [Enemy9] Death animation component initialized
[20:54:38] [ENEMY] [Enemy10] Death animation component initialized
[20:54:38] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:54:38] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:54:38] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:54:38] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:54:38] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:54:38] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:54:38] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:54:38] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:54:38] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:54:38] [INFO] [ScoreManager] Level started with 10 enemies
[20:54:38] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:54:38] [ENEMY] [Enemy1] Registered as sound listener
[20:54:38] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:54:38] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:54:38] [ENEMY] [Enemy2] Registered as sound listener
[20:54:38] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:54:38] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:54:38] [ENEMY] [Enemy3] Registered as sound listener
[20:54:38] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:54:38] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:54:38] [ENEMY] [Enemy4] Registered as sound listener
[20:54:38] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:54:38] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:54:38] [ENEMY] [Enemy5] Registered as sound listener
[20:54:38] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:54:38] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:54:38] [ENEMY] [Enemy6] Registered as sound listener
[20:54:38] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:54:38] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:54:38] [ENEMY] [Enemy7] Registered as sound listener
[20:54:38] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:54:38] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:54:38] [ENEMY] [Enemy8] Registered as sound listener
[20:54:38] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:54:38] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:54:38] [ENEMY] [Enemy9] Registered as sound listener
[20:54:38] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:54:38] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:54:38] [ENEMY] [Enemy10] Registered as sound listener
[20:54:38] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:54:38] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:54:38] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:54:38] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:54:38] [INFO] [LastChance] Found player: Player
[20:54:38] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:54:38] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:54:38] [INFO] [LastChance] Connected to player Died signal (C#)
[20:54:38] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:54:38] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:54:38] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:54:39] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:54:39] [ENEMY] [Enemy10] Hit taken, health: 2/3
[20:54:39] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:54:39] [INFO] [ImpactEffects] spawn_blood_effect called at (1105.462, 1490.297), dir=(0.899069, 0.437807), lethal=false
[20:54:39] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:54:39] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:54:39] [INFO] [ImpactEffects] Blood effect spawned at (1105.462, 1490.297) (scale=0.9)
[20:54:39] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:54:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(700.033, 1201.078), shooter_id=1515016162182, bullet_pos=(1003.165, 1394.343)
[20:54:39] [INFO] [Bullet] Using shooter_position, distance=359.499969482422
[20:54:39] [INFO] [Bullet] Distance to wall: 359.499969482422 (24.479013984211% of viewport)
[20:54:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:39] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(700.033, 1201.078), shooter_id=1515016162182, bullet_pos=(1003.165, 1394.343)
[20:54:39] [INFO] [Bullet] Using shooter_position, distance=359.499969482422
[20:54:39] [INFO] [Bullet] Distance to wall: 359.499969482422 (24.479013984211% of viewport)
[20:54:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:39] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:40] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:54:40] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:54:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(758.7955, 1170.859), shooter_id=1515016162182, bullet_pos=(1077.919, 1380.823)
[20:54:40] [INFO] [Bullet] Using shooter_position, distance=382.000701904297
[20:54:40] [INFO] [Bullet] Distance to wall: 382.000701904297 (26.011130230015% of viewport)
[20:54:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:40] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:40] [ENEMY] [Enemy4] Memory: high confidence (0.86) - transitioning to PURSUING
[20:54:40] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:54:40] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
[20:54:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(823.2311, 1201.149), shooter_id=1515016162182, bullet_pos=(1112.928, 1373.326)
[20:54:40] [INFO] [Bullet] Using shooter_position, distance=336.999877929688
[20:54:40] [INFO] [Bullet] Distance to wall: 336.999877929688 (22.9469413763652% of viewport)
[20:54:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:40] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:40] [ENEMY] [Enemy3] Memory: medium confidence (0.73) - transitioning to PURSUING
[20:54:40] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[20:54:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(983.2259, 1430.165), shooter_id=1515016162182, bullet_pos=(1114.835, 1402.427)
[20:54:41] [INFO] [Bullet] Using shooter_position, distance=134.500198364258
[20:54:41] [INFO] [Bullet] Distance to wall: 134.500198364258 (9.15836583067863% of viewport)
[20:54:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:41] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:41] [ENEMY] [Enemy10] Hit taken, health: 1/3
[20:54:41] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:54:41] [INFO] [ImpactEffects] spawn_blood_effect called at (1299.977, 1440.285), dir=(0.976588, -0.215119), lethal=false
[20:54:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:54:41] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:54:41] [INFO] [ImpactEffects] Blood effect spawned at (1299.977, 1440.285) (scale=0.9)
[20:54:42] [ENEMY] [Enemy4] FLANKING started: target=(963.5413, 1578.078), side=left, pos=(765.0495, 960.2307)
[20:54:42] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[20:54:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1123.046, 1530.788), shooter_id=1515016162182, bullet_pos=(1499.311, 1464.848)
[20:54:42] [INFO] [Bullet] Using shooter_position, distance=381.999786376953
[20:54:42] [INFO] [Bullet] Distance to wall: 381.999786376953 (26.0110678900747% of viewport)
[20:54:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:42] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:43] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:43] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:43] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:54:43] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:54:43] [ENEMY] [Enemy1] Death animation component initialized
[20:54:43] [ENEMY] [Enemy2] Death animation component initialized
[20:54:43] [ENEMY] [Enemy3] Death animation component initialized
[20:54:43] [ENEMY] [Enemy4] Death animation component initialized
[20:54:43] [ENEMY] [Enemy5] Death animation component initialized
[20:54:43] [ENEMY] [Enemy6] Death animation component initialized
[20:54:43] [ENEMY] [Enemy7] Death animation component initialized
[20:54:43] [ENEMY] [Enemy8] Death animation component initialized
[20:54:43] [ENEMY] [Enemy9] Death animation component initialized
[20:54:43] [ENEMY] [Enemy10] Death animation component initialized
[20:54:43] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:54:43] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:54:43] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:54:43] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:54:43] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:54:43] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:54:43] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:54:43] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:54:43] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:54:43] [INFO] [ScoreManager] Level started with 10 enemies
[20:54:43] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 31)
[20:54:43] [ENEMY] [Enemy1] Registered as sound listener
[20:54:43] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:54:43] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 32)
[20:54:43] [ENEMY] [Enemy2] Registered as sound listener
[20:54:43] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:54:43] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 33)
[20:54:43] [ENEMY] [Enemy3] Registered as sound listener
[20:54:43] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:54:43] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 34)
[20:54:43] [ENEMY] [Enemy4] Registered as sound listener
[20:54:43] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:54:43] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 35)
[20:54:43] [ENEMY] [Enemy5] Registered as sound listener
[20:54:43] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:54:43] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 36)
[20:54:43] [ENEMY] [Enemy6] Registered as sound listener
[20:54:43] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:54:43] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 37)
[20:54:43] [ENEMY] [Enemy7] Registered as sound listener
[20:54:43] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:54:43] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 38)
[20:54:43] [ENEMY] [Enemy8] Registered as sound listener
[20:54:43] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:54:43] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 39)
[20:54:43] [ENEMY] [Enemy9] Registered as sound listener
[20:54:43] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:54:43] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 40)
[20:54:43] [ENEMY] [Enemy10] Registered as sound listener
[20:54:43] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:54:43] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:54:43] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:54:43] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:54:43] [INFO] [LastChance] Found player: Player
[20:54:43] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:54:43] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:54:43] [INFO] [LastChance] Connected to player Died signal (C#)
[20:54:43] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:54:43] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:54:43] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:54:45] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:54:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(807.9415, 1276.679), shooter_id=1905086434123, bullet_pos=(1031.202, 1382.338)
[20:54:45] [INFO] [Bullet] Using shooter_position, distance=246.999633789063
[20:54:45] [INFO] [Bullet] Distance to wall: 246.999633789063 (16.8186592569742% of viewport)
[20:54:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:45] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:45] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:54:45] [ENEMY] [Enemy4] Memory: high confidence (0.88) - transitioning to PURSUING
[20:54:45] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:54:45] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:45] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:45] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:54:45] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:54:45] [ENEMY] [Enemy1] Death animation component initialized
[20:54:45] [ENEMY] [Enemy2] Death animation component initialized
[20:54:45] [ENEMY] [Enemy3] Death animation component initialized
[20:54:45] [ENEMY] [Enemy4] Death animation component initialized
[20:54:45] [ENEMY] [Enemy5] Death animation component initialized
[20:54:45] [ENEMY] [Enemy6] Death animation component initialized
[20:54:45] [ENEMY] [Enemy7] Death animation component initialized
[20:54:45] [ENEMY] [Enemy8] Death animation component initialized
[20:54:45] [ENEMY] [Enemy9] Death animation component initialized
[20:54:45] [ENEMY] [Enemy10] Death animation component initialized
[20:54:45] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:54:45] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:54:45] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:54:45] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:54:45] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:54:45] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:54:45] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:54:45] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:54:45] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:54:45] [INFO] [ScoreManager] Level started with 10 enemies
[20:54:45] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 41)
[20:54:45] [ENEMY] [Enemy1] Registered as sound listener
[20:54:45] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:54:45] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 42)
[20:54:45] [ENEMY] [Enemy2] Registered as sound listener
[20:54:45] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:54:45] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 43)
[20:54:45] [ENEMY] [Enemy3] Registered as sound listener
[20:54:45] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:54:45] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 44)
[20:54:45] [ENEMY] [Enemy4] Registered as sound listener
[20:54:45] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:54:45] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 45)
[20:54:45] [ENEMY] [Enemy5] Registered as sound listener
[20:54:45] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:54:45] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 46)
[20:54:45] [ENEMY] [Enemy6] Registered as sound listener
[20:54:45] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:54:45] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 47)
[20:54:45] [ENEMY] [Enemy7] Registered as sound listener
[20:54:45] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:54:45] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 48)
[20:54:45] [ENEMY] [Enemy8] Registered as sound listener
[20:54:45] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:54:45] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 49)
[20:54:45] [ENEMY] [Enemy9] Registered as sound listener
[20:54:45] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:54:45] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 50)
[20:54:45] [ENEMY] [Enemy10] Registered as sound listener
[20:54:45] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:54:46] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:54:46] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:54:46] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:54:46] [INFO] [LastChance] Found player: Player
[20:54:46] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:54:46] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:54:46] [INFO] [LastChance] Connected to player Died signal (C#)
[20:54:46] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:54:46] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:54:46] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:54:47] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:54:47] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:54:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(764.0035, 1290.291), shooter_id=2043196475996, bullet_pos=(1244.415, 1623.223)
[20:54:47] [INFO] [Bullet] Using shooter_position, distance=584.498840332031
[20:54:47] [INFO] [Bullet] Distance to wall: 584.498840332031 (39.7996008368021% of viewport)
[20:54:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:47] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:47] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
[20:54:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(874.9112, 1292.138), shooter_id=2043196475996, bullet_pos=(1007.888, 1375.602)
[20:54:47] [INFO] [Bullet] Using shooter_position, distance=157.000198364258
[20:54:47] [INFO] [Bullet] Distance to wall: 157.000198364258 (10.6904322045304% of viewport)
[20:54:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:47] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(874.9112, 1292.138), shooter_id=2043196475996, bullet_pos=(1007.888, 1375.602)
[20:54:47] [INFO] [Bullet] Using shooter_position, distance=157.000198364258
[20:54:47] [INFO] [Bullet] Distance to wall: 157.000198364258 (10.6904322045304% of viewport)
[20:54:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:47] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:47] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:54:47] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:54:48] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
[20:54:48] [ENEMY] [Enemy4] Memory: high confidence (0.87) - transitioning to PURSUING
[20:54:48] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:54:48] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:48] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:48] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:54:48] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:54:48] [ENEMY] [Enemy1] Death animation component initialized
[20:54:48] [ENEMY] [Enemy2] Death animation component initialized
[20:54:48] [ENEMY] [Enemy3] Death animation component initialized
[20:54:48] [ENEMY] [Enemy4] Death animation component initialized
[20:54:48] [ENEMY] [Enemy5] Death animation component initialized
[20:54:48] [ENEMY] [Enemy6] Death animation component initialized
[20:54:48] [ENEMY] [Enemy7] Death animation component initialized
[20:54:48] [ENEMY] [Enemy8] Death animation component initialized
[20:54:48] [ENEMY] [Enemy9] Death animation component initialized
[20:54:48] [ENEMY] [Enemy10] Death animation component initialized
[20:54:48] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:54:48] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:54:48] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:54:48] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:54:48] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:54:48] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:54:48] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:54:48] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:54:48] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:54:48] [INFO] [ScoreManager] Level started with 10 enemies
[20:54:48] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 51)
[20:54:48] [ENEMY] [Enemy1] Registered as sound listener
[20:54:48] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:54:48] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 52)
[20:54:48] [ENEMY] [Enemy2] Registered as sound listener
[20:54:48] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:54:48] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 53)
[20:54:48] [ENEMY] [Enemy3] Registered as sound listener
[20:54:48] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:54:48] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 54)
[20:54:48] [ENEMY] [Enemy4] Registered as sound listener
[20:54:48] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:54:48] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 55)
[20:54:48] [ENEMY] [Enemy5] Registered as sound listener
[20:54:48] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:54:48] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 56)
[20:54:48] [ENEMY] [Enemy6] Registered as sound listener
[20:54:48] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:54:48] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 57)
[20:54:48] [ENEMY] [Enemy7] Registered as sound listener
[20:54:48] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:54:48] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 58)
[20:54:48] [ENEMY] [Enemy8] Registered as sound listener
[20:54:48] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:54:48] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 59)
[20:54:48] [ENEMY] [Enemy9] Registered as sound listener
[20:54:48] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:54:48] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 60)
[20:54:48] [ENEMY] [Enemy10] Registered as sound listener
[20:54:48] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:54:48] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:54:48] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:54:48] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:54:48] [INFO] [LastChance] Found player: Player
[20:54:48] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:54:48] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:54:48] [INFO] [LastChance] Connected to player Died signal (C#)
[20:54:48] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:54:48] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:54:48] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:54:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(660.2616, 1303.286), shooter_id=2196624115304, bullet_pos=(885.9211, 1403.719)
[20:54:49] [INFO] [Bullet] Using shooter_position, distance=247.00016784668
[20:54:49] [INFO] [Bullet] Distance to wall: 247.00016784668 (16.8186956219394% of viewport)
[20:54:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:54:49] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:49] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:54:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1068.593, 1468.946), source=ENEMY (Enemy10), range=1469, listeners=60
[20:54:50] [INFO] [SoundPropagation] Cleaned up 50 invalid listeners
[20:54:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:50] [INFO] [LastChance] Threat detected: Bullet
[20:54:50] [INFO] [LastChance] Not in hard mode - effect disabled
[20:54:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:50] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:54:50] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:54:50] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:54:50] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:54:50] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:54:50] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:54:50] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:54:50] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:54:50] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:54:50] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:54:50] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:54:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1068.593, 1468.946), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:50] [INFO] [LastChance] Threat detected: Bullet
[20:54:50] [INFO] [LastChance] Not in hard mode - effect disabled
[20:54:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:50] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:54:50] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:54:50] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:54:50] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:54:50] [ENEMY] [Enemy1] Death animation component initialized
[20:54:50] [ENEMY] [Enemy2] Death animation component initialized
[20:54:50] [ENEMY] [Enemy3] Death animation component initialized
[20:54:50] [ENEMY] [Enemy4] Death animation component initialized
[20:54:50] [ENEMY] [Enemy5] Death animation component initialized
[20:54:50] [ENEMY] [Enemy6] Death animation component initialized
[20:54:50] [ENEMY] [Enemy7] Death animation component initialized
[20:54:50] [ENEMY] [Enemy8] Death animation component initialized
[20:54:50] [ENEMY] [Enemy9] Death animation component initialized
[20:54:50] [ENEMY] [Enemy10] Death animation component initialized
[20:54:50] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:54:50] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:54:50] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:54:50] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:54:50] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:54:50] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:54:50] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:54:50] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:54:50] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:54:50] [INFO] [ScoreManager] Level started with 10 enemies
[20:54:50] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:54:50] [ENEMY] [Enemy1] Registered as sound listener
[20:54:50] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:54:50] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:54:50] [ENEMY] [Enemy2] Registered as sound listener
[20:54:50] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:54:50] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:54:50] [ENEMY] [Enemy3] Registered as sound listener
[20:54:50] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:54:50] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:54:50] [ENEMY] [Enemy4] Registered as sound listener
[20:54:50] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:54:50] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:54:50] [ENEMY] [Enemy5] Registered as sound listener
[20:54:50] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:54:50] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:54:50] [ENEMY] [Enemy6] Registered as sound listener
[20:54:50] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:54:50] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:54:50] [ENEMY] [Enemy7] Registered as sound listener
[20:54:50] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:54:50] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:54:50] [ENEMY] [Enemy8] Registered as sound listener
[20:54:50] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:54:50] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:54:50] [ENEMY] [Enemy9] Registered as sound listener
[20:54:50] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:54:50] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:54:50] [ENEMY] [Enemy10] Registered as sound listener
[20:54:50] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:54:50] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:54:50] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:54:50] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:54:50] [INFO] [LastChance] Found player: Player
[20:54:50] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:54:50] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:54:50] [INFO] [LastChance] Connected to player Died signal (C#)
[20:54:50] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:54:50] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:54:50] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:54:52] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:54:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(931.0339, 1340.94), shooter_id=2331361938155, bullet_pos=(987.3809, 1377.189)
[20:54:53] [INFO] [Bullet] Using shooter_position, distance=67.0000076293945
[20:54:53] [INFO] [Bullet] Distance to wall: 67.0000076293945 (4.56215372163582% of viewport)
[20:54:53] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:54:53] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:53] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:54:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(887.1184, 1346.928), shooter_id=2331361938155, bullet_pos=(1500.06, 1723.737)
[20:54:53] [INFO] [Bullet] Using shooter_position, distance=719.500854492188
[20:54:53] [INFO] [Bullet] Distance to wall: 719.500854492188 (48.9921362277813% of viewport)
[20:54:53] [INFO] [Bullet] Distance-based penetration chance: 89.5091744009218%
[20:54:53] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(941.9487, 1430.557), shooter_id=2331361938155, bullet_pos=(1503.902, 1714.245)
[20:54:54] [INFO] [Bullet] Using shooter_position, distance=629.5
[20:54:54] [INFO] [Bullet] Distance to wall: 629.5 (42.86381254843% of viewport)
[20:54:54] [INFO] [Bullet] Distance-based penetration chance: 96.658885360165%
[20:54:54] [INFO] [Bullet] Caliber cannot penetrate walls
[20:54:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:54:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:54:54] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:54:54] [ENEMY] [Enemy1] Death animation component initialized
[20:54:54] [ENEMY] [Enemy2] Death animation component initialized
[20:54:54] [ENEMY] [Enemy3] Death animation component initialized
[20:54:54] [ENEMY] [Enemy4] Death animation component initialized
[20:54:54] [ENEMY] [Enemy5] Death animation component initialized
[20:54:54] [ENEMY] [Enemy6] Death animation component initialized
[20:54:54] [ENEMY] [Enemy7] Death animation component initialized
[20:54:54] [ENEMY] [Enemy8] Death animation component initialized
[20:54:54] [ENEMY] [Enemy9] Death animation component initialized
[20:54:54] [ENEMY] [Enemy10] Death animation component initialized
[20:54:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:54:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:54:54] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:54:54] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:54:54] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:54:54] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:54:54] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:54:54] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:54:54] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:54:54] [INFO] [ScoreManager] Level started with 10 enemies
[20:54:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:54:54] [ENEMY] [Enemy1] Registered as sound listener
[20:54:54] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:54:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:54:54] [ENEMY] [Enemy2] Registered as sound listener
[20:54:54] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:54:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:54:54] [ENEMY] [Enemy3] Registered as sound listener
[20:54:54] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:54:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:54:54] [ENEMY] [Enemy4] Registered as sound listener
[20:54:54] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:54:54] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:54:54] [ENEMY] [Enemy5] Registered as sound listener
[20:54:54] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:54:54] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:54:54] [ENEMY] [Enemy6] Registered as sound listener
[20:54:54] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:54:54] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:54:54] [ENEMY] [Enemy7] Registered as sound listener
[20:54:54] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:54:54] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:54:54] [ENEMY] [Enemy8] Registered as sound listener
[20:54:54] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:54:54] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:54:54] [ENEMY] [Enemy9] Registered as sound listener
[20:54:54] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:54:54] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:54:54] [ENEMY] [Enemy10] Registered as sound listener
[20:54:54] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:54:54] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:54:54] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:54:54] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:54:54] [INFO] [LastChance] Found player: Player
[20:54:54] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:54:54] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:54:54] [INFO] [LastChance] Connected to player Died signal (C#)
[20:54:54] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:54:54] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:54:54] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:54:56] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:54:57] [ENEMY] [Enemy10] Hit taken, health: 2/3
[20:54:57] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:54:57] [INFO] [ImpactEffects] spawn_blood_effect called at (1101.18, 1521.124), dir=(0.780071, 0.625691), lethal=false
[20:54:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:54:57] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:54:57] [INFO] [ImpactEffects] Blood effect spawned at (1101.18, 1521.124) (scale=0.9)
[20:54:57] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:54:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1083.697, 1493.477), source=ENEMY (Enemy10), range=1469, listeners=30
[20:54:57] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[20:54:57] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1084.403, 1482.834), source=ENEMY (Enemy10), range=1469, listeners=10
[20:54:57] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:54:57] [INFO] [LastChance] Threat detected: @Area2D@3952
[20:54:57] [INFO] [LastChance] Not in hard mode - effect disabled
[20:54:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:54:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:54:57] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:54:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1029.348, 1452.529), shooter_id=2543493055863, bullet_pos=(41.89999, 913.4818)
[20:54:57] [INFO] [Bullet] Using shooter_position, distance=1125.00012207031
[20:54:57] [INFO] [Bullet] Distance to wall: 1125.00012207031 (76.6033270045794% of viewport)
[20:54:57] [INFO] [Bullet] Distance-based penetration chance: 57.2961184946574%
[20:54:57] [INFO] [Bullet] Starting wall penetration at (41.89999, 913.4818)
[20:54:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.3876037597656
[20:54:57] [INFO] [Bullet] Body exited signal received for penetrating body
[20:54:57] [INFO] [Bullet] Exiting penetration at (0.939209, 891.1213) after traveling 41.6666679382324 pixels through wall
[20:54:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:55:01] [ENEMY] [Enemy7] Memory: high confidence (0.90) - transitioning to PURSUING
[20:55:01] [ENEMY] [Enemy7] State: IDLE -> PURSUING
[20:55:03] [ENEMY] [Enemy4] Memory: medium confidence (0.71) - transitioning to PURSUING
[20:55:03] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:55:03] [ENEMY] [Enemy2] Memory: medium confidence (0.60) - transitioning to PURSUING
[20:55:03] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[20:55:03] [ENEMY] [Enemy3] Memory: medium confidence (0.60) - transitioning to PURSUING
[20:55:03] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[20:55:04] [ENEMY] [Enemy4] FLANKING started: target=(857.5498, 1567.159), side=left, pos=(887.9183, 967.1865)
[20:55:04] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[20:55:06] [ENEMY] [Enemy7] FLANKING started: target=(951.6062, 1448.447), side=left, pos=(1424.758, 989.5103)
[20:55:06] [ENEMY] [Enemy7] State: PURSUING -> FLANKING
[20:55:07] [ENEMY] [Enemy7] State: FLANKING -> COMBAT
[20:55:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(969.3096, 1361.076), source=ENEMY (Enemy7), range=1469, listeners=10
[20:55:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=1, below_threshold=5
[20:55:08] [INFO] [LastChance] Threat detected: Bullet
[20:55:08] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:55:08] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:55:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(969.3096, 1361.076), source=ENEMY (Enemy7), range=1469, listeners=10
[20:55:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=1, below_threshold=5
[20:55:08] [INFO] [LastChance] Threat detected: Bullet
[20:55:08] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:55:08] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:55:08] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:55:08] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:55:08] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:55:08] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:55:08] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:55:08] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:55:08] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:55:08] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:55:08] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:55:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(969.3096, 1361.076), source=ENEMY (Enemy7), range=1469, listeners=10
[20:55:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=1, below_threshold=5
[20:55:08] [INFO] [LastChance] Threat detected: Bullet
[20:55:08] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:09] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:55:09] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:55:09] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:55:09] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:55:09] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:55:09] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[20:55:09] [INFO] [LastChance] Player died
[20:55:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(969.3096, 1361.076), source=ENEMY (Enemy7), range=1469, listeners=10
[20:55:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=1, below_threshold=5
[20:55:09] [INFO] [LastChance] Threat detected: Bullet
[20:55:09] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(969.3096, 1361.076), source=ENEMY (Enemy7), range=1469, listeners=10
[20:55:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=1, below_threshold=5
[20:55:09] [INFO] [LastChance] Threat detected: Bullet
[20:55:09] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(969.3096, 1361.076), source=ENEMY (Enemy7), range=1469, listeners=10
[20:55:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=1, below_threshold=5
[20:55:09] [INFO] [LastChance] Threat detected: Bullet
[20:55:09] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(969.3096, 1361.076), source=ENEMY (Enemy7), range=1469, listeners=10
[20:55:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=1, below_threshold=5
[20:55:09] [INFO] [LastChance] Threat detected: Bullet
[20:55:09] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(969.3096, 1361.076), source=ENEMY (Enemy7), range=1469, listeners=10
[20:55:10] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=1, below_threshold=5
[20:55:10] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:10] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:10] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:55:10] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:55:10] [ENEMY] [Enemy1] Death animation component initialized
[20:55:10] [ENEMY] [Enemy2] Death animation component initialized
[20:55:10] [ENEMY] [Enemy3] Death animation component initialized
[20:55:10] [ENEMY] [Enemy4] Death animation component initialized
[20:55:10] [ENEMY] [Enemy5] Death animation component initialized
[20:55:10] [ENEMY] [Enemy6] Death animation component initialized
[20:55:10] [ENEMY] [Enemy7] Death animation component initialized
[20:55:10] [ENEMY] [Enemy8] Death animation component initialized
[20:55:10] [ENEMY] [Enemy9] Death animation component initialized
[20:55:10] [ENEMY] [Enemy10] Death animation component initialized
[20:55:10] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:55:10] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:55:10] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:55:10] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:55:10] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:55:10] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:55:10] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:55:10] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:55:10] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:55:10] [INFO] [ScoreManager] Level started with 10 enemies
[20:55:10] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:55:10] [ENEMY] [Enemy1] Registered as sound listener
[20:55:10] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:55:10] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:55:10] [ENEMY] [Enemy2] Registered as sound listener
[20:55:10] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:55:10] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:55:10] [ENEMY] [Enemy3] Registered as sound listener
[20:55:10] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:55:10] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:55:10] [ENEMY] [Enemy4] Registered as sound listener
[20:55:10] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:55:10] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:55:10] [ENEMY] [Enemy5] Registered as sound listener
[20:55:10] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:55:10] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:55:10] [ENEMY] [Enemy6] Registered as sound listener
[20:55:10] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:55:10] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:55:10] [ENEMY] [Enemy7] Registered as sound listener
[20:55:10] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:55:10] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:55:10] [ENEMY] [Enemy8] Registered as sound listener
[20:55:10] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:55:10] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:55:10] [ENEMY] [Enemy9] Registered as sound listener
[20:55:10] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:55:10] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:55:10] [ENEMY] [Enemy10] Registered as sound listener
[20:55:10] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:55:10] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:55:10] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:55:10] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:55:10] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:55:10] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:55:10] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:55:10] [INFO] [LastChance] Found player: Player
[20:55:10] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:55:10] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:55:10] [INFO] [LastChance] Connected to player Died signal (C#)
[20:55:12] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:55:13] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:55:13] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:55:14] [ENEMY] [Enemy3] Hit taken, health: 3/4
[20:55:14] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:55:14] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.998983, -0.045082), lethal=false
[20:55:14] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:55:14] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:55:14] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=0.9)
[20:55:14] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:55:14] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:55:14] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:55:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(693.8083, 755.066), source=ENEMY (Enemy3), range=1469, listeners=20
[20:55:14] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:55:14] [ENEMY] [Enemy2] Heard gunshot at (693.8083, 755.066), source_type=1, intensity=0.02, distance=358
[20:55:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:55:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(626.8203, 767.033), shooter_id=3650940307471, bullet_pos=(507.8094, 805.2616)
[20:55:14] [INFO] [Bullet] Using shooter_position, distance=125.000038146973
[20:55:14] [INFO] [Bullet] Distance to wall: 125.000038146973 (8.51148245222944% of viewport)
[20:55:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:14] [INFO] [Bullet] Starting wall penetration at (507.8094, 805.2616)
[20:55:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(685.5527, 761.8206), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:55:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38.4642372131348
[20:55:14] [INFO] [LastChance] Threat detected: @Area2D@4215
[20:55:14] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:14] [INFO] [Bullet] Body exited signal received for penetrating body
[20:55:14] [INFO] [Bullet] Exiting penetration at (463.3787, 819.5336) after traveling 41.6666717529297 pixels through wall
[20:55:14] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:55:14] [ENEMY] [Enemy3] Hit taken, health: 2/4
[20:55:14] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:55:14] [INFO] [ImpactEffects] spawn_blood_effect called at (679.361, 766.8866), dir=(0.993919, -0.110112), lethal=false
[20:55:14] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:55:14] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:55:14] [INFO] [ImpactEffects] Blood effect spawned at (679.361, 766.8866) (scale=0.9)
[20:55:14] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:55:14] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:55:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(677.2971, 768.5752), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:55:14] [INFO] [LastChance] Threat detected: Bullet
[20:55:14] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:14] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:55:14] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:55:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(611.9143, 787.4351), shooter_id=3650940307471, bullet_pos=(28.93521, 807.7609)
[20:55:14] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
[20:55:14] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
[20:55:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:14] [ENEMY] [Enemy1] Memory: medium confidence (0.59) - transitioning to PURSUING
[20:55:14] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[20:55:14] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:55:16] [ENEMY] [Enemy10] FLANKING started: target=(408.3964, 1008.154), side=right, pos=(952.6055, 1426.918)
[20:55:16] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:55:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.1693, 771.9525), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:16] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[20:55:16] [INFO] [LastChance] Threat detected: Bullet
[20:55:16] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(605.9821, 786.4127), shooter_id=3650940307471, bullet_pos=(525.1265, 806.5825)
[20:55:16] [INFO] [Bullet] Using shooter_position, distance=83.3333511352539
[20:55:16] [INFO] [Bullet] Distance to wall: 83.3333511352539 (5.67432111532012% of viewport)
[20:55:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:16] [INFO] [Bullet] Starting wall penetration at (525.1265, 806.5825)
[20:55:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.7702102661133
[20:55:16] [INFO] [Bullet] Body exited signal received for penetrating body
[20:55:16] [INFO] [Bullet] Exiting penetration at (479.8474, 817.8776) after traveling 41.6666679382324 pixels through wall
[20:55:16] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:55:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.1693, 771.9525), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:16] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[20:55:16] [INFO] [LastChance] Threat detected: @Area2D@4224
[20:55:16] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:16] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[20:55:16] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:55:17] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[20:55:17] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:55:17] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:55:17] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
[20:55:17] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
[20:55:18] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[20:55:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:18] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:55:18] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:55:18] [ENEMY] [Enemy1] Death animation component initialized
[20:55:18] [ENEMY] [Enemy2] Death animation component initialized
[20:55:18] [ENEMY] [Enemy3] Death animation component initialized
[20:55:18] [ENEMY] [Enemy4] Death animation component initialized
[20:55:18] [ENEMY] [Enemy5] Death animation component initialized
[20:55:18] [ENEMY] [Enemy6] Death animation component initialized
[20:55:18] [ENEMY] [Enemy7] Death animation component initialized
[20:55:18] [ENEMY] [Enemy8] Death animation component initialized
[20:55:18] [ENEMY] [Enemy9] Death animation component initialized
[20:55:18] [ENEMY] [Enemy10] Death animation component initialized
[20:55:18] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:55:18] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:55:18] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:55:18] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:55:18] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:55:18] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:55:18] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:55:18] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:55:18] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:55:18] [INFO] [ScoreManager] Level started with 10 enemies
[20:55:18] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:55:18] [ENEMY] [Enemy1] Registered as sound listener
[20:55:18] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:55:18] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:55:18] [ENEMY] [Enemy2] Registered as sound listener
[20:55:18] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:55:18] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:55:18] [ENEMY] [Enemy3] Registered as sound listener
[20:55:18] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:55:18] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:55:18] [ENEMY] [Enemy4] Registered as sound listener
[20:55:18] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:55:18] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:55:18] [ENEMY] [Enemy5] Registered as sound listener
[20:55:18] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:55:18] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:55:18] [ENEMY] [Enemy6] Registered as sound listener
[20:55:18] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:55:18] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:55:18] [ENEMY] [Enemy7] Registered as sound listener
[20:55:18] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:55:18] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:55:18] [ENEMY] [Enemy8] Registered as sound listener
[20:55:18] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:55:18] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:55:18] [ENEMY] [Enemy9] Registered as sound listener
[20:55:18] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:55:18] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:55:18] [ENEMY] [Enemy10] Registered as sound listener
[20:55:18] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:55:18] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:55:18] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:55:18] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:55:18] [INFO] [LastChance] Found player: Player
[20:55:18] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:55:18] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:55:18] [INFO] [LastChance] Connected to player Died signal (C#)
[20:55:18] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:55:18] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:55:18] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:55:19] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:55:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1062.347, 1468.576), source=ENEMY (Enemy10), range=1469, listeners=20
[20:55:19] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:55:19] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:55:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1031.657, 1447.323), source=ENEMY (Enemy10), range=1469, listeners=10
[20:55:19] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:55:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1000.934, 1426.785), source=ENEMY (Enemy10), range=1469, listeners=10
[20:55:19] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:55:20] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:55:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1001.719, 1437.583), shooter_id=4132496737827, bullet_pos=(65.26694, 814.1403)
[20:55:20] [INFO] [Bullet] Using shooter_position, distance=1124.99938964844
[20:55:20] [INFO] [Bullet] Distance to wall: 1124.99938964844 (76.6032771326271% of viewport)
[20:55:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1001.719, 1437.583), shooter_id=4132496737827, bullet_pos=(253.6392, 705.4106)
[20:55:20] [INFO] [Bullet] Using shooter_position, distance=1046.7568359375
[20:55:20] [INFO] [Bullet] Distance to wall: 1046.7568359375 (71.2755977750797% of viewport)
[20:55:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(972.4262, 1413.722), shooter_id=4132496737827, bullet_pos=(63.92827, 750.2046)
[20:55:20] [INFO] [Bullet] Using shooter_position, distance=1124.99975585938
[20:55:20] [INFO] [Bullet] Distance to wall: 1124.99975585938 (76.6033020686032% of viewport)
[20:55:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(972.4262, 1413.722), shooter_id=4132496737827, bullet_pos=(128.74, 710.8329)
[20:55:20] [INFO] [Bullet] Using shooter_position, distance=1098.11657714844
[20:55:20] [INFO] [Bullet] Distance to wall: 1098.11657714844 (74.7727769963688% of viewport)
[20:55:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(943.3287, 1390.424), shooter_id=4132496737827, bullet_pos=(99.46174, 711.0857)
[20:55:20] [INFO] [Bullet] Using shooter_position, distance=1083.33361816406
[20:55:20] [INFO] [Bullet] Distance to wall: 1083.33361816406 (73.7661781356581% of viewport)
[20:55:20] [INFO] [Bullet] Distance-based penetration chance: 60.6061255083988%
[20:55:20] [INFO] [Bullet] Penetration failed (distance roll)
[20:55:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1001.719, 1437.583), shooter_id=4132496737827, bullet_pos=(498.1406, 833.3191)
[20:55:20] [INFO] [Bullet] Using shooter_position, distance=786.591552734375
[20:55:20] [INFO] [Bullet] Distance to wall: 786.591552734375 (53.5604652400075% of viewport)
[20:55:20] [INFO] [LastChance] Threat detected: @Area2D@4477
[20:55:20] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:20] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(972.4262, 1413.722), shooter_id=4132496737827, bullet_pos=(509.4644, 902.9674)
[20:55:20] [INFO] [Bullet] Using shooter_position, distance=689.3505859375
[20:55:20] [INFO] [Bullet] Distance to wall: 689.3505859375 (46.9391490004374% of viewport)
[20:55:20] [INFO] [Bullet] Distance-based penetration chance: 91.9043261661563%
[20:55:20] [INFO] [Bullet] Starting wall penetration at (509.4644, 902.9674)
[20:55:20] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18.82248878479
[20:55:20] [INFO] [Bullet] Body exited signal received for penetrating body
[20:55:20] [INFO] [Bullet] Exiting penetration at (540.804, 918.7831) after traveling 30.1041698455811 pixels through wall
[20:55:20] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[20:55:20] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:55:21] [ENEMY] [Enemy3] Hit taken, health: 3/4
[20:55:21] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:55:21] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.999917, 0.012897), lethal=false
[20:55:21] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:55:21] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:55:21] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=0.9)
[20:55:21] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:55:21] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:55:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:21] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[20:55:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:55:21] [INFO] [LastChance] Threat detected: Bullet
[20:55:21] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:55:21] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:55:21] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:55:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(693.8083, 755.066), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:55:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(685.5527, 761.8206), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:55:21] [INFO] [LastChance] Threat detected: @Area2D@4490
[20:55:21] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:21] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:55:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(677.2971, 768.5752), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:55:21] [INFO] [LastChance] Threat detected: @Area2D@4491
[20:55:21] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:55:21] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:55:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(669.0414, 775.3298), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:55:21] [INFO] [LastChance] Threat detected: @Area2D@4494
[20:55:21] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(625.7772, 756.6058), shooter_id=4130500249275, bullet_pos=(50.02122, 850.3223)
[20:55:21] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
[20:55:21] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
[20:55:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:21] [INFO] [Bullet] Starting wall penetration at (50.02122, 850.3223)
[20:55:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.4082813262939
[20:55:21] [INFO] [Bullet] Body exited signal received for penetrating body
[20:55:21] [INFO] [Bullet] Exiting penetration at (3.960739, 857.8196) after traveling 41.666675567627 pixels through wall
[20:55:21] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:55:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.9338, 735.6508), shooter_id=4133318821098, bullet_pos=(910.5342, 717.1884)
[20:55:21] [INFO] [Bullet] Using shooter_position, distance=426.999725341797
[20:55:21] [INFO] [Bullet] Distance to wall: 426.999725341797 (29.0751964817822% of viewport)
[20:55:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:21] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:55:21] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:55:21] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:55:21] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:55:21] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:55:21] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:55:21] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:55:21] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:55:21] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:55:21] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:55:21] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:55:21] [ENEMY] [Enemy10] FLANKING started: target=(683.035, 716.7106), side=left, pos=(968.7076, 1416.935)
[20:55:21] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:55:21] [ENEMY] [Enemy1] Memory: medium confidence (0.59) - transitioning to PURSUING
[20:55:21] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[20:55:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(617.511, 760.8543), shooter_id=4130500249275, bullet_pos=(63.86007, 736.9507)
[20:55:21] [INFO] [Bullet] Using shooter_position, distance=554.166687011719
[20:55:21] [INFO] [Bullet] Distance to wall: 554.166687011719 (37.7342287413102% of viewport)
[20:55:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:21] [INFO] [Bullet] Starting wall penetration at (63.86007, 736.9507)
[20:55:21] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:55:21] [INFO] [Bullet] Exiting penetration at (54.70193, 736.5552) after traveling 4.16666650772095 pixels through wall
[20:55:21] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:55:21] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:21] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:21] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:55:21] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:55:21] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:55:21] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:55:21] [ENEMY] [Enemy1] Death animation component initialized
[20:55:21] [ENEMY] [Enemy2] Death animation component initialized
[20:55:21] [ENEMY] [Enemy3] Death animation component initialized
[20:55:21] [ENEMY] [Enemy4] Death animation component initialized
[20:55:21] [ENEMY] [Enemy5] Death animation component initialized
[20:55:21] [ENEMY] [Enemy6] Death animation component initialized
[20:55:21] [ENEMY] [Enemy7] Death animation component initialized
[20:55:21] [ENEMY] [Enemy8] Death animation component initialized
[20:55:21] [ENEMY] [Enemy9] Death animation component initialized
[20:55:21] [ENEMY] [Enemy10] Death animation component initialized
[20:55:21] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:55:21] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:55:21] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:55:21] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:55:21] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:55:21] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:55:21] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:55:21] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:55:21] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:55:21] [INFO] [ScoreManager] Level started with 10 enemies
[20:55:21] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:55:21] [ENEMY] [Enemy1] Registered as sound listener
[20:55:21] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:55:21] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:55:21] [ENEMY] [Enemy2] Registered as sound listener
[20:55:21] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:55:21] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:55:21] [ENEMY] [Enemy3] Registered as sound listener
[20:55:21] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:55:21] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:55:21] [ENEMY] [Enemy4] Registered as sound listener
[20:55:21] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:55:21] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:55:21] [ENEMY] [Enemy5] Registered as sound listener
[20:55:21] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:55:21] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:55:21] [ENEMY] [Enemy6] Registered as sound listener
[20:55:21] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:55:21] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:55:21] [ENEMY] [Enemy7] Registered as sound listener
[20:55:21] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:55:21] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:55:21] [ENEMY] [Enemy8] Registered as sound listener
[20:55:21] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:55:21] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:55:21] [ENEMY] [Enemy9] Registered as sound listener
[20:55:21] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:55:21] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:55:21] [ENEMY] [Enemy10] Registered as sound listener
[20:55:21] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:55:21] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:55:21] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:55:21] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:55:21] [INFO] [LastChance] Found player: Player
[20:55:21] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:55:21] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:55:21] [INFO] [LastChance] Connected to player Died signal (C#)
[20:55:21] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:55:21] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:55:21] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:55:22] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:55:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.692, 1465.013), source=ENEMY (Enemy10), range=1469, listeners=20
[20:55:23] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:55:23] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:55:23] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:55:23] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:55:23] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:55:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.232, 1430.095), shooter_id=4336709011728, bullet_pos=(46.658, 695.7318)
[20:55:23] [INFO] [Bullet] Using shooter_position, distance=1208.333984375
[20:55:23] [INFO] [Bullet] Distance to wall: 1208.333984375 (82.2776829263662% of viewport)
[20:55:23] [ENEMY] [Enemy3] Memory: medium confidence (0.76) - transitioning to PURSUING
[20:55:23] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[20:55:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.232, 1430.095), shooter_id=4336709011728, bullet_pos=(272.7331, 463.9904)
[20:55:23] [INFO] [Bullet] Using shooter_position, distance=1213.00390625
[20:55:23] [INFO] [Bullet] Distance to wall: 1213.00390625 (82.5956664940641% of viewport)
[20:55:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(473.2355, 807.8706), shooter_id=4337531094970, bullet_pos=(497.6571, 809.8295)
[20:55:23] [INFO] [Bullet] Using shooter_position, distance=24.5000057220459
[20:55:23] [INFO] [Bullet] Distance to wall: 24.5000057220459 (1.66825044115208% of viewport)
[20:55:23] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:55:23] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:24] [ENEMY] [Enemy2] Hit taken, health: 3/4
[20:55:24] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[20:55:24] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(0.784631, 0.619963), lethal=false
[20:55:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:55:24] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:55:24] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[20:55:24] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[20:55:24] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:55:24] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:55:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(473.2355, 790.1484), shooter_id=4337531094970, bullet_pos=(922.7355, 790.4142)
[20:55:24] [INFO] [Bullet] Using shooter_position, distance=449.500091552734
[20:55:24] [INFO] [Bullet] Distance to wall: 449.500091552734 (30.60728779161% of viewport)
[20:55:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:24] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:24] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:24] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:24] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:55:24] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:55:24] [ENEMY] [Enemy1] Death animation component initialized
[20:55:24] [ENEMY] [Enemy2] Death animation component initialized
[20:55:24] [ENEMY] [Enemy3] Death animation component initialized
[20:55:24] [ENEMY] [Enemy4] Death animation component initialized
[20:55:24] [ENEMY] [Enemy5] Death animation component initialized
[20:55:24] [ENEMY] [Enemy6] Death animation component initialized
[20:55:24] [ENEMY] [Enemy7] Death animation component initialized
[20:55:24] [ENEMY] [Enemy8] Death animation component initialized
[20:55:24] [ENEMY] [Enemy9] Death animation component initialized
[20:55:24] [ENEMY] [Enemy10] Death animation component initialized
[20:55:24] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:55:24] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:55:24] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:55:24] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:55:24] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:55:24] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:55:24] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:55:24] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:55:24] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:55:24] [INFO] [ScoreManager] Level started with 10 enemies
[20:55:24] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:55:24] [ENEMY] [Enemy1] Registered as sound listener
[20:55:24] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:55:24] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:55:24] [ENEMY] [Enemy2] Registered as sound listener
[20:55:24] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:55:24] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:55:24] [ENEMY] [Enemy3] Registered as sound listener
[20:55:24] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:55:24] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:55:24] [ENEMY] [Enemy4] Registered as sound listener
[20:55:24] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:55:24] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:55:24] [ENEMY] [Enemy5] Registered as sound listener
[20:55:24] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:55:24] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:55:24] [ENEMY] [Enemy6] Registered as sound listener
[20:55:24] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:55:24] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:55:24] [ENEMY] [Enemy7] Registered as sound listener
[20:55:24] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:55:24] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:55:24] [ENEMY] [Enemy8] Registered as sound listener
[20:55:24] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:55:24] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:55:24] [ENEMY] [Enemy9] Registered as sound listener
[20:55:24] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:55:24] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:55:24] [ENEMY] [Enemy10] Registered as sound listener
[20:55:24] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:55:24] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:55:24] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:55:24] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:55:24] [INFO] [LastChance] Found player: Player
[20:55:24] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:55:24] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:55:24] [INFO] [LastChance] Connected to player Died signal (C#)
[20:55:24] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:55:24] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:55:24] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:55:25] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:55:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1061.909, 1469.364), source=ENEMY (Enemy10), range=1469, listeners=20
[20:55:25] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:55:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:55:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1031.562, 1447.626), source=ENEMY (Enemy10), range=1469, listeners=10
[20:55:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:55:26] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:55:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1001.75, 1437.455), shooter_id=4509816326420, bullet_pos=(40.49493, 776.3196)
[20:55:26] [INFO] [Bullet] Using shooter_position, distance=1166.66674804688
[20:55:26] [INFO] [Bullet] Distance to wall: 1166.66674804688 (79.4404841854927% of viewport)
[20:55:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1001.75, 1437.455), shooter_id=4509816326420, bullet_pos=(132.5922, 713.9125)
[20:55:26] [INFO] [Bullet] Using shooter_position, distance=1130.90625
[20:55:26] [INFO] [Bullet] Distance to wall: 1130.90625 (77.0054861157234% of viewport)
[20:55:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(972.8826, 1413.071), shooter_id=4509816326420, bullet_pos=(41.99713, 709.8198)
[20:55:26] [INFO] [Bullet] Using shooter_position, distance=1166.66625976563
[20:55:26] [INFO] [Bullet] Distance to wall: 1166.66625976563 (79.4404509375245% of viewport)
[20:55:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(972.8826, 1413.071), shooter_id=4509816326420, bullet_pos=(299.7577, 459.6996)
[20:55:26] [INFO] [Bullet] Using shooter_position, distance=1167.0537109375
[20:55:26] [INFO] [Bullet] Distance to wall: 1167.0537109375 (79.4668332002773% of viewport)
[20:55:26] [INFO] [Bullet] Distance-based penetration chance: 53.9553612663431%
[20:55:26] [INFO] [Bullet] Penetration failed (distance roll)
[20:55:26] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:55:26] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:55:26] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:55:26] [ENEMY] [Enemy1] Memory: high confidence (0.90) - transitioning to PURSUING
[20:55:26] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[20:55:26] [ENEMY] [Enemy2] Memory: high confidence (0.90) - transitioning to PURSUING
[20:55:26] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[20:55:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(475.519, 773.5547), shooter_id=4510638409699, bullet_pos=(742.8785, 807.4535)
[20:55:27] [INFO] [Bullet] Using shooter_position, distance=269.499938964844
[20:55:27] [INFO] [Bullet] Distance to wall: 269.499938964844 (18.350746410806% of viewport)
[20:55:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:27] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:27] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:55:27] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:55:27] [ENEMY] [Enemy3] Hit taken, health: 1/2
[20:55:27] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:55:27] [INFO] [ImpactEffects] spawn_blood_effect called at (679.7739, 766.5485), dir=(0.996575, 0.082688), lethal=false
[20:55:27] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:55:27] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:55:27] [INFO] [ImpactEffects] Blood effect spawned at (679.7739, 766.5485) (scale=0.9)
[20:55:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(663.7633, 909.8607), source=ENEMY (Enemy4), range=1469, listeners=10
[20:55:27] [ENEMY] [Enemy3] Heard gunshot at (663.7633, 909.8607), source_type=1, intensity=0.53, distance=68
[20:55:27] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[20:55:27] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:55:27] [INFO] [LastChance] Threat detected: Bullet
[20:55:27] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(475.519, 755.8325), shooter_id=4510638409699, bullet_pos=(924.9105, 765.7275)
[20:55:27] [INFO] [Bullet] Using shooter_position, distance=449.500366210938
[20:55:27] [INFO] [Bullet] Distance to wall: 449.500366210938 (30.6073064935921% of viewport)
[20:55:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:27] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:27] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:55:27] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:55:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(653.5145, 852.9807), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:27] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[20:55:27] [INFO] [LastChance] Threat detected: @Area2D@5026
[20:55:27] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:27] [ENEMY] [Enemy10] FLANKING started: target=(673.9394, 730.7456), side=left, pos=(982.8437, 1424.067)
[20:55:27] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:55:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(663.7633, 909.8607), source=ENEMY (Enemy4), range=1469, listeners=10
[20:55:27] [ENEMY] [Enemy3] Heard gunshot at (663.7633, 909.8607), source_type=1, intensity=0.95, distance=51
[20:55:27] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[20:55:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(590.4404, 827.4415), shooter_id=4507819837452, bullet_pos=(511.8469, 799.7375)
[20:55:27] [INFO] [Bullet] Using shooter_position, distance=83.3333587646484
[20:55:27] [INFO] [Bullet] Distance to wall: 83.3333587646484 (5.67432163481963% of viewport)
[20:55:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:27] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:55:27] [INFO] [LastChance] Threat detected: Bullet
[20:55:27] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:27] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:55:27] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:55:27] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:55:27] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:55:27] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:55:27] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:55:27] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:55:27] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:55:27] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:55:27] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:55:27] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:55:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.651, 869.9621), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:27] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[20:55:27] [INFO] [LastChance] Threat detected: @Area2D@5029
[20:55:27] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:27] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:27] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:27] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:55:27] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:55:27] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:55:27] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:55:27] [ENEMY] [Enemy1] Death animation component initialized
[20:55:27] [ENEMY] [Enemy2] Death animation component initialized
[20:55:27] [ENEMY] [Enemy3] Death animation component initialized
[20:55:27] [ENEMY] [Enemy4] Death animation component initialized
[20:55:27] [ENEMY] [Enemy5] Death animation component initialized
[20:55:27] [ENEMY] [Enemy6] Death animation component initialized
[20:55:27] [ENEMY] [Enemy7] Death animation component initialized
[20:55:27] [ENEMY] [Enemy8] Death animation component initialized
[20:55:27] [ENEMY] [Enemy9] Death animation component initialized
[20:55:27] [ENEMY] [Enemy10] Death animation component initialized
[20:55:27] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:55:27] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:55:27] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:55:27] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:55:27] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:55:27] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:55:27] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:55:27] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:55:27] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:55:27] [INFO] [ScoreManager] Level started with 10 enemies
[20:55:27] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:55:27] [ENEMY] [Enemy1] Registered as sound listener
[20:55:27] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:55:27] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:55:27] [ENEMY] [Enemy2] Registered as sound listener
[20:55:27] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:55:27] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:55:27] [ENEMY] [Enemy3] Registered as sound listener
[20:55:27] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:55:27] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:55:27] [ENEMY] [Enemy4] Registered as sound listener
[20:55:27] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:55:27] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:55:27] [ENEMY] [Enemy5] Registered as sound listener
[20:55:27] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:55:27] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:55:27] [ENEMY] [Enemy6] Registered as sound listener
[20:55:27] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:55:27] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:55:27] [ENEMY] [Enemy7] Registered as sound listener
[20:55:27] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:55:27] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:55:27] [ENEMY] [Enemy8] Registered as sound listener
[20:55:27] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:55:27] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:55:27] [ENEMY] [Enemy9] Registered as sound listener
[20:55:27] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:55:27] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:55:27] [ENEMY] [Enemy10] Registered as sound listener
[20:55:27] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:55:27] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:55:27] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:55:27] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:55:27] [INFO] [LastChance] Found player: Player
[20:55:27] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:55:27] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:55:27] [INFO] [LastChance] Connected to player Died signal (C#)
[20:55:27] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:55:27] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:55:27] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:55:28] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:55:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[20:55:29] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:55:29] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:55:29] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:55:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=4703492506955, bullet_pos=(41.69983, 702.3934)
[20:55:29] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[20:55:29] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[20:55:29] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:55:29] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:55:29] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:55:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=4703492506955, bullet_pos=(518.7798, 387.4373)
[20:55:29] [INFO] [Bullet] Using shooter_position, distance=1151.49169921875
[20:55:29] [INFO] [Bullet] Distance to wall: 1151.49169921875 (78.4071872063314% of viewport)
[20:55:30] [ENEMY] [Enemy3] Hit taken, health: 1/2
[20:55:30] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:55:30] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4684, 753.8406), dir=(0.99821, -0.059798), lethal=false
[20:55:30] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:55:30] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:55:30] [INFO] [ImpactEffects] Blood effect spawned at (684.4684, 753.8406) (scale=0.9)
[20:55:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=4703492506955, bullet_pos=(335.3151, 223.8075)
[20:55:30] [INFO] [Bullet] Using shooter_position, distance=1380.77001953125
[20:55:30] [INFO] [Bullet] Distance to wall: 1380.77001953125 (94.0191696420643% of viewport)
[20:55:30] [INFO] [Bullet] Distance-based penetration chance: 36.9776354175916%
[20:55:30] [INFO] [Bullet] Penetration failed (distance roll)
[20:55:30] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:55:30] [ENEMY] [Enemy3] Hit taken, health: 0/2
[20:55:30] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:55:30] [INFO] [ImpactEffects] spawn_blood_effect called at (677.8608, 758.3505), dir=(0.996877, -0.078972), lethal=true
[20:55:30] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:55:30] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:55:30] [INFO] [ImpactEffects] Blood effect spawned at (677.8608, 758.3505) (scale=1.35)
[20:55:30] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[20:55:30] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:55:30] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[20:55:30] [INFO] [DeathAnim] Started - Angle: -4.5 deg, Index: 11
[20:55:30] [ENEMY] [Enemy3] Death animation started with hit direction: (0.996877, -0.078972)
[20:55:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 807.8333), shooter_id=4704314590916, bullet_pos=(516.5404, 799.999)
[20:55:30] [INFO] [Bullet] Using shooter_position, distance=67.0000076293945
[20:55:30] [INFO] [Bullet] Distance to wall: 67.0000076293945 (4.56215372163582% of viewport)
[20:55:30] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:55:30] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:30] [ENEMY] [Enemy3] Ragdoll activated
[20:55:30] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:55:30] [ENEMY] [Enemy10] FLANKING started: target=(644.4874, 781.811), side=left, pos=(1022.668, 1432.257)
[20:55:30] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:55:31] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:55:31] [ENEMY] [Enemy3] Death animation completed
[20:55:31] [ENEMY] [Enemy1] State: IDLE -> COMBAT
[20:55:31] [ENEMY] [Enemy2] State: IDLE -> COMBAT
[20:55:31] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:55:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(551.5612, 776.1798), shooter_id=4704314590916, bullet_pos=(725.6134, 1010.636)
[20:55:32] [INFO] [Bullet] Using shooter_position, distance=291.999847412109
[20:55:32] [INFO] [Bullet] Distance to wall: 291.999847412109 (19.8828065506637% of viewport)
[20:55:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:32] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:32] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[20:55:32] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:55:32] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:55:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(600.9349, 846.9495), shooter_id=4704314590916, bullet_pos=(645.8283, 997.3942)
[20:55:32] [INFO] [Bullet] Using shooter_position, distance=157.000091552734
[20:55:32] [INFO] [Bullet] Distance to wall: 157.000091552734 (10.6904249315373% of viewport)
[20:55:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:32] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:32] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:55:32] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[20:55:32] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[20:55:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(609.5577, 914.8777), shooter_id=4704314590916, bullet_pos=(510.3488, 966.8546)
[20:55:32] [INFO] [Bullet] Using shooter_position, distance=111.999992370605
[20:55:32] [INFO] [Bullet] Distance to wall: 111.999992370605 (7.6262854303403% of viewport)
[20:55:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:32] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:32] [ENEMY] [Enemy4] Hit taken, health: 2/3
[20:55:32] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:55:32] [INFO] [ImpactEffects] spawn_blood_effect called at (565.7098, 954.8577), dir=(-0.965193, -0.261539), lethal=false
[20:55:32] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:55:32] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:55:32] [INFO] [ImpactEffects] Wall found for blood splatter at (524, 943.5555) (dist=43 px)
[20:55:32] [INFO] [ImpactEffects] Blood effect spawned at (565.7098, 954.8577) (scale=0.9)
[20:55:33] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[20:55:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(776.3535, 978.0932), shooter_id=4704314590916, bullet_pos=(515.9253, 908.759)
[20:55:33] [INFO] [Bullet] Using shooter_position, distance=269.499725341797
[20:55:33] [INFO] [Bullet] Distance to wall: 269.499725341797 (18.3507318648199% of viewport)
[20:55:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:33] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(780.2424, 978.0932), shooter_id=4704314590916, bullet_pos=(506.4227, 876.6687)
[20:55:33] [INFO] [Bullet] Using shooter_position, distance=292.000244140625
[20:55:33] [INFO] [Bullet] Distance to wall: 292.000244140625 (19.8828335646379% of viewport)
[20:55:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:33] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:33] [ENEMY] [Enemy4] Hit taken, health: 1/3
[20:55:33] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:55:33] [INFO] [ImpactEffects] spawn_blood_effect called at (574.1088, 915.6965), dir=(-0.97429, -0.225296), lethal=false
[20:55:33] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:55:33] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:55:33] [INFO] [ImpactEffects] Wall found for blood splatter at (524, 904.1093) (dist=51 px)
[20:55:33] [INFO] [ImpactEffects] Blood effect spawned at (574.1088, 915.6965) (scale=0.9)
[20:55:34] [ENEMY] [Enemy7] Memory: medium confidence (0.71) - transitioning to PURSUING
[20:55:34] [ENEMY] [Enemy7] State: IDLE -> PURSUING
[20:55:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(780.2424, 978.0932), shooter_id=4704314590916, bullet_pos=(520.4224, 906.5124)
[20:55:34] [INFO] [Bullet] Using shooter_position, distance=269.499938964844
[20:55:34] [INFO] [Bullet] Distance to wall: 269.499938964844 (18.350746410806% of viewport)
[20:55:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:34] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:34] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:55:34] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:55:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(780.2424, 978.0932), shooter_id=4704314590916, bullet_pos=(521.6318, 842.5038)
[20:55:34] [INFO] [Bullet] Using shooter_position, distance=291.999877929688
[20:55:34] [INFO] [Bullet] Distance to wall: 291.999877929688 (19.8828086286617% of viewport)
[20:55:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:34] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:35] [ENEMY] [Enemy1] Player ammo empty state changed: false -> true
[20:55:35] [ENEMY] [Enemy2] Player ammo empty state changed: false -> true
[20:55:35] [ENEMY] [Enemy4] Player ammo empty state changed: false -> true
[20:55:35] [ENEMY] [Enemy5] Player ammo empty state changed: false -> true
[20:55:35] [ENEMY] [Enemy6] Player ammo empty state changed: false -> true
[20:55:35] [ENEMY] [Enemy7] Player ammo empty state changed: false -> true
[20:55:35] [ENEMY] [Enemy8] Player ammo empty state changed: false -> true
[20:55:35] [ENEMY] [Enemy9] Player ammo empty state changed: false -> true
[20:55:35] [ENEMY] [Enemy10] Player ammo empty state changed: false -> true
[20:55:35] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(776.9091, 978.0932), source=PLAYER (Player), range=600, listeners=9
[20:55:35] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (776.9091, 978.0932), intensity=0.01, distance=444
[20:55:35] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (776.9091, 978.0932), intensity=0.02, distance=338
[20:55:35] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
[20:55:35] [ENEMY] [Enemy10] Heard player EMPTY_CLICK at (776.9091, 978.0932), intensity=0.04, distance=248
[20:55:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=6, self=0, below_threshold=0
[20:55:35] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=622), can_see=false
[20:55:35] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=444), can_see=false
[20:55:35] [ENEMY] [Enemy2] Pursuing vulnerability sound at (776.9091, 978.0932), distance=444
[20:55:35] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[20:55:35] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1117), can_see=false
[20:55:35] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1286), can_see=false
[20:55:35] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=659), can_see=false
[20:55:35] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1218), can_see=false
[20:55:35] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1441), can_see=false
[20:55:35] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=248), can_see=false
[20:55:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(780.2424, 978.0932), shooter_id=4704314590916, bullet_pos=(509.4289, 818.1857)
[20:55:35] [INFO] [Bullet] Using shooter_position, distance=314.500183105469
[20:55:35] [INFO] [Bullet] Distance to wall: 314.500183105469 (21.4148957824936% of viewport)
[20:55:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:35] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:35] [ENEMY] [Enemy4] Pursuing vulnerability sound at (775.2424, 978.0932), distance=337
[20:55:35] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[20:55:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(560.6707, 760.6326), source=ENEMY (Enemy4), range=1469, listeners=9
[20:55:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=4
[20:55:35] [INFO] [LastChance] Threat detected: Bullet
[20:55:35] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:55:35] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:55:35] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[20:55:35] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=207), can_see=false
[20:55:35] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=546), can_see=false
[20:55:35] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=217), can_see=false
[20:55:35] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1103), can_see=false
[20:55:35] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1286), can_see=false
[20:55:35] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=683), can_see=false
[20:55:35] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1274), can_see=false
[20:55:35] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1498), can_see=false
[20:55:35] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=295), can_see=false
[20:55:35] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[20:55:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(632.4197, 870.9484), source=ENEMY (Enemy4), range=1469, listeners=9
[20:55:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=4
[20:55:35] [INFO] [LastChance] Threat detected: Bullet
[20:55:35] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:35] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:55:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:55:35] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:55:35] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:55:35] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:55:35] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:55:35] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:55:35] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:55:35] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:55:35] [INFO] [PenultimateHit] Applying saturation to 9 enemies
[20:55:35] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:55:35] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:55:35] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[20:55:35] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[20:55:35] [ENEMY] [Enemy1] Player reloading state changed: false -> true
[20:55:35] [ENEMY] [Enemy2] Player reloading state changed: false -> true
[20:55:35] [ENEMY] [Enemy4] Player reloading state changed: false -> true
[20:55:35] [ENEMY] [Enemy5] Player reloading state changed: false -> true
[20:55:35] [ENEMY] [Enemy6] Player reloading state changed: false -> true
[20:55:35] [ENEMY] [Enemy7] Player reloading state changed: false -> true
[20:55:35] [ENEMY] [Enemy8] Player reloading state changed: false -> true
[20:55:35] [ENEMY] [Enemy9] Player reloading state changed: false -> true
[20:55:35] [ENEMY] [Enemy10] Player reloading state changed: false -> true
[20:55:35] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(747.8587, 906.0005), source=PLAYER (Player), range=900, listeners=9
[20:55:35] [ENEMY] [Enemy2] Heard player RELOAD at (747.8587, 906.0005), intensity=0.06, distance=197
[20:55:35] [ENEMY] [Enemy4] Heard player RELOAD at (747.8587, 906.0005), intensity=0.21, distance=110
[20:55:35] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from RETREATING to PURSUING
[20:55:35] [ENEMY] [Enemy10] Heard player RELOAD at (747.8587, 906.0005), intensity=0.03, distance=315
[20:55:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=2
[20:55:35] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[20:55:36] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
[20:55:36] [ENEMY] [Enemy1] Player reloading state changed: true -> false
[20:55:36] [ENEMY] [Enemy2] Player reloading state changed: true -> false
[20:55:36] [ENEMY] [Enemy4] Player reloading state changed: true -> false
[20:55:36] [ENEMY] [Enemy5] Player reloading state changed: true -> false
[20:55:36] [ENEMY] [Enemy6] Player reloading state changed: true -> false
[20:55:36] [ENEMY] [Enemy7] Player reloading state changed: true -> false
[20:55:36] [ENEMY] [Enemy8] Player reloading state changed: true -> false
[20:55:36] [ENEMY] [Enemy9] Player reloading state changed: true -> false
[20:55:36] [ENEMY] [Enemy10] Player reloading state changed: true -> false
[20:55:36] [ENEMY] [Enemy1] Player ammo empty state changed: true -> false
[20:55:36] [ENEMY] [Enemy2] Player ammo empty state changed: true -> false
[20:55:36] [ENEMY] [Enemy4] Player ammo empty state changed: true -> false
[20:55:36] [ENEMY] [Enemy5] Player ammo empty state changed: true -> false
[20:55:36] [ENEMY] [Enemy6] Player ammo empty state changed: true -> false
[20:55:36] [ENEMY] [Enemy7] Player ammo empty state changed: true -> false
[20:55:36] [ENEMY] [Enemy8] Player ammo empty state changed: true -> false
[20:55:36] [ENEMY] [Enemy9] Player ammo empty state changed: true -> false
[20:55:36] [ENEMY] [Enemy10] Player ammo empty state changed: true -> false
[20:55:36] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[20:55:36] [ENEMY] [Enemy2] Pursuing vulnerability sound at (747.8587, 906.0005), distance=186
[20:55:36] [ENEMY] [Enemy4] Pursuing vulnerability sound at (747.8587, 906.0005), distance=102
[20:55:36] [INFO] [Player.Reload.Anim] LeftArm: pos=(3.5639849, 5.1429596), target=(10, 6), base=(10, 6)
[20:55:36] [INFO] [Player.Reload.Anim] RightArm: pos=(2.0136826, 6.356189), target=(2, 6), base=(2, 6)
[20:55:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:55:36] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:55:36] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:55:36] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:55:36] [ENEMY] [Enemy1] Death animation component initialized
[20:55:36] [ENEMY] [Enemy2] Death animation component initialized
[20:55:36] [ENEMY] [Enemy3] Death animation component initialized
[20:55:36] [ENEMY] [Enemy4] Death animation component initialized
[20:55:36] [ENEMY] [Enemy5] Death animation component initialized
[20:55:36] [ENEMY] [Enemy6] Death animation component initialized
[20:55:36] [ENEMY] [Enemy7] Death animation component initialized
[20:55:36] [ENEMY] [Enemy8] Death animation component initialized
[20:55:36] [ENEMY] [Enemy9] Death animation component initialized
[20:55:36] [ENEMY] [Enemy10] Death animation component initialized
[20:55:36] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:55:36] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:55:36] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:55:36] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:55:36] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:55:36] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:55:36] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:55:36] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:55:36] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:55:36] [INFO] [ScoreManager] Level started with 10 enemies
[20:55:36] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[20:55:36] [ENEMY] [Enemy1] Registered as sound listener
[20:55:36] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:55:36] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[20:55:36] [ENEMY] [Enemy2] Registered as sound listener
[20:55:36] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:55:36] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[20:55:36] [ENEMY] [Enemy3] Registered as sound listener
[20:55:36] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:55:36] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[20:55:36] [ENEMY] [Enemy4] Registered as sound listener
[20:55:36] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:55:36] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[20:55:36] [ENEMY] [Enemy5] Registered as sound listener
[20:55:36] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:55:36] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[20:55:36] [ENEMY] [Enemy6] Registered as sound listener
[20:55:36] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:55:36] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[20:55:36] [ENEMY] [Enemy7] Registered as sound listener
[20:55:36] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:55:36] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[20:55:36] [ENEMY] [Enemy8] Registered as sound listener
[20:55:36] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:55:36] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[20:55:36] [ENEMY] [Enemy9] Registered as sound listener
[20:55:36] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:55:36] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[20:55:36] [ENEMY] [Enemy10] Registered as sound listener
[20:55:36] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:55:36] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:55:36] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:55:36] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:55:36] [INFO] [LastChance] Found player: Player
[20:55:36] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:55:36] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:55:36] [INFO] [LastChance] Connected to player Died signal (C#)
[20:55:36] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:55:36] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:55:36] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:55:37] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:55:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=19
[20:55:37] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[20:55:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:55:37] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:55:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=5227411408492, bullet_pos=(41.69983, 702.3934)
[20:55:38] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[20:55:38] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[20:55:38] [INFO] [Bullet] Distance-based penetration chance: 50.6761141644985%
[20:55:38] [INFO] [Bullet] Starting wall penetration at (41.69983, 702.3934)
[20:55:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.508674621582
[20:55:38] [INFO] [Bullet] Body exited signal received for penetrating body
[20:55:38] [INFO] [Bullet] Exiting penetration at (4.46851, 674.2579) after traveling 41.6666717529297 pixels through wall
[20:55:38] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:55:38] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:55:38] [ENEMY] [Enemy3] Hit taken, health: 3/4
[20:55:38] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:55:38] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(0.995167, -0.098191), lethal=false
[20:55:38] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:55:38] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:55:38] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=0.9)
[20:55:38] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:55:38] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:55:38] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:55:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(678.7762, 748.33), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:38] [ENEMY] [Enemy2] Heard gunshot at (678.7762, 748.33), source_type=1, intensity=0.02, distance=342
[20:55:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:55:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(672.1398, 739.9792), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:55:38] [INFO] [LastChance] Threat detected: @Area2D@5589
[20:55:38] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:38] [ENEMY] [Enemy3] Hit taken, health: 2/4
[20:55:38] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:55:38] [INFO] [ImpactEffects] spawn_blood_effect called at (667.1624, 733.7161), dir=(0.982651, -0.185463), lethal=false
[20:55:38] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:55:38] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:55:38] [INFO] [ImpactEffects] Blood effect spawned at (667.1624, 733.7161) (scale=0.9)
[20:55:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(665.5033, 731.6284), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:55:38] [INFO] [LastChance] Threat detected: @Area2D@5592
[20:55:38] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:38] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:55:38] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:55:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(658.8668, 723.2775), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:55:39] [INFO] [LastChance] Threat detected: @Area2D@5593
[20:55:39] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:39] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:55:39] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:55:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(611.5176, 758.6682), shooter_id=5225414919824, bullet_pos=(54.02388, 930.3613)
[20:55:39] [INFO] [Bullet] Using shooter_position, distance=583.333374023438
[20:55:39] [INFO] [Bullet] Distance to wall: 583.333374023438 (39.7202420927463% of viewport)
[20:55:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:39] [INFO] [Bullet] Starting wall penetration at (54.02388, 930.3613)
[20:55:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.6219902038574
[20:55:39] [INFO] [Bullet] Body exited signal received for penetrating body
[20:55:39] [INFO] [Bullet] Exiting penetration at (9.424385, 944.0967) after traveling 41.6666679382324 pixels through wall
[20:55:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:55:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(593.3695, 741.7356), shooter_id=5225414919824, bullet_pos=(51.90773, 726.8361)
[20:55:39] [INFO] [Bullet] Using shooter_position, distance=541.666748046875
[20:55:39] [INFO] [Bullet] Distance to wall: 541.666748046875 (36.883084911833% of viewport)
[20:55:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:39] [INFO] [Bullet] Starting wall penetration at (51.90773, 726.8361)
[20:55:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.7514038085938
[20:55:39] [INFO] [Bullet] Body exited signal received for penetrating body
[20:55:39] [INFO] [Bullet] Exiting penetration at (5.25872, 725.5524) after traveling 41.6666679382324 pixels through wall
[20:55:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:55:39] [ENEMY] [Enemy1] Memory: medium confidence (0.58) - transitioning to PURSUING
[20:55:39] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[20:55:39] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:55:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 756.9444), shooter_id=5228233492083, bullet_pos=(914.8772, 675.2535)
[20:55:39] [INFO] [Bullet] Using shooter_position, distance=472.000244140625
[20:55:39] [INFO] [Bullet] Distance to wall: 472.000244140625 (32.1393645554518% of viewport)
[20:55:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:39] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:39] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:55:39] [ENEMY] [Enemy10] FLANKING started: target=(646.7782, 721.1905), side=left, pos=(1022.668, 1432.257)
[20:55:39] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:55:39] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:55:39] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:39] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:39] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:55:39] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:55:39] [ENEMY] [Enemy1] Death animation component initialized
[20:55:39] [ENEMY] [Enemy2] Death animation component initialized
[20:55:39] [ENEMY] [Enemy3] Death animation component initialized
[20:55:39] [ENEMY] [Enemy4] Death animation component initialized
[20:55:39] [ENEMY] [Enemy5] Death animation component initialized
[20:55:39] [ENEMY] [Enemy6] Death animation component initialized
[20:55:39] [ENEMY] [Enemy7] Death animation component initialized
[20:55:39] [ENEMY] [Enemy8] Death animation component initialized
[20:55:39] [ENEMY] [Enemy9] Death animation component initialized
[20:55:39] [ENEMY] [Enemy10] Death animation component initialized
[20:55:39] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:55:39] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:55:39] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:55:39] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:55:39] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:55:39] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:55:39] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:55:39] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:55:39] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:55:39] [INFO] [ScoreManager] Level started with 10 enemies
[20:55:39] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:55:39] [ENEMY] [Enemy1] Registered as sound listener
[20:55:39] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:55:39] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:55:39] [ENEMY] [Enemy2] Registered as sound listener
[20:55:39] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:55:39] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:55:39] [ENEMY] [Enemy3] Registered as sound listener
[20:55:39] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:55:39] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:55:39] [ENEMY] [Enemy4] Registered as sound listener
[20:55:39] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:55:39] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:55:39] [ENEMY] [Enemy5] Registered as sound listener
[20:55:39] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:55:39] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:55:39] [ENEMY] [Enemy6] Registered as sound listener
[20:55:39] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:55:39] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:55:39] [ENEMY] [Enemy7] Registered as sound listener
[20:55:39] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:55:39] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:55:39] [ENEMY] [Enemy8] Registered as sound listener
[20:55:39] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:55:39] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:55:39] [ENEMY] [Enemy9] Registered as sound listener
[20:55:39] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:55:39] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:55:39] [ENEMY] [Enemy10] Registered as sound listener
[20:55:39] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:55:39] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:55:39] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:55:39] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:55:39] [INFO] [LastChance] Found player: Player
[20:55:39] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:55:39] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:55:39] [INFO] [LastChance] Connected to player Died signal (C#)
[20:55:39] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:55:39] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:55:39] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:55:40] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:55:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[20:55:40] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:55:40] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:55:41] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:55:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=5414779356850, bullet_pos=(41.69983, 702.3934)
[20:55:41] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[20:55:41] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[20:55:41] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:55:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=5414779356850, bullet_pos=(313.1089, 467.1534)
[20:55:41] [INFO] [Bullet] Using shooter_position, distance=1186.81408691406
[20:55:41] [INFO] [Bullet] Distance to wall: 1186.81408691406 (80.8123535366489% of viewport)
[20:55:41] [ENEMY] [Enemy2] Hit taken, health: 1/2
[20:55:41] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[20:55:41] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(0.677781, 0.735264), lethal=false
[20:55:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:55:41] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:55:41] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[20:55:41] [ENEMY] [Enemy3] Hit taken, health: 2/3
[20:55:41] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:55:41] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4577, 753.7969), dir=(0.993835, -0.110866), lethal=false
[20:55:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:55:41] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:55:41] [INFO] [ImpactEffects] Blood effect spawned at (684.4577, 753.7969) (scale=0.9)
[20:55:41] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:55:41] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:55:41] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:55:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(676.6179, 752.2041), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:41] [ENEMY] [Enemy2] Heard gunshot at (676.6179, 752.2041), source_type=1, intensity=0.02, distance=343
[20:55:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:55:41] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:55:41] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:55:41] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:55:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(667.084, 747.9495), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:55:41] [INFO] [LastChance] Threat detected: @Area2D@5861
[20:55:41] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:41] [ENEMY] [Enemy3] Hit taken, health: 1/3
[20:55:41] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:55:41] [INFO] [ImpactEffects] spawn_blood_effect called at (660.6017, 743.2612), dir=(0.98399, -0.178223), lethal=false
[20:55:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:55:41] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:55:41] [INFO] [ImpactEffects] Blood effect spawned at (660.6017, 743.2612) (scale=0.9)
[20:55:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(658.4409, 741.6985), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:55:42] [INFO] [LastChance] Threat detected: @Area2D@5864
[20:55:42] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:42] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:55:42] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:55:42] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:55:42] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:55:42] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:55:42] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:55:42] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:55:42] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:55:42] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:55:42] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:55:42] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:55:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(649.7979, 735.4475), source=ENEMY (Enemy3), range=1469, listeners=10
[20:55:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:55:42] [INFO] [LastChance] Threat detected: @Area2D@5866
[20:55:42] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(609.7209, 764.6694), shooter_id=5412782868696, bullet_pos=(65.83057, 908.16)
[20:55:42] [INFO] [Bullet] Using shooter_position, distance=562.5
[20:55:42] [INFO] [Bullet] Distance to wall: 562.5 (38.3016593462937% of viewport)
[20:55:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:42] [INFO] [Bullet] Starting wall penetration at (65.83057, 908.16)
[20:55:42] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:55:42] [INFO] [Bullet] Exiting penetration at (56.96718, 910.4983) after traveling 4.16666698455811 pixels through wall
[20:55:42] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:55:42] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:55:42] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:55:42] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:55:42] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:55:42] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:55:42] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[20:55:42] [INFO] [LastChance] Player died
[20:55:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(600.4843, 761.9167), shooter_id=5412782868696, bullet_pos=(63.52974, 833.2083)
[20:55:42] [INFO] [Bullet] Using shooter_position, distance=541.666564941406
[20:55:42] [INFO] [Bullet] Distance to wall: 541.666564941406 (36.883072443845% of viewport)
[20:55:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:42] [ENEMY] [Enemy1] Memory: medium confidence (0.58) - transitioning to PURSUING
[20:55:42] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[20:55:42] [ENEMY] [Enemy10] FLANKING started: target=(646.4817, 730.5955), side=left, pos=(1022.668, 1432.257)
[20:55:42] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:55:42] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:55:43] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:55:43] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:43] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:43] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:55:43] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:55:43] [ENEMY] [Enemy1] Death animation component initialized
[20:55:43] [ENEMY] [Enemy2] Death animation component initialized
[20:55:43] [ENEMY] [Enemy3] Death animation component initialized
[20:55:43] [ENEMY] [Enemy4] Death animation component initialized
[20:55:43] [ENEMY] [Enemy5] Death animation component initialized
[20:55:43] [ENEMY] [Enemy6] Death animation component initialized
[20:55:43] [ENEMY] [Enemy7] Death animation component initialized
[20:55:43] [ENEMY] [Enemy8] Death animation component initialized
[20:55:43] [ENEMY] [Enemy9] Death animation component initialized
[20:55:43] [ENEMY] [Enemy10] Death animation component initialized
[20:55:43] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:55:43] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:55:43] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:55:43] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:55:43] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:55:43] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:55:43] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:55:43] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:55:43] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:55:43] [INFO] [ScoreManager] Level started with 10 enemies
[20:55:43] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:55:43] [ENEMY] [Enemy1] Registered as sound listener
[20:55:43] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:55:43] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:55:43] [ENEMY] [Enemy2] Registered as sound listener
[20:55:43] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:55:43] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:55:43] [ENEMY] [Enemy3] Registered as sound listener
[20:55:43] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:55:43] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:55:43] [ENEMY] [Enemy4] Registered as sound listener
[20:55:43] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:55:43] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:55:43] [ENEMY] [Enemy5] Registered as sound listener
[20:55:43] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:55:43] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:55:43] [ENEMY] [Enemy6] Registered as sound listener
[20:55:43] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:55:43] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:55:43] [ENEMY] [Enemy7] Registered as sound listener
[20:55:43] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:55:43] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:55:43] [ENEMY] [Enemy8] Registered as sound listener
[20:55:43] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:55:43] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:55:43] [ENEMY] [Enemy9] Registered as sound listener
[20:55:43] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:55:43] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:55:43] [ENEMY] [Enemy10] Registered as sound listener
[20:55:43] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:55:43] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:55:43] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:55:43] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:55:43] [INFO] [LastChance] Found player: Player
[20:55:43] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:55:43] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:55:43] [INFO] [LastChance] Connected to player Died signal (C#)
[20:55:43] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:55:43] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:55:43] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:55:44] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:55:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(851.7794, 1372.336), shooter_id=5621877311492, bullet_pos=(910.6445, 1404.335)
[20:55:44] [INFO] [Bullet] Using shooter_position, distance=67
[20:55:44] [INFO] [Bullet] Distance to wall: 67 (4.56215320213631% of viewport)
[20:55:44] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:55:44] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1111.74, 1538.306), source=ENEMY (Enemy10), range=1469, listeners=20
[20:55:45] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:55:45] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:55:45] [INFO] [LastChance] Threat detected: Bullet
[20:55:45] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:55:45] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:55:45] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:55:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1111.74, 1538.306), source=ENEMY (Enemy10), range=1469, listeners=10
[20:55:45] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:55:45] [INFO] [LastChance] Threat detected: Bullet
[20:55:45] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:55:45] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:55:45] [ENEMY] [Enemy10] Hit taken, health: 1/2
[20:55:45] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:55:45] [INFO] [ImpactEffects] spawn_blood_effect called at (1124.792, 1560.945), dir=(0.873432, 0.486947), lethal=false
[20:55:45] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:55:45] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:55:45] [INFO] [ImpactEffects] Blood effect spawned at (1124.792, 1560.945) (scale=0.9)
[20:55:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1124.792, 1560.945), source=ENEMY (Enemy10), range=1469, listeners=10
[20:55:45] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:55:45] [INFO] [LastChance] Threat detected: Bullet
[20:55:45] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(921.2298, 1378.61), shooter_id=5621877311492, bullet_pos=(1500.911, 1723.457)
[20:55:45] [INFO] [Bullet] Using shooter_position, distance=674.499694824219
[20:55:45] [INFO] [Bullet] Distance to wall: 674.499694824219 (45.9279245161534% of viewport)
[20:55:45] [INFO] [Bullet] Distance-based penetration chance: 93.0840880644877%
[20:55:45] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:55:45] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:55:45] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:55:45] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:55:45] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:55:45] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:55:45] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:55:45] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:55:45] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:55:45] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:55:45] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:55:49] [INFO] [PenultimateHit] Effect duration expired after 3.89 real seconds
[20:55:49] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:55:49] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:55:49] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[20:55:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1148.101, 1601.376), source=ENEMY (Enemy10), range=1469, listeners=10
[20:55:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:55:49] [INFO] [LastChance] Threat detected: Bullet
[20:55:49] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(931.717, 1515.719), shooter_id=5621877311492, bullet_pos=(1156.531, 1638.173)
[20:55:49] [INFO] [Bullet] Using shooter_position, distance=256.000244140625
[20:55:49] [INFO] [Bullet] Distance to wall: 256.000244140625 (17.4315273664751% of viewport)
[20:55:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:49] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1160.346, 1578.289), source=ENEMY (Enemy10), range=1469, listeners=10
[20:55:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:55:49] [INFO] [LastChance] Threat detected: @Area2D@6136
[20:55:49] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:55:49] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:55:49] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:55:49] [INFO] [LastChance] Player died
[20:55:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1081.304, 1587.368), shooter_id=5621055227910, bullet_pos=(310.3356, 1407.522)
[20:55:50] [INFO] [Bullet] Using shooter_position, distance=791.666748046875
[20:55:50] [INFO] [Bullet] Distance to wall: 791.666748046875 (53.9060446212969% of viewport)
[20:55:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1189.051, 1579.51), source=ENEMY (Enemy10), range=1469, listeners=10
[20:55:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:55:50] [INFO] [LastChance] Threat detected: @Area2D@6138
[20:55:50] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1081.304, 1587.368), shooter_id=5621055227910, bullet_pos=(61.73056, 1454.024)
[20:55:50] [INFO] [Bullet] Using shooter_position, distance=1028.255859375
[20:55:50] [INFO] [Bullet] Distance to wall: 1028.255859375 (70.015832260643% of viewport)
[20:55:50] [INFO] [Bullet] Distance-based penetration chance: 64.9815290292498%
[20:55:50] [INFO] [Bullet] Penetration failed (distance roll)
[20:55:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:50] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:55:50] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:55:50] [ENEMY] [Enemy1] Death animation component initialized
[20:55:50] [ENEMY] [Enemy2] Death animation component initialized
[20:55:50] [ENEMY] [Enemy3] Death animation component initialized
[20:55:50] [ENEMY] [Enemy4] Death animation component initialized
[20:55:50] [ENEMY] [Enemy5] Death animation component initialized
[20:55:50] [ENEMY] [Enemy6] Death animation component initialized
[20:55:50] [ENEMY] [Enemy7] Death animation component initialized
[20:55:50] [ENEMY] [Enemy8] Death animation component initialized
[20:55:50] [ENEMY] [Enemy9] Death animation component initialized
[20:55:50] [ENEMY] [Enemy10] Death animation component initialized
[20:55:50] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:55:50] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:55:50] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:55:50] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:55:50] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:55:50] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:55:50] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:55:50] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:55:50] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:55:50] [INFO] [ScoreManager] Level started with 10 enemies
[20:55:50] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:55:50] [ENEMY] [Enemy1] Registered as sound listener
[20:55:50] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:55:50] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:55:50] [ENEMY] [Enemy2] Registered as sound listener
[20:55:50] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:55:50] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:55:50] [ENEMY] [Enemy3] Registered as sound listener
[20:55:50] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:55:50] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:55:50] [ENEMY] [Enemy4] Registered as sound listener
[20:55:50] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:55:50] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:55:50] [ENEMY] [Enemy5] Registered as sound listener
[20:55:50] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:55:50] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:55:50] [ENEMY] [Enemy6] Registered as sound listener
[20:55:50] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:55:50] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:55:50] [ENEMY] [Enemy7] Registered as sound listener
[20:55:50] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:55:50] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:55:50] [ENEMY] [Enemy8] Registered as sound listener
[20:55:50] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:55:50] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:55:50] [ENEMY] [Enemy9] Registered as sound listener
[20:55:50] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:55:50] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:55:50] [ENEMY] [Enemy10] Registered as sound listener
[20:55:50] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:55:50] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:55:50] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:55:50] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:55:50] [INFO] [LastChance] Found player: Player
[20:55:50] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:55:50] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:55:50] [INFO] [LastChance] Connected to player Died signal (C#)
[20:55:50] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:55:50] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:55:50] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:55:52] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:55:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1117.724, 1543.725), source=ENEMY (Enemy10), range=1469, listeners=20
[20:55:52] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:55:52] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:55:52] [INFO] [LastChance] Threat detected: Bullet
[20:55:52] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:52] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:55:52] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:55:52] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:55:52] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:55:52] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:55:52] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:55:52] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:55:52] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:55:52] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:55:52] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:55:52] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:55:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1117.724, 1543.725), source=ENEMY (Enemy10), range=1469, listeners=10
[20:55:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:55:53] [INFO] [LastChance] Threat detected: Bullet
[20:55:53] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:53] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:55:53] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:55:53] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:55:53] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:55:53] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:55:53] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[20:55:53] [INFO] [LastChance] Player died
[20:55:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1117.724, 1543.725), source=ENEMY (Enemy10), range=1469, listeners=10
[20:55:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:55:53] [INFO] [LastChance] Threat detected: Bullet
[20:55:53] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:53] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:55:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1130.976, 1556.872), source=ENEMY (Enemy10), range=1469, listeners=10
[20:55:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:55:53] [INFO] [LastChance] Threat detected: Bullet
[20:55:53] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(945.5941, 1420.574), shooter_id=5875766922030, bullet_pos=(1490.755, 1655.185)
[20:55:53] [INFO] [Bullet] Using shooter_position, distance=593.5
[20:55:53] [INFO] [Bullet] Distance to wall: 593.5 (40.4125063502672% of viewport)
[20:55:53] [INFO] [Bullet] Distance-based penetration chance: 99.518742591355%
[20:55:53] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1149.528, 1575.278), source=ENEMY (Enemy10), range=1469, listeners=10
[20:55:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[20:55:53] [INFO] [LastChance] Threat detected: Bullet
[20:55:53] [INFO] [LastChance] Not in hard mode - effect disabled
[20:55:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:55:53] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:53] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:53] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:55:53] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:55:53] [ENEMY] [Enemy1] Death animation component initialized
[20:55:53] [ENEMY] [Enemy2] Death animation component initialized
[20:55:53] [ENEMY] [Enemy3] Death animation component initialized
[20:55:53] [ENEMY] [Enemy4] Death animation component initialized
[20:55:53] [ENEMY] [Enemy5] Death animation component initialized
[20:55:53] [ENEMY] [Enemy6] Death animation component initialized
[20:55:53] [ENEMY] [Enemy7] Death animation component initialized
[20:55:53] [ENEMY] [Enemy8] Death animation component initialized
[20:55:53] [ENEMY] [Enemy9] Death animation component initialized
[20:55:53] [ENEMY] [Enemy10] Death animation component initialized
[20:55:53] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:55:53] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:55:53] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:55:53] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:55:53] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:55:53] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:55:53] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:55:53] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:55:53] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:55:53] [INFO] [ScoreManager] Level started with 10 enemies
[20:55:53] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:55:53] [ENEMY] [Enemy1] Registered as sound listener
[20:55:53] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:55:53] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:55:53] [ENEMY] [Enemy2] Registered as sound listener
[20:55:53] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:55:53] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:55:53] [ENEMY] [Enemy3] Registered as sound listener
[20:55:53] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:55:53] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:55:53] [ENEMY] [Enemy4] Registered as sound listener
[20:55:53] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:55:53] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:55:53] [ENEMY] [Enemy5] Registered as sound listener
[20:55:53] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:55:53] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:55:53] [ENEMY] [Enemy6] Registered as sound listener
[20:55:53] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:55:53] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:55:53] [ENEMY] [Enemy7] Registered as sound listener
[20:55:53] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:55:53] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:55:53] [ENEMY] [Enemy8] Registered as sound listener
[20:55:53] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:55:53] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:55:53] [ENEMY] [Enemy9] Registered as sound listener
[20:55:53] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:55:53] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:55:53] [ENEMY] [Enemy10] Registered as sound listener
[20:55:53] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:55:53] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:55:53] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:55:53] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:55:53] [INFO] [LastChance] Found player: Player
[20:55:53] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:55:53] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:55:53] [INFO] [LastChance] Connected to player Died signal (C#)
[20:55:53] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:55:53] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:55:53] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:55:54] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:55:55] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:55:55] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[20:55:55] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[20:55:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(878.1123, 1342.638), shooter_id=6079459100729, bullet_pos=(1147.251, 1674.14)
[20:55:55] [INFO] [Bullet] Using shooter_position, distance=426.999877929688
[20:55:55] [INFO] [Bullet] Distance to wall: 426.999877929688 (29.0752068717722% of viewport)
[20:55:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:55] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:55] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:55:55] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:55:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(965.8693, 1453.09), shooter_id=6079459100729, bullet_pos=(1165.979, 1633.606)
[20:55:56] [INFO] [Bullet] Using shooter_position, distance=269.499847412109
[20:55:56] [INFO] [Bullet] Distance to wall: 269.499847412109 (18.350740176812% of viewport)
[20:55:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:56] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:56] [ENEMY] [Enemy3] Memory: medium confidence (0.76) - transitioning to PURSUING
[20:55:56] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[20:55:56] [ENEMY] [Enemy2] Memory: medium confidence (0.64) - transitioning to PURSUING
[20:55:56] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[20:55:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1013.556, 1572.355), shooter_id=6079459100729, bullet_pos=(1269.974, 1390.256)
[20:55:57] [INFO] [Bullet] Using shooter_position, distance=314.500061035156
[20:55:57] [INFO] [Bullet] Distance to wall: 314.500061035156 (21.4148874705015% of viewport)
[20:55:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:57] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:57] [ENEMY] [Enemy4] FLANKING started: target=(819.0117, 1525.958), side=left, pos=(831.4612, 960.9916)
[20:55:57] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[20:55:57] [ENEMY] [Enemy10] Hit taken, health: 2/3
[20:55:57] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:55:57] [INFO] [ImpactEffects] spawn_blood_effect called at (1201.119, 1425.071), dir=(0.751909, -0.659266), lethal=false
[20:55:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:55:57] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:55:57] [INFO] [ImpactEffects] Wall found for blood splatter at (1229.713, 1400) (dist=38 px)
[20:55:57] [INFO] [ImpactEffects] Blood effect spawned at (1201.119, 1425.071) (scale=0.9)
[20:55:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1013.556, 1572.355), shooter_id=6079459100729, bullet_pos=(1241.396, 1389.727)
[20:55:58] [INFO] [Bullet] Using shooter_position, distance=292.000122070313
[20:55:58] [INFO] [Bullet] Distance to wall: 292.000122070313 (19.8828252526458% of viewport)
[20:55:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:55:58] [INFO] [Bullet] Caliber cannot penetrate walls
[20:55:58] [ENEMY] [Enemy10] Hit taken, health: 1/3
[20:55:58] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[20:55:58] [INFO] [ImpactEffects] spawn_blood_effect called at (1216.074, 1443.669), dir=(0.85098, -0.525198), lethal=false
[20:55:58] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:55:58] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:55:58] [INFO] [ImpactEffects] Wall found for blood splatter at (1286.831, 1400) (dist=83 px)
[20:55:58] [INFO] [ImpactEffects] Blood effect spawned at (1216.074, 1443.669) (scale=0.9)
[20:55:58] [ENEMY] [Enemy2] FLANKING started: target=(813.6187, 1577.371), side=left, pos=(449.5102, 649.6424)
[20:55:58] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[20:55:59] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:59] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:55:59] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:55:59] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:55:59] [ENEMY] [Enemy1] Death animation component initialized
[20:55:59] [ENEMY] [Enemy2] Death animation component initialized
[20:55:59] [ENEMY] [Enemy3] Death animation component initialized
[20:55:59] [ENEMY] [Enemy4] Death animation component initialized
[20:55:59] [ENEMY] [Enemy5] Death animation component initialized
[20:55:59] [ENEMY] [Enemy6] Death animation component initialized
[20:55:59] [ENEMY] [Enemy7] Death animation component initialized
[20:55:59] [ENEMY] [Enemy8] Death animation component initialized
[20:55:59] [ENEMY] [Enemy9] Death animation component initialized
[20:55:59] [ENEMY] [Enemy10] Death animation component initialized
[20:55:59] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:55:59] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:55:59] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:55:59] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:55:59] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:55:59] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:55:59] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:55:59] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:55:59] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:55:59] [INFO] [ScoreManager] Level started with 10 enemies
[20:55:59] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:55:59] [ENEMY] [Enemy1] Registered as sound listener
[20:55:59] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:55:59] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:55:59] [ENEMY] [Enemy2] Registered as sound listener
[20:55:59] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:55:59] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:55:59] [ENEMY] [Enemy3] Registered as sound listener
[20:55:59] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:55:59] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:55:59] [ENEMY] [Enemy4] Registered as sound listener
[20:55:59] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:55:59] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:55:59] [ENEMY] [Enemy5] Registered as sound listener
[20:55:59] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:55:59] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:55:59] [ENEMY] [Enemy6] Registered as sound listener
[20:55:59] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:55:59] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:55:59] [ENEMY] [Enemy7] Registered as sound listener
[20:55:59] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:55:59] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:55:59] [ENEMY] [Enemy8] Registered as sound listener
[20:55:59] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:55:59] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:55:59] [ENEMY] [Enemy9] Registered as sound listener
[20:55:59] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:55:59] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:55:59] [ENEMY] [Enemy10] Registered as sound listener
[20:55:59] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:55:59] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:55:59] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:55:59] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:55:59] [INFO] [LastChance] Found player: Player
[20:55:59] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:55:59] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:55:59] [INFO] [LastChance] Connected to player Died signal (C#)
[20:55:59] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:55:59] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:55:59] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:55:59] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:56:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=30
[20:56:00] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[20:56:00] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:00] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:00] [ENEMY] [Enemy4] Memory: high confidence (0.87) - transitioning to PURSUING
[20:56:00] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:56:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=6460738111095, bullet_pos=(41.69983, 702.3934)
[20:56:00] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[20:56:00] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[20:56:01] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:56:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=6460738111095, bullet_pos=(517.3488, 325.1557)
[20:56:01] [INFO] [Bullet] Using shooter_position, distance=1208.794921875
[20:56:01] [INFO] [Bullet] Distance to wall: 1208.794921875 (82.3090690083305% of viewport)
[20:56:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=6460738111095, bullet_pos=(266.9103, 57.91122)
[20:56:01] [INFO] [Bullet] Using shooter_position, distance=1559.15026855469
[20:56:01] [INFO] [Bullet] Distance to wall: 1559.15026855469 (106.165408810425% of viewport)
[20:56:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=6460738111095, bullet_pos=(64.47266, 260.609)
[20:56:01] [INFO] [Bullet] Using shooter_position, distance=1501.84582519531
[20:56:01] [INFO] [Bullet] Distance to wall: 1501.84582519531 (102.263443888505% of viewport)
[20:56:01] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:56:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.9333, 777.6889), shooter_id=6461560195538, bullet_pos=(910.8441, 786.4249)
[20:56:01] [INFO] [Bullet] Using shooter_position, distance=427.000152587891
[20:56:01] [INFO] [Bullet] Distance to wall: 427.000152587891 (29.0752255737543% of viewport)
[20:56:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:01] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:01] [ENEMY] [Enemy3] Hit taken, health: 1/2
[20:56:01] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:01] [INFO] [ImpactEffects] spawn_blood_effect called at (691.3316, 757.0922), dir=(0.997045, -0.076819), lethal=false
[20:56:01] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:01] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:01] [INFO] [ImpactEffects] Blood effect spawned at (691.3316, 757.0922) (scale=0.9)
[20:56:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=6460738111095, bullet_pos=(243.969, 426.2607)
[20:56:01] [INFO] [Bullet] Using shooter_position, distance=1260.78369140625
[20:56:01] [INFO] [Bullet] Distance to wall: 1260.78369140625 (85.8490799246308% of viewport)
[20:56:01] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:56:01] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:56:01] [ENEMY] [Enemy1] Hit taken, health: 3/4
[20:56:01] [ENEMY] [Enemy1] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:01] [INFO] [ImpactEffects] spawn_blood_effect called at (300, 350), dir=(0.792427, -0.609967), lethal=false
[20:56:01] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:01] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:01] [INFO] [ImpactEffects] Blood effect spawned at (300, 350) (scale=1)
[20:56:01] [ENEMY] [Enemy3] Hit taken, health: 0/2
[20:56:01] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:01] [INFO] [ImpactEffects] spawn_blood_effect called at (659.548, 783.097), dir=(0.996776, -0.08024), lethal=true
[20:56:01] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:01] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:56:01] [INFO] [ImpactEffects] Blood effect spawned at (659.548, 783.097) (scale=1.35)
[20:56:01] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[20:56:01] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:56:01] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[20:56:01] [INFO] [DeathAnim] Started - Angle: -4.6 deg, Index: 11
[20:56:01] [ENEMY] [Enemy3] Death animation started with hit direction: (0.996776, -0.08024)
[20:56:02] [ENEMY] [Enemy3] Ragdoll activated
[20:56:02] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:56:02] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:56:02] [ENEMY] [Enemy1] State: IDLE -> COMBAT
[20:56:02] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[20:56:02] [ENEMY] [Enemy2] State: IDLE -> COMBAT
[20:56:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(300, 358), source=ENEMY (Enemy1), range=1469, listeners=9
[20:56:03] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
[20:56:03] [ENEMY] [Enemy4] Hit taken, health: 2/3
[20:56:03] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:03] [INFO] [ImpactEffects] spawn_blood_effect called at (565.1336, 960.3762), dir=(0.251414, 0.96788), lethal=false
[20:56:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:03] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:03] [INFO] [ImpactEffects] Wall found for blood splatter at (575.4262, 1000) (dist=40 px)
[20:56:03] [INFO] [ImpactEffects] Blood effect spawned at (565.1336, 960.3762) (scale=0.9)
[20:56:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(300, 368.6666), source=ENEMY (Enemy1), range=1469, listeners=9
[20:56:03] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
[20:56:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(332.2941, 428.5639), shooter_id=6458171197874, bullet_pos=(332.2941, 428.5639)
[20:56:03] [INFO] [Bullet] Using shooter_position, distance=0
[20:56:03] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[20:56:03] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:56:03] [INFO] [Bullet] Starting wall penetration at (332.2941, 428.5639)
[20:56:03] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35.1721420288086
[20:56:03] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:03] [INFO] [Bullet] Exiting penetration at (363.5794, 463.1906) after traveling 41.6666679382324 pixels through wall
[20:56:03] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(329.8229, 419.1653), shooter_id=6458171197874, bullet_pos=(505.9409, 596.5982)
[20:56:03] [INFO] [Bullet] Using shooter_position, distance=249.999984741211
[20:56:03] [INFO] [Bullet] Distance to wall: 249.999984741211 (17.0229586704648% of viewport)
[20:56:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:03] [INFO] [Bullet] Starting wall penetration at (505.9409, 596.5982)
[20:56:03] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41.8735771179199
[20:56:03] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:03] [INFO] [Bullet] Exiting penetration at (538.8163, 629.719) after traveling 41.6666717529297 pixels through wall
[20:56:03] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:03] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[20:56:03] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[20:56:03] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:56:03] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[20:56:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(573.1326, 960.5037), source=ENEMY (Enemy4), range=1469, listeners=9
[20:56:03] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[20:56:03] [INFO] [LastChance] Threat detected: Bullet
[20:56:03] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:03] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:56:03] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:56:03] [ENEMY] [Enemy4] Hit taken, health: 1/3
[20:56:03] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:03] [INFO] [ImpactEffects] spawn_blood_effect called at (581.1315, 960.6311), dir=(-0.008148, 0.999967), lethal=false
[20:56:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:03] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:03] [INFO] [ImpactEffects] Wall found for blood splatter at (580.8108, 1000) (dist=39 px)
[20:56:03] [INFO] [ImpactEffects] Blood effect spawned at (581.1315, 960.6311) (scale=0.9)
[20:56:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(583.7979, 960.6736), source=ENEMY (Enemy4), range=1469, listeners=9
[20:56:03] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[20:56:03] [INFO] [LastChance] Threat detected: Bullet
[20:56:03] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:03] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:56:03] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:56:03] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:56:03] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:56:03] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:56:03] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:56:03] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:56:03] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:56:03] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:56:03] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:56:03] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:56:03] [ENEMY] [Enemy3] Death animation completed
[20:56:03] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:56:03] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(604.1061, 831.5624), shooter_id=6461560195538, bullet_pos=(526.1639, 938.4054)
[20:56:04] [INFO] [Bullet] Using shooter_position, distance=132.251312255859
[20:56:04] [INFO] [Bullet] Distance to wall: 132.251312255859 (9.00523504022087% of viewport)
[20:56:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:04] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:05] [ENEMY] [Enemy4] Hit taken, health: 0/3
[20:56:05] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:05] [INFO] [ImpactEffects] spawn_blood_effect called at (679.7568, 945.2113), dir=(0.910965, 0.412484), lethal=true
[20:56:05] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:05] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:56:05] [INFO] [ImpactEffects] Blood effect spawned at (679.7568, 945.2113) (scale=1.35)
[20:56:05] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[20:56:05] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[20:56:05] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
[20:56:05] [INFO] [DeathAnim] Started - Angle: 24.4 deg, Index: 13
[20:56:05] [ENEMY] [Enemy4] Death animation started with hit direction: (0.910965, 0.412484)
[20:56:06] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
[20:56:06] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:56:06] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:56:06] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[20:56:06] [ENEMY] [Enemy10] FLANKING started: target=(506.2802, 1144.25), side=right, pos=(949.6816, 1411.026)
[20:56:06] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:56:06] [ENEMY] [Enemy4] Ragdoll activated
[20:56:06] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:56:06] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[20:56:06] [ENEMY] [Enemy1] Player reloading state changed: false -> true
[20:56:06] [ENEMY] [Enemy2] Player reloading state changed: false -> true
[20:56:06] [ENEMY] [Enemy4] Player reloading state changed: false -> true
[20:56:06] [ENEMY] [Enemy5] Player reloading state changed: false -> true
[20:56:06] [ENEMY] [Enemy6] Player reloading state changed: false -> true
[20:56:06] [ENEMY] [Enemy7] Player reloading state changed: false -> true
[20:56:06] [ENEMY] [Enemy8] Player reloading state changed: false -> true
[20:56:06] [ENEMY] [Enemy9] Player reloading state changed: false -> true
[20:56:06] [ENEMY] [Enemy10] Player reloading state changed: false -> true
[20:56:06] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(540.028, 983.9331), source=PLAYER (Player), range=900, listeners=8
[20:56:06] [ENEMY] [Enemy2] Heard player RELOAD at (540.028, 983.9331), intensity=0.01, distance=426
[20:56:06] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
[20:56:06] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=2
[20:56:06] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=647), can_see=false
[20:56:06] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=426), can_see=false
[20:56:06] [ENEMY] [Enemy2] Pursuing vulnerability sound at (540.028, 983.9331), distance=426
[20:56:06] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1322), can_see=false
[20:56:06] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1508), can_see=false
[20:56:06] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1073), can_see=false
[20:56:06] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1438), can_see=false
[20:56:06] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1660), can_see=false
[20:56:06] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=512), can_see=false
[20:56:07] [ENEMY] [Enemy1] State: SUPPRESSED -> IN_COVER
[20:56:07] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[20:56:07] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
[20:56:07] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
[20:56:07] [ENEMY] [Enemy1] Player reloading state changed: true -> false
[20:56:07] [ENEMY] [Enemy2] Player reloading state changed: true -> false
[20:56:07] [ENEMY] [Enemy4] Player reloading state changed: true -> false
[20:56:07] [ENEMY] [Enemy5] Player reloading state changed: true -> false
[20:56:07] [ENEMY] [Enemy6] Player reloading state changed: true -> false
[20:56:07] [ENEMY] [Enemy7] Player reloading state changed: true -> false
[20:56:07] [ENEMY] [Enemy8] Player reloading state changed: true -> false
[20:56:07] [ENEMY] [Enemy9] Player reloading state changed: true -> false
[20:56:07] [ENEMY] [Enemy10] Player reloading state changed: true -> false
[20:56:07] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[20:56:07] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[20:56:07] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:56:07] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[20:56:07] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:56:07] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:07] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[20:56:07] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[20:56:07] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:07] [ENEMY] [Enemy4] Death animation completed
[20:56:07] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[20:56:08] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[20:56:08] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:08] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[20:56:08] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[20:56:08] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(585.3613, 983.9252), shooter_id=6461560195538, bullet_pos=(524.5388, 447.8644)
[20:56:08] [INFO] [Bullet] Using shooter_position, distance=539.500244140625
[20:56:08] [INFO] [Bullet] Distance to wall: 539.500244140625 (36.7355636770071% of viewport)
[20:56:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(540.028, 983.9331), shooter_id=6461560195538, bullet_pos=(717.5829, 56.27197)
[20:56:08] [INFO] [Bullet] Using shooter_position, distance=944.500366210938
[20:56:08] [INFO] [Bullet] Distance to wall: 944.500366210938 (64.3127667183306% of viewport)
[20:56:08] [INFO] [Bullet] Distance-based penetration chance: 71.635105495281%
[20:56:08] [INFO] [Bullet] Penetration failed (distance roll)
[20:56:08] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[20:56:08] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[20:56:08] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(722.096, 982.0774), shooter_id=6461560195538, bullet_pos=(518.9577, 581.0964)
[20:56:08] [INFO] [Bullet] Using shooter_position, distance=449.500732421875
[20:56:08] [INFO] [Bullet] Distance to wall: 449.500732421875 (30.6073314295683% of viewport)
[20:56:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:08] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(585.3613, 983.9252), shooter_id=6461560195538, bullet_pos=(562.9905, 66.79944)
[20:56:09] [INFO] [Bullet] Using shooter_position, distance=917.398559570313
[20:56:09] [INFO] [Bullet] Distance to wall: 917.398559570313 (62.4673548683424% of viewport)
[20:56:09] [INFO] [Bullet] Distance-based penetration chance: 73.7880859869339%
[20:56:09] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(436.8217, 658.7554), source=ENEMY (Enemy2), range=1469, listeners=8
[20:56:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
[20:56:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(499.37, 692.5949), shooter_id=6458456410236, bullet_pos=(499.37, 692.5949)
[20:56:09] [INFO] [Bullet] Using shooter_position, distance=0
[20:56:09] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[20:56:09] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:56:09] [INFO] [Bullet] Starting wall penetration at (499.37, 692.5949)
[20:56:09] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.0201072692871
[20:56:09] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:09] [INFO] [Bullet] Exiting penetration at (544.8425, 703.0845) after traveling 41.6666679382324 pixels through wall
[20:56:09] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(436.8217, 658.7554), source=ENEMY (Enemy2), range=1469, listeners=8
[20:56:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
[20:56:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(500.9474, 689.5012), shooter_id=6458456410236, bullet_pos=(500.9474, 689.5012)
[20:56:09] [INFO] [Bullet] Using shooter_position, distance=0
[20:56:09] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[20:56:09] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:56:09] [INFO] [Bullet] Starting wall penetration at (500.9474, 689.5012)
[20:56:09] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47.6484870910645
[20:56:09] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:09] [INFO] [Bullet] Exiting penetration at (545.9753, 701.7593) after traveling 41.6666679382324 pixels through wall
[20:56:09] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(436.8217, 658.7554), source=ENEMY (Enemy2), range=1469, listeners=8
[20:56:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=2
[20:56:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(502.3127, 686.4742), shooter_id=6458456410236, bullet_pos=(502.3127, 686.4742)
[20:56:09] [INFO] [Bullet] Using shooter_position, distance=0
[20:56:09] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[20:56:09] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:56:09] [INFO] [Bullet] Starting wall penetration at (502.3127, 686.4742)
[20:56:09] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[20:56:09] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:56:09] [INFO] [Bullet] Exiting penetration at (546.5647, 701.291) after traveling 41.6666679382324 pixels through wall
[20:56:09] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:09] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[20:56:09] [INFO] [ScoreManager] Combo ended at 2. Max combo: 2
[20:56:09] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[20:56:09] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(840.5325, 788.6935), shooter_id=6461560195538, bullet_pos=(52.73257, 457.7229)
[20:56:09] [INFO] [Bullet] Using shooter_position, distance=854.500061035156
[20:56:09] [INFO] [Bullet] Distance to wall: 854.500061035156 (58.1844804429435% of viewport)
[20:56:09] [INFO] [Bullet] Distance-based penetration chance: 78.784772816566%
[20:56:09] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:09] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[20:56:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(600.0059, 766.8793), source=ENEMY (Enemy10), range=1469, listeners=8
[20:56:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=4
[20:56:09] [INFO] [LastChance] Threat detected: Bullet
[20:56:09] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:09] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:56:09] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:56:09] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:56:09] [INFO] [LastChance] Player died
[20:56:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(615.8701, 768.9554), source=ENEMY (Enemy10), range=1469, listeners=8
[20:56:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=4
[20:56:10] [INFO] [LastChance] Threat detected: Bullet
[20:56:10] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:10] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[20:56:10] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(679.2859, 793.2327), shooter_id=6460738111095, bullet_pos=(760.0179, 813.8911)
[20:56:10] [INFO] [Bullet] Using shooter_position, distance=83.3332824707031
[20:56:10] [INFO] [Bullet] Distance to wall: 83.3332824707031 (5.6743164398246% of viewport)
[20:56:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(882.0922, 727.5114), shooter_id=6461560195538, bullet_pos=(57.0748, 504.9876)
[20:56:10] [INFO] [Bullet] Using shooter_position, distance=854.500244140625
[20:56:10] [INFO] [Bullet] Distance to wall: 854.500244140625 (58.1844929109315% of viewport)
[20:56:10] [INFO] [Bullet] Distance-based penetration chance: 78.7847582705799%
[20:56:10] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:10] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(679.2859, 793.2327), shooter_id=6460738111095, bullet_pos=(930.2629, 749.3076)
[20:56:10] [INFO] [Bullet] Using shooter_position, distance=254.791854858398
[20:56:10] [INFO] [Bullet] Distance to wall: 254.791854858398 (17.3492459182163% of viewport)
[20:56:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:10] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
[20:56:10] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[20:56:10] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[20:56:10] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:10] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:10] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:10] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:10] [ENEMY] [Enemy1] Death animation component initialized
[20:56:10] [ENEMY] [Enemy2] Death animation component initialized
[20:56:10] [ENEMY] [Enemy3] Death animation component initialized
[20:56:10] [ENEMY] [Enemy4] Death animation component initialized
[20:56:10] [ENEMY] [Enemy5] Death animation component initialized
[20:56:10] [ENEMY] [Enemy6] Death animation component initialized
[20:56:10] [ENEMY] [Enemy7] Death animation component initialized
[20:56:10] [ENEMY] [Enemy8] Death animation component initialized
[20:56:10] [ENEMY] [Enemy9] Death animation component initialized
[20:56:10] [ENEMY] [Enemy10] Death animation component initialized
[20:56:10] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:10] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:10] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:10] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:10] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:10] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:10] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:10] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:56:10] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:10] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:10] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
[20:56:10] [ENEMY] [Enemy1] Registered as sound listener
[20:56:10] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:56:10] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
[20:56:10] [ENEMY] [Enemy2] Registered as sound listener
[20:56:10] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:56:10] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
[20:56:10] [ENEMY] [Enemy3] Registered as sound listener
[20:56:10] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:56:10] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
[20:56:10] [ENEMY] [Enemy4] Registered as sound listener
[20:56:10] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:56:10] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
[20:56:10] [ENEMY] [Enemy5] Registered as sound listener
[20:56:10] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:56:10] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
[20:56:10] [ENEMY] [Enemy6] Registered as sound listener
[20:56:10] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:56:10] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
[20:56:10] [ENEMY] [Enemy7] Registered as sound listener
[20:56:10] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:56:10] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
[20:56:10] [ENEMY] [Enemy8] Registered as sound listener
[20:56:10] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:56:10] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
[20:56:10] [ENEMY] [Enemy9] Registered as sound listener
[20:56:10] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:56:10] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
[20:56:10] [ENEMY] [Enemy10] Registered as sound listener
[20:56:10] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:56:10] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:56:10] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:56:10] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:56:10] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:56:10] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:56:10] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:56:10] [INFO] [LastChance] Found player: Player
[20:56:10] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:56:10] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:56:10] [INFO] [LastChance] Connected to player Died signal (C#)
[20:56:11] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:56:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.221, 1465.744), source=ENEMY (Enemy10), range=1469, listeners=18
[20:56:11] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
[20:56:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:11] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.488, 1431.29), shooter_id=7109261396174, bullet_pos=(40.13879, 704.537)
[20:56:12] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
[20:56:12] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
[20:56:12] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:56:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.488, 1431.29), shooter_id=7109261396174, bullet_pos=(511.0415, 447.9929)
[20:56:12] [INFO] [Bullet] Using shooter_position, distance=1100.61376953125
[20:56:12] [INFO] [Bullet] Distance to wall: 1100.61376953125 (74.9428154176464% of viewport)
[20:56:12] [INFO] [Bullet] Distance-based penetration chance: 59.2333820127459%
[20:56:12] [INFO] [Bullet] Starting wall penetration at (511.0415, 447.9929)
[20:56:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.6598606109619
[20:56:12] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:12] [INFO] [Bullet] Exiting penetration at (546.533, 428.6574) after traveling 35.4166679382324 pixels through wall
[20:56:12] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[20:56:12] [ENEMY] [Enemy3] Hit taken, health: 3/4
[20:56:12] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:12] [INFO] [ImpactEffects] spawn_blood_effect called at (668.7712, 756.9229), dir=(0.99886, -0.04773), lethal=false
[20:56:12] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:12] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:12] [INFO] [ImpactEffects] Blood effect spawned at (668.7712, 756.9229) (scale=0.9)
[20:56:12] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:56:12] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:56:12] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:56:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(663.8522, 763.2319), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:12] [ENEMY] [Enemy2] Heard gunshot at (663.8522, 763.2319), source_type=1, intensity=0.02, distance=339
[20:56:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:12] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:56:12] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:56:12] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(657.2936, 771.644), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:12] [INFO] [LastChance] Threat detected: @Area2D@7250
[20:56:12] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(596.0079, 768.4998), shooter_id=7107264907674, bullet_pos=(64.37427, 872.2712)
[20:56:12] [INFO] [Bullet] Using shooter_position, distance=541.666748046875
[20:56:12] [INFO] [Bullet] Distance to wall: 541.666748046875 (36.883084911833% of viewport)
[20:56:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:12] [INFO] [Bullet] Starting wall penetration at (64.37427, 872.2712)
[20:56:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13.6814308166504
[20:56:12] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:12] [INFO] [Bullet] Exiting penetration at (18.57198, 881.2115) after traveling 41.666675567627 pixels through wall
[20:56:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(589.3163, 774.7547), shooter_id=7107264907674, bullet_pos=(47.67035, 779.4932)
[20:56:12] [INFO] [Bullet] Using shooter_position, distance=541.666687011719
[20:56:12] [INFO] [Bullet] Distance to wall: 541.666687011719 (36.883080755837% of viewport)
[20:56:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(385.6741, 752.9782), shooter_id=7110083479776, bullet_pos=(924.8697, 734.8588)
[20:56:12] [INFO] [Bullet] Using shooter_position, distance=539.5
[20:56:12] [INFO] [Bullet] Distance to wall: 539.5 (36.735547053023% of viewport)
[20:56:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:12] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:13] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:56:13] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:56:13] [ENEMY] [Enemy1] Memory: medium confidence (0.59) - transitioning to PURSUING
[20:56:13] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[20:56:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:13] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:13] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:13] [ENEMY] [Enemy1] Death animation component initialized
[20:56:13] [ENEMY] [Enemy2] Death animation component initialized
[20:56:13] [ENEMY] [Enemy3] Death animation component initialized
[20:56:13] [ENEMY] [Enemy4] Death animation component initialized
[20:56:13] [ENEMY] [Enemy5] Death animation component initialized
[20:56:13] [ENEMY] [Enemy6] Death animation component initialized
[20:56:13] [ENEMY] [Enemy7] Death animation component initialized
[20:56:13] [ENEMY] [Enemy8] Death animation component initialized
[20:56:13] [ENEMY] [Enemy9] Death animation component initialized
[20:56:13] [ENEMY] [Enemy10] Death animation component initialized
[20:56:13] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:13] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:13] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:13] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:13] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:13] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:13] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:13] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:56:13] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:13] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:13] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:56:13] [ENEMY] [Enemy1] Registered as sound listener
[20:56:13] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:56:13] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:56:13] [ENEMY] [Enemy2] Registered as sound listener
[20:56:13] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:56:13] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:56:13] [ENEMY] [Enemy3] Registered as sound listener
[20:56:13] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:56:13] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:56:13] [ENEMY] [Enemy4] Registered as sound listener
[20:56:13] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:56:13] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:56:13] [ENEMY] [Enemy5] Registered as sound listener
[20:56:13] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:56:13] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:56:13] [ENEMY] [Enemy6] Registered as sound listener
[20:56:13] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:56:13] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:56:13] [ENEMY] [Enemy7] Registered as sound listener
[20:56:13] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:56:13] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:56:13] [ENEMY] [Enemy8] Registered as sound listener
[20:56:13] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:56:13] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:56:13] [ENEMY] [Enemy9] Registered as sound listener
[20:56:13] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:56:13] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:56:13] [ENEMY] [Enemy10] Registered as sound listener
[20:56:13] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:56:13] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:56:13] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:56:13] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:56:13] [INFO] [LastChance] Found player: Player
[20:56:13] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:56:13] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:56:13] [INFO] [LastChance] Connected to player Died signal (C#)
[20:56:13] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:56:13] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:56:13] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:56:13] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:56:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[20:56:14] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:56:14] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:14] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=7279818574511, bullet_pos=(41.69983, 702.3934)
[20:56:14] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[20:56:14] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[20:56:14] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:56:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=7279818574511, bullet_pos=(522.8438, 332.1895)
[20:56:15] [INFO] [Bullet] Using shooter_position, distance=1200.14282226563
[20:56:15] [INFO] [Bullet] Distance to wall: 1200.14282226563 (81.7199316361199% of viewport)
[20:56:15] [ENEMY] [Enemy3] Hit taken, health: 2/3
[20:56:15] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:15] [INFO] [ImpactEffects] spawn_blood_effect called at (673.9753, 755.7839), dir=(0.999968, -0.008053), lethal=false
[20:56:15] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:15] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:15] [INFO] [ImpactEffects] Blood effect spawned at (673.9753, 755.7839) (scale=0.9)
[20:56:15] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:56:15] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:56:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=7279818574511, bullet_pos=(120.8776, 57.83972)
[20:56:15] [INFO] [Bullet] Using shooter_position, distance=1633.47912597656
[20:56:15] [INFO] [Bullet] Distance to wall: 1633.47912597656 (111.226597390997% of viewport)
[20:56:15] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:56:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=7279818574511, bullet_pos=(50.33871, 99.19052)
[20:56:15] [INFO] [Bullet] Using shooter_position, distance=1638.96838378906
[20:56:15] [INFO] [Bullet] Distance to wall: 1638.96838378906 (111.600371049305% of viewport)
[20:56:15] [INFO] [Bullet] Distance-based penetration chance: 27.679925790139%
[20:56:15] [INFO] [Bullet] Penetration failed (distance roll)
[20:56:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.8831, 761.954), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:15] [ENEMY] [Enemy2] Heard gunshot at (668.8831, 761.954), source_type=1, intensity=0.02, distance=342
[20:56:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:15] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:56:15] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:56:15] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(662.0936, 770.1808), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(655.3041, 778.4077), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:15] [INFO] [LastChance] Threat detected: @Area2D@7514
[20:56:15] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(648.5145, 786.6345), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(600.94, 765.7396), shooter_id=7277822085192, bullet_pos=(62.18697, 821.8458)
[20:56:15] [INFO] [Bullet] Using shooter_position, distance=541.666625976563
[20:56:15] [INFO] [Bullet] Distance to wall: 541.666625976563 (36.883076599841% of viewport)
[20:56:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:15] [INFO] [Bullet] Starting wall penetration at (62.18697, 821.8458)
[20:56:15] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:56:15] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:56:15] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.3164482116699
[20:56:15] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:15] [INFO] [Bullet] Exiting penetration at (15.77132, 826.6795) after traveling 41.6666679382324 pixels through wall
[20:56:15] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:15] [INFO] [LastChance] Threat detected: @Area2D@7515
[20:56:15] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(594.0657, 771.8571), shooter_id=7277822085192, bullet_pos=(53.06929, 798.7973)
[20:56:15] [INFO] [Bullet] Using shooter_position, distance=541.666748046875
[20:56:15] [INFO] [Bullet] Distance to wall: 541.666748046875 (36.883084911833% of viewport)
[20:56:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:15] [INFO] [Bullet] Starting wall penetration at (53.06929, 798.7973)
[20:56:15] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.5712699890137
[20:56:15] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:15] [INFO] [Bullet] Exiting penetration at (6.460373, 801.1183) after traveling 41.6666679382324 pixels through wall
[20:56:15] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(580.5248, 783.8075), shooter_id=7277822085192, bullet_pos=(341.7732, 709.6611)
[20:56:15] [INFO] [Bullet] Using shooter_position, distance=250.000015258789
[20:56:15] [INFO] [Bullet] Distance to wall: 250.000015258789 (17.0229607484629% of viewport)
[20:56:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(385.5169, 745.1543), shooter_id=7280640657930, bullet_pos=(924.525, 722.1146)
[20:56:15] [INFO] [Bullet] Using shooter_position, distance=539.500244140625
[20:56:15] [INFO] [Bullet] Distance to wall: 539.500244140625 (36.7355636770071% of viewport)
[20:56:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:15] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:15] [ENEMY] [Enemy1] Memory: medium confidence (0.60) - transitioning to PURSUING
[20:56:15] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[20:56:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(580.5248, 783.8075), shooter_id=7277822085192, bullet_pos=(63.73056, 786.0051)
[20:56:15] [INFO] [Bullet] Using shooter_position, distance=516.798950195313
[20:56:15] [INFO] [Bullet] Distance to wall: 516.798950195313 (35.1897908282721% of viewport)
[20:56:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:15] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:56:15] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:56:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:16] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:16] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:16] [ENEMY] [Enemy1] Death animation component initialized
[20:56:16] [ENEMY] [Enemy2] Death animation component initialized
[20:56:16] [ENEMY] [Enemy3] Death animation component initialized
[20:56:16] [ENEMY] [Enemy4] Death animation component initialized
[20:56:16] [ENEMY] [Enemy5] Death animation component initialized
[20:56:16] [ENEMY] [Enemy6] Death animation component initialized
[20:56:16] [ENEMY] [Enemy7] Death animation component initialized
[20:56:16] [ENEMY] [Enemy8] Death animation component initialized
[20:56:16] [ENEMY] [Enemy9] Death animation component initialized
[20:56:16] [ENEMY] [Enemy10] Death animation component initialized
[20:56:16] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:16] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:16] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:16] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:16] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:16] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:16] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:16] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:56:16] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:16] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:16] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:56:16] [ENEMY] [Enemy1] Registered as sound listener
[20:56:16] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:56:16] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:56:16] [ENEMY] [Enemy2] Registered as sound listener
[20:56:16] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:56:16] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:56:16] [ENEMY] [Enemy3] Registered as sound listener
[20:56:16] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:56:16] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:56:16] [ENEMY] [Enemy4] Registered as sound listener
[20:56:16] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:56:16] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:56:16] [ENEMY] [Enemy5] Registered as sound listener
[20:56:16] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:56:16] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:56:16] [ENEMY] [Enemy6] Registered as sound listener
[20:56:16] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:56:16] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:56:16] [ENEMY] [Enemy7] Registered as sound listener
[20:56:16] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:56:16] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:56:16] [ENEMY] [Enemy8] Registered as sound listener
[20:56:16] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:56:16] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:56:16] [ENEMY] [Enemy9] Registered as sound listener
[20:56:16] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:56:16] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:56:16] [ENEMY] [Enemy10] Registered as sound listener
[20:56:16] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:56:16] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:56:16] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:56:16] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:56:16] [INFO] [LastChance] Found player: Player
[20:56:16] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:56:16] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:56:16] [INFO] [LastChance] Connected to player Died signal (C#)
[20:56:16] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:56:16] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:56:16] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:56:16] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:56:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[20:56:17] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:56:17] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:17] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=7456600099505, bullet_pos=(41.69983, 702.3934)
[20:56:17] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[20:56:17] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[20:56:17] [INFO] [Bullet] Distance-based penetration chance: 50.6761141644985%
[20:56:17] [INFO] [Bullet] Starting wall penetration at (41.69983, 702.3934)
[20:56:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.508674621582
[20:56:17] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:17] [INFO] [Bullet] Exiting penetration at (4.46851, 674.2579) after traveling 41.6666717529297 pixels through wall
[20:56:17] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:17] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:56:18] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:56:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(418.5954, 795.573), shooter_id=7457422182885, bullet_pos=(913.0887, 798.1592)
[20:56:18] [INFO] [Bullet] Using shooter_position, distance=494.500061035156
[20:56:18] [INFO] [Bullet] Distance to wall: 494.500061035156 (33.6714184613155% of viewport)
[20:56:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:18] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:18] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:56:18] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:56:18] [ENEMY] [Enemy3] Hit taken, health: 1/2
[20:56:18] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:18] [INFO] [ImpactEffects] spawn_blood_effect called at (634.009, 786.832), dir=(0.999557, 0.029746), lethal=false
[20:56:18] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:18] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:18] [INFO] [ImpactEffects] Blood effect spawned at (634.009, 786.832) (scale=0.9)
[20:56:18] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[20:56:18] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:56:18] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:56:18] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:56:18] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:56:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:18] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:18] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:18] [ENEMY] [Enemy1] Death animation component initialized
[20:56:18] [ENEMY] [Enemy2] Death animation component initialized
[20:56:18] [ENEMY] [Enemy3] Death animation component initialized
[20:56:18] [ENEMY] [Enemy4] Death animation component initialized
[20:56:18] [ENEMY] [Enemy5] Death animation component initialized
[20:56:18] [ENEMY] [Enemy6] Death animation component initialized
[20:56:18] [ENEMY] [Enemy7] Death animation component initialized
[20:56:18] [ENEMY] [Enemy8] Death animation component initialized
[20:56:18] [ENEMY] [Enemy9] Death animation component initialized
[20:56:18] [ENEMY] [Enemy10] Death animation component initialized
[20:56:18] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:18] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:18] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:18] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:18] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:18] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:18] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:18] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:56:18] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:18] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:18] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:56:18] [ENEMY] [Enemy1] Registered as sound listener
[20:56:18] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:56:18] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:56:18] [ENEMY] [Enemy2] Registered as sound listener
[20:56:18] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:56:18] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:56:18] [ENEMY] [Enemy3] Registered as sound listener
[20:56:18] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:56:18] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:56:18] [ENEMY] [Enemy4] Registered as sound listener
[20:56:18] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:56:18] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:56:18] [ENEMY] [Enemy5] Registered as sound listener
[20:56:18] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:56:18] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:56:18] [ENEMY] [Enemy6] Registered as sound listener
[20:56:18] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:56:18] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:56:18] [ENEMY] [Enemy7] Registered as sound listener
[20:56:18] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:56:18] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:56:18] [ENEMY] [Enemy8] Registered as sound listener
[20:56:18] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:56:18] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:56:18] [ENEMY] [Enemy9] Registered as sound listener
[20:56:18] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:56:18] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:56:18] [ENEMY] [Enemy10] Registered as sound listener
[20:56:18] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:56:18] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:56:18] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:56:18] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:56:18] [INFO] [LastChance] Found player: Player
[20:56:18] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:56:18] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:56:18] [INFO] [LastChance] Connected to player Died signal (C#)
[20:56:18] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:56:18] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:56:18] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:56:19] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:56:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[20:56:19] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:56:19] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:19] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=7624271595842, bullet_pos=(41.69983, 702.3934)
[20:56:20] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[20:56:20] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[20:56:20] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:56:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=7624271595842, bullet_pos=(273.1122, 475.9814)
[20:56:20] [INFO] [Bullet] Using shooter_position, distance=1203.57556152344
[20:56:20] [INFO] [Bullet] Distance to wall: 1203.57556152344 (81.9536731644352% of viewport)
[20:56:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=7624271595842, bullet_pos=(440.7693, 695.1447)
[20:56:20] [INFO] [Bullet] Using shooter_position, distance=927.638549804688
[20:56:20] [INFO] [Bullet] Distance to wall: 927.638549804688 (63.1646146330827% of viewport)
[20:56:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(361.5524, 810.6381), shooter_id=7625093679764, bullet_pos=(518.4051, 803.8397)
[20:56:20] [INFO] [Bullet] Using shooter_position, distance=156.999923706055
[20:56:20] [INFO] [Bullet] Distance to wall: 156.999923706055 (10.6904135025483% of viewport)
[20:56:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:20] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=7624271595842, bullet_pos=(522.8247, 590.5469)
[20:56:20] [INFO] [Bullet] Using shooter_position, distance=969.220703125
[20:56:20] [INFO] [Bullet] Distance to wall: 969.220703125 (65.9960199155004% of viewport)
[20:56:20] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:56:20] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:56:20] [ENEMY] [Enemy2] Memory: high confidence (0.90) - transitioning to PURSUING
[20:56:20] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[20:56:20] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[20:56:20] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:56:20] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:20] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:56:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=7624271595842, bullet_pos=(763.2215, 818.4467)
[20:56:20] [INFO] [Bullet] Using shooter_position, distance=658.717651367188
[20:56:20] [INFO] [Bullet] Distance to wall: 658.717651367188 (44.8532961565452% of viewport)
[20:56:20] [ENEMY] [Enemy3] Hit taken, health: 2/3
[20:56:20] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:20] [INFO] [ImpactEffects] spawn_blood_effect called at (578.5645, 790.1968), dir=(0.995819, -0.091346), lethal=false
[20:56:20] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:20] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:20] [INFO] [ImpactEffects] Blood effect spawned at (578.5645, 790.1968) (scale=0.9)
[20:56:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=7624271595842, bullet_pos=(916.2239, 706.0027)
[20:56:21] [INFO] [Bullet] Using shooter_position, distance=730.403198242188
[20:56:21] [INFO] [Bullet] Distance to wall: 730.403198242188 (49.7344968613612% of viewport)
[20:56:21] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:56:21] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[20:56:21] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:56:21] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:56:21] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:56:21] [ENEMY] [Enemy1] Memory: medium confidence (0.76) - transitioning to PURSUING
[20:56:21] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[20:56:21] [ENEMY] [Enemy10] FLANKING started: target=(550.0458, 746.6433), side=left, pos=(1022.668, 1432.257)
[20:56:21] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:56:21] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:21] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:21] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:21] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:21] [ENEMY] [Enemy1] Death animation component initialized
[20:56:21] [ENEMY] [Enemy2] Death animation component initialized
[20:56:21] [ENEMY] [Enemy3] Death animation component initialized
[20:56:21] [ENEMY] [Enemy4] Death animation component initialized
[20:56:21] [ENEMY] [Enemy5] Death animation component initialized
[20:56:21] [ENEMY] [Enemy6] Death animation component initialized
[20:56:21] [ENEMY] [Enemy7] Death animation component initialized
[20:56:21] [ENEMY] [Enemy8] Death animation component initialized
[20:56:21] [ENEMY] [Enemy9] Death animation component initialized
[20:56:21] [ENEMY] [Enemy10] Death animation component initialized
[20:56:21] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:21] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:21] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:21] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:21] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:21] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:21] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:21] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:56:21] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:21] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:21] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:56:21] [ENEMY] [Enemy1] Registered as sound listener
[20:56:21] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:56:21] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:56:21] [ENEMY] [Enemy2] Registered as sound listener
[20:56:21] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:56:21] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:56:21] [ENEMY] [Enemy3] Registered as sound listener
[20:56:21] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:56:21] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:56:21] [ENEMY] [Enemy4] Registered as sound listener
[20:56:21] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:56:21] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:56:21] [ENEMY] [Enemy5] Registered as sound listener
[20:56:21] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:56:21] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:56:21] [ENEMY] [Enemy6] Registered as sound listener
[20:56:21] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:56:21] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:56:21] [ENEMY] [Enemy7] Registered as sound listener
[20:56:21] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:56:21] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:56:21] [ENEMY] [Enemy8] Registered as sound listener
[20:56:21] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:56:21] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:56:21] [ENEMY] [Enemy9] Registered as sound listener
[20:56:21] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:56:21] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:56:21] [ENEMY] [Enemy10] Registered as sound listener
[20:56:21] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:56:21] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:56:21] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:56:21] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:56:21] [INFO] [LastChance] Found player: Player
[20:56:21] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:56:21] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:56:21] [INFO] [LastChance] Connected to player Died signal (C#)
[20:56:21] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:56:21] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:56:21] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:56:21] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:56:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[20:56:22] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:56:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:22] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:56:22] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:56:22] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=7802277857811, bullet_pos=(41.69983, 702.3934)
[20:56:22] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[20:56:22] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[20:56:22] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:56:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=7802277857811, bullet_pos=(503.3844, 365.273)
[20:56:23] [INFO] [Bullet] Using shooter_position, distance=1178.09619140625
[20:56:23] [INFO] [Bullet] Distance to wall: 1178.09619140625 (80.2187360007256% of viewport)
[20:56:23] [ENEMY] [Enemy3] Hit taken, health: 2/3
[20:56:23] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:23] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(0.999653, -0.026327), lethal=false
[20:56:23] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:23] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:23] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=0.9)
[20:56:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=7802277857811, bullet_pos=(341.1741, 223.0517)
[20:56:23] [INFO] [Bullet] Using shooter_position, distance=1378.59692382813
[20:56:23] [INFO] [Bullet] Distance to wall: 1378.59692382813 (93.8711995596679% of viewport)
[20:56:23] [INFO] [Bullet] Distance-based penetration chance: 37.1502671803874%
[20:56:23] [INFO] [Bullet] Penetration failed (distance roll)
[20:56:23] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:56:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(679.1555, 759.757), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:23] [ENEMY] [Enemy2] Heard gunshot at (679.1555, 759.757), source_type=1, intensity=0.02, distance=349
[20:56:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:23] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:56:23] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:56:23] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(672.0981, 767.7553), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(665.0408, 775.7536), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:23] [ENEMY] [Enemy1] Memory: medium confidence (0.62) - transitioning to PURSUING
[20:56:23] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[20:56:23] [INFO] [LastChance] Threat detected: @Area2D@8302
[20:56:23] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:23] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(657.9836, 783.7519), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:23] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:23] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:56:23] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:56:23] [INFO] [LastChance] Threat detected: @Area2D@8305
[20:56:23] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:23] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(611.237, 763.9623), shooter_id=7800281368640, bullet_pos=(29.99271, 813.2878)
[20:56:23] [INFO] [Bullet] Using shooter_position, distance=583.333435058594
[20:56:23] [INFO] [Bullet] Distance to wall: 583.333435058594 (39.7202462487424% of viewport)
[20:56:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:23] [INFO] [Bullet] Starting wall penetration at (29.99271, 813.2878)
[20:56:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48.6811828613281
[20:56:23] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:23] [INFO] [Bullet] Exiting penetration at (-16.50683, 817.2339) after traveling 41.6666679382324 pixels through wall
[20:56:23] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(429.531, 748.5634), shooter_id=7803099941782, bullet_pos=(923.7546, 732.0224)
[20:56:23] [INFO] [Bullet] Using shooter_position, distance=494.500305175781
[20:56:23] [INFO] [Bullet] Distance to wall: 494.500305175781 (33.6714350852996% of viewport)
[20:56:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:23] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(604.0709, 769.46), shooter_id=7800281368640, bullet_pos=(62.91253, 792.9193)
[20:56:23] [INFO] [Bullet] Using shooter_position, distance=541.666625976563
[20:56:23] [INFO] [Bullet] Distance to wall: 541.666625976563 (36.883076599841% of viewport)
[20:56:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:23] [INFO] [Bullet] Starting wall penetration at (62.91253, 792.9193)
[20:56:23] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15.7251119613647
[20:56:23] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:23] [INFO] [Bullet] Exiting penetration at (16.28964, 794.9404) after traveling 41.6666679382324 pixels through wall
[20:56:23] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(590.0032, 780.7072), shooter_id=7800281368640, bullet_pos=(351.8105, 704.7844)
[20:56:23] [INFO] [Bullet] Using shooter_position, distance=250.000122070313
[20:56:23] [INFO] [Bullet] Distance to wall: 250.000122070313 (17.0229680214559% of viewport)
[20:56:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(590.0032, 780.7072), shooter_id=7800281368640, bullet_pos=(57.78115, 840.2868)
[20:56:23] [INFO] [Bullet] Using shooter_position, distance=535.546508789063
[20:56:23] [INFO] [Bullet] Distance to wall: 535.546508789063 (36.466346566641% of viewport)
[20:56:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:23] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:24] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:24] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:24] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:24] [ENEMY] [Enemy1] Death animation component initialized
[20:56:24] [ENEMY] [Enemy2] Death animation component initialized
[20:56:24] [ENEMY] [Enemy3] Death animation component initialized
[20:56:24] [ENEMY] [Enemy4] Death animation component initialized
[20:56:24] [ENEMY] [Enemy5] Death animation component initialized
[20:56:24] [ENEMY] [Enemy6] Death animation component initialized
[20:56:24] [ENEMY] [Enemy7] Death animation component initialized
[20:56:24] [ENEMY] [Enemy8] Death animation component initialized
[20:56:24] [ENEMY] [Enemy9] Death animation component initialized
[20:56:24] [ENEMY] [Enemy10] Death animation component initialized
[20:56:24] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:24] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:24] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:24] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:24] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:24] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:24] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:24] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:56:24] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:24] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:24] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:56:24] [ENEMY] [Enemy1] Registered as sound listener
[20:56:24] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:56:24] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:56:24] [ENEMY] [Enemy2] Registered as sound listener
[20:56:24] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:56:24] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:56:24] [ENEMY] [Enemy3] Registered as sound listener
[20:56:24] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:56:24] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:56:24] [ENEMY] [Enemy4] Registered as sound listener
[20:56:24] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:56:24] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:56:24] [ENEMY] [Enemy5] Registered as sound listener
[20:56:24] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:56:24] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:56:24] [ENEMY] [Enemy6] Registered as sound listener
[20:56:24] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:56:24] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:56:24] [ENEMY] [Enemy7] Registered as sound listener
[20:56:24] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:56:24] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:56:24] [ENEMY] [Enemy8] Registered as sound listener
[20:56:24] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:56:24] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:56:24] [ENEMY] [Enemy9] Registered as sound listener
[20:56:24] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:56:24] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:56:24] [ENEMY] [Enemy10] Registered as sound listener
[20:56:24] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:56:24] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:56:24] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:56:24] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:56:24] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:56:24] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:56:24] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:56:24] [INFO] [LastChance] Found player: Player
[20:56:24] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:56:24] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:56:24] [INFO] [LastChance] Connected to player Died signal (C#)
[20:56:24] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:56:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1063.082, 1467.391), source=ENEMY (Enemy10), range=1469, listeners=20
[20:56:25] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:56:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1032.046, 1446.643), source=ENEMY (Enemy10), range=1469, listeners=10
[20:56:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1000.551, 1427.344), source=ENEMY (Enemy10), range=1469, listeners=10
[20:56:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(969.1906, 1416.001), source=ENEMY (Enemy10), range=1469, listeners=10
[20:56:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1002.38, 1436.61), shooter_id=7958389851571, bullet_pos=(63.92569, 816.1832)
[20:56:25] [INFO] [Bullet] Using shooter_position, distance=1125.00036621094
[20:56:25] [INFO] [Bullet] Distance to wall: 1125.00036621094 (76.6033436285635% of viewport)
[20:56:25] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1002.38, 1436.61), shooter_id=7958389851571, bullet_pos=(200.6229, 695.8994)
[20:56:25] [INFO] [Bullet] Using shooter_position, distance=1091.54321289063
[20:56:25] [INFO] [Bullet] Distance to wall: 1091.54321289063 (74.3251845367033% of viewport)
[20:56:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(971.7855, 1414.98), shooter_id=7958389851571, bullet_pos=(42.40818, 781.0371)
[20:56:25] [INFO] [Bullet] Using shooter_position, distance=1125.00036621094
[20:56:25] [INFO] [Bullet] Distance to wall: 1125.00036621094 (76.6033436285635% of viewport)
[20:56:25] [INFO] [LastChance] Threat detected: Bullet
[20:56:25] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(971.7855, 1414.98), shooter_id=7958389851571, bullet_pos=(171.3317, 711.1097)
[20:56:25] [INFO] [Bullet] Using shooter_position, distance=1065.90795898438
[20:56:25] [INFO] [Bullet] Distance to wall: 1065.90795898438 (72.5796329591515% of viewport)
[20:56:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(941.4021, 1393.56), shooter_id=7958389851571, bullet_pos=(34.83073, 727.4117)
[20:56:25] [INFO] [Bullet] Using shooter_position, distance=1124.99987792969
[20:56:25] [INFO] [Bullet] Distance to wall: 1124.99987792969 (76.6033103805953% of viewport)
[20:56:25] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:56:25] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:56:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(941.4021, 1393.56), shooter_id=7958389851571, bullet_pos=(98.14457, 685.6738)
[20:56:25] [INFO] [Bullet] Using shooter_position, distance=1100.99304199219
[20:56:25] [INFO] [Bullet] Distance to wall: 1100.99304199219 (74.9686407769322% of viewport)
[20:56:25] [INFO] [Bullet] Distance-based penetration chance: 59.2032524269124%
[20:56:25] [INFO] [Bullet] Penetration failed (distance roll)
[20:56:25] [INFO] [LastChance] Threat detected: @Area2D@8563
[20:56:25] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(912.1221, 1378.849), shooter_id=7958389851571, bullet_pos=(109.9874, 714.2825)
[20:56:25] [INFO] [Bullet] Using shooter_position, distance=1041.66650390625
[20:56:25] [INFO] [Bullet] Distance to wall: 1041.66650390625 (70.9289877067767% of viewport)
[20:56:25] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:56:25] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:56:25] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:56:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(912.1221, 1378.849), shooter_id=7958389851571, bullet_pos=(57.67873, 769.1868)
[20:56:25] [INFO] [Bullet] Using shooter_position, distance=1049.6484375
[20:56:25] [INFO] [Bullet] Distance to wall: 1049.6484375 (71.4724922426568% of viewport)
[20:56:26] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:56:26] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:56:26] [ENEMY] [Enemy3] Hit taken, health: 3/4
[20:56:26] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:26] [INFO] [ImpactEffects] spawn_blood_effect called at (674.0037, 755.9095), dir=(0.999007, -0.044553), lethal=false
[20:56:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:26] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:26] [INFO] [ImpactEffects] Blood effect spawned at (674.0037, 755.9095) (scale=0.9)
[20:56:26] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:56:26] [ENEMY] [Enemy1] State: IDLE -> COMBAT
[20:56:26] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:56:26] [ENEMY] [Enemy2] State: IDLE -> COMBAT
[20:56:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(681.7202, 758.0203), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:26] [INFO] [LastChance] Threat detected: Bullet
[20:56:26] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(692.0087, 760.8348), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:26] [INFO] [LastChance] Threat detected: @Area2D@8578
[20:56:26] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:26] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:56:26] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:56:26] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:56:26] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:56:26] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:56:26] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:56:26] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:56:26] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:56:26] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:56:26] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:56:26] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:56:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(701.7785, 768.2494), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:26] [INFO] [LastChance] Threat detected: @Area2D@8579
[20:56:26] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:26] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:56:26] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:56:26] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:56:26] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:56:26] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:56:26] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[20:56:26] [INFO] [LastChance] Player died
[20:56:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.8641, 773.3458), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:27] [INFO] [LastChance] Threat detected: @Area2D@8580
[20:56:27] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(613.7822, 761.8982), shooter_id=7956393362959, bullet_pos=(60.86609, 799.1035)
[20:56:27] [INFO] [Bullet] Using shooter_position, distance=554.16650390625
[20:56:27] [INFO] [Bullet] Distance to wall: 554.16650390625 (37.7342162733221% of viewport)
[20:56:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:27] [INFO] [Bullet] Starting wall penetration at (60.86609, 799.1035)
[20:56:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17.7353038787842
[20:56:27] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:27] [INFO] [Bullet] Exiting penetration at (14.30471, 802.2366) after traveling 41.6666717529297 pixels through wall
[20:56:27] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:27] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:56:27] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:56:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[20:56:27] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[20:56:27] [INFO] [LastChance] Threat detected: Bullet
[20:56:27] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[20:56:27] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[20:56:27] [ENEMY] [Enemy10] FLANKING started: target=(945.2367, 798.9023), side=left, pos=(936.0674, 1399.091)
[20:56:27] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:56:27] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:27] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:27] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:27] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:27] [ENEMY] [Enemy1] Death animation component initialized
[20:56:27] [ENEMY] [Enemy2] Death animation component initialized
[20:56:27] [ENEMY] [Enemy3] Death animation component initialized
[20:56:27] [ENEMY] [Enemy4] Death animation component initialized
[20:56:27] [ENEMY] [Enemy5] Death animation component initialized
[20:56:27] [ENEMY] [Enemy6] Death animation component initialized
[20:56:27] [ENEMY] [Enemy7] Death animation component initialized
[20:56:27] [ENEMY] [Enemy8] Death animation component initialized
[20:56:27] [ENEMY] [Enemy9] Death animation component initialized
[20:56:27] [ENEMY] [Enemy10] Death animation component initialized
[20:56:27] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:27] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:27] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:27] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:27] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:27] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:27] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:27] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:56:27] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:27] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:56:27] [ENEMY] [Enemy1] Registered as sound listener
[20:56:27] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:56:27] [ENEMY] [Enemy2] Registered as sound listener
[20:56:27] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:56:27] [ENEMY] [Enemy3] Registered as sound listener
[20:56:27] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:56:27] [ENEMY] [Enemy4] Registered as sound listener
[20:56:27] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:56:27] [ENEMY] [Enemy5] Registered as sound listener
[20:56:27] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:56:27] [ENEMY] [Enemy6] Registered as sound listener
[20:56:27] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:56:27] [ENEMY] [Enemy7] Registered as sound listener
[20:56:27] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:56:27] [ENEMY] [Enemy8] Registered as sound listener
[20:56:27] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:56:27] [ENEMY] [Enemy9] Registered as sound listener
[20:56:27] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:56:27] [ENEMY] [Enemy10] Registered as sound listener
[20:56:27] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:56:27] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:27] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:27] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:27] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:27] [ENEMY] [Enemy1] Death animation component initialized
[20:56:27] [ENEMY] [Enemy2] Death animation component initialized
[20:56:27] [ENEMY] [Enemy3] Death animation component initialized
[20:56:27] [ENEMY] [Enemy4] Death animation component initialized
[20:56:27] [ENEMY] [Enemy5] Death animation component initialized
[20:56:27] [ENEMY] [Enemy6] Death animation component initialized
[20:56:27] [ENEMY] [Enemy7] Death animation component initialized
[20:56:27] [ENEMY] [Enemy8] Death animation component initialized
[20:56:27] [ENEMY] [Enemy9] Death animation component initialized
[20:56:27] [ENEMY] [Enemy10] Death animation component initialized
[20:56:27] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:27] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:27] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:27] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:27] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:27] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:27] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:27] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:56:27] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:27] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:56:27] [ENEMY] [Enemy1] Registered as sound listener
[20:56:27] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:56:27] [ENEMY] [Enemy2] Registered as sound listener
[20:56:27] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:56:27] [ENEMY] [Enemy3] Registered as sound listener
[20:56:27] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:56:27] [ENEMY] [Enemy4] Registered as sound listener
[20:56:27] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:56:27] [ENEMY] [Enemy5] Registered as sound listener
[20:56:27] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:56:27] [ENEMY] [Enemy6] Registered as sound listener
[20:56:27] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:56:27] [ENEMY] [Enemy7] Registered as sound listener
[20:56:27] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:56:27] [ENEMY] [Enemy8] Registered as sound listener
[20:56:27] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:56:27] [ENEMY] [Enemy9] Registered as sound listener
[20:56:27] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:56:27] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:56:27] [ENEMY] [Enemy10] Registered as sound listener
[20:56:27] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:56:27] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:56:27] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:56:27] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:56:27] [INFO] [LastChance] Found player: Player
[20:56:27] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:56:27] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:56:27] [INFO] [LastChance] Connected to player Died signal (C#)
[20:56:27] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:56:27] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:56:27] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:56:28] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:56:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=30
[20:56:28] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[20:56:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:28] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=8199277119149, bullet_pos=(41.69983, 702.3934)
[20:56:29] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[20:56:29] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[20:56:29] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:56:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=8199277119149, bullet_pos=(518.2384, 326.2801)
[20:56:29] [INFO] [Bullet] Using shooter_position, distance=1207.40710449219
[20:56:29] [INFO] [Bullet] Distance to wall: 1207.40710449219 (82.2145699707637% of viewport)
[20:56:29] [INFO] [Bullet] Distance-based penetration chance: 50.7496683674424%
[20:56:29] [INFO] [Bullet] Starting wall penetration at (518.2384, 326.2801)
[20:56:29] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:29] [INFO] [Bullet] Exiting penetration at (549.964, 301.2403) after traveling 0 pixels through wall
[20:56:29] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[20:56:29] [ENEMY] [Enemy3] Hit taken, health: 1/2
[20:56:29] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:29] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(0.992827, -0.119562), lethal=false
[20:56:29] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:29] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:29] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=0.9)
[20:56:29] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:56:29] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:56:29] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:56:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(692.0593, 756.2233), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:29] [ENEMY] [Enemy2] Heard gunshot at (692.0593, 756.2233), source_type=1, intensity=0.02, distance=358
[20:56:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:29] [ENEMY] [Enemy1] State: IDLE -> COMBAT
[20:56:29] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:56:29] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:56:29] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700.2096, 763.1031), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:29] [INFO] [LastChance] Threat detected: @Area2D@9095
[20:56:29] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:29] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:56:29] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:56:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[20:56:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[20:56:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(708.4516, 769.8548), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:29] [INFO] [LastChance] Threat detected: @Area2D@9096
[20:56:29] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:29] [INFO] [LastChance] Threat detected: @Area2D@9097
[20:56:29] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:29] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:56:29] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:56:29] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:56:29] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:56:29] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:56:29] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:56:29] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:56:29] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:56:29] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:56:29] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:56:29] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:56:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[20:56:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[20:56:29] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:56:29] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:56:29] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:56:29] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:56:29] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:56:29] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[20:56:29] [INFO] [LastChance] Player died
[20:56:29] [INFO] [LastChance] Threat detected: @Area2D@9099
[20:56:29] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(624.0295, 754.627), shooter_id=8197280630463, bullet_pos=(29.30312, 834.0035)
[20:56:29] [INFO] [Bullet] Using shooter_position, distance=600.000122070313
[20:56:29] [INFO] [Bullet] Distance to wall: 600.000122070313 (40.8551116147053% of viewport)
[20:56:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(491.3354, 732.1921), shooter_id=8200099203264, bullet_pos=(925.4633, 691.8352)
[20:56:29] [INFO] [Bullet] Using shooter_position, distance=435.999633789063
[20:56:29] [INFO] [Bullet] Distance to wall: 435.999633789063 (29.6880167973288% of viewport)
[20:56:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:29] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[20:56:29] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[20:56:30] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[20:56:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(436.937, 606.7346), shooter_id=8196995418592, bullet_pos=(503.5742, 712.4914)
[20:56:30] [INFO] [Bullet] Using shooter_position, distance=125.000053405762
[20:56:30] [INFO] [Bullet] Distance to wall: 125.000053405762 (8.51148349122845% of viewport)
[20:56:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:30] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:56:30] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:56:30] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:56:30] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:56:30] [ENEMY] [Enemy10] FLANKING started: target=(525.4622, 1067.508), side=right, pos=(1022.668, 1432.257)
[20:56:30] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:56:30] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:30] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:30] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:30] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:30] [ENEMY] [Enemy1] Death animation component initialized
[20:56:30] [ENEMY] [Enemy2] Death animation component initialized
[20:56:30] [ENEMY] [Enemy3] Death animation component initialized
[20:56:30] [ENEMY] [Enemy4] Death animation component initialized
[20:56:30] [ENEMY] [Enemy5] Death animation component initialized
[20:56:30] [ENEMY] [Enemy6] Death animation component initialized
[20:56:30] [ENEMY] [Enemy7] Death animation component initialized
[20:56:30] [ENEMY] [Enemy8] Death animation component initialized
[20:56:30] [ENEMY] [Enemy9] Death animation component initialized
[20:56:30] [ENEMY] [Enemy10] Death animation component initialized
[20:56:30] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:30] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:30] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:30] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:30] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:30] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:30] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:30] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:56:30] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:30] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:30] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:56:30] [ENEMY] [Enemy1] Registered as sound listener
[20:56:30] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:56:30] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:56:30] [ENEMY] [Enemy2] Registered as sound listener
[20:56:30] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:56:30] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:56:30] [ENEMY] [Enemy3] Registered as sound listener
[20:56:30] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:56:30] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:56:30] [ENEMY] [Enemy4] Registered as sound listener
[20:56:30] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:56:30] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:56:30] [ENEMY] [Enemy5] Registered as sound listener
[20:56:30] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:56:30] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:56:30] [ENEMY] [Enemy6] Registered as sound listener
[20:56:30] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:56:30] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:56:30] [ENEMY] [Enemy7] Registered as sound listener
[20:56:30] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:56:30] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:56:30] [ENEMY] [Enemy8] Registered as sound listener
[20:56:30] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:56:30] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:56:30] [ENEMY] [Enemy9] Registered as sound listener
[20:56:30] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:56:30] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:56:30] [ENEMY] [Enemy10] Registered as sound listener
[20:56:30] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:56:30] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:56:30] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:56:30] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:56:30] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:56:30] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:56:30] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:56:30] [INFO] [LastChance] Found player: Player
[20:56:30] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:56:30] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:56:30] [INFO] [LastChance] Connected to player Died signal (C#)
[20:56:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:31] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:31] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:31] [ENEMY] [Enemy1] Death animation component initialized
[20:56:31] [ENEMY] [Enemy2] Death animation component initialized
[20:56:31] [ENEMY] [Enemy3] Death animation component initialized
[20:56:31] [ENEMY] [Enemy4] Death animation component initialized
[20:56:31] [ENEMY] [Enemy5] Death animation component initialized
[20:56:31] [ENEMY] [Enemy6] Death animation component initialized
[20:56:31] [ENEMY] [Enemy7] Death animation component initialized
[20:56:31] [ENEMY] [Enemy8] Death animation component initialized
[20:56:31] [ENEMY] [Enemy9] Death animation component initialized
[20:56:31] [ENEMY] [Enemy10] Death animation component initialized
[20:56:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:31] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:31] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:31] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:31] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:31] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:31] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:56:31] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:31] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:31] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:56:31] [ENEMY] [Enemy1] Registered as sound listener
[20:56:31] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:56:31] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:56:31] [ENEMY] [Enemy2] Registered as sound listener
[20:56:31] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:56:31] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:56:31] [ENEMY] [Enemy3] Registered as sound listener
[20:56:31] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:56:31] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:56:31] [ENEMY] [Enemy4] Registered as sound listener
[20:56:31] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:56:31] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:56:31] [ENEMY] [Enemy5] Registered as sound listener
[20:56:31] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:56:31] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:56:31] [ENEMY] [Enemy6] Registered as sound listener
[20:56:31] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:56:31] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:56:31] [ENEMY] [Enemy7] Registered as sound listener
[20:56:31] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:56:31] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:56:31] [ENEMY] [Enemy8] Registered as sound listener
[20:56:31] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:56:31] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:56:31] [ENEMY] [Enemy9] Registered as sound listener
[20:56:31] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:56:31] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:56:31] [ENEMY] [Enemy10] Registered as sound listener
[20:56:31] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:56:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:56:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:56:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:56:31] [INFO] [LastChance] Found player: Player
[20:56:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:56:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:56:31] [INFO] [LastChance] Connected to player Died signal (C#)
[20:56:31] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:56:31] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:56:31] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:56:31] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:56:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=30
[20:56:32] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[20:56:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:32] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:56:32] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:56:32] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=8441473009999, bullet_pos=(41.69983, 702.3934)
[20:56:32] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[20:56:32] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[20:56:32] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:56:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=8441473009999, bullet_pos=(524.8012, 396.7534)
[20:56:32] [INFO] [Bullet] Using shooter_position, distance=1140.50439453125
[20:56:32] [INFO] [Bullet] Distance to wall: 1140.50439453125 (77.6590414262877% of viewport)
[20:56:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=8441473009999, bullet_pos=(247.254, 267.7997)
[20:56:33] [INFO] [Bullet] Using shooter_position, distance=1388.55480957031
[20:56:33] [INFO] [Bullet] Distance to wall: 1388.55480957031 (94.5492503107907% of viewport)
[20:56:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=8441473009999, bullet_pos=(58.03665, 358.2119)
[20:56:33] [INFO] [Bullet] Using shooter_position, distance=1431.35473632813
[20:56:33] [INFO] [Bullet] Distance to wall: 1431.35473632813 (97.4635760258557% of viewport)
[20:56:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:33] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[20:56:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:33] [INFO] [LastChance] Threat detected: @Area2D@9614
[20:56:33] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:33] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:33] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:56:33] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:56:33] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:56:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 760.9999), shooter_id=8442295094258, bullet_pos=(911.812, 663.4604)
[20:56:33] [INFO] [Bullet] Using shooter_position, distance=472.000244140625
[20:56:33] [INFO] [Bullet] Distance to wall: 472.000244140625 (32.1393645554518% of viewport)
[20:56:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:33] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:33] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:33] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:56:33] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:56:33] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:56:33] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:56:33] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:56:33] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:56:33] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:56:33] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:56:33] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:56:33] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:56:33] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:56:33] [ENEMY] [Enemy1] Memory: medium confidence (0.62) - transitioning to PURSUING
[20:56:33] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[20:56:33] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
[20:56:33] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[20:56:33] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[20:56:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(672.0982, 767.7556), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:33] [INFO] [LastChance] Threat detected: @Area2D@9619
[20:56:33] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:33] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:33] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:33] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:33] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:33] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:56:33] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:56:33] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:33] [ENEMY] [Enemy1] Death animation component initialized
[20:56:33] [ENEMY] [Enemy2] Death animation component initialized
[20:56:33] [ENEMY] [Enemy3] Death animation component initialized
[20:56:33] [ENEMY] [Enemy4] Death animation component initialized
[20:56:33] [ENEMY] [Enemy5] Death animation component initialized
[20:56:33] [ENEMY] [Enemy6] Death animation component initialized
[20:56:33] [ENEMY] [Enemy7] Death animation component initialized
[20:56:33] [ENEMY] [Enemy8] Death animation component initialized
[20:56:33] [ENEMY] [Enemy9] Death animation component initialized
[20:56:33] [ENEMY] [Enemy10] Death animation component initialized
[20:56:33] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:33] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:33] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:33] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:33] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:33] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:33] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:33] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:56:33] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:33] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:33] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:56:33] [ENEMY] [Enemy1] Registered as sound listener
[20:56:33] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:56:33] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:56:33] [ENEMY] [Enemy2] Registered as sound listener
[20:56:33] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:56:33] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:56:33] [ENEMY] [Enemy3] Registered as sound listener
[20:56:33] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:56:33] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:56:33] [ENEMY] [Enemy4] Registered as sound listener
[20:56:33] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:56:33] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:56:33] [ENEMY] [Enemy5] Registered as sound listener
[20:56:33] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:56:33] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:56:33] [ENEMY] [Enemy6] Registered as sound listener
[20:56:33] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:56:33] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:56:33] [ENEMY] [Enemy7] Registered as sound listener
[20:56:33] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:56:33] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:56:33] [ENEMY] [Enemy8] Registered as sound listener
[20:56:33] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:56:33] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:56:33] [ENEMY] [Enemy9] Registered as sound listener
[20:56:33] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:56:33] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:56:33] [ENEMY] [Enemy10] Registered as sound listener
[20:56:33] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:56:33] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:56:33] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:56:33] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:56:33] [INFO] [LastChance] Found player: Player
[20:56:33] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:56:33] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:56:33] [INFO] [LastChance] Connected to player Died signal (C#)
[20:56:33] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:56:33] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:56:33] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:56:34] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:56:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[20:56:34] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:56:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:34] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=8598977513030, bullet_pos=(41.69983, 702.3934)
[20:56:35] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[20:56:35] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[20:56:35] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:56:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=8598977513030, bullet_pos=(513.4371, 447.3879)
[20:56:35] [INFO] [Bullet] Using shooter_position, distance=1099.83935546875
[20:56:35] [INFO] [Bullet] Distance to wall: 1099.83935546875 (74.8900841401089% of viewport)
[20:56:35] [INFO] [Bullet] Distance-based penetration chance: 59.2949018365396%
[20:56:35] [INFO] [Bullet] Starting wall penetration at (513.4371, 447.3879)
[20:56:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.4093189239502
[20:56:35] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:35] [INFO] [Bullet] Exiting penetration at (548.9916, 428.1683) after traveling 35.4166679382324 pixels through wall
[20:56:35] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[20:56:35] [ENEMY] [Enemy3] Hit taken, health: 2/3
[20:56:35] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:35] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(0.999788, -0.020603), lethal=false
[20:56:35] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:35] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:35] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=0.9)
[20:56:35] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:56:35] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:56:35] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:56:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(679.1555, 759.757), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:35] [ENEMY] [Enemy2] Heard gunshot at (679.1555, 759.757), source_type=1, intensity=0.02, distance=349
[20:56:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:35] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:56:35] [INFO] [LastChance] Threat detected: Bullet
[20:56:35] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:35] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:56:35] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(672.0981, 767.7553), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:35] [INFO] [LastChance] Threat detected: @Area2D@9875
[20:56:35] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(665.0408, 775.7536), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:35] [INFO] [LastChance] Threat detected: @Area2D@9876
[20:56:35] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(657.9836, 783.7519), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:36] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:56:36] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:56:36] [INFO] [LastChance] Threat detected: @Area2D@9878
[20:56:36] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:36] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:56:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(611.1392, 761.8525), shooter_id=8596981025086, bullet_pos=(28.44391, 789.1287)
[20:56:36] [INFO] [Bullet] Using shooter_position, distance=583.333374023438
[20:56:36] [INFO] [Bullet] Distance to wall: 583.333374023438 (39.7202420927463% of viewport)
[20:56:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:36] [INFO] [Bullet] Starting wall penetration at (28.44391, 789.1287)
[20:56:36] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:56:36] [INFO] [Bullet] Exiting penetration at (-18.17171, 791.3109) after traveling 41.6666717529297 pixels through wall
[20:56:36] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(590.2131, 777.6077), shooter_id=8596981025086, bullet_pos=(395.0995, 704.577)
[20:56:36] [INFO] [Bullet] Using shooter_position, distance=208.33332824707
[20:56:36] [INFO] [Bullet] Distance to wall: 208.33332824707 (14.1857994115535% of viewport)
[20:56:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(604.0515, 767.2465), shooter_id=8596981025086, bullet_pos=(62.46107, 776.3332)
[20:56:36] [INFO] [Bullet] Using shooter_position, distance=541.666687011719
[20:56:36] [INFO] [Bullet] Distance to wall: 541.666687011719 (36.883080755837% of viewport)
[20:56:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:36] [INFO] [Bullet] Starting wall penetration at (62.46107, 776.3332)
[20:56:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.2013092041016
[20:56:36] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:36] [INFO] [Bullet] Exiting penetration at (15.80097, 777.116) after traveling 41.6666679382324 pixels through wall
[20:56:36] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 740.4444), shooter_id=8599799596980, bullet_pos=(920.6427, 704.6705)
[20:56:36] [INFO] [Bullet] Using shooter_position, distance=472.000335693359
[20:56:36] [INFO] [Bullet] Distance to wall: 472.000335693359 (32.1393707894459% of viewport)
[20:56:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:36] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:36] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:36] [ENEMY] [Enemy1] Death animation component initialized
[20:56:36] [ENEMY] [Enemy2] Death animation component initialized
[20:56:36] [ENEMY] [Enemy3] Death animation component initialized
[20:56:36] [ENEMY] [Enemy4] Death animation component initialized
[20:56:36] [ENEMY] [Enemy5] Death animation component initialized
[20:56:36] [ENEMY] [Enemy6] Death animation component initialized
[20:56:36] [ENEMY] [Enemy7] Death animation component initialized
[20:56:36] [ENEMY] [Enemy8] Death animation component initialized
[20:56:36] [ENEMY] [Enemy9] Death animation component initialized
[20:56:36] [ENEMY] [Enemy10] Death animation component initialized
[20:56:36] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:36] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:36] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:36] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:36] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:36] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:36] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:36] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:56:36] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:36] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:36] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:56:36] [ENEMY] [Enemy1] Registered as sound listener
[20:56:36] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:56:36] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:56:36] [ENEMY] [Enemy2] Registered as sound listener
[20:56:36] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:56:36] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:56:36] [ENEMY] [Enemy3] Registered as sound listener
[20:56:36] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:56:36] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:56:36] [ENEMY] [Enemy4] Registered as sound listener
[20:56:36] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:56:36] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:56:36] [ENEMY] [Enemy5] Registered as sound listener
[20:56:36] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:56:36] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:56:36] [ENEMY] [Enemy6] Registered as sound listener
[20:56:36] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:56:36] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:56:36] [ENEMY] [Enemy7] Registered as sound listener
[20:56:36] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:56:36] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:56:36] [ENEMY] [Enemy8] Registered as sound listener
[20:56:36] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:56:36] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:56:36] [ENEMY] [Enemy9] Registered as sound listener
[20:56:36] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:56:36] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:56:36] [ENEMY] [Enemy10] Registered as sound listener
[20:56:36] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:56:36] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:56:36] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:56:36] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:56:36] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:56:36] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:56:36] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:56:36] [INFO] [LastChance] Found player: Player
[20:56:36] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:56:36] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:56:36] [INFO] [LastChance] Connected to player Died signal (C#)
[20:56:36] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:56:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[20:56:37] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:56:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:37] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=8764551858952, bullet_pos=(41.69983, 702.3934)
[20:56:37] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[20:56:37] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[20:56:37] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:56:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=8764551858952, bullet_pos=(507.1949, 436.1632)
[20:56:38] [INFO] [Bullet] Using shooter_position, distance=1112.67102050781
[20:56:38] [INFO] [Bullet] Distance to wall: 1112.67102050781 (75.7638158079701% of viewport)
[20:56:38] [ENEMY] [Enemy3] Hit taken, health: 1/2
[20:56:38] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:38] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4832, 753.9004), dir=(0.99627, -0.086293), lethal=false
[20:56:38] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:38] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:38] [INFO] [ImpactEffects] Blood effect spawned at (684.4832, 753.9004) (scale=0.9)
[20:56:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=8764551858952, bullet_pos=(291.9277, 263.5317)
[20:56:38] [INFO] [Bullet] Using shooter_position, distance=1368.30517578125
[20:56:38] [INFO] [Bullet] Distance to wall: 1368.30517578125 (93.1704155103003% of viewport)
[20:56:38] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:56:38] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:56:38] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:56:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=8764551858952, bullet_pos=(53.56473, 422.4355)
[20:56:38] [INFO] [Bullet] Using shooter_position, distance=1386.94384765625
[20:56:38] [INFO] [Bullet] Distance to wall: 1386.94384765625 (94.4395569517645% of viewport)
[20:56:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(677.9207, 758.4756), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:38] [ENEMY] [Enemy2] Heard gunshot at (677.9207, 758.4756), source_type=1, intensity=0.02, distance=347
[20:56:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:38] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:56:38] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:56:38] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(669.1707, 764.576), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:38] [INFO] [LastChance] Threat detected: @Area2D@10141
[20:56:38] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(660.4207, 770.6763), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:38] [INFO] [LastChance] Threat detected: @Area2D@10142
[20:56:38] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:38] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:56:38] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:56:38] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:56:38] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:56:38] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:56:38] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:56:38] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:56:38] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:56:38] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:56:38] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:56:38] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:56:38] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:56:38] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:56:38] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:56:38] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:56:38] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:56:38] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[20:56:38] [INFO] [LastChance] Player died
[20:56:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(651.452, 776.9296), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:38] [INFO] [LastChance] Threat detected: @Area2D@10144
[20:56:38] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(611.2894, 772.291), shooter_id=8762555369600, bullet_pos=(57.75247, 969.15)
[20:56:38] [INFO] [Bullet] Using shooter_position, distance=587.500244140625
[20:56:38] [INFO] [Bullet] Distance to wall: 587.500244140625 (40.0039719412241% of viewport)
[20:56:38] [INFO] [Bullet] Distance-based penetration chance: 99.9953660685718%
[20:56:38] [INFO] [Bullet] Starting wall penetration at (57.75247, 969.15)
[20:56:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19.3341007232666
[20:56:39] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:39] [INFO] [Bullet] Exiting penetration at (13.7836, 984.787) after traveling 41.6666679382324 pixels through wall
[20:56:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:39] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:39] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:39] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:39] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:39] [ENEMY] [Enemy1] Death animation component initialized
[20:56:39] [ENEMY] [Enemy2] Death animation component initialized
[20:56:39] [ENEMY] [Enemy3] Death animation component initialized
[20:56:39] [ENEMY] [Enemy4] Death animation component initialized
[20:56:39] [ENEMY] [Enemy5] Death animation component initialized
[20:56:39] [ENEMY] [Enemy6] Death animation component initialized
[20:56:39] [ENEMY] [Enemy7] Death animation component initialized
[20:56:39] [ENEMY] [Enemy8] Death animation component initialized
[20:56:39] [ENEMY] [Enemy9] Death animation component initialized
[20:56:39] [ENEMY] [Enemy10] Death animation component initialized
[20:56:39] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:39] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:39] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:39] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:39] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:39] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:39] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:39] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:56:39] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:39] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:39] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:56:39] [ENEMY] [Enemy1] Registered as sound listener
[20:56:39] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:56:39] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:56:39] [ENEMY] [Enemy2] Registered as sound listener
[20:56:39] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:56:39] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:56:39] [ENEMY] [Enemy3] Registered as sound listener
[20:56:39] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:56:39] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:56:39] [ENEMY] [Enemy4] Registered as sound listener
[20:56:39] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:56:39] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:56:39] [ENEMY] [Enemy5] Registered as sound listener
[20:56:39] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:56:39] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:56:39] [ENEMY] [Enemy6] Registered as sound listener
[20:56:39] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:56:39] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:56:39] [ENEMY] [Enemy7] Registered as sound listener
[20:56:39] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:56:39] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:56:39] [ENEMY] [Enemy8] Registered as sound listener
[20:56:39] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:56:39] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:56:39] [ENEMY] [Enemy9] Registered as sound listener
[20:56:39] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:56:39] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:56:39] [ENEMY] [Enemy10] Registered as sound listener
[20:56:39] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:56:39] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:56:39] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:56:39] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:56:39] [INFO] [LastChance] Found player: Player
[20:56:39] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:56:39] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:56:39] [INFO] [LastChance] Connected to player Died signal (C#)
[20:56:39] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:56:39] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:56:39] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:56:39] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:56:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[20:56:40] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:56:40] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:40] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=8936333773577, bullet_pos=(41.69983, 702.3934)
[20:56:40] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[20:56:40] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[20:56:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=8936333773577, bullet_pos=(305.1219, 458.2427)
[20:56:40] [INFO] [Bullet] Using shooter_position, distance=1198.7119140625
[20:56:40] [INFO] [Bullet] Distance to wall: 1198.7119140625 (81.6224984653609% of viewport)
[20:56:40] [ENEMY] [Enemy2] Hit taken, health: 1/2
[20:56:40] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:40] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(0.643281, 0.76563), lethal=false
[20:56:40] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:40] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:40] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[20:56:41] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:56:41] [ENEMY] [Enemy3] Hit taken, health: 3/4
[20:56:41] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:41] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.99648, -0.083834), lethal=false
[20:56:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:41] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:41] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=0.9)
[20:56:41] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:56:41] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:56:41] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:56:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(693.6616, 754.8812), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:41] [ENEMY] [Enemy2] Heard gunshot at (693.6616, 754.8812), source_type=1, intensity=0.02, distance=358
[20:56:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:41] [INFO] [LastChance] Threat detected: Bullet
[20:56:41] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:41] [ENEMY] [Enemy3] Hit taken, health: 2/4
[20:56:41] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:41] [INFO] [ImpactEffects] spawn_blood_effect called at (691.5488, 756.5083), dir=(0.99397, -0.109653), lethal=false
[20:56:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:41] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:41] [INFO] [ImpactEffects] Blood effect spawned at (691.5488, 756.5083) (scale=0.9)
[20:56:41] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:56:41] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:56:41] [ENEMY] [Enemy10] FLANKING started: target=(681.0359, 750.9612), side=left, pos=(1022.671, 1432.253)
[20:56:41] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:56:41] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(627.8481, 772.1778), shooter_id=8934337284189, bullet_pos=(507.9207, 807.4258)
[20:56:41] [INFO] [Bullet] Using shooter_position, distance=124.999946594238
[20:56:41] [INFO] [Bullet] Distance to wall: 124.999946594238 (8.51147621823541% of viewport)
[20:56:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:41] [INFO] [Bullet] Starting wall penetration at (507.9207, 807.4258)
[20:56:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(685.2104, 761.3895), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38.4109039306641
[20:56:41] [INFO] [LastChance] Threat detected: @Area2D@10408
[20:56:41] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:41] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:41] [INFO] [Bullet] Exiting penetration at (463.1479, 820.585) after traveling 41.6666679382324 pixels through wall
[20:56:41] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:41] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:56:41] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:56:41] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:56:41] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:56:41] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:56:41] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:56:41] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:56:41] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:56:41] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:56:41] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:56:41] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:56:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(676.7594, 767.8978), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:41] [INFO] [LastChance] Threat detected: Bullet
[20:56:41] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:42] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[20:56:42] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[20:56:42] [INFO] [PenultimateHit] Player died - ending penultimate effect
[20:56:42] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:56:42] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:56:42] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[20:56:42] [INFO] [LastChance] Player died
[20:56:42] [ENEMY] [Enemy1] Memory: medium confidence (0.60) - transitioning to PURSUING
[20:56:42] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[20:56:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.9349, 784.8906), shooter_id=8937155856683, bullet_pos=(915.4163, 708.1646)
[20:56:42] [INFO] [Bullet] Using shooter_position, distance=438.249969482422
[20:56:42] [INFO] [Bullet] Distance to wall: 438.249969482422 (29.8412462926921% of viewport)
[20:56:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:42] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:42] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:56:42] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:56:42] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:42] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:42] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:42] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:42] [ENEMY] [Enemy1] Death animation component initialized
[20:56:42] [ENEMY] [Enemy2] Death animation component initialized
[20:56:42] [ENEMY] [Enemy3] Death animation component initialized
[20:56:42] [ENEMY] [Enemy4] Death animation component initialized
[20:56:42] [ENEMY] [Enemy5] Death animation component initialized
[20:56:42] [ENEMY] [Enemy6] Death animation component initialized
[20:56:42] [ENEMY] [Enemy7] Death animation component initialized
[20:56:42] [ENEMY] [Enemy8] Death animation component initialized
[20:56:42] [ENEMY] [Enemy9] Death animation component initialized
[20:56:42] [ENEMY] [Enemy10] Death animation component initialized
[20:56:42] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:42] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:42] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:42] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:42] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:42] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:42] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:42] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:56:42] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:42] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:42] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:56:42] [ENEMY] [Enemy1] Registered as sound listener
[20:56:42] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:56:42] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:56:42] [ENEMY] [Enemy2] Registered as sound listener
[20:56:42] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:56:42] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:56:42] [ENEMY] [Enemy3] Registered as sound listener
[20:56:42] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:56:42] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:56:42] [ENEMY] [Enemy4] Registered as sound listener
[20:56:42] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:56:42] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:56:42] [ENEMY] [Enemy5] Registered as sound listener
[20:56:42] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:56:42] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:56:42] [ENEMY] [Enemy6] Registered as sound listener
[20:56:42] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:56:42] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:56:42] [ENEMY] [Enemy7] Registered as sound listener
[20:56:42] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:56:42] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:56:42] [ENEMY] [Enemy8] Registered as sound listener
[20:56:42] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:56:42] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:56:42] [ENEMY] [Enemy9] Registered as sound listener
[20:56:42] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:56:42] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:56:42] [ENEMY] [Enemy10] Registered as sound listener
[20:56:42] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:56:43] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:56:43] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:56:43] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:56:43] [INFO] [LastChance] Found player: Player
[20:56:43] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:56:43] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:56:43] [INFO] [LastChance] Connected to player Died signal (C#)
[20:56:43] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:56:43] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:56:43] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:56:43] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:56:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.485, 1465.339), source=ENEMY (Enemy10), range=1469, listeners=20
[20:56:44] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:56:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:44] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:44] [ENEMY] [Enemy4] Memory: high confidence (0.87) - transitioning to PURSUING
[20:56:44] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:56:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.104, 1430.269), shooter_id=9172808633237, bullet_pos=(48.36539, 693.5164)
[20:56:44] [INFO] [Bullet] Using shooter_position, distance=1208.33276367188
[20:56:44] [INFO] [Bullet] Distance to wall: 1208.33276367188 (82.2775998064458% of viewport)
[20:56:44] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:56:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.104, 1430.269), shooter_id=9172808633237, bullet_pos=(283.5112, 470.9842)
[20:56:44] [INFO] [Bullet] Using shooter_position, distance=1200.986328125
[20:56:44] [INFO] [Bullet] Distance to wall: 1200.986328125 (81.7773675011552% of viewport)
[20:56:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.104, 1430.269), shooter_id=9172808633237, bullet_pos=(458.5681, 684.2833)
[20:56:44] [INFO] [Bullet] Using shooter_position, distance=925.359680175781
[20:56:44] [INFO] [Bullet] Distance to wall: 925.359680175781 (63.0094422095787% of viewport)
[20:56:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:45] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[20:56:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:45] [INFO] [LastChance] Threat detected: @Area2D@10674
[20:56:45] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:45] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:56:45] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:56:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.9321, 775.0596), shooter_id=9173630715524, bullet_pos=(910.5962, 792.0023)
[20:56:45] [INFO] [Bullet] Using shooter_position, distance=427.000305175781
[20:56:45] [INFO] [Bullet] Distance to wall: 427.000305175781 (29.0752359637444% of viewport)
[20:56:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:45] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:45] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:56:45] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:56:45] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:56:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.6613, 760.6381), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:45] [INFO] [LastChance] Threat detected: Bullet
[20:56:45] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:45] [ENEMY] [Enemy3] Hit taken, health: 1/2
[20:56:45] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:45] [INFO] [ImpactEffects] spawn_blood_effect called at (681.5935, 762.7657), dir=(0.998653, 0.05188), lethal=false
[20:56:45] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:45] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:45] [INFO] [ImpactEffects] Blood effect spawned at (681.5935, 762.7657) (scale=0.9)
[20:56:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:56:45] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:56:45] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:56:45] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:56:45] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:56:45] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:56:45] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:56:45] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:56:45] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:56:45] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:56:45] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:56:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(663.1873, 775.5316), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:45] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:45] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:45] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:45] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:56:45] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:56:45] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:45] [ENEMY] [Enemy1] Death animation component initialized
[20:56:45] [ENEMY] [Enemy2] Death animation component initialized
[20:56:45] [ENEMY] [Enemy3] Death animation component initialized
[20:56:45] [ENEMY] [Enemy4] Death animation component initialized
[20:56:45] [ENEMY] [Enemy5] Death animation component initialized
[20:56:45] [ENEMY] [Enemy6] Death animation component initialized
[20:56:45] [ENEMY] [Enemy7] Death animation component initialized
[20:56:45] [ENEMY] [Enemy8] Death animation component initialized
[20:56:45] [ENEMY] [Enemy9] Death animation component initialized
[20:56:45] [ENEMY] [Enemy10] Death animation component initialized
[20:56:45] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:45] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:45] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:45] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:45] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:45] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:45] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:45] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:56:45] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:45] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:45] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:56:45] [ENEMY] [Enemy1] Registered as sound listener
[20:56:45] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:56:45] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:56:45] [ENEMY] [Enemy2] Registered as sound listener
[20:56:45] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:56:45] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:56:45] [ENEMY] [Enemy3] Registered as sound listener
[20:56:45] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:56:45] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:56:45] [ENEMY] [Enemy4] Registered as sound listener
[20:56:45] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:56:45] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:56:45] [ENEMY] [Enemy5] Registered as sound listener
[20:56:45] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:56:45] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:56:45] [ENEMY] [Enemy6] Registered as sound listener
[20:56:45] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:56:45] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:56:45] [ENEMY] [Enemy7] Registered as sound listener
[20:56:45] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:56:45] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:56:45] [ENEMY] [Enemy8] Registered as sound listener
[20:56:45] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:56:45] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:56:45] [ENEMY] [Enemy9] Registered as sound listener
[20:56:45] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:56:45] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:56:45] [ENEMY] [Enemy10] Registered as sound listener
[20:56:45] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:56:45] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:56:45] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:56:45] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:56:45] [INFO] [LastChance] Found player: Player
[20:56:45] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:56:45] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:56:45] [INFO] [LastChance] Connected to player Died signal (C#)
[20:56:45] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:56:45] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:56:45] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:56:46] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:56:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.448, 1465.39), source=ENEMY (Enemy10), range=1469, listeners=20
[20:56:46] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:56:46] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:46] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.979, 1430.472), shooter_id=9346066943000, bullet_pos=(46.35331, 696.1766)
[20:56:47] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
[20:56:47] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
[20:56:47] [ENEMY] [Enemy4] Memory: high confidence (0.86) - transitioning to PURSUING
[20:56:47] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:56:47] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:56:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.979, 1430.472), shooter_id=9346066943000, bullet_pos=(508.1747, 359.2433)
[20:56:47] [INFO] [Bullet] Using shooter_position, distance=1181.24487304688
[20:56:47] [INFO] [Bullet] Distance to wall: 1181.24487304688 (80.4331355235508% of viewport)
[20:56:47] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:56:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.979, 1430.472), shooter_id=9346066943000, bullet_pos=(199.7588, 64.71588)
[20:56:47] [INFO] [Bullet] Using shooter_position, distance=1585.96337890625
[20:56:47] [INFO] [Bullet] Distance to wall: 1585.96337890625 (107.991162799225% of viewport)
[20:56:47] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:56:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.935, 783.5018), shooter_id=9346889025263, bullet_pos=(910.9234, 780.4079)
[20:56:47] [INFO] [Bullet] Using shooter_position, distance=426.999664306641
[20:56:47] [INFO] [Bullet] Distance to wall: 426.999664306641 (29.0751923257861% of viewport)
[20:56:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:47] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.979, 1430.472), shooter_id=9346066943000, bullet_pos=(47.11442, 167.6712)
[20:56:47] [INFO] [Bullet] Using shooter_position, distance=1585.5869140625
[20:56:47] [INFO] [Bullet] Distance to wall: 1585.5869140625 (107.965528615756% of viewport)
[20:56:48] [ENEMY] [Enemy3] Hit taken, health: 1/2
[20:56:48] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:48] [INFO] [ImpactEffects] spawn_blood_effect called at (668.2162, 776.0048), dir=(0.999928, -0.011973), lethal=false
[20:56:48] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:48] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:48] [INFO] [ImpactEffects] Blood effect spawned at (668.2162, 776.0048) (scale=0.9)
[20:56:48] [ENEMY] [Enemy1] Hit taken, health: 3/4
[20:56:48] [ENEMY] [Enemy1] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:48] [INFO] [ImpactEffects] spawn_blood_effect called at (300, 350), dir=(0.808961, 0.587862), lethal=false
[20:56:48] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:48] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:48] [INFO] [ImpactEffects] Blood effect spawned at (300, 350) (scale=1)
[20:56:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(677.8353, 914.0662), source=ENEMY (Enemy4), range=1469, listeners=10
[20:56:48] [ENEMY] [Enemy2] Heard gunshot at (677.8353, 914.0662), source_type=1, intensity=0.01, distance=458
[20:56:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:48] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:56:48] [INFO] [LastChance] Threat detected: Bullet
[20:56:48] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:48] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:56:48] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(619.7719, 878.5804), shooter_id=9344355666551, bullet_pos=(521.2886, 801.5998)
[20:56:48] [INFO] [Bullet] Using shooter_position, distance=124.999908447266
[20:56:48] [INFO] [Bullet] Distance to wall: 124.999908447266 (8.51147362073789% of viewport)
[20:56:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:48] [INFO] [Bullet] Starting wall penetration at (521.2886, 801.5998)
[20:56:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 44.0689086914063
[20:56:48] [INFO] [Bullet] Body exited signal received for penetrating body
[20:56:48] [INFO] [Bullet] Exiting penetration at (484.5215, 772.8604) after traveling 41.6666679382324 pixels through wall
[20:56:48] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:48] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:56:48] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:56:48] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:56:48] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:56:48] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:56:48] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:56:48] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:56:48] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:56:48] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:56:48] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:56:48] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:56:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(677.8353, 914.0662), source=ENEMY (Enemy4), range=1469, listeners=10
[20:56:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:48] [INFO] [LastChance] Threat detected: Bullet
[20:56:48] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:48] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:48] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:48] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:48] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:56:48] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:56:48] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:48] [ENEMY] [Enemy1] Death animation component initialized
[20:56:48] [ENEMY] [Enemy2] Death animation component initialized
[20:56:48] [ENEMY] [Enemy3] Death animation component initialized
[20:56:48] [ENEMY] [Enemy4] Death animation component initialized
[20:56:48] [ENEMY] [Enemy5] Death animation component initialized
[20:56:48] [ENEMY] [Enemy6] Death animation component initialized
[20:56:48] [ENEMY] [Enemy7] Death animation component initialized
[20:56:48] [ENEMY] [Enemy8] Death animation component initialized
[20:56:48] [ENEMY] [Enemy9] Death animation component initialized
[20:56:48] [ENEMY] [Enemy10] Death animation component initialized
[20:56:48] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:48] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:48] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:48] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:48] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:48] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:48] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:48] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[20:56:48] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:48] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:48] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:56:48] [ENEMY] [Enemy1] Registered as sound listener
[20:56:48] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:56:48] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:56:48] [ENEMY] [Enemy2] Registered as sound listener
[20:56:48] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:56:48] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:56:48] [ENEMY] [Enemy3] Registered as sound listener
[20:56:48] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:56:48] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:56:48] [ENEMY] [Enemy4] Registered as sound listener
[20:56:48] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:56:48] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:56:48] [ENEMY] [Enemy5] Registered as sound listener
[20:56:48] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:56:48] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:56:48] [ENEMY] [Enemy6] Registered as sound listener
[20:56:48] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:56:48] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:56:48] [ENEMY] [Enemy7] Registered as sound listener
[20:56:48] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:56:48] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:56:48] [ENEMY] [Enemy8] Registered as sound listener
[20:56:48] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:56:48] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:56:48] [ENEMY] [Enemy9] Registered as sound listener
[20:56:48] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:56:48] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:56:48] [ENEMY] [Enemy10] Registered as sound listener
[20:56:48] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:56:48] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:56:48] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:56:48] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:56:48] [INFO] [LastChance] Found player: Player
[20:56:48] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:56:48] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:56:48] [INFO] [LastChance] Connected to player Died signal (C#)
[20:56:48] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:56:48] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:56:48] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:56:48] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:56:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[20:56:49] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:56:49] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:49] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:56:49] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:56:49] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=9523955763517, bullet_pos=(41.69983, 702.3934)
[20:56:49] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[20:56:49] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[20:56:50] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:56:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=9523955763517, bullet_pos=(271.598, 474.4442)
[20:56:50] [INFO] [Bullet] Using shooter_position, distance=1205.71691894531
[20:56:50] [INFO] [Bullet] Distance to wall: 1205.71691894531 (82.0994821288998% of viewport)
[20:56:50] [ENEMY] [Enemy2] Memory: high confidence (0.90) - transitioning to PURSUING
[20:56:50] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[20:56:50] [INFO] [LastChance] Threat detected: Bullet
[20:56:50] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=9523955763517, bullet_pos=(442.8907, 690.7783)
[20:56:50] [INFO] [Bullet] Using shooter_position, distance=929.819885253906
[20:56:50] [INFO] [Bullet] Distance to wall: 929.819885253906 (63.3131457749422% of viewport)
[20:56:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=9523955763517, bullet_pos=(502.3632, 601.403)
[20:56:50] [INFO] [Bullet] Using shooter_position, distance=970.278869628906
[20:56:50] [INFO] [Bullet] Distance to wall: 970.278869628906 (66.068072418548% of viewport)
[20:56:50] [INFO] [Bullet] Distance-based penetration chance: 69.5872488450273%
[20:56:50] [INFO] [Bullet] Starting wall penetration at (502.3632, 601.403)
[20:56:50] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:56:50] [INFO] [Bullet] Exiting penetration at (519.3088, 575.9371) after traveling 25.5885448455811 pixels through wall
[20:56:50] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
[20:56:50] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[20:56:50] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:56:50] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:56:50] [ENEMY] [Enemy3] Hit taken, health: 1/2
[20:56:50] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:50] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(1, -0.000817), lethal=false
[20:56:50] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:50] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:50] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=0.9)
[20:56:50] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:56:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(693.8083, 755.066), source=ENEMY (Enemy3), range=1469, listeners=10
[20:56:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:56:50] [ENEMY] [Enemy1] Memory: medium confidence (0.76) - transitioning to PURSUING
[20:56:50] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[20:56:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(626.4933, 765.0309), shooter_id=9521959274980, bullet_pos=(505.9389, 798.0704)
[20:56:50] [INFO] [Bullet] Using shooter_position, distance=124.999969482422
[20:56:50] [INFO] [Bullet] Distance to wall: 124.999969482422 (8.51147777673392% of viewport)
[20:56:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:50] [INFO] [Bullet] Starting wall penetration at (505.9389, 798.0704)
[20:56:50] [ENEMY] [Enemy3] Hit taken, health: 0/2
[20:56:50] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:50] [INFO] [ImpactEffects] spawn_blood_effect called at (685.5527, 761.8206), dir=(0.999938, -0.011106), lethal=true
[20:56:50] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:50] [INFO] [ImpactEffects] Blood decals scheduled: 8 to spawn at particle landing times
[20:56:50] [INFO] [ImpactEffects] Blood effect spawned at (685.5527, 761.8206) (scale=1.35)
[20:56:50] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[20:56:50] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:56:50] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[20:56:50] [INFO] [DeathAnim] Started - Angle: -0.6 deg, Index: 11
[20:56:50] [ENEMY] [Enemy3] Death animation started with hit direction: (0.999938, -0.011106)
[20:56:50] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:56:50] [INFO] [Bullet] Exiting penetration at (460.9319, 810.4052) after traveling 41.6666641235352 pixels through wall
[20:56:50] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:56:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.9327, 761.8032), shooter_id=9524777846263, bullet_pos=(910.7578, 774.0176)
[20:56:51] [INFO] [Bullet] Using shooter_position, distance=426.999847412109
[20:56:51] [INFO] [Bullet] Distance to wall: 426.999847412109 (29.0752047937742% of viewport)
[20:56:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:51] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:51] [ENEMY] [Enemy10] FLANKING started: target=(411.5532, 948.2468), side=right, pos=(1022.668, 1432.257)
[20:56:51] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:56:51] [ENEMY] [Enemy3] Ragdoll activated
[20:56:51] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:56:52] [ENEMY] [Enemy3] Death animation completed
[20:56:52] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[20:56:52] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[20:56:53] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[20:56:53] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:56:53] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[20:56:53] [ENEMY] [Enemy4] Hit taken, health: 3/4
[20:56:53] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:53] [INFO] [ImpactEffects] spawn_blood_effect called at (565.189, 910.1688), dir=(0.207148, 0.978309), lethal=false
[20:56:53] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:53] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:53] [INFO] [ImpactEffects] Wall found for blood splatter at (584.21, 1000) (dist=91 px)
[20:56:53] [INFO] [ImpactEffects] Blood effect spawned at (565.189, 910.1688) (scale=0.9)
[20:56:53] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[20:56:53] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[20:56:53] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:53] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[20:56:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(572.9891, 911.9456), source=ENEMY (Enemy4), range=1469, listeners=9
[20:56:53] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=4
[20:56:53] [INFO] [LastChance] Threat detected: Bullet
[20:56:53] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:53] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:56:53] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:56:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(583.3892, 914.3148), source=ENEMY (Enemy4), range=1469, listeners=9
[20:56:53] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=4
[20:56:53] [INFO] [LastChance] Threat detected: Bullet
[20:56:53] [INFO] [LastChance] Not in hard mode - effect disabled
[20:56:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:56:53] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:56:53] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:56:53] [ENEMY] [Enemy4] Hit taken, health: 2/4
[20:56:53] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:53] [INFO] [ImpactEffects] spawn_blood_effect called at (588.5893, 915.4993), dir=(-0.29529, 0.955408), lethal=false
[20:56:53] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:53] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:53] [INFO] [ImpactEffects] Wall found for blood splatter at (562.4725, 1000) (dist=88 px)
[20:56:53] [INFO] [ImpactEffects] Blood effect spawned at (588.5893, 915.4993) (scale=0.9)
[20:56:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(593.7894, 916.6839), source=ENEMY (Enemy4), range=1469, listeners=9
[20:56:54] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=4
[20:56:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:56:54] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:56:54] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:56:54] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:56:54] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:56:54] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:56:54] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:56:54] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:56:54] [INFO] [PenultimateHit] Applying saturation to 9 enemies
[20:56:54] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:56:54] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:56:54] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:56:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:54] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:56:54] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:56:54] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:54] [ENEMY] [Enemy1] Death animation component initialized
[20:56:54] [ENEMY] [Enemy2] Death animation component initialized
[20:56:54] [ENEMY] [Enemy3] Death animation component initialized
[20:56:54] [ENEMY] [Enemy4] Death animation component initialized
[20:56:54] [ENEMY] [Enemy5] Death animation component initialized
[20:56:54] [ENEMY] [Enemy6] Death animation component initialized
[20:56:54] [ENEMY] [Enemy7] Death animation component initialized
[20:56:54] [ENEMY] [Enemy8] Death animation component initialized
[20:56:54] [ENEMY] [Enemy9] Death animation component initialized
[20:56:54] [ENEMY] [Enemy10] Death animation component initialized
[20:56:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:54] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:54] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:54] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:54] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:54] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:54] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:56:54] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:54] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[20:56:54] [ENEMY] [Enemy1] Registered as sound listener
[20:56:54] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[20:56:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[20:56:54] [ENEMY] [Enemy2] Registered as sound listener
[20:56:54] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:56:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[20:56:54] [ENEMY] [Enemy3] Registered as sound listener
[20:56:54] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:56:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[20:56:54] [ENEMY] [Enemy4] Registered as sound listener
[20:56:54] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:56:54] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[20:56:54] [ENEMY] [Enemy5] Registered as sound listener
[20:56:54] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:56:54] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[20:56:54] [ENEMY] [Enemy6] Registered as sound listener
[20:56:54] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:56:54] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[20:56:54] [ENEMY] [Enemy7] Registered as sound listener
[20:56:54] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:56:54] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[20:56:54] [ENEMY] [Enemy8] Registered as sound listener
[20:56:54] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:56:54] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[20:56:54] [ENEMY] [Enemy9] Registered as sound listener
[20:56:54] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:56:54] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[20:56:54] [ENEMY] [Enemy10] Registered as sound listener
[20:56:54] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[20:56:55] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:56:55] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:56:55] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:56:55] [INFO] [LastChance] Found player: Player
[20:56:55] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:56:55] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:56:55] [INFO] [LastChance] Connected to player Died signal (C#)
[20:56:55] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:56:55] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:56:55] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:56:55] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:56:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.482, 1465.343), source=ENEMY (Enemy10), range=1469, listeners=19
[20:56:56] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[20:56:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:56] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:56] [ENEMY] [Enemy4] Memory: high confidence (0.86) - transitioning to PURSUING
[20:56:56] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:56:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.057, 1430.357), shooter_id=9887283153052, bullet_pos=(47.30083, 694.9283)
[20:56:56] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
[20:56:56] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
[20:56:56] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:56:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.057, 1430.357), shooter_id=9887283153052, bullet_pos=(329.5092, 472.759)
[20:56:56] [INFO] [Bullet] Using shooter_position, distance=1172.48095703125
[20:56:56] [INFO] [Bullet] Distance to wall: 1172.48095703125 (79.8363843666263% of viewport)
[20:56:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.057, 1430.357), shooter_id=9887283153052, bullet_pos=(511.9748, 587.8477)
[20:56:56] [INFO] [Bullet] Using shooter_position, distance=976.698364257813
[20:56:56] [INFO] [Bullet] Distance to wall: 976.698364257813 (66.50518761224% of viewport)
[20:56:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.057, 1430.357), shooter_id=9887283153052, bullet_pos=(325.8276, 684.4228)
[20:56:56] [INFO] [Bullet] Using shooter_position, distance=1009.51995849609
[20:56:56] [INFO] [Bullet] Distance to wall: 1009.51995849609 (68.7400703175145% of viewport)
[20:56:57] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:56:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(474.9447, 787.4993), shooter_id=9888105236083, bullet_pos=(924.313, 776.6044)
[20:56:57] [INFO] [Bullet] Using shooter_position, distance=449.500305175781
[20:56:57] [INFO] [Bullet] Distance to wall: 449.500305175781 (30.6073023375961% of viewport)
[20:56:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:56:57] [INFO] [Bullet] Caliber cannot penetrate walls
[20:56:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.057, 1430.357), shooter_id=9887283153052, bullet_pos=(52.52197, 594.3887)
[20:56:57] [INFO] [Bullet] Using shooter_position, distance=1268.09814453125
[20:56:57] [INFO] [Bullet] Distance to wall: 1268.09814453125 (86.3471344880054% of viewport)
[20:56:57] [INFO] [Bullet] Distance-based penetration chance: 45.9283430973271%
[20:56:57] [INFO] [Bullet] Penetration failed (distance roll)
[20:56:57] [ENEMY] [Enemy3] Hit taken, health: 2/3
[20:56:57] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:56:57] [INFO] [ImpactEffects] spawn_blood_effect called at (675.2051, 766.65), dir=(0.99973, -0.023251), lethal=false
[20:56:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:56:57] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:56:57] [INFO] [ImpactEffects] Blood effect spawned at (675.2051, 766.65) (scale=0.9)
[20:56:57] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:57] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:56:57] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:56:57] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:56:57] [ENEMY] [Enemy1] Death animation component initialized
[20:56:57] [ENEMY] [Enemy2] Death animation component initialized
[20:56:57] [ENEMY] [Enemy3] Death animation component initialized
[20:56:57] [ENEMY] [Enemy4] Death animation component initialized
[20:56:57] [ENEMY] [Enemy5] Death animation component initialized
[20:56:57] [ENEMY] [Enemy6] Death animation component initialized
[20:56:57] [ENEMY] [Enemy7] Death animation component initialized
[20:56:57] [ENEMY] [Enemy8] Death animation component initialized
[20:56:57] [ENEMY] [Enemy9] Death animation component initialized
[20:56:57] [ENEMY] [Enemy10] Death animation component initialized
[20:56:57] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:56:57] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:56:57] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:56:57] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:56:57] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:56:57] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:56:57] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:56:57] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:56:57] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:56:57] [INFO] [ScoreManager] Level started with 10 enemies
[20:56:57] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:56:57] [ENEMY] [Enemy1] Registered as sound listener
[20:56:57] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:56:57] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:56:57] [ENEMY] [Enemy2] Registered as sound listener
[20:56:57] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[20:56:57] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:56:57] [ENEMY] [Enemy3] Registered as sound listener
[20:56:57] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:56:57] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:56:57] [ENEMY] [Enemy4] Registered as sound listener
[20:56:57] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:56:57] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:56:57] [ENEMY] [Enemy5] Registered as sound listener
[20:56:57] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:56:57] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:56:57] [ENEMY] [Enemy6] Registered as sound listener
[20:56:57] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:56:57] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:56:57] [ENEMY] [Enemy7] Registered as sound listener
[20:56:57] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:56:57] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:56:57] [ENEMY] [Enemy8] Registered as sound listener
[20:56:57] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:56:57] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:56:57] [ENEMY] [Enemy9] Registered as sound listener
[20:56:57] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:56:57] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:56:57] [ENEMY] [Enemy10] Registered as sound listener
[20:56:57] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:56:57] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:56:57] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:56:57] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:56:57] [INFO] [LastChance] Found player: Player
[20:56:57] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:56:57] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:56:57] [INFO] [LastChance] Connected to player Died signal (C#)
[20:56:57] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:56:57] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:56:57] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:56:58] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:56:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.275, 1465.656), source=ENEMY (Enemy10), range=1469, listeners=20
[20:56:59] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:56:59] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:56:59] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:56:59] [ENEMY] [Enemy4] Memory: high confidence (0.89) - transitioning to PURSUING
[20:56:59] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:56:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.571, 1431.15), shooter_id=10052823944258, bullet_pos=(40.86603, 703.5408)
[20:56:59] [INFO] [Bullet] Using shooter_position, distance=1208.33374023438
[20:56:59] [INFO] [Bullet] Distance to wall: 1208.33374023438 (82.2776663023821% of viewport)
[20:56:59] [ENEMY] [Enemy3] Memory: medium confidence (0.75) - transitioning to PURSUING
[20:56:59] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[20:56:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.571, 1431.15), shooter_id=10052823944258, bullet_pos=(514.9252, 452.8777)
[20:56:59] [INFO] [Bullet] Using shooter_position, distance=1094.41748046875
[20:56:59] [INFO] [Bullet] Distance to wall: 1094.41748046875 (74.5208987014099% of viewport)
[20:57:00] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
[20:57:00] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:57:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.935, 770.0589), shooter_id=10053646026687, bullet_pos=(910.826, 779.7076)
[20:57:00] [INFO] [Bullet] Using shooter_position, distance=427.000122070313
[20:57:00] [INFO] [Bullet] Distance to wall: 427.000122070313 (29.0752234957563% of viewport)
[20:57:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:57:00] [INFO] [Bullet] Caliber cannot penetrate walls
[20:57:00] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:57:00] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:57:00] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:57:00] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:57:00] [ENEMY] [Enemy1] Death animation component initialized
[20:57:00] [ENEMY] [Enemy2] Death animation component initialized
[20:57:00] [ENEMY] [Enemy3] Death animation component initialized
[20:57:00] [ENEMY] [Enemy4] Death animation component initialized
[20:57:00] [ENEMY] [Enemy5] Death animation component initialized
[20:57:00] [ENEMY] [Enemy6] Death animation component initialized
[20:57:00] [ENEMY] [Enemy7] Death animation component initialized
[20:57:00] [ENEMY] [Enemy8] Death animation component initialized
[20:57:00] [ENEMY] [Enemy9] Death animation component initialized
[20:57:00] [ENEMY] [Enemy10] Death animation component initialized
[20:57:00] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:57:00] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:57:00] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:57:00] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:57:00] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:57:00] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:57:00] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:57:00] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:57:00] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:57:00] [INFO] [ScoreManager] Level started with 10 enemies
[20:57:00] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:57:00] [ENEMY] [Enemy1] Registered as sound listener
[20:57:00] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:57:00] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:57:00] [ENEMY] [Enemy2] Registered as sound listener
[20:57:00] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:57:00] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:57:00] [ENEMY] [Enemy3] Registered as sound listener
[20:57:00] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[20:57:00] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:57:00] [ENEMY] [Enemy4] Registered as sound listener
[20:57:00] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:57:00] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:57:00] [ENEMY] [Enemy5] Registered as sound listener
[20:57:00] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[20:57:00] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:57:00] [ENEMY] [Enemy6] Registered as sound listener
[20:57:00] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[20:57:00] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:57:00] [ENEMY] [Enemy7] Registered as sound listener
[20:57:00] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:57:00] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:57:00] [ENEMY] [Enemy8] Registered as sound listener
[20:57:00] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:57:00] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:57:00] [ENEMY] [Enemy9] Registered as sound listener
[20:57:00] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:57:00] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:57:00] [ENEMY] [Enemy10] Registered as sound listener
[20:57:00] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[20:57:00] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:57:00] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:57:00] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:57:00] [INFO] [LastChance] Found player: Player
[20:57:00] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:57:00] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:57:00] [INFO] [LastChance] Connected to player Died signal (C#)
[20:57:00] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:57:00] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:57:00] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:57:00] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:57:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.414, 1465.437), source=ENEMY (Enemy10), range=1469, listeners=20
[20:57:01] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:57:01] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:57:01] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:57:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.844, 1430.694), shooter_id=10218398288937, bullet_pos=(44.04198, 699.2516)
[20:57:01] [INFO] [Bullet] Using shooter_position, distance=1208.33410644531
[20:57:01] [INFO] [Bullet] Distance to wall: 1208.33410644531 (82.2776912383582% of viewport)
[20:57:01] [INFO] [Bullet] Distance-based penetration chance: 50.6760268885821%
[20:57:01] [INFO] [Bullet] Penetration failed (distance roll)
[20:57:02] [ENEMY] [Enemy4] Memory: high confidence (0.86) - transitioning to PURSUING
[20:57:02] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:57:02] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:57:02] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:57:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.9318, 791.4342), shooter_id=10219220371020, bullet_pos=(910.9202, 794.5883)
[20:57:02] [INFO] [Bullet] Using shooter_position, distance=427.000061035156
[20:57:02] [INFO] [Bullet] Distance to wall: 427.000061035156 (29.0752193397603% of viewport)
[20:57:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:57:02] [INFO] [Bullet] Caliber cannot penetrate walls
[20:57:02] [ENEMY] [Enemy3] Hit taken, health: 1/2
[20:57:02] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:57:02] [INFO] [ImpactEffects] spawn_blood_effect called at (673.8871, 771.1443), dir=(0.998215, -0.05972), lethal=false
[20:57:02] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:57:02] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:57:02] [INFO] [ImpactEffects] Blood effect spawned at (673.8871, 771.1443) (scale=0.9)
[20:57:03] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:57:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.9318, 789.9342), shooter_id=10219220371020, bullet_pos=(910.8391, 781.0361)
[20:57:03] [INFO] [Bullet] Using shooter_position, distance=427
[20:57:03] [INFO] [Bullet] Distance to wall: 427 (29.0752151837643% of viewport)
[20:57:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:57:03] [INFO] [Bullet] Caliber cannot penetrate walls
[20:57:03] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:57:04] [ENEMY] [Enemy10] FLANKING started: target=(682.3666, 764.9609), side=left, pos=(951.7591, 1406.877)
[20:57:04] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[20:57:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:57:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:57:04] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:57:04] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:57:04] [ENEMY] [Enemy1] Death animation component initialized
[20:57:04] [ENEMY] [Enemy2] Death animation component initialized
[20:57:04] [ENEMY] [Enemy3] Death animation component initialized
[20:57:04] [ENEMY] [Enemy4] Death animation component initialized
[20:57:04] [ENEMY] [Enemy5] Death animation component initialized
[20:57:04] [ENEMY] [Enemy6] Death animation component initialized
[20:57:04] [ENEMY] [Enemy7] Death animation component initialized
[20:57:05] [ENEMY] [Enemy8] Death animation component initialized
[20:57:05] [ENEMY] [Enemy9] Death animation component initialized
[20:57:05] [ENEMY] [Enemy10] Death animation component initialized
[20:57:05] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:57:05] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:57:05] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:57:05] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:57:05] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:57:05] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:57:05] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:57:05] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:57:05] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:57:05] [INFO] [ScoreManager] Level started with 10 enemies
[20:57:05] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:57:05] [ENEMY] [Enemy1] Registered as sound listener
[20:57:05] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:57:05] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:57:05] [ENEMY] [Enemy2] Registered as sound listener
[20:57:05] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[20:57:05] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:57:05] [ENEMY] [Enemy3] Registered as sound listener
[20:57:05] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:57:05] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:57:05] [ENEMY] [Enemy4] Registered as sound listener
[20:57:05] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:57:05] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:57:05] [ENEMY] [Enemy5] Registered as sound listener
[20:57:05] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[20:57:05] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:57:05] [ENEMY] [Enemy6] Registered as sound listener
[20:57:05] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:57:05] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:57:05] [ENEMY] [Enemy7] Registered as sound listener
[20:57:05] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:57:05] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:57:05] [ENEMY] [Enemy8] Registered as sound listener
[20:57:05] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:57:05] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:57:05] [ENEMY] [Enemy9] Registered as sound listener
[20:57:05] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:57:05] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:57:05] [ENEMY] [Enemy10] Registered as sound listener
[20:57:05] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:57:05] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:57:05] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:57:05] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:57:05] [INFO] [LastChance] Found player: Player
[20:57:05] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:57:05] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:57:05] [INFO] [LastChance] Connected to player Died signal (C#)
[20:57:05] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:57:05] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:57:05] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:57:05] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:57:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.397, 1465.46), source=ENEMY (Enemy10), range=1469, listeners=20
[20:57:06] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:57:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:57:06] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:57:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.747, 1430.86), shooter_id=10487001517140, bullet_pos=(42.1972, 701.7216)
[20:57:06] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
[20:57:06] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
[20:57:06] [ENEMY] [Enemy4] Memory: high confidence (0.86) - transitioning to PURSUING
[20:57:06] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:57:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.747, 1430.86), shooter_id=10487001517140, bullet_pos=(270.8215, 472.4947)
[20:57:06] [INFO] [Bullet] Using shooter_position, distance=1207.71643066406
[20:57:06] [INFO] [Bullet] Distance to wall: 1207.71643066406 (82.2356325586073% of viewport)
[20:57:06] [ENEMY] [Enemy2] Hit taken, health: 2/3
[20:57:06] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[20:57:06] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(0.776196, 0.630492), lethal=false
[20:57:06] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:57:06] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:57:06] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[20:57:06] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:57:07] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:57:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.9349, 776.7256), shooter_id=10487823599293, bullet_pos=(910.8619, 784.6427)
[20:57:07] [INFO] [Bullet] Using shooter_position, distance=427.000427246094
[20:57:07] [INFO] [Bullet] Distance to wall: 427.000427246094 (29.0752442757364% of viewport)
[20:57:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:57:07] [INFO] [Bullet] Caliber cannot penetrate walls
[20:57:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.9349, 752.1701), shooter_id=10487823599293, bullet_pos=(909.3481, 715.3972)
[20:57:07] [INFO] [Bullet] Using shooter_position, distance=426.99951171875
[20:57:07] [INFO] [Bullet] Distance to wall: 426.99951171875 (29.0751819357961% of viewport)
[20:57:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:57:07] [INFO] [Bullet] Caliber cannot penetrate walls
[20:57:07] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:57:07] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:57:07] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:57:07] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:57:07] [ENEMY] [Enemy1] Death animation component initialized
[20:57:07] [ENEMY] [Enemy2] Death animation component initialized
[20:57:07] [ENEMY] [Enemy3] Death animation component initialized
[20:57:07] [ENEMY] [Enemy4] Death animation component initialized
[20:57:07] [ENEMY] [Enemy5] Death animation component initialized
[20:57:07] [ENEMY] [Enemy6] Death animation component initialized
[20:57:07] [ENEMY] [Enemy7] Death animation component initialized
[20:57:07] [ENEMY] [Enemy8] Death animation component initialized
[20:57:07] [ENEMY] [Enemy9] Death animation component initialized
[20:57:07] [ENEMY] [Enemy10] Death animation component initialized
[20:57:07] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:57:07] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:57:07] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:57:07] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:57:07] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:57:07] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:57:07] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:57:07] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[20:57:07] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:57:07] [INFO] [ScoreManager] Level started with 10 enemies
[20:57:07] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:57:07] [ENEMY] [Enemy1] Registered as sound listener
[20:57:07] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:57:07] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:57:07] [ENEMY] [Enemy2] Registered as sound listener
[20:57:07] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:57:07] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:57:07] [ENEMY] [Enemy3] Registered as sound listener
[20:57:07] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[20:57:07] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:57:07] [ENEMY] [Enemy4] Registered as sound listener
[20:57:07] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[20:57:07] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:57:07] [ENEMY] [Enemy5] Registered as sound listener
[20:57:07] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:57:07] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:57:07] [ENEMY] [Enemy6] Registered as sound listener
[20:57:07] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:57:07] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:57:07] [ENEMY] [Enemy7] Registered as sound listener
[20:57:07] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[20:57:07] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:57:07] [ENEMY] [Enemy8] Registered as sound listener
[20:57:07] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[20:57:07] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:57:07] [ENEMY] [Enemy9] Registered as sound listener
[20:57:07] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:57:07] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:57:07] [ENEMY] [Enemy10] Registered as sound listener
[20:57:07] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:57:07] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:57:07] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:57:07] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:57:07] [INFO] [LastChance] Found player: Player
[20:57:07] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:57:07] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:57:07] [INFO] [LastChance] Connected to player Died signal (C#)
[20:57:07] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:57:07] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:57:07] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:57:08] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:57:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[20:57:08] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:57:08] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:57:09] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:57:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=10657122485792, bullet_pos=(41.69983, 702.3934)
[20:57:09] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[20:57:09] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[20:57:09] [INFO] [Bullet] Distance-based penetration chance: 50.6761141644985%
[20:57:09] [INFO] [Bullet] Starting wall penetration at (41.69983, 702.3934)
[20:57:09] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.508674621582
[20:57:09] [INFO] [Bullet] Body exited signal received for penetrating body
[20:57:09] [INFO] [Bullet] Exiting penetration at (4.46851, 674.2579) after traveling 41.6666717529297 pixels through wall
[20:57:09] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:57:09] [ENEMY] [Enemy4] Memory: high confidence (0.86) - transitioning to PURSUING
[20:57:09] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:57:09] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:57:09] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:57:09] [ENEMY] [Enemy3] Hit taken, health: 3/4
[20:57:09] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:57:09] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.999438, 0.033531), lethal=false
[20:57:09] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:57:09] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:57:09] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=0.9)
[20:57:10] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:57:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(693.8083, 755.066), source=ENEMY (Enemy3), range=1469, listeners=10
[20:57:10] [ENEMY] [Enemy2] Heard gunshot at (693.8083, 755.066), source_type=1, intensity=0.02, distance=358
[20:57:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:57:10] [INFO] [LastChance] Threat detected: Bullet
[20:57:10] [INFO] [LastChance] Not in hard mode - effect disabled
[20:57:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:57:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(685.5527, 761.8206), source=ENEMY (Enemy3), range=1469, listeners=10
[20:57:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:57:10] [INFO] [LastChance] Threat detected: @Area2D@12521
[20:57:10] [INFO] [LastChance] Not in hard mode - effect disabled
[20:57:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:57:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(669.2047, 913.168), source=ENEMY (Enemy4), range=1469, listeners=10
[20:57:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:57:10] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:57:10] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:57:10] [INFO] [LastChance] Threat detected: @Area2D@12522
[20:57:10] [INFO] [LastChance] Not in hard mode - effect disabled
[20:57:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:57:10] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:57:10] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:57:10] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:57:10] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:57:10] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:57:10] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:57:10] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:57:10] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:57:10] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:57:10] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:57:10] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:57:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(669.2047, 913.168), source=ENEMY (Enemy4), range=1469, listeners=10
[20:57:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:57:10] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:57:10] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:57:10] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:57:10] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:57:10] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:57:10] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:57:10] [ENEMY] [Enemy1] Death animation component initialized
[20:57:10] [ENEMY] [Enemy2] Death animation component initialized
[20:57:10] [ENEMY] [Enemy3] Death animation component initialized
[20:57:10] [ENEMY] [Enemy4] Death animation component initialized
[20:57:10] [ENEMY] [Enemy5] Death animation component initialized
[20:57:10] [ENEMY] [Enemy6] Death animation component initialized
[20:57:10] [ENEMY] [Enemy7] Death animation component initialized
[20:57:10] [ENEMY] [Enemy8] Death animation component initialized
[20:57:10] [ENEMY] [Enemy9] Death animation component initialized
[20:57:10] [ENEMY] [Enemy10] Death animation component initialized
[20:57:10] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:57:10] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:57:10] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:57:10] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:57:10] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:57:10] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:57:10] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:57:10] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:57:10] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:57:10] [INFO] [ScoreManager] Level started with 10 enemies
[20:57:10] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:57:10] [ENEMY] [Enemy1] Registered as sound listener
[20:57:10] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[20:57:10] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:57:10] [ENEMY] [Enemy2] Registered as sound listener
[20:57:10] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:57:10] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:57:10] [ENEMY] [Enemy3] Registered as sound listener
[20:57:10] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:57:10] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:57:10] [ENEMY] [Enemy4] Registered as sound listener
[20:57:10] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:57:10] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:57:10] [ENEMY] [Enemy5] Registered as sound listener
[20:57:10] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:57:10] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:57:10] [ENEMY] [Enemy6] Registered as sound listener
[20:57:10] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:57:10] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:57:10] [ENEMY] [Enemy7] Registered as sound listener
[20:57:10] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[20:57:10] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:57:10] [ENEMY] [Enemy8] Registered as sound listener
[20:57:10] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:57:10] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:57:10] [ENEMY] [Enemy9] Registered as sound listener
[20:57:10] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[20:57:10] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:57:10] [ENEMY] [Enemy10] Registered as sound listener
[20:57:10] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:57:10] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:57:10] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:57:10] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:57:10] [INFO] [LastChance] Found player: Player
[20:57:10] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:57:10] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:57:10] [INFO] [LastChance] Connected to player Died signal (C#)
[20:57:10] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:57:10] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:57:10] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:57:11] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:57:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[20:57:11] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:57:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:57:11] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[20:57:11] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:57:11] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:57:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=10831571978837, bullet_pos=(41.69983, 702.3934)
[20:57:12] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[20:57:12] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[20:57:12] [ENEMY] [Enemy3] Memory: medium confidence (0.76) - transitioning to PURSUING
[20:57:12] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[20:57:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=10831571978837, bullet_pos=(274.9589, 477.8845)
[20:57:12] [INFO] [Bullet] Using shooter_position, distance=1200.94165039063
[20:57:12] [INFO] [Bullet] Distance to wall: 1200.94165039063 (81.7743253120665% of viewport)
[20:57:12] [INFO] [LastChance] Threat detected: Bullet
[20:57:12] [INFO] [LastChance] Not in hard mode - effect disabled
[20:57:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:57:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=10831571978837, bullet_pos=(445.2737, 694.9889)
[20:57:12] [INFO] [Bullet] Using shooter_position, distance=925.026062011719
[20:57:12] [INFO] [Bullet] Distance to wall: 925.026062011719 (62.986725535318% of viewport)
[20:57:12] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
[20:57:12] [ENEMY] [Enemy3] Hit taken, health: 2/3
[20:57:12] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:57:12] [INFO] [ImpactEffects] spawn_blood_effect called at (637.2896, 814.3408), dir=(0.99991, 0.013448), lethal=false
[20:57:12] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:57:12] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:57:12] [INFO] [ImpactEffects] Wall found for blood splatter at (680, 814.9152) (dist=42 px)
[20:57:12] [INFO] [ImpactEffects] Blood effect spawned at (637.2896, 814.3408) (scale=0.9)
[20:57:12] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:57:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(630.6349, 825.8552), source=ENEMY (Enemy3), range=1469, listeners=10
[20:57:12] [ENEMY] [Enemy2] Heard gunshot at (630.6349, 825.8552), source_type=1, intensity=0.02, distance=360
[20:57:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:57:12] [INFO] [LastChance] Threat detected: @Area2D@12784
[20:57:12] [INFO] [LastChance] Not in hard mode - effect disabled
[20:57:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:57:12] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:57:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(563.8102, 813.0076), shooter_id=10829575490196, bullet_pos=(522.7148, 806.1315)
[20:57:12] [INFO] [Bullet] Using shooter_position, distance=41.6666946411133
[20:57:12] [INFO] [Bullet] Distance to wall: 41.6666946411133 (2.83716185640882% of viewport)
[20:57:12] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:57:12] [INFO] [Bullet] Starting wall penetration at (522.7148, 806.1315)
[20:57:12] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:57:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.6360626220703
[20:57:12] [INFO] [Bullet] Body exited signal received for penetrating body
[20:57:12] [INFO] [Bullet] Exiting penetration at (476.688, 798.4302) after traveling 41.6666641235352 pixels through wall
[20:57:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:57:12] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:57:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(625.4639, 835.1835), source=ENEMY (Enemy3), range=1469, listeners=10
[20:57:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:57:12] [INFO] [LastChance] Threat detected: @Area2D@12786
[20:57:12] [INFO] [LastChance] Not in hard mode - effect disabled
[20:57:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:57:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(559.6804, 817.7725), shooter_id=10829575490196, bullet_pos=(520.0593, 804.8776)
[20:57:12] [INFO] [Bullet] Using shooter_position, distance=41.6666641235352
[20:57:12] [INFO] [Bullet] Distance to wall: 41.6666641235352 (2.83715977841081% of viewport)
[20:57:12] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:57:12] [INFO] [Bullet] Starting wall penetration at (520.0593, 804.8776)
[20:57:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30.906099319458
[20:57:12] [INFO] [Bullet] Body exited signal received for penetrating body
[20:57:12] [INFO] [Bullet] Exiting penetration at (475.6837, 790.4352) after traveling 41.6666679382324 pixels through wall
[20:57:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[20:57:12] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:57:12] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:57:12] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:57:12] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:57:12] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:57:12] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:57:12] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:57:12] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:57:12] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:57:12] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:57:12] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:57:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(618.4778, 845.1024), source=ENEMY (Enemy3), range=1469, listeners=10
[20:57:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:57:12] [INFO] [LastChance] Threat detected: Bullet
[20:57:12] [INFO] [LastChance] Not in hard mode - effect disabled
[20:57:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:57:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:57:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:57:13] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:57:13] [INFO] [PenultimateHit] Ending penultimate hit effect
[20:57:13] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[20:57:13] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:57:13] [ENEMY] [Enemy1] Death animation component initialized
[20:57:13] [ENEMY] [Enemy2] Death animation component initialized
[20:57:13] [ENEMY] [Enemy3] Death animation component initialized
[20:57:13] [ENEMY] [Enemy4] Death animation component initialized
[20:57:13] [ENEMY] [Enemy5] Death animation component initialized
[20:57:13] [ENEMY] [Enemy6] Death animation component initialized
[20:57:13] [ENEMY] [Enemy7] Death animation component initialized
[20:57:13] [ENEMY] [Enemy8] Death animation component initialized
[20:57:13] [ENEMY] [Enemy9] Death animation component initialized
[20:57:13] [ENEMY] [Enemy10] Death animation component initialized
[20:57:13] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:57:13] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:57:13] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:57:13] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:57:13] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:57:13] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:57:13] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:57:13] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:57:13] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:57:13] [INFO] [ScoreManager] Level started with 10 enemies
[20:57:13] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:57:13] [ENEMY] [Enemy1] Registered as sound listener
[20:57:13] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:57:13] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:57:13] [ENEMY] [Enemy2] Registered as sound listener
[20:57:13] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:57:13] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:57:13] [ENEMY] [Enemy3] Registered as sound listener
[20:57:13] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:57:13] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:57:13] [ENEMY] [Enemy4] Registered as sound listener
[20:57:13] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[20:57:13] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:57:13] [ENEMY] [Enemy5] Registered as sound listener
[20:57:13] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:57:13] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:57:13] [ENEMY] [Enemy6] Registered as sound listener
[20:57:13] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[20:57:13] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:57:13] [ENEMY] [Enemy7] Registered as sound listener
[20:57:13] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:57:13] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:57:13] [ENEMY] [Enemy8] Registered as sound listener
[20:57:13] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[20:57:13] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:57:13] [ENEMY] [Enemy9] Registered as sound listener
[20:57:13] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[20:57:13] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:57:13] [ENEMY] [Enemy10] Registered as sound listener
[20:57:13] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:57:13] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:57:13] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:57:13] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:57:13] [INFO] [LastChance] Found player: Player
[20:57:13] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:57:13] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:57:13] [INFO] [LastChance] Connected to player Died signal (C#)
[20:57:13] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:57:13] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:57:13] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:57:13] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:57:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.407, 1465.446), source=ENEMY (Enemy10), range=1469, listeners=20
[20:57:14] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:57:14] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:57:14] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:57:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.811, 1430.749), shooter_id=10986861890219, bullet_pos=(43.45148, 700.0416)
[20:57:14] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
[20:57:14] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
[20:57:14] [ENEMY] [Enemy4] Memory: high confidence (0.86) - transitioning to PURSUING
[20:57:14] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:57:14] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:57:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.811, 1430.749), shooter_id=10986861890219, bullet_pos=(514.8856, 444.4753)
[20:57:14] [INFO] [Bullet] Using shooter_position, distance=1101.70031738281
[20:57:14] [INFO] [Bullet] Distance to wall: 1101.70031738281 (75.0168004588446% of viewport)
[20:57:14] [ENEMY] [Enemy1] Hit taken, health: 1/2
[20:57:14] [ENEMY] [Enemy1] ImpactEffectsManager found, calling spawn_blood_effect
[20:57:14] [INFO] [ImpactEffects] spawn_blood_effect called at (300, 350), dir=(-0.91896, -0.394351), lethal=false
[20:57:14] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:57:14] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:57:14] [INFO] [ImpactEffects] Blood effect spawned at (300, 350) (scale=1)
[20:57:15] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:57:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.935, 786.7809), shooter_id=10987683974177, bullet_pos=(910.825, 796.4691)
[20:57:15] [INFO] [Bullet] Using shooter_position, distance=426.999908447266
[20:57:15] [INFO] [Bullet] Distance to wall: 426.999908447266 (29.0752089497702% of viewport)
[20:57:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:57:15] [INFO] [Bullet] Caliber cannot penetrate walls
[20:57:15] [ENEMY] [Enemy3] Hit taken, health: 2/3
[20:57:15] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:57:15] [INFO] [ImpactEffects] spawn_blood_effect called at (659.1503, 782.1525), dir=(0.999998, -0.001843), lethal=false
[20:57:15] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:57:15] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:57:15] [INFO] [ImpactEffects] Blood effect spawned at (659.1503, 782.1525) (scale=0.9)
[20:57:15] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:57:15] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:57:15] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:57:15] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:57:15] [ENEMY] [Enemy1] Death animation component initialized
[20:57:15] [ENEMY] [Enemy2] Death animation component initialized
[20:57:15] [ENEMY] [Enemy3] Death animation component initialized
[20:57:15] [ENEMY] [Enemy4] Death animation component initialized
[20:57:15] [ENEMY] [Enemy5] Death animation component initialized
[20:57:15] [ENEMY] [Enemy6] Death animation component initialized
[20:57:15] [ENEMY] [Enemy7] Death animation component initialized
[20:57:15] [ENEMY] [Enemy8] Death animation component initialized
[20:57:15] [ENEMY] [Enemy9] Death animation component initialized
[20:57:15] [ENEMY] [Enemy10] Death animation component initialized
[20:57:15] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:57:15] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:57:15] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:57:15] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:57:15] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:57:15] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:57:15] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:57:15] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[20:57:15] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:57:15] [INFO] [ScoreManager] Level started with 10 enemies
[20:57:15] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:57:15] [ENEMY] [Enemy1] Registered as sound listener
[20:57:15] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[20:57:15] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:57:15] [ENEMY] [Enemy2] Registered as sound listener
[20:57:15] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[20:57:15] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:57:15] [ENEMY] [Enemy3] Registered as sound listener
[20:57:15] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[20:57:15] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:57:15] [ENEMY] [Enemy4] Registered as sound listener
[20:57:15] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[20:57:15] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:57:15] [ENEMY] [Enemy5] Registered as sound listener
[20:57:15] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[20:57:15] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:57:15] [ENEMY] [Enemy6] Registered as sound listener
[20:57:15] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[20:57:15] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:57:15] [ENEMY] [Enemy7] Registered as sound listener
[20:57:15] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[20:57:15] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:57:15] [ENEMY] [Enemy8] Registered as sound listener
[20:57:15] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[20:57:15] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:57:15] [ENEMY] [Enemy9] Registered as sound listener
[20:57:15] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[20:57:15] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:57:15] [ENEMY] [Enemy10] Registered as sound listener
[20:57:15] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[20:57:15] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:57:15] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:57:15] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:57:15] [INFO] [LastChance] Found player: Player
[20:57:15] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:57:15] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:57:15] [INFO] [LastChance] Connected to player Died signal (C#)
[20:57:15] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:57:15] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:57:15] [INFO] [Player] Applied Pistol arm pose: Left=(10, 6), Right=(2, 6)
[20:57:16] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[20:57:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.536, 1465.268), source=ENEMY (Enemy10), range=1469, listeners=20
[20:57:16] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:57:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[20:57:17] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[20:57:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.255, 1430.031), shooter_id=11156546651651, bullet_pos=(50.62111, 690.549)
[20:57:17] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[20:57:17] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[20:57:17] [ENEMY] [Enemy4] Memory: high confidence (0.86) - transitioning to PURSUING
[20:57:17] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:57:17] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:57:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.255, 1430.031), shooter_id=11156546651651, bullet_pos=(496.712, 392.9468)
[20:57:17] [INFO] [Bullet] Using shooter_position, distance=1155.4990234375
[20:57:17] [INFO] [Bullet] Distance to wall: 1155.4990234375 (78.6800532812056% of viewport)
[20:57:17] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:57:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.255, 1430.031), shooter_id=11156546651651, bullet_pos=(282.233, 272.8103)
[20:57:17] [INFO] [Bullet] Using shooter_position, distance=1365.05236816406
[20:57:17] [INFO] [Bullet] Distance to wall: 1365.05236816406 (92.9489258582602% of viewport)
[20:57:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1006.255, 1430.031), shooter_id=11156546651651, bullet_pos=(55.79016, 402.3666)
[20:57:17] [INFO] [Bullet] Using shooter_position, distance=1399.81323242188
[20:57:17] [INFO] [Bullet] Distance to wall: 1399.81323242188 (95.3158570251677% of viewport)
[20:57:17] [INFO] [Bullet] Distance-based penetration chance: 35.4648334706376%
[20:57:17] [INFO] [Bullet] Penetration failed (distance roll)
[20:57:17] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:57:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.9253, 775.4489), shooter_id=11157368736869, bullet_pos=(931.1195, 820.9196)
[20:57:17] [INFO] [Bullet] Using shooter_position, distance=449.500030517578
[20:57:17] [INFO] [Bullet] Distance to wall: 449.500030517578 (30.607283635614% of viewport)
[20:57:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:57:17] [INFO] [Bullet] Caliber cannot penetrate walls
[20:57:18] [ENEMY] [Enemy3] Hit taken, health: 2/3
[20:57:18] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[20:57:18] [INFO] [ImpactEffects] spawn_blood_effect called at (671.1057, 773.6407), dir=(0.999305, 0.03728), lethal=false
[20:57:18] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:57:18] [INFO] [ImpactEffects] Blood decals scheduled: 4 to spawn at particle landing times
[20:57:18] [INFO] [ImpactEffects] Blood effect spawned at (671.1057, 773.6407) (scale=0.9)
[20:57:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.384, 912.7864), source=ENEMY (Enemy4), range=1469, listeners=10
[20:57:18] [ENEMY] [Enemy2] Heard gunshot at (668.384, 912.7864), source_type=1, intensity=0.01, distance=451
[20:57:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:57:18] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:57:18] [INFO] [LastChance] Threat detected: Bullet
[20:57:18] [INFO] [LastChance] Not in hard mode - effect disabled
[20:57:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:57:18] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:57:18] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:57:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:57:18] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[20:57:18] [INFO] [PenultimateHit] Starting penultimate hit effect:
[20:57:18] [INFO] [PenultimateHit]   - Time scale: 0.10
[20:57:18] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[20:57:18] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[20:57:18] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[20:57:18] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[20:57:18] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[20:57:18] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[20:57:18] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:57:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.384, 912.7864), source=ENEMY (Enemy4), range=1469, listeners=10
[20:57:18] [ENEMY] [Enemy3] Heard gunshot at (668.384, 912.7864), source_type=1, intensity=0.31, distance=90
[20:57:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:57:18] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:57:18] [INFO] [LastChance] Threat detected: Bullet
[20:57:18] [INFO] [LastChance] Not in hard mode - effect disabled
[20:57:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:57:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(612.0094, 874.6746), shooter_id=11154835376229, bullet_pos=(526.6456, 801.3986)
[20:57:18] [INFO] [Bullet] Using shooter_position, distance=112.500465393066
[20:57:18] [INFO] [Bullet] Distance to wall: 112.500465393066 (7.66036355872841% of viewport)
[20:57:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:57:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(649.2581, 826.0198), source=ENEMY (Enemy3), range=1469, listeners=10
[20:57:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:57:19] [ENEMY] [Enemy1] Memory: medium confidence (0.61) - transitioning to PURSUING
[20:57:19] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[20:57:19] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
[20:57:19] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[20:57:19] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[20:57:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.384, 912.7864), source=ENEMY (Enemy4), range=1469, listeners=10
[20:57:19] [ENEMY] [Enemy3] Heard gunshot at (668.384, 912.7864), source_type=1, intensity=0.36, distance=83
[20:57:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:57:19] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:57:19] [INFO] [LastChance] Threat detected: @Area2D@13311
[20:57:19] [INFO] [LastChance] Not in hard mode - effect disabled
[20:57:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:57:19] [INFO] ------------------------------------------------------------
[20:57:19] [INFO] GAME LOG ENDED: 2026-01-24T20:57:19
[20:57:19] [INFO] ============================================================
