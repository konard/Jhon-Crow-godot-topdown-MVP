[18:30:25] [INFO] ============================================================
[18:30:25] [INFO] GAME LOG STARTED
[18:30:25] [INFO] ============================================================
[18:30:25] [INFO] Timestamp: 2026-01-22T18:30:25
[18:30:25] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260122_183025.txt
[18:30:25] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
[18:30:25] [INFO] OS: Windows
[18:30:25] [INFO] Debug build: false
[18:30:25] [INFO] Engine version: 4.3-stable (official)
[18:30:25] [INFO] Project: Godot Top-Down Template
[18:30:25] [INFO] ------------------------------------------------------------
[18:30:25] [INFO] [GameManager] GameManager ready
[18:30:25] [INFO] [ScoreManager] ScoreManager ready
[18:30:25] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[18:30:25] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:30:25] [INFO] [PenultimateHit] Saturation shader loaded successfully
[18:30:25] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[18:30:25] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[18:30:25] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[18:30:25] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[18:30:25] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[18:30:25] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:30:25] [INFO] [LastChance] Last chance shader loaded successfully
[18:30:25] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[18:30:25] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[18:30:25] [INFO] [LastChance]   Sepia intensity: 0.70
[18:30:25] [INFO] [LastChance]   Brightness: 0.60
[18:30:25] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[18:30:25] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[18:30:25] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:30:25] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:30:25] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:30:25] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:30:25] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:30:25] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:30:25] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[18:30:25] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[18:30:25] [INFO] [ScoreManager] Level started with 10 enemies
[18:30:25] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[18:30:25] [ENEMY] [Enemy1] Registered as sound listener
[18:30:25] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[18:30:25] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[18:30:25] [ENEMY] [Enemy2] Registered as sound listener
[18:30:25] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[18:30:25] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[18:30:25] [ENEMY] [Enemy3] Registered as sound listener
[18:30:25] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[18:30:25] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[18:30:25] [ENEMY] [Enemy4] Registered as sound listener
[18:30:25] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[18:30:25] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[18:30:25] [ENEMY] [Enemy5] Registered as sound listener
[18:30:25] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[18:30:25] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[18:30:25] [ENEMY] [Enemy6] Registered as sound listener
[18:30:25] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[18:30:25] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[18:30:25] [ENEMY] [Enemy7] Registered as sound listener
[18:30:25] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 2, behavior: PATROL, player_found: yes
[18:30:25] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[18:30:25] [ENEMY] [Enemy8] Registered as sound listener
[18:30:25] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[18:30:25] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[18:30:25] [ENEMY] [Enemy9] Registered as sound listener
[18:30:25] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[18:30:25] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[18:30:25] [ENEMY] [Enemy10] Registered as sound listener
[18:30:25] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[18:30:25] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:30:25] [INFO] [Player] Detected weapon: Rifle (default pose)
[18:30:25] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[18:30:25] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:30:25] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:30:25] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:30:25] [INFO] [LastChance] Found player: Player
[18:30:25] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:30:25] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:30:25] [INFO] [LastChance] Connected to player Died signal (C#)
[18:30:33] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:30:33] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:30:33] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:30:33] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:30:33] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:30:33] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:30:33] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:30:33] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:30:33] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[18:30:33] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[18:30:33] [INFO] [ScoreManager] Level started with 10 enemies
[18:30:33] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[18:30:33] [ENEMY] [Enemy1] Registered as sound listener
[18:30:33] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[18:30:33] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[18:30:33] [ENEMY] [Enemy2] Registered as sound listener
[18:30:33] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[18:30:33] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[18:30:33] [ENEMY] [Enemy3] Registered as sound listener
[18:30:33] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[18:30:33] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[18:30:33] [ENEMY] [Enemy4] Registered as sound listener
[18:30:33] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[18:30:33] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[18:30:33] [ENEMY] [Enemy5] Registered as sound listener
[18:30:33] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[18:30:33] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[18:30:33] [ENEMY] [Enemy6] Registered as sound listener
[18:30:33] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[18:30:33] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[18:30:33] [ENEMY] [Enemy7] Registered as sound listener
[18:30:33] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[18:30:33] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[18:30:33] [ENEMY] [Enemy8] Registered as sound listener
[18:30:33] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[18:30:33] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[18:30:33] [ENEMY] [Enemy9] Registered as sound listener
[18:30:33] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[18:30:33] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[18:30:33] [ENEMY] [Enemy10] Registered as sound listener
[18:30:33] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[18:30:33] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:30:33] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:30:33] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:30:33] [INFO] [LastChance] Found player: Player
[18:30:33] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:30:33] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:30:33] [INFO] [LastChance] Connected to player Died signal (C#)
[18:30:33] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:30:33] [INFO] [Player] Detected weapon: Rifle (default pose)
[18:30:33] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[18:30:37] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[18:30:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(384.4807, 811.1566), source=PLAYER (AssaultRifle), range=1469, listeners=20
[18:30:37] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[18:30:37] [ENEMY] [Enemy1] Heard gunshot at (384.4807, 811.1566), source_type=0, intensity=0.01, distance=469
[18:30:37] [ENEMY] [Enemy2] Heard gunshot at (384.4807, 811.1566), source_type=0, intensity=0.04, distance=262
[18:30:37] [ENEMY] [Enemy4] Heard gunshot at (384.4807, 811.1566), source_type=0, intensity=0.01, distance=425
[18:30:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:30:37] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[18:30:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(637.1146, 761.827), source=ENEMY (Enemy3), range=1469, listeners=10
[18:30:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[18:30:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(352.5803, 817.7562), source=PLAYER (AssaultRifle), range=1469, listeners=10
[18:30:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:30:37] [INFO] [LastChance] Threat detected: @Area2D@538
[18:30:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[18:30:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:30:37] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[18:30:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(352.5803, 817.7562), shooter_id=74541173243, bullet_pos=(501.6297, 800.89575)
[18:30:37] [INFO] [Bullet] Using shooter_position, distance=150
[18:30:37] [INFO] [Bullet] Distance to wall: 150 (10,213776% of viewport)
[18:30:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:30:37] [INFO] [Bullet] Starting wall penetration at (501.6297, 800.89575)
[18:30:37] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38,69745
[18:30:37] [INFO] [Bullet] Body exited signal received for penetrating body
[18:30:37] [INFO] [Bullet] Exiting penetration at (548.0006, 795.65027) after traveling 41,66667 pixels through wall
[18:30:37] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:30:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(600.3591, 768.3629), source=ENEMY (Enemy3), range=1469, listeners=10
[18:30:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[18:30:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[18:30:37] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[18:30:37] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[18:30:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(332.3242, 835.7127), source=PLAYER (AssaultRifle), range=1469, listeners=10
[18:30:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:30:37] [INFO] [LastChance] Threat detected: @Area2D@540
[18:30:37] [INFO] [LastChance] Triggering last chance effect!
[18:30:37] [INFO] [LastChance] Starting last chance effect:
[18:30:37] [INFO] [LastChance]   - Time will be frozen (except player)
[18:30:37] [INFO] [LastChance]   - Duration: 6.0 real seconds
[18:30:37] [INFO] [LastChance]   - Sepia intensity: 0.70
[18:30:37] [INFO] [LastChance]   - Brightness: 0.60
[18:30:37] [INFO] [LastChance] Pushed bullet @Area2D@540 from distance 122.6 to 200.0
[18:30:37] [INFO] [LastChance] Pushed bullet @Area2D@541 from distance 68.1 to 200.0
[18:30:37] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[18:30:37] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[18:30:37] [INFO] [LastChance] Skipping player node: Player
[18:30:37] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[18:30:37] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[18:30:37] [INFO] [LastChance] Applied 4.0x saturation to 5 player sprites
[18:30:38] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@542
[18:30:38] [INFO] [LastChance] Registered frozen player bullet: @Area2D@542
[18:30:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(327.3304, 861.899), source=PLAYER (AssaultRifle), range=1469, listeners=10
[18:30:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:30:38] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@543
[18:30:38] [INFO] [LastChance] Registered frozen player bullet: @Area2D@543
[18:30:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(338.5968, 879.4437), source=PLAYER (AssaultRifle), range=1469, listeners=10
[18:30:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:30:38] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@544
[18:30:38] [INFO] [LastChance] Registered frozen player bullet: @Area2D@544
[18:30:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(363.5938, 888.1428), source=PLAYER (AssaultRifle), range=1469, listeners=10
[18:30:38] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:30:38] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:30:38] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:30:38] [INFO] [LastChance] Ending last chance effect
[18:30:38] [INFO] [LastChance] All process modes restored
[18:30:38] [INFO] [LastChance] Restored original colors to 5 player sprites
[18:30:38] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:30:38] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:30:38] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:30:38] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:30:38] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:30:38] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:30:38] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[18:30:38] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[18:30:38] [INFO] [ScoreManager] Level started with 10 enemies
[18:30:38] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[18:30:38] [ENEMY] [Enemy1] Registered as sound listener
[18:30:38] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[18:30:38] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[18:30:38] [ENEMY] [Enemy2] Registered as sound listener
[18:30:38] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[18:30:38] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[18:30:38] [ENEMY] [Enemy3] Registered as sound listener
[18:30:38] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[18:30:38] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[18:30:38] [ENEMY] [Enemy4] Registered as sound listener
[18:30:38] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[18:30:38] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[18:30:38] [ENEMY] [Enemy5] Registered as sound listener
[18:30:38] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[18:30:38] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[18:30:38] [ENEMY] [Enemy6] Registered as sound listener
[18:30:38] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[18:30:38] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[18:30:38] [ENEMY] [Enemy7] Registered as sound listener
[18:30:38] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[18:30:38] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[18:30:38] [ENEMY] [Enemy8] Registered as sound listener
[18:30:38] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[18:30:38] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[18:30:38] [ENEMY] [Enemy9] Registered as sound listener
[18:30:38] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[18:30:38] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[18:30:38] [ENEMY] [Enemy10] Registered as sound listener
[18:30:38] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[18:30:38] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:30:38] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:30:38] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:30:38] [INFO] [LastChance] Found player: Player
[18:30:38] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:30:38] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:30:38] [INFO] [LastChance] Connected to player Died signal (C#)
[18:30:38] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:30:38] [INFO] [Player] Detected weapon: Rifle (default pose)
[18:30:38] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[18:30:39] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[18:30:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=20
[18:30:39] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[18:30:39] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[18:30:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
[18:30:39] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[18:30:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1200, 1550), shooter_id=107726506780, bullet_pos=(915.3665, 1400.156)
[18:30:39] [INFO] [Bullet] Using shooter_position, distance=321.666564941406
[18:30:39] [INFO] [Bullet] Distance to wall: 321.666564941406 (21.9028678995168% of viewport)
[18:30:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:30:39] [INFO] [Bullet] Starting wall penetration at (915.3665, 1400.156)
[18:30:39] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[18:30:39] [INFO] [Bullet] Exiting penetration at (874.0724, 1378.417) after traveling 41.6666717529297 pixels through wall
[18:30:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[18:30:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
[18:30:39] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[18:30:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
[18:30:39] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[18:30:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
[18:30:39] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[18:30:39] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[18:30:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1171.99, 1534.529), shooter_id=107726506780, bullet_pos=(64.15709, 893.3544)
[18:30:40] [INFO] [Bullet] Using shooter_position, distance=1279.99975585938
[18:30:40] [INFO] [Bullet] Distance to wall: 1279.99975585938 (87.1575370884708% of viewport)
[18:30:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.006, 1515.278), shooter_id=107726506780, bullet_pos=(58.7139, 830.2917)
[18:30:40] [INFO] [Bullet] Using shooter_position, distance=1279.99951171875
[18:30:40] [INFO] [Bullet] Distance to wall: 1279.99951171875 (87.1575204644867% of viewport)
[18:30:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1171.99, 1534.529), shooter_id=107726506780, bullet_pos=(451.2841, 706.1843)
[18:30:40] [INFO] [Bullet] Using shooter_position, distance=1097.98571777344
[18:30:40] [INFO] [Bullet] Distance to wall: 1097.98571777344 (74.7638665408959% of viewport)
[18:30:40] [INFO] [Bullet] Distance-based penetration chance: 59.4421557022881%
[18:30:40] [INFO] [Bullet] Starting wall penetration at (451.2841, 706.1843)
[18:30:40] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[18:30:40] [INFO] [Bullet] Exiting penetration at (487.671, 688.5918) after traveling 35.4166679382324 pixels through wall
[18:30:40] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[18:30:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.006, 1515.278), shooter_id=107726506780, bullet_pos=(231.4166, 698.0795)
[18:30:40] [INFO] [Bullet] Using shooter_position, distance=1222.02624511719
[18:30:40] [INFO] [Bullet] Distance to wall: 1222.02624511719 (83.2100141381491% of viewport)
[18:30:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.816, 1494.764), shooter_id=107726506780, bullet_pos=(55.6586, 767.2637)
[18:30:40] [INFO] [Bullet] Using shooter_position, distance=1279.99951171875
[18:30:40] [INFO] [Bullet] Distance to wall: 1279.99951171875 (87.1575204644867% of viewport)
[18:30:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.816, 1494.764), shooter_id=107726506780, bullet_pos=(143.7116, 699.2695)
[18:30:40] [INFO] [Bullet] Using shooter_position, distance=1250.69555664063
[18:30:40] [INFO] [Bullet] Distance to wall: 1250.69555664063 (85.1621602779953% of viewport)
[18:30:40] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:30:40] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:30:40] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:30:40] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:30:40] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:30:40] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:30:40] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:30:40] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:30:40] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[18:30:40] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[18:30:40] [INFO] [ScoreManager] Level started with 10 enemies
[18:30:40] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[18:30:40] [ENEMY] [Enemy1] Registered as sound listener
[18:30:40] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[18:30:40] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[18:30:40] [ENEMY] [Enemy2] Registered as sound listener
[18:30:40] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[18:30:40] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[18:30:40] [ENEMY] [Enemy3] Registered as sound listener
[18:30:40] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[18:30:40] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[18:30:40] [ENEMY] [Enemy4] Registered as sound listener
[18:30:40] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[18:30:40] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[18:30:40] [ENEMY] [Enemy5] Registered as sound listener
[18:30:40] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[18:30:40] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[18:30:40] [ENEMY] [Enemy6] Registered as sound listener
[18:30:40] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[18:30:40] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[18:30:40] [ENEMY] [Enemy7] Registered as sound listener
[18:30:40] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[18:30:40] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[18:30:40] [ENEMY] [Enemy8] Registered as sound listener
[18:30:40] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[18:30:40] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[18:30:40] [ENEMY] [Enemy9] Registered as sound listener
[18:30:40] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[18:30:40] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[18:30:40] [ENEMY] [Enemy10] Registered as sound listener
[18:30:40] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[18:30:40] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:30:40] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:30:40] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:30:40] [INFO] [LastChance] Found player: Player
[18:30:40] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:30:40] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:30:40] [INFO] [LastChance] Connected to player Died signal (C#)
[18:30:40] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:30:40] [INFO] [Player] Detected weapon: Rifle (default pose)
[18:30:40] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[18:31:03] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:31:03] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:31:03] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:31:03] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:31:03] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:31:03] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:31:03] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:31:03] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:31:03] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[18:31:03] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[18:31:03] [INFO] [ScoreManager] Level started with 10 enemies
[18:31:03] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[18:31:03] [ENEMY] [Enemy1] Registered as sound listener
[18:31:03] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[18:31:03] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[18:31:03] [ENEMY] [Enemy2] Registered as sound listener
[18:31:03] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[18:31:03] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[18:31:03] [ENEMY] [Enemy3] Registered as sound listener
[18:31:03] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[18:31:03] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[18:31:03] [ENEMY] [Enemy4] Registered as sound listener
[18:31:03] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[18:31:03] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[18:31:03] [ENEMY] [Enemy5] Registered as sound listener
[18:31:03] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[18:31:03] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[18:31:03] [ENEMY] [Enemy6] Registered as sound listener
[18:31:03] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[18:31:03] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[18:31:03] [ENEMY] [Enemy7] Registered as sound listener
[18:31:03] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[18:31:03] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[18:31:03] [ENEMY] [Enemy8] Registered as sound listener
[18:31:03] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[18:31:03] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[18:31:03] [ENEMY] [Enemy9] Registered as sound listener
[18:31:03] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[18:31:03] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[18:31:03] [ENEMY] [Enemy10] Registered as sound listener
[18:31:03] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[18:31:03] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:31:03] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:31:03] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:31:03] [INFO] [LastChance] Found player: Player
[18:31:03] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:31:03] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:31:03] [INFO] [LastChance] Connected to player Died signal (C#)
[18:31:03] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:31:03] [INFO] [Player] Detected weapon: Rifle (default pose)
[18:31:03] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[18:31:04] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[18:31:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1200, 1550), source=ENEMY (Enemy10), range=1469, listeners=30
[18:31:04] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[18:31:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[18:31:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.99, 1534.529), source=ENEMY (Enemy10), range=1469, listeners=10
[18:31:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[18:31:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1200, 1550), shooter_id=163997287732, bullet_pos=(915.3665, 1400.156)
[18:31:04] [INFO] [Bullet] Using shooter_position, distance=321.666564941406
[18:31:04] [INFO] [Bullet] Distance to wall: 321.666564941406 (21.9028678995168% of viewport)
[18:31:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:31:04] [INFO] [Bullet] Starting wall penetration at (915.3665, 1400.156)
[18:31:04] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[18:31:04] [INFO] [Bullet] Exiting penetration at (874.0724, 1378.417) after traveling 41.6666717529297 pixels through wall
[18:31:04] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[18:31:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1140.006, 1515.278), source=ENEMY (Enemy10), range=1469, listeners=10
[18:31:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[18:31:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1108.816, 1494.764), source=ENEMY (Enemy10), range=1469, listeners=10
[18:31:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[18:31:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.466, 1473.029), source=ENEMY (Enemy10), range=1469, listeners=10
[18:31:05] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[18:31:05] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[18:31:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1171.99, 1534.529), shooter_id=163997287732, bullet_pos=(64.15709, 893.3544)
[18:31:05] [INFO] [Bullet] Using shooter_position, distance=1279.99975585938
[18:31:05] [INFO] [Bullet] Distance to wall: 1279.99975585938 (87.1575370884708% of viewport)
[18:31:05] [INFO] [Bullet] Distance-based penetration chance: 44.982873396784%
[18:31:05] [INFO] [Bullet] Penetration failed (distance roll)
[18:31:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.006, 1515.278), shooter_id=163997287732, bullet_pos=(58.7139, 830.2917)
[18:31:05] [INFO] [Bullet] Using shooter_position, distance=1279.99951171875
[18:31:05] [INFO] [Bullet] Distance to wall: 1279.99951171875 (87.1575204644867% of viewport)
[18:31:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.006, 1515.278), shooter_id=163997287732, bullet_pos=(238.3367, 707.6462)
[18:31:05] [INFO] [Bullet] Using shooter_position, distance=1210.48608398438
[18:31:05] [INFO] [Bullet] Distance to wall: 1210.48608398438 (82.4242233461308% of viewport)
[18:31:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.816, 1494.764), shooter_id=163997287732, bullet_pos=(55.6586, 767.2637)
[18:31:05] [INFO] [Bullet] Using shooter_position, distance=1279.99951171875
[18:31:05] [INFO] [Bullet] Distance to wall: 1279.99951171875 (87.1575204644867% of viewport)
[18:31:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.816, 1494.764), shooter_id=163997287732, bullet_pos=(139.7472, 694.4237)
[18:31:05] [INFO] [Bullet] Using shooter_position, distance=1256.83740234375
[18:31:05] [INFO] [Bullet] Distance to wall: 1256.83740234375 (85.5803698457795% of viewport)
[18:31:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.466, 1473.029), shooter_id=163997287732, bullet_pos=(54.86711, 704.4935)
[18:31:05] [INFO] [Bullet] Using shooter_position, distance=1280.00024414063
[18:31:05] [INFO] [Bullet] Distance to wall: 1280.00024414063 (87.157570336439% of viewport)
[18:31:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1140.006, 1515.278), shooter_id=163997287732, bullet_pos=(514.7285, 839.0583)
[18:31:05] [INFO] [Bullet] Using shooter_position, distance=921.002075195313
[18:31:05] [INFO] [Bullet] Distance to wall: 921.002075195313 (62.7127248735296% of viewport)
[18:31:05] [INFO] [LastChance] Threat detected: @Area2D@1311
[18:31:05] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[18:31:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:31:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.816, 1494.764), shooter_id=163997287732, bullet_pos=(503.9542, 969.746)
[18:31:05] [INFO] [Bullet] Using shooter_position, distance=800.938598632813
[18:31:05] [INFO] [Bullet] Distance to wall: 800.938598632813 (54.5373819771232% of viewport)
[18:31:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.466, 1473.029), shooter_id=163997287732, bullet_pos=(516.4694, 367.2605)
[18:31:05] [INFO] [Bullet] Using shooter_position, distance=1240.38854980469
[18:31:05] [INFO] [Bullet] Distance to wall: 1240.38854980469 (84.460337229622% of viewport)
[18:31:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.466, 1473.029), shooter_id=163997287732, bullet_pos=(182.4428, 56.0119)
[18:31:06] [INFO] [Bullet] Using shooter_position, distance=1676.54235839844
[18:31:06] [INFO] [Bullet] Distance to wall: 1676.54235839844 (114.158852072904% of viewport)
[18:31:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.816, 1494.764), shooter_id=163997287732, bullet_pos=(65.0802, 1330.237)
[18:31:06] [INFO] [Bullet] Using shooter_position, distance=1056.6240234375
[18:31:06] [INFO] [Bullet] Distance to wall: 1056.6240234375 (71.9474727161126% of viewport)
[18:31:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1078.466, 1473.029), shooter_id=163997287732, bullet_pos=(61.6704, 158.7066)
[18:31:06] [INFO] [Bullet] Using shooter_position, distance=1661.720703125
[18:31:06] [INFO] [Bullet] Distance to wall: 1661.720703125 (113.149618310715% of viewport)
[18:31:06] [ENEMY] [Enemy1] Hit taken, health: 1/2
[18:31:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.816, 1494.764), shooter_id=163997287732, bullet_pos=(394.1343, 1588.425)
[18:31:06] [INFO] [Bullet] Using shooter_position, distance=720.793212890625
[18:31:06] [INFO] [Bullet] Distance to wall: 720.793212890625 (49.0801352875684% of viewport)
[18:31:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.816, 1494.764), shooter_id=163997287732, bullet_pos=(660.6686, 1412.624)
[18:31:06] [INFO] [Bullet] Using shooter_position, distance=455.613342285156
[18:31:06] [INFO] [Bullet] Distance to wall: 455.613342285156 (31.0235502752575% of viewport)
[18:31:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:31:06] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[18:31:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.816, 1494.764), shooter_id=163997287732, bullet_pos=(887.4486, 1563.073)
[18:31:06] [INFO] [Bullet] Using shooter_position, distance=231.667434692383
[18:31:06] [INFO] [Bullet] Distance to wall: 231.667434692383 (15.7746616270531% of viewport)
[18:31:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:31:07] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[18:31:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.816, 1494.764), shooter_id=163997287732, bullet_pos=(519.2127, 1814.338)
[18:31:07] [INFO] [Bullet] Using shooter_position, distance=670.641357421875
[18:31:07] [INFO] [Bullet] Distance to wall: 670.641357421875 (45.6652032275709% of viewport)
[18:31:09] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:31:09] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:31:09] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:31:09] [INFO] [Player.Grenade] Tutorial level detected - infinite grenades enabled
[18:31:09] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:31:09] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:31:09] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:31:09] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:31:09] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[18:31:09] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 3/3, Health: 3/4
[18:31:09] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:31:09] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:31:09] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:31:09] [INFO] [LastChance] Found player: Player
[18:31:09] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:31:09] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:31:09] [INFO] [LastChance] Connected to player Died signal (C#)
[18:31:09] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:31:09] [INFO] [Player] Detected weapon: Rifle (default pose)
[18:31:09] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[18:31:13] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[18:31:13] [INFO] [Player.Grenade] G pressed - starting grab animation
[18:31:14] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (548.47565, 150.27829)
[18:31:14] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[18:31:14] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[18:31:14] [INFO] [Player.Grenade] Timer started, grenade created at (233.66534, 169.1707)
[18:31:14] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[18:31:14] [INFO] [Player.Grenade] Step 1 complete! Drag: (486.34662, -39.406296)
[18:31:14] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[18:31:14] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[18:31:14] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[18:31:14] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming, drag and release RMB to throw
[18:31:14] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[18:31:14] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[18:31:15] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[18:31:15] [INFO] [Player.Grenade] Throwing! Direction: (0.99617374, -0.08739531), Drag distance: 366,83154
[18:31:15] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,08750694
[18:31:15] [INFO] [GrenadeBase] Thrown! Direction: (0.996174, -0.087395), Speed: 733.7 (unfrozen)
[18:31:15] [INFO] [Player.Grenade] Thrown! Direction: (0.99617374, -0.08739531), Drag distance: 366,83154
[18:31:16] [INFO] [Player.Grenade] Player rotation restored to 0
[18:31:16] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[18:31:16] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[18:31:16] [INFO] [GrenadeBase] Grenade landed at (625.4179, 134.8018)
[18:31:18] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:31:18] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:31:18] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:31:18] [INFO] [Player.Grenade] Tutorial level detected - infinite grenades enabled
[18:31:18] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:31:18] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:31:18] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:31:18] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:31:18] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[18:31:18] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 3/3, Health: 3/4
[18:31:18] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:31:18] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:31:18] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:31:18] [INFO] [LastChance] Found player: Player
[18:31:18] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:31:18] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:31:18] [INFO] [LastChance] Connected to player Died signal (C#)
[18:31:18] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:31:18] [INFO] [Player] Detected weapon: Rifle (default pose)
[18:31:18] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[18:31:20] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[18:31:20] [INFO] [Player.Grenade] G pressed - starting grab animation
[18:31:21] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[18:31:21] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[18:31:21] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:31:21] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:31:21] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:31:21] [INFO] [Player.Grenade] Tutorial level detected - infinite grenades enabled
[18:31:21] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:31:21] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:31:21] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:31:21] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:31:21] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[18:31:21] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 3/3, Health: 4/4
[18:31:21] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:31:21] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:31:21] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:31:21] [INFO] [LastChance] Found player: Player
[18:31:21] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:31:21] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:31:21] [INFO] [LastChance] Connected to player Died signal (C#)
[18:31:21] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:31:21] [INFO] [Player] Detected weapon: Rifle (default pose)
[18:31:21] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[18:31:27] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[18:31:27] [INFO] [Player.Grenade] G pressed - starting grab animation
[18:31:28] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (700.1249, 59.443417)
[18:31:28] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[18:31:28] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[18:31:28] [INFO] [Player.Grenade] Timer started, grenade created at (319.0869, 108.292114)
[18:31:28] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[18:31:28] [INFO] [Player.Grenade] Step 1 complete! Drag: (579.87476, -40.074215)
[18:31:28] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[18:31:28] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[18:31:29] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[18:31:29] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming, drag and release RMB to throw
[18:31:29] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[18:31:29] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[18:31:30] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[18:31:30] [INFO] [Player.Grenade] Throwing! Direction: (0.99998313, 0.005805755), Drag distance: 575,2081
[18:31:30] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,0058057876
[18:31:30] [INFO] [GrenadeBase] Thrown! Direction: (0.999983, 0.005806), Speed: 1150.4 (unfrozen)
[18:31:30] [INFO] [Player.Grenade] Thrown! Direction: (0.99998313, 0.005805755), Drag distance: 575,2081
[18:31:30] [INFO] [Player.Grenade] Player rotation restored to 0
[18:31:30] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[18:31:30] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[18:31:31] [INFO] [GrenadeBase] Grenade landed at (1000.495, 112.2482)
[18:31:32] [INFO] [GrenadeBase] EXPLODED at (1003.708, 112.2669)!
[18:31:32] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(1003.708, 112.2669), source=NEUTRAL (FlashbangGrenade), range=2937, listeners=10
[18:31:32] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[18:31:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[18:31:33] [INFO] ------------------------------------------------------------
[18:31:33] [INFO] GAME LOG ENDED: 2026-01-22T18:31:33
[18:31:33] [INFO] ============================================================
