[00:46:43] [INFO] ============================================================
[00:46:43] [INFO] GAME LOG STARTED
[00:46:43] [INFO] ============================================================
[00:46:43] [INFO] Timestamp: 2026-01-24T00:46:43
[00:46:43] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260124_004642.txt
[00:46:43] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
[00:46:43] [INFO] OS: Windows
[00:46:43] [INFO] Debug build: false
[00:46:43] [INFO] Engine version: 4.3-stable (official)
[00:46:43] [INFO] Project: Godot Top-Down Template
[00:46:43] [INFO] ------------------------------------------------------------
[00:46:43] [INFO] [GameManager] GameManager ready
[00:46:43] [INFO] [ScoreManager] ScoreManager ready
[00:46:43] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[00:46:43] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:46:43] [INFO] [PenultimateHit] Saturation shader loaded successfully
[00:46:43] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[00:46:43] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[00:46:43] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[00:46:43] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[00:46:43] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[00:46:43] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:46:43] [INFO] [LastChance] Last chance shader loaded successfully
[00:46:43] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[00:46:43] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[00:46:43] [INFO] [LastChance]   Sepia intensity: 0.70
[00:46:43] [INFO] [LastChance]   Brightness: 0.60
[00:46:43] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[00:46:43] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[00:46:43] [ENEMY] [Enemy1] Death animation component initialized
[00:46:43] [ENEMY] [Enemy2] Death animation component initialized
[00:46:43] [ENEMY] [Enemy3] Death animation component initialized
[00:46:43] [ENEMY] [Enemy4] Death animation component initialized
[00:46:43] [ENEMY] [Enemy5] Death animation component initialized
[00:46:43] [ENEMY] [Enemy6] Death animation component initialized
[00:46:43] [ENEMY] [Enemy7] Death animation component initialized
[00:46:43] [ENEMY] [Enemy8] Death animation component initialized
[00:46:43] [ENEMY] [Enemy9] Death animation component initialized
[00:46:43] [ENEMY] [Enemy10] Death animation component initialized
[00:46:43] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[00:46:43] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:46:43] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:46:43] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:46:43] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:46:43] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:46:43] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[00:46:43] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[00:46:43] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:46:43] [INFO] [ScoreManager] Level started with 10 enemies
[00:46:43] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[00:46:43] [ENEMY] [Enemy1] Registered as sound listener
[00:46:43] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[00:46:43] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[00:46:43] [ENEMY] [Enemy2] Registered as sound listener
[00:46:43] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[00:46:43] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[00:46:43] [ENEMY] [Enemy3] Registered as sound listener
[00:46:43] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[00:46:43] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[00:46:43] [ENEMY] [Enemy4] Registered as sound listener
[00:46:43] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[00:46:43] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[00:46:43] [ENEMY] [Enemy5] Registered as sound listener
[00:46:43] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[00:46:43] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[00:46:43] [ENEMY] [Enemy6] Registered as sound listener
[00:46:43] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[00:46:43] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[00:46:43] [ENEMY] [Enemy7] Registered as sound listener
[00:46:43] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 4, behavior: PATROL, player_found: yes
[00:46:43] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[00:46:43] [ENEMY] [Enemy8] Registered as sound listener
[00:46:43] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[00:46:43] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[00:46:43] [ENEMY] [Enemy9] Registered as sound listener
[00:46:43] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[00:46:43] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[00:46:43] [ENEMY] [Enemy10] Registered as sound listener
[00:46:43] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[00:46:43] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:46:43] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:46:43] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:46:43] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:46:43] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:46:43] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:46:43] [INFO] [LastChance] Found player: Player
[00:46:43] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:46:43] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:46:43] [INFO] [LastChance] Connected to player Died signal (C#)
[00:46:46] [INFO] [PauseMenu] Armory button pressed
[00:46:46] [INFO] [PauseMenu] Creating new armory menu instance
[00:46:46] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[00:46:46] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[00:46:46] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[00:46:46] [INFO] [PauseMenu] back_pressed signal exists on instance
[00:46:46] [INFO] [PauseMenu] back_pressed signal connected
[00:46:46] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[00:46:46] [INFO] [PauseMenu] _populate_weapon_grid method exists
[00:46:47] [INFO] [GrenadeManager] Grenade type changed from Flashbang to Frag Grenade
[00:46:47] [INFO] [GrenadeManager] Restarting level due to grenade type change
[00:46:47] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:46:47] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:46:47] [ENEMY] [Enemy1] Death animation component initialized
[00:46:47] [ENEMY] [Enemy2] Death animation component initialized
[00:46:47] [ENEMY] [Enemy3] Death animation component initialized
[00:46:47] [ENEMY] [Enemy4] Death animation component initialized
[00:46:47] [ENEMY] [Enemy5] Death animation component initialized
[00:46:47] [ENEMY] [Enemy6] Death animation component initialized
[00:46:47] [ENEMY] [Enemy7] Death animation component initialized
[00:46:47] [ENEMY] [Enemy8] Death animation component initialized
[00:46:47] [ENEMY] [Enemy9] Death animation component initialized
[00:46:47] [ENEMY] [Enemy10] Death animation component initialized
[00:46:47] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:46:47] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:46:47] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:46:47] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:46:47] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:46:47] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:46:47] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[00:46:47] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[00:46:47] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:46:47] [INFO] [ScoreManager] Level started with 10 enemies
[00:46:47] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[00:46:47] [ENEMY] [Enemy1] Registered as sound listener
[00:46:47] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[00:46:47] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[00:46:47] [ENEMY] [Enemy2] Registered as sound listener
[00:46:47] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[00:46:47] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[00:46:47] [ENEMY] [Enemy3] Registered as sound listener
[00:46:47] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[00:46:47] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[00:46:47] [ENEMY] [Enemy4] Registered as sound listener
[00:46:47] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[00:46:47] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[00:46:47] [ENEMY] [Enemy5] Registered as sound listener
[00:46:47] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[00:46:47] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[00:46:47] [ENEMY] [Enemy6] Registered as sound listener
[00:46:47] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[00:46:47] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[00:46:47] [ENEMY] [Enemy7] Registered as sound listener
[00:46:47] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[00:46:47] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[00:46:47] [ENEMY] [Enemy8] Registered as sound listener
[00:46:47] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[00:46:47] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[00:46:47] [ENEMY] [Enemy9] Registered as sound listener
[00:46:47] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[00:46:47] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[00:46:47] [ENEMY] [Enemy10] Registered as sound listener
[00:46:47] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[00:46:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
[00:46:48] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[00:46:48] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
[00:46:48] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
[00:46:48] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:46:48] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:46:48] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:46:48] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:46:48] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:46:48] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:46:48] [INFO] [LastChance] Found player: Player
[00:46:48] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:46:48] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:46:48] [INFO] [LastChance] Connected to player Died signal (C#)
[00:46:48] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[00:46:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1256), shooter_id=202400336638, bullet_pos=(2475.0002, 1256)
[00:46:48] [INFO] [Bullet] Using shooter_position, distance=2025,0002
[00:46:48] [INFO] [Bullet] Distance to wall: 2025,0002 (137,886% of viewport)
[00:46:51] [ENEMY] [Enemy4] FLANKING started: target=(648.0628, 1222.231), side=right, pos=(560.8355, 975.9334)
[00:46:51] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[00:46:52] [ENEMY] [Enemy4] State: FLANKING -> COMBAT
[00:46:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(464.7128, 908.7015), source=ENEMY (Enemy4), range=1469, listeners=10
[00:46:53] [ENEMY] [Enemy2] Heard gunshot at (464.7128, 908.7015), source_type=1, intensity=0.02, distance=364
[00:46:53] [ENEMY] [Enemy3] Heard gunshot at (464.7128, 908.7015), source_type=1, intensity=0.03, distance=284
[00:46:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[00:46:53] [INFO] [LastChance] Threat detected: Bullet
[00:46:53] [INFO] [LastChance] Not in hard mode - effect disabled
[00:46:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:46:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(463.1048, 946.0001), source=ENEMY (Enemy4), range=1469, listeners=10
[00:46:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[00:46:53] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[00:46:53] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[00:46:53] [INFO] [LastChance] Threat detected: @Area2D@574
[00:46:53] [INFO] [LastChance] Not in hard mode - effect disabled
[00:46:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:46:53] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:46:53] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[00:46:53] [INFO] [PenultimateHit] Starting penultimate hit effect:
[00:46:53] [INFO] [PenultimateHit]   - Time scale: 0.10
[00:46:53] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[00:46:53] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[00:46:53] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[00:46:53] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[00:46:53] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[00:46:53] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[00:46:53] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:46:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(461.4969, 983.2987), source=ENEMY (Enemy4), range=1469, listeners=10
[00:46:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[00:46:53] [INFO] [LastChance] Threat detected: Bullet
[00:46:53] [INFO] [LastChance] Not in hard mode - effect disabled
[00:46:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:46:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[00:46:54] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[00:46:54] [INFO] [PenultimateHit] Player died - ending penultimate effect
[00:46:54] [INFO] [PenultimateHit] Ending penultimate hit effect
[00:46:54] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[00:46:54] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[00:46:54] [INFO] [LastChance] Player died
[00:46:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.7386, 1000.882), source=ENEMY (Enemy4), range=1469, listeners=10
[00:46:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[00:46:54] [INFO] [LastChance] Threat detected: Bullet
[00:46:54] [INFO] [LastChance] Not in hard mode - effect disabled
[00:46:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:46:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.7386, 1000.882), source=ENEMY (Enemy4), range=1469, listeners=10
[00:46:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[00:46:54] [INFO] [LastChance] Threat detected: Bullet
[00:46:54] [INFO] [LastChance] Not in hard mode - effect disabled
[00:46:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:46:54] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[00:46:54] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[00:46:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.7386, 1000.882), source=ENEMY (Enemy4), range=1469, listeners=10
[00:46:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[00:46:54] [INFO] [LastChance] Threat detected: Bullet
[00:46:54] [INFO] [LastChance] Not in hard mode - effect disabled
[00:46:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:46:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.7386, 1000.882), source=ENEMY (Enemy4), range=1469, listeners=10
[00:46:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[00:46:54] [INFO] [LastChance] Threat detected: Bullet
[00:46:54] [INFO] [LastChance] Not in hard mode - effect disabled
[00:46:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:46:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.7386, 1000.882), source=ENEMY (Enemy4), range=1469, listeners=10
[00:46:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[00:46:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:46:54] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:46:54] [ENEMY] [Enemy1] Death animation component initialized
[00:46:54] [ENEMY] [Enemy2] Death animation component initialized
[00:46:54] [ENEMY] [Enemy3] Death animation component initialized
[00:46:54] [ENEMY] [Enemy4] Death animation component initialized
[00:46:54] [ENEMY] [Enemy5] Death animation component initialized
[00:46:54] [ENEMY] [Enemy6] Death animation component initialized
[00:46:54] [ENEMY] [Enemy7] Death animation component initialized
[00:46:54] [ENEMY] [Enemy8] Death animation component initialized
[00:46:54] [ENEMY] [Enemy9] Death animation component initialized
[00:46:54] [ENEMY] [Enemy10] Death animation component initialized
[00:46:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:46:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:46:54] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:46:54] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:46:54] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:46:54] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:46:54] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[00:46:54] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[00:46:54] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:46:54] [INFO] [ScoreManager] Level started with 10 enemies
[00:46:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[00:46:54] [ENEMY] [Enemy1] Registered as sound listener
[00:46:54] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[00:46:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[00:46:54] [ENEMY] [Enemy2] Registered as sound listener
[00:46:54] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[00:46:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[00:46:54] [ENEMY] [Enemy3] Registered as sound listener
[00:46:54] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[00:46:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[00:46:54] [ENEMY] [Enemy4] Registered as sound listener
[00:46:54] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[00:46:54] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[00:46:54] [ENEMY] [Enemy5] Registered as sound listener
[00:46:54] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[00:46:54] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[00:46:54] [ENEMY] [Enemy6] Registered as sound listener
[00:46:54] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[00:46:54] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[00:46:54] [ENEMY] [Enemy7] Registered as sound listener
[00:46:54] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[00:46:54] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[00:46:54] [ENEMY] [Enemy8] Registered as sound listener
[00:46:54] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[00:46:54] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[00:46:54] [ENEMY] [Enemy9] Registered as sound listener
[00:46:54] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[00:46:54] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[00:46:54] [ENEMY] [Enemy10] Registered as sound listener
[00:46:54] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[00:46:54] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:46:54] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:46:54] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:46:54] [INFO] [LastChance] Found player: Player
[00:46:54] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:46:54] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:46:54] [INFO] [LastChance] Connected to player Died signal (C#)
[00:46:54] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:46:54] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:46:54] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:47:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
[00:47:03] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[00:47:03] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
[00:47:03] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
[00:47:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1256), shooter_id=589803030797, bullet_pos=(683.11884, 1401.8792)
[00:47:03] [INFO] [Bullet] Using shooter_position, distance=275,0002
[00:47:03] [INFO] [Bullet] Distance to wall: 275,0002 (18,725271% of viewport)
[00:47:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:47:04] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[00:47:04] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:04] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:04] [ENEMY] [Enemy1] Death animation component initialized
[00:47:04] [ENEMY] [Enemy2] Death animation component initialized
[00:47:04] [ENEMY] [Enemy3] Death animation component initialized
[00:47:04] [ENEMY] [Enemy4] Death animation component initialized
[00:47:04] [ENEMY] [Enemy5] Death animation component initialized
[00:47:04] [ENEMY] [Enemy6] Death animation component initialized
[00:47:04] [ENEMY] [Enemy7] Death animation component initialized
[00:47:04] [ENEMY] [Enemy8] Death animation component initialized
[00:47:04] [ENEMY] [Enemy9] Death animation component initialized
[00:47:04] [ENEMY] [Enemy10] Death animation component initialized
[00:47:04] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:04] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:04] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:04] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:04] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:04] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:04] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[00:47:04] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[00:47:04] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:04] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:04] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[00:47:04] [ENEMY] [Enemy1] Registered as sound listener
[00:47:04] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[00:47:04] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[00:47:04] [ENEMY] [Enemy2] Registered as sound listener
[00:47:04] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[00:47:04] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[00:47:04] [ENEMY] [Enemy3] Registered as sound listener
[00:47:04] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[00:47:04] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[00:47:04] [ENEMY] [Enemy4] Registered as sound listener
[00:47:04] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[00:47:04] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[00:47:04] [ENEMY] [Enemy5] Registered as sound listener
[00:47:04] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[00:47:04] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[00:47:04] [ENEMY] [Enemy6] Registered as sound listener
[00:47:04] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[00:47:04] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[00:47:04] [ENEMY] [Enemy7] Registered as sound listener
[00:47:04] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[00:47:04] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[00:47:04] [ENEMY] [Enemy8] Registered as sound listener
[00:47:04] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[00:47:04] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[00:47:04] [ENEMY] [Enemy9] Registered as sound listener
[00:47:04] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[00:47:04] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[00:47:04] [ENEMY] [Enemy10] Registered as sound listener
[00:47:04] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[00:47:04] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:47:04] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:47:04] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:47:04] [INFO] [LastChance] Found player: Player
[00:47:04] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:47:04] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:47:04] [INFO] [LastChance] Connected to player Died signal (C#)
[00:47:04] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:47:04] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:47:04] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:47:06] [INFO] [PauseMenu] Armory button pressed
[00:47:06] [INFO] [PauseMenu] Creating new armory menu instance
[00:47:06] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[00:47:06] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[00:47:06] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[00:47:06] [INFO] [PauseMenu] back_pressed signal exists on instance
[00:47:06] [INFO] [PauseMenu] back_pressed signal connected
[00:47:06] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[00:47:06] [INFO] [PauseMenu] _populate_weapon_grid method exists
[00:47:07] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:47:07] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:47:07] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:47:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[00:47:07] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[00:47:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:47:07] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:47:07] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (689.4344, 793.0672)
[00:47:08] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:47:08] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:47:08] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:47:08] [INFO] [Player.Grenade] Timer started, grenade created at (450, 918.99994)
[00:47:08] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:47:08] [INFO] [Player.Grenade] Step 1 complete! Drag: (256.5351, 1.4877319)
[00:47:08] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:47:08] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:47:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=1100652481266, bullet_pos=(41.69983, 702.3934)
[00:47:08] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[00:47:08] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[00:47:08] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:47:08] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:47:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=1100652481266, bullet_pos=(513.8068, 448.0727)
[00:47:08] [INFO] [Bullet] Using shooter_position, distance=1099.0615234375
[00:47:08] [INFO] [Bullet] Distance to wall: 1099.0615234375 (74.8371201267941% of viewport)
[00:47:08] [INFO] [Bullet] Distance-based penetration chance: 59.3566931854069%
[00:47:08] [INFO] [Bullet] Starting wall penetration at (513.8068, 448.0727)
[00:47:08] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.8386039733887
[00:47:08] [INFO] [Bullet] Body exited signal received for penetrating body
[00:47:08] [INFO] [Bullet] Exiting penetration at (549.3891, 428.9048) after traveling 35.4166679382324 pixels through wall
[00:47:08] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[00:47:08] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:47:08] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:47:09] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:47:09] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:47:09] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (3253.838, -1487.8632) (3577,9 px/s), Swing distance: 520,7
[00:47:09] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,42887828
[00:47:09] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (3253.838, -1487.863), Swing: 520.7, Transfer: 1.00, Final speed: 1186.5
[00:47:09] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:47:09] [INFO] [Player.Grenade] Thrown! Velocity: 3577,9, Swing: 520,7
[00:47:09] [INFO] [Player.Grenade] State reset to IDLE
[00:47:09] [ENEMY] [Enemy10] FLANKING started: target=(646.8387, 719.1918), side=left, pos=(1022.668, 1432.257)
[00:47:09] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[00:47:09] [INFO] [Player.Grenade] Player rotation restored to 0
[00:47:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4765, 753.8722), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:09] [ENEMY] [Enemy2] Heard gunshot at (684.4765, 753.8722), source_type=1, intensity=0.02, distance=350
[00:47:09] [ENEMY] [Enemy4] Heard gunshot at (684.4765, 753.8722), source_type=1, intensity=0.07, distance=186
[00:47:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:09] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[00:47:09] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:47:09] [INFO] [LastChance] Threat detected: Bullet
[00:47:09] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:09] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[00:47:09] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[00:47:09] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[00:47:09] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[00:47:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4765, 753.8722), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:09] [INFO] [LastChance] Threat detected: Bullet
[00:47:09] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:09] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[00:47:09] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[00:47:10] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[00:47:10] [INFO] [GrenadeBase] Grenade landed at (1105.813, 449.8427)
[00:47:10] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:47:10] [INFO] [GrenadeBase] EXPLODED at (1105.813, 449.8427)!
[00:47:10] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(1105.813, 449.8427), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[00:47:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=10
[00:47:10] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -10.4 degrees
[00:47:10] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 73.3 degrees
[00:47:10] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 160.1 degrees
[00:47:10] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 275.5 degrees
[00:47:10] [INFO] [Player.Debug] Debug mode toggled: ON
[00:47:10] [INFO] [GameManager] Debug mode toggled: ON
[00:47:11] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[00:47:11] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[00:47:11] [ENEMY] [Enemy5] Hit taken, health: 1/2
[00:47:11] [ENEMY] [Enemy1] Hit taken, health: 3/4
[00:47:13] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[00:47:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(534.4352, 1084.789), source=ENEMY (Enemy10), range=1469, listeners=10
[00:47:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[00:47:14] [INFO] [LastChance] Threat detected: Bullet
[00:47:14] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:14] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:47:14] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[00:47:14] [INFO] [PenultimateHit] Starting penultimate hit effect:
[00:47:14] [INFO] [PenultimateHit]   - Time scale: 0.10
[00:47:14] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[00:47:14] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[00:47:14] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[00:47:14] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[00:47:14] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[00:47:14] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[00:47:14] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:47:14] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:14] [INFO] [PenultimateHit] Ending penultimate hit effect
[00:47:14] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[00:47:14] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:14] [ENEMY] [Enemy1] Death animation component initialized
[00:47:14] [ENEMY] [Enemy2] Death animation component initialized
[00:47:14] [ENEMY] [Enemy3] Death animation component initialized
[00:47:14] [ENEMY] [Enemy4] Death animation component initialized
[00:47:14] [ENEMY] [Enemy5] Death animation component initialized
[00:47:14] [ENEMY] [Enemy6] Death animation component initialized
[00:47:14] [ENEMY] [Enemy7] Death animation component initialized
[00:47:14] [ENEMY] [Enemy8] Death animation component initialized
[00:47:14] [ENEMY] [Enemy9] Death animation component initialized
[00:47:14] [ENEMY] [Enemy10] Death animation component initialized
[00:47:14] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:14] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:14] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:14] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:14] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:14] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:14] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:47:14] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[00:47:14] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:14] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:14] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[00:47:14] [ENEMY] [Enemy1] Registered as sound listener
[00:47:14] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[00:47:14] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[00:47:14] [ENEMY] [Enemy2] Registered as sound listener
[00:47:14] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[00:47:14] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[00:47:14] [ENEMY] [Enemy3] Registered as sound listener
[00:47:14] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[00:47:14] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[00:47:14] [ENEMY] [Enemy4] Registered as sound listener
[00:47:14] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[00:47:14] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[00:47:14] [ENEMY] [Enemy5] Registered as sound listener
[00:47:14] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[00:47:14] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[00:47:14] [ENEMY] [Enemy6] Registered as sound listener
[00:47:14] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[00:47:14] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[00:47:14] [ENEMY] [Enemy7] Registered as sound listener
[00:47:14] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[00:47:14] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[00:47:14] [ENEMY] [Enemy8] Registered as sound listener
[00:47:14] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[00:47:14] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[00:47:14] [ENEMY] [Enemy9] Registered as sound listener
[00:47:14] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[00:47:14] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[00:47:14] [ENEMY] [Enemy10] Registered as sound listener
[00:47:14] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[00:47:14] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:47:14] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:47:14] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:47:14] [INFO] [LastChance] Found player: Player
[00:47:14] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:47:14] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:47:14] [INFO] [LastChance] Connected to player Died signal (C#)
[00:47:14] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:47:14] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:47:14] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:47:14] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:47:14] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:47:14] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (578.1312, 1179.2023)
[00:47:14] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:47:14] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:47:14] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:47:14] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:47:14] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:47:14] [INFO] [Player.Grenade] Step 1 complete! Drag: (275.10834, -0.66796875)
[00:47:15] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:47:15] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:47:15] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:47:15] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:47:15] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:47:15] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:47:15] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:47:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[00:47:16] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[00:47:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:47:16] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:47:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=1483055565000, bullet_pos=(41.69983, 702.3934)
[00:47:16] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[00:47:16] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[00:47:16] [INFO] [Bullet] Distance-based penetration chance: 50.6761141644985%
[00:47:16] [INFO] [Bullet] Starting wall penetration at (41.69983, 702.3934)
[00:47:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.508674621582
[00:47:16] [INFO] [Bullet] Body exited signal received for penetrating body
[00:47:16] [INFO] [Bullet] Exiting penetration at (4.46851, 674.2579) after traveling 41.6666717529297 pixels through wall
[00:47:16] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:47:16] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:47:17] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:47:17] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (4336.323, -1090.675) (4471,4 px/s), Swing distance: 829,7
[00:47:17] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,2464094
[00:47:17] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (4336.323, -1090.675), Swing: 829.7, Transfer: 1.00, Final speed: 1186.5
[00:47:17] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:47:17] [INFO] [Player.Grenade] Thrown! Velocity: 4471,4, Swing: 829,7
[00:47:17] [INFO] [Player.Grenade] State reset to IDLE
[00:47:17] [INFO] [Player.Grenade] Player rotation restored to 0
[00:47:17] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:47:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:17] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[00:47:17] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[00:47:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:17] [INFO] [LastChance] Threat detected: Bullet
[00:47:17] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:17] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[00:47:17] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[00:47:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:17] [INFO] [LastChance] Threat detected: Bullet
[00:47:17] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:17] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[00:47:17] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[00:47:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:17] [INFO] [GrenadeBase] Collision detected with Room2_WallRight (type: StaticBody2D)
[00:47:17] [INFO] [FragGrenade] Impact detected! Body: Room2_WallRight (type: StaticBody2D), triggering explosion
[00:47:17] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:47:17] [INFO] [GrenadeBase] EXPLODED at (901.1149, 624.8674)!
[00:47:17] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(901.1149, 624.8674), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[00:47:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[00:47:17] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -3.3 degrees
[00:47:17] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 94.0 degrees
[00:47:17] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 176.8 degrees
[00:47:17] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 261.0 degrees
[00:47:17] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:17] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:17] [ENEMY] [Enemy1] Death animation component initialized
[00:47:17] [ENEMY] [Enemy2] Death animation component initialized
[00:47:17] [ENEMY] [Enemy3] Death animation component initialized
[00:47:17] [ENEMY] [Enemy4] Death animation component initialized
[00:47:17] [ENEMY] [Enemy5] Death animation component initialized
[00:47:17] [ENEMY] [Enemy6] Death animation component initialized
[00:47:17] [ENEMY] [Enemy7] Death animation component initialized
[00:47:17] [ENEMY] [Enemy8] Death animation component initialized
[00:47:17] [ENEMY] [Enemy9] Death animation component initialized
[00:47:17] [ENEMY] [Enemy10] Death animation component initialized
[00:47:17] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:17] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:17] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:17] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:17] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:17] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:17] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:47:17] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[00:47:17] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:17] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:17] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[00:47:17] [ENEMY] [Enemy1] Registered as sound listener
[00:47:17] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[00:47:17] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[00:47:17] [ENEMY] [Enemy2] Registered as sound listener
[00:47:17] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[00:47:17] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[00:47:17] [ENEMY] [Enemy3] Registered as sound listener
[00:47:17] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[00:47:17] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[00:47:17] [ENEMY] [Enemy4] Registered as sound listener
[00:47:17] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[00:47:17] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[00:47:17] [ENEMY] [Enemy5] Registered as sound listener
[00:47:17] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[00:47:17] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[00:47:17] [ENEMY] [Enemy6] Registered as sound listener
[00:47:17] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[00:47:17] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[00:47:17] [ENEMY] [Enemy7] Registered as sound listener
[00:47:17] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[00:47:17] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[00:47:17] [ENEMY] [Enemy8] Registered as sound listener
[00:47:17] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[00:47:17] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[00:47:17] [ENEMY] [Enemy9] Registered as sound listener
[00:47:17] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[00:47:17] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[00:47:17] [ENEMY] [Enemy10] Registered as sound listener
[00:47:17] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[00:47:17] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:47:17] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:47:17] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:47:17] [INFO] [LastChance] Found player: Player
[00:47:17] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:47:17] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:47:17] [INFO] [LastChance] Connected to player Died signal (C#)
[00:47:17] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:47:17] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:47:17] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:47:17] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:47:17] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:47:18] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (697.7137, 1194.564)
[00:47:18] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:47:18] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:47:18] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:47:18] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:47:18] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:47:18] [INFO] [Player.Grenade] Step 1 complete! Drag: (178.84149, 27.384033)
[00:47:18] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:47:18] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:47:18] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:47:18] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:47:18] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:47:18] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:47:18] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:47:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[00:47:19] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[00:47:19] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:47:19] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:47:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=1670205408980, bullet_pos=(41.69983, 702.3934)
[00:47:19] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[00:47:19] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[00:47:19] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:47:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=1670205408980, bullet_pos=(510.3534, 375.0302)
[00:47:20] [INFO] [Bullet] Using shooter_position, distance=1166.30065917969
[00:47:20] [INFO] [Bullet] Distance to wall: 1166.30065917969 (79.4155565213478% of viewport)
[00:47:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=1670205408980, bullet_pos=(184.6694, 55.06253)
[00:47:20] [INFO] [Bullet] Using shooter_position, distance=1602.20642089844
[00:47:20] [INFO] [Bullet] Distance to wall: 1602.20642089844 (109.097181396794% of viewport)
[00:47:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:20] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[00:47:20] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[00:47:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:20] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[00:47:20] [INFO] [LastChance] Threat detected: @Area2D@1642
[00:47:20] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:20] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:20] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[00:47:20] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[00:47:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=1670205408980, bullet_pos=(59.1538, 189.7694)
[00:47:20] [INFO] [Bullet] Using shooter_position, distance=1560.89916992188
[00:47:20] [INFO] [Bullet] Distance to wall: 1560.89916992188 (106.284494720463% of viewport)
[00:47:20] [INFO] [Bullet] Distance-based penetration chance: 28.7431010559075%
[00:47:20] [INFO] [Bullet] Penetration failed (distance roll)
[00:47:20] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[00:47:20] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[00:47:20] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:47:20] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (3164.926, -66.30383) (3165,6 px/s), Swing distance: 838,6
[00:47:20] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,020946505
[00:47:20] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (3164.926, -66.30383), Swing: 838.6, Transfer: 1.00, Final speed: 1186.5
[00:47:20] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:47:20] [INFO] [Player.Grenade] Thrown! Velocity: 3165,6, Swing: 838,6
[00:47:20] [INFO] [Player.Grenade] State reset to IDLE
[00:47:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:20] [INFO] [LastChance] Threat detected: Bullet
[00:47:20] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:20] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:20] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:47:20] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[00:47:20] [INFO] [PenultimateHit] Starting penultimate hit effect:
[00:47:20] [INFO] [PenultimateHit]   - Time scale: 0.10
[00:47:20] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[00:47:20] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[00:47:20] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[00:47:20] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[00:47:20] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[00:47:20] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[00:47:20] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:47:20] [INFO] [GrenadeBase] Collision detected with Enemy3 (type: CharacterBody2D)
[00:47:20] [INFO] [FragGrenade] Impact detected! Body: Enemy3 (type: CharacterBody2D), triggering explosion
[00:47:20] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:47:20] [INFO] [GrenadeBase] EXPLODED at (653.1631, 746.5607)!
[00:47:20] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(653.1631, 746.5607), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[00:47:20] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[00:47:20] [ENEMY] [Enemy3] Hit taken, health: 3/4
[00:47:20] [ENEMY] [Enemy3] Hit taken, health: 2/4
[00:47:20] [ENEMY] [Enemy3] Hit taken, health: 1/4
[00:47:20] [ENEMY] [Enemy3] Hit taken, health: 0/4
[00:47:20] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[00:47:20] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:47:20] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[00:47:20] [INFO] [DeathAnim] Started - Angle: 13.0 deg, Index: 12
[00:47:20] [ENEMY] [Enemy3] Death animation started with hit direction: (0.974542, 0.224205)
[00:47:20] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 32.1
[00:47:20] [INFO] [FragGrenade] Player found in blast radius at distance 203.2
[00:47:20] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[00:47:20] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[00:47:20] [INFO] [PenultimateHit] Player died - ending penultimate effect
[00:47:20] [INFO] [PenultimateHit] Ending penultimate hit effect
[00:47:20] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[00:47:20] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[00:47:20] [INFO] [LastChance] Player died
[00:47:20] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 203.2
[00:47:20] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 10.4 degrees
[00:47:20] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 97.2 degrees
[00:47:20] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 185.9 degrees
[00:47:20] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 281.3 degrees
[00:47:20] [INFO] [Player.Grenade] Player rotation restored to 0
[00:47:20] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:47:20] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[00:47:20] [ENEMY] [Enemy10] FLANKING started: target=(645.0595, 768.8209), side=left, pos=(1022.668, 1432.257)
[00:47:20] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[00:47:20] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[00:47:21] [ENEMY] [Enemy3] Ragdoll activated
[00:47:21] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[00:47:21] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:21] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:21] [ENEMY] [Enemy1] Death animation component initialized
[00:47:21] [ENEMY] [Enemy2] Death animation component initialized
[00:47:21] [ENEMY] [Enemy3] Death animation component initialized
[00:47:21] [ENEMY] [Enemy4] Death animation component initialized
[00:47:21] [ENEMY] [Enemy5] Death animation component initialized
[00:47:21] [ENEMY] [Enemy6] Death animation component initialized
[00:47:21] [ENEMY] [Enemy7] Death animation component initialized
[00:47:21] [ENEMY] [Enemy8] Death animation component initialized
[00:47:21] [ENEMY] [Enemy9] Death animation component initialized
[00:47:21] [ENEMY] [Enemy10] Death animation component initialized
[00:47:21] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:21] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:21] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:21] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:21] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:21] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:21] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:47:21] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[00:47:21] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:21] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:21] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[00:47:21] [ENEMY] [Enemy1] Registered as sound listener
[00:47:21] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[00:47:21] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[00:47:21] [ENEMY] [Enemy2] Registered as sound listener
[00:47:21] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[00:47:21] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[00:47:21] [ENEMY] [Enemy3] Registered as sound listener
[00:47:21] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[00:47:21] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[00:47:21] [ENEMY] [Enemy4] Registered as sound listener
[00:47:21] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[00:47:21] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[00:47:21] [ENEMY] [Enemy5] Registered as sound listener
[00:47:21] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[00:47:21] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[00:47:21] [ENEMY] [Enemy6] Registered as sound listener
[00:47:21] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[00:47:21] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[00:47:21] [ENEMY] [Enemy7] Registered as sound listener
[00:47:21] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[00:47:21] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[00:47:21] [ENEMY] [Enemy8] Registered as sound listener
[00:47:21] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[00:47:21] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[00:47:21] [ENEMY] [Enemy9] Registered as sound listener
[00:47:21] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[00:47:21] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[00:47:21] [ENEMY] [Enemy10] Registered as sound listener
[00:47:21] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[00:47:21] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:47:21] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:47:21] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:47:21] [INFO] [LastChance] Found player: Player
[00:47:21] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:47:21] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:47:21] [INFO] [LastChance] Connected to player Died signal (C#)
[00:47:21] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:47:21] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:47:21] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:47:21] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:47:21] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:47:21] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (976.0318, 1235.974)
[00:47:21] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:47:21] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:47:21] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:47:21] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:47:21] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:47:21] [INFO] [Player.Grenade] Step 1 complete! Drag: (86.965515, 20.03711)
[00:47:22] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:47:22] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:47:22] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:47:22] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:47:22] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:47:22] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:47:22] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:47:23] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:47:23] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:47:24] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:47:24] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (0, -586.0159) (586,0 px/s), Swing distance: 606,2
[00:47:24] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,5707964
[00:47:24] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (0, -586.0159), Swing: 606.2, Transfer: 1.00, Final speed: 276.3
[00:47:24] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:47:24] [INFO] [Player.Grenade] Thrown! Velocity: 586,0, Swing: 606,2
[00:47:24] [INFO] [Player.Grenade] State reset to IDLE
[00:47:24] [INFO] [GrenadeBase] Collision detected with Room1_WallBottom (type: StaticBody2D)
[00:47:24] [INFO] [FragGrenade] Impact detected! Body: Room1_WallBottom (type: StaticBody2D), triggering explosion
[00:47:24] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:47:24] [INFO] [GrenadeBase] EXPLODED at (450, 677.1299)!
[00:47:24] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(450, 677.1299), source=NEUTRAL (FragGrenade), range=2937, listeners=19
[00:47:24] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[00:47:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[00:47:24] [ENEMY] [Enemy2] Hit taken, health: 1/2
[00:47:24] [ENEMY] [Enemy2] Hit taken, health: 0/2
[00:47:24] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[00:47:24] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:47:24] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 9)
[00:47:24] [INFO] [DeathAnim] Started - Angle: -111.5 deg, Index: 4
[00:47:24] [ENEMY] [Enemy2] Death animation started with hit direction: (-0.366008, -0.930612)
[00:47:24] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 136.6
[00:47:24] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 12.5 degrees
[00:47:24] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 109.2 degrees
[00:47:24] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 177.5 degrees
[00:47:24] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 267.1 degrees
[00:47:24] [INFO] [Player.Grenade] Player rotation restored to 0
[00:47:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=9
[00:47:24] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[00:47:24] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:47:24] [INFO] [LastChance] Threat detected: Bullet
[00:47:24] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:24] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:47:24] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[00:47:24] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:47:24] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[00:47:24] [INFO] [PenultimateHit] Starting penultimate hit effect:
[00:47:24] [INFO] [PenultimateHit]   - Time scale: 0.10
[00:47:24] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[00:47:24] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[00:47:24] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[00:47:24] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[00:47:24] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[00:47:24] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[00:47:24] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:47:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(679.5084, 759.3574), source=ENEMY (Enemy3), range=1469, listeners=9
[00:47:24] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:47:24] [INFO] [LastChance] Threat detected: Bullet
[00:47:24] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:24] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:24] [INFO] [PenultimateHit] Ending penultimate hit effect
[00:47:24] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[00:47:24] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:24] [ENEMY] [Enemy1] Death animation component initialized
[00:47:24] [ENEMY] [Enemy2] Death animation component initialized
[00:47:24] [ENEMY] [Enemy3] Death animation component initialized
[00:47:24] [ENEMY] [Enemy4] Death animation component initialized
[00:47:24] [ENEMY] [Enemy5] Death animation component initialized
[00:47:24] [ENEMY] [Enemy6] Death animation component initialized
[00:47:24] [ENEMY] [Enemy7] Death animation component initialized
[00:47:24] [ENEMY] [Enemy8] Death animation component initialized
[00:47:24] [ENEMY] [Enemy9] Death animation component initialized
[00:47:24] [ENEMY] [Enemy10] Death animation component initialized
[00:47:24] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:24] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:24] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:24] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:24] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:24] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:24] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:47:24] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[00:47:24] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:24] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:24] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[00:47:24] [ENEMY] [Enemy1] Registered as sound listener
[00:47:24] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[00:47:24] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[00:47:24] [ENEMY] [Enemy2] Registered as sound listener
[00:47:24] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[00:47:24] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[00:47:24] [ENEMY] [Enemy3] Registered as sound listener
[00:47:24] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[00:47:24] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[00:47:24] [ENEMY] [Enemy4] Registered as sound listener
[00:47:24] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[00:47:24] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[00:47:24] [ENEMY] [Enemy5] Registered as sound listener
[00:47:24] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[00:47:24] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[00:47:24] [ENEMY] [Enemy6] Registered as sound listener
[00:47:24] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[00:47:24] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[00:47:24] [ENEMY] [Enemy7] Registered as sound listener
[00:47:24] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[00:47:24] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[00:47:24] [ENEMY] [Enemy8] Registered as sound listener
[00:47:24] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[00:47:24] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[00:47:24] [ENEMY] [Enemy9] Registered as sound listener
[00:47:25] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[00:47:25] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[00:47:25] [ENEMY] [Enemy10] Registered as sound listener
[00:47:25] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[00:47:25] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:47:25] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:47:25] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:47:25] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:47:25] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:47:25] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:47:25] [INFO] [LastChance] Found player: Player
[00:47:25] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:47:25] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:47:25] [INFO] [LastChance] Connected to player Died signal (C#)
[00:47:25] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:47:25] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:47:25] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (984.09265, 1199.9072)
[00:47:25] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:47:25] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:47:25] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:47:25] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:47:25] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:47:25] [INFO] [Player.Grenade] Step 1 complete! Drag: (277.77478, 25.380371)
[00:47:25] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:47:25] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:47:25] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:47:25] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:47:25] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:47:25] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:47:26] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:47:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=19
[00:47:26] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[00:47:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:47:26] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:47:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=2107302217409, bullet_pos=(41.69983, 702.3934)
[00:47:27] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[00:47:27] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[00:47:27] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:47:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=2107302217409, bullet_pos=(316.1671, 470.7291)
[00:47:27] [INFO] [Bullet] Using shooter_position, distance=1182.12585449219
[00:47:27] [INFO] [Bullet] Distance to wall: 1182.12585449219 (80.4931231701441% of viewport)
[00:47:27] [ENEMY] [Enemy2] Hit taken, health: 2/3
[00:47:27] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:47:27] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (55.01933, -80.72743) (97,7 px/s), Swing distance: 479,1
[00:47:27] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,9725644
[00:47:27] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (55.01933, -80.72743), Swing: 479.1, Transfer: 1.00, Final speed: 46.1
[00:47:27] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:47:27] [INFO] [Player.Grenade] Thrown! Velocity: 97,7, Swing: 479,1
[00:47:27] [INFO] [Player.Grenade] State reset to IDLE
[00:47:27] [INFO] [GrenadeBase] Grenade landed at (483.791, 679.8644)
[00:47:27] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:47:27] [INFO] [GrenadeBase] EXPLODED at (483.791, 679.8644)!
[00:47:27] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(483.791, 679.8644), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[00:47:27] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[00:47:27] [ENEMY] [Enemy2] Hit taken, health: 1/3
[00:47:27] [ENEMY] [Enemy2] Hit taken, health: 0/3
[00:47:27] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[00:47:27] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:47:27] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 9)
[00:47:27] [INFO] [DeathAnim] Started - Angle: -122.8 deg, Index: 3
[00:47:27] [ENEMY] [Enemy2] Death animation started with hit direction: (-0.542161, -0.840275)
[00:47:27] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 154.5
[00:47:27] [ENEMY] [Enemy3] Hit taken, health: 2/3
[00:47:27] [ENEMY] [Enemy3] Hit taken, health: 1/3
[00:47:27] [ENEMY] [Enemy3] Hit taken, health: 0/3
[00:47:27] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[00:47:27] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[00:47:27] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 8)
[00:47:27] [INFO] [DeathAnim] Started - Angle: 20.2 deg, Index: 13
[00:47:27] [ENEMY] [Enemy3] Death animation started with hit direction: (0.938392, 0.345571)
[00:47:27] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 213.8
[00:47:27] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -1.5 degrees
[00:47:27] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 85.5 degrees
[00:47:27] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 197.4 degrees
[00:47:27] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 286.2 degrees
[00:47:27] [INFO] [Player.Grenade] Player rotation restored to 0
[00:47:27] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:47:27] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[00:47:27] [INFO] [PenultimateHit] Starting penultimate hit effect:
[00:47:27] [INFO] [PenultimateHit]   - Time scale: 0.10
[00:47:27] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[00:47:27] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[00:47:27] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[00:47:27] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[00:47:27] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[00:47:27] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[00:47:27] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:47:27] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:47:28] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:28] [INFO] [PenultimateHit] Ending penultimate hit effect
[00:47:28] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[00:47:28] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:28] [ENEMY] [Enemy1] Death animation component initialized
[00:47:28] [ENEMY] [Enemy2] Death animation component initialized
[00:47:28] [ENEMY] [Enemy3] Death animation component initialized
[00:47:28] [ENEMY] [Enemy4] Death animation component initialized
[00:47:28] [ENEMY] [Enemy5] Death animation component initialized
[00:47:28] [ENEMY] [Enemy6] Death animation component initialized
[00:47:28] [ENEMY] [Enemy7] Death animation component initialized
[00:47:28] [ENEMY] [Enemy8] Death animation component initialized
[00:47:28] [ENEMY] [Enemy9] Death animation component initialized
[00:47:28] [ENEMY] [Enemy10] Death animation component initialized
[00:47:28] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:28] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:28] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:28] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:28] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:28] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:28] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:47:28] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[00:47:28] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:28] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:28] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
[00:47:28] [ENEMY] [Enemy1] Registered as sound listener
[00:47:28] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[00:47:28] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
[00:47:28] [ENEMY] [Enemy2] Registered as sound listener
[00:47:28] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[00:47:28] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
[00:47:28] [ENEMY] [Enemy3] Registered as sound listener
[00:47:28] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[00:47:28] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
[00:47:28] [ENEMY] [Enemy4] Registered as sound listener
[00:47:28] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[00:47:28] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
[00:47:28] [ENEMY] [Enemy5] Registered as sound listener
[00:47:28] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[00:47:28] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
[00:47:28] [ENEMY] [Enemy6] Registered as sound listener
[00:47:28] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[00:47:28] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
[00:47:28] [ENEMY] [Enemy7] Registered as sound listener
[00:47:28] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[00:47:28] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
[00:47:28] [ENEMY] [Enemy8] Registered as sound listener
[00:47:28] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[00:47:28] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
[00:47:28] [ENEMY] [Enemy9] Registered as sound listener
[00:47:28] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[00:47:28] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
[00:47:28] [ENEMY] [Enemy10] Registered as sound listener
[00:47:28] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[00:47:28] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:47:28] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:47:28] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:47:28] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:47:28] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:47:28] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:47:28] [INFO] [LastChance] Found player: Player
[00:47:28] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:47:28] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:47:28] [INFO] [LastChance] Connected to player Died signal (C#)
[00:47:28] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:47:28] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:47:28] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (931.33514, 1270.0371)
[00:47:28] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:47:28] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:47:28] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:47:28] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:47:28] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:47:28] [INFO] [Player.Grenade] Step 1 complete! Drag: (227.58722, 27.384033)
[00:47:28] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:47:28] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:47:28] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:47:28] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:47:28] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:47:28] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:47:29] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:47:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=18
[00:47:29] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
[00:47:29] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:47:29] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:47:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=2288496150847, bullet_pos=(41.69983, 702.3934)
[00:47:30] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[00:47:30] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[00:47:30] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:47:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=2288496150847, bullet_pos=(269.8948, 472.7391)
[00:47:30] [INFO] [Bullet] Using shooter_position, distance=1208.10656738281
[00:47:30] [INFO] [Bullet] Distance to wall: 1208.10656738281 (82.2621976851852% of viewport)
[00:47:30] [INFO] [Bullet] Distance-based penetration chance: 50.6941027006173%
[00:47:30] [INFO] [Bullet] Starting wall penetration at (269.8948, 472.7391)
[00:47:30] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[00:47:30] [INFO] [Bullet] Exiting penetration at (298.3824, 444.0693) after traveling 35.4166679382324 pixels through wall
[00:47:30] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[00:47:30] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:47:30] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (0.002962, -741.0412) (741,0 px/s), Swing distance: 475,0
[00:47:30] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,5707923
[00:47:30] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (0.002962, -741.0412), Swing: 475.0, Transfer: 1.00, Final speed: 349.3
[00:47:30] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:47:30] [INFO] [Player.Grenade] Thrown! Velocity: 741,0, Swing: 475,0
[00:47:30] [INFO] [Player.Grenade] State reset to IDLE
[00:47:30] [INFO] [Player.Grenade] Player rotation restored to 0
[00:47:30] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:47:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:30] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[00:47:30] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[00:47:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:30] [INFO] [LastChance] Threat detected: Bullet
[00:47:30] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:30] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:47:30] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[00:47:30] [INFO] [PenultimateHit] Starting penultimate hit effect:
[00:47:30] [INFO] [PenultimateHit]   - Time scale: 0.10
[00:47:30] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[00:47:30] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[00:47:30] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[00:47:30] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[00:47:30] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[00:47:30] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[00:47:30] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:47:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:31] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:31] [INFO] [LastChance] Threat detected: Bullet
[00:47:31] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:31] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:31] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:31] [INFO] [PenultimateHit] Ending penultimate hit effect
[00:47:31] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[00:47:31] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:31] [ENEMY] [Enemy1] Death animation component initialized
[00:47:31] [ENEMY] [Enemy2] Death animation component initialized
[00:47:31] [ENEMY] [Enemy3] Death animation component initialized
[00:47:31] [ENEMY] [Enemy4] Death animation component initialized
[00:47:31] [ENEMY] [Enemy5] Death animation component initialized
[00:47:31] [ENEMY] [Enemy6] Death animation component initialized
[00:47:31] [ENEMY] [Enemy7] Death animation component initialized
[00:47:31] [ENEMY] [Enemy8] Death animation component initialized
[00:47:31] [ENEMY] [Enemy9] Death animation component initialized
[00:47:31] [ENEMY] [Enemy10] Death animation component initialized
[00:47:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:31] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:31] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:31] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:31] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:31] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:47:31] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[00:47:31] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:31] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:31] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[00:47:31] [ENEMY] [Enemy1] Registered as sound listener
[00:47:31] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[00:47:31] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[00:47:31] [ENEMY] [Enemy2] Registered as sound listener
[00:47:31] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[00:47:31] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[00:47:31] [ENEMY] [Enemy3] Registered as sound listener
[00:47:31] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[00:47:31] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[00:47:31] [ENEMY] [Enemy4] Registered as sound listener
[00:47:31] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[00:47:31] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[00:47:31] [ENEMY] [Enemy5] Registered as sound listener
[00:47:31] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[00:47:31] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[00:47:31] [ENEMY] [Enemy6] Registered as sound listener
[00:47:31] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[00:47:31] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[00:47:31] [ENEMY] [Enemy7] Registered as sound listener
[00:47:31] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[00:47:31] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[00:47:31] [ENEMY] [Enemy8] Registered as sound listener
[00:47:31] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[00:47:31] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[00:47:31] [ENEMY] [Enemy9] Registered as sound listener
[00:47:31] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[00:47:31] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[00:47:31] [ENEMY] [Enemy10] Registered as sound listener
[00:47:31] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[00:47:31] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:47:31] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:47:31] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:47:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:47:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:47:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:47:31] [INFO] [LastChance] Found player: Player
[00:47:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:47:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:47:31] [INFO] [LastChance] Connected to player Died signal (C#)
[00:47:31] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:47:31] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:47:31] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (733.5707, 1326.141)
[00:47:31] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:47:31] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:47:31] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:47:31] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:47:31] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:47:31] [INFO] [Player.Grenade] Step 1 complete! Drag: (115.436584, 0)
[00:47:31] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:47:31] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:47:32] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:47:32] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:47:32] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:47:32] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:47:32] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:47:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[00:47:33] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[00:47:33] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:47:33] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:47:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=2482122000828, bullet_pos=(41.69983, 702.3934)
[00:47:33] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[00:47:33] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[00:47:33] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:47:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=2482122000828, bullet_pos=(273.274, 476.1471)
[00:47:33] [INFO] [Bullet] Using shooter_position, distance=1203.345703125
[00:47:33] [INFO] [Bullet] Distance to wall: 1203.345703125 (81.9380216834133% of viewport)
[00:47:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=2482122000828, bullet_pos=(493.3723, 688.793)
[00:47:33] [INFO] [Bullet] Using shooter_position, distance=901.793029785156
[00:47:33] [INFO] [Bullet] Distance to wall: 901.793029785156 (61.4047456492322% of viewport)
[00:47:33] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:47:33] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (1446.1497, -202.1707) (1460,2 px/s), Swing distance: 650,8
[00:47:33] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,13889907
[00:47:33] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (1446.15, -202.1707), Swing: 650.8, Transfer: 1.00, Final speed: 688.4
[00:47:33] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:47:33] [INFO] [Player.Grenade] Thrown! Velocity: 1460,2, Swing: 650,8
[00:47:33] [INFO] [Player.Grenade] State reset to IDLE
[00:47:34] [INFO] [Player.Grenade] Player rotation restored to 0
[00:47:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:34] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[00:47:34] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[00:47:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:34] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[00:47:34] [INFO] [LastChance] Threat detected: @Area2D@2710
[00:47:34] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:34] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[00:47:34] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:47:34] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[00:47:34] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[00:47:34] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[00:47:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:34] [INFO] [LastChance] Threat detected: @Area2D@2711
[00:47:34] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=2482122000828, bullet_pos=(987.9182, 275.1752)
[00:47:34] [INFO] [Bullet] Using shooter_position, distance=1155.86364746094
[00:47:34] [INFO] [Bullet] Distance to wall: 1155.86364746094 (78.7048812014459% of viewport)
[00:47:34] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[00:47:34] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[00:47:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:34] [INFO] [LastChance] Threat detected: @Area2D@2713
[00:47:34] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:34] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:47:34] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[00:47:34] [INFO] [PenultimateHit] Starting penultimate hit effect:
[00:47:34] [INFO] [PenultimateHit]   - Time scale: 0.10
[00:47:34] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[00:47:34] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[00:47:34] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[00:47:34] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[00:47:34] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[00:47:34] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[00:47:34] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:47:34] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[00:47:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:34] [INFO] [LastChance] Threat detected: @Area2D@2714
[00:47:34] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:34] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:34] [INFO] [PenultimateHit] Ending penultimate hit effect
[00:47:34] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[00:47:34] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:34] [ENEMY] [Enemy1] Death animation component initialized
[00:47:34] [ENEMY] [Enemy2] Death animation component initialized
[00:47:34] [ENEMY] [Enemy3] Death animation component initialized
[00:47:34] [ENEMY] [Enemy4] Death animation component initialized
[00:47:34] [ENEMY] [Enemy5] Death animation component initialized
[00:47:34] [ENEMY] [Enemy6] Death animation component initialized
[00:47:34] [ENEMY] [Enemy7] Death animation component initialized
[00:47:34] [ENEMY] [Enemy8] Death animation component initialized
[00:47:34] [ENEMY] [Enemy9] Death animation component initialized
[00:47:34] [ENEMY] [Enemy10] Death animation component initialized
[00:47:34] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:34] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:34] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:34] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:34] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:34] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:34] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:47:34] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[00:47:34] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:34] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:34] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[00:47:34] [ENEMY] [Enemy1] Registered as sound listener
[00:47:34] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[00:47:34] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[00:47:34] [ENEMY] [Enemy2] Registered as sound listener
[00:47:34] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[00:47:34] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[00:47:34] [ENEMY] [Enemy3] Registered as sound listener
[00:47:34] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[00:47:34] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[00:47:34] [ENEMY] [Enemy4] Registered as sound listener
[00:47:34] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[00:47:34] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[00:47:34] [ENEMY] [Enemy5] Registered as sound listener
[00:47:34] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[00:47:34] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[00:47:34] [ENEMY] [Enemy6] Registered as sound listener
[00:47:34] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[00:47:34] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[00:47:34] [ENEMY] [Enemy7] Registered as sound listener
[00:47:34] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[00:47:34] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[00:47:34] [ENEMY] [Enemy8] Registered as sound listener
[00:47:34] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[00:47:34] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[00:47:34] [ENEMY] [Enemy9] Registered as sound listener
[00:47:34] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[00:47:34] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[00:47:34] [ENEMY] [Enemy10] Registered as sound listener
[00:47:34] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[00:47:34] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:47:34] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:47:34] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:47:34] [INFO] [LastChance] Found player: Player
[00:47:34] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:47:34] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:47:34] [INFO] [LastChance] Connected to player Died signal (C#)
[00:47:34] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:47:34] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:47:34] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:47:35] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:47:35] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:47:35] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (831.79443, 1357.5325)
[00:47:35] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:47:35] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:47:35] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:47:35] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:47:35] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:47:35] [INFO] [Player.Grenade] Step 1 complete! Drag: (61.6604, -8.014893)
[00:47:35] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:47:35] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:47:35] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:47:35] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:47:35] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:47:35] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:47:35] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:47:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[00:47:36] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[00:47:36] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:47:36] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:47:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=2692290184826, bullet_pos=(41.69983, 702.3934)
[00:47:36] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[00:47:36] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[00:47:36] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:47:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=2692290184826, bullet_pos=(514.511, 381.0644)
[00:47:37] [INFO] [Bullet] Using shooter_position, distance=1159.07263183594
[00:47:37] [INFO] [Bullet] Distance to wall: 1159.07263183594 (78.9233868483416% of viewport)
[00:47:37] [INFO] [Bullet] Distance-based penetration chance: 54.5893820102682%
[00:47:37] [INFO] [Bullet] Penetration failed (distance roll)
[00:47:37] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:47:37] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (0.002962, -135.16064) (135,2 px/s), Swing distance: 480,3
[00:47:37] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,5707744
[00:47:37] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (0.002962, -135.1606), Swing: 480.3, Transfer: 1.00, Final speed: 63.7
[00:47:37] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:47:37] [INFO] [Player.Grenade] Thrown! Velocity: 135,2, Swing: 480,3
[00:47:37] [INFO] [Player.Grenade] State reset to IDLE
[00:47:37] [INFO] [GrenadeBase] Collision detected with Room1_WallBottom (type: StaticBody2D)
[00:47:37] [INFO] [FragGrenade] Impact detected! Body: Room1_WallBottom (type: StaticBody2D), triggering explosion
[00:47:37] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:47:37] [INFO] [GrenadeBase] EXPLODED at (450.0013, 717.7426)!
[00:47:37] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(450.0013, 717.7426), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[00:47:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[00:47:37] [INFO] [FragGrenade] Player found in blast radius at distance 50.2
[00:47:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:47:37] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[00:47:37] [INFO] [PenultimateHit] Starting penultimate hit effect:
[00:47:37] [INFO] [PenultimateHit]   - Time scale: 0.10
[00:47:37] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[00:47:37] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[00:47:37] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[00:47:37] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[00:47:37] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[00:47:37] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[00:47:37] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:47:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[00:47:37] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[00:47:37] [INFO] [PenultimateHit] Player died - ending penultimate effect
[00:47:37] [INFO] [PenultimateHit] Ending penultimate hit effect
[00:47:37] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[00:47:37] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[00:47:37] [INFO] [LastChance] Player died
[00:47:37] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 50.2
[00:47:37] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -6.1 degrees
[00:47:37] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 83.0 degrees
[00:47:37] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 172.5 degrees
[00:47:37] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 279.4 degrees
[00:47:37] [INFO] [Player.Grenade] Player rotation restored to 0
[00:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4577, 753.7969), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:37] [ENEMY] [Enemy2] Heard gunshot at (684.4577, 753.7969), source_type=1, intensity=0.02, distance=350
[00:47:37] [ENEMY] [Enemy4] Heard gunshot at (684.4577, 753.7969), source_type=1, intensity=0.07, distance=186
[00:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:37] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:47:37] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[00:47:37] [INFO] [LastChance] Threat detected: Bullet
[00:47:37] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:37] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[00:47:37] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[00:47:37] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[00:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(670.4526, 749.3691), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:37] [INFO] [LastChance] Threat detected: Bullet
[00:47:37] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(649.2129, 734.1434), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:37] [INFO] [LastChance] Threat detected: @Area2D@2978
[00:47:37] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:37] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[00:47:37] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:37] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:37] [ENEMY] [Enemy1] Death animation component initialized
[00:47:37] [ENEMY] [Enemy2] Death animation component initialized
[00:47:37] [ENEMY] [Enemy3] Death animation component initialized
[00:47:37] [ENEMY] [Enemy4] Death animation component initialized
[00:47:37] [ENEMY] [Enemy5] Death animation component initialized
[00:47:37] [ENEMY] [Enemy6] Death animation component initialized
[00:47:37] [ENEMY] [Enemy7] Death animation component initialized
[00:47:37] [ENEMY] [Enemy8] Death animation component initialized
[00:47:37] [ENEMY] [Enemy9] Death animation component initialized
[00:47:37] [ENEMY] [Enemy10] Death animation component initialized
[00:47:37] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:37] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:37] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:37] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:37] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:37] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:37] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:47:37] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[00:47:37] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:37] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[00:47:37] [ENEMY] [Enemy1] Registered as sound listener
[00:47:37] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[00:47:37] [ENEMY] [Enemy2] Registered as sound listener
[00:47:37] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[00:47:37] [ENEMY] [Enemy3] Registered as sound listener
[00:47:37] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[00:47:37] [ENEMY] [Enemy4] Registered as sound listener
[00:47:37] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[00:47:37] [ENEMY] [Enemy5] Registered as sound listener
[00:47:37] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[00:47:37] [ENEMY] [Enemy6] Registered as sound listener
[00:47:37] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[00:47:37] [ENEMY] [Enemy7] Registered as sound listener
[00:47:37] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[00:47:37] [ENEMY] [Enemy8] Registered as sound listener
[00:47:37] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[00:47:37] [ENEMY] [Enemy9] Registered as sound listener
[00:47:37] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[00:47:37] [ENEMY] [Enemy10] Registered as sound listener
[00:47:37] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[00:47:37] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:37] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:37] [ENEMY] [Enemy1] Death animation component initialized
[00:47:37] [ENEMY] [Enemy2] Death animation component initialized
[00:47:37] [ENEMY] [Enemy3] Death animation component initialized
[00:47:37] [ENEMY] [Enemy4] Death animation component initialized
[00:47:37] [ENEMY] [Enemy5] Death animation component initialized
[00:47:37] [ENEMY] [Enemy6] Death animation component initialized
[00:47:37] [ENEMY] [Enemy7] Death animation component initialized
[00:47:37] [ENEMY] [Enemy8] Death animation component initialized
[00:47:37] [ENEMY] [Enemy9] Death animation component initialized
[00:47:37] [ENEMY] [Enemy10] Death animation component initialized
[00:47:37] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:37] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:37] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:37] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:37] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:37] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:37] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:47:37] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[00:47:37] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:37] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[00:47:37] [ENEMY] [Enemy1] Registered as sound listener
[00:47:37] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[00:47:37] [ENEMY] [Enemy2] Registered as sound listener
[00:47:37] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[00:47:37] [ENEMY] [Enemy3] Registered as sound listener
[00:47:37] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[00:47:37] [ENEMY] [Enemy4] Registered as sound listener
[00:47:37] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[00:47:37] [ENEMY] [Enemy5] Registered as sound listener
[00:47:37] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[00:47:37] [ENEMY] [Enemy6] Registered as sound listener
[00:47:37] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[00:47:37] [ENEMY] [Enemy7] Registered as sound listener
[00:47:37] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[00:47:37] [ENEMY] [Enemy8] Registered as sound listener
[00:47:37] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[00:47:37] [ENEMY] [Enemy9] Registered as sound listener
[00:47:37] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[00:47:37] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[00:47:37] [ENEMY] [Enemy10] Registered as sound listener
[00:47:37] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[00:47:37] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:47:37] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:47:37] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:47:37] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:47:37] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:47:37] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:47:37] [INFO] [LastChance] Found player: Player
[00:47:37] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:47:37] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:47:37] [INFO] [LastChance] Connected to player Died signal (C#)
[00:47:38] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:47:38] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:47:38] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (562.5669, 1332.1521)
[00:47:38] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:47:38] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:47:38] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:47:38] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:47:38] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:47:38] [INFO] [Player.Grenade] Step 1 complete! Drag: (386.54266, 26.716187)
[00:47:38] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:47:38] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:47:38] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:47:38] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:47:38] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:47:38] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:47:38] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:47:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=30
[00:47:39] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[00:47:39] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:47:39] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:47:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=2893717440647, bullet_pos=(41.69983, 702.3934)
[00:47:39] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[00:47:39] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[00:47:39] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:47:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=2893717440647, bullet_pos=(507.2448, 370.6245)
[00:47:40] [INFO] [Bullet] Using shooter_position, distance=1171.60998535156
[00:47:40] [INFO] [Bullet] Distance to wall: 1171.60998535156 (79.7770783033807% of viewport)
[00:47:40] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:47:40] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (83.50973, -201.98685) (218,6 px/s), Swing distance: 680,2
[00:47:40] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,1787565
[00:47:40] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (83.50973, -201.9868), Swing: 680.2, Transfer: 1.00, Final speed: 103.0
[00:47:40] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:47:40] [INFO] [Player.Grenade] Thrown! Velocity: 218,6, Swing: 680,2
[00:47:40] [INFO] [Player.Grenade] State reset to IDLE
[00:47:40] [INFO] [GrenadeBase] Collision detected with Room1_WallBottom (type: StaticBody2D)
[00:47:40] [INFO] [FragGrenade] Impact detected! Body: Room1_WallBottom (type: StaticBody2D), triggering explosion
[00:47:40] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:47:40] [INFO] [GrenadeBase] EXPLODED at (473.5394, 679.752)!
[00:47:40] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(473.5394, 679.752), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[00:47:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[00:47:40] [ENEMY] [Enemy2] Hit taken, health: 2/3
[00:47:40] [ENEMY] [Enemy2] Hit taken, health: 1/3
[00:47:40] [ENEMY] [Enemy2] Hit taken, health: 0/3
[00:47:40] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[00:47:40] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:47:40] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 9)
[00:47:40] [INFO] [DeathAnim] Started - Angle: -119.5 deg, Index: 4
[00:47:40] [ENEMY] [Enemy2] Death animation started with hit direction: (-0.49308, -0.869984)
[00:47:40] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 149.1
[00:47:40] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 2.0 degrees
[00:47:40] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 80.3 degrees
[00:47:40] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 185.4 degrees
[00:47:40] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 287.2 degrees
[00:47:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=2893717440647, bullet_pos=(179.4527, 52.81689)
[00:47:40] [INFO] [Bullet] Using shooter_position, distance=1606.81164550781
[00:47:40] [INFO] [Bullet] Distance to wall: 1606.81164550781 (109.410759608707% of viewport)
[00:47:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=9
[00:47:40] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[00:47:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:47:40] [INFO] [LastChance] Threat detected: @Area2D@3497
[00:47:40] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:40] [INFO] [Player.Grenade] Player rotation restored to 0
[00:47:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=2893717440647, bullet_pos=(57.32221, 153.8927)
[00:47:40] [INFO] [Bullet] Using shooter_position, distance=1590.66650390625
[00:47:40] [INFO] [Bullet] Distance to wall: 1590.66650390625 (108.311407228759% of viewport)
[00:47:40] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[00:47:40] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[00:47:40] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:47:40] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[00:47:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=9
[00:47:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:47:40] [INFO] [LastChance] Threat detected: @Area2D@3505
[00:47:40] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(667.1583, 773.3539), source=ENEMY (Enemy3), range=1469, listeners=9
[00:47:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:47:40] [INFO] [LastChance] Threat detected: @Area2D@3509
[00:47:40] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:40] [ENEMY] [Enemy1] Hit taken, health: 1/2
[00:47:40] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:47:40] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[00:47:40] [INFO] [PenultimateHit] Starting penultimate hit effect:
[00:47:40] [INFO] [PenultimateHit]   - Time scale: 0.10
[00:47:40] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[00:47:40] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[00:47:40] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[00:47:40] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[00:47:40] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[00:47:40] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[00:47:40] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:47:40] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:40] [INFO] [PenultimateHit] Ending penultimate hit effect
[00:47:40] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[00:47:40] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:40] [ENEMY] [Enemy1] Death animation component initialized
[00:47:40] [ENEMY] [Enemy2] Death animation component initialized
[00:47:40] [ENEMY] [Enemy3] Death animation component initialized
[00:47:40] [ENEMY] [Enemy4] Death animation component initialized
[00:47:40] [ENEMY] [Enemy5] Death animation component initialized
[00:47:40] [ENEMY] [Enemy6] Death animation component initialized
[00:47:40] [ENEMY] [Enemy7] Death animation component initialized
[00:47:40] [ENEMY] [Enemy8] Death animation component initialized
[00:47:40] [ENEMY] [Enemy9] Death animation component initialized
[00:47:40] [ENEMY] [Enemy10] Death animation component initialized
[00:47:40] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:40] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:40] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:40] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:40] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:40] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:40] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:47:40] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[00:47:40] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:40] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:40] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[00:47:40] [ENEMY] [Enemy1] Registered as sound listener
[00:47:40] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[00:47:40] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[00:47:40] [ENEMY] [Enemy2] Registered as sound listener
[00:47:40] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[00:47:40] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[00:47:40] [ENEMY] [Enemy3] Registered as sound listener
[00:47:40] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[00:47:40] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[00:47:40] [ENEMY] [Enemy4] Registered as sound listener
[00:47:40] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[00:47:40] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[00:47:40] [ENEMY] [Enemy5] Registered as sound listener
[00:47:40] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[00:47:40] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[00:47:40] [ENEMY] [Enemy6] Registered as sound listener
[00:47:40] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[00:47:40] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[00:47:40] [ENEMY] [Enemy7] Registered as sound listener
[00:47:40] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[00:47:40] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[00:47:40] [ENEMY] [Enemy8] Registered as sound listener
[00:47:40] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[00:47:40] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[00:47:40] [ENEMY] [Enemy9] Registered as sound listener
[00:47:40] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[00:47:40] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[00:47:40] [ENEMY] [Enemy10] Registered as sound listener
[00:47:40] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[00:47:40] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:47:40] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:47:40] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:47:40] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:47:40] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:47:40] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:47:40] [INFO] [LastChance] Found player: Player
[00:47:40] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:47:40] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:47:40] [INFO] [LastChance] Connected to player Died signal (C#)
[00:47:41] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:47:41] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:47:41] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1004.9279, 1372.8943)
[00:47:41] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:47:41] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:47:41] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:47:41] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:47:41] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:47:41] [INFO] [Player.Grenade] Step 1 complete! Drag: (255.29108, 69.461914)
[00:47:41] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:47:41] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:47:41] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:47:41] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:47:41] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:47:41] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:47:41] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:47:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=19
[00:47:42] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[00:47:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:47:42] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:47:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=3077780277584, bullet_pos=(41.69983, 702.3934)
[00:47:42] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[00:47:42] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[00:47:42] [INFO] [Bullet] Distance-based penetration chance: 50.6761141644985%
[00:47:42] [INFO] [Bullet] Starting wall penetration at (41.69983, 702.3934)
[00:47:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.508674621582
[00:47:43] [INFO] [Bullet] Body exited signal received for penetrating body
[00:47:43] [INFO] [Bullet] Exiting penetration at (4.46851, 674.2579) after traveling 41.6666717529297 pixels through wall
[00:47:43] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:47:43] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:47:43] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:47:43] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (0, 687.6438) (687,6 px/s), Swing distance: 584,2
[00:47:43] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 1,5707964
[00:47:43] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (0, 687.6438), Swing: 584.2, Transfer: 1.00, Final speed: 324.2
[00:47:43] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:47:43] [INFO] [Player.Grenade] Thrown! Velocity: 687,6, Swing: 584,2
[00:47:43] [INFO] [Player.Grenade] State reset to IDLE
[00:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:43] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[00:47:43] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[00:47:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:43] [INFO] [LastChance] Threat detected: Bullet
[00:47:43] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:43] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[00:47:43] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[00:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:43] [INFO] [Player.Grenade] Player rotation restored to 0
[00:47:43] [INFO] [LastChance] Threat detected: Bullet
[00:47:43] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:43] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:47:43] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:47:43] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[00:47:43] [INFO] [PenultimateHit] Starting penultimate hit effect:
[00:47:43] [INFO] [PenultimateHit]   - Time scale: 0.10
[00:47:43] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[00:47:43] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[00:47:43] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[00:47:43] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[00:47:43] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[00:47:43] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[00:47:43] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:47:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:44] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:44] [INFO] [PenultimateHit] Ending penultimate hit effect
[00:47:44] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[00:47:44] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:44] [ENEMY] [Enemy1] Death animation component initialized
[00:47:44] [ENEMY] [Enemy2] Death animation component initialized
[00:47:44] [ENEMY] [Enemy3] Death animation component initialized
[00:47:44] [ENEMY] [Enemy4] Death animation component initialized
[00:47:44] [ENEMY] [Enemy5] Death animation component initialized
[00:47:44] [ENEMY] [Enemy6] Death animation component initialized
[00:47:44] [ENEMY] [Enemy7] Death animation component initialized
[00:47:44] [ENEMY] [Enemy8] Death animation component initialized
[00:47:44] [ENEMY] [Enemy9] Death animation component initialized
[00:47:44] [ENEMY] [Enemy10] Death animation component initialized
[00:47:44] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:44] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:44] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:44] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:44] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:44] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:44] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:47:44] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[00:47:44] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:44] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:44] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[00:47:44] [ENEMY] [Enemy1] Registered as sound listener
[00:47:44] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[00:47:44] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[00:47:44] [ENEMY] [Enemy2] Registered as sound listener
[00:47:44] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[00:47:44] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[00:47:44] [ENEMY] [Enemy3] Registered as sound listener
[00:47:44] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[00:47:44] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[00:47:44] [ENEMY] [Enemy4] Registered as sound listener
[00:47:44] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[00:47:44] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[00:47:44] [ENEMY] [Enemy5] Registered as sound listener
[00:47:44] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[00:47:44] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[00:47:44] [ENEMY] [Enemy6] Registered as sound listener
[00:47:44] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[00:47:44] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[00:47:44] [ENEMY] [Enemy7] Registered as sound listener
[00:47:44] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[00:47:44] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[00:47:44] [ENEMY] [Enemy8] Registered as sound listener
[00:47:44] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[00:47:44] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[00:47:44] [ENEMY] [Enemy9] Registered as sound listener
[00:47:44] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[00:47:44] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[00:47:44] [ENEMY] [Enemy10] Registered as sound listener
[00:47:44] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[00:47:44] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:47:44] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:47:44] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:47:44] [INFO] [LastChance] Found player: Player
[00:47:44] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:47:44] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:47:44] [INFO] [LastChance] Connected to player Died signal (C#)
[00:47:44] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:47:44] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:47:44] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:47:44] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:47:44] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:47:44] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1042.5422, 1599.9814)
[00:47:44] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:47:44] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:47:44] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:47:44] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:47:44] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:47:44] [INFO] [Player.Grenade] Step 1 complete! Drag: (211.77649, 9.350586)
[00:47:44] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:47:44] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:47:44] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:47:44] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:47:44] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:47:44] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:47:45] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:47:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=20
[00:47:45] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[00:47:45] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:47:45] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=3265785759291, bullet_pos=(41.69983, 702.3934)
[00:47:46] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[00:47:46] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[00:47:46] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=3265785759291, bullet_pos=(512.452, 378.0555)
[00:47:46] [INFO] [Bullet] Using shooter_position, distance=1162.67077636719
[00:47:46] [INFO] [Bullet] Distance to wall: 1162.67077636719 (79.1683911258788% of viewport)
[00:47:46] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:47:46] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (0.004308364, -313.68927) (313,7 px/s), Swing distance: 503,2
[00:47:46] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,5707825
[00:47:46] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (0.004308, -313.6893), Swing: 503.2, Transfer: 1.00, Final speed: 147.9
[00:47:46] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:47:46] [INFO] [Player.Grenade] Thrown! Velocity: 313,7, Swing: 503,2
[00:47:46] [INFO] [Player.Grenade] State reset to IDLE
[00:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=3265785759291, bullet_pos=(140.0883, 64.70316)
[00:47:46] [INFO] [Bullet] Using shooter_position, distance=1617.35131835938
[00:47:46] [INFO] [Bullet] Distance to wall: 1617.35131835938 (110.12842531392% of viewport)
[00:47:46] [INFO] [Player.Grenade] Player rotation restored to 0
[00:47:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:46] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[00:47:46] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[00:47:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:46] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[00:47:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=3265785759291, bullet_pos=(65.52344, 141.9366)
[00:47:46] [INFO] [Bullet] Using shooter_position, distance=1595.43408203125
[00:47:46] [INFO] [Bullet] Distance to wall: 1595.43408203125 (108.636040390094% of viewport)
[00:47:46] [INFO] [Bullet] Distance-based penetration chance: 28.2727919219813%
[00:47:46] [INFO] [Bullet] Penetration failed (distance roll)
[00:47:46] [INFO] [LastChance] Threat detected: @Area2D@4018
[00:47:46] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:46] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[00:47:46] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:47:46] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[00:47:46] [INFO] [GrenadeBase] Grenade landed at (450.0012, 653.9389)
[00:47:46] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:47:46] [INFO] [GrenadeBase] EXPLODED at (450.0012, 653.9389)!
[00:47:46] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(450.0012, 653.9389), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[00:47:46] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[00:47:46] [ENEMY] [Enemy2] Hit taken, health: 1/2
[00:47:46] [ENEMY] [Enemy2] Hit taken, health: 0/2
[00:47:46] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[00:47:46] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:47:46] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 9)
[00:47:46] [INFO] [DeathAnim] Started - Angle: -115.7 deg, Index: 4
[00:47:46] [ENEMY] [Enemy2] Death animation started with hit direction: (-0.43351, -0.901149)
[00:47:46] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 115.3
[00:47:46] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -17.1 degrees
[00:47:46] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 78.0 degrees
[00:47:46] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 193.5 degrees
[00:47:46] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 272.2 degrees
[00:47:46] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:47:46] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[00:47:46] [INFO] [PenultimateHit] Starting penultimate hit effect:
[00:47:46] [INFO] [PenultimateHit]   - Time scale: 0.10
[00:47:46] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[00:47:46] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[00:47:46] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[00:47:46] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[00:47:46] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[00:47:46] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[00:47:46] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:47:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=9
[00:47:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:47:46] [INFO] [LastChance] Threat detected: Bullet
[00:47:46] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:46] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:46] [INFO] [PenultimateHit] Ending penultimate hit effect
[00:47:46] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[00:47:46] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:46] [ENEMY] [Enemy1] Death animation component initialized
[00:47:46] [ENEMY] [Enemy2] Death animation component initialized
[00:47:47] [ENEMY] [Enemy3] Death animation component initialized
[00:47:47] [ENEMY] [Enemy4] Death animation component initialized
[00:47:47] [ENEMY] [Enemy5] Death animation component initialized
[00:47:47] [ENEMY] [Enemy6] Death animation component initialized
[00:47:47] [ENEMY] [Enemy7] Death animation component initialized
[00:47:47] [ENEMY] [Enemy8] Death animation component initialized
[00:47:47] [ENEMY] [Enemy9] Death animation component initialized
[00:47:47] [ENEMY] [Enemy10] Death animation component initialized
[00:47:47] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:47] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:47] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:47] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:47] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:47] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:47] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:47:47] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[00:47:47] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:47] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:47] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[00:47:47] [ENEMY] [Enemy1] Registered as sound listener
[00:47:47] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[00:47:47] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[00:47:47] [ENEMY] [Enemy2] Registered as sound listener
[00:47:47] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[00:47:47] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[00:47:47] [ENEMY] [Enemy3] Registered as sound listener
[00:47:47] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[00:47:47] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[00:47:47] [ENEMY] [Enemy4] Registered as sound listener
[00:47:47] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[00:47:47] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[00:47:47] [ENEMY] [Enemy5] Registered as sound listener
[00:47:47] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[00:47:47] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[00:47:47] [ENEMY] [Enemy6] Registered as sound listener
[00:47:47] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[00:47:47] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[00:47:47] [ENEMY] [Enemy7] Registered as sound listener
[00:47:47] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[00:47:47] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[00:47:47] [ENEMY] [Enemy8] Registered as sound listener
[00:47:47] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[00:47:47] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[00:47:47] [ENEMY] [Enemy9] Registered as sound listener
[00:47:47] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[00:47:47] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[00:47:47] [ENEMY] [Enemy10] Registered as sound listener
[00:47:47] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[00:47:47] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:47:47] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:47:47] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:47:47] [INFO] [LastChance] Found player: Player
[00:47:47] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:47:47] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:47:47] [INFO] [LastChance] Connected to player Died signal (C#)
[00:47:47] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:47:47] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:47:47] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:47:47] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:47:47] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:47:47] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (952.8192, 1599.3135)
[00:47:47] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:47:47] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:47:47] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:47:47] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:47:47] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:47:47] [INFO] [Player.Grenade] Step 1 complete! Drag: (307.39978, 10.018555)
[00:47:47] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:47:47] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:47:47] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:47:47] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:47:47] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:47:47] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:47:48] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:47:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=19
[00:47:48] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[00:47:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:47:48] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:47:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=3445285193238, bullet_pos=(41.69983, 702.3934)
[00:47:49] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[00:47:49] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[00:47:49] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:47:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=3445285193238, bullet_pos=(510.8279, 375.7107)
[00:47:49] [INFO] [Bullet] Using shooter_position, distance=1165.48315429688
[00:47:49] [INFO] [Bullet] Distance to wall: 1165.48315429688 (79.3598911106182% of viewport)
[00:47:49] [INFO] [Bullet] Distance-based penetration chance: 54.0801270376121%
[00:47:49] [INFO] [Bullet] Starting wall penetration at (510.8279, 375.7107)
[00:47:49] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24.3654346466064
[00:47:49] [INFO] [Bullet] Body exited signal received for penetrating body
[00:47:49] [INFO] [Bullet] Exiting penetration at (543.9951, 352.6143) after traveling 35.4166679382324 pixels through wall
[00:47:49] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[00:47:49] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:47:49] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (0, -197.97737) (198,0 px/s), Swing distance: 544,9
[00:47:49] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,5707964
[00:47:49] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (0, -197.9774), Swing: 544.9, Transfer: 1.00, Final speed: 93.3
[00:47:49] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:47:49] [INFO] [Player.Grenade] Thrown! Velocity: 198,0, Swing: 544,9
[00:47:49] [INFO] [Player.Grenade] State reset to IDLE
[00:47:49] [INFO] [GrenadeBase] Collision detected with Room1_WallBottom (type: StaticBody2D)
[00:47:49] [INFO] [FragGrenade] Impact detected! Body: Room1_WallBottom (type: StaticBody2D), triggering explosion
[00:47:49] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:47:49] [INFO] [GrenadeBase] EXPLODED at (450, 682.1783)!
[00:47:49] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(450, 682.1783), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[00:47:49] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[00:47:49] [ENEMY] [Enemy2] Hit taken, health: 1/2
[00:47:49] [ENEMY] [Enemy2] Hit taken, health: 0/2
[00:47:49] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[00:47:49] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:47:49] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 9)
[00:47:49] [INFO] [DeathAnim] Started - Angle: -110.7 deg, Index: 4
[00:47:49] [ENEMY] [Enemy2] Death animation started with hit direction: (-0.353809, -0.935318)
[00:47:49] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 141.3
[00:47:49] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 8.7 degrees
[00:47:49] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 101.4 degrees
[00:47:49] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 177.8 degrees
[00:47:49] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 285.3 degrees
[00:47:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=9
[00:47:49] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[00:47:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:47:49] [INFO] [LastChance] Threat detected: Bullet
[00:47:49] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[00:47:49] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[00:47:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=9
[00:47:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:47:49] [INFO] [Player.Grenade] Player rotation restored to 0
[00:47:49] [INFO] [LastChance] Threat detected: Bullet
[00:47:49] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:49] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:47:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[00:47:49] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[00:47:49] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[00:47:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=9
[00:47:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:47:49] [INFO] [LastChance] Threat detected: Bullet
[00:47:49] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:47:49] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[00:47:49] [INFO] [PenultimateHit] Starting penultimate hit effect:
[00:47:49] [INFO] [PenultimateHit]   - Time scale: 0.10
[00:47:49] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[00:47:49] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[00:47:49] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[00:47:49] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[00:47:49] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[00:47:49] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[00:47:49] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:47:50] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:50] [INFO] [PenultimateHit] Ending penultimate hit effect
[00:47:50] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[00:47:50] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:50] [ENEMY] [Enemy1] Death animation component initialized
[00:47:50] [ENEMY] [Enemy2] Death animation component initialized
[00:47:50] [ENEMY] [Enemy3] Death animation component initialized
[00:47:50] [ENEMY] [Enemy4] Death animation component initialized
[00:47:50] [ENEMY] [Enemy5] Death animation component initialized
[00:47:50] [ENEMY] [Enemy6] Death animation component initialized
[00:47:50] [ENEMY] [Enemy7] Death animation component initialized
[00:47:50] [ENEMY] [Enemy8] Death animation component initialized
[00:47:50] [ENEMY] [Enemy9] Death animation component initialized
[00:47:50] [ENEMY] [Enemy10] Death animation component initialized
[00:47:50] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:50] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:50] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:50] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:50] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:50] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:50] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:47:50] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[00:47:50] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:50] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:50] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[00:47:50] [ENEMY] [Enemy1] Registered as sound listener
[00:47:50] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[00:47:50] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[00:47:50] [ENEMY] [Enemy2] Registered as sound listener
[00:47:50] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[00:47:50] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[00:47:50] [ENEMY] [Enemy3] Registered as sound listener
[00:47:50] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[00:47:50] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[00:47:50] [ENEMY] [Enemy4] Registered as sound listener
[00:47:50] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[00:47:50] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[00:47:50] [ENEMY] [Enemy5] Registered as sound listener
[00:47:50] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[00:47:50] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[00:47:50] [ENEMY] [Enemy6] Registered as sound listener
[00:47:50] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[00:47:50] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[00:47:50] [ENEMY] [Enemy7] Registered as sound listener
[00:47:50] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[00:47:50] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[00:47:50] [ENEMY] [Enemy8] Registered as sound listener
[00:47:50] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[00:47:50] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[00:47:50] [ENEMY] [Enemy9] Registered as sound listener
[00:47:50] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[00:47:50] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[00:47:50] [ENEMY] [Enemy10] Registered as sound listener
[00:47:50] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[00:47:50] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:47:50] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:47:50] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:47:50] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:47:50] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:47:50] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:47:50] [INFO] [LastChance] Found player: Player
[00:47:50] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:47:50] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:47:50] [INFO] [LastChance] Connected to player Died signal (C#)
[00:47:50] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:47:50] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:47:50] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1178.5168, 1560.5752)
[00:47:50] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:47:50] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:47:50] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:47:50] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:47:50] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:47:50] [INFO] [Player.Grenade] Step 1 complete! Drag: (77.94202, -8.014893)
[00:47:50] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:47:50] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:47:50] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:47:50] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:47:50] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:47:50] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:47:51] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:47:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=19
[00:47:51] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[00:47:51] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:47:51] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:47:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=3629515803088, bullet_pos=(41.69983, 702.3934)
[00:47:52] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[00:47:52] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[00:47:52] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:47:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=3629515803088, bullet_pos=(516.1955, 452.5576)
[00:47:52] [INFO] [Bullet] Using shooter_position, distance=1093.98181152344
[00:47:52] [INFO] [Bullet] Distance to wall: 1093.98181152344 (74.491233201799% of viewport)
[00:47:52] [INFO] [Bullet] Distance-based penetration chance: 59.7602279312345%
[00:47:52] [INFO] [Bullet] Penetration failed (distance roll)
[00:47:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:52] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[00:47:52] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[00:47:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:52] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[00:47:52] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:47:52] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (0, -87.50753) (87,5 px/s), Swing distance: 517,0
[00:47:52] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,5707964
[00:47:52] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (0, -87.50753), Swing: 517.0, Transfer: 1.00, Final speed: 41.3
[00:47:52] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:47:52] [INFO] [Player.Grenade] Thrown! Velocity: 87,5, Swing: 517,0
[00:47:52] [INFO] [Player.Grenade] State reset to IDLE
[00:47:52] [INFO] [GrenadeBase] Grenade landed at (450, 685.9444)
[00:47:52] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:47:52] [INFO] [GrenadeBase] EXPLODED at (450, 685.9444)!
[00:47:52] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(450, 685.9444), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[00:47:52] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[00:47:52] [ENEMY] [Enemy2] Hit taken, health: 3/4
[00:47:52] [ENEMY] [Enemy2] Hit taken, health: 2/4
[00:47:52] [ENEMY] [Enemy2] Hit taken, health: 1/4
[00:47:52] [ENEMY] [Enemy2] Hit taken, health: 0/4
[00:47:52] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[00:47:52] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:47:52] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 9)
[00:47:52] [INFO] [DeathAnim] Started - Angle: -110.2 deg, Index: 4
[00:47:52] [ENEMY] [Enemy2] Death animation started with hit direction: (-0.34519, -0.938533)
[00:47:52] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 144.8
[00:47:52] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -1.0 degrees
[00:47:52] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 76.0 degrees
[00:47:52] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 183.7 degrees
[00:47:52] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 280.6 degrees
[00:47:52] [INFO] [GrenadeBase] Collision detected with Room1_WallBottom (type: StaticBody2D)
[00:47:52] [INFO] [LastChance] Threat detected: Bullet
[00:47:52] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:52] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[00:47:52] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[00:47:52] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:47:52] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[00:47:52] [INFO] [PenultimateHit] Starting penultimate hit effect:
[00:47:52] [INFO] [PenultimateHit]   - Time scale: 0.10
[00:47:52] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[00:47:52] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[00:47:52] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[00:47:52] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[00:47:52] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[00:47:52] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[00:47:52] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:47:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=9
[00:47:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:47:53] [INFO] [LastChance] Threat detected: Bullet
[00:47:53] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:53] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:53] [INFO] [PenultimateHit] Ending penultimate hit effect
[00:47:53] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[00:47:53] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:53] [ENEMY] [Enemy1] Death animation component initialized
[00:47:53] [ENEMY] [Enemy2] Death animation component initialized
[00:47:53] [ENEMY] [Enemy3] Death animation component initialized
[00:47:53] [ENEMY] [Enemy4] Death animation component initialized
[00:47:53] [ENEMY] [Enemy5] Death animation component initialized
[00:47:53] [ENEMY] [Enemy6] Death animation component initialized
[00:47:53] [ENEMY] [Enemy7] Death animation component initialized
[00:47:53] [ENEMY] [Enemy8] Death animation component initialized
[00:47:53] [ENEMY] [Enemy9] Death animation component initialized
[00:47:53] [ENEMY] [Enemy10] Death animation component initialized
[00:47:53] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:53] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:53] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:53] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:53] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:53] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:53] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:47:53] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[00:47:53] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:53] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:53] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[00:47:53] [ENEMY] [Enemy1] Registered as sound listener
[00:47:53] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[00:47:53] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[00:47:53] [ENEMY] [Enemy2] Registered as sound listener
[00:47:53] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[00:47:53] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[00:47:53] [ENEMY] [Enemy3] Registered as sound listener
[00:47:53] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[00:47:53] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[00:47:53] [ENEMY] [Enemy4] Registered as sound listener
[00:47:53] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[00:47:53] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[00:47:53] [ENEMY] [Enemy5] Registered as sound listener
[00:47:53] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[00:47:53] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[00:47:53] [ENEMY] [Enemy6] Registered as sound listener
[00:47:53] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[00:47:53] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[00:47:53] [ENEMY] [Enemy7] Registered as sound listener
[00:47:53] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[00:47:53] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[00:47:53] [ENEMY] [Enemy8] Registered as sound listener
[00:47:53] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[00:47:53] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[00:47:53] [ENEMY] [Enemy9] Registered as sound listener
[00:47:53] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[00:47:53] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[00:47:53] [ENEMY] [Enemy10] Registered as sound listener
[00:47:53] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[00:47:53] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:47:53] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:47:53] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:47:53] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:47:53] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:47:53] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:47:53] [INFO] [LastChance] Found player: Player
[00:47:53] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:47:53] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:47:53] [INFO] [LastChance] Connected to player Died signal (C#)
[00:47:53] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:47:53] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:47:53] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (993.30786, 1585.2876)
[00:47:53] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:47:53] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:47:53] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:47:53] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:47:53] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:47:53] [INFO] [Player.Grenade] Step 1 complete! Drag: (274.95618, 20.03711)
[00:47:53] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:47:53] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:47:53] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:47:53] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:47:53] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:47:53] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:47:54] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:47:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=19
[00:47:54] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[00:47:54] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:47:55] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:47:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=3816346879915, bullet_pos=(41.69983, 702.3934)
[00:47:55] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[00:47:55] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[00:47:55] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:47:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=3816346879915, bullet_pos=(513.4274, 447.3695)
[00:47:55] [INFO] [Bullet] Using shooter_position, distance=1099.86010742188
[00:47:55] [INFO] [Bullet] Distance to wall: 1099.86010742188 (74.8914971787567% of viewport)
[00:47:55] [ENEMY] [Enemy1] Hit taken, health: 2/3
[00:47:55] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:47:55] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (0, -1228.8245) (1228,8 px/s), Swing distance: 596,6
[00:47:55] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,5707964
[00:47:55] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (0, -1228.824), Swing: 596.6, Transfer: 1.00, Final speed: 579.3
[00:47:55] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:47:55] [INFO] [Player.Grenade] Thrown! Velocity: 1228,8, Swing: 596,6
[00:47:55] [INFO] [Player.Grenade] State reset to IDLE
[00:47:55] [INFO] [GrenadeBase] Collision detected with Room1_WallBottom (type: StaticBody2D)
[00:47:55] [INFO] [FragGrenade] Impact detected! Body: Room1_WallBottom (type: StaticBody2D), triggering explosion
[00:47:55] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:47:55] [INFO] [GrenadeBase] EXPLODED at (450, 673.1277)!
[00:47:55] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(450, 673.1277), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[00:47:55] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[00:47:55] [ENEMY] [Enemy2] Hit taken, health: 2/3
[00:47:55] [ENEMY] [Enemy2] Hit taken, health: 1/3
[00:47:55] [ENEMY] [Enemy2] Hit taken, health: 0/3
[00:47:55] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[00:47:55] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:47:55] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 9)
[00:47:55] [INFO] [DeathAnim] Started - Angle: -112.1 deg, Index: 4
[00:47:55] [ENEMY] [Enemy2] Death animation started with hit direction: (-0.376244, -0.926521)
[00:47:55] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 132.9
[00:47:55] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 18.0 degrees
[00:47:55] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 100.7 degrees
[00:47:55] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 176.6 degrees
[00:47:55] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 285.7 degrees
[00:47:55] [ENEMY] [Enemy3] Hit taken, health: 2/3
[00:47:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=9
[00:47:56] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[00:47:56] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:47:56] [INFO] [LastChance] Threat detected: Bullet
[00:47:56] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:56] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:56] [INFO] [Player.Grenade] Player rotation restored to 0
[00:47:56] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:47:56] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[00:47:56] [INFO] [PenultimateHit] Starting penultimate hit effect:
[00:47:56] [INFO] [PenultimateHit]   - Time scale: 0.10
[00:47:56] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[00:47:56] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[00:47:56] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[00:47:56] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[00:47:56] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[00:47:56] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[00:47:56] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:47:56] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:47:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=9
[00:47:56] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:47:56] [INFO] [LastChance] Threat detected: Bullet
[00:47:56] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:56] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:56] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:56] [INFO] [PenultimateHit] Ending penultimate hit effect
[00:47:56] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[00:47:56] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:56] [ENEMY] [Enemy1] Death animation component initialized
[00:47:56] [ENEMY] [Enemy2] Death animation component initialized
[00:47:56] [ENEMY] [Enemy3] Death animation component initialized
[00:47:56] [ENEMY] [Enemy4] Death animation component initialized
[00:47:56] [ENEMY] [Enemy5] Death animation component initialized
[00:47:56] [ENEMY] [Enemy6] Death animation component initialized
[00:47:56] [ENEMY] [Enemy7] Death animation component initialized
[00:47:56] [ENEMY] [Enemy8] Death animation component initialized
[00:47:56] [ENEMY] [Enemy9] Death animation component initialized
[00:47:56] [ENEMY] [Enemy10] Death animation component initialized
[00:47:56] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:56] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:56] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:56] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:56] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:56] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:56] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:47:56] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[00:47:56] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:56] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:56] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[00:47:56] [ENEMY] [Enemy1] Registered as sound listener
[00:47:56] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[00:47:56] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[00:47:56] [ENEMY] [Enemy2] Registered as sound listener
[00:47:56] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[00:47:56] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[00:47:56] [ENEMY] [Enemy3] Registered as sound listener
[00:47:56] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[00:47:56] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[00:47:56] [ENEMY] [Enemy4] Registered as sound listener
[00:47:56] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[00:47:56] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[00:47:56] [ENEMY] [Enemy5] Registered as sound listener
[00:47:56] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[00:47:56] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[00:47:56] [ENEMY] [Enemy6] Registered as sound listener
[00:47:56] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[00:47:56] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[00:47:56] [ENEMY] [Enemy7] Registered as sound listener
[00:47:56] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[00:47:56] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[00:47:56] [ENEMY] [Enemy8] Registered as sound listener
[00:47:56] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[00:47:56] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[00:47:56] [ENEMY] [Enemy9] Registered as sound listener
[00:47:56] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[00:47:56] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[00:47:56] [ENEMY] [Enemy10] Registered as sound listener
[00:47:56] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[00:47:56] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:47:56] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:47:56] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:47:56] [INFO] [LastChance] Found player: Player
[00:47:56] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:47:56] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:47:56] [INFO] [LastChance] Connected to player Died signal (C#)
[00:47:56] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:47:56] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:47:56] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:47:56] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:47:56] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:47:56] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1171.7012, 1447.6995)
[00:47:56] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:47:56] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:47:56] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:47:56] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:47:56] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:47:56] [INFO] [Player.Grenade] Step 1 complete! Drag: (71.92651, 0)
[00:47:56] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:47:56] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:47:56] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:47:56] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:47:57] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:47:57] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:47:57] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:47:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1064.395, 1465.462), source=ENEMY (Enemy10), range=1469, listeners=19
[00:47:57] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[00:47:57] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:47:58] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:47:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=4009788181085, bullet_pos=(41.69983, 702.3934)
[00:47:58] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[00:47:58] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[00:47:58] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:47:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1005.725, 1430.902), shooter_id=4009788181085, bullet_pos=(516.3688, 452.8867)
[00:47:58] [INFO] [Bullet] Using shooter_position, distance=1093.60998535156
[00:47:58] [INFO] [Bullet] Distance to wall: 1093.60998535156 (74.465914874028% of viewport)
[00:47:58] [INFO] [Bullet] Distance-based penetration chance: 59.7897659803007%
[00:47:58] [INFO] [Bullet] Starting wall penetration at (516.3688, 452.8867)
[00:47:58] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31.7955131530762
[00:47:58] [INFO] [Bullet] Body exited signal received for penetrating body
[00:47:58] [INFO] [Bullet] Exiting penetration at (552.1442, 434.0816) after traveling 35.4166717529297 pixels through wall
[00:47:58] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[00:47:58] [ENEMY] [Enemy1] State: IDLE -> COMBAT
[00:47:58] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:47:58] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (0.005933973, -234.12057) (234,1 px/s), Swing distance: 586,9
[00:47:58] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,570771
[00:47:58] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (0.005934, -234.1206), Swing: 586.9, Transfer: 1.00, Final speed: 110.4
[00:47:58] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:47:58] [INFO] [Player.Grenade] Thrown! Velocity: 234,1, Swing: 586,9
[00:47:58] [INFO] [Player.Grenade] State reset to IDLE
[00:47:58] [ENEMY] [Enemy2] State: IDLE -> COMBAT
[00:47:58] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[00:47:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4503, 753.7664), source=ENEMY (Enemy3), range=1469, listeners=10
[00:47:58] [ENEMY] [Enemy4] Heard gunshot at (684.4503, 753.7664), source_type=1, intensity=0.07, distance=186
[00:47:58] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:47:58] [INFO] [LastChance] Threat detected: Bullet
[00:47:58] [INFO] [LastChance] Not in hard mode - effect disabled
[00:47:58] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:47:58] [INFO] [Player.Grenade] Player rotation restored to 0
[00:47:58] [INFO] [GrenadeBase] Grenade landed at (515.2612, 656.571)
[00:47:58] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:47:58] [INFO] [GrenadeBase] EXPLODED at (515.2612, 656.571)!
[00:47:58] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(515.2612, 656.571), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[00:47:58] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[00:47:58] [ENEMY] [Enemy2] Hit taken, health: 1/2
[00:47:58] [ENEMY] [Enemy2] Hit taken, health: 0/2
[00:47:58] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[00:47:58] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:47:58] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 9)
[00:47:58] [INFO] [DeathAnim] Started - Angle: -139.5 deg, Index: 2
[00:47:58] [ENEMY] [Enemy2] Death animation started with hit direction: (-0.76078, -0.64901)
[00:47:58] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 186.1
[00:47:58] [ENEMY] [Enemy3] Hit taken, health: 1/2
[00:47:58] [ENEMY] [Enemy3] Hit taken, health: 0/2
[00:47:58] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[00:47:58] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[00:47:58] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 8)
[00:47:58] [INFO] [DeathAnim] Started - Angle: 29.9 deg, Index: 13
[00:47:58] [ENEMY] [Enemy3] Death animation started with hit direction: (0.867102, 0.49813)
[00:47:58] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 195.1
[00:47:58] [INFO] [FragGrenade] Player found in blast radius at distance 62.8
[00:47:58] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[00:47:58] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[00:47:58] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:47:58] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[00:47:58] [INFO] [PenultimateHit] Starting penultimate hit effect:
[00:47:58] [INFO] [PenultimateHit]   - Time scale: 0.10
[00:47:58] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[00:47:58] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[00:47:58] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[00:47:58] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[00:47:58] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[00:47:58] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[00:47:58] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:47:58] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[00:47:58] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[00:47:58] [INFO] [PenultimateHit] Player died - ending penultimate effect
[00:47:58] [INFO] [PenultimateHit] Ending penultimate hit effect
[00:47:58] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[00:47:58] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[00:47:58] [INFO] [LastChance] Player died
[00:47:58] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 62.8
[00:47:58] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 9.3 degrees
[00:47:58] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 109.5 degrees
[00:47:58] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 163.0 degrees
[00:47:58] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 260.0 degrees
[00:47:59] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:47:59] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[00:47:59] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[00:47:59] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[00:47:59] [ENEMY] [Enemy2] Ragdoll activated
[00:47:59] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[00:47:59] [ENEMY] [Enemy3] Ragdoll activated
[00:47:59] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[00:47:59] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[00:47:59] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[00:47:59] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:59] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:59] [ENEMY] [Enemy1] Death animation component initialized
[00:47:59] [ENEMY] [Enemy2] Death animation component initialized
[00:47:59] [ENEMY] [Enemy3] Death animation component initialized
[00:47:59] [ENEMY] [Enemy4] Death animation component initialized
[00:47:59] [ENEMY] [Enemy5] Death animation component initialized
[00:47:59] [ENEMY] [Enemy6] Death animation component initialized
[00:47:59] [ENEMY] [Enemy7] Death animation component initialized
[00:47:59] [ENEMY] [Enemy8] Death animation component initialized
[00:47:59] [ENEMY] [Enemy9] Death animation component initialized
[00:47:59] [ENEMY] [Enemy10] Death animation component initialized
[00:47:59] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:59] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:59] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:59] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:59] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:59] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:59] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:47:59] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[00:47:59] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:59] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
[00:47:59] [ENEMY] [Enemy1] Registered as sound listener
[00:47:59] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
[00:47:59] [ENEMY] [Enemy2] Registered as sound listener
[00:47:59] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
[00:47:59] [ENEMY] [Enemy3] Registered as sound listener
[00:47:59] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
[00:47:59] [ENEMY] [Enemy4] Registered as sound listener
[00:47:59] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
[00:47:59] [ENEMY] [Enemy5] Registered as sound listener
[00:47:59] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
[00:47:59] [ENEMY] [Enemy6] Registered as sound listener
[00:47:59] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
[00:47:59] [ENEMY] [Enemy7] Registered as sound listener
[00:47:59] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
[00:47:59] [ENEMY] [Enemy8] Registered as sound listener
[00:47:59] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
[00:47:59] [ENEMY] [Enemy9] Registered as sound listener
[00:47:59] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
[00:47:59] [ENEMY] [Enemy10] Registered as sound listener
[00:47:59] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[00:47:59] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:47:59] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:47:59] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:47:59] [INFO] [LastChance] Found player: Player
[00:47:59] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:47:59] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:47:59] [INFO] [LastChance] Connected to player Died signal (C#)
[00:47:59] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:47:59] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:47:59] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:47:59] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:47:59] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:47:59] [ENEMY] [Enemy1] Death animation component initialized
[00:47:59] [ENEMY] [Enemy2] Death animation component initialized
[00:47:59] [ENEMY] [Enemy3] Death animation component initialized
[00:47:59] [ENEMY] [Enemy4] Death animation component initialized
[00:47:59] [ENEMY] [Enemy5] Death animation component initialized
[00:47:59] [ENEMY] [Enemy6] Death animation component initialized
[00:47:59] [ENEMY] [Enemy7] Death animation component initialized
[00:47:59] [ENEMY] [Enemy8] Death animation component initialized
[00:47:59] [ENEMY] [Enemy9] Death animation component initialized
[00:47:59] [ENEMY] [Enemy10] Death animation component initialized
[00:47:59] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:47:59] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:47:59] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:47:59] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:47:59] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:47:59] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:47:59] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:47:59] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[00:47:59] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:47:59] [INFO] [ScoreManager] Level started with 10 enemies
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 19)
[00:47:59] [ENEMY] [Enemy1] Registered as sound listener
[00:47:59] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 20)
[00:47:59] [ENEMY] [Enemy2] Registered as sound listener
[00:47:59] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 21)
[00:47:59] [ENEMY] [Enemy3] Registered as sound listener
[00:47:59] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 22)
[00:47:59] [ENEMY] [Enemy4] Registered as sound listener
[00:47:59] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 23)
[00:47:59] [ENEMY] [Enemy5] Registered as sound listener
[00:47:59] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 24)
[00:47:59] [ENEMY] [Enemy6] Registered as sound listener
[00:47:59] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 25)
[00:47:59] [ENEMY] [Enemy7] Registered as sound listener
[00:47:59] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 26)
[00:47:59] [ENEMY] [Enemy8] Registered as sound listener
[00:47:59] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 27)
[00:47:59] [ENEMY] [Enemy9] Registered as sound listener
[00:47:59] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[00:47:59] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 28)
[00:47:59] [ENEMY] [Enemy10] Registered as sound listener
[00:47:59] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[00:47:59] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:47:59] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:47:59] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:47:59] [INFO] [LastChance] Found player: Player
[00:47:59] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:47:59] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:47:59] [INFO] [LastChance] Connected to player Died signal (C#)
[00:47:59] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:47:59] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:47:59] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:48:06] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:48:07] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[00:48:07] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[00:48:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1162.413, 1529.819), source=ENEMY (Enemy10), range=1469, listeners=28
[00:48:07] [INFO] [SoundPropagation] Cleaned up 18 invalid listeners
[00:48:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:07] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:48:07] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:48:07] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[00:48:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1130.326, 1510.741), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:07] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (649.97205, 1081.5577)
[00:48:07] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:48:07] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:48:07] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:48:07] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1045.1666)
[00:48:07] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:48:07] [INFO] [Player.Grenade] Step 1 complete! Drag: (247.19885, -28.639038)
[00:48:07] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[00:48:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1099.044, 1490.37), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:07] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:48:07] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:48:07] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[00:48:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1068.613, 1468.749), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:07] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:48:07] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:48:07] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[00:48:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1099.866, 1503.015), shooter_id=4216970020198, bullet_pos=(51.09344, 902.8936)
[00:48:07] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
[00:48:07] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
[00:48:07] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:48:07] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:48:07] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:48:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1068.925, 1481.406), shooter_id=4216970020198, bullet_pos=(45.52682, 838.9695)
[00:48:07] [INFO] [Bullet] Using shooter_position, distance=1208.33312988281
[00:48:07] [INFO] [Bullet] Distance to wall: 1208.33312988281 (82.2776247424219% of viewport)
[00:48:07] [INFO] [Bullet] Distance-based penetration chance: 50.6761044671745%
[00:48:07] [INFO] [Bullet] Starting wall penetration at (45.52682, 838.9695)
[00:48:07] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30.6954746246338
[00:48:07] [INFO] [Bullet] Body exited signal received for penetrating body
[00:48:07] [INFO] [Bullet] Exiting penetration at (6.002468, 814.1581) after traveling 41.6666679382324 pixels through wall
[00:48:07] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:48:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1099.866, 1503.015), shooter_id=4216970020198, bullet_pos=(437.329, 713.8909)
[00:48:07] [INFO] [Bullet] Using shooter_position, distance=1030.37463378906
[00:48:07] [INFO] [Bullet] Distance to wall: 1030.37463378906 (70.1601035065791% of viewport)
[00:48:07] [INFO] [Bullet] Distance-based penetration chance: 64.8132125756577%
[00:48:07] [INFO] [Bullet] Penetration failed (distance roll)
[00:48:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1038.886, 1458.564), shooter_id=4216970020198, bullet_pos=(42.44276, 775.0672)
[00:48:07] [INFO] [Bullet] Using shooter_position, distance=1208.33251953125
[00:48:07] [INFO] [Bullet] Distance to wall: 1208.33251953125 (82.2775831824616% of viewport)
[00:48:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1038.886, 1458.564), shooter_id=4216970020198, bullet_pos=(125.6685, 701.2429)
[00:48:07] [INFO] [Bullet] Using shooter_position, distance=1186.38195800781
[00:48:07] [INFO] [Bullet] Distance to wall: 1186.38195800781 (80.7829290848073% of viewport)
[00:48:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1009.786, 1434.544), shooter_id=4216970020198, bullet_pos=(41.71096, 711.4241)
[00:48:07] [INFO] [Bullet] Using shooter_position, distance=1208.333984375
[00:48:07] [INFO] [Bullet] Distance to wall: 1208.333984375 (82.2776829263662% of viewport)
[00:48:08] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:48:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1038.886, 1458.564), shooter_id=4216970020198, bullet_pos=(514.5616, 940.4318)
[00:48:08] [INFO] [Bullet] Using shooter_position, distance=737.141418457031
[00:48:08] [INFO] [Bullet] Distance to wall: 737.141418457031 (50.1933146662843% of viewport)
[00:48:08] [INFO] [Bullet] Distance-based penetration chance: 88.1077995560016%
[00:48:08] [INFO] [Bullet] Starting wall penetration at (514.5616, 940.4318)
[00:48:08] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24.0233860015869
[00:48:08] [INFO] [Bullet] Body exited signal received for penetrating body
[00:48:08] [INFO] [Bullet] Exiting penetration at (544.4628, 958.8226) after traveling 30.1041660308838 pixels through wall
[00:48:08] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[00:48:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1009.786, 1434.544), shooter_id=4216970020198, bullet_pos=(497.7543, 429.3098)
[00:48:08] [INFO] [Bullet] Using shooter_position, distance=1128.12744140625
[00:48:08] [INFO] [Bullet] Distance to wall: 1128.12744140625 (76.8162719287965% of viewport)
[00:48:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:08] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[00:48:08] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[00:48:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:08] [INFO] [LastChance] Threat detected: Bullet
[00:48:08] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:08] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[00:48:08] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[00:48:08] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:48:08] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (3378.0183, -102.06986) (3379,6 px/s), Swing distance: 517,7
[00:48:08] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,03020671
[00:48:08] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (3378.018, -102.0699), Swing: 517.7, Transfer: 1.00, Final speed: 1186.5
[00:48:08] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:48:08] [INFO] [Player.Grenade] Thrown! Velocity: 3379,6, Swing: 517,7
[00:48:08] [INFO] [Player.Grenade] State reset to IDLE
[00:48:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1009.786, 1434.544), shooter_id=4216970020198, bullet_pos=(309.5841, 271.1137)
[00:48:08] [INFO] [Bullet] Using shooter_position, distance=1357.88513183594
[00:48:08] [INFO] [Bullet] Distance to wall: 1357.88513183594 (92.4608955572927% of viewport)
[00:48:08] [INFO] [Bullet] Distance-based penetration chance: 38.7956218498252%
[00:48:08] [INFO] [Bullet] Starting wall penetration at (309.5841, 271.1137)
[00:48:08] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[00:48:08] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[00:48:08] [INFO] [Bullet] Exiting penetration at (282.7141, 248.5238) after traveling 30.1041698455811 pixels through wall
[00:48:08] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[00:48:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:08] [INFO] [LastChance] Threat detected: @Area2D@5636
[00:48:08] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[00:48:08] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[00:48:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.6138, 760.7433), shooter_id=4214973531702, bullet_pos=(33.32239, 753.7425)
[00:48:08] [INFO] [Bullet] Using shooter_position, distance=583.333374023438
[00:48:08] [INFO] [Bullet] Distance to wall: 583.333374023438 (39.7202420927463% of viewport)
[00:48:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:48:08] [INFO] [Player.Grenade] Player rotation restored to 0
[00:48:08] [INFO] [GrenadeBase] Collision detected with Enemy3 (type: CharacterBody2D)
[00:48:08] [INFO] [FragGrenade] Impact detected! Body: Enemy3 (type: CharacterBody2D), triggering explosion
[00:48:08] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:48:08] [INFO] [GrenadeBase] EXPLODED at (700.1545, 721.8541)!
[00:48:08] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(700.1545, 721.8541), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[00:48:08] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[00:48:08] [ENEMY] [Enemy3] Hit taken, health: 2/3
[00:48:08] [ENEMY] [Enemy3] Hit taken, health: 1/3
[00:48:08] [ENEMY] [Enemy3] Hit taken, health: 0/3
[00:48:08] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[00:48:08] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:48:08] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[00:48:08] [INFO] [DeathAnim] Started - Angle: 116.2 deg, Index: 19
[00:48:08] [ENEMY] [Enemy3] Death animation started with hit direction: (-0.44167, 0.897178)
[00:48:08] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 35.6
[00:48:08] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -16.0 degrees
[00:48:08] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 83.4 degrees
[00:48:08] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 161.1 degrees
[00:48:08] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 252.7 degrees
[00:48:08] [INFO] [LastChance] Threat detected: @Area2D@5637
[00:48:08] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[00:48:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:08] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:48:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:48:08] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[00:48:08] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:48:08] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[00:48:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(699.8832, 914.0654), source=ENEMY (Enemy4), range=1469, listeners=9
[00:48:08] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:48:08] [INFO] [LastChance] Threat detected: Bullet
[00:48:08] [INFO] [LastChance] Triggering last chance effect!
[00:48:08] [INFO] [LastChance] Starting last chance effect:
[00:48:08] [INFO] [LastChance]   - Time will be frozen (except player)
[00:48:08] [INFO] [LastChance]   - Duration: 6.0 real seconds
[00:48:08] [INFO] [LastChance]   - Sepia intensity: 0.70
[00:48:08] [INFO] [LastChance]   - Brightness: 0.60
[00:48:08] [INFO] [LastChance] Pushed bullet Bullet from distance 119.2 to 200.0
[00:48:08] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[00:48:08] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[00:48:08] [INFO] [LastChance] Skipping player node: Player
[00:48:08] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[00:48:08] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[00:48:08] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[00:48:08] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[00:48:10] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:48:10] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:48:10] [INFO] [LastChance] Ending last chance effect
[00:48:10] [INFO] [LastChance] All process modes restored
[00:48:10] [INFO] [LastChance] Restored original colors to 5 player sprites
[00:48:10] [ENEMY] [Enemy1] Death animation component initialized
[00:48:10] [ENEMY] [Enemy2] Death animation component initialized
[00:48:10] [ENEMY] [Enemy3] Death animation component initialized
[00:48:10] [ENEMY] [Enemy4] Death animation component initialized
[00:48:10] [ENEMY] [Enemy5] Death animation component initialized
[00:48:10] [ENEMY] [Enemy6] Death animation component initialized
[00:48:10] [ENEMY] [Enemy7] Death animation component initialized
[00:48:10] [ENEMY] [Enemy8] Death animation component initialized
[00:48:10] [ENEMY] [Enemy9] Death animation component initialized
[00:48:10] [ENEMY] [Enemy10] Death animation component initialized
[00:48:10] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:48:10] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:48:10] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:48:10] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:48:10] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:48:10] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:48:10] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:48:10] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[00:48:10] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:48:10] [INFO] [ScoreManager] Level started with 10 enemies
[00:48:10] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[00:48:10] [ENEMY] [Enemy1] Registered as sound listener
[00:48:10] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[00:48:10] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[00:48:10] [ENEMY] [Enemy2] Registered as sound listener
[00:48:10] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[00:48:10] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[00:48:10] [ENEMY] [Enemy3] Registered as sound listener
[00:48:10] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[00:48:10] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[00:48:10] [ENEMY] [Enemy4] Registered as sound listener
[00:48:10] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[00:48:10] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[00:48:10] [ENEMY] [Enemy5] Registered as sound listener
[00:48:10] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[00:48:10] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[00:48:10] [ENEMY] [Enemy6] Registered as sound listener
[00:48:10] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[00:48:10] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[00:48:10] [ENEMY] [Enemy7] Registered as sound listener
[00:48:10] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[00:48:10] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[00:48:10] [ENEMY] [Enemy8] Registered as sound listener
[00:48:10] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[00:48:10] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[00:48:10] [ENEMY] [Enemy9] Registered as sound listener
[00:48:10] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[00:48:10] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[00:48:10] [ENEMY] [Enemy10] Registered as sound listener
[00:48:10] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[00:48:10] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:48:10] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:48:10] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:48:10] [INFO] [LastChance] Found player: Player
[00:48:10] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:48:10] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:48:10] [INFO] [LastChance] Connected to player Died signal (C#)
[00:48:10] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:48:10] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:48:10] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:48:10] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:48:10] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:48:10] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (987.2313, 1258.0149)
[00:48:10] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:48:10] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:48:10] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:48:10] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:48:10] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:48:10] [INFO] [Player.Grenade] Step 1 complete! Drag: (82.90344, -6.679077)
[00:48:11] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:48:11] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:48:11] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:48:11] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:48:11] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:48:11] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:48:11] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:48:11] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[00:48:11] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[00:48:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1162.413, 1529.819), source=ENEMY (Enemy10), range=1469, listeners=19
[00:48:11] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[00:48:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:11] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[00:48:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1130.326, 1510.741), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:11] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[00:48:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1099.044, 1490.37), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[00:48:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1068.613, 1468.749), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:12] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[00:48:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1099.866, 1503.015), shooter_id=4422507694636, bullet_pos=(51.09344, 902.8936)
[00:48:12] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
[00:48:12] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
[00:48:12] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:48:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1068.925, 1481.406), shooter_id=4422507694636, bullet_pos=(45.52682, 838.9695)
[00:48:12] [INFO] [Bullet] Using shooter_position, distance=1208.33312988281
[00:48:12] [INFO] [Bullet] Distance to wall: 1208.33312988281 (82.2776247424219% of viewport)
[00:48:12] [INFO] [Bullet] Distance-based penetration chance: 50.6761044671745%
[00:48:12] [INFO] [Bullet] Penetration failed (distance roll)
[00:48:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1038.886, 1458.564), shooter_id=4422507694636, bullet_pos=(42.44276, 775.0672)
[00:48:12] [INFO] [Bullet] Using shooter_position, distance=1208.33251953125
[00:48:12] [INFO] [Bullet] Distance to wall: 1208.33251953125 (82.2775831824616% of viewport)
[00:48:12] [INFO] [Bullet] Distance-based penetration chance: 50.6761529537947%
[00:48:12] [INFO] [Bullet] Starting wall penetration at (42.44276, 775.0672)
[00:48:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.0033187866211
[00:48:12] [INFO] [Bullet] Body exited signal received for penetrating body
[00:48:12] [INFO] [Bullet] Exiting penetration at (3.959427, 748.67) after traveling 41.6666679382324 pixels through wall
[00:48:12] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:48:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1009.786, 1434.544), shooter_id=4422507694636, bullet_pos=(41.71096, 711.4241)
[00:48:12] [INFO] [Bullet] Using shooter_position, distance=1208.333984375
[00:48:12] [INFO] [Bullet] Distance to wall: 1208.333984375 (82.2776829263662% of viewport)
[00:48:12] [INFO] [Bullet] Distance-based penetration chance: 50.6760365859061%
[00:48:12] [INFO] [Bullet] Penetration failed (distance roll)
[00:48:12] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:48:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:12] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[00:48:12] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[00:48:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:12] [INFO] [LastChance] Threat detected: Bullet
[00:48:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:12] [INFO] [LastChance] Threat detected: Bullet
[00:48:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:13] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[00:48:13] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[00:48:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:13] [INFO] [LastChance] Threat detected: Bullet
[00:48:13] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[00:48:13] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:13] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:48:13] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[00:48:13] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:48:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:13] [INFO] [LastChance] Threat detected: Bullet
[00:48:13] [INFO] [LastChance] Triggering last chance effect!
[00:48:13] [INFO] [LastChance] Starting last chance effect:
[00:48:13] [INFO] [LastChance]   - Time will be frozen (except player)
[00:48:13] [INFO] [LastChance]   - Duration: 6.0 real seconds
[00:48:13] [INFO] [LastChance]   - Sepia intensity: 0.70
[00:48:13] [INFO] [LastChance]   - Brightness: 0.60
[00:48:13] [INFO] [LastChance] Pushed bullet Bullet from distance 126.2 to 200.0
[00:48:13] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[00:48:13] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[00:48:13] [INFO] [LastChance] Skipping player node: Player
[00:48:13] [INFO] [LastChance] Froze existing grenade: FragGrenade
[00:48:13] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[00:48:13] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[00:48:13] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[00:48:19] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[00:48:19] [INFO] [LastChance] Ending last chance effect
[00:48:19] [INFO] [LastChance] All process modes restored
[00:48:19] [INFO] [LastChance] Unfroze grenade: FragGrenade
[00:48:19] [INFO] [LastChance] Restored original colors to 5 player sprites
[00:48:19] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[00:48:19] [INFO] [LastChance] Threat detected: Bullet
[00:48:19] [INFO] [LastChance] Effect already used this life
[00:48:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(717.165, 914.0649), source=ENEMY (Enemy4), range=1469, listeners=10
[00:48:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:19] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[00:48:19] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[00:48:19] [INFO] [PenultimateHit] Player died - ending penultimate effect
[00:48:19] [INFO] [LastChance] Player died
[00:48:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:19] [INFO] [LastChance] Threat detected: @Area2D@5906
[00:48:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:19] [INFO] [LastChance] Threat detected: @Area2D@5905
[00:48:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:19] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[00:48:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(681.4371, 914.0662), source=ENEMY (Enemy4), range=1469, listeners=10
[00:48:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:19] [INFO] [LastChance] Threat detected: Bullet
[00:48:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(623.15, 878.8174), shooter_id=4420796418898, bullet_pos=(524.2981, 802.3105)
[00:48:19] [INFO] [Bullet] Using shooter_position, distance=125.000022888184
[00:48:19] [INFO] [Bullet] Distance to wall: 125.000022888184 (8.51148141323043% of viewport)
[00:48:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:48:19] [INFO] [LastChance] Threat detected: @Area2D@5907
[00:48:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(651.4722, 897.8364), source=ENEMY (Enemy4), range=1469, listeners=10
[00:48:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:19] [INFO] [LastChance] Threat detected: @Area2D@5908
[00:48:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:19] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[00:48:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:19] [INFO] [LastChance] Threat detected: @Area2D@5909
[00:48:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:19] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[00:48:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:19] [INFO] [LastChance] Threat detected: @Area2D@5910
[00:48:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:19] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[00:48:19] [ENEMY] [Enemy10] FLANKING started: target=(379.5822, 922.1377), side=right, pos=(1022.582, 1432.392)
[00:48:19] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[00:48:19] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[00:48:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(674.3479, 764.7576), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:19] [INFO] [LastChance] Threat detected: Bullet
[00:48:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:19] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:48:19] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:48:19] [ENEMY] [Enemy1] Death animation component initialized
[00:48:19] [ENEMY] [Enemy2] Death animation component initialized
[00:48:19] [ENEMY] [Enemy3] Death animation component initialized
[00:48:19] [ENEMY] [Enemy4] Death animation component initialized
[00:48:19] [ENEMY] [Enemy5] Death animation component initialized
[00:48:19] [ENEMY] [Enemy6] Death animation component initialized
[00:48:19] [ENEMY] [Enemy7] Death animation component initialized
[00:48:19] [ENEMY] [Enemy8] Death animation component initialized
[00:48:19] [ENEMY] [Enemy9] Death animation component initialized
[00:48:19] [ENEMY] [Enemy10] Death animation component initialized
[00:48:19] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:48:19] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:48:19] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:48:19] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:48:19] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:48:19] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:48:19] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:48:19] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[00:48:19] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:48:19] [INFO] [ScoreManager] Level started with 10 enemies
[00:48:19] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[00:48:19] [ENEMY] [Enemy1] Registered as sound listener
[00:48:19] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[00:48:19] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[00:48:19] [ENEMY] [Enemy2] Registered as sound listener
[00:48:19] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[00:48:19] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[00:48:19] [ENEMY] [Enemy3] Registered as sound listener
[00:48:19] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[00:48:19] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[00:48:19] [ENEMY] [Enemy4] Registered as sound listener
[00:48:19] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[00:48:19] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[00:48:19] [ENEMY] [Enemy5] Registered as sound listener
[00:48:19] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[00:48:19] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[00:48:19] [ENEMY] [Enemy6] Registered as sound listener
[00:48:19] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[00:48:19] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[00:48:19] [ENEMY] [Enemy7] Registered as sound listener
[00:48:19] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[00:48:19] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[00:48:19] [ENEMY] [Enemy8] Registered as sound listener
[00:48:19] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[00:48:19] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[00:48:19] [ENEMY] [Enemy9] Registered as sound listener
[00:48:19] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[00:48:19] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[00:48:19] [ENEMY] [Enemy10] Registered as sound listener
[00:48:19] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[00:48:19] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:48:19] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:48:19] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:48:19] [INFO] [LastChance] Found player: Player
[00:48:19] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:48:19] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:48:19] [INFO] [LastChance] Connected to player Died signal (C#)
[00:48:19] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:48:19] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:48:19] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:48:20] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:48:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.004, 1519.036), source=ENEMY (Enemy10), range=1469, listeners=20
[00:48:21] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[00:48:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.385, 1499.191), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.598, 1478.078), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[00:48:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1051.686, 1455.743), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:21] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:48:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=4645879549428, bullet_pos=(47.54776, 866.3744)
[00:48:21] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[00:48:21] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[00:48:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.642, 1468.417), shooter_id=4645879549428, bullet_pos=(43.40149, 802.4432)
[00:48:21] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
[00:48:21] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
[00:48:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=4645879549428, bullet_pos=(333.1764, 713.9594)
[00:48:21] [INFO] [Bullet] Using shooter_position, distance=1079.00109863281
[00:48:21] [INFO] [Bullet] Distance to wall: 1079.00109863281 (73.4711689139744% of viewport)
[00:48:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.642, 1468.417), shooter_id=4645879549428, bullet_pos=(149.9306, 701.6332)
[00:48:21] [INFO] [Bullet] Using shooter_position, distance=1183.65563964844
[00:48:21] [INFO] [Bullet] Distance to wall: 1183.65563964844 (80.5972890544601% of viewport)
[00:48:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.149, 1444.873), shooter_id=4645879549428, bullet_pos=(41.66475, 738.6735)
[00:48:21] [INFO] [Bullet] Using shooter_position, distance=1208.33276367188
[00:48:21] [INFO] [Bullet] Distance to wall: 1208.33276367188 (82.2775998064458% of viewport)
[00:48:21] [INFO] [Bullet] Distance-based penetration chance: 50.6761335591466%
[00:48:21] [INFO] [Bullet] Starting wall penetration at (41.66475, 738.6735)
[00:48:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.7560081481934
[00:48:21] [INFO] [Bullet] Body exited signal received for penetrating body
[00:48:21] [INFO] [Bullet] Exiting penetration at (3.797741, 711.3995) after traveling 41.6666679382324 pixels through wall
[00:48:21] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.6502, 1420.212), shooter_id=4645879549428, bullet_pos=(42.2292, 675.3175)
[00:48:22] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
[00:48:22] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
[00:48:22] [INFO] [Bullet] Distance-based penetration chance: 50.6760947698504%
[00:48:22] [INFO] [Bullet] Starting wall penetration at (42.2292, 675.3175)
[00:48:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[00:48:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33.6752700805664
[00:48:22] [INFO] [Bullet] Body exited signal received for penetrating body
[00:48:22] [INFO] [Bullet] Exiting penetration at (5.484653, 646.5492) after traveling 41.6666679382324 pixels through wall
[00:48:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=4645879549428, bullet_pos=(694.4459, 876.9966)
[00:48:22] [INFO] [Bullet] Using shooter_position, distance=725.912292480469
[00:48:22] [INFO] [Bullet] Distance to wall: 725.912292480469 (49.4287028299982% of viewport)
[00:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.642, 1468.417), shooter_id=4645879549428, bullet_pos=(514.6055, 1023.901)
[00:48:22] [INFO] [Bullet] Using shooter_position, distance=697.138732910156
[00:48:22] [INFO] [Bullet] Distance to wall: 697.138732910156 (47.4694582489451% of viewport)
[00:48:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:22] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[00:48:22] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[00:48:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=4645879549428, bullet_pos=(506.5219, 970.0677)
[00:48:22] [INFO] [Bullet] Using shooter_position, distance=776.120178222656
[00:48:22] [INFO] [Bullet] Distance to wall: 776.120178222656 (52.8474500943447% of viewport)
[00:48:22] [INFO] [LastChance] Threat detected: @Area2D@6173
[00:48:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=4645879549428, bullet_pos=(546.8765, 996.9714)
[00:48:22] [INFO] [Bullet] Using shooter_position, distance=728.180419921875
[00:48:22] [INFO] [Bullet] Distance to wall: 728.180419921875 (49.5831437982022% of viewport)
[00:48:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:22] [INFO] [LastChance] Threat detected: @Area2D@6176
[00:48:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(618.0324, 769.3737), shooter_id=4643883060605, bullet_pos=(38.64483, 837.1076)
[00:48:22] [INFO] [Bullet] Using shooter_position, distance=583.333374023438
[00:48:22] [INFO] [Bullet] Distance to wall: 583.333374023438 (39.7202420927463% of viewport)
[00:48:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:48:22] [INFO] [Bullet] Starting wall penetration at (38.64483, 837.1076)
[00:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=4645879549428, bullet_pos=(722.3245, 884.5703)
[00:48:22] [INFO] [Bullet] Using shooter_position, distance=704.892944335938
[00:48:22] [INFO] [Bullet] Distance to wall: 704.892944335938 (47.997456763664% of viewport)
[00:48:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.9765815734863
[00:48:22] [INFO] [Bullet] Body exited signal received for penetrating body
[00:48:22] [INFO] [Bullet] Exiting penetration at (-7.706177, 842.5263) after traveling 41.6666717529297 pixels through wall
[00:48:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:48:22] [INFO] [LastChance] Threat detected: @Area2D@6177
[00:48:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:22] [ENEMY] [Enemy4] Hit taken, health: 3/4
[00:48:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[00:48:22] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[00:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.642, 1468.417), shooter_id=4645879549428, bullet_pos=(65.3934, 1327.812)
[00:48:22] [INFO] [Bullet] Using shooter_position, distance=996.221069335938
[00:48:22] [INFO] [Bullet] Distance to wall: 996.221069335938 (67.8345245000986% of viewport)
[00:48:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.4688, 759.1512), shooter_id=4643883060605, bullet_pos=(33.50173, 738.4785)
[00:48:22] [INFO] [Bullet] Using shooter_position, distance=583.33349609375
[00:48:22] [INFO] [Bullet] Distance to wall: 583.33349609375 (39.7202504047384% of viewport)
[00:48:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:48:22] [INFO] [Bullet] Starting wall penetration at (33.50173, 738.4785)
[00:48:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.163990020752
[00:48:22] [INFO] [Bullet] Body exited signal received for penetrating body
[00:48:22] [INFO] [Bullet] Exiting penetration at (-13.13562, 736.8246) after traveling 41.6666717529297 pixels through wall
[00:48:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:48:22] [INFO] [LastChance] Threat detected: Bullet
[00:48:22] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[00:48:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:22] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[00:48:22] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[00:48:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[00:48:22] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[00:48:22] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[00:48:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:22] [INFO] [LastChance] Threat detected: Bullet
[00:48:22] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[00:48:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:22] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[00:48:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:48:22] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[00:48:22] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:48:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.642, 1468.417), shooter_id=4645879549428, bullet_pos=(335.357, 1587.736)
[00:48:22] [INFO] [Bullet] Using shooter_position, distance=726.155456542969
[00:48:22] [INFO] [Bullet] Distance to wall: 726.155456542969 (49.4452603181531% of viewport)
[00:48:22] [INFO] [LastChance] Threat detected: Bullet
[00:48:22] [INFO] [LastChance] Triggering last chance effect!
[00:48:22] [INFO] [LastChance] Starting last chance effect:
[00:48:22] [INFO] [LastChance]   - Time will be frozen (except player)
[00:48:22] [INFO] [LastChance]   - Duration: 6.0 real seconds
[00:48:22] [INFO] [LastChance]   - Sepia intensity: 0.70
[00:48:22] [INFO] [LastChance]   - Brightness: 0.60
[00:48:22] [INFO] [LastChance] Pushed bullet Bullet from distance 126.8 to 200.0
[00:48:22] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[00:48:22] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[00:48:22] [INFO] [LastChance] Skipping player node: Player
[00:48:22] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[00:48:22] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[00:48:22] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[00:48:23] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:48:23] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:48:23] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (919.24805, 751.6008)
[00:48:23] [INFO] [LastChance] Freezing newly created grenade: FragGrenade
[00:48:23] [INFO] [LastChance] Registered frozen grenade: FragGrenade
[00:48:23] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:48:23] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:48:23] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:48:23] [INFO] [Player.Grenade] Timer started, grenade created at (450, 728.0123)
[00:48:23] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:48:23] [INFO] [Player.Grenade] Step 1 complete! Drag: (360.7516, 38.652344)
[00:48:23] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:48:23] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:48:23] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:48:23] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:48:23] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:48:23] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:48:26] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:48:26] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (0, 212.1582) (212,2 px/s), Swing distance: 347,0
[00:48:26] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 1,5707964
[00:48:26] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (0, 212.1582), Swing: 347.0, Transfer: 1.00, Final speed: 100.0
[00:48:26] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:48:26] [INFO] [Player.Grenade] Thrown! Velocity: 212,2, Swing: 347,0
[00:48:26] [INFO] [Player.Grenade] State reset to IDLE
[00:48:26] [INFO] [Player.Grenade] Player rotation restored to 0
[00:48:26] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:48:26] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[00:48:27] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:48:27] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:48:27] [INFO] [LastChance] Ending last chance effect
[00:48:27] [INFO] [LastChance] All process modes restored
[00:48:27] [INFO] [LastChance] Restored original colors to 5 player sprites
[00:48:27] [ENEMY] [Enemy1] Death animation component initialized
[00:48:27] [ENEMY] [Enemy2] Death animation component initialized
[00:48:27] [ENEMY] [Enemy3] Death animation component initialized
[00:48:27] [ENEMY] [Enemy4] Death animation component initialized
[00:48:27] [ENEMY] [Enemy5] Death animation component initialized
[00:48:27] [ENEMY] [Enemy6] Death animation component initialized
[00:48:27] [ENEMY] [Enemy7] Death animation component initialized
[00:48:27] [ENEMY] [Enemy8] Death animation component initialized
[00:48:27] [ENEMY] [Enemy9] Death animation component initialized
[00:48:27] [ENEMY] [Enemy10] Death animation component initialized
[00:48:27] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:48:27] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:48:27] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:48:27] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:48:27] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:48:27] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:48:27] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:48:27] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[00:48:27] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:48:27] [INFO] [ScoreManager] Level started with 10 enemies
[00:48:27] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[00:48:27] [ENEMY] [Enemy1] Registered as sound listener
[00:48:27] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[00:48:27] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[00:48:27] [ENEMY] [Enemy2] Registered as sound listener
[00:48:27] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[00:48:27] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[00:48:27] [ENEMY] [Enemy3] Registered as sound listener
[00:48:27] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[00:48:27] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[00:48:27] [ENEMY] [Enemy4] Registered as sound listener
[00:48:27] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[00:48:27] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[00:48:27] [ENEMY] [Enemy5] Registered as sound listener
[00:48:27] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[00:48:27] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[00:48:27] [ENEMY] [Enemy6] Registered as sound listener
[00:48:27] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[00:48:27] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[00:48:27] [ENEMY] [Enemy7] Registered as sound listener
[00:48:27] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[00:48:27] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[00:48:27] [ENEMY] [Enemy8] Registered as sound listener
[00:48:27] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[00:48:27] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[00:48:27] [ENEMY] [Enemy9] Registered as sound listener
[00:48:27] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[00:48:27] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[00:48:27] [ENEMY] [Enemy10] Registered as sound listener
[00:48:27] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[00:48:27] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:48:27] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:48:27] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:48:27] [INFO] [LastChance] Found player: Player
[00:48:27] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:48:27] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:48:27] [INFO] [LastChance] Connected to player Died signal (C#)
[00:48:27] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:48:27] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:48:27] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:48:27] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:48:27] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:48:27] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (445.99966, 1457.05)
[00:48:27] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:48:27] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:48:27] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:48:27] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:48:27] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:48:27] [INFO] [Player.Grenade] Step 1 complete! Drag: (360.5148, 35.398926)
[00:48:27] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:48:27] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:48:27] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:48:27] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:48:27] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:48:27] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:48:28] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:48:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1143.659, 1519.651), source=ENEMY (Enemy10), range=1469, listeners=20
[00:48:28] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[00:48:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1111.176, 1501.249), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1078.719, 1482.8), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:28] [INFO] [LastChance] Threat detected: Bullet
[00:48:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:28] [INFO] [LastChance] Threat detected: @Area2D@6435
[00:48:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1046.262, 1464.352), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(983.6378, 1437.729), shooter_id=4841854208244, bullet_pos=(911.1894, 1396.551)
[00:48:28] [INFO] [Bullet] Using shooter_position, distance=83.333381652832
[00:48:28] [INFO] [Bullet] Distance to wall: 83.333381652832 (5.67432319331814% of viewport)
[00:48:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:48:28] [INFO] [Bullet] Starting wall penetration at (911.1894, 1396.551)
[00:48:28] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[00:48:28] [INFO] [Bullet] Exiting penetration at (870.6183, 1373.49) after traveling 41.6666679382324 pixels through wall
[00:48:28] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:48:28] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[00:48:28] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[00:48:28] [INFO] [LastChance] Threat detected: @Area2D@6436
[00:48:28] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[00:48:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1013.805, 1445.904), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1080.908, 1493.291), shooter_id=4841854208244, bullet_pos=(64.15378, 921.1711)
[00:48:28] [INFO] [Bullet] Using shooter_position, distance=1166.66687011719
[00:48:28] [INFO] [Bullet] Distance to wall: 1166.66687011719 (79.4404924974847% of viewport)
[00:48:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(951.1808, 1419.281), shooter_id=4841854208244, bullet_pos=(914.9566, 1398.692)
[00:48:28] [INFO] [Bullet] Using shooter_position, distance=41.666690826416
[00:48:28] [INFO] [Bullet] Distance to wall: 41.666690826416 (2.83716159665907% of viewport)
[00:48:28] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[00:48:28] [INFO] [Bullet] Starting wall penetration at (914.9566, 1398.692)
[00:48:28] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[00:48:28] [INFO] [Bullet] Exiting penetration at (874.3855, 1375.632) after traveling 41.6666679382324 pixels through wall
[00:48:28] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:48:28] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:48:28] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[00:48:28] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:48:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(981.3481, 1427.456), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:29] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(948.8911, 1409.008), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:29] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:29] [INFO] [LastChance] Threat detected: @Area2D@6441
[00:48:29] [INFO] [LastChance] Triggering last chance effect!
[00:48:29] [INFO] [LastChance] Starting last chance effect:
[00:48:29] [INFO] [LastChance]   - Time will be frozen (except player)
[00:48:29] [INFO] [LastChance]   - Duration: 6.0 real seconds
[00:48:29] [INFO] [LastChance]   - Sepia intensity: 0.70
[00:48:29] [INFO] [LastChance]   - Brightness: 0.60
[00:48:29] [INFO] [LastChance] Pushed bullet @Area2D@6441 from distance 127.2 to 200.0
[00:48:29] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[00:48:29] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[00:48:29] [INFO] [LastChance] Skipping player node: Player
[00:48:29] [INFO] [LastChance] Froze existing grenade: FragGrenade
[00:48:29] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[00:48:29] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[00:48:29] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[00:48:34] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:48:34] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (0, -249.23428) (249,2 px/s), Swing distance: 2542,7
[00:48:34] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,5707964
[00:48:34] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (0, -249.2343), Swing: 2542.7, Transfer: 1.00, Final speed: 117.5
[00:48:34] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:48:34] [INFO] [Player.Grenade] Thrown! Velocity: 249,2, Swing: 2542,7
[00:48:34] [INFO] [Player.Grenade] State reset to IDLE
[00:48:34] [INFO] [Player.Grenade] Player rotation restored to 0
[00:48:34] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:48:34] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[00:48:35] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[00:48:35] [INFO] [LastChance] Ending last chance effect
[00:48:35] [INFO] [LastChance] All process modes restored
[00:48:35] [INFO] [LastChance] Unfroze grenade: FragGrenade
[00:48:35] [INFO] [LastChance] Restored original colors to 5 player sprites
[00:48:35] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[00:48:35] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[00:48:35] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:48:35] [INFO] [GrenadeBase] Collision detected with Room1_WallBottom (type: StaticBody2D)
[00:48:35] [INFO] [FragGrenade] Impact detected! Body: Room1_WallBottom (type: StaticBody2D), triggering explosion
[00:48:35] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:48:35] [INFO] [GrenadeBase] EXPLODED at (450, 679.9719)!
[00:48:35] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(450, 679.9719), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[00:48:35] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[00:48:35] [ENEMY] [Enemy2] Hit taken, health: 2/3
[00:48:35] [ENEMY] [Enemy2] Hit taken, health: 1/3
[00:48:35] [ENEMY] [Enemy2] Hit taken, health: 0/3
[00:48:35] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[00:48:35] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:48:35] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 9)
[00:48:35] [INFO] [DeathAnim] Started - Angle: -111.0 deg, Index: 4
[00:48:35] [ENEMY] [Enemy2] Death animation started with hit direction: (-0.359047, -0.93332)
[00:48:35] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 139.3
[00:48:35] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 7.8 degrees
[00:48:35] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 86.3 degrees
[00:48:35] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 187.8 degrees
[00:48:35] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 270.0 degrees
[00:48:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.3337, 749.9099), source=ENEMY (Enemy3), range=1469, listeners=9
[00:48:35] [ENEMY] [Enemy4] Heard gunshot at (689.3337, 749.9099), source_type=1, intensity=0.07, distance=186
[00:48:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:48:35] [INFO] [LastChance] Threat detected: Bullet
[00:48:35] [INFO] [LastChance] Effect already used this life
[00:48:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:35] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[00:48:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(918.7238, 1400.833), shooter_id=4841854208244, bullet_pos=(37.89945, 905.3237)
[00:48:35] [INFO] [Bullet] Using shooter_position, distance=1010.63391113281
[00:48:35] [INFO] [Bullet] Distance to wall: 1010.63391113281 (68.815921400927% of viewport)
[00:48:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[00:48:35] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[00:48:35] [INFO] [PenultimateHit] Player died - ending penultimate effect
[00:48:35] [INFO] [LastChance] Player died
[00:48:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(886.2667, 1382.385), shooter_id=4841854208244, bullet_pos=(53.11084, 908.8296)
[00:48:35] [INFO] [Bullet] Using shooter_position, distance=958.333557128906
[00:48:35] [INFO] [Bullet] Distance to wall: 958.333557128906 (65.2546941249302% of viewport)
[00:48:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(679.2014, 760.8799), source=ENEMY (Enemy3), range=1469, listeners=9
[00:48:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:48:35] [ENEMY] [Enemy4] Hit taken, health: 2/3
[00:48:35] [INFO] [LastChance] Threat detected: Bullet
[00:48:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(918.7238, 1400.833), shooter_id=4841854208244, bullet_pos=(298.4898, 713.2123)
[00:48:35] [INFO] [Bullet] Using shooter_position, distance=926.019592285156
[00:48:35] [INFO] [Bullet] Distance to wall: 926.019592285156 (63.0543768385774% of viewport)
[00:48:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(661.4701, 780.0776), source=ENEMY (Enemy3), range=1469, listeners=9
[00:48:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:48:35] [INFO] [LastChance] Threat detected: Bullet
[00:48:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:35] [ENEMY] [Enemy2] Ragdoll activated
[00:48:35] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[00:48:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(886.2667, 1382.385), shooter_id=4841854208244, bullet_pos=(431.3006, 704.2014)
[00:48:35] [INFO] [Bullet] Using shooter_position, distance=816.655883789063
[00:48:35] [INFO] [Bullet] Distance to wall: 816.655883789063 (55.6076008249512% of viewport)
[00:48:35] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[00:48:35] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[00:48:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(918.7238, 1400.833), shooter_id=4841854208244, bullet_pos=(496.0265, 905.8798)
[00:48:35] [INFO] [Bullet] Using shooter_position, distance=650.885314941406
[00:48:35] [INFO] [Bullet] Distance to wall: 650.885314941406 (44.319977966917% of viewport)
[00:48:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.8008, 804.5074), source=ENEMY (Enemy3), range=1469, listeners=9
[00:48:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:48:35] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[00:48:35] [INFO] [LastChance] Threat detected: @Area2D@6470
[00:48:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:35] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[00:48:35] [ENEMY] [Enemy3] Hit taken, health: 1/2
[00:48:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(593.3558, 777.5987), shooter_id=4839857720356, bullet_pos=(52.71925, 744.2076)
[00:48:35] [INFO] [Bullet] Using shooter_position, distance=541.666809082031
[00:48:35] [INFO] [Bullet] Distance to wall: 541.666809082031 (36.8830890678291% of viewport)
[00:48:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:48:35] [INFO] [Bullet] Starting wall penetration at (52.71925, 744.2076)
[00:48:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(645.0081, 829.3534), source=ENEMY (Enemy3), range=1469, listeners=9
[00:48:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:48:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.9079341888428
[00:48:35] [INFO] [Bullet] Body exited signal received for penetrating body
[00:48:35] [INFO] [Bullet] Exiting penetration at (6.141338, 741.3309) after traveling 41.6666679382324 pixels through wall
[00:48:35] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:48:35] [INFO] [LastChance] Threat detected: @Area2D@6473
[00:48:35] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(732.838, 922.1253), source=ENEMY (Enemy4), range=1469, listeners=9
[00:48:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:48:36] [INFO] [LastChance] Threat detected: @Area2D@6474
[00:48:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(668.9762, 891.2598), shooter_id=4840142932529, bullet_pos=(527.0739, 803.8438)
[00:48:36] [INFO] [Bullet] Using shooter_position, distance=166.666839599609
[00:48:36] [INFO] [Bullet] Distance to wall: 166.666839599609 (11.3486515816313% of viewport)
[00:48:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:48:36] [INFO] [Bullet] Starting wall penetration at (527.0739, 803.8438)
[00:48:36] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.3382301330566
[00:48:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(579.5037, 810.441), shooter_id=4839857720356, bullet_pos=(348.0836, 715.8641)
[00:48:36] [INFO] [Bullet] Using shooter_position, distance=250.000061035156
[00:48:36] [INFO] [Bullet] Distance to wall: 250.000061035156 (17.0229638654599% of viewport)
[00:48:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:48:36] [INFO] [Bullet] Starting wall penetration at (348.0836, 715.8641)
[00:48:36] [INFO] [Bullet] Body exited signal received for penetrating body
[00:48:36] [INFO] [Bullet] Exiting penetration at (487.3412, 779.3672) after traveling 41.6666679382324 pixels through wall
[00:48:36] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:48:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(634.5547, 847.9785), source=ENEMY (Enemy3), range=1469, listeners=9
[00:48:36] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:48:36] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[00:48:36] [INFO] [Bullet] Exiting penetration at (304.8852, 698.2097) after traveling 41.6666679382324 pixels through wall
[00:48:36] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:48:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:48:36] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:48:36] [ENEMY] [Enemy1] Death animation component initialized
[00:48:36] [ENEMY] [Enemy2] Death animation component initialized
[00:48:36] [ENEMY] [Enemy3] Death animation component initialized
[00:48:36] [ENEMY] [Enemy4] Death animation component initialized
[00:48:36] [ENEMY] [Enemy5] Death animation component initialized
[00:48:36] [ENEMY] [Enemy6] Death animation component initialized
[00:48:36] [ENEMY] [Enemy7] Death animation component initialized
[00:48:36] [ENEMY] [Enemy8] Death animation component initialized
[00:48:36] [ENEMY] [Enemy9] Death animation component initialized
[00:48:36] [ENEMY] [Enemy10] Death animation component initialized
[00:48:36] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:48:36] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:48:36] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:48:36] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:48:36] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:48:36] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:48:36] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:48:36] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[00:48:36] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:48:36] [INFO] [ScoreManager] Level started with 10 enemies
[00:48:36] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[00:48:36] [ENEMY] [Enemy1] Registered as sound listener
[00:48:36] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[00:48:36] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[00:48:36] [ENEMY] [Enemy2] Registered as sound listener
[00:48:36] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[00:48:36] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[00:48:36] [ENEMY] [Enemy3] Registered as sound listener
[00:48:36] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[00:48:36] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[00:48:36] [ENEMY] [Enemy4] Registered as sound listener
[00:48:36] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[00:48:36] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[00:48:36] [ENEMY] [Enemy5] Registered as sound listener
[00:48:36] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[00:48:36] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[00:48:36] [ENEMY] [Enemy6] Registered as sound listener
[00:48:36] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[00:48:36] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[00:48:36] [ENEMY] [Enemy7] Registered as sound listener
[00:48:36] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[00:48:36] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[00:48:36] [ENEMY] [Enemy8] Registered as sound listener
[00:48:36] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[00:48:36] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[00:48:36] [ENEMY] [Enemy9] Registered as sound listener
[00:48:36] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[00:48:36] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[00:48:36] [ENEMY] [Enemy10] Registered as sound listener
[00:48:36] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[00:48:36] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:48:36] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:48:36] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:48:36] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:48:36] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:48:36] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:48:36] [INFO] [LastChance] Found player: Player
[00:48:36] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:48:36] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:48:36] [INFO] [LastChance] Connected to player Died signal (C#)
[00:48:36] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:48:36] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:48:36] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1262.2605, 1533.1912)
[00:48:36] [INFO] [Player.Grenade] Step 1 failed: drag not far enough right (13,608398 < 30)
[00:48:36] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1272.4067, 1552.5603)
[00:48:37] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:48:37] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[00:48:37] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:48:37] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:48:37] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1102.2793, 1597.9778)
[00:48:37] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:48:37] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:48:37] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:48:37] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:48:37] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:48:37] [INFO] [Player.Grenade] Step 1 complete! Drag: (177.71045, 11.354248)
[00:48:38] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:48:38] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:48:38] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:48:38] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:48:38] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:48:38] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:48:38] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:48:38] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (251.50362, -125.7238) (281,2 px/s), Swing distance: 23,9
[00:48:38] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,46355852
[00:48:38] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (251.5036, -125.7238), Swing: 23.9, Transfer: 0.10, Final speed: 12.8
[00:48:38] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:48:38] [INFO] [Player.Grenade] Thrown! Velocity: 281,2, Swing: 23,9
[00:48:38] [INFO] [Player.Grenade] State reset to IDLE
[00:48:38] [INFO] [Player.Grenade] Player rotation restored to 0
[00:48:38] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:48:39] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[00:48:40] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:48:40] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:48:40] [ENEMY] [Enemy1] Death animation component initialized
[00:48:40] [ENEMY] [Enemy2] Death animation component initialized
[00:48:40] [ENEMY] [Enemy3] Death animation component initialized
[00:48:40] [ENEMY] [Enemy4] Death animation component initialized
[00:48:40] [ENEMY] [Enemy5] Death animation component initialized
[00:48:40] [ENEMY] [Enemy6] Death animation component initialized
[00:48:40] [ENEMY] [Enemy7] Death animation component initialized
[00:48:40] [ENEMY] [Enemy8] Death animation component initialized
[00:48:40] [ENEMY] [Enemy9] Death animation component initialized
[00:48:40] [ENEMY] [Enemy10] Death animation component initialized
[00:48:40] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:48:40] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:48:40] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:48:40] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:48:40] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:48:40] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:48:40] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:48:40] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[00:48:40] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:48:40] [INFO] [ScoreManager] Level started with 10 enemies
[00:48:40] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 20)
[00:48:40] [ENEMY] [Enemy1] Registered as sound listener
[00:48:40] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[00:48:40] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 21)
[00:48:40] [ENEMY] [Enemy2] Registered as sound listener
[00:48:40] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[00:48:40] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 22)
[00:48:40] [ENEMY] [Enemy3] Registered as sound listener
[00:48:40] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[00:48:40] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 23)
[00:48:40] [ENEMY] [Enemy4] Registered as sound listener
[00:48:40] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[00:48:40] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 24)
[00:48:40] [ENEMY] [Enemy5] Registered as sound listener
[00:48:40] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[00:48:40] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 25)
[00:48:40] [ENEMY] [Enemy6] Registered as sound listener
[00:48:40] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[00:48:40] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 26)
[00:48:40] [ENEMY] [Enemy7] Registered as sound listener
[00:48:40] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[00:48:40] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 27)
[00:48:40] [ENEMY] [Enemy8] Registered as sound listener
[00:48:40] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[00:48:40] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 28)
[00:48:40] [ENEMY] [Enemy9] Registered as sound listener
[00:48:40] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[00:48:40] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 29)
[00:48:40] [ENEMY] [Enemy10] Registered as sound listener
[00:48:40] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[00:48:40] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:48:40] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:48:40] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:48:40] [INFO] [LastChance] Found player: Player
[00:48:40] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:48:40] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:48:40] [INFO] [LastChance] Connected to player Died signal (C#)
[00:48:40] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:48:40] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:48:40] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:48:41] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:48:41] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:48:41] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:48:41] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1109.725, 1430.3015)
[00:48:41] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:48:41] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:48:41] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:48:41] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1111.1666)
[00:48:41] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:48:41] [INFO] [Player.Grenade] Step 1 complete! Drag: (158.53906, -5.984253)
[00:48:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.004, 1519.036), source=ENEMY (Enemy10), range=1469, listeners=29
[00:48:41] [INFO] [SoundPropagation] Cleaned up 19 invalid listeners
[00:48:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:41] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:48:41] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:48:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.385, 1499.191), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.598, 1478.078), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:41] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:48:41] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:48:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1051.686, 1455.743), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:41] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:48:41] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:48:41] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:48:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=5282994327018, bullet_pos=(47.54776, 866.3744)
[00:48:41] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[00:48:41] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[00:48:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.642, 1468.417), shooter_id=5282994327018, bullet_pos=(43.40149, 802.4432)
[00:48:41] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
[00:48:41] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
[00:48:41] [INFO] [Bullet] Distance-based penetration chance: 50.6760656778783%
[00:48:41] [INFO] [Bullet] Starting wall penetration at (43.40149, 802.4432)
[00:48:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=5282994327018, bullet_pos=(245.9015, 709.4586)
[00:48:41] [INFO] [Bullet] Using shooter_position, distance=1144.37329101563
[00:48:41] [INFO] [Bullet] Distance to wall: 1144.37329101563 (77.9224817021821% of viewport)
[00:48:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33.0024871826172
[00:48:41] [INFO] [Bullet] Body exited signal received for penetrating body
[00:48:41] [INFO] [Bullet] Exiting penetration at (4.462528, 776.7229) after traveling 41.6666679382324 pixels through wall
[00:48:41] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:48:41] [INFO] [LastChance] Threat detected: Bullet
[00:48:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.149, 1444.873), shooter_id=5282994327018, bullet_pos=(41.66475, 738.6735)
[00:48:42] [INFO] [Bullet] Using shooter_position, distance=1208.33276367188
[00:48:42] [INFO] [Bullet] Distance to wall: 1208.33276367188 (82.2775998064458% of viewport)
[00:48:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.149, 1444.873), shooter_id=5282994327018, bullet_pos=(106.6345, 699.563)
[00:48:42] [INFO] [Bullet] Using shooter_position, distance=1180.53149414063
[00:48:42] [INFO] [Bullet] Distance to wall: 1180.53149414063 (80.3845602420361% of viewport)
[00:48:42] [INFO] [Bullet] Distance-based penetration chance: 52.8846797176246%
[00:48:42] [INFO] [Bullet] Penetration failed (distance roll)
[00:48:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=5282994327018, bullet_pos=(499.2578, 930.3759)
[00:48:42] [INFO] [Bullet] Using shooter_position, distance=808.508972167969
[00:48:42] [INFO] [Bullet] Distance to wall: 808.508972167969 (55.0528626318215% of viewport)
[00:48:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.6154, 1420.184), shooter_id=5282994327018, bullet_pos=(42.19441, 675.29)
[00:48:42] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
[00:48:42] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
[00:48:42] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[00:48:42] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[00:48:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:42] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[00:48:42] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[00:48:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.6154, 1420.184), shooter_id=5282994327018, bullet_pos=(235.3707, 461.2363)
[00:48:42] [INFO] [Bullet] Using shooter_position, distance=1222.50402832031
[00:48:42] [INFO] [Bullet] Distance to wall: 1222.50402832031 (83.2425472750157% of viewport)
[00:48:42] [INFO] [LastChance] Threat detected: @Area2D@6990
[00:48:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:42] [INFO] [LastChance] Threat detected: @Area2D@6992
[00:48:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=5282994327018, bullet_pos=(61.32706, 1250.33)
[00:48:42] [INFO] [Bullet] Using shooter_position, distance=1048.66564941406
[00:48:42] [INFO] [Bullet] Distance to wall: 1048.66564941406 (71.4055723946973% of viewport)
[00:48:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(618.2114, 769.3549), shooter_id=5280997836212, bullet_pos=(38.82385, 837.0888)
[00:48:42] [INFO] [Bullet] Using shooter_position, distance=583.333374023438
[00:48:42] [INFO] [Bullet] Distance to wall: 583.333374023438 (39.7202420927463% of viewport)
[00:48:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:48:42] [INFO] [Bullet] Starting wall penetration at (38.82385, 837.0888)
[00:48:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.7963485717773
[00:48:42] [INFO] [Bullet] Body exited signal received for penetrating body
[00:48:42] [INFO] [Bullet] Exiting penetration at (-7.527161, 842.5075) after traveling 41.6666717529297 pixels through wall
[00:48:42] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:48:42] [INFO] [LastChance] Threat detected: @Area2D@6994
[00:48:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:42] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[00:48:42] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[00:48:42] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[00:48:42] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:48:42] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[00:48:42] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:48:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.6154, 1420.184), shooter_id=5282994327018, bullet_pos=(677.2834, 832.2061)
[00:48:42] [INFO] [Bullet] Using shooter_position, distance=667.670776367188
[00:48:42] [INFO] [Bullet] Distance to wall: 667.670776367188 (45.4629309011403% of viewport)
[00:48:42] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:48:42] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (0.06667991, -208.1121) (208,1 px/s), Swing distance: 324,6
[00:48:42] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,5704759
[00:48:42] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (0.06668, -208.1121), Swing: 324.6, Transfer: 1.00, Final speed: 98.1
[00:48:42] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:48:42] [INFO] [Player.Grenade] Thrown! Velocity: 208,1, Swing: 324,6
[00:48:42] [INFO] [Player.Grenade] State reset to IDLE
[00:48:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.5111, 759.5538), shooter_id=5280997836212, bullet_pos=(33.43211, 742.3307)
[00:48:42] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
[00:48:42] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
[00:48:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:48:42] [INFO] [Bullet] Starting wall penetration at (33.43211, 742.3307)
[00:48:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.2339363098145
[00:48:42] [INFO] [Bullet] Body exited signal received for penetrating body
[00:48:42] [INFO] [Bullet] Exiting penetration at (-13.21422, 740.9528) after traveling 41.6666717529297 pixels through wall
[00:48:42] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:48:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=5282994327018, bullet_pos=(286.1676, 1392.473)
[00:48:42] [INFO] [Bullet] Using shooter_position, distance=801.937133789063
[00:48:42] [INFO] [Bullet] Distance to wall: 801.937133789063 (54.6053740720565% of viewport)
[00:48:42] [INFO] [LastChance] Threat detected: @Area2D@6997
[00:48:42] [INFO] [LastChance] Triggering last chance effect!
[00:48:42] [INFO] [LastChance] Starting last chance effect:
[00:48:42] [INFO] [LastChance]   - Time will be frozen (except player)
[00:48:42] [INFO] [LastChance]   - Duration: 6.0 real seconds
[00:48:42] [INFO] [LastChance]   - Sepia intensity: 0.70
[00:48:42] [INFO] [LastChance]   - Brightness: 0.60
[00:48:42] [INFO] [LastChance] Pushed bullet @Area2D@6997 from distance 126.8 to 200.0
[00:48:42] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[00:48:42] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[00:48:42] [INFO] [LastChance] Skipping player node: Player
[00:48:42] [INFO] [LastChance] Froze existing grenade: FragGrenade
[00:48:42] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[00:48:42] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[00:48:42] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[00:48:42] [INFO] [Player.Grenade] Player rotation restored to 0
[00:48:42] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:48:43] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[00:48:43] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:48:43] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:48:43] [INFO] [LastChance] Ending last chance effect
[00:48:43] [INFO] [LastChance] All process modes restored
[00:48:43] [INFO] [LastChance] Restored original colors to 5 player sprites
[00:48:43] [ENEMY] [Enemy1] Death animation component initialized
[00:48:43] [ENEMY] [Enemy2] Death animation component initialized
[00:48:43] [ENEMY] [Enemy3] Death animation component initialized
[00:48:43] [ENEMY] [Enemy4] Death animation component initialized
[00:48:43] [ENEMY] [Enemy5] Death animation component initialized
[00:48:43] [ENEMY] [Enemy6] Death animation component initialized
[00:48:43] [ENEMY] [Enemy7] Death animation component initialized
[00:48:43] [ENEMY] [Enemy8] Death animation component initialized
[00:48:43] [ENEMY] [Enemy9] Death animation component initialized
[00:48:43] [ENEMY] [Enemy10] Death animation component initialized
[00:48:43] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:48:43] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:48:43] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:48:43] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:48:43] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:48:43] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:48:43] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:48:43] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[00:48:43] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:48:43] [INFO] [ScoreManager] Level started with 10 enemies
[00:48:43] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[00:48:43] [ENEMY] [Enemy1] Registered as sound listener
[00:48:43] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[00:48:43] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[00:48:43] [ENEMY] [Enemy2] Registered as sound listener
[00:48:43] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[00:48:43] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[00:48:43] [ENEMY] [Enemy3] Registered as sound listener
[00:48:43] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[00:48:43] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[00:48:43] [ENEMY] [Enemy4] Registered as sound listener
[00:48:43] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[00:48:43] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[00:48:43] [ENEMY] [Enemy5] Registered as sound listener
[00:48:43] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[00:48:43] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[00:48:43] [ENEMY] [Enemy6] Registered as sound listener
[00:48:43] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[00:48:43] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[00:48:43] [ENEMY] [Enemy7] Registered as sound listener
[00:48:43] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[00:48:43] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[00:48:43] [ENEMY] [Enemy8] Registered as sound listener
[00:48:43] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[00:48:43] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[00:48:43] [ENEMY] [Enemy9] Registered as sound listener
[00:48:43] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[00:48:43] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[00:48:43] [ENEMY] [Enemy10] Registered as sound listener
[00:48:43] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[00:48:43] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:48:43] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:48:43] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:48:43] [INFO] [LastChance] Found player: Player
[00:48:43] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:48:43] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:48:43] [INFO] [LastChance] Connected to player Died signal (C#)
[00:48:43] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:48:43] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:48:43] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:48:43] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:48:43] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:48:43] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1112.6904, 1577.9407)
[00:48:43] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:48:43] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:48:43] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:48:43] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:48:43] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:48:43] [INFO] [Player.Grenade] Step 1 complete! Drag: (147.52856, 29.387695)
[00:48:43] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:48:43] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:48:43] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:48:43] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:48:44] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:48:44] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:48:44] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:48:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.004, 1519.036), source=ENEMY (Enemy10), range=1469, listeners=20
[00:48:44] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[00:48:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.385, 1499.191), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.598, 1478.078), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1051.686, 1455.743), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:45] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:48:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=5413554620432, bullet_pos=(47.54776, 866.3744)
[00:48:45] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[00:48:45] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[00:48:45] [INFO] [Bullet] Distance-based penetration chance: 50.6760753752023%
[00:48:45] [INFO] [Bullet] Starting wall penetration at (47.54776, 866.3744)
[00:48:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.5065212249756
[00:48:45] [INFO] [Bullet] Body exited signal received for penetrating body
[00:48:45] [INFO] [Bullet] Exiting penetration at (7.594219, 842.2602) after traveling 41.6666717529297 pixels through wall
[00:48:45] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:48:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.642, 1468.417), shooter_id=5413554620432, bullet_pos=(43.40149, 802.4432)
[00:48:45] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
[00:48:45] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
[00:48:45] [INFO] [Bullet] Distance-based penetration chance: 50.6760656778783%
[00:48:45] [INFO] [Bullet] Penetration failed (distance roll)
[00:48:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.149, 1444.873), shooter_id=5413554620432, bullet_pos=(41.66475, 738.6735)
[00:48:45] [INFO] [Bullet] Using shooter_position, distance=1208.33276367188
[00:48:45] [INFO] [Bullet] Distance to wall: 1208.33276367188 (82.2775998064458% of viewport)
[00:48:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.149, 1444.873), shooter_id=5413554620432, bullet_pos=(109.629, 705.0347)
[00:48:45] [INFO] [Bullet] Using shooter_position, distance=1174.75720214844
[00:48:45] [INFO] [Bullet] Distance to wall: 1174.75720214844 (79.9913780823013% of viewport)
[00:48:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.149, 1444.873), shooter_id=5413554620432, bullet_pos=(50.68302, 677.1509)
[00:48:45] [INFO] [Bullet] Using shooter_position, distance=1238.20202636719
[00:48:45] [INFO] [Bullet] Distance to wall: 1238.20202636719 (84.3114528281005% of viewport)
[00:48:45] [INFO] [Bullet] Distance-based penetration chance: 48.3033050338827%
[00:48:45] [INFO] [Bullet] Penetration failed (distance roll)
[00:48:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.6154, 1420.184), shooter_id=5413554620432, bullet_pos=(42.19441, 675.29)
[00:48:45] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
[00:48:45] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
[00:48:45] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[00:48:45] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[00:48:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:45] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[00:48:45] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[00:48:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:45] [INFO] [LastChance] Threat detected: Bullet
[00:48:45] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:45] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[00:48:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.6154, 1420.184), shooter_id=5413554620432, bullet_pos=(509.602, 412.4321)
[00:48:45] [INFO] [Bullet] Using shooter_position, distance=1117.95947265625
[00:48:45] [INFO] [Bullet] Distance to wall: 1117.95947265625 (76.1239162393632% of viewport)
[00:48:45] [INFO] [Bullet] Distance-based penetration chance: 57.8554310540763%
[00:48:45] [INFO] [Bullet] Penetration failed (distance roll)
[00:48:45] [INFO] [LastChance] Threat detected: @Area2D@7260
[00:48:45] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:45] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[00:48:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(618.2114, 769.3549), shooter_id=5411558131823, bullet_pos=(38.82385, 837.0888)
[00:48:45] [INFO] [Bullet] Using shooter_position, distance=583.333374023438
[00:48:45] [INFO] [Bullet] Distance to wall: 583.333374023438 (39.7202420927463% of viewport)
[00:48:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:48:45] [INFO] [Bullet] Starting wall penetration at (38.82385, 837.0888)
[00:48:45] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[00:48:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.7963485717773
[00:48:45] [INFO] [Bullet] Body exited signal received for penetrating body
[00:48:45] [INFO] [Bullet] Exiting penetration at (-7.527161, 842.5075) after traveling 41.6666717529297 pixels through wall
[00:48:45] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:48:45] [INFO] [LastChance] Threat detected: @Area2D@7262
[00:48:45] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:45] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[00:48:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[00:48:45] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[00:48:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:45] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:48:45] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (0.0015258788, -150.22583) (150,2 px/s), Swing distance: 501,7
[00:48:45] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,5707861
[00:48:45] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (0.001526, -150.2258), Swing: 501.7, Transfer: 1.00, Final speed: 70.8
[00:48:45] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:48:45] [INFO] [Player.Grenade] Thrown! Velocity: 150,2, Swing: 501,7
[00:48:45] [INFO] [Player.Grenade] State reset to IDLE
[00:48:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.5897, 758.8366), shooter_id=5411558131823, bullet_pos=(33.72721, 735.4047)
[00:48:45] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
[00:48:45] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
[00:48:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:48:45] [INFO] [Bullet] Starting wall penetration at (33.72721, 735.4047)
[00:48:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 44.938060760498
[00:48:45] [INFO] [Bullet] Body exited signal received for penetrating body
[00:48:45] [INFO] [Bullet] Exiting penetration at (-12.90179, 733.5302) after traveling 41.6666679382324 pixels through wall
[00:48:45] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[00:48:45] [INFO] [LastChance] Threat detected: Bullet
[00:48:45] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[00:48:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:45] [INFO] [GrenadeBase] Grenade landed at (450.0006, 665.0491)
[00:48:45] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:48:45] [INFO] [GrenadeBase] EXPLODED at (450.0006, 665.0491)!
[00:48:45] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(450.0006, 665.0491), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[00:48:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[00:48:45] [ENEMY] [Enemy2] Hit taken, health: 3/4
[00:48:45] [ENEMY] [Enemy2] Hit taken, health: 2/4
[00:48:45] [ENEMY] [Enemy2] Hit taken, health: 1/4
[00:48:45] [ENEMY] [Enemy2] Hit taken, health: 0/4
[00:48:45] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[00:48:45] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:48:45] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 9)
[00:48:45] [INFO] [DeathAnim] Started - Angle: -113.5 deg, Index: 4
[00:48:45] [ENEMY] [Enemy2] Death animation started with hit direction: (-0.398587, -0.91713)
[00:48:45] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 125.4
[00:48:45] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -3.6 degrees
[00:48:45] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 77.9 degrees
[00:48:45] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 164.5 degrees
[00:48:45] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 282.7 degrees
[00:48:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:48:45] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[00:48:45] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:48:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=9
[00:48:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[00:48:46] [INFO] [LastChance] Threat detected: Bullet
[00:48:46] [INFO] [LastChance] Triggering last chance effect!
[00:48:46] [INFO] [LastChance] Starting last chance effect:
[00:48:46] [INFO] [LastChance]   - Time will be frozen (except player)
[00:48:46] [INFO] [LastChance]   - Duration: 6.0 real seconds
[00:48:46] [INFO] [LastChance]   - Sepia intensity: 0.70
[00:48:46] [INFO] [LastChance]   - Brightness: 0.60
[00:48:46] [INFO] [LastChance] Pushed bullet Bullet from distance 126.8 to 200.0
[00:48:46] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[00:48:46] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[00:48:46] [INFO] [LastChance] Skipping player node: Player
[00:48:46] [INFO] [LastChance] Froze existing grenade: FragGrenade
[00:48:46] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[00:48:46] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[00:48:46] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[00:48:46] [INFO] [Player.Grenade] Player rotation restored to 0
[00:48:46] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:48:46] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[00:48:46] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:48:46] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:48:46] [INFO] [LastChance] Ending last chance effect
[00:48:46] [INFO] [LastChance] All process modes restored
[00:48:46] [INFO] [LastChance] Restored original colors to 5 player sprites
[00:48:46] [ENEMY] [Enemy1] Death animation component initialized
[00:48:46] [ENEMY] [Enemy2] Death animation component initialized
[00:48:46] [ENEMY] [Enemy3] Death animation component initialized
[00:48:46] [ENEMY] [Enemy4] Death animation component initialized
[00:48:46] [ENEMY] [Enemy5] Death animation component initialized
[00:48:46] [ENEMY] [Enemy6] Death animation component initialized
[00:48:46] [ENEMY] [Enemy7] Death animation component initialized
[00:48:46] [ENEMY] [Enemy8] Death animation component initialized
[00:48:46] [ENEMY] [Enemy9] Death animation component initialized
[00:48:46] [ENEMY] [Enemy10] Death animation component initialized
[00:48:46] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[00:48:46] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:48:46] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:48:46] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:48:46] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:48:46] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:48:46] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[00:48:46] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[00:48:46] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:48:46] [INFO] [ScoreManager] Level started with 10 enemies
[00:48:46] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[00:48:46] [ENEMY] [Enemy1] Registered as sound listener
[00:48:46] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[00:48:46] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[00:48:46] [ENEMY] [Enemy2] Registered as sound listener
[00:48:46] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[00:48:46] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[00:48:46] [ENEMY] [Enemy3] Registered as sound listener
[00:48:46] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[00:48:46] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[00:48:46] [ENEMY] [Enemy4] Registered as sound listener
[00:48:46] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[00:48:46] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[00:48:46] [ENEMY] [Enemy5] Registered as sound listener
[00:48:46] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[00:48:46] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[00:48:46] [ENEMY] [Enemy6] Registered as sound listener
[00:48:46] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[00:48:46] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[00:48:46] [ENEMY] [Enemy7] Registered as sound listener
[00:48:46] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[00:48:46] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[00:48:46] [ENEMY] [Enemy8] Registered as sound listener
[00:48:46] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[00:48:46] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[00:48:46] [ENEMY] [Enemy9] Registered as sound listener
[00:48:46] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[00:48:46] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[00:48:46] [ENEMY] [Enemy10] Registered as sound listener
[00:48:46] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[00:48:46] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:48:46] [INFO] [Player] Detected weapon: Rifle (default pose)
[00:48:46] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[00:48:46] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:48:46] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:48:46] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:48:46] [INFO] [LastChance] Found player: Player
[00:48:46] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:48:46] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:48:46] [INFO] [LastChance] Connected to player Died signal (C#)
[00:48:46] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[00:48:46] [INFO] [Player.Grenade] G pressed - starting grab animation
[00:48:46] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (753.2728, 1554.564)
[00:48:46] [INFO] [Player.Grenade] Step 1 failed: drag not far enough right (0 < 30)
[00:48:46] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (703.5272, 1554.564)
[00:48:46] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[00:48:46] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:48:46] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:48:46] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[00:48:46] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[00:48:46] [INFO] [Player.Grenade] Step 1 complete! Drag: (243.57819, -26.048096)
[00:48:47] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[00:48:47] [INFO] [Player.Grenade] Step 2 part 1: G+RMB held - now release G to ready the throw
[00:48:47] [INFO] [Player.Grenade.Anim] Phase changed to: Transfer (duration: 0,15s)
[00:48:47] [INFO] [Player.Grenade] Step 2 complete: G released, RMB held - now aiming (velocity-based throwing enabled)
[00:48:47] [INFO] [Player.Grenade.Anim] Phase changed to: WindUp (duration: 0,00s)
[00:48:47] [INFO] [Player.Grenade.Anim] Entered wind-up phase
[00:48:47] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[00:48:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.004, 1519.036), source=ENEMY (Enemy10), range=1469, listeners=19
[00:48:47] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[00:48:47] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.385, 1499.191), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.598, 1478.078), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1051.686, 1455.743), source=ENEMY (Enemy10), range=1469, listeners=10
[00:48:48] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[00:48:48] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[00:48:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=5585739187860, bullet_pos=(47.54776, 866.3744)
[00:48:48] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[00:48:48] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[00:48:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.642, 1468.417), shooter_id=5585739187860, bullet_pos=(43.40149, 802.4432)
[00:48:48] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
[00:48:48] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
[00:48:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=5585739187860, bullet_pos=(238.1508, 700.1298)
[00:48:48] [INFO] [Bullet] Using shooter_position, distance=1156.40649414063
[00:48:48] [INFO] [Bullet] Distance to wall: 1156.40649414063 (78.7418446300728% of viewport)
[00:48:48] [INFO] [LastChance] Threat detected: Bullet
[00:48:48] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.642, 1468.417), shooter_id=5585739187860, bullet_pos=(199.4783, 708.6651)
[00:48:48] [INFO] [Bullet] Using shooter_position, distance=1141.66796875
[00:48:48] [INFO] [Bullet] Distance to wall: 1141.66796875 (77.7382713344667% of viewport)
[00:48:48] [INFO] [Bullet] Distance-based penetration chance: 55.9720167764555%
[00:48:48] [INFO] [Bullet] Starting wall penetration at (199.4783, 708.6651)
[00:48:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 0.29247611761093
[00:48:48] [INFO] [Bullet] Max penetration distance exceeded: 70.8333435058594 >= 48
[00:48:48] [INFO] [Bullet] Body exited signal received for penetrating body
[00:48:48] [INFO] [Bullet] Exiting penetration at (264.4806, 669.6088) after traveling 70.8333435058594 pixels through wall
[00:48:48] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[00:48:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.149, 1444.873), shooter_id=5585739187860, bullet_pos=(41.66475, 738.6735)
[00:48:48] [INFO] [Bullet] Using shooter_position, distance=1208.33276367188
[00:48:48] [INFO] [Bullet] Distance to wall: 1208.33276367188 (82.2775998064458% of viewport)
[00:48:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.149, 1444.873), shooter_id=5585739187860, bullet_pos=(108.1144, 702.1339)
[00:48:48] [INFO] [Bullet] Using shooter_position, distance=1177.76123046875
[00:48:48] [INFO] [Bullet] Distance to wall: 1177.76123046875 (80.1959278945524% of viewport)
[00:48:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1022.149, 1444.873), shooter_id=5585739187860, bullet_pos=(48.43465, 675.8574)
[00:48:48] [INFO] [Bullet] Using shooter_position, distance=1240.76818847656
[00:48:48] [INFO] [Bullet] Distance to wall: 1240.76818847656 (84.4861875248839% of viewport)
[00:48:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=5585739187860, bullet_pos=(502.0861, 954.0538)
[00:48:48] [INFO] [Bullet] Using shooter_position, distance=790.203308105469
[00:48:48] [INFO] [Bullet] Distance to wall: 790.203308105469 (53.8063963046578% of viewport)
[00:48:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.6154, 1420.184), shooter_id=5585739187860, bullet_pos=(42.19441, 675.29)
[00:48:48] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
[00:48:48] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
[00:48:48] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[00:48:48] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[00:48:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:48] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[00:48:48] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[00:48:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:48] [INFO] [LastChance] Threat detected: @Area2D@7539
[00:48:48] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.6154, 1420.184), shooter_id=5585739187860, bullet_pos=(335.9344, 468.6078)
[00:48:48] [INFO] [Bullet] Using shooter_position, distance=1156.73754882813
[00:48:48] [INFO] [Bullet] Distance to wall: 1156.73754882813 (78.7643867525006% of viewport)
[00:48:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:49] [INFO] [LastChance] Threat detected: @Area2D@7541
[00:48:49] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.6154, 1420.184), shooter_id=5585739187860, bullet_pos=(519.0192, 582.7089)
[00:48:49] [INFO] [Bullet] Using shooter_position, distance=962.60400390625
[00:48:49] [INFO] [Bullet] Distance to wall: 962.60400390625 (65.5454766986587% of viewport)
[00:48:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.059, 1490.759), shooter_id=5585739187860, bullet_pos=(48.685, 1296.096)
[00:48:49] [INFO] [Bullet] Using shooter_position, distance=1051.54895019531
[00:48:49] [INFO] [Bullet] Distance to wall: 1051.54895019531 (71.6019016468153% of viewport)
[00:48:49] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[00:48:49] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[00:48:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(618.2114, 769.3549), shooter_id=5583742701267, bullet_pos=(38.82385, 837.0888)
[00:48:49] [INFO] [Bullet] Using shooter_position, distance=583.333374023438
[00:48:49] [INFO] [Bullet] Distance to wall: 583.333374023438 (39.7202420927463% of viewport)
[00:48:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:48:49] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[00:48:49] [INFO] [LastChance] Threat detected: @Area2D@7544
[00:48:49] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:48:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:48:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.6154, 1420.184), shooter_id=5585739187860, bullet_pos=(371.4566, 692.8243)
[00:48:49] [INFO] [Bullet] Using shooter_position, distance=957.148864746094
[00:48:49] [INFO] [Bullet] Distance to wall: 957.148864746094 (65.1740262421273% of viewport)
[00:48:49] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[00:48:49] [INFO] [Player.Grenade] Velocity-based throw! Mouse velocity: (0, -190.06142) (190,1 px/s), Swing distance: 552,4
[00:48:49] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -1,5707964
[00:48:49] [INFO] [GrenadeBase] Velocity-based throw! Mouse vel: (0, -190.0614), Swing: 552.4, Transfer: 1.00, Final speed: 89.6
[00:48:49] [INFO] [FragGrenade] Grenade thrown (velocity-based) - impact detection enabled
[00:48:49] [INFO] [Player.Grenade] Thrown! Velocity: 190,1, Swing: 552,4
[00:48:49] [INFO] [Player.Grenade] State reset to IDLE
[00:48:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:48:49] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[00:48:49] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:48:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[00:48:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[00:48:49] [INFO] [LastChance] Threat detected: @Area2D@7547
[00:48:49] [INFO] [LastChance] Triggering last chance effect!
[00:48:49] [INFO] [LastChance] Starting last chance effect:
[00:48:49] [INFO] [LastChance]   - Time will be frozen (except player)
[00:48:49] [INFO] [LastChance]   - Duration: 6.0 real seconds
[00:48:49] [INFO] [LastChance]   - Sepia intensity: 0.70
[00:48:49] [INFO] [LastChance]   - Brightness: 0.60
[00:48:49] [INFO] [LastChance] Pushed bullet @Area2D@7547 from distance 126.7 to 200.0
[00:48:49] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[00:48:49] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[00:48:49] [INFO] [LastChance] Skipping player node: Player
[00:48:49] [INFO] [LastChance] Froze existing grenade: FragGrenade
[00:48:49] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[00:48:49] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[00:48:49] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[00:48:49] [INFO] [Player.Grenade] Player rotation restored to 0
[00:48:49] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[00:48:49] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[00:48:51] [INFO] ------------------------------------------------------------
[00:48:51] [INFO] GAME LOG ENDED: 2026-01-24T00:48:51
[00:48:51] [INFO] ============================================================
